var P5=Object.defineProperty;var R5=(G,L,Y)=>L in G?P5(G,L,{enumerable:!0,configurable:!0,writable:!0,value:Y}):G[L]=Y;var px=(G,L,Y)=>R5(G,typeof L!="symbol"?L+"":L,Y);(function(){const L=document.createElement("link").relList;if(L&&L.supports&&L.supports("modulepreload"))return;for(const he of document.querySelectorAll('link[rel="modulepreload"]'))oe(he);new MutationObserver(he=>{for(const Ae of he)if(Ae.type==="childList")for(const U of Ae.addedNodes)U.tagName==="LINK"&&U.rel==="modulepreload"&&oe(U)}).observe(document,{childList:!0,subtree:!0});function Y(he){const Ae={};return he.integrity&&(Ae.integrity=he.integrity),he.referrerPolicy&&(Ae.referrerPolicy=he.referrerPolicy),he.crossOrigin==="use-credentials"?Ae.credentials="include":he.crossOrigin==="anonymous"?Ae.credentials="omit":Ae.credentials="same-origin",Ae}function oe(he){if(he.ep)return;he.ep=!0;const Ae=Y(he);fetch(he.href,Ae)}})();/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function sm(G,L){const Y=new Set(G.split(","));return oe=>Y.has(oe)}const co={},Wv=[],uu=()=>{},I5=()=>!1,X0=G=>G.charCodeAt(0)===111&&G.charCodeAt(1)===110&&(G.charCodeAt(2)>122||G.charCodeAt(2)<97),lm=G=>G.startsWith("onUpdate:"),Go=Object.assign,um=(G,L)=>{const Y=G.indexOf(L);Y>-1&&G.splice(Y,1)},D5=Object.prototype.hasOwnProperty,Ca=(G,L)=>D5.call(G,L),Ji=Array.isArray,Vd=G=>Z0(G)==="[object Map]",k5=G=>Z0(G)==="[object Set]",ca=G=>typeof G=="function",as=G=>typeof G=="string",pp=G=>typeof G=="symbol",_o=G=>G!==null&&typeof G=="object",u3=G=>(_o(G)||ca(G))&&ca(G.then)&&ca(G.catch),z5=Object.prototype.toString,Z0=G=>z5.call(G),O5=G=>Z0(G).slice(8,-1),F5=G=>Z0(G)==="[object Object]",fm=G=>as(G)&&G!=="NaN"&&G[0]!=="-"&&""+parseInt(G,10)===G,Hd=sm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),j0=G=>{const L=Object.create(null);return Y=>L[Y]||(L[Y]=G(Y))},B5=/-(\w)/g,Tf=j0(G=>G.replace(B5,(L,Y)=>Y?Y.toUpperCase():"")),N5=/\B([A-Z])/g,td=j0(G=>G.replace(N5,"-$1").toLowerCase()),K0=j0(G=>G.charAt(0).toUpperCase()+G.slice(1)),iy=j0(G=>G?`on${K0(G)}`:""),uh=(G,L)=>!Object.is(G,L),ay=(G,...L)=>{for(let Y=0;Y<G.length;Y++)G[Y](...L)},f3=(G,L,Y,oe=!1)=>{Object.defineProperty(G,L,{configurable:!0,enumerable:!1,writable:oe,value:Y})},U5=G=>{const L=parseFloat(G);return isNaN(L)?G:L},V5=G=>{const L=as(G)?Number(G):NaN;return isNaN(L)?G:L};let gx;const c3=()=>gx||(gx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function J0(G){if(Ji(G)){const L={};for(let Y=0;Y<G.length;Y++){const oe=G[Y],he=as(oe)?Y5(oe):J0(oe);if(he)for(const Ae in he)L[Ae]=he[Ae]}return L}else if(as(G)||_o(G))return G}const H5=/;(?![^(]*\))/g,G5=/:([^]+)/,W5=/\/\*[^]*?\*\//g;function Y5(G){const L={};return G.replace(W5,"").split(H5).forEach(Y=>{if(Y){const oe=Y.split(G5);oe.length>1&&(L[oe[0].trim()]=oe[1].trim())}}),L}function nc(G){let L="";if(as(G))L=G;else if(Ji(G))for(let Y=0;Y<G.length;Y++){const oe=nc(G[Y]);oe&&(L+=oe+" ")}else if(_o(G))for(const Y in G)G[Y]&&(L+=Y+" ");return L.trim()}const X5="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z5=sm(X5);function h3(G){return!!G||G===""}/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rl;class v3{constructor(L=!1){this.detached=L,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Rl,!L&&Rl&&(this.index=(Rl.scopes||(Rl.scopes=[])).push(this)-1)}get active(){return this._active}run(L){if(this._active){const Y=Rl;try{return Rl=this,L()}finally{Rl=Y}}}on(){Rl=this}off(){Rl=this.parent}stop(L){if(this._active){let Y,oe;for(Y=0,oe=this.effects.length;Y<oe;Y++)this.effects[Y].stop();for(Y=0,oe=this.cleanups.length;Y<oe;Y++)this.cleanups[Y]();if(this.scopes)for(Y=0,oe=this.scopes.length;Y<oe;Y++)this.scopes[Y].stop(!0);if(!this.detached&&this.parent&&!L){const he=this.parent.scopes.pop();he&&he!==this&&(this.parent.scopes[this.index]=he,he.index=this.index)}this.parent=void 0,this._active=!1}}}function d3(G){return new v3(G)}function j5(G,L=Rl){L&&L.active&&L.effects.push(G)}function p3(){return Rl}function K5(G){Rl&&Rl.cleanups.push(G)}let $h;class cm{constructor(L,Y,oe,he){this.fn=L,this.trigger=Y,this.scheduler=oe,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,j5(this,he)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,hh();for(let L=0;L<this._depsLength;L++){const Y=this.deps[L];if(Y.computed){if(Y.computed.effect._dirtyLevel===2)return!0;if(J5(Y.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),vh()}return this._dirtyLevel>=5}set dirty(L){this._dirtyLevel=L?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let L=oh,Y=$h;try{return oh=!0,$h=this,this._runnings++,yx(this),this.fn()}finally{mx(this),this._runnings--,$h=Y,oh=L}}stop(){this.active&&(yx(this),mx(this),this.onStop&&this.onStop(),this.active=!1)}}function J5(G){return G.value}function yx(G){G._trackId++,G._depsLength=0}function mx(G){if(G.deps.length>G._depsLength){for(let L=G._depsLength;L<G.deps.length;L++)g3(G.deps[L],G);G.deps.length=G._depsLength}}function g3(G,L){const Y=G.get(L);Y!==void 0&&L._trackId!==Y&&(G.delete(L),G.size===0&&G.cleanup())}let oh=!0,Ry=0;const y3=[];function hh(){y3.push(oh),oh=!1}function vh(){const G=y3.pop();oh=G===void 0?!0:G}function hm(){Ry++}function vm(){for(Ry--;!Ry&&Iy.length;)Iy.shift()()}function m3(G,L,Y){if(L.get(G)!==G._trackId){L.set(G,G._trackId);const oe=G.deps[G._depsLength];oe!==L?(oe&&g3(oe,G),G.deps[G._depsLength++]=L):G._depsLength++}}const Iy=[];function x3(G,L,Y){hm();for(const oe of G.keys()){if(!G.computed&&oe.computed&&G.get(oe)===oe._trackId&&oe._runnings>0){oe._dirtyLevel=2;continue}let he;oe._dirtyLevel<L&&(he??(he=G.get(oe)===oe._trackId))&&(oe._shouldSchedule||(oe._shouldSchedule=oe._dirtyLevel===0),oe.computed&&oe._dirtyLevel===2&&(oe._shouldSchedule=!0),oe._dirtyLevel=L),oe._shouldSchedule&&(he??(he=G.get(oe)===oe._trackId))&&(oe.trigger(),(!oe._runnings||oe.allowRecurse)&&oe._dirtyLevel!==3&&(oe._shouldSchedule=!1,oe.scheduler&&Iy.push(oe.scheduler)))}vm()}const b3=(G,L)=>{const Y=new Map;return Y.cleanup=G,Y.computed=L,Y},P0=new WeakMap,qh=Symbol(""),Dy=Symbol("");function pl(G,L,Y){if(oh&&$h){let oe=P0.get(G);oe||P0.set(G,oe=new Map);let he=oe.get(Y);he||oe.set(Y,he=b3(()=>oe.delete(Y))),m3($h,he)}}function tc(G,L,Y,oe,he,Ae){const U=P0.get(G);if(!U)return;let F=[];if(L==="clear")F=[...U.values()];else if(Y==="length"&&Ji(G)){const e=Number(oe);U.forEach((d,S)=>{(S==="length"||!pp(S)&&S>=e)&&F.push(d)})}else switch(Y!==void 0&&F.push(U.get(Y)),L){case"add":Ji(G)?fm(Y)&&F.push(U.get("length")):(F.push(U.get(qh)),Vd(G)&&F.push(U.get(Dy)));break;case"delete":Ji(G)||(F.push(U.get(qh)),Vd(G)&&F.push(U.get(Dy)));break;case"set":Vd(G)&&F.push(U.get(qh));break}hm();for(const e of F)e&&x3(e,5);vm()}function Q5(G,L){const Y=P0.get(G);return Y&&Y.get(L)}const $5=sm("__proto__,__v_isRef,__isVue"),w3=new Set(Object.getOwnPropertyNames(Symbol).filter(G=>G!=="arguments"&&G!=="caller").map(G=>Symbol[G]).filter(pp)),xx=q5();function q5(){const G={};return["includes","indexOf","lastIndexOf"].forEach(L=>{G[L]=function(...Y){const oe=La(this);for(let Ae=0,U=this.length;Ae<U;Ae++)pl(oe,"get",Ae+"");const he=oe[L](...Y);return he===-1||he===!1?oe[L](...Y.map(La)):he}}),["push","pop","shift","unshift","splice"].forEach(L=>{G[L]=function(...Y){hh(),hm();const oe=La(this)[L].apply(this,Y);return vm(),vh(),oe}}),G}function eA(G){pp(G)||(G=String(G));const L=La(this);return pl(L,"has",G),L.hasOwnProperty(G)}class T3{constructor(L=!1,Y=!1){this._isReadonly=L,this._isShallow=Y}get(L,Y,oe){const he=this._isReadonly,Ae=this._isShallow;if(Y==="__v_isReactive")return!he;if(Y==="__v_isReadonly")return he;if(Y==="__v_isShallow")return Ae;if(Y==="__v_raw")return oe===(he?Ae?vA:S3:Ae?E3:M3).get(L)||Object.getPrototypeOf(L)===Object.getPrototypeOf(oe)?L:void 0;const U=Ji(L);if(!he){if(U&&Ca(xx,Y))return Reflect.get(xx,Y,oe);if(Y==="hasOwnProperty")return eA}const F=Reflect.get(L,Y,oe);return(pp(Y)?w3.has(Y):$5(Y))||(he||pl(L,"get",Y),Ae)?F:Ko(F)?U&&fm(Y)?F:F.value:_o(F)?he?L3(F):gp(F):F}}class A3 extends T3{constructor(L=!1){super(!1,L)}set(L,Y,oe,he){let Ae=L[Y];if(!this._isShallow){const e=Qd(Ae);if(!R0(oe)&&!Qd(oe)&&(Ae=La(Ae),oe=La(oe)),!Ji(L)&&Ko(Ae)&&!Ko(oe))return e?!1:(Ae.value=oe,!0)}const U=Ji(L)&&fm(Y)?Number(Y)<L.length:Ca(L,Y),F=Reflect.set(L,Y,oe,he);return L===La(he)&&(U?uh(oe,Ae)&&tc(L,"set",Y,oe):tc(L,"add",Y,oe)),F}deleteProperty(L,Y){const oe=Ca(L,Y);L[Y];const he=Reflect.deleteProperty(L,Y);return he&&oe&&tc(L,"delete",Y,void 0),he}has(L,Y){const oe=Reflect.has(L,Y);return(!pp(Y)||!w3.has(Y))&&pl(L,"has",Y),oe}ownKeys(L){return pl(L,"iterate",Ji(L)?"length":qh),Reflect.ownKeys(L)}}class tA extends T3{constructor(L=!1){super(!0,L)}set(L,Y){return!0}deleteProperty(L,Y){return!0}}const rA=new A3,nA=new tA,iA=new A3(!0);const dm=G=>G,Q0=G=>Reflect.getPrototypeOf(G);function a0(G,L,Y=!1,oe=!1){G=G.__v_raw;const he=La(G),Ae=La(L);Y||(uh(L,Ae)&&pl(he,"get",L),pl(he,"get",Ae));const{has:U}=Q0(he),F=oe?dm:Y?mm:$d;if(U.call(he,L))return F(G.get(L));if(U.call(he,Ae))return F(G.get(Ae));G!==he&&G.get(L)}function o0(G,L=!1){const Y=this.__v_raw,oe=La(Y),he=La(G);return L||(uh(G,he)&&pl(oe,"has",G),pl(oe,"has",he)),G===he?Y.has(G):Y.has(G)||Y.has(he)}function s0(G,L=!1){return G=G.__v_raw,!L&&pl(La(G),"iterate",qh),Reflect.get(G,"size",G)}function bx(G){G=La(G);const L=La(this);return Q0(L).has.call(L,G)||(L.add(G),tc(L,"add",G,G)),this}function wx(G,L){L=La(L);const Y=La(this),{has:oe,get:he}=Q0(Y);let Ae=oe.call(Y,G);Ae||(G=La(G),Ae=oe.call(Y,G));const U=he.call(Y,G);return Y.set(G,L),Ae?uh(L,U)&&tc(Y,"set",G,L):tc(Y,"add",G,L),this}function Tx(G){const L=La(this),{has:Y,get:oe}=Q0(L);let he=Y.call(L,G);he||(G=La(G),he=Y.call(L,G)),oe&&oe.call(L,G);const Ae=L.delete(G);return he&&tc(L,"delete",G,void 0),Ae}function Ax(){const G=La(this),L=G.size!==0,Y=G.clear();return L&&tc(G,"clear",void 0,void 0),Y}function l0(G,L){return function(oe,he){const Ae=this,U=Ae.__v_raw,F=La(U),e=L?dm:G?mm:$d;return!G&&pl(F,"iterate",qh),U.forEach((d,S)=>oe.call(he,e(d),e(S),Ae))}}function u0(G,L,Y){return function(...oe){const he=this.__v_raw,Ae=La(he),U=Vd(Ae),F=G==="entries"||G===Symbol.iterator&&U,e=G==="keys"&&U,d=he[G](...oe),S=Y?dm:L?mm:$d;return!L&&pl(Ae,"iterate",e?Dy:qh),{next(){const{value:n,done:E}=d.next();return E?{value:n,done:E}:{value:F?[S(n[0]),S(n[1])]:S(n),done:E}},[Symbol.iterator](){return this}}}}function Yc(G){return function(...L){return G==="delete"?!1:G==="clear"?void 0:this}}function aA(){const G={get(Ae){return a0(this,Ae)},get size(){return s0(this)},has:o0,add:bx,set:wx,delete:Tx,clear:Ax,forEach:l0(!1,!1)},L={get(Ae){return a0(this,Ae,!1,!0)},get size(){return s0(this)},has:o0,add:bx,set:wx,delete:Tx,clear:Ax,forEach:l0(!1,!0)},Y={get(Ae){return a0(this,Ae,!0)},get size(){return s0(this,!0)},has(Ae){return o0.call(this,Ae,!0)},add:Yc("add"),set:Yc("set"),delete:Yc("delete"),clear:Yc("clear"),forEach:l0(!0,!1)},oe={get(Ae){return a0(this,Ae,!0,!0)},get size(){return s0(this,!0)},has(Ae){return o0.call(this,Ae,!0)},add:Yc("add"),set:Yc("set"),delete:Yc("delete"),clear:Yc("clear"),forEach:l0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Ae=>{G[Ae]=u0(Ae,!1,!1),Y[Ae]=u0(Ae,!0,!1),L[Ae]=u0(Ae,!1,!0),oe[Ae]=u0(Ae,!0,!0)}),[G,Y,L,oe]}const[oA,sA,lA,uA]=aA();function pm(G,L){const Y=L?G?uA:lA:G?sA:oA;return(oe,he,Ae)=>he==="__v_isReactive"?!G:he==="__v_isReadonly"?G:he==="__v_raw"?oe:Reflect.get(Ca(Y,he)&&he in oe?Y:oe,he,Ae)}const fA={get:pm(!1,!1)},cA={get:pm(!1,!0)},hA={get:pm(!0,!1)};const M3=new WeakMap,E3=new WeakMap,S3=new WeakMap,vA=new WeakMap;function dA(G){switch(G){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pA(G){return G.__v_skip||!Object.isExtensible(G)?0:dA(O5(G))}function gp(G){return Qd(G)?G:gm(G,!1,rA,fA,M3)}function C3(G){return gm(G,!1,iA,cA,E3)}function L3(G){return gm(G,!0,nA,hA,S3)}function gm(G,L,Y,oe,he){if(!_o(G)||G.__v_raw&&!(L&&G.__v_isReactive))return G;const Ae=he.get(G);if(Ae)return Ae;const U=pA(G);if(U===0)return G;const F=new Proxy(G,U===2?oe:Y);return he.set(G,F),F}function ev(G){return Qd(G)?ev(G.__v_raw):!!(G&&G.__v_isReactive)}function Qd(G){return!!(G&&G.__v_isReadonly)}function R0(G){return!!(G&&G.__v_isShallow)}function _3(G){return G?!!G.__v_raw:!1}function La(G){const L=G&&G.__v_raw;return L?La(L):G}function ym(G){return Object.isExtensible(G)&&f3(G,"__v_skip",!0),G}const $d=G=>_o(G)?gp(G):G,mm=G=>_o(G)?L3(G):G;class P3{constructor(L,Y,oe,he){this.getter=L,this._setter=Y,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new cm(()=>L(this._value),()=>T0(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!he,this.__v_isReadonly=oe}get value(){const L=La(this);return(!L._cacheable||L.effect.dirty)&&uh(L._value,L._value=L.effect.run())&&T0(L,5),R3(L),L.effect._dirtyLevel>=2&&T0(L,3),L._value}set value(L){this._setter(L)}get _dirty(){return this.effect.dirty}set _dirty(L){this.effect.dirty=L}}function gA(G,L,Y=!1){let oe,he;const Ae=ca(G);return Ae?(oe=G,he=uu):(oe=G.get,he=G.set),new P3(oe,he,Ae||!he,Y)}function R3(G){var L;oh&&$h&&(G=La(G),m3($h,(L=G.dep)!=null?L:G.dep=b3(()=>G.dep=void 0,G instanceof P3?G:void 0)))}function T0(G,L=5,Y,oe){G=La(G);const he=G.dep;he&&x3(he,L)}function Ko(G){return!!(G&&G.__v_isRef===!0)}function io(G){return I3(G,!1)}function yA(G){return I3(G,!0)}function I3(G,L){return Ko(G)?G:new mA(G,L)}class mA{constructor(L,Y){this.__v_isShallow=Y,this.dep=void 0,this.__v_isRef=!0,this._rawValue=Y?L:La(L),this._value=Y?L:$d(L)}get value(){return R3(this),this._value}set value(L){const Y=this.__v_isShallow||R0(L)||Qd(L);L=Y?L:La(L),uh(L,this._rawValue)&&(this._rawValue,this._rawValue=L,this._value=Y?L:$d(L),T0(this,5))}}function rc(G){return Ko(G)?G.value:G}const xA={get:(G,L,Y)=>rc(Reflect.get(G,L,Y)),set:(G,L,Y,oe)=>{const he=G[L];return Ko(he)&&!Ko(Y)?(he.value=Y,!0):Reflect.set(G,L,Y,oe)}};function D3(G){return ev(G)?G:new Proxy(G,xA)}function bA(G){const L=Ji(G)?new Array(G.length):{};for(const Y in G)L[Y]=TA(G,Y);return L}class wA{constructor(L,Y,oe){this._object=L,this._key=Y,this._defaultValue=oe,this.__v_isRef=!0}get value(){const L=this._object[this._key];return L===void 0?this._defaultValue:L}set value(L){this._object[this._key]=L}get dep(){return Q5(La(this._object),this._key)}}function TA(G,L,Y){const oe=G[L];return Ko(oe)?oe:new wA(G,L,Y)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sh(G,L,Y,oe){try{return oe?G(...oe):G()}catch(he){$0(he,L,Y)}}function fu(G,L,Y,oe){if(ca(G)){const he=sh(G,L,Y,oe);return he&&u3(he)&&he.catch(Ae=>{$0(Ae,L,Y)}),he}if(Ji(G)){const he=[];for(let Ae=0;Ae<G.length;Ae++)he.push(fu(G[Ae],L,Y,oe));return he}}function $0(G,L,Y,oe=!0){const he=L?L.vnode:null;if(L){let Ae=L.parent;const U=L.proxy,F=`https://vuejs.org/error-reference/#runtime-${Y}`;for(;Ae;){const d=Ae.ec;if(d){for(let S=0;S<d.length;S++)if(d[S](G,U,F)===!1)return}Ae=Ae.parent}const e=L.appContext.config.errorHandler;if(e){hh(),sh(e,null,10,[G,U,F]),vh();return}}AA(G,Y,he,oe)}function AA(G,L,Y,oe=!0){console.error(G)}let qd=!1,ky=!1;const Os=[];let yf=0;const Yv=[];let eh=null,jh=0;const k3=Promise.resolve();let xm=null;function bm(G){const L=xm||k3;return G?L.then(this?G.bind(this):G):L}function MA(G){let L=yf+1,Y=Os.length;for(;L<Y;){const oe=L+Y>>>1,he=Os[oe],Ae=ep(he);Ae<G||Ae===G&&he.pre?L=oe+1:Y=oe}return L}function wm(G){(!Os.length||!Os.includes(G,qd&&G.allowRecurse?yf+1:yf))&&(G.id==null?Os.push(G):Os.splice(MA(G.id),0,G),z3())}function z3(){!qd&&!ky&&(ky=!0,xm=k3.then(F3))}function EA(G){const L=Os.indexOf(G);L>yf&&Os.splice(L,1)}function SA(G){Ji(G)?Yv.push(...G):(!eh||!eh.includes(G,G.allowRecurse?jh+1:jh))&&Yv.push(G),z3()}function Mx(G,L,Y=qd?yf+1:0){for(;Y<Os.length;Y++){const oe=Os[Y];if(oe&&oe.pre){if(G&&oe.id!==G.uid)continue;Os.splice(Y,1),Y--,oe()}}}function O3(G){if(Yv.length){const L=[...new Set(Yv)].sort((Y,oe)=>ep(Y)-ep(oe));if(Yv.length=0,eh){eh.push(...L);return}for(eh=L,jh=0;jh<eh.length;jh++){const Y=eh[jh];Y.active!==!1&&Y()}eh=null,jh=0}}const ep=G=>G.id==null?1/0:G.id,CA=(G,L)=>{const Y=ep(G)-ep(L);if(Y===0){if(G.pre&&!L.pre)return-1;if(L.pre&&!G.pre)return 1}return Y};function F3(G){ky=!1,qd=!0,Os.sort(CA);try{for(yf=0;yf<Os.length;yf++){const L=Os[yf];L&&L.active!==!1&&sh(L,null,14)}}finally{yf=0,Os.length=0,O3(),qd=!1,xm=null,(Os.length||Yv.length)&&F3()}}function LA(G,L,...Y){if(G.isUnmounted)return;const oe=G.vnode.props||co;let he=Y;const Ae=L.startsWith("update:"),U=Ae&&L.slice(7);if(U&&U in oe){const S=`${U==="modelValue"?"model":U}Modifiers`,{number:n,trim:E}=oe[S]||co;E&&(he=Y.map(T=>as(T)?T.trim():T)),n&&(he=Y.map(U5))}let F,e=oe[F=iy(L)]||oe[F=iy(Tf(L))];!e&&Ae&&(e=oe[F=iy(td(L))]),e&&fu(e,G,6,he);const d=oe[F+"Once"];if(d){if(!G.emitted)G.emitted={};else if(G.emitted[F])return;G.emitted[F]=!0,fu(d,G,6,he)}}function B3(G,L,Y=!1){const oe=L.emitsCache,he=oe.get(G);if(he!==void 0)return he;const Ae=G.emits;let U={},F=!1;if(!ca(G)){const e=d=>{const S=B3(d,L,!0);S&&(F=!0,Go(U,S))};!Y&&L.mixins.length&&L.mixins.forEach(e),G.extends&&e(G.extends),G.mixins&&G.mixins.forEach(e)}return!Ae&&!F?(_o(G)&&oe.set(G,null),null):(Ji(Ae)?Ae.forEach(e=>U[e]=null):Go(U,Ae),_o(G)&&oe.set(G,U),U)}function q0(G,L){return!G||!X0(L)?!1:(L=L.slice(2).replace(/Once$/,""),Ca(G,L[0].toLowerCase()+L.slice(1))||Ca(G,td(L))||Ca(G,L))}let Ts=null,eg=null;function I0(G){const L=Ts;return Ts=G,eg=G&&G.type.__scopeId||null,L}function rd(G){eg=G}function nd(){eg=null}function rs(G,L=Ts,Y){if(!L||G._n)return G;const oe=(...he)=>{oe._d&&Fx(-1);const Ae=I0(L);let U;try{U=G(...he)}finally{I0(Ae),oe._d&&Fx(1)}return U};return oe._n=!0,oe._c=!0,oe._d=!0,oe}function oy(G){const{type:L,vnode:Y,proxy:oe,withProxy:he,propsOptions:[Ae],slots:U,attrs:F,emit:e,render:d,renderCache:S,props:n,data:E,setupState:T,ctx:v,inheritAttrs:g}=G,r=I0(G);let t,o;try{if(Y.shapeFlag&4){const f=he||oe,u=f;t=gf(d.call(u,f,S,n,T,E,v)),o=F}else{const f=L;t=gf(f.length>1?f(n,{attrs:F,slots:U,emit:e}):f(n,null)),o=L.props?F:_A(F)}}catch(f){Yd.length=0,$0(f,G,1),t=Ga(hl)}let i=t;if(o&&g!==!1){const f=Object.keys(o),{shapeFlag:u}=i;f.length&&u&7&&(Ae&&f.some(lm)&&(o=PA(o,Ae)),i=fh(i,o,!1,!0))}return Y.dirs&&(i=fh(i,null,!1,!0),i.dirs=i.dirs?i.dirs.concat(Y.dirs):Y.dirs),Y.transition&&(i.transition=Y.transition),t=i,I0(r),t}const _A=G=>{let L;for(const Y in G)(Y==="class"||Y==="style"||X0(Y))&&((L||(L={}))[Y]=G[Y]);return L},PA=(G,L)=>{const Y={};for(const oe in G)(!lm(oe)||!(oe.slice(9)in L))&&(Y[oe]=G[oe]);return Y};function RA(G,L,Y){const{props:oe,children:he,component:Ae}=G,{props:U,children:F,patchFlag:e}=L,d=Ae.emitsOptions;if(L.dirs||L.transition)return!0;if(Y&&e>=0){if(e&1024)return!0;if(e&16)return oe?Ex(oe,U,d):!!U;if(e&8){const S=L.dynamicProps;for(let n=0;n<S.length;n++){const E=S[n];if(U[E]!==oe[E]&&!q0(d,E))return!0}}}else return(he||F)&&(!F||!F.$stable)?!0:oe===U?!1:oe?U?Ex(oe,U,d):!0:!!U;return!1}function Ex(G,L,Y){const oe=Object.keys(L);if(oe.length!==Object.keys(G).length)return!0;for(let he=0;he<oe.length;he++){const Ae=oe[he];if(L[Ae]!==G[Ae]&&!q0(Y,Ae))return!0}return!1}function IA({vnode:G,parent:L},Y){for(;L;){const oe=L.subTree;if(oe.suspense&&oe.suspense.activeBranch===G&&(oe.el=G.el),oe===G)(G=L.vnode).el=Y,L=L.parent;else break}}const N3="components";function tg(G,L){return kA(N3,G,!0,L)||G}const DA=Symbol.for("v-ndc");function kA(G,L,Y=!0,oe=!1){const he=Ts||ns;if(he){const Ae=he.type;if(G===N3){const F=R6(Ae,!1);if(F&&(F===L||F===Tf(L)||F===K0(Tf(L))))return Ae}const U=Sx(he[G]||Ae[G],L)||Sx(he.appContext[G],L);return!U&&oe?Ae:U}}function Sx(G,L){return G&&(G[L]||G[Tf(L)]||G[K0(Tf(L))])}const zA=G=>G.__isSuspense;function OA(G,L){L&&L.pendingBranch?Ji(G)?L.effects.push(...G):L.effects.push(G):SA(G)}function rg(G,L,Y=ns,oe=!1){if(Y){const he=Y[G]||(Y[G]=[]),Ae=L.__weh||(L.__weh=(...U)=>{hh();const F=yp(Y),e=fu(L,Y,G,U);return F(),vh(),e});return oe?he.unshift(Ae):he.push(Ae),Ae}}const ac=G=>(L,Y=ns)=>{(!ag||G==="sp")&&rg(G,(...oe)=>L(...oe),Y)},FA=ac("bm"),hu=ac("m"),BA=ac("bu"),NA=ac("u"),U3=ac("bum"),V3=ac("um"),UA=ac("sp"),VA=ac("rtg"),HA=ac("rtc");function GA(G,L=ns){rg("ec",G,L)}function Hh(G,L,Y,oe){const he=G.dirs,Ae=L&&L.dirs;for(let U=0;U<he.length;U++){const F=he[U];Ae&&(F.oldValue=Ae[U].value);let e=F.dir[oe];e&&(hh(),fu(e,Y,8,[G.el,F,G,L]),vh())}}/*! #__NO_SIDE_EFFECTS__ */function H3(G,L){return ca(G)?Go({name:G.name},L,{setup:G}):G}const Gd=G=>!!G.type.__asyncLoader;function WA(G,L,Y={},oe,he){if(Ts.isCE||Ts.parent&&Gd(Ts.parent)&&Ts.parent.isCE)return Ga("slot",Y,oe);let Ae=G[L];Ae&&Ae._c&&(Ae._d=!1),_a();const U=Ae&&G3(Ae(Y)),F=dl(cl,{key:Y.key||U&&U.key||`_${L}`},U||[],U&&G._===1?64:-2);return F.scopeId&&(F.slotScopeIds=[F.scopeId+"-s"]),Ae&&Ae._c&&(Ae._d=!0),F}function G3(G){return G.some(L=>z0(L)?!(L.type===hl||L.type===cl&&!G3(L.children)):!0)?G:null}const zy=G=>G?cw(G)?Em(G):zy(G.parent):null,Wd=Go(Object.create(null),{$:G=>G,$el:G=>G.vnode.el,$data:G=>G.data,$props:G=>G.props,$attrs:G=>G.attrs,$slots:G=>G.slots,$refs:G=>G.refs,$parent:G=>zy(G.parent),$root:G=>zy(G.root),$emit:G=>G.emit,$options:G=>Tm(G),$forceUpdate:G=>G.f||(G.f=()=>{G.effect.dirty=!0,wm(G.update)}),$nextTick:G=>G.n||(G.n=bm.bind(G.proxy)),$watch:G=>c6.bind(G)}),sy=(G,L)=>G!==co&&!G.__isScriptSetup&&Ca(G,L),YA={get({_:G},L){if(L==="__v_skip")return!0;const{ctx:Y,setupState:oe,data:he,props:Ae,accessCache:U,type:F,appContext:e}=G;let d;if(L[0]!=="$"){const T=U[L];if(T!==void 0)switch(T){case 1:return oe[L];case 2:return he[L];case 4:return Y[L];case 3:return Ae[L]}else{if(sy(oe,L))return U[L]=1,oe[L];if(he!==co&&Ca(he,L))return U[L]=2,he[L];if((d=G.propsOptions[0])&&Ca(d,L))return U[L]=3,Ae[L];if(Y!==co&&Ca(Y,L))return U[L]=4,Y[L];Oy&&(U[L]=0)}}const S=Wd[L];let n,E;if(S)return L==="$attrs"&&pl(G.attrs,"get",""),S(G);if((n=F.__cssModules)&&(n=n[L]))return n;if(Y!==co&&Ca(Y,L))return U[L]=4,Y[L];if(E=e.config.globalProperties,Ca(E,L))return E[L]},set({_:G},L,Y){const{data:oe,setupState:he,ctx:Ae}=G;return sy(he,L)?(he[L]=Y,!0):oe!==co&&Ca(oe,L)?(oe[L]=Y,!0):Ca(G.props,L)||L[0]==="$"&&L.slice(1)in G?!1:(Ae[L]=Y,!0)},has({_:{data:G,setupState:L,accessCache:Y,ctx:oe,appContext:he,propsOptions:Ae}},U){let F;return!!Y[U]||G!==co&&Ca(G,U)||sy(L,U)||(F=Ae[0])&&Ca(F,U)||Ca(oe,U)||Ca(Wd,U)||Ca(he.config.globalProperties,U)},defineProperty(G,L,Y){return Y.get!=null?G._.accessCache[L]=0:Ca(Y,"value")&&this.set(G,L,Y.value,null),Reflect.defineProperty(G,L,Y)}};function Cx(G){return Ji(G)?G.reduce((L,Y)=>(L[Y]=null,L),{}):G}let Oy=!0;function XA(G){const L=Tm(G),Y=G.proxy,oe=G.ctx;Oy=!1,L.beforeCreate&&Lx(L.beforeCreate,G,"bc");const{data:he,computed:Ae,methods:U,watch:F,provide:e,inject:d,created:S,beforeMount:n,mounted:E,beforeUpdate:T,updated:v,activated:g,deactivated:r,beforeDestroy:t,beforeUnmount:o,destroyed:i,unmounted:f,render:u,renderTracked:l,renderTriggered:m,errorCaptured:h,serverPrefetch:w,expose:c,inheritAttrs:a,components:p,directives:x,filters:A}=L;if(d&&ZA(d,oe,null),U)for(const C in U){const M=U[C];ca(M)&&(oe[C]=M.bind(Y))}if(he){const C=he.call(Y,Y);_o(C)&&(G.data=gp(C))}if(Oy=!0,Ae)for(const C in Ae){const M=Ae[C],s=ca(M)?M.bind(Y,Y):ca(M.get)?M.get.bind(Y,Y):uu,_=!ca(M)&&ca(M.set)?M.set.bind(Y):uu,b=ws({get:s,set:_});Object.defineProperty(oe,C,{enumerable:!0,configurable:!0,get:()=>b.value,set:k=>b.value=k})}if(F)for(const C in F)W3(F[C],oe,Y,C);if(e){const C=ca(e)?e.call(Y):e;Reflect.ownKeys(C).forEach(M=>{A0(M,C[M])})}S&&Lx(S,G,"c");function y(C,M){Ji(M)?M.forEach(s=>C(s.bind(Y))):M&&C(M.bind(Y))}if(y(FA,n),y(hu,E),y(BA,T),y(NA,v),y(h6,g),y(v6,r),y(GA,h),y(HA,l),y(VA,m),y(U3,o),y(V3,f),y(UA,w),Ji(c))if(c.length){const C=G.exposed||(G.exposed={});c.forEach(M=>{Object.defineProperty(C,M,{get:()=>Y[M],set:s=>Y[M]=s})})}else G.exposed||(G.exposed={});u&&G.render===uu&&(G.render=u),a!=null&&(G.inheritAttrs=a),p&&(G.components=p),x&&(G.directives=x)}function ZA(G,L,Y=uu){Ji(G)&&(G=Fy(G));for(const oe in G){const he=G[oe];let Ae;_o(he)?"default"in he?Ae=cu(he.from||oe,he.default,!0):Ae=cu(he.from||oe):Ae=cu(he),Ko(Ae)?Object.defineProperty(L,oe,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:U=>Ae.value=U}):L[oe]=Ae}}function Lx(G,L,Y){fu(Ji(G)?G.map(oe=>oe.bind(L.proxy)):G.bind(L.proxy),L,Y)}function W3(G,L,Y,oe){const he=oe.includes(".")?nw(Y,oe):()=>Y[oe];if(as(G)){const Ae=L[G];ca(Ae)&&lh(he,Ae)}else if(ca(G))lh(he,G.bind(Y));else if(_o(G))if(Ji(G))G.forEach(Ae=>W3(Ae,L,Y,oe));else{const Ae=ca(G.handler)?G.handler.bind(Y):L[G.handler];ca(Ae)&&lh(he,Ae,G)}}function Tm(G){const L=G.type,{mixins:Y,extends:oe}=L,{mixins:he,optionsCache:Ae,config:{optionMergeStrategies:U}}=G.appContext,F=Ae.get(L);let e;return F?e=F:!he.length&&!Y&&!oe?e=L:(e={},he.length&&he.forEach(d=>D0(e,d,U,!0)),D0(e,L,U)),_o(L)&&Ae.set(L,e),e}function D0(G,L,Y,oe=!1){const{mixins:he,extends:Ae}=L;Ae&&D0(G,Ae,Y,!0),he&&he.forEach(U=>D0(G,U,Y,!0));for(const U in L)if(!(oe&&U==="expose")){const F=jA[U]||Y&&Y[U];G[U]=F?F(G[U],L[U]):L[U]}return G}const jA={data:_x,props:Px,emits:Px,methods:Fd,computed:Fd,beforeCreate:js,created:js,beforeMount:js,mounted:js,beforeUpdate:js,updated:js,beforeDestroy:js,beforeUnmount:js,destroyed:js,unmounted:js,activated:js,deactivated:js,errorCaptured:js,serverPrefetch:js,components:Fd,directives:Fd,watch:JA,provide:_x,inject:KA};function _x(G,L){return L?G?function(){return Go(ca(G)?G.call(this,this):G,ca(L)?L.call(this,this):L)}:L:G}function KA(G,L){return Fd(Fy(G),Fy(L))}function Fy(G){if(Ji(G)){const L={};for(let Y=0;Y<G.length;Y++)L[G[Y]]=G[Y];return L}return G}function js(G,L){return G?[...new Set([].concat(G,L))]:L}function Fd(G,L){return G?Go(Object.create(null),G,L):L}function Px(G,L){return G?Ji(G)&&Ji(L)?[...new Set([...G,...L])]:Go(Object.create(null),Cx(G),Cx(L??{})):L}function JA(G,L){if(!G)return L;if(!L)return G;const Y=Go(Object.create(null),G);for(const oe in L)Y[oe]=js(G[oe],L[oe]);return Y}function Y3(){return{app:null,config:{isNativeTag:I5,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let QA=0;function $A(G,L){return function(oe,he=null){ca(oe)||(oe=Go({},oe)),he!=null&&!_o(he)&&(he=null);const Ae=Y3(),U=new WeakSet;let F=!1;const e=Ae.app={_uid:QA++,_component:oe,_props:he,_container:null,_context:Ae,_instance:null,version:D6,get config(){return Ae.config},set config(d){},use(d,...S){return U.has(d)||(d&&ca(d.install)?(U.add(d),d.install(e,...S)):ca(d)&&(U.add(d),d(e,...S))),e},mixin(d){return Ae.mixins.includes(d)||Ae.mixins.push(d),e},component(d,S){return S?(Ae.components[d]=S,e):Ae.components[d]},directive(d,S){return S?(Ae.directives[d]=S,e):Ae.directives[d]},mount(d,S,n){if(!F){const E=Ga(oe,he);return E.appContext=Ae,n===!0?n="svg":n===!1&&(n=void 0),S&&L?L(E,d):G(E,d,n),F=!0,e._container=d,d.__vue_app__=e,Em(E.component)}},unmount(){F&&(G(null,e._container),delete e._container.__vue_app__)},provide(d,S){return Ae.provides[d]=S,e},runWithContext(d){const S=Xv;Xv=e;try{return d()}finally{Xv=S}}};return e}}let Xv=null;function A0(G,L){if(ns){let Y=ns.provides;const oe=ns.parent&&ns.parent.provides;oe===Y&&(Y=ns.provides=Object.create(oe)),Y[G]=L}}function cu(G,L,Y=!1){const oe=ns||Ts;if(oe||Xv){const he=oe?oe.parent==null?oe.vnode.appContext&&oe.vnode.appContext.provides:oe.parent.provides:Xv._context.provides;if(he&&G in he)return he[G];if(arguments.length>1)return Y&&ca(L)?L.call(oe&&oe.proxy):L}}function qA(){return!!(ns||Ts||Xv)}const X3={},Z3=()=>Object.create(X3),j3=G=>Object.getPrototypeOf(G)===X3;function e6(G,L,Y,oe=!1){const he={},Ae=Z3();G.propsDefaults=Object.create(null),K3(G,L,he,Ae);for(const U in G.propsOptions[0])U in he||(he[U]=void 0);Y?G.props=oe?he:C3(he):G.type.props?G.props=he:G.props=Ae,G.attrs=Ae}function t6(G,L,Y,oe){const{props:he,attrs:Ae,vnode:{patchFlag:U}}=G,F=La(he),[e]=G.propsOptions;let d=!1;if((oe||U>0)&&!(U&16)){if(U&8){const S=G.vnode.dynamicProps;for(let n=0;n<S.length;n++){let E=S[n];if(q0(G.emitsOptions,E))continue;const T=L[E];if(e)if(Ca(Ae,E))T!==Ae[E]&&(Ae[E]=T,d=!0);else{const v=Tf(E);he[v]=By(e,F,v,T,G,!1)}else T!==Ae[E]&&(Ae[E]=T,d=!0)}}}else{K3(G,L,he,Ae)&&(d=!0);let S;for(const n in F)(!L||!Ca(L,n)&&((S=td(n))===n||!Ca(L,S)))&&(e?Y&&(Y[n]!==void 0||Y[S]!==void 0)&&(he[n]=By(e,F,n,void 0,G,!0)):delete he[n]);if(Ae!==F)for(const n in Ae)(!L||!Ca(L,n))&&(delete Ae[n],d=!0)}d&&tc(G.attrs,"set","")}function K3(G,L,Y,oe){const[he,Ae]=G.propsOptions;let U=!1,F;if(L)for(let e in L){if(Hd(e))continue;const d=L[e];let S;he&&Ca(he,S=Tf(e))?!Ae||!Ae.includes(S)?Y[S]=d:(F||(F={}))[S]=d:q0(G.emitsOptions,e)||(!(e in oe)||d!==oe[e])&&(oe[e]=d,U=!0)}if(Ae){const e=La(Y),d=F||co;for(let S=0;S<Ae.length;S++){const n=Ae[S];Y[n]=By(he,e,n,d[n],G,!Ca(d,n))}}return U}function By(G,L,Y,oe,he,Ae){const U=G[Y];if(U!=null){const F=Ca(U,"default");if(F&&oe===void 0){const e=U.default;if(U.type!==Function&&!U.skipFactory&&ca(e)){const{propsDefaults:d}=he;if(Y in d)oe=d[Y];else{const S=yp(he);oe=d[Y]=e.call(null,L),S()}}else oe=e}U[0]&&(Ae&&!F?oe=!1:U[1]&&(oe===""||oe===td(Y))&&(oe=!0))}return oe}function J3(G,L,Y=!1){const oe=L.propsCache,he=oe.get(G);if(he)return he;const Ae=G.props,U={},F=[];let e=!1;if(!ca(G)){const S=n=>{e=!0;const[E,T]=J3(n,L,!0);Go(U,E),T&&F.push(...T)};!Y&&L.mixins.length&&L.mixins.forEach(S),G.extends&&S(G.extends),G.mixins&&G.mixins.forEach(S)}if(!Ae&&!e)return _o(G)&&oe.set(G,Wv),Wv;if(Ji(Ae))for(let S=0;S<Ae.length;S++){const n=Tf(Ae[S]);Rx(n)&&(U[n]=co)}else if(Ae)for(const S in Ae){const n=Tf(S);if(Rx(n)){const E=Ae[S],T=U[n]=Ji(E)||ca(E)?{type:E}:Go({},E);if(T){const v=kx(Boolean,T.type),g=kx(String,T.type);T[0]=v>-1,T[1]=g<0||v<g,(v>-1||Ca(T,"default"))&&F.push(n)}}}const d=[U,F];return _o(G)&&oe.set(G,d),d}function Rx(G){return G[0]!=="$"&&!Hd(G)}function Ix(G){return G===null?"null":typeof G=="function"?G.name||"":typeof G=="object"&&G.constructor&&G.constructor.name||""}function Dx(G,L){return Ix(G)===Ix(L)}function kx(G,L){return Ji(L)?L.findIndex(Y=>Dx(Y,G)):ca(L)&&Dx(L,G)?0:-1}const Q3=G=>G[0]==="_"||G==="$stable",Am=G=>Ji(G)?G.map(gf):[gf(G)],r6=(G,L,Y)=>{if(L._n)return L;const oe=rs((...he)=>Am(L(...he)),Y);return oe._c=!1,oe},$3=(G,L,Y)=>{const oe=G._ctx;for(const he in G){if(Q3(he))continue;const Ae=G[he];if(ca(Ae))L[he]=r6(he,Ae,oe);else if(Ae!=null){const U=Am(Ae);L[he]=()=>U}}},q3=(G,L)=>{const Y=Am(L);G.slots.default=()=>Y},n6=(G,L)=>{const Y=G.slots=Z3();if(G.vnode.shapeFlag&32){const oe=L._;oe?(Go(Y,L),f3(Y,"_",oe,!0)):$3(L,Y)}else L&&q3(G,L)},i6=(G,L,Y)=>{const{vnode:oe,slots:he}=G;let Ae=!0,U=co;if(oe.shapeFlag&32){const F=L._;F?Y&&F===1?Ae=!1:(Go(he,L),!Y&&F===1&&delete he._):(Ae=!L.$stable,$3(L,he)),U=L}else L&&(q3(G,L),U={default:1});if(Ae)for(const F in he)!Q3(F)&&U[F]==null&&delete he[F]};function Ny(G,L,Y,oe,he=!1){if(Ji(G)){G.forEach((E,T)=>Ny(E,L&&(Ji(L)?L[T]:L),Y,oe,he));return}if(Gd(oe)&&!he)return;const Ae=oe.shapeFlag&4?Em(oe.component):oe.el,U=he?null:Ae,{i:F,r:e}=G,d=L&&L.r,S=F.refs===co?F.refs={}:F.refs,n=F.setupState;if(d!=null&&d!==e&&(as(d)?(S[d]=null,Ca(n,d)&&(n[d]=null)):Ko(d)&&(d.value=null)),ca(e))sh(e,F,12,[U,S]);else{const E=as(e),T=Ko(e);if(E||T){const v=()=>{if(G.f){const g=E?Ca(n,e)?n[e]:S[e]:e.value;he?Ji(g)&&um(g,Ae):Ji(g)?g.includes(Ae)||g.push(Ae):E?(S[e]=[Ae],Ca(n,e)&&(n[e]=S[e])):(e.value=[Ae],G.k&&(S[G.k]=e.value))}else E?(S[e]=U,Ca(n,e)&&(n[e]=U)):T&&(e.value=U,G.k&&(S[G.k]=U))};U?(v.id=-1,fl(v,Y)):v()}}}const fl=OA;function a6(G){return o6(G)}function o6(G,L){const Y=c3();Y.__VUE__=!0;const{insert:oe,remove:he,patchProp:Ae,createElement:U,createText:F,createComment:e,setText:d,setElementText:S,parentNode:n,nextSibling:E,setScopeId:T=uu,insertStaticContent:v}=G,g=(q,ue,te,J=null,ie=null,K=null,ee=void 0,le=null,j=!!ue.dynamicChildren)=>{if(q===ue)return;q&&!Jh(q,ue)&&(J=B(q),k(q,ie,K,!0),q=null),ue.patchFlag===-2&&(j=!1,ue.dynamicChildren=null);const{type:Z,ref:fe,shapeFlag:re}=ue;switch(Z){case ig:r(q,ue,te,J);break;case hl:t(q,ue,te,J);break;case fy:q==null&&o(ue,te,J,ee);break;case cl:p(q,ue,te,J,ie,K,ee,le,j);break;default:re&1?u(q,ue,te,J,ie,K,ee,le,j):re&6?x(q,ue,te,J,ie,K,ee,le,j):(re&64||re&128)&&Z.process(q,ue,te,J,ie,K,ee,le,j,X)}fe!=null&&ie&&Ny(fe,q&&q.ref,K,ue||q,!ue)},r=(q,ue,te,J)=>{if(q==null)oe(ue.el=F(ue.children),te,J);else{const ie=ue.el=q.el;ue.children!==q.children&&d(ie,ue.children)}},t=(q,ue,te,J)=>{q==null?oe(ue.el=e(ue.children||""),te,J):ue.el=q.el},o=(q,ue,te,J)=>{[q.el,q.anchor]=v(q.children,ue,te,J,q.el,q.anchor)},i=({el:q,anchor:ue},te,J)=>{let ie;for(;q&&q!==ue;)ie=E(q),oe(q,te,J),q=ie;oe(ue,te,J)},f=({el:q,anchor:ue})=>{let te;for(;q&&q!==ue;)te=E(q),he(q),q=te;he(ue)},u=(q,ue,te,J,ie,K,ee,le,j)=>{ue.type==="svg"?ee="svg":ue.type==="math"&&(ee="mathml"),q==null?l(ue,te,J,ie,K,ee,le,j):w(q,ue,ie,K,ee,le,j)},l=(q,ue,te,J,ie,K,ee,le)=>{let j,Z;const{props:fe,shapeFlag:re,transition:ce,dirs:xe}=q;if(j=q.el=U(q.type,K,fe&&fe.is,fe),re&8?S(j,q.children):re&16&&h(q.children,j,null,J,ie,ly(q,K),ee,le),xe&&Hh(q,null,J,"created"),m(j,q,q.scopeId,ee,J),fe){for(const we in fe)we!=="value"&&!Hd(we)&&Ae(j,we,null,fe[we],K,q.children,J,ie,N);"value"in fe&&Ae(j,"value",null,fe.value,K),(Z=fe.onVnodeBeforeMount)&&pf(Z,J,q)}xe&&Hh(q,null,J,"beforeMount");const Te=s6(ie,ce);Te&&ce.beforeEnter(j),oe(j,ue,te),((Z=fe&&fe.onVnodeMounted)||Te||xe)&&fl(()=>{Z&&pf(Z,J,q),Te&&ce.enter(j),xe&&Hh(q,null,J,"mounted")},ie)},m=(q,ue,te,J,ie)=>{if(te&&T(q,te),J)for(let K=0;K<J.length;K++)T(q,J[K]);if(ie){let K=ie.subTree;if(ue===K){const ee=ie.vnode;m(q,ee,ee.scopeId,ee.slotScopeIds,ie.parent)}}},h=(q,ue,te,J,ie,K,ee,le,j=0)=>{for(let Z=j;Z<q.length;Z++){const fe=q[Z]=le?rh(q[Z]):gf(q[Z]);g(null,fe,ue,te,J,ie,K,ee,le)}},w=(q,ue,te,J,ie,K,ee)=>{const le=ue.el=q.el;let{patchFlag:j,dynamicChildren:Z,dirs:fe}=ue;j|=q.patchFlag&16;const re=q.props||co,ce=ue.props||co;let xe;if(te&&Gh(te,!1),(xe=ce.onVnodeBeforeUpdate)&&pf(xe,te,ue,q),fe&&Hh(ue,q,te,"beforeUpdate"),te&&Gh(te,!0),Z?c(q.dynamicChildren,Z,le,te,J,ly(ue,ie),K):ee||M(q,ue,le,null,te,J,ly(ue,ie),K,!1),j>0){if(j&16)a(le,ue,re,ce,te,J,ie);else if(j&2&&re.class!==ce.class&&Ae(le,"class",null,ce.class,ie),j&4&&Ae(le,"style",re.style,ce.style,ie),j&8){const Te=ue.dynamicProps;for(let we=0;we<Te.length;we++){const _e=Te[we],ke=re[_e],Ne=ce[_e];(Ne!==ke||_e==="value")&&Ae(le,_e,ke,Ne,ie,q.children,te,J,N)}}j&1&&q.children!==ue.children&&S(le,ue.children)}else!ee&&Z==null&&a(le,ue,re,ce,te,J,ie);((xe=ce.onVnodeUpdated)||fe)&&fl(()=>{xe&&pf(xe,te,ue,q),fe&&Hh(ue,q,te,"updated")},J)},c=(q,ue,te,J,ie,K,ee)=>{for(let le=0;le<ue.length;le++){const j=q[le],Z=ue[le],fe=j.el&&(j.type===cl||!Jh(j,Z)||j.shapeFlag&70)?n(j.el):te;g(j,Z,fe,null,J,ie,K,ee,!0)}},a=(q,ue,te,J,ie,K,ee)=>{if(te!==J){if(te!==co)for(const le in te)!Hd(le)&&!(le in J)&&Ae(q,le,te[le],null,ee,ue.children,ie,K,N);for(const le in J){if(Hd(le))continue;const j=J[le],Z=te[le];j!==Z&&le!=="value"&&Ae(q,le,Z,j,ee,ue.children,ie,K,N)}"value"in J&&Ae(q,"value",te.value,J.value,ee)}},p=(q,ue,te,J,ie,K,ee,le,j)=>{const Z=ue.el=q?q.el:F(""),fe=ue.anchor=q?q.anchor:F("");let{patchFlag:re,dynamicChildren:ce,slotScopeIds:xe}=ue;xe&&(le=le?le.concat(xe):xe),q==null?(oe(Z,te,J),oe(fe,te,J),h(ue.children||[],te,fe,ie,K,ee,le,j)):re>0&&re&64&&ce&&q.dynamicChildren?(c(q.dynamicChildren,ce,te,ie,K,ee,le),(ue.key!=null||ie&&ue===ie.subTree)&&ew(q,ue,!0)):M(q,ue,te,fe,ie,K,ee,le,j)},x=(q,ue,te,J,ie,K,ee,le,j)=>{ue.slotScopeIds=le,q==null?ue.shapeFlag&512?ie.ctx.activate(ue,te,J,ee,j):A(ue,te,J,ie,K,ee,j):P(q,ue,j)},A=(q,ue,te,J,ie,K,ee)=>{const le=q.component=E6(q,J,ie);if(ng(q)&&(le.ctx.renderer=X),C6(le),le.asyncDep){if(ie&&ie.registerDep(le,y,ee),!q.el){const j=le.subTree=Ga(hl);t(null,j,ue,te)}}else y(le,q,ue,te,ie,K,ee)},P=(q,ue,te)=>{const J=ue.component=q.component;if(RA(q,ue,te))if(J.asyncDep&&!J.asyncResolved){C(J,ue,te);return}else J.next=ue,EA(J.update),J.effect.dirty=!0,J.update();else ue.el=q.el,J.vnode=ue},y=(q,ue,te,J,ie,K,ee)=>{const le=()=>{if(q.isMounted){let{next:fe,bu:re,u:ce,parent:xe,vnode:Te}=q;{const Ee=tw(q);if(Ee){fe&&(fe.el=Te.el,C(q,fe,ee)),Ee.asyncDep.then(()=>{q.isUnmounted||le()});return}}let we=fe,_e;Gh(q,!1),fe?(fe.el=Te.el,C(q,fe,ee)):fe=Te,re&&ay(re),(_e=fe.props&&fe.props.onVnodeBeforeUpdate)&&pf(_e,xe,fe,Te),Gh(q,!0);const ke=oy(q),Ne=q.subTree;q.subTree=ke,g(Ne,ke,n(Ne.el),B(Ne),q,ie,K),fe.el=ke.el,we===null&&IA(q,ke.el),ce&&fl(ce,ie),(_e=fe.props&&fe.props.onVnodeUpdated)&&fl(()=>pf(_e,xe,fe,Te),ie)}else{let fe;const{el:re,props:ce}=ue,{bm:xe,m:Te,parent:we}=q,_e=Gd(ue);if(Gh(q,!1),xe&&ay(xe),!_e&&(fe=ce&&ce.onVnodeBeforeMount)&&pf(fe,we,ue),Gh(q,!0),re&&ne){const ke=()=>{q.subTree=oy(q),ne(re,q.subTree,q,ie,null)};_e?ue.type.__asyncLoader().then(()=>!q.isUnmounted&&ke()):ke()}else{const ke=q.subTree=oy(q);g(null,ke,te,J,q,ie,K),ue.el=ke.el}if(Te&&fl(Te,ie),!_e&&(fe=ce&&ce.onVnodeMounted)){const ke=ue;fl(()=>pf(fe,we,ke),ie)}(ue.shapeFlag&256||we&&Gd(we.vnode)&&we.vnode.shapeFlag&256)&&q.a&&fl(q.a,ie),q.isMounted=!0,ue=te=J=null}},j=q.effect=new cm(le,uu,()=>wm(Z),q.scope),Z=q.update=()=>{j.dirty&&j.run()};Z.id=q.uid,Gh(q,!0),Z()},C=(q,ue,te)=>{ue.component=q;const J=q.vnode.props;q.vnode=ue,q.next=null,t6(q,ue.props,J,te),i6(q,ue.children,te),hh(),Mx(q),vh()},M=(q,ue,te,J,ie,K,ee,le,j=!1)=>{const Z=q&&q.children,fe=q?q.shapeFlag:0,re=ue.children,{patchFlag:ce,shapeFlag:xe}=ue;if(ce>0){if(ce&128){_(Z,re,te,J,ie,K,ee,le,j);return}else if(ce&256){s(Z,re,te,J,ie,K,ee,le,j);return}}xe&8?(fe&16&&N(Z,ie,K),re!==Z&&S(te,re)):fe&16?xe&16?_(Z,re,te,J,ie,K,ee,le,j):N(Z,ie,K,!0):(fe&8&&S(te,""),xe&16&&h(re,te,J,ie,K,ee,le,j))},s=(q,ue,te,J,ie,K,ee,le,j)=>{q=q||Wv,ue=ue||Wv;const Z=q.length,fe=ue.length,re=Math.min(Z,fe);let ce;for(ce=0;ce<re;ce++){const xe=ue[ce]=j?rh(ue[ce]):gf(ue[ce]);g(q[ce],xe,te,null,ie,K,ee,le,j)}Z>fe?N(q,ie,K,!0,!1,re):h(ue,te,J,ie,K,ee,le,j,re)},_=(q,ue,te,J,ie,K,ee,le,j)=>{let Z=0;const fe=ue.length;let re=q.length-1,ce=fe-1;for(;Z<=re&&Z<=ce;){const xe=q[Z],Te=ue[Z]=j?rh(ue[Z]):gf(ue[Z]);if(Jh(xe,Te))g(xe,Te,te,null,ie,K,ee,le,j);else break;Z++}for(;Z<=re&&Z<=ce;){const xe=q[re],Te=ue[ce]=j?rh(ue[ce]):gf(ue[ce]);if(Jh(xe,Te))g(xe,Te,te,null,ie,K,ee,le,j);else break;re--,ce--}if(Z>re){if(Z<=ce){const xe=ce+1,Te=xe<fe?ue[xe].el:J;for(;Z<=ce;)g(null,ue[Z]=j?rh(ue[Z]):gf(ue[Z]),te,Te,ie,K,ee,le,j),Z++}}else if(Z>ce)for(;Z<=re;)k(q[Z],ie,K,!0),Z++;else{const xe=Z,Te=Z,we=new Map;for(Z=Te;Z<=ce;Z++){const Le=ue[Z]=j?rh(ue[Z]):gf(ue[Z]);Le.key!=null&&we.set(Le.key,Z)}let _e,ke=0;const Ne=ce-Te+1;let Ee=!1,ze=0;const Ce=new Array(Ne);for(Z=0;Z<Ne;Z++)Ce[Z]=0;for(Z=xe;Z<=re;Z++){const Le=q[Z];if(ke>=Ne){k(Le,ie,K,!0);continue}let Ge;if(Le.key!=null)Ge=we.get(Le.key);else for(_e=Te;_e<=ce;_e++)if(Ce[_e-Te]===0&&Jh(Le,ue[_e])){Ge=_e;break}Ge===void 0?k(Le,ie,K,!0):(Ce[Ge-Te]=Z+1,Ge>=ze?ze=Ge:Ee=!0,g(Le,ue[Ge],te,null,ie,K,ee,le,j),ke++)}const Oe=Ee?l6(Ce):Wv;for(_e=Oe.length-1,Z=Ne-1;Z>=0;Z--){const Le=Te+Z,Ge=ue[Le],rt=Le+1<fe?ue[Le+1].el:J;Ce[Z]===0?g(null,Ge,te,rt,ie,K,ee,le,j):Ee&&(_e<0||Z!==Oe[_e]?b(Ge,te,rt,2):_e--)}}},b=(q,ue,te,J,ie=null)=>{const{el:K,type:ee,transition:le,children:j,shapeFlag:Z}=q;if(Z&6){b(q.component.subTree,ue,te,J);return}if(Z&128){q.suspense.move(ue,te,J);return}if(Z&64){ee.move(q,ue,te,X);return}if(ee===cl){oe(K,ue,te);for(let re=0;re<j.length;re++)b(j[re],ue,te,J);oe(q.anchor,ue,te);return}if(ee===fy){i(q,ue,te);return}if(J!==2&&Z&1&&le)if(J===0)le.beforeEnter(K),oe(K,ue,te),fl(()=>le.enter(K),ie);else{const{leave:re,delayLeave:ce,afterLeave:xe}=le,Te=()=>oe(K,ue,te),we=()=>{re(K,()=>{Te(),xe&&xe()})};ce?ce(K,Te,we):we()}else oe(K,ue,te)},k=(q,ue,te,J=!1,ie=!1)=>{const{type:K,props:ee,ref:le,children:j,dynamicChildren:Z,shapeFlag:fe,patchFlag:re,dirs:ce,memoIndex:xe}=q;if(le!=null&&Ny(le,null,te,q,!0),xe!=null&&(ue.renderCache[xe]=void 0),fe&256){ue.ctx.deactivate(q);return}const Te=fe&1&&ce,we=!Gd(q);let _e;if(we&&(_e=ee&&ee.onVnodeBeforeUnmount)&&pf(_e,ue,q),fe&6)O(q.component,te,J);else{if(fe&128){q.suspense.unmount(te,J);return}Te&&Hh(q,null,ue,"beforeUnmount"),fe&64?q.type.remove(q,ue,te,ie,X,J):Z&&(K!==cl||re>0&&re&64)?N(Z,ue,te,!1,!0):(K===cl&&re&384||!ie&&fe&16)&&N(j,ue,te),J&&D(q)}(we&&(_e=ee&&ee.onVnodeUnmounted)||Te)&&fl(()=>{_e&&pf(_e,ue,q),Te&&Hh(q,null,ue,"unmounted")},te)},D=q=>{const{type:ue,el:te,anchor:J,transition:ie}=q;if(ue===cl){V(te,J);return}if(ue===fy){f(q);return}const K=()=>{he(te),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(q.shapeFlag&1&&ie&&!ie.persisted){const{leave:ee,delayLeave:le}=ie,j=()=>ee(te,K);le?le(q.el,K,j):j()}else K()},V=(q,ue)=>{let te;for(;q!==ue;)te=E(q),he(q),q=te;he(ue)},O=(q,ue,te)=>{const{bum:J,scope:ie,update:K,subTree:ee,um:le,m:j,a:Z}=q;zx(j),zx(Z),J&&ay(J),ie.stop(),K&&(K.active=!1,k(ee,q,ue,te)),le&&fl(le,ue),fl(()=>{q.isUnmounted=!0},ue),ue&&ue.pendingBranch&&!ue.isUnmounted&&q.asyncDep&&!q.asyncResolved&&q.suspenseId===ue.pendingId&&(ue.deps--,ue.deps===0&&ue.resolve())},N=(q,ue,te,J=!1,ie=!1,K=0)=>{for(let ee=K;ee<q.length;ee++)k(q[ee],ue,te,J,ie)},B=q=>q.shapeFlag&6?B(q.component.subTree):q.shapeFlag&128?q.suspense.next():E(q.anchor||q.el);let z=!1;const H=(q,ue,te)=>{q==null?ue._vnode&&k(ue._vnode,null,null,!0):g(ue._vnode||null,q,ue,null,null,null,te),z||(z=!0,Mx(),O3(),z=!1),ue._vnode=q},X={p:g,um:k,m:b,r:D,mt:A,mc:h,pc:M,pbc:c,n:B,o:G};let $,ne;return{render:H,hydrate:$,createApp:$A(H,$)}}function ly({type:G,props:L},Y){return Y==="svg"&&G==="foreignObject"||Y==="mathml"&&G==="annotation-xml"&&L&&L.encoding&&L.encoding.includes("html")?void 0:Y}function Gh({effect:G,update:L},Y){G.allowRecurse=L.allowRecurse=Y}function s6(G,L){return(!G||G&&!G.pendingBranch)&&L&&!L.persisted}function ew(G,L,Y=!1){const oe=G.children,he=L.children;if(Ji(oe)&&Ji(he))for(let Ae=0;Ae<oe.length;Ae++){const U=oe[Ae];let F=he[Ae];F.shapeFlag&1&&!F.dynamicChildren&&((F.patchFlag<=0||F.patchFlag===32)&&(F=he[Ae]=rh(he[Ae]),F.el=U.el),!Y&&F.patchFlag!==-2&&ew(U,F)),F.type===ig&&(F.el=U.el)}}function l6(G){const L=G.slice(),Y=[0];let oe,he,Ae,U,F;const e=G.length;for(oe=0;oe<e;oe++){const d=G[oe];if(d!==0){if(he=Y[Y.length-1],G[he]<d){L[oe]=he,Y.push(oe);continue}for(Ae=0,U=Y.length-1;Ae<U;)F=Ae+U>>1,G[Y[F]]<d?Ae=F+1:U=F;d<G[Y[Ae]]&&(Ae>0&&(L[oe]=Y[Ae-1]),Y[Ae]=oe)}}for(Ae=Y.length,U=Y[Ae-1];Ae-- >0;)Y[Ae]=U,U=L[U];return Y}function tw(G){const L=G.subTree.component;if(L)return L.asyncDep&&!L.asyncResolved?L:tw(L)}function zx(G){if(G)for(let L=0;L<G.length;L++)G[L].active=!1}const u6=Symbol.for("v-scx"),f6=()=>cu(u6),f0={};function lh(G,L,Y){return rw(G,L,Y)}function rw(G,L,{immediate:Y,deep:oe,flush:he,once:Ae,onTrack:U,onTrigger:F}=co){if(L&&Ae){const l=L;L=(...m)=>{l(...m),u()}}const e=ns,d=l=>oe===!0?l:Kh(l,oe===!1?1:void 0);let S,n=!1,E=!1;if(Ko(G)?(S=()=>G.value,n=R0(G)):ev(G)?(S=()=>d(G),n=!0):Ji(G)?(E=!0,n=G.some(l=>ev(l)||R0(l)),S=()=>G.map(l=>{if(Ko(l))return l.value;if(ev(l))return d(l);if(ca(l))return sh(l,e,2)})):ca(G)?L?S=()=>sh(G,e,2):S=()=>(T&&T(),fu(G,e,3,[v])):S=uu,L&&oe){const l=S;S=()=>Kh(l())}let T,v=l=>{T=i.onStop=()=>{sh(l,e,4),T=i.onStop=void 0}},g;if(ag)if(v=uu,L?Y&&fu(L,e,3,[S(),E?[]:void 0,v]):S(),he==="sync"){const l=f6();g=l.__watcherHandles||(l.__watcherHandles=[])}else return uu;let r=E?new Array(G.length).fill(f0):f0;const t=()=>{if(!(!i.active||!i.dirty))if(L){const l=i.run();(oe||n||(E?l.some((m,h)=>uh(m,r[h])):uh(l,r)))&&(T&&T(),fu(L,e,3,[l,r===f0?void 0:E&&r[0]===f0?[]:r,v]),r=l)}else i.run()};t.allowRecurse=!!L;let o;he==="sync"?o=t:he==="post"?o=()=>fl(t,e&&e.suspense):(t.pre=!0,e&&(t.id=e.uid),o=()=>wm(t));const i=new cm(S,uu,o),f=p3(),u=()=>{i.stop(),f&&um(f.effects,i)};return L?Y?t():r=i.run():he==="post"?fl(i.run.bind(i),e&&e.suspense):i.run(),g&&g.push(u),u}function c6(G,L,Y){const oe=this.proxy,he=as(G)?G.includes(".")?nw(oe,G):()=>oe[G]:G.bind(oe,oe);let Ae;ca(L)?Ae=L:(Ae=L.handler,Y=L);const U=yp(this),F=rw(he,Ae.bind(oe),Y);return U(),F}function nw(G,L){const Y=L.split(".");return()=>{let oe=G;for(let he=0;he<Y.length&&oe;he++)oe=oe[Y[he]];return oe}}function Kh(G,L=1/0,Y){if(L<=0||!_o(G)||G.__v_skip||(Y=Y||new Set,Y.has(G)))return G;if(Y.add(G),L--,Ko(G))Kh(G.value,L,Y);else if(Ji(G))for(let oe=0;oe<G.length;oe++)Kh(G[oe],L,Y);else if(k5(G)||Vd(G))G.forEach(oe=>{Kh(oe,L,Y)});else if(F5(G)){for(const oe in G)Kh(G[oe],L,Y);for(const oe of Object.getOwnPropertySymbols(G))Object.prototype.propertyIsEnumerable.call(G,oe)&&Kh(G[oe],L,Y)}return G}const ng=G=>G.type.__isKeepAlive;function h6(G,L){iw(G,"a",L)}function v6(G,L){iw(G,"da",L)}function iw(G,L,Y=ns){const oe=G.__wdc||(G.__wdc=()=>{let he=Y;for(;he;){if(he.isDeactivated)return;he=he.parent}return G()});if(rg(L,oe,Y),Y){let he=Y.parent;for(;he&&he.parent;)ng(he.parent.vnode)&&d6(oe,L,Y,he),he=he.parent}}function d6(G,L,Y,oe){const he=rg(L,G,oe,!0);V3(()=>{um(oe[L],he)},Y)}const th=Symbol("_leaveCb"),c0=Symbol("_enterCb");function p6(){const G={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hu(()=>{G.isMounted=!0}),U3(()=>{G.isUnmounting=!0}),G}const au=[Function,Array],aw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:au,onEnter:au,onAfterEnter:au,onEnterCancelled:au,onBeforeLeave:au,onLeave:au,onAfterLeave:au,onLeaveCancelled:au,onBeforeAppear:au,onAppear:au,onAfterAppear:au,onAppearCancelled:au},ow=G=>{const L=G.subTree;return L.component?ow(L.component):L},g6={name:"BaseTransition",props:aw,setup(G,{slots:L}){const Y=S6(),oe=p6();return()=>{const he=L.default&&lw(L.default(),!0);if(!he||!he.length)return;let Ae=he[0];if(he.length>1){for(const E of he)if(E.type!==hl){Ae=E;break}}const U=La(G),{mode:F}=U;if(oe.isLeaving)return uy(Ae);const e=Ox(Ae);if(!e)return uy(Ae);let d=Uy(e,U,oe,Y,E=>d=E);k0(e,d);const S=Y.subTree,n=S&&Ox(S);if(n&&n.type!==hl&&!Jh(e,n)&&ow(Y).type!==hl){const E=Uy(n,U,oe,Y);if(k0(n,E),F==="out-in"&&e.type!==hl)return oe.isLeaving=!0,E.afterLeave=()=>{oe.isLeaving=!1,Y.update.active!==!1&&(Y.effect.dirty=!0,Y.update())},uy(Ae);F==="in-out"&&e.type!==hl&&(E.delayLeave=(T,v,g)=>{const r=sw(oe,n);r[String(n.key)]=n,T[th]=()=>{v(),T[th]=void 0,delete d.delayedLeave},d.delayedLeave=g})}return Ae}}},y6=g6;function sw(G,L){const{leavingVNodes:Y}=G;let oe=Y.get(L.type);return oe||(oe=Object.create(null),Y.set(L.type,oe)),oe}function Uy(G,L,Y,oe,he){const{appear:Ae,mode:U,persisted:F=!1,onBeforeEnter:e,onEnter:d,onAfterEnter:S,onEnterCancelled:n,onBeforeLeave:E,onLeave:T,onAfterLeave:v,onLeaveCancelled:g,onBeforeAppear:r,onAppear:t,onAfterAppear:o,onAppearCancelled:i}=L,f=String(G.key),u=sw(Y,G),l=(w,c)=>{w&&fu(w,oe,9,c)},m=(w,c)=>{const a=c[1];l(w,c),Ji(w)?w.every(p=>p.length<=1)&&a():w.length<=1&&a()},h={mode:U,persisted:F,beforeEnter(w){let c=e;if(!Y.isMounted)if(Ae)c=r||e;else return;w[th]&&w[th](!0);const a=u[f];a&&Jh(G,a)&&a.el[th]&&a.el[th](),l(c,[w])},enter(w){let c=d,a=S,p=n;if(!Y.isMounted)if(Ae)c=t||d,a=o||S,p=i||n;else return;let x=!1;const A=w[c0]=P=>{x||(x=!0,P?l(p,[w]):l(a,[w]),h.delayedLeave&&h.delayedLeave(),w[c0]=void 0)};c?m(c,[w,A]):A()},leave(w,c){const a=String(G.key);if(w[c0]&&w[c0](!0),Y.isUnmounting)return c();l(E,[w]);let p=!1;const x=w[th]=A=>{p||(p=!0,c(),A?l(g,[w]):l(v,[w]),w[th]=void 0,u[a]===G&&delete u[a])};u[a]=G,T?m(T,[w,x]):x()},clone(w){const c=Uy(w,L,Y,oe,he);return he&&he(c),c}};return h}function uy(G){if(ng(G))return G=fh(G),G.children=null,G}function Ox(G){if(!ng(G))return G;const{shapeFlag:L,children:Y}=G;if(Y){if(L&16)return Y[0];if(L&32&&ca(Y.default))return Y.default()}}function k0(G,L){G.shapeFlag&6&&G.component?k0(G.component.subTree,L):G.shapeFlag&128?(G.ssContent.transition=L.clone(G.ssContent),G.ssFallback.transition=L.clone(G.ssFallback)):G.transition=L}function lw(G,L=!1,Y){let oe=[],he=0;for(let Ae=0;Ae<G.length;Ae++){let U=G[Ae];const F=Y==null?U.key:String(Y)+String(U.key!=null?U.key:Ae);U.type===cl?(U.patchFlag&128&&he++,oe=oe.concat(lw(U.children,L,F))):(L||U.type!==hl)&&oe.push(F!=null?fh(U,{key:F}):U)}if(he>1)for(let Ae=0;Ae<oe.length;Ae++)oe[Ae].patchFlag=-2;return oe}const m6=G=>G.__isTeleport,cl=Symbol.for("v-fgt"),ig=Symbol.for("v-txt"),hl=Symbol.for("v-cmt"),fy=Symbol.for("v-stc"),Yd=[];let Wu=null;function _a(G=!1){Yd.push(Wu=G?null:[])}function x6(){Yd.pop(),Wu=Yd[Yd.length-1]||null}let tp=1;function Fx(G){tp+=G}function uw(G){return G.dynamicChildren=tp>0?Wu||Wv:null,x6(),tp>0&&Wu&&Wu.push(G),G}function jo(G,L,Y,oe,he,Ae){return uw(ii(G,L,Y,oe,he,Ae,!0))}function dl(G,L,Y,oe,he){return uw(Ga(G,L,Y,oe,he,!0))}function z0(G){return G?G.__v_isVNode===!0:!1}function Jh(G,L){return G.type===L.type&&G.key===L.key}const fw=({key:G})=>G??null,M0=({ref:G,ref_key:L,ref_for:Y})=>(typeof G=="number"&&(G=""+G),G!=null?as(G)||Ko(G)||ca(G)?{i:Ts,r:G,k:L,f:!!Y}:G:null);function ii(G,L=null,Y=null,oe=0,he=null,Ae=G===cl?0:1,U=!1,F=!1){const e={__v_isVNode:!0,__v_skip:!0,type:G,props:L,key:L&&fw(L),ref:L&&M0(L),scopeId:eg,slotScopeIds:null,children:Y,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:Ae,patchFlag:oe,dynamicProps:he,dynamicChildren:null,appContext:null,ctx:Ts};return F?(Mm(e,Y),Ae&128&&G.normalize(e)):Y&&(e.shapeFlag|=as(Y)?8:16),tp>0&&!U&&Wu&&(e.patchFlag>0||Ae&6)&&e.patchFlag!==32&&Wu.push(e),e}const Ga=b6;function b6(G,L=null,Y=null,oe=0,he=null,Ae=!1){if((!G||G===DA)&&(G=hl),z0(G)){const F=fh(G,L,!0);return Y&&Mm(F,Y),tp>0&&!Ae&&Wu&&(F.shapeFlag&6?Wu[Wu.indexOf(G)]=F:Wu.push(F)),F.patchFlag=-2,F}if(I6(G)&&(G=G.__vccOpts),L){L=w6(L);let{class:F,style:e}=L;F&&!as(F)&&(L.class=nc(F)),_o(e)&&(_3(e)&&!Ji(e)&&(e=Go({},e)),L.style=J0(e))}const U=as(G)?1:zA(G)?128:m6(G)?64:_o(G)?4:ca(G)?2:0;return ii(G,L,Y,oe,he,U,Ae,!0)}function w6(G){return G?_3(G)||j3(G)?Go({},G):G:null}function fh(G,L,Y=!1,oe=!1){const{props:he,ref:Ae,patchFlag:U,children:F,transition:e}=G,d=L?T6(he||{},L):he,S={__v_isVNode:!0,__v_skip:!0,type:G.type,props:d,key:d&&fw(d),ref:L&&L.ref?Y&&Ae?Ji(Ae)?Ae.concat(M0(L)):[Ae,M0(L)]:M0(L):Ae,scopeId:G.scopeId,slotScopeIds:G.slotScopeIds,children:F,target:G.target,targetAnchor:G.targetAnchor,staticCount:G.staticCount,shapeFlag:G.shapeFlag,patchFlag:L&&G.type!==cl?U===-1?16:U|16:U,dynamicProps:G.dynamicProps,dynamicChildren:G.dynamicChildren,appContext:G.appContext,dirs:G.dirs,transition:e,component:G.component,suspense:G.suspense,ssContent:G.ssContent&&fh(G.ssContent),ssFallback:G.ssFallback&&fh(G.ssFallback),el:G.el,anchor:G.anchor,ctx:G.ctx,ce:G.ce};return e&&oe&&k0(S,e.clone(S)),S}function E0(G=" ",L=0){return Ga(ig,null,G,L)}function ic(G="",L=!1){return L?(_a(),dl(hl,null,G)):Ga(hl,null,G)}function gf(G){return G==null||typeof G=="boolean"?Ga(hl):Ji(G)?Ga(cl,null,G.slice()):typeof G=="object"?rh(G):Ga(ig,null,String(G))}function rh(G){return G.el===null&&G.patchFlag!==-1||G.memo?G:fh(G)}function Mm(G,L){let Y=0;const{shapeFlag:oe}=G;if(L==null)L=null;else if(Ji(L))Y=16;else if(typeof L=="object")if(oe&65){const he=L.default;he&&(he._c&&(he._d=!1),Mm(G,he()),he._c&&(he._d=!0));return}else{Y=32;const he=L._;!he&&!j3(L)?L._ctx=Ts:he===3&&Ts&&(Ts.slots._===1?L._=1:(L._=2,G.patchFlag|=1024))}else ca(L)?(L={default:L,_ctx:Ts},Y=32):(L=String(L),oe&64?(Y=16,L=[E0(L)]):Y=8);G.children=L,G.shapeFlag|=Y}function T6(...G){const L={};for(let Y=0;Y<G.length;Y++){const oe=G[Y];for(const he in oe)if(he==="class")L.class!==oe.class&&(L.class=nc([L.class,oe.class]));else if(he==="style")L.style=J0([L.style,oe.style]);else if(X0(he)){const Ae=L[he],U=oe[he];U&&Ae!==U&&!(Ji(Ae)&&Ae.includes(U))&&(L[he]=Ae?[].concat(Ae,U):U)}else he!==""&&(L[he]=oe[he])}return L}function pf(G,L,Y,oe=null){fu(G,L,7,[Y,oe])}const A6=Y3();let M6=0;function E6(G,L,Y){const oe=G.type,he=(L?L.appContext:G.appContext)||A6,Ae={uid:M6++,vnode:G,type:oe,parent:L,appContext:he,root:null,next:null,subTree:null,effect:null,update:null,scope:new v3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:L?L.provides:Object.create(he.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:J3(oe,he),emitsOptions:B3(oe,he),emit:null,emitted:null,propsDefaults:co,inheritAttrs:oe.inheritAttrs,ctx:co,data:co,props:co,attrs:co,slots:co,refs:co,setupState:co,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:Y,suspenseId:Y?Y.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ae.ctx={_:Ae},Ae.root=L?L.root:Ae,Ae.emit=LA.bind(null,Ae),G.ce&&G.ce(Ae),Ae}let ns=null;const S6=()=>ns||Ts;let O0,Vy;{const G=c3(),L=(Y,oe)=>{let he;return(he=G[Y])||(he=G[Y]=[]),he.push(oe),Ae=>{he.length>1?he.forEach(U=>U(Ae)):he[0](Ae)}};O0=L("__VUE_INSTANCE_SETTERS__",Y=>ns=Y),Vy=L("__VUE_SSR_SETTERS__",Y=>ag=Y)}const yp=G=>{const L=ns;return O0(G),G.scope.on(),()=>{G.scope.off(),O0(L)}},Bx=()=>{ns&&ns.scope.off(),O0(null)};function cw(G){return G.vnode.shapeFlag&4}let ag=!1;function C6(G,L=!1){L&&Vy(L);const{props:Y,children:oe}=G.vnode,he=cw(G);e6(G,Y,he,L),n6(G,oe);const Ae=he?L6(G,L):void 0;return L&&Vy(!1),Ae}function L6(G,L){const Y=G.type;G.accessCache=Object.create(null),G.proxy=new Proxy(G.ctx,YA);const{setup:oe}=Y;if(oe){const he=G.setupContext=oe.length>1?P6(G):null,Ae=yp(G);hh();const U=sh(oe,G,0,[G.props,he]);if(vh(),Ae(),u3(U)){if(U.then(Bx,Bx),L)return U.then(F=>{Nx(G,F,L)}).catch(F=>{$0(F,G,0)});G.asyncDep=U}else Nx(G,U,L)}else hw(G,L)}function Nx(G,L,Y){ca(L)?G.type.__ssrInlineRender?G.ssrRender=L:G.render=L:_o(L)&&(G.setupState=D3(L)),hw(G,Y)}let Ux;function hw(G,L,Y){const oe=G.type;if(!G.render){if(!L&&Ux&&!oe.render){const he=oe.template||Tm(G).template;if(he){const{isCustomElement:Ae,compilerOptions:U}=G.appContext.config,{delimiters:F,compilerOptions:e}=oe,d=Go(Go({isCustomElement:Ae,delimiters:F},U),e);oe.render=Ux(he,d)}}G.render=oe.render||uu}{const he=yp(G);hh();try{XA(G)}finally{vh(),he()}}}const _6={get(G,L){return pl(G,"get",""),G[L]}};function P6(G){const L=Y=>{G.exposed=Y||{}};return{attrs:new Proxy(G.attrs,_6),slots:G.slots,emit:G.emit,expose:L}}function Em(G){return G.exposed?G.exposeProxy||(G.exposeProxy=new Proxy(D3(ym(G.exposed)),{get(L,Y){if(Y in L)return L[Y];if(Y in Wd)return Wd[Y](G)},has(L,Y){return Y in L||Y in Wd}})):G.proxy}function R6(G,L=!0){return ca(G)?G.displayName||G.name:G.name||L&&G.__name}function I6(G){return ca(G)&&"__vccOpts"in G}const ws=(G,L)=>gA(G,L,ag);function Sm(G,L,Y){const oe=arguments.length;return oe===2?_o(L)&&!Ji(L)?z0(L)?Ga(G,null,[L]):Ga(G,L):Ga(G,null,L):(oe>3?Y=Array.prototype.slice.call(arguments,2):oe===3&&z0(Y)&&(Y=[Y]),Ga(G,L,Y))}const D6="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const k6="http://www.w3.org/2000/svg",z6="http://www.w3.org/1998/Math/MathML",$f=typeof document<"u"?document:null,Vx=$f&&$f.createElement("template"),O6={insert:(G,L,Y)=>{L.insertBefore(G,Y||null)},remove:G=>{const L=G.parentNode;L&&L.removeChild(G)},createElement:(G,L,Y,oe)=>{const he=L==="svg"?$f.createElementNS(k6,G):L==="mathml"?$f.createElementNS(z6,G):Y?$f.createElement(G,{is:Y}):$f.createElement(G);return G==="select"&&oe&&oe.multiple!=null&&he.setAttribute("multiple",oe.multiple),he},createText:G=>$f.createTextNode(G),createComment:G=>$f.createComment(G),setText:(G,L)=>{G.nodeValue=L},setElementText:(G,L)=>{G.textContent=L},parentNode:G=>G.parentNode,nextSibling:G=>G.nextSibling,querySelector:G=>$f.querySelector(G),setScopeId(G,L){G.setAttribute(L,"")},insertStaticContent(G,L,Y,oe,he,Ae){const U=Y?Y.previousSibling:L.lastChild;if(he&&(he===Ae||he.nextSibling))for(;L.insertBefore(he.cloneNode(!0),Y),!(he===Ae||!(he=he.nextSibling)););else{Vx.innerHTML=oe==="svg"?`<svg>${G}</svg>`:oe==="mathml"?`<math>${G}</math>`:G;const F=Vx.content;if(oe==="svg"||oe==="mathml"){const e=F.firstChild;for(;e.firstChild;)F.appendChild(e.firstChild);F.removeChild(e)}L.insertBefore(F,Y)}return[U?U.nextSibling:L.firstChild,Y?Y.previousSibling:L.lastChild]}},Xc="transition",Pd="animation",rp=Symbol("_vtc"),tv=(G,{slots:L})=>Sm(y6,F6(G),L);tv.displayName="Transition";const vw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};tv.props=Go({},aw,vw);const Wh=(G,L=[])=>{Ji(G)?G.forEach(Y=>Y(...L)):G&&G(...L)},Hx=G=>G?Ji(G)?G.some(L=>L.length>1):G.length>1:!1;function F6(G){const L={};for(const p in G)p in vw||(L[p]=G[p]);if(G.css===!1)return L;const{name:Y="v",type:oe,duration:he,enterFromClass:Ae=`${Y}-enter-from`,enterActiveClass:U=`${Y}-enter-active`,enterToClass:F=`${Y}-enter-to`,appearFromClass:e=Ae,appearActiveClass:d=U,appearToClass:S=F,leaveFromClass:n=`${Y}-leave-from`,leaveActiveClass:E=`${Y}-leave-active`,leaveToClass:T=`${Y}-leave-to`}=G,v=B6(he),g=v&&v[0],r=v&&v[1],{onBeforeEnter:t,onEnter:o,onEnterCancelled:i,onLeave:f,onLeaveCancelled:u,onBeforeAppear:l=t,onAppear:m=o,onAppearCancelled:h=i}=L,w=(p,x,A)=>{Yh(p,x?S:F),Yh(p,x?d:U),A&&A()},c=(p,x)=>{p._isLeaving=!1,Yh(p,n),Yh(p,T),Yh(p,E),x&&x()},a=p=>(x,A)=>{const P=p?m:o,y=()=>w(x,p,A);Wh(P,[x,y]),Gx(()=>{Yh(x,p?e:Ae),Zc(x,p?S:F),Hx(P)||Wx(x,oe,g,y)})};return Go(L,{onBeforeEnter(p){Wh(t,[p]),Zc(p,Ae),Zc(p,U)},onBeforeAppear(p){Wh(l,[p]),Zc(p,e),Zc(p,d)},onEnter:a(!1),onAppear:a(!0),onLeave(p,x){p._isLeaving=!0;const A=()=>c(p,x);Zc(p,n),Zc(p,E),V6(),Gx(()=>{p._isLeaving&&(Yh(p,n),Zc(p,T),Hx(f)||Wx(p,oe,r,A))}),Wh(f,[p,A])},onEnterCancelled(p){w(p,!1),Wh(i,[p])},onAppearCancelled(p){w(p,!0),Wh(h,[p])},onLeaveCancelled(p){c(p),Wh(u,[p])}})}function B6(G){if(G==null)return null;if(_o(G))return[cy(G.enter),cy(G.leave)];{const L=cy(G);return[L,L]}}function cy(G){return V5(G)}function Zc(G,L){L.split(/\s+/).forEach(Y=>Y&&G.classList.add(Y)),(G[rp]||(G[rp]=new Set)).add(L)}function Yh(G,L){L.split(/\s+/).forEach(oe=>oe&&G.classList.remove(oe));const Y=G[rp];Y&&(Y.delete(L),Y.size||(G[rp]=void 0))}function Gx(G){requestAnimationFrame(()=>{requestAnimationFrame(G)})}let N6=0;function Wx(G,L,Y,oe){const he=G._endId=++N6,Ae=()=>{he===G._endId&&oe()};if(Y)return setTimeout(Ae,Y);const{type:U,timeout:F,propCount:e}=U6(G,L);if(!U)return oe();const d=U+"end";let S=0;const n=()=>{G.removeEventListener(d,E),Ae()},E=T=>{T.target===G&&++S>=e&&n()};setTimeout(()=>{S<e&&n()},F+1),G.addEventListener(d,E)}function U6(G,L){const Y=window.getComputedStyle(G),oe=v=>(Y[v]||"").split(", "),he=oe(`${Xc}Delay`),Ae=oe(`${Xc}Duration`),U=Yx(he,Ae),F=oe(`${Pd}Delay`),e=oe(`${Pd}Duration`),d=Yx(F,e);let S=null,n=0,E=0;L===Xc?U>0&&(S=Xc,n=U,E=Ae.length):L===Pd?d>0&&(S=Pd,n=d,E=e.length):(n=Math.max(U,d),S=n>0?U>d?Xc:Pd:null,E=S?S===Xc?Ae.length:e.length:0);const T=S===Xc&&/\b(transform|all)(,|$)/.test(oe(`${Xc}Property`).toString());return{type:S,timeout:n,propCount:E,hasTransform:T}}function Yx(G,L){for(;G.length<L.length;)G=G.concat(G);return Math.max(...L.map((Y,oe)=>Xx(Y)+Xx(G[oe])))}function Xx(G){return G==="auto"?0:Number(G.slice(0,-1).replace(",","."))*1e3}function V6(){return document.body.offsetHeight}function H6(G,L,Y){const oe=G[rp];oe&&(L=(L?[L,...oe]:[...oe]).join(" ")),L==null?G.removeAttribute("class"):Y?G.setAttribute("class",L):G.className=L}const Zx=Symbol("_vod"),G6=Symbol("_vsh"),W6=Symbol(""),Y6=/(^|;)\s*display\s*:/;function X6(G,L,Y){const oe=G.style,he=as(Y);let Ae=!1;if(Y&&!he){if(L)if(as(L))for(const U of L.split(";")){const F=U.slice(0,U.indexOf(":")).trim();Y[F]==null&&S0(oe,F,"")}else for(const U in L)Y[U]==null&&S0(oe,U,"");for(const U in Y)U==="display"&&(Ae=!0),S0(oe,U,Y[U])}else if(he){if(L!==Y){const U=oe[W6];U&&(Y+=";"+U),oe.cssText=Y,Ae=Y6.test(Y)}}else L&&G.removeAttribute("style");Zx in G&&(G[Zx]=Ae?oe.display:"",G[G6]&&(oe.display="none"))}const jx=/\s*!important$/;function S0(G,L,Y){if(Ji(Y))Y.forEach(oe=>S0(G,L,oe));else if(Y==null&&(Y=""),L.startsWith("--"))G.setProperty(L,Y);else{const oe=Z6(G,L);jx.test(Y)?G.setProperty(td(oe),Y.replace(jx,""),"important"):G[oe]=Y}}const Kx=["Webkit","Moz","ms"],hy={};function Z6(G,L){const Y=hy[L];if(Y)return Y;let oe=Tf(L);if(oe!=="filter"&&oe in G)return hy[L]=oe;oe=K0(oe);for(let he=0;he<Kx.length;he++){const Ae=Kx[he]+oe;if(Ae in G)return hy[L]=Ae}return L}const Jx="http://www.w3.org/1999/xlink";function Qx(G,L,Y,oe,he,Ae=Z5(L)){oe&&L.startsWith("xlink:")?Y==null?G.removeAttributeNS(Jx,L.slice(6,L.length)):G.setAttributeNS(Jx,L,Y):Y==null||Ae&&!h3(Y)?G.removeAttribute(L):G.setAttribute(L,Ae?"":String(Y))}function j6(G,L,Y,oe,he,Ae,U){if(L==="innerHTML"||L==="textContent"){oe&&U(oe,he,Ae),G[L]=Y??"";return}const F=G.tagName;if(L==="value"&&F!=="PROGRESS"&&!F.includes("-")){const d=F==="OPTION"?G.getAttribute("value")||"":G.value,S=Y==null?"":String(Y);(d!==S||!("_value"in G))&&(G.value=S),Y==null&&G.removeAttribute(L),G._value=Y;return}let e=!1;if(Y===""||Y==null){const d=typeof G[L];d==="boolean"?Y=h3(Y):Y==null&&d==="string"?(Y="",e=!0):d==="number"&&(Y=0,e=!0)}try{G[L]=Y}catch{}e&&G.removeAttribute(L)}function K6(G,L,Y,oe){G.addEventListener(L,Y,oe)}function J6(G,L,Y,oe){G.removeEventListener(L,Y,oe)}const $x=Symbol("_vei");function Q6(G,L,Y,oe,he=null){const Ae=G[$x]||(G[$x]={}),U=Ae[L];if(oe&&U)U.value=oe;else{const[F,e]=$6(L);if(oe){const d=Ae[L]=tM(oe,he);K6(G,F,d,e)}else U&&(J6(G,F,U,e),Ae[L]=void 0)}}const qx=/(?:Once|Passive|Capture)$/;function $6(G){let L;if(qx.test(G)){L={};let oe;for(;oe=G.match(qx);)G=G.slice(0,G.length-oe[0].length),L[oe[0].toLowerCase()]=!0}return[G[2]===":"?G.slice(3):td(G.slice(2)),L]}let vy=0;const q6=Promise.resolve(),eM=()=>vy||(q6.then(()=>vy=0),vy=Date.now());function tM(G,L){const Y=oe=>{if(!oe._vts)oe._vts=Date.now();else if(oe._vts<=Y.attached)return;fu(rM(oe,Y.value),L,5,[oe])};return Y.value=G,Y.attached=eM(),Y}function rM(G,L){if(Ji(L)){const Y=G.stopImmediatePropagation;return G.stopImmediatePropagation=()=>{Y.call(G),G._stopped=!0},L.map(oe=>he=>!he._stopped&&oe&&oe(he))}else return L}const eb=G=>G.charCodeAt(0)===111&&G.charCodeAt(1)===110&&G.charCodeAt(2)>96&&G.charCodeAt(2)<123,nM=(G,L,Y,oe,he,Ae,U,F,e)=>{const d=he==="svg";L==="class"?H6(G,oe,d):L==="style"?X6(G,Y,oe):X0(L)?lm(L)||Q6(G,L,Y,oe,U):(L[0]==="."?(L=L.slice(1),!0):L[0]==="^"?(L=L.slice(1),!1):iM(G,L,oe,d))?(j6(G,L,oe,Ae,U,F,e),(L==="value"||L==="checked"||L==="selected")&&Qx(G,L,oe,d,U,L!=="value")):(L==="true-value"?G._trueValue=oe:L==="false-value"&&(G._falseValue=oe),Qx(G,L,oe,d))};function iM(G,L,Y,oe){if(oe)return!!(L==="innerHTML"||L==="textContent"||L in G&&eb(L)&&ca(Y));if(L==="spellcheck"||L==="draggable"||L==="translate"||L==="form"||L==="list"&&G.tagName==="INPUT"||L==="type"&&G.tagName==="TEXTAREA")return!1;if(L==="width"||L==="height"){const he=G.tagName;if(he==="IMG"||he==="VIDEO"||he==="CANVAS"||he==="SOURCE")return!1}return eb(L)&&as(Y)?!1:L in G}const aM=Go({patchProp:nM},O6);let tb;function oM(){return tb||(tb=a6(aM))}const sM=(...G)=>{const L=oM().createApp(...G),{mount:Y}=L;return L.mount=oe=>{const he=uM(oe);if(!he)return;const Ae=L._component;!ca(Ae)&&!Ae.render&&!Ae.template&&(Ae.template=he.innerHTML),he.innerHTML="";const U=Y(he,!1,lM(he));return he instanceof Element&&(he.removeAttribute("v-cloak"),he.setAttribute("data-v-app","")),U},L};function lM(G){if(G instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&G instanceof MathMLElement)return"mathml"}function uM(G){return as(G)?document.querySelector(G):G}/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Fv=typeof document<"u";function fM(G){return G.__esModule||G[Symbol.toStringTag]==="Module"}const Va=Object.assign;function dy(G,L){const Y={};for(const oe in L){const he=L[oe];Y[oe]=Yu(he)?he.map(G):G(he)}return Y}const Xd=()=>{},Yu=Array.isArray,dw=/#/g,cM=/&/g,hM=/\//g,vM=/=/g,dM=/\?/g,pw=/\+/g,pM=/%5B/g,gM=/%5D/g,gw=/%5E/g,yM=/%60/g,yw=/%7B/g,mM=/%7C/g,mw=/%7D/g,xM=/%20/g;function Cm(G){return encodeURI(""+G).replace(mM,"|").replace(pM,"[").replace(gM,"]")}function bM(G){return Cm(G).replace(yw,"{").replace(mw,"}").replace(gw,"^")}function Hy(G){return Cm(G).replace(pw,"%2B").replace(xM,"+").replace(dw,"%23").replace(cM,"%26").replace(yM,"`").replace(yw,"{").replace(mw,"}").replace(gw,"^")}function wM(G){return Hy(G).replace(vM,"%3D")}function TM(G){return Cm(G).replace(dw,"%23").replace(dM,"%3F")}function AM(G){return G==null?"":TM(G).replace(hM,"%2F")}function np(G){try{return decodeURIComponent(""+G)}catch{}return""+G}const MM=/\/$/,EM=G=>G.replace(MM,"");function py(G,L,Y="/"){let oe,he={},Ae="",U="";const F=L.indexOf("#");let e=L.indexOf("?");return F<e&&F>=0&&(e=-1),e>-1&&(oe=L.slice(0,e),Ae=L.slice(e+1,F>-1?F:L.length),he=G(Ae)),F>-1&&(oe=oe||L.slice(0,F),U=L.slice(F,L.length)),oe=_M(oe??L,Y),{fullPath:oe+(Ae&&"?")+Ae+U,path:oe,query:he,hash:np(U)}}function SM(G,L){const Y=L.query?G(L.query):"";return L.path+(Y&&"?")+Y+(L.hash||"")}function rb(G,L){return!L||!G.toLowerCase().startsWith(L.toLowerCase())?G:G.slice(L.length)||"/"}function CM(G,L,Y){const oe=L.matched.length-1,he=Y.matched.length-1;return oe>-1&&oe===he&&$v(L.matched[oe],Y.matched[he])&&xw(L.params,Y.params)&&G(L.query)===G(Y.query)&&L.hash===Y.hash}function $v(G,L){return(G.aliasOf||G)===(L.aliasOf||L)}function xw(G,L){if(Object.keys(G).length!==Object.keys(L).length)return!1;for(const Y in G)if(!LM(G[Y],L[Y]))return!1;return!0}function LM(G,L){return Yu(G)?nb(G,L):Yu(L)?nb(L,G):G===L}function nb(G,L){return Yu(L)?G.length===L.length&&G.every((Y,oe)=>Y===L[oe]):G.length===1&&G[0]===L}function _M(G,L){if(G.startsWith("/"))return G;if(!G)return L;const Y=L.split("/"),oe=G.split("/"),he=oe[oe.length-1];(he===".."||he===".")&&oe.push("");let Ae=Y.length-1,U,F;for(U=0;U<oe.length;U++)if(F=oe[U],F!==".")if(F==="..")Ae>1&&Ae--;else break;return Y.slice(0,Ae).join("/")+"/"+oe.slice(U).join("/")}var ip;(function(G){G.pop="pop",G.push="push"})(ip||(ip={}));var Zd;(function(G){G.back="back",G.forward="forward",G.unknown=""})(Zd||(Zd={}));function PM(G){if(!G)if(Fv){const L=document.querySelector("base");G=L&&L.getAttribute("href")||"/",G=G.replace(/^\w+:\/\/[^\/]+/,"")}else G="/";return G[0]!=="/"&&G[0]!=="#"&&(G="/"+G),EM(G)}const RM=/^[^#]+#/;function IM(G,L){return G.replace(RM,"#")+L}function DM(G,L){const Y=document.documentElement.getBoundingClientRect(),oe=G.getBoundingClientRect();return{behavior:L.behavior,left:oe.left-Y.left-(L.left||0),top:oe.top-Y.top-(L.top||0)}}const og=()=>({left:window.scrollX,top:window.scrollY});function kM(G){let L;if("el"in G){const Y=G.el,oe=typeof Y=="string"&&Y.startsWith("#"),he=typeof Y=="string"?oe?document.getElementById(Y.slice(1)):document.querySelector(Y):Y;if(!he)return;L=DM(he,G)}else L=G;"scrollBehavior"in document.documentElement.style?window.scrollTo(L):window.scrollTo(L.left!=null?L.left:window.scrollX,L.top!=null?L.top:window.scrollY)}function ib(G,L){return(history.state?history.state.position-L:-1)+G}const Gy=new Map;function zM(G,L){Gy.set(G,L)}function OM(G){const L=Gy.get(G);return Gy.delete(G),L}let FM=()=>location.protocol+"//"+location.host;function bw(G,L){const{pathname:Y,search:oe,hash:he}=L,Ae=G.indexOf("#");if(Ae>-1){let F=he.includes(G.slice(Ae))?G.slice(Ae).length:1,e=he.slice(F);return e[0]!=="/"&&(e="/"+e),rb(e,"")}return rb(Y,G)+oe+he}function BM(G,L,Y,oe){let he=[],Ae=[],U=null;const F=({state:E})=>{const T=bw(G,location),v=Y.value,g=L.value;let r=0;if(E){if(Y.value=T,L.value=E,U&&U===v){U=null;return}r=g?E.position-g.position:0}else oe(T);he.forEach(t=>{t(Y.value,v,{delta:r,type:ip.pop,direction:r?r>0?Zd.forward:Zd.back:Zd.unknown})})};function e(){U=Y.value}function d(E){he.push(E);const T=()=>{const v=he.indexOf(E);v>-1&&he.splice(v,1)};return Ae.push(T),T}function S(){const{history:E}=window;E.state&&E.replaceState(Va({},E.state,{scroll:og()}),"")}function n(){for(const E of Ae)E();Ae=[],window.removeEventListener("popstate",F),window.removeEventListener("beforeunload",S)}return window.addEventListener("popstate",F),window.addEventListener("beforeunload",S,{passive:!0}),{pauseListeners:e,listen:d,destroy:n}}function ab(G,L,Y,oe=!1,he=!1){return{back:G,current:L,forward:Y,replaced:oe,position:window.history.length,scroll:he?og():null}}function NM(G){const{history:L,location:Y}=window,oe={value:bw(G,Y)},he={value:L.state};he.value||Ae(oe.value,{back:null,current:oe.value,forward:null,position:L.length-1,replaced:!0,scroll:null},!0);function Ae(e,d,S){const n=G.indexOf("#"),E=n>-1?(Y.host&&document.querySelector("base")?G:G.slice(n))+e:FM()+G+e;try{L[S?"replaceState":"pushState"](d,"",E),he.value=d}catch(T){console.error(T),Y[S?"replace":"assign"](E)}}function U(e,d){const S=Va({},L.state,ab(he.value.back,e,he.value.forward,!0),d,{position:he.value.position});Ae(e,S,!0),oe.value=e}function F(e,d){const S=Va({},he.value,L.state,{forward:e,scroll:og()});Ae(S.current,S,!0);const n=Va({},ab(oe.value,e,null),{position:S.position+1},d);Ae(e,n,!1),oe.value=e}return{location:oe,state:he,push:F,replace:U}}function UM(G){G=PM(G);const L=NM(G),Y=BM(G,L.state,L.location,L.replace);function oe(Ae,U=!0){U||Y.pauseListeners(),history.go(Ae)}const he=Va({location:"",base:G,go:oe,createHref:IM.bind(null,G)},L,Y);return Object.defineProperty(he,"location",{enumerable:!0,get:()=>L.location.value}),Object.defineProperty(he,"state",{enumerable:!0,get:()=>L.state.value}),he}function VM(G){return G=location.host?G||location.pathname+location.search:"",G.includes("#")||(G+="#"),UM(G)}function HM(G){return typeof G=="string"||G&&typeof G=="object"}function ww(G){return typeof G=="string"||typeof G=="symbol"}const jc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Tw=Symbol("");var ob;(function(G){G[G.aborted=4]="aborted",G[G.cancelled=8]="cancelled",G[G.duplicated=16]="duplicated"})(ob||(ob={}));function qv(G,L){return Va(new Error,{type:G,[Tw]:!0},L)}function Jf(G,L){return G instanceof Error&&Tw in G&&(L==null||!!(G.type&L))}const sb="[^/]+?",GM={sensitive:!1,strict:!1,start:!0,end:!0},WM=/[.+*?^${}()[\]/\\]/g;function YM(G,L){const Y=Va({},GM,L),oe=[];let he=Y.start?"^":"";const Ae=[];for(const d of G){const S=d.length?[]:[90];Y.strict&&!d.length&&(he+="/");for(let n=0;n<d.length;n++){const E=d[n];let T=40+(Y.sensitive?.25:0);if(E.type===0)n||(he+="/"),he+=E.value.replace(WM,"\\$&"),T+=40;else if(E.type===1){const{value:v,repeatable:g,optional:r,regexp:t}=E;Ae.push({name:v,repeatable:g,optional:r});const o=t||sb;if(o!==sb){T+=10;try{new RegExp(`(${o})`)}catch(f){throw new Error(`Invalid custom RegExp for param "${v}" (${o}): `+f.message)}}let i=g?`((?:${o})(?:/(?:${o}))*)`:`(${o})`;n||(i=r&&d.length<2?`(?:/${i})`:"/"+i),r&&(i+="?"),he+=i,T+=20,r&&(T+=-8),g&&(T+=-20),o===".*"&&(T+=-50)}S.push(T)}oe.push(S)}if(Y.strict&&Y.end){const d=oe.length-1;oe[d][oe[d].length-1]+=.7000000000000001}Y.strict||(he+="/?"),Y.end?he+="$":Y.strict&&(he+="(?:/|$)");const U=new RegExp(he,Y.sensitive?"":"i");function F(d){const S=d.match(U),n={};if(!S)return null;for(let E=1;E<S.length;E++){const T=S[E]||"",v=Ae[E-1];n[v.name]=T&&v.repeatable?T.split("/"):T}return n}function e(d){let S="",n=!1;for(const E of G){(!n||!S.endsWith("/"))&&(S+="/"),n=!1;for(const T of E)if(T.type===0)S+=T.value;else if(T.type===1){const{value:v,repeatable:g,optional:r}=T,t=v in d?d[v]:"";if(Yu(t)&&!g)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const o=Yu(t)?t.join("/"):t;if(!o)if(r)E.length<2&&(S.endsWith("/")?S=S.slice(0,-1):n=!0);else throw new Error(`Missing required param "${v}"`);S+=o}}return S||"/"}return{re:U,score:oe,keys:Ae,parse:F,stringify:e}}function XM(G,L){let Y=0;for(;Y<G.length&&Y<L.length;){const oe=L[Y]-G[Y];if(oe)return oe;Y++}return G.length<L.length?G.length===1&&G[0]===80?-1:1:G.length>L.length?L.length===1&&L[0]===80?1:-1:0}function Aw(G,L){let Y=0;const oe=G.score,he=L.score;for(;Y<oe.length&&Y<he.length;){const Ae=XM(oe[Y],he[Y]);if(Ae)return Ae;Y++}if(Math.abs(he.length-oe.length)===1){if(lb(oe))return 1;if(lb(he))return-1}return he.length-oe.length}function lb(G){const L=G[G.length-1];return G.length>0&&L[L.length-1]<0}const ZM={type:0,value:""},jM=/[a-zA-Z0-9_]/;function KM(G){if(!G)return[[]];if(G==="/")return[[ZM]];if(!G.startsWith("/"))throw new Error(`Invalid path "${G}"`);function L(T){throw new Error(`ERR (${Y})/"${d}": ${T}`)}let Y=0,oe=Y;const he=[];let Ae;function U(){Ae&&he.push(Ae),Ae=[]}let F=0,e,d="",S="";function n(){d&&(Y===0?Ae.push({type:0,value:d}):Y===1||Y===2||Y===3?(Ae.length>1&&(e==="*"||e==="+")&&L(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),Ae.push({type:1,value:d,regexp:S,repeatable:e==="*"||e==="+",optional:e==="*"||e==="?"})):L("Invalid state to consume buffer"),d="")}function E(){d+=e}for(;F<G.length;){if(e=G[F++],e==="\\"&&Y!==2){oe=Y,Y=4;continue}switch(Y){case 0:e==="/"?(d&&n(),U()):e===":"?(n(),Y=1):E();break;case 4:E(),Y=oe;break;case 1:e==="("?Y=2:jM.test(e)?E():(n(),Y=0,e!=="*"&&e!=="?"&&e!=="+"&&F--);break;case 2:e===")"?S[S.length-1]=="\\"?S=S.slice(0,-1)+e:Y=3:S+=e;break;case 3:n(),Y=0,e!=="*"&&e!=="?"&&e!=="+"&&F--,S="";break;default:L("Unknown state");break}}return Y===2&&L(`Unfinished custom RegExp for param "${d}"`),n(),U(),he}function JM(G,L,Y){const oe=YM(KM(G.path),Y),he=Va(oe,{record:G,parent:L,children:[],alias:[]});return L&&!he.record.aliasOf==!L.record.aliasOf&&L.children.push(he),he}function QM(G,L){const Y=[],oe=new Map;L=cb({strict:!1,end:!0,sensitive:!1},L);function he(S){return oe.get(S)}function Ae(S,n,E){const T=!E,v=$M(S);v.aliasOf=E&&E.record;const g=cb(L,S),r=[v];if("alias"in S){const i=typeof S.alias=="string"?[S.alias]:S.alias;for(const f of i)r.push(Va({},v,{components:E?E.record.components:v.components,path:f,aliasOf:E?E.record:v}))}let t,o;for(const i of r){const{path:f}=i;if(n&&f[0]!=="/"){const u=n.record.path,l=u[u.length-1]==="/"?"":"/";i.path=n.record.path+(f&&l+f)}if(t=JM(i,n,g),E?E.alias.push(t):(o=o||t,o!==t&&o.alias.push(t),T&&S.name&&!fb(t)&&U(S.name)),Mw(t)&&e(t),v.children){const u=v.children;for(let l=0;l<u.length;l++)Ae(u[l],t,E&&E.children[l])}E=E||t}return o?()=>{U(o)}:Xd}function U(S){if(ww(S)){const n=oe.get(S);n&&(oe.delete(S),Y.splice(Y.indexOf(n),1),n.children.forEach(U),n.alias.forEach(U))}else{const n=Y.indexOf(S);n>-1&&(Y.splice(n,1),S.record.name&&oe.delete(S.record.name),S.children.forEach(U),S.alias.forEach(U))}}function F(){return Y}function e(S){const n=tE(S,Y);Y.splice(n,0,S),S.record.name&&!fb(S)&&oe.set(S.record.name,S)}function d(S,n){let E,T={},v,g;if("name"in S&&S.name){if(E=oe.get(S.name),!E)throw qv(1,{location:S});g=E.record.name,T=Va(ub(n.params,E.keys.filter(o=>!o.optional).concat(E.parent?E.parent.keys.filter(o=>o.optional):[]).map(o=>o.name)),S.params&&ub(S.params,E.keys.map(o=>o.name))),v=E.stringify(T)}else if(S.path!=null)v=S.path,E=Y.find(o=>o.re.test(v)),E&&(T=E.parse(v),g=E.record.name);else{if(E=n.name?oe.get(n.name):Y.find(o=>o.re.test(n.path)),!E)throw qv(1,{location:S,currentLocation:n});g=E.record.name,T=Va({},n.params,S.params),v=E.stringify(T)}const r=[];let t=E;for(;t;)r.unshift(t.record),t=t.parent;return{name:g,path:v,params:T,matched:r,meta:eE(r)}}return G.forEach(S=>Ae(S)),{addRoute:Ae,resolve:d,removeRoute:U,getRoutes:F,getRecordMatcher:he}}function ub(G,L){const Y={};for(const oe of L)oe in G&&(Y[oe]=G[oe]);return Y}function $M(G){return{path:G.path,redirect:G.redirect,name:G.name,meta:G.meta||{},aliasOf:void 0,beforeEnter:G.beforeEnter,props:qM(G),children:G.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in G?G.components||null:G.component&&{default:G.component}}}function qM(G){const L={},Y=G.props||!1;if("component"in G)L.default=Y;else for(const oe in G.components)L[oe]=typeof Y=="object"?Y[oe]:Y;return L}function fb(G){for(;G;){if(G.record.aliasOf)return!0;G=G.parent}return!1}function eE(G){return G.reduce((L,Y)=>Va(L,Y.meta),{})}function cb(G,L){const Y={};for(const oe in G)Y[oe]=oe in L?L[oe]:G[oe];return Y}function tE(G,L){let Y=0,oe=L.length;for(;Y!==oe;){const Ae=Y+oe>>1;Aw(G,L[Ae])<0?oe=Ae:Y=Ae+1}const he=rE(G);return he&&(oe=L.lastIndexOf(he,oe-1)),oe}function rE(G){let L=G;for(;L=L.parent;)if(Mw(L)&&Aw(G,L)===0)return L}function Mw({record:G}){return!!(G.name||G.components&&Object.keys(G.components).length||G.redirect)}function nE(G){const L={};if(G===""||G==="?")return L;const oe=(G[0]==="?"?G.slice(1):G).split("&");for(let he=0;he<oe.length;++he){const Ae=oe[he].replace(pw," "),U=Ae.indexOf("="),F=np(U<0?Ae:Ae.slice(0,U)),e=U<0?null:np(Ae.slice(U+1));if(F in L){let d=L[F];Yu(d)||(d=L[F]=[d]),d.push(e)}else L[F]=e}return L}function hb(G){let L="";for(let Y in G){const oe=G[Y];if(Y=wM(Y),oe==null){oe!==void 0&&(L+=(L.length?"&":"")+Y);continue}(Yu(oe)?oe.map(Ae=>Ae&&Hy(Ae)):[oe&&Hy(oe)]).forEach(Ae=>{Ae!==void 0&&(L+=(L.length?"&":"")+Y,Ae!=null&&(L+="="+Ae))})}return L}function iE(G){const L={};for(const Y in G){const oe=G[Y];oe!==void 0&&(L[Y]=Yu(oe)?oe.map(he=>he==null?null:""+he):oe==null?oe:""+oe)}return L}const aE=Symbol(""),vb=Symbol(""),sg=Symbol(""),Lm=Symbol(""),Wy=Symbol("");function Rd(){let G=[];function L(oe){return G.push(oe),()=>{const he=G.indexOf(oe);he>-1&&G.splice(he,1)}}function Y(){G=[]}return{add:L,list:()=>G.slice(),reset:Y}}function nh(G,L,Y,oe,he,Ae=U=>U()){const U=oe&&(oe.enterCallbacks[he]=oe.enterCallbacks[he]||[]);return()=>new Promise((F,e)=>{const d=E=>{E===!1?e(qv(4,{from:Y,to:L})):E instanceof Error?e(E):HM(E)?e(qv(2,{from:L,to:E})):(U&&oe.enterCallbacks[he]===U&&typeof E=="function"&&U.push(E),F())},S=Ae(()=>G.call(oe&&oe.instances[he],L,Y,d));let n=Promise.resolve(S);G.length<3&&(n=n.then(d)),n.catch(E=>e(E))})}function gy(G,L,Y,oe,he=Ae=>Ae()){const Ae=[];for(const U of G)for(const F in U.components){let e=U.components[F];if(!(L!=="beforeRouteEnter"&&!U.instances[F]))if(oE(e)){const S=(e.__vccOpts||e)[L];S&&Ae.push(nh(S,Y,oe,U,F,he))}else{let d=e();Ae.push(()=>d.then(S=>{if(!S)return Promise.reject(new Error(`Couldn't resolve component "${F}" at "${U.path}"`));const n=fM(S)?S.default:S;U.components[F]=n;const T=(n.__vccOpts||n)[L];return T&&nh(T,Y,oe,U,F,he)()}))}}return Ae}function oE(G){return typeof G=="object"||"displayName"in G||"props"in G||"__vccOpts"in G}function db(G){const L=cu(sg),Y=cu(Lm),oe=ws(()=>{const e=rc(G.to);return L.resolve(e)}),he=ws(()=>{const{matched:e}=oe.value,{length:d}=e,S=e[d-1],n=Y.matched;if(!S||!n.length)return-1;const E=n.findIndex($v.bind(null,S));if(E>-1)return E;const T=pb(e[d-2]);return d>1&&pb(S)===T&&n[n.length-1].path!==T?n.findIndex($v.bind(null,e[d-2])):E}),Ae=ws(()=>he.value>-1&&fE(Y.params,oe.value.params)),U=ws(()=>he.value>-1&&he.value===Y.matched.length-1&&xw(Y.params,oe.value.params));function F(e={}){return uE(e)?L[rc(G.replace)?"replace":"push"](rc(G.to)).catch(Xd):Promise.resolve()}return{route:oe,href:ws(()=>oe.value.href),isActive:Ae,isExactActive:U,navigate:F}}const sE=H3({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:db,setup(G,{slots:L}){const Y=gp(db(G)),{options:oe}=cu(sg),he=ws(()=>({[gb(G.activeClass,oe.linkActiveClass,"router-link-active")]:Y.isActive,[gb(G.exactActiveClass,oe.linkExactActiveClass,"router-link-exact-active")]:Y.isExactActive}));return()=>{const Ae=L.default&&L.default(Y);return G.custom?Ae:Sm("a",{"aria-current":Y.isExactActive?G.ariaCurrentValue:null,href:Y.href,onClick:Y.navigate,class:he.value},Ae)}}}),lE=sE;function uE(G){if(!(G.metaKey||G.altKey||G.ctrlKey||G.shiftKey)&&!G.defaultPrevented&&!(G.button!==void 0&&G.button!==0)){if(G.currentTarget&&G.currentTarget.getAttribute){const L=G.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(L))return}return G.preventDefault&&G.preventDefault(),!0}}function fE(G,L){for(const Y in L){const oe=L[Y],he=G[Y];if(typeof oe=="string"){if(oe!==he)return!1}else if(!Yu(he)||he.length!==oe.length||oe.some((Ae,U)=>Ae!==he[U]))return!1}return!0}function pb(G){return G?G.aliasOf?G.aliasOf.path:G.path:""}const gb=(G,L,Y)=>G??L??Y,cE=H3({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(G,{attrs:L,slots:Y}){const oe=cu(Wy),he=ws(()=>G.route||oe.value),Ae=cu(vb,0),U=ws(()=>{let d=rc(Ae);const{matched:S}=he.value;let n;for(;(n=S[d])&&!n.components;)d++;return d}),F=ws(()=>he.value.matched[U.value]);A0(vb,ws(()=>U.value+1)),A0(aE,F),A0(Wy,he);const e=io();return lh(()=>[e.value,F.value,G.name],([d,S,n],[E,T,v])=>{S&&(S.instances[n]=d,T&&T!==S&&d&&d===E&&(S.leaveGuards.size||(S.leaveGuards=T.leaveGuards),S.updateGuards.size||(S.updateGuards=T.updateGuards))),d&&S&&(!T||!$v(S,T)||!E)&&(S.enterCallbacks[n]||[]).forEach(g=>g(d))},{flush:"post"}),()=>{const d=he.value,S=G.name,n=F.value,E=n&&n.components[S];if(!E)return yb(Y.default,{Component:E,route:d});const T=n.props[S],v=T?T===!0?d.params:typeof T=="function"?T(d):T:null,r=Sm(E,Va({},v,L,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(n.instances[S]=null)},ref:e}));return yb(Y.default,{Component:r,route:d})||r}}});function yb(G,L){if(!G)return null;const Y=G(L);return Y.length===1?Y[0]:Y}const hE=cE;function vE(G){const L=QM(G.routes,G),Y=G.parseQuery||nE,oe=G.stringifyQuery||hb,he=G.history,Ae=Rd(),U=Rd(),F=Rd(),e=yA(jc);let d=jc;Fv&&G.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const S=dy.bind(null,B=>""+B),n=dy.bind(null,AM),E=dy.bind(null,np);function T(B,z){let H,X;return ww(B)?(H=L.getRecordMatcher(B),X=z):X=B,L.addRoute(X,H)}function v(B){const z=L.getRecordMatcher(B);z&&L.removeRoute(z)}function g(){return L.getRoutes().map(B=>B.record)}function r(B){return!!L.getRecordMatcher(B)}function t(B,z){if(z=Va({},z||e.value),typeof B=="string"){const ue=py(Y,B,z.path),te=L.resolve({path:ue.path},z),J=he.createHref(ue.fullPath);return Va(ue,te,{params:E(te.params),hash:np(ue.hash),redirectedFrom:void 0,href:J})}let H;if(B.path!=null)H=Va({},B,{path:py(Y,B.path,z.path).path});else{const ue=Va({},B.params);for(const te in ue)ue[te]==null&&delete ue[te];H=Va({},B,{params:n(ue)}),z.params=n(z.params)}const X=L.resolve(H,z),$=B.hash||"";X.params=S(E(X.params));const ne=SM(oe,Va({},B,{hash:bM($),path:X.path})),q=he.createHref(ne);return Va({fullPath:ne,hash:$,query:oe===hb?iE(B.query):B.query||{}},X,{redirectedFrom:void 0,href:q})}function o(B){return typeof B=="string"?py(Y,B,e.value.path):Va({},B)}function i(B,z){if(d!==B)return qv(8,{from:z,to:B})}function f(B){return m(B)}function u(B){return f(Va(o(B),{replace:!0}))}function l(B){const z=B.matched[B.matched.length-1];if(z&&z.redirect){const{redirect:H}=z;let X=typeof H=="function"?H(B):H;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=o(X):{path:X},X.params={}),Va({query:B.query,hash:B.hash,params:X.path!=null?{}:B.params},X)}}function m(B,z){const H=d=t(B),X=e.value,$=B.state,ne=B.force,q=B.replace===!0,ue=l(H);if(ue)return m(Va(o(ue),{state:typeof ue=="object"?Va({},$,ue.state):$,force:ne,replace:q}),z||H);const te=H;te.redirectedFrom=z;let J;return!ne&&CM(oe,X,H)&&(J=qv(16,{to:te,from:X}),b(X,X,!0,!1)),(J?Promise.resolve(J):c(te,X)).catch(ie=>Jf(ie)?Jf(ie,2)?ie:_(ie):M(ie,te,X)).then(ie=>{if(ie){if(Jf(ie,2))return m(Va({replace:q},o(ie.to),{state:typeof ie.to=="object"?Va({},$,ie.to.state):$,force:ne}),z||te)}else ie=p(te,X,!0,q,$);return a(te,X,ie),ie})}function h(B,z){const H=i(B,z);return H?Promise.reject(H):Promise.resolve()}function w(B){const z=V.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(B):B()}function c(B,z){let H;const[X,$,ne]=dE(B,z);H=gy(X.reverse(),"beforeRouteLeave",B,z);for(const ue of X)ue.leaveGuards.forEach(te=>{H.push(nh(te,B,z))});const q=h.bind(null,B,z);return H.push(q),N(H).then(()=>{H=[];for(const ue of Ae.list())H.push(nh(ue,B,z));return H.push(q),N(H)}).then(()=>{H=gy($,"beforeRouteUpdate",B,z);for(const ue of $)ue.updateGuards.forEach(te=>{H.push(nh(te,B,z))});return H.push(q),N(H)}).then(()=>{H=[];for(const ue of ne)if(ue.beforeEnter)if(Yu(ue.beforeEnter))for(const te of ue.beforeEnter)H.push(nh(te,B,z));else H.push(nh(ue.beforeEnter,B,z));return H.push(q),N(H)}).then(()=>(B.matched.forEach(ue=>ue.enterCallbacks={}),H=gy(ne,"beforeRouteEnter",B,z,w),H.push(q),N(H))).then(()=>{H=[];for(const ue of U.list())H.push(nh(ue,B,z));return H.push(q),N(H)}).catch(ue=>Jf(ue,8)?ue:Promise.reject(ue))}function a(B,z,H){F.list().forEach(X=>w(()=>X(B,z,H)))}function p(B,z,H,X,$){const ne=i(B,z);if(ne)return ne;const q=z===jc,ue=Fv?history.state:{};H&&(X||q?he.replace(B.fullPath,Va({scroll:q&&ue&&ue.scroll},$)):he.push(B.fullPath,$)),e.value=B,b(B,z,H,q),_()}let x;function A(){x||(x=he.listen((B,z,H)=>{if(!O.listening)return;const X=t(B),$=l(X);if($){m(Va($,{replace:!0}),X).catch(Xd);return}d=X;const ne=e.value;Fv&&zM(ib(ne.fullPath,H.delta),og()),c(X,ne).catch(q=>Jf(q,12)?q:Jf(q,2)?(m(q.to,X).then(ue=>{Jf(ue,20)&&!H.delta&&H.type===ip.pop&&he.go(-1,!1)}).catch(Xd),Promise.reject()):(H.delta&&he.go(-H.delta,!1),M(q,X,ne))).then(q=>{q=q||p(X,ne,!1),q&&(H.delta&&!Jf(q,8)?he.go(-H.delta,!1):H.type===ip.pop&&Jf(q,20)&&he.go(-1,!1)),a(X,ne,q)}).catch(Xd)}))}let P=Rd(),y=Rd(),C;function M(B,z,H){_(B);const X=y.list();return X.length?X.forEach($=>$(B,z,H)):console.error(B),Promise.reject(B)}function s(){return C&&e.value!==jc?Promise.resolve():new Promise((B,z)=>{P.add([B,z])})}function _(B){return C||(C=!B,A(),P.list().forEach(([z,H])=>B?H(B):z()),P.reset()),B}function b(B,z,H,X){const{scrollBehavior:$}=G;if(!Fv||!$)return Promise.resolve();const ne=!H&&OM(ib(B.fullPath,0))||(X||!H)&&history.state&&history.state.scroll||null;return bm().then(()=>$(B,z,ne)).then(q=>q&&kM(q)).catch(q=>M(q,B,z))}const k=B=>he.go(B);let D;const V=new Set,O={currentRoute:e,listening:!0,addRoute:T,removeRoute:v,hasRoute:r,getRoutes:g,resolve:t,options:G,push:f,replace:u,go:k,back:()=>k(-1),forward:()=>k(1),beforeEach:Ae.add,beforeResolve:U.add,afterEach:F.add,onError:y.add,isReady:s,install(B){const z=this;B.component("RouterLink",lE),B.component("RouterView",hE),B.config.globalProperties.$router=z,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>rc(e)}),Fv&&!D&&e.value===jc&&(D=!0,f(he.location).catch($=>{}));const H={};for(const $ in jc)Object.defineProperty(H,$,{get:()=>e.value[$],enumerable:!0});B.provide(sg,z),B.provide(Lm,C3(H)),B.provide(Wy,e);const X=B.unmount;V.add(B),B.unmount=function(){V.delete(B),V.size<1&&(d=jc,x&&x(),x=null,e.value=jc,D=!1,C=!1),X()}}};function N(B){return B.reduce((z,H)=>z.then(()=>w(H)),Promise.resolve())}return O}function dE(G,L){const Y=[],oe=[],he=[],Ae=Math.max(L.matched.length,G.matched.length);for(let U=0;U<Ae;U++){const F=L.matched[U];F&&(G.matched.find(d=>$v(d,F))?oe.push(F):Y.push(F));const e=G.matched[U];e&&(L.matched.find(d=>$v(d,e))||he.push(e))}return[Y,oe,he]}function Ew(){return cu(sg)}function pE(){return cu(Lm)}function gE(G){return{all:G=G||new Map,on:function(L,Y){var oe=G.get(L);oe?oe.push(Y):G.set(L,[Y])},off:function(L,Y){var oe=G.get(L);oe&&(Y?oe.splice(oe.indexOf(Y)>>>0,1):G.set(L,[]))},emit:function(L,Y){var oe=G.get(L);oe&&oe.slice().map(function(he){he(Y)}),(oe=G.get("*"))&&oe.slice().map(function(he){he(L,Y)})}}}const Sw=gE();var yE=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Cw;const lg=G=>Cw=G,Lw=Symbol();function Yy(G){return G&&typeof G=="object"&&Object.prototype.toString.call(G)==="[object Object]"&&typeof G.toJSON!="function"}var jd;(function(G){G.direct="direct",G.patchObject="patch object",G.patchFunction="patch function"})(jd||(jd={}));function mE(){const G=d3(!0),L=G.run(()=>io({}));let Y=[],oe=[];const he=ym({install(Ae){lg(he),he._a=Ae,Ae.provide(Lw,he),Ae.config.globalProperties.$pinia=he,oe.forEach(U=>Y.push(U)),oe=[]},use(Ae){return!this._a&&!yE?oe.push(Ae):Y.push(Ae),this},_p:Y,_a:null,_e:G,_s:new Map,state:L});return he}const _w=()=>{};function mb(G,L,Y,oe=_w){G.push(L);const he=()=>{const Ae=G.indexOf(L);Ae>-1&&(G.splice(Ae,1),oe())};return!Y&&p3()&&K5(he),he}function Rv(G,...L){G.slice().forEach(Y=>{Y(...L)})}const xE=G=>G();function Xy(G,L){G instanceof Map&&L instanceof Map&&L.forEach((Y,oe)=>G.set(oe,Y)),G instanceof Set&&L instanceof Set&&L.forEach(G.add,G);for(const Y in L){if(!L.hasOwnProperty(Y))continue;const oe=L[Y],he=G[Y];Yy(he)&&Yy(oe)&&G.hasOwnProperty(Y)&&!Ko(oe)&&!ev(oe)?G[Y]=Xy(he,oe):G[Y]=oe}return G}const bE=Symbol();function wE(G){return!Yy(G)||!G.hasOwnProperty(bE)}const{assign:Qc}=Object;function TE(G){return!!(Ko(G)&&G.effect)}function AE(G,L,Y,oe){const{state:he,actions:Ae,getters:U}=L,F=Y.state.value[G];let e;function d(){F||(Y.state.value[G]=he?he():{});const S=bA(Y.state.value[G]);return Qc(S,Ae,Object.keys(U||{}).reduce((n,E)=>(n[E]=ym(ws(()=>{lg(Y);const T=Y._s.get(G);return U[E].call(T,T)})),n),{}))}return e=Pw(G,d,L,Y,oe,!0),e}function Pw(G,L,Y={},oe,he,Ae){let U;const F=Qc({actions:{}},Y),e={deep:!0};let d,S,n=[],E=[],T;const v=oe.state.value[G];!Ae&&!v&&(oe.state.value[G]={}),io({});let g;function r(h){let w;d=S=!1,typeof h=="function"?(h(oe.state.value[G]),w={type:jd.patchFunction,storeId:G,events:T}):(Xy(oe.state.value[G],h),w={type:jd.patchObject,payload:h,storeId:G,events:T});const c=g=Symbol();bm().then(()=>{g===c&&(d=!0)}),S=!0,Rv(n,w,oe.state.value[G])}const t=Ae?function(){const{state:w}=Y,c=w?w():{};this.$patch(a=>{Qc(a,c)})}:_w;function o(){U.stop(),n=[],E=[],oe._s.delete(G)}function i(h,w){return function(){lg(oe);const c=Array.from(arguments),a=[],p=[];function x(y){a.push(y)}function A(y){p.push(y)}Rv(E,{args:c,name:h,store:u,after:x,onError:A});let P;try{P=w.apply(this&&this.$id===G?this:u,c)}catch(y){throw Rv(p,y),y}return P instanceof Promise?P.then(y=>(Rv(a,y),y)).catch(y=>(Rv(p,y),Promise.reject(y))):(Rv(a,P),P)}}const f={_p:oe,$id:G,$onAction:mb.bind(null,E),$patch:r,$reset:t,$subscribe(h,w={}){const c=mb(n,h,w.detached,()=>a()),a=U.run(()=>lh(()=>oe.state.value[G],p=>{(w.flush==="sync"?S:d)&&h({storeId:G,type:jd.direct,events:T},p)},Qc({},e,w)));return c},$dispose:o},u=gp(f);oe._s.set(G,u);const m=(oe._a&&oe._a.runWithContext||xE)(()=>oe._e.run(()=>(U=d3()).run(L)));for(const h in m){const w=m[h];if(Ko(w)&&!TE(w)||ev(w))Ae||(v&&wE(w)&&(Ko(w)?w.value=v[h]:Xy(w,v[h])),oe.state.value[G][h]=w);else if(typeof w=="function"){const c=i(h,w);m[h]=c,F.actions[h]=w}}return Qc(u,m),Qc(La(u),m),Object.defineProperty(u,"$state",{get:()=>oe.state.value[G],set:h=>{r(w=>{Qc(w,h)})}}),oe._p.forEach(h=>{Qc(u,U.run(()=>h({store:u,app:oe._a,pinia:oe,options:F})))}),v&&Ae&&Y.hydrate&&Y.hydrate(u.$state,v),d=!0,S=!0,u}function ME(G,L,Y){let oe,he;const Ae=typeof L=="function";oe=G,he=Ae?Y:L;function U(F,e){const d=qA();return F=F||(d?cu(Lw,null):null),F&&lg(F),F=Cw,F._s.has(oe)||(Ae?Pw(oe,L,he,F):AE(oe,he,F)),F._s.get(oe)}return U.$id=oe,U}const _m=ME("sidebar",{state:()=>({isSidebarOpen:!0}),actions:{toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen},closeSidebar(){this.isSidebarOpen=!1},checkScreenSize(){window.innerWidth<768?this.isSidebarOpen=!1:this.isSidebarOpen=!0}}}),EE={key:0,class:"fixed top-0 left-0 w-full z-50 border-b-2 border-gray-200 dark:border-gray-700 bg-white bg-opacity-50 dark:bg-gray-800 dark:bg-opacity-50 navbar"},SE={class:"max-w-full flex items-center justify-between mx-auto p-4"},CE={class:"h-8 w-8",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},LE=["stroke"],_E=["stroke"],PE=ii("span",{class:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white"},"",-1),RE={id:"navbar-multi-level",class:"font-medium flex items-center"},IE={class:"flex items-center p-0 border-0 space-x-4"},DE={class:"group"},kE=ii("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[ii("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7l3-3h4l3 3h8a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2z"})],-1),zE=ii("span",{class:"pl-2 md:inline hidden"},"  ",-1),OE=[kE,zE],FE={class:"group"},BE=ii("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[ii("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 11c1.656 0 3-1.344 3-3s-1.344-3-3-3-3 1.344-3 3 1.344 3 3 3zm0 2c-2.67 0-8 1.344-8 4v1h16v-1c0-2.656-5.33-4-8-4z"})],-1),NE=ii("span",{class:"pl-2 md:inline hidden"},"  ",-1),UE=[BE,NE],VE=ii("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[ii("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16m-7 6h7"})],-1),HE=[VE],GE={__name:"Navbar",props:{isDarkMode:Boolean},setup(G){const L=_m(),Y=G,oe=ws(()=>Y.isDarkMode?"yellow":"blue"),he=()=>{L.toggleSidebar()},Ae=Ew(),U=e=>{Sw.emit("transition-ended"),console.log("Navigation event emitted"),Ae.push(e)},F=io(!1);return hu(()=>{setTimeout(()=>{F.value=!0},100)}),(e,d)=>{const S=tg("router-link");return _a(),dl(tv,{name:"slide-fade",mode:"out-in"},{default:rs(()=>[F.value?(_a(),jo("nav",EE,[ii("div",SE,[Ga(S,{to:"/",class:"flex items-center"},{default:rs(()=>[(_a(),jo("svg",CE,[ii("polygon",{points:"50,10 90,50 50,90 10,50",stroke:oe.value,"stroke-width":"3",fill:"none"},null,8,LE),ii("polygon",{points:"50,30 70,50 50,70 30,50",stroke:oe.value,"stroke-width":"3",fill:"none"},null,8,_E)])),PE]),_:1}),ii("div",RE,[ii("ul",IE,[ii("li",DE,[ii("button",{onClick:d[0]||(d[0]=n=>U("/DashBoard")),class:"flex items-center text-gray-900 hover:text-blue-500 w-auto dark:text-white dark:hover:text-yellow-300 dark:focus:text-white"},OE)]),ii("li",FE,[ii("button",{onClick:d[1]||(d[1]=n=>U("/About")),class:"flex items-center text-gray-900 hover:text-blue-500 w-auto dark:text-white dark:hover:text-yellow-300 dark:focus:text-white"},UE)]),ii("li",{class:"md:hidden"},[ii("button",{onClick:he,class:"flex items-center text-gray-900 hover:text-blue-500 dark:text-white dark:hover:text-yellow-300 dark:focus:text-white"},HE)])])])])])):ic("",!0)]),_:1})}}},Zu=(G,L)=>{const Y=G.__vccOpts||G;for(const[oe,he]of L)Y[oe]=he;return Y},mp=G=>(rd("data-v-229a920c"),G=G(),nd(),G),WE={key:0,class:"fixed top-0 left-0 w-full z-50 navbar bg-transparent border-none h-20"},YE={class:"max-w-full flex items-center justify-between mx-auto px-2 xs:px-12 sm:px-36 pt-10 pb-10"},XE={class:"h-8 w-8",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},ZE=["stroke"],jE=["stroke"],KE=mp(()=>ii("span",{class:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white"},"",-1)),JE={id:"navbar-multi-level",class:"font-medium flex items-center"},QE={class:"flex items-center p-0 border-0 space-x-4"},$E={class:"group"},qE=mp(()=>ii("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[ii("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7l3-3h4l3 3h8a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2z"})],-1)),eS=mp(()=>ii("span",{class:"pl-2 md:inline hidden"},"  ",-1)),tS=[qE,eS],rS={class:"group"},nS=mp(()=>ii("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[ii("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 11c1.656 0 3-1.344 3-3s-1.344-3-3-3-3 1.344-3 3 1.344 3 3 3zm0 2c-2.67 0-8 1.344-8 4v1h16v-1c0-2.656-5.33-4-8-4z"})],-1)),iS=mp(()=>ii("span",{class:"pl-2 md:inline hidden"},"  ",-1)),aS=[nS,iS],oS={__name:"NavbarAbout",props:{isDarkMode:Boolean},setup(G){_m();const L=G,Y=ws(()=>L.isDarkMode?"yellow":"blue"),oe=Ew(),he=U=>{Sw.emit("transition-ended"),console.log("Navigation event emitted"),oe.push(U)},Ae=io(!1);return hu(()=>{setTimeout(()=>{Ae.value=!0},100)}),(U,F)=>{const e=tg("router-link");return _a(),dl(tv,{name:"slide-fade",mode:"out-in"},{default:rs(()=>[Ae.value?(_a(),jo("nav",WE,[ii("div",YE,[Ga(e,{to:"/",class:"flex items-center"},{default:rs(()=>[(_a(),jo("svg",XE,[ii("polygon",{points:"50,10 90,50 50,90 10,50",stroke:Y.value,"stroke-width":"3",fill:"none"},null,8,ZE),ii("polygon",{points:"50,30 70,50 50,70 30,50",stroke:Y.value,"stroke-width":"3",fill:"none"},null,8,jE)])),KE]),_:1}),ii("div",JE,[ii("ul",QE,[ii("li",$E,[ii("button",{onClick:F[0]||(F[0]=d=>he("/DashBoard")),class:"flex items-center text-gray-900 hover:text-blue-500 w-auto dark:text-white dark:hover:text-yellow-300 dark:focus:text-white"},tS)]),ii("li",rS,[ii("button",{onClick:F[1]||(F[1]=d=>he("/About")),class:"flex items-center text-gray-900 hover:text-blue-500 w-auto dark:text-white dark:hover:text-yellow-300 dark:focus:text-white"},aS)])])])])])):ic("",!0)]),_:1})}}},sS=Zu(oS,[["__scopeId","data-v-229a920c"]]),xp=G=>(rd("data-v-fe018d67"),G=G(),nd(),G),lS={class:"h-full px-3 py-4 overflow-y-auto relative"},uS={class:"space-y-2 font-medium mt-6"},fS=xp(()=>ii("svg",{class:"w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 21"},[ii("path",{d:"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"}),ii("path",{d:"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"})],-1)),cS=xp(()=>ii("span",{class:"ml-3"},"",-1)),hS=xp(()=>ii("svg",{class:"w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 21"},[ii("path",{d:"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"}),ii("path",{d:"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"})],-1)),vS=xp(()=>ii("span",{class:"ml-3"},"",-1)),dS=xp(()=>ii("button",{type:"button",class:"flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700","aria-controls":"dropdown-example","data-collapse-toggle":"dropdown-example"},[ii("svg",{class:"flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 21"},[ii("path",{d:"M15 12a1 1 0 0 0 .962-.726l2-7A1 1 0 0 0 17 3H3.77L3.175.745A1 1 0 0 0 2.208 0H1a1 1 0 0 0 0 2h.438l.6 2.255v.019l2 7 .746 2.986A3 3 0 1 0 9 17a2.966 2.966 0 0 0-.184-1h2.368c-.118.32-.18.659-.184 1a3 3 0 1 0 3-3H6.78l-.5-2H15Z"})]),ii("span",{class:"flex-1 ms-3 text-left rtl:text-right whitespace-nowrap"},""),ii("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[ii("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})])],-1)),pS={id:"dropdown-example",class:"hidden py-2 space-y-2"},gS={__name:"Sidebar",props:{isDarkMode:Boolean},setup(G){const L=_m(),Y=ws(()=>L.isSidebarOpen),oe=G,he=ws(()=>oe.isDarkMode?"bg-gray-800 md:bg-transparent w-full md:w-48":"bg-gray-100 md:bg-transparent w-full md:w-48"),Ae=io(!1);return hu(()=>{L.checkScreenSize(),window.addEventListener("resize",L.checkScreenSize),setTimeout(()=>{Ae.value=!0},600)}),hu(()=>{}),(U,F)=>{const e=tg("router-link");return _a(),dl(tv,{name:"sidebar-slide-fade",mode:"out-in"},{default:rs(()=>[Ae.value?(_a(),jo("aside",{key:0,id:"sidebar-multi-level-sidebar",class:nc(["fixed pt-[100px] left-0 z-100 h-screen transition-transform bg-opacity-80",he.value,{"-translate-x-full":!Y.value}]),"aria-label":"Sidebar"},[ii("div",lS,[ii("ul",uS,[ii("li",null,[Ga(e,{to:"/Dashboard",class:"flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"},{default:rs(()=>[fS,cS]),_:1})]),ii("li",null,[Ga(e,{to:"/GisMap",class:"flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"},{default:rs(()=>[hS,vS]),_:1})]),ii("li",null,[dS,ii("ul",pS,[ii("li",null,[Ga(e,{to:"/FunctionList/FunctionA",class:"flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700"},{default:rs(()=>[E0(" - ")]),_:1})]),ii("li",null,[Ga(e,{to:"/FunctionList/FunctionB",class:"flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700"},{default:rs(()=>[E0(" - ")]),_:1})]),ii("li",null,[Ga(e,{to:"/FunctionList/FunctionC",class:"flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700"},{default:rs(()=>[E0(" - ")]),_:1})])])])])])],2)):ic("",!0)]),_:1})}}},yS=Zu(gS,[["__scopeId","data-v-fe018d67"]]),mS=G=>(rd("data-v-d3320a05"),G=G(),nd(),G),xS=mS(()=>ii("div",{class:"absolute inset-0 overflow-hidden"},[ii("div",{class:"moving-circle"})],-1)),bS=[xS],wS={__name:"Background",props:{isDarkMode:Boolean},setup(G){const L=G,Y=io("");return lh(()=>L.isDarkMode,()=>{L.isDarkMode?Y.value="bg-gradient-to-r from-gray-800 via-indigo-900 to-blue-900":Y.value="bg-gradient-to-r from-blue-200 via-white to-blue-200"},{immediate:!0}),(he,Ae)=>(_a(),jo("div",{id:"background",class:nc(["absolute inset-0 transition-colors duration-1000",Y.value])},bS,2))}},TS=Zu(wS,[["__scopeId","data-v-d3320a05"]]),AS=G=>(rd("data-v-a61e7b31"),G=G(),nd(),G),MS=AS(()=>ii("div",{class:"absolute inset-0 overflow-hidden"},[ii("div",{class:"moving-circle"})],-1)),ES=[MS],SS={__name:"BackgroundAbout",props:{isDarkMode:Boolean},setup(G){const L=G,Y=io("");return lh(()=>L.isDarkMode,()=>{L.isDarkMode?Y.value="bg-gradient-to-r from-emerald-600 via-emerald-800 to-teal-900":Y.value="bg-gradient-to-r from-emerald-100 via-white to-teal-200"},{immediate:!0}),(he,Ae)=>(_a(),jo("div",{id:"background",class:nc(["absolute inset-0 transition-colors duration-1000",Y.value])},ES,2))}},CS=Zu(SS,[["__scopeId","data-v-a61e7b31"]]),LS="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2020%2020'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23d7d7ff;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='M16.31,11.15c-.14-.03-.28,0-.4,.09-.45,.38-.98,.7-1.55,.91-.54,.21-1.13,.31-1.76,.31-1.41,0-2.7-.58-3.63-1.5s-1.5-2.22-1.5-3.63c0-.59,.1-1.17,.28-1.69,.19-.56,.47-1.06,.84-1.5,.16-.19,.12-.47-.07-.63-.12-.09-.26-.12-.4-.09-1.48,.4-2.77,1.29-3.7,2.48-.89,1.17-1.41,2.62-1.41,4.19,0,1.9,.77,3.63,2.02,4.89,1.26,1.26,2.97,2.02,4.89,2.02,1.61,0,3.09-.56,4.27-1.48,1.2-.94,2.08-2.29,2.44-3.82,.07-.24-.07-.49-.31-.54Z'/%3e%3c/svg%3e",_S="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2020%2020'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23ffbd47;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='M10.26,6.89c-1.86,0-3.37,1.51-3.37,3.37s1.51,3.37,3.37,3.37,3.37-1.51,3.37-3.37-1.51-3.37-3.37-3.37Z'/%3e%3cg%3e%3cpath%20class='cls-1'%20d='M10.26,5.9c-.36,0-.66-.29-.66-.66v-1.05c0-.36,.29-.66,.66-.66s.66,.29,.66,.66v1.05c0,.36-.3,.66-.66,.66Z'/%3e%3cpath%20class='cls-1'%20d='M10.26,14.63c-.36,0-.66,.29-.66,.66v1.05c0,.36,.29,.66,.66,.66s.66-.29,.66-.66v-1.05c0-.36-.3-.66-.66-.66Z'/%3e%3cpath%20class='cls-1'%20d='M13.35,7.18c-.26-.26-.26-.67,0-.93l.74-.74c.26-.26,.67-.26,.93,0,.26,.26,.26,.67,0,.93l-.74,.74c-.26,.26-.67,.26-.93,0Z'/%3e%3cpath%20class='cls-1'%20d='M7.18,13.35c-.26-.26-.67-.26-.93,0l-.74,.74c-.26,.26-.26,.67,0,.93s.67,.26,.93,0l.74-.75c.26-.26,.26-.67,0-.93Z'/%3e%3cpath%20class='cls-1'%20d='M14.63,10.26c0-.36,.29-.66,.66-.66h1.05c.36,0,.66,.29,.66,.66s-.29,.66-.66,.66h-1.05c-.36,0-.66-.29-.66-.66Z'/%3e%3cpath%20class='cls-1'%20d='M5.9,10.26c0-.36-.29-.66-.66-.66h-1.05c-.36,0-.66,.29-.66,.66s.29,.66,.66,.66h1.05c.36,0,.66-.29,.66-.66Z'/%3e%3cpath%20class='cls-1'%20d='M13.35,13.35c.26-.26,.67-.26,.93,0l.74,.74c.26,.26,.26,.67,0,.93s-.67,.26-.93,0l-.74-.74c-.26-.26-.26-.67,0-.93Z'/%3e%3cpath%20class='cls-1'%20d='M7.18,7.18c.26-.26,.26-.67,0-.93l-.74-.74c-.26-.26-.67-.26-.93,0-.26,.26-.26,.67,0,.93l.74,.74c.26,.26,.67,.26,.93,0Z'/%3e%3c/g%3e%3c/svg%3e",PS={class:"fixed bottom-4 right-4 z-50"},RS={class:"inline-flex items-center cursor-pointer"},IS=["checked"],DS=["src"],kS=["src"],zS={__name:"DarkModeToggle",props:{isDarkMode:Boolean},setup(G){return(L,Y)=>(_a(),jo("div",PS,[ii("label",RS,[ii("input",{type:"checkbox",class:"sr-only peer",onChange:Y[0]||(Y[0]=oe=>L.$emit("toggleDarkMode")),checked:G.isDarkMode},null,40,IS),ii("div",{class:nc(["relative w-16 h-8 rounded-full transition-colors duration-300",{"bg-indigo-800":!G.isDarkMode,"bg-gray-700":G.isDarkMode}])},[ii("div",{class:nc(["absolute top-0.5 left-0.5 w-7 h-7 rounded-full transition-transform duration-300",{"translate-x-8 bg-white":G.isDarkMode,"bg-white":!G.isDarkMode}]),style:J0({"border-color":G.isDarkMode?"white":"gray-300"})},null,6),G.isDarkMode?ic("",!0):(_a(),jo("img",{key:0,alt:"Sun",src:rc(_S),class:"absolute top-1 right-2 w-6 h-6 transition-opacity duration-300",style:{color:"yellow"}},null,8,DS)),G.isDarkMode?(_a(),jo("img",{key:1,alt:"Moon",src:rc(LS),class:"absolute top-1 left-2 w-6 h-6 transition-opacity duration-300",style:{color:"white"}},null,8,kS)):ic("",!0)],2)])]))}},OS=Zu(zS,[["__scopeId","data-v-75680381"]]),FS={id:"container",class:"pt-1 relative min-h-screen"},BS={__name:"App",setup(G){const L=io(!1),Y=pE(),oe=ws(()=>Y.path==="/About"),he=()=>{L.value=!L.value,localStorage.setItem("darkMode",L.value),L.value?(document.documentElement.classList.add("dark"),console.log("change to dark")):(document.documentElement.classList.remove("dark"),console.log("change to light"))};return hu(()=>{L.value=localStorage.getItem("darkMode")==="true",L.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),(Ae,U)=>{const F=tg("router-view");return _a(),jo("div",{id:"structure",class:nc([{dark:L.value},"relative min-h-screen"])},[oe.value?(_a(),jo(cl,{key:0},[Ga(CS,{isDarkMode:L.value},null,8,["isDarkMode"]),Ga(sS,{isDarkMode:L.value,key:"about"},null,8,["isDarkMode"])],64)):(_a(),jo(cl,{key:1},[Ga(TS,{isDarkMode:L.value},null,8,["isDarkMode"]),Ga(yS,{isDarkMode:L.value,key:"sidebar"},null,8,["isDarkMode"]),Ga(GE,{isDarkMode:L.value,key:"navbar"},null,8,["isDarkMode"])],64)),Ga(OS,{onToggleDarkMode:he,isDarkMode:L.value},null,8,["isDarkMode"]),ii("div",FS,[Ga(F)])],2)}}},NS=Zu(BS,[["__scopeId","data-v-e6716f05"]]),US={},VS={id:"contentWrapper",class:"mt-16 p-0 md:p-4 md:ml-48"},HS={class:"p-0 md:p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 h-full"};function GS(G,L){return _a(),jo("div",VS,[ii("div",HS,[WA(G.$slots,"default")])])}const bp=Zu(US,[["render",GS]]),WS={key:0},YS=ii("div",{class:"mt-16 p-0 md:p-4",style:{minHeight:"calc(100vh - 72px)"}},[ii("div",{class:"space-y-2 pb-8 pt-6 md:space-y-5 md:p-4 md:ml-48"},[ii("h1",{class:"px-2 text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-6xl md:leading-14"}," Dashboard ")]),ii("hr",{class:"border-t-2 dark:border-gray-200 border-gray-700 mx-2 md:p-4 md:ml-48 mb-8"})],-1),XS=ii("hr",{class:"border-t-2 dark:border-gray-200 border-gray-700 mx-2 mb-8"},null,-1),ZS=ii("div",{class:""},null,-1),jS=[YS,XS,ZS],KS={__name:"DashBoard",setup(G){const L=io(!1);return hu(()=>{setTimeout(()=>{L.value=!0},600)}),(Y,oe)=>(_a(),dl(tv,{name:"slide-fade",mode:"out-in"},{default:rs(()=>[L.value?(_a(),jo("div",WS,jS)):ic("",!0)]),_:1}))}},JS=""+new URL("me.jpg",import.meta.url).href,Rw=G=>(rd("data-v-dc8e635a"),G=G(),nd(),G),QS={key:0,id:"about-content",class:"relative mt-16 p-0 md:p-4",style:{minHeight:"calc(100vh - 72px)"}},$S=Rw(()=>ii("div",{class:"space-y-2 pb-8 pt-6 md:space-y-5"},[ii("h1",{class:"px-2 xs:px-12 sm:px-36 text-3xl font-semibold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-6xl md:leading-14"}," About ")],-1)),qS=Rw(()=>ii("hr",{class:"border-t-2 dark:border-gray-200 border-gray-700 mx-2 xs:mx-12 sm:mx-36 mb-8"},null,-1)),e8={href:"#",class:"mx-2 xs:mx-12 sm:mx-36 flex flex-col items-center lg:flex-row"},t8=["src"],r8={class:"flex flex-col justify-between p-4 leading-normal"},n8=["innerHTML"],i8={__name:"About",setup(G){const L=io(!1),Y=io(null),oe=io(!0),he=io(null),Ae=async()=>{try{const U=await fetch("https://raw.githubusercontent.com/sjenwork/vue-api-data/main/about.json");if(!U.ok)throw new Error("Network response was not ok");console.log(U);const F=await U.json();Y.value=F.data,console.log(Y.value)}catch(U){he.value=U.message}finally{oe.value=!1}};return hu(async()=>{await Ae(),setTimeout(()=>{L.value=!0},600)}),(U,F)=>(_a(),dl(tv,{name:"slide-fade",mode:"out-in"},{default:rs(()=>{var e;return[L.value?(_a(),jo("div",QS,[$S,qS,ii("a",e8,[ii("img",{class:"object-contain max-w-72 rounded-t-lg",src:rc(JS),alt:""},null,8,t8),ii("div",r8,[ii("div",{innerHTML:(e=Y.value)==null?void 0:e.introduction},null,8,n8)])])])):ic("",!0)]}),_:1}))}},a8=Zu(i8,[["__scopeId","data-v-dc8e635a"]]),wp=G=>(rd("data-v-dc29b3d7"),G=G(),nd(),G),o8={class:"map-controls"},s8=wp(()=>ii("i",{class:"fas fa-layer-group"},null,-1)),l8=[s8],u8=wp(()=>ii("i",{class:"fas fa-expand-arrows-alt"},null,-1)),f8=[u8],c8=wp(()=>ii("i",{class:"fas fa-location-crosshairs"},null,-1)),h8=[c8],v8=wp(()=>ii("i",{class:"fa-solid fa-magnifying-glass-plus"},null,-1)),d8=[v8],p8=wp(()=>ii("i",{class:"fa-solid fa-magnifying-glass-minus"},null,-1)),g8=[p8],y8={__name:"MapControler",emits:["switch-base-map","full-taiwan","go-to-my-location","zoom-in","zoom-out"],setup(G,{emit:L}){const Y=L,oe=()=>{Y("switch-base-map")},he=()=>{Y("full-taiwan")},Ae=()=>{Y("go-to-my-location")},U=()=>{Y("zoom-in")},F=()=>{Y("zoom-out")};return(e,d)=>(_a(),jo("div",o8,[ii("div",{id:"baseMap",class:"mb-1"},[ii("button",{onClick:oe,class:"w-12 sm:w-8 text-white bg-gradient-to-br from-gray-400 to-gray-300 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-green-200 dark:focus:ring-cyan-500 font-medium rounded-lg text-4xl sm:text-sm py-1 text-center",title:"","aria-label":""},l8)]),ii("div",{id:"fullTaiwan",class:"mb-1"},[ii("button",{onClick:he,class:"w-12 sm:w-8 text-white bg-gradient-to-br from-gray-400 to-gray-300 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-green-200 dark:focus:ring-cyan-500 font-medium rounded-lg text-4xl sm:text-sm py-1 text-center",title:"","aria-label":""},f8)]),ii("div",{id:"myLocation",class:"mb-1"},[ii("button",{onClick:Ae,class:"w-12 sm:w-8 text-white bg-gradient-to-br from-gray-400 to-gray-300 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-green-200 dark:focus:ring-cyan-500 font-medium rounded-lg text-4xl sm:text-sm py-1 text-center",title:"","aria-label":""},h8)]),ii("div",{id:"zoomin",class:"mb-1"},[ii("button",{onClick:U,class:"w-12 sm:w-8 text-white bg-gradient-to-br from-gray-400 to-gray-300 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-green-200 dark:focus:ring-cyan-500 font-medium rounded-lg text-4xl sm:text-sm py-1 text-center",title:"","aria-label":""},d8)]),ii("div",{id:"zoomout",class:"mb-1"},[ii("button",{onClick:F,class:"w-12 sm:w-8 text-white bg-gradient-to-br from-gray-400 to-gray-300 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-green-200 dark:focus:ring-cyan-500 font-medium rounded-lg text-4xl sm:text-sm py-1 text-center",title:"","aria-label":""},g8)])]))}},m8=Zu(y8,[["__scopeId","data-v-dc29b3d7"]]);function x8(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}var Iw={exports:{}};(function(G,L){(function(oe,he){G.exports=he()})(self,function(){return function(){var Y={79288:function(U,F,e){var d=e(3400),S={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var n in S){var E=n.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.addStyleRule(E,S[n])}},86712:function(U,F,e){U.exports=e(84224)},37240:function(U,F,e){U.exports=e(51132)},29744:function(U,F,e){U.exports=e(94456)},29352:function(U,F,e){U.exports=e(67244)},96144:function(U,F,e){U.exports=e(97776)},53219:function(U,F,e){U.exports=e(61712)},4624:function(U,F,e){U.exports=e(95856)},54543:function(U,F,e){U.exports=e(54272)},45e3:function(U,F,e){U.exports=e(85404)},62300:function(U,F,e){U.exports=e(26048)},6920:function(U,F,e){U.exports=e(66240)},10264:function(U,F,e){U.exports=e(40448)},32016:function(U,F,e){U.exports=e(64884)},27528:function(U,F,e){U.exports=e(15088)},75556:function(U,F,e){U.exports=e(76744)},39204:function(U,F,e){U.exports=e(94704)},73996:function(U,F,e){U.exports=e(62396)},16489:function(U,F,e){U.exports=e(32028)},5e3:function(U,F,e){U.exports=e(81932)},77280:function(U,F,e){U.exports=e(45536)},33992:function(U,F,e){U.exports=e(42600)},17600:function(U,F,e){U.exports=e(21536)},49116:function(U,F,e){U.exports=e(65664)},46808:function(U,F,e){U.exports=e(29044)},36168:function(U,F,e){U.exports=e(48928)},13792:function(U,F,e){var d=e(32016);d.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),U.exports=d},3920:function(U,F,e){U.exports=e(43480)},25120:function(U,F,e){U.exports=e(6296)},4340:function(U,F,e){U.exports=e(7404)},86152:function(U,F,e){U.exports=e(65456)},56816:function(U,F,e){U.exports=e(22020)},89296:function(U,F,e){U.exports=e(29928)},20260:function(U,F,e){U.exports=e(75792)},32140:function(U,F,e){U.exports=e(156)},84764:function(U,F,e){U.exports=e(45499)},48824:function(U,F,e){U.exports=e(3296)},69967:function(U,F,e){U.exports=e(4184)},8363:function(U,F,e){U.exports=e(36952)},86636:function(U,F,e){U.exports=e(38983)},70192:function(U,F,e){U.exports=e(11572)},81604:function(U,F,e){U.exports=e(76924)},63796:function(U,F,e){U.exports=e(62944)},89336:function(U,F,e){U.exports=e(95443)},67484:function(U,F,e){U.exports=e(34864)},97312:function(U,F,e){U.exports=e(76272)},42192:function(U,F,e){U.exports=e(97924)},29800:function(U,F,e){U.exports=e(15436)},63560:function(U,F,e){U.exports=e(5621)},89904:function(U,F,e){U.exports=e(91304)},50248:function(U,F,e){U.exports=e(41724)},65832:function(U,F,e){U.exports=e(31991)},79440:function(U,F,e){U.exports=e(22869)},13752:function(U,F,e){U.exports=e(67776)},83096:function(U,F,e){U.exports=e(95952)},72196:function(U){U.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(U,F,e){var d=e(72196),S=e(25376),n=e(33816),E=e(31780).templatedArray;e(36208),U.exports=E("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:S({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:S({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(U,F,e){var d=e(3400),S=e(54460),n=e(23816).draw;U.exports=function(g){var r=g._fullLayout,t=d.filterVisible(r.annotations);if(t.length&&g._fullData.length)return d.syncOrAsync([n,E],g)};function E(v){var g=v._fullLayout;d.filterVisible(g.annotations).forEach(function(r){var t=S.getFromId(v,r.xref),o=S.getFromId(v,r.yref),i=S.getRefType(r.xref),f=S.getRefType(r.yref);r._extremes={},i==="range"&&T(r,t),f==="range"&&T(r,o)})}function T(v,g){var r=g._id,t=r.charAt(0),o=v[t],i=v["a"+t],f=v[t+"ref"],u=v["a"+t+"ref"],l=v["_"+t+"padplus"],m=v["_"+t+"padminus"],h={x:1,y:-1}[t]*v[t+"shift"],w=3*v.arrowsize*v.arrowwidth||0,c=w+h,a=w-h,p=3*v.startarrowsize*v.arrowwidth||0,x=p+h,A=p-h,P;if(u===f){var y=S.findExtremes(g,[g.r2c(o)],{ppadplus:c,ppadminus:a}),C=S.findExtremes(g,[g.r2c(i)],{ppadplus:Math.max(l,x),ppadminus:Math.max(m,A)});P={min:[y.min[0],C.min[0]],max:[y.max[0],C.max[0]]}}else x=i?x+i:x,A=i?A-i:A,P=S.findExtremes(g,[g.r2c(o)],{ppadplus:Math.max(l,c,x),ppadminus:Math.max(m,a,A)});v._extremes[r]=P}},42300:function(U,F,e){var d=e(3400),S=e(24040),n=e(31780).arrayEditor;U.exports={hasClickToShow:E,onClick:T};function E(r,t){var o=v(r,t);return o.on.length>0||o.explicitOff.length>0}function T(r,t){var o=v(r,t),i=o.on,f=o.off.concat(o.explicitOff),u={},l=r._fullLayout.annotations,m,h;if(i.length||f.length){for(m=0;m<i.length;m++)h=n(r.layout,"annotations",l[i[m]]),h.modifyItem("visible",!0),d.extendFlat(u,h.getUpdateObj());for(m=0;m<f.length;m++)h=n(r.layout,"annotations",l[f[m]]),h.modifyItem("visible",!1),d.extendFlat(u,h.getUpdateObj());return S.call("update",r,{},u)}}function v(r,t){var o=r._fullLayout.annotations,i=[],f=[],u=[],l=(t||[]).length,m,h,w,c,a,p,x,A;for(m=0;m<o.length;m++)if(w=o[m],c=w.clicktoshow,c){for(h=0;h<l;h++)if(a=t[h],p=a.xaxis,x=a.yaxis,p._id===w.xref&&x._id===w.yref&&p.d2r(a.x)===g(w._xclick,p)&&x.d2r(a.y)===g(w._yclick,x)){w.visible?c==="onout"?A=f:A=u:A=i,A.push(m);break}h===l&&w.visible&&c==="onout"&&f.push(m)}return{on:i,off:f,explicitOff:u}}function g(r,t){return t.type==="log"?t.l2r(r):t.d2r(r)}},87192:function(U,F,e){var d=e(3400),S=e(76308);U.exports=function(E,T,v,g){g("opacity");var r=g("bgcolor"),t=g("bordercolor"),o=S.opacity(t);g("borderpad");var i=g("borderwidth"),f=g("showarrow");g("text",f?" ":v._dfltTitle.annotation),g("textangle"),d.coerceFont(g,"font",v.font),g("width"),g("align");var u=g("height");if(u&&g("valign"),f){var l=g("arrowside"),m,h;l.indexOf("end")!==-1&&(m=g("arrowhead"),h=g("arrowsize")),l.indexOf("start")!==-1&&(g("startarrowhead",m),g("startarrowsize",h)),g("arrowcolor",o?T.bordercolor:S.defaultLine),g("arrowwidth",(o&&i||1)*2),g("standoff"),g("startstandoff")}var w=g("hovertext"),c=v.hoverlabel||{};if(w){var a=g("hoverlabel.bgcolor",c.bgcolor||(S.opacity(r)?S.rgb(r):S.defaultLine)),p=g("hoverlabel.bordercolor",c.bordercolor||S.contrast(a)),x=d.extendFlat({},c.font);x.color||(x.color=p),d.coerceFont(g,"hoverlabel.font",x)}g("captureevents",!!w)}},26828:function(U,F,e){var d=e(38248),S=e(36896);U.exports=function(E,T,v,g){T=T||{};var r=v==="log"&&T.type==="linear",t=v==="linear"&&T.type==="log";if(!(r||t))return;var o=E._fullLayout.annotations,i=T._id.charAt(0),f,u;function l(h){var w=f[h],c=null;r?c=S(w,T.range):c=Math.pow(10,w),d(c)||(c=null),g(u+h,c)}for(var m=0;m<o.length;m++)f=o[m],u="annotations["+m+"].",f[i+"ref"]===T._id&&l(i),f["a"+i+"ref"]===T._id&&l("a"+i)}},45216:function(U,F,e){var d=e(3400),S=e(54460),n=e(51272),E=e(87192),T=e(13916);U.exports=function(r,t){n(r,t,{name:"annotations",handleItemDefaults:v})};function v(g,r,t){function o(M,s){return d.coerce(g,r,T,M,s)}var i=o("visible"),f=o("clicktoshow");if(i||f){E(g,r,t,o);for(var u=r.showarrow,l=["x","y"],m=[-10,-30],h={_fullLayout:t},w=0;w<2;w++){var c=l[w],a=S.coerceRef(g,r,h,c,"","paper");if(a!=="paper"){var p=S.getFromId(h,a);p._annIndices.push(r._index)}if(S.coercePosition(r,h,o,a,c,.5),u){var x="a"+c,A=S.coerceRef(g,r,h,x,"pixel",["pixel","paper"]);A!=="pixel"&&A!==a&&(A=r[x]="pixel");var P=A==="pixel"?m[w]:.4;S.coercePosition(r,h,o,A,x,P)}o(c+"anchor"),o(c+"shift")}if(d.noneOrAll(g,r,["x","y"]),u&&d.noneOrAll(g,r,["ax","ay"]),f){var y=o("xclick"),C=o("yclick");r._xclick=y===void 0?r.x:S.cleanPosition(y,h,r.xref),r._yclick=C===void 0?r.y:S.cleanPosition(C,h,r.yref)}}}},23816:function(U,F,e){var d=e(33428),S=e(24040),n=e(7316),E=e(3400),T=E.strTranslate,v=e(54460),g=e(76308),r=e(43616),t=e(93024),o=e(72736),i=e(93972),f=e(86476),u=e(31780).arrayEditor,l=e(33652);U.exports={draw:m,drawOne:h,drawRaw:c};function m(a){var p=a._fullLayout;p._infolayer.selectAll(".annotation").remove();for(var x=0;x<p.annotations.length;x++)p.annotations[x].visible&&h(a,x);return n.previousPromises(a)}function h(a,p){var x=a._fullLayout,A=x.annotations[p]||{},P=v.getFromId(a,A.xref),y=v.getFromId(a,A.yref);P&&P.setScale(),y&&y.setScale(),c(a,A,p,!1,P,y)}function w(a,p,x,A,P){var y=P[x],C=P[x+"ref"],M=x.indexOf("y")!==-1,s=v.getRefType(C)==="domain",_=M?A.h:A.w;return a?s?y+(M?-p:p)/a._length:a.p2r(a.r2p(y)+p):y+(M?-p:p)/_}function c(a,p,x,A,P,y){var C=a._fullLayout,M=a._fullLayout._size,s=a._context.edits,_,b;A?(_="annotation-"+A,b=A+".annotations"):(_="annotation",b="annotations");var k=u(a.layout,b,p),D=k.modifyBase,V=k.modifyItem,O=k.getUpdateObj;C._infolayer.selectAll("."+_+'[data-index="'+x+'"]').remove();var N="clip"+C._uid+"_ann"+x;if(!p._input||p.visible===!1){d.selectAll("#"+N).remove();return}var B={x:{},y:{}},z=+p.textangle||0,H=C._infolayer.append("g").classed(_,!0).attr("data-index",String(x)).style("opacity",p.opacity),X=H.append("g").classed("annotation-text-g",!0),$=s[p.showarrow?"annotationTail":"annotationPosition"],ne=p.captureevents||s.annotationText||$;function q(xe){var Te={index:x,annotation:p._input,fullAnnotation:p,event:xe};return A&&(Te.subplotId=A),Te}var ue=X.append("g").style("pointer-events",ne?"all":null).call(i,"pointer").on("click",function(){a._dragging=!1,a.emit("plotly_clickannotation",q(d.event))});p.hovertext&&ue.on("mouseover",function(){var xe=p.hoverlabel,Te=xe.font,we=this.getBoundingClientRect(),_e=a.getBoundingClientRect();t.loneHover({x0:we.left-_e.left,x1:we.right-_e.left,y:(we.top+we.bottom)/2-_e.top,text:p.hovertext,color:xe.bgcolor,borderColor:xe.bordercolor,fontFamily:Te.family,fontSize:Te.size,fontColor:Te.color,fontWeight:Te.weight,fontStyle:Te.style,fontVariant:Te.variant,fontShadow:Te.fontShadow,fontLineposition:Te.fontLineposition,fontTextcase:Te.fontTextcase},{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:a})}).on("mouseout",function(){t.loneUnhover(C._hoverlayer.node())});var te=p.borderwidth,J=p.borderpad,ie=te+J,K=ue.append("rect").attr("class","bg").style("stroke-width",te+"px").call(g.stroke,p.bordercolor).call(g.fill,p.bgcolor),ee=p.width||p.height,le=C._topclips.selectAll("#"+N).data(ee?[0]:[]);le.enter().append("clipPath").classed("annclip",!0).attr("id",N).append("rect"),le.exit().remove();var j=p.font,Z=C._meta?E.templateString(p.text,C._meta):p.text,fe=ue.append("text").classed("annotation-text",!0).text(Z);function re(xe){return xe.call(r.font,j).attr({"text-anchor":{left:"start",right:"end"}[p.align]||"middle"}),o.convertToTspans(xe,a,ce),xe}function ce(){var xe=fe.selectAll("a");if(xe.size()===1&&xe.text()===fe.text()){var Te=ue.insert("a",":first-child").attr({"xlink:xlink:href":xe.attr("xlink:href"),"xlink:xlink:show":xe.attr("xlink:show")}).style({cursor:"pointer"});Te.node().appendChild(K.node())}var we=ue.select(".annotation-text-math-group"),_e=!we.empty(),ke=r.bBox((_e?we:fe).node()),Ne=ke.width,Ee=ke.height,ze=p.width||Ne,Ce=p.height||Ee,Oe=Math.round(ze+2*ie),Le=Math.round(Ce+2*ie);function Ge(mr,or){return or==="auto"&&(mr<.3333333333333333?or="left":mr>.6666666666666666?or="right":or="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[or]}for(var rt=!1,ot=["x","y"],$e=0;$e<ot.length;$e++){var qe=ot[$e],ht=p[qe+"ref"]||qe,vt=p["a"+qe+"ref"],pt={x:P,y}[qe],wt=(z+(qe==="x"?0:-90))*Math.PI/180,Et=Oe*Math.cos(wt),nt=Le*Math.sin(wt),Fe=Math.abs(Et)+Math.abs(nt),We=p[qe+"anchor"],Ze=p[qe+"shift"]*(qe==="x"?1:-1),Ye=B[qe],Ie,De,je,Re,pe,be=v.getRefType(ht);if(pt&&be!=="domain"){var Ue=pt.r2fraction(p[qe]);(Ue<0||Ue>1)&&(vt===ht?(Ue=pt.r2fraction(p["a"+qe]),(Ue<0||Ue>1)&&(rt=!0)):rt=!0),Ie=pt._offset+pt.r2p(p[qe]),Re=.5}else{var et=be==="domain";qe==="x"?(je=p[qe],Ie=et?pt._offset+pt._length*je:Ie=M.l+M.w*je):(je=1-p[qe],Ie=et?pt._offset+pt._length*je:Ie=M.t+M.h*je),Re=p.showarrow?.5:je}if(p.showarrow){Ye.head=Ie;var st=p["a"+qe];if(pe=Et*Ge(.5,p.xanchor)-nt*Ge(.5,p.yanchor),vt===ht){var lt=v.getRefType(vt);lt==="domain"?(qe==="y"&&(st=1-st),Ye.tail=pt._offset+pt._length*st):lt==="paper"?qe==="y"?(st=1-st,Ye.tail=M.t+M.h*st):Ye.tail=M.l+M.w*st:Ye.tail=pt._offset+pt.r2p(st),De=pe}else Ye.tail=Ie+st,De=pe+st;Ye.text=Ye.tail+pe;var Gt=C[qe==="x"?"width":"height"];if(ht==="paper"&&(Ye.head=E.constrain(Ye.head,1,Gt-1)),vt==="pixel"){var Zt=-Math.max(Ye.tail-3,Ye.text),Tt=Math.min(Ye.tail+3,Ye.text)-Gt;Zt>0?(Ye.tail+=Zt,Ye.text+=Zt):Tt>0&&(Ye.tail-=Tt,Ye.text-=Tt)}Ye.tail+=Ze,Ye.head+=Ze}else pe=Fe*Ge(Re,We),De=pe,Ye.text=Ie+pe;Ye.text+=Ze,pe+=Ze,De+=Ze,p["_"+qe+"padplus"]=Fe/2+De,p["_"+qe+"padminus"]=Fe/2-De,p["_"+qe+"size"]=Fe,p["_"+qe+"shift"]=pe}if(rt){ue.remove();return}var It=0,Xt=0;if(p.align!=="left"&&(It=(ze-Ne)*(p.align==="center"?.5:1)),p.valign!=="top"&&(Xt=(Ce-Ee)*(p.valign==="middle"?.5:1)),_e)we.select("svg").attr({x:ie+It-1,y:ie+Xt}).call(r.setClipUrl,ee?N:null,a);else{var gr=ie+Xt-ke.top,gt=ie+It-ke.left;fe.call(o.positionText,gt,gr).call(r.setClipUrl,ee?N:null,a)}le.select("rect").call(r.setRect,ie,ie,ze,Ce),K.call(r.setRect,te/2,te/2,Oe-te,Le-te),ue.call(r.setTranslate,Math.round(B.x.text-Oe/2),Math.round(B.y.text-Le/2)),X.attr({transform:"rotate("+z+","+B.x.text+","+B.y.text+")"});var jt=function(mr,or){H.selectAll(".annotation-arrow-g").remove();var mt=B.x.head,ut=B.y.head,bt=B.x.tail+mr,St=B.y.tail+or,Pt=B.x.text+mr,Ht=B.y.text+or,Bt=E.rotationXYMatrix(z,Pt,Ht),Nt=E.apply2DTransform(Bt),Kt=E.apply2DTransform2(Bt),fr=+K.attr("width"),cr=+K.attr("height"),dr=Pt-.5*fr,Xe=dr+fr,He=Ht-.5*cr,zt=He+cr,Rt=[[dr,He,dr,zt],[dr,zt,Xe,zt],[Xe,zt,Xe,He],[Xe,He,dr,He]].map(Kt);if(!Rt.reduce(function(Rr,nn){return Rr^!!E.segmentsIntersect(mt,ut,mt+1e6,ut+1e6,nn[0],nn[1],nn[2],nn[3])},!1)){Rt.forEach(function(Rr){var nn=E.segmentsIntersect(bt,St,mt,ut,Rr[0],Rr[1],Rr[2],Rr[3]);nn&&(bt=nn.x,St=nn.y)});var Jt=p.arrowwidth,sr=p.arrowcolor,ur=p.arrowside,er=H.append("g").style({opacity:g.opacity(sr)}).classed("annotation-arrow-g",!0),Ft=er.append("path").attr("d","M"+bt+","+St+"L"+mt+","+ut).style("stroke-width",Jt+"px").call(g.stroke,g.rgb(sr));if(l(Ft,ur,p),s.annotationPosition&&Ft.node().parentNode&&!A){var ir=mt,hr=ut;if(p.standoff){var xr=Math.sqrt(Math.pow(mt-bt,2)+Math.pow(ut-St,2));ir+=p.standoff*(bt-mt)/xr,hr+=p.standoff*(St-ut)/xr}var vr=er.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(bt-ir)+","+(St-hr),transform:T(ir,hr)}).style("stroke-width",Jt+6+"px").call(g.stroke,"rgba(0,0,0,0)").call(g.fill,"rgba(0,0,0,0)"),Vr,_r;f.init({element:vr.node(),gd:a,prepFn:function(){var Rr=r.getTranslate(ue);Vr=Rr.x,_r=Rr.y,P&&P.autorange&&D(P._name+".autorange",!0),y&&y.autorange&&D(y._name+".autorange",!0)},moveFn:function(Rr,nn){var en=Nt(Vr,_r),An=en[0]+Rr,wn=en[1]+nn;ue.call(r.setTranslate,An,wn),V("x",w(P,Rr,"x",M,p)),V("y",w(y,nn,"y",M,p)),p.axref===p.xref&&V("ax",w(P,Rr,"ax",M,p)),p.ayref===p.yref&&V("ay",w(y,nn,"ay",M,p)),er.attr("transform",T(Rr,nn)),X.attr({transform:"rotate("+z+","+An+","+wn+")"})},doneFn:function(){S.call("_guiRelayout",a,O());var Rr=document.querySelector(".js-notes-box-panel");Rr&&Rr.redraw(Rr.selectedObj)}})}}};if(p.showarrow&&jt(0,0),$){var Qt;f.init({element:ue.node(),gd:a,prepFn:function(){Qt=X.attr("transform")},moveFn:function(mr,or){var mt="pointer";if(p.showarrow)p.axref===p.xref?V("ax",w(P,mr,"ax",M,p)):V("ax",p.ax+mr),p.ayref===p.yref?V("ay",w(y,or,"ay",M.w,p)):V("ay",p.ay+or),jt(mr,or);else{if(A)return;var ut,bt;if(P)ut=w(P,mr,"x",M,p);else{var St=p._xsize/M.w,Pt=p.x+(p._xshift-p.xshift)/M.w-St/2;ut=f.align(Pt+mr/M.w,St,0,1,p.xanchor)}if(y)bt=w(y,or,"y",M,p);else{var Ht=p._ysize/M.h,Bt=p.y-(p._yshift+p.yshift)/M.h-Ht/2;bt=f.align(Bt-or/M.h,Ht,0,1,p.yanchor)}V("x",ut),V("y",bt),(!P||!y)&&(mt=f.getCursor(P?.5:ut,y?.5:bt,p.xanchor,p.yanchor))}X.attr({transform:T(mr,or)+Qt}),i(ue,mt)},clickFn:function(mr,or){p.captureevents&&a.emit("plotly_clickannotation",q(or))},doneFn:function(){i(ue),S.call("_guiRelayout",a,O());var mr=document.querySelector(".js-notes-box-panel");mr&&mr.redraw(mr.selectedObj)}})}}s.annotationText?fe.call(o.makeEditable,{delegate:ue,gd:a}).call(re).on("edit",function(xe){p.text=xe,this.call(re),V("text",xe),P&&P.autorange&&D(P._name+".autorange",!0),y&&y.autorange&&D(y._name+".autorange",!0),S.call("_guiRelayout",a,O())}):fe.call(re)}},33652:function(U,F,e){var d=e(33428),S=e(76308),n=e(72196),E=e(3400),T=E.strScale,v=E.strRotate,g=E.strTranslate;U.exports=function(t,o,i){var f=t.node(),u=n[i.arrowhead||0],l=n[i.startarrowhead||0],m=(i.arrowwidth||1)*(i.arrowsize||1),h=(i.arrowwidth||1)*(i.startarrowsize||1),w=o.indexOf("start")>=0,c=o.indexOf("end")>=0,a=u.backoff*m+i.standoff,p=l.backoff*h+i.startstandoff,x,A,P,y;if(f.nodeName==="line"){x={x:+t.attr("x1"),y:+t.attr("y1")},A={x:+t.attr("x2"),y:+t.attr("y2")};var C=x.x-A.x,M=x.y-A.y;if(P=Math.atan2(M,C),y=P+Math.PI,a&&p&&a+p>Math.sqrt(C*C+M*M)){X();return}if(a){if(a*a>C*C+M*M){X();return}var s=a*Math.cos(P),_=a*Math.sin(P);A.x+=s,A.y+=_,t.attr({x2:A.x,y2:A.y})}if(p){if(p*p>C*C+M*M){X();return}var b=p*Math.cos(P),k=p*Math.sin(P);x.x-=b,x.y-=k,t.attr({x1:x.x,y1:x.y})}}else if(f.nodeName==="path"){var D=f.getTotalLength(),V="";if(D<a+p){X();return}var O=f.getPointAtLength(0),N=f.getPointAtLength(.1);P=Math.atan2(O.y-N.y,O.x-N.x),x=f.getPointAtLength(Math.min(p,D)),V="0px,"+p+"px,";var B=f.getPointAtLength(D),z=f.getPointAtLength(D-.1);y=Math.atan2(B.y-z.y,B.x-z.x),A=f.getPointAtLength(Math.max(0,D-a));var H=V?p+a:a;V+=D-H+"px,"+D+"px",t.style("stroke-dasharray",V)}function X(){t.style("stroke-dasharray","0px,100px")}function $(ne,q,ue,te){ne.path&&(ne.noRotate&&(ue=0),d.select(f.parentNode).append("path").attr({class:t.attr("class"),d:ne.path,transform:g(q.x,q.y)+v(ue*180/Math.PI)+T(te)}).style({fill:S.rgb(i.arrowcolor),"stroke-width":0}))}w&&$(l,x,P,h),c&&$(u,A,y,m)}},79180:function(U,F,e){var d=e(23816),S=e(42300);U.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:d.draw,drawOne:d.drawOne,drawRaw:d.drawRaw,hasClickToShow:S.hasClickToShow,onClick:S.onClick,convertCoords:e(26828)}},45899:function(U,F,e){var d=e(13916),S=e(67824).overrideAll,n=e(31780).templatedArray;U.exports=S(n("annotation",{visible:d.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:d.xanchor,xshift:d.xshift,yanchor:d.yanchor,yshift:d.yshift,text:d.text,textangle:d.textangle,font:d.font,width:d.width,height:d.height,opacity:d.opacity,align:d.align,valign:d.valign,bgcolor:d.bgcolor,bordercolor:d.bordercolor,borderpad:d.borderpad,borderwidth:d.borderwidth,showarrow:d.showarrow,arrowcolor:d.arrowcolor,arrowhead:d.arrowhead,startarrowhead:d.startarrowhead,arrowside:d.arrowside,arrowsize:d.arrowsize,startarrowsize:d.startarrowsize,arrowwidth:d.arrowwidth,standoff:d.standoff,startstandoff:d.startstandoff,hovertext:d.hovertext,hoverlabel:d.hoverlabel,captureevents:d.captureevents}),"calc","from-root")},42456:function(U,F,e){var d=e(3400),S=e(54460);U.exports=function(T){for(var v=T.fullSceneLayout,g=v.annotations,r=0;r<g.length;r++)n(g[r],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()};function n(E,T){var v=T.fullSceneLayout,g=v.domain,r=T.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};E._xa={},d.extendFlat(E._xa,t),S.setConvert(E._xa),E._xa._offset=r.l+g.x[0]*r.w,E._xa.l2p=function(){return .5*(1+E._pdata[0]/E._pdata[3])*r.w*(g.x[1]-g.x[0])},E._ya={},d.extendFlat(E._ya,t),S.setConvert(E._ya),E._ya._offset=r.t+(1-g.y[1])*r.h,E._ya.l2p=function(){return .5*(1-E._pdata[1]/E._pdata[3])*r.h*(g.y[1]-g.y[0])}}},52808:function(U,F,e){var d=e(3400),S=e(54460),n=e(51272),E=e(87192),T=e(45899);U.exports=function(r,t,o){n(r,t,{name:"annotations",handleItemDefaults:v,fullLayout:o.fullLayout})};function v(g,r,t,o){function i(l,m){return d.coerce(g,r,T,l,m)}function f(l){var m=l+"axis",h={_fullLayout:{}};return h._fullLayout[m]=t[m],S.coercePosition(r,h,i,l,l,.5)}var u=i("visible");u&&(E(g,r,o.fullLayout,i),f("x"),f("y"),f("z"),d.noneOrAll(g,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",i("ax",-10),i("ay",-30),d.noneOrAll(g,r,["ax","ay"])))}},71836:function(U,F,e){var d=e(23816).drawRaw,S=e(94424),n=["x","y","z"];U.exports=function(T){for(var v=T.fullSceneLayout,g=T.dataScale,r=v.annotations,t=0;t<r.length;t++){for(var o=r[t],i=!1,f=0;f<3;f++){var u=n[f],l=o[u],m=v[u+"axis"],h=m.r2fraction(l);if(h<0||h>1){i=!0;break}}i?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(o._pdata=S(T.glplot.cameraParams,[v.xaxis.r2l(o.x)*g[0],v.yaxis.r2l(o.y)*g[1],v.zaxis.r2l(o.z)*g[2]]),d(T.graphDiv,o,t,T.id,o._xa,o._ya))}}},56864:function(U,F,e){var d=e(24040),S=e(3400);U.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:n,convert:e(42456),draw:e(71836)};function n(E,T){var v=d.subplotsRegistry.gl3d;if(v)for(var g=v.attrRegex,r=Object.keys(E),t=0;t<r.length;t++){var o=r[t];g.test(o)&&(E[o].annotations||[]).length&&(S.pushUnique(T._basePlotModules,v),S.pushUnique(T._subplots.gl3d,o))}}},54976:function(U,F,e){U.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(U,F,e){var d=e(54976),S=e(3400),n=e(39032),E=n.EPOCHJD,T=n.ONEDAY,v={valType:"enumerated",values:S.sortObjectKeys(d.calendars),editType:"calc",dflt:"gregorian"},g=function(P,y,C,M){var s={};return s[C]=v,S.coerce(P,y,s,C,M)},r=function(P,y,C,M){for(var s=0;s<C.length;s++)g(P,y,C[s]+"calendar",M.calendar)},t={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},o={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},i={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},f="##",u={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:f,w:f,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function l(P,y,C){for(var M=Math.floor((y+.05)/T)+E,s=h(C).fromJD(M),_=0,b,k,D,V,O;(_=P.indexOf("%",_))!==-1;)b=P.charAt(_+1),b==="0"||b==="-"||b==="_"?(D=3,k=P.charAt(_+2),b==="_"&&(b="-")):(k=b,b="0",D=2),V=u[k],V?(V===f?O=f:O=s.formatDate(V[b]),P=P.substr(0,_)+O+P.substr(_+D),_+=O.length):_+=D;return P}var m={};function h(P){var y=m[P];return y||(y=m[P]=d.instance(P),y)}function w(P){return S.extendFlat({},v,{description:P})}function c(P){return"Sets the calendar system to use with `"+P+"` date data."}var a={xcalendar:w(c("x"))},p=S.extendFlat({},a,{ycalendar:w(c("y"))}),x=S.extendFlat({},p,{zcalendar:w(c("z"))}),A=w(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));U.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:x,surface:x,mesh3d:x,scattergl:p,ohlc:a,candlestick:a},layout:{calendar:w(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:A},yaxis:{calendar:A},scene:{xaxis:{calendar:A},yaxis:{calendar:A},zaxis:{calendar:A}},polar:{radialaxis:{calendar:A}}},transforms:{filter:{valuecalendar:w(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:w(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:v,handleDefaults:g,handleTraceDefaults:r,CANONICAL_SUNDAY:o,CANONICAL_TICK:t,DFLTRANGE:i,getCal:h,worldCalFmt:l}},22548:function(U,F){F.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],F.defaultLine="#444",F.lightLine="#eee",F.background="#fff",F.borderLine="#BEC8D9",F.lightFraction=90.9090909090909},76308:function(U,F,e){var d=e(49760),S=e(38248),n=e(38116).isTypedArray,E=U.exports={},T=e(22548);E.defaults=T.defaults;var v=E.defaultLine=T.defaultLine;E.lightLine=T.lightLine;var g=E.background=T.background;E.tinyRGB=function(t){var o=t.toRgb();return"rgb("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+")"},E.rgb=function(t){return E.tinyRGB(d(t))},E.opacity=function(t){return t?d(t).getAlpha():0},E.addOpacity=function(t,o){var i=d(t).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+o+")"},E.combine=function(t,o){var i=d(t).toRgb();if(i.a===1)return d(t).toRgbString();var f=d(o||g).toRgb(),u=f.a===1?f:{r:255*(1-f.a)+f.r*f.a,g:255*(1-f.a)+f.g*f.a,b:255*(1-f.a)+f.b*f.a},l={r:u.r*(1-i.a)+i.r*i.a,g:u.g*(1-i.a)+i.g*i.a,b:u.b*(1-i.a)+i.b*i.a};return d(l).toRgbString()},E.interpolate=function(t,o,i){var f=d(t).toRgb(),u=d(o).toRgb(),l={r:i*f.r+(1-i)*u.r,g:i*f.g+(1-i)*u.g,b:i*f.b+(1-i)*u.b};return d(l).toRgbString()},E.contrast=function(t,o,i){var f=d(t);f.getAlpha()!==1&&(f=d(E.combine(t,g)));var u=f.isDark()?o?f.lighten(o):g:i?f.darken(i):v;return u.toString()},E.stroke=function(t,o){var i=d(o);t.style({stroke:E.tinyRGB(i),"stroke-opacity":i.getAlpha()})},E.fill=function(t,o){var i=d(o);t.style({fill:E.tinyRGB(i),"fill-opacity":i.getAlpha()})},E.clean=function(t){if(!(!t||typeof t!="object")){var o=Object.keys(t),i,f,u,l;for(i=0;i<o.length;i++)if(u=o[i],l=t[u],u.substr(u.length-5)==="color")if(Array.isArray(l))for(f=0;f<l.length;f++)l[f]=r(l[f]);else t[u]=r(l);else if(u.substr(u.length-10)==="colorscale"&&Array.isArray(l))for(f=0;f<l.length;f++)Array.isArray(l[f])&&(l[f][1]=r(l[f][1]));else if(Array.isArray(l)){var m=l[0];if(!Array.isArray(m)&&m&&typeof m=="object")for(f=0;f<l.length;f++)E.clean(l[f])}else l&&typeof l=="object"&&!n(l)&&E.clean(l)}};function r(t){if(S(t)||typeof t!="string")return t;var o=t.trim();if(o.substr(0,3)!=="rgb")return t;var i=o.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return t;var f=i[1].trim().split(/\s*[\s,]\s*/),u=o.charAt(3)==="a"&&f.length===4;if(!u&&f.length!==3)return t;for(var l=0;l<f.length;l++){if(!f[l].length||(f[l]=Number(f[l]),!(f[l]>=0)))return t;if(l===3)f[l]>1&&(f[l]=1);else if(f[l]>=1)return t}var m=Math.round(f[0]*255)+", "+Math.round(f[1]*255)+", "+Math.round(f[2]*255);return u?"rgba("+m+", "+f[3]+")":"rgb("+m+")"}},42996:function(U,F,e){var d=e(94724),S=e(25376),n=e(92880).extendFlat,E=e(67824).overrideAll;U.exports=E({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.minor.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:n({},d.ticks,{dflt:""}),ticklabeloverflow:n({},d.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,ticklabelstep:d.ticklabelstep,showticklabels:d.showticklabels,labelalias:d.labelalias,tickfont:S({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,minexponent:d.minexponent,showexponent:d.showexponent,title:{text:{valType:"string"},font:S({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:S({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(U){U.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(U,F,e){var d=e(3400),S=e(31780),n=e(26332),E=e(25404),T=e(95936),v=e(42568),g=e(42996);U.exports=function(t,o,i){var f=S.newContainer(o,"colorbar"),u=t.colorbar||{};function l(B,z){return d.coerce(u,f,g,B,z)}var m=i.margin||{t:0,b:0,l:0,r:0},h=i.width-m.l-m.r,w=i.height-m.t-m.b,c=l("orientation"),a=c==="v",p=l("thicknessmode");l("thickness",p==="fraction"?30/(a?h:w):30);var x=l("lenmode");l("len",x==="fraction"?1:a?w:h);var A=l("yref"),P=l("xref"),y=A==="paper",C=P==="paper",M,s,_,b="left";a?(_="middle",b=C?"left":"right",M=C?1.02:1,s=.5):(_=y?"bottom":"top",b="center",M=.5,s=y?1.02:1),d.coerce(u,f,{x:{valType:"number",min:C?-2:0,max:C?3:1,dflt:M}},"x"),d.coerce(u,f,{y:{valType:"number",min:y?-2:0,max:y?3:1,dflt:s}},"y"),l("xanchor",b),l("xpad"),l("yanchor",_),l("ypad"),d.noneOrAll(u,f,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var k=d.coerce(u,f,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:a?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",k.indexOf("inside")!==-1?"hide past domain":"hide past div"),n(u,f,l,"linear");var D=i.font,V={noAutotickangles:!0,outerTicks:!1,font:D};k.indexOf("inside")!==-1&&(V.bgColor="black"),v(u,f,l,"linear",V),T(u,f,l,"linear",V),E(u,f,l,"linear",V),l("title.text",i._dfltTitle.colorbar);var O=f.showticklabels?f.tickfont:D,N=d.extendFlat({},D,{family:O.family,size:d.bigFont(O.size)});d.coerceFont(l,"title.font",N),l("title.side",a?"top":"right")}},37848:function(U,F,e){var d=e(33428),S=e(49760),n=e(7316),E=e(24040),T=e(54460),v=e(86476),g=e(3400),r=g.strTranslate,t=e(92880).extendFlat,o=e(93972),i=e(43616),f=e(76308),u=e(81668),l=e(72736),m=e(94288).flipScale,h=e(28336),w=e(37668),c=e(94724),a=e(84284),p=a.LINE_SPACING,x=a.FROM_TL,A=a.FROM_BR,P=e(63964).cn;function y(k){var D=k._fullLayout,V=D._infolayer.selectAll("g."+P.colorbar).data(C(k),function(O){return O._id});V.enter().append("g").attr("class",function(O){return O._id}).classed(P.colorbar,!0),V.each(function(O){var N=d.select(this);g.ensureSingle(N,"rect",P.cbbg),g.ensureSingle(N,"g",P.cbfills),g.ensureSingle(N,"g",P.cblines),g.ensureSingle(N,"g",P.cbaxis,function(z){z.classed(P.crisp,!0)}),g.ensureSingle(N,"g",P.cbtitleunshift,function(z){z.append("g").classed(P.cbtitle,!0)}),g.ensureSingle(N,"rect",P.cboutline);var B=M(N,O,k);B&&B.then&&(k._promises||[]).push(B),k._context.edits.colorbarPosition&&s(N,O,k)}),V.exit().each(function(O){n.autoMargin(k,O._id)}).remove(),V.order()}function C(k){var D=k._fullLayout,V=k.calcdata,O=[],N,B,z,H;function X(j){return t(j,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function $(){typeof H.calc=="function"?H.calc(k,z,N):(N._fillgradient=B.reversescale?m(B.colorscale):B.colorscale,N._zrange=[B[H.min],B[H.max]])}for(var ne=0;ne<V.length;ne++){var q=V[ne];if(z=q[0].trace,!!z._module){var ue=z._module.colorbar;if(z.visible===!0&&ue)for(var te=Array.isArray(ue),J=te?ue:[ue],ie=0;ie<J.length;ie++){H=J[ie];var K=H.container;B=K?z[K]:z,B&&B.showscale&&(N=X(B.colorbar),N._id="cb"+z.uid+(te&&K?"-"+K:""),N._traceIndex=z.index,N._propPrefix=(K?K+".":"")+"colorbar.",N._meta=z._meta,$(),O.push(N))}}}for(var ee in D._colorAxes)if(B=D[ee],B.showscale){var le=D._colorAxes[ee];N=X(B.colorbar),N._id="cb"+ee,N._propPrefix=ee+".colorbar.",N._meta=D._meta,H={min:"cmin",max:"cmax"},le[0]!=="heatmap"&&(z=le[1],H.calc=z._module.colorbar.calc),$(),O.push(N)}return O}function M(k,D,V){var O=D.orientation==="v",N=D.len,B=D.lenmode,z=D.thickness,H=D.thicknessmode,X=D.outlinewidth,$=D.borderwidth,ne=D.bgcolor,q=D.xanchor,ue=D.yanchor,te=D.xpad,J=D.ypad,ie=D.x,K=O?D.y:1-D.y,ee=D.yref==="paper",le=D.xref==="paper",j=V._fullLayout,Z=j._size,fe=D._fillcolor,re=D._line,ce=D.title,xe=ce.side,Te=D._zrange||d.extent((typeof fe=="function"?fe:re.color).domain()),we=typeof re.color=="function"?re.color:function(){return re.color},_e=typeof fe=="function"?fe:function(){return fe},ke=D._levels,Ne=_(V,D,Te),Ee=Ne.fill,ze=Ne.line,Ce=Math.round(z*(H==="fraction"?O?Z.w:Z.h:1)),Oe=Ce/(O?Z.w:Z.h),Le=Math.round(N*(B==="fraction"?O?Z.h:Z.w:1)),Ge=Le/(O?Z.h:Z.w),rt=le?Z.w:V._fullLayout.width,ot=ee?Z.h:V._fullLayout.height,$e=Math.round(O?ie*rt+te:K*ot+J),qe={center:.5,right:1}[q]||0,ht={top:1,middle:.5}[ue]||0,vt=O?ie-qe*Oe:K-ht*Oe,pt=O?K-ht*Ge:ie-qe*Ge,wt=Math.round(O?ot*(1-pt):rt*pt);D._lenFrac=Ge,D._thickFrac=Oe,D._uFrac=vt,D._vFrac=pt;var Et=D._axis=b(V,D,Te);Et.position=Oe+(O?ie+te/Z.w:K+J/Z.h);var nt=["top","bottom"].indexOf(xe)!==-1;if(O&&nt&&(Et.title.side=xe,Et.titlex=ie+te/Z.w,Et.titley=pt+(ce.side==="top"?Ge-J/Z.h:J/Z.h)),!O&&!nt&&(Et.title.side=xe,Et.titley=K+J/Z.h,Et.titlex=pt+te/Z.w),re.color&&D.tickmode==="auto"){Et.tickmode="linear",Et.tick0=ke.start;var Fe=ke.size,We=g.constrain(Le/50,4,15)+1,Ze=(Te[1]-Te[0])/((D.nticks||We)*Fe);if(Ze>1){var Ye=Math.pow(10,Math.floor(Math.log(Ze)/Math.LN10));Fe*=Ye*g.roundUp(Ze/Ye,[2,5,10]),(Math.abs(ke.start)/ke.size+1e-6)%1<2e-6&&(Et.tick0=0)}Et.dtick=Fe}Et.domain=O?[pt+J/Z.h,pt+Ge-J/Z.h]:[pt+te/Z.w,pt+Ge-te/Z.w],Et.setScale(),k.attr("transform",r(Math.round(Z.l),Math.round(Z.t)));var Ie=k.select("."+P.cbtitleunshift).attr("transform",r(-Math.round(Z.l),-Math.round(Z.t))),De=Et.ticklabelposition,je=Et.title.font.size,Re=k.select("."+P.cbaxis),pe,be=0,Ue=0;function et(Tt,It){var Xt={propContainer:Et,propName:D._propPrefix+"title",traceIndex:D._traceIndex,_meta:D._meta,placeholder:j._dfltTitle.colorbar,containerGroup:k.select("."+P.cbtitle)},gr=Tt.charAt(0)==="h"?Tt.substr(1):"h"+Tt;k.selectAll("."+gr+",."+gr+"-math-group").remove(),u.draw(V,Tt,t(Xt,It||{}))}function st(){if(O&&nt||!O&&!nt){var Tt,It;xe==="top"&&(Tt=te+Z.l+rt*ie,It=J+Z.t+ot*(1-pt-Ge)+3+je*.75),xe==="bottom"&&(Tt=te+Z.l+rt*ie,It=J+Z.t+ot*(1-pt)-3-je*.25),xe==="right"&&(It=J+Z.t+ot*K+3+je*.75,Tt=te+Z.l+rt*pt),et(Et._id+"title",{attributes:{x:Tt,y:It,"text-anchor":O?"start":"middle"}})}}function lt(){if(O&&!nt||!O&&nt){var Tt=Et.position||0,It=Et._offset+Et._length/2,Xt,gr;if(xe==="right")gr=It,Xt=Z.l+rt*Tt+10+je*(Et.showticklabels?1:.5);else if(Xt=It,xe==="bottom"&&(gr=Z.t+ot*Tt+10+(De.indexOf("inside")===-1?Et.tickfont.size:0)+(Et.ticks!=="intside"&&D.ticklen||0)),xe==="top"){var gt=ce.text.split("<br>").length;gr=Z.t+ot*Tt+10-Ce-p*je*gt}et((O?"h":"v")+Et._id+"title",{avoid:{selection:d.select(V).selectAll("g."+Et._id+"tick"),side:xe,offsetTop:O?0:Z.t,offsetLeft:O?Z.l:0,maxShift:O?j.width:j.height},attributes:{x:Xt,y:gr,"text-anchor":"middle"},transform:{rotate:O?-90:0,offset:0}})}}function Gt(){if(!O&&!nt||O&&nt){var Tt=k.select("."+P.cbtitle),It=Tt.select("text"),Xt=[-X/2,X/2],gr=Tt.select(".h"+Et._id+"title-math-group").node(),gt=15.6;It.node()&&(gt=parseInt(It.node().style.fontSize,10)*p);var jt;if(gr?(jt=i.bBox(gr),Ue=jt.width,be=jt.height,be>gt&&(Xt[1]-=(be-gt)/2)):It.node()&&!It.classed(P.jsPlaceholder)&&(jt=i.bBox(It.node()),Ue=jt.width,be=jt.height),O){if(be){if(be+=5,xe==="top")Et.domain[1]-=be/Z.h,Xt[1]*=-1;else{Et.domain[0]+=be/Z.h;var Qt=l.lineCount(It);Xt[1]+=(1-Qt)*gt}Tt.attr("transform",r(Xt[0],Xt[1])),Et.setScale()}}else Ue&&(xe==="right"&&(Et.domain[0]+=(Ue+je/2)/Z.w),Tt.attr("transform",r(Xt[0],Xt[1])),Et.setScale())}k.selectAll("."+P.cbfills+",."+P.cblines).attr("transform",O?r(0,Math.round(Z.h*(1-Et.domain[1]))):r(Math.round(Z.w*Et.domain[0]),0)),Re.attr("transform",O?r(0,Math.round(-Z.t)):r(Math.round(-Z.l),0));var mr=k.select("."+P.cbfills).selectAll("rect."+P.cbfill).attr("style","").data(Ee);mr.enter().append("rect").classed(P.cbfill,!0).attr("style",""),mr.exit().remove();var or=Te.map(Et.c2p).map(Math.round).sort(function(Pt,Ht){return Pt-Ht});mr.each(function(Pt,Ht){var Bt=[Ht===0?Te[0]:(Ee[Ht]+Ee[Ht-1])/2,Ht===Ee.length-1?Te[1]:(Ee[Ht]+Ee[Ht+1])/2].map(Et.c2p).map(Math.round);O&&(Bt[1]=g.constrain(Bt[1]+(Bt[1]>Bt[0])?1:-1,or[0],or[1]));var Nt=d.select(this).attr(O?"x":"y",$e).attr(O?"y":"x",d.min(Bt)).attr(O?"width":"height",Math.max(Ce,2)).attr(O?"height":"width",Math.max(d.max(Bt)-d.min(Bt),2));if(D._fillgradient)i.gradient(Nt,V,D._id,O?"vertical":"horizontalreversed",D._fillgradient,"fill");else{var Kt=_e(Pt).replace("e-","");Nt.attr("fill",S(Kt).toHexString())}});var mt=k.select("."+P.cblines).selectAll("path."+P.cbline).data(re.color&&re.width?ze:[]);mt.enter().append("path").classed(P.cbline,!0),mt.exit().remove(),mt.each(function(Pt){var Ht=$e,Bt=Math.round(Et.c2p(Pt))+re.width/2%1;d.select(this).attr("d","M"+(O?Ht+","+Bt:Bt+","+Ht)+(O?"h":"v")+Ce).call(i.lineGroupStyle,re.width,we(Pt),re.dash)}),Re.selectAll("g."+Et._id+"tick,path").remove();var ut=$e+Ce+(X||0)/2-(D.ticks==="outside"?1:0),bt=T.calcTicks(Et),St=T.getTickSigns(Et)[2];return T.drawTicks(V,Et,{vals:Et.ticks==="inside"?T.clipEnds(Et,bt):bt,layer:Re,path:T.makeTickPath(Et,ut,St),transFn:T.makeTransTickFn(Et)}),T.drawLabels(V,Et,{vals:bt,layer:Re,transFn:T.makeTransTickLabelFn(Et),labelFns:T.makeLabelFns(Et,ut)})}function Zt(){var Tt,It=Ce+X/2;De.indexOf("inside")===-1&&(Tt=i.bBox(Re.node()),It+=O?Tt.width:Tt.height),pe=Ie.select("text");var Xt=0,gr=O&&xe==="top",gt=!O&&xe==="right",jt=0;if(pe.node()&&!pe.classed(P.jsPlaceholder)){var Qt,mr=Ie.select(".h"+Et._id+"title-math-group").node();mr&&(O&&nt||!O&&!nt)?(Tt=i.bBox(mr),Xt=Tt.width,Qt=Tt.height):(Tt=i.bBox(Ie.node()),Xt=Tt.right-Z.l-(O?$e:wt),Qt=Tt.bottom-Z.t-(O?wt:$e),!O&&xe==="top"&&(It+=Tt.height,jt=Tt.height)),gt&&(pe.attr("transform",r(Xt/2+je/2,0)),Xt*=2),It=Math.max(It,O?Xt:Qt)}var or=(O?te:J)*2+It+$+X/2,mt=0;!O&&ce.text&&ue==="bottom"&&K<=0&&(mt=or/2,or+=mt,jt+=mt),j._hColorbarMoveTitle=mt,j._hColorbarMoveCBTitle=jt;var ut=$+X,bt=(O?$e:wt)-ut/2-(O?te:0),St=(O?wt:$e)-(O?Le:J+jt-mt);k.select("."+P.cbbg).attr("x",bt).attr("y",St).attr(O?"width":"height",Math.max(or-mt,2)).attr(O?"height":"width",Math.max(Le+ut,2)).call(f.fill,ne).call(f.stroke,D.bordercolor).style("stroke-width",$);var Pt=gt?Math.max(Xt-10,0):0;k.selectAll("."+P.cboutline).attr("x",(O?$e:wt+te)+Pt).attr("y",(O?wt+J-Le:$e)+(gr?be:0)).attr(O?"width":"height",Math.max(Ce,2)).attr(O?"height":"width",Math.max(Le-(O?2*J+be:2*te+Pt),2)).call(f.stroke,D.outlinecolor).style({fill:"none","stroke-width":X});var Ht=O?qe*or:0,Bt=O?0:(1-ht)*or-jt;if(Ht=le?Z.l-Ht:-Ht,Bt=ee?Z.t-Bt:-Bt,k.attr("transform",r(Ht,Bt)),!O&&($||S(ne).getAlpha()&&!S.equals(j.paper_bgcolor,ne))){var Nt=Re.selectAll("text"),Kt=Nt[0].length,fr=k.select("."+P.cbbg).node(),cr=i.bBox(fr),dr=i.getTranslate(k),Xe=2;Nt.each(function(hr,xr){var vr=0,Vr=Kt-1;if(xr===vr||xr===Vr){var _r=i.bBox(this),Rr=i.getTranslate(this),nn;if(xr===Vr){var en=_r.right+Rr.x,An=cr.right+dr.x+wt-$-Xe+ie;nn=An-en,nn>0&&(nn=0)}else if(xr===vr){var wn=_r.left+Rr.x,Tr=cr.left+dr.x+wt+$+Xe;nn=Tr-wn,nn<0&&(nn=0)}nn&&(Kt<3?this.setAttribute("transform","translate("+nn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var He={},zt=x[q],Rt=A[q],Jt=x[ue],sr=A[ue],ur=or-Ce;O?(B==="pixels"?(He.y=K,He.t=Le*Jt,He.b=Le*sr):(He.t=He.b=0,He.yt=K+N*Jt,He.yb=K-N*sr),H==="pixels"?(He.x=ie,He.l=or*zt,He.r=or*Rt):(He.l=ur*zt,He.r=ur*Rt,He.xl=ie-z*zt,He.xr=ie+z*Rt)):(B==="pixels"?(He.x=ie,He.l=Le*zt,He.r=Le*Rt):(He.l=He.r=0,He.xl=ie+N*zt,He.xr=ie-N*Rt),H==="pixels"?(He.y=1-K,He.t=or*Jt,He.b=or*sr):(He.t=ur*Jt,He.b=ur*sr,He.yt=K-z*Jt,He.yb=K+z*sr));var er=D.y<.5?"b":"t",Ft=D.x<.5?"l":"r";V._fullLayout._reservedMargin[D._id]={};var ir={r:j.width-bt-Ht,l:bt+He.r,b:j.height-St-Bt,t:St+He.b};le&&ee?n.autoMargin(V,D._id,He):le?V._fullLayout._reservedMargin[D._id][er]=ir[er]:ee||O?V._fullLayout._reservedMargin[D._id][Ft]=ir[Ft]:V._fullLayout._reservedMargin[D._id][er]=ir[er]}return g.syncOrAsync([n.previousPromises,st,Gt,lt,n.previousPromises,Zt],V)}function s(k,D,V){var O=D.orientation==="v",N=V._fullLayout,B=N._size,z,H,X;v.init({element:k.node(),gd:V,prepFn:function(){z=k.attr("transform"),o(k)},moveFn:function($,ne){k.attr("transform",z+r($,ne)),H=v.align((O?D._uFrac:D._vFrac)+$/B.w,O?D._thickFrac:D._lenFrac,0,1,D.xanchor),X=v.align((O?D._vFrac:1-D._uFrac)-ne/B.h,O?D._lenFrac:D._thickFrac,0,1,D.yanchor);var q=v.getCursor(H,X,D.xanchor,D.yanchor);o(k,q)},doneFn:function(){if(o(k),H!==void 0&&X!==void 0){var $={};$[D._propPrefix+"x"]=H,$[D._propPrefix+"y"]=X,D._traceIndex!==void 0?E.call("_guiRestyle",V,$,D._traceIndex):E.call("_guiRelayout",V,$)}}})}function _(k,D,V){var O=D._levels,N=[],B=[],z,H,X=O.end+O.size/100,$=O.size,ne=1.001*V[0]-.001*V[1],q=1.001*V[1]-.001*V[0];for(H=0;H<1e5&&(z=O.start+H*$,!($>0?z>=X:z<=X));H++)z>ne&&z<q&&N.push(z);if(D._fillgradient)B=[0];else if(typeof D._fillcolor=="function"){var ue=D._filllevels;if(ue)for(X=ue.end+ue.size/100,$=ue.size,H=0;H<1e5&&(z=ue.start+H*$,!($>0?z>=X:z<=X));H++)z>V[0]&&z<V[1]&&B.push(z);else B=N.map(function(te){return te-O.size/2}),B.push(B[B.length-1]+O.size)}else D._fillcolor&&typeof D._fillcolor=="string"&&(B=[0]);return O.size<0&&(N.reverse(),B.reverse()),{line:N,fill:B}}function b(k,D,V){var O=k._fullLayout,N=D.orientation==="v",B={type:"linear",range:V,tickmode:D.tickmode,nticks:D.nticks,tick0:D.tick0,dtick:D.dtick,tickvals:D.tickvals,ticktext:D.ticktext,ticks:D.ticks,ticklen:D.ticklen,tickwidth:D.tickwidth,tickcolor:D.tickcolor,showticklabels:D.showticklabels,labelalias:D.labelalias,ticklabelposition:D.ticklabelposition,ticklabeloverflow:D.ticklabeloverflow,ticklabelstep:D.ticklabelstep,tickfont:D.tickfont,tickangle:D.tickangle,tickformat:D.tickformat,exponentformat:D.exponentformat,minexponent:D.minexponent,separatethousands:D.separatethousands,showexponent:D.showexponent,showtickprefix:D.showtickprefix,tickprefix:D.tickprefix,showticksuffix:D.showticksuffix,ticksuffix:D.ticksuffix,title:D.title,showline:!0,anchor:"free",side:N?"right":"bottom",position:1},z=N?"y":"x",H={type:"linear",_id:z+D._id},X={letter:z,font:O.font,noAutotickangles:z==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:O.calendar};function $(ne,q){return g.coerce(B,H,c,ne,q)}return h(B,H,$,X,O),w(B,H,$,X),H}U.exports={draw:y}},90553:function(U,F,e){var d=e(3400);U.exports=function(n){return d.isPlainObject(n.colorbar)}},55080:function(U,F,e){U.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(U,F,e){var d=e(42996),S=e(53756).counter,n=e(95376),E=e(88304).scales;n(E),U.exports=function(v,g){v=v||"",g=g||{};var r=g.cLetter||"c";"onlyIfNumerical"in g&&g.onlyIfNumerical;var t="noScale"in g?g.noScale:v==="marker.line",o="showScaleDflt"in g?g.showScaleDflt:r==="z",i=typeof g.colorscaleDflt=="string"?E[g.colorscaleDflt]:null,f=g.editTypeOverride||"",u;"colorAttr"in g?(u=g.colorAttr,g.colorAttr):u={z:"z",c:"color"}[r];var l=r+"auto",m=r+"min",h=r+"max",w=r+"mid",c={};c[m]=c[h]=void 0;var a={};a[l]=!1;var p={};return u==="color"&&(p.color={valType:"color",arrayOk:!0,editType:f||"style"},g.anim&&(p.color.anim=!0)),p[l]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},p[m]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:a},p[h]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:a},p[w]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},p.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},p.autocolorscale={valType:"boolean",dflt:g.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},p.reversescale={valType:"boolean",dflt:!1,editType:"plot"},t||(p.showscale={valType:"boolean",dflt:o,editType:"calc"},p.colorbar=d),g.noColorAxis||(p.coloraxis={valType:"subplotid",regex:S("coloraxis"),dflt:null,editType:"calc"}),p}},47128:function(U,F,e){var d=e(38248),S=e(3400),n=e(94288).extractOpts;U.exports=function(T,v,g){var r=T._fullLayout,t=g.vals,o=g.containerStr,i=o?S.nestedProperty(v,o).get():v,f=n(i),u=f.auto!==!1,l=f.min,m=f.max,h=f.mid,w=function(){return S.aggNums(Math.min,null,t)},c=function(){return S.aggNums(Math.max,null,t)};if(l===void 0?l=w():u&&(i._colorAx&&d(l)?l=Math.min(l,w()):l=w()),m===void 0?m=c():u&&(i._colorAx&&d(m)?m=Math.max(m,c()):m=c()),u&&h!==void 0&&(m-h>h-l?l=h-(m-h):m-h<h-l&&(m=h+(h-l))),l===m&&(l-=.5,m+=.5),f._sync("min",l),f._sync("max",m),f.autocolorscale){var a;l*m<0?a=r.colorscale.diverging:l>=0?a=r.colorscale.sequential:a=r.colorscale.sequentialminus,f._sync("colorscale",a)}}},95504:function(U,F,e){var d=e(3400),S=e(94288).hasColorscale,n=e(94288).extractOpts;U.exports=function(T,v){function g(l,m){var h=l["_"+m];h!==void 0&&(l[m]=h)}function r(l,m){var h=m.container?d.nestedProperty(l,m.container).get():l;if(h)if(h.coloraxis)h._colorAx=v[h.coloraxis];else{var w=n(h),c=w.auto;(c||w.min===void 0)&&g(h,m.min),(c||w.max===void 0)&&g(h,m.max),w.autocolorscale&&g(h,"colorscale")}}for(var t=0;t<T.length;t++){var o=T[t],i=o._module.colorbar;if(i)if(Array.isArray(i))for(var f=0;f<i.length;f++)r(o,i[f]);else r(o,i);S(o,"marker.line")&&r(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var u in v._colorAxes)r(v[u],{min:"cmin",max:"cmax"})}},27260:function(U,F,e){var d=e(38248),S=e(3400),n=e(90553),E=e(64013),T=e(88304).isValid,v=e(24040).traceIs;function g(r,t){var o=t.slice(0,t.length-1);return t?S.nestedProperty(r,o).get()||{}:r}U.exports=function r(t,o,i,f,u){var l=u.prefix,m=u.cLetter,h="_module"in o,w=g(t,l),c=g(o,l),a=g(o._template||{},l)||{},p=function(){return delete t.coloraxis,delete o.coloraxis,r(t,o,i,f,u)};if(h){var x=i._colorAxes||{},A=f(l+"coloraxis");if(A){var P=v(o,"contour")&&S.nestedProperty(o,"contours.coloring").get()||"heatmap",y=x[A];y?(y[2].push(p),y[0]!==P&&(y[0]=!1,S.warn(["Ignoring coloraxis:",A,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[A]=[P,o,[p]];return}}var C=w[m+"min"],M=w[m+"max"],s=d(C)&&d(M)&&C<M,_=f(l+m+"auto",!s);_?f(l+m+"mid"):(f(l+m+"min"),f(l+m+"max"));var b=w.colorscale,k=a.colorscale,D;if(b!==void 0&&(D=!T(b)),k!==void 0&&(D=!T(k)),f(l+"autocolorscale",D),f(l+"colorscale"),f(l+"reversescale"),l!=="marker.line."){var V;l&&h&&(V=n(w));var O=f(l+"showscale",V);O&&(l&&a&&(c._template=a),E(w,c,i))}}},94288:function(U,F,e){var d=e(33428),S=e(49760),n=e(38248),E=e(3400),T=e(76308),v=e(88304).isValid;function g(h,w,c){var a=w?E.nestedProperty(h,w).get()||{}:h,p=a[c||"color"];p&&p._inputArray&&(p=p._inputArray);var x=!1;if(E.isArrayOrTypedArray(p)){for(var A=0;A<p.length;A++)if(n(p[A])){x=!0;break}}return E.isPlainObject(a)&&(x||a.showscale===!0||n(a.cmin)&&n(a.cmax)||v(a.colorscale)||E.isPlainObject(a.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function o(h){var w=h._colorAx,c=w||h,a={},p,x,A;for(x=0;x<r.length;x++)A=r[x],a[A]=c[A];if(w)for(p="c",x=0;x<t.length;x++)A=t[x],a[A]=c["c"+A];else{var P;for(x=0;x<t.length;x++){if(A=t[x],P="c"+A,P in c){a[A]=c[P];continue}P="z"+A,P in c&&(a[A]=c[P])}p=P.charAt(0)}return a._sync=function(y,C){var M=t.indexOf(y)!==-1?p+y:y;c[M]=c["_"+M]=C},a}function i(h){for(var w=o(h),c=w.min,a=w.max,p=w.reversescale?f(w.colorscale):w.colorscale,x=p.length,A=new Array(x),P=new Array(x),y=0;y<x;y++){var C=p[y];A[y]=c+C[0]*(a-c),P[y]=C[1]}return{domain:A,range:P}}function f(h){for(var w=h.length,c=new Array(w),a=w-1,p=0;a>=0;a--,p++){var x=h[a];c[p]=[1-x[0],x[1]]}return c}function u(h,w){w=w||{};for(var c=h.domain,a=h.range,p=a.length,x=new Array(p),A=0;A<p;A++){var P=S(a[A]).toRgb();x[A]=[P.r,P.g,P.b,P.a]}var y=d.scale.linear().domain(c).range(x).clamp(!0),C=w.noNumericCheck,M=w.returnArray,s;return C&&M?s=y:C?s=function(_){return m(y(_))}:M?s=function(_){return n(_)?y(_):S(_).isValid()?_:T.defaultLine}:s=function(_){return n(_)?m(y(_)):S(_).isValid()?_:T.defaultLine},s.domain=y.domain,s.range=function(){return a},s}function l(h,w){return u(i(h),w)}function m(h){var w={r:h[0],g:h[1],b:h[2],a:h[3]};return S(w).toRgbString()}U.exports={hasColorscale:g,extractOpts:o,extractScale:i,flipScale:f,makeColorScaleFunc:u,makeColorScaleFuncFromTrace:l}},8932:function(U,F,e){var d=e(88304),S=e(94288);U.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:d.scales,defaultScale:d.defaultScale,getScale:d.get,isValidScale:d.isValid,hasColorscale:S.hasColorscale,extractOpts:S.extractOpts,extractScale:S.extractScale,flipScale:S.flipScale,makeColorScaleFunc:S.makeColorScaleFunc,makeColorScaleFuncFromTrace:S.makeColorScaleFuncFromTrace}},92332:function(U,F,e){var d=e(92880).extendFlat,S=e(49084),n=e(88304).scales;U.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:n.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:n.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:n.RdBu,editType:"calc"}},coloraxis:d({_isSubplotObj:!0,editType:"calc"},S("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(U,F,e){var d=e(3400),S=e(31780),n=e(92332),E=e(27260);U.exports=function(v,g){function r(h,w){return d.coerce(v,g,n,h,w)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var t=g._colorAxes,o,i;function f(h,w){return d.coerce(o,i,n.coloraxis,h,w)}for(var u in t){var l=t[u];if(l[0])o=v[u]||{},i=S.newContainer(g,u,"coloraxis"),i._name=u,E(o,i,g,f,{prefix:"",cLetter:"c"});else{for(var m=0;m<l[2].length;m++)l[2][m]();delete g._colorAxes[u]}}}},88304:function(U,F,e){var d=e(49760),S={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},n=S.RdBu;function E(g,r){if(r||(r=n),!g)return r;function t(){try{g=S[g]||JSON.parse(g)}catch{g=r}}return typeof g=="string"&&(t(),typeof g=="string"&&t()),T(g)?g:r}function T(g){var r=0;if(!Array.isArray(g)||g.length<2||!g[0]||!g[g.length-1]||+g[0][0]!=0||+g[g.length-1][0]!=1)return!1;for(var t=0;t<g.length;t++){var o=g[t];if(o.length!==2||+o[0]<r||!d(o[1]).isValid())return!1;r=+o[0]}return!0}function v(g){return S[g]!==void 0?!0:T(g)}U.exports={scales:S,defaultScale:n,get:E,isValid:v}},78316:function(U){U.exports=function(e,d,S,n,E){var T=(e-S)/(n-S),v=T+d/(n-S),g=(T+v)/2;return E==="left"||E==="bottom"?T:E==="center"||E==="middle"?g:E==="right"||E==="top"?v:T<.6666666666666666-g?T:v>1.3333333333333333-g?v:g}},67416:function(U,F,e){var d=e(3400),S=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];U.exports=function(E,T,v,g){return v==="left"?E=0:v==="center"?E=1:v==="right"?E=2:E=d.constrain(Math.floor(E*3),0,2),g==="bottom"?T=0:g==="middle"?T=1:g==="top"?T=2:T=d.constrain(Math.floor(T*3),0,2),S[T][E]}},72760:function(U,F){F.selectMode=function(e){return e==="lasso"||e==="select"},F.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},F.openMode=function(e){return e==="drawline"||e==="drawopenpath"},F.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},F.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},F.selectingOrDrawing=function(e){return F.freeMode(e)||F.rectMode(e)}},86476:function(U,F,e){var d=e(29128),S=e(52264),n=e(89184),E=e(3400).removeElement,T=e(33816),v=U.exports={};v.align=e(78316),v.getCursor=e(67416);var g=e(2616);v.unhover=g.wrapped,v.unhoverRaw=g.raw,v.init=function(i){var f=i.gd,u=1,l=f._context.doubleClickDelay,m=i.element,h,w,c,a,p,x,A,P;f._mouseDownTime||(f._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=M,n?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=M,m.addEventListener("touchstart",M,{passive:!1})):m.ontouchstart=M;function y(b,k,D){return Math.abs(b)<D&&(b=0),Math.abs(k)<D&&(k=0),[b,k]}var C=i.clampFn||y;function M(b){f._dragged=!1,f._dragging=!0;var k=t(b);h=k[0],w=k[1],A=b.target,x=b,P=b.buttons===2||b.ctrlKey,typeof b.clientX>"u"&&typeof b.clientY>"u"&&(b.clientX=h,b.clientY=w),c=new Date().getTime(),c-f._mouseDownTime<l?u+=1:(u=1,f._mouseDownTime=c),i.prepFn&&i.prepFn(b,h,w),S&&!P?(p=r(),p.style.cursor=window.getComputedStyle(m).cursor):S||(p=document,a=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),i.dragmode!==!1&&(b.preventDefault(),document.addEventListener("mousemove",s),document.addEventListener("touchmove",s,{passive:!1}))}function s(b){b.preventDefault();var k=t(b),D=i.minDrag||T.MINDRAG,V=C(k[0]-h,k[1]-w,D),O=V[0],N=V[1];(O||N)&&(f._dragged=!0,v.unhover(f,b)),f._dragged&&i.moveFn&&!P&&(f._dragdata={element:m,dx:O,dy:N},i.moveFn(O,N))}function _(b){if(delete f._dragdata,i.dragmode!==!1&&(b.preventDefault(),document.removeEventListener("mousemove",s),document.removeEventListener("touchmove",s)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),S?E(p):a&&(p.documentElement.style.cursor=a,a=null),!f._dragging){f._dragged=!1;return}if(f._dragging=!1,new Date().getTime()-f._mouseDownTime>l&&(u=Math.max(u-1,1)),f._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(u,x),!P){var k;try{k=new MouseEvent("click",b)}catch{var D=t(b);k=document.createEvent("MouseEvents"),k.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,D[0],D[1],b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}A.dispatchEvent(k)}f._dragging=!1,f._dragged=!1}};function r(){var o=document.createElement("div");o.className="dragcover";var i=o.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(o),o}v.coverSlip=r;function t(o){return d(o.changedTouches?o.changedTouches[0]:o,document.body)}},2616:function(U,F,e){var d=e(95924),S=e(91200),n=e(52200).getGraphDiv,E=e(92456),T=U.exports={};T.wrapped=function(v,g,r){v=n(v),v._fullLayout&&S.clear(v._fullLayout._uid+E.HOVERID),T.raw(v,g,r)},T.raw=function(g,r){var t=g._fullLayout,o=g._hoverdata;r||(r={}),!(r.target&&!g._dragged&&d.triggerHandler(g,"plotly_beforehover",r)===!1)&&(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,r.target&&o&&g.emit("plotly_unhover",{event:r,points:o}))}},98192:function(U,F){F.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},F.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(U,F,e){var d=e(33428),S=e(3400),n=S.numberFormat,E=e(38248),T=e(49760),v=e(24040),g=e(76308),r=e(8932),t=S.strTranslate,o=e(72736),i=e(9616),f=e(84284),u=f.LINE_SPACING,l=e(13448).DESELECTDIM,m=e(43028),h=e(7152),w=e(10624).appendArrayPointValue,c=U.exports={};c.font=function(Ce,Oe){var Le=Oe.variant,Ge=Oe.style,rt=Oe.weight,ot=Oe.color,$e=Oe.size,qe=Oe.family,ht=Oe.shadow,vt=Oe.lineposition,pt=Oe.textcase;qe&&Ce.style("font-family",qe),$e+1&&Ce.style("font-size",$e+"px"),ot&&Ce.call(g.fill,ot),rt&&Ce.style("font-weight",rt),Ge&&Ce.style("font-style",Ge),Le&&Ce.style("font-variant",Le),pt&&Ce.style("text-transform",a(x(pt))),ht&&Ce.style("text-shadow",ht==="auto"?o.makeTextShadow(g.contrast(ot)):a(ht)),vt&&Ce.style("text-decoration-line",a(A(vt)))};function a(Ce){return Ce==="none"?void 0:Ce}var p={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function x(Ce){return p[Ce]}function A(Ce){return Ce.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}c.setPosition=function(Ce,Oe,Le){Ce.attr("x",Oe).attr("y",Le)},c.setSize=function(Ce,Oe,Le){Ce.attr("width",Oe).attr("height",Le)},c.setRect=function(Ce,Oe,Le,Ge,rt){Ce.call(c.setPosition,Oe,Le).call(c.setSize,Ge,rt)},c.translatePoint=function(Ce,Oe,Le,Ge){var rt=Le.c2p(Ce.x),ot=Ge.c2p(Ce.y);if(E(rt)&&E(ot)&&Oe.node())Oe.node().nodeName==="text"?Oe.attr("x",rt).attr("y",ot):Oe.attr("transform",t(rt,ot));else return!1;return!0},c.translatePoints=function(Ce,Oe,Le){Ce.each(function(Ge){var rt=d.select(this);c.translatePoint(Ge,rt,Oe,Le)})},c.hideOutsideRangePoint=function(Ce,Oe,Le,Ge,rt,ot){Oe.attr("display",Le.isPtWithinRange(Ce,rt)&&Ge.isPtWithinRange(Ce,ot)?null:"none")},c.hideOutsideRangePoints=function(Ce,Oe){if(Oe._hasClipOnAxisFalse){var Le=Oe.xaxis,Ge=Oe.yaxis;Ce.each(function(rt){var ot=rt[0].trace,$e=ot.xcalendar,qe=ot.ycalendar,ht=v.traceIs(ot,"bar-like")?".bartext":".point,.textpoint";Ce.selectAll(ht).each(function(vt){c.hideOutsideRangePoint(vt,d.select(this),Le,Ge,$e,qe)})})}},c.crispRound=function(Ce,Oe,Le){return!Oe||!E(Oe)?Le||0:Ce._context.staticPlot?Oe:Oe<1?1:Math.round(Oe)},c.singleLineStyle=function(Ce,Oe,Le,Ge,rt){Oe.style("fill","none");var ot=(((Ce||[])[0]||{}).trace||{}).line||{},$e=Le||ot.width||0,qe=rt||ot.dash||"";g.stroke(Oe,Ge||ot.color),c.dashLine(Oe,qe,$e)},c.lineGroupStyle=function(Ce,Oe,Le,Ge){Ce.style("fill","none").each(function(rt){var ot=(((rt||[])[0]||{}).trace||{}).line||{},$e=Oe||ot.width||0,qe=Ge||ot.dash||"";d.select(this).call(g.stroke,Le||ot.color).call(c.dashLine,qe,$e)})},c.dashLine=function(Ce,Oe,Le){Le=+Le||0,Oe=c.dashStyle(Oe,Le),Ce.style({"stroke-dasharray":Oe,"stroke-width":Le+"px"})},c.dashStyle=function(Ce,Oe){Oe=+Oe||1;var Le=Math.max(Oe,3);return Ce==="solid"?Ce="":Ce==="dot"?Ce=Le+"px,"+Le+"px":Ce==="dash"?Ce=3*Le+"px,"+3*Le+"px":Ce==="longdash"?Ce=5*Le+"px,"+5*Le+"px":Ce==="dashdot"?Ce=3*Le+"px,"+Le+"px,"+Le+"px,"+Le+"px":Ce==="longdashdot"&&(Ce=5*Le+"px,"+2*Le+"px,"+Le+"px,"+2*Le+"px"),Ce};function P(Ce,Oe,Le,Ge){var rt=Oe.fillpattern,ot=Oe.fillgradient,$e=rt&&c.getPatternAttr(rt.shape,0,"");if($e){var qe=c.getPatternAttr(rt.bgcolor,0,null),ht=c.getPatternAttr(rt.fgcolor,0,null),vt=rt.fgopacity,pt=c.getPatternAttr(rt.size,0,8),wt=c.getPatternAttr(rt.solidity,0,.3),Et=Oe.uid;c.pattern(Ce,"point",Le,Et,$e,pt,wt,void 0,rt.fillmode,qe,ht,vt)}else if(ot&&ot.type!=="none"){var nt=ot.type,Fe="scatterfill-"+Oe.uid;if(Ge&&(Fe="legendfill-"+Oe.uid),!Ge&&(ot.start!==void 0||ot.stop!==void 0)){var We,Ze;nt==="horizontal"?(We={x:ot.start,y:0},Ze={x:ot.stop,y:0}):nt==="vertical"&&(We={x:0,y:ot.start},Ze={x:0,y:ot.stop}),We.x=Oe._xA.c2p(We.x===void 0?Oe._extremes.x.min[0].val:We.x,!0),We.y=Oe._yA.c2p(We.y===void 0?Oe._extremes.y.min[0].val:We.y,!0),Ze.x=Oe._xA.c2p(Ze.x===void 0?Oe._extremes.x.max[0].val:Ze.x,!0),Ze.y=Oe._yA.c2p(Ze.y===void 0?Oe._extremes.y.max[0].val:Ze.y,!0),Ce.call(k,Le,Fe,"linear",ot.colorscale,"fill",We,Ze,!0,!1)}else nt==="horizontal"&&(nt=nt+"reversed"),Ce.call(c.gradient,Le,Fe,nt,ot.colorscale,"fill")}else Oe.fillcolor&&Ce.call(g.fill,Oe.fillcolor)}c.singleFillStyle=function(Ce,Oe){var Le=d.select(Ce.node()),Ge=Le.data(),rt=((Ge[0]||[])[0]||{}).trace||{};P(Ce,rt,Oe,!1)},c.fillGroupStyle=function(Ce,Oe,Le){Ce.style("stroke-width",0).each(function(Ge){var rt=d.select(this);Ge[0].trace&&P(rt,Ge[0].trace,Oe,Le)})};var y=e(71984);c.symbolNames=[],c.symbolFuncs=[],c.symbolBackOffs=[],c.symbolNeedLines={},c.symbolNoDot={},c.symbolNoFill={},c.symbolList=[],Object.keys(y).forEach(function(Ce){var Oe=y[Ce],Le=Oe.n;c.symbolList.push(Le,String(Le),Ce,Le+100,String(Le+100),Ce+"-open"),c.symbolNames[Le]=Ce,c.symbolFuncs[Le]=Oe.f,c.symbolBackOffs[Le]=Oe.backoff||0,Oe.needLine&&(c.symbolNeedLines[Le]=!0),Oe.noDot?c.symbolNoDot[Le]=!0:c.symbolList.push(Le+200,String(Le+200),Ce+"-dot",Le+300,String(Le+300),Ce+"-open-dot"),Oe.noFill&&(c.symbolNoFill[Le]=!0)});var C=c.symbolNames.length,M="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";c.symbolNumber=function(Ce){if(E(Ce))Ce=+Ce;else if(typeof Ce=="string"){var Oe=0;Ce.indexOf("-open")>0&&(Oe=100,Ce=Ce.replace("-open","")),Ce.indexOf("-dot")>0&&(Oe+=200,Ce=Ce.replace("-dot","")),Ce=c.symbolNames.indexOf(Ce),Ce>=0&&(Ce+=Oe)}return Ce%100>=C||Ce>=400?0:Math.floor(Math.max(Ce,0))};function s(Ce,Oe,Le,Ge){var rt=Ce%100;return c.symbolFuncs[rt](Oe,Le,Ge)+(Ce>=200?M:"")}var _=n("~f"),b={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};c.gradient=function(Ce,Oe,Le,Ge,rt,ot){var $e=b[Ge];return k(Ce,Oe,Le,$e.type,rt,ot,$e.start,$e.stop,!1,$e.reversed)};function k(Ce,Oe,Le,Ge,rt,ot,$e,qe,ht,vt){var pt=rt.length,wt;Ge==="linear"?wt={node:"linearGradient",attrs:{x1:$e.x,y1:$e.y,x2:qe.x,y2:qe.y,gradientUnits:ht?"userSpaceOnUse":"objectBoundingBox"},reversed:vt}:Ge==="radial"&&(wt={node:"radialGradient",reversed:vt});for(var Et=new Array(pt),nt=0;nt<pt;nt++)wt.reversed?Et[pt-1-nt]=[_((1-rt[nt][0])*100),rt[nt][1]]:Et[nt]=[_(rt[nt][0]*100),rt[nt][1]];var Fe=Oe._fullLayout,We="g"+Fe._uid+"-"+Le,Ze=Fe._defs.select(".gradients").selectAll("#"+We).data([Ge+Et.join(";")],S.identity);Ze.exit().remove(),Ze.enter().append(wt.node).each(function(){var Ye=d.select(this);wt.attrs&&Ye.attr(wt.attrs),Ye.attr("id",We);var Ie=Ye.selectAll("stop").data(Et);Ie.exit().remove(),Ie.enter().append("stop"),Ie.each(function(De){var je=T(De[1]);d.select(this).attr({offset:De[0]+"%","stop-color":g.tinyRGB(je),"stop-opacity":je.getAlpha()})})}),Ce.style(ot,ee(We,Oe)).style(ot+"-opacity",null),Ce.classed("gradient_filled",!0)}c.pattern=function(Ce,Oe,Le,Ge,rt,ot,$e,qe,ht,vt,pt,wt){var Et=Oe==="legend";qe&&(ht==="overlay"?(vt=qe,pt=g.contrast(vt)):(vt=void 0,pt=qe));var nt=Le._fullLayout,Fe="p"+nt._uid+"-"+Ge,We,Ze,Ye=function(Zt,Tt,It,Xt,gr){return Xt+(gr-Xt)*(Zt-Tt)/(It-Tt)},Ie,De,je,Re,pe={},be=T(pt),Ue=g.tinyRGB(be),et=be.getAlpha(),st=wt*et;switch(rt){case"/":We=ot*Math.sqrt(2),Ze=ot*Math.sqrt(2),Ie="M-"+We/4+","+Ze/4+"l"+We/2+",-"+Ze/2+"M0,"+Ze+"L"+We+",0M"+We/4*3+","+Ze/4*5+"l"+We/2+",-"+Ze/2,De=$e*ot,Re="path",pe={d:Ie,opacity:st,stroke:Ue,"stroke-width":De+"px"};break;case"\\":We=ot*Math.sqrt(2),Ze=ot*Math.sqrt(2),Ie="M"+We/4*3+",-"+Ze/4+"l"+We/2+","+Ze/2+"M0,0L"+We+","+Ze+"M-"+We/4+","+Ze/4*3+"l"+We/2+","+Ze/2,De=$e*ot,Re="path",pe={d:Ie,opacity:st,stroke:Ue,"stroke-width":De+"px"};break;case"x":We=ot*Math.sqrt(2),Ze=ot*Math.sqrt(2),Ie="M-"+We/4+","+Ze/4+"l"+We/2+",-"+Ze/2+"M0,"+Ze+"L"+We+",0M"+We/4*3+","+Ze/4*5+"l"+We/2+",-"+Ze/2+"M"+We/4*3+",-"+Ze/4+"l"+We/2+","+Ze/2+"M0,0L"+We+","+Ze+"M-"+We/4+","+Ze/4*3+"l"+We/2+","+Ze/2,De=ot-ot*Math.sqrt(1-$e),Re="path",pe={d:Ie,opacity:st,stroke:Ue,"stroke-width":De+"px"};break;case"|":We=ot,Ze=ot,Re="path",Ie="M"+We/2+",0L"+We/2+","+Ze,De=$e*ot,Re="path",pe={d:Ie,opacity:st,stroke:Ue,"stroke-width":De+"px"};break;case"-":We=ot,Ze=ot,Re="path",Ie="M0,"+Ze/2+"L"+We+","+Ze/2,De=$e*ot,Re="path",pe={d:Ie,opacity:st,stroke:Ue,"stroke-width":De+"px"};break;case"+":We=ot,Ze=ot,Re="path",Ie="M"+We/2+",0L"+We/2+","+Ze+"M0,"+Ze/2+"L"+We+","+Ze/2,De=ot-ot*Math.sqrt(1-$e),Re="path",pe={d:Ie,opacity:st,stroke:Ue,"stroke-width":De+"px"};break;case".":We=ot,Ze=ot,$e<Math.PI/4?je=Math.sqrt($e*ot*ot/Math.PI):je=Ye($e,Math.PI/4,1,ot/2,ot/Math.sqrt(2)),Re="circle",pe={cx:We/2,cy:Ze/2,r:je,opacity:st,fill:Ue};break}var lt=[rt||"noSh",vt||"noBg",pt||"noFg",ot,$e].join(";"),Gt=nt._defs.select(".patterns").selectAll("#"+Fe).data([lt],S.identity);Gt.exit().remove(),Gt.enter().append("pattern").each(function(){var Zt=d.select(this);if(Zt.attr({id:Fe,width:We+"px",height:Ze+"px",patternUnits:"userSpaceOnUse",patternTransform:Et?"scale(0.8)":""}),vt){var Tt=T(vt),It=g.tinyRGB(Tt),Xt=Tt.getAlpha(),gr=Zt.selectAll("rect").data([0]);gr.exit().remove(),gr.enter().append("rect").attr({width:We+"px",height:Ze+"px",fill:It,"fill-opacity":Xt})}var gt=Zt.selectAll(Re).data([0]);gt.exit().remove(),gt.enter().append(Re).attr(pe)}),Ce.style("fill",ee(Fe,Le)).style("fill-opacity",null),Ce.classed("pattern_filled",!0)},c.initGradients=function(Ce){var Oe=Ce._fullLayout,Le=S.ensureSingle(Oe._defs,"g","gradients");Le.selectAll("linearGradient,radialGradient").remove(),d.select(Ce).selectAll(".gradient_filled").classed("gradient_filled",!1)},c.initPatterns=function(Ce){var Oe=Ce._fullLayout,Le=S.ensureSingle(Oe._defs,"g","patterns");Le.selectAll("pattern").remove(),d.select(Ce).selectAll(".pattern_filled").classed("pattern_filled",!1)},c.getPatternAttr=function(Ce,Oe,Le){return Ce&&S.isArrayOrTypedArray(Ce)?Oe<Ce.length?Ce[Oe]:Le:Ce},c.pointStyle=function(Ce,Oe,Le,Ge){if(Ce.size()){var rt=c.makePointStyleFns(Oe);Ce.each(function(ot){c.singlePointStyle(ot,d.select(this),Oe,rt,Le,Ge)})}},c.singlePointStyle=function(Ce,Oe,Le,Ge,rt,ot){var $e=Le.marker,qe=$e.line;if(ot&&ot.i>=0&&Ce.i===void 0&&(Ce.i=ot.i),Oe.style("opacity",Ge.selectedOpacityFn?Ge.selectedOpacityFn(Ce):Ce.mo===void 0?$e.opacity:Ce.mo),Ge.ms2mrc){var ht;Ce.ms==="various"||$e.size==="various"?ht=3:ht=Ge.ms2mrc(Ce.ms),Ce.mrc=ht,Ge.selectedSizeFn&&(ht=Ce.mrc=Ge.selectedSizeFn(Ce));var vt=c.symbolNumber(Ce.mx||$e.symbol)||0;Ce.om=vt%200>=100;var pt=ze(Ce,Le),wt=Z(Ce,Le);Oe.attr("d",s(vt,ht,pt,wt))}var Et=!1,nt,Fe,We;if(Ce.so)We=qe.outlierwidth,Fe=qe.outliercolor,nt=$e.outliercolor;else{var Ze=(qe||{}).width;We=(Ce.mlw+1||Ze+1||(Ce.trace?(Ce.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Ce?Fe=Ce.mlcc=Ge.lineScale(Ce.mlc):S.isArrayOrTypedArray(qe.color)?Fe=g.defaultLine:Fe=qe.color,S.isArrayOrTypedArray($e.color)&&(nt=g.defaultLine,Et=!0),"mc"in Ce?nt=Ce.mcc=Ge.markerScale(Ce.mc):nt=$e.color||$e.colors||"rgba(0,0,0,0)",Ge.selectedColorFn&&(nt=Ge.selectedColorFn(Ce))}if(Ce.om)Oe.call(g.stroke,nt).style({"stroke-width":(We||1)+"px",fill:"none"});else{Oe.style("stroke-width",(Ce.isBlank?0:We)+"px");var Ye=$e.gradient,Ie=Ce.mgt;Ie?Et=!0:Ie=Ye&&Ye.type,S.isArrayOrTypedArray(Ie)&&(Ie=Ie[0],b[Ie]||(Ie=0));var De=$e.pattern,je=De&&c.getPatternAttr(De.shape,Ce.i,"");if(Ie&&Ie!=="none"){var Re=Ce.mgc;Re?Et=!0:Re=Ye.color;var pe=Le.uid;Et&&(pe+="-"+Ce.i),c.gradient(Oe,rt,pe,Ie,[[0,Re],[1,nt]],"fill")}else if(je){var be=!1,Ue=De.fgcolor;!Ue&&ot&&ot.color&&(Ue=ot.color,be=!0);var et=c.getPatternAttr(Ue,Ce.i,ot&&ot.color||null),st=c.getPatternAttr(De.bgcolor,Ce.i,null),lt=De.fgopacity,Gt=c.getPatternAttr(De.size,Ce.i,8),Zt=c.getPatternAttr(De.solidity,Ce.i,.3);be=be||Ce.mcc||S.isArrayOrTypedArray(De.shape)||S.isArrayOrTypedArray(De.bgcolor)||S.isArrayOrTypedArray(De.fgcolor)||S.isArrayOrTypedArray(De.size)||S.isArrayOrTypedArray(De.solidity);var Tt=Le.uid;be&&(Tt+="-"+Ce.i),c.pattern(Oe,"point",rt,Tt,je,Gt,Zt,Ce.mcc,De.fillmode,st,et,lt)}else S.isArrayOrTypedArray(nt)?g.fill(Oe,nt[Ce.i]):g.fill(Oe,nt);We&&g.stroke(Oe,Fe)}},c.makePointStyleFns=function(Ce){var Oe={},Le=Ce.marker;return Oe.markerScale=c.tryColorscale(Le,""),Oe.lineScale=c.tryColorscale(Le,"line"),v.traceIs(Ce,"symbols")&&(Oe.ms2mrc=m.isBubble(Ce)?h(Ce):function(){return(Le.size||6)/2}),Ce.selectedpoints&&S.extendFlat(Oe,c.makeSelectedPointStyleFns(Ce)),Oe},c.makeSelectedPointStyleFns=function(Ce){var Oe={},Le=Ce.selected||{},Ge=Ce.unselected||{},rt=Ce.marker||{},ot=Le.marker||{},$e=Ge.marker||{},qe=rt.opacity,ht=ot.opacity,vt=$e.opacity,pt=ht!==void 0,wt=vt!==void 0;(S.isArrayOrTypedArray(qe)||pt||wt)&&(Oe.selectedOpacityFn=function(je){var Re=je.mo===void 0?rt.opacity:je.mo;return je.selected?pt?ht:Re:wt?vt:l*Re});var Et=rt.color,nt=ot.color,Fe=$e.color;(nt||Fe)&&(Oe.selectedColorFn=function(je){var Re=je.mcc||Et;return je.selected?nt||Re:Fe||Re});var We=rt.size,Ze=ot.size,Ye=$e.size,Ie=Ze!==void 0,De=Ye!==void 0;return v.traceIs(Ce,"symbols")&&(Ie||De)&&(Oe.selectedSizeFn=function(je){var Re=je.mrc||We/2;return je.selected?Ie?Ze/2:Re:De?Ye/2:Re}),Oe},c.makeSelectedTextStyleFns=function(Ce){var Oe={},Le=Ce.selected||{},Ge=Ce.unselected||{},rt=Ce.textfont||{},ot=Le.textfont||{},$e=Ge.textfont||{},qe=rt.color,ht=ot.color,vt=$e.color;return Oe.selectedTextColorFn=function(pt){var wt=pt.tc||qe;return pt.selected?ht||wt:vt||(ht?wt:g.addOpacity(wt,l))},Oe},c.selectedPointStyle=function(Ce,Oe){if(!(!Ce.size()||!Oe.selectedpoints)){var Le=c.makeSelectedPointStyleFns(Oe),Ge=Oe.marker||{},rt=[];Le.selectedOpacityFn&&rt.push(function(ot,$e){ot.style("opacity",Le.selectedOpacityFn($e))}),Le.selectedColorFn&&rt.push(function(ot,$e){g.fill(ot,Le.selectedColorFn($e))}),Le.selectedSizeFn&&rt.push(function(ot,$e){var qe=$e.mx||Ge.symbol||0,ht=Le.selectedSizeFn($e);ot.attr("d",s(c.symbolNumber(qe),ht,ze($e,Oe),Z($e,Oe))),$e.mrc2=ht}),rt.length&&Ce.each(function(ot){for(var $e=d.select(this),qe=0;qe<rt.length;qe++)rt[qe]($e,ot)})}},c.tryColorscale=function(Ce,Oe){var Le=Oe?S.nestedProperty(Ce,Oe).get():Ce;if(Le){var Ge=Le.color;if((Le.colorscale||Le._colorAx)&&S.isArrayOrTypedArray(Ge))return r.makeColorScaleFuncFromTrace(Le)}return S.identity};var D={start:1,end:-1,middle:0,bottom:1,top:-1};function V(Ce,Oe,Le,Ge,rt){var ot=d.select(Ce.node().parentNode),$e=Oe.indexOf("top")!==-1?"top":Oe.indexOf("bottom")!==-1?"bottom":"middle",qe=Oe.indexOf("left")!==-1?"end":Oe.indexOf("right")!==-1?"start":"middle",ht=Ge?Ge/.8+1:0,vt=(o.lineCount(Ce)-1)*u+1,pt=D[qe]*ht,wt=Le*.75+D[$e]*ht+(D[$e]-1)*vt*Le/2;Ce.attr("text-anchor",qe),rt||ot.attr("transform",t(pt,wt))}function O(Ce,Oe){var Le=Ce.ts||Oe.textfont.size;return E(Le)&&Le>0?Le:0}c.textPointStyle=function(Ce,Oe,Le){if(Ce.size()){var Ge;if(Oe.selectedpoints){var rt=c.makeSelectedTextStyleFns(Oe);Ge=rt.selectedTextColorFn}var ot=Oe.texttemplate,$e=Le._fullLayout;Ce.each(function(qe){var ht=d.select(this),vt=ot?S.extractOption(qe,Oe,"txt","texttemplate"):S.extractOption(qe,Oe,"tx","text");if(!vt&&vt!==0){ht.remove();return}if(ot){var pt=Oe._module.formatLabels,wt=pt?pt(qe,Oe,$e):{},Et={};w(Et,Oe,qe.i);var nt=Oe._meta||{};vt=S.texttemplateString(vt,wt,$e._d3locale,Et,qe,nt)}var Fe=qe.tp||Oe.textposition,We=O(qe,Oe),Ze=Ge?Ge(qe):qe.tc||Oe.textfont.color;ht.call(c.font,{family:qe.tf||Oe.textfont.family,weight:qe.tw||Oe.textfont.weight,style:qe.ty||Oe.textfont.style,variant:qe.tv||Oe.textfont.variant,textcase:qe.tC||Oe.textfont.textcase,lineposition:qe.tE||Oe.textfont.lineposition,shadow:qe.tS||Oe.textfont.shadow,size:We,color:Ze}).text(vt).call(o.convertToTspans,Le).call(V,Fe,We,qe.mrc)})}},c.selectedTextStyle=function(Ce,Oe){if(!(!Ce.size()||!Oe.selectedpoints)){var Le=c.makeSelectedTextStyleFns(Oe);Ce.each(function(Ge){var rt=d.select(this),ot=Le.selectedTextColorFn(Ge),$e=Ge.tp||Oe.textposition,qe=O(Ge,Oe);g.fill(rt,ot);var ht=v.traceIs(Oe,"bar-like");V(rt,$e,qe,Ge.mrc2||Ge.mrc,ht)})}};var N=.5;c.smoothopen=function(Ce,Oe){if(Ce.length<3)return"M"+Ce.join("L");var Le="M"+Ce[0],Ge=[],rt;for(rt=1;rt<Ce.length-1;rt++)Ge.push(ne(Ce[rt-1],Ce[rt],Ce[rt+1],Oe));for(Le+="Q"+Ge[0][0]+" "+Ce[1],rt=2;rt<Ce.length-1;rt++)Le+="C"+Ge[rt-2][1]+" "+Ge[rt-1][0]+" "+Ce[rt];return Le+="Q"+Ge[Ce.length-3][1]+" "+Ce[Ce.length-1],Le},c.smoothclosed=function(Ce,Oe){if(Ce.length<3)return"M"+Ce.join("L")+"Z";var Le="M"+Ce[0],Ge=Ce.length-1,rt=[ne(Ce[Ge],Ce[0],Ce[1],Oe)],ot;for(ot=1;ot<Ge;ot++)rt.push(ne(Ce[ot-1],Ce[ot],Ce[ot+1],Oe));for(rt.push(ne(Ce[Ge-1],Ce[Ge],Ce[0],Oe)),ot=1;ot<=Ge;ot++)Le+="C"+rt[ot-1][1]+" "+rt[ot][0]+" "+Ce[ot];return Le+="C"+rt[Ge][1]+" "+rt[0][0]+" "+Ce[0]+"Z",Le};var B,z;function H(Ce,Oe,Le){return Le&&(Ce=te(Ce)),Oe?$(Ce[1]):X(Ce[0])}function X(Ce){var Oe=d.round(Ce,2);return B=Oe,Oe}function $(Ce){var Oe=d.round(Ce,2);return z=Oe,Oe}function ne(Ce,Oe,Le,Ge){var rt=Ce[0]-Oe[0],ot=Ce[1]-Oe[1],$e=Le[0]-Oe[0],qe=Le[1]-Oe[1],ht=Math.pow(rt*rt+ot*ot,N/2),vt=Math.pow($e*$e+qe*qe,N/2),pt=(vt*vt*rt-ht*ht*$e)*Ge,wt=(vt*vt*ot-ht*ht*qe)*Ge,Et=3*vt*(ht+vt),nt=3*ht*(ht+vt);return[[X(Oe[0]+(Et&&pt/Et)),$(Oe[1]+(Et&&wt/Et))],[X(Oe[0]-(nt&&pt/nt)),$(Oe[1]-(nt&&wt/nt))]]}var q={hv:function(Ce,Oe,Le){return"H"+X(Oe[0])+"V"+H(Oe,1,Le)},vh:function(Ce,Oe,Le){return"V"+$(Oe[1])+"H"+H(Oe,0,Le)},hvh:function(Ce,Oe,Le){return"H"+X((Ce[0]+Oe[0])/2)+"V"+$(Oe[1])+"H"+H(Oe,0,Le)},vhv:function(Ce,Oe,Le){return"V"+$((Ce[1]+Oe[1])/2)+"H"+X(Oe[0])+"V"+H(Oe,1,Le)}},ue=function(Ce,Oe,Le){return"L"+H(Oe,0,Le)+","+H(Oe,1,Le)};c.steps=function(Ce){var Oe=q[Ce]||ue;return function(Le){for(var Ge="M"+X(Le[0][0])+","+$(Le[0][1]),rt=Le.length,ot=1;ot<rt;ot++)Ge+=Oe(Le[ot-1],Le[ot],ot===rt-1);return Ge}};function te(Ce,Oe){var Le=Ce.backoff,Ge=Ce.trace,rt=Ce.d,ot=Ce.i;if(Le&&Ge&&Ge.marker&&Ge.marker.angle%360===0&&Ge.line&&Ge.line.shape!=="spline"){var $e=S.isArrayOrTypedArray(Le),qe=Ce,ht=Oe?Oe[0]:B||0,vt=Oe?Oe[1]:z||0,pt=qe[0],wt=qe[1],Et=pt-ht,nt=wt-vt,Fe=Math.atan2(nt,Et),We=$e?Le[ot]:Le;if(We==="auto"){var Ze=qe.i;Ge.type==="scatter"&&Ze--;var Ye=qe.marker,Ie=Ye.symbol;S.isArrayOrTypedArray(Ie)&&(Ie=Ie[Ze]);var De=Ye.size;S.isArrayOrTypedArray(De)&&(De=De[Ze]),We=Ye?c.symbolBackOffs[c.symbolNumber(Ie)]*De:0,We+=c.getMarkerStandoff(rt[Ze],Ge)||0}var je=pt-We*Math.cos(Fe),Re=wt-We*Math.sin(Fe);(je<=pt&&je>=ht||je>=pt&&je<=ht)&&(Re<=wt&&Re>=vt||Re>=wt&&Re<=vt)&&(Ce=[je,Re])}return Ce}c.applyBackoff=te,c.makeTester=function(){var Ce=S.ensureSingleById(d.select("body"),"svg","js-plotly-tester",function(Le){Le.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Oe=S.ensureSingle(Ce,"path","js-reference-point",function(Le){Le.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});c.tester=Ce,c.testref=Oe},c.savedBBoxes={};var J=0,ie=1e4;c.bBox=function(Ce,Oe,Le){Le||(Le=K(Ce));var Ge;if(Le){if(Ge=c.savedBBoxes[Le],Ge)return S.extendFlat({},Ge)}else if(Ce.childNodes.length===1){var rt=Ce.childNodes[0];if(Le=K(rt),Le){var ot=+rt.getAttribute("x")||0,$e=+rt.getAttribute("y")||0,qe=rt.getAttribute("transform");if(!qe){var ht=c.bBox(rt,!1,Le);return ot&&(ht.left+=ot,ht.right+=ot),$e&&(ht.top+=$e,ht.bottom+=$e),ht}if(Le+="~"+ot+"~"+$e+"~"+qe,Ge=c.savedBBoxes[Le],Ge)return S.extendFlat({},Ge)}}var vt,pt;Oe?vt=Ce:(pt=c.tester.node(),vt=Ce.cloneNode(!0),pt.appendChild(vt)),d.select(vt).attr("transform",null).call(o.positionText,0,0);var wt=vt.getBoundingClientRect(),Et=c.testref.node().getBoundingClientRect();Oe||pt.removeChild(vt);var nt={height:wt.height,width:wt.width,left:wt.left-Et.left,top:wt.top-Et.top,right:wt.right-Et.left,bottom:wt.bottom-Et.top};return J>=ie&&(c.savedBBoxes={},J=0),Le&&(c.savedBBoxes[Le]=nt),J++,S.extendFlat({},nt)};function K(Ce){var Oe=Ce.getAttribute("data-unformatted");if(Oe!==null)return Oe+Ce.getAttribute("data-math")+Ce.getAttribute("text-anchor")+Ce.getAttribute("style")}c.setClipUrl=function(Ce,Oe,Le){Ce.attr("clip-path",ee(Oe,Le))};function ee(Ce,Oe){if(!Ce)return null;var Le=Oe._context,Ge=Le._exportedPlot?"":Le._baseUrl||"";return Ge?"url('"+Ge+"#"+Ce+"')":"url(#"+Ce+")"}c.getTranslate=function(Ce){var Oe=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Le=Ce.attr?"attr":"getAttribute",Ge=Ce[Le]("transform")||"",rt=Ge.replace(Oe,function(ot,$e,qe){return[$e,qe].join(" ")}).split(" ");return{x:+rt[0]||0,y:+rt[1]||0}},c.setTranslate=function(Ce,Oe,Le){var Ge=/(\btranslate\(.*?\);?)/,rt=Ce.attr?"attr":"getAttribute",ot=Ce.attr?"attr":"setAttribute",$e=Ce[rt]("transform")||"";return Oe=Oe||0,Le=Le||0,$e=$e.replace(Ge,"").trim(),$e+=t(Oe,Le),$e=$e.trim(),Ce[ot]("transform",$e),$e},c.getScale=function(Ce){var Oe=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Le=Ce.attr?"attr":"getAttribute",Ge=Ce[Le]("transform")||"",rt=Ge.replace(Oe,function(ot,$e,qe){return[$e,qe].join(" ")}).split(" ");return{x:+rt[0]||1,y:+rt[1]||1}},c.setScale=function(Ce,Oe,Le){var Ge=/(\bscale\(.*?\);?)/,rt=Ce.attr?"attr":"getAttribute",ot=Ce.attr?"attr":"setAttribute",$e=Ce[rt]("transform")||"";return Oe=Oe||1,Le=Le||1,$e=$e.replace(Ge,"").trim(),$e+="scale("+Oe+","+Le+")",$e=$e.trim(),Ce[ot]("transform",$e),$e};var le=/\s*sc.*/;c.setPointGroupScale=function(Ce,Oe,Le){if(Oe=Oe||1,Le=Le||1,!!Ce){var Ge=Oe===1&&Le===1?"":"scale("+Oe+","+Le+")";Ce.each(function(){var rt=(this.getAttribute("transform")||"").replace(le,"");rt+=Ge,rt=rt.trim(),this.setAttribute("transform",rt)})}};var j=/translate\([^)]*\)\s*$/;c.setTextPointsScale=function(Ce,Oe,Le){Ce&&Ce.each(function(){var Ge,rt=d.select(this),ot=rt.select("text");if(ot.node()){var $e=parseFloat(ot.attr("x")||0),qe=parseFloat(ot.attr("y")||0),ht=(rt.attr("transform")||"").match(j);Oe===1&&Le===1?Ge=[]:Ge=[t($e,qe),"scale("+Oe+","+Le+")",t(-$e,-qe)],ht&&Ge.push(ht),rt.attr("transform",Ge.join(""))}})};function Z(Ce,Oe){var Le;return Ce&&(Le=Ce.mf),Le===void 0&&(Le=Oe.marker&&Oe.marker.standoff||0),!Oe._geo&&!Oe._xA?-Le:Le}c.getMarkerStandoff=Z;var fe=Math.atan2,re=Math.cos,ce=Math.sin;function xe(Ce,Oe){var Le=Oe[0],Ge=Oe[1];return[Le*re(Ce)-Ge*ce(Ce),Le*ce(Ce)+Ge*re(Ce)]}var Te,we,_e,ke,Ne,Ee;function ze(Ce,Oe){var Le=Ce.ma;Le===void 0&&(Le=Oe.marker.angle,(!Le||S.isArrayOrTypedArray(Le))&&(Le=0));var Ge,rt,ot=Oe.marker.angleref;if(ot==="previous"||ot==="north"){if(Oe._geo){var $e=Oe._geo.project(Ce.lonlat);Ge=$e[0],rt=$e[1]}else{var qe=Oe._xA,ht=Oe._yA;if(qe&&ht)Ge=qe.c2p(Ce.x),rt=ht.c2p(Ce.y);else return 90}if(Oe._geo){var vt=Ce.lonlat[0],pt=Ce.lonlat[1],wt=Oe._geo.project([vt,pt+1e-5]),Et=Oe._geo.project([vt+1e-5,pt]),nt=fe(Et[1]-rt,Et[0]-Ge),Fe=fe(wt[1]-rt,wt[0]-Ge),We;if(ot==="north")We=Le/180*Math.PI;else if(ot==="previous"){var Ze=vt/180*Math.PI,Ye=pt/180*Math.PI,Ie=Te/180*Math.PI,De=we/180*Math.PI,je=Ie-Ze,Re=re(De)*ce(je),pe=ce(De)*re(Ye)-re(De)*ce(Ye)*re(je);We=-fe(Re,pe)-Math.PI,Te=vt,we=pt}var be=xe(nt,[re(We),0]),Ue=xe(Fe,[ce(We),0]);Le=fe(be[1]+Ue[1],be[0]+Ue[0])/Math.PI*180,ot==="previous"&&!(Ee===Oe.uid&&Ce.i===Ne+1)&&(Le=null)}if(ot==="previous"&&!Oe._geo)if(Ee===Oe.uid&&Ce.i===Ne+1&&E(Ge)&&E(rt)){var et=Ge-_e,st=rt-ke,lt=Oe.line&&Oe.line.shape||"",Gt=lt.slice(lt.length-1);Gt==="h"&&(st=0),Gt==="v"&&(et=0),Le+=fe(st,et)/Math.PI*180+90}else Le=null}return _e=Ge,ke=rt,Ne=Ce.i,Ee=Oe.uid,Le}c.getMarkerAngle=ze},71984:function(U,F,e){var d=e(21984),S=e(33428).round,n="M0,0Z",E=Math.sqrt(2),T=Math.sqrt(3),v=Math.PI,g=Math.cos,r=Math.sin;U.exports={circle:{n:0,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a="M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z";return w?l(h,w,a):a}},square:{n:1,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")}},diamond:{n:2,f:function(m,h,w){if(t(h))return n;var c=S(m*1.3,2);return l(h,w,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"Z")}},cross:{n:3,f:function(m,h,w){if(t(h))return n;var c=S(m*.4,2),a=S(m*1.2,2);return l(h,w,"M"+a+","+c+"H"+c+"V"+a+"H-"+c+"V"+c+"H-"+a+"V-"+c+"H-"+c+"V-"+a+"H"+c+"V-"+c+"H"+a+"Z")}},x:{n:4,f:function(m,h,w){if(t(h))return n;var c=S(m*.8/E,2),a="l"+c+","+c,p="l"+c+",-"+c,x="l-"+c+",-"+c,A="l-"+c+","+c;return l(h,w,"M0,"+c+a+p+x+p+x+A+x+A+a+A+a+"Z")}},"triangle-up":{n:5,f:function(m,h,w){if(t(h))return n;var c=S(m*2/T,2),a=S(m/2,2),p=S(m,2);return l(h,w,"M-"+c+","+a+"H"+c+"L0,-"+p+"Z")}},"triangle-down":{n:6,f:function(m,h,w){if(t(h))return n;var c=S(m*2/T,2),a=S(m/2,2),p=S(m,2);return l(h,w,"M-"+c+",-"+a+"H"+c+"L0,"+p+"Z")}},"triangle-left":{n:7,f:function(m,h,w){if(t(h))return n;var c=S(m*2/T,2),a=S(m/2,2),p=S(m,2);return l(h,w,"M"+a+",-"+c+"V"+c+"L-"+p+",0Z")}},"triangle-right":{n:8,f:function(m,h,w){if(t(h))return n;var c=S(m*2/T,2),a=S(m/2,2),p=S(m,2);return l(h,w,"M-"+a+",-"+c+"V"+c+"L"+p+",0Z")}},"triangle-ne":{n:9,f:function(m,h,w){if(t(h))return n;var c=S(m*.6,2),a=S(m*1.2,2);return l(h,w,"M-"+a+",-"+c+"H"+c+"V"+a+"Z")}},"triangle-se":{n:10,f:function(m,h,w){if(t(h))return n;var c=S(m*.6,2),a=S(m*1.2,2);return l(h,w,"M"+c+",-"+a+"V"+c+"H-"+a+"Z")}},"triangle-sw":{n:11,f:function(m,h,w){if(t(h))return n;var c=S(m*.6,2),a=S(m*1.2,2);return l(h,w,"M"+a+","+c+"H-"+c+"V-"+a+"Z")}},"triangle-nw":{n:12,f:function(m,h,w){if(t(h))return n;var c=S(m*.6,2),a=S(m*1.2,2);return l(h,w,"M-"+c+","+a+"V-"+c+"H"+a+"Z")}},pentagon:{n:13,f:function(m,h,w){if(t(h))return n;var c=S(m*.951,2),a=S(m*.588,2),p=S(-m,2),x=S(m*-.309,2),A=S(m*.809,2);return l(h,w,"M"+c+","+x+"L"+a+","+A+"H-"+a+"L-"+c+","+x+"L0,"+p+"Z")}},hexagon:{n:14,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a=S(m/2,2),p=S(m*T/2,2);return l(h,w,"M"+p+",-"+a+"V"+a+"L0,"+c+"L-"+p+","+a+"V-"+a+"L0,-"+c+"Z")}},hexagon2:{n:15,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a=S(m/2,2),p=S(m*T/2,2);return l(h,w,"M-"+a+","+p+"H"+a+"L"+c+",0L"+a+",-"+p+"H-"+a+"L-"+c+",0Z")}},octagon:{n:16,f:function(m,h,w){if(t(h))return n;var c=S(m*.924,2),a=S(m*.383,2);return l(h,w,"M-"+a+",-"+c+"H"+a+"L"+c+",-"+a+"V"+a+"L"+a+","+c+"H-"+a+"L-"+c+","+a+"V-"+a+"Z")}},star:{n:17,f:function(m,h,w){if(t(h))return n;var c=m*1.4,a=S(c*.225,2),p=S(c*.951,2),x=S(c*.363,2),A=S(c*.588,2),P=S(-c,2),y=S(c*-.309,2),C=S(c*.118,2),M=S(c*.809,2),s=S(c*.382,2);return l(h,w,"M"+a+","+y+"H"+p+"L"+x+","+C+"L"+A+","+M+"L0,"+s+"L-"+A+","+M+"L-"+x+","+C+"L-"+p+","+y+"H-"+a+"L0,"+P+"Z")}},hexagram:{n:18,f:function(m,h,w){if(t(h))return n;var c=S(m*.66,2),a=S(m*.38,2),p=S(m*.76,2);return l(h,w,"M-"+p+",0l-"+a+",-"+c+"h"+p+"l"+a+",-"+c+"l"+a+","+c+"h"+p+"l-"+a+","+c+"l"+a+","+c+"h-"+p+"l-"+a+","+c+"l-"+a+",-"+c+"h-"+p+"Z")}},"star-triangle-up":{n:19,f:function(m,h,w){if(t(h))return n;var c=S(m*T*.8,2),a=S(m*.8,2),p=S(m*1.6,2),x=S(m*4,2),A="A "+x+","+x+" 0 0 1 ";return l(h,w,"M-"+c+","+a+A+c+","+a+A+"0,-"+p+A+"-"+c+","+a+"Z")}},"star-triangle-down":{n:20,f:function(m,h,w){if(t(h))return n;var c=S(m*T*.8,2),a=S(m*.8,2),p=S(m*1.6,2),x=S(m*4,2),A="A "+x+","+x+" 0 0 1 ";return l(h,w,"M"+c+",-"+a+A+"-"+c+",-"+a+A+"0,"+p+A+c+",-"+a+"Z")}},"star-square":{n:21,f:function(m,h,w){if(t(h))return n;var c=S(m*1.1,2),a=S(m*2,2),p="A "+a+","+a+" 0 0 1 ";return l(h,w,"M-"+c+",-"+c+p+"-"+c+","+c+p+c+","+c+p+c+",-"+c+p+"-"+c+",-"+c+"Z")}},"star-diamond":{n:22,f:function(m,h,w){if(t(h))return n;var c=S(m*1.4,2),a=S(m*1.9,2),p="A "+a+","+a+" 0 0 1 ";return l(h,w,"M-"+c+",0"+p+"0,"+c+p+c+",0"+p+"0,-"+c+p+"-"+c+",0Z")}},"diamond-tall":{n:23,f:function(m,h,w){if(t(h))return n;var c=S(m*.7,2),a=S(m*1.4,2);return l(h,w,"M0,"+a+"L"+c+",0L0,-"+a+"L-"+c+",0Z")}},"diamond-wide":{n:24,f:function(m,h,w){if(t(h))return n;var c=S(m*1.4,2),a=S(m*.7,2);return l(h,w,"M0,"+a+"L"+c+",0L0,-"+a+"L-"+c+",0Z")}},hourglass:{n:25,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M"+c+","+c+"H-"+c+"L"+c+",-"+c+"H-"+c+"Z")},noDot:!0},bowtie:{n:26,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M"+c+","+c+"V-"+c+"L-"+c+","+c+"V-"+c+"Z")},noDot:!0},"circle-cross":{n:27,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a=S(m/E,2);return l(h,w,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m,h,w){if(t(h))return n;var c=S(m*1.3,2);return l(h,w,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM0,-"+c+"V"+c+"M-"+c+",0H"+c)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m,h,w){if(t(h))return n;var c=S(m*1.3,2),a=S(m*.65,2);return l(h,w,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(m,h,w){if(t(h))return n;var c=S(m*1.4,2);return l(h,w,"M0,"+c+"V-"+c+"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m,h,w){if(t(h))return n;var c=S(m*1.2,2),a=S(m*.85,2);return l(h,w,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m,h,w){if(t(h))return n;var c=S(m/2,2),a=S(m,2);return l(h,w,"M"+c+","+a+"V-"+a+"M"+(c-a)+",-"+a+"V"+a+"M"+a+","+c+"H-"+a+"M-"+a+","+(c-a)+"H"+a)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m,h,w){if(t(h))return n;var c=S(m*1.2,2),a=S(m*1.6,2),p=S(m*.8,2);return l(h,w,"M-"+c+","+p+"L0,0M"+c+","+p+"L0,0M0,-"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m,h,w){if(t(h))return n;var c=S(m*1.2,2),a=S(m*1.6,2),p=S(m*.8,2);return l(h,w,"M-"+c+",-"+p+"L0,0M"+c+",-"+p+"L0,0M0,"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m,h,w){if(t(h))return n;var c=S(m*1.2,2),a=S(m*1.6,2),p=S(m*.8,2);return l(h,w,"M"+p+","+c+"L0,0M"+p+",-"+c+"L0,0M-"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m,h,w){if(t(h))return n;var c=S(m*1.2,2),a=S(m*1.6,2),p=S(m*.8,2);return l(h,w,"M-"+p+","+c+"L0,0M-"+p+",-"+c+"L0,0M"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m,h,w){if(t(h))return n;var c=S(m*1.4,2);return l(h,w,"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m,h,w){if(t(h))return n;var c=S(m*1.4,2);return l(h,w,"M0,"+c+"V-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m,h,w){if(t(h))return n;var c=S(m,2);return l(h,w,"M"+c+","+c+"L-"+c+",-"+c)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a=S(m*2,2);return l(h,w,"M0,0L-"+c+","+a+"H"+c+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a=S(m*2,2);return l(h,w,"M0,0L-"+c+",-"+a+"H"+c+"Z")},noDot:!0},"arrow-left":{n:47,f:function(m,h,w){if(t(h))return n;var c=S(m*2,2),a=S(m,2);return l(h,w,"M0,0L"+c+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-right":{n:48,f:function(m,h,w){if(t(h))return n;var c=S(m*2,2),a=S(m,2);return l(h,w,"M0,0L-"+c+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a=S(m*2,2);return l(h,w,"M-"+c+",0H"+c+"M0,0L-"+c+","+a+"H"+c+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m,h,w){if(t(h))return n;var c=S(m,2),a=S(m*2,2);return l(h,w,"M-"+c+",0H"+c+"M0,0L-"+c+",-"+a+"H"+c+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m,h,w){if(t(h))return n;var c=S(m*2,2),a=S(m,2);return l(h,w,"M0,-"+a+"V"+a+"M0,0L"+c+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m,h,w){if(t(h))return n;var c=S(m*2,2),a=S(m,2);return l(h,w,"M0,-"+a+"V"+a+"M0,0L-"+c+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(m,h,w){if(t(h))return n;var c=v/2.5,a=2*m*g(c),p=2*m*r(c);return l(h,w,"M0,0L"+-a+","+p+"L"+a+","+p+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(m,h,w){if(t(h))return n;var c=v/4,a=2*m*g(c),p=2*m*r(c);return l(h,w,"M0,0L"+-a+","+p+"A "+2*m+","+2*m+" 0 0 1 "+a+","+p+"Z")},backoff:.4,noDot:!0}};function t(m){return m===null}var o,i,f,u;function l(m,h,w){if((!m||m%360===0)&&!h)return w;if(f===m&&u===h&&o===w)return i;f=m,u=h,o=w;function c(D,V){var O=g(D),N=r(D),B=V[0],z=V[1]+(h||0);return[B*O-z*N,B*N+z*O]}for(var a=m/180*v,p=0,x=0,A=d(w),P="",y=0;y<A.length;y++){var C=A[y],M=C[0],s=p,_=x;if(M==="M"||M==="L")p=+C[1],x=+C[2];else if(M==="m"||M==="l")p+=+C[1],x+=+C[2];else if(M==="H")p=+C[1];else if(M==="h")p+=+C[1];else if(M==="V")x=+C[1];else if(M==="v")x+=+C[1];else if(M==="A"){p=+C[1],x=+C[2];var b=c(a,[+C[6],+C[7]]);C[6]=b[0],C[7]=b[1],C[3]=+C[3]+m}(M==="H"||M==="V")&&(M="L"),(M==="h"||M==="v")&&(M="l"),(M==="m"||M==="l")&&(p-=s,x-=_);var k=c(a,[p,x]);(M==="H"||M==="V")&&(M="L"),(M==="M"||M==="L"||M==="m"||M==="l")&&(C[1]=k[0],C[2]=k[1]),C[0]=M,P+=C[0]+C.slice(1).join(",")}return i=P,P}},97644:function(U){U.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(U,F,e){var d=e(38248),S=e(24040),n=e(54460),E=e(3400),T=e(93792);U.exports=function(r){for(var t=r.calcdata,o=0;o<t.length;o++){var i=t[o],f=i[0].trace;if(f.visible===!0&&S.traceIs(f,"errorBarsOK")){var u=n.getFromId(r,f.xaxis),l=n.getFromId(r,f.yaxis);v(i,f,u,"x"),v(i,f,l,"y")}}};function v(g,r,t,o){var i=r["error_"+o]||{},f=i.visible&&["linear","log"].indexOf(t.type)!==-1,u=[];if(f){for(var l=T(i),m=0;m<g.length;m++){var h=g[m],w=h.i;if(w===void 0)w=m;else if(w===null)continue;var c=h[o];if(d(t.c2l(c))){var a=l(c,w);if(d(a[0])&&d(a[1])){var p=h[o+"s"]=c-a[0],x=h[o+"h"]=c+a[1];u.push(p,x)}}}var A=t._id,P=r._extremes[A],y=n.findExtremes(t,u,E.extendFlat({tozero:P.opts.tozero},{padded:!0}));P.min=P.min.concat(y.min),P.max=P.max.concat(y.max)}}},93792:function(U){U.exports=function(d){var S=d.type,n=d.symmetric;if(S==="data"){var E=d.array||[];if(n)return function(t,o){var i=+E[o];return[i,i]};var T=d.arrayminus||[];return function(t,o){var i=+E[o],f=+T[o];return!isNaN(i)||!isNaN(f)?[f||0,i||0]:[NaN,NaN]}}else{var v=F(S,d.value),g=F(S,d.valueminus);return n||d.valueminus===void 0?function(t){var o=v(t);return[o,o]}:function(t){return[g(t),v(t)]}}};function F(e,d){if(e==="percent")return function(S){return Math.abs(S*d/100)};if(e==="constant")return function(){return Math.abs(d)};if(e==="sqrt")return function(S){return Math.sqrt(Math.abs(S))}}},65200:function(U,F,e){var d=e(38248),S=e(24040),n=e(3400),E=e(31780),T=e(97644);U.exports=function(v,g,r,t){var o="error_"+t.axis,i=E.newContainer(g,o),f=v[o]||{};function u(p,x){return n.coerce(f,i,T,p,x)}var l=f.array!==void 0||f.value!==void 0||f.type==="sqrt",m=u("visible",l);if(m!==!1){var h=u("type","array"in f?"data":"percent"),w=!0;h!=="sqrt"&&(w=u("symmetric",!((h==="data"?"arrayminus":"valueminus")in f))),h==="data"?(u("array"),u("traceref"),w||(u("arrayminus"),u("tracerefminus"))):(h==="percent"||h==="constant")&&(u("value"),w||u("valueminus"));var c="copy_"+t.inherit+"style";if(t.inherit){var a=g["error_"+t.inherit];(a||{}).visible&&u(c,!(f.color||d(f.thickness)||d(f.width)))}(!t.inherit||!i[c])&&(u("color",r),u("thickness"),u("width",S.traceIs(g,"gl3d")?0:4))}}},64968:function(U,F,e){var d=e(3400),S=e(67824).overrideAll,n=e(97644),E={error_x:d.extendFlat({},n),error_y:d.extendFlat({},n)};delete E.error_x.copy_zstyle,delete E.error_y.copy_zstyle,delete E.error_y.copy_ystyle;var T={error_x:d.extendFlat({},n),error_y:d.extendFlat({},n),error_z:d.extendFlat({},n)};delete T.error_x.copy_ystyle,delete T.error_y.copy_ystyle,delete T.error_z.copy_ystyle,delete T.error_z.copy_zstyle,U.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:E,bar:E,histogram:E,scatter3d:S(T,"calc","nested"),scattergl:S(E,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:v};function v(g,r,t){(r.error_y||{}).visible&&(t.yerr=g.yh-g.y,r.error_y.symmetric||(t.yerrneg=g.y-g.ys)),(r.error_x||{}).visible&&(t.xerr=g.xh-g.x,r.error_x.symmetric||(t.xerrneg=g.x-g.xs))}},78512:function(U,F,e){var d=e(33428),S=e(38248),n=e(43616),E=e(43028);U.exports=function(g,r,t,o){var i,f=t.xaxis,u=t.yaxis,l=o&&o.duration>0,m=g._context.staticPlot;r.each(function(h){var w=h[0].trace,c=w.error_x||{},a=w.error_y||{},p;w.ids&&(p=function(y){return y.id});var x=E.hasMarkers(w)&&w.marker.maxdisplayed>0;!a.visible&&!c.visible&&(h=[]);var A=d.select(this).selectAll("g.errorbar").data(h,p);if(A.exit().remove(),!!h.length){c.visible||A.selectAll("path.xerror").remove(),a.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var P=A.enter().append("g").classed("errorbar",!0);l&&P.style("opacity",0).transition().duration(o.duration).style("opacity",1),n.setClipUrl(A,t.layerClipId,g),A.each(function(y){var C=d.select(this),M=T(y,f,u);if(!(x&&!y.vis)){var s,_=C.select("path.yerror");if(a.visible&&S(M.x)&&S(M.yh)&&S(M.ys)){var b=a.width;s="M"+(M.x-b)+","+M.yh+"h"+2*b+"m-"+b+",0V"+M.ys,M.noYS||(s+="m-"+b+",0h"+2*b),i=!_.size(),i?_=C.append("path").style("vector-effect",m?"none":"non-scaling-stroke").classed("yerror",!0):l&&(_=_.transition().duration(o.duration).ease(o.easing)),_.attr("d",s)}else _.remove();var k=C.select("path.xerror");if(c.visible&&S(M.y)&&S(M.xh)&&S(M.xs)){var D=(c.copy_ystyle?a:c).width;s="M"+M.xh+","+(M.y-D)+"v"+2*D+"m0,-"+D+"H"+M.xs,M.noXS||(s+="m0,-"+D+"v"+2*D),i=!k.size(),i?k=C.append("path").style("vector-effect",m?"none":"non-scaling-stroke").classed("xerror",!0):l&&(k=k.transition().duration(o.duration).ease(o.easing)),k.attr("d",s)}else k.remove()}})}})};function T(v,g,r){var t={x:g.c2p(v.x),y:r.c2p(v.y)};return v.yh!==void 0&&(t.yh=r.c2p(v.yh),t.ys=r.c2p(v.ys),S(t.ys)||(t.noYS=!0,t.ys=r.c2p(v.ys,!0))),v.xh!==void 0&&(t.xh=g.c2p(v.xh),t.xs=g.c2p(v.xs),S(t.xs)||(t.noXS=!0,t.xs=g.c2p(v.xs,!0))),t}},92036:function(U,F,e){var d=e(33428),S=e(76308);U.exports=function(E){E.each(function(T){var v=T[0].trace,g=v.error_y||{},r=v.error_x||{},t=d.select(this);t.selectAll("path.yerror").style("stroke-width",g.thickness+"px").call(S.stroke,g.color),r.copy_ystyle&&(r=g),t.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(S.stroke,r.color)})}},55756:function(U,F,e){var d=e(25376),S=e(65460).hoverlabel,n=e(92880).extendFlat;U.exports={hoverlabel:{bgcolor:n({},S.bgcolor,{arrayOk:!0}),bordercolor:n({},S.bordercolor,{arrayOk:!0}),font:d({arrayOk:!0,editType:"none"}),align:n({},S.align,{arrayOk:!0}),namelength:n({},S.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(U,F,e){var d=e(3400),S=e(24040);U.exports=function(T){var v=T.calcdata,g=T._fullLayout;function r(u){return function(l){return d.coerceHoverinfo({hoverinfo:l},{_module:u._module},g)}}for(var t=0;t<v.length;t++){var o=v[t],i=o[0].trace;if(!S.traceIs(i,"pie-like")){var f=S.traceIs(i,"2dMap")?n:d.fillArray;f(i.hoverinfo,o,"hi",r(i)),i.hovertemplate&&f(i.hovertemplate,o,"ht"),i.hoverlabel&&(f(i.hoverlabel.bgcolor,o,"hbg"),f(i.hoverlabel.bordercolor,o,"hbc"),f(i.hoverlabel.font.size,o,"hts"),f(i.hoverlabel.font.color,o,"htc"),f(i.hoverlabel.font.family,o,"htf"),f(i.hoverlabel.font.weight,o,"htw"),f(i.hoverlabel.font.style,o,"hty"),f(i.hoverlabel.font.variant,o,"htv"),f(i.hoverlabel.namelength,o,"hnl"),f(i.hoverlabel.align,o,"hta"))}}};function n(E,T,v,g){g=g||d.identity,Array.isArray(E)&&(T[0][v]=g(E))}},62376:function(U,F,e){var d=e(24040),S=e(83292).hover;U.exports=function(E,T,v){var g=d.getComponentMethod("annotations","onClick")(E,E._hoverdata);v!==void 0&&S(E,T,v,!0);function r(){E.emit("plotly_click",{points:E._hoverdata,event:T})}E._hoverdata&&T&&T.target&&(g&&g.then?g.then(r):r(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(U){U.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(U,F,e){var d=e(3400),S=e(55756),n=e(16132);U.exports=function(T,v,g,r){function t(i,f){return d.coerce(T,v,S,i,f)}var o=d.extendFlat({},r.hoverlabel);v.hovertemplate&&(o.namelength=-1),n(T,v,t,o)}},10624:function(U,F,e){var d=e(3400);F.getSubplot=function(g){return g.subplot||g.xaxis+g.yaxis||g.geo},F.isTraceInSubplots=function(g,r){if(g.type==="splom"){for(var t=g.xaxes||[],o=g.yaxes||[],i=0;i<t.length;i++)for(var f=0;f<o.length;f++)if(r.indexOf(t[i]+o[f])!==-1)return!0;return!1}return r.indexOf(F.getSubplot(g))!==-1},F.flat=function(g,r){for(var t=new Array(g.length),o=0;o<g.length;o++)t[o]=r;return t},F.p2c=function(g,r){for(var t=new Array(g.length),o=0;o<g.length;o++)t[o]=g[o].p2c(r);return t},F.getDistanceFunction=function(g,r,t,o){return g==="closest"?o||F.quadrature(r,t):g.charAt(0)==="x"?r:t},F.getClosest=function(g,r,t){if(t.index!==!1)t.index>=0&&t.index<g.length?t.distance=0:t.index=!1;else for(var o=0;o<g.length;o++){var i=r(g[o]);i<=t.distance&&(t.index=o,t.distance=i)}return t},F.inbox=function(g,r,t){return g*r<0||g===0?t:1/0},F.quadrature=function(g,r){return function(t){var o=g(t),i=r(t);return Math.sqrt(o*o+i*i)}},F.makeEventData=function(g,r,t){var o="index"in g?g.index:g.pointNumber,i={data:r._input,fullData:r,curveNumber:r.index,pointNumber:o};if(r._indexToPoints){var f=r._indexToPoints[o];f.length===1?i.pointIndex=f[0]:i.pointIndices=f}else i.pointIndex=o;return r._module.eventData?i=r._module.eventData(i,g,r,t,o):("xVal"in g?i.x=g.xVal:"x"in g&&(i.x=g.x),"yVal"in g?i.y=g.yVal:"y"in g&&(i.y=g.y),g.xa&&(i.xaxis=g.xa),g.ya&&(i.yaxis=g.ya),g.zLabelVal!==void 0&&(i.z=g.zLabelVal)),F.appendArrayPointValue(i,r,o),i},F.appendArrayPointValue=function(g,r,t){var o=r._arrayAttrs;if(o)for(var i=0;i<o.length;i++){var f=o[i],u=n(f);if(g[u]===void 0){var l=d.nestedProperty(r,f).get(),m=E(l,t);m!==void 0&&(g[u]=m)}}},F.appendArrayMultiPointValues=function(g,r,t){var o=r._arrayAttrs;if(o)for(var i=0;i<o.length;i++){var f=o[i],u=n(f);if(g[u]===void 0){for(var l=d.nestedProperty(r,f).get(),m=new Array(t.length),h=0;h<t.length;h++)m[h]=E(l,t[h]);g[u]=m}}};var S={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function n(g){return S[g]||g}function E(g,r){if(Array.isArray(r)){if(Array.isArray(g)&&Array.isArray(g[r[0]]))return g[r[0]][r[1]]}else return g[r]}var T={x:!0,y:!0},v={"x unified":!0,"y unified":!0};F.isUnifiedHover=function(g){return typeof g!="string"?!1:!!v[g]},F.isXYhover=function(g){return typeof g!="string"?!1:!!T[g]}},83292:function(U,F,e){var d=e(33428),S=e(38248),n=e(49760),E=e(3400),T=E.pushUnique,v=E.strTranslate,g=E.strRotate,r=e(95924),t=e(72736),o=e(72213),i=e(43616),f=e(76308),u=e(86476),l=e(54460),m=e(24040),h=e(10624),w=e(92456),c=e(77864),a=e(31140),p=w.YANGLE,x=Math.PI*p/180,A=1/Math.sin(x),P=Math.cos(x),y=Math.sin(x),C=w.HOVERARROWSIZE,M=w.HOVERTEXTPAD,s={box:!0,ohlc:!0,violin:!0,candlestick:!0},_={scatter:!0,scattergl:!0,splom:!0};function b(j,Z){return j.distance-Z.distance}F.hover=function(Z,fe,re,ce){Z=E.getGraphDiv(Z);var xe=fe.target;E.throttle(Z._fullLayout._uid+w.HOVERID,w.HOVERMINTIME,function(){k(Z,fe,re,ce,xe)})},F.loneHover=function(Z,fe){var re=!0;Array.isArray(Z)||(re=!1,Z=[Z]);var ce=fe.gd,xe=K(ce),Te=ee(ce),we=Z.map(function(Ge){var rt=Ge._x0||Ge.x0||Ge.x||0,ot=Ge._x1||Ge.x1||Ge.x||0,$e=Ge._y0||Ge.y0||Ge.y||0,qe=Ge._y1||Ge.y1||Ge.y||0,ht=Ge.eventData;if(ht){var vt=Math.min(rt,ot),pt=Math.max(rt,ot),wt=Math.min($e,qe),Et=Math.max($e,qe),nt=Ge.trace;if(m.traceIs(nt,"gl3d")){var Fe=ce._fullLayout[nt.scene]._scene.container,We=Fe.offsetLeft,Ze=Fe.offsetTop;vt+=We,pt+=We,wt+=Ze,Et+=Ze}ht.bbox={x0:vt+Te,x1:pt+Te,y0:wt+xe,y1:Et+xe},fe.inOut_bbox&&fe.inOut_bbox.push(ht.bbox)}else ht=!1;return{color:Ge.color||f.defaultLine,x0:Ge.x0||Ge.x||0,x1:Ge.x1||Ge.x||0,y0:Ge.y0||Ge.y||0,y1:Ge.y1||Ge.y||0,xLabel:Ge.xLabel,yLabel:Ge.yLabel,zLabel:Ge.zLabel,text:Ge.text,name:Ge.name,idealAlign:Ge.idealAlign,borderColor:Ge.borderColor,fontFamily:Ge.fontFamily,fontSize:Ge.fontSize,fontColor:Ge.fontColor,fontWeight:Ge.fontWeight,fontStyle:Ge.fontStyle,fontVariant:Ge.fontVariant,nameLength:Ge.nameLength,textAlign:Ge.textAlign,trace:Ge.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ge.hovertemplate||!1,hovertemplateLabels:Ge.hovertemplateLabels||!1,eventData:ht}}),_e=!1,ke=O(we,{gd:ce,hovermode:"closest",rotateLabels:_e,bgColor:fe.bgColor||f.background,container:d.select(fe.container),outerContainer:fe.outerContainer||fe.container}),Ne=ke.hoverLabels,Ee=5,ze=0,Ce=0;Ne.sort(function(Ge,rt){return Ge.y0-rt.y0}).each(function(Ge,rt){var ot=Ge.y0-Ge.by/2;ot-Ee<ze?Ge.offset=ze-ot+Ee:Ge.offset=0,ze=ot+Ge.by+Ge.offset,rt===fe.anchorIndex&&(Ce=Ge.offset)}).each(function(Ge){Ge.offset-=Ce});var Oe=ce._fullLayout._invScaleX,Le=ce._fullLayout._invScaleY;return X(Ne,_e,Oe,Le),re?Ne:Ne.node()};function k(j,Z,fe,re,ce){fe||(fe="xy");var xe=Array.isArray(fe)?fe:[fe],Te,we=j._fullLayout,_e=we.hoversubplots,ke=we._plots||[],Ne=ke[fe],Ee=we._has("cartesian"),ze=Z.hovermode||we.hovermode,Ce=(ze||"").charAt(0)==="x",Oe=(ze||"").charAt(0)==="y",Le,Ge;if(Ee&&(Ce||Oe)&&_e==="axis"){for(var rt=xe.length,ot=0;ot<rt;ot++)if(Te=xe[ot],ke[Te]){Le=l.getFromId(j,Te,"x"),Ge=l.getFromId(j,Te,"y");var $e=(Ce?Le:Ge)._subplotsWith;if($e&&$e.length)for(var qe=0;qe<$e.length;qe++)T(xe,$e[qe])}}if(Ne&&_e!=="single"){var ht=Ne.overlays.map(function(Hn){return Hn.id});xe=xe.concat(ht)}for(var vt=xe.length,pt=new Array(vt),wt=new Array(vt),Et=!1,nt=0;nt<vt;nt++)if(Te=xe[nt],ke[Te])Et=!0,pt[nt]=ke[Te].xaxis,wt[nt]=ke[Te].yaxis;else if(we[Te]&&we[Te]._subplot){var Fe=we[Te]._subplot;pt[nt]=Fe.xaxis,wt[nt]=Fe.yaxis}else{E.warn("Unrecognized subplot: "+Te);return}if(ze&&!Et&&(ze="closest"),["x","y","closest","x unified","y unified"].indexOf(ze)===-1||!j.calcdata||j.querySelector(".zoombox")||j._dragging)return u.unhoverRaw(j,Z);var We=we.hoverdistance;We===-1&&(We=1/0);var Ze=we.spikedistance;Ze===-1&&(Ze=1/0);var Ye=[],Ie=[],De,je,Re,pe,be,Ue,et,st,lt,Gt,Zt,Tt,It,Xt={hLinePoint:null,vLinePoint:null},gr=!1;if(Array.isArray(Z))for(ze="array",Re=0;Re<Z.length;Re++)be=j.calcdata[Z[Re].curveNumber||0],be&&(Ue=be[0].trace,be[0].trace.hoverinfo!=="skip"&&(Ie.push(be),Ue.orientation==="h"&&(gr=!0)));else{var gt=j.calcdata.slice();for(gt.sort(function(Hn,Kn){var yr=Hn[0].trace.zorder||0,qr=Kn[0].trace.zorder||0;return yr-qr}),pe=0;pe<gt.length;pe++)be=gt[pe],Ue=be[0].trace,Ue.hoverinfo!=="skip"&&h.isTraceInSubplots(Ue,xe)&&(Ie.push(be),Ue.orientation==="h"&&(gr=!0));var jt=!ce,Qt,mr;if(jt)"xpx"in Z?Qt=Z.xpx:Qt=pt[0]._length/2,"ypx"in Z?mr=Z.ypx:mr=wt[0]._length/2;else{if(r.triggerHandler(j,"plotly_beforehover",Z)===!1)return;var or=ce.getBoundingClientRect();Qt=Z.clientX-or.left,mr=Z.clientY-or.top,we._calcInverseTransform(j);var mt=E.apply3DTransform(we._invTransform)(Qt,mr);if(Qt=mt[0],mr=mt[1],Qt<0||Qt>pt[0]._length||mr<0||mr>wt[0]._length)return u.unhoverRaw(j,Z)}if(Z.pointerX=Qt+pt[0]._offset,Z.pointerY=mr+wt[0]._offset,"xval"in Z?De=h.flat(xe,Z.xval):De=h.p2c(pt,Qt),"yval"in Z?je=h.flat(xe,Z.yval):je=h.p2c(wt,mr),!S(De[0])||!S(je[0]))return E.warn("Fx.hover failed",Z,j),u.unhoverRaw(j,Z)}var ut=1/0;function bt(Hn,Kn){for(pe=0;pe<Ie.length;pe++)if(be=Ie[pe],!(!be||!be[0]||!be[0].trace)&&(Ue=be[0].trace,!(Ue.visible!==!0||Ue._length===0)&&["carpet","contourcarpet"].indexOf(Ue._module.name)===-1)){if(lt=ze,h.isUnifiedHover(lt)&&(lt=lt.charAt(0)),Ue.type==="splom"?(st=0,et=xe[st]):(et=h.getSubplot(Ue),st=xe.indexOf(et)),Tt={cd:be,trace:Ue,xa:pt[st],ya:wt[st],maxHoverDistance:We,maxSpikeDistance:Ze,index:!1,distance:Math.min(ut,We),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:f.defaultLine,name:Ue.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},we[et]&&(Tt.subplot=we[et]._subplot),we._splomScenes&&we._splomScenes[Ue.uid]&&(Tt.scene=we._splomScenes[Ue.uid]),lt==="array"){var yr=Z[pe];"pointNumber"in yr?(Tt.index=yr.pointNumber,lt="closest"):(lt="","xval"in yr&&(Gt=yr.xval,lt="x"),"yval"in yr&&(Zt=yr.yval,lt=lt?"closest":"y"))}else Hn!==void 0&&Kn!==void 0?(Gt=Hn,Zt=Kn):(Gt=De[st],Zt=je[st]);if(It=Ye.length,We!==0)if(Ue._module&&Ue._module.hoverPoints){var qr=Ue._module.hoverPoints(Tt,Gt,Zt,lt,{finiteRange:!0,hoverLayer:we._hoverlayer,hoversubplots:_e,gd:j});if(qr)for(var Kr,hn=0;hn<qr.length;hn++)Kr=qr[hn],S(Kr.x0)&&S(Kr.y0)&&Ye.push($(Kr,ze))}else E.log("Unrecognized trace type in hover:",Ue);if(ze==="closest"&&Ye.length>It&&(Ye.splice(0,It),ut=Ye[0].distance),Ee&&Ze!==0&&Ye.length===0){Tt.distance=Ze,Tt.index=!1;var zn=Ue._module.hoverPoints(Tt,Gt,Zt,"closest",{hoverLayer:we._hoverlayer});if(zn&&(zn=zn.filter(function(Ri){return Ri.spikeDistance<=Ze})),zn&&zn.length){var xn,Tn=zn.filter(function(Ri){return Ri.xa.showspikes&&Ri.xa.spikesnap!=="hovered data"});if(Tn.length){var On=Tn[0];S(On.x0)&&S(On.y0)&&(xn=Pt(On),(!Xt.vLinePoint||Xt.vLinePoint.spikeDistance>xn.spikeDistance)&&(Xt.vLinePoint=xn))}var Jn=zn.filter(function(Ri){return Ri.ya.showspikes&&Ri.ya.spikesnap!=="hovered data"});if(Jn.length){var hi=Jn[0];S(hi.x0)&&S(hi.y0)&&(xn=Pt(hi),(!Xt.hLinePoint||Xt.hLinePoint.spikeDistance>xn.spikeDistance)&&(Xt.hLinePoint=xn))}}}}}bt();function St(Hn,Kn,yr){for(var qr=null,Kr=1/0,hn,zn=0;zn<Hn.length;zn++)Le&&Le._id!==Hn[zn].xa._id||Ge&&Ge._id!==Hn[zn].ya._id||(hn=Hn[zn].spikeDistance,yr&&zn===0&&(hn=-1/0),hn<=Kr&&hn<=Kn&&(qr=Hn[zn],Kr=hn));return qr}function Pt(Hn){return Hn?{xa:Hn.xa,ya:Hn.ya,x:Hn.xSpike!==void 0?Hn.xSpike:(Hn.x0+Hn.x1)/2,y:Hn.ySpike!==void 0?Hn.ySpike:(Hn.y0+Hn.y1)/2,distance:Hn.distance,spikeDistance:Hn.spikeDistance,curveNumber:Hn.trace.index,color:Hn.color,pointNumber:Hn.index}:null}var Ht={fullLayout:we,container:we._hoverlayer,event:Z};j._spikepoints;var Bt={vLinePoint:Xt.vLinePoint,hLinePoint:Xt.hLinePoint};j._spikepoints=Bt;var Nt=function(){var Hn=Ye.filter(function(yr){return Le&&Le._id===yr.xa._id&&Ge&&Ge._id===yr.ya._id}),Kn=Ye.filter(function(yr){return!(Le&&Le._id===yr.xa._id&&Ge&&Ge._id===yr.ya._id)});Hn.sort(b),Kn.sort(b),Ye=Hn.concat(Kn),Ye=J(Ye,ze)};Nt();var Kt=ze.charAt(0),fr=(Kt==="x"||Kt==="y")&&Ye[0]&&_[Ye[0].trace.type];if(Ee&&Ze!==0&&Ye.length!==0){var cr=Ye.filter(function(Hn){return Hn.ya.showspikes}),dr=St(cr,Ze,fr);Xt.hLinePoint=Pt(dr);var Xe=Ye.filter(function(Hn){return Hn.xa.showspikes}),He=St(Xe,Ze,fr);Xt.vLinePoint=Pt(He)}if(Ye.length===0){var zt=u.unhoverRaw(j,Z);return Ee&&(Xt.hLinePoint!==null||Xt.vLinePoint!==null)&&ue()&&ne(j,Xt,Ht),zt}if(Ee&&ue()&&ne(j,Xt,Ht),h.isXYhover(lt)&&Ye[0].length!==0&&Ye[0].trace.type!=="splom"){var Rt=Ye[0];s[Rt.trace.type]?Ye=Ye.filter(function(Hn){return Hn.trace.index===Rt.trace.index}):Ye=[Rt];var Jt=Ye.length,sr=ie("x",Rt,we),ur=ie("y",Rt,we);bt(sr,ur);var er=[],Ft={},ir=0,hr=function(Hn){var Kn=s[Hn.trace.type]?D(Hn):Hn.trace.index;if(!Ft[Kn])ir++,Ft[Kn]=ir,er.push(Hn);else{var yr=Ft[Kn]-1,qr=er[yr];yr>0&&Math.abs(Hn.distance)<Math.abs(qr.distance)&&(er[yr]=Hn)}},xr;for(xr=0;xr<Jt;xr++)hr(Ye[xr]);for(xr=Ye.length-1;xr>Jt-1;xr--)hr(Ye[xr]);Ye=er,Nt()}var vr=j._hoverdata,Vr=[],_r=K(j),Rr=ee(j);for(Re=0;Re<Ye.length;Re++){var nn=Ye[Re],en=h.makeEventData(nn,nn.trace,nn.cd);if(nn.hovertemplate!==!1){var An=!1;nn.cd[nn.index]&&nn.cd[nn.index].ht&&(An=nn.cd[nn.index].ht),nn.hovertemplate=An||nn.trace.hovertemplate||!1}if(nn.xa&&nn.ya){var wn=nn.x0+nn.xa._offset,Tr=nn.x1+nn.xa._offset,kr=nn.y0+nn.ya._offset,Wr=nn.y1+nn.ya._offset,zr=Math.min(wn,Tr),sn=Math.max(wn,Tr),un=Math.min(kr,Wr),Mn=Math.max(kr,Wr);en.bbox={x0:zr+Rr,x1:sn+Rr,y0:un+_r,y1:Mn+_r}}nn.eventData=[en],Vr.push(en)}j._hoverdata=Vr;var Ln=ze==="y"&&(Ie.length>1||Ye.length>1)||ze==="closest"&&gr&&Ye.length>1,Un=f.combine(we.plot_bgcolor||f.background,we.paper_bgcolor),ai=O(Ye,{gd:j,hovermode:ze,rotateLabels:Ln,bgColor:Un,container:we._hoverlayer,outerContainer:we._paper.node(),commonLabelOpts:we.hoverlabel,hoverdistance:we.hoverdistance}),yi=ai.hoverLabels;if(h.isUnifiedHover(ze)||(B(yi,Ln,we,ai.commonLabelBoundingBox),X(yi,Ln,we._invScaleX,we._invScaleY)),ce&&ce.tagName){var bi=m.getComponentMethod("annotations","hasClickToShow")(j,Vr);o(d.select(ce),bi?"pointer":"")}!ce||re||!q(j,Z,vr)||(vr&&j.emit("plotly_unhover",{event:Z,points:vr}),j.emit("plotly_hover",{event:Z,points:j._hoverdata,xaxes:pt,yaxes:wt,xvals:De,yvals:je}))}function D(j){return[j.trace.index,j.index,j.x0,j.y0,j.name,j.attr,j.xa?j.xa._id:"",j.ya?j.ya._id:""].join(",")}var V=/<extra>([\s\S]*)<\/extra>/;function O(j,Z){var fe=Z.gd,re=fe._fullLayout,ce=Z.hovermode,xe=Z.rotateLabels,Te=Z.bgColor,we=Z.container,_e=Z.outerContainer,ke=Z.commonLabelOpts||{};if(j.length===0)return[[]];var Ne=Z.fontFamily||w.HOVERFONT,Ee=Z.fontSize||w.HOVERFONTSIZE,ze=Z.fontWeight||re.font.weight,Ce=Z.fontStyle||re.font.style,Oe=Z.fontVariant||re.font.variant,Le=Z.fontTextcase||re.font.textcase,Ge=Z.fontLineposition||re.font.lineposition,rt=Z.fontShadow||re.font.shadow,ot=j[0],$e=ot.xa,qe=ot.ya,ht=ce.charAt(0),vt=ht+"Label",pt=ot[vt];if(pt===void 0&&$e.type==="multicategory")for(var wt=0;wt<j.length&&(pt=j[wt][vt],pt===void 0);wt++);var Et=le(fe,_e),nt=Et.top,Fe=Et.width,We=Et.height,Ze=pt!==void 0&&ot.distance<=Z.hoverdistance&&(ce==="x"||ce==="y");if(Ze){var Ye=!0,Ie,De;for(Ie=0;Ie<j.length;Ie++)if(Ye&&j[Ie].zLabel===void 0&&(Ye=!1),De=j[Ie].hoverinfo||j[Ie].trace.hoverinfo,De){var je=Array.isArray(De)?De:De.split("+");if(je.indexOf("all")===-1&&je.indexOf(ce)===-1){Ze=!1;break}}Ye&&(Ze=!1)}var Re=we.selectAll("g.axistext").data(Ze?[0]:[]);Re.enter().append("g").classed("axistext",!0),Re.exit().remove();var pe={minX:0,maxX:0,minY:0,maxY:0};if(Re.each(function(){var He=d.select(this),zt=E.ensureSingle(He,"path","",function(sn){sn.style({"stroke-width":"1px"})}),Rt=E.ensureSingle(He,"text","",function(sn){sn.attr("data-notex",1)}),Jt=ke.bgcolor||f.defaultLine,sr=ke.bordercolor||f.contrast(Jt),ur=f.contrast(Jt),er=ke.font,Ft={weight:er.weight||ze,style:er.style||Ce,variant:er.variant||Oe,textcase:er.textcase||Le,lineposition:er.lineposition||Ge,shadow:er.shadow||rt,family:er.family||Ne,size:er.size||Ee,color:er.color||ur};zt.style({fill:Jt,stroke:sr}),Rt.text(pt).call(i.font,Ft).call(t.positionText,0,0).call(t.convertToTspans,fe),He.attr("transform","");var ir=le(fe,Rt.node()),hr,xr;if(ce==="x"){var vr=$e.side==="top"?"-":"";Rt.attr("text-anchor","middle").call(t.positionText,0,$e.side==="top"?nt-ir.bottom-C-M:nt-ir.top+C+M),hr=$e._offset+(ot.x0+ot.x1)/2,xr=qe._offset+($e.side==="top"?0:qe._length);var Vr=ir.width/2+M,_r=hr;hr<Vr?_r=Vr:hr>re.width-Vr&&(_r=re.width-Vr),zt.attr("d","M"+(hr-_r)+",0L"+(hr-_r+C)+","+vr+C+"H"+Vr+"v"+vr+(M*2+ir.height)+"H"+-Vr+"V"+vr+C+"H"+(hr-_r-C)+"Z"),hr=_r,pe.minX=hr-Vr,pe.maxX=hr+Vr,$e.side==="top"?(pe.minY=xr-(M*2+ir.height),pe.maxY=xr-M):(pe.minY=xr+M,pe.maxY=xr+(M*2+ir.height))}else{var Rr,nn,en;qe.side==="right"?(Rr="start",nn=1,en="",hr=$e._offset+$e._length):(Rr="end",nn=-1,en="-",hr=$e._offset),xr=qe._offset+(ot.y0+ot.y1)/2,Rt.attr("text-anchor",Rr),zt.attr("d","M0,0L"+en+C+","+C+"V"+(M+ir.height/2)+"h"+en+(M*2+ir.width)+"V-"+(M+ir.height/2)+"H"+en+C+"V-"+C+"Z"),pe.minY=xr-(M+ir.height/2),pe.maxY=xr+(M+ir.height/2),qe.side==="right"?(pe.minX=hr+C,pe.maxX=hr+C+(M*2+ir.width)):(pe.minX=hr-C-(M*2+ir.width),pe.maxX=hr-C);var An=ir.height/2,wn=nt-ir.top-An,Tr="clip"+re._uid+"commonlabel"+qe._id,kr;if(hr<ir.width+2*M+C){kr="M-"+(C+M)+"-"+An+"h-"+(ir.width-M)+"V"+An+"h"+(ir.width-M)+"Z";var Wr=ir.width-hr+M;t.positionText(Rt,Wr,wn),Rr==="end"&&Rt.selectAll("tspan").each(function(){var sn=d.select(this),un=i.tester.append("text").text(sn.text()).call(i.font,Ft),Mn=le(fe,un.node());Math.round(Mn.width)<Math.round(ir.width)&&sn.attr("x",Wr-Mn.width),un.remove()})}else t.positionText(Rt,nn*(M+C),wn),kr=null;var zr=re._topclips.selectAll("#"+Tr).data(kr?[0]:[]);zr.enter().append("clipPath").attr("id",Tr).append("path"),zr.exit().remove(),zr.select("path").attr("d",kr),i.setClipUrl(Rt,kr?Tr:null,fe)}He.attr("transform",v(hr,xr))}),h.isUnifiedHover(ce)){we.selectAll("g.hovertext").remove();var be=j.filter(function(He){return He.hoverinfo!=="none"});if(be.length===0)return[];var Ue=re.hoverlabel,et=Ue.font,st={showlegend:!0,legend:{title:{text:pt,font:et},font:et,bgcolor:Ue.bgcolor,bordercolor:Ue.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:re.legend?re.legend.traceorder:void 0,orientation:"v"}},lt={font:et};c(st,lt,fe._fullData);var Gt=lt.legend;Gt.entries=[];for(var Zt=0;Zt<be.length;Zt++){var Tt=be[Zt];if(Tt.hoverinfo!=="none"){var It=N(Tt,!0,ce,re,pt),Xt=It[0],gr=It[1];Tt.name=gr,gr!==""?Tt.text=gr+" : "+Xt:Tt.text=Xt;var gt=Tt.cd[Tt.index];gt&&(gt.mc&&(Tt.mc=gt.mc),gt.mcc&&(Tt.mc=gt.mcc),gt.mlc&&(Tt.mlc=gt.mlc),gt.mlcc&&(Tt.mlc=gt.mlcc),gt.mlw&&(Tt.mlw=gt.mlw),gt.mrc&&(Tt.mrc=gt.mrc),gt.dir&&(Tt.dir=gt.dir)),Tt._distinct=!0,Gt.entries.push([Tt])}}Gt.entries.sort(function(He,zt){return He[0].trace.index-zt[0].trace.index}),Gt.layer=we,Gt._inHover=!0,Gt._groupTitleFont=Ue.grouptitlefont,a(fe,Gt);var jt=we.select("g.legend"),Qt=le(fe,jt.node()),mr=Qt.width+2*M,or=Qt.height+2*M,mt=be[0],ut=(mt.x0+mt.x1)/2,bt=(mt.y0+mt.y1)/2,St=!(m.traceIs(mt.trace,"bar-like")||m.traceIs(mt.trace,"box-violin")),Pt,Ht;ht==="y"?St?(Ht=bt-M,Pt=bt+M):(Ht=Math.min.apply(null,be.map(function(He){return Math.min(He.y0,He.y1)})),Pt=Math.max.apply(null,be.map(function(He){return Math.max(He.y0,He.y1)}))):Ht=Pt=E.mean(be.map(function(He){return(He.y0+He.y1)/2}))-or/2;var Bt,Nt;ht==="x"?St?(Bt=ut+M,Nt=ut-M):(Bt=Math.max.apply(null,be.map(function(He){return Math.max(He.x0,He.x1)})),Nt=Math.min.apply(null,be.map(function(He){return Math.min(He.x0,He.x1)}))):Bt=Nt=E.mean(be.map(function(He){return(He.x0+He.x1)/2}))-mr/2;var Kt=$e._offset,fr=qe._offset;Pt+=fr,Bt+=Kt,Nt+=Kt-mr,Ht+=fr-or;var cr,dr;return Bt+mr<Fe&&Bt>=0?cr=Bt:Nt+mr<Fe&&Nt>=0?cr=Nt:Kt+mr<Fe?cr=Kt:Bt-ut<ut-Nt+mr?cr=Fe-mr:cr=0,cr+=M,Pt+or<We&&Pt>=0?dr=Pt:Ht+or<We&&Ht>=0?dr=Ht:fr+or<We?dr=fr:Pt-bt<bt-Ht+or?dr=We-or:dr=0,dr+=M,jt.attr("transform",v(cr-1,dr-1)),jt}var Xe=we.selectAll("g.hovertext").data(j,function(He){return D(He)});return Xe.enter().append("g").classed("hovertext",!0).each(function(){var He=d.select(this);He.append("rect").call(f.fill,f.addOpacity(Te,.8)),He.append("text").classed("name",!0),He.append("path").style("stroke-width","1px"),He.append("text").classed("nums",!0).call(i.font,{weight:ze,style:Ce,variant:Oe,textcase:Le,lineposition:Ge,shadow:rt,family:Ne,size:Ee})}),Xe.exit().remove(),Xe.each(function(He){var zt=d.select(this).attr("transform",""),Rt=He.color;Array.isArray(Rt)&&(Rt=Rt[He.eventData[0].pointNumber]);var Jt=He.bgcolor||Rt,sr=f.combine(f.opacity(Jt)?Jt:f.defaultLine,Te),ur=f.combine(f.opacity(Rt)?Rt:f.defaultLine,Te),er=He.borderColor||f.contrast(sr),Ft=N(He,Ze,ce,re,pt,zt),ir=Ft[0],hr=Ft[1],xr=zt.select("text.nums").call(i.font,{family:He.fontFamily||Ne,size:He.fontSize||Ee,color:He.fontColor||er,weight:He.fontWeight||ze,style:He.fontStyle||Ce,variant:He.fontVariant||Oe,textcase:He.fontTextcase||Le,lineposition:He.fontLineposition||Ge,shadow:He.fontShadow||rt}).text(ir).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,fe),vr=zt.select("text.name"),Vr=0,_r=0;if(hr&&hr!==ir){vr.call(i.font,{family:He.fontFamily||Ne,size:He.fontSize||Ee,color:ur,weight:He.fontWeight||ze,style:He.fontStyle||Ce,variant:He.fontVariant||Oe,textcase:He.fontTextcase||Le,lineposition:He.fontLineposition||Ge,shadow:He.fontShadow||rt}).text(hr).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,fe);var Rr=le(fe,vr.node());Vr=Rr.width+2*M,_r=Rr.height+2*M}else vr.remove(),zt.select("rect").remove();zt.select("path").style({fill:sr,stroke:er});var nn=He.xa._offset+(He.x0+He.x1)/2,en=He.ya._offset+(He.y0+He.y1)/2,An=Math.abs(He.x1-He.x0),wn=Math.abs(He.y1-He.y0),Tr=le(fe,xr.node()),kr=Tr.width/re._invScaleX,Wr=Tr.height/re._invScaleY;He.ty0=(nt-Tr.top)/re._invScaleY,He.bx=kr+2*M,He.by=Math.max(Wr+2*M,_r),He.anchor="start",He.txwidth=kr,He.tx2width=Vr,He.offset=0;var zr=(kr+C+M+Vr)*re._invScaleX,sn,un;if(xe)He.pos=nn,sn=en+wn/2+zr<=We,un=en-wn/2-zr>=0,(He.idealAlign==="top"||!sn)&&un?(en-=wn/2,He.anchor="end"):sn?(en+=wn/2,He.anchor="start"):He.anchor="middle",He.crossPos=en;else{if(He.pos=en,sn=nn+An/2+zr<=Fe,un=nn-An/2-zr>=0,(He.idealAlign==="left"||!sn)&&un)nn-=An/2,He.anchor="end";else if(sn)nn+=An/2,He.anchor="start";else{He.anchor="middle";var Mn=zr/2,Ln=nn+Mn-Fe,Un=nn-Mn;Ln>0&&(nn-=Ln),Un<0&&(nn+=-Un)}He.crossPos=nn}xr.attr("text-anchor",He.anchor),Vr&&vr.attr("text-anchor",He.anchor),zt.attr("transform",v(nn,en)+(xe?g(p):""))}),{hoverLabels:Xe,commonLabelBoundingBox:pe}}function N(j,Z,fe,re,ce,xe){var Te="",we="";j.nameOverride!==void 0&&(j.name=j.nameOverride),j.name&&(j.trace._meta&&(j.name=E.templateString(j.name,j.trace._meta)),Te=te(j.name,j.nameLength));var _e=fe.charAt(0),ke=_e==="x"?"y":"x";j.zLabel!==void 0?(j.xLabel!==void 0&&(we+="x: "+j.xLabel+"<br>"),j.yLabel!==void 0&&(we+="y: "+j.yLabel+"<br>"),j.trace.type!=="choropleth"&&j.trace.type!=="choroplethmapbox"&&(we+=(we?"z: ":"")+j.zLabel)):Z&&j[_e+"Label"]===ce?we=j[ke+"Label"]||"":j.xLabel===void 0?j.yLabel!==void 0&&j.trace.type!=="scattercarpet"&&(we=j.yLabel):j.yLabel===void 0?we=j.xLabel:we="("+j.xLabel+", "+j.yLabel+")",(j.text||j.text===0)&&!Array.isArray(j.text)&&(we+=(we?"<br>":"")+j.text),j.extraText!==void 0&&(we+=(we?"<br>":"")+j.extraText),xe&&we===""&&!j.hovertemplate&&(Te===""&&xe.remove(),we=Te);var Ne=j.hovertemplate||!1;if(Ne){var Ee=j.hovertemplateLabels||j;j[_e+"Label"]!==ce&&(Ee[_e+"other"]=Ee[_e+"Val"],Ee[_e+"otherLabel"]=Ee[_e+"Label"]),we=E.hovertemplateString(Ne,Ee,re._d3locale,j.eventData[0]||{},j.trace._meta),we=we.replace(V,function(ze,Ce){return Te=te(Ce,j.nameLength),""})}return[we,Te]}function B(j,Z,fe,re){var ce=Z?"xa":"ya",xe=Z?"ya":"xa",Te=0,we=1,_e=j.size(),ke=new Array(_e),Ne=0,Ee=re.minX,ze=re.maxX,Ce=re.minY,Oe=re.maxY,Le=function(De){return De*fe._invScaleX},Ge=function(De){return De*fe._invScaleY};j.each(function(De){var je=De[ce],Re=De[xe],pe=je._id.charAt(0)==="x",be=je.range;Ne===0&&be&&be[0]>be[1]!==pe&&(we=-1);var Ue=0,et=pe?fe.width:fe.height;if(fe.hovermode==="x"||fe.hovermode==="y"){var st=z(De,Z),lt=De.anchor,Gt=lt==="end"?-1:1,Zt,Tt;if(lt==="middle")Zt=De.crossPos+(pe?Ge(st.y-De.by/2):Le(De.bx/2+De.tx2width/2)),Tt=Zt+(pe?Ge(De.by):Le(De.bx));else if(pe)Zt=De.crossPos+Ge(C+st.y)-Ge(De.by/2-C),Tt=Zt+Ge(De.by);else{var It=Le(Gt*C+st.x),Xt=It+Le(Gt*De.bx);Zt=De.crossPos+Math.min(It,Xt),Tt=De.crossPos+Math.max(It,Xt)}pe?Ce!==void 0&&Oe!==void 0&&Math.min(Tt,Oe)-Math.max(Zt,Ce)>1&&(Re.side==="left"?(Ue=Re._mainLinePosition,et=fe.width):et=Re._mainLinePosition):Ee!==void 0&&ze!==void 0&&Math.min(Tt,ze)-Math.max(Zt,Ee)>1&&(Re.side==="top"?(Ue=Re._mainLinePosition,et=fe.height):et=Re._mainLinePosition)}ke[Ne++]=[{datum:De,traceIndex:De.trace.index,dp:0,pos:De.pos,posref:De.posref,size:De.by*(pe?A:1)/2,pmin:Ue,pmax:et}]}),ke.sort(function(De,je){return De[0].posref-je[0].posref||we*(je[0].traceIndex-De[0].traceIndex)});var rt,ot,$e,qe,ht,vt,pt;function wt(De){var je=De[0],Re=De[De.length-1];if(ot=je.pmin-je.pos-je.dp+je.size,$e=Re.pos+Re.dp+Re.size-je.pmax,ot>.01){for(ht=De.length-1;ht>=0;ht--)De[ht].dp+=ot;rt=!1}if(!($e<.01)){if(ot<-.01){for(ht=De.length-1;ht>=0;ht--)De[ht].dp-=$e;rt=!1}if(rt){var pe=0;for(qe=0;qe<De.length;qe++)vt=De[qe],vt.pos+vt.dp+vt.size>je.pmax&&pe++;for(qe=De.length-1;qe>=0&&!(pe<=0);qe--)vt=De[qe],vt.pos>je.pmax-1&&(vt.del=!0,pe--);for(qe=0;qe<De.length&&!(pe<=0);qe++)if(vt=De[qe],vt.pos<je.pmin+1)for(vt.del=!0,pe--,$e=vt.size*2,ht=De.length-1;ht>=0;ht--)De[ht].dp-=$e;for(qe=De.length-1;qe>=0&&!(pe<=0);qe--)vt=De[qe],vt.pos+vt.dp+vt.size>je.pmax&&(vt.del=!0,pe--)}}}for(;!rt&&Te<=_e;){for(Te++,rt=!0,qe=0;qe<ke.length-1;){var Et=ke[qe],nt=ke[qe+1],Fe=Et[Et.length-1],We=nt[0];if(ot=Fe.pos+Fe.dp+Fe.size-We.pos-We.dp+We.size,ot>.01&&Fe.pmin===We.pmin&&Fe.pmax===We.pmax){for(ht=nt.length-1;ht>=0;ht--)nt[ht].dp+=ot;for(Et.push.apply(Et,nt),ke.splice(qe+1,1),pt=0,ht=Et.length-1;ht>=0;ht--)pt+=Et[ht].dp;for($e=pt/Et.length,ht=Et.length-1;ht>=0;ht--)Et[ht].dp-=$e;rt=!1}else qe++}ke.forEach(wt)}for(qe=ke.length-1;qe>=0;qe--){var Ze=ke[qe];for(ht=Ze.length-1;ht>=0;ht--){var Ye=Ze[ht],Ie=Ye.datum;Ie.offset=Ye.dp,Ie.del=Ye.del}}}function z(j,Z){var fe=0,re=j.offset;return Z&&(re*=-y,fe=j.offset*P),{x:fe,y:re}}function H(j){var Z={start:1,end:-1,middle:0}[j.anchor],fe=Z*(C+M),re=fe+Z*(j.txwidth+M),ce=j.anchor==="middle";return ce&&(fe-=j.tx2width/2,re+=j.txwidth/2+M),{alignShift:Z,textShiftX:fe,text2ShiftX:re}}function X(j,Z,fe,re){var ce=function(Te){return Te*fe},xe=function(Te){return Te*re};j.each(function(Te){var we=d.select(this);if(Te.del)return we.remove();var _e=we.select("text.nums"),ke=Te.anchor,Ne=ke==="end"?-1:1,Ee=H(Te),ze=z(Te,Z),Ce=ze.x,Oe=ze.y,Le=ke==="middle";we.select("path").attr("d",Le?"M-"+ce(Te.bx/2+Te.tx2width/2)+","+xe(Oe-Te.by/2)+"h"+ce(Te.bx)+"v"+xe(Te.by)+"h-"+ce(Te.bx)+"Z":"M0,0L"+ce(Ne*C+Ce)+","+xe(C+Oe)+"v"+xe(Te.by/2-C)+"h"+ce(Ne*Te.bx)+"v-"+xe(Te.by)+"H"+ce(Ne*C+Ce)+"V"+xe(Oe-C)+"Z");var Ge=Ce+Ee.textShiftX,rt=Oe+Te.ty0-Te.by/2+M,ot=Te.textAlign||"auto";ot!=="auto"&&(ot==="left"&&ke!=="start"?(_e.attr("text-anchor","start"),Ge=Le?-Te.bx/2-Te.tx2width/2+M:-Te.bx-M):ot==="right"&&ke!=="end"&&(_e.attr("text-anchor","end"),Ge=Le?Te.bx/2-Te.tx2width/2-M:Te.bx+M)),_e.call(t.positionText,ce(Ge),xe(rt)),Te.tx2width&&(we.select("text.name").call(t.positionText,ce(Ee.text2ShiftX+Ee.alignShift*M+Ce),xe(Oe+Te.ty0-Te.by/2+M)),we.select("rect").call(i.setRect,ce(Ee.text2ShiftX+(Ee.alignShift-1)*Te.tx2width/2+Ce),xe(Oe-Te.by/2-1),ce(Te.tx2width),xe(Te.by+2)))})}function $(j,Z){var fe=j.index,re=j.trace||{},ce=j.cd[0],xe=j.cd[fe]||{};function Te(ze){return ze||S(ze)&&ze===0}var we=Array.isArray(fe)?function(ze,Ce){var Oe=E.castOption(ce,fe,ze);return Te(Oe)?Oe:E.extractOption({},re,"",Ce)}:function(ze,Ce){return E.extractOption(xe,re,ze,Ce)};function _e(ze,Ce,Oe){var Le=we(Ce,Oe);Te(Le)&&(j[ze]=Le)}if(_e("hoverinfo","hi","hoverinfo"),_e("bgcolor","hbg","hoverlabel.bgcolor"),_e("borderColor","hbc","hoverlabel.bordercolor"),_e("fontFamily","htf","hoverlabel.font.family"),_e("fontSize","hts","hoverlabel.font.size"),_e("fontColor","htc","hoverlabel.font.color"),_e("fontWeight","htw","hoverlabel.font.weight"),_e("fontStyle","hty","hoverlabel.font.style"),_e("fontVariant","htv","hoverlabel.font.variant"),_e("nameLength","hnl","hoverlabel.namelength"),_e("textAlign","hta","hoverlabel.align"),j.posref=Z==="y"||Z==="closest"&&re.orientation==="h"?j.xa._offset+(j.x0+j.x1)/2:j.ya._offset+(j.y0+j.y1)/2,j.x0=E.constrain(j.x0,0,j.xa._length),j.x1=E.constrain(j.x1,0,j.xa._length),j.y0=E.constrain(j.y0,0,j.ya._length),j.y1=E.constrain(j.y1,0,j.ya._length),j.xLabelVal!==void 0&&(j.xLabel="xLabel"in j?j.xLabel:l.hoverLabelText(j.xa,j.xLabelVal,re.xhoverformat),j.xVal=j.xa.c2d(j.xLabelVal)),j.yLabelVal!==void 0&&(j.yLabel="yLabel"in j?j.yLabel:l.hoverLabelText(j.ya,j.yLabelVal,re.yhoverformat),j.yVal=j.ya.c2d(j.yLabelVal)),j.zLabelVal!==void 0&&j.zLabel===void 0&&(j.zLabel=String(j.zLabelVal)),!isNaN(j.xerr)&&!(j.xa.type==="log"&&j.xerr<=0)){var ke=l.tickText(j.xa,j.xa.c2l(j.xerr),"hover").text;j.xerrneg!==void 0?j.xLabel+=" +"+ke+" / -"+l.tickText(j.xa,j.xa.c2l(j.xerrneg),"hover").text:j.xLabel+="  "+ke,Z==="x"&&(j.distance+=1)}if(!isNaN(j.yerr)&&!(j.ya.type==="log"&&j.yerr<=0)){var Ne=l.tickText(j.ya,j.ya.c2l(j.yerr),"hover").text;j.yerrneg!==void 0?j.yLabel+=" +"+Ne+" / -"+l.tickText(j.ya,j.ya.c2l(j.yerrneg),"hover").text:j.yLabel+="  "+Ne,Z==="y"&&(j.distance+=1)}var Ee=j.hoverinfo||j.trace.hoverinfo;return Ee&&Ee!=="all"&&(Ee=Array.isArray(Ee)?Ee:Ee.split("+"),Ee.indexOf("x")===-1&&(j.xLabel=void 0),Ee.indexOf("y")===-1&&(j.yLabel=void 0),Ee.indexOf("z")===-1&&(j.zLabel=void 0),Ee.indexOf("text")===-1&&(j.text=void 0),Ee.indexOf("name")===-1&&(j.name=void 0)),j}function ne(j,Z,fe){var re=fe.container,ce=fe.fullLayout,xe=ce._size,Te=fe.event,we=!!Z.hLinePoint,_e=!!Z.vLinePoint,ke,Ne;if(re.selectAll(".spikeline").remove(),!!(_e||we)){var Ee=f.combine(ce.plot_bgcolor,ce.paper_bgcolor);if(we){var ze=Z.hLinePoint,Ce,Oe;ke=ze&&ze.xa,Ne=ze&&ze.ya;var Le=Ne.spikesnap;Le==="cursor"?(Ce=Te.pointerX,Oe=Te.pointerY):(Ce=ke._offset+ze.x,Oe=Ne._offset+ze.y);var Ge=n.readability(ze.color,Ee)<1.5?f.contrast(Ee):ze.color,rt=Ne.spikemode,ot=Ne.spikethickness,$e=Ne.spikecolor||Ge,qe=l.getPxPosition(j,Ne),ht,vt;if(rt.indexOf("toaxis")!==-1||rt.indexOf("across")!==-1){if(rt.indexOf("toaxis")!==-1&&(ht=qe,vt=Ce),rt.indexOf("across")!==-1){var pt=Ne._counterDomainMin,wt=Ne._counterDomainMax;Ne.anchor==="free"&&(pt=Math.min(pt,Ne.position),wt=Math.max(wt,Ne.position)),ht=xe.l+pt*xe.w,vt=xe.l+wt*xe.w}re.insert("line",":first-child").attr({x1:ht,x2:vt,y1:Oe,y2:Oe,"stroke-width":ot,stroke:$e,"stroke-dasharray":i.dashStyle(Ne.spikedash,ot)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:ht,x2:vt,y1:Oe,y2:Oe,"stroke-width":ot+2,stroke:Ee}).classed("spikeline",!0).classed("crisp",!0)}rt.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:qe+(Ne.side!=="right"?ot:-ot),cy:Oe,r:ot,fill:$e}).classed("spikeline",!0)}if(_e){var Et=Z.vLinePoint,nt,Fe;ke=Et&&Et.xa,Ne=Et&&Et.ya;var We=ke.spikesnap;We==="cursor"?(nt=Te.pointerX,Fe=Te.pointerY):(nt=ke._offset+Et.x,Fe=Ne._offset+Et.y);var Ze=n.readability(Et.color,Ee)<1.5?f.contrast(Ee):Et.color,Ye=ke.spikemode,Ie=ke.spikethickness,De=ke.spikecolor||Ze,je=l.getPxPosition(j,ke),Re,pe;if(Ye.indexOf("toaxis")!==-1||Ye.indexOf("across")!==-1){if(Ye.indexOf("toaxis")!==-1&&(Re=je,pe=Fe),Ye.indexOf("across")!==-1){var be=ke._counterDomainMin,Ue=ke._counterDomainMax;ke.anchor==="free"&&(be=Math.min(be,ke.position),Ue=Math.max(Ue,ke.position)),Re=xe.t+(1-Ue)*xe.h,pe=xe.t+(1-be)*xe.h}re.insert("line",":first-child").attr({x1:nt,x2:nt,y1:Re,y2:pe,"stroke-width":Ie,stroke:De,"stroke-dasharray":i.dashStyle(ke.spikedash,Ie)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:nt,x2:nt,y1:Re,y2:pe,"stroke-width":Ie+2,stroke:Ee}).classed("spikeline",!0).classed("crisp",!0)}Ye.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:nt,cy:je-(ke.side!=="top"?Ie:-Ie),r:Ie,fill:De}).classed("spikeline",!0)}}}function q(j,Z,fe){if(!fe||fe.length!==j._hoverdata.length)return!0;for(var re=fe.length-1;re>=0;re--){var ce=fe[re],xe=j._hoverdata[re];if(ce.curveNumber!==xe.curveNumber||String(ce.pointNumber)!==String(xe.pointNumber)||String(ce.pointNumbers)!==String(xe.pointNumbers))return!0}return!1}function ue(j,Z){return!0}function te(j,Z){return t.plainText(j||"",{len:Z,allowedTags:["br","sub","sup","b","i","em"]})}function J(j,Z){for(var fe=Z.charAt(0),re=[],ce=[],xe=[],Te=0;Te<j.length;Te++){var we=j[Te];m.traceIs(we.trace,"bar-like")||m.traceIs(we.trace,"box-violin")?xe.push(we):we.trace[fe+"period"]?ce.push(we):re.push(we)}return re.concat(ce).concat(xe)}function ie(j,Z,fe){var re=Z[j+"a"],ce=Z[j+"Val"],xe=Z.cd[0];if(re.type==="category"||re.type==="multicategory")ce=re._categoriesMap[ce];else if(re.type==="date"){var Te=Z.trace[j+"periodalignment"];if(Te){var we=Z.cd[Z.index],_e=we[j+"Start"];_e===void 0&&(_e=we[j]);var ke=we[j+"End"];ke===void 0&&(ke=we[j]);var Ne=ke-_e;Te==="end"?ce+=Ne:Te==="middle"&&(ce+=Ne/2)}ce=re.d2c(ce)}return xe&&xe.t&&xe.t.posLetter===re._id&&(fe.boxmode==="group"||fe.violinmode==="group")&&(ce+=xe.t.dPos),ce}function K(j){return j.offsetTop+j.clientTop}function ee(j){return j.offsetLeft+j.clientLeft}function le(j,Z){var fe=j._fullLayout,re=Z.getBoundingClientRect(),ce=re.left,xe=re.top,Te=ce+re.width,we=xe+re.height,_e=E.apply3DTransform(fe._invTransform)(ce,xe),ke=E.apply3DTransform(fe._invTransform)(Te,we),Ne=_e[0],Ee=_e[1],ze=ke[0],Ce=ke[1];return{x:Ne,y:Ee,width:ze-Ne,height:Ce-Ee,top:Math.min(Ee,Ce),left:Math.min(Ne,ze),right:Math.max(Ne,ze),bottom:Math.max(Ee,Ce)}}},16132:function(U,F,e){var d=e(3400),S=e(76308),n=e(10624).isUnifiedHover;U.exports=function(T,v,g,r){r=r||{};var t=v.legend;function o(i){r.font[i]||(r.font[i]=t?v.legend.font[i]:v.font[i])}v&&n(v.hovermode)&&(r.font||(r.font={}),o("size"),o("family"),o("color"),o("weight"),o("style"),o("variant"),t?(r.bgcolor||(r.bgcolor=S.combine(v.legend.bgcolor,v.paper_bgcolor)),r.bordercolor||(r.bordercolor=v.legend.bordercolor)):r.bgcolor||(r.bgcolor=v.paper_bgcolor)),g("hoverlabel.bgcolor",r.bgcolor),g("hoverlabel.bordercolor",r.bordercolor),g("hoverlabel.namelength",r.namelength),d.coerceFont(g,"hoverlabel.font",r.font),g("hoverlabel.align",r.align)}},41008:function(U,F,e){var d=e(3400),S=e(65460);U.exports=function(E,T){function v(g,r){return T[g]!==void 0?T[g]:d.coerce(E,T,S,g,r)}return v("clickmode"),v("hoversubplots"),v("hovermode")}},93024:function(U,F,e){var d=e(33428),S=e(3400),n=e(86476),E=e(10624),T=e(65460),v=e(83292);U.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:T},attributes:e(55756),layoutAttributes:T,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:E.getDistanceFunction,getClosest:E.getClosest,inbox:E.inbox,quadrature:E.quadrature,appendArrayPointValue:E.appendArrayPointValue,castHoverOption:r,castHoverinfo:t,hover:v.hover,unhover:n.unhover,loneHover:v.loneHover,loneUnhover:g,click:e(62376)};function g(o){var i=S.isD3Selection(o)?o:d.select(o);i.selectAll("g.hovertext").remove(),i.selectAll(".spikeline").remove()}function r(o,i,f){return S.castOption(o,i,"hoverlabel."+f)}function t(o,i,f){function u(l){return S.coerceHoverinfo({hoverinfo:l},{_module:o._module},i)}return S.castOption(o,f,"hoverinfo",u)}},65460:function(U,F,e){var d=e(92456),S=e(25376),n=S({editType:"none"});n.family.dflt=d.HOVERFONT,n.size.dflt=d.HOVERFONTSIZE,U.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:n,grouptitlefont:S({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(U,F,e){var d=e(3400),S=e(65460),n=e(41008),E=e(16132);U.exports=function(v,g){function r(l,m){return d.coerce(v,g,S,l,m)}var t=n(v,g);t&&(r("hoverdistance"),r("spikedistance"));var o=r("dragmode");o==="select"&&r("selectdirection");var i=g._has("mapbox"),f=g._has("geo"),u=g._basePlotModules.length;g.dragmode==="zoom"&&((i||f)&&u===1||i&&f&&u===2)&&(g.dragmode="pan"),E(v,g,r),d.coerceFont(r,"hoverlabel.grouptitlefont",g.hoverlabel.font)}},81976:function(U,F,e){var d=e(3400),S=e(16132),n=e(65460);U.exports=function(T,v){function g(r,t){return d.coerce(T,v,n,r,t)}S(T,v,g)}},12704:function(U,F,e){var d=e(3400),S=e(53756).counter,n=e(86968).u,E=e(33816).idRegex,T=e(31780),v={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[S("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:n({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function g(f,u,l){var m=u[l+"axes"],h=Object.keys((f._splomAxes||{})[l]||{});if(Array.isArray(m))return m;if(h.length)return h}function r(f,u){var l=f.grid||{},m=g(u,l,"x"),h=g(u,l,"y");if(!f.grid&&!m&&!h)return;var w=Array.isArray(l.subplots)&&Array.isArray(l.subplots[0]),c=Array.isArray(m),a=Array.isArray(h),p=c&&m!==l.xaxes&&a&&h!==l.yaxes,x,A;w?(x=l.subplots.length,A=l.subplots[0].length):(a&&(x=h.length),c&&(A=m.length));var P=T.newContainer(u,"grid");function y(N,B){return d.coerce(l,P,v,N,B)}var C=y("rows",x),M=y("columns",A);if(!(C*M>1)){delete u.grid;return}if(!w&&!c&&!a){var s=y("pattern")==="independent";s&&(w=!0)}P._hasSubplotGrid=w;var _=y("roworder"),b=_==="top to bottom",k=w?.2:.1,D=w?.3:.1,V,O;p&&u._splomGridDflt&&(V=u._splomGridDflt.xside,O=u._splomGridDflt.yside),P._domains={x:t("x",y,k,V,M),y:t("y",y,D,O,C,b)}}function t(f,u,l,m,h,w){var c=u(f+"gap",l),a=u("domain."+f);u(f+"side",m);for(var p=new Array(h),x=a[0],A=(a[1]-x)/(h-c),P=A*(1-c),y=0;y<h;y++){var C=x+A*y;p[w?h-1-y:y]=[C,C+P]}return p}function o(f,u){var l=u.grid;if(!(!l||!l._domains)){var m=f.grid||{},h=u._subplots,w=l._hasSubplotGrid,c=l.rows,a=l.columns,p=l.pattern==="independent",x,A,P,y,C,M,s,_=l._axisMap={};if(w){var b=m.subplots||[];M=l.subplots=new Array(c);var k=1;for(x=0;x<c;x++){var D=M[x]=new Array(a),V=b[x]||[];for(A=0;A<a;A++)if(p?(C=k===1?"xy":"x"+k+"y"+k,k++):C=V[A],D[A]="",h.cartesian.indexOf(C)!==-1){if(s=C.indexOf("y"),P=C.slice(0,s),y=C.slice(s),_[P]!==void 0&&_[P]!==A||_[y]!==void 0&&_[y]!==x)continue;D[A]=C,_[P]=A,_[y]=x}}}else{var O=g(u,m,"x"),N=g(u,m,"y");l.xaxes=i(O,h.xaxis,a,_,"x"),l.yaxes=i(N,h.yaxis,c,_,"y")}var B=l._anchors={},z=l.roworder==="top to bottom";for(var H in _){var X=H.charAt(0),$=l[X+"side"],ne,q,ue;if($.length<8)B[H]="free";else if(X==="x"){if($.charAt(0)==="t"===z?(ne=0,q=1,ue=c):(ne=c-1,q=-1,ue=-1),w){var te=_[H];for(x=ne;x!==ue;x+=q)if(C=M[x][te],!!C&&(s=C.indexOf("y"),C.slice(0,s)===H)){B[H]=C.slice(s);break}}else for(x=ne;x!==ue;x+=q)if(y=l.yaxes[x],h.cartesian.indexOf(H+y)!==-1){B[H]=y;break}}else if($.charAt(0)==="l"?(ne=0,q=1,ue=a):(ne=a-1,q=-1,ue=-1),w){var J=_[H];for(x=ne;x!==ue;x+=q)if(C=M[J][x],!!C&&(s=C.indexOf("y"),C.slice(s)===H)){B[H]=C.slice(0,s);break}}else for(x=ne;x!==ue;x+=q)if(P=l.xaxes[x],h.cartesian.indexOf(P+H)!==-1){B[H]=P;break}}}}function i(f,u,l,m,h){var w=new Array(l),c;function a(p,x){u.indexOf(x)!==-1&&m[x]===void 0?(w[p]=x,m[x]=p):w[p]=""}if(Array.isArray(f))for(c=0;c<l;c++)a(c,f[c]);else for(a(0,h),c=1;c<l;c++)a(c,h+(c+1));return w}U.exports={moduleType:"component",name:"grid",schema:{layout:{grid:v}},layoutAttributes:v,sizeDefaults:r,contentDefaults:o}},65760:function(U,F,e){var d=e(33816),S=e(31780).templatedArray;e(36208),U.exports=S("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(U,F,e){var d=e(38248),S=e(36896);U.exports=function(E,T,v,g){T=T||{};var r=v==="log"&&T.type==="linear",t=v==="linear"&&T.type==="log";if(r||t){for(var o=E._fullLayout.images,i=T._id.charAt(0),f,u,l=0;l<o.length;l++)if(f=o[l],u="images["+l+"].",f[i+"ref"]===T._id){var m=f[i],h=f["size"+i],w=null,c=null;if(r){w=S(m,T.range);var a=h/Math.pow(10,w)/2;c=2*Math.log(a+Math.sqrt(1+a*a))/Math.LN10}else w=Math.pow(10,m),c=w*(Math.pow(10,h/2)-Math.pow(10,-h/2));d(w)?d(c)||(c=null):(w=null,c=null),g(u+i,w),g(u+"size"+i,c)}}}},25024:function(U,F,e){var d=e(3400),S=e(54460),n=e(51272),E=e(65760),T="images";U.exports=function(r,t){var o={name:T,handleItemDefaults:v};n(r,t,o)};function v(g,r,t){function o(a,p){return d.coerce(g,r,E,a,p)}var i=o("source"),f=o("visible",!!i);if(!f)return r;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var u={_fullLayout:t},l=["x","y"],m=0;m<2;m++){var h=l[m],w=S.coerceRef(g,r,u,h,"paper",void 0);if(w!=="paper"){var c=S.getFromId(u,w);c._imgIndices.push(r._index)}S.coercePosition(r,u,o,w,h,0)}return r}},60963:function(U,F,e){var d=e(33428),S=e(43616),n=e(54460),E=e(79811),T=e(9616);U.exports=function(g){var r=g._fullLayout,t=[],o={},i=[],f,u;for(u=0;u<r.images.length;u++){var l=r.images[u];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){f=E.ref2id(l.xref)+E.ref2id(l.yref);var m=r._plots[f];if(!m){i.push(l);continue}m.mainplot&&(f=m.mainplot.id),o[f]||(o[f]=[]),o[f].push(l)}else l.layer==="above"?t.push(l):i.push(l)}var h={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function w(y){var C=d.select(this);if(this._imgSrc!==y.source)if(C.attr("xmlns",T.svg),y.source&&y.source.slice(0,5)==="data:")C.attr("xlink:href",y.source),this._imgSrc=y.source;else{var M=new Promise((function(s){var _=new Image;this.img=_,_.setAttribute("crossOrigin","anonymous"),_.onerror=b,_.onload=function(){var k=document.createElement("canvas");k.width=this.width,k.height=this.height;var D=k.getContext("2d",{willReadFrequently:!0});D.drawImage(this,0,0);var V=k.toDataURL("image/png");C.attr("xlink:href",V),s()},C.on("error",b),_.src=y.source,this._imgSrc=y.source;function b(){C.remove(),s()}}).bind(this));g._promises.push(M)}}function c(y){var C=d.select(this),M=n.getFromId(g,y.xref),s=n.getFromId(g,y.yref),_=n.getRefType(y.xref)==="domain",b=n.getRefType(y.yref)==="domain",k=r._size,D,V;M!==void 0?D=typeof y.xref=="string"&&_?M._length*y.sizex:Math.abs(M.l2p(y.sizex)-M.l2p(0)):D=y.sizex*k.w,s!==void 0?V=typeof y.yref=="string"&&b?s._length*y.sizey:Math.abs(s.l2p(y.sizey)-s.l2p(0)):V=y.sizey*k.h;var O=D*h.x[y.xanchor].offset,N=V*h.y[y.yanchor].offset,B=h.x[y.xanchor].sizing+h.y[y.yanchor].sizing,z,H;switch(M!==void 0?z=typeof y.xref=="string"&&_?M._length*y.x+M._offset:M.r2p(y.x)+M._offset:z=y.x*k.w+k.l,z+=O,s!==void 0?H=typeof y.yref=="string"&&b?s._length*(1-y.y)+s._offset:s.r2p(y.y)+s._offset:H=k.h-y.y*k.h+k.t,H+=N,y.sizing){case"fill":B+=" slice";break;case"stretch":B="none";break}C.attr({x:z,y:H,width:D,height:V,preserveAspectRatio:B,opacity:y.opacity});var X=M&&n.getRefType(y.xref)!=="domain"?M._id:"",$=s&&n.getRefType(y.yref)!=="domain"?s._id:"",ne=X+$;S.setClipUrl(C,ne?"clip"+r._uid+ne:null,g)}var a=r._imageLowerLayer.selectAll("image").data(i),p=r._imageUpperLayer.selectAll("image").data(t);a.enter().append("image"),p.enter().append("image"),a.exit().remove(),p.exit().remove(),a.each(function(y){w.bind(this)(y),c.bind(this)(y)}),p.each(function(y){w.bind(this)(y),c.bind(this)(y)});var x=Object.keys(r._plots);for(u=0;u<x.length;u++){f=x[u];var A=r._plots[f];if(A.imagelayer){var P=A.imagelayer.selectAll("image").data(o[f]||[]);P.enter().append("image"),P.exit().remove(),P.each(function(y){w.bind(this)(y),c.bind(this)(y)})}}}},7402:function(U,F,e){U.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(U,F,e){var d=e(25376),S=e(22548);U.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d({editType:"legend"}),grouptitlefont:d({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:d({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(U){U.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(U,F,e){var d=e(24040),S=e(3400),n=e(31780),E=e(45464),T=e(3800),v=e(64859),g=e(42451);function r(t,o,i,f){var u=o[t]||{},l=n.newContainer(i,t);function m(ue,te){return S.coerce(u,l,T,ue,te)}var h=S.coerceFont(m,"font",i.font);m("bgcolor",i.paper_bgcolor),m("bordercolor");var w=m("visible");if(w){for(var c,a=function(ue,te){var J=c._input,ie=c;return S.coerce(J,ie,E,ue,te)},p=i.font||{},x=S.coerceFont(m,"grouptitlefont",p,{overrideDflt:{size:Math.round(p.size*1.1)}}),A=0,P=!1,y="normal",C=(i.shapes||[]).filter(function(ue){return ue.showlegend}),M=f.concat(C).filter(function(ue){return t===(ue.legend||"legend")}),s=0;s<M.length;s++)if(c=M[s],!!c.visible){var _=c._isShape;(c.showlegend||c._dfltShowLegend&&!(c._module&&c._module.attributes&&c._module.attributes.showlegend&&c._module.attributes.showlegend.dflt===!1))&&(A++,c.showlegend&&(P=!0,(!_&&d.traceIs(c,"pie-like")||c._input.showlegend===!0)&&A++),S.coerceFont(a,"legendgrouptitle.font",x)),(!_&&d.traceIs(c,"bar")&&i.barmode==="stack"||["tonextx","tonexty"].indexOf(c.fill)!==-1)&&(y=g.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),c.legendgroup!==void 0&&c.legendgroup!==""&&(y=g.isReversed({traceorder:y})?"reversed+grouped":"grouped")}var b=S.coerce(o,i,v,"showlegend",P&&A>(t==="legend"?1:0));if(b===!1&&(i[t]=void 0),!(b===!1&&!u.uirevision)&&(m("uirevision",i.uirevision),b!==!1)){m("borderwidth");var k=m("orientation"),D=m("yref"),V=m("xref"),O=k==="h",N=D==="paper",B=V==="paper",z,H,X,$="left";O?(z=0,d.getComponentMethod("rangeslider","isVisible")(o.xaxis)?N?(H=1.1,X="bottom"):(H=1,X="top"):N?(H=-.1,X="top"):(H=0,X="bottom")):(H=1,X="auto",B?z=1.02:(z=1,$="right")),S.coerce(u,l,{x:{valType:"number",editType:"legend",min:B?-2:0,max:B?3:1,dflt:z}},"x"),S.coerce(u,l,{y:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:H}},"y"),m("traceorder",y),g.isGrouped(i[t])&&m("tracegroupgap"),m("entrywidth"),m("entrywidthmode"),m("indentation"),m("itemsizing"),m("itemwidth"),m("itemclick"),m("itemdoubleclick"),m("groupclick"),m("xanchor",$),m("yanchor",X),m("valign"),S.noneOrAll(u,l,["x","y"]);var ne=m("title.text");if(ne){m("title.side",O?"left":"top");var q=S.extendFlat({},h,{size:S.bigFont(h.size)});S.coerceFont(m,"title.font",q)}}}}U.exports=function(o,i,f){var u,l=f.slice(),m=i.shapes;if(m)for(u=0;u<m.length;u++){var h=m[u];if(h.showlegend){var w={_input:h._input,visible:h.visible,showlegend:h.showlegend,legend:h.legend};l.push(w)}}var c=["legend"];for(u=0;u<l.length;u++)S.pushUnique(c,l[u].legend);for(i._legends=[],u=0;u<c.length;u++){var a=c[u];r(a,o,i,l),i[a]&&i[a].visible&&(i[a]._id=a),i._legends.push(a)}}},31140:function(U,F,e){var d=e(33428),S=e(3400),n=e(7316),E=e(24040),T=e(95924),v=e(86476),g=e(43616),r=e(76308),t=e(72736),o=e(33048),i=e(65196),f=e(84284),u=f.LINE_SPACING,l=f.FROM_TL,m=f.FROM_BR,h=e(35456),w=e(2012),c=e(42451),a=1,p=/^legend[0-9]*$/;U.exports=function(H,X){if(X)A(H,X);else{var $=H._fullLayout,ne=$._legends,q=$._infolayer.selectAll('[class^="legend"]');q.each(function(){var ie=d.select(this),K=ie.attr("class"),ee=K.split(" ")[0];ee.match(p)&&ne.indexOf(ee)===-1&&ie.remove()});for(var ue=0;ue<ne.length;ue++){var te=ne[ue],J=H._fullLayout[te];A(H,J)}}};function x(z,H,X){if(!(H.title.side!=="top center"&&H.title.side!=="top right")){var $=H.title.font,ne=$.size*u,q=0,ue=z.node(),te=g.bBox(ue).width;H.title.side==="top center"?q=.5*(H._width-2*X-2*i.titlePad-te):H.title.side==="top right"&&(q=H._width-2*X-2*i.titlePad-te),t.positionText(z,X+i.titlePad+q,X+ne)}}function A(z,H){var X=H||{},$=z._fullLayout,ne=B(X),q,ue,te=X._inHover;if(te?(ue=X.layer,q="hover"):(ue=$._infolayer,q=ne),!!ue){q+=$._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0);var J;if(te){if(!X.entries)return;J=h(X.entries,X)}else{for(var ie=(z.calcdata||[]).slice(),K=$.shapes,ee=0;ee<K.length;ee++){var le=K[ee];if(le.showlegend){var j={_isShape:!0,_fullInput:le,index:le._index,name:le.name||le.label.text||"shape "+le._index,legend:le.legend,legendgroup:le.legendgroup,legendgrouptitle:le.legendgrouptitle,legendrank:le.legendrank,legendwidth:le.legendwidth,showlegend:le.showlegend,visible:le.visible,opacity:le.opacity,mode:le.type==="line"?"lines":"markers",line:le.line,marker:{line:le.line,color:le.fillcolor,size:12,symbol:le.type==="rect"?"square":le.type==="circle"?"circle":"hexagon2"}};ie.push([{trace:j}])}}J=$.showlegend&&h(ie,X,$._legends.length>1)}var Z=$.hiddenlabels||[];if(!te&&(!$.showlegend||!J.length))return ue.selectAll("."+ne).remove(),$._topdefs.select("#"+q).remove(),n.autoMargin(z,ne);var fe=S.ensureSingle(ue,"g",ne,function(Ee){te||Ee.attr("pointer-events","all")}),re=S.ensureSingleById($._topdefs,"clipPath",q,function(Ee){Ee.append("rect")}),ce=S.ensureSingle(fe,"rect","bg",function(Ee){Ee.attr("shape-rendering","crispEdges")});ce.call(r.stroke,X.bordercolor).call(r.fill,X.bgcolor).style("stroke-width",X.borderwidth+"px");var xe=S.ensureSingle(fe,"g","scrollbox"),Te=X.title;X._titleWidth=0,X._titleHeight=0;var we;Te.text?(we=S.ensureSingle(xe,"text",ne+"titletext"),we.attr("text-anchor","start").call(g.font,Te.font).text(Te.text),_(we,xe,z,X,a)):xe.selectAll("."+ne+"titletext").remove();var _e=S.ensureSingle(fe,"rect","scrollbar",function(Ee){Ee.attr(i.scrollBarEnterAttrs).call(r.fill,i.scrollBarColor)}),ke=xe.selectAll("g.groups").data(J);ke.enter().append("g").attr("class","groups"),ke.exit().remove();var Ne=ke.selectAll("g.traces").data(S.identity);Ne.enter().append("g").attr("class","traces"),Ne.exit().remove(),Ne.style("opacity",function(Ee){var ze=Ee[0].trace;return E.traceIs(ze,"pie-like")?Z.indexOf(Ee[0].label)!==-1?.5:1:ze.visible==="legendonly"?.5:1}).each(function(){d.select(this).call(C,z,X)}).call(w,z,X).each(function(){te||d.select(this).call(s,z,ne)}),S.syncOrAsync([n.previousPromises,function(){return D(z,ke,Ne,X)},function(){var Ee=$._size,ze=X.borderwidth,Ce=X.xref==="paper",Oe=X.yref==="paper";if(Te.text&&x(we,X,ze),!te){var Le,Ge;Ce?Le=Ee.l+Ee.w*X.x-l[O(X)]*X._width:Le=$.width*X.x-l[O(X)]*X._width,Oe?Ge=Ee.t+Ee.h*(1-X.y)-l[N(X)]*X._effHeight:Ge=$.height*(1-X.y)-l[N(X)]*X._effHeight;var rt=V(z,ne,Le,Ge);if(rt)return;if($.margin.autoexpand){var ot=Le,$e=Ge;Le=Ce?S.constrain(Le,0,$.width-X._width):ot,Ge=Oe?S.constrain(Ge,0,$.height-X._effHeight):$e,Le!==ot&&S.log("Constrain "+ne+".x to make legend fit inside graph"),Ge!==$e&&S.log("Constrain "+ne+".y to make legend fit inside graph")}g.setTranslate(fe,Le,Ge)}if(_e.on(".drag",null),fe.on("wheel",null),te||X._height<=X._maxHeight||z._context.staticPlot){var qe=X._effHeight;te&&(qe=X._height),ce.attr({width:X._width-ze,height:qe-ze,x:ze/2,y:ze/2}),g.setTranslate(xe,0,0),re.select("rect").attr({width:X._width-2*ze,height:qe-2*ze,x:ze,y:ze}),g.setClipUrl(xe,q,z),g.setRect(_e,0,0,0,0),delete X._scrollY}else{var ht=Math.max(i.scrollBarMinHeight,X._effHeight*X._effHeight/X._height),vt=X._effHeight-ht-2*i.scrollBarMargin,pt=X._height-X._effHeight,wt=vt/pt,Et=Math.min(X._scrollY||0,pt);ce.attr({width:X._width-2*ze+i.scrollBarWidth+i.scrollBarMargin,height:X._effHeight-ze,x:ze/2,y:ze/2}),re.select("rect").attr({width:X._width-2*ze+i.scrollBarWidth+i.scrollBarMargin,height:X._effHeight-2*ze,x:ze,y:ze+Et}),g.setClipUrl(xe,q,z),je(Et,ht,wt),fe.on("wheel",function(){Et=S.constrain(X._scrollY+d.event.deltaY/vt*pt,0,pt),je(Et,ht,wt),Et!==0&&Et!==pt&&d.event.preventDefault()});var nt,Fe,We,Ze=function(et,st,lt){var Gt=(lt-st)/wt+et;return S.constrain(Gt,0,pt)},Ye=function(et,st,lt){var Gt=(st-lt)/wt+et;return S.constrain(Gt,0,pt)},Ie=d.behavior.drag().on("dragstart",function(){var et=d.event.sourceEvent;et.type==="touchstart"?nt=et.changedTouches[0].clientY:nt=et.clientY,We=Et}).on("drag",function(){var et=d.event.sourceEvent;et.buttons===2||et.ctrlKey||(et.type==="touchmove"?Fe=et.changedTouches[0].clientY:Fe=et.clientY,Et=Ze(We,nt,Fe),je(Et,ht,wt))});_e.call(Ie);var De=d.behavior.drag().on("dragstart",function(){var et=d.event.sourceEvent;et.type==="touchstart"&&(nt=et.changedTouches[0].clientY,We=Et)}).on("drag",function(){var et=d.event.sourceEvent;et.type==="touchmove"&&(Fe=et.changedTouches[0].clientY,Et=Ye(We,nt,Fe),je(Et,ht,wt))});xe.call(De)}function je(et,st,lt){X._scrollY=z._fullLayout[ne]._scrollY=et,g.setTranslate(xe,0,-et),g.setRect(_e,X._width,i.scrollBarMargin+et*lt,i.scrollBarWidth,st),re.select("rect").attr("y",ze+et)}if(z._context.edits.legendPosition){var Re,pe,be,Ue;fe.classed("cursor-move",!0),v.init({element:fe.node(),gd:z,prepFn:function(et){if(et.target!==_e.node()){var st=g.getTranslate(fe);be=st.x,Ue=st.y}},moveFn:function(et,st){if(be!==void 0&&Ue!==void 0){var lt=be+et,Gt=Ue+st;g.setTranslate(fe,lt,Gt),Re=v.align(lt,X._width,Ee.l,Ee.l+Ee.w,X.xanchor),pe=v.align(Gt+X._height,-X._height,Ee.t+Ee.h,Ee.t,X.yanchor)}},doneFn:function(){if(Re!==void 0&&pe!==void 0){var et={};et[ne+".x"]=Re,et[ne+".y"]=pe,E.call("_guiRelayout",z,et)}},clickFn:function(et,st){var lt=ue.selectAll("g.traces").filter(function(){var Gt=this.getBoundingClientRect();return st.clientX>=Gt.left&&st.clientX<=Gt.right&&st.clientY>=Gt.top&&st.clientY<=Gt.bottom});lt.size()>0&&y(z,fe,lt,et,st)}})}}],z)}}function P(z,H,X){var $=z[0],ne=$.width,q=H.entrywidthmode,ue=$.trace.legendwidth||H.entrywidth;return q==="fraction"?H._maxWidth*ue:X+(ue||ne)}function y(z,H,X,$,ne){var q=X.data()[0][0].trace,ue={event:ne,node:X.node(),curveNumber:q.index,expandedIndex:q._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};q._group&&(ue.group=q._group),E.traceIs(q,"pie-like")&&(ue.label=X.datum()[0].label);var te=T.triggerHandler(z,"plotly_legendclick",ue);if($===1){if(te===!1)return;H._clickTimeout=setTimeout(function(){z._fullLayout&&o(X,z,$)},z._context.doubleClickDelay)}else if($===2){H._clickTimeout&&clearTimeout(H._clickTimeout),z._legendMouseDownTime=0;var J=T.triggerHandler(z,"plotly_legenddoubleclick",ue);J!==!1&&te!==!1&&o(X,z,$)}}function C(z,H,X){var $=B(X),ne=z.data()[0][0],q=ne.trace,ue=E.traceIs(q,"pie-like"),te=!X._inHover&&H._context.edits.legendText&&!ue,J=X._maxNameLength,ie,K;ne.groupTitle?(ie=ne.groupTitle.text,K=ne.groupTitle.font):(K=X.font,X.entries?ie=ne.text:(ie=ue?ne.label:q.name,q._meta&&(ie=S.templateString(ie,q._meta))));var ee=S.ensureSingle(z,"text",$+"text");ee.attr("text-anchor","start").call(g.font,K).text(te?M(ie,J):ie);var le=X.indentation+X.itemwidth+i.itemGap*2;t.positionText(ee,le,0),te?ee.call(t.makeEditable,{gd:H,text:ie}).call(_,z,H,X).on("edit",function(j){this.text(M(j,J)).call(_,z,H,X);var Z=ne.trace._fullInput||{},fe={};if(E.hasTransform(Z,"groupby")){var re=E.getTransformIndices(Z,"groupby"),ce=re[re.length-1],xe=S.keyedContainer(Z,"transforms["+ce+"].styles","target","value.name");xe.set(ne.trace._group,j),fe=xe.constructUpdate()}else fe.name=j;return Z._isShape?E.call("_guiRelayout",H,"shapes["+q.index+"].name",fe.name):E.call("_guiRestyle",H,fe,q.index)}):_(ee,z,H,X)}function M(z,H){var X=Math.max(4,H);if(z&&z.trim().length>=X/2)return z;z=z||"";for(var $=X-z.length;$>0;$--)z+=" ";return z}function s(z,H,X){var $=H._context.doubleClickDelay,ne,q=1,ue=S.ensureSingle(z,"rect",X+"toggle",function(te){H._context.staticPlot||te.style("cursor","pointer").attr("pointer-events","all"),te.call(r.fill,"rgba(0,0,0,0)")});H._context.staticPlot||(ue.on("mousedown",function(){ne=new Date().getTime(),ne-H._legendMouseDownTime<$?q+=1:(q=1,H._legendMouseDownTime=ne)}),ue.on("mouseup",function(){if(!(H._dragged||H._editing)){var te=H._fullLayout[X];new Date().getTime()-H._legendMouseDownTime>$&&(q=Math.max(q-1,1)),y(H,te,z,q,d.event)}}))}function _(z,H,X,$,ne){$._inHover&&z.attr("data-notex",!0),t.convertToTspans(z,X,function(){b(H,X,$,ne)})}function b(z,H,X,$){var ne=z.data()[0][0];if(!X._inHover&&ne&&!ne.trace.showlegend){z.remove();return}var q=z.select("g[class*=math-group]"),ue=q.node(),te=B(X);X||(X=H._fullLayout[te]);var J=X.borderwidth,ie;$===a?ie=X.title.font:ne.groupTitle?ie=ne.groupTitle.font:ie=X.font;var K=ie.size*u,ee,le;if(ue){var j=g.bBox(ue);ee=j.height,le=j.width,$===a?g.setTranslate(q,J,J+ee*.75):g.setTranslate(q,0,ee*.25)}else{var Z="."+te+($===a?"title":"")+"text",fe=z.select(Z),re=t.lineCount(fe),ce=fe.node();if(ee=K*re,le=ce?g.bBox(ce).width:0,$===a)X.title.side==="left"&&(le+=i.itemGap*2),t.positionText(fe,J+i.titlePad,J+K);else{var xe=i.itemGap*2+X.indentation+X.itemwidth;ne.groupTitle&&(xe=i.itemGap,le-=X.indentation+X.itemwidth),t.positionText(fe,xe,-K*((re-1)/2-.3))}}$===a?(X._titleWidth=le,X._titleHeight=ee):(ne.lineHeight=K,ne.height=Math.max(ee,16)+3,ne.width=le)}function k(z){var H=0,X=0,$=z.title.side;return $&&($.indexOf("left")!==-1&&(H=z._titleWidth),$.indexOf("top")!==-1&&(X=z._titleHeight)),[H,X]}function D(z,H,X,$){var ne=z._fullLayout,q=B($);$||($=ne[q]);var ue=ne._size,te=c.isVertical($),J=c.isGrouped($),ie=$.entrywidthmode==="fraction",K=$.borderwidth,ee=2*K,le=i.itemGap,j=$.indentation+$.itemwidth+le*2,Z=2*(K+le),fe=N($),re=$.y<0||$.y===0&&fe==="top",ce=$.y>1||$.y===1&&fe==="bottom",xe=$.tracegroupgap,Te={};$._maxHeight=Math.max(re||ce?ne.height/2:ue.h,30);var we=0;$._width=0,$._height=0;var _e=k($);if(te)X.each(function(We){var Ze=We[0].height;g.setTranslate(this,K+_e[0],K+_e[1]+$._height+Ze/2+le),$._height+=Ze,$._width=Math.max($._width,We[0].width)}),we=j+$._width,$._width+=le+j+ee,$._height+=Z,J&&(H.each(function(We,Ze){g.setTranslate(this,0,Ze*$.tracegroupgap)}),$._height+=($._lgroupsLength-1)*$.tracegroupgap);else{var ke=O($),Ne=$.x<0||$.x===0&&ke==="right",Ee=$.x>1||$.x===1&&ke==="left",ze=ce||re,Ce=ne.width/2;$._maxWidth=Math.max(Ne?ze&&ke==="left"?ue.l+ue.w:Ce:Ee?ze&&ke==="right"?ue.r+ue.w:Ce:ue.w,2*j);var Oe=0,Le=0;X.each(function(We){var Ze=P(We,$,j);Oe=Math.max(Oe,Ze),Le+=Ze}),we=null;var Ge=0;if(J){var rt=0,ot=0,$e=0;H.each(function(){var We=0,Ze=0;d.select(this).selectAll("g.traces").each(function(Ie){var De=P(Ie,$,j),je=Ie[0].height;g.setTranslate(this,_e[0],_e[1]+K+le+je/2+Ze),Ze+=je,We=Math.max(We,De),Te[Ie[0].trace.legendgroup]=We});var Ye=We+le;ot>0&&Ye+K+ot>$._maxWidth?(Ge=Math.max(Ge,ot),ot=0,$e+=rt+xe,rt=Ze):rt=Math.max(rt,Ze),g.setTranslate(this,ot,$e),ot+=Ye}),$._width=Math.max(Ge,ot)+K,$._height=$e+rt+Z}else{var qe=X.size(),ht=Le+ee+(qe-1)*le<$._maxWidth,vt=0,pt=0,wt=0,Et=0;X.each(function(We){var Ze=We[0].height,Ye=P(We,$,j),Ie=ht?Ye:Oe;ie||(Ie+=le),Ie+K+pt-le>=$._maxWidth&&(Ge=Math.max(Ge,Et),pt=0,wt+=vt,$._height+=vt,vt=0),g.setTranslate(this,_e[0]+K+pt,_e[1]+K+wt+Ze/2+le),Et=pt+Ye+le,pt+=Ie,vt=Math.max(vt,Ze)}),ht?($._width=pt+ee,$._height=vt+Z):($._width=Math.max(Ge,Et)+ee,$._height+=vt+Z)}}$._width=Math.ceil(Math.max($._width+_e[0],$._titleWidth+2*(K+i.titlePad))),$._height=Math.ceil(Math.max($._height+_e[1],$._titleHeight+2*(K+i.itemGap))),$._effHeight=Math.min($._height,$._maxHeight);var nt=z._context.edits,Fe=nt.legendText||nt.legendPosition;X.each(function(We){var Ze=d.select(this).select("."+q+"toggle"),Ye=We[0].height,Ie=We[0].trace.legendgroup,De=P(We,$,j);J&&Ie!==""&&(De=Te[Ie]);var je=Fe?j:we||De;!te&&!ie&&(je+=le/2),g.setRect(Ze,0,-Ye/2,je,Ye)})}function V(z,H,X,$){var ne=z._fullLayout,q=ne[H],ue=O(q),te=N(q),J=q.xref==="paper",ie=q.yref==="paper";z._fullLayout._reservedMargin[H]={};var K=q.y<.5?"b":"t",ee=q.x<.5?"l":"r",le={r:ne.width-X,l:X+q._width,b:ne.height-$,t:$+q._effHeight};if(J&&ie)return n.autoMargin(z,H,{x:q.x,y:q.y,l:q._width*l[ue],r:q._width*m[ue],b:q._effHeight*m[te],t:q._effHeight*l[te]});J?z._fullLayout._reservedMargin[H][K]=le[K]:ie||q.orientation==="v"?z._fullLayout._reservedMargin[H][ee]=le[ee]:z._fullLayout._reservedMargin[H][K]=le[K]}function O(z){return S.isRightAnchor(z)?"right":S.isCenterAnchor(z)?"center":"left"}function N(z){return S.isBottomAnchor(z)?"bottom":S.isMiddleAnchor(z)?"middle":"top"}function B(z){return z._id||"legend"}},35456:function(U,F,e){var d=e(24040),S=e(42451);U.exports=function(E,T,v){var g=T._inHover,r=S.isGrouped(T),t=S.isReversed(T),o={},i=[],f=!1,u={},l=0,m=0,h,w;function c(z,H,X){if(T.visible!==!1&&!(v&&z!==T._id))if(H===""||!S.isGrouped(T)){var $="~~i"+l;i.push($),o[$]=[X],l++}else i.indexOf(H)===-1?(i.push(H),f=!0,o[H]=[X]):o[H].push(X)}for(h=0;h<E.length;h++){var a=E[h],p=a[0],x=p.trace,A=x.legend,P=x.legendgroup;if(!(!g&&(!x.visible||!x.showlegend)))if(d.traceIs(x,"pie-like"))for(u[P]||(u[P]={}),w=0;w<a.length;w++){var y=a[w].label;u[P][y]||(c(A,P,{label:y,color:a[w].color,i:a[w].i,trace:x,pts:a[w].pts}),u[P][y]=!0,m=Math.max(m,(y||"").length))}else c(A,P,p),m=Math.max(m,(x.name||"").length)}if(!i.length)return[];var C=!f||!r,M=[];for(h=0;h<i.length;h++){var s=o[i[h]];C?M.push(s[0]):M.push(s)}for(C&&(M=[M]),h=0;h<M.length;h++){var _=1/0;for(w=0;w<M[h].length;w++){var b=M[h][w].trace.legendrank;_>b&&(_=b)}M[h][0]._groupMinRank=_,M[h][0]._preGroupSort=h}var k=function(z,H){return z[0]._groupMinRank-H[0]._groupMinRank||z[0]._preGroupSort-H[0]._preGroupSort},D=function(z,H){return z.trace.legendrank-H.trace.legendrank||z._preSort-H._preSort};for(M.forEach(function(z,H){z[0]._preGroupSort=H}),M.sort(k),h=0;h<M.length;h++){M[h].forEach(function(z,H){z._preSort=H}),M[h].sort(D);var V=M[h][0].trace,O=null;for(w=0;w<M[h].length;w++){var N=M[h][w].trace.legendgrouptitle;if(N&&N.text){O=N,g&&(N.font=T._groupTitleFont);break}}if(t&&M[h].reverse(),O){var B=!1;for(w=0;w<M[h].length;w++)if(d.traceIs(M[h][w].trace,"pie-like")){B=!0;break}M[h].unshift({i:-1,groupTitle:O,noClick:B,trace:{showlegend:V.showlegend,legendgroup:V.legendgroup,visible:T.groupclick==="toggleitem"?!0:V.visible}})}for(w=0;w<M[h].length;w++)M[h][w]=[M[h][w]]}return T._lgroupsLength=M.length,T._maxNameLength=m,M}},33048:function(U,F,e){var d=e(24040),S=e(3400),n=S.pushUnique,E=!0;U.exports=function(v,g,r){var t=g._fullLayout;if(g._dragged||g._editing)return;var o=t.legend.itemclick,i=t.legend.itemdoubleclick,f=t.legend.groupclick;r===1&&o==="toggle"&&i==="toggleothers"&&E&&g.data&&g._context.showTips&&S.notifier(S._(g,"Double-click on legend to isolate one trace"),"long"),E=!1;var u;if(r===1?u=o:r===2&&(u=i),!u)return;var l=f==="togglegroup",m=t.hiddenlabels?t.hiddenlabels.slice():[],h=v.data()[0][0];if(h.groupTitle&&h.noClick)return;var w=g._fullData,c=(t.shapes||[]).filter(function(Ce){return Ce.showlegend}),a=w.concat(c),p=h.trace;p._isShape&&(p=p._fullInput);var x=p.legendgroup,A,P,y,C,M,s,_={},b=[],k=[],D=[];function V(Ce,Oe){var Le=b.indexOf(Ce),Ge=_.visible;return Ge||(Ge=_.visible=[]),b.indexOf(Ce)===-1&&(b.push(Ce),Le=b.length-1),Ge[Le]=Oe,Le}var O=(t.shapes||[]).map(function(Ce){return Ce._input}),N=!1;function B(Ce,Oe){O[Ce].visible=Oe,N=!0}function z(Ce,Oe){if(!(h.groupTitle&&!l)){var Le=Ce._fullInput||Ce,Ge=Le._isShape,rt=Le.index;if(rt===void 0&&(rt=Le._index),d.hasTransform(Le,"groupby")){var ot=k[rt];if(!ot){var $e=d.getTransformIndices(Le,"groupby"),qe=$e[$e.length-1];ot=S.keyedContainer(Le,"transforms["+qe+"].styles","target","value.visible"),k[rt]=ot}var ht=ot.get(Ce._group);ht===void 0&&(ht=!0),ht!==!1&&ot.set(Ce._group,Oe),D[rt]=V(rt,Le.visible!==!1)}else{var vt=Le.visible===!1?!1:Oe;Ge?B(rt,vt):V(rt,vt)}}}var H=p.legend,X=p._fullInput,$=X&&X._isShape;if(!$&&d.traceIs(p,"pie-like")){var ne=h.label,q=m.indexOf(ne);if(u==="toggle")q===-1?m.push(ne):m.splice(q,1);else if(u==="toggleothers"){var ue=q!==-1,te=[];for(A=0;A<g.calcdata.length;A++){var J=g.calcdata[A];for(P=0;P<J.length;P++){var ie=J[P],K=ie.label;H===J[0].trace.legend&&ne!==K&&(m.indexOf(K)===-1&&(ue=!0),n(m,K),te.push(K))}}if(!ue)for(var ee=0;ee<te.length;ee++){var le=m.indexOf(te[ee]);le!==-1&&m.splice(le,1)}}d.call("_guiRelayout",g,"hiddenlabels",m)}else{var j=x&&x.length,Z=[],fe;if(j)for(A=0;A<a.length;A++)fe=a[A],fe.visible&&fe.legendgroup===x&&Z.push(A);if(u==="toggle"){var re;switch(p.visible){case!0:re="legendonly";break;case!1:re=!1;break;case"legendonly":re=!0;break}if(j)if(l)for(A=0;A<a.length;A++){var ce=a[A];ce.visible!==!1&&ce.legendgroup===x&&z(ce,re)}else z(p,re);else z(p,re)}else if(u==="toggleothers"){var xe,Te,we,_e,ke,Ne=!0;for(A=0;A<a.length;A++)if(ke=a[A],xe=ke===p,we=ke.showlegend!==!0,!(xe||we)&&(Te=j&&ke.legendgroup===x,!Te&&ke.legend===H&&ke.visible===!0&&!d.traceIs(ke,"notLegendIsolatable"))){Ne=!1;break}for(A=0;A<a.length;A++)if(ke=a[A],!(ke.visible===!1||ke.legend!==H)&&!d.traceIs(ke,"notLegendIsolatable"))switch(p.visible){case"legendonly":z(ke,!0);break;case!0:_e=Ne?!0:"legendonly",xe=ke===p,we=ke.showlegend!==!0&&!ke.legendgroup,Te=xe||j&&ke.legendgroup===x,z(ke,Te||we?!0:_e);break}}for(A=0;A<k.length;A++)if(y=k[A],!!y){var Ee=y.constructUpdate(),ze=Object.keys(Ee);for(P=0;P<ze.length;P++)C=ze[P],s=_[C]=_[C]||[],s[D[A]]=Ee[C]}for(M=Object.keys(_),A=0;A<M.length;A++)for(C=M[A],P=0;P<b.length;P++)_[C].hasOwnProperty(P)||(_[C][P]=void 0);N?d.call("_guiUpdate",g,_,{shapes:O},b):d.call("_guiRestyle",g,_,b)}}},42451:function(U,F){F.isGrouped=function(d){return(d.traceorder||"").indexOf("grouped")!==-1},F.isVertical=function(d){return d.orientation!=="h"},F.isReversed=function(d){return(d.traceorder||"").indexOf("reversed")!==-1}},2780:function(U,F,e){U.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(U,F,e){var d=e(33428),S=e(24040),n=e(3400),E=n.strTranslate,T=e(43616),v=e(76308),g=e(94288).extractOpts,r=e(43028),t=e(10528),o=e(69656).castOption,i=e(65196),f=12,u=5,l=2,m=10,h=5;U.exports=function(x,A,P){var y=A._fullLayout;P||(P=y.legend);var C=P.itemsizing==="constant",M=P.itemwidth,s=(M+i.itemGap*2)/2,_=E(s,0),b=function(te,J,ie,K){var ee;if(te+1)ee=te;else if(J&&J.width>0)ee=J.width;else return 0;return C?K:Math.min(ee,ie)};x.each(function(te){var J=d.select(this),ie=n.ensureSingle(J,"g","layers");ie.style("opacity",te[0].trace.opacity);var K=P.indentation,ee=P.valign,le=te[0].lineHeight,j=te[0].height;if(ee==="middle"&&K===0||!le||!j)ie.attr("transform",null);else{var Z={top:1,bottom:-1}[ee],fe=Z*(.5*(le-j+3))||0,re=P.indentation;ie.attr("transform",E(re,fe))}var ce=ie.selectAll("g.legendfill").data([te]);ce.enter().append("g").classed("legendfill",!0);var xe=ie.selectAll("g.legendlines").data([te]);xe.enter().append("g").classed("legendlines",!0);var Te=ie.selectAll("g.legendsymbols").data([te]);Te.enter().append("g").classed("legendsymbols",!0),Te.selectAll("g.legendpoints").data([te]).enter().append("g").classed("legendpoints",!0)}).each(ue).each(V).each(N).each(O).each(z).each(ne).each($).each(k).each(D).each(H).each(X);function k(te){var J=c(te),ie=J.showFill,K=J.showLine,ee=J.showGradientLine,le=J.showGradientFill,j=J.anyFill,Z=J.anyLine,fe=te[0],re=fe.trace,ce,xe,Te=g(re),we=Te.colorscale,_e=Te.reversescale,ke=function(Ge){if(Ge.size())if(ie)T.fillGroupStyle(Ge,A,!0);else{var rt="legendfill-"+re.uid;T.gradient(Ge,A,rt,w(_e),we,"fill")}},Ne=function(Ge){if(Ge.size()){var rt="legendline-"+re.uid;T.lineGroupStyle(Ge),T.gradient(Ge,A,rt,w(_e),we,"stroke")}},Ee=r.hasMarkers(re)||!j?"M5,0":Z?"M5,-2":"M5,-3",ze=d.select(this),Ce=ze.select(".legendfill").selectAll("path").data(ie||le?[te]:[]);if(Ce.enter().append("path").classed("js-fill",!0),Ce.exit().remove(),Ce.attr("d",Ee+"h"+M+"v6h-"+M+"z").call(ke),K||ee){var Oe=b(void 0,re.line,m,u);xe=n.minExtend(re,{line:{width:Oe}}),ce=[n.minExtend(fe,{trace:xe})]}var Le=ze.select(".legendlines").selectAll("path").data(K||ee?[ce]:[]);Le.enter().append("path").classed("js-line",!0),Le.exit().remove(),Le.attr("d",Ee+(ee?"l"+M+",0.0001":"h"+M)).call(K?T.lineGroupStyle:Ne)}function D(te){var J=c(te),ie=J.anyFill,K=J.anyLine,ee=J.showLine,le=J.showMarker,j=te[0],Z=j.trace,fe=!le&&!K&&!ie&&r.hasText(Z),re,ce;function xe(Ce,Oe,Le,Ge){var rt=n.nestedProperty(Z,Ce).get(),ot=n.isArrayOrTypedArray(rt)&&Oe?Oe(rt):rt;if(C&&ot&&Ge!==void 0&&(ot=Ge),Le){if(ot<Le[0])return Le[0];if(ot>Le[1])return Le[1]}return ot}function Te(Ce){return j._distinct&&j.index&&Ce[j.index]?Ce[j.index]:Ce[0]}if(le||fe||ee){var we={},_e={};if(le){we.mc=xe("marker.color",Te),we.mx=xe("marker.symbol",Te),we.mo=xe("marker.opacity",n.mean,[.2,1]),we.mlc=xe("marker.line.color",Te),we.mlw=xe("marker.line.width",n.mean,[0,5],l),_e.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ke=xe("marker.size",n.mean,[2,16],f);we.ms=ke,_e.marker.size=ke}ee&&(_e.line={width:xe("line.width",Te,[0,10],u)}),fe&&(we.tx="Aa",we.tp=xe("textposition",Te),we.ts=10,we.tc=xe("textfont.color",Te),we.tf=xe("textfont.family",Te),we.tw=xe("textfont.weight",Te),we.ty=xe("textfont.style",Te),we.tv=xe("textfont.variant",Te),we.tC=xe("textfont.textcase",Te),we.tE=xe("textfont.lineposition",Te),we.tS=xe("textfont.shadow",Te)),re=[n.minExtend(j,we)],ce=n.minExtend(Z,_e),ce.selectedpoints=null,ce.texttemplate=null}var Ne=d.select(this).select("g.legendpoints"),Ee=Ne.selectAll("path.scatterpts").data(le?re:[]);Ee.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",_),Ee.exit().remove(),Ee.call(T.pointStyle,ce,A),le&&(re[0].mrc=3);var ze=Ne.selectAll("g.pointtext").data(fe?re:[]);ze.enter().append("g").classed("pointtext",!0).append("text").attr("transform",_),ze.exit().remove(),ze.selectAll("text").call(T.textPointStyle,ce,A)}function V(te){var J=te[0].trace,ie=J.type==="waterfall";if(te[0]._distinct&&ie){var K=te[0].trace[te[0].dir].marker;return te[0].mc=K.color,te[0].mlw=K.line.width,te[0].mlc=K.line.color,B(te,this,"waterfall")}var ee=[];J.visible&&ie&&(ee=te[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var le=d.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ee);le.enter().append("path").classed("legendwaterfall",!0).attr("transform",_).style("stroke-miterlimit",1),le.exit().remove(),le.each(function(j){var Z=d.select(this),fe=J[j[0]].marker,re=b(void 0,fe.line,h,l);Z.attr("d",j[1]).style("stroke-width",re+"px").call(v.fill,fe.color),re&&Z.call(v.stroke,fe.line.color)})}function O(te){B(te,this)}function N(te){B(te,this,"funnel")}function B(te,J,ie){var K=te[0].trace,ee=K.marker||{},le=ee.line||{},j=ee.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",Z=ie?K.visible&&K.type===ie:S.traceIs(K,"bar"),fe=d.select(J).select("g.legendpoints").selectAll("path.legend"+ie).data(Z?[te]:[]);fe.enter().append("path").classed("legend"+ie,!0).attr("d",j).attr("transform",_),fe.exit().remove(),fe.each(function(re){var ce=d.select(this),xe=re[0],Te=b(xe.mlw,ee.line,h,l);ce.style("stroke-width",Te+"px");var we=xe.mcc;if(!P._inHover&&"mc"in xe){var _e=g(ee),ke=_e.mid;ke===void 0&&(ke=(_e.max+_e.min)/2),we=T.tryColorscale(ee,"")(ke)}var Ne=we||xe.mc||ee.color,Ee=ee.pattern,ze=Ee&&T.getPatternAttr(Ee.shape,0,"");if(ze){var Ce=T.getPatternAttr(Ee.bgcolor,0,null),Oe=T.getPatternAttr(Ee.fgcolor,0,null),Le=Ee.fgopacity,Ge=a(Ee.size,8,10),rt=a(Ee.solidity,.5,1),ot="legend-"+K.uid;ce.call(T.pattern,"legend",A,ot,ze,Ge,rt,we,Ee.fillmode,Ce,Oe,Le)}else ce.call(v.fill,Ne);Te&&v.stroke(ce,xe.mlc||le.color)})}function z(te){var J=te[0].trace,ie=d.select(this).select("g.legendpoints").selectAll("path.legendbox").data(J.visible&&S.traceIs(J,"box-violin")?[te]:[]);ie.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),ie.exit().remove(),ie.each(function(){var K=d.select(this);if((J.boxpoints==="all"||J.points==="all")&&v.opacity(J.fillcolor)===0&&v.opacity((J.line||{}).color)===0){var ee=n.minExtend(J,{marker:{size:C?f:n.constrain(J.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});ie.call(T.pointStyle,ee,A)}else{var le=b(void 0,J.line,h,l);K.style("stroke-width",le+"px").call(v.fill,J.fillcolor),le&&v.stroke(K,J.line.color)}})}function H(te){var J=te[0].trace,ie=d.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(J.visible&&J.type==="candlestick"?[te,te]:[]);ie.enter().append("path").classed("legendcandle",!0).attr("d",function(K,ee){return ee?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(K,ee){var le=d.select(this),j=J[ee?"increasing":"decreasing"],Z=b(void 0,j.line,h,l);le.style("stroke-width",Z+"px").call(v.fill,j.fillcolor),Z&&v.stroke(le,j.line.color)})}function X(te){var J=te[0].trace,ie=d.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(J.visible&&J.type==="ohlc"?[te,te]:[]);ie.enter().append("path").classed("legendohlc",!0).attr("d",function(K,ee){return ee?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(K,ee){var le=d.select(this),j=J[ee?"increasing":"decreasing"],Z=b(void 0,j.line,h,l);le.style("fill","none").call(T.dashLine,j.line.dash,Z),Z&&v.stroke(le,j.line.color)})}function $(te){q(te,this,"pie")}function ne(te){q(te,this,"funnelarea")}function q(te,J,ie){var K=te[0],ee=K.trace,le=ie?ee.visible&&ee.type===ie:S.traceIs(ee,ie),j=d.select(J).select("g.legendpoints").selectAll("path.legend"+ie).data(le?[te]:[]);if(j.enter().append("path").classed("legend"+ie,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),j.exit().remove(),j.size()){var Z=ee.marker||{},fe=b(o(Z.line.width,K.pts),Z.line,h,l),re="pieLike",ce=n.minExtend(ee,{marker:{line:{width:fe}}},re),xe=n.minExtend(K,{trace:ce},re);t(j,xe,ce,A)}}function ue(te){var J=te[0].trace,ie,K=[];if(J.visible)switch(J.type){case"histogram2d":case"heatmap":K=[["M-15,-2V4H15V-2Z"]],ie=!0;break;case"choropleth":case"choroplethmapbox":K=[["M-6,-6V6H6V-6Z"]],ie=!0;break;case"densitymapbox":K=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],ie="radial";break;case"cone":K=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],ie=!1;break;case"streamtube":K=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],ie=!1;break;case"surface":K=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],ie=!0;break;case"mesh3d":K=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ie=!1;break;case"volume":K=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ie=!0;break;case"isosurface":K=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],ie=!1;break}var ee=d.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(K);ee.enter().append("path").classed("legend3dandfriends",!0).attr("transform",_).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function(le,j){var Z=d.select(this),fe=g(J),re=fe.colorscale,ce=fe.reversescale,xe=function(ke){if(ke.size()){var Ne="legendfill-"+J.uid;T.gradient(ke,A,Ne,w(ce,ie==="radial"),re,"fill")}},Te;if(re){if(!ie){var _e=re.length;Te=j===0?re[ce?_e-1:0][1]:j===1?re[ce?0:_e-1][1]:re[Math.floor((_e-1)/2)][1]}}else{var we=J.vertexcolor||J.facecolor||J.color;Te=n.isArrayOrTypedArray(we)?we[j]||we[0]:we}Z.attr("d",le[0]),Te?Z.call(v.fill,Te):Z.call(xe)})}};function w(p,x){var A=x?"radial":"horizontal";return A+(p?"":"reversed")}function c(p){var x=p[0].trace,A=x.contours,P=r.hasLines(x),y=r.hasMarkers(x),C=x.visible&&x.fill&&x.fill!=="none",M=!1,s=!1;if(A){var _=A.coloring;_==="lines"?M=!0:P=_==="none"||_==="heatmap"||A.showlines,A.type==="constraint"?C=A._operation!=="=":(_==="fill"||_==="heatmap")&&(s=!0)}return{showMarker:y,showLine:P,showFill:C,showGradientLine:M,showGradientFill:s,anyLine:P||M,anyFill:C||s}}function a(p,x,A){return p&&n.isArrayOrTypedArray(p)?x:p>A?A:p}},66540:function(U,F,e){e(76052),U.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(U,F,e){var d=e(24040),S=e(7316),n=e(79811),E=e(9224),T=e(4016).eraseActiveShape,v=e(3400),g=v._,r=U.exports={};r.toImage={name:"toImage",title:function(p){var x=p._context.toImageButtonOptions||{},A=x.format||"png";return A==="png"?g(p,"Download plot as a png"):g(p,"Download plot")},icon:E.camera,click:function(p){var x=p._context.toImageButtonOptions,A={format:x.format||"png"};v.notifier(g(p,"Taking snapshot - this may take a few seconds"),"long"),A.format!=="svg"&&v.isIE()&&(v.notifier(g(p,"IE only supports svg.  Changing format to svg."),"long"),A.format="svg"),["filename","width","height","scale"].forEach(function(P){P in x&&(A[P]=x[P])}),d.call("downloadImage",p,A).then(function(P){v.notifier(g(p,"Snapshot succeeded")+" - "+P,"long")}).catch(function(){v.notifier(g(p,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(p){return g(p,"Edit in Chart Studio")},icon:E.disk,click:function(p){S.sendDataToCloud(p)}},r.editInChartStudio={name:"editInChartStudio",title:function(p){return g(p,"Edit in Chart Studio")},icon:E.pencil,click:function(p){S.sendDataToCloud(p)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(p){return g(p,"Zoom")},attr:"dragmode",val:"zoom",icon:E.zoombox,click:t},r.pan2d={name:"pan2d",_cat:"pan",title:function(p){return g(p,"Pan")},attr:"dragmode",val:"pan",icon:E.pan,click:t},r.select2d={name:"select2d",_cat:"select",title:function(p){return g(p,"Box Select")},attr:"dragmode",val:"select",icon:E.selectbox,click:t},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(p){return g(p,"Lasso Select")},attr:"dragmode",val:"lasso",icon:E.lasso,click:t},r.drawclosedpath={name:"drawclosedpath",title:function(p){return g(p,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:E.drawclosedpath,click:t},r.drawopenpath={name:"drawopenpath",title:function(p){return g(p,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:E.drawopenpath,click:t},r.drawline={name:"drawline",title:function(p){return g(p,"Draw line")},attr:"dragmode",val:"drawline",icon:E.drawline,click:t},r.drawrect={name:"drawrect",title:function(p){return g(p,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:E.drawrect,click:t},r.drawcircle={name:"drawcircle",title:function(p){return g(p,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:E.drawcircle,click:t},r.eraseshape={name:"eraseshape",title:function(p){return g(p,"Erase active shape")},icon:E.eraseshape,click:T},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(p){return g(p,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:t},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(p){return g(p,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:t},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(p){return g(p,"Autoscale")},attr:"zoom",val:"auto",icon:E.autoscale,click:t},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(p){return g(p,"Reset axes")},attr:"zoom",val:"reset",icon:E.home,click:t},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(p){return g(p,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:t},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(p){return g(p,"Compare data on hover")},attr:"hovermode",val:function(p){return p._fullLayout._isHoriz?"y":"x"},icon:E.tooltip_compare,gravity:"ne",click:t};function t(p,x){var A=x.currentTarget,P=A.getAttribute("data-attr"),y=A.getAttribute("data-val")||!0,C=p._fullLayout,M={},s=n.list(p,null,!0),_=C._cartesianSpikesEnabled,b,k;if(P==="zoom"){var D=y==="in"?.5:2,V=(1+D)/2,O=(1-D)/2,N;for(k=0;k<s.length;k++)if(b=s[k],!b.fixedrange)if(N=b._name,y==="auto")M[N+".autorange"]=!0;else if(y==="reset")b._rangeInitial0===void 0&&b._rangeInitial1===void 0?M[N+".autorange"]=!0:b._rangeInitial0===void 0?(M[N+".autorange"]=b._autorangeInitial,M[N+".range"]=[null,b._rangeInitial1]):b._rangeInitial1===void 0?(M[N+".range"]=[b._rangeInitial0,null],M[N+".autorange"]=b._autorangeInitial):M[N+".range"]=[b._rangeInitial0,b._rangeInitial1],b._showSpikeInitial!==void 0&&(M[N+".showspikes"]=b._showSpikeInitial,_==="on"&&!b._showSpikeInitial&&(_="off"));else{var B=[b.r2l(b.range[0]),b.r2l(b.range[1])],z=[V*B[0]+O*B[1],V*B[1]+O*B[0]];M[N+".range[0]"]=b.l2r(z[0]),M[N+".range[1]"]=b.l2r(z[1])}}else P==="hovermode"&&(y==="x"||y==="y")&&(y=C._isHoriz?"y":"x",A.setAttribute("data-val",y)),M[P]=y;C._cartesianSpikesEnabled=_,d.call("_guiRelayout",p,M)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(p){return g(p,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:E.zoombox,click:o},r.pan3d={name:"pan3d",_cat:"pan",title:function(p){return g(p,"Pan")},attr:"scene.dragmode",val:"pan",icon:E.pan,click:o},r.orbitRotation={name:"orbitRotation",title:function(p){return g(p,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:E["3d_rotate"],click:o},r.tableRotation={name:"tableRotation",title:function(p){return g(p,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:E["z-axis"],click:o};function o(p,x){for(var A=x.currentTarget,P=A.getAttribute("data-attr"),y=A.getAttribute("data-val")||!0,C=p._fullLayout._subplots.gl3d||[],M={},s=P.split("."),_=0;_<C.length;_++)M[C[_]+"."+s[1]]=y;var b=y==="pan"?y:"zoom";M.dragmode=b,d.call("_guiRelayout",p,M)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(p){return g(p,"Reset camera to default")},attr:"resetDefault",icon:E.home,click:i},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(p){return g(p,"Reset camera to last save")},attr:"resetLastSave",icon:E.movie,click:i};function i(p,x){for(var A=x.currentTarget,P=A.getAttribute("data-attr"),y=P==="resetLastSave",C=P==="resetDefault",M=p._fullLayout,s=M._subplots.gl3d||[],_={},b=0;b<s.length;b++){var k=s[b],D=k+".camera",V=k+".aspectratio",O=k+".aspectmode",N=M[k]._scene,B;y?(_[D+".up"]=N.viewInitial.up,_[D+".eye"]=N.viewInitial.eye,_[D+".center"]=N.viewInitial.center,B=!0):C&&(_[D+".up"]=null,_[D+".eye"]=null,_[D+".center"]=null,B=!0),B&&(_[V+".x"]=N.viewInitial.aspectratio.x,_[V+".y"]=N.viewInitial.aspectratio.y,_[V+".z"]=N.viewInitial.aspectratio.z,_[O]=N.viewInitial.aspectmode)}d.call("_guiRelayout",p,_)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(p){return g(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:u};function f(p,x){var A=x.currentTarget,P=A._previousVal,y=p._fullLayout,C=y._subplots.gl3d||[],M=["xaxis","yaxis","zaxis"],s={},_={};if(P)_=P,A._previousVal=null;else{for(var b=0;b<C.length;b++){var k=C[b],D=y[k],V=k+".hovermode";s[V]=D.hovermode,_[V]=!1;for(var O=0;O<3;O++){var N=M[O],B=k+"."+N+".showspikes";_[B]=!1,s[B]=D[N].showspikes}}A._previousVal=s}return _}function u(p,x){var A=f(p,x);d.call("_guiRelayout",p,A)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(p){return g(p,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:l},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(p){return g(p,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:l},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(p){return g(p,"Reset")},attr:"reset",val:null,icon:E.autoscale,click:l},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(p){return g(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:h};function l(p,x){for(var A=x.currentTarget,P=A.getAttribute("data-attr"),y=A.getAttribute("data-val")||!0,C=p._fullLayout,M=C._subplots.geo||[],s=0;s<M.length;s++){var _=M[s],b=C[_];if(P==="zoom"){var k=b.projection.scale,D=y==="in"?2*k:.5*k;d.call("_guiRelayout",p,_+".projection.scale",D)}}P==="reset"&&a(p,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(p){return g(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:h},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(p){return g(p,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:h};function m(p){var x=p._fullLayout;return x.hovermode?!1:x._has("cartesian")?x._isHoriz?"y":"x":"closest"}function h(p){var x=m(p);d.call("_guiRelayout",p,"hovermode",x)}r.resetViewSankey={name:"resetSankeyGroup",title:function(p){return g(p,"Reset view")},icon:E.home,click:function(p){for(var x={"node.groups":[],"node.x":[],"node.y":[]},A=0;A<p._fullData.length;A++){var P=p._fullData[A]._viewInitial;x["node.groups"].push(P.node.groups.slice()),x["node.x"].push(P.node.x.slice()),x["node.y"].push(P.node.y.slice())}d.call("restyle",p,x)}},r.toggleHover={name:"toggleHover",title:function(p){return g(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:function(p,x){var A=f(p,x);A.hovermode=m(p),d.call("_guiRelayout",p,A)}},r.resetViews={name:"resetViews",title:function(p){return g(p,"Reset views")},icon:E.home,click:function(p,x){var A=x.currentTarget;A.setAttribute("data-attr","zoom"),A.setAttribute("data-val","reset"),t(p,x),A.setAttribute("data-attr","resetLastSave"),i(p,x),a(p,"geo"),a(p,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(p){return g(p,"Toggle Spike Lines")},icon:E.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(p){var x=p._fullLayout,A=x._cartesianSpikesEnabled;x._cartesianSpikesEnabled=A==="on"?"off":"on",d.call("_guiRelayout",p,w(p))}};function w(p){for(var x=p._fullLayout,A=x._cartesianSpikesEnabled==="on",P=n.list(p,null,!0),y={},C=0;C<P.length;C++){var M=P[C];y[M._name+".showspikes"]=A?!0:M._showSpikeInitial}return y}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(p){return g(p,"Reset view")},attr:"reset",icon:E.home,click:function(p){a(p,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(p){return g(p,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:c},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(p){return g(p,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:c};function c(p,x){for(var A=x.currentTarget,P=A.getAttribute("data-val"),y=p._fullLayout,C=y._subplots.mapbox||[],M=1.05,s={},_=0;_<C.length;_++){var b=C[_],k=y[b].zoom,D=P==="in"?M*k:k/M;s[b+".zoom"]=D}d.call("_guiRelayout",p,s)}function a(p,x){for(var A=p._fullLayout,P=A._subplots[x]||[],y={},C=0;C<P.length;C++)for(var M=P[C],s=A[M]._subplot,_=s.viewInitial,b=Object.keys(_),k=0;k<b.length;k++){var D=b[k];y[M+"."+D]=_[D]}d.call("_guiRelayout",p,y)}},76052:function(U,F,e){var d=e(44248),S=Object.keys(d),n=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],E=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(n),T=[],v=function(g){if(E.indexOf(g._cat||g.name)===-1){var r=g.name,t=(g._cat||g.name).toLowerCase();T.indexOf(r)===-1&&T.push(r),T.indexOf(t)===-1&&T.push(t)}};S.forEach(function(g){v(d[g])}),T.sort(),U.exports={DRAW_MODES:n,backButtons:E,foreButtons:T}},90824:function(U,F,e){var d=e(3400),S=e(76308),n=e(31780),E=e(66540);U.exports=function(v,g){var r=v.modebar||{},t=n.newContainer(g,"modebar");function o(f,u){return d.coerce(r,t,E,f,u)}o("orientation"),o("bgcolor",S.addOpacity(g.paper_bgcolor,.5));var i=S.contrast(S.rgb(g.modebar.bgcolor));o("color",S.addOpacity(i,.3)),o("activecolor",S.addOpacity(i,.7)),o("uirevision",g.uirevision),o("add"),o("remove")}},45460:function(U,F,e){U.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(U,F,e){var d=e(79811),S=e(43028),n=e(24040),E=e(10624).isUnifiedHover,T=e(66400),v=e(44248),g=e(76052).DRAW_MODES,r=e(3400).extendDeep;U.exports=function(h){var w=h._fullLayout,c=h._context,a=w._modeBar;if(!c.displayModeBar&&!c.watermark){a&&(a.destroy(),delete w._modeBar);return}if(!Array.isArray(c.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(c.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var p=c.modeBarButtons,x;Array.isArray(p)&&p.length?x=l(p):!c.displayModeBar&&c.watermark?x=[]:x=t(h),a?a.update(h,x):w._modeBar=T(h,x)};function t(m){var h=m._fullLayout,w=m._fullData,c=m._context;function a(j,Z){if(typeof Z=="string"){if(Z.toLowerCase()===j.toLowerCase())return!0}else{var fe=Z.name,re=Z._cat||Z.name;if(fe===j||re===j.toLowerCase())return!0}return!1}var p=h.modebar.add;typeof p=="string"&&(p=[p]);var x=h.modebar.remove;typeof x=="string"&&(x=[x]);var A=c.modeBarButtonsToAdd.concat(p.filter(function(j){for(var Z=0;Z<c.modeBarButtonsToRemove.length;Z++)if(a(j,c.modeBarButtonsToRemove[Z]))return!1;return!0})),P=c.modeBarButtonsToRemove.concat(x.filter(function(j){for(var Z=0;Z<c.modeBarButtonsToAdd.length;Z++)if(a(j,c.modeBarButtonsToAdd[Z]))return!1;return!0})),y=h._has("cartesian"),C=h._has("gl3d"),M=h._has("geo"),s=h._has("pie"),_=h._has("funnelarea"),b=h._has("gl2d"),k=h._has("ternary"),D=h._has("mapbox"),V=h._has("polar"),O=h._has("smith"),N=h._has("sankey"),B=o(h),z=E(h.hovermode),H=[];function X(j){if(j.length){for(var Z=[],fe=0;fe<j.length;fe++){for(var re=j[fe],ce=v[re],xe=ce.name.toLowerCase(),Te=(ce._cat||ce.name).toLowerCase(),we=!1,_e=0;_e<P.length;_e++){var ke=P[_e].toLowerCase();if(ke===xe||ke===Te){we=!0;break}}we||Z.push(v[re])}H.push(Z)}}var $=["toImage"];c.showEditInChartStudio?$.push("editInChartStudio"):c.showSendToCloud&&$.push("sendDataToCloud"),X($);var ne=[],q=[],ue=[],te=[];(y||b||s||_||k)+M+C+D+V+O>1?(q=["toggleHover"],ue=["resetViews"]):M?(ne=["zoomInGeo","zoomOutGeo"],q=["hoverClosestGeo"],ue=["resetGeo"]):C?(q=["hoverClosest3d"],ue=["resetCameraDefault3d","resetCameraLastSave3d"]):D?(ne=["zoomInMapbox","zoomOutMapbox"],q=["toggleHover"],ue=["resetViewMapbox"]):b?q=["hoverClosestGl2d"]:s?q=["hoverClosestPie"]:N?(q=["hoverClosestCartesian","hoverCompareCartesian"],ue=["resetViewSankey"]):q=["toggleHover"],y&&(q=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(f(w)||z)&&(q=[]),(y||b)&&!B&&(ne=["zoomIn2d","zoomOut2d","autoScale2d"],ue[0]!=="resetViews"&&(ue=["resetScale2d"])),C?te=["zoom3d","pan3d","orbitRotation","tableRotation"]:(y||b)&&!B||k?te=["zoom2d","pan2d"]:D||M?te=["pan2d"]:V&&(te=["zoom2d"]),i(w)&&te.push("select2d","lasso2d");var J=[],ie=function(j){J.indexOf(j)===-1&&q.indexOf(j)!==-1&&J.push(j)};if(Array.isArray(A)){for(var K=[],ee=0;ee<A.length;ee++){var le=A[ee];typeof le=="string"?(le=le.toLowerCase(),g.indexOf(le)!==-1?(h._has("mapbox")||h._has("cartesian"))&&te.push(le):le==="togglespikelines"?ie("toggleSpikelines"):le==="togglehover"?ie("toggleHover"):le==="hovercompare"?ie("hoverCompareCartesian"):le==="hoverclosest"?(ie("hoverClosestCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie")):le==="v1hovermode"&&(ie("toggleHover"),ie("hoverClosestCartesian"),ie("hoverCompareCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie"))):K.push(le)}A=K}return X(te),X(ne.concat(ue)),X(J),u(H,A)}function o(m){for(var h=d.list({_fullLayout:m},null,!0),w=0;w<h.length;w++)if(!h[w].fixedrange)return!1;return!0}function i(m){for(var h=!1,w=0;w<m.length&&!h;w++){var c=m[w];!c._module||!c._module.selectPoints||(n.traceIs(c,"scatter-like")?(S.hasMarkers(c)||S.hasText(c))&&(h=!0):n.traceIs(c,"box-violin")?(c.boxpoints==="all"||c.points==="all")&&(h=!0):h=!0)}return h}function f(m){for(var h=0;h<m.length;h++)if(!n.traceIs(m[h],"noHover"))return!1;return!0}function u(m,h){if(h.length)if(Array.isArray(h[0]))for(var w=0;w<h.length;w++)m.push(h[w]);else m.push(h);return m}function l(m){for(var h=r([],m),w=0;w<h.length;w++)for(var c=h[w],a=0;a<c.length;a++){var p=c[a];if(typeof p=="string")if(v[p]!==void 0)h[w][a]=v[p];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return h}},66400:function(U,F,e){var d=e(33428),S=e(38248),n=e(3400),E=e(9224),T=e(25788).version,v=new DOMParser;function g(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var r=g.prototype;r.update=function(i,f){this.graphInfo=i;var u=this.graphInfo._context,l=this.graphInfo._fullLayout,m="modebar-"+l._uid;this.element.setAttribute("id",m),this._uid=m,this.element.className="modebar",u.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),l.modebar.orientation==="v"&&(this.element.className+=" vertical",f=f.reverse());var h=l.modebar,w=u.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";n.deleteRelatedStyleRule(m),n.addRelatedStyleRule(m,w+"#"+m+" .modebar-group","background-color: "+h.bgcolor),n.addRelatedStyleRule(m,"#"+m+" .modebar-btn .icon path","fill: "+h.color),n.addRelatedStyleRule(m,"#"+m+" .modebar-btn:hover .icon path","fill: "+h.activecolor),n.addRelatedStyleRule(m,"#"+m+" .modebar-btn.active .icon path","fill: "+h.activecolor);var c=!this.hasButtons(f),a=this.hasLogo!==u.displaylogo,p=this.locale!==u.locale;if(this.locale=u.locale,(c||a||p)&&(this.removeAllButtons(),this.updateButtons(f),u.watermark||u.displaylogo)){var x=this.getLogo();u.watermark&&(x.className=x.className+" watermark"),l.modebar.orientation==="v"?this.element.insertBefore(x,this.element.childNodes[0]):this.element.appendChild(x),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(i){var f=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(u){var l=f.createGroup();u.forEach(function(m){var h=m.name;if(!h)throw new Error("must provide button 'name' in button config");if(f.buttonsNames.indexOf(h)!==-1)throw new Error("button name '"+h+"' is taken");f.buttonsNames.push(h);var w=f.createButton(m);f.buttonElements.push(w),l.appendChild(w)}),f.element.appendChild(l)})},r.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},r.createButton=function(i){var f=this,u=document.createElement("a");u.setAttribute("rel","tooltip"),u.className="modebar-btn";var l=i.title;l===void 0?l=i.name:typeof l=="function"&&(l=l(this.graphInfo)),(l||l===0)&&u.setAttribute("data-title",l),i.attr!==void 0&&u.setAttribute("data-attr",i.attr);var m=i.val;m!==void 0&&(typeof m=="function"&&(m=m(this.graphInfo)),u.setAttribute("data-val",m));var h=i.click;if(typeof h!="function")throw new Error("must provide button 'click' function in button config");u.addEventListener("click",function(c){i.click(f.graphInfo,c),f.updateActiveButton(c.currentTarget)}),u.setAttribute("data-toggle",i.toggle||!1),i.toggle&&d.select(u).classed("active",!0);var w=i.icon;return typeof w=="function"?u.appendChild(w()):u.appendChild(this.createIcon(w||E.question)),u.setAttribute("data-gravity",i.gravity||"n"),u},r.createIcon=function(i){var f=S(i.height)?Number(i.height):i.ascent-i.descent,u="http://www.w3.org/2000/svg",l;if(i.path){l=document.createElementNS(u,"svg"),l.setAttribute("viewBox",[0,0,i.width,f].join(" ")),l.setAttribute("class","icon");var m=document.createElementNS(u,"path");m.setAttribute("d",i.path),i.transform?m.setAttribute("transform",i.transform):i.ascent!==void 0&&m.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),l.appendChild(m)}if(i.svg){var h=v.parseFromString(i.svg,"application/xml");l=h.childNodes[0]}return l.setAttribute("height","1em"),l.setAttribute("width","1em"),l},r.updateActiveButton=function(i){var f=this.graphInfo._fullLayout,u=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(l){var m=l.getAttribute("data-val")||!0,h=l.getAttribute("data-attr"),w=l.getAttribute("data-toggle")==="true",c=d.select(l);if(w)h===u&&c.classed("active",!c.classed("active"));else{var a=h===null?h:n.nestedProperty(f,h).get();c.classed("active",a===m)}})},r.hasButtons=function(i){var f=this.buttons;if(!f||i.length!==f.length)return!1;for(var u=0;u<i.length;++u){if(i[u].length!==f[u].length)return!1;for(var l=0;l<i[u].length;l++)if(i[u][l].name!==f[u][l].name)return!1}return!0};function t(i){return i+" (v"+T+")"}r.getLogo=function(){var i=this.createGroup(),f=document.createElement("a");return f.href="https://plotly.com/",f.target="_blank",f.setAttribute("data-title",t(n._(this.graphInfo,"Produced with Plotly.js"))),f.className="modebar-btn plotlyjsicon modebar-btn--logo",f.appendChild(this.createIcon(E.newplotlylogo)),i.appendChild(f),i},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){n.removeElement(this.container.querySelector(".modebar")),n.deleteRelatedStyleRule(this._uid)};function o(i,f){var u=i._fullLayout,l=new g({graphInfo:i,container:u._modebardiv.node(),buttons:f});return u._privateplot&&d.select(l.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),l}U.exports=o},26680:function(U,F,e){var d=e(25376),S=e(22548),n=e(31780).templatedArray,E=n("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});U.exports={visible:{valType:"boolean",editType:"plot"},buttons:E,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:d({editType:"plot"}),bgcolor:{valType:"color",dflt:S.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(U){U.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(U,F,e){var d=e(3400),S=e(76308),n=e(31780),E=e(51272),T=e(26680),v=e(85984);U.exports=function(o,i,f,u,l){var m=o.rangeselector||{},h=n.newContainer(i,"rangeselector");function w(A,P){return d.coerce(m,h,T,A,P)}var c=E(m,h,{name:"buttons",handleItemDefaults:g,calendar:l}),a=w("visible",c.length>0);if(a){var p=r(i,f,u);w("x",p[0]),w("y",p[1]),d.noneOrAll(o,i,["x","y"]),w("xanchor"),w("yanchor"),d.coerceFont(w,"font",f.font);var x=w("bgcolor");w("activecolor",S.contrast(x,v.lightAmount,v.darkAmount)),w("bordercolor"),w("borderwidth")}};function g(t,o,i,f){var u=f.calendar;function l(w,c){return d.coerce(t,o,T.buttons,w,c)}var m=l("visible");if(m){var h=l("step");h!=="all"&&(u&&u!=="gregorian"&&(h==="month"||h==="year")?o.stepmode="backward":l("stepmode"),l("count")),l("label")}}function r(t,o,i){for(var f=i.filter(function(h){return o[h].anchor===t._id}),u=0,l=0;l<f.length;l++){var m=o[f[l]].domain;m&&(u=Math.max(m[1],u))}return[t.domain[0],u+v.yPad]}},50216:function(U,F,e){var d=e(33428),S=e(24040),n=e(7316),E=e(76308),T=e(43616),v=e(3400),g=v.strTranslate,r=e(72736),t=e(79811),o=e(84284),i=o.LINE_SPACING,f=o.FROM_TL,u=o.FROM_BR,l=e(85984),m=e(48040);U.exports=function(C){var M=C._fullLayout,s=M._infolayer.selectAll(".rangeselector").data(h(C),w);s.enter().append("g").classed("rangeselector",!0),s.exit().remove(),s.style({cursor:"pointer","pointer-events":"all"}),s.each(function(_){var b=d.select(this),k=_,D=k.rangeselector,V=b.selectAll("g.button").data(v.filterVisible(D.buttons));V.enter().append("g").classed("button",!0),V.exit().remove(),V.each(function(O){var N=d.select(this),B=m(k,O);O._isActive=c(k,O,B),N.call(a,D,O),N.call(x,D,O,C),N.on("click",function(){C._dragged||S.call("_guiRelayout",C,B)}),N.on("mouseover",function(){O._isHovered=!0,N.call(a,D,O)}),N.on("mouseout",function(){O._isHovered=!1,N.call(a,D,O)})}),P(C,V,D,k._name,b)})};function h(y){for(var C=t.list(y,"x",!0),M=[],s=0;s<C.length;s++){var _=C[s];_.rangeselector&&_.rangeselector.visible&&M.push(_)}return M}function w(y){return y._id}function c(y,C,M){if(C.step==="all")return y.autorange===!0;var s=Object.keys(M);return y.range[0]===M[s[0]]&&y.range[1]===M[s[1]]}function a(y,C,M){var s=v.ensureSingle(y,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});s.attr({rx:l.rx,ry:l.ry}),s.call(E.stroke,C.bordercolor).call(E.fill,p(C,M)).style("stroke-width",C.borderwidth+"px")}function p(y,C){return C._isActive||C._isHovered?y.activecolor:y.bgcolor}function x(y,C,M,s){function _(k){r.convertToTspans(k,s)}var b=v.ensureSingle(y,"text","selector-text",function(k){k.attr("text-anchor","middle")});b.call(T.font,C.font).text(A(M,s._fullLayout._meta)).call(_)}function A(y,C){return y.label?C?v.templateString(y.label,C):y.label:y.step==="all"?"all":y.count+y.step.charAt(0)}function P(y,C,M,s,_){var b=0,k=0,D=M.borderwidth;C.each(function(){var H=d.select(this),X=H.select(".selector-text"),$=M.font.size*i,ne=Math.max($*r.lineCount(X),16)+3;k=Math.max(k,ne)}),C.each(function(){var H=d.select(this),X=H.select(".selector-rect"),$=H.select(".selector-text"),ne=$.node()&&T.bBox($.node()).width,q=M.font.size*i,ue=r.lineCount($),te=Math.max(ne+10,l.minButtonWidth);H.attr("transform",g(D+b,D)),X.attr({x:0,y:0,width:te,height:k}),r.positionText($,te/2,k/2-(ue-1)*q/2+3),b+=te+5});var V=y._fullLayout._size,O=V.l+V.w*M.x,N=V.t+V.h*(1-M.y),B="left";v.isRightAnchor(M)&&(O-=b,B="right"),v.isCenterAnchor(M)&&(O-=b/2,B="center");var z="top";v.isBottomAnchor(M)&&(N-=k,z="bottom"),v.isMiddleAnchor(M)&&(N-=k/2,z="middle"),b=Math.ceil(b),k=Math.ceil(k),O=Math.round(O),N=Math.round(N),n.autoMargin(y,s+"-range-selector",{x:M.x,y:M.y,l:b*f[B],r:b*u[B],b:k*u[z],t:k*f[z]}),_.attr("transform",g(O,N))}},48040:function(U,F,e){var d=e(73220),S=e(3400).titleCase;U.exports=function(T,v){var g=T._name,r={};if(v.step==="all")r[g+".autorange"]=!0;else{var t=n(T,v);r[g+".range[0]"]=t[0],r[g+".range[1]"]=t[1]}return r};function n(E,T){var v=E.range,g=new Date(E.r2l(v[1])),r=T.step,t=d["utc"+S(r)],o=T.count,i;switch(T.stepmode){case"backward":i=E.l2r(+t.offset(g,-o));break;case"todate":var f=t.offset(g,-o);i=E.l2r(+t.ceil(f));break}var u=v[1];return[i,u]}},41152:function(U,F,e){U.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(U,F,e){var d=e(22548);U.exports={bgcolor:{valType:"color",dflt:d.background,editType:"plot"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(U,F,e){var d=e(79811).list,S=e(19280).getAutoRange,n=e(74636);U.exports=function(T){for(var v=d(T,"x",!0),g=0;g<v.length;g++){var r=v[g],t=r[n.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=S(T,r))}}},74636:function(U){U.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(U,F,e){var d=e(3400),S=e(31780),n=e(79811),E=e(11200),T=e(10936);U.exports=function(g,r,t){var o=g[t],i=r[t];if(!(o.rangeslider||r._requestRangeslider[i._id]))return;d.isPlainObject(o.rangeslider)||(o.rangeslider={});var f=o.rangeslider,u=S.newContainer(i,"rangeslider");function l(s,_){return d.coerce(f,u,E,s,_)}var m,h;function w(s,_){return d.coerce(m,h,T,s,_)}var c=l("visible");if(c){l("bgcolor",r.plot_bgcolor),l("bordercolor"),l("borderwidth"),l("thickness"),l("autorange",!i.isValidRange(f.range)),l("range");var a=r._subplots;if(a)for(var p=a.cartesian.filter(function(s){return s.substr(0,s.indexOf("y"))===n.name2id(t)}).map(function(s){return s.substr(s.indexOf("y"),s.length)}),x=d.simpleMap(p,n.id2name),A=0;A<x.length;A++){var P=x[A];m=f[P]||{},h=S.newContainer(u,P,"yaxis");var y=r[P],C;m.range&&y.isValidRange(m.range)&&(C="fixed");var M=w("rangemode",C);M!=="match"&&w("range",y.range.slice())}u._input=f}}},20060:function(U,F,e){var d=e(33428),S=e(24040),n=e(7316),E=e(3400),T=E.strTranslate,v=e(43616),g=e(76308),r=e(81668),t=e(57952),o=e(79811),i=e(86476),f=e(93972),u=e(74636);U.exports=function(C){for(var M=C._fullLayout,s=M._rangeSliderData,_=0;_<s.length;_++){var b=s[_][u.name];b._clipId=b._id+"-"+M._uid}function k(V){return V._name}var D=M._infolayer.selectAll("g."+u.containerClassName).data(s,k);D.exit().each(function(V){var O=V[u.name];M._topdefs.select("#"+O._clipId).remove()}).remove(),s.length!==0&&(D.enter().append("g").classed(u.containerClassName,!0).attr("pointer-events","all"),D.each(function(V){var O=d.select(this),N=V[u.name],B=M[o.id2name(V.anchor)],z=N[o.id2name(V.anchor)];if(N.range){var H=E.simpleMap(N.range,V.r2l),X=E.simpleMap(V.range,V.r2l),$;X[0]<X[1]?$=[Math.min(H[0],X[0]),Math.max(H[1],X[1])]:$=[Math.max(H[0],X[0]),Math.min(H[1],X[1])],N.range=N._input.range=E.simpleMap($,V.l2r)}V.cleanRange("rangeslider.range");var ne=M._size,q=V.domain;N._width=ne.w*(q[1]-q[0]);var ue=Math.round(ne.l+ne.w*q[0]),te=Math.round(ne.t+ne.h*(1-V._counterDomainMin)+(V.side==="bottom"?V._depth:0)+N._offsetShift+u.extraPad);O.attr("transform",T(ue,te)),N._rl=E.simpleMap(N.range,V.r2l);var J=N._rl[0],ie=N._rl[1],K=ie-J;if(N.p2d=function(we){return we/N._width*K+J},N.d2p=function(we){return(we-J)/K*N._width},V.rangebreaks){var ee=V.locateBreaks(J,ie);if(ee.length){var le,j,Z=0;for(le=0;le<ee.length;le++)j=ee[le],Z+=j.max-j.min;var fe=N._width/(ie-J-Z),re=[-fe*J];for(le=0;le<ee.length;le++)j=ee[le],re.push(re[re.length-1]-fe*(j.max-j.min));for(N.d2p=function(we){for(var _e=re[0],ke=0;ke<ee.length;ke++){var Ne=ee[ke];if(we>=Ne.max)_e=re[ke+1];else if(we<Ne.min)break}return _e+fe*we},le=0;le<ee.length;le++)j=ee[le],j.pmin=N.d2p(j.min),j.pmax=N.d2p(j.max);N.p2d=function(we){for(var _e=re[0],ke=0;ke<ee.length;ke++){var Ne=ee[ke];if(we>=Ne.pmax)_e=re[ke+1];else if(we<Ne.pmin)break}return(we-_e)/fe}}}if(z.rangemode!=="match"){var ce=B.r2l(z.range[0]),xe=B.r2l(z.range[1]),Te=xe-ce;N.d2pOppAxis=function(we){return(we-ce)/Te*N._height}}O.call(c,C,V,N).call(a,C,V,N).call(p,C,V,N).call(A,C,V,N,z).call(P,C,V,N).call(y,C,V,N),m(O,C,V,N),w(O,C,V,N,B,z),V.side==="bottom"&&r.draw(C,V._id+"title",{propContainer:V,propName:V._name+".title",placeholder:M._dfltTitle.x,attributes:{x:V._offset+V._length/2,y:te+N._height+N._offsetShift+10+1.5*V.title.font.size,"text-anchor":"middle"}})}))};function l(C){return typeof C.clientX=="number"?C.clientX:C.touches&&C.touches.length>0?C.touches[0].clientX:0}function m(C,M,s,_){if(M._context.staticPlot)return;var b=C.select("rect."+u.slideBoxClassName).node(),k=C.select("rect."+u.grabAreaMinClassName).node(),D=C.select("rect."+u.grabAreaMaxClassName).node();function V(){var O=d.event,N=O.target,B=l(O),z=B-C.node().getBoundingClientRect().left,H=_.d2p(s._rl[0]),X=_.d2p(s._rl[1]),$=i.coverSlip();this.addEventListener("touchmove",ne),this.addEventListener("touchend",q),$.addEventListener("mousemove",ne),$.addEventListener("mouseup",q);function ne(ue){var te=l(ue),J=+te-B,ie,K,ee;switch(N){case b:if(ee="ew-resize",H+J>s._length||X+J<0)return;ie=H+J,K=X+J;break;case k:if(ee="col-resize",H+J>s._length)return;ie=H+J,K=X;break;case D:if(ee="col-resize",X+J<0)return;ie=H,K=X+J;break;default:ee="ew-resize",ie=z,K=z+J;break}if(K<ie){var le=K;K=ie,ie=le}_._pixelMin=ie,_._pixelMax=K,f(d.select($),ee),h(C,M,s,_)}function q(){$.removeEventListener("mousemove",ne),$.removeEventListener("mouseup",q),this.removeEventListener("touchmove",ne),this.removeEventListener("touchend",q),E.removeElement($)}}C.on("mousedown",V),C.on("touchstart",V)}function h(C,M,s,_){function b(V){return s.l2r(E.constrain(V,_._rl[0],_._rl[1]))}var k=b(_.p2d(_._pixelMin)),D=b(_.p2d(_._pixelMax));window.requestAnimationFrame(function(){S.call("_guiRelayout",M,s._name+".range",[k,D])})}function w(C,M,s,_,b,k){var D=u.handleWidth/2;function V(ue){return E.constrain(ue,0,_._width)}function O(ue){return E.constrain(ue,0,_._height)}function N(ue){return E.constrain(ue,-D,_._width+D)}var B=V(_.d2p(s._rl[0])),z=V(_.d2p(s._rl[1]));if(C.select("rect."+u.slideBoxClassName).attr("x",B).attr("width",z-B),C.select("rect."+u.maskMinClassName).attr("width",B),C.select("rect."+u.maskMaxClassName).attr("x",z).attr("width",_._width-z),k.rangemode!=="match"){var H=_._height-O(_.d2pOppAxis(b._rl[1])),X=_._height-O(_.d2pOppAxis(b._rl[0]));C.select("rect."+u.maskMinOppAxisClassName).attr("x",B).attr("height",H).attr("width",z-B),C.select("rect."+u.maskMaxOppAxisClassName).attr("x",B).attr("y",X).attr("height",_._height-X).attr("width",z-B),C.select("rect."+u.slideBoxClassName).attr("y",H).attr("height",X-H)}var $=.5,ne=Math.round(N(B-D))-$,q=Math.round(N(z-D))+$;C.select("g."+u.grabberMinClassName).attr("transform",T(ne,$)),C.select("g."+u.grabberMaxClassName).attr("transform",T(q,$))}function c(C,M,s,_){var b=E.ensureSingle(C,"rect",u.bgClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),k=_.borderwidth%2===0?_.borderwidth:_.borderwidth-1,D=-_._offsetShift,V=v.crispRound(M,_.borderwidth);b.attr({width:_._width+k,height:_._height+k,transform:T(D,D),"stroke-width":V}).call(g.stroke,_.bordercolor).call(g.fill,_.bgcolor)}function a(C,M,s,_){var b=M._fullLayout,k=E.ensureSingleById(b._topdefs,"clipPath",_._clipId,function(D){D.append("rect").attr({x:0,y:0})});k.select("rect").attr({width:_._width,height:_._height})}function p(C,M,s,_){var b=M.calcdata,k=C.selectAll("g."+u.rangePlotClassName).data(s._subplotsWith,E.identity);k.enter().append("g").attr("class",function(V){return u.rangePlotClassName+" "+V}).call(v.setClipUrl,_._clipId,M),k.order(),k.exit().remove();var D;k.each(function(V,O){var N=d.select(this),B=O===0,z=o.getFromId(M,V,"y"),H=z._name,X=_[H],$={data:[],layout:{xaxis:{type:s.type,domain:[0,1],range:_.range.slice(),calendar:s.calendar},width:_._width,height:_._height,margin:{t:0,b:0,l:0,r:0}},_context:M._context};s.rangebreaks&&($.layout.xaxis.rangebreaks=s.rangebreaks),$.layout[H]={type:z.type,domain:[0,1],range:X.rangemode!=="match"?X.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&($.layout[H].rangebreaks=z.rangebreaks),n.supplyDefaults($);var ne=$._fullLayout.xaxis,q=$._fullLayout[H];ne.clearCalc(),ne.setScale(),q.clearCalc(),q.setScale();var ue={id:V,plotgroup:N,xaxis:ne,yaxis:q,isRangePlot:!0};B?D=ue:(ue.mainplot="xy",ue.mainplotinfo=D),t.rangePlot(M,ue,x(b,V))})}function x(C,M){for(var s=[],_=0;_<C.length;_++){var b=C[_],k=b[0].trace;k.xaxis+k.yaxis===M&&s.push(b)}return s}function A(C,M,s,_,b){var k=E.ensureSingle(C,"rect",u.maskMinClassName,function(N){N.attr({x:0,y:0,"shape-rendering":"crispEdges"})});k.attr("height",_._height).call(g.fill,u.maskColor);var D=E.ensureSingle(C,"rect",u.maskMaxClassName,function(N){N.attr({y:0,"shape-rendering":"crispEdges"})});if(D.attr("height",_._height).call(g.fill,u.maskColor),b.rangemode!=="match"){var V=E.ensureSingle(C,"rect",u.maskMinOppAxisClassName,function(N){N.attr({y:0,"shape-rendering":"crispEdges"})});V.attr("width",_._width).call(g.fill,u.maskOppAxisColor);var O=E.ensureSingle(C,"rect",u.maskMaxOppAxisClassName,function(N){N.attr({y:0,"shape-rendering":"crispEdges"})});O.attr("width",_._width).style("border-top",u.maskOppBorder).call(g.fill,u.maskOppAxisColor)}}function P(C,M,s,_){if(!M._context.staticPlot){var b=E.ensureSingle(C,"rect",u.slideBoxClassName,function(k){k.attr({y:0,cursor:u.slideBoxCursor,"shape-rendering":"crispEdges"})});b.attr({height:_._height,fill:u.slideBoxFill})}}function y(C,M,s,_){var b=E.ensureSingle(C,"g",u.grabberMinClassName),k=E.ensureSingle(C,"g",u.grabberMaxClassName),D={x:0,width:u.handleWidth,rx:u.handleRadius,fill:g.background,stroke:g.defaultLine,"stroke-width":u.handleStrokeWidth,"shape-rendering":"crispEdges"},V={y:Math.round(_._height/4),height:Math.round(_._height/2)},O=E.ensureSingle(b,"rect",u.handleMinClassName,function(X){X.attr(D)});O.attr(V);var N=E.ensureSingle(k,"rect",u.handleMaxClassName,function(X){X.attr(D)});N.attr(V);var B={width:u.grabAreaWidth,x:0,y:0,fill:u.grabAreaFill,cursor:M._context.staticPlot?void 0:u.grabAreaCursor},z=E.ensureSingle(b,"rect",u.grabAreaMinClassName,function(X){X.attr(B)});z.attr("height",_._height);var H=E.ensureSingle(k,"rect",u.grabAreaMaxClassName,function(X){X.attr(B)});H.attr("height",_._height)}},97944:function(U,F,e){var d=e(79811),S=e(72736),n=e(74636),E=e(84284).LINE_SPACING,T=n.name;function v(g){var r=g&&g[T];return r&&r.visible}F.isVisible=v,F.makeData=function(g){var r=d.list({_fullLayout:g},"x",!0),t=g.margin,o=[];if(!g._has("gl2d"))for(var i=0;i<r.length;i++){var f=r[i];if(v(f)){o.push(f);var u=f[T];u._id=T+f._id,u._height=(g.height-t.b-t.t)*u.thickness,u._offsetShift=Math.floor(u.borderwidth/2)}}g._rangeSliderData=o},F.autoMarginOpts=function(g,r){var t=g._fullLayout,o=r[T],i=r._id.charAt(0),f=0,u=0;if(r.side==="bottom"&&(f=r._depth,r.title.text!==t._dfltTitle[i])){u=1.5*r.title.font.size+10+o._offsetShift;var l=(r.title.text.match(S.BR_TAG_ALL)||[]).length;u+=l*r.title.font.size*E}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:o._height+f+Math.max(t.margin.b,u),pad:n.extraPad+o._offsetShift*2}}},49692:function(U,F,e){var d=e(3400),S=e(11200),n=e(10936),E=e(97944);U.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:d.extendFlat({},S,{yaxis:n})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:E.isVisible,makeData:E.makeData,autoMarginOpts:E.autoMarginOpts}},10936:function(U){U.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(U,F,e){var d=e(13916),S=e(52904).line,n=e(98192).u,E=e(92880).extendFlat,T=e(67824).overrideAll,v=e(31780).templatedArray;e(36208),U.exports=T(v("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:E({},d.xref,{}),yref:E({},d.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:S.color,width:E({},S.width,{min:1,dflt:1}),dash:E({},n,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(U){U.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(U,F,e){var d=e(3400),S=e(54460),n=e(51272),E=e(93956),T=e(65152);U.exports=function(r,t){n(r,t,{name:"selections",handleItemDefaults:v});for(var o=t.selections,i=0;i<o.length;i++){var f=o[i];f&&f.path===void 0&&(f.x0===void 0||f.x1===void 0||f.y0===void 0||f.y1===void 0)&&(t.selections[i]=null)}};function v(g,r,t){function o(b,k){return d.coerce(g,r,E,b,k)}var i=o("path"),f=i?"path":"rect",u=o("type",f),l=u!=="path";l&&delete r.path,o("opacity"),o("line.color"),o("line.width"),o("line.dash");for(var m=["x","y"],h=0;h<2;h++){var w=m[h],c={_fullLayout:t},a,p,x,A=S.coerceRef(g,r,c,w);if(a=S.getFromId(c,A),a._selectionIndices.push(r._index),x=T.rangeToShapePosition(a),p=T.shapePositionToRange(a),l){var P=w+"0",y=w+"1",C=g[P],M=g[y];g[P]=p(g[P],!0),g[y]=p(g[y],!0),S.coercePosition(r,c,o,A,P),S.coercePosition(r,c,o,A,y);var s=r[P],_=r[y];s!==void 0&&_!==void 0&&(r[P]=x(s),r[y]=x(_),g[P]=C,g[y]=M)}}l&&d.noneOrAll(g,r,["x0","x1","y0","y1"])}},23640:function(U,F,e){var d=e(9856).readPaths,S=e(55496),n=e(1936).clearOutlineControllers,E=e(76308),T=e(43616),v=e(31780).arrayEditor,g=e(65152),r=g.getPathString;U.exports={draw:t,drawOne:i,activateLastSelection:l};function t(h){var w=h._fullLayout;n(h),w._selectionLayer.selectAll("path").remove();for(var c in w._plots){var a=w._plots[c].selectionLayer;a&&a.selectAll("path").remove()}for(var p=0;p<w.selections.length;p++)i(h,p)}function o(h){return h._context.editSelection}function i(h,w){h._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+w+'"]').remove();var c=g.makeSelectionsOptionsAndPlotinfo(h,w),a=c.options,p=c.plotinfo;if(!a._input)return;x(h._fullLayout._selectionLayer);function x(A){var P=r(h,a),y={"data-index":w,"fill-rule":"evenodd",d:P},C=a.opacity,M="rgba(0,0,0,0)",s=a.line.color||E.contrast(h._fullLayout.plot_bgcolor),_=a.line.width,b=a.line.dash;_||(_=5,b="solid");var k=o(h)&&h._fullLayout._activeSelectionIndex===w;k&&(M=h._fullLayout.activeselection.fillcolor,C=h._fullLayout.activeselection.opacity);for(var D=[],V=1;V>=0;V--){var O=A.append("path").attr(y).style("opacity",V?.1:C).call(E.stroke,s).call(E.fill,M).call(T.dashLine,V?"solid":b,V?4+_:_);if(f(O,h,a),k){var N=v(h.layout,"selections",a);O.style({cursor:"move"});var B={element:O.node(),plotinfo:p,gd:h,editHelpers:N,isActiveSelection:!0},z=d(P,h);S(z,O,B)}else O.style("pointer-events",V?"all":"none");D[V]=O}var H=D[0],X=D[1];X.node().addEventListener("click",function(){return u(h,H)})}}function f(h,w,c){var a=c.xref+c.yref;T.setClipUrl(h,"clip"+w._fullLayout._uid+a,w)}function u(h,w){if(o(h)){var c=w.node(),a=+c.getAttribute("data-index");if(a>=0){if(a===h._fullLayout._activeSelectionIndex){m(h);return}h._fullLayout._activeSelectionIndex=a,h._fullLayout._deactivateSelection=m,t(h)}}}function l(h){if(o(h)){var w=h._fullLayout.selections.length-1;h._fullLayout._activeSelectionIndex=w,h._fullLayout._deactivateSelection=m,t(h)}}function m(h){if(o(h)){var w=h._fullLayout._activeSelectionIndex;w>=0&&(n(h),delete h._fullLayout._activeSelectionIndex,t(h))}}},34200:function(U,F,e){var d=e(98192).u,S=e(92880).extendFlat;U.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:S({},d,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(U){U.exports=function(e,d,S){S("newselection.mode");var n=S("newselection.line.width");n&&(S("newselection.line.color"),S("newselection.line.dash")),S("activeselection.fillcolor"),S("activeselection.opacity")}},5968:function(U,F,e){var d=e(72760),S=d.selectMode,n=e(1936),E=n.clearOutline,T=e(9856),v=T.readPaths,g=T.writePaths,r=T.fixDatesForPaths;U.exports=function(o,i){if(o.length){var f=o[0][0];if(f){var u=f.getAttribute("d"),l=i.gd,m=l._fullLayout.newselection,h=i.plotinfo,w=h.xaxis,c=h.yaxis,a=i.isActiveSelection,p=i.dragmode,x=(l.layout||{}).selections||[];if(!S(p)&&a!==void 0){var A=l._fullLayout._activeSelectionIndex;if(A<x.length)switch(l._fullLayout.selections[A].type){case"rect":p="select";break;case"path":p="lasso";break}}var P=v(u,l,h,a),y={xref:w._id,yref:c._id,opacity:m.opacity,line:{color:m.line.color,width:m.line.width,dash:m.line.dash}},C;P.length===1&&(C=P[0]),C&&C.length===5&&p==="select"?(y.type="rect",y.x0=C[0][1],y.y0=C[0][2],y.x1=C[2][1],y.y1=C[2][2]):(y.type="path",w&&c&&r(P,w,c),y.path=g(P),C=null),E(l);for(var M=i.editHelpers,s=(M||{}).modifyItem,_=[],b=0;b<x.length;b++){var k=l._fullLayout.selections[b];if(!k){_[b]=k;continue}if(_[b]=k._input,a!==void 0&&b===l._fullLayout._activeSelectionIndex){var D=y;switch(k.type){case"rect":s("x0",D.x0),s("x1",D.x1),s("y0",D.y0),s("y1",D.y1);break;case"path":s("path",D.path);break}}}return a===void 0?(_.push(y),_):M?M.getUpdateObj():{}}}}},5840:function(U,F,e){var d=e(3400).strTranslate;function S(v,g){switch(v.type){case"log":return v.p2d(g);case"date":return v.p2r(g,0,v.calendar);default:return v.p2r(g)}}function n(v,g){switch(v.type){case"log":return v.d2p(g);case"date":return v.r2p(g,0,v.calendar);default:return v.r2p(g)}}function E(v){var g=v._id.charAt(0)==="y"?1:0;return function(r){return S(v,r[g])}}function T(v){return d(v.xaxis._offset,v.yaxis._offset)}U.exports={p2r:S,r2p:n,axValue:E,getTransform:T}},22676:function(U,F,e){var d=e(23640),S=e(43156);U.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:d.draw,drawOne:d.drawOne,reselect:S.reselect,prepSelect:S.prepSelect,clearOutline:S.clearOutline,clearSelectionsCache:S.clearSelectionsCache,selectOnClick:S.selectOnClick}},43156:function(U,F,e){var d=e(14756),S=e(61456),n=e(24040),E=e(43616).dashStyle,T=e(76308),v=e(93024),g=e(10624).makeEventData,r=e(72760),t=r.freeMode,o=r.rectMode,i=r.drawMode,f=r.openMode,u=r.selectMode,l=e(65152),m=e(85448),h=e(55496),w=e(1936).clearOutline,c=e(9856),a=c.handleEllipse,p=c.readPaths,x=e(93940).newShapes,A=e(5968),P=e(23640).activateLastSelection,y=e(3400),C=y.sorterAsc,M=e(92065),s=e(91200),_=e(79811).getFromId,b=e(73696),k=e(39172).redrawReglTraces,D=e(83280),V=D.MINSELECT,O=M.filter,N=M.tester,B=e(5840),z=B.p2r,H=B.axValue,X=B.getTransform;function $(Ye){return Ye.subplot!==void 0}function ne(Ye,Ie,De,je,Re){var pe=!$(je),be=t(Re),Ue=o(Re),et=f(Re),st=i(Re),lt=u(Re),Gt=Re==="drawline",Zt=Re==="drawcircle",Tt=Gt||Zt,It=je.gd,Xt=It._fullLayout,gr=lt&&Xt.newselection.mode==="immediate"&&pe,gt=Xt._zoomlayer,jt=je.element.getBoundingClientRect(),Qt=je.plotinfo,mr=X(Qt),or=Ie-jt.left,mt=De-jt.top;Xt._calcInverseTransform(It);var ut=y.apply3DTransform(Xt._invTransform)(or,mt);or=ut[0],mt=ut[1];var bt=Xt._invScaleX,St=Xt._invScaleY,Pt=or,Ht=mt,Bt="M"+or+","+mt,Nt=je.xaxes[0],Kt=je.yaxes[0],fr=Nt._length,cr=Kt._length,dr=Ye.altKey&&!(i(Re)&&et),Xe,He,zt,Rt,Jt,sr,ur;K(Ye,It,je),be&&(Xe=O([[or,mt]],D.BENDPX));var er=gt.selectAll("path.select-outline-"+Qt.id).data([1]),Ft=st?Xt.newshape:Xt.newselection;st&&(je.hasText=Ft.label.text||Ft.label.texttemplate);var ir=st&&!et?Ft.fillcolor:"rgba(0,0,0,0)",hr=Ft.line.color||(pe?T.contrast(It._fullLayout.plot_bgcolor):"#7f7f7f");er.enter().append("path").attr("class","select-outline select-outline-"+Qt.id).style({opacity:st?Ft.opacity/2:1,"stroke-dasharray":E(Ft.line.dash,Ft.line.width),"stroke-width":Ft.line.width+"px","shape-rendering":"crispEdges"}).call(T.stroke,hr).call(T.fill,ir).attr("fill-rule","evenodd").classed("cursor-move",!!st).attr("transform",mr).attr("d",Bt+"Z");var xr=gt.append("path").attr("class","zoombox-corners").style({fill:T.background,stroke:T.defaultLine,"stroke-width":1}).attr("transform",mr).attr("d","M0,0Z");if(st&&je.hasText){var vr=gt.select(".label-temp");vr.empty()&&(vr=gt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Vr=Xt._uid+D.SELECTID,_r=[],Rr=fe(It,je.xaxes,je.yaxes,je.subplot);gr&&!Ye.shiftKey&&(je._clearSubplotSelections=function(){if(pe){var en=Nt._id,An=Kt._id;ot(It,en,An,Rr);for(var wn=(It.layout||{}).selections||[],Tr=[],kr=!1,Wr=0;Wr<wn.length;Wr++){var zr=Xt.selections[Wr];zr.xref!==en||zr.yref!==An?Tr.push(wn[Wr]):kr=!0}kr&&(It._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",It,{selections:Tr}))}});var nn=nt(je);je.moveFn=function(en,An){je._clearSubplotSelections&&(je._clearSubplotSelections(),je._clearSubplotSelections=void 0),Pt=Math.max(0,Math.min(fr,bt*en+or)),Ht=Math.max(0,Math.min(cr,St*An+mt));var wn=Math.abs(Pt-or),Tr=Math.abs(Ht-mt);if(Ue){var kr,Wr,zr;if(lt){var sn=Xt.selectdirection;switch(sn==="any"?Tr<Math.min(wn*.6,V)?kr="h":wn<Math.min(Tr*.6,V)?kr="v":kr="d":kr=sn,kr){case"h":Wr=Zt?cr/2:0,zr=cr;break;case"v":Wr=Zt?fr/2:0,zr=fr;break}}if(st)switch(Xt.newshape.drawdirection){case"vertical":kr="h",Wr=Zt?cr/2:0,zr=cr;break;case"horizontal":kr="v",Wr=Zt?fr/2:0,zr=fr;break;case"ortho":wn<Tr?(kr="h",Wr=mt,zr=Ht):(kr="v",Wr=or,zr=Pt);break;default:kr="d"}kr==="h"?(Rt=Tt?a(Zt,[Pt,Wr],[Pt,zr]):[[or,Wr],[or,zr],[Pt,zr],[Pt,Wr]],Rt.xmin=Tt?Pt:Math.min(or,Pt),Rt.xmax=Tt?Pt:Math.max(or,Pt),Rt.ymin=Math.min(Wr,zr),Rt.ymax=Math.max(Wr,zr),xr.attr("d","M"+Rt.xmin+","+(mt-V)+"h-4v"+2*V+"h4ZM"+(Rt.xmax-1)+","+(mt-V)+"h4v"+2*V+"h-4Z")):kr==="v"?(Rt=Tt?a(Zt,[Wr,Ht],[zr,Ht]):[[Wr,mt],[Wr,Ht],[zr,Ht],[zr,mt]],Rt.xmin=Math.min(Wr,zr),Rt.xmax=Math.max(Wr,zr),Rt.ymin=Tt?Ht:Math.min(mt,Ht),Rt.ymax=Tt?Ht:Math.max(mt,Ht),xr.attr("d","M"+(or-V)+","+Rt.ymin+"v-4h"+2*V+"v4ZM"+(or-V)+","+(Rt.ymax-1)+"v4h"+2*V+"v-4Z")):kr==="d"&&(Rt=Tt?a(Zt,[or,mt],[Pt,Ht]):[[or,mt],[or,Ht],[Pt,Ht],[Pt,mt]],Rt.xmin=Math.min(or,Pt),Rt.xmax=Math.max(or,Pt),Rt.ymin=Math.min(mt,Ht),Rt.ymax=Math.max(mt,Ht),xr.attr("d","M0,0Z"))}else be&&(Xe.addPt([Pt,Ht]),Rt=Xe.filtered);if(je.selectionDefs&&je.selectionDefs.length?(zt=Ee(je.mergedPolygons,Rt,dr),Rt.subtract=dr,He=ie(je.selectionDefs.concat([Rt]))):(zt=[Rt],He=N(Rt)),h(Ce(zt,et),er,je),lt){var un=Le(It,!1),Mn=un.eventData?un.eventData.points.slice():[];un=Le(It,!1,He,Rr,je),He=un.selectionTesters,ur=un.eventData;var Ln;Xe?Ln=Xe.filtered:Ln=pt(zt),s.throttle(Vr,D.SELECTDELAY,function(){_r=Oe(He,Rr);for(var Un=_r.slice(),ai=0;ai<Mn.length;ai++){for(var yi=Mn[ai],bi=!1,Hn=0;Hn<Un.length;Hn++)if(Un[Hn].curveNumber===yi.curveNumber&&Un[Hn].pointNumber===yi.pointNumber){bi=!0;break}bi||Un.push(yi)}Un.length&&(ur||(ur={}),ur.points=Un),nn(ur,Ln),Fe(It,ur)})}},je.clickFn=function(en,An){if(xr.remove(),It._fullLayout._activeShapeIndex>=0){It._fullLayout._deactivateShape(It);return}if(!st){var wn=Xt.clickmode;s.done(Vr).then(function(){if(s.clear(Vr),en===2){for(er.remove(),Jt=0;Jt<Rr.length;Jt++)sr=Rr[Jt],sr._module.selectPoints(sr,!1);if(ke(It,Rr),j(je),Ze(It),Rr.length){var Tr=Rr[0].xaxis,kr=Rr[0].yaxis;if(Tr&&kr){for(var Wr=[],zr=It._fullLayout.selections,sn=0;sn<zr.length;sn++){var un=zr[sn];un&&(un.xref!==Tr._id||un.yref!==kr._id)&&Wr.push(un)}Wr.length<zr.length&&(It._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",It,{selections:Wr}))}}}else wn.indexOf("select")>-1&&q(An,It,je.xaxes,je.yaxes,je.subplot,je,er),wn==="event"&&We(It,void 0);v.click(It,An,Qt.id)}).catch(y.error)}},je.doneFn=function(){xr.remove(),s.done(Vr).then(function(){s.clear(Vr),!gr&&Rt&&je.selectionDefs&&(Rt.subtract=dr,je.selectionDefs.push(Rt),je.mergedPolygons.length=0,[].push.apply(je.mergedPolygons,zt)),(gr||st)&&j(je,gr),je.doneFnCompleted&&je.doneFnCompleted(_r),lt&&We(It,ur)}).catch(y.error)}}function q(Ye,Ie,De,je,Re,pe,be){var Ue=Ie._hoverdata,et=Ie._fullLayout,st=et.clickmode,lt=st.indexOf("event")>-1,Gt=[],Zt,Tt,It,Xt,gr,gt,jt,Qt,mr,or;if(ce(Ue)){K(Ye,Ie,pe),Zt=fe(Ie,De,je,Re);var mt=xe(Ue,Zt),ut=mt.pointNumbers.length>0;if(ut?we(Zt,mt):_e(Zt)&&(jt=Te(mt))){for(be&&be.remove(),or=0;or<Zt.length;or++)Tt=Zt[or],Tt._module.selectPoints(Tt,!1);ke(Ie,Zt),j(pe),lt&&Ze(Ie)}else{Qt=Ye.shiftKey&&(jt!==void 0?jt:Te(mt)),It=ue(mt.pointNumber,mt.searchInfo,Qt);var bt=pe.selectionDefs.concat([It]);for(Xt=ie(bt),or=0;or<Zt.length;or++)if(gr=Zt[or]._module.selectPoints(Zt[or],Xt),gt=ze(gr,Zt[or]),Gt.length)for(var St=0;St<gt.length;St++)Gt.push(gt[St]);else Gt=gt;if(mr={points:Gt},ke(Ie,Zt,mr),It&&pe&&pe.selectionDefs.push(It),be){var Pt=pe.mergedPolygons,Ht=f(pe.dragmode);h(Ce(Pt,Ht),be,pe)}lt&&We(Ie,mr)}}}function ue(Ye,Ie,De){return{pointNumber:Ye,searchInfo:Ie,subtract:!!De}}function te(Ye){return"pointNumber"in Ye&&"searchInfo"in Ye}function J(Ye){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Ie,De,je,Re){var pe=Ye.searchInfo.cd[0].trace._expandedIndex,be=Re.cd[0].trace._expandedIndex;return be===pe&&je===Ye.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ye.subtract}}function ie(Ye){if(!Ye.length)return;for(var Ie=[],De=te(Ye[0])?0:Ye[0][0][0],je=De,Re=te(Ye[0])?0:Ye[0][0][1],pe=Re,be=0;be<Ye.length;be++)if(te(Ye[be]))Ie.push(J(Ye[be]));else{var Ue=N(Ye[be]);Ue.subtract=!!Ye[be].subtract,Ie.push(Ue),De=Math.min(De,Ue.xmin),je=Math.max(je,Ue.xmax),Re=Math.min(Re,Ue.ymin),pe=Math.max(pe,Ue.ymax)}function et(st,lt,Gt,Zt){for(var Tt=!1,It=0;It<Ie.length;It++)Ie[It].contains(st,lt,Gt,Zt)&&(Tt=!Ie[It].subtract);return Tt}return{xmin:De,xmax:je,ymin:Re,ymax:pe,pts:[],contains:et,isRect:!1,degenerate:!1}}function K(Ye,Ie,De){var je=Ie._fullLayout,Re=De.plotinfo,pe=De.dragmode,be=je._lastSelectedSubplot&&je._lastSelectedSubplot===Re.id,Ue=(Ye.shiftKey||Ye.altKey)&&!(i(pe)&&f(pe));be&&Ue&&Re.selection&&Re.selection.selectionDefs&&!De.selectionDefs?(De.selectionDefs=Re.selection.selectionDefs,De.mergedPolygons=Re.selection.mergedPolygons):(!Ue||!Re.selection)&&j(De),be||(w(Ie),je._lastSelectedSubplot=Re.id)}function ee(Ye){return Ye._fullLayout._activeShapeIndex>=0}function le(Ye){return Ye._fullLayout._activeSelectionIndex>=0}function j(Ye,Ie){var De=Ye.dragmode,je=Ye.plotinfo,Re=Ye.gd;ee(Re)&&Re._fullLayout._deactivateShape(Re),le(Re)&&Re._fullLayout._deactivateSelection(Re);var pe=Re._fullLayout,be=pe._zoomlayer,Ue=i(De),et=u(De);if(Ue||et){var st=be.selectAll(".select-outline-"+je.id);if(st&&Re._fullLayout._outlining){var lt;Ue&&(lt=x(st,Ye)),lt&&n.call("_guiRelayout",Re,{shapes:lt});var Gt;et&&!$(Ye)&&(Gt=A(st,Ye)),Gt&&(Re._fullLayout._noEmitSelectedAtStart=!0,n.call("_guiRelayout",Re,{selections:Gt}).then(function(){Ie&&P(Re)})),Re._fullLayout._outlining=!1}}je.selection={},je.selection.selectionDefs=Ye.selectionDefs=[],je.selection.mergedPolygons=Ye.mergedPolygons=[]}function Z(Ye){return Ye._id}function fe(Ye,Ie,De,je){if(!Ye.calcdata)return[];var Re=[],pe=Ie.map(Z),be=De.map(Z),Ue,et,st;for(st=0;st<Ye.calcdata.length;st++)if(Ue=Ye.calcdata[st],et=Ue[0].trace,!(et.visible!==!0||!et._module||!et._module.selectPoints))if($({subplot:je})&&(et.subplot===je||et.geo===je))Re.push(re(et._module,Ue,Ie[0],De[0]));else if(et.type==="splom"){if(et._xaxes[pe[0]]&&et._yaxes[be[0]]){var lt=re(et._module,Ue,Ie[0],De[0]);lt.scene=Ye._fullLayout._splomScenes[et.uid],Re.push(lt)}}else if(et.type==="sankey"){var Gt=re(et._module,Ue,Ie[0],De[0]);Re.push(Gt)}else{if(pe.indexOf(et.xaxis)===-1&&(!et._xA||!et._xA.overlaying)||be.indexOf(et.yaxis)===-1&&(!et._yA||!et._yA.overlaying))continue;Re.push(re(et._module,Ue,_(Ye,et.xaxis),_(Ye,et.yaxis)))}return Re}function re(Ye,Ie,De,je){return{_module:Ye,cd:Ie,xaxis:De,yaxis:je}}function ce(Ye){return Ye&&Array.isArray(Ye)&&Ye[0].hoverOnBox!==!0}function xe(Ye,Ie){var De=Ye[0],je=-1,Re=[],pe,be;for(be=0;be<Ie.length;be++)if(pe=Ie[be],De.fullData._expandedIndex===pe.cd[0].trace._expandedIndex){if(De.hoverOnBox===!0)break;De.pointNumber!==void 0?je=De.pointNumber:De.binNumber!==void 0&&(je=De.binNumber,Re=De.pointNumbers);break}return{pointNumber:je,pointNumbers:Re,searchInfo:pe}}function Te(Ye){var Ie=Ye.searchInfo.cd[0].trace,De=Ye.pointNumber,je=Ye.pointNumbers,Re=je.length>0,pe=Re?je[0]:De;return Ie.selectedpoints?Ie.selectedpoints.indexOf(pe)>-1:!1}function we(Ye,Ie){var De=[],je,Re,pe,be;for(be=0;be<Ye.length;be++)je=Ye[be],je.cd[0].trace.selectedpoints&&je.cd[0].trace.selectedpoints.length>0&&De.push(je);if(De.length===1&&(pe=De[0]===Ie.searchInfo,pe&&(Re=Ie.searchInfo.cd[0].trace,Re.selectedpoints.length===Ie.pointNumbers.length))){for(be=0;be<Ie.pointNumbers.length;be++)if(Re.selectedpoints.indexOf(Ie.pointNumbers[be])<0)return!1;return!0}return!1}function _e(Ye){var Ie=0,De,je,Re;for(Re=0;Re<Ye.length;Re++)if(De=Ye[Re],je=De.cd[0].trace,je.selectedpoints&&(je.selectedpoints.length>1||(Ie+=je.selectedpoints.length,Ie>1)))return!1;return Ie===1}function ke(Ye,Ie,De){var je;for(je=0;je<Ie.length;je++){var Re=Ie[je].cd[0].trace._fullInput,pe=Ye._fullLayout._tracePreGUI[Re.uid]||{};pe.selectedpoints===void 0&&(pe.selectedpoints=Re._input.selectedpoints||null)}var be;if(De){var Ue=De.points||[];for(je=0;je<Ie.length;je++)be=Ie[je].cd[0].trace,be._input.selectedpoints=be._fullInput.selectedpoints=[],be._fullInput!==be&&(be.selectedpoints=[]);for(var et=0;et<Ue.length;et++){var st=Ue[et],lt=st.data,Gt=st.fullData,Zt=st.pointIndex,Tt=st.pointIndices;Tt?([].push.apply(lt.selectedpoints,Tt),be._fullInput!==be&&[].push.apply(Gt.selectedpoints,Tt)):(lt.selectedpoints.push(Zt),be._fullInput!==be&&Gt.selectedpoints.push(Zt))}}else for(je=0;je<Ie.length;je++)be=Ie[je].cd[0].trace,delete be.selectedpoints,delete be._input.selectedpoints,be._fullInput!==be&&delete be._fullInput.selectedpoints;Ne(Ye,Ie)}function Ne(Ye,Ie){for(var De=!1,je=0;je<Ie.length;je++){var Re=Ie[je],pe=Re.cd;n.traceIs(pe[0].trace,"regl")&&(De=!0);var be=Re._module,Ue=be.styleOnSelect||be.style;Ue&&(Ue(Ye,pe,pe[0].node3),pe[0].nodeRangePlot3&&Ue(Ye,pe,pe[0].nodeRangePlot3))}De&&(b(Ye),k(Ye))}function Ee(Ye,Ie,De){for(var je=De?d.difference:d.union,Re=je({regions:Ye},{regions:[Ie]}),pe=Re.regions.reverse(),be=0;be<pe.length;be++){var Ue=pe[be];Ue.subtract=ht(Ue,pe.slice(0,be))}return pe}function ze(Ye,Ie){if(Array.isArray(Ye))for(var De=Ie.cd,je=Ie.cd[0].trace,Re=0;Re<Ye.length;Re++)Ye[Re]=g(Ye[Re],je,De);return Ye}function Ce(Ye,Ie){for(var De=[],je=0;je<Ye.length;je++){De[je]=[];for(var Re=0;Re<Ye[je].length;Re++){De[je][Re]=[],De[je][Re][0]=Re?"L":"M";for(var pe=0;pe<Ye[je][Re].length;pe++)De[je][Re].push(Ye[je][Re][pe])}Ie||De[je].push(["Z",De[je][0][1],De[je][0][2]])}return De}function Oe(Ye,Ie){for(var De=[],je,Re,pe=0;pe<Ie.length;pe++){var be=Ie[pe];Re=be._module.selectPoints(be,Ye),je=ze(Re,be),De=De.concat(je)}return De}function Le(Ye,Ie,De,je,Re){var pe=!!je,be,Ue,et;Re&&(be=Re.plotinfo,Ue=Re.xaxes[0]._id,et=Re.yaxes[0]._id);var st=[],lt=[],Gt=qe(Ye),Zt=Ye._fullLayout;if(be){var Tt=Zt._zoomlayer,It=Zt.dragmode,Xt=i(It),gr=u(It);if(Xt||gr){var gt=_(Ye,Ue,"x"),jt=_(Ye,et,"y");if(gt&&jt){var Qt=Tt.selectAll(".select-outline-"+be.id);if(Qt&&Ye._fullLayout._outlining&&Qt.length){for(var mr=Qt[0][0],or=mr.getAttribute("d"),mt=p(or,Ye,be),ut=[],bt=0;bt<mt.length;bt++){for(var St=mt[bt],Pt=[],Ht=0;Ht<St.length;Ht++)Pt.push([vt(gt,St[Ht][1]),vt(jt,St[Ht][2])]);Pt.xref=Ue,Pt.yref=et,Pt.subtract=ht(Pt,ut),ut.push(Pt)}Gt=Gt.concat(ut)}}}}var Bt=Ue&&et?[Ue+et]:Zt._subplots.cartesian;Ge(Ye);for(var Nt={},Kt=0;Kt<Bt.length;Kt++){var fr=Bt[Kt],cr=fr.indexOf("y"),dr=fr.slice(0,cr),Xe=fr.slice(cr),He=Ue&&et?De:void 0;if(He=$e(Gt,dr,Xe,He),He){var zt=je;if(!pe){var Rt=_(Ye,dr,"x"),Jt=_(Ye,Xe,"y");zt=fe(Ye,[Rt],[Jt],fr);for(var sr=0;sr<zt.length;sr++){var ur=zt[sr],er=ur.cd[0],Ft=er.trace;if(ur._module.name==="scattergl"&&!er.t.xpx){var ir=Ft.x,hr=Ft.y,xr=Ft._length;er.t.xpx=[],er.t.ypx=[];for(var vr=0;vr<xr;vr++)er.t.xpx[vr]=Rt.c2p(ir[vr]),er.t.ypx[vr]=Jt.c2p(hr[vr])}ur._module.name==="splom"&&(Nt[Ft.uid]||(Nt[Ft.uid]=!0))}}var Vr=Oe(He,zt);st=st.concat(Vr),lt=lt.concat(zt)}}var _r={points:st};ke(Ye,lt,_r);var Rr=Zt.clickmode,nn=Rr.indexOf("event")>-1&&Ie;if(!be&&Ie){var en=qe(Ye,!0);if(en.length){var An=en[0].xref,wn=en[0].yref;if(An&&wn){var Tr=pt(en),kr=Et([_(Ye,An,"x"),_(Ye,wn,"y")]);kr(_r,Tr)}}Ye._fullLayout._noEmitSelectedAtStart?Ye._fullLayout._noEmitSelectedAtStart=!1:nn&&We(Ye,_r),Zt._reselect=!1}if(!be&&Zt._deselect){var Wr=Zt._deselect;Ue=Wr.xref,et=Wr.yref,rt(Ue,et,lt)||ot(Ye,Ue,et,je),nn&&(_r.points.length?We(Ye,_r):Ze(Ye)),Zt._deselect=!1}return{eventData:_r,selectionTesters:De}}function Ge(Ye){var Ie=Ye.calcdata;if(Ie)for(var De=0;De<Ie.length;De++){var je=Ie[De][0],Re=je.trace,pe=Ye._fullLayout._splomScenes;if(pe){var be=pe[Re.uid];be&&(be.selectBatch=[])}}}function rt(Ye,Ie,De){for(var je=0;je<De.length;je++){var Re=De[je];if(Re.xaxis&&Re.xaxis._id===Ye&&Re.yaxis&&Re.yaxis._id===Ie)return!0}return!1}function ot(Ye,Ie,De,je){je=fe(Ye,[_(Ye,Ie,"x")],[_(Ye,De,"y")],Ie+De);for(var Re=0;Re<je.length;Re++){var pe=je[Re];pe._module.selectPoints(pe,!1)}ke(Ye,je)}function $e(Ye,Ie,De,je){for(var Re,pe=0;pe<Ye.length;pe++){var be=Ye[pe];if(!(Ie!==be.xref||De!==be.yref))if(Re){var Ue=!!be.subtract;Re=Ee(Re,be,Ue),je=ie(Re)}else Re=[be],je=N(be)}return je}function qe(Ye,Ie){for(var De=[],je=Ye._fullLayout,Re=je.selections,pe=Re.length,be=0;be<pe;be++)if(!(Ie&&be!==je._activeSelectionIndex)){var Ue=Re[be];if(Ue){var et=Ue.xref,st=Ue.yref,lt=_(Ye,et,"x"),Gt=_(Ye,st,"y"),Zt,Tt,It,Xt,gr;if(Ue.type==="rect"){gr=[];var gt=vt(lt,Ue.x0),jt=vt(lt,Ue.x1),Qt=vt(Gt,Ue.y0),mr=vt(Gt,Ue.y1);gr=[[gt,Qt],[gt,mr],[jt,mr],[jt,Qt]],Zt=Math.min(gt,jt),Tt=Math.max(gt,jt),It=Math.min(Qt,mr),Xt=Math.max(Qt,mr),gr.xmin=Zt,gr.xmax=Tt,gr.ymin=It,gr.ymax=Xt,gr.xref=et,gr.yref=st,gr.subtract=!1,gr.isRect=!0,De.push(gr)}else if(Ue.type==="path")for(var or=Ue.path.split("Z"),mt=[],ut=0;ut<or.length;ut++){var bt=or[ut];if(bt){bt+="Z";var St=l.extractPathCoords(bt,m.paramIsX,"raw"),Pt=l.extractPathCoords(bt,m.paramIsY,"raw");Zt=1/0,Tt=-1/0,It=1/0,Xt=-1/0,gr=[];for(var Ht=0;Ht<St.length;Ht++){var Bt=vt(lt,St[Ht]),Nt=vt(Gt,Pt[Ht]);gr.push([Bt,Nt]),Zt=Math.min(Bt,Zt),Tt=Math.max(Bt,Tt),It=Math.min(Nt,It),Xt=Math.max(Nt,Xt)}gr.xmin=Zt,gr.xmax=Tt,gr.ymin=It,gr.ymax=Xt,gr.xref=et,gr.yref=st,gr.subtract=ht(gr,mt),mt.push(gr),De.push(gr)}}}}return De}function ht(Ye,Ie){for(var De=!1,je=0;je<Ie.length;je++)for(var Re=Ie[je],pe=0;pe<Ye.length;pe++)if(S(Ye[pe],Re)){De=!De;break}return De}function vt(Ye,Ie){return Ye.type==="date"&&(Ie=Ie.replace("_"," ")),Ye.type==="log"?Ye.c2p(Ie):Ye.r2p(Ie,null,Ye.calendar)}function pt(Ye){for(var Ie=Ye.length,De=[],je=0;je<Ie;je++){var Re=Ye[je];De=De.concat(Re),De=De.concat([Re[0]])}return wt(De)}function wt(Ye){return Ye.isRect=Ye.length===5&&Ye[0][0]===Ye[4][0]&&Ye[0][1]===Ye[4][1]&&Ye[0][0]===Ye[1][0]&&Ye[2][0]===Ye[3][0]&&Ye[0][1]===Ye[3][1]&&Ye[1][1]===Ye[2][1]||Ye[0][1]===Ye[1][1]&&Ye[2][1]===Ye[3][1]&&Ye[0][0]===Ye[3][0]&&Ye[1][0]===Ye[2][0],Ye.isRect&&(Ye.xmin=Math.min(Ye[0][0],Ye[2][0]),Ye.xmax=Math.max(Ye[0][0],Ye[2][0]),Ye.ymin=Math.min(Ye[0][1],Ye[2][1]),Ye.ymax=Math.max(Ye[0][1],Ye[2][1])),Ye}function Et(Ye){return function(Ie,De){for(var je,Re,pe=0;pe<Ye.length;pe++){var be=Ye[pe],Ue=be._id,et=Ue.charAt(0);if(De.isRect){je||(je={});var st=De[et+"min"],lt=De[et+"max"];st!==void 0&&lt!==void 0&&(je[Ue]=[z(be,st),z(be,lt)].sort(C))}else Re||(Re={}),Re[Ue]=De.map(H(be))}je&&(Ie.range=je),Re&&(Ie.lassoPoints=Re)}}function nt(Ye){var Ie=Ye.plotinfo;return Ie.fillRangeItems||Et(Ye.xaxes.concat(Ye.yaxes))}function Fe(Ye,Ie){Ye.emit("plotly_selecting",Ie)}function We(Ye,Ie){Ie&&(Ie.selections=(Ye.layout||{}).selections||[]),Ye.emit("plotly_selected",Ie)}function Ze(Ye){Ye.emit("plotly_deselect",null)}U.exports={reselect:Le,prepSelect:ne,clearOutline:w,clearSelectionsCache:j,selectOnClick:q}},46056:function(U,F,e){var d=e(13916),S=e(25376),n=e(52904).line,E=e(98192).u,T=e(92880).extendFlat,v=e(31780).templatedArray;e(36208);var g=e(45464),r=e(21776).ye,t=e(97728);U.exports=v("shape",{visible:T({},g.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:T({},g.legend,{editType:"calc+arraydraw"}),legendgroup:T({},g.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:T({},g.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:S({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:T({},g.legendrank,{editType:"calc+arraydraw"}),legendwidth:T({},g.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:T({},d.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},d.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},n.color,{editType:"arraydraw"}),width:T({},n.width,{editType:"calc+arraydraw"}),dash:T({},E,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:r({},{keys:Object.keys(t)}),font:S({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(U,F,e){var d=e(3400),S=e(54460),n=e(85448),E=e(65152);U.exports=function(o){var i=o._fullLayout,f=d.filterVisible(i.shapes);if(!(!f.length||!o._fullData.length))for(var u=0;u<f.length;u++){var l=f[u];l._extremes={};var m,h,w=S.getRefType(l.xref),c=S.getRefType(l.yref);if(l.xref!=="paper"&&w!=="domain"){var a=l.xsizemode==="pixel"?l.xanchor:l.x0,p=l.xsizemode==="pixel"?l.xanchor:l.x1;m=S.getFromId(o,l.xref),h=r(m,a,p,l.path,n.paramIsX),h&&(l._extremes[m._id]=S.findExtremes(m,h,T(l)))}if(l.yref!=="paper"&&c!=="domain"){var x=l.ysizemode==="pixel"?l.yanchor:l.y0,A=l.ysizemode==="pixel"?l.yanchor:l.y1;m=S.getFromId(o,l.yref),h=r(m,x,A,l.path,n.paramIsY),h&&(l._extremes[m._id]=S.findExtremes(m,h,v(l)))}}};function T(t){return g(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function v(t){return g(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function g(t,o,i,f,u,l){var m=t/2,h=l;if(o==="pixel"){var w=u?E.extractPathCoords(u,l?n.paramIsY:n.paramIsX):[i,f],c=d.aggNums(Math.max,null,w),a=d.aggNums(Math.min,null,w),p=a<0?Math.abs(a)+m:m,x=c>0?c+m:m;return{ppad:m,ppadplus:h?p:x,ppadminus:h?x:p}}else return{ppad:m}}function r(t,o,i,f,u){var l=t.type==="category"||t.type==="multicategory"?t.r2c:t.d2c;if(o!==void 0)return[l(o),l(i)];if(f){var m=1/0,h=-1/0,w=f.match(n.segmentRE),c,a,p,x,A;for(t.type==="date"&&(l=E.decodeDate(l)),c=0;c<w.length;c++)a=w[c],p=u[a.charAt(0)].drawn,p!==void 0&&(x=w[c].substr(1).match(n.paramRE),!(!x||x.length<p)&&(A=l(x[p]),A<m&&(m=A),A>h&&(h=A)));if(h>=m)return[m,h]}}},85448:function(U){U.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(U,F,e){var d=e(3400),S=e(54460),n=e(51272),E=e(46056),T=e(65152);U.exports=function(t,o){n(t,o,{name:"shapes",handleItemDefaults:g})};function v(r,t){return r?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function g(r,t,o){function i(te,J){return d.coerce(r,t,E,te,J)}t._isShape=!0;var f=i("visible");if(f){var u=i("showlegend");u&&(i("legend"),i("legendwidth"),i("legendgroup"),i("legendgrouptitle.text"),d.coerceFont(i,"legendgrouptitle.font"),i("legendrank"));var l=i("path"),m=l?"path":"rect",h=i("type",m),w=h!=="path";w&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var c=i("line.width");c&&(i("line.color"),i("line.dash"));for(var a=i("xsizemode"),p=i("ysizemode"),x=["x","y"],A=0;A<2;A++){var P=x[A],y=P+"anchor",C=P==="x"?a:p,M={_fullLayout:o},s,_,b,k=S.coerceRef(r,t,M,P,void 0,"paper"),D=S.getRefType(k);if(D==="range"?(s=S.getFromId(M,k),s._shapeIndices.push(t._index),b=T.rangeToShapePosition(s),_=T.shapePositionToRange(s)):_=b=d.identity,w){var V=.25,O=.75,N=P+"0",B=P+"1",z=r[N],H=r[B];r[N]=_(r[N],!0),r[B]=_(r[B],!0),C==="pixel"?(i(N,0),i(B,10)):(S.coercePosition(t,M,i,k,N,V),S.coercePosition(t,M,i,k,B,O)),t[N]=b(t[N]),t[B]=b(t[B]),r[N]=z,r[B]=H}if(C==="pixel"){var X=r[y];r[y]=_(r[y],!0),S.coercePosition(t,M,i,k,y,.25),t[y]=b(t[y]),r[y]=X}}w&&d.noneOrAll(r,t,["x0","x1","y0","y1"]);var $=h==="line",ne,q;if(w&&(ne=i("label.texttemplate")),ne||(q=i("label.text")),q||ne){i("label.textangle");var ue=i("label.textposition",$?"middle":"middle center");i("label.xanchor"),i("label.yanchor",v($,ue)),i("label.padding"),d.coerceFont(i,"label.font",o.font)}}}},60728:function(U,F,e){var d=e(3400),S=e(54460),n=e(72736),E=e(43616),T=e(9856).readPaths,v=e(65152),g=v.getPathString,r=e(97728),t=e(84284).FROM_TL;U.exports=function(u,l,m,h){if(h.selectAll(".shape-label").remove(),!!(m.label.text||m.label.texttemplate)){var w;if(m.label.texttemplate){var c={};if(m.type!=="path"){var a=S.getFromId(u,m.xref),p=S.getFromId(u,m.yref);for(var x in r){var A=r[x](m,a,p);A!==void 0&&(c[x]=A)}}w=d.texttemplateStringForShapes(m.label.texttemplate,{},u._fullLayout._d3locale,c)}else w=m.label.text;var P={"data-index":l},y=m.label.font,C={"data-notex":1},M=h.append("g").attr(P).classed("shape-label",!0),s=M.append("text").attr(C).classed("shape-label-text",!0).text(w),_,b,k,D;if(m.path){var V=g(u,m),O=T(V,u);_=1/0,k=1/0,b=-1/0,D=-1/0;for(var N=0;N<O.length;N++)for(var B=0;B<O[N].length;B++)for(var z=O[N][B],H=1;H<z.length;H+=2){var X=z[H],$=z[H+1];_=Math.min(_,X),b=Math.max(b,X),k=Math.min(k,$),D=Math.max(D,$)}}else{var ne=S.getFromId(u,m.xref),q=S.getRefType(m.xref),ue=S.getFromId(u,m.yref),te=S.getRefType(m.yref),J=v.getDataToPixel(u,ne,!1,q),ie=v.getDataToPixel(u,ue,!0,te);_=J(m.x0),b=J(m.x1),k=ie(m.y0),D=ie(m.y1)}var K=m.label.textangle;K==="auto"&&(m.type==="line"?K=o(_,k,b,D):K=0),s.call(function(re){return re.call(E.font,y).attr({}),n.convertToTspans(re,u),re});var ee=E.bBox(s.node()),le=i(_,k,b,D,m,K,ee),j=le.textx,Z=le.texty,fe=le.xanchor;s.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[fe],y:Z,x:j,transform:"rotate("+K+","+j+","+Z+")"}).call(n.positionText,j,Z)}};function o(f,u,l,m){var h,w;return w=Math.abs(l-f),l>=f?h=u-m:h=m-u,-180/Math.PI*Math.atan2(h,w)}function i(f,u,l,m,h,w,c){var a=h.label.textposition,p=h.label.textangle,x=h.label.padding,A=h.type,P=Math.PI/180*w,y=Math.sin(P),C=Math.cos(P),M=h.label.xanchor,s=h.label.yanchor,_,b,k,D;if(A==="line"){a==="start"?(_=f,b=u):a==="end"?(_=l,b=m):(_=(f+l)/2,b=(u+m)/2),M==="auto"&&(a==="start"?p==="auto"?l>f?M="left":l<f?M="right":M="center":l>f?M="right":l<f?M="left":M="center":a==="end"?p==="auto"?l>f?M="right":l<f?M="left":M="center":l>f?M="left":l<f?M="right":M="center":M="center");var V={left:1,center:0,right:-1},O={bottom:-1,middle:0,top:1};if(p==="auto"){var N=O[s];k=-x*y*N,D=x*C*N}else{var B=V[M],z=O[s];k=x*B,D=x*z}_=_+k,b=b+D}else k=x+3,a.indexOf("right")!==-1?(_=Math.max(f,l)-k,M==="auto"&&(M="right")):a.indexOf("left")!==-1?(_=Math.min(f,l)+k,M==="auto"&&(M="left")):(_=(f+l)/2,M==="auto"&&(M="center")),a.indexOf("top")!==-1?b=Math.min(u,m):a.indexOf("bottom")!==-1?b=Math.max(u,m):b=(u+m)/2,D=x,s==="bottom"?b=b-D:s==="top"&&(b=b+D);var H=t[s],X=h.label.font.size,$=c.height,ne=($*H-X)*y,q=-($*H-X)*C;return{textx:_+ne,texty:b+q,xanchor:M}}},55496:function(U,F,e){var d=e(3400),S=d.strTranslate,n=e(86476),E=e(72760),T=E.drawMode,v=E.selectMode,g=e(24040),r=e(76308),t=e(7e3),o=t.i000,i=t.i090,f=t.i180,u=t.i270,l=e(1936),m=l.clearOutlineControllers,h=e(9856),w=h.pointsOnRectangle,c=h.pointsOnEllipse,a=h.writePaths,p=e(93940).newShapes,x=e(93940).createShapeObj,A=e(5968),P=e(60728);U.exports=function s(_,b,k,D){D||(D=0);var V=k.gd;function O(){s(_,b,k,D++),(c(_[0])||k.hasText)&&N({redrawing:!0})}function N(Ee){var ze={};k.isActiveShape!==void 0&&(k.isActiveShape=!1,ze=p(b,k)),k.isActiveSelection!==void 0&&(k.isActiveSelection=!1,ze=A(b,k),V._fullLayout._reselect=!0),Object.keys(ze).length&&g.call((Ee||{}).redrawing?"relayout":"_guiRelayout",V,ze)}var B=V._fullLayout,z=B._zoomlayer,H=k.dragmode,X=T(H),$=v(H);(X||$)&&(V._fullLayout._outlining=!0),m(V),b.attr("d",a(_));var ne,q,ue,te,J;if(!D&&(k.isActiveShape||k.isActiveSelection)){J=y([],_);var ie=z.append("g").attr("class","outline-controllers");ce(ie),Ne()}if(X&&k.hasText){var K=z.select(".label-temp"),ee=x(b,k,k.dragmode);P(V,"label-temp",ee,K)}function le(Ee){ue=+Ee.srcElement.getAttribute("data-i"),te=+Ee.srcElement.getAttribute("data-j"),ne[ue][te].moveFn=j}function j(Ee,ze){if(_.length){var Ce=J[ue][te][1],Oe=J[ue][te][2],Le=_[ue],Ge=Le.length;if(w(Le)){var rt=Ee,ot=ze;if(k.isActiveSelection){var $e=C(Le,te);$e[1]===Le[te][1]?ot=0:rt=0}for(var qe=0;qe<Ge;qe++)if(qe!==te){var ht=Le[qe];ht[1]===Le[te][1]&&(ht[1]=Ce+rt),ht[2]===Le[te][2]&&(ht[2]=Oe+ot)}if(Le[te][1]=Ce+rt,Le[te][2]=Oe+ot,!w(Le))for(var vt=0;vt<Ge;vt++)for(var pt=0;pt<Le[vt].length;pt++)Le[vt][pt]=J[ue][vt][pt]}else Le[te][1]=Ce+Ee,Le[te][2]=Oe+ze;O()}}function Z(){N()}function fe(){if(_.length&&_[ue]&&_[ue].length){for(var Ee=[],ze=0;ze<_[ue].length;ze++)ze!==te&&Ee.push(_[ue][ze]);Ee.length>1&&!(Ee.length===2&&Ee[1][0]==="Z")&&(te===0&&(Ee[0][0]="M"),_[ue]=Ee,O(),N())}}function re(Ee,ze){if(Ee===2){ue=+ze.srcElement.getAttribute("data-i"),te=+ze.srcElement.getAttribute("data-j");var Ce=_[ue];!w(Ce)&&!c(Ce)&&fe()}}function ce(Ee){ne=[];for(var ze=0;ze<_.length;ze++){var Ce=_[ze],Oe=w(Ce),Le=!Oe&&c(Ce);ne[ze]=[];for(var Ge=Ce.length,rt=0;rt<Ge;rt++)if(Ce[rt][0]!=="Z"&&!(Le&&rt!==o&&rt!==i&&rt!==f&&rt!==u)){var ot=Oe&&k.isActiveSelection,$e;ot&&($e=C(Ce,rt));var qe=Ce[rt][1],ht=Ce[rt][2],vt=Ee.append(ot?"rect":"circle").attr("data-i",ze).attr("data-j",rt).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ot){var pt=$e[1]-qe,wt=$e[2]-ht,Et=wt?5:Math.max(Math.min(25,Math.abs(pt)-5),5),nt=pt?5:Math.max(Math.min(25,Math.abs(wt)-5),5);vt.classed(wt?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Et).attr("height",nt).attr("x",qe-Et/2).attr("y",ht-nt/2).attr("transform",S(pt/2,wt/2))}else vt.classed("cursor-grab",!0).attr("r",5).attr("cx",qe).attr("cy",ht);ne[ze][rt]={element:vt.node(),gd:V,prepFn:le,doneFn:Z,clickFn:re},n.init(ne[ze][rt])}}}function xe(Ee,ze){if(_.length)for(var Ce=0;Ce<_.length;Ce++)for(var Oe=0;Oe<_[Ce].length;Oe++)for(var Le=0;Le+2<_[Ce][Oe].length;Le+=2)_[Ce][Oe][Le+1]=J[Ce][Oe][Le+1]+Ee,_[Ce][Oe][Le+2]=J[Ce][Oe][Le+2]+ze}function Te(Ee,ze){xe(Ee,ze),O()}function we(Ee){ue=+Ee.srcElement.getAttribute("data-i"),ue||(ue=0),q[ue].moveFn=Te}function _e(){N()}function ke(Ee){Ee===2&&M(V)}function Ne(){if(q=[],!!_.length){var Ee=0;q[Ee]={element:b[0][0],gd:V,prepFn:we,doneFn:_e,clickFn:ke},n.init(q[Ee])}}};function y(s,_){for(var b=0;b<_.length;b++){var k=_[b];s[b]=[];for(var D=0;D<k.length;D++){s[b][D]=[];for(var V=0;V<k[D].length;V++)s[b][D][V]=k[D][V]}}return s}function C(s,_){var b=s[_][1],k=s[_][2],D=s.length,V,O,N;return V=(_+1)%D,O=s[V][1],N=s[V][2],O===b&&N===k&&(V=(_+2)%D,O=s[V][1],N=s[V][2]),[V,O,N]}function M(s){if(v(s._fullLayout.dragmode)){m(s);var _=s._fullLayout._activeSelectionIndex,b=(s.layout||{}).selections||[];if(_<b.length){for(var k=[],D=0;D<b.length;D++)D!==_&&k.push(b[D]);delete s._fullLayout._activeSelectionIndex;var V=s._fullLayout.selections[_];s._fullLayout._deselect={xref:V.xref,yref:V.yref},g.call("_guiRelayout",s,{selections:k})}}}},4016:function(U,F,e){var d=e(33428),S=e(24040),n=e(3400),E=e(54460),T=e(9856).readPaths,v=e(55496),g=e(60728),r=e(1936).clearOutlineControllers,t=e(76308),o=e(43616),i=e(31780).arrayEditor,f=e(86476),u=e(93972),l=e(85448),m=e(65152),h=m.getPathString;U.exports={draw:w,drawOne:p,eraseActiveShape:M,drawLabel:g};function w(s){var _=s._fullLayout;_._shapeUpperLayer.selectAll("path").remove(),_._shapeLowerLayer.selectAll("path").remove(),_._shapeUpperLayer.selectAll("text").remove(),_._shapeLowerLayer.selectAll("text").remove();for(var b in _._plots){var k=_._plots[b].shapelayer;k&&(k.selectAll("path").remove(),k.selectAll("text").remove())}for(var D=0;D<_.shapes.length;D++)_.shapes[D].visible===!0&&p(s,D)}function c(s){return!!s._fullLayout._outlining}function a(s){return!s._context.edits.shapePosition}function p(s,_){s._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+_+'"]').remove();var b=m.makeShapesOptionsAndPlotinfo(s,_),k=b.options,D=b.plotinfo;if(!k._input||k.visible!==!0)return;if(k.layer==="above")O(s._fullLayout._shapeUpperLayer);else if(k.xref==="paper"||k.yref==="paper")O(s._fullLayout._shapeLowerLayer);else if(k.layer==="between")O(D.shapelayerBetween);else if(D._hadPlotinfo){var V=D.mainplotinfo||D;O(V.shapelayer)}else O(s._fullLayout._shapeLowerLayer);function O(N){var B=h(s,k),z={"data-index":_,"fill-rule":k.fillrule,d:B},H=k.opacity,X=k.fillcolor,$=k.line.width?k.line.color:"rgba(0,0,0,0)",ne=k.line.width,q=k.line.dash;!ne&&k.editable===!0&&(ne=5,q="solid");var ue=B[B.length-1]!=="Z",te=a(s)&&k.editable&&s._fullLayout._activeShapeIndex===_;te&&(X=ue?"rgba(0,0,0,0)":s._fullLayout.activeshape.fillcolor,H=s._fullLayout.activeshape.opacity);var J=N.append("g").classed("shape-group",!0).attr({"data-index":_}),ie=J.append("path").attr(z).style("opacity",H).call(t.stroke,$).call(t.fill,X).call(o.dashLine,q,ne);x(J,s,k),g(s,_,k,J);var K;if((te||s._context.edits.shapePosition)&&(K=i(s.layout,"shapes",k)),te){ie.style({cursor:"move"});var ee={element:ie.node(),plotinfo:D,gd:s,editHelpers:K,hasText:k.label.text||k.label.texttemplate,isActiveShape:!0},le=T(B,s);v(le,ie,ee)}else s._context.edits.shapePosition?A(s,ie,k,_,N,K):k.editable===!0&&ie.style("pointer-events",ue||t.opacity(X)*H<=.5?"stroke":"all");ie.node().addEventListener("click",function(){return y(s,ie)})}}function x(s,_,b){var k=(b.xref+b.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(s,k?"clip"+_._fullLayout._uid+k:null,_)}function A(s,_,b,k,D,V){var O=10,N=10,B=b.xsizemode==="pixel",z=b.ysizemode==="pixel",H=b.type==="line",X=b.type==="path",$=V.modifyItem,ne,q,ue,te,J,ie,K,ee,le,j,Z,fe,re,ce,xe,Te=d.select(_.node().parentNode),we=E.getFromId(s,b.xref),_e=E.getRefType(b.xref),ke=E.getFromId(s,b.yref),Ne=E.getRefType(b.yref),Ee=m.getDataToPixel(s,we,!1,_e),ze=m.getDataToPixel(s,ke,!0,Ne),Ce=m.getPixelToData(s,we,!1,_e),Oe=m.getPixelToData(s,ke,!0,Ne),Le=ot(),Ge={element:Le.node(),gd:s,prepFn:ht,doneFn:vt,clickFn:pt},rt;f.init(Ge),Le.node().onmousemove=qe;function ot(){return H?$e():_}function $e(){var Ze=10,Ye=Math.max(b.line.width,Ze),Ie=D.append("g").attr("data-index",k).attr("drag-helper",!0);Ie.append("path").attr("d",_.attr("d")).style({cursor:"move","stroke-width":Ye,"stroke-opacity":"0"});var De={"fill-opacity":"0"},je=Math.max(Ye/2,Ze);return Ie.append("circle").attr({"data-line-point":"start-point",cx:B?Ee(b.xanchor)+b.x0:Ee(b.x0),cy:z?ze(b.yanchor)-b.y0:ze(b.y0),r:je}).style(De).classed("cursor-grab",!0),Ie.append("circle").attr({"data-line-point":"end-point",cx:B?Ee(b.xanchor)+b.x1:Ee(b.x1),cy:z?ze(b.yanchor)-b.y1:ze(b.y1),r:je}).style(De).classed("cursor-grab",!0),Ie}function qe(Ze){if(c(s)){rt=null;return}if(H)Ze.target.tagName==="path"?rt="move":rt=Ze.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ye=Ge.element.getBoundingClientRect(),Ie=Ye.right-Ye.left,De=Ye.bottom-Ye.top,je=Ze.clientX-Ye.left,Re=Ze.clientY-Ye.top,pe=!X&&Ie>O&&De>N&&!Ze.shiftKey?f.getCursor(je/Ie,1-Re/De):"move";u(_,pe),rt=pe.split("-")[0]}}function ht(Ze){c(s)||(B&&(J=Ee(b.xanchor)),z&&(ie=ze(b.yanchor)),b.type==="path"?xe=b.path:(ne=B?b.x0:Ee(b.x0),q=z?b.y0:ze(b.y0),ue=B?b.x1:Ee(b.x1),te=z?b.y1:ze(b.y1)),ne<ue?(le=ne,re="x0",j=ue,ce="x1"):(le=ue,re="x1",j=ne,ce="x0"),!z&&q<te||z&&q>te?(K=q,Z="y0",ee=te,fe="y1"):(K=te,Z="y1",ee=q,fe="y0"),qe(Ze),nt(D,b),We(_,b,s),Ge.moveFn=rt==="move"?wt:Et,Ge.altKey=Ze.altKey)}function vt(){c(s)||(u(_),Fe(D),x(_,s,b),S.call("_guiRelayout",s,V.getUpdateObj()))}function pt(){c(s)||Fe(D)}function wt(Ze,Ye){if(b.type==="path"){var Ie=function(Re){return Re},De=Ie,je=Ie;B?$("xanchor",b.xanchor=Ce(J+Ze)):(De=function(pe){return Ce(Ee(pe)+Ze)},we&&we.type==="date"&&(De=m.encodeDate(De))),z?$("yanchor",b.yanchor=Oe(ie+Ye)):(je=function(pe){return Oe(ze(pe)+Ye)},ke&&ke.type==="date"&&(je=m.encodeDate(je))),$("path",b.path=P(xe,De,je))}else B?$("xanchor",b.xanchor=Ce(J+Ze)):($("x0",b.x0=Ce(ne+Ze)),$("x1",b.x1=Ce(ue+Ze))),z?$("yanchor",b.yanchor=Oe(ie+Ye)):($("y0",b.y0=Oe(q+Ye)),$("y1",b.y1=Oe(te+Ye)));_.attr("d",h(s,b)),nt(D,b),g(s,k,b,Te)}function Et(Ze,Ye){if(X){var Ie=function(gt){return gt},De=Ie,je=Ie;B?$("xanchor",b.xanchor=Ce(J+Ze)):(De=function(jt){return Ce(Ee(jt)+Ze)},we&&we.type==="date"&&(De=m.encodeDate(De))),z?$("yanchor",b.yanchor=Oe(ie+Ye)):(je=function(jt){return Oe(ze(jt)+Ye)},ke&&ke.type==="date"&&(je=m.encodeDate(je))),$("path",b.path=P(xe,De,je))}else if(H){if(rt==="resize-over-start-point"){var Re=ne+Ze,pe=z?q-Ye:q+Ye;$("x0",b.x0=B?Re:Ce(Re)),$("y0",b.y0=z?pe:Oe(pe))}else if(rt==="resize-over-end-point"){var be=ue+Ze,Ue=z?te-Ye:te+Ye;$("x1",b.x1=B?be:Ce(be)),$("y1",b.y1=z?Ue:Oe(Ue))}}else{var et=function(gt){return rt.indexOf(gt)!==-1},st=et("n"),lt=et("s"),Gt=et("w"),Zt=et("e"),Tt=st?K+Ye:K,It=lt?ee+Ye:ee,Xt=Gt?le+Ze:le,gr=Zt?j+Ze:j;z&&(st&&(Tt=K-Ye),lt&&(It=ee-Ye)),(!z&&It-Tt>N||z&&Tt-It>N)&&($(Z,b[Z]=z?Tt:Oe(Tt)),$(fe,b[fe]=z?It:Oe(It))),gr-Xt>O&&($(re,b[re]=B?Xt:Ce(Xt)),$(ce,b[ce]=B?gr:Ce(gr)))}_.attr("d",h(s,b)),nt(D,b),g(s,k,b,Te)}function nt(Ze,Ye){(B||z)&&Ie();function Ie(){var De=Ye.type!=="path",je=Ze.selectAll(".visual-cue").data([0]),Re=1;je.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Re}).classed("visual-cue",!0);var pe=Ee(B?Ye.xanchor:n.midRange(De?[Ye.x0,Ye.x1]:m.extractPathCoords(Ye.path,l.paramIsX))),be=ze(z?Ye.yanchor:n.midRange(De?[Ye.y0,Ye.y1]:m.extractPathCoords(Ye.path,l.paramIsY)));if(pe=m.roundPositionForSharpStrokeRendering(pe,Re),be=m.roundPositionForSharpStrokeRendering(be,Re),B&&z){var Ue="M"+(pe-1-Re)+","+(be-1-Re)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";je.attr("d",Ue)}else if(B){var et="M"+(pe-1-Re)+","+(be-9-Re)+"v18 h2 v-18 Z";je.attr("d",et)}else{var st="M"+(pe-9-Re)+","+(be-1-Re)+"h18 v2 h-18 Z";je.attr("d",st)}}}function Fe(Ze){Ze.selectAll(".visual-cue").remove()}function We(Ze,Ye,Ie){var De=Ye.xref,je=Ye.yref,Re=E.getFromId(Ie,De),pe=E.getFromId(Ie,je),be="";De!=="paper"&&!Re.autorange&&(be+=De),je!=="paper"&&!pe.autorange&&(be+=je),o.setClipUrl(Ze,be?"clip"+Ie._fullLayout._uid+be:null,Ie)}}function P(s,_,b){return s.replace(l.segmentRE,function(k){var D=0,V=k.charAt(0),O=l.paramIsX[V],N=l.paramIsY[V],B=l.numParams[V],z=k.substr(1).replace(l.paramRE,function(H){return D>=B||(O[D]?H=_(H):N[D]&&(H=b(H)),D++),H});return V+z})}function y(s,_){if(a(s)){var b=_.node(),k=+b.getAttribute("data-index");if(k>=0){if(k===s._fullLayout._activeShapeIndex){C(s);return}s._fullLayout._activeShapeIndex=k,s._fullLayout._deactivateShape=C,w(s)}}}function C(s){if(a(s)){var _=s._fullLayout._activeShapeIndex;_>=0&&(r(s),delete s._fullLayout._activeShapeIndex,w(s))}}function M(s){if(a(s)){r(s);var _=s._fullLayout._activeShapeIndex,b=(s.layout||{}).shapes||[];if(_<b.length){for(var k=[],D=0;D<b.length;D++)D!==_&&k.push(b[D]);return delete s._fullLayout._activeShapeIndex,S.call("_guiRelayout",s,{shapes:k})}}}},92872:function(U,F,e){var d=e(67824).overrideAll,S=e(45464),n=e(25376),E=e(98192).u,T=e(92880).extendFlat,v=e(21776).ye,g=e(97728);U.exports=d({newshape:{visible:T({},S.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:T({},S.legend,{}),legendgroup:T({},S.legendgroup,{}),legendgrouptitle:{text:T({},S.legendgrouptitle.text,{}),font:n({})},legendrank:T({},S.legendrank,{}),legendwidth:T({},S.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:T({},E,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:T({},S.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:v({newshape:!0},{keys:Object.keys(g)}),font:n({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(U){var F=32;U.exports={CIRCLE_SIDES:F,i000:0,i090:F/4,i180:F/2,i270:F/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(U,F,e){var d=e(76308),S=e(3400);function n(E,T){return E?"bottom":T.indexOf("top")!==-1?"top":T.indexOf("bottom")!==-1?"bottom":"middle"}U.exports=function(T,v,g){g("newshape.visible"),g("newshape.name"),g("newshape.showlegend"),g("newshape.legend"),g("newshape.legendwidth"),g("newshape.legendgroup"),g("newshape.legendgrouptitle.text"),S.coerceFont(g,"newshape.legendgrouptitle.font"),g("newshape.legendrank"),g("newshape.drawdirection"),g("newshape.layer"),g("newshape.fillcolor"),g("newshape.fillrule"),g("newshape.opacity");var r=g("newshape.line.width");if(r){var t=(T||{}).plot_bgcolor||"#FFF";g("newshape.line.color",d.contrast(t)),g("newshape.line.dash")}var o=T.dragmode==="drawline",i=g("newshape.label.text"),f=g("newshape.label.texttemplate");if(i||f){g("newshape.label.textangle");var u=g("newshape.label.textposition",o?"middle":"middle center");g("newshape.label.xanchor"),g("newshape.label.yanchor",n(o,u)),g("newshape.label.padding"),S.coerceFont(g,"newshape.label.font",v.font)}g("activeshape.fillcolor"),g("activeshape.opacity")}},9856:function(U,F,e){var d=e(21984),S=e(7e3),n=S.CIRCLE_SIDES,E=S.SQRT2,T=e(5840),v=T.p2r,g=T.r2p,r=[0,3,4,5,6,1,2],t=[0,3,4,1,2];F.writePaths=function(f){var u=f.length;if(!u)return"M0,0Z";for(var l="",m=0;m<u;m++)for(var h=f[m].length,w=0;w<h;w++){var c=f[m][w][0];if(c==="Z")l+="Z";else for(var a=f[m][w].length,p=0;p<a;p++){var x=p;c==="Q"||c==="S"?x=t[p]:c==="C"&&(x=r[p]),l+=f[m][w][x],p>0&&p<a-1&&(l+=",")}}return l},F.readPaths=function(f,u,l,m){var h=d(f),w=[],c=-1,a=function(){c++,w[c]=[]},p,x=0,A=0,P,y,C=function(){P=x,y=A};C();for(var M=0;M<h.length;M++){var s=[],_,b,k,D,V=h[M][0],O=V;switch(V){case"M":a(),x=+h[M][1],A=+h[M][2],s.push([O,x,A]),C();break;case"Q":case"S":_=+h[M][1],k=+h[M][2],x=+h[M][3],A=+h[M][4],s.push([O,x,A,_,k]);break;case"C":_=+h[M][1],k=+h[M][2],b=+h[M][3],D=+h[M][4],x=+h[M][5],A=+h[M][6],s.push([O,x,A,_,k,b,D]);break;case"T":case"L":x=+h[M][1],A=+h[M][2],s.push([O,x,A]);break;case"H":O="L",x=+h[M][1],s.push([O,x,A]);break;case"V":O="L",A=+h[M][1],s.push([O,x,A]);break;case"A":O="L";var N=+h[M][1],B=+h[M][2];+h[M][4]||(N=-N,B=-B);var z=x-N,H=A;for(p=1;p<=n/2;p++){var X=2*Math.PI*p/n;s.push([O,z+N*Math.cos(X),H+B*Math.sin(X)])}break;case"Z":(x!==P||A!==y)&&(x=P,A=y,s.push([O,x,A]));break}for(var $=(l||{}).domain,ne=u._fullLayout._size,q=l&&l.xsizemode==="pixel",ue=l&&l.ysizemode==="pixel",te=m===!1,J=0;J<s.length;J++){for(p=0;p+2<7;p+=2){var ie=s[J][p+1],K=s[J][p+2];ie===void 0||K===void 0||(x=ie,A=K,l&&(l.xaxis&&l.xaxis.p2r?(te&&(ie-=l.xaxis._offset),q?ie=g(l.xaxis,l.xanchor)+ie:ie=v(l.xaxis,ie)):(te&&(ie-=ne.l),$?ie=$.x[0]+ie/ne.w:ie=ie/ne.w),l.yaxis&&l.yaxis.p2r?(te&&(K-=l.yaxis._offset),ue?K=g(l.yaxis,l.yanchor)-K:K=v(l.yaxis,K)):(te&&(K-=ne.t),$?K=$.y[1]-K/ne.h:K=1-K/ne.h)),s[J][p+1]=ie,s[J][p+2]=K)}w[c].push(s[J].slice())}}return w};function o(f,u){return Math.abs(f-u)<=1e-6}function i(f,u){var l=u[1]-f[1],m=u[2]-f[2];return Math.sqrt(l*l+m*m)}F.pointsOnRectangle=function(f){var u=f.length;if(u!==5)return!1;for(var l=1;l<3;l++){var m=f[0][l]-f[1][l],h=f[3][l]-f[2][l];if(!o(m,h))return!1;var w=f[0][l]-f[3][l],c=f[1][l]-f[2][l];if(!o(w,c))return!1}return!o(f[0][1],f[1][1])&&!o(f[0][1],f[3][1])?!1:!!(i(f[0],f[1])*i(f[0],f[3]))},F.pointsOnEllipse=function(f){var u=f.length;if(u!==n+1)return!1;u=n;for(var l=0;l<u;l++){var m=(u*2-l)%u,h=(u/2+m)%u,w=(u/2+l)%u;if(!o(i(f[l],f[w]),i(f[m],f[h])))return!1}return!0},F.handleEllipse=function(f,u,l){if(!f)return[u,l];var m=F.ellipseOver({x0:u[0],y0:u[1],x1:l[0],y1:l[1]}),h=(m.x1+m.x0)/2,w=(m.y1+m.y0)/2,c=(m.x1-m.x0)/2,a=(m.y1-m.y0)/2;c||(c=a=a/E),a||(a=c=c/E);for(var p=[],x=0;x<n;x++){var A=x*2*Math.PI/n;p.push([h+c*Math.cos(A),w+a*Math.sin(A)])}return p},F.ellipseOver=function(f){var u=f.x0,l=f.y0,m=f.x1,h=f.y1,w=m-u,c=h-l;u-=w,l-=c;var a=(u+m)/2,p=(l+h)/2,x=E;return w*=x,c*=x,{x0:a-w,y0:p-c,x1:a+w,y1:p+c}},F.fixDatesForPaths=function(f,u,l){var m=u.type==="date",h=l.type==="date";if(!m&&!h)return f;for(var w=0;w<f.length;w++)for(var c=0;c<f[w].length;c++)for(var a=0;a+2<f[w][c].length;a+=2)m&&(f[w][c][a+1]=f[w][c][a+1].replace(" ","_")),h&&(f[w][c][a+2]=f[w][c][a+2].replace(" ","_"));return f}},93940:function(U,F,e){var d=e(72760),S=d.drawMode,n=d.openMode,E=e(7e3),T=E.i000,v=E.i090,g=E.i180,r=E.i270,t=E.cos45,o=E.sin45,i=e(5840),f=i.p2r,u=i.r2p,l=e(1936),m=l.clearOutline,h=e(9856),w=h.readPaths,c=h.writePaths,a=h.ellipseOver,p=h.fixDatesForPaths;function x(P,y){if(P.length){var C=P[0][0];if(C){var M=y.gd,s=y.isActiveShape,_=y.dragmode,b=(M.layout||{}).shapes||[];if(!S(_)&&s!==void 0){var k=M._fullLayout._activeShapeIndex;if(k<b.length)switch(M._fullLayout.shapes[k].type){case"rect":_="drawrect";break;case"circle":_="drawcircle";break;case"line":_="drawline";break;case"path":var D=b[k].path||"";D[D.length-1]==="Z"?_="drawclosedpath":_="drawopenpath";break}}var V=A(P,y,_);m(M);for(var O=y.editHelpers,N=(O||{}).modifyItem,B=[],z=0;z<b.length;z++){var H=M._fullLayout.shapes[z];if(B[z]=H._input,s!==void 0&&z===M._fullLayout._activeShapeIndex){var X=V;switch(H.type){case"line":case"rect":case"circle":N("x0",X.x0),N("x1",X.x1),N("y0",X.y0),N("y1",X.y1);break;case"path":N("path",X.path);break}}}return s===void 0?(B.push(V),B):O?O.getUpdateObj():{}}}}function A(P,y,C){var M=P[0][0],s=y.gd,_=M.getAttribute("d"),b=s._fullLayout.newshape,k=y.plotinfo,D=y.isActiveShape,V=k.xaxis,O=k.yaxis,N=!!k.domain||!k.xaxis,B=!!k.domain||!k.yaxis,z=n(C),H=w(_,s,k,D),X={editable:!0,visible:b.visible,name:b.name,showlegend:b.showlegend,legend:b.legend,legendwidth:b.legendwidth,legendgroup:b.legendgroup,legendgrouptitle:{text:b.legendgrouptitle.text,font:b.legendgrouptitle.font},legendrank:b.legendrank,label:b.label,xref:N?"paper":V._id,yref:B?"paper":O._id,layer:b.layer,opacity:b.opacity,line:{color:b.line.color,width:b.line.width,dash:b.line.dash}};z||(X.fillcolor=b.fillcolor,X.fillrule=b.fillrule);var $;if(H.length===1&&($=H[0]),$&&$.length===5&&C==="drawrect")X.type="rect",X.x0=$[0][1],X.y0=$[0][2],X.x1=$[2][1],X.y1=$[2][2];else if($&&C==="drawline")X.type="line",X.x0=$[0][1],X.y0=$[0][2],X.x1=$[1][1],X.y1=$[1][2];else if($&&C==="drawcircle"){X.type="circle";var ne=$[T][1],q=$[v][1],ue=$[g][1],te=$[r][1],J=$[T][2],ie=$[v][2],K=$[g][2],ee=$[r][2],le=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),j=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");le&&(ne=u(k.xaxis,ne),q=u(k.xaxis,q),ue=u(k.xaxis,ue),te=u(k.xaxis,te)),j&&(J=u(k.yaxis,J),ie=u(k.yaxis,ie),K=u(k.yaxis,K),ee=u(k.yaxis,ee));var Z=(q+te)/2,fe=(J+K)/2,re=(te-q+ue-ne)/2,ce=(ee-ie+K-J)/2,xe=a({x0:Z,y0:fe,x1:Z+re*t,y1:fe+ce*o});le&&(xe.x0=f(k.xaxis,xe.x0),xe.x1=f(k.xaxis,xe.x1)),j&&(xe.y0=f(k.yaxis,xe.y0),xe.y1=f(k.yaxis,xe.y1)),X.x0=xe.x0,X.y0=xe.y0,X.x1=xe.x1,X.y1=xe.y1}else X.type="path",V&&O&&p(H,V,O),X.path=c(H),$=null;return X}U.exports={newShapes:x,createShapeObj:A}},1936:function(U){function F(d){var S=d._fullLayout._zoomlayer;S&&S.selectAll(".outline-controllers").remove()}function e(d){var S=d._fullLayout._zoomlayer;S&&S.selectAll(".select-outline").remove(),d._fullLayout._outlining=!1}U.exports={clearOutlineControllers:F,clearOutline:e}},65152:function(U,F,e){var d=e(85448),S=e(3400),n=e(54460);F.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(v){return v}},F.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(v){return v}},F.decodeDate=function(T){return function(v){return v.replace&&(v=v.replace("_"," ")),T(v)}},F.encodeDate=function(T){return function(v){return T(v).replace(" ","_")}},F.extractPathCoords=function(T,v,g){var r=[],t=T.match(d.segmentRE);return t.forEach(function(o){var i=v[o.charAt(0)].drawn;if(i!==void 0){var f=o.substr(1).match(d.paramRE);if(!(!f||f.length<i)){var u=f[i],l=g?u:S.cleanNumber(u);r.push(l)}}}),r},F.getDataToPixel=function(T,v,g,r){var t=T._fullLayout._size,o;if(v)if(r==="domain")o=function(f){return v._length*(g?1-f:f)+v._offset};else{var i=F.shapePositionToRange(v);o=function(f){return v._offset+v.r2p(i(f,!0))},v.type==="date"&&(o=F.decodeDate(o))}else g?o=function(f){return t.t+t.h*(1-f)}:o=function(f){return t.l+t.w*f};return o},F.getPixelToData=function(T,v,g,r){var t=T._fullLayout._size,o;if(v)if(r==="domain")o=function(f){var u=(f-v._offset)/v._length;return g?1-u:u};else{var i=F.rangeToShapePosition(v);o=function(f){return i(v.p2r(f-v._offset))}}else g?o=function(f){return 1-(f-t.t)/t.h}:o=function(f){return(f-t.l)/t.w};return o},F.roundPositionForSharpStrokeRendering=function(T,v){var g=Math.round(v%2)===1,r=Math.round(T);return g?r+.5:r},F.makeShapesOptionsAndPlotinfo=function(T,v){var g=T._fullLayout.shapes[v]||{},r=T._fullLayout._plots[g.xref+g.yref],t=!!r;return t?r._hadPlotinfo=!0:(r={},g.xref&&g.xref!=="paper"&&(r.xaxis=T._fullLayout[g.xref+"axis"]),g.yref&&g.yref!=="paper"&&(r.yaxis=T._fullLayout[g.yref+"axis"])),r.xsizemode=g.xsizemode,r.ysizemode=g.ysizemode,r.xanchor=g.xanchor,r.yanchor=g.yanchor,{options:g,plotinfo:r}},F.makeSelectionsOptionsAndPlotinfo=function(T,v){var g=T._fullLayout.selections[v]||{},r=T._fullLayout._plots[g.xref+g.yref],t=!!r;return t?r._hadPlotinfo=!0:(r={},g.xref&&(r.xaxis=T._fullLayout[g.xref+"axis"]),g.yref&&(r.yaxis=T._fullLayout[g.yref+"axis"])),{options:g,plotinfo:r}},F.getPathString=function(T,v){var g=v.type,r=n.getRefType(v.xref),t=n.getRefType(v.yref),o=n.getFromId(T,v.xref),i=n.getFromId(T,v.yref),f=T._fullLayout._size,u,l,m,h,w,c,a,p;if(o?r==="domain"?l=function(k){return o._offset+o._length*k}:(u=F.shapePositionToRange(o),l=function(k){return o._offset+o.r2p(u(k,!0))}):l=function(k){return f.l+f.w*k},i?t==="domain"?h=function(k){return i._offset+i._length*(1-k)}:(m=F.shapePositionToRange(i),h=function(k){return i._offset+i.r2p(m(k,!0))}):h=function(k){return f.t+f.h*(1-k)},g==="path")return o&&o.type==="date"&&(l=F.decodeDate(l)),i&&i.type==="date"&&(h=F.decodeDate(h)),E(v,l,h);if(v.xsizemode==="pixel"){var x=l(v.xanchor);w=x+v.x0,c=x+v.x1}else w=l(v.x0),c=l(v.x1);if(v.ysizemode==="pixel"){var A=h(v.yanchor);a=A-v.y0,p=A-v.y1}else a=h(v.y0),p=h(v.y1);if(g==="line")return"M"+w+","+a+"L"+c+","+p;if(g==="rect")return"M"+w+","+a+"H"+c+"V"+p+"H"+w+"Z";var P=(w+c)/2,y=(a+p)/2,C=Math.abs(P-w),M=Math.abs(y-a),s="A"+C+","+M,_=P+C+","+y,b=P+","+(y-M);return"M"+_+s+" 0 1,1 "+b+s+" 0 0,1 "+_+"Z"};function E(T,v,g){var r=T.path,t=T.xsizemode,o=T.ysizemode,i=T.xanchor,f=T.yanchor;return r.replace(d.segmentRE,function(u){var l=0,m=u.charAt(0),h=d.paramIsX[m],w=d.paramIsY[m],c=d.numParams[m],a=u.substr(1).replace(d.paramRE,function(p){return h[l]?t==="pixel"?p=v(i)+Number(p):p=v(p):w[l]&&(o==="pixel"?p=g(f)-Number(p):p=g(p)),l++,l>c&&(p="X"),p});return l>c&&(a=a.replace(/[\s,]*X.*/,""),S.log("Ignoring extra params in segment "+u)),m+a})}},41592:function(U,F,e){var d=e(4016);U.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:d.draw,drawOne:d.drawOne}},97728:function(U){function F(u,l){return l?l.d2l(u):u}function e(u,l){return l?l.l2d(u):u}function d(u){return u.x0}function S(u){return u.x1}function n(u){return u.y0}function E(u){return u.y1}function T(u,l){return F(u.x1,l)-F(u.x0,l)}function v(u,l,m){return F(u.y1,m)-F(u.y0,m)}function g(u,l){return Math.abs(T(u,l))}function r(u,l,m){return Math.abs(v(u,l,m))}function t(u,l,m){return u.type!=="line"?void 0:Math.sqrt(Math.pow(T(u,l),2)+Math.pow(v(u,l,m),2))}function o(u,l){return e((F(u.x1,l)+F(u.x0,l))/2,l)}function i(u,l,m){return e((F(u.y1,m)+F(u.y0,m))/2,m)}function f(u,l,m){return u.type!=="line"?void 0:v(u,l,m)/T(u,l)}U.exports={x0:d,x1:S,y0:n,y1:E,slope:f,dx:T,dy:v,width:g,height:r,length:t,xcenter:o,ycenter:i}},89861:function(U,F,e){var d=e(25376),S=e(66741),n=e(92880).extendDeepAll,E=e(67824).overrideAll,T=e(85656),v=e(31780).templatedArray,g=e(60876),r=v("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});U.exports=E(v("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(S({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:T.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:d({})},font:d({}),activebgcolor:{valType:"color",dflt:g.gripBgActiveColor},bgcolor:{valType:"color",dflt:g.railBgColor},bordercolor:{valType:"color",dflt:g.railBorderColor},borderwidth:{valType:"number",min:0,dflt:g.railBorderWidth},ticklen:{valType:"number",min:0,dflt:g.tickLength},tickcolor:{valType:"color",dflt:g.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:g.minorTickLength}}),"arraydraw","from-root")},60876:function(U){U.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(U,F,e){var d=e(3400),S=e(51272),n=e(89861),E=e(60876),T=E.name,v=n.steps;U.exports=function(o,i){S(o,i,{name:T,handleItemDefaults:g})};function g(t,o,i){function f(p,x){return d.coerce(t,o,n,p,x)}for(var u=S(t,o,{name:"steps",handleItemDefaults:r}),l=0,m=0;m<u.length;m++)u[m].visible&&l++;var h;if(l<2?h=o.visible=!1:h=f("visible"),!!h){o._stepCount=l;var w=o._visibleSteps=d.filterVisible(u),c=f("active");(u[c]||{}).visible||(o.active=w[0]._index),f("x"),f("y"),d.noneOrAll(t,o,["x","y"]),f("xanchor"),f("yanchor"),f("len"),f("lenmode"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),d.coerceFont(f,"font",i.font);var a=f("currentvalue.visible");a&&(f("currentvalue.xanchor"),f("currentvalue.prefix"),f("currentvalue.suffix"),f("currentvalue.offset"),d.coerceFont(f,"currentvalue.font",o.font)),f("transition.duration"),f("transition.easing"),f("bgcolor"),f("activebgcolor"),f("bordercolor"),f("borderwidth"),f("ticklen"),f("tickwidth"),f("tickcolor"),f("minorticklen")}}function r(t,o){function i(l,m){return d.coerce(t,o,v,l,m)}var f;if(t.method!=="skip"&&!Array.isArray(t.args)?f=o.visible=!1:f=i("visible"),f){i("method"),i("args");var u=i("label","step-"+o._index);i("value",u),i("execute")}}},79664:function(U,F,e){var d=e(33428),S=e(7316),n=e(76308),E=e(43616),T=e(3400),v=T.strTranslate,g=e(72736),r=e(31780).arrayEditor,t=e(60876),o=e(84284),i=o.LINE_SPACING,f=o.FROM_TL,u=o.FROM_BR;U.exports=function(N){var B=N._context.staticPlot,z=N._fullLayout,H=m(z,N),X=z._infolayer.selectAll("g."+t.containerClassName).data(H.length>0?[0]:[]);X.enter().append("g").classed(t.containerClassName,!0).style("cursor",B?null:"ew-resize");function $(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),S.autoMargin(N,l(te))}if(X.exit().each(function(){d.select(this).selectAll("g."+t.groupClassName).each($)}).remove(),H.length!==0){var ne=X.selectAll("g."+t.groupClassName).data(H,h);ne.enter().append("g").classed(t.groupClassName,!0),ne.exit().each($).remove();for(var q=0;q<H.length;q++){var ue=H[q];w(N,ue)}ne.each(function(te){var J=d.select(this);s(te),S.manageCommandObserver(N,te,te._visibleSteps,function(ie){var K=J.data()[0];K.active!==ie.index&&(K._dragging||y(N,J,K,ie.index,!1,!0))}),c(N,d.select(this),te)})}};function l(O){return t.autoMarginIdRoot+O._index}function m(O,N){for(var B=O[t.name],z=[],H=0;H<B.length;H++){var X=B[H];X.visible&&(X._gd=N,z.push(X))}return z}function h(O){return O._index}function w(O,N){var B=E.tester.selectAll("g."+t.labelGroupClass).data(N._visibleSteps);B.enter().append("g").classed(t.labelGroupClass,!0);var z=0,H=0;B.each(function(ee){var le=d.select(this),j=x(le,{step:ee},N),Z=j.node();if(Z){var fe=E.bBox(Z);H=Math.max(H,fe.height),z=Math.max(z,fe.width)}}),B.remove();var X=N._dims={};X.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var $=O._fullLayout._size;X.lx=$.l+$.w*N.x,X.ly=$.t+$.h*(1-N.y),N.lenmode==="fraction"?X.outerLength=Math.round($.w*N.len):X.outerLength=N.len,X.inputAreaStart=0,X.inputAreaLength=Math.round(X.outerLength-N.pad.l-N.pad.r);var ne=X.inputAreaLength-2*t.stepInset,q=ne/(N._stepCount-1),ue=z+t.labelPadding;if(X.labelStride=Math.max(1,Math.ceil(ue/q)),X.labelHeight=H,X.currentValueMaxWidth=0,X.currentValueHeight=0,X.currentValueTotalHeight=0,X.currentValueMaxLines=1,N.currentvalue.visible){var te=E.tester.append("g");B.each(function(ee){var le=a(te,N,ee.label),j=le.node()&&E.bBox(le.node())||{width:0,height:0},Z=g.lineCount(le);X.currentValueMaxWidth=Math.max(X.currentValueMaxWidth,Math.ceil(j.width)),X.currentValueHeight=Math.max(X.currentValueHeight,Math.ceil(j.height)),X.currentValueMaxLines=Math.max(X.currentValueMaxLines,Z)}),X.currentValueTotalHeight=X.currentValueHeight+N.currentvalue.offset,te.remove()}X.height=X.currentValueTotalHeight+t.tickOffset+N.ticklen+t.labelOffset+X.labelHeight+N.pad.t+N.pad.b;var J="left";T.isRightAnchor(N)&&(X.lx-=X.outerLength,J="right"),T.isCenterAnchor(N)&&(X.lx-=X.outerLength/2,J="center");var ie="top";T.isBottomAnchor(N)&&(X.ly-=X.height,ie="bottom"),T.isMiddleAnchor(N)&&(X.ly-=X.height/2,ie="middle"),X.outerLength=Math.ceil(X.outerLength),X.height=Math.ceil(X.height),X.lx=Math.round(X.lx),X.ly=Math.round(X.ly);var K={y:N.y,b:X.height*u[ie],t:X.height*f[ie]};N.lenmode==="fraction"?(K.l=0,K.xl=N.x-N.len*f[J],K.r=0,K.xr=N.x+N.len*u[J]):(K.x=N.x,K.l=X.outerLength*f[J],K.r=X.outerLength*u[J]),S.autoMargin(O,l(N),K)}function c(O,N,B){(B.steps[B.active]||{}).visible||(B.active=B._visibleSteps[0]._index),N.call(a,B).call(V,B).call(A,B).call(M,B).call(D,O,B).call(p,O,B);var z=B._dims;E.setTranslate(N,z.lx+B.pad.l,z.ly+B.pad.t),N.call(_,B,!1),N.call(a,B)}function a(O,N,B){if(N.currentvalue.visible){var z=N._dims,H,X;switch(N.currentvalue.xanchor){case"right":H=z.inputAreaLength-t.currentValueInset-z.currentValueMaxWidth,X="left";break;case"center":H=z.inputAreaLength*.5,X="middle";break;default:H=t.currentValueInset,X="left"}var $=T.ensureSingle(O,"text",t.labelClass,function(ie){ie.attr({"text-anchor":X,"data-notex":1})}),ne=N.currentvalue.prefix?N.currentvalue.prefix:"";if(typeof B=="string")ne+=B;else{var q=N.steps[N.active].label,ue=N._gd._fullLayout._meta;ue&&(q=T.templateString(q,ue)),ne+=q}N.currentvalue.suffix&&(ne+=N.currentvalue.suffix),$.call(E.font,N.currentvalue.font).text(ne).call(g.convertToTspans,N._gd);var te=g.lineCount($),J=(z.currentValueMaxLines+1-te)*N.currentvalue.font.size*i;return g.positionText($,H,J),$}}function p(O,N,B){var z=T.ensureSingle(O,"rect",t.gripRectClass,function(H){H.call(C,N,O,B).style("pointer-events","all")});z.attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(n.stroke,B.bordercolor).call(n.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px")}function x(O,N,B){var z=T.ensureSingle(O,"text",t.labelClass,function($){$.attr({"text-anchor":"middle","data-notex":1})}),H=N.step.label,X=B._gd._fullLayout._meta;return X&&(H=T.templateString(H,X)),z.call(E.font,B.font).text(H).call(g.convertToTspans,B._gd),z}function A(O,N){var B=T.ensureSingle(O,"g",t.labelsClass),z=N._dims,H=B.selectAll("g."+t.labelGroupClass).data(z.labelSteps);H.enter().append("g").classed(t.labelGroupClass,!0),H.exit().remove(),H.each(function(X){var $=d.select(this);$.call(x,X,N),E.setTranslate($,b(N,X.fraction),t.tickOffset+N.ticklen+N.font.size*i+t.labelOffset+z.currentValueTotalHeight)})}function P(O,N,B,z,H){var X=Math.round(z*(B._stepCount-1)),$=B._visibleSteps[X]._index;$!==B.active&&y(O,N,B,$,!0,H)}function y(O,N,B,z,H,X){var $=B.active;B.active=z,r(O.layout,t.name,B).applyUpdate("active",z);var ne=B.steps[B.active];N.call(_,B,X),N.call(a,B),O.emit("plotly_sliderchange",{slider:B,step:B.steps[B.active],interaction:H,previousActive:$}),ne&&ne.method&&H&&(N._nextMethod?(N._nextMethod.step=ne,N._nextMethod.doCallback=H,N._nextMethod.doTransition=X):(N._nextMethod={step:ne,doCallback:H,doTransition:X},N._nextMethodRaf=window.requestAnimationFrame(function(){var q=N._nextMethod.step;q.method&&(q.execute&&S.executeAPICommand(O,q.method,q.args),N._nextMethod=null,N._nextMethodRaf=null)})))}function C(O,N,B){if(N._context.staticPlot)return;var z=B.node(),H=d.select(N);function X(){return B.data()[0]}function $(){var ne=X();N.emit("plotly_sliderstart",{slider:ne});var q=B.select("."+t.gripRectClass);d.event.stopPropagation(),d.event.preventDefault(),q.call(n.fill,ne.activebgcolor);var ue=k(ne,d.mouse(z)[0]);P(N,B,ne,ue,!0),ne._dragging=!0;function te(){var ie=X(),K=k(ie,d.mouse(z)[0]);P(N,B,ie,K,!1)}H.on("mousemove",te),H.on("touchmove",te);function J(){var ie=X();ie._dragging=!1,q.call(n.fill,ie.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),N.emit("plotly_sliderend",{slider:ie,step:ie.steps[ie.active]})}H.on("mouseup",J),H.on("touchend",J)}O.on("mousedown",$),O.on("touchstart",$)}function M(O,N){var B=O.selectAll("rect."+t.tickRectClass).data(N._visibleSteps),z=N._dims;B.enter().append("rect").classed(t.tickRectClass,!0),B.exit().remove(),B.attr({width:N.tickwidth+"px","shape-rendering":"crispEdges"}),B.each(function(H,X){var $=X%z.labelStride===0,ne=d.select(this);ne.attr({height:$?N.ticklen:N.minorticklen}).call(n.fill,N.tickcolor),E.setTranslate(ne,b(N,X/(N._stepCount-1))-.5*N.tickwidth,($?t.tickOffset:t.minorTickOffset)+z.currentValueTotalHeight)})}function s(O){var N=O._dims;N.labelSteps=[];for(var B=O._stepCount,z=0;z<B;z+=N.labelStride)N.labelSteps.push({fraction:z/(B-1),step:O._visibleSteps[z]})}function _(O,N,B){for(var z=O.select("rect."+t.gripRectClass),H=0,X=0;X<N._stepCount;X++)if(N._visibleSteps[X]._index===N.active){H=X;break}var $=b(N,H/(N._stepCount-1));if(!N._invokingCommand){var ne=z;B&&N.transition.duration>0&&(ne=ne.transition().duration(N.transition.duration).ease(N.transition.easing)),ne.attr("transform",v($-t.gripWidth*.5,N._dims.currentValueTotalHeight))}}function b(O,N){var B=O._dims;return B.inputAreaStart+t.stepInset+(B.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,N))}function k(O,N){var B=O._dims;return Math.min(1,Math.max(0,(N-t.stepInset-B.inputAreaStart)/(B.inputAreaLength-2*t.stepInset-2*B.inputAreaStart)))}function D(O,N,B){var z=B._dims,H=T.ensureSingle(O,"rect",t.railTouchRectClass,function(X){X.call(C,N,O,B).style("pointer-events","all")});H.attr({width:z.inputAreaLength,height:Math.max(z.inputAreaWidth,t.tickOffset+B.ticklen+z.labelHeight)}).call(n.fill,B.bgcolor).attr("opacity",0),E.setTranslate(H,0,z.currentValueTotalHeight)}function V(O,N){var B=N._dims,z=B.inputAreaLength-t.railInset*2,H=T.ensureSingle(O,"rect",t.railRectClass);H.attr({width:z,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(n.stroke,N.bordercolor).call(n.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px"),E.setTranslate(H,t.railInset,(B.inputAreaWidth-t.railWidth)*.5+B.currentValueTotalHeight)}},97544:function(U,F,e){var d=e(60876);U.exports={moduleType:"component",name:d.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(U,F,e){var d=e(33428),S=e(38248),n=e(7316),E=e(24040),T=e(3400),v=T.strTranslate,g=e(43616),r=e(76308),t=e(72736),o=e(13448),i=e(84284).OPPOSITE_SIDE,f=/ [XY][0-9]* /;function u(l,m,h){var w=h.propContainer,c=h.propName,a=h.placeholder,p=h.traceIndex,x=h.avoid||{},A=h.attributes,P=h.transform,y=h.containerGroup,C=l._fullLayout,M=1,s=!1,_=w.title,b=(_&&_.text?_.text:"").trim(),k=_&&_.font?_.font:{},D=k.family,V=k.size,O=k.color,N=k.weight,B=k.style,z=k.variant,H=k.textcase,X=k.lineposition,$=k.shadow,ne;c==="title.text"?ne="titleText":c.indexOf("axis")!==-1?ne="axisTitleText":c.indexOf("colorbar"!==-1)&&(ne="colorbarTitleText");var q=l._context.edits[ne];b===""?M=0:b.replace(f," % ")===a.replace(f," % ")&&(M=.2,s=!0,q||(b="")),h._meta?b=T.templateString(b,h._meta):C._meta&&(b=T.templateString(b,C._meta));var ue=b||q,te;y||(y=T.ensureSingle(C._infolayer,"g","g-"+m),te=C._hColorbarMoveTitle);var J=y.selectAll("text").data(ue?[0]:[]);if(J.enter().append("text"),J.text(b).attr("class",m),J.exit().remove(),!ue)return y;function ie(j){T.syncOrAsync([K,ee],j)}function K(j){var Z;return!P&&te&&(P={}),P?(Z="",P.rotate&&(Z+="rotate("+[P.rotate,A.x,A.y]+")"),(P.offset||te)&&(Z+=v(0,(P.offset||0)-(te||0)))):Z=null,j.attr("transform",Z),j.style("opacity",M*r.opacity(O)).call(g.font,{color:r.rgb(O),size:d.round(V,2),family:D,weight:N,style:B,variant:z,textcase:H,shadow:$,lineposition:X}).attr(A).call(t.convertToTspans,l),n.previousPromises(l)}function ee(j){var Z=d.select(j.node().parentNode);if(x&&x.selection&&x.side&&b){Z.attr("transform",null);var fe=i[x.side],re=x.side==="left"||x.side==="top"?-1:1,ce=S(x.pad)?x.pad:2,xe=g.bBox(Z.node()),Te={t:0,b:0,l:0,r:0},we=l._fullLayout._reservedMargin;for(var _e in we)for(var ke in we[_e]){var Ne=we[_e][ke];Te[ke]=Math.max(Te[ke],Ne)}var Ee={left:Te.l,top:Te.t,right:C.width-Te.r,bottom:C.height-Te.b},ze=x.maxShift||re*(Ee[x.side]-xe[x.side]),Ce=0;if(ze<0)Ce=ze;else{var Oe=x.offsetLeft||0,Le=x.offsetTop||0;xe.left-=Oe,xe.right-=Oe,xe.top-=Le,xe.bottom-=Le,x.selection.each(function(){var rt=g.bBox(this);T.bBoxIntersect(xe,rt,ce)&&(Ce=Math.max(Ce,re*(rt[x.side]-xe[fe])+ce))}),Ce=Math.min(ze,Ce),w._titleScoot=Math.abs(Ce)}if(Ce>0||ze<0){var Ge={left:[-Ce,0],right:[Ce,0],top:[0,-Ce],bottom:[0,Ce]}[x.side];Z.attr("transform",v(Ge[0],Ge[1]))}}}J.call(ie);function le(){M=0,s=!0,J.text(a).on("mouseover.opacity",function(){d.select(this).transition().duration(o.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(o.HIDE_PLACEHOLDER).style("opacity",0)})}return q&&(b?J.on(".opacity",null):le(),J.call(t.makeEditable,{gd:l}).on("edit",function(j){p!==void 0?E.call("_guiRestyle",l,c,j,p):E.call("_guiRelayout",l,c,j)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(ie)}).on("input",function(j){this.text(j||" ").call(t.positionText,A.x,A.y)})),J.classed("js-placeholder",s),y}U.exports={draw:u}},88444:function(U,F,e){var d=e(25376),S=e(22548),n=e(92880).extendFlat,E=e(67824).overrideAll,T=e(66741),v=e(31780).templatedArray,g=v("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});U.exports=E(v("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:g,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:n(T({editType:"arraydraw"}),{}),font:d({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:S.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(U){U.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},91384:function(U,F,e){var d=e(3400),S=e(51272),n=e(88444),E=e(73712),T=E.name,v=n.buttons;U.exports=function(o,i){var f={name:T,handleItemDefaults:g};S(o,i,f)};function g(t,o,i){function f(m,h){return d.coerce(t,o,n,m,h)}var u=S(t,o,{name:"buttons",handleItemDefaults:r}),l=f("visible",u.length>0);l&&(f("active"),f("direction"),f("type"),f("showactive"),f("x"),f("y"),d.noneOrAll(t,o,["x","y"]),f("xanchor"),f("yanchor"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),d.coerceFont(f,"font",i.font),f("bgcolor",i.paper_bgcolor),f("bordercolor"),f("borderwidth"))}function r(t,o){function i(u,l){return d.coerce(t,o,v,u,l)}var f=i("visible",t.method==="skip"||Array.isArray(t.args));f&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}},14420:function(U,F,e){var d=e(33428),S=e(7316),n=e(76308),E=e(43616),T=e(3400),v=e(72736),g=e(31780).arrayEditor,r=e(84284).LINE_SPACING,t=e(73712),o=e(37400);U.exports=function(k){var D=k._fullLayout,V=T.filterVisible(D[t.name]);function O(q){S.autoMargin(k,M(q))}var N=D._menulayer.selectAll("g."+t.containerClassName).data(V.length>0?[0]:[]);if(N.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),N.exit().each(function(){d.select(this).selectAll("g."+t.headerGroupClassName).each(O)}).remove(),V.length!==0){var B=N.selectAll("g."+t.headerGroupClassName).data(V,i);B.enter().append("g").classed(t.headerGroupClassName,!0);for(var z=T.ensureSingle(N,"g",t.dropdownButtonGroupClassName,function(q){q.style("pointer-events","all")}),H=0;H<V.length;H++){var X=V[H];C(k,X)}var $="updatemenus"+D._uid,ne=new o(k,z,$);B.enter().size()&&(z.node().parentNode.appendChild(z.node()),z.call(_)),B.exit().each(function(q){z.call(_),O(q)}).remove(),B.each(function(q){var ue=d.select(this),te=q.type==="dropdown"?z:null;S.manageCommandObserver(k,q,q.buttons,function(J){l(k,q,q.buttons[J.index],ue,te,ne,J.index,!0)}),q.type==="dropdown"?(m(k,ue,z,ne,q),u(z,q)&&h(k,ue,z,ne,q)):h(k,ue,null,null,q)})}};function i(b){return b._index}function f(b){return+b.attr(t.menuIndexAttrName)==-1}function u(b,k){return+b.attr(t.menuIndexAttrName)===k._index}function l(b,k,D,V,O,N,B,z){k.active=B,g(b.layout,t.name,k).applyUpdate("active",B),k.type==="buttons"?h(b,V,null,null,k):k.type==="dropdown"&&(O.attr(t.menuIndexAttrName,"-1"),m(b,V,O,N,k),z||h(b,V,O,N,k))}function m(b,k,D,V,O){var N=T.ensureSingle(k,"g",t.headerClassName,function(q){q.style("pointer-events","all")}),B=O._dims,z=O.active,H=O.buttons[z]||t.blankHeaderOpts,X={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},$={width:B.headerWidth,height:B.headerHeight};N.call(a,O,H,b).call(s,O,X,$);var ne=T.ensureSingle(k,"text",t.headerArrowClassName,function(q){q.attr("text-anchor","end").call(E.font,O.font).text(t.arrowSymbol[O.direction])});ne.attr({x:B.headerWidth-t.arrowOffsetX+O.pad.l,y:B.headerHeight/2+t.textOffsetY+O.pad.t}),N.on("click",function(){D.call(_,String(u(D,O)?-1:O._index)),h(b,k,D,V,O)}),N.on("mouseover",function(){N.call(P)}),N.on("mouseout",function(){N.call(y,O)}),E.setTranslate(k,B.lx,B.ly)}function h(b,k,D,V,O){D||(D=k,D.attr("pointer-events","all"));var N=!f(D)||O.type==="buttons"?O.buttons:[],B=O.type==="dropdown"?t.dropdownButtonClassName:t.buttonClassName,z=D.selectAll("g."+B).data(T.filterVisible(N)),H=z.enter().append("g").classed(B,!0),X=z.exit();O.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),X.transition().attr("opacity","0").remove()):X.remove();var $=0,ne=0,q=O._dims,ue=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(ue?ne=q.headerHeight+t.gapButtonHeader:$=q.headerWidth+t.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(ne=-t.gapButtonHeader+t.gapButton-q.openHeight),O.type==="dropdown"&&O.direction==="left"&&($=-t.gapButtonHeader+t.gapButton-q.openWidth);var te={x:q.lx+$+O.pad.l,y:q.ly+ne+O.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},J={l:te.x+O.borderwidth,t:te.y+O.borderwidth};z.each(function(ie,K){var ee=d.select(this);ee.call(a,O,ie,b).call(s,O,te),ee.on("click",function(){d.event.defaultPrevented||(ie.execute&&(ie.args2&&O.active===K?(l(b,O,ie,k,D,V,-1),S.executeAPICommand(b,ie.method,ie.args2)):(l(b,O,ie,k,D,V,K),S.executeAPICommand(b,ie.method,ie.args))),b.emit("plotly_buttonclicked",{menu:O,button:ie,active:O.active}))}),ee.on("mouseover",function(){ee.call(P)}),ee.on("mouseout",function(){ee.call(y,O),z.call(A,O)})}),z.call(A,O),ue?(J.w=Math.max(q.openWidth,q.headerWidth),J.h=te.y-J.t):(J.w=te.x-J.l,J.h=Math.max(q.openHeight,q.headerHeight)),J.direction=O.direction,V&&(z.size()?w(b,k,D,V,O,J):c(V))}function w(b,k,D,V,O,N){var B=O.direction,z=B==="up"||B==="down",H=O._dims,X=O.active,$,ne,q;if(z)for(ne=0,q=0;q<X;q++)ne+=H.heights[q]+t.gapButton;else for($=0,q=0;q<X;q++)$+=H.widths[q]+t.gapButton;V.enable(N,$,ne),V.hbar&&V.hbar.attr("opacity","0").transition().attr("opacity","1"),V.vbar&&V.vbar.attr("opacity","0").transition().attr("opacity","1")}function c(b){var k=!!b.hbar,D=!!b.vbar;k&&b.hbar.transition().attr("opacity","0").each("end",function(){k=!1,D||b.disable()}),D&&b.vbar.transition().attr("opacity","0").each("end",function(){D=!1,k||b.disable()})}function a(b,k,D,V){b.call(p,k).call(x,k,D,V)}function p(b,k){var D=T.ensureSingle(b,"rect",t.itemRectClassName,function(V){V.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})});D.call(n.stroke,k.bordercolor).call(n.fill,k.bgcolor).style("stroke-width",k.borderwidth+"px")}function x(b,k,D,V){var O=T.ensureSingle(b,"text",t.itemTextClassName,function(z){z.attr({"text-anchor":"start","data-notex":1})}),N=D.label,B=V._fullLayout._meta;B&&(N=T.templateString(N,B)),O.call(E.font,k.font).text(N).call(v.convertToTspans,V)}function A(b,k){var D=k.active;b.each(function(V,O){var N=d.select(this);O===D&&k.showactive&&N.select("rect."+t.itemRectClassName).call(n.fill,t.activeColor)})}function P(b){b.select("rect."+t.itemRectClassName).call(n.fill,t.hoverColor)}function y(b,k){b.select("rect."+t.itemRectClassName).call(n.fill,k.bgcolor)}function C(b,k){var D=k._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},V=E.tester.selectAll("g."+t.dropdownButtonClassName).data(T.filterVisible(k.buttons));V.enter().append("g").classed(t.dropdownButtonClassName,!0);var O=["up","down"].indexOf(k.direction)!==-1;V.each(function($,ne){var q=d.select(this);q.call(a,k,$,b);var ue=q.select("."+t.itemTextClassName),te=ue.node()&&E.bBox(ue.node()).width,J=Math.max(te+t.textPadX,t.minWidth),ie=k.font.size*r,K=v.lineCount(ue),ee=Math.max(ie*K,t.minHeight)+t.textOffsetY;ee=Math.ceil(ee),J=Math.ceil(J),D.widths[ne]=J,D.heights[ne]=ee,D.height1=Math.max(D.height1,ee),D.width1=Math.max(D.width1,J),O?(D.totalWidth=Math.max(D.totalWidth,J),D.openWidth=D.totalWidth,D.totalHeight+=ee+t.gapButton,D.openHeight+=ee+t.gapButton):(D.totalWidth+=J+t.gapButton,D.openWidth+=J+t.gapButton,D.totalHeight=Math.max(D.totalHeight,ee),D.openHeight=D.totalHeight)}),O?D.totalHeight-=t.gapButton:D.totalWidth-=t.gapButton,D.headerWidth=D.width1+t.arrowPadX,D.headerHeight=D.height1,k.type==="dropdown"&&(O?(D.width1+=t.arrowPadX,D.totalHeight=D.height1):D.totalWidth=D.width1,D.totalWidth+=t.arrowPadX),V.remove();var N=D.totalWidth+k.pad.l+k.pad.r,B=D.totalHeight+k.pad.t+k.pad.b,z=b._fullLayout._size;D.lx=z.l+z.w*k.x,D.ly=z.t+z.h*(1-k.y);var H="left";T.isRightAnchor(k)&&(D.lx-=N,H="right"),T.isCenterAnchor(k)&&(D.lx-=N/2,H="center");var X="top";T.isBottomAnchor(k)&&(D.ly-=B,X="bottom"),T.isMiddleAnchor(k)&&(D.ly-=B/2,X="middle"),D.totalWidth=Math.ceil(D.totalWidth),D.totalHeight=Math.ceil(D.totalHeight),D.lx=Math.round(D.lx),D.ly=Math.round(D.ly),S.autoMargin(b,M(k),{x:k.x,y:k.y,l:N*({right:1,center:.5}[H]||0),r:N*({left:1,center:.5}[H]||0),b:B*({top:1,middle:.5}[X]||0),t:B*({bottom:1,middle:.5}[X]||0)})}function M(b){return t.autoMarginIdRoot+b._index}function s(b,k,D,V){V=V||{};var O=b.select("."+t.itemRectClassName),N=b.select("."+t.itemTextClassName),B=k.borderwidth,z=D.index,H=k._dims;E.setTranslate(b,B+D.x,B+D.y);var X=["up","down"].indexOf(k.direction)!==-1,$=V.height||(X?H.heights[z]:H.height1);O.attr({x:0,y:0,width:V.width||(X?H.width1:H.widths[z]),height:$});var ne=k.font.size*r,q=v.lineCount(N),ue=(q-1)*ne/2;v.positionText(N,t.textOffsetX,$/2-ue+t.textOffsetY),X?D.y+=H.heights[z]+D.yPad:D.x+=H.widths[z]+D.xPad,D.index++}function _(b,k){b.attr(t.menuIndexAttrName,k||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}},76908:function(U,F,e){var d=e(73712);U.exports={moduleType:"component",name:d.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(U,F,e){U.exports=T;var d=e(33428),S=e(76308),n=e(43616),E=e(3400);function T(v,g,r){this.gd=v,this.container=g,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(g,r,t){var o=this.gd._fullLayout,i=o.width,f=o.height;this.position=g;var u=this.position.l,l=this.position.w,m=this.position.t,h=this.position.h,w=this.position.direction,c=w==="down",a=w==="left",p=w==="right",x=w==="up",A=l,P=h,y,C,M,s;!c&&!a&&!p&&!x&&(this.position.direction="down",c=!0);var _=c||x;_?(y=u,C=y+A,c?(M=m,s=Math.min(M+P,f),P=s-M):(s=m+P,M=Math.max(s-P,0),P=s-M)):(M=m,s=M+P,a?(C=u+A,y=Math.max(C-A,0),A=C-y):(y=u,C=Math.min(y+A,i),A=C-y)),this._box={l:y,t:M,w:A,h:P};var b=l>A,k=T.barLength+2*T.barPad,D=T.barWidth+2*T.barPad,V=u,O=m+h;O+D>f&&(O=f-D);var N=this.container.selectAll("rect.scrollbar-horizontal").data(b?[0]:[]);N.exit().on(".drag",null).remove(),N.enter().append("rect").classed("scrollbar-horizontal",!0).call(S.fill,T.barColor),b?(this.hbar=N.attr({rx:T.barRadius,ry:T.barRadius,x:V,y:O,width:k,height:D}),this._hbarXMin=V+k/2,this._hbarTranslateMax=A-k):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var B=h>P,z=T.barWidth+2*T.barPad,H=T.barLength+2*T.barPad,X=u+l,$=m;X+z>i&&(X=i-z);var ne=this.container.selectAll("rect.scrollbar-vertical").data(B?[0]:[]);ne.exit().on(".drag",null).remove(),ne.enter().append("rect").classed("scrollbar-vertical",!0).call(S.fill,T.barColor),B?(this.vbar=ne.attr({rx:T.barRadius,ry:T.barRadius,x:X,y:$,width:z,height:H}),this._vbarYMin=$+H/2,this._vbarTranslateMax=P-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,ue=y-.5,te=B?C+z+.5:C+.5,J=M-.5,ie=b?s+D+.5:s+.5,K=o._topdefs.selectAll("#"+q).data(b||B?[0]:[]);if(K.exit().remove(),K.enter().append("clipPath").attr("id",q).append("rect"),b||B?(this._clipRect=K.select("rect").attr({x:Math.floor(ue),y:Math.floor(J),width:Math.ceil(te)-Math.floor(ue),height:Math.ceil(ie)-Math.floor(J)}),this.container.call(n.setClipUrl,q,this.gd),this.bg.attr({x:u,y:m,width:l,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(n.setClipUrl,null),delete this._clipRect),b||B){var ee=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var le=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault(),d.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));b&&this.hbar.on(".drag",null).call(le),B&&this.vbar.on(".drag",null).call(le)}this.setTranslate(r,t)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(n.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var g=this.translateX,r=this.translateY;this.hbar&&(g-=d.event.dx),this.vbar&&(r-=d.event.dy),this.setTranslate(g,r)},T.prototype._onBoxWheel=function(){var g=this.translateX,r=this.translateY;this.hbar&&(g+=d.event.deltaY),this.vbar&&(r+=d.event.deltaY),this.setTranslate(g,r)},T.prototype._onBarDrag=function(){var g=this.translateX,r=this.translateY;if(this.hbar){var t=g+this._hbarXMin,o=t+this._hbarTranslateMax,i=E.constrain(d.event.x,t,o),f=(i-t)/(o-t),u=this.position.w-this._box.w;g=f*u}if(this.vbar){var l=r+this._vbarYMin,m=l+this._vbarTranslateMax,h=E.constrain(d.event.y,l,m),w=(h-l)/(m-l),c=this.position.h-this._box.h;r=w*c}this.setTranslate(g,r)},T.prototype.setTranslate=function(g,r){var t=this.position.w-this._box.w,o=this.position.h-this._box.h;if(g=E.constrain(g||0,0,t),r=E.constrain(r||0,0,o),this.translateX=g,this.translateY=r,this.container.call(n.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var i=g/t;this.hbar.call(n.setTranslate,g+i*this._hbarTranslateMax,r)}if(this.vbar){var f=r/o;this.vbar.call(n.setTranslate,g,r+f*this._vbarTranslateMax)}}},84284:function(U){U.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(U){U.exports={axisRefDescription:function(F,e,d){return["If set to a",F,"axis id (e.g. *"+F+"* or","*"+F+"2*), the `"+F+"` position refers to a",F,"coordinate. If set to *paper*, the `"+F+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+d+"). If set to a",F,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+F+"2 domain* refers to the domain of the second",F," axis and a",F,"position of 0.5 refers to the","point between the",e,"and the",d,"of the domain of the","second",F,"axis."].join(" ")}}},48164:function(U){U.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},26880:function(U){U.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(U){U.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(U){U.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(U){U.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},13448:function(U){U.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(U){U.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},2264:function(U,F){F.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],F.STYLE=F.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(U,F){F.xmlns="http://www.w3.org/2000/xmlns/",F.svg="http://www.w3.org/2000/svg",F.xlink="http://www.w3.org/1999/xlink",F.svgAttrs={xmlns:F.svg,"xmlns:xlink":F.xlink}},64884:function(U,F,e){F.version=e(25788).version,e(88324),e(79288);for(var d=e(24040),S=F.register=d.register,n=e(22448),E=Object.keys(n),T=0;T<E.length;T++){var v=E[T];v.charAt(0)!=="_"&&(F[v]=n[v]),S({moduleType:"apiMethod",name:v,fn:n[v]})}S(e(65875)),S([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),S([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(S(window.PlotlyLocales),delete window.PlotlyLocales),F.Icons=e(9224);var g=e(93024),r=e(7316);F.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},F.Fx={hover:g.hover,unhover:g.unhover,loneHover:g.loneHover,loneUnhover:g.loneUnhover},F.Snapshot=e(78904),F.PlotSchema=e(73060)},9224:function(U){U.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(U,F){F.isLeftAnchor=function(d){return d.xanchor==="left"||d.xanchor==="auto"&&d.x<=.3333333333333333},F.isCenterAnchor=function(d){return d.xanchor==="center"||d.xanchor==="auto"&&d.x>.3333333333333333&&d.x<.6666666666666666},F.isRightAnchor=function(d){return d.xanchor==="right"||d.xanchor==="auto"&&d.x>=.6666666666666666},F.isTopAnchor=function(d){return d.yanchor==="top"||d.yanchor==="auto"&&d.y>=.6666666666666666},F.isMiddleAnchor=function(d){return d.yanchor==="middle"||d.yanchor==="auto"&&d.y>.3333333333333333&&d.y<.6666666666666666},F.isBottomAnchor=function(d){return d.yanchor==="bottom"||d.yanchor==="auto"&&d.y<=.3333333333333333}},11864:function(U,F,e){var d=e(20435),S=d.mod,n=d.modHalf,E=Math.PI,T=2*E;function v(w){return w/180*E}function g(w){return w/E*180}function r(w){return Math.abs(w[1]-w[0])>T-1e-14}function t(w,c){return n(c-w,T)}function o(w,c){return Math.abs(t(w,c))}function i(w,c){if(r(c))return!0;var a,p;c[0]<c[1]?(a=c[0],p=c[1]):(a=c[1],p=c[0]),a=S(a,T),p=S(p,T),a>p&&(p+=T);var x=S(w,T),A=x+T;return x>=a&&x<=p||A>=a&&A<=p}function f(w,c,a,p){if(!i(c,p))return!1;var x,A;return a[0]<a[1]?(x=a[0],A=a[1]):(x=a[1],A=a[0]),w>=x&&w<=A}function u(w,c,a,p,x,A,P){x=x||0,A=A||0;var y=r([a,p]),C,M,s,_,b;y?(C=0,M=E,s=T):a<p?(C=a,s=p):(C=p,s=a),w<c?(_=w,b=c):(_=c,b=w);function k(N,B){return[N*Math.cos(B)+x,A-N*Math.sin(B)]}var D=Math.abs(s-C)<=E?0:1;function V(N,B,z){return"A"+[N,N]+" "+[0,D,z]+" "+k(N,B)}var O;return y?_===null?O="M"+k(b,C)+V(b,M,0)+V(b,s,0)+"Z":O="M"+k(_,C)+V(_,M,0)+V(_,s,0)+"ZM"+k(b,C)+V(b,M,1)+V(b,s,1)+"Z":_===null?(O="M"+k(b,C)+V(b,s,0),P&&(O+="L0,0Z")):O="M"+k(_,C)+"L"+k(b,C)+V(b,s,0)+"L"+k(_,s)+V(_,C,1)+"Z",O}function l(w,c,a,p,x){return u(null,w,c,a,p,x,0)}function m(w,c,a,p,x){return u(null,w,c,a,p,x,1)}function h(w,c,a,p,x,A){return u(w,c,a,p,x,A,1)}U.exports={deg2rad:v,rad2deg:g,angleDelta:t,angleDist:o,isFullCircle:r,isAngleInsideSector:i,isPtInsideSector:f,pathArc:l,pathSector:m,pathAnnulus:h}},38116:function(U,F,e){var d=e(83160).decode,S=e(63620),n=Array.isArray,E=ArrayBuffer,T=DataView;function v(u){return E.isView(u)&&!(u instanceof T)}F.isTypedArray=v;function g(u){return n(u)||v(u)}F.isArrayOrTypedArray=g;function r(u){return!g(u[0])}F.isArray1D=r,F.ensureArray=function(u,l){return n(u)||(u=[]),u.length=l,u};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8;function o(u){return u.constructor===ArrayBuffer}F.isArrayBuffer=o,F.decodeTypedArraySpec=function(u){var l=[],m=i(u),h=m.dtype,w=t[h];if(!w)throw new Error('Error in dtype: "'+h+'"');var c=w.BYTES_PER_ELEMENT,a=m.bdata;o(a)||(a=d(a));var p=m.shape===void 0?[a.byteLength/c]:(""+m.shape).split(",");p.reverse();var x=p.length,A,P,y=+p[0],C=c*y,M=0;if(x===1)l=new w(a);else if(x===2)for(A=+p[1],P=0;P<A;P++)l[P]=new w(a,M,y),M+=C;else if(x===3){A=+p[1];for(var s=+p[2],_=0;_<s;_++)for(l[_]=[],P=0;P<A;P++)l[_][P]=new w(a,M,y),M+=C}else throw new Error("ndim: "+x+'is not supported with the shape:"'+m.shape+'"');return l.bdata=m.bdata,l.dtype=m.dtype,l.shape=p.reverse().join(","),u._inputArray=l,l},F.isTypedArraySpec=function(u){return S(u)&&u.hasOwnProperty("dtype")&&typeof u.dtype=="string"&&u.hasOwnProperty("bdata")&&(typeof u.bdata=="string"||o(u.bdata))&&(u.shape===void 0||u.hasOwnProperty("shape")&&(typeof u.shape=="string"||typeof u.shape=="number"))};function i(u){return{bdata:u.bdata,dtype:u.dtype,shape:u.shape}}F.concat=function(){var u=[],l=!0,m=0,h,w,c,a,p,x,A,P;for(c=0;c<arguments.length;c++)a=arguments[c],x=a.length,x&&(w?u.push(a):(w=a,p=x),n(a)?h=!1:(l=!1,m?h!==a.constructor&&(h=!1):h=a.constructor),m+=x);if(!m)return[];if(!u.length)return w;if(l)return w.concat.apply(w,u);if(h){for(A=new h(m),A.set(w),c=0;c<u.length;c++)a=u[c],A.set(a,p),p+=a.length;return A}for(A=new Array(m),P=0;P<w.length;P++)A[P]=w[P];for(c=0;c<u.length;c++){for(a=u[c],P=0;P<a.length;P++)A[p+P]=a[P];p+=P}return A},F.maxRowLength=function(u){return f(u,Math.max,0)},F.minRowLength=function(u){return f(u,Math.min,1/0)};function f(u,l,m){if(g(u))if(g(u[0])){for(var h=m,w=0;w<u.length;w++)h=l(h,u[w].length);return h}else return u.length;return 0}},54037:function(U,F,e){var d=e(38248),S=e(39032).BADNUM,n=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;U.exports=function(T){return typeof T=="string"&&(T=T.replace(n,"")),d(T)?Number(T):S}},73696:function(U){U.exports=function(e){var d=e._fullLayout;d._glcanvas&&d._glcanvas.size()&&d._glcanvas.each(function(S){S.regl&&S.regl.clear({color:!0,depth:!0})})}},75352:function(U){U.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},63064:function(U,F,e){var d=e(38248),S=e(49760),n=e(92880).extendFlat,E=e(45464),T=e(88304),v=e(76308),g=e(13448).DESELECTDIM,r=e(22296),t=e(53756).counter,o=e(20435).modHalf,i=e(38116).isArrayOrTypedArray,f=e(38116).isTypedArraySpec,u=e(38116).decodeTypedArraySpec;F.valObjectMeta={data_array:{coerceFunction:function(m,h,w){h.set(i(m)?m:f(m)?u(m):w)}},enumerated:{coerceFunction:function(m,h,w,c){c.coerceNumber&&(m=+m),c.values.indexOf(m)===-1?h.set(w):h.set(m)},validateFunction:function(m,h){h.coerceNumber&&(m=+m);for(var w=h.values,c=0;c<w.length;c++){var a=String(w[c]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var p=new RegExp(a.substr(1,a.length-2));if(p.test(m))return!0}else if(m===w[c])return!0}return!1}},boolean:{coerceFunction:function(m,h,w){m===!0||m===!1?h.set(m):h.set(w)}},number:{coerceFunction:function(m,h,w,c){f(m)&&(m=u(m)),!d(m)||c.min!==void 0&&m<c.min||c.max!==void 0&&m>c.max?h.set(w):h.set(+m)}},integer:{coerceFunction:function(m,h,w,c){if((c.extras||[]).indexOf(m)!==-1){h.set(m);return}f(m)&&(m=u(m)),m%1||!d(m)||c.min!==void 0&&m<c.min||c.max!==void 0&&m>c.max?h.set(w):h.set(+m)}},string:{coerceFunction:function(m,h,w,c){if(typeof m!="string"){var a=typeof m=="number";c.strict===!0||!a?h.set(w):h.set(String(m))}else c.noBlank&&!m?h.set(w):h.set(m)}},color:{coerceFunction:function(m,h,w){f(m)&&(m=u(m)),S(m).isValid()?h.set(m):h.set(w)}},colorlist:{coerceFunction:function(m,h,w){function c(a){return S(a).isValid()}!Array.isArray(m)||!m.length?h.set(w):m.every(c)?h.set(m):h.set(w)}},colorscale:{coerceFunction:function(m,h,w){h.set(T.get(m,w))}},angle:{coerceFunction:function(m,h,w){f(m)&&(m=u(m)),m==="auto"?h.set("auto"):d(m)?h.set(o(+m,360)):h.set(w)}},subplotid:{coerceFunction:function(m,h,w,c){var a=c.regex||t(w);if(typeof m=="string"&&a.test(m)){h.set(m);return}h.set(w)},validateFunction:function(m,h){var w=h.dflt;return m===w?!0:typeof m!="string"?!1:!!t(w).test(m)}},flaglist:{coerceFunction:function(m,h,w,c){if((c.extras||[]).indexOf(m)!==-1){h.set(m);return}if(typeof m!="string"){h.set(w);return}for(var a=m.split("+"),p=0;p<a.length;){var x=a[p];c.flags.indexOf(x)===-1||a.indexOf(x)<p?a.splice(p,1):p++}a.length?h.set(a.join("+")):h.set(w)}},any:{coerceFunction:function(m,h,w){m===void 0?h.set(w):h.set(f(m)?u(m):m)}},info_array:{coerceFunction:function(m,h,w,c){function a(O,N,B){var z,H={set:function(X){z=X}};return B===void 0&&(B=N.dflt),F.valObjectMeta[N.valType].coerceFunction(O,H,B,N),z}if(f(m)&&(m=u(m)),!i(m)){h.set(w);return}var p=c.dimensions===2||c.dimensions==="1-2"&&Array.isArray(m)&&i(m[0]),x=c.items,A=[],P=Array.isArray(x),y=P&&p&&i(x[0]),C=p&&P&&!y,M=P&&!C?x.length:m.length,s,_,b,k,D,V;if(w=Array.isArray(w)?w:[],p)for(s=0;s<M;s++)for(A[s]=[],b=i(m[s])?m[s]:[],C?D=x.length:P?D=x[s].length:D=b.length,_=0;_<D;_++)C?k=x[_]:P?k=x[s][_]:k=x,V=a(b[_],k,(w[s]||[])[_]),V!==void 0&&(A[s][_]=V);else for(s=0;s<M;s++)V=a(m[s],P?x[s]:x,w[s]),V!==void 0&&(A[s]=V);h.set(A)},validateFunction:function(m,h){if(!i(m))return!1;var w=h.items,c=Array.isArray(w),a=h.dimensions===2;if(!h.freeLength&&m.length!==w.length)return!1;for(var p=0;p<m.length;p++)if(a){if(!i(m[p])||!h.freeLength&&m[p].length!==w[p].length)return!1;for(var x=0;x<m[p].length;x++)if(!l(m[p][x],c?w[p][x]:w))return!1}else if(!l(m[p],c?w[p]:w))return!1;return!0}}},F.coerce=function(m,h,w,c,a){var p=r(w,c).get(),x=r(m,c),A=r(h,c),P=x.get(),y=h._template;if(P===void 0&&y&&(P=r(y,c).get(),y=0),a===void 0&&(a=p.dflt),p.arrayOk){if(i(P))return A.set(P),P;if(f(P))return P=u(P),A.set(P),P}var C=F.valObjectMeta[p.valType].coerceFunction;C(P,A,a,p);var M=A.get();return y&&M===a&&!l(P,p)&&(P=r(y,c).get(),C(P,A,a,p),M=A.get()),M},F.coerce2=function(m,h,w,c,a){var p=r(m,c),x=F.coerce(m,h,w,c,a),A=p.get();return A!=null?x:!1},F.coerceFont=function(m,h,w,c){c||(c={}),w=n({},w),w=n(w,c.overrideDflt||{});var a={family:m(h+".family",w.family),size:m(h+".size",w.size),color:m(h+".color",w.color),weight:m(h+".weight",w.weight),style:m(h+".style",w.style)};if(c.noFontVariant||(a.variant=m(h+".variant",w.variant)),c.noFontLineposition||(a.lineposition=m(h+".lineposition",w.lineposition)),c.noFontTextcase||(a.textcase=m(h+".textcase",w.textcase)),!c.noFontShadow){var p=w.shadow;p==="none"&&c.autoShadowDflt&&(p="auto"),a.shadow=m(h+".shadow",p)}return a},F.coercePattern=function(m,h,w,c){var a=m(h+".shape");if(a){m(h+".solidity"),m(h+".size");var p=m(h+".fillmode"),x=p==="overlay";if(!c){var A=m(h+".bgcolor",x?w:void 0);m(h+".fgcolor",x?v.contrast(A):w)}m(h+".fgopacity",x?.5:1)}},F.coerceHoverinfo=function(m,h,w){var c=h._module.attributes,a=c.hoverinfo?c:E,p=a.hoverinfo,x;if(w._dataLength===1){var A=p.dflt==="all"?p.flags.slice():p.dflt.split("+");A.splice(A.indexOf("name"),1),x=A.join("+")}return F.coerce(m,h,a,"hoverinfo",x)},F.coerceSelectionMarkerOpacity=function(m,h){if(m.marker){var w=m.marker.opacity;if(w!==void 0){var c,a;!i(w)&&!m.selected&&!m.unselected&&(c=w,a=g*w),h("selected.marker.opacity",c),h("unselected.marker.opacity",a)}}};function l(m,h){var w=F.valObjectMeta[h.valType];if(h.arrayOk&&i(m))return!0;if(w.validateFunction)return w.validateFunction(m,h);var c={},a=c,p={set:function(x){a=x}};return w.coerceFunction(m,p,c,h),a!==c}F.validate=l},67555:function(U,F,e){var d=e(94336).Yn,S=e(38248),n=e(24248),E=e(20435).mod,T=e(39032),v=T.BADNUM,g=T.ONEDAY,r=T.ONEHOUR,t=T.ONEMIN,o=T.ONESEC,i=T.EPOCHJD,f=e(24040),u=e(94336).E9,l=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=new Date().getFullYear()-70;function w(O){return O&&f.componentsRegistry.calendars&&typeof O=="string"&&O!=="gregorian"}F.dateTick0=function(O,N){var B=c(O,!!N);if(N<2)return B;var z=F.dateTime2ms(B,O);return z+=g*(N-1),F.ms2DateTime(z,0,O)};function c(O,N){return w(O)?N?f.getComponentMethod("calendars","CANONICAL_SUNDAY")[O]:f.getComponentMethod("calendars","CANONICAL_TICK")[O]:N?"2000-01-02":"2000-01-01"}F.dfltRange=function(O){return w(O)?f.getComponentMethod("calendars","DFLTRANGE")[O]:["2000-01-01","2001-01-01"]},F.isJSDate=function(O){return typeof O=="object"&&O!==null&&typeof O.getTime=="function"};var a,p;F.dateTime2ms=function(O,N){if(F.isJSDate(O)){var B=O.getTimezoneOffset()*t,z=(O.getUTCMinutes()-O.getMinutes())*t+(O.getUTCSeconds()-O.getSeconds())*o+(O.getUTCMilliseconds()-O.getMilliseconds());if(z){var H=3*t;B=B-H/2+E(z-B+H/2,H)}return O=Number(O)-B,O>=a&&O<=p?O:v}if(typeof O!="string"&&typeof O!="number")return v;O=String(O);var X=w(N),$=O.charAt(0);X&&($==="G"||$==="g")&&(O=O.substr(1),N="");var ne=X&&N.substr(0,7)==="chinese",q=O.match(ne?m:l);if(!q)return v;var ue=q[1],te=q[3]||"1",J=Number(q[5]||1),ie=Number(q[7]||0),K=Number(q[9]||0),ee=Number(q[11]||0);if(X){if(ue.length===2)return v;ue=Number(ue);var le;try{var j=f.getComponentMethod("calendars","getCal")(N);if(ne){var Z=te.charAt(te.length-1)==="i";te=parseInt(te,10),le=j.newDate(ue,j.toMonthIndex(ue,te,Z),J)}else le=j.newDate(ue,Number(te),J)}catch{return v}return le?(le.toJD()-i)*g+ie*r+K*t+ee*o:v}ue.length===2?ue=(Number(ue)+2e3-h)%100+h:ue=Number(ue),te-=1;var fe=new Date(Date.UTC(2e3,te,J,ie,K));return fe.setUTCFullYear(ue),fe.getUTCMonth()!==te||fe.getUTCDate()!==J?v:fe.getTime()+ee*o},a=F.MIN_MS=F.dateTime2ms("-9999"),p=F.MAX_MS=F.dateTime2ms("9999-12-31 23:59:59.9999"),F.isDateTime=function(O,N){return F.dateTime2ms(O,N)!==v};function x(O,N){return String(O+Math.pow(10,N)).substr(1)}var A=90*g,P=3*r,y=5*t;F.ms2DateTime=function(O,N,B){if(typeof O!="number"||!(O>=a&&O<=p))return v;N||(N=0);var z=Math.floor(E(O+.05,1)*10),H=Math.round(O-z/10),X,$,ne,q,ue,te;if(w(B)){var J=Math.floor(H/g)+i,ie=Math.floor(E(O,g));try{X=f.getComponentMethod("calendars","getCal")(B).fromJD(J).formatDate("yyyy-mm-dd")}catch{X=u("G%Y-%m-%d")(new Date(H))}if(X.charAt(0)==="-")for(;X.length<11;)X="-0"+X.substr(1);else for(;X.length<10;)X="0"+X;$=N<A?Math.floor(ie/r):0,ne=N<A?Math.floor(ie%r/t):0,q=N<P?Math.floor(ie%t/o):0,ue=N<y?ie%o*10+z:0}else te=new Date(H),X=u("%Y-%m-%d")(te),$=N<A?te.getUTCHours():0,ne=N<A?te.getUTCMinutes():0,q=N<P?te.getUTCSeconds():0,ue=N<y?te.getUTCMilliseconds()*10+z:0;return C(X,$,ne,q,ue)},F.ms2DateTimeLocal=function(O){if(!(O>=a+g&&O<=p-g))return v;var N=Math.floor(E(O+.05,1)*10),B=new Date(Math.round(O-N/10)),z=d("%Y-%m-%d")(B),H=B.getHours(),X=B.getMinutes(),$=B.getSeconds(),ne=B.getUTCMilliseconds()*10+N;return C(z,H,X,$,ne)};function C(O,N,B,z,H){if((N||B||z||H)&&(O+=" "+x(N,2)+":"+x(B,2),(z||H)&&(O+=":"+x(z,2),H))){for(var X=4;H%10===0;)X-=1,H/=10;O+="."+x(H,X)}return O}F.cleanDate=function(O,N,B){if(O===v)return N;if(F.isJSDate(O)||typeof O=="number"&&isFinite(O)){if(w(B))return n.error("JS Dates and milliseconds are incompatible with world calendars",O),N;if(O=F.ms2DateTimeLocal(+O),!O&&N!==void 0)return N}else if(!F.isDateTime(O,B))return n.error("unrecognized date",O),N;return O};var M=/%\d?f/g,s=/%h/g,_={1:"1",2:"1",3:"2",4:"2"};function b(O,N,B,z){O=O.replace(M,function(X){var $=Math.min(+X.charAt(1)||6,6),ne=(N/1e3%1+2).toFixed($).substr(2).replace(/0+$/,"")||"0";return ne});var H=new Date(Math.floor(N+.05));if(O=O.replace(s,function(){return _[B("%q")(H)]}),w(z))try{O=f.getComponentMethod("calendars","worldCalFmt")(O,N,z)}catch{return"Invalid"}return B(O)(H)}var k=[59,59.9,59.99,59.999,59.9999];function D(O,N){var B=E(O+.05,g),z=x(Math.floor(B/r),2)+":"+x(E(Math.floor(B/t),60),2);if(N!=="M"){S(N)||(N=0);var H=Math.min(E(O/o,60),k[N]),X=(100+H).toFixed(N).substr(1);N>0&&(X=X.replace(/0+$/,"").replace(/[\.]$/,"")),z+=":"+X}return z}F.formatDate=function(O,N,B,z,H,X){if(H=w(H)&&H,!N)if(B==="y")N=X.year;else if(B==="m")N=X.month;else if(B==="d")N=X.dayMonth+`
`+X.year;else return D(O,B)+`
`+b(X.dayMonthYear,O,z,H);return b(N,O,z,H)};var V=3*g;F.incrementMonth=function(O,N,B){B=w(B)&&B;var z=E(O,g);if(O=Math.round(O-z),B)try{var H=Math.round(O/g)+i,X=f.getComponentMethod("calendars","getCal")(B),$=X.fromJD(H);return N%12?X.add($,N,"m"):X.add($,N/12,"y"),($.toJD()-i)*g+z}catch{n.error("invalid ms "+O+" in calendar "+B)}var ne=new Date(O+V);return ne.setUTCMonth(ne.getUTCMonth()+N)+z-V},F.findExactDates=function(O,N){for(var B=0,z=0,H=0,X=0,$,ne,q=w(N)&&f.getComponentMethod("calendars","getCal")(N),ue=0;ue<O.length;ue++){if(ne=O[ue],!S(ne)){X++;continue}if(!(ne%g))if(q)try{$=q.fromJD(ne/g+i),$.day()===1?$.month()===1?B++:z++:H++}catch{}else $=new Date(ne),$.getUTCDate()===1?$.getUTCMonth()===0?B++:z++:H++}z+=B,H+=z;var te=O.length-X;return{exactYears:B/te,exactMonths:z/te,exactDays:H/te}}},52200:function(U,F,e){var d=e(33428),S=e(24248),n=e(52248),E=e(36524);function T(h){var w;if(typeof h=="string"){if(w=document.getElementById(h),w===null)throw new Error("No DOM element with id '"+h+"' exists on the page.");return w}else if(h==null)throw new Error("DOM element provided is null or undefined");return h}function v(h){var w=d.select(h);return w.node()instanceof HTMLElement&&w.size()&&w.classed("js-plotly-plot")}function g(h){var w=h&&h.parentNode;w&&w.removeChild(h)}function r(h,w){t("global",h,w)}function t(h,w,c){var a="plotly.js-style-"+h,p=document.getElementById(a);p||(p=document.createElement("style"),p.setAttribute("id",a),p.appendChild(document.createTextNode("")),document.head.appendChild(p));var x=p.sheet;x.insertRule?x.insertRule(w+"{"+c+"}",0):x.addRule?x.addRule(w,c,0):S.warn("addStyleRule failed")}function o(h){var w="plotly.js-style-"+h,c=document.getElementById(w);c&&g(c)}function i(h){var w=u(h),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return w.forEach(function(a){var p=f(a);if(p){var x=n.convertCssMatrix(p);c=E.multiply(c,c,x)}}),c}function f(h){var w=window.getComputedStyle(h,null),c=w.getPropertyValue("-webkit-transform")||w.getPropertyValue("-moz-transform")||w.getPropertyValue("-ms-transform")||w.getPropertyValue("-o-transform")||w.getPropertyValue("transform");return c==="none"?null:c.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(a){return+a})}function u(h){for(var w=[];l(h);)w.push(h),h=h.parentNode,typeof ShadowRoot=="function"&&h instanceof ShadowRoot&&(h=h.host);return w}function l(h){return h&&(h instanceof Element||h instanceof HTMLElement)}function m(h,w){return h&&w&&h.top===w.top&&h.left===w.left&&h.right===w.right&&h.bottom===w.bottom}U.exports={getGraphDiv:T,isPlotDiv:v,removeElement:g,addStyleRule:r,addRelatedStyleRule:t,deleteRelatedStyleRule:o,getFullTransformMatrix:i,getElementTransformMatrix:f,getElementAndAncestors:u,equalDomRects:m}},95924:function(U,F,e){var d=e(61252).EventEmitter,S={init:function(n){if(n._ev instanceof d)return n;var E=new d,T=new d;return n._ev=E,n._internalEv=T,n.on=E.on.bind(E),n.once=E.once.bind(E),n.removeListener=E.removeListener.bind(E),n.removeAllListeners=E.removeAllListeners.bind(E),n._internalOn=T.on.bind(T),n._internalOnce=T.once.bind(T),n._removeInternalListener=T.removeListener.bind(T),n._removeAllInternalListeners=T.removeAllListeners.bind(T),n.emit=function(v,g){typeof jQuery<"u"&&jQuery(n).trigger(v,g),E.emit(v,g),T.emit(v,g)},n},triggerHandler:function(n,E,T){var v,g;typeof jQuery<"u"&&(v=jQuery(n).triggerHandler(E,T));var r=n._ev;if(!r)return v;var t=r._events[E];if(!t)return v;function o(f){if(f.listener){if(r.removeListener(E,f.listener),!f.fired)return f.fired=!0,f.listener.apply(r,[T])}else return f.apply(r,[T])}t=Array.isArray(t)?t:[t];var i;for(i=0;i<t.length-1;i++)o(t[i]);return g=o(t[i]),v!==void 0?v:g},purge:function(n){return delete n._ev,delete n.on,delete n.once,delete n.removeListener,delete n.removeAllListeners,delete n.emit,delete n._ev,delete n._internalEv,delete n._internalOn,delete n._internalOnce,delete n._removeInternalListener,delete n._removeAllInternalListeners,n}};U.exports=S},92880:function(U,F,e){var d=e(63620),S=Array.isArray;function n(T,v){var g,r;for(g=0;g<T.length;g++){if(r=T[g],r!==null&&typeof r=="object")return!1;r!==void 0&&(v[g]=r)}return!0}F.extendFlat=function(){return E(arguments,!1,!1,!1)},F.extendDeep=function(){return E(arguments,!0,!1,!1)},F.extendDeepAll=function(){return E(arguments,!0,!0,!1)},F.extendDeepNoArrays=function(){return E(arguments,!0,!1,!0)};function E(T,v,g,r){var t=T[0],o=T.length,i,f,u,l,m,h,w;if(o===2&&S(t)&&S(T[1])&&t.length===0){if(w=n(T[1],t),w)return t;t.splice(0,t.length)}for(var c=1;c<o;c++){i=T[c];for(f in i)u=t[f],l=i[f],r&&S(l)?t[f]=l:v&&l&&(d(l)||(m=S(l)))?(m?(m=!1,h=u&&S(u)?u:[]):h=u&&d(u)?u:{},t[f]=E([h,l],v,g,r)):(typeof l<"u"||g)&&(t[f]=l)}return t}},68944:function(U){U.exports=function(e){for(var d={},S=[],n=0,E=0;E<e.length;E++){var T=e[E];d[T]!==1&&(d[T]=1,S[n++]=T)}return S}},43880:function(U){U.exports=function(n){for(var E=d(n)?e:F,T=[],v=0;v<n.length;v++){var g=n[v];E(g)&&T.push(g)}return T};function F(S){return S.visible===!0}function e(S){var n=S[0].trace;return n.visible===!0&&n._length!==0}function d(S){return Array.isArray(S)&&Array.isArray(S[0])&&S[0][0]&&S[0][0].trace}},27144:function(U,F,e){var d=e(33428),S=e(36116),n=e(40440),E=e(77844),T=e(42428),v=e(35536),g=e(24248),r=e(63620),t=e(22296),o=e(92065),i=Object.keys(S),f={"ISO-3":v,"USA-states":v,"country names":u};function u(x){for(var A=0;A<i.length;A++){var P=i[A],y=new RegExp(S[P]);if(y.test(x.trim().toLowerCase()))return P}return g.log("Unrecognized country name: "+x+"."),!1}function l(x,A,P){if(!A||typeof A!="string")return!1;var y=f[x](A),C,M,s;if(y){if(x==="USA-states")for(C=[],s=0;s<P.length;s++)M=P[s],M.properties&&M.properties.gu&&M.properties.gu==="USA"&&C.push(M);else C=P;for(s=0;s<C.length;s++)if(M=C[s],M.id===y)return M;g.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function m(x){var A=x.geometry,P=A.coordinates,y=x.id,C=[],M,s,_,b;function k(D){for(var V=0;V<D.length-1;V++)if(D[V][0]>0&&D[V+1][0]<0)return V;return null}switch(y==="RUS"||y==="FJI"?M=function(D){var V;if(k(D)===null)V=D;else for(V=new Array(D.length),b=0;b<D.length;b++)V[b]=[D[b][0]<0?D[b][0]+360:D[b][0],D[b][1]];C.push(o.tester(V))}:y==="ATA"?M=function(D){var V=k(D);if(V===null)return C.push(o.tester(D));var O=new Array(D.length+1),N=0;for(b=0;b<D.length;b++)b>V?O[N++]=[D[b][0]+360,D[b][1]]:b===V?(O[N++]=D[b],O[N++]=[D[b][0],-90]):O[N++]=D[b];var B=o.tester(O);B.pts.pop(),C.push(B)}:M=function(D){C.push(o.tester(D))},A.type){case"MultiPolygon":for(s=0;s<P.length;s++)for(_=0;_<P[s].length;_++)M(P[s][_]);break;case"Polygon":for(s=0;s<P.length;s++)M(P[s]);break}return C}function h(x){var A=x.geojson,P=window.PlotlyGeoAssets||{},y=typeof A=="string"?P[A]:A;return r(y)?y:(g.error("Oops ... something went wrong when fetching "+A),!1)}function w(x){var A=x[0].trace,P=h(A);if(!P)return!1;var y={},C=[],M;for(M=0;M<A._length;M++){var s=x[M];(s.loc||s.loc===0)&&(y[s.loc]=s)}function _(D){var V=t(D,A.featureidkey||"id").get(),O=y[V];if(O){var N=D.geometry;if(N.type==="Polygon"||N.type==="MultiPolygon"){var B={type:"Feature",id:V,geometry:N,properties:{}};B.properties.ct=c(B),O.fIn=D,O.fOut=B,C.push(B)}else g.log(["Location",O.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete y[V]}switch(P.type){case"FeatureCollection":var b=P.features;for(M=0;M<b.length;M++)_(b[M]);break;case"Feature":_(P);break;default:return g.warn(["Invalid GeoJSON type",(P.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in y)g.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+A.featureidkey+"*."].join(" "));return C}function c(x){var A=x.geometry,P;if(A.type==="MultiPolygon")for(var y=A.coordinates,C=0,M=0;M<y.length;M++){var s={type:"Polygon",coordinates:y[M]},_=n.default(s);_>C&&(C=_,P=s)}else P=A;return E.default(P).geometry.coordinates}function a(x){var A=window.PlotlyGeoAssets||{},P=[];function y(b){return new Promise(function(k,D){d.json(b,function(V,O){if(V){delete A[b];var N=V.status===404?'GeoJSON at URL "'+b+'" does not exist.':"Unexpected error while fetching from "+b;return D(new Error(N))}return A[b]=O,k(O)})})}function C(b){return new Promise(function(k,D){var V=0,O=setInterval(function(){if(A[b]&&A[b]!=="pending")return clearInterval(O),k(A[b]);if(V>100)return clearInterval(O),D("Unexpected error while fetching from "+b);V++},50)})}for(var M=0;M<x.length;M++){var s=x[M][0].trace,_=s.geojson;typeof _=="string"&&(A[_]?A[_]==="pending"&&P.push(C(_)):(A[_]="pending",P.push(y(_))))}return P}function p(x){return T.default(x)}U.exports={locationToFeature:l,feature2polygons:m,getTraceGeojson:h,extractTraceFeature:w,fetchTraceGeoData:a,computeBbox:p}},44808:function(U,F,e){var d=e(39032).BADNUM;F.calcTraceToLineCoords=function(S){for(var n=S[0].trace,E=n.connectgaps,T=[],v=[],g=0;g<S.length;g++){var r=S[g],t=r.lonlat;t[0]!==d?v.push(t):!E&&v.length>0&&(T.push(v),v=[])}return v.length>0&&T.push(v),T},F.makeLine=function(S){return S.length===1?{type:"LineString",coordinates:S[0]}:{type:"MultiLineString",coordinates:S}},F.makePolygon=function(S){if(S.length===1)return{type:"Polygon",coordinates:S};for(var n=new Array(S.length),E=0;E<S.length;E++)n[E]=[S[E]];return{type:"MultiPolygon",coordinates:n}},F.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(U,F,e){var d=e(20435).mod;F.segmentsIntersect=S;function S(g,r,t,o,i,f,u,l){var m=t-g,h=i-g,w=u-i,c=o-r,a=f-r,p=l-f,x=m*p-w*c;if(x===0)return null;var A=(h*p-w*a)/x,P=(h*c-m*a)/x;return P<0||P>1||A<0||A>1?null:{x:g+m*A,y:r+c*A}}F.segmentDistance=function(r,t,o,i,f,u,l,m){if(S(r,t,o,i,f,u,l,m))return 0;var h=o-r,w=i-t,c=l-f,a=m-u,p=h*h+w*w,x=c*c+a*a,A=Math.min(n(h,w,p,f-r,u-t),n(h,w,p,l-r,m-t),n(c,a,x,r-f,t-u),n(c,a,x,o-f,i-u));return Math.sqrt(A)};function n(g,r,t,o,i){var f=o*g+i*r;if(f<0)return o*o+i*i;if(f>t){var u=o-g,l=i-r;return u*u+l*l}else{var m=o*r-i*g;return m*m/t}}var E,T,v;F.getTextLocation=function(r,t,o,i){if((r!==T||i!==v)&&(E={},T=r,v=i),E[o])return E[o];var f=r.getPointAtLength(d(o-i/2,t)),u=r.getPointAtLength(d(o+i/2,t)),l=Math.atan((u.y-f.y)/(u.x-f.x)),m=r.getPointAtLength(d(o,t)),h=(m.x*4+f.x+u.x)/6,w=(m.y*4+f.y+u.y)/6,c={x:h,y:w,theta:l};return E[o]=c,c},F.clearLocationCache=function(){T=null},F.getVisibleSegment=function(r,t,o){var i=t.left,f=t.right,u=t.top,l=t.bottom,m=0,h=r.getTotalLength(),w=h,c,a;function p(A){var P=r.getPointAtLength(A);A===0?c=P:A===h&&(a=P);var y=P.x<i?i-P.x:P.x>f?P.x-f:0,C=P.y<u?u-P.y:P.y>l?P.y-l:0;return Math.sqrt(y*y+C*C)}for(var x=p(m);x;){if(m+=x+o,m>w)return;x=p(m)}for(x=p(w);x;){if(w-=x+o,m>w)return;x=p(w)}return{min:m,max:w,len:w-m,total:h,isClosed:m===0&&w===h&&Math.abs(c.x-a.x)<.1&&Math.abs(c.y-a.y)<.1}},F.findPointOnPath=function(r,t,o,i){i=i||{};for(var f=i.pathLength||r.getTotalLength(),u=i.tolerance||.001,l=i.iterationLimit||30,m=r.getPointAtLength(0)[o]>r.getPointAtLength(f)[o]?-1:1,h=0,w=0,c=f,a,p,x;h<l;){if(a=(w+c)/2,p=r.getPointAtLength(a),x=p[o]-t,Math.abs(x)<u)return p;m*x>0?c=a:w=a,h++}return p}},33040:function(U,F,e){var d=e(38248),S=e(49760),n=e(72160),E=e(8932),T=e(22548).defaultLine,v=e(38116).isArrayOrTypedArray,g=n(T),r=1;function t(l,m){var h=l;return h[3]*=m,h}function o(l){if(d(l))return g;var m=n(l);return m.length?m:g}function i(l){return d(l)?l:r}function f(l,m,h){var w=l.color;w&&w._inputArray&&(w=w._inputArray);var c=v(w),a=v(m),p=E.extractOpts(l),x=[],A,P,y,C,M;if(p.colorscale!==void 0?A=E.makeColorScaleFuncFromTrace(l):A=o,c?P=function(_,b){return _[b]===void 0?g:n(A(_[b]))}:P=o,a?y=function(_,b){return _[b]===void 0?r:i(_[b])}:y=i,c||a)for(var s=0;s<h;s++)C=P(w,s),M=y(m,s),x[s]=t(C,M);else x=t(n(w),m);return x}function u(l){var m=E.extractOpts(l),h=m.colorscale;return m.reversescale&&(h=E.flipScale(m.colorscale)),h.map(function(w){var c=w[0],a=S(w[1]),p=a.toRgb();return{index:c,rgb:[p.r,p.g,p.b,p.a]}})}U.exports={formatColor:f,parseColorScale:u}},71688:function(U,F,e){var d=e(35536);function S(n){return[n]}U.exports={keyFun:function(n){return n.key},repeat:S,descend:d,wrap:S,unwrap:function(n){return n[0]}}},35536:function(U){U.exports=function(e){return e}},1396:function(U){U.exports=function(e,d){if(!d)return e;var S=1/Math.abs(d),n=S>1?(S*e+S*d)/S:e+d,E=String(n).length;if(E>16){var T=String(d).length,v=String(e).length;if(E>=v+T){var g=parseFloat(n).toPrecision(12);g.indexOf("e+")===-1&&(n=+g)}}return n}},3400:function(U,F,e){var d=e(33428),S=e(94336).E9,n=e(57624).E9,E=e(38248),T=e(39032),v=T.FP_SAFE,g=-v,r=T.BADNUM,t=U.exports={};t.adjustFormat=function(le){return!le||/^\d[.]\df/.test(le)||/[.]\d%/.test(le)?le:le==="0.f"?"~f":/^\d%/.test(le)?"~%":/^\ds/.test(le)?"~s":!/^[~,.0$]/.test(le)&&/[&fps]/.test(le)?"~"+le:le};var o={};t.warnBadFormat=function(ee){var le=String(ee);o[le]||(o[le]=1,t.warn('encountered bad format: "'+le+'"'))},t.noFormat=function(ee){return String(ee)},t.numberFormat=function(ee){var le;try{le=n(t.adjustFormat(ee))}catch{return t.warnBadFormat(ee),t.noFormat}return le},t.nestedProperty=e(22296),t.keyedContainer=e(37804),t.relativeAttr=e(23193),t.isPlainObject=e(63620),t.toLogRange=e(36896),t.relinkPrivateKeys=e(51528);var i=e(38116);t.isArrayBuffer=i.isArrayBuffer,t.isTypedArray=i.isTypedArray,t.isArrayOrTypedArray=i.isArrayOrTypedArray,t.isArray1D=i.isArray1D,t.ensureArray=i.ensureArray,t.concat=i.concat,t.maxRowLength=i.maxRowLength,t.minRowLength=i.minRowLength;var f=e(20435);t.mod=f.mod,t.modHalf=f.modHalf;var u=e(63064);t.valObjectMeta=u.valObjectMeta,t.coerce=u.coerce,t.coerce2=u.coerce2,t.coerceFont=u.coerceFont,t.coercePattern=u.coercePattern,t.coerceHoverinfo=u.coerceHoverinfo,t.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity,t.validate=u.validate;var l=e(67555);t.dateTime2ms=l.dateTime2ms,t.isDateTime=l.isDateTime,t.ms2DateTime=l.ms2DateTime,t.ms2DateTimeLocal=l.ms2DateTimeLocal,t.cleanDate=l.cleanDate,t.isJSDate=l.isJSDate,t.formatDate=l.formatDate,t.incrementMonth=l.incrementMonth,t.dateTick0=l.dateTick0,t.dfltRange=l.dfltRange,t.findExactDates=l.findExactDates,t.MIN_MS=l.MIN_MS,t.MAX_MS=l.MAX_MS;var m=e(14952);t.findBin=m.findBin,t.sorterAsc=m.sorterAsc,t.sorterDes=m.sorterDes,t.distinctVals=m.distinctVals,t.roundUp=m.roundUp,t.sort=m.sort,t.findIndexOfMin=m.findIndexOfMin,t.sortObjectKeys=e(95376);var h=e(63084);t.aggNums=h.aggNums,t.len=h.len,t.mean=h.mean,t.median=h.median,t.midRange=h.midRange,t.variance=h.variance,t.stdev=h.stdev,t.interp=h.interp;var w=e(52248);t.init2dArray=w.init2dArray,t.transposeRagged=w.transposeRagged,t.dot=w.dot,t.translationMatrix=w.translationMatrix,t.rotationMatrix=w.rotationMatrix,t.rotationXYMatrix=w.rotationXYMatrix,t.apply3DTransform=w.apply3DTransform,t.apply2DTransform=w.apply2DTransform,t.apply2DTransform2=w.apply2DTransform2,t.convertCssMatrix=w.convertCssMatrix,t.inverseTransformMatrix=w.inverseTransformMatrix;var c=e(11864);t.deg2rad=c.deg2rad,t.rad2deg=c.rad2deg,t.angleDelta=c.angleDelta,t.angleDist=c.angleDist,t.isFullCircle=c.isFullCircle,t.isAngleInsideSector=c.isAngleInsideSector,t.isPtInsideSector=c.isPtInsideSector,t.pathArc=c.pathArc,t.pathSector=c.pathSector,t.pathAnnulus=c.pathAnnulus;var a=e(98308);t.isLeftAnchor=a.isLeftAnchor,t.isCenterAnchor=a.isCenterAnchor,t.isRightAnchor=a.isRightAnchor,t.isTopAnchor=a.isTopAnchor,t.isMiddleAnchor=a.isMiddleAnchor,t.isBottomAnchor=a.isBottomAnchor;var p=e(92348);t.segmentsIntersect=p.segmentsIntersect,t.segmentDistance=p.segmentDistance,t.getTextLocation=p.getTextLocation,t.clearLocationCache=p.clearLocationCache,t.getVisibleSegment=p.getVisibleSegment,t.findPointOnPath=p.findPointOnPath;var x=e(92880);t.extendFlat=x.extendFlat,t.extendDeep=x.extendDeep,t.extendDeepAll=x.extendDeepAll,t.extendDeepNoArrays=x.extendDeepNoArrays;var A=e(24248);t.log=A.log,t.warn=A.warn,t.error=A.error;var P=e(53756);t.counterRegex=P.counter;var y=e(91200);t.throttle=y.throttle,t.throttleDone=y.done,t.clearThrottle=y.clear;var C=e(52200);t.getGraphDiv=C.getGraphDiv,t.isPlotDiv=C.isPlotDiv,t.removeElement=C.removeElement,t.addStyleRule=C.addStyleRule,t.addRelatedStyleRule=C.addRelatedStyleRule,t.deleteRelatedStyleRule=C.deleteRelatedStyleRule,t.getFullTransformMatrix=C.getFullTransformMatrix,t.getElementTransformMatrix=C.getElementTransformMatrix,t.getElementAndAncestors=C.getElementAndAncestors,t.equalDomRects=C.equalDomRects,t.clearResponsive=e(75352),t.preserveDrawingBuffer=e(34296),t.makeTraceGroups=e(30988),t._=e(98356),t.notifier=e(41792),t.filterUnique=e(68944),t.filterVisible=e(43880),t.pushUnique=e(52416),t.increment=e(1396),t.cleanNumber=e(54037),t.ensureNumber=function(le){return E(le)?(le=Number(le),le>v||le<g?r:le):r},t.isIndex=function(ee,le){return le!==void 0&&ee>=le?!1:E(ee)&&ee>=0&&ee%1===0},t.noop=e(16628),t.identity=e(35536),t.repeat=function(ee,le){for(var j=new Array(le),Z=0;Z<le;Z++)j[Z]=ee;return j},t.swapAttrs=function(ee,le,j,Z){j||(j="x"),Z||(Z="y");for(var fe=0;fe<le.length;fe++){var re=le[fe],ce=t.nestedProperty(ee,re.replace("?",j)),xe=t.nestedProperty(ee,re.replace("?",Z)),Te=ce.get();ce.set(xe.get()),xe.set(Te)}},t.raiseToTop=function(le){le.parentNode.appendChild(le)},t.cancelTransition=function(ee){return ee.transition().duration(0)},t.constrain=function(ee,le,j){return le>j?Math.max(j,Math.min(le,ee)):Math.max(le,Math.min(j,ee))},t.bBoxIntersect=function(ee,le,j){return j=j||0,ee.left<=le.right+j&&le.left<=ee.right+j&&ee.top<=le.bottom+j&&le.top<=ee.bottom+j},t.simpleMap=function(ee,le,j,Z,fe){for(var re=ee.length,ce=new Array(re),xe=0;xe<re;xe++)ce[xe]=le(ee[xe],j,Z,fe);return ce},t.randstr=function ee(le,j,Z,fe){if(Z||(Z=16),j===void 0&&(j=24),j<=0)return"0";var re=Math.log(Math.pow(2,j))/Math.log(Z),ce="",xe,Te,we;for(xe=2;re===1/0;xe*=2)re=Math.log(Math.pow(2,j/xe))/Math.log(Z)*xe;var _e=re-Math.floor(re);for(xe=0;xe<Math.floor(re);xe++)we=Math.floor(Math.random()*Z).toString(Z),ce=we+ce;_e&&(Te=Math.pow(Z,_e),we=Math.floor(Math.random()*Te).toString(Z),ce=we+ce);var ke=parseInt(ce,Z);return le&&le[ce]||ke!==1/0&&ke>=Math.pow(2,j)?fe>10?(t.warn("randstr failed uniqueness"),ce):ee(le,j,Z,(fe||0)+1):ce},t.OptionControl=function(ee,le){ee||(ee={}),le||(le="opt");var j={};return j.optionList=[],j._newoption=function(Z){Z[le]=ee,j[Z.name]=Z,j.optionList.push(Z)},j["_"+le]=ee,j},t.smooth=function(ee,le){if(le=Math.round(le)||0,le<2)return ee;var j=ee.length,Z=2*j,fe=2*le-1,re=new Array(fe),ce=new Array(j),xe,Te,we,_e;for(xe=0;xe<fe;xe++)re[xe]=(1-Math.cos(Math.PI*(xe+1)/le))/(2*le);for(xe=0;xe<j;xe++){for(_e=0,Te=0;Te<fe;Te++)we=xe+Te+1-le,we<-j?we-=Z*Math.round(we/Z):we>=Z&&(we-=Z*Math.floor(we/Z)),we<0?we=-1-we:we>=j&&(we=Z-1-we),_e+=ee[we]*re[Te];ce[xe]=_e}return ce},t.syncOrAsync=function(ee,le,j){var Z,fe;function re(){return t.syncOrAsync(ee,le,j)}for(;ee.length;)if(fe=ee.splice(0,1)[0],Z=fe(le),Z&&Z.then)return Z.then(re);return j&&j(le)},t.stripTrailingSlash=function(ee){return ee.substr(-1)==="/"?ee.substr(0,ee.length-1):ee},t.noneOrAll=function(ee,le,j){if(ee){var Z=!1,fe=!0,re,ce;for(re=0;re<j.length;re++)ce=ee[j[re]],ce!=null?Z=!0:fe=!1;if(Z&&!fe)for(re=0;re<j.length;re++)ee[j[re]]=le[j[re]]}},t.mergeArray=function(ee,le,j,Z){var fe=typeof Z=="function";if(t.isArrayOrTypedArray(ee))for(var re=Math.min(ee.length,le.length),ce=0;ce<re;ce++){var xe=ee[ce];le[ce][j]=fe?Z(xe):xe}},t.mergeArrayCastPositive=function(ee,le,j){return t.mergeArray(ee,le,j,function(Z){var fe=+Z;return isFinite(fe)&&fe>0?fe:0})},t.fillArray=function(ee,le,j,Z){if(Z=Z||t.identity,t.isArrayOrTypedArray(ee))for(var fe=0;fe<le.length;fe++)le[fe][j]=Z(ee[fe])},t.castOption=function(ee,le,j,Z){Z=Z||t.identity;var fe=t.nestedProperty(ee,j).get();return t.isArrayOrTypedArray(fe)?Array.isArray(le)&&t.isArrayOrTypedArray(fe[le[0]])?Z(fe[le[0]][le[1]]):Z(fe[le]):fe},t.extractOption=function(ee,le,j,Z){if(j in ee)return ee[j];var fe=t.nestedProperty(le,Z).get();if(!Array.isArray(fe))return fe};function M(ee){var le={};for(var j in ee)for(var Z=ee[j],fe=0;fe<Z.length;fe++)le[Z[fe]]=+j;return le}t.tagSelected=function(ee,le,j){var Z=le.selectedpoints,fe=le._indexToPoints,re;fe&&(re=M(fe));function ce(ke){return ke!==void 0&&ke<ee.length}for(var xe=0;xe<Z.length;xe++){var Te=Z[xe];if(t.isIndex(Te)||t.isArrayOrTypedArray(Te)&&t.isIndex(Te[0])&&t.isIndex(Te[1])){var we=re?re[Te]:Te,_e=j?j[we]:we;ce(_e)&&(ee[_e].selected=1)}}},t.selIndices2selPoints=function(ee){var le=ee.selectedpoints,j=ee._indexToPoints;if(j){for(var Z=M(j),fe=[],re=0;re<le.length;re++){var ce=le[re];if(t.isIndex(ce)){var xe=Z[ce];t.isIndex(xe)&&fe.push(xe)}}return fe}else return le},t.getTargetArray=function(ee,le){var j=le.target;if(typeof j=="string"&&j){var Z=t.nestedProperty(ee,j).get();return t.isArrayOrTypedArray(Z)?Z:!1}else if(t.isArrayOrTypedArray(j))return j;return!1};function s(ee,le,j){var Z={};typeof le!="object"&&(le={});var fe=j==="pieLike"?-1:3,re=Object.keys(ee),ce,xe,Te;for(ce=0;ce<re.length;ce++)xe=re[ce],Te=ee[xe],!(xe.charAt(0)==="_"||typeof Te=="function")&&(xe==="module"?Z[xe]=Te:Array.isArray(Te)?xe==="colorscale"||fe===-1?Z[xe]=Te.slice():Z[xe]=Te.slice(0,fe):t.isTypedArray(Te)?fe===-1?Z[xe]=Te.subarray():Z[xe]=Te.subarray(0,fe):Te&&typeof Te=="object"?Z[xe]=s(ee[xe],le[xe],j):Z[xe]=Te);for(re=Object.keys(le),ce=0;ce<re.length;ce++)xe=re[ce],Te=le[xe],(typeof Te!="object"||!(xe in Z)||typeof Z[xe]!="object")&&(Z[xe]=Te);return Z}t.minExtend=s,t.titleCase=function(ee){return ee.charAt(0).toUpperCase()+ee.substr(1)},t.containsAny=function(ee,le){for(var j=0;j<le.length;j++)if(ee.indexOf(le[j])!==-1)return!0;return!1},t.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var _=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return _.test(window.navigator.userAgent)};var b=/iPad|iPhone|iPod/;t.isIOS=function(){return b.test(window.navigator.userAgent)};var k=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var ee=k.exec(window.navigator.userAgent);if(ee&&ee.length===2){var le=parseInt(ee[1]);if(!isNaN(le))return le}return null},t.isD3Selection=function(ee){return ee instanceof d.selection},t.ensureSingle=function(ee,le,j,Z){var fe=ee.select(le+(j?"."+j:""));if(fe.size())return fe;var re=ee.append(le);return j&&re.classed(j,!0),Z&&re.call(Z),re},t.ensureSingleById=function(ee,le,j,Z){var fe=ee.select(le+"#"+j);if(fe.size())return fe;var re=ee.append(le).attr("id",j);return Z&&re.call(Z),re},t.objectFromPath=function(ee,le){for(var j=ee.split("."),Z,fe=Z={},re=0;re<j.length;re++){var ce=j[re],xe=null,Te=j[re].match(/(.*)\[([0-9]+)\]/);Te?(ce=Te[1],xe=Te[2],Z=Z[ce]=[],re===j.length-1?Z[xe]=le:Z[xe]={},Z=Z[xe]):(re===j.length-1?Z[ce]=le:Z[ce]={},Z=Z[ce])}return fe};var D=/^([^\[\.]+)\.(.+)?/,V=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function O(ee){return ee.slice(0,2)==="__"}t.expandObjectPaths=function(ee){var le,j,Z,fe,re,ce,xe;if(typeof ee=="object"&&!Array.isArray(ee)){for(j in ee)if(ee.hasOwnProperty(j))if(le=j.match(D)){if(fe=ee[j],Z=le[1],O(Z))continue;delete ee[j],ee[Z]=t.extendDeepNoArrays(ee[Z]||{},t.objectFromPath(j,t.expandObjectPaths(fe))[Z])}else if(le=j.match(V)){if(fe=ee[j],Z=le[1],O(Z))continue;if(re=parseInt(le[2]),delete ee[j],ee[Z]=ee[Z]||[],le[3]===".")xe=le[4],ce=ee[Z][re]=ee[Z][re]||{},t.extendDeepNoArrays(ce,t.objectFromPath(xe,t.expandObjectPaths(fe)));else{if(O(Z))continue;ee[Z][re]=t.expandObjectPaths(fe)}}else{if(O(j))continue;ee[j]=t.expandObjectPaths(ee[j])}}return ee},t.numSeparate=function(ee,le,j){if(j||(j=!1),typeof le!="string"||le.length===0)throw new Error("Separator string required for formatting!");typeof ee=="number"&&(ee=String(ee));var Z=/(\d+)(\d{3})/,fe=le.charAt(0),re=le.charAt(1),ce=ee.split("."),xe=ce[0],Te=ce.length>1?fe+ce[1]:"";if(re&&(ce.length>1||xe.length>4||j))for(;Z.test(xe);)xe=xe.replace(Z,"$1"+re+"$2");return xe+Te},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var N=/^\w*$/;t.templateString=function(ee,le){var j={};return ee.replace(t.TEMPLATE_STRING_REGEX,function(Z,fe){var re;return N.test(fe)?re=le[fe]:(j[fe]=j[fe]||t.nestedProperty(le,fe).get,re=j[fe]()),t.isValidTextValue(re)?re:""})};var B={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return q.apply(B,arguments)};var z={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return q.apply(z,arguments)};var H=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function X(ee){var le=ee.match(H);return le?{key:le[1],op:le[2],number:Number(le[3])}:{key:ee,op:null,number:null}}var $={max:10,count:0,name:"texttemplate",parseMultDiv:!0};t.texttemplateStringForShapes=function(){return q.apply($,arguments)};var ne=/^[:|\|]/;function q(ee,le,j){var Z=this,fe=arguments;le||(le={});var re={};return ee.replace(t.TEMPLATE_STRING_REGEX,function(ce,xe,Te){var we=xe==="xother"||xe==="yother",_e=xe==="_xother"||xe==="_yother",ke=xe==="_xother_"||xe==="_yother_",Ne=xe==="xother_"||xe==="yother_",Ee=we||_e||Ne||ke,ze=xe;(_e||ke)&&(ze=ze.substring(1)),(Ne||ke)&&(ze=ze.substring(0,ze.length-1));var Ce=null,Oe=null;if(Z.parseMultDiv){var Le=X(ze);ze=Le.key,Ce=Le.op,Oe=Le.number}var Ge;if(Ee){if(Ge=le[ze],Ge===void 0)return""}else{var rt,ot;for(ot=3;ot<fe.length;ot++)if(rt=fe[ot],!!rt){if(rt.hasOwnProperty(ze)){Ge=rt[ze];break}if(N.test(ze)||(Ge=t.nestedProperty(rt,ze).get(),Ge=re[ze]||t.nestedProperty(rt,ze).get(),Ge&&(re[ze]=Ge)),Ge!==void 0)break}}if(Ge!==void 0&&(Ce==="*"&&(Ge*=Oe),Ce==="/"&&(Ge/=Oe)),Ge===void 0&&Z)return Z.count<Z.max&&(t.warn("Variable '"+ze+"' in "+Z.name+" could not be found!"),Ge=ce),Z.count===Z.max&&t.warn("Too many "+Z.name+" warnings - additional warnings will be suppressed"),Z.count++,ce;if(Te){var $e;if(Te[0]===":"&&($e=j?j.numberFormat:t.numberFormat,Ge!==""&&(Ge=$e(Te.replace(ne,""))(Ge))),Te[0]==="|"){$e=j?j.timeFormat:S;var qe=t.dateTime2ms(Ge);Ge=t.formatDate(qe,Te.replace(ne,""),!1,$e)}}else{var ht=ze+"Label";le.hasOwnProperty(ht)&&(Ge=le[ht])}return Ee&&(Ge="("+Ge+")",(_e||ke)&&(Ge=" "+Ge),(Ne||ke)&&(Ge=Ge+" ")),Ge})}var ue=48,te=57;t.subplotSort=function(ee,le){for(var j=Math.min(ee.length,le.length)+1,Z=0,fe=0,re=0;re<j;re++){var ce=ee.charCodeAt(re)||0,xe=le.charCodeAt(re)||0,Te=ce>=ue&&ce<=te,we=xe>=ue&&xe<=te;if(Te&&(Z=10*Z+ce-ue),we&&(fe=10*fe+xe-ue),!Te||!we){if(Z!==fe)return Z-fe;if(ce!==xe)return ce-xe}}return fe-Z};var J=2e9;t.seedPseudoRandom=function(){J=2e9},t.pseudoRandom=function(){var ee=J;return J=(69069*J+1)%4294967296,Math.abs(J-ee)<429496729?t.pseudoRandom():J/4294967296},t.fillText=function(ee,le,j){var Z=Array.isArray(j)?function(ce){j.push(ce)}:function(ce){j.text=ce},fe=t.extractOption(ee,le,"htx","hovertext");if(t.isValidTextValue(fe))return Z(fe);var re=t.extractOption(ee,le,"tx","text");if(t.isValidTextValue(re))return Z(re)},t.isValidTextValue=function(ee){return ee||ee===0},t.formatPercent=function(ee,le){le=le||0;for(var j=(Math.round(100*ee*Math.pow(10,le))*Math.pow(.1,le)).toFixed(le)+"%",Z=0;Z<le;Z++)j.indexOf(".")!==-1&&(j=j.replace("0%","%"),j=j.replace(".%","%"));return j},t.isHidden=function(ee){var le=window.getComputedStyle(ee).display;return!le||le==="none"},t.strTranslate=function(ee,le){return ee||le?"translate("+ee+","+le+")":""},t.strRotate=function(ee){return ee?"rotate("+ee+")":""},t.strScale=function(ee){return ee!==1?"scale("+ee+")":""},t.getTextTransform=function(ee){var le=ee.noCenter,j=ee.textX,Z=ee.textY,fe=ee.targetX,re=ee.targetY,ce=ee.anchorX||0,xe=ee.anchorY||0,Te=ee.rotate,we=ee.scale;return we?we>1&&(we=1):we=0,t.strTranslate(fe-we*(j+ce),re-we*(Z+xe))+t.strScale(we)+(Te?"rotate("+Te+(le?"":" "+j+" "+Z)+")":"")},t.setTransormAndDisplay=function(ee,le){ee.attr("transform",t.getTextTransform(le)),ee.style("display",le.scale?null:"none")},t.ensureUniformFontSize=function(ee,le){var j=t.extendFlat({},le);return j.size=Math.max(le.size,ee._fullLayout.uniformtext.minsize||0),j},t.join2=function(ee,le,j){var Z=ee.length;return Z>1?ee.slice(0,-1).join(le)+j+ee[Z-1]:ee.join(le)},t.bigFont=function(ee){return Math.round(1.2*ee)};var ie=t.getFirefoxVersion(),K=ie!==null&&ie<86;t.getPositionFromD3Event=function(){return K?[d.event.layerX,d.event.layerY]:[d.event.offsetX,d.event.offsetY]}},63620:function(U){U.exports=function(e){return window&&window.process&&window.process.versions?Object.prototype.toString.call(e)==="[object Object]":Object.prototype.toString.call(e)==="[object Object]"&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},37804:function(U,F,e){var d=e(22296),S=/^\w*$/,n=0,E=1,T=2,v=3,g=4;U.exports=function(t,o,i,f){i=i||"name",f=f||"value";var u,l,m,h={};o&&o.length?(m=d(t,o),l=m.get()):l=t,o=o||"";var w={};if(l)for(u=0;u<l.length;u++)w[l[u][i]]=u;var c=S.test(f),a={set:function(p,x){var A=x===null?g:n;if(!l){if(!m||A===g)return;l=[],m.set(l)}var P=w[p];if(P===void 0){if(A===g)return;A=A|v,P=l.length,w[p]=P}else x!==(c?l[P][f]:d(l[P],f).get())&&(A=A|T);var y=l[P]=l[P]||{};return y[i]=p,c?y[f]=x:d(y,f).set(x),x!==null&&(A=A&~g),h[P]=h[P]|A,a},get:function(p){if(l){var x=w[p];if(x!==void 0)return c?l[x][f]:d(l[x],f).get()}},rename:function(p,x){var A=w[p];return A===void 0||(h[A]=h[A]|E,w[x]=A,delete w[p],l[A][i]=x),a},remove:function(p){var x=w[p];if(x===void 0)return a;var A=l[x];if(Object.keys(A).length>2)return h[x]=h[x]|T,a.set(p,null);if(c){for(u=x;u<l.length;u++)h[u]=h[u]|v;for(u=x;u<l.length;u++)w[l[u][i]]--;l.splice(x,1),delete w[p]}else d(A,f).set(null),h[x]=h[x]|T|g;return a},constructUpdate:function(){for(var p,x,A={},P=Object.keys(h),y=0;y<P.length;y++)x=P[y],p=o+"["+x+"]",l[x]?(h[x]&E&&(A[p+"."+i]=l[x][i]),h[x]&T&&(c?A[p+"."+f]=h[x]&g?null:l[x][f]:A[p+"."+f]=h[x]&g?null:d(l[x],f).get())):A[p]=null;return A}};return a}},98356:function(U,F,e){var d=e(24040);U.exports=function(n,E){for(var T=n._context.locale,v=0;v<2;v++){for(var g=n._context.locales,r=0;r<2;r++){var t=(g[T]||{}).dictionary;if(t){var o=t[E];if(o)return o}g=d.localeRegistry}var i=T.split("-")[0];if(i===T)break;T=i}return E}},24248:function(U,F,e){var d=e(20556).dfltConfig,S=e(41792),n=U.exports={};n.log=function(){var E;if(d.logging>1){var T=["LOG:"];for(E=0;E<arguments.length;E++)T.push(arguments[E]);console.trace.apply(console,T)}if(d.notifyOnLogging>1){var v=[];for(E=0;E<arguments.length;E++)v.push(arguments[E]);S(v.join("<br>"),"long")}},n.warn=function(){var E;if(d.logging>0){var T=["WARN:"];for(E=0;E<arguments.length;E++)T.push(arguments[E]);console.trace.apply(console,T)}if(d.notifyOnLogging>0){var v=[];for(E=0;E<arguments.length;E++)v.push(arguments[E]);S(v.join("<br>"),"stick")}},n.error=function(){var E;if(d.logging>0){var T=["ERROR:"];for(E=0;E<arguments.length;E++)T.push(arguments[E]);console.error.apply(console,T)}if(d.notifyOnLogging>0){var v=[];for(E=0;E<arguments.length;E++)v.push(arguments[E]);S(v.join("<br>"),"stick")}}},30988:function(U,F,e){var d=e(33428);U.exports=function(n,E,T){var v=n.selectAll("g."+T.replace(/\s/g,".")).data(E,function(r){return r[0].trace.uid});v.exit().remove(),v.enter().append("g").attr("class",T),v.order();var g=n.classed("rangeplot")?"nodeRangePlot3":"node3";return v.each(function(r){r[0][g]=d.select(this)}),v}},52248:function(U,F,e){var d=e(36524);F.init2dArray=function(S,n){for(var E=new Array(S),T=0;T<S;T++)E[T]=new Array(n);return E},F.transposeRagged=function(S){var n=0,E=S.length,T,v;for(T=0;T<E;T++)n=Math.max(n,S[T].length);var g=new Array(n);for(T=0;T<n;T++)for(g[T]=new Array(E),v=0;v<E;v++)g[T][v]=S[v][T];return g},F.dot=function(S,n){if(!(S.length&&n.length)||S.length!==n.length)return null;var E=S.length,T,v;if(S[0].length)for(T=new Array(E),v=0;v<E;v++)T[v]=F.dot(S[v],n);else if(n[0].length){var g=F.transposeRagged(n);for(T=new Array(g.length),v=0;v<g.length;v++)T[v]=F.dot(S,g[v])}else for(T=0,v=0;v<E;v++)T+=S[v]*n[v];return T},F.translationMatrix=function(S,n){return[[1,0,S],[0,1,n],[0,0,1]]},F.rotationMatrix=function(S){var n=S*Math.PI/180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]},F.rotationXYMatrix=function(S,n,E){return F.dot(F.dot(F.translationMatrix(n,E),F.rotationMatrix(S)),F.translationMatrix(-n,-E))},F.apply3DTransform=function(S){return function(){var n=arguments,E=arguments.length===1?n[0]:[n[0],n[1],n[2]||0];return F.dot(S,[E[0],E[1],E[2],1]).slice(0,3)}},F.apply2DTransform=function(S){return function(){var n=arguments;n.length===3&&(n=n[0]);var E=arguments.length===1?n[0]:[n[0],n[1]];return F.dot(S,[E[0],E[1],1]).slice(0,2)}},F.apply2DTransform2=function(S){var n=F.apply2DTransform(S);return function(E){return n(E.slice(0,2)).concat(n(E.slice(2,4)))}},F.convertCssMatrix=function(S){if(S){var n=S.length;if(n===16)return S;if(n===6)return[S[0],S[1],0,0,S[2],S[3],0,0,0,0,1,0,S[4],S[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F.inverseTransformMatrix=function(S){var n=[];return d.invert(n,S),[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}},20435:function(U){function F(d,S){var n=d%S;return n<0?n+S:n}function e(d,S){return Math.abs(d)>S/2?d-Math.round(d/S)*S:d}U.exports={mod:F,modHalf:e}},22296:function(U,F,e){var d=e(38248),S=e(38116).isArrayOrTypedArray;U.exports=function(f,u){if(d(u))u=String(u);else if(typeof u!="string"||u.substr(u.length-4)==="[-1]")throw"bad property string";var l=u.split("."),m,h,w,c;for(c=0;c<l.length;c++)if(String(l[c]).slice(0,2)==="__")throw"bad property string";for(c=0;c<l.length;){if(m=String(l[c]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),m){if(m[1])l[c]=m[1];else if(c===0)l.splice(0,1);else throw"bad property string";for(h=m[2].substr(1,m[2].length-2).split("]["),w=0;w<h.length;w++)c++,l.splice(c,0,Number(h[w]))}c++}return typeof f!="object"?o(f,u,l):{set:v(f,l,u),get:n(f,l),astr:u,parts:l,obj:f}};function n(i,f){return function(){var u=i,l,m,h,w,c;for(w=0;w<f.length-1;w++){if(l=f[w],l===-1){for(m=!0,h=[],c=0;c<u.length;c++)h[c]=n(u[c],f.slice(w+1))(),h[c]!==h[0]&&(m=!1);return m?h[0]:h}if(typeof l=="number"&&!S(u)||(u=u[l],typeof u!="object"||u===null))return}if(!(typeof u!="object"||u===null)&&(h=u[f[w]],h!==null))return h}}var E=/(^|\.)args\[/;function T(i,f){return i===void 0||i===null&&!f.match(E)}function v(i,f,u){return function(l){var m=i,h="",w=T(l,u),c,a;for(a=0;a<f.length-1;a++){if(c=f[a],typeof c=="number"&&!S(m))throw"array index but container is not an array";if(c===-1){if(w=!r(m,f.slice(a+1),l,u),w)break;return}if(!t(m,c,f[a+1],w))break;if(m=m[c],typeof m!="object"||m===null)throw"container is not an object";h=g(h,c)}if(w){if(a===f.length-1&&(delete m[f[a]],Array.isArray(m)&&+f[a]===m.length-1))for(;m.length&&m[m.length-1]===void 0;)m.pop()}else m[f[a]]=l}}function g(i,f){var u=f;return d(f)?u="["+f+"]":i&&(u="."+f),i+u}function r(i,f,u,l){var m=S(u),h=!0,w=u,c=l.replace("-1",0),a=m?!1:T(u,c),p=f[0],x;for(x=0;x<i.length;x++)c=l.replace("-1",x),m&&(w=u[x%u.length],a=T(w,c)),a&&(h=!1),t(i,x,p,a)&&v(i[x],f,l.replace("-1",x))(w);return h}function t(i,f,u,l){if(i[f]===void 0){if(l)return!1;typeof u=="number"?i[f]=[]:i[f]={}}return!0}function o(i,f,u){return{set:function(){throw"bad container"},get:function(){},astr:f,parts:u,obj:i}}},16628:function(U){U.exports=function(){}},41792:function(U,F,e){var d=e(33428),S=e(38248),n=[];U.exports=function(E,T){if(n.indexOf(E)!==-1)return;n.push(E);var v=1e3;S(T)?v=T:T==="long"&&(v=3e3);var g=d.select("body").selectAll(".plotly-notifier").data([0]);g.enter().append("div").classed("plotly-notifier",!0);var r=g.selectAll(".notifier-note").data(n);function t(o){o.duration(700).style("opacity",0).each("end",function(i){var f=n.indexOf(i);f!==-1&&n.splice(f,1),d.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var i=d.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){i.transition().call(t)});for(var f=i.append("p"),u=o.split(/<br\s*\/?>/g),l=0;l<u.length;l++)l&&f.append("br"),f.append("span").text(u[l]);T==="stick"?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(v).call(t)})}},72213:function(U,F,e){var d=e(93972),S="data-savedcursor",n="!!";U.exports=function(T,v){var g=T.attr(S);if(v){if(!g){for(var r=(T.attr("class")||"").split(" "),t=0;t<r.length;t++){var o=r[t];o.indexOf("cursor-")===0&&T.attr(S,o.substr(7)).classed(o,!1)}T.attr(S)||T.attr(S,n)}d(T,v)}else g&&(T.attr(S,null),g===n?d(T):d(T,g))}},92065:function(U,F,e){var d=e(52248).dot,S=e(39032).BADNUM,n=U.exports={};n.tester=function(T){var v=T.slice(),g=v[0][0],r=g,t=v[0][1],o=t,i;for((v[v.length-1][0]!==v[0][0]||v[v.length-1][1]!==v[0][1])&&v.push(v[0]),i=1;i<v.length;i++)g=Math.min(g,v[i][0]),r=Math.max(r,v[i][0]),t=Math.min(t,v[i][1]),o=Math.max(o,v[i][1]);var f=!1,u;v.length===5&&(v[0][0]===v[1][0]?v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]&&(f=!0,u=function(c){return c[0]===v[0][0]}):v[0][1]===v[1][1]&&v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]&&(f=!0,u=function(c){return c[1]===v[0][1]}));function l(c,a){var p=c[0],x=c[1];return!(p===S||p<g||p>r||x===S||x<t||x>o||a&&u(c))}function m(c,a){var p=c[0],x=c[1];if(p===S||p<g||p>r||x===S||x<t||x>o)return!1;var A=v.length,P=v[0][0],y=v[0][1],C=0,M,s,_,b,k;for(M=1;M<A;M++)if(s=P,_=y,P=v[M][0],y=v[M][1],b=Math.min(s,P),!(p<b||p>Math.max(s,P)||x>Math.max(_,y)))if(x<Math.min(_,y))p!==b&&C++;else{if(P===s?k=x:k=_+(p-s)*(y-_)/(P-s),x===k)return!(M===1&&a);x<=k&&p!==b&&C++}return C%2===1}var h=!0,w=v[0];for(i=1;i<v.length;i++)if(w[0]!==v[i][0]||w[1]!==v[i][1]){h=!1;break}return{xmin:g,xmax:r,ymin:t,ymax:o,pts:v,contains:f?l:m,isRect:f,degenerate:h}},n.isSegmentBent=function(T,v,g,r){var t=T[v],o=[T[g][0]-t[0],T[g][1]-t[1]],i=d(o,o),f=Math.sqrt(i),u=[-o[1]/f,o[0]/f],l,m,h;for(l=v+1;l<g;l++)if(m=[T[l][0]-t[0],T[l][1]-t[1]],h=d(m,o),h<0||h>i||Math.abs(d(m,u))>r)return!0;return!1},n.filter=function(T,v){var g=[T[0]],r=0,t=0;function o(f){T.push(f);var u=g.length,l=r;g.splice(t+1);for(var m=l+1;m<T.length;m++)(m===T.length-1||n.isSegmentBent(T,l,m+1,v))&&(g.push(T[m]),g.length<u-2&&(r=m,t=g.length-1),l=m)}if(T.length>1){var i=T.pop();o(i)}return{addPt:o,raw:T,filtered:g}}},5048:function(U,F,e){var d=e(16576),S=e(28624);U.exports=function(E,T,v){var g=E._fullLayout,r=!0;return g._glcanvas.each(function(t){if(t.regl){t.regl.preloadCachedCode(v);return}if(!(t.pick&&!g._has("parcoords"))){try{t.regl=S({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:E._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:v||{}})}catch{r=!1}t.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(o){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:o,layer:t.key})},!1)}}),r||d({container:g._glcontainer.node()}),r}},34296:function(U,F,e){var d=e(38248),S=e(25928);U.exports=function(T){var v;if(T&&T.hasOwnProperty("userAgent")?v=T.userAgent:v=n(),typeof v!="string")return!0;var g=S({ua:{headers:{"user-agent":v}},tablet:!0,featureDetect:!1});if(!g)for(var r=v.split(" "),t=1;t<r.length;t++){var o=r[t];if(o.indexOf("Safari")!==-1)for(var i=t-1;i>-1;i--){var f=r[i];if(f.substr(0,8)==="Version/"){var u=f.substr(8).split(".")[0];if(d(u)&&(u=+u),u>=13)return!0}}}return g};function n(){var E;return typeof navigator<"u"&&(E=navigator.userAgent),E&&E.headers&&typeof E.headers["user-agent"]=="string"&&(E=E.headers["user-agent"]),E}},52416:function(U){U.exports=function(e,d){if(d instanceof RegExp){for(var S=d.toString(),n=0;n<e.length;n++)if(e[n]instanceof RegExp&&e[n].toString()===S)return e;e.push(d)}else(d||d===0)&&e.indexOf(d)===-1&&e.push(d);return e}},94552:function(U,F,e){var d=e(3400),S=e(20556).dfltConfig;function n(T,v){for(var g=[],r,t=0;t<v.length;t++)r=v[t],r===T?g[t]=r:typeof r=="object"?g[t]=Array.isArray(r)?d.extendDeep([],r):d.extendDeepAll({},r):g[t]=r;return g}var E={};E.add=function(T,v,g,r,t){var o,i;if(T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},i=T.undoQueue.index,T.autoplay){T.undoQueue.inSequence||(T.autoplay=!1);return}!T.undoQueue.sequence||T.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(i,T.undoQueue.queue.length-i,o),T.undoQueue.index+=1):o=T.undoQueue.queue[i-1],T.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(v),o.undo.args.unshift(g),o.redo.calls.push(r),o.redo.args.push(t)),T.undoQueue.queue.length>S.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--)},E.startSequence=function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},E.stopSequence=function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},E.undo=function(v){var g,r;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index<=0)){for(v.undoQueue.index--,g=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,r=0;r<g.undo.calls.length;r++)E.plotDo(v,g.undo.calls[r],g.undo.args[r]);v.undoQueue.inSequence=!1,v.autoplay=!1}},E.redo=function(v){var g,r;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index>=v.undoQueue.queue.length)){for(g=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,r=0;r<g.redo.calls.length;r++)E.plotDo(v,g.redo.calls[r],g.redo.args[r]);v.undoQueue.inSequence=!1,v.autoplay=!1,v.undoQueue.index++}},E.plotDo=function(T,v,g){T.autoplay=!0,g=n(T,g),v.apply(null,g)},U.exports=E},53756:function(U,F){F.counter=function(e,d,S,n){var E=(d||"")+(S?"":"$"),T=n===!1?"":"^";return e==="xy"?new RegExp(T+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+E):new RegExp(T+e+"([2-9]|[1-9][0-9]+)?"+E)}},23193:function(U){var F=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;U.exports=function(d,S){for(;S;){var n=d.match(F);if(n)d=n[1];else if(d.match(e))d="";else throw new Error("bad relativeAttr call:"+[d,S]);if(S.charAt(0)==="^")S=S.slice(1);else break}return d&&S.charAt(0)!=="["?d+"."+S:d+S}},51528:function(U,F,e){var d=e(38116).isArrayOrTypedArray,S=e(63620);U.exports=function n(E,T){for(var v in T){var g=T[v],r=E[v];if(r!==g)if(v.charAt(0)==="_"||typeof g=="function"){if(v in E)continue;E[v]=g}else if(d(g)&&d(r)&&S(g[0])){if(v==="customdata"||v==="ids")continue;for(var t=Math.min(g.length,r.length),o=0;o<t;o++)r[o]!==g[o]&&S(g[o])&&S(r[o])&&n(r[o],g[o])}else S(g)&&S(r)&&(n(r,g),Object.keys(r).length||delete E[v])}}},14952:function(U,F,e){var d=e(38248),S=e(24248),n=e(35536),E=e(39032).BADNUM,T=1e-9;F.findBin=function(o,i,f){if(d(i.start))return f?Math.ceil((o-i.start)/i.size-T)-1:Math.floor((o-i.start)/i.size+T);var u=0,l=i.length,m=0,h=l>1?(i[l-1]-i[0])/(l-1):1,w,c;for(h>=0?c=f?v:g:c=f?t:r,o+=h*T*(f?-1:1)*(h>=0?1:-1);u<l&&m++<100;)w=Math.floor((u+l)/2),c(i[w],o)?u=w+1:l=w;return m>90&&S.log("Long binary search..."),u-1};function v(o,i){return o<i}function g(o,i){return o<=i}function r(o,i){return o>i}function t(o,i){return o>=i}F.sorterAsc=function(o,i){return o-i},F.sorterDes=function(o,i){return i-o},F.distinctVals=function(o){var i=o.slice();i.sort(F.sorterAsc);var f;for(f=i.length-1;f>-1&&i[f]===E;f--);for(var u=i[f]-i[0]||1,l=u/(f||1)/1e4,m=[],h,w=0;w<=f;w++){var c=i[w],a=c-h;h===void 0?(m.push(c),h=c):a>l&&(u=Math.min(u,a),m.push(c),h=c)}return{vals:m,minDiff:u}},F.roundUp=function(o,i,f){for(var u=0,l=i.length-1,m,h=0,w=f?0:1,c=f?1:0,a=f?Math.ceil:Math.floor;u<l&&h++<100;)m=a((u+l)/2),i[m]<=o?u=m+w:l=m-c;return i[u]},F.sort=function(o,i){for(var f=0,u=0,l=1;l<o.length;l++){var m=i(o[l],o[l-1]);if(m<0?f=1:m>0&&(u=1),f&&u)return o.sort(i)}return u?o:o.reverse()},F.findIndexOfMin=function(o,i){i=i||n;for(var f=1/0,u,l=0;l<o.length;l++){var m=i(o[l]);m<f&&(f=m,u=l)}return u}},93972:function(U){U.exports=function(e,d){(e.attr("class")||"").split(" ").forEach(function(S){S.indexOf("cursor-")===0&&e.classed(S,!1)}),d&&e.classed("cursor-"+d,!0)}},16576:function(U,F,e){var d=e(76308),S=function(){};U.exports=function(E){for(var T in E)typeof E[T]=="function"&&(E[T]=S);E.destroy=function(){E.container.parentNode.removeChild(E.container)};var v=document.createElement("div");v.className="no-webgl",v.style.cursor="pointer",v.style.fontSize="24px",v.style.color=d.defaults[0],v.style.position="absolute",v.style.left=v.style.top="0px",v.style.width=v.style.height="100%",v.style["background-color"]=d.lightLine,v.style["z-index"]=30;var g=document.createElement("p");return g.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",g.style.position="relative",g.style.top="50%",g.style.left="50%",g.style.height="30%",g.style.width="50%",g.style.margin="-15% 0 0 -25%",v.appendChild(g),E.container.appendChild(v),E.container.style.background="#FFFFFF",E.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(U){U.exports=function(e){return Object.keys(e).sort()}},63084:function(U,F,e){var d=e(38248),S=e(38116).isArrayOrTypedArray;F.aggNums=function(n,E,T,v){var g,r;if((!v||v>T.length)&&(v=T.length),d(E)||(E=!1),S(T[0])){for(r=new Array(v),g=0;g<v;g++)r[g]=F.aggNums(n,E,T[g]);T=r}for(g=0;g<v;g++)d(E)?d(T[g])&&(E=n(+E,+T[g])):E=T[g];return E},F.len=function(n){return F.aggNums(function(E){return E+1},0,n)},F.mean=function(n,E){return E||(E=F.len(n)),F.aggNums(function(T,v){return T+v},0,n)/E},F.midRange=function(n){if(!(n===void 0||n.length===0))return(F.aggNums(Math.max,null,n)+F.aggNums(Math.min,null,n))/2},F.variance=function(n,E,T){return E||(E=F.len(n)),d(T)||(T=F.mean(n,E)),F.aggNums(function(v,g){return v+Math.pow(g-T,2)},0,n)/E},F.stdev=function(n,E,T){return Math.sqrt(F.variance(n,E,T))},F.median=function(n){var E=n.slice().sort();return F.interp(E,.5)},F.interp=function(n,E){if(!d(E))throw"n should be a finite number";if(E=E*n.length-.5,E<0)return n[0];if(E>n.length-1)return n[n.length-1];var T=E%1;return T*n[Math.ceil(E)]+(1-T)*n[Math.floor(E)]}},43080:function(U,F,e){var d=e(72160);function S(n){return n?d(n):[0,0,0,1]}U.exports=S},9188:function(U,F,e){var d=e(2264),S=e(43616),n=e(3400),E=null;function T(){if(E!==null)return E;E=!1;var v=n.isIE()||n.isSafari()||n.isIOS();if(window.navigator.userAgent&&!v){var g=Array.from(d.CSS_DECLARATIONS).reverse(),r=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof r=="function")E=g.some(function(f){return r.apply(null,f)});else{var t=S.tester.append("image").attr("style",d.STYLE),o=window.getComputedStyle(t.node()),i=o.imageRendering;E=g.some(function(f){var u=f[1];return i===u||i===u.toLowerCase()}),t.remove()}}return E}U.exports=T},72736:function(U,F,e){var d=e(33428),S=e(3400),n=S.strTranslate,E=e(9616),T=e(84284).LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;F.convertToTspans=function(B,z,H){var X=B.text(),$=!B.attr("data-notex")&&z&&z._context.typesetMath&&typeof MathJax<"u"&&X.match(v),ne=d.select(B.node().parentNode);if(ne.empty())return;var q=B.attr("class")?B.attr("class").split(" ")[0]:"text";q+="-math",ne.selectAll("svg."+q).remove(),ne.selectAll("g."+q+"-group").remove(),B.style("display",null).attr({"data-unformatted":X,"data-math":"N"});function ue(){ne.empty()||(q=B.attr("class")+"-math",ne.select("svg."+q).remove()),B.text("").style("white-space","pre");var te=D(B.node(),X);te&&B.style("pointer-events","all"),F.positionText(B),H&&H.call(B)}return $?(z&&z._promises||[]).push(new Promise(function(te){B.style("display","none");var J=parseInt(B.node().style.fontSize,10),ie={fontSize:J};i($[2],ie,function(K,ee,le){ne.selectAll("svg."+q).remove(),ne.selectAll("g."+q+"-group").remove();var j=K&&K.select("svg");if(!j||!j.node()){ue(),te();return}var Z=ne.append("g").classed(q+"-group",!0).attr({"pointer-events":"none","data-unformatted":X,"data-math":"Y"});Z.node().appendChild(j.node()),ee&&ee.node()&&j.node().insertBefore(ee.node().cloneNode(!0),j.node().firstChild);var fe=le.width,re=le.height;j.attr({class:q,height:re,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ce=B.node().style.fill||"black",xe=j.select("g");xe.attr({fill:ce,stroke:ce});var Te=xe.node().getBoundingClientRect(),we=Te.width,_e=Te.height;(we>fe||_e>re)&&(j.style("overflow","hidden"),Te=j.node().getBoundingClientRect(),we=Te.width,_e=Te.height);var ke=+B.attr("x"),Ne=+B.attr("y"),Ee=J||B.node().getBoundingClientRect().height,ze=-Ee/4;if(q[0]==="y")Z.attr({transform:"rotate("+[-90,ke,Ne]+")"+n(-we/2,ze-_e/2)});else if(q[0]==="l")Ne=ze-_e/2;else if(q[0]==="a"&&q.indexOf("atitle")!==0)ke=0,Ne=ze;else{var Ce=B.attr("text-anchor");ke=ke-we*(Ce==="middle"?.5:Ce==="end"?1:0),Ne=Ne+ze-_e/2}j.attr({x:ke,y:Ne}),H&&H.call(B,Z),te(Z)})})):ue(),B};var g=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function t(B){return B.replace(g,"\\lt ").replace(r,"\\gt ")}var o=[["$","$"],["\\(","\\)"]];function i(B,z,H){var X=parseInt((MathJax.version||"").split(".")[0]);if(X!==2&&X!==3){S.warn("No MathJax version:",MathJax.version);return}var $,ne,q,ue,te=function(){return ne=S.extendDeepAll({},MathJax.Hub.config),q=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},J=function(){ne=S.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o},ie=function(){if($=MathJax.Hub.config.menuSettings.renderer,$!=="SVG")return MathJax.Hub.setRenderer("SVG")},K=function(){$=MathJax.config.startup.output,$!=="svg"&&(MathJax.config.startup.output="svg")},ee=function(){var ce="math-output-"+S.randstr({},64);ue=d.select("body").append("div").attr({id:ce}).style({visibility:"hidden",position:"absolute","font-size":z.fontSize+"px"}).text(t(B));var xe=ue.node();return X===2?MathJax.Hub.Typeset(xe):MathJax.typeset([xe])},le=function(){var ce=ue.select(X===2?".MathJax_SVG":".MathJax"),xe=!ce.empty()&&ue.select("svg").node();if(!xe)S.log("There was an error in the tex syntax.",B),H();else{var Te=xe.getBoundingClientRect(),we;X===2?we=d.select("body").select("#MathJax_SVG_glyphs"):we=ce.select("defs"),H(ce,we,Te)}ue.remove()},j=function(){if($!=="SVG")return MathJax.Hub.setRenderer($)},Z=function(){$!=="svg"&&(MathJax.config.startup.output=$)},fe=function(){return q!==void 0&&(MathJax.Hub.processSectionDelay=q),MathJax.Hub.Config(ne)},re=function(){MathJax.config=ne};X===2?MathJax.Hub.Queue(te,ie,ee,le,j,fe):X===3&&(J(),K(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ee(),le(),Z(),re()}))}var f={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},l={sub:"-0.21em",sup:"0.42em"},m="",h=["http:","https:","mailto:","",void 0,":"],w=F.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,a=/<(\/?)([^ >]*)(\s+(.*))?>/i,p=/<br(\s+.*)?>/i;F.BR_TAG_ALL=/<br(\s+.*)?>/gi;var x=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,A=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,P=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function C(B,z){if(!B)return null;var H=B.match(z),X=H&&(H[3]||H[4]);return X&&b(X)}var M=/(^|;)\s*color:/;F.plainText=function(B,z){z=z||{};for(var H=z.len!==void 0&&z.len!==-1?z.len:1/0,X=z.allowedTags!==void 0?z.allowedTags:["br"],$="...",ne=$.length,q=B.split(c),ue=[],te="",J=0,ie=0;ie<q.length;ie++){var K=q[ie],ee=K.match(a),le=ee&&ee[2].toLowerCase();if(le)X.indexOf(le)!==-1&&(ue.push(K),te=le);else{var j=K.length;if(J+j<H)ue.push(K),J+=j;else if(J<H){var Z=H-J;te&&(te!=="br"||Z<=ne||j<=ne)&&ue.pop(),H>ne?ue.push(K.substr(0,Z-ne)+$):ue.push(K.substr(0,Z));break}te=""}}return ue.join("")};var s={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},_=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function b(B){return B.replace(_,function(z,H){var X;return H.charAt(0)==="#"?X=k(H.charAt(1)==="x"?parseInt(H.substr(2),16):parseInt(H.substr(1),10)):X=s[H],X||z})}F.convertEntities=b;function k(B){if(!(B>1114111)){var z=String.fromCodePoint;if(z)return z(B);var H=String.fromCharCode;return B<=65535?H(B):H((B>>10)+55232,B%1024+56320)}}function D(B,z){z=z.replace(w," ");var H=!1,X=[],$,ne=-1;function q(){ne++;var _e=document.createElementNS(E.svg,"tspan");d.select(_e).attr({class:"line",dy:ne*T+"em"}),B.appendChild(_e),$=_e;var ke=X;if(X=[{node:_e}],ke.length>1)for(var Ne=1;Ne<ke.length;Ne++)ue(ke[Ne])}function ue(_e){var ke=_e.type,Ne={},Ee;if(ke==="a"){Ee="a";var ze=_e.target,Ce=_e.href,Oe=_e.popup;Ce&&(Ne={"xlink:xlink:show":ze==="_blank"||ze.charAt(0)!=="_"?"new":"replace",target:ze,"xlink:xlink:href":Ce},Oe&&(Ne.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Oe+'");return false;'))}else Ee="tspan";_e.style&&(Ne.style=_e.style);var Le=document.createElementNS(E.svg,Ee);if(ke==="sup"||ke==="sub"){te($,m),$.appendChild(Le);var Ge=document.createElementNS(E.svg,"tspan");te(Ge,m),d.select(Ge).attr("dy",l[ke]),Ne.dy=u[ke],$.appendChild(Le),$.appendChild(Ge)}else $.appendChild(Le);d.select(Le).attr(Ne),$=_e.node=Le,X.push(_e)}function te(_e,ke){_e.appendChild(document.createTextNode(ke))}function J(_e){if(X.length===1){S.log("Ignoring unexpected end tag </"+_e+">.",z);return}var ke=X.pop();_e!==ke.type&&S.log("Start tag <"+ke.type+"> doesnt match end tag <"+_e+">. Pretending it did match.",z),$=X[X.length-1].node}var ie=p.test(z);ie?q():($=B,X=[{node:B}]);for(var K=z.split(c),ee=0;ee<K.length;ee++){var le=K[ee],j=le.match(a),Z=j&&j[2].toLowerCase(),fe=f[Z];if(Z==="br")q();else if(fe===void 0)te($,b(le));else if(j[1])J(Z);else{var re=j[4],ce={type:Z},xe=C(re,x);if(xe?(xe=xe.replace(M,"$1 fill:"),fe&&(xe+=";"+fe)):fe&&(xe=fe),xe&&(ce.style=xe),Z==="a"){H=!0;var Te=C(re,A);if(Te){var we=V(Te);we&&(ce.href=we,ce.target=C(re,P)||"_blank",ce.popup=C(re,y))}}ue(ce)}}return H}function V(B){var z=encodeURI(decodeURI(B)),H=document.createElement("a"),X=document.createElement("a");H.href=B,X.href=z;var $=H.protocol,ne=X.protocol;return h.indexOf($)!==-1&&h.indexOf(ne)!==-1?z:""}F.sanitizeHTML=function(z){z=z.replace(w," ");for(var H=document.createElement("p"),X=H,$=[],ne=z.split(c),q=0;q<ne.length;q++){var ue=ne[q],te=ue.match(a),J=te&&te[2].toLowerCase();if(J in f)if(te[1])$.length&&(X=$.pop());else{var ie=te[4],K=C(ie,x),ee=K?{style:K}:{};if(J==="a"){var le=C(ie,A);if(le){var j=V(le);if(j){ee.href=j;var Z=C(ie,P);Z&&(ee.target=Z)}}}var fe=document.createElement(J);X.appendChild(fe),d.select(fe).attr(ee),X=fe,$.push(fe)}else X.appendChild(document.createTextNode(b(ue)))}var re="innerHTML";return H[re]},F.lineCount=function(z){return z.selectAll("tspan.line").size()||1},F.positionText=function(z,H,X){return z.each(function(){var $=d.select(this);function ne(te,J){return J===void 0?(J=$.attr(te),J===null&&($.attr(te,0),J=0)):$.attr(te,J),J}var q=ne("x",H),ue=ne("y",X);this.nodeName==="text"&&$.selectAll("tspan.line").attr({x:q,y:ue})})};function O(B,z,H){var X=H.horizontalAlign,$=H.verticalAlign||"top",ne=B.node().getBoundingClientRect(),q=z.node().getBoundingClientRect(),ue,te,J;return $==="bottom"?te=function(){return ne.bottom-ue.height}:$==="middle"?te=function(){return ne.top+(ne.height-ue.height)/2}:te=function(){return ne.top},X==="right"?J=function(){return ne.right-ue.width}:X==="center"?J=function(){return ne.left+(ne.width-ue.width)/2}:J=function(){return ne.left},function(){ue=this.node().getBoundingClientRect();var ie=J()-q.left,K=te()-q.top,ee=H.gd||{};if(H.gd){ee._fullLayout._calcInverseTransform(ee);var le=S.apply3DTransform(ee._fullLayout._invTransform)(ie,K);ie=le[0],K=le[1]}return this.style({top:K+"px",left:ie+"px","z-index":1e3}),this}}var N="1px ";F.makeTextShadow=function(B){var z=N,H=N,X=N;return z+H+X+B+", -"+z+"-"+H+X+B+", "+z+"-"+H+X+B+", -"+z+H+X+B},F.makeEditable=function(B,z){var H=z.gd,X=z.delegate,$=d.dispatch("edit","input","cancel"),ne=X||B;if(B.style({"pointer-events":X?"none":"all"}),B.size()!==1)throw new Error("boo");function q(){te(),B.style({opacity:0});var J=ne.attr("class"),ie;J?ie="."+J.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&d.select(B.node().parentNode).select(ie).style({opacity:0})}function ue(J){var ie=J.node(),K=document.createRange();K.selectNodeContents(ie);var ee=window.getSelection();ee.removeAllRanges(),ee.addRange(K),ie.focus()}function te(){var J=d.select(H),ie=J.select(".svg-container"),K=ie.append("div"),ee=B.node().style,le=parseFloat(ee.fontSize||12),j=z.text;j===void 0&&(j=B.attr("data-unformatted")),K.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ee.fontFamily||"Arial","font-size":le,color:z.fill||ee.fill||"black",opacity:1,"background-color":z.background||"transparent",outline:"#ffffff33 1px solid",margin:[-le/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(j).call(O(B,ie,z)).on("blur",function(){H._editing=!1,B.text(this.textContent).style({opacity:1});var Z=d.select(this).attr("class"),fe;Z?fe="."+Z.split(" ")[0]+"-math-group":fe="[class*=-math-group]",fe&&d.select(B.node().parentNode).select(fe).style({opacity:0});var re=this.textContent;d.select(this).transition().duration(0).remove(),d.select(document).on("mouseup",null),$.edit.call(B,re)}).on("focus",function(){var Z=this;H._editing=!0,d.select(document).on("mouseup",function(){if(d.event.target===Z)return!1;document.activeElement===K.node()&&K.node().blur()})}).on("keyup",function(){d.event.which===27?(H._editing=!1,B.style({opacity:1}),d.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),$.cancel.call(B,this.textContent)):($.input.call(B,this.textContent),d.select(this).call(O(B,ie,z)))}).on("keydown",function(){d.event.which===13&&this.blur()}).call(ue)}return z.immediate?q():ne.on("click",q),d.rebind(B,$,"on")}},91200:function(U,F){var e={};F.throttle=function(n,E,T){var v=e[n],g=Date.now();if(!v){for(var r in e)e[r].ts<g-6e4&&delete e[r];v=e[n]={ts:0,timer:null}}d(v);function t(){T(),v.ts=Date.now(),v.onDone&&(v.onDone(),v.onDone=null)}if(g>v.ts+E){t();return}v.timer=setTimeout(function(){t(),v.timer=null},E)},F.done=function(S){var n=e[S];return!n||!n.timer?Promise.resolve():new Promise(function(E){var T=n.onDone;n.onDone=function(){T&&T(),E(),n.onDone=null}})},F.clear=function(S){if(S)d(e[S]),delete e[S];else for(var n in e)F.clear(n)};function d(S){S&&S.timer!==null&&(clearTimeout(S.timer),S.timer=null)}},36896:function(U,F,e){var d=e(38248);U.exports=function(n,E){if(n>0)return Math.log(n)/Math.LN10;var T=Math.log(Math.min(E[0],E[1]))/Math.LN10;return d(T)||(T=Math.log(Math.max(E[0],E[1]))/Math.LN10-6),T}},59972:function(U,F,e){var d=U.exports={},S=e(79552).locationmodeToLayer,n=e(55712).NO;d.getTopojsonName=function(E){return[E.scope.replace(/ /g,"-"),"_",E.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(E,T){return E+T+".json"},d.getTopojsonFeatures=function(E,T){var v=S[E.locationmode],g=T.objects[v];return n(T,g).features}},11680:function(U){U.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(U){U.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(U,F,e){var d=e(24040);U.exports=function(n){for(var E=d.layoutArrayContainers,T=d.layoutArrayRegexes,v=n.split("[")[0],g,r,t=0;t<T.length;t++)if(r=n.match(T[t]),r&&r.index===0){g=r[0];break}if(g||(g=E[E.indexOf(v)]),!g)return!1;var o=n.substr(g.length);return o?(r=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:g,index:Number(r[1]),property:r[3]||""}:!1):{array:g,index:"",property:""}}},67824:function(U,F,e){var d=e(92880).extendFlat,S=e(63620),n={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},E={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},T=n.flags.slice().concat(["fullReplot"]),v=E.flags.slice().concat("layoutReplot");U.exports={traces:n,layout:E,traceFlags:function(){return g(T)},layoutFlags:function(){return g(v)},update:function(o,i){var f=i.editType;if(f&&f!=="none")for(var u=f.split("+"),l=0;l<u.length;l++)o[u[l]]=!0},overrideAll:r};function g(o){for(var i={},f=0;f<o.length;f++)i[o[f]]=!1;return i}function r(o,i,f){var u=d({},o);for(var l in u){var m=u[l];S(m)&&(u[l]=t(m,i,f,l))}return f==="from-root"&&(u.editType=i),u}function t(o,i,f,u){if(o.valType){var l=d({},o);if(l.editType=i,Array.isArray(o.items)){l.items=new Array(o.items.length);for(var m=0;m<o.items.length;m++)l.items[m]=t(o.items[m],i)}return l}else return r(o,i,u.charAt(0)==="_"?"nested":"from-root")}},93404:function(U,F,e){var d=e(38248),S=e(61784),n=e(24040),E=e(3400),T=e(7316),v=e(79811),g=e(76308),r=v.cleanId,t=v.getFromTrace,o=n.traceIs;F.clearPromiseQueue=function(p){Array.isArray(p._promises)&&p._promises.length>0&&E.log("Clearing previous rejected promises from queue."),p._promises=[]},F.cleanLayout=function(p){var x,A;p||(p={}),p.xaxis1&&(p.xaxis||(p.xaxis=p.xaxis1),delete p.xaxis1),p.yaxis1&&(p.yaxis||(p.yaxis=p.yaxis1),delete p.yaxis1),p.scene1&&(p.scene||(p.scene=p.scene1),delete p.scene1);var P=(T.subplotsRegistry.cartesian||{}).attrRegex,y=(T.subplotsRegistry.polar||{}).attrRegex,C=(T.subplotsRegistry.ternary||{}).attrRegex,M=(T.subplotsRegistry.gl3d||{}).attrRegex,s=Object.keys(p);for(x=0;x<s.length;x++){var _=s[x];if(P&&P.test(_)){var b=p[_];b.anchor&&b.anchor!=="free"&&(b.anchor=r(b.anchor)),b.overlaying&&(b.overlaying=r(b.overlaying)),b.type||(b.isdate?b.type="date":b.islog?b.type="log":b.isdate===!1&&b.islog===!1&&(b.type="linear")),(b.autorange==="withzero"||b.autorange==="tozero")&&(b.autorange=!0,b.rangemode="tozero"),b.insiderange&&delete b.range,delete b.islog,delete b.isdate,delete b.categories,h(b,"domain")&&delete b.domain,b.autotick!==void 0&&(b.tickmode===void 0&&(b.tickmode=b.autotick?"auto":"linear"),delete b.autotick),f(b)}else if(y&&y.test(_)){var k=p[_];f(k.radialaxis)}else if(C&&C.test(_)){var D=p[_];f(D.aaxis),f(D.baxis),f(D.caxis)}else if(M&&M.test(_)){var V=p[_],O=V.cameraposition;if(Array.isArray(O)&&O[0].length===4){var N=O[0],B=O[1],z=O[2],H=S([],N),X=[];for(A=0;A<3;++A)X[A]=B[A]+z*H[2+4*A];V.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:B[0],y:B[1],z:B[2]},up:{x:0,y:0,z:1}},delete V.cameraposition}f(V.xaxis),f(V.yaxis),f(V.zaxis)}}var $=Array.isArray(p.annotations)?p.annotations.length:0;for(x=0;x<$;x++){var ne=p.annotations[x];E.isPlainObject(ne)&&(ne.ref&&(ne.ref==="paper"?(ne.xref="paper",ne.yref="paper"):ne.ref==="data"&&(ne.xref="x",ne.yref="y"),delete ne.ref),i(ne,"xref"),i(ne,"yref"))}var q=Array.isArray(p.shapes)?p.shapes.length:0;for(x=0;x<q;x++){var ue=p.shapes[x];E.isPlainObject(ue)&&(i(ue,"xref"),i(ue,"yref"))}var te=Array.isArray(p.images)?p.images.length:0;for(x=0;x<te;x++){var J=p.images[x];E.isPlainObject(J)&&(i(J,"xref"),i(J,"yref"))}var ie=p.legend;return ie&&(ie.x>3?(ie.x=1.02,ie.xanchor="left"):ie.x<-2&&(ie.x=-.02,ie.xanchor="right"),ie.y>3?(ie.y=1.02,ie.yanchor="bottom"):ie.y<-2&&(ie.y=-.02,ie.yanchor="top")),f(p),p.dragmode==="rotate"&&(p.dragmode="orbit"),g.clean(p),p.template&&p.template.layout&&F.cleanLayout(p.template.layout),p};function i(p,x){var A=p[x],P=x.charAt(0);A&&A!=="paper"&&(p[x]=r(A,P,!0))}function f(p){p&&((typeof p.title=="string"||typeof p.title=="number")&&(p.title={text:p.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"));function x(A,P){var y=p[A],C=p.title&&p.title[P];y&&!C&&(p.title||(p.title={}),p.title[P]=p[A],delete p[A])}}F.cleanData=function(p){for(var x=0;x<p.length;x++){var A=p[x],P;if(A.type==="histogramy"&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins),A.error_y&&"opacity"in A.error_y){var y=g.defaults,C=A.error_y.color||(o(A,"bar")?g.defaultLine:y[x%y.length]);A.error_y.color=g.addOpacity(g.rgb(C),g.opacity(C)*A.error_y.opacity),delete A.error_y.opacity}if("bardir"in A&&(A.bardir==="h"&&(o(A,"bar")||A.type.substr(0,9)==="histogram")&&(A.orientation="h",F.swapXYData(A)),delete A.bardir),A.type==="histogramy"&&F.swapXYData(A),(A.type==="histogramx"||A.type==="histogramy")&&(A.type="histogram"),"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl),"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,delete A.reversescl),A.xaxis&&(A.xaxis=r(A.xaxis,"x")),A.yaxis&&(A.yaxis=r(A.yaxis,"y")),o(A,"gl3d")&&A.scene&&(A.scene=T.subplotsRegistry.gl3d.cleanId(A.scene)),!o(A,"pie-like")&&!o(A,"bar-like"))if(Array.isArray(A.textposition))for(P=0;P<A.textposition.length;P++)A.textposition[P]=m(A.textposition[P]);else A.textposition&&(A.textposition=m(A.textposition));var M=n.getModule(A);if(M&&M.colorbar){var s=M.colorbar.container,_=s?A[s]:A;_&&_.colorscale&&(_.colorscale==="YIGnBu"&&(_.colorscale="YlGnBu"),_.colorscale==="YIOrRd"&&(_.colorscale="YlOrRd"))}if(A.type==="surface"&&E.isPlainObject(A.contours)){var b=["x","y","z"];for(P=0;P<b.length;P++){var k=A.contours[b[P]];E.isPlainObject(k)&&(k.highlightColor&&(k.highlightcolor=k.highlightColor,delete k.highlightColor),k.highlightWidth&&(k.highlightwidth=k.highlightWidth,delete k.highlightWidth))}}if(A.type==="candlestick"||A.type==="ohlc"){var D=(A.increasing||{}).showlegend!==!1,V=(A.decreasing||{}).showlegend!==!1,O=u(A.increasing),N=u(A.decreasing);if(O!==!1&&N!==!1){var B=l(O,N,D,V);B&&(A.name=B)}else(O||N)&&!A.name&&(A.name=O||N)}if(Array.isArray(A.transforms)){var z=A.transforms;for(P=0;P<z.length;P++){var H=z[P];if(E.isPlainObject(H))switch(H.type){case"filter":H.filtersrc&&(H.target=H.filtersrc,delete H.filtersrc),H.calendar&&(H.valuecalendar||(H.valuecalendar=H.calendar),delete H.calendar);break;case"groupby":if(H.styles=H.styles||H.style,H.styles&&!Array.isArray(H.styles)){var X=H.styles,$=Object.keys(X);H.styles=[];for(var ne=0;ne<$.length;ne++)H.styles.push({target:$[ne],value:X[$[ne]]})}break}}}h(A,"line")&&delete A.line,"marker"in A&&(h(A.marker,"line")&&delete A.marker.line,h(A,"marker")&&delete A.marker),g.clean(A),A.autobinx&&(delete A.autobinx,delete A.xbins),A.autobiny&&(delete A.autobiny,delete A.ybins),f(A),A.colorbar&&f(A.colorbar),A.marker&&A.marker.colorbar&&f(A.marker.colorbar),A.line&&A.line.colorbar&&f(A.line.colorbar),A.aaxis&&f(A.aaxis),A.baxis&&f(A.baxis)}};function u(p){if(!E.isPlainObject(p))return!1;var x=p.name;return delete p.name,delete p.showlegend,(typeof x=="string"||typeof x=="number")&&String(x)}function l(p,x,A,P){if(A&&!P)return p;if(P&&!A||!p.trim())return x;if(!x.trim())return p;var y=Math.min(p.length,x.length),C;for(C=0;C<y&&p.charAt(C)===x.charAt(C);C++);var M=p.substr(0,C);return M.trim()}function m(p){var x="middle",A="center";return typeof p=="string"&&(p.indexOf("top")!==-1?x="top":p.indexOf("bottom")!==-1&&(x="bottom"),p.indexOf("left")!==-1?A="left":p.indexOf("right")!==-1&&(A="right")),x+" "+A}function h(p,x){return x in p&&typeof p[x]=="object"&&Object.keys(p[x]).length===0}F.swapXYData=function(p){var x;if(E.swapAttrs(p,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(p.z)&&Array.isArray(p.z[0])&&(p.transpose?delete p.transpose:p.transpose=!0),p.error_x&&p.error_y){var A=p.error_y,P="copy_ystyle"in A?A.copy_ystyle:!(A.color||A.thickness||A.width);E.swapAttrs(p,["error_?.copy_ystyle"]),P&&E.swapAttrs(p,["error_?.color","error_?.thickness","error_?.width"])}if(typeof p.hoverinfo=="string"){var y=p.hoverinfo.split("+");for(x=0;x<y.length;x++)y[x]==="x"?y[x]="y":y[x]==="y"&&(y[x]="x");p.hoverinfo=y.join("+")}},F.coerceTraceIndices=function(p,x){if(d(x))return[x];if(!Array.isArray(x)||!x.length)return p.data.map(function(y,C){return C});if(Array.isArray(x)){for(var A=[],P=0;P<x.length;P++)E.isIndex(x[P],p.data.length)?A.push(x[P]):E.warn("trace index (",x[P],") is not a number or is out of bounds");return A}return x},F.manageArrayContainers=function(p,x,A){var P=p.obj,y=p.parts,C=y.length,M=y[C-1],s=d(M);if(s&&x===null){var _=y.slice(0,C-1).join("."),b=E.nestedProperty(P,_).get();b.splice(M,1)}else s&&p.get()===void 0&&p.get()===void 0&&(A[p.astr]=null),p.set(x)};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function c(p){var x=p.search(w);if(x>0)return p.substr(0,x)}F.hasParent=function(p,x){for(var A=c(x);A;){if(A in p)return!0;A=c(A)}return!1};var a=["x","y","z"];F.clearAxisTypes=function(p,x,A){for(var P=0;P<x.length;P++)for(var y=p._fullData[P],C=0;C<3;C++){var M=t(p,y,a[C]);if(M&&M.type!=="log"){var s=M._name,_=M._id.substr(1);if(_.substr(0,5)==="scene"){if(A[_]!==void 0)continue;s=_+"."+s}var b=s+".type";A[s]===void 0&&A[b]===void 0&&E.nestedProperty(p.layout,b).set(null)}}}},22448:function(U,F,e){var d=e(36424);F._doPlot=d._doPlot,F.newPlot=d.newPlot,F.restyle=d.restyle,F.relayout=d.relayout,F.redraw=d.redraw,F.update=d.update,F._guiRestyle=d._guiRestyle,F._guiRelayout=d._guiRelayout,F._guiUpdate=d._guiUpdate,F._storeDirectGUIEdit=d._storeDirectGUIEdit,F.react=d.react,F.extendTraces=d.extendTraces,F.prependTraces=d.prependTraces,F.addTraces=d.addTraces,F.deleteTraces=d.deleteTraces,F.moveTraces=d.moveTraces,F.purge=d.purge,F.addFrames=d.addFrames,F.deleteFrames=d.deleteFrames,F.animate=d.animate,F.setPlotConfig=d.setPlotConfig;var S=e(52200).getGraphDiv,n=e(4016).eraseActiveShape;F.deleteActiveShape=function(T){return n(S(T))},F.toImage=e(67024),F.validate=e(21480),F.downloadImage=e(39792);var E=e(94828);F.makeTemplate=E.makeTemplate,F.validateTemplate=E.validateTemplate},17680:function(U,F,e){var d=e(63620),S=e(16628),n=e(24248),E=e(14952).sorterAsc,T=e(24040);F.containerArrayMatch=e(69820);var v=F.isAddVal=function(t){return t==="add"||d(t)},g=F.isRemoveVal=function(t){return t===null||t==="remove"};F.applyContainerArrayChanges=function(t,o,i,f,u){var l=o.astr,m=T.getComponentMethod(l,"supplyLayoutDefaults"),h=T.getComponentMethod(l,"draw"),w=T.getComponentMethod(l,"drawOne"),c=f.replot||f.recalc||m===S||h===S,a=t.layout,p=t._fullLayout;if(i[""]){Object.keys(i).length>1&&n.warn("Full array edits are incompatible with other edits",l);var x=i[""][""];if(g(x))o.set(null);else if(Array.isArray(x))o.set(x);else return n.warn("Unrecognized full array edit value",l,x),!0;return c?!1:(m(a,p),h(t),!0)}var A=Object.keys(i).map(Number).sort(E),P=o.get(),y=P||[],C=u(p,l).get(),M=[],s=-1,_=y.length,b,k,D,V,O,N,B,z;for(b=0;b<A.length;b++){if(D=A[b],V=i[D],O=Object.keys(V),N=V[""],B=v(N),D<0||D>y.length-(B?0:1)){n.warn("index out of range",l,D);continue}if(N!==void 0)O.length>1&&n.warn("Insertion & removal are incompatible with edits to the same index.",l,D),g(N)?M.push(D):B?(N==="add"&&(N={}),y.splice(D,0,N),C&&C.splice(D,0,{})):n.warn("Unrecognized full object edit value",l,D,N),s===-1&&(s=D);else for(k=0;k<O.length;k++)z=l+"["+D+"].",u(y[D],O[k],z).set(V[O[k]])}for(b=M.length-1;b>=0;b--)y.splice(M[b],1),C&&C.splice(M[b],1);if(y.length?P||o.set(y):o.set(null),c)return!1;if(m(a,p),w!==S){var H;if(s===-1)H=A;else{for(_=Math.max(y.length,_),H=[],b=0;b<A.length&&(D=A[b],!(D>=s));b++)H.push(D);for(b=s;b<_;b++)H.push(b)}for(b=0;b<H.length;b++)w(t,H[b])}else h(t);return!0}},36424:function(U,F,e){var d=e(33428),S=e(38248),n=e(52264),E=e(3400),T=E.nestedProperty,v=e(95924),g=e(94552),r=e(24040),t=e(73060),o=e(7316),i=e(54460),f=e(96312),u=e(94724),l=e(43616),m=e(76308),h=e(42464).initInteractions,w=e(9616),c=e(22676).clearOutline,a=e(20556).dfltConfig,p=e(17680),x=e(93404),A=e(39172),P=e(67824),y=e(33816).AX_NAME_PATTERN,C=0,M=5;function s(pe,be,Ue,et){var st;if(pe=E.getGraphDiv(pe),v.init(pe),E.isPlainObject(be)){var lt=be;be=lt.data,Ue=lt.layout,et=lt.config,st=lt.frames}var Gt=v.triggerHandler(pe,"plotly_beforeplot",[be,Ue,et]);if(Gt===!1)return Promise.reject();!be&&!Ue&&!E.isPlotDiv(pe)&&E.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",pe);function Zt(){if(st)return F.addFrames(pe,st)}V(pe,et),Ue||(Ue={}),d.select(pe).classed("js-plotly-plot",!0),l.makeTester(),Array.isArray(pe._promises)||(pe._promises=[]);var Tt=(pe.data||[]).length===0&&Array.isArray(be);Array.isArray(be)&&(x.cleanData(be),Tt?pe.data=be:pe.data.push.apply(pe.data,be),pe.empty=!1),(!pe.layout||Tt)&&(pe.layout=x.cleanLayout(Ue)),o.supplyDefaults(pe);var It=pe._fullLayout,Xt=It._has("cartesian");It._replotting=!0,(Tt||It._shouldCreateBgLayer)&&(Re(pe),It._shouldCreateBgLayer&&delete It._shouldCreateBgLayer),l.initGradients(pe),l.initPatterns(pe),Tt&&i.saveShowSpikeInitial(pe);var gr=!pe.calcdata||pe.calcdata.length!==(pe._fullData||[]).length;gr&&o.doCalcdata(pe);for(var gt=0;gt<pe.calcdata.length;gt++)pe.calcdata[gt][0].trace=pe._fullData[gt];pe._context.responsive?pe._responsiveChartHandler||(pe._responsiveChartHandler=function(){E.isHidden(pe)||o.resize(pe)},window.addEventListener("resize",pe._responsiveChartHandler)):E.clearResponsive(pe);var jt=E.extendFlat({},It._size),Qt=0;function mr(){for(var Bt=It._basePlotModules,Nt=0;Nt<Bt.length;Nt++)Bt[Nt].drawFramework&&Bt[Nt].drawFramework(pe);!It._glcanvas&&It._has("gl")&&(It._glcanvas=It._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(dr){return dr.key}),It._glcanvas.enter().append("canvas").attr("class",function(dr){return"gl-canvas gl-canvas-"+dr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Kt=pe._context.plotGlPixelRatio;if(It._glcanvas){It._glcanvas.attr("width",It.width*Kt).attr("height",It.height*Kt).style("width",It.width+"px").style("height",It.height+"px");var fr=It._glcanvas.data()[0].regl;if(fr&&(Math.floor(It.width*Kt)!==fr._gl.drawingBufferWidth||Math.floor(It.height*Kt)!==fr._gl.drawingBufferHeight)){var cr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Qt)E.error(cr);else return E.log(cr+" Clearing graph and plotting again."),o.cleanPlot([],{},pe._fullData,It),o.supplyDefaults(pe),It=pe._fullLayout,o.doCalcdata(pe),Qt++,mr()}}return It.modebar.orientation==="h"?It._modebardiv.style("height",null).style("width","100%"):It._modebardiv.style("width",null).style("height",It.height+"px"),o.previousPromises(pe)}function or(){if(o.clearAutoMarginIds(pe),A.drawMarginPushers(pe),i.allowAutoMargin(pe),pe._fullLayout.title.text&&pe._fullLayout.title.automargin&&o.allowAutoMargin(pe,"title.automargin"),It._has("pie"))for(var Bt=pe._fullData,Nt=0;Nt<Bt.length;Nt++){var Kt=Bt[Nt];Kt.type==="pie"&&Kt.automargin&&o.allowAutoMargin(pe,"pie."+Kt.uid+".automargin")}return o.doAutoMargin(pe),o.previousPromises(pe)}function mt(){if(o.didMarginChange(jt,It._size))return E.syncOrAsync([or,A.layoutStyles],pe)}function ut(){if(!gr){bt();return}return E.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),bt],pe)}function bt(){pe._transitioning||(A.doAutoRangeAndConstraints(pe),Tt&&i.saveRangeInitial(pe),r.getComponentMethod("rangeslider","calcAutorange")(pe))}function St(){return i.draw(pe,Tt?"":"redraw")}var Pt=[o.previousPromises,Zt,mr,or,mt];Xt&&Pt.push(ut),Pt.push(A.layoutStyles),Xt&&Pt.push(St,function(Nt){var Kt=Nt._fullLayout._insideTickLabelsUpdaterange;if(Kt)return Nt._fullLayout._insideTickLabelsUpdaterange=void 0,Te(Nt,Kt).then(function(){i.saveRangeInitial(Nt,!0)})}),Pt.push(A.drawData,A.finalDraw,h,o.addLinks,o.rehover,o.redrag,o.reselect,o.doAutoMargin,o.previousPromises);var Ht=E.syncOrAsync(Pt,pe);return(!Ht||!Ht.then)&&(Ht=Promise.resolve()),Ht.then(function(){return _(pe),pe})}function _(pe){var be=pe._fullLayout;be._redrawFromAutoMarginCount?be._redrawFromAutoMarginCount--:pe.emit("plotly_afterplot")}function b(pe){return E.extendFlat(a,pe)}function k(pe,be){try{pe._fullLayout._paper.style("background",be)}catch(Ue){E.error(Ue)}}function D(pe,be){var Ue=m.combine(be,"white");k(pe,Ue)}function V(pe,be){if(!pe._context){pe._context=E.extendDeep({},a);var Ue=d.select("base");pe._context._baseUrl=Ue.size()&&Ue.attr("href")?window.location.href.split("#")[0]:""}var et=pe._context,st,lt,Gt;if(be){for(lt=Object.keys(be),st=0;st<lt.length;st++)Gt=lt[st],!(Gt==="editable"||Gt==="edits")&&Gt in et&&(Gt==="setBackground"&&be[Gt]==="opaque"?et[Gt]=D:et[Gt]=be[Gt]);be.plot3dPixelRatio&&!et.plotGlPixelRatio&&(et.plotGlPixelRatio=et.plot3dPixelRatio);var Zt=be.editable;if(Zt!==void 0)for(et.editable=Zt,lt=Object.keys(et.edits),st=0;st<lt.length;st++)et.edits[lt[st]]=Zt;if(be.edits)for(lt=Object.keys(be.edits),st=0;st<lt.length;st++)Gt=lt[st],Gt in et.edits&&(et.edits[Gt]=be.edits[Gt]);et._exportedPlot=be._exportedPlot}et.staticPlot&&(et.editable=!1,et.edits={},et.autosizable=!1,et.scrollZoom=!1,et.doubleClick=!1,et.showTips=!1,et.showLink=!1,et.displayModeBar=!1),et.displayModeBar==="hover"&&!n&&(et.displayModeBar=!0),(et.setBackground==="transparent"||typeof et.setBackground!="function")&&(et.setBackground=k),et._hasZeroHeight=et._hasZeroHeight||pe.clientHeight===0,et._hasZeroWidth=et._hasZeroWidth||pe.clientWidth===0;var Tt=et.scrollZoom,It=et._scrollZoom={};if(Tt===!0)It.cartesian=1,It.gl3d=1,It.geo=1,It.mapbox=1;else if(typeof Tt=="string"){var Xt=Tt.split("+");for(st=0;st<Xt.length;st++)It[Xt[st]]=1}else Tt!==!1&&(It.gl3d=1,It.geo=1,It.mapbox=1)}function O(pe){if(pe=E.getGraphDiv(pe),!E.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe);return x.cleanData(pe.data),x.cleanLayout(pe.layout),pe.calcdata=void 0,F._doPlot(pe).then(function(){return pe.emit("plotly_redraw"),pe})}function N(pe,be,Ue,et){return pe=E.getGraphDiv(pe),o.cleanPlot([],{},pe._fullData||[],pe._fullLayout||{}),o.purge(pe),F._doPlot(pe,be,Ue,et)}function B(pe,be){var Ue=be+1,et=[],st,lt;for(st=0;st<pe.length;st++)lt=pe[st],lt<0?et.push(Ue+lt):et.push(lt);return et}function z(pe,be,Ue){var et,st;for(et=0;et<be.length;et++){if(st=be[et],st!==parseInt(st,10))throw new Error("all values in "+Ue+" must be integers");if(st>=pe.data.length||st<-pe.data.length)throw new Error(Ue+" must be valid indices for gd.data.");if(be.indexOf(st,et+1)>-1||st>=0&&be.indexOf(-pe.data.length+st)>-1||st<0&&be.indexOf(pe.data.length+st)>-1)throw new Error("each index in "+Ue+" must be unique.")}}function H(pe,be,Ue){if(!Array.isArray(pe.data))throw new Error("gd.data must be an array.");if(typeof be>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(be)||(be=[be]),z(pe,be,"currentIndices"),typeof Ue<"u"&&!Array.isArray(Ue)&&(Ue=[Ue]),typeof Ue<"u"&&z(pe,Ue,"newIndices"),typeof Ue<"u"&&be.length!==Ue.length)throw new Error("current and new indices must be of equal length.")}function X(pe,be,Ue){var et,st;if(!Array.isArray(pe.data))throw new Error("gd.data must be an array.");if(typeof be>"u")throw new Error("traces must be defined.");for(Array.isArray(be)||(be=[be]),et=0;et<be.length;et++)if(st=be[et],typeof st!="object"||Array.isArray(st)||st===null)throw new Error("all values in traces array must be non-array objects");if(typeof Ue<"u"&&!Array.isArray(Ue)&&(Ue=[Ue]),typeof Ue<"u"&&Ue.length!==be.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function $(pe,be,Ue,et){var st=E.isPlainObject(et);if(!Array.isArray(pe.data))throw new Error("gd.data must be an array");if(!E.isPlainObject(be))throw new Error("update must be a key:value object");if(typeof Ue>"u")throw new Error("indices must be an integer or array of integers");z(pe,Ue,"indices");for(var lt in be){if(!Array.isArray(be[lt])||be[lt].length!==Ue.length)throw new Error("attribute "+lt+" must be an array of length equal to indices array length");if(st&&(!(lt in et)||!Array.isArray(et[lt])||et[lt].length!==be[lt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ne(pe,be,Ue,et){var st=E.isPlainObject(et),lt=[],Gt,Zt,Tt,It,Xt;Array.isArray(Ue)||(Ue=[Ue]),Ue=B(Ue,pe.data.length-1);for(var gr in be)for(var gt=0;gt<Ue.length;gt++){if(Gt=pe.data[Ue[gt]],Tt=T(Gt,gr),Zt=Tt.get(),It=be[gr][gt],!E.isArrayOrTypedArray(It))throw new Error("attribute: "+gr+" index: "+gt+" must be an array");if(!E.isArrayOrTypedArray(Zt))throw new Error("cannot extend missing or non-array attribute: "+gr);if(Zt.constructor!==It.constructor)throw new Error("cannot extend array with an array of a different type: "+gr);Xt=st?et[gr][gt]:et,S(Xt)||(Xt=-1),lt.push({prop:Tt,target:Zt,insert:It,maxp:Math.floor(Xt)})}return lt}function q(pe,be,Ue,et,st){$(pe,be,Ue,et);for(var lt=ne(pe,be,Ue,et),Gt={},Zt={},Tt=0;Tt<lt.length;Tt++){var It=lt[Tt].prop,Xt=lt[Tt].maxp,gr=st(lt[Tt].target,lt[Tt].insert,Xt);It.set(gr[0]),Array.isArray(Gt[It.astr])||(Gt[It.astr]=[]),Gt[It.astr].push(gr[1]),Array.isArray(Zt[It.astr])||(Zt[It.astr]=[]),Zt[It.astr].push(lt[Tt].target.length)}return{update:Gt,maxPoints:Zt}}function ue(pe,be){var Ue=new pe.constructor(pe.length+be.length);return Ue.set(pe),Ue.set(be,pe.length),Ue}function te(pe,be,Ue,et){pe=E.getGraphDiv(pe);function st(Tt,It,Xt){var gr,gt;if(E.isTypedArray(Tt))if(Xt<0){var jt=new Tt.constructor(0),Qt=ue(Tt,It);Xt<0?(gr=Qt,gt=jt):(gr=jt,gt=Qt)}else if(gr=new Tt.constructor(Xt),gt=new Tt.constructor(Tt.length+It.length-Xt),Xt===It.length)gr.set(It),gt.set(Tt);else if(Xt<It.length){var mr=It.length-Xt;gr.set(It.subarray(mr)),gt.set(Tt),gt.set(It.subarray(0,mr),Tt.length)}else{var or=Xt-It.length,mt=Tt.length-or;gr.set(Tt.subarray(mt)),gr.set(It,or),gt.set(Tt.subarray(0,mt))}else gr=Tt.concat(It),gt=Xt>=0&&Xt<gr.length?gr.splice(0,gr.length-Xt):[];return[gr,gt]}var lt=q(pe,be,Ue,et,st),Gt=F.redraw(pe),Zt=[pe,lt.update,Ue,lt.maxPoints];return g.add(pe,F.prependTraces,Zt,te,arguments),Gt}function J(pe,be,Ue,et){pe=E.getGraphDiv(pe);function st(Tt,It,Xt){var gr,gt;if(E.isTypedArray(Tt))if(Xt<=0){var jt=new Tt.constructor(0),Qt=ue(It,Tt);Xt<0?(gr=Qt,gt=jt):(gr=jt,gt=Qt)}else if(gr=new Tt.constructor(Xt),gt=new Tt.constructor(Tt.length+It.length-Xt),Xt===It.length)gr.set(It),gt.set(Tt);else if(Xt<It.length){var mr=It.length-Xt;gr.set(It.subarray(0,mr)),gt.set(It.subarray(mr)),gt.set(Tt,mr)}else{var or=Xt-It.length;gr.set(It),gr.set(Tt.subarray(0,or),It.length),gt.set(Tt.subarray(or))}else gr=It.concat(Tt),gt=Xt>=0&&Xt<gr.length?gr.splice(Xt,gr.length):[];return[gr,gt]}var lt=q(pe,be,Ue,et,st),Gt=F.redraw(pe),Zt=[pe,lt.update,Ue,lt.maxPoints];return g.add(pe,F.extendTraces,Zt,J,arguments),Gt}function ie(pe,be,Ue){pe=E.getGraphDiv(pe);var et=[],st=F.deleteTraces,lt=ie,Gt=[pe,et],Zt=[pe,be],Tt,It;for(X(pe,be,Ue),Array.isArray(be)||(be=[be]),be=be.map(function(Xt){return E.extendFlat({},Xt)}),x.cleanData(be),Tt=0;Tt<be.length;Tt++)pe.data.push(be[Tt]);for(Tt=0;Tt<be.length;Tt++)et.push(-be.length+Tt);if(typeof Ue>"u")return It=F.redraw(pe),g.add(pe,st,Gt,lt,Zt),It;Array.isArray(Ue)||(Ue=[Ue]);try{H(pe,et,Ue)}catch(Xt){throw pe.data.splice(pe.data.length-be.length,be.length),Xt}return g.startSequence(pe),g.add(pe,st,Gt,lt,Zt),It=F.moveTraces(pe,et,Ue),g.stopSequence(pe),It}function K(pe,be){pe=E.getGraphDiv(pe);var Ue=[],et=F.addTraces,st=K,lt=[pe,Ue,be],Gt=[pe,be],Zt,Tt;if(typeof be>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(be)||(be=[be]),z(pe,be,"indices"),be=B(be,pe.data.length-1),be.sort(E.sorterDes),Zt=0;Zt<be.length;Zt+=1)Tt=pe.data.splice(be[Zt],1)[0],Ue.push(Tt);var It=F.redraw(pe);return g.add(pe,et,lt,st,Gt),It}function ee(pe,be,Ue){pe=E.getGraphDiv(pe);var et=[],st=[],lt=ee,Gt=ee,Zt=[pe,Ue,be],Tt=[pe,be,Ue],It;if(H(pe,be,Ue),be=Array.isArray(be)?be:[be],typeof Ue>"u")for(Ue=[],It=0;It<be.length;It++)Ue.push(-be.length+It);for(Ue=Array.isArray(Ue)?Ue:[Ue],be=B(be,pe.data.length-1),Ue=B(Ue,pe.data.length-1),It=0;It<pe.data.length;It++)be.indexOf(It)===-1&&et.push(pe.data[It]);for(It=0;It<be.length;It++)st.push({newIndex:Ue[It],trace:pe.data[be[It]]});for(st.sort(function(gr,gt){return gr.newIndex-gt.newIndex}),It=0;It<st.length;It+=1)et.splice(st[It].newIndex,0,st[It].trace);pe.data=et;var Xt=F.redraw(pe);return g.add(pe,lt,Zt,Gt,Tt),Xt}function le(pe,be,Ue,et){pe=E.getGraphDiv(pe),x.clearPromiseQueue(pe);var st={};if(typeof be=="string")st[be]=Ue;else if(E.isPlainObject(be))st=E.extendFlat({},be),et===void 0&&(et=Ue);else return E.warn("Restyle fail.",be,Ue,et),Promise.reject();Object.keys(st).length&&(pe.changed=!0);var lt=x.coerceTraceIndices(pe,et),Gt=ce(pe,st,lt),Zt=Gt.flags;Zt.calc&&(pe.calcdata=void 0),Zt.clearAxisTypes&&x.clearAxisTypes(pe,lt,{});var Tt=[];Zt.fullReplot?Tt.push(F._doPlot):(Tt.push(o.previousPromises),o.supplyDefaults(pe),Zt.markerSize&&(o.doCalcdata(pe),_e(Tt)),Zt.style&&Tt.push(A.doTraceStyle),Zt.colorbars&&Tt.push(A.doColorBars),Tt.push(_)),Tt.push(o.rehover,o.redrag,o.reselect),g.add(pe,le,[pe,Gt.undoit,Gt.traces],le,[pe,Gt.redoit,Gt.traces]);var It=E.syncOrAsync(Tt,pe);return(!It||!It.then)&&(It=Promise.resolve()),It.then(function(){return pe.emit("plotly_restyle",Gt.eventData),pe})}function j(pe){return pe===void 0?null:pe}function Z(pe,be){return be?function(Ue,et,st){var lt=T(Ue,et),Gt=lt.set;return lt.set=function(Zt){var Tt=(st||"")+et;fe(Tt,lt.get(),Zt,pe),Gt(Zt)},lt}:T}function fe(pe,be,Ue,et){if(Array.isArray(be)||Array.isArray(Ue))for(var st=Array.isArray(be)?be:[],lt=Array.isArray(Ue)?Ue:[],Gt=Math.max(st.length,lt.length),Zt=0;Zt<Gt;Zt++)fe(pe+"["+Zt+"]",st[Zt],lt[Zt],et);else if(E.isPlainObject(be)||E.isPlainObject(Ue)){var Tt=E.isPlainObject(be)?be:{},It=E.isPlainObject(Ue)?Ue:{},Xt=E.extendFlat({},Tt,It);for(var gr in Xt)fe(pe+"."+gr,Tt[gr],It[gr],et)}else et[pe]===void 0&&(et[pe]=j(be))}function re(pe,be,Ue){for(var et in Ue){var st=T(pe,et);fe(et,st.get(),Ue[et],be)}}function ce(pe,be,Ue){var et=pe._fullLayout,st=pe._fullData,lt=pe.data,Gt=et._guiEditing,Zt=Z(et._preGUI,Gt),Tt=E.extendDeepAll({},be),It;xe(be);var Xt=P.traceFlags(),gr={},gt={},jt;function Qt(){return Ue.map(function(){})}function mr(wn){var Tr=i.id2name(wn);jt.indexOf(Tr)===-1&&jt.push(Tr)}function or(wn){return"LAYOUT"+wn+".autorange"}function mt(wn){return"LAYOUT"+wn+".range"}function ut(wn){for(var Tr=wn;Tr<st.length;Tr++)if(st[Tr]._input===lt[wn])return st[Tr]}function bt(wn,Tr,kr){if(Array.isArray(wn)){wn.forEach(function(un){bt(un,Tr,kr)});return}if(!(wn in be||x.hasParent(be,wn))){var Wr;if(wn.substr(0,6)==="LAYOUT")Wr=Zt(pe.layout,wn.replace("LAYOUT",""));else{var zr=Ue[kr],sn=et._tracePreGUI[ut(zr)._fullInput.uid];Wr=Z(sn,Gt)(lt[zr],wn)}wn in gt||(gt[wn]=Qt()),gt[wn][kr]===void 0&&(gt[wn][kr]=j(Wr.get())),Tr!==void 0&&Wr.set(Tr)}}function St(wn){return function(Tr){return st[Tr][wn]}}function Pt(wn){return function(Tr,kr){return Tr===!1?st[Ue[kr]][wn]:null}}for(var Ht in be){if(x.hasParent(be,Ht))throw new Error("cannot set "+Ht+" and a parent attribute simultaneously");var Bt=be[Ht],Nt,Kt,fr,cr,dr,Xe;if((Ht==="autobinx"||Ht==="autobiny")&&(Ht=Ht.charAt(Ht.length-1)+"bins",Array.isArray(Bt)?Bt=Bt.map(Pt(Ht)):Bt===!1?Bt=Ue.map(St(Ht)):Bt=null),gr[Ht]=Bt,Ht.substr(0,6)==="LAYOUT"){fr=Zt(pe.layout,Ht.replace("LAYOUT","")),gt[Ht]=[j(fr.get())],fr.set(Array.isArray(Bt)?Bt[0]:Bt),Xt.calc=!0;continue}for(gt[Ht]=Qt(),It=0;It<Ue.length;It++){Nt=lt[Ue[It]],Kt=ut(Ue[It]);var He=et._tracePreGUI[Kt._fullInput.uid];if(fr=Z(He,Gt)(Nt,Ht),cr=fr.get(),dr=Array.isArray(Bt)?Bt[It%Bt.length]:Bt,dr!==void 0){var zt=fr.parts[fr.parts.length-1],Rt=Ht.substr(0,Ht.length-zt.length-1),Jt=Rt?Rt+".":"",sr=Rt?T(Kt,Rt).get():Kt;if(Xe=t.getTraceValObject(Kt,fr.parts),Xe&&Xe.impliedEdits&&dr!==null)for(var ur in Xe.impliedEdits)bt(E.relativeAttr(Ht,ur),Xe.impliedEdits[ur],It);else if((zt==="thicknessmode"||zt==="lenmode")&&cr!==dr&&(dr==="fraction"||dr==="pixels")&&sr){var er=et._size,Ft=sr.orient,ir=Ft==="top"||Ft==="bottom";if(zt==="thicknessmode"){var hr=ir?er.h:er.w;bt(Jt+"thickness",sr.thickness*(dr==="fraction"?1/hr:hr),It)}else{var xr=ir?er.w:er.h;bt(Jt+"len",sr.len*(dr==="fraction"?1/xr:xr),It)}}else if(Ht==="type"&&(dr==="pie"!=(cr==="pie")||dr==="funnelarea"!=(cr==="funnelarea"))){var vr="x",Vr="y";(dr==="bar"||cr==="bar")&&Nt.orientation==="h"&&(vr="y",Vr="x"),E.swapAttrs(Nt,["?","?src"],"labels",vr),E.swapAttrs(Nt,["d?","?0"],"label",vr),E.swapAttrs(Nt,["?","?src"],"values",Vr),cr==="pie"||cr==="funnelarea"?(T(Nt,"marker.color").set(T(Nt,"marker.colors").get()),et._pielayer.selectAll("g.trace").remove()):r.traceIs(Nt,"cartesian")&&T(Nt,"marker.colors").set(T(Nt,"marker.color").get())}gt[Ht][It]=j(cr);var _r=["swapxy","swapxyaxes","orientation","orientationaxes"];if(_r.indexOf(Ht)!==-1){if(Ht==="orientation"){fr.set(dr);var Rr=Nt.x&&!Nt.y?"h":"v";if((fr.get()||Rr)===Kt.orientation)continue}else Ht==="orientationaxes"&&(Nt.orientation={v:"h",h:"v"}[Kt.orientation]);x.swapXYData(Nt),Xt.calc=Xt.clearAxisTypes=!0}else o.dataArrayContainers.indexOf(fr.parts[0])!==-1?(x.manageArrayContainers(fr,dr,gt),Xt.calc=!0):(Xe?Xe.arrayOk&&!r.traceIs(Kt,"regl")&&(E.isArrayOrTypedArray(dr)||E.isArrayOrTypedArray(cr))?Xt.calc=!0:P.update(Xt,Xe):Xt.calc=!0,fr.set(dr))}}if(["swapxyaxes","orientationaxes"].indexOf(Ht)!==-1&&i.swap(pe,Ue),Ht==="orientationaxes"){var nn=T(pe.layout,"hovermode"),en=nn.get();en==="x"?nn.set("y"):en==="y"?nn.set("x"):en==="x unified"?nn.set("y unified"):en==="y unified"&&nn.set("x unified")}if(["orientation","type"].indexOf(Ht)!==-1){for(jt=[],It=0;It<Ue.length;It++){var An=lt[Ue[It]];r.traceIs(An,"cartesian")&&(mr(An.xaxis||"x"),mr(An.yaxis||"y"))}bt(jt.map(or),!0,0),bt(jt.map(mt),[0,1],0)}}return(Xt.calc||Xt.plot)&&(Xt.fullReplot=!0),{flags:Xt,undoit:gt,redoit:gr,traces:Ue,eventData:E.extendDeepNoArrays([],[Tt,Ue])}}function xe(pe){var be=E.counterRegex("axis",".title",!1,!1),Ue=/colorbar\.title$/,et=Object.keys(pe),st,lt,Gt;for(st=0;st<et.length;st++)lt=et[st],Gt=pe[lt],(lt==="title"||be.test(lt)||Ue.test(lt))&&(typeof Gt=="string"||typeof Gt=="number")?Zt(lt,lt.replace("title","title.text")):lt.indexOf("titlefont")>-1&&lt.indexOf("grouptitlefont")===-1?Zt(lt,lt.replace("titlefont","title.font")):lt.indexOf("titleposition")>-1?Zt(lt,lt.replace("titleposition","title.position")):lt.indexOf("titleside")>-1?Zt(lt,lt.replace("titleside","title.side")):lt.indexOf("titleoffset")>-1&&Zt(lt,lt.replace("titleoffset","title.offset"));function Zt(Tt,It){pe[It]=pe[Tt],delete pe[Tt]}}function Te(pe,be,Ue){pe=E.getGraphDiv(pe),x.clearPromiseQueue(pe);var et={};if(typeof be=="string")et[be]=Ue;else if(E.isPlainObject(be))et=E.extendFlat({},be);else return E.warn("Relayout fail.",be,Ue),Promise.reject();Object.keys(et).length&&(pe.changed=!0);var st=ze(pe,et),lt=st.flags;lt.calc&&(pe.calcdata=void 0);var Gt=[o.previousPromises];lt.layoutReplot?Gt.push(A.layoutReplot):Object.keys(et).length&&(we(pe,lt,st)||o.supplyDefaults(pe),lt.legend&&Gt.push(A.doLegend),lt.layoutstyle&&Gt.push(A.layoutStyles),lt.axrange&&_e(Gt,st.rangesAltered),lt.ticks&&Gt.push(A.doTicksRelayout),lt.modebar&&Gt.push(A.doModeBar),lt.camera&&Gt.push(A.doCamera),lt.colorbars&&Gt.push(A.doColorBars),Gt.push(_)),Gt.push(o.rehover,o.redrag,o.reselect),g.add(pe,Te,[pe,st.undoit],Te,[pe,st.redoit]);var Zt=E.syncOrAsync(Gt,pe);return(!Zt||!Zt.then)&&(Zt=Promise.resolve(pe)),Zt.then(function(){return pe.emit("plotly_relayout",st.eventData),pe})}function we(pe,be,Ue){var et=pe._fullLayout;if(!be.axrange)return!1;for(var st in be)if(st!=="axrange"&&be[st])return!1;var lt,Gt,Zt=function(jt,Qt){return E.coerce(lt,Gt,u,jt,Qt)},Tt={};for(var It in Ue.rangesAltered){var Xt=i.id2name(It);if(lt=pe.layout[Xt],Gt=et[Xt],f(lt,Gt,Zt,Tt),Gt._matchGroup){for(var gr in Gt._matchGroup)if(gr!==It){var gt=et[i.id2name(gr)];gt.autorange=Gt.autorange,gt.range=Gt.range.slice(),gt._input.range=Gt.range.slice()}}}return!0}function _e(pe,be){var Ue=be?function(et){var st=[],lt=!0;for(var Gt in be){var Zt=i.getFromId(et,Gt);if(st.push(Gt),(Zt.ticklabelposition||"").indexOf("inside")!==-1&&Zt._anchorAxis&&st.push(Zt._anchorAxis._id),Zt._matchGroup)for(var Tt in Zt._matchGroup)be[Tt]||st.push(Tt)}return i.draw(et,st,{skipTitle:lt})}:function(et){return i.draw(et,"redraw")};pe.push(c,A.doAutoRangeAndConstraints,Ue,A.drawData,A.finalDraw)}var ke=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ne=/^[xyz]axis[0-9]*\.autorange$/,Ee=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ze(pe,be){var Ue=pe.layout,et=pe._fullLayout,st=et._guiEditing,lt=Z(et._preGUI,st),Gt=Object.keys(be),Zt=i.list(pe),Tt=E.extendDeepAll({},be),It={},Xt,gr,gt;for(xe(be),Gt=Object.keys(be),gr=0;gr<Gt.length;gr++)if(Gt[gr].indexOf("allaxes")===0){for(gt=0;gt<Zt.length;gt++){var jt=Zt[gt]._id.substr(1),Qt=jt.indexOf("scene")!==-1?jt+".":"",mr=Gt[gr].replace("allaxes",Qt+Zt[gt]._name);be[mr]||(be[mr]=be[Gt[gr]])}delete be[Gt[gr]]}var or=P.layoutFlags(),mt={},ut={};function bt(sn,un){if(Array.isArray(sn)){sn.forEach(function(Ln){bt(Ln,un)});return}if(!(sn in be||x.hasParent(be,sn))){var Mn=lt(Ue,sn);sn in ut||(ut[sn]=j(Mn.get())),un!==void 0&&Mn.set(un)}}var St={},Pt;function Ht(sn){var un=i.name2id(sn.split(".")[0]);return St[un]=1,un}for(var Bt in be){if(x.hasParent(be,Bt))throw new Error("cannot set "+Bt+" and a parent attribute simultaneously");for(var Nt=lt(Ue,Bt),Kt=be[Bt],fr=Nt.parts.length,cr=fr-1;cr>0&&typeof Nt.parts[cr]!="string";)cr--;var dr=Nt.parts[cr],Xe=Nt.parts[cr-1]+"."+dr,He=Nt.parts.slice(0,cr).join("."),zt=T(pe.layout,He).get(),Rt=T(et,He).get(),Jt=Nt.get();if(Kt!==void 0){mt[Bt]=Kt,ut[Bt]=dr==="reverse"?Kt:j(Jt);var sr=t.getLayoutValObject(et,Nt.parts);if(sr&&sr.impliedEdits&&Kt!==null)for(var ur in sr.impliedEdits)bt(E.relativeAttr(Bt,ur),sr.impliedEdits[ur]);if(["width","height"].indexOf(Bt)!==-1)if(Kt){bt("autosize",null);var er=Bt==="height"?"width":"height";bt(er,et[er])}else et[Bt]=pe._initialAutoSize[Bt];else if(Bt==="autosize")bt("width",Kt?null:et.width),bt("height",Kt?null:et.height);else if(Xe.match(ke))Ht(Xe),T(et,He+"._inputRange").set(null);else if(Xe.match(Ne)){Ht(Xe),T(et,He+"._inputRange").set(null);var Ft=T(et,He).get();Ft._inputDomain&&(Ft._input.domain=Ft._inputDomain.slice())}else Xe.match(Ee)&&T(et,He+"._inputDomain").set(null);if(dr==="type"){Pt=zt;var ir=Rt.type==="linear"&&Kt==="log",hr=Rt.type==="log"&&Kt==="linear";if(ir||hr){if(!Pt||!Pt.range)bt(He+".autorange",!0);else if(Rt.autorange)ir&&(Pt.range=Pt.range[1]>Pt.range[0]?[1,2]:[2,1]);else{var xr=Pt.range[0],vr=Pt.range[1];ir?(xr<=0&&vr<=0&&bt(He+".autorange",!0),xr<=0?xr=vr/1e6:vr<=0&&(vr=xr/1e6),bt(He+".range[0]",Math.log(xr)/Math.LN10),bt(He+".range[1]",Math.log(vr)/Math.LN10)):(bt(He+".range[0]",Math.pow(10,xr)),bt(He+".range[1]",Math.pow(10,vr)))}Array.isArray(et._subplots.polar)&&et._subplots.polar.length&&et[Nt.parts[0]]&&Nt.parts[1]==="radialaxis"&&delete et[Nt.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(pe,Rt,Kt,bt),r.getComponentMethod("images","convertCoords")(pe,Rt,Kt,bt)}else bt(He+".autorange",!0),bt(He+".range",null);T(et,He+"._inputRange").set(null)}else if(dr.match(y)){var Vr=T(et,Bt).get(),_r=(Kt||{}).type;(!_r||_r==="-")&&(_r="linear"),r.getComponentMethod("annotations","convertCoords")(pe,Vr,_r,bt),r.getComponentMethod("images","convertCoords")(pe,Vr,_r,bt)}var Rr=p.containerArrayMatch(Bt);if(Rr){Xt=Rr.array,gr=Rr.index;var nn=Rr.property,en=sr||{editType:"calc"};gr!==""&&nn===""&&(p.isAddVal(Kt)?ut[Bt]=null:p.isRemoveVal(Kt)?ut[Bt]=(T(Ue,Xt).get()||[])[gr]:E.warn("unrecognized full object value",be)),P.update(or,en),It[Xt]||(It[Xt]={});var An=It[Xt][gr];An||(An=It[Xt][gr]={}),An[nn]=Kt,delete be[Bt]}else dr==="reverse"?(zt.range?zt.range.reverse():(bt(He+".autorange",!0),zt.range=[1,0]),Rt.autorange?or.calc=!0:or.plot=!0):(Bt==="dragmode"&&(Kt===!1&&Jt!==!1||Kt!==!1&&Jt===!1)||et._has("scatter-like")&&et._has("regl")&&Bt==="dragmode"&&(Kt==="lasso"||Kt==="select")&&!(Jt==="lasso"||Jt==="select")||et._has("gl2d")?or.plot=!0:sr?P.update(or,sr):or.calc=!0,Nt.set(Kt))}}for(Xt in It){var wn=p.applyContainerArrayChanges(pe,lt(Ue,Xt),It[Xt],or,lt);wn||(or.plot=!0)}for(var Tr in St){Pt=i.getFromId(pe,Tr);var kr=Pt&&Pt._constraintGroup;if(kr){or.calc=!0;for(var Wr in kr)St[Wr]||(i.getFromId(pe,Wr)._constraintShrinkable=!0)}}(Ce(pe)||be.height||be.width)&&(or.plot=!0);var zr=et.shapes;for(gr=0;gr<zr.length;gr++)if(zr[gr].showlegend){or.calc=!0;break}return(or.plot||or.calc)&&(or.layoutReplot=!0),{flags:or,rangesAltered:St,undoit:ut,redoit:mt,eventData:Tt}}function Ce(pe){var be=pe._fullLayout,Ue=be.width,et=be.height;return pe.layout.autosize&&o.plotAutoSize(pe,pe.layout,be),be.width!==Ue||be.height!==et}function Oe(pe,be,Ue,et){pe=E.getGraphDiv(pe),x.clearPromiseQueue(pe),E.isPlainObject(be)||(be={}),E.isPlainObject(Ue)||(Ue={}),Object.keys(be).length&&(pe.changed=!0),Object.keys(Ue).length&&(pe.changed=!0);var st=x.coerceTraceIndices(pe,et),lt=ce(pe,E.extendFlat({},be),st),Gt=lt.flags,Zt=ze(pe,E.extendFlat({},Ue)),Tt=Zt.flags;(Gt.calc||Tt.calc)&&(pe.calcdata=void 0),Gt.clearAxisTypes&&x.clearAxisTypes(pe,st,Ue);var It=[];Tt.layoutReplot?It.push(A.layoutReplot):Gt.fullReplot?It.push(F._doPlot):(It.push(o.previousPromises),we(pe,Tt,Zt)||o.supplyDefaults(pe),Gt.style&&It.push(A.doTraceStyle),(Gt.colorbars||Tt.colorbars)&&It.push(A.doColorBars),Tt.legend&&It.push(A.doLegend),Tt.layoutstyle&&It.push(A.layoutStyles),Tt.axrange&&_e(It,Zt.rangesAltered),Tt.ticks&&It.push(A.doTicksRelayout),Tt.modebar&&It.push(A.doModeBar),Tt.camera&&It.push(A.doCamera),It.push(_)),It.push(o.rehover,o.redrag,o.reselect),g.add(pe,Oe,[pe,lt.undoit,Zt.undoit,lt.traces],Oe,[pe,lt.redoit,Zt.redoit,lt.traces]);var Xt=E.syncOrAsync(It,pe);return(!Xt||!Xt.then)&&(Xt=Promise.resolve(pe)),Xt.then(function(){return pe.emit("plotly_update",{data:lt.eventData,layout:Zt.eventData}),pe})}function Le(pe){return function(Ue){Ue._fullLayout._guiEditing=!0;var et=pe.apply(null,arguments);return Ue._fullLayout._guiEditing=!1,et}}var Ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],rt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ot(pe,be){for(var Ue=0;Ue<be.length;Ue++){var et=be[Ue],st=pe.match(et.pattern);if(st){var lt=st[1]||"";return{head:lt,tail:pe.substr(lt.length+1),attr:et.attr}}}}function $e(pe,be){var Ue=T(be,pe).get();if(Ue!==void 0)return Ue;var et=pe.split(".");for(et.pop();et.length>1;)if(et.pop(),Ue=T(be,et.join(".")+".uirevision").get(),Ue!==void 0)return Ue;return be.uirevision}function qe(pe,be){for(var Ue=0;Ue<be.length;Ue++)if(be[Ue]._fullInput.uid===pe)return Ue;return-1}function ht(pe,be,Ue){for(var et=0;et<be.length;et++)if(be[et].uid===pe)return et;return!be[Ue]||be[Ue].uid?-1:Ue}function vt(pe,be){var Ue=E.isPlainObject(pe),et=Array.isArray(pe);return Ue||et?(Ue&&E.isPlainObject(be)||et&&Array.isArray(be))&&JSON.stringify(pe)===JSON.stringify(be):pe===be}function pt(pe,be,Ue,et){var st=et._preGUI,lt,Gt,Zt,Tt,It,Xt,gr,gt,jt,Qt,mr=[],or={},mt={};for(lt in st){if(It=ot(lt,Ge),It){if(jt=It.head,Qt=It.tail,Gt=It.attr||jt+".uirevision",Zt=T(et,Gt).get(),Tt=Zt&&$e(Gt,be),Tt&&Tt===Zt){if(Xt=st[lt],Xt===null&&(Xt=void 0),gr=T(be,lt),gt=gr.get(),vt(gt,Xt)){gt===void 0&&Qt==="autorange"&&mr.push(jt),gr.set(j(T(et,lt).get()));continue}else if(Qt==="autorange"||Qt.substr(0,6)==="range["){var ut=st[jt+".range[0]"],bt=st[jt+".range[1]"],St=st[jt+".autorange"];if(St||St===null&&ut===null&&bt===null){if(!(jt in or)){var Pt=T(be,jt).get();or[jt]=Pt&&(Pt.autorange||Pt.autorange!==!1&&(!Pt.range||Pt.range.length!==2))}if(or[jt]){gr.set(j(T(et,lt).get()));continue}}}}}else E.warn("unrecognized GUI edit: "+lt);delete st[lt],It&&It.tail.substr(0,6)==="range["&&(mt[It.head]=1)}for(var Ht=0;Ht<mr.length;Ht++){var Bt=mr[Ht];if(mt[Bt]){var Nt=T(be,Bt).get();Nt&&delete Nt.autorange}}var Kt=et._tracePreGUI;for(var fr in Kt){var cr=Kt[fr],dr=null,Xe;for(lt in cr){if(!dr){var He=qe(fr,Ue);if(He<0){delete Kt[fr];break}var zt=Ue[He];Xe=zt._fullInput;var Rt=ht(fr,pe,Xe.index);if(Rt<0){delete Kt[fr];break}dr=pe[Rt]}if(It=ot(lt,rt),It){if(It.attr?(Zt=T(et,It.attr).get(),Tt=Zt&&$e(It.attr,be)):(Zt=Xe.uirevision,Tt=dr.uirevision,Tt===void 0&&(Tt=be.uirevision)),Tt&&Tt===Zt&&(Xt=cr[lt],Xt===null&&(Xt=void 0),gr=T(dr,lt),gt=gr.get(),vt(gt,Xt))){gr.set(j(T(Xe,lt).get()));continue}}else E.warn("unrecognized GUI edit: "+lt+" in trace uid "+fr);delete cr[lt]}}}function wt(pe,be,Ue,et){var st,lt;function Gt(){return F.addFrames(pe,st)}pe=E.getGraphDiv(pe),x.clearPromiseQueue(pe);var Zt=pe._fullData,Tt=pe._fullLayout;if(!E.isPlotDiv(pe)||!Zt||!Tt)lt=F.newPlot(pe,be,Ue,et);else{if(E.isPlainObject(be)){var It=be;be=It.data,Ue=It.layout,et=It.config,st=It.frames}var Xt=!1;if(et){var gr=E.extendDeep({},pe._context);pe._context=void 0,V(pe,et),Xt=We(gr,pe._context)}pe.data=be||[],x.cleanData(pe.data),pe.layout=Ue||{},x.cleanLayout(pe.layout),pt(pe.data,pe.layout,Zt,Tt),o.supplyDefaults(pe,{skipUpdateCalc:!0});var gt=pe._fullData,jt=pe._fullLayout,Qt=jt.datarevision===void 0,mr=jt.transition,or=nt(pe,Tt,jt,Qt,mr),mt=or.newDataRevision,ut=Et(pe,Zt,gt,Qt,mr,mt);if(Ce(pe)&&(or.layoutReplot=!0),ut.calc||or.calc){pe.calcdata=void 0;for(var bt=Object.getOwnPropertyNames(jt),St=0;St<bt.length;St++){var Pt=bt[St],Ht=Pt.substring(0,5);if(Ht==="xaxis"||Ht==="yaxis"){var Bt=jt[Pt]._emptyCategories;Bt&&Bt()}}}else o.supplyDefaultsUpdateCalc(pe.calcdata,gt);var Nt=[];if(st&&(pe._transitionData={},o.createTransitionData(pe),Nt.push(Gt)),jt.transition&&!Xt&&(ut.anim||or.anim))or.ticks&&Nt.push(A.doTicksRelayout),o.doCalcdata(pe),A.doAutoRangeAndConstraints(pe),Nt.push(function(){return o.transitionFromReact(pe,ut,or,Tt)});else if(ut.fullReplot||or.layoutReplot||Xt)pe._fullLayout._skipDefaults=!0,Nt.push(F._doPlot);else{for(var Kt in or.arrays){var fr=or.arrays[Kt];if(fr.length){var cr=r.getComponentMethod(Kt,"drawOne");if(cr!==E.noop)for(var dr=0;dr<fr.length;dr++)cr(pe,fr[dr]);else{var Xe=r.getComponentMethod(Kt,"draw");if(Xe===E.noop)throw new Error("cannot draw components: "+Kt);Xe(pe)}}}Nt.push(o.previousPromises),ut.style&&Nt.push(A.doTraceStyle),(ut.colorbars||or.colorbars)&&Nt.push(A.doColorBars),or.legend&&Nt.push(A.doLegend),or.layoutstyle&&Nt.push(A.layoutStyles),or.axrange&&_e(Nt),or.ticks&&Nt.push(A.doTicksRelayout),or.modebar&&Nt.push(A.doModeBar),or.camera&&Nt.push(A.doCamera),Nt.push(_)}Nt.push(o.rehover,o.redrag,o.reselect),lt=E.syncOrAsync(Nt,pe),(!lt||!lt.then)&&(lt=Promise.resolve(pe))}return lt.then(function(){return pe.emit("plotly_react",{data:be,layout:Ue}),pe})}function Et(pe,be,Ue,et,st,lt){var Gt=be.length===Ue.length;if(!st&&!Gt)return{fullReplot:!0,calc:!0};var Zt=P.traceFlags();Zt.arrays={},Zt.nChanges=0,Zt.nChangesAnim=0;var Tt,It;function Xt(jt){var Qt=t.getTraceValObject(It,jt);return!It._module.animatable&&Qt.anim&&(Qt.anim=!1),Qt}var gr={getValObject:Xt,flags:Zt,immutable:et,transition:st,newDataRevision:lt,gd:pe},gt={};for(Tt=0;Tt<be.length;Tt++)if(Ue[Tt]){if(It=Ue[Tt]._fullInput,o.hasMakesDataTransform(It)&&(It=Ue[Tt]),gt[It.uid])continue;gt[It.uid]=1,Fe(be[Tt]._fullInput,It,[],gr)}return(Zt.calc||Zt.plot)&&(Zt.fullReplot=!0),st&&Zt.nChanges&&Zt.nChangesAnim&&(Zt.anim=Zt.nChanges===Zt.nChangesAnim&&Gt?"all":"some"),Zt}function nt(pe,be,Ue,et,st){var lt=P.layoutFlags();lt.arrays={},lt.rangesAltered={},lt.nChanges=0,lt.nChangesAnim=0;function Gt(Tt){return t.getLayoutValObject(Ue,Tt)}var Zt={getValObject:Gt,flags:lt,immutable:et,transition:st,gd:pe};return Fe(be,Ue,[],Zt),(lt.plot||lt.calc)&&(lt.layoutReplot=!0),st&&lt.nChanges&&lt.nChangesAnim&&(lt.anim=lt.nChanges===lt.nChangesAnim?"all":"some"),lt}function Fe(pe,be,Ue,et){var st,lt,Gt,Zt=et.getValObject,Tt=et.flags,It=et.immutable,Xt=et.inArray,gr=et.arrayIndex;function gt(){var He=st.editType;if(Xt&&He.indexOf("arraydraw")!==-1){E.pushUnique(Tt.arrays[Xt],gr);return}P.update(Tt,st),He!=="none"&&Tt.nChanges++,et.transition&&st.anim&&Tt.nChangesAnim++,(ke.test(Gt)||Ne.test(Gt))&&(Tt.rangesAltered[Ue[0]]=1),Ee.test(Gt)&&T(be,"_inputDomain").set(null),lt==="datarevision"&&(Tt.newDataRevision=1)}function jt(He){return He.valType==="data_array"||He.arrayOk}for(lt in pe){if(Tt.calc&&!et.transition)return;var Qt=pe[lt],mr=be[lt],or=Ue.concat(lt);if(Gt=or.join("."),!(lt.charAt(0)==="_"||typeof Qt=="function"||Qt===mr)){if((lt==="tick0"||lt==="dtick")&&Ue[0]!=="geo"){var mt=be.tickmode;if(mt==="auto"||mt==="array"||!mt)continue}if(!(lt==="range"&&be.autorange)&&!((lt==="zmin"||lt==="zmax")&&be.type==="contourcarpet")&&(st=Zt(or),!!st&&!(st._compareAsJSON&&JSON.stringify(Qt)===JSON.stringify(mr)))){var ut=st.valType,bt,St=jt(st),Pt=Array.isArray(Qt),Ht=Array.isArray(mr);if(Pt&&Ht){var Bt="_input_"+lt,Nt=pe[Bt],Kt=be[Bt];if(Array.isArray(Nt)&&Nt===Kt)continue}if(mr===void 0)St&&Pt?Tt.calc=!0:gt();else if(st._isLinkedToArray){var fr=[],cr=!1;Xt||(Tt.arrays[lt]=fr);var dr=Math.min(Qt.length,mr.length),Xe=Math.max(Qt.length,mr.length);if(dr!==Xe)if(st.editType==="arraydraw")cr=!0;else{gt();continue}for(bt=0;bt<dr;bt++)Fe(Qt[bt],mr[bt],or.concat(bt),E.extendFlat({inArray:lt,arrayIndex:bt},et));if(cr)for(bt=dr;bt<Xe;bt++)fr.push(bt)}else!ut&&E.isPlainObject(Qt)?Fe(Qt,mr,or,et):St?Pt&&Ht?(It&&(Tt.calc=!0),(It||et.newDataRevision)&&gt()):Pt!==Ht?Tt.calc=!0:gt():Pt&&Ht?(Qt.length!==mr.length||String(Qt)!==String(mr))&&gt():gt()}}}for(lt in be)if(!(lt in pe||lt.charAt(0)==="_"||typeof be[lt]=="function"))if(st=Zt(Ue.concat(lt)),jt(st)&&Array.isArray(be[lt])){Tt.calc=!0;return}else gt()}function We(pe,be){var Ue;for(Ue in pe)if(Ue.charAt(0)!=="_"){var et=pe[Ue],st=be[Ue];if(et!==st)if(E.isPlainObject(et)&&E.isPlainObject(st)){if(We(et,st))return!0}else if(Array.isArray(et)&&Array.isArray(st)){if(et.length!==st.length)return!0;for(var lt=0;lt<et.length;lt++)if(et[lt]!==st[lt])if(E.isPlainObject(et[lt])&&E.isPlainObject(st[lt])){if(We(et[lt],st[lt]))return!0}else return!0}else return!0}}function Ze(pe,be,Ue){if(pe=E.getGraphDiv(pe),!E.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var et=pe._transitionData;et._frameQueue||(et._frameQueue=[]),Ue=o.supplyAnimationDefaults(Ue);var st=Ue.transition,lt=Ue.frame;et._frameWaitingCnt===void 0&&(et._frameWaitingCnt=0);function Gt(It){return Array.isArray(st)?It>=st.length?st[0]:st[It]:st}function Zt(It){return Array.isArray(lt)?It>=lt.length?lt[0]:lt[It]:lt}function Tt(It,Xt){var gr=0;return function(){if(It&&++gr===Xt)return It()}}return new Promise(function(It,Xt){function gr(){if(et._frameQueue.length!==0){for(;et._frameQueue.length;){var dr=et._frameQueue.pop();dr.onInterrupt&&dr.onInterrupt()}pe.emit("plotly_animationinterrupted",[])}}function gt(dr){if(dr.length!==0){for(var Xe=0;Xe<dr.length;Xe++){var He;dr[Xe].type==="byname"?He=o.computeFrame(pe,dr[Xe].name):He=dr[Xe].data;var zt=Zt(Xe),Rt=Gt(Xe);Rt.duration=Math.min(Rt.duration,zt.duration);var Jt={frame:He,name:dr[Xe].name,frameOpts:zt,transitionOpts:Rt};Xe===dr.length-1&&(Jt.onComplete=Tt(It,2),Jt.onInterrupt=Xt),et._frameQueue.push(Jt)}Ue.mode==="immediate"&&(et._lastFrameAt=-1/0),et._animationRaf||mr()}}function jt(){pe.emit("plotly_animated"),window.cancelAnimationFrame(et._animationRaf),et._animationRaf=null}function Qt(){et._currentFrame&&et._currentFrame.onComplete&&et._currentFrame.onComplete();var dr=et._currentFrame=et._frameQueue.shift();if(dr){var Xe=dr.name?dr.name.toString():null;pe._fullLayout._currentFrame=Xe,et._lastFrameAt=Date.now(),et._timeToNext=dr.frameOpts.duration,o.transition(pe,dr.frame.data,dr.frame.layout,x.coerceTraceIndices(pe,dr.frame.traces),dr.frameOpts,dr.transitionOpts).then(function(){dr.onComplete&&dr.onComplete()}),pe.emit("plotly_animatingframe",{name:Xe,frame:dr.frame,animation:{frame:dr.frameOpts,transition:dr.transitionOpts}})}else jt()}function mr(){pe.emit("plotly_animating"),et._lastFrameAt=-1/0,et._timeToNext=0,et._runningTransitions=0,et._currentFrame=null;var dr=function(){et._animationRaf=window.requestAnimationFrame(dr),Date.now()-et._lastFrameAt>et._timeToNext&&Qt()};dr()}var or=0;function mt(dr){return Array.isArray(st)?or>=st.length?dr.transitionOpts=st[or]:dr.transitionOpts=st[0]:dr.transitionOpts=st,or++,dr}var ut,bt,St=[],Pt=be==null,Ht=Array.isArray(be),Bt=!Pt&&!Ht&&E.isPlainObject(be);if(Bt)St.push({type:"object",data:mt(E.extendFlat({},be))});else if(Pt||["string","number"].indexOf(typeof be)!==-1)for(ut=0;ut<et._frames.length;ut++)bt=et._frames[ut],bt&&(Pt||String(bt.group)===String(be))&&St.push({type:"byname",name:String(bt.name),data:mt({name:bt.name})});else if(Ht)for(ut=0;ut<be.length;ut++){var Nt=be[ut];["number","string"].indexOf(typeof Nt)!==-1?(Nt=String(Nt),St.push({type:"byname",name:Nt,data:mt({name:Nt})})):E.isPlainObject(Nt)&&St.push({type:"object",data:mt(E.extendFlat({},Nt))})}for(ut=0;ut<St.length;ut++)if(bt=St[ut],bt.type==="byname"&&!et._frameHash[bt.data.name]){E.warn('animate failure: frame not found: "'+bt.data.name+'"'),Xt();return}["next","immediate"].indexOf(Ue.mode)!==-1&&gr(),Ue.direction==="reverse"&&St.reverse();var Kt=pe._fullLayout._currentFrame;if(Kt&&Ue.fromcurrent){var fr=-1;for(ut=0;ut<St.length;ut++)if(bt=St[ut],bt.type==="byname"&&bt.name===Kt){fr=ut;break}if(fr>0&&fr<St.length-1){var cr=[];for(ut=0;ut<St.length;ut++)bt=St[ut],(St[ut].type!=="byname"||ut>fr)&&cr.push(bt);St=cr}}St.length>0?gt(St):(pe.emit("plotly_animated"),It())})}function Ye(pe,be,Ue){if(pe=E.getGraphDiv(pe),be==null)return Promise.resolve();if(!E.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var et,st,lt,Gt,Zt=pe._transitionData._frames,Tt=pe._transitionData._frameHash;if(!Array.isArray(be))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+be);var It=Zt.length+be.length*2,Xt=[],gr={};for(et=be.length-1;et>=0;et--)if(E.isPlainObject(be[et])){var gt=be[et].name,jt=(Tt[gt]||gr[gt]||{}).name,Qt=be[et].name,mr=Tt[jt]||gr[jt];jt&&Qt&&typeof Qt=="number"&&mr&&C<M&&(C++,E.warn('addFrames: overwriting frame "'+(Tt[jt]||gr[jt]).name+'" with a frame whose name of type "number" also equates to "'+jt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),C===M&&E.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),gr[gt]={name:gt},Xt.push({frame:o.supplyFrameDefaults(be[et]),index:Ue&&Ue[et]!==void 0&&Ue[et]!==null?Ue[et]:It+et})}Xt.sort(function(Bt,Nt){return Bt.index>Nt.index?-1:Bt.index<Nt.index?1:0});var or=[],mt=[],ut=Zt.length;for(et=Xt.length-1;et>=0;et--){if(st=Xt[et].frame,typeof st.name=="number"&&E.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!st.name)for(;Tt[st.name="frame "+pe._transitionData._counter++];);if(Tt[st.name]){for(lt=0;lt<Zt.length&&(Zt[lt]||{}).name!==st.name;lt++);or.push({type:"replace",index:lt,value:st}),mt.unshift({type:"replace",index:lt,value:Zt[lt]})}else Gt=Math.max(0,Math.min(Xt[et].index,ut)),or.push({type:"insert",index:Gt,value:st}),mt.unshift({type:"delete",index:Gt}),ut++}var bt=o.modifyFrames,St=o.modifyFrames,Pt=[pe,mt],Ht=[pe,or];return g&&g.add(pe,bt,Pt,St,Ht),o.modifyFrames(pe,or)}function Ie(pe,be){if(pe=E.getGraphDiv(pe),!E.isPlotDiv(pe))throw new Error("This element is not a Plotly plot: "+pe);var Ue,et,st=pe._transitionData._frames,lt=[],Gt=[];if(!be)for(be=[],Ue=0;Ue<st.length;Ue++)be.push(Ue);for(be=be.slice(),be.sort(),Ue=be.length-1;Ue>=0;Ue--)et=be[Ue],lt.push({type:"delete",index:et}),Gt.unshift({type:"insert",index:et,value:st[et]});var Zt=o.modifyFrames,Tt=o.modifyFrames,It=[pe,Gt],Xt=[pe,lt];return g&&g.add(pe,Zt,It,Tt,Xt),o.modifyFrames(pe,lt)}function De(pe){pe=E.getGraphDiv(pe);var be=pe._fullLayout||{},Ue=pe._fullData||[];return o.cleanPlot([],{},Ue,be),o.purge(pe),v.purge(pe),be._container&&be._container.remove(),delete pe._context,pe}function je(pe){var be=pe._fullLayout,Ue=pe.getBoundingClientRect();if(!E.equalDomRects(Ue,be._lastBBox)){var et=be._invTransform=E.inverseTransformMatrix(E.getFullTransformMatrix(pe));be._invScaleX=Math.sqrt(et[0][0]*et[0][0]+et[0][1]*et[0][1]+et[0][2]*et[0][2]),be._invScaleY=Math.sqrt(et[1][0]*et[1][0]+et[1][1]*et[1][1]+et[1][2]*et[1][2]),be._lastBBox=Ue}}function Re(pe){var be=d.select(pe),Ue=pe._fullLayout;if(Ue._calcInverseTransform=je,Ue._calcInverseTransform(pe),Ue._container=be.selectAll(".plot-container").data([0]),Ue._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ue._paperdiv=Ue._container.selectAll(".svg-container").data([0]),Ue._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ue._glcontainer=Ue._paperdiv.selectAll(".gl-container").data([{}]),Ue._glcontainer.enter().append("div").classed("gl-container",!0),Ue._paperdiv.selectAll(".main-svg").remove(),Ue._paperdiv.select(".modebar-container").remove(),Ue._paper=Ue._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ue._toppaper=Ue._paperdiv.append("svg").classed("main-svg",!0),Ue._modebardiv=Ue._paperdiv.append("div"),delete Ue._modeBar,Ue._hoverpaper=Ue._paperdiv.append("svg").classed("main-svg",!0),!Ue._uid){var et={};d.selectAll("defs").each(function(){this.id&&(et[this.id.split("-")[1]]=1)}),Ue._uid=E.randstr(et)}Ue._paperdiv.selectAll(".main-svg").attr(w.svgAttrs),Ue._defs=Ue._paper.append("defs").attr("id","defs-"+Ue._uid),Ue._clips=Ue._defs.append("g").classed("clips",!0),Ue._topdefs=Ue._toppaper.append("defs").attr("id","topdefs-"+Ue._uid),Ue._topclips=Ue._topdefs.append("g").classed("clips",!0),Ue._bgLayer=Ue._paper.append("g").classed("bglayer",!0),Ue._draggers=Ue._paper.append("g").classed("draglayer",!0);var st=Ue._paper.append("g").classed("layer-below",!0);Ue._imageLowerLayer=st.append("g").classed("imagelayer",!0),Ue._shapeLowerLayer=st.append("g").classed("shapelayer",!0),Ue._cartesianlayer=Ue._paper.append("g").classed("cartesianlayer",!0),Ue._polarlayer=Ue._paper.append("g").classed("polarlayer",!0),Ue._smithlayer=Ue._paper.append("g").classed("smithlayer",!0),Ue._ternarylayer=Ue._paper.append("g").classed("ternarylayer",!0),Ue._geolayer=Ue._paper.append("g").classed("geolayer",!0),Ue._funnelarealayer=Ue._paper.append("g").classed("funnelarealayer",!0),Ue._pielayer=Ue._paper.append("g").classed("pielayer",!0),Ue._iciclelayer=Ue._paper.append("g").classed("iciclelayer",!0),Ue._treemaplayer=Ue._paper.append("g").classed("treemaplayer",!0),Ue._sunburstlayer=Ue._paper.append("g").classed("sunburstlayer",!0),Ue._indicatorlayer=Ue._toppaper.append("g").classed("indicatorlayer",!0),Ue._glimages=Ue._paper.append("g").classed("glimages",!0);var lt=Ue._toppaper.append("g").classed("layer-above",!0);Ue._imageUpperLayer=lt.append("g").classed("imagelayer",!0),Ue._shapeUpperLayer=lt.append("g").classed("shapelayer",!0),Ue._selectionLayer=Ue._toppaper.append("g").classed("selectionlayer",!0),Ue._infolayer=Ue._toppaper.append("g").classed("infolayer",!0),Ue._menulayer=Ue._toppaper.append("g").classed("menulayer",!0),Ue._zoomlayer=Ue._toppaper.append("g").classed("zoomlayer",!0),Ue._hoverlayer=Ue._hoverpaper.append("g").classed("hoverlayer",!0),Ue._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),pe.emit("plotly_framework")}F.animate=Ze,F.addFrames=Ye,F.deleteFrames=Ie,F.addTraces=ie,F.deleteTraces=K,F.extendTraces=te,F.moveTraces=ee,F.prependTraces=J,F.newPlot=N,F._doPlot=s,F.purge=De,F.react=wt,F.redraw=O,F.relayout=Te,F.restyle=le,F.setPlotConfig=b,F.update=Oe,F._guiRelayout=Le(Te),F._guiRestyle=Le(le),F._guiUpdate=Le(Oe),F._storeDirectGUIEdit=re},20556:function(U){var F={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};function d(S,n){for(var E in S){var T=S[E];T.valType?n[E]=T.dflt:(n[E]||(n[E]={}),d(T,n[E]))}}d(F,e),U.exports={configAttributes:F,dfltConfig:e}},73060:function(U,F,e){var d=e(24040),S=e(3400),n=e(45464),E=e(64859),T=e(16672),v=e(85656),g=e(20556).configAttributes,r=e(67824),t=S.extendDeepAll,o=S.isPlainObject,i=S.isArrayOrTypedArray,f=S.nestedProperty,u=S.valObjectMeta,l="_isSubplotObj",m="_isLinkedToArray",h="_arrayAttrRegexps",w="_deprecated",c=[l,m,h,w];F.IS_SUBPLOT_OBJ=l,F.IS_LINKED_TO_ARRAY=m,F.DEPRECATED=w,F.UNDERSCORE_ATTRS=c,F.get=function(){var V={};d.allTypes.forEach(function(N){V[N]=A(N)});var O={};return Object.keys(d.transformsRegistry).forEach(function(N){O[N]=y(N)}),{defs:{valObjects:u,metaKeys:c.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:V,layout:P(),transforms:O,frames:C(),animation:M(v),config:M(g)}},F.crawl=function(V,O,N,B){var z=N||0;B=B||"",Object.keys(V).forEach(function(H){var X=V[H];if(c.indexOf(H)===-1){var $=(B?B+".":"")+H;O(X,H,V,z,$),!F.isValObject(X)&&o(X)&&H!=="impliedEdits"&&F.crawl(X,O,z+1,$)}})},F.isValObject=function(V){return V&&V.valType!==void 0},F.findArrayAttributes=function(V){var O=[],N=[],B=[],z,H;function X(J,ie,K,ee){N=N.slice(0,ee).concat([ie]),B=B.slice(0,ee).concat([J&&J._isLinkedToArray]);var le=J&&(J.valType==="data_array"||J.arrayOk===!0)&&!(N[ee-1]==="colorbar"&&(ie==="ticktext"||ie==="tickvals"));le&&$(z,0,"")}function $(J,ie,K){var ee=J[N[ie]],le=K+N[ie];if(ie===N.length-1)i(ee)&&O.push(H+le);else if(B[ie]){if(Array.isArray(ee))for(var j=0;j<ee.length;j++)o(ee[j])&&$(ee[j],ie+1,le+"["+j+"].")}else o(ee)&&$(ee,ie+1,le+".")}z=V,H="",F.crawl(n,X),V._module&&V._module.attributes&&F.crawl(V._module.attributes,X);var ne=V.transforms;if(ne)for(var q=0;q<ne.length;q++){var ue=ne[q],te=ue._module;te&&(H="transforms["+q+"].",z=ue,F.crawl(te.attributes,X))}return O},F.getTraceValObject=function(V,O){var N=O[0],B=1,z,H;if(N==="transforms"){if(O.length===1)return n.transforms;var X=V.transforms;if(!Array.isArray(X)||!X.length)return!1;var $=O[1];if(!x($)||$>=X.length)return!1;z=(d.transformsRegistry[X[$].type]||{}).attributes,H=z&&z[O[2]],B=3}else{var ne=V._module;if(ne||(ne=(d.modules[V.type||n.type.dflt]||{})._module),!ne)return!1;if(z=ne.attributes,H=z&&z[N],!H){var q=ne.basePlotModule;q&&q.attributes&&(H=q.attributes[N])}H||(H=n[N])}return p(H,O,B)},F.getLayoutValObject=function(V,O){var N=a(V,O[0]);return p(N,O,1)};function a(V,O){var N,B,z,H,X=V._basePlotModules;if(X){var $;for(N=0;N<X.length;N++){if(z=X[N],z.attrRegex&&z.attrRegex.test(O)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!$&&z.layoutAttributes&&($=z.layoutAttributes)}var ne=z.baseLayoutAttrOverrides;if(ne&&O in ne)return ne[O]}if($)return $}var q=V._modules;if(q){for(N=0;N<q.length;N++)if(H=q[N].layoutAttributes,H&&O in H)return H[O]}for(B in d.componentsRegistry){if(z=d.componentsRegistry[B],z.name==="colorscale"&&O.indexOf("coloraxis")===0)return z.layoutAttributes[O];if(!z.schema&&O===z.name)return z.layoutAttributes}return O in E?E[O]:!1}function p(V,O,N){if(!V)return!1;if(V._isLinkedToArray){if(x(O[N]))N++;else if(N<O.length)return!1}for(;N<O.length;N++){var B=V[O[N]];if(o(B))V=B;else break;if(N===O.length-1)break;if(V._isLinkedToArray){if(N++,!x(O[N]))return!1}else if(V.valType==="info_array"){N++;var z=O[N];if(!x(z))return!1;var H=V.items;if(Array.isArray(H)){if(z>=H.length)return!1;if(V.dimensions===2){if(N++,O.length===N)return V;var X=O[N];if(!x(X))return!1;V=H[z][X]}else V=H[z]}else V=H}}return V}function x(V){return V===Math.round(V)&&V>=0}function A(V){var O,N;O=d.modules[V]._module,N=O.basePlotModule;var B={};B.type=null;var z=t({},n),H=t({},O.attributes);F.crawl(H,function(ne,q,ue,te,J){f(z,J).set(void 0),ne===void 0&&f(H,J).set(void 0)}),t(B,z),d.traceIs(V,"noOpacity")&&delete B.opacity,d.traceIs(V,"showLegend")||(delete B.showlegend,delete B.legendgroup),d.traceIs(V,"noHover")&&(delete B.hoverinfo,delete B.hoverlabel),O.selectPoints||delete B.selectedpoints,t(B,H),N.attributes&&t(B,N.attributes),B.type=V;var X={meta:O.meta||{},categories:O.categories||{},animatable:!!O.animatable,type:V,attributes:M(B)};if(O.layoutAttributes){var $={};t($,O.layoutAttributes),X.layoutAttributes=M($)}return O.animatable||F.crawl(X,function(ne){F.isValObject(ne)&&"anim"in ne&&delete ne.anim}),X}function P(){var V={},O,N;t(V,E);for(O in d.subplotsRegistry)if(N=d.subplotsRegistry[O],!!N.layoutAttributes)if(Array.isArray(N.attr))for(var B=0;B<N.attr.length;B++)k(V,N,N.attr[B]);else{var z=N.attr==="subplot"?N.name:N.attr;k(V,N,z)}for(O in d.componentsRegistry){N=d.componentsRegistry[O];var H=N.schema;if(H&&(H.subplots||H.layout)){var X=H.subplots;if(X&&X.xaxis&&!X.yaxis)for(var $ in X.xaxis)delete V.yaxis[$];delete V.xaxis.shift,delete V.xaxis.autoshift}else N.name==="colorscale"?t(V,N.layoutAttributes):N.layoutAttributes&&D(V,N.layoutAttributes,N.name)}return{layoutAttributes:M(V)}}function y(V){var O=d.transformsRegistry[V],N=t({},O.attributes);return Object.keys(d.componentsRegistry).forEach(function(B){var z=d.componentsRegistry[B];z.schema&&z.schema.transforms&&z.schema.transforms[V]&&Object.keys(z.schema.transforms[V]).forEach(function(H){D(N,z.schema.transforms[V][H],H)})}),{attributes:M(N)}}function C(){var V={frames:t({},T)};return M(V),V.frames}function M(V){return s(V),_(V),b(V),V}function s(V){function O(B){return{valType:"string",editType:"none"}}function N(B,z,H){F.isValObject(B)?(B.arrayOk===!0||B.valType==="data_array")&&(H[z+"src"]=O()):o(B)&&(B.role="object")}F.crawl(V,N)}function _(V){function O(N,B,z){if(N){var H=N[m];H&&(delete N[m],z[B]={items:{}},z[B].items[H]=N,z[B].role="object")}}F.crawl(V,O)}function b(V){function O(N){for(var B in N)if(o(N[B]))O(N[B]);else if(Array.isArray(N[B]))for(var z=0;z<N[B].length;z++)O(N[B][z]);else N[B]instanceof RegExp&&(N[B]=N[B].toString())}O(V)}function k(V,O,N){var B=f(V,N),z=t({},O.layoutAttributes);z[l]=!0,B.set(z)}function D(V,O,N){var B=f(V,N);B.set(t(B.get()||{},O))}},31780:function(U,F,e){var d=e(3400),S=e(45464),n="templateitemname",E={name:{valType:"string",editType:"none"}};E[n]={valType:"string",editType:"calc"},F.templatedArray=function(g,r){return r._isLinkedToArray=g,r.name=E.name,r[n]=E[n],r},F.traceTemplater=function(g){var r={},t,o;for(t in g)o=g[t],Array.isArray(o)&&o.length&&(r[t]=0);function i(f){t=d.coerce(f,{},S,"type");var u={type:t,_template:null};if(t in r){o=g[t];var l=r[t]%o.length;r[t]++,u._template=o[l]}return u}return{newTrace:i}},F.newContainer=function(g,r,t){var o=g._template,i=o&&(o[r]||t&&o[t]);d.isPlainObject(i)||(i=null);var f=g[r]={_template:i};return f},F.arrayTemplater=function(g,r,t){var o=g._template,i=o&&o[v(r)],f=o&&o[r];(!Array.isArray(f)||!f.length)&&(f=[]);var u={};function l(h){var w={name:h.name,_input:h},c=w[n]=h[n];if(!T(c))return w._template=i,w;for(var a=0;a<f.length;a++){var p=f[a];if(p.name===c)return u[c]=1,w._template=p,w}return w[t]=h[t]||!1,w._template=!1,w}function m(){for(var h=[],w=0;w<f.length;w++){var c=f[w],a=c.name;if(T(a)&&!u[a]){var p={_template:c,name:a,_input:{_templateitemname:a}};p[n]=c[n],h.push(p),u[a]=1}}return h}return{newItem:l,defaultItems:m}};function T(g){return g&&typeof g=="string"}function v(g){var r=g.length-1;return g.charAt(r)!=="s"&&d.warn("bad argument to arrayDefaultKey: "+g),g.substr(0,g.length-1)+"defaults"}F.arrayDefaultKey=v,F.arrayEditor=function(g,r,t){var o=(d.nestedProperty(g,r).get()||[]).length,i=t._index,f=i>=o&&(t._input||{})._templateitemname;f&&(i=o);var u=r+"["+i+"]",l;function m(){l={},f&&(l[u]={},l[u][n]=f)}m();function h(p,x){l[p]=x}function w(p,x){f?d.nestedProperty(l[u],p).set(x):l[u+"."+p]=x}function c(){var p=l;return m(),p}function a(p,x){p&&w(p,x);var A=c();for(var P in A)d.nestedProperty(g,P).set(A[P])}return{modifyBase:h,modifyItem:w,getUpdateObj:c,applyUpdate:a}}},39172:function(U,F,e){var d=e(33428),S=e(24040),n=e(7316),E=e(3400),T=e(72736),v=e(73696),g=e(76308),r=e(43616),t=e(81668),o=e(45460),i=e(54460),f=e(84284),u=e(71888),l=u.enforce,m=u.clean,h=e(19280).doAutoRange,w="start",c="middle",a="end";F.layoutStyles=function(N){return E.syncOrAsync([n.doAutoMargin,x],N)};function p(N,B,z){for(var H=0;H<z.length;H++){var X=z[H][0],$=z[H][1];if(!(X[0]>=N[1]||X[1]<=N[0])&&$[0]<B[1]&&$[1]>B[0])return!0}return!1}function x(N){var B=N._fullLayout,z=B._size,H=z.p,X=i.list(N,"",!0),$,ne,q,ue,te,J;if(B._paperdiv.style({width:N._context.responsive&&B.autosize&&!N._context._hasZeroWidth&&!N.layout.width?"100%":B.width+"px",height:N._context.responsive&&B.autosize&&!N._context._hasZeroHeight&&!N.layout.height?"100%":B.height+"px"}).selectAll(".main-svg").call(r.setSize,B.width,B.height),N._context.setBackground(N,B.paper_bgcolor),F.drawMainTitle(N),o.manage(N),!B._has("cartesian"))return n.previousPromises(N);function ie(De,je,Re){var pe=De._lw/2;if(De._id.charAt(0)==="x"){if(je){if(Re==="top")return je._offset-H-pe}else return z.t+z.h*(1-(De.position||0))+pe%1;return je._offset+je._length+H+pe}if(je){if(Re==="right")return je._offset+je._length+H+pe}else return z.l+z.w*(De.position||0)+pe%1;return je._offset-H-pe}for($=0;$<X.length;$++){ue=X[$];var K=ue._anchorAxis;ue._linepositions={},ue._lw=r.crispRound(N,ue.linewidth,1),ue._mainLinePosition=ie(ue,K,ue.side),ue._mainMirrorPosition=ue.mirror&&K?ie(ue,K,f.OPPOSITE_SIDE[ue.side]):null}var ee=[],le=[],j=[],Z=g.opacity(B.paper_bgcolor)===1&&g.opacity(B.plot_bgcolor)===1&&B.paper_bgcolor===B.plot_bgcolor;for(ne in B._plots)if(q=B._plots[ne],q.mainplot)q.bg&&q.bg.remove(),q.bg=void 0;else{var fe=q.xaxis.domain,re=q.yaxis.domain,ce=q.plotgroup;if(p(fe,re,j)){var xe=ce.node(),Te=q.bg=E.ensureSingle(ce,"rect","bg");xe.insertBefore(Te.node(),xe.childNodes[0]),le.push(ne)}else ce.select("rect.bg").remove(),j.push([fe,re]),Z||(ee.push(ne),le.push(ne))}var we=B._bgLayer.selectAll(".bg").data(ee);for(we.enter().append("rect").classed("bg",!0),we.exit().remove(),we.each(function(De){B._plots[De].bg=d.select(this)}),$=0;$<le.length;$++)q=B._plots[le[$]],te=q.xaxis,J=q.yaxis,q.bg&&te._offset!==void 0&&J._offset!==void 0&&q.bg.call(r.setRect,te._offset-H,J._offset-H,te._length+2*H,J._length+2*H).call(g.fill,B.plot_bgcolor).style("stroke-width",0);if(!B._hasOnlyLargeSploms)for(ne in B._plots){q=B._plots[ne],te=q.xaxis,J=q.yaxis;var _e=q.clipId="clip"+B._uid+ne+"plot",ke=E.ensureSingleById(B._clips,"clipPath",_e,function(De){De.classed("plotclip",!0).append("rect")});q.clipRect=ke.select("rect").attr({width:te._length,height:J._length}),r.setTranslate(q.plot,te._offset,J._offset);var Ne,Ee;q._hasClipOnAxisFalse?(Ne=null,Ee=_e):(Ne=_e,Ee=null),r.setClipUrl(q.plot,Ne,N),q.layerClipId=Ee}var ze,Ce,Oe,Le,Ge,rt,ot,$e,qe,ht,vt,pt,wt;function Et(De){return"M"+ze+","+De+"H"+Ce}function nt(De){return"M"+te._offset+","+De+"h"+te._length}function Fe(De){return"M"+De+","+$e+"V"+ot}function We(De){return J._shift!==void 0&&(De+=J._shift),"M"+De+","+J._offset+"v"+J._length}function Ze(De,je,Re){if(!De.showline||ne!==De._mainSubplot)return"";if(!De._anchorAxis)return Re(De._mainLinePosition);var pe=je(De._mainLinePosition);return De.mirror&&(pe+=je(De._mainMirrorPosition)),pe}for(ne in B._plots){q=B._plots[ne],te=q.xaxis,J=q.yaxis;var Ye="M0,0";A(te,ne)&&(Ge=y(te,"left",J,X),ze=te._offset-(Ge?H+Ge:0),rt=y(te,"right",J,X),Ce=te._offset+te._length+(rt?H+rt:0),Oe=ie(te,J,"bottom"),Le=ie(te,J,"top"),wt=!te._anchorAxis||ne!==te._mainSubplot,wt&&(te.mirror==="allticks"||te.mirror==="all")&&(te._linepositions[ne]=[Oe,Le]),Ye=Ze(te,Et,nt),wt&&te.showline&&(te.mirror==="all"||te.mirror==="allticks")&&(Ye+=Et(Oe)+Et(Le)),q.xlines.style("stroke-width",te._lw+"px").call(g.stroke,te.showline?te.linecolor:"rgba(0,0,0,0)")),q.xlines.attr("d",Ye);var Ie="M0,0";A(J,ne)&&(vt=y(J,"bottom",te,X),ot=J._offset+J._length+(vt?H:0),pt=y(J,"top",te,X),$e=J._offset-(pt?H:0),qe=ie(J,te,"left"),ht=ie(J,te,"right"),wt=!J._anchorAxis||ne!==J._mainSubplot,wt&&(J.mirror==="allticks"||J.mirror==="all")&&(J._linepositions[ne]=[qe,ht]),Ie=Ze(J,Fe,We),wt&&J.showline&&(J.mirror==="all"||J.mirror==="allticks")&&(Ie+=Fe(qe)+Fe(ht)),q.ylines.style("stroke-width",J._lw+"px").call(g.stroke,J.showline?J.linecolor:"rgba(0,0,0,0)")),q.ylines.attr("d",Ie)}return i.makeClipPaths(N),n.previousPromises(N)}function A(N,B){return(N.ticks||N.showline)&&(B===N._mainSubplot||N.mirror==="all"||N.mirror==="allticks")}function P(N,B,z){if(!z.showline||!z._lw)return!1;if(z.mirror==="all"||z.mirror==="allticks")return!0;var H=z._anchorAxis;if(!H)return!1;var X=f.FROM_BL[B];return z.side===B?H.domain[X]===N.domain[X]:z.mirror&&H.domain[1-X]===N.domain[1-X]}function y(N,B,z,H){if(P(N,B,z))return z._lw;for(var X=0;X<H.length;X++){var $=H[X];if($._mainAxis===z._mainAxis&&P(N,B,$))return $._lw}return 0}F.drawMainTitle=function(N){var B=N._fullLayout.title,z=N._fullLayout,H=V(z),X=O(z),$=k(z,X),ne=b(z,H);if(t.draw(N,"gtitle",{propContainer:z,propName:"title.text",placeholder:z._dfltTitle.plot,attributes:{x:ne,y:$,"text-anchor":H,dy:X}}),B.text&&B.automargin){var q=d.selectAll(".gtitle"),ue=r.bBox(q.node()).height,te=s(N,B,ue);if(te>0){_(N,$,te,ue),q.attr({x:ne,y:$,"text-anchor":H,dy:D(B.yanchor)}).call(T.positionText,ne,$);var J=(B.text.match(T.BR_TAG_ALL)||[]).length;if(J){var ie=f.LINE_SPACING*J+f.MID_SHIFT;B.y===0&&(ie=-ie),q.selectAll(".line").each(function(){var K=+this.getAttribute("dy").slice(0,-2)-ie+"em";this.setAttribute("dy",K)})}}}};function C(N,B,z,H,X){var $=B.yref==="paper"?N._fullLayout._size.h:N._fullLayout.height,ne=E.isTopAnchor(B)?H:H-X,q=z==="b"?$-ne:ne;return E.isTopAnchor(B)&&z==="t"||E.isBottomAnchor(B)&&z==="b"?!1:q<X}function M(N,B,z,H,X){var $=0;return z==="middle"&&($+=X/2),N==="t"?(z==="top"&&($+=X),$+=H-B*H):(z==="bottom"&&($+=X),$+=B*H),$}function s(N,B,z){var H=B.y,X=B.yanchor,$=H>.5?"t":"b",ne=N._fullLayout.margin[$],q=0;return B.yref==="paper"?q=z+B.pad.t+B.pad.b:B.yref==="container"&&(q=M($,H,X,N._fullLayout.height,z)+B.pad.t+B.pad.b),q>ne?q:0}function _(N,B,z,H){var X="title.automargin",$=N._fullLayout.title,ne=$.y>.5?"t":"b",q={x:$.x,y:$.y,t:0,b:0},ue={};$.yref==="paper"&&C(N,$,ne,B,H)?q[ne]=z:$.yref==="container"&&(ue[ne]=z,N._fullLayout._reservedMargin[X]=ue),n.allowAutoMargin(N,X),n.autoMargin(N,X,q)}function b(N,B){var z=N.title,H=N._size,X=0;switch(B===w?X=z.pad.l:B===a&&(X=-z.pad.r),z.xref){case"paper":return H.l+H.w*z.x+X;case"container":default:return N.width*z.x+X}}function k(N,B){var z=N.title,H=N._size,X=0;if(B==="0em"||!B?X=-z.pad.b:B===f.CAP_SHIFT+"em"&&(X=z.pad.t),z.y==="auto")return H.t/2;switch(z.yref){case"paper":return H.t+H.h-H.h*z.y+X;case"container":default:return N.height-N.height*z.y+X}}function D(N){return N==="top"?f.CAP_SHIFT+.3+"em":N==="bottom"?"-0.3em":f.MID_SHIFT+"em"}function V(N){var B=N.title,z=c;return E.isRightAnchor(B)?z=a:E.isLeftAnchor(B)&&(z=w),z}function O(N){var B=N.title,z="0em";return E.isTopAnchor(B)?z=f.CAP_SHIFT+"em":E.isMiddleAnchor(B)&&(z=f.MID_SHIFT+"em"),z}F.doTraceStyle=function(N){var B=N.calcdata,z=[],H;for(H=0;H<B.length;H++){var X=B[H],$=X[0]||{},ne=$.trace||{},q=ne._module||{},ue=q.arraysToCalcdata;ue&&ue(X,ne);var te=q.editStyle;te&&z.push({fn:te,cd0:$})}if(z.length){for(H=0;H<z.length;H++){var J=z[H];J.fn(N,J.cd0)}v(N),F.redrawReglTraces(N)}return n.style(N),S.getComponentMethod("legend","draw")(N),n.previousPromises(N)},F.doColorBars=function(N){return S.getComponentMethod("colorbar","draw")(N),n.previousPromises(N)},F.layoutReplot=function(N){var B=N.layout;return N.layout=void 0,S.call("_doPlot",N,"",B)},F.doLegend=function(N){return S.getComponentMethod("legend","draw")(N),n.previousPromises(N)},F.doTicksRelayout=function(N){return i.draw(N,"redraw"),N._fullLayout._hasOnlyLargeSploms&&(S.subplotsRegistry.splom.updateGrid(N),v(N),F.redrawReglTraces(N)),F.drawMainTitle(N),n.previousPromises(N)},F.doModeBar=function(N){var B=N._fullLayout;o.manage(N);for(var z=0;z<B._basePlotModules.length;z++){var H=B._basePlotModules[z].updateFx;H&&H(N)}return n.previousPromises(N)},F.doCamera=function(N){for(var B=N._fullLayout,z=B._subplots.gl3d,H=0;H<z.length;H++){var X=B[z[H]],$=X._scene;$.setViewport(X)}},F.drawData=function(N){var B=N._fullLayout;v(N);for(var z=B._basePlotModules,H=0;H<z.length;H++)z[H].plot(N);return F.redrawReglTraces(N),n.style(N),S.getComponentMethod("selections","draw")(N),S.getComponentMethod("shapes","draw")(N),S.getComponentMethod("annotations","draw")(N),S.getComponentMethod("images","draw")(N),B._replotting=!1,n.previousPromises(N)},F.redrawReglTraces=function(N){var B=N._fullLayout;if(B._has("regl")){var z=N._fullData,H=[],X=[],$,ne;for(B._hasOnlyLargeSploms&&B._splomGrid.draw(),$=0;$<z.length;$++){var q=z[$];q.visible===!0&&q._length!==0&&(q.type==="splom"?B._splomScenes[q.uid].draw():q.type==="scattergl"?E.pushUnique(H,q.xaxis+q.yaxis):q.type==="scatterpolargl"&&E.pushUnique(X,q.subplot))}for($=0;$<H.length;$++)ne=B._plots[H[$]],ne._scene&&ne._scene.draw();for($=0;$<X.length;$++)ne=B[X[$]]._subplot,ne._scene&&ne._scene.draw()}},F.doAutoRangeAndConstraints=function(N){for(var B=i.list(N,"",!0),z,H={},X=0;X<B.length;X++)if(z=B[X],!H[z._id]){H[z._id]=1,m(N,z),h(N,z);var $=z._matchGroup;if($)for(var ne in $){var q=i.getFromId(N,ne);h(N,q,z.range),H[ne]=1}}l(N)},F.finalDraw=function(N){S.getComponentMethod("rangeslider","draw")(N),S.getComponentMethod("rangeselector","draw")(N)},F.drawMarginPushers=function(N){S.getComponentMethod("legend","draw")(N),S.getComponentMethod("rangeselector","draw")(N),S.getComponentMethod("sliders","draw")(N),S.getComponentMethod("updatemenus","draw")(N),S.getComponentMethod("colorbar","draw")(N)}},94828:function(U,F,e){var d=e(3400),S=d.isPlainObject,n=e(73060),E=e(7316),T=e(45464),v=e(31780),g=e(20556).dfltConfig;F.makeTemplate=function(h){h=d.isPlainObject(h)?h:d.getGraphDiv(h),h=d.extendDeep({_context:g},{data:h.data,layout:h.layout}),E.supplyDefaults(h);var w=h.data||[],c=h.layout||{};c._basePlotModules=h._fullLayout._basePlotModules,c._modules=h._fullLayout._modules;var a={data:{},layout:{}};w.forEach(function(b){var k={};o(b,k,f.bind(null,b));var D=d.coerce(b,{},T,"type"),V=a.data[D];V||(V=a.data[D]=[]),V.push(k)}),o(c,a.layout,i.bind(null,c)),delete a.layout.template;var p=c.template;if(S(p)){var x=p.layout,A,P,y,C,M,s;S(x)&&r(x,a.layout);var _=p.data;if(S(_)){for(P in a.data)if(y=_[P],Array.isArray(y)){for(M=a.data[P],s=M.length,C=y.length,A=0;A<s;A++)r(y[A%C],M[A]);for(A=s;A<C;A++)M.push(d.extendDeep({},y[A]))}for(P in _)P in a.data||(a.data[P]=d.extendDeep([],_[P]))}}return a};function r(h,w){h=d.extendDeep({},h);var c=Object.keys(h).sort(),a,p;function x(M,s,_){if(S(s)&&S(M))r(M,s);else if(Array.isArray(s)&&Array.isArray(M)){var b=v.arrayTemplater({_template:h},_);for(p=0;p<s.length;p++){var k=s[p],D=b.newItem(k)._template;D&&r(D,k)}var V=b.defaultItems();for(p=0;p<V.length;p++)s.push(V[p]._template);for(p=0;p<s.length;p++)delete s[p].templateitemname}}for(a=0;a<c.length;a++){var A=c[a],P=h[A];if(A in w?x(P,w[A],A):w[A]=P,t(A)===A)for(var y in w){var C=t(y);y!==C&&C===A&&!(y in h)&&x(P,w[y],A)}}}function t(h){return h.replace(/[0-9]+$/,"")}function o(h,w,c,a,p){var x=p&&c(p);for(var A in h){var P=h[A],y=u(h,A,a),C=u(h,A,p),M=c(C);if(!M){var s=t(A);s!==A&&(C=u(h,s,p),M=c(C))}if(!(x&&x===M)&&!(!M||M._noTemplating||M.valType==="data_array"||M.arrayOk&&Array.isArray(P)))if(!M.valType&&S(P))o(P,w,c,y,C);else if(M._isLinkedToArray&&Array.isArray(P))for(var _=!1,b=0,k={},D=0;D<P.length;D++){var V=P[D];if(S(V)){var O=V.name;if(O)k[O]||(o(V,w,c,u(P,b,y),u(P,b,C)),b++,k[O]=1);else if(!_){var N=v.arrayDefaultKey(A),B=u(h,N,a),z=u(P,b,y);o(V,w,c,z,u(P,b,C));var H=d.nestedProperty(w,z),X=d.nestedProperty(w,B);X.set(H.get()),H.set(null),_=!0}}}else{var $=d.nestedProperty(w,y);$.set(P)}}}function i(h,w){return n.getLayoutValObject(h,d.nestedProperty({},w).parts)}function f(h,w){return n.getTraceValObject(h,d.nestedProperty({},w).parts)}function u(h,w,c){var a;return c?Array.isArray(h)?a=c+"["+w+"]":a=c+"."+w:a=w,a}F.validateTemplate=function(h,w){var c=d.extendDeep({},{_context:g,data:h.data,layout:h.layout}),a=c.layout||{};S(w)||(w=a.template||{});var p=w.layout,x=w.data,A=[];c.layout=a,c.layout.template=w,E.supplyDefaults(c);var P=c._fullLayout,y=c._fullData,C={};function M(B,z){for(var H in B)if(H.charAt(0)!=="_"&&S(B[H])){var X=t(H),$=[],ne;for(ne=0;ne<z.length;ne++)$.push(u(B,H,z[ne])),X!==H&&$.push(u(B,X,z[ne]));for(ne=0;ne<$.length;ne++)C[$[ne]]=1;M(B[H],$)}}function s(B,z){for(var H in B)if(H.indexOf("defaults")===-1&&S(B[H])){var X=u(B,H,z);C[X]?s(B[H],X):A.push({code:"unused",path:X})}}if(S(p)?(M(P,["layout"]),s(p,"layout")):A.push({code:"layout"}),!S(x))A.push({code:"data"});else{for(var _={},b,k=0;k<y.length;k++){var D=y[k];b=D.type,_[b]=(_[b]||0)+1,D._fullInput._template||A.push({code:"missing",index:D._fullInput.index,traceType:b})}for(b in x){var V=x[b].length,O=_[b]||0;V>O?A.push({code:"unused",traceType:b,templateCount:V,dataCount:O}):O>V&&A.push({code:"reused",traceType:b,templateCount:V,dataCount:O})}}function N(B,z){for(var H in B)if(H.charAt(0)!=="_"){var X=B[H],$=u(B,H,z);S(X)?(Array.isArray(B)&&X._template===!1&&X.templateitemname&&A.push({code:"missing",path:$,templateitemname:X.templateitemname}),N(X,$)):Array.isArray(X)&&l(X)&&N(X,$)}}if(N({data:y,layout:P},""),A.length)return A.map(m)};function l(h){for(var w=0;w<h.length;w++)if(S(h[w]))return!0}function m(h){var w;switch(h.code){case"data":w="The template has no key data.";break;case"layout":w="The template has no key layout.";break;case"missing":h.path?w="There are no templates for item "+h.path+" with name "+h.templateitemname:w="There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":h.path?w="The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?w="Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":w="The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":w="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type.";break}return h.msg=w,h}},67024:function(U,F,e){var d=e(38248),S=e(36424),n=e(7316),E=e(3400),T=e(81792),v=e(37164),g=e(63268),r=e(25788).version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function o(i,f){f=f||{};var u,l,m,h;E.isPlainObject(i)?(u=i.data||[],l=i.layout||{},m=i.config||{},h={}):(i=E.getGraphDiv(i),u=E.extendDeep([],i.data),l=E.extendDeep({},i.layout),m=i._context,h=i._fullLayout||{});function w(O){return!(O in f)||E.validate(f[O],t[O])}if(!w("width")&&f.width!==null||!w("height")&&f.height!==null)throw new Error("Height and width should be pixel values.");if(!w("format"))throw new Error("Export format is not "+E.join2(t.format.values,", "," or ")+".");var c={};function a(O,N){return E.coerce(f,c,t,O,N)}var p=a("format"),x=a("width"),A=a("height"),P=a("scale"),y=a("setBackground"),C=a("imageDataOnly"),M=document.createElement("div");M.style.position="absolute",M.style.left="-5000px",document.body.appendChild(M);var s=E.extendFlat({},l);x?s.width=x:f.width===null&&d(h.width)&&(s.width=h.width),A?s.height=A:f.height===null&&d(h.height)&&(s.height=h.height);var _=E.extendFlat({},m,{_exportedPlot:!0,staticPlot:!0,setBackground:y}),b=T.getRedrawFunc(M);function k(){return new Promise(function(O){setTimeout(O,T.getDelay(M._fullLayout))})}function D(){return new Promise(function(O,N){var B=v(M,p,P),z=M._fullLayout.width,H=M._fullLayout.height;function X(){S.purge(M),document.body.removeChild(M)}if(p==="full-json"){var $=n.graphJson(M,!1,"keepdata","object",!0,!0);return $.version=r,$=JSON.stringify($),X(),O(C?$:T.encodeJSON($))}if(X(),p==="svg")return O(C?B:T.encodeSVG(B));var ne=document.createElement("canvas");ne.id=E.randstr(),g({format:p,width:z,height:H,scale:P,canvas:ne,svg:B,promise:!0}).then(O).catch(N)})}function V(O){return C?O.replace(T.IMAGE_URL_PREFIX,""):O}return new Promise(function(O,N){S.newPlot(M,u,s,_).then(b).then(k).then(D).then(function(B){O(V(B))}).catch(function(B){N(B)})})}U.exports=o},21480:function(U,F,e){var d=e(3400),S=e(7316),n=e(73060),E=e(20556).dfltConfig,T=d.isPlainObject,v=Array.isArray,g=d.isArrayOrTypedArray;U.exports=function(a,p){a===void 0&&(a=[]),p===void 0&&(p={});var x=n.get(),A=[],P={_context:d.extendFlat({},E)},y,C;v(a)?(P.data=d.extendDeep([],a),y=a):(P.data=[],y=[],A.push(f("array","data"))),T(p)?(P.layout=d.extendDeep({},p),C=p):(P.layout={},C={},arguments.length>1&&A.push(f("object","layout"))),S.supplyDefaults(P);for(var M=P._fullData,s=y.length,_=0;_<s;_++){var b=y[_],k=["data",_];if(!T(b)){A.push(f("object",k));continue}var D=M[_],V=D.type,O=x.traces[V].attributes;O.type={valType:"enumerated",values:[V]},D.visible===!1&&b.visible!==!1&&A.push(f("invisible",k)),r(b,D,O,A,k);var N=b.transforms,B=D.transforms;if(N){v(N)||A.push(f("array",k,["transforms"])),k.push("transforms");for(var z=0;z<N.length;z++){var H=["transforms",z],X=N[z].type;if(!T(N[z])){A.push(f("object",k,H));continue}var $=x.transforms[X]?x.transforms[X].attributes:{};$.type={valType:"enumerated",values:Object.keys(x.transforms)},r(N[z],B[z],$,A,k,H)}}}var ne=P._fullLayout,q=t(x,M);return r(C,ne,q,A,"layout"),A.length===0?void 0:A};function r(c,a,p,x,A,P){P=P||[];for(var y=Object.keys(c),C=0;C<y.length;C++){var M=y[C];if(M!=="transforms"){var s=P.slice();s.push(M);var _=c[M],b=a[M],k=l(p,M),D=(k||{}).valType,V=D==="info_array",O=D==="colorscale",N=(k||{}).items;if(!u(p,M))x.push(f("schema",A,s));else if(T(_)&&T(b)&&D!=="any")r(_,b,k,x,A,s);else if(V&&v(_)){_.length>b.length&&x.push(f("unused",A,s.concat(b.length)));var B=b.length,z=Array.isArray(N);z&&(B=Math.min(B,N.length));var H,X,$,ne,q;if(k.dimensions===2)for(X=0;X<B;X++)if(v(_[X])){_[X].length>b[X].length&&x.push(f("unused",A,s.concat(X,b[X].length)));var ue=b[X].length;for(H=0;H<(z?Math.min(ue,N[X].length):ue);H++)$=z?N[X][H]:N,ne=_[X][H],q=b[X][H],d.validate(ne,$)?q!==ne&&q!==+ne&&x.push(f("dynamic",A,s.concat(X,H),ne,q)):x.push(f("value",A,s.concat(X,H),ne))}else x.push(f("array",A,s.concat(X),_[X]));else for(X=0;X<B;X++)$=z?N[X]:N,ne=_[X],q=b[X],d.validate(ne,$)?q!==ne&&q!==+ne&&x.push(f("dynamic",A,s.concat(X),ne,q)):x.push(f("value",A,s.concat(X),ne))}else if(k.items&&!V&&v(_)){var te=N[Object.keys(N)[0]],J=[],ie,K;for(ie=0;ie<b.length;ie++){var ee=b[ie]._index||ie;if(K=s.slice(),K.push(ee),T(_[ee])&&T(b[ie])){J.push(ee);var le=_[ee],j=b[ie];T(le)&&le.visible!==!1&&j.visible===!1?x.push(f("invisible",A,K)):r(le,j,te,x,A,K)}}for(ie=0;ie<_.length;ie++)K=s.slice(),K.push(ie),T(_[ie])?J.indexOf(ie)===-1&&x.push(f("unused",A,K)):x.push(f("object",A,K,_[ie]))}else!T(_)&&T(b)?x.push(f("object",A,s,_)):!g(_)&&g(b)&&!V&&!O?x.push(f("array",A,s,_)):M in a?d.validate(_,k)?k.valType==="enumerated"&&(k.coerceNumber&&_!==+b||_!==b)&&x.push(f("dynamic",A,s,_,b)):x.push(f("value",A,s,_)):x.push(f("unused",A,s,_))}}return x}function t(c,a){for(var p=c.layout.layoutAttributes,x=0;x<a.length;x++){var A=a[x],P=c.traces[A.type],y=P.layoutAttributes;y&&(A.subplot?d.extendFlat(p[P.attributes.subplot.dflt],y):d.extendFlat(p,y))}return p}var o={object:function(c,a){var p;return c==="layout"&&a===""?p="The layout argument":c[0]==="data"&&a===""?p="Trace "+c[1]+" in the data argument":p=i(c)+"key "+a,p+" must be linked to an object container"},array:function(c,a){var p;return c==="data"?p="The data argument":p=i(c)+"key "+a,p+" must be linked to an array container"},schema:function(c,a){return i(c)+"key "+a+" is not part of the schema"},unused:function(c,a,p){var x=T(p)?"container":"key";return i(c)+x+" "+a+" did not get coerced"},dynamic:function(c,a,p,x){return[i(c)+"key",a,"(set to '"+p+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(c,a){return(a?i(c)+"item "+a:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,a,p){return[i(c)+"key "+a,"is set to an invalid value ("+p+")"].join(" ")}};function i(c){return v(c)?"In data trace "+c[1]+", ":"In "+c+", "}function f(c,a,p,x,A){p=p||"";var P,y;v(a)?(P=a[0],y=a[1]):(P=a,y=null);var C=w(p),M=o[c](a,C,x,A);return d.log(M),{code:c,container:P,trace:y,path:p,astr:C,msg:M}}function u(c,a){var p=h(a),x=p.keyMinusId,A=p.id;return x in c&&c[x]._isSubplotObj&&A?!0:a in c}function l(c,a){if(a in c)return c[a];var p=h(a);return c[p.keyMinusId]}var m=d.counterRegex("([a-z]+)");function h(c){var a=c.match(m);return{keyMinusId:a&&a[1],id:a&&a[2]}}function w(c){if(!v(c))return String(c);for(var a="",p=0;p<c.length;p++){var x=c[p];typeof x=="number"?a=a.substr(0,a.length-1)+"["+x+"]":a+=x,p<c.length-1&&(a+=".")}return a}},85656:function(U){U.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(U,F,e){var d=e(3400),S=e(31780);U.exports=function(E,T,v){var g=v.name,r=v.inclusionAttr||"visible",t=T[g],o=d.isArrayOrTypedArray(E[g])?E[g]:[],i=T[g]=[],f=S.arrayTemplater(T,g,r),u,l;for(u=0;u<o.length;u++){var m=o[u];d.isPlainObject(m)?l=f.newItem(m):(l=f.newItem({}),l[r]=!1),l._index=u,l[r]!==!1&&v.handleItemDefaults(m,l,T,v),i.push(l)}var h=f.defaultItems();for(u=0;u<h.length;u++)l=h[u],l._index=i.length,v.handleItemDefaults({},l,T,v,{}),i.push(l);if(d.isArrayOrTypedArray(t)){var w=Math.min(t.length,i.length);for(u=0;u<w;u++)d.relinkPrivateKeys(i[u],t[u])}return i}},45464:function(U,F,e){var d=e(25376),S=e(55756);U.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:d({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:S.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(U,F,e){var d=e(38248),S=e(3400),n=S.dateTime2ms,E=S.incrementMonth,T=e(39032),v=T.ONEAVGMONTH;U.exports=function(r,t,o,i){if(t.type!=="date")return{vals:i};var f=r[o+"periodalignment"];if(!f)return{vals:i};var u=r[o+"period"],l;if(d(u)){if(u=+u,u<=0)return{vals:i}}else if(typeof u=="string"&&u.charAt(0)==="M"){var m=+u.substring(1);if(m>0&&Math.round(m)===m)l=m;else return{vals:i}}for(var h=t.calendar,w=f==="start",c=f==="end",a=r[o+"period0"],p=n(a,h)||0,x=[],A=[],P=[],y=i.length,C=0;C<y;C++){var M=i[C],s,_,b;if(l){for(s=Math.round((M-p)/(l*v)),b=E(p,l*s,h);b>M;)b=E(b,-l,h);for(;b<=M;)b=E(b,l,h);_=E(b,-l,h)}else{for(s=Math.round((M-p)/u),b=p+s*u;b>M;)b-=u;for(;b<=M;)b+=u;_=b-u}x[C]=w?_:c?b:(_+b)/2,A[C]=_,P[C]=b}return{vals:x,starts:A,ends:P}}},26720:function(U){U.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(U,F,e){var d=e(33428),S=e(38248),n=e(3400),E=e(39032).FP_SAFE,T=e(24040),v=e(43616),g=e(79811),r=g.getFromId,t=g.isLinked;U.exports={applyAutorangeOptions:s,getAutoRange:o,makePadFn:f,doAutoRange:h,findExtremes:w,concatExtremes:m};function o(_,b){var k,D,V=[],O=_._fullLayout,N=f(O,b,0),B=f(O,b,1),z=m(_,b),H=z.min,X=z.max;if(H.length===0||X.length===0)return n.simpleMap(b.range,b.r2l);var $=H[0].val,ne=X[0].val;for(k=1;k<H.length&&$===ne;k++)$=Math.min($,H[k].val);for(k=1;k<X.length&&$===ne;k++)ne=Math.max(ne,X[k].val);var q=b.autorange,ue=q==="reversed"||q==="min reversed"||q==="max reversed";if(!ue&&b.range){var te=n.simpleMap(b.range,b.r2l);ue=te[1]<te[0]}b.autorange==="reversed"&&(b.autorange=!0);var J=b.rangemode,ie=J==="tozero",K=J==="nonnegative",ee=b._length,le=ee/10,j=0,Z,fe,re,ce,xe,Te;for(k=0;k<H.length;k++)for(Z=H[k],D=0;D<X.length;D++)fe=X[D],Te=fe.val-Z.val-i(b,Z.val,fe.val),Te>0&&(xe=ee-N(Z)-B(fe),xe>le?Te/xe>j&&(re=Z,ce=fe,j=Te/xe):Te/ee>j&&(re={val:Z.val,nopad:1},ce={val:fe.val,nopad:1},j=Te/ee));function we(ze,Ce){return Math.max(ze,B(Ce))}if($===ne){var _e=$-1,ke=$+1;if(ie)if($===0)V=[0,1];else{var Ne=($>0?X:H).reduce(we,0),Ee=$/(1-Math.min(.5,Ne/ee));V=$>0?[0,Ee]:[Ee,0]}else K?V=[Math.max(0,_e),Math.max(1,ke)]:V=[_e,ke]}else ie?(re.val>=0&&(re={val:0,nopad:1}),ce.val<=0&&(ce={val:0,nopad:1})):K&&(re.val-j*N(re)<0&&(re={val:0,nopad:1}),ce.val<=0&&(ce={val:1,nopad:1})),j=(ce.val-re.val-i(b,Z.val,fe.val))/(ee-N(re)-B(ce)),V=[re.val-j*N(re),ce.val+j*B(ce)];return V=s(V,b),b.limitRange&&b.limitRange(),ue&&V.reverse(),n.simpleMap(V,b.l2r||Number)}function i(_,b,k){var D=0;if(_.rangebreaks)for(var V=_.locateBreaks(b,k),O=0;O<V.length;O++){var N=V[O];D+=N.max-N.min}return D}function f(_,b,k){var D=.05*b._length,V=b._anchorAxis||{};if((b.ticklabelposition||"").indexOf("inside")!==-1||(V.ticklabelposition||"").indexOf("inside")!==-1){var O=b.isReversed();if(!O){var N=n.simpleMap(b.range,b.r2l);O=N[1]<N[0]}O&&(k=!k)}var B=0;return t(_,b._id)||(B=l(_,b,k)),D=Math.max(B,D),b.constrain==="domain"&&b._inputDomain&&(D*=(b._inputDomain[1]-b._inputDomain[0])/(b.domain[1]-b.domain[0])),function(H){return H.nopad?0:H.pad+(H.extrapad?D:B)}}var u=3;function l(_,b,k){var D=0,V=b._id.charAt(0)==="x";for(var O in _._plots){var N=_._plots[O];if(!(b._id!==N.xaxis._id&&b._id!==N.yaxis._id)){var B=(V?N.yaxis:N.xaxis)||{};if((B.ticklabelposition||"").indexOf("inside")!==-1&&(!k&&(B.side==="left"||B.side==="bottom")||k&&(B.side==="top"||B.side==="right"))){if(B._vals){var z=n.deg2rad(B._tickAngles[B._id+"tick"]||0),H=Math.abs(Math.cos(z)),X=Math.abs(Math.sin(z));if(!B._vals[0].bb){var $=B._id+"tick",ne=B._selections[$];ne.each(function(K){var ee=d.select(this),le=ee.select(".text-math-group");le.empty()&&(K.bb=v.bBox(ee.node()))})}for(var q=0;q<B._vals.length;q++){var ue=B._vals[q],te=ue.bb;if(te){var J=2*u+te.width,ie=2*u+te.height;D=Math.max(D,V?Math.max(J*H,ie*X):Math.max(ie*H,J*X))}}}B.ticks==="inside"&&B.ticklabelposition==="inside"&&(D+=B.ticklen||0)}}}return D}function m(_,b,k){var D=b._id,V=_._fullData,O=_._fullLayout,N=[],B=[],z,H,X;function $(J,ie){for(z=0;z<ie.length;z++){var K=J[ie[z]],ee=(K._extremes||{})[D];if(K.visible===!0&&ee){for(H=0;H<ee.min.length;H++)X=ee.min[H],c(N,X.val,X.pad,{extrapad:X.extrapad});for(H=0;H<ee.max.length;H++)X=ee.max[H],a(B,X.val,X.pad,{extrapad:X.extrapad})}}}if($(V,b._traceIndices),$(O.annotations||[],b._annIndices||[]),$(O.shapes||[],b._shapeIndices||[]),b._matchGroup&&!k){for(var ne in b._matchGroup)if(ne!==b._id){var q=r(_,ne),ue=m(_,q,!0),te=b._length/q._length;for(H=0;H<ue.min.length;H++)X=ue.min[H],c(N,X.val,X.pad*te,{extrapad:X.extrapad});for(H=0;H<ue.max.length;H++)X=ue.max[H],a(B,X.val,X.pad*te,{extrapad:X.extrapad})}}return{min:N,max:B}}function h(_,b,k){if(b.setScale(),b.autorange){b.range=k?k.slice():o(_,b),b._r=b.range.slice(),b._rl=n.simpleMap(b._r,b.r2l);var D=b._input,V={};V[b._attr+".range"]=b.range,V[b._attr+".autorange"]=b.autorange,T.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,V),D.range=b.range.slice(),D.autorange=b.autorange}var O=b._anchorAxis;if(O&&O.rangeslider){var N=O.rangeslider[b._name];N&&N.rangemode==="auto"&&(N.range=o(_,b)),O._input.rangeslider[b._name]=n.extendFlat({},N)}}function w(_,b,k){k||(k={}),_._m||_.setScale();var D=[],V=[],O=b.length,N=k.padded||!1,B=k.tozero&&(_.type==="linear"||_.type==="-"),z=_.type==="log",H=!1,X=k.vpadLinearized||!1,$,ne,q,ue,te,J,ie,K,ee;function le(we){if(Array.isArray(we))return H=!0,function(ke){return Math.max(Number(we[ke]||0),0)};var _e=Math.max(Number(we||0),0);return function(){return _e}}var j=le((_._m>0?k.ppadplus:k.ppadminus)||k.ppad||0),Z=le((_._m>0?k.ppadminus:k.ppadplus)||k.ppad||0),fe=le(k.vpadplus||k.vpad),re=le(k.vpadminus||k.vpad);if(!H){if(K=1/0,ee=-1/0,z)for($=0;$<O;$++)ne=b[$],ne<K&&ne>0&&(K=ne),ne>ee&&ne<E&&(ee=ne);else for($=0;$<O;$++)ne=b[$],ne<K&&ne>-E&&(K=ne),ne>ee&&ne<E&&(ee=ne);b=[K,ee],O=2}var ce={tozero:B,extrapad:N};function xe(we){q=b[we],S(q)&&(J=j(we),ie=Z(we),X?(ue=_.c2l(q)-re(we),te=_.c2l(q)+fe(we)):(K=q-re(we),ee=q+fe(we),z&&K<ee/10&&(K=ee/10),ue=_.c2l(K),te=_.c2l(ee)),B&&(ue=Math.min(0,ue),te=Math.max(0,te)),x(ue)&&c(D,ue,ie,ce),x(te)&&a(V,te,J,ce))}var Te=Math.min(6,O);for($=0;$<Te;$++)xe($);for($=O-1;$>=Te;$--)xe($);return{min:D,max:V,opts:k}}function c(_,b,k,D){p(_,b,k,D,A)}function a(_,b,k,D){p(_,b,k,D,P)}function p(_,b,k,D,V){for(var O=D.tozero,N=D.extrapad,B=!0,z=0;z<_.length&&B;z++){var H=_[z];if(V(H.val,b)&&H.pad>=k&&(H.extrapad||!N)){B=!1;break}else V(b,H.val)&&H.pad<=k&&(N||!H.extrapad)&&(_.splice(z,1),z--)}if(B){var X=O&&b===0;_.push({val:b,pad:X?0:k,extrapad:X?!1:N})}}function x(_){return S(_)&&Math.abs(_)<E}function A(_,b){return _<=b}function P(_,b){return _>=b}function y(_,b){var k=b.autorangeoptions;return k&&k.minallowed!==void 0&&M(b,k.minallowed,k.maxallowed)?k.minallowed:k&&k.clipmin!==void 0&&M(b,k.clipmin,k.clipmax)?Math.max(_,b.d2l(k.clipmin)):_}function C(_,b){var k=b.autorangeoptions;return k&&k.maxallowed!==void 0&&M(b,k.minallowed,k.maxallowed)?k.maxallowed:k&&k.clipmax!==void 0&&M(b,k.clipmin,k.clipmax)?Math.min(_,b.d2l(k.clipmax)):_}function M(_,b,k){return b!==void 0&&k!==void 0?(b=_.d2l(b),k=_.d2l(k),b<k):!0}function s(_,b){if(!b||!b.autorangeoptions)return _;var k=_[0],D=_[1],V=b.autorangeoptions.include;if(V!==void 0){var O=b.d2l(k),N=b.d2l(D);n.isArrayOrTypedArray(V)||(V=[V]);for(var B=0;B<V.length;B++){var z=b.d2l(V[B]);O>=z&&(O=z,k=z),N<=z&&(N=z,D=z)}}return k=y(k,b),D=C(D,b),[k,D]}},76808:function(U){U.exports=function(e,d,S){var n,E;if(S){var T=d==="reversed"||d==="min reversed"||d==="max reversed";n=S[T?1:0],E=S[T?0:1]}var v=e("autorangeoptions.minallowed",E===null?n:void 0),g=e("autorangeoptions.maxallowed",n===null?E:void 0);v===void 0&&e("autorangeoptions.clipmin"),g===void 0&&e("autorangeoptions.clipmax"),e("autorangeoptions.include")}},54460:function(U,F,e){var d=e(33428),S=e(38248),n=e(7316),E=e(24040),T=e(3400),v=T.strTranslate,g=e(72736),r=e(81668),t=e(76308),o=e(43616),i=e(94724),f=e(98728),u=e(39032),l=u.ONEMAXYEAR,m=u.ONEAVGYEAR,h=u.ONEMINYEAR,w=u.ONEMAXQUARTER,c=u.ONEAVGQUARTER,a=u.ONEMINQUARTER,p=u.ONEMAXMONTH,x=u.ONEAVGMONTH,A=u.ONEMINMONTH,P=u.ONEWEEK,y=u.ONEDAY,C=y/2,M=u.ONEHOUR,s=u.ONEMIN,_=u.ONESEC,b=u.MINUS_SIGN,k=u.BADNUM,D={K:"zeroline"},V={K:"gridline",L:"path"},O={K:"minor-gridline",L:"path"},N={K:"tick",L:"path"},B={K:"tick",L:"text"},z={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},H=e(84284),X=H.MID_SHIFT,$=H.CAP_SHIFT,ne=H.LINE_SPACING,q=H.OPPOSITE_SIDE,ue=3,te=U.exports={};te.setConvert=e(78344);var J=e(52976),ie=e(79811),K=ie.idSort,ee=ie.isLinked;te.id2name=ie.id2name,te.name2id=ie.name2id,te.cleanId=ie.cleanId,te.list=ie.list,te.listIds=ie.listIds,te.getFromId=ie.getFromId,te.getFromTrace=ie.getFromTrace;var le=e(19280);te.getAutoRange=le.getAutoRange,te.findExtremes=le.findExtremes;var j=1e-4;function Z(Xe){var He=(Xe[1]-Xe[0])*j;return[Xe[0]-He,Xe[1]+He]}te.coerceRef=function(Xe,He,zt,Rt,Jt,sr){var ur=Rt.charAt(Rt.length-1),er=zt._fullLayout._subplots[ur+"axis"],Ft=Rt+"ref",ir={};return Jt||(Jt=er[0]||(typeof sr=="string"?sr:sr[0])),sr||(sr=Jt),er=er.concat(er.map(function(hr){return hr+" domain"})),ir[Ft]={valType:"enumerated",values:er.concat(sr?typeof sr=="string"?[sr]:sr:[]),dflt:Jt},T.coerce(Xe,He,ir,Ft)},te.getRefType=function(Xe){return Xe===void 0?Xe:Xe==="paper"?"paper":Xe==="pixel"?"pixel":/( domain)$/.test(Xe)?"domain":"range"},te.coercePosition=function(Xe,He,zt,Rt,Jt,sr){var ur,er,Ft=te.getRefType(Rt);if(Ft!=="range")ur=T.ensureNumber,er=zt(Jt,sr);else{var ir=te.getFromId(He,Rt);sr=ir.fraction2r(sr),er=zt(Jt,sr),ur=ir.cleanPos}Xe[Jt]=ur(er)},te.cleanPosition=function(Xe,He,zt){var Rt=zt==="paper"||zt==="pixel"?T.ensureNumber:te.getFromId(He,zt).cleanPos;return Rt(Xe)},te.redrawComponents=function(Xe,He){He=He||te.listIds(Xe);var zt=Xe._fullLayout;function Rt(Jt,sr,ur,er){for(var Ft=E.getComponentMethod(Jt,sr),ir={},hr=0;hr<He.length;hr++)for(var xr=zt[te.id2name(He[hr])],vr=xr[ur],Vr=0;Vr<vr.length;Vr++){var _r=vr[Vr];if(!ir[_r]&&(Ft(Xe,_r),ir[_r]=1,er))return}}Rt("annotations","drawOne","_annIndices"),Rt("shapes","drawOne","_shapeIndices"),Rt("images","draw","_imgIndices",!0),Rt("selections","drawOne","_selectionIndices")};var fe=te.getDataConversions=function(Xe,He,zt,Rt){var Jt,sr=zt==="x"||zt==="y"||zt==="z"?zt:Rt;if(T.isArrayOrTypedArray(sr)){if(Jt={type:J(Rt,void 0,{autotypenumbers:Xe._fullLayout.autotypenumbers}),_categories:[]},te.setConvert(Jt),Jt.type==="category")for(var ur=0;ur<Rt.length;ur++)Jt.d2c(Rt[ur])}else Jt=te.getFromTrace(Xe,He,sr);return Jt?{d2c:Jt.d2c,c2d:Jt.c2d}:sr==="ids"?{d2c:ce,c2d:ce}:{d2c:re,c2d:re}};function re(Xe){return+Xe}function ce(Xe){return String(Xe)}te.getDataToCoordFunc=function(Xe,He,zt,Rt){return fe(Xe,He,zt,Rt).d2c},te.counterLetter=function(Xe){var He=Xe.charAt(0);if(He==="x")return"y";if(He==="y")return"x"},te.minDtick=function(Xe,He,zt,Rt){["log","category","multicategory"].indexOf(Xe.type)!==-1||!Rt?Xe._minDtick=0:Xe._minDtick===void 0?(Xe._minDtick=He,Xe._forceTick0=zt):Xe._minDtick&&((Xe._minDtick/He+1e-6)%1<2e-6&&((zt-Xe._forceTick0)/He%1+1.000001)%1<2e-6?(Xe._minDtick=He,Xe._forceTick0=zt):((He/Xe._minDtick+1e-6)%1>2e-6||((zt-Xe._forceTick0)/Xe._minDtick%1+1.000001)%1>2e-6)&&(Xe._minDtick=0))},te.saveRangeInitial=function(Xe,He){for(var zt=te.list(Xe,"",!0),Rt=!1,Jt=0;Jt<zt.length;Jt++){var sr=zt[Jt],ur=sr._rangeInitial0===void 0&&sr._rangeInitial1===void 0,er=ur||sr.range[0]!==sr._rangeInitial0||sr.range[1]!==sr._rangeInitial1,Ft=sr.autorange;(ur&&Ft!==!0||He&&er)&&(sr._rangeInitial0=Ft==="min"||Ft==="max reversed"?void 0:sr.range[0],sr._rangeInitial1=Ft==="max"||Ft==="min reversed"?void 0:sr.range[1],sr._autorangeInitial=Ft,Rt=!0)}return Rt},te.saveShowSpikeInitial=function(Xe,He){for(var zt=te.list(Xe,"",!0),Rt=!1,Jt="on",sr=0;sr<zt.length;sr++){var ur=zt[sr],er=ur._showSpikeInitial===void 0,Ft=er||ur.showspikes!==ur._showspikes;(er||He&&Ft)&&(ur._showSpikeInitial=ur.showspikes,Rt=!0),Jt==="on"&&!ur.showspikes&&(Jt="off")}return Xe._fullLayout._cartesianSpikesEnabled=Jt,Rt},te.autoBin=function(Xe,He,zt,Rt,Jt,sr){var ur=T.aggNums(Math.min,null,Xe),er=T.aggNums(Math.max,null,Xe);if(He.type==="category"||He.type==="multicategory")return{start:ur-.5,end:er+.5,size:Math.max(1,Math.round(sr)||1),_dataSpan:er-ur};Jt||(Jt=He.calendar);var Ft;if(He.type==="log"?Ft={type:"linear",range:[ur,er]}:Ft={type:He.type,range:T.simpleMap([ur,er],He.c2r,0,Jt),calendar:Jt},te.setConvert(Ft),sr=sr&&f.dtick(sr,Ft.type),sr)Ft.dtick=sr,Ft.tick0=f.tick0(void 0,Ft.type,Jt);else{var ir;if(zt)ir=(er-ur)/zt;else{var hr=T.distinctVals(Xe),xr=Math.pow(10,Math.floor(Math.log(hr.minDiff)/Math.LN10)),vr=xr*T.roundUp(hr.minDiff/xr,[.9,1.9,4.9,9.9],!0);ir=Math.max(vr,2*T.stdev(Xe)/Math.pow(Xe.length,Rt?.25:.4)),S(ir)||(ir=1)}te.autoTicks(Ft,ir)}var Vr=Ft.dtick,_r=te.tickIncrement(te.tickFirst(Ft),Vr,"reverse",Jt),Rr,nn;if(typeof Vr=="number")_r=xe(_r,Xe,Ft,ur,er),nn=1+Math.floor((er-_r)/Vr),Rr=_r+nn*Vr;else for(Ft.dtick.charAt(0)==="M"&&(_r=Te(_r,Xe,Vr,ur,Jt)),Rr=_r,nn=0;Rr<=er;)Rr=te.tickIncrement(Rr,Vr,!1,Jt),nn++;return{start:He.c2r(_r,0,Jt),end:He.c2r(Rr,0,Jt),size:Vr,_dataSpan:er-ur}};function xe(Xe,He,zt,Rt,Jt){var sr=0,ur=0,er=0,Ft=0;function ir(Vr){return(1+(Vr-Xe)*100/zt.dtick)%100<2}for(var hr=0;hr<He.length;hr++)He[hr]%1===0?er++:S(He[hr])||Ft++,ir(He[hr])&&sr++,ir(He[hr]+zt.dtick/2)&&ur++;var xr=He.length-Ft;if(er===xr&&zt.type!=="date")zt.dtick<1?Xe=Rt-.5*zt.dtick:(Xe-=.5,Xe+zt.dtick<Rt&&(Xe+=zt.dtick));else if(ur<xr*.1&&(sr>xr*.3||ir(Rt)||ir(Jt))){var vr=zt.dtick/2;Xe+=Xe+vr<Rt?vr:-vr}return Xe}function Te(Xe,He,zt,Rt,Jt){var sr=T.findExactDates(He,Jt),ur=.8;if(sr.exactDays>ur){var er=Number(zt.substr(1));sr.exactYears>ur&&er%12===0?Xe=te.tickIncrement(Xe,"M6","reverse")+y*1.5:sr.exactMonths>ur?Xe=te.tickIncrement(Xe,"M1","reverse")+y*15.5:Xe-=C;var Ft=te.tickIncrement(Xe,zt);if(Ft<=Rt)return Ft}return Xe}te.prepMinorTicks=function(Xe,He,zt){if(!He.minor.dtick){delete Xe.dtick;var Rt=He.dtick&&S(He._tmin),Jt;if(Rt){var sr=te.tickIncrement(He._tmin,He.dtick,!0);Jt=[He._tmin,sr*.99+He._tmin*.01]}else{var ur=T.simpleMap(He.range,He.r2l);Jt=[ur[0],.8*ur[0]+.2*ur[1]]}if(Xe.range=T.simpleMap(Jt,He.l2r),Xe._isMinor=!0,te.prepTicks(Xe,zt),Rt){var er=S(He.dtick),Ft=S(Xe.dtick),ir=er?He.dtick:+He.dtick.substring(1),hr=Ft?Xe.dtick:+Xe.dtick.substring(1);er&&Ft?we(ir,hr)?ir===2*P&&hr===2*y&&(Xe.dtick=P):ir===2*P&&hr===3*y?Xe.dtick=P:ir===P&&!(He._input.minor||{}).nticks?Xe.dtick=y:_e(ir/hr,2.5)?Xe.dtick=ir/2:Xe.dtick=ir:String(He.dtick).charAt(0)==="M"?Ft?Xe.dtick="M1":we(ir,hr)?ir>=12&&hr===2&&(Xe.dtick="M3"):Xe.dtick=He.dtick:String(Xe.dtick).charAt(0)==="L"?String(He.dtick).charAt(0)==="L"?we(ir,hr)||(Xe.dtick=_e(ir/hr,2.5)?He.dtick/2:He.dtick):Xe.dtick="D1":Xe.dtick==="D2"&&+He.dtick>1&&(Xe.dtick=1)}Xe.range=He.range}He.minor._tick0Init===void 0&&(Xe.tick0=He.tick0)};function we(Xe,He){return Math.abs((Xe/He+.5)%1-.5)<.001}function _e(Xe,He){return Math.abs(Xe/He-1)<.001}te.prepTicks=function(Xe,He){var zt=T.simpleMap(Xe.range,Xe.r2l,void 0,void 0,He);if(Xe.tickmode==="auto"||!Xe.dtick){var Rt=Xe.nticks,Jt;Rt||(Xe.type==="category"||Xe.type==="multicategory"?(Jt=Xe.tickfont?T.bigFont(Xe.tickfont.size||12):15,Rt=Xe._length/Jt):(Jt=Xe._id.charAt(0)==="y"?40:80,Rt=T.constrain(Xe._length/Jt,4,9)+1),Xe._name==="radialaxis"&&(Rt*=2)),Xe.minor&&Xe.minor.tickmode!=="array"||Xe.tickmode==="array"&&(Rt*=100),Xe._roughDTick=Math.abs(zt[1]-zt[0])/Rt,te.autoTicks(Xe,Xe._roughDTick),Xe._minDtick>0&&Xe.dtick<Xe._minDtick*2&&(Xe.dtick=Xe._minDtick,Xe.tick0=Xe.l2r(Xe._forceTick0))}Xe.ticklabelmode==="period"&&Ne(Xe),Xe.tick0||(Xe.tick0=Xe.type==="date"?"2000-01-01":0),Xe.type==="date"&&Xe.dtick<.1&&(Xe.dtick=.1),pt(Xe)};function ke(Xe){return+Xe.substring(1)}function Ne(Xe){var He;function zt(){return!(S(Xe.dtick)||Xe.dtick.charAt(0)!=="M")}var Rt=zt(),Jt=te.getTickFormat(Xe);if(Jt){var sr=Xe._dtickInit!==Xe.dtick;/%[fLQsSMX]/.test(Jt)||(/%[HI]/.test(Jt)?(He=M,sr&&!Rt&&Xe.dtick<M&&(Xe.dtick=M)):/%p/.test(Jt)?(He=C,sr&&!Rt&&Xe.dtick<C&&(Xe.dtick=C)):/%[Aadejuwx]/.test(Jt)?(He=y,sr&&!Rt&&Xe.dtick<y&&(Xe.dtick=y)):/%[UVW]/.test(Jt)?(He=P,sr&&!Rt&&Xe.dtick<P&&(Xe.dtick=P)):/%[Bbm]/.test(Jt)?(He=x,sr&&(Rt?ke(Xe.dtick)<1:Xe.dtick<A)&&(Xe.dtick="M1")):/%[q]/.test(Jt)?(He=c,sr&&(Rt?ke(Xe.dtick)<3:Xe.dtick<a)&&(Xe.dtick="M3")):/%[Yy]/.test(Jt)&&(He=m,sr&&(Rt?ke(Xe.dtick)<12:Xe.dtick<h)&&(Xe.dtick="M12")))}Rt=zt(),Rt&&Xe.tick0===Xe._dowTick0&&(Xe.tick0=Xe._rawTick0),Xe._definedDelta=He}function Ee(Xe,He,zt){for(var Rt=0;Rt<Xe.length;Rt++){var Jt=Xe[Rt].value,sr=Rt,ur=Rt+1;Rt<Xe.length-1?(sr=Rt,ur=Rt+1):Rt>0?(sr=Rt-1,ur=Rt):(sr=Rt,ur=Rt);var er=Xe[sr].value,Ft=Xe[ur].value,ir=Math.abs(Ft-er),hr=zt||ir,xr=0;hr>=h?ir>=h&&ir<=l?xr=ir:xr=m:zt===c&&hr>=a?ir>=a&&ir<=w?xr=ir:xr=c:hr>=A?ir>=A&&ir<=p?xr=ir:xr=x:zt===P&&hr>=P?xr=P:hr>=y?xr=y:zt===C&&hr>=C?xr=C:zt===M&&hr>=M&&(xr=M);var vr;xr>=ir&&(xr=ir,vr=!0);var Vr=Jt+xr;if(He.rangebreaks&&xr>0){for(var _r=84,Rr=0,nn=0;nn<_r;nn++){var en=(nn+.5)/_r;He.maskBreaks(Jt*(1-en)+en*Vr)!==k&&Rr++}xr*=Rr/_r,xr||(Xe[Rt].drop=!0),vr&&ir>P&&(xr=ir)}(xr>0||Rt===0)&&(Xe[Rt].periodX=Jt+xr/2)}}te.calcTicks=function(He,zt){for(var Rt=He.type,Jt=He.calendar,sr=He.ticklabelstep,ur=He.ticklabelmode==="period",er=T.simpleMap(He.range,He.r2l,void 0,void 0,zt),Ft=er[1]<er[0],ir=Math.min(er[0],er[1]),hr=Math.max(er[0],er[1]),xr=Math.max(1e3,He._length||0),vr=[],Vr=[],_r=[],Rr=[],nn=He.minor&&(He.minor.ticks||He.minor.showgrid),en=1;en>=(nn?0:1);en--){var An=!en;en?(He._dtickInit=He.dtick,He._tick0Init=He.tick0):(He.minor._dtickInit=He.minor.dtick,He.minor._tick0Init=He.minor.tick0);var wn=en?He:T.extendFlat({},He,He.minor);if(An?te.prepMinorTicks(wn,He,zt):te.prepTicks(wn,zt),wn.tickmode==="array"){en?(_r=[],vr=Oe(He,!An)):(Rr=[],Vr=Oe(He,!An));continue}if(wn.tickmode==="sync"){_r=[],vr=Ce(He);continue}var Tr=Z(er),kr=Tr[0],Wr=Tr[1],zr=S(wn.dtick),sn=Rt==="log"&&!(zr||wn.dtick.charAt(0)==="L"),un=te.tickFirst(wn,zt);if(en){if(He._tmin=un,un<kr!==Ft)break;(Rt==="category"||Rt==="multicategory")&&(Wr=Ft?Math.max(-.5,Wr):Math.min(He._categories.length-.5,Wr))}var Mn=null,Ln=un,Un;if(en){var ai;zr?ai=He.dtick:Rt==="date"?typeof He.dtick=="string"&&He.dtick.charAt(0)==="M"&&(ai=x*He.dtick.substring(1)):ai=He._roughDTick,Un=Math.round((He.r2l(Ln)-He.r2l(He.tick0))/ai)-1}var yi=wn.dtick;for(wn.rangebreaks&&wn._tick0Init!==wn.tick0&&(Ln=Nt(Ln,He),Ft||(Ln=te.tickIncrement(Ln,yi,!Ft,Jt))),en&&ur&&(Ln=te.tickIncrement(Ln,yi,!Ft,Jt),Un--);Ft?Ln>=Wr:Ln<=Wr;Ln=te.tickIncrement(Ln,yi,Ft,Jt)){if(en&&Un++,wn.rangebreaks&&!Ft){if(Ln<kr)continue;if(wn.maskBreaks(Ln)===k&&Nt(Ln,wn)>=hr)break}if(_r.length>xr||Ln===Mn)break;Mn=Ln;var bi={value:Ln};en?(sn&&Ln!==(Ln|0)&&(bi.simpleLabel=!0),sr>1&&Un%sr&&(bi.skipLabel=!0),_r.push(bi)):(bi.minor=!0,Rr.push(bi))}}if(nn){var Hn=He.minor.ticks==="inside"&&He.ticks==="outside"||He.minor.ticks==="outside"&&He.ticks==="inside";if(!Hn){for(var Kn=_r.map(function(pn){return pn.value}),yr=[],qr=0;qr<Rr.length;qr++){var Kr=Rr[qr],hn=Kr.value;if(Kn.indexOf(hn)===-1){for(var zn=!1,xn=0;!zn&&xn<_r.length;xn++)1e7+_r[xn].value===1e7+hn&&(zn=!0);zn||yr.push(Kr)}}Rr=yr}}ur&&Ee(_r,He,He._definedDelta);var Tn;if(He.rangebreaks){var On=He._id.charAt(0)==="y",Jn=1;He.tickmode==="auto"&&(Jn=He.tickfont?He.tickfont.size:12);var hi=NaN;for(Tn=_r.length-1;Tn>-1;Tn--){if(_r[Tn].drop){_r.splice(Tn,1);continue}_r[Tn].value=Nt(_r[Tn].value,He);var Ri=He.c2p(_r[Tn].value);(On?hi>Ri-Jn:hi<Ri+Jn)?_r.splice(Ft?Tn+1:Tn,1):hi=Ri}}Bt(He)&&Math.abs(er[1]-er[0])===360&&_r.pop(),He._tmax=(_r[_r.length-1]||{}).value,He._prevDateHead="",He._inCalcTicks=!0;var Er,Or=function(pn){pn.text="",He._prevDateHead=Er};_r=_r.concat(Rr);var Ar,Fr;for(Tn=0;Tn<_r.length;Tn++){var yn=_r[Tn].minor,Pn=_r[Tn].value;yn?Vr.push({x:Pn,minor:!0}):(Er=He._prevDateHead,Ar=te.tickText(He,Pn,!1,_r[Tn].simpleLabel),Fr=_r[Tn].periodX,Fr!==void 0&&(Ar.periodX=Fr,(Fr>hr||Fr<ir)&&(Fr>hr&&(Ar.periodX=hr),Fr<ir&&(Ar.periodX=ir),Or(Ar))),_r[Tn].skipLabel&&Or(Ar),vr.push(Ar))}return vr=vr.concat(Vr),He._inCalcTicks=!1,ur&&vr.length&&(vr[0].noTick=!0),vr};function ze(Xe,He){return Xe.rangebreaks&&(He=He.filter(function(zt){return Xe.maskBreaks(zt.x)!==k})),He}function Ce(Xe){var He=Xe._mainAxis,zt=[];if(He._vals){for(var Rt=0;Rt<He._vals.length;Rt++)if(!He._vals[Rt].noTick){var Jt=He.l2p(He._vals[Rt].x),sr=Xe.p2l(Jt),ur=te.tickText(Xe,sr);He._vals[Rt].minor&&(ur.minor=!0,ur.text=""),zt.push(ur)}}return zt=ze(Xe,zt),zt}function Oe(Xe,He){var zt=T.simpleMap(Xe.range,Xe.r2l),Rt=Z(zt),Jt=Math.min(Rt[0],Rt[1]),sr=Math.max(Rt[0],Rt[1]),ur=Xe.type==="category"?Xe.d2l_noadd:Xe.d2l;Xe.type==="log"&&String(Xe.dtick).charAt(0)!=="L"&&(Xe.dtick="L"+Math.pow(10,Math.floor(Math.min(Xe.range[0],Xe.range[1]))-1));for(var er=[],Ft=0;Ft<=1;Ft++)if(!(He!==void 0&&(He&&Ft||He===!1&&!Ft))&&!(Ft&&!Xe.minor)){var ir=Ft?Xe.minor.tickvals:Xe.tickvals,hr=Ft?[]:Xe.ticktext;if(ir){T.isArrayOrTypedArray(hr)||(hr=[]);for(var xr=0;xr<ir.length;xr++){var vr=ur(ir[xr]);if(vr>Jt&&vr<sr){var Vr=te.tickText(Xe,vr,!1,String(hr[xr]));Ft&&(Vr.minor=!0,Vr.text=""),er.push(Vr)}}}}return er=ze(Xe,er),er}var Le=[2,5,10],Ge=[1,2,3,6,12],rt=[1,2,5,10,15,30],ot=[1,2,3,7,14],$e=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],qe=[-.301,0,.301,.699,1],ht=[15,30,45,90,180];function vt(Xe,He,zt){return He*T.roundUp(Xe/He,zt)}te.autoTicks=function(Xe,He,zt){var Rt;function Jt(xr){return Math.pow(xr,Math.floor(Math.log(He)/Math.LN10))}if(Xe.type==="date"){Xe.tick0=T.dateTick0(Xe.calendar,0);var sr=2*He;if(sr>m)He/=m,Rt=Jt(10),Xe.dtick="M"+12*vt(He,Rt,Le);else if(sr>x)He/=x,Xe.dtick="M"+vt(He,1,Ge);else if(sr>y){if(Xe.dtick=vt(He,y,Xe._hasDayOfWeekBreaks?[1,2,7,14]:ot),!zt){var ur=te.getTickFormat(Xe),er=Xe.ticklabelmode==="period";er&&(Xe._rawTick0=Xe.tick0),/%[uVW]/.test(ur)?Xe.tick0=T.dateTick0(Xe.calendar,2):Xe.tick0=T.dateTick0(Xe.calendar,1),er&&(Xe._dowTick0=Xe.tick0)}}else sr>M?Xe.dtick=vt(He,M,Ge):sr>s?Xe.dtick=vt(He,s,rt):sr>_?Xe.dtick=vt(He,_,rt):(Rt=Jt(10),Xe.dtick=vt(He,Rt,Le))}else if(Xe.type==="log"){Xe.tick0=0;var Ft=T.simpleMap(Xe.range,Xe.r2l);if(Xe._isMinor&&(He*=1.5),He>.7)Xe.dtick=Math.ceil(He);else if(Math.abs(Ft[1]-Ft[0])<1){var ir=1.5*Math.abs((Ft[1]-Ft[0])/He);He=Math.abs(Math.pow(10,Ft[1])-Math.pow(10,Ft[0]))/ir,Rt=Jt(10),Xe.dtick="L"+vt(He,Rt,Le)}else Xe.dtick=He>.3?"D2":"D1"}else Xe.type==="category"||Xe.type==="multicategory"?(Xe.tick0=0,Xe.dtick=Math.ceil(Math.max(He,1))):Bt(Xe)?(Xe.tick0=0,Rt=1,Xe.dtick=vt(He,Rt,ht)):(Xe.tick0=0,Rt=Jt(10),Xe.dtick=vt(He,Rt,Le));if(Xe.dtick===0&&(Xe.dtick=1),!S(Xe.dtick)&&typeof Xe.dtick!="string"){var hr=Xe.dtick;throw Xe.dtick=1,"ax.dtick error: "+String(hr)}};function pt(Xe){var He=Xe.dtick;if(Xe._tickexponent=0,!S(He)&&typeof He!="string"&&(He=1),(Xe.type==="category"||Xe.type==="multicategory")&&(Xe._tickround=null),Xe.type==="date"){var zt=Xe.r2l(Xe.tick0),Rt=Xe.l2r(zt).replace(/(^-|i)/g,""),Jt=Rt.length;if(String(He).charAt(0)==="M")Jt>10||Rt.substr(5)!=="01-01"?Xe._tickround="d":Xe._tickround=+He.substr(1)%12===0?"y":"m";else if(He>=y&&Jt<=10||He>=y*15)Xe._tickround="d";else if(He>=s&&Jt<=16||He>=M)Xe._tickround="M";else if(He>=_&&Jt<=19||He>=s)Xe._tickround="S";else{var sr=Xe.l2r(zt+He).replace(/^-/,"").length;Xe._tickround=Math.max(Jt,sr)-20,Xe._tickround<0&&(Xe._tickround=4)}}else if(S(He)||He.charAt(0)==="L"){var ur=Xe.range.map(Xe.r2d||Number);S(He)||(He=Number(He.substr(1))),Xe._tickround=2-Math.floor(Math.log(He)/Math.LN10+.01);var er=Math.max(Math.abs(ur[0]),Math.abs(ur[1])),Ft=Math.floor(Math.log(er)/Math.LN10+.01),ir=Xe.minexponent===void 0?3:Xe.minexponent;Math.abs(Ft)>ir&&(je(Xe.exponentformat)&&!Re(Ft)?Xe._tickexponent=3*Math.round((Ft-1)/3):Xe._tickexponent=Ft)}else Xe._tickround=null}te.tickIncrement=function(Xe,He,zt,Rt){var Jt=zt?-1:1;if(S(He))return T.increment(Xe,Jt*He);var sr=He.charAt(0),ur=Jt*Number(He.substr(1));if(sr==="M")return T.incrementMonth(Xe,ur,Rt);if(sr==="L")return Math.log(Math.pow(10,Xe)+ur)/Math.LN10;if(sr==="D"){var er=He==="D2"?qe:$e,Ft=Xe+Jt*.01,ir=T.roundUp(T.mod(Ft,1),er,zt);return Math.floor(Ft)+Math.log(d.round(Math.pow(10,ir),1))/Math.LN10}throw"unrecognized dtick "+String(He)},te.tickFirst=function(Xe,He){var zt=Xe.r2l||Number,Rt=T.simpleMap(Xe.range,zt,void 0,void 0,He),Jt=Rt[1]<Rt[0],sr=Jt?Math.floor:Math.ceil,ur=Z(Rt)[0],er=Xe.dtick,Ft=zt(Xe.tick0);if(S(er)){var ir=sr((ur-Ft)/er)*er+Ft;return(Xe.type==="category"||Xe.type==="multicategory")&&(ir=T.constrain(ir,0,Xe._categories.length-1)),ir}var hr=er.charAt(0),xr=Number(er.substr(1));if(hr==="M"){for(var vr=0,Vr=Ft,_r,Rr,nn;vr<10;){if(_r=te.tickIncrement(Vr,er,Jt,Xe.calendar),(_r-ur)*(Vr-ur)<=0)return Jt?Math.min(Vr,_r):Math.max(Vr,_r);Rr=(ur-(Vr+_r)/2)/(_r-Vr),nn=hr+(Math.abs(Math.round(Rr))||1)*xr,Vr=te.tickIncrement(Vr,nn,Rr<0?!Jt:Jt,Xe.calendar),vr++}return T.error("tickFirst did not converge",Xe),Vr}else{if(hr==="L")return Math.log(sr((Math.pow(10,ur)-Ft)/xr)*xr+Ft)/Math.LN10;if(hr==="D"){var en=er==="D2"?qe:$e,An=T.roundUp(T.mod(ur,1),en,Jt);return Math.floor(ur)+Math.log(d.round(Math.pow(10,An),1))/Math.LN10}else throw"unrecognized dtick "+String(er)}},te.tickText=function(Xe,He,zt,Rt){var Jt=wt(Xe,He),sr=Xe.tickmode==="array",ur=zt||sr,er=Xe.type,Ft=er==="category"?Xe.d2l_noadd:Xe.d2l,ir,hr=function(nn){var en=Xe.l2p(nn);return en>=0&&en<=Xe._length?nn:null};if(sr&&T.isArrayOrTypedArray(Xe.ticktext)){var xr=T.simpleMap(Xe.range,Xe.r2l),vr=(Math.abs(xr[1]-xr[0])-(Xe._lBreaks||0))/1e4;for(ir=0;ir<Xe.ticktext.length&&!(Math.abs(He-Ft(Xe.tickvals[ir]))<vr);ir++);if(ir<Xe.ticktext.length)return Jt.text=String(Xe.ticktext[ir]),Jt.xbnd=[hr(Jt.x-.5),hr(Jt.x+Xe.dtick-.5)],Jt}function Vr(nn){if(nn===void 0)return!0;if(zt)return nn==="none";var en={first:Xe._tmin,last:Xe._tmax}[nn];return nn!=="all"&&He!==en}var _r=zt?"never":Xe.exponentformat!=="none"&&Vr(Xe.showexponent)?"hide":"";if(er==="date"?Et(Xe,Jt,zt,ur):er==="log"?nt(Xe,Jt,zt,ur,_r):er==="category"?Fe(Xe,Jt):er==="multicategory"?We(Xe,Jt,zt):Bt(Xe)?Ye(Xe,Jt,zt,ur,_r):Ze(Xe,Jt,zt,ur,_r),Rt||(Xe.tickprefix&&!Vr(Xe.showtickprefix)&&(Jt.text=Xe.tickprefix+Jt.text),Xe.ticksuffix&&!Vr(Xe.showticksuffix)&&(Jt.text+=Xe.ticksuffix)),Xe.labelalias&&Xe.labelalias.hasOwnProperty(Jt.text)){var Rr=Xe.labelalias[Jt.text];typeof Rr=="string"&&(Jt.text=Rr)}return(Xe.tickson==="boundaries"||Xe.showdividers)&&(Jt.xbnd=[hr(Jt.x-.5),hr(Jt.x+Xe.dtick-.5)]),Jt},te.hoverLabelText=function(Xe,He,zt){zt&&(Xe=T.extendFlat({},Xe,{hoverformat:zt}));var Rt=T.isArrayOrTypedArray(He)?He[0]:He,Jt=T.isArrayOrTypedArray(He)?He[1]:void 0;if(Jt!==void 0&&Jt!==Rt)return te.hoverLabelText(Xe,Rt,zt)+" - "+te.hoverLabelText(Xe,Jt,zt);var sr=Xe.type==="log"&&Rt<=0,ur=te.tickText(Xe,Xe.c2l(sr?-Rt:Rt),"hover").text;return sr?Rt===0?"0":b+ur:ur};function wt(Xe,He,zt){var Rt=Xe.tickfont||{};return{x:He,dx:0,dy:0,text:zt||"",fontSize:Rt.size,font:Rt.family,fontWeight:Rt.weight,fontStyle:Rt.style,fontVariant:Rt.variant,fontTextcase:Rt.textcase,fontLineposition:Rt.lineposition,fontShadow:Rt.shadow,fontColor:Rt.color}}function Et(Xe,He,zt,Rt){var Jt=Xe._tickround,sr=zt&&Xe.hoverformat||te.getTickFormat(Xe);Rt=!sr&&Rt,Rt&&(S(Jt)?Jt=4:Jt={y:"m",m:"d",d:"M",M:"S",S:4}[Jt]);var ur=T.formatDate(He.x,sr,Jt,Xe._dateFormat,Xe.calendar,Xe._extraFormat),er,Ft=ur.indexOf(`
`);if(Ft!==-1&&(er=ur.substr(Ft+1),ur=ur.substr(0,Ft)),Rt&&(er!==void 0&&(ur==="00:00:00"||ur==="00:00")?(ur=er,er=""):ur.length===8&&(ur=ur.replace(/:00$/,""))),er)if(zt)Jt==="d"?ur+=", "+er:ur=er+(ur?", "+ur:"");else if(!Xe._inCalcTicks||Xe._prevDateHead!==er)Xe._prevDateHead=er,ur+="<br>"+er;else{var ir=Kt(Xe),hr=Xe._trueSide||Xe.side;(!ir&&hr==="top"||ir&&hr==="bottom")&&(ur+="<br> ")}He.text=ur}function nt(Xe,He,zt,Rt,Jt){var sr=Xe.dtick,ur=He.x,er=Xe.tickformat,Ft=typeof sr=="string"&&sr.charAt(0);if(Jt==="never"&&(Jt=""),Rt&&Ft!=="L"&&(sr="L3",Ft="L"),er||Ft==="L")He.text=pe(Math.pow(10,ur),Xe,Jt,Rt);else if(S(sr)||Ft==="D"&&T.mod(ur+.01,1)<.1){var ir=Math.round(ur),hr=Math.abs(ir),xr=Xe.exponentformat;xr==="power"||je(xr)&&Re(ir)?(ir===0?He.text=1:ir===1?He.text="10":He.text="10<sup>"+(ir>1?"":b)+hr+"</sup>",He.fontSize*=1.25):(xr==="e"||xr==="E")&&hr>2?He.text="1"+xr+(ir>0?"+":b)+hr:(He.text=pe(Math.pow(10,ur),Xe,"","fakehover"),sr==="D1"&&Xe._id.charAt(0)==="y"&&(He.dy-=He.fontSize/6))}else if(Ft==="D")He.text=String(Math.round(Math.pow(10,T.mod(ur,1)))),He.fontSize*=.75;else throw"unrecognized dtick "+String(sr);if(Xe.dtick==="D1"){var vr=String(He.text).charAt(0);(vr==="0"||vr==="1")&&(Xe._id.charAt(0)==="y"?He.dx-=He.fontSize/4:(He.dy+=He.fontSize/2,He.dx+=(Xe.range[1]>Xe.range[0]?1:-1)*He.fontSize*(ur<0?.5:.25)))}}function Fe(Xe,He){var zt=Xe._categories[Math.round(He.x)];zt===void 0&&(zt=""),He.text=String(zt)}function We(Xe,He,zt){var Rt=Math.round(He.x),Jt=Xe._categories[Rt]||[],sr=Jt[1]===void 0?"":String(Jt[1]),ur=Jt[0]===void 0?"":String(Jt[0]);zt?He.text=ur+" - "+sr:(He.text=sr,He.text2=ur)}function Ze(Xe,He,zt,Rt,Jt){Jt==="never"?Jt="":Xe.showexponent==="all"&&Math.abs(He.x/Xe.dtick)<1e-6&&(Jt="hide"),He.text=pe(He.x,Xe,Jt,Rt)}function Ye(Xe,He,zt,Rt,Jt){if(Xe.thetaunit==="radians"&&!zt){var sr=He.x/180;if(sr===0)He.text="0";else{var ur=Ie(sr);if(ur[1]>=100)He.text=pe(T.deg2rad(He.x),Xe,Jt,Rt);else{var er=He.x<0;ur[1]===1?ur[0]===1?He.text="":He.text=ur[0]+"":He.text=["<sup>",ur[0],"</sup>","","<sub>",ur[1],"</sub>",""].join(""),er&&(He.text=b+He.text)}}}else He.text=pe(He.x,Xe,Jt,Rt)}function Ie(Xe){function He(er,Ft){return Math.abs(er-Ft)<=1e-6}function zt(er,Ft){return He(Ft,0)?er:zt(Ft,er%Ft)}function Rt(er){for(var Ft=1;!He(Math.round(er*Ft)/Ft,er);)Ft*=10;return Ft}var Jt=Rt(Xe),sr=Xe*Jt,ur=Math.abs(zt(sr,Jt));return[Math.round(sr/ur),Math.round(Jt/ur)]}var De=["f","p","n","","m","","k","M","G","T"];function je(Xe){return Xe==="SI"||Xe==="B"}function Re(Xe){return Xe>14||Xe<-15}function pe(Xe,He,zt,Rt){var Jt=Xe<0,sr=He._tickround,ur=zt||He.exponentformat||"B",er=He._tickexponent,Ft=te.getTickFormat(He),ir=He.separatethousands;if(Rt){var hr={exponentformat:ur,minexponent:He.minexponent,dtick:He.showexponent==="none"?He.dtick:S(Xe)&&Math.abs(Xe)||1,range:He.showexponent==="none"?He.range.map(He.r2d):[0,Xe||1]};pt(hr),sr=(Number(hr._tickround)||0)+4,er=hr._tickexponent,He.hoverformat&&(Ft=He.hoverformat)}if(Ft)return He._numFormat(Ft)(Xe).replace(/-/g,b);var xr=Math.pow(10,-sr)/2;if(ur==="none"&&(er=0),Xe=Math.abs(Xe),Xe<xr)Xe="0",Jt=!1;else{if(Xe+=xr,er&&(Xe*=Math.pow(10,-er),sr+=er),sr===0)Xe=String(Math.floor(Xe));else if(sr<0){Xe=String(Math.round(Xe)),Xe=Xe.substr(0,Xe.length+sr);for(var vr=sr;vr<0;vr++)Xe+="0"}else{Xe=String(Xe);var Vr=Xe.indexOf(".")+1;Vr&&(Xe=Xe.substr(0,Vr+sr).replace(/\.?0+$/,""))}Xe=T.numSeparate(Xe,He._separators,ir)}if(er&&ur!=="hide"){je(ur)&&Re(er)&&(ur="power");var _r;er<0?_r=b+-er:ur!=="power"?_r="+"+er:_r=String(er),ur==="e"||ur==="E"?Xe+=ur+_r:ur==="power"?Xe+="10<sup>"+_r+"</sup>":ur==="B"&&er===9?Xe+="B":je(ur)&&(Xe+=De[er/3+5])}return Jt?b+Xe:Xe}te.getTickFormat=function(Xe){var He;function zt(Ft){return typeof Ft!="string"?Ft:Number(Ft.replace("M",""))*x}function Rt(Ft,ir){var hr=["L","D"];if(typeof Ft==typeof ir){if(typeof Ft=="number")return Ft-ir;var xr=hr.indexOf(Ft.charAt(0)),vr=hr.indexOf(ir.charAt(0));return xr===vr?Number(Ft.replace(/(L|D)/g,""))-Number(ir.replace(/(L|D)/g,"")):xr-vr}else return typeof Ft=="number"?1:-1}function Jt(Ft,ir,hr){var xr=hr||function(_r){return _r},vr=ir[0],Vr=ir[1];return(!vr&&typeof vr!="number"||xr(vr)<=xr(Ft))&&(!Vr&&typeof Vr!="number"||xr(Vr)>=xr(Ft))}function sr(Ft,ir){var hr=ir[0]===null,xr=ir[1]===null,vr=Rt(Ft,ir[0])>=0,Vr=Rt(Ft,ir[1])<=0;return(hr||vr)&&(xr||Vr)}var ur,er;if(Xe.tickformatstops&&Xe.tickformatstops.length>0)switch(Xe.type){case"date":case"linear":{for(He=0;He<Xe.tickformatstops.length;He++)if(er=Xe.tickformatstops[He],er.enabled&&Jt(Xe.dtick,er.dtickrange,zt)){ur=er;break}break}case"log":{for(He=0;He<Xe.tickformatstops.length;He++)if(er=Xe.tickformatstops[He],er.enabled&&sr(Xe.dtick,er.dtickrange)){ur=er;break}break}}return ur?ur.value:Xe.tickformat},te.getSubplots=function(Xe,He){var zt=Xe._fullLayout._subplots,Rt=zt.cartesian.concat(zt.gl2d||[]),Jt=He?te.findSubplotsWithAxis(Rt,He):Rt;return Jt.sort(function(sr,ur){var er=sr.substr(1).split("y"),Ft=ur.substr(1).split("y");return er[0]===Ft[0]?+er[1]-+Ft[1]:+er[0]-+Ft[0]}),Jt},te.findSubplotsWithAxis=function(Xe,He){for(var zt=new RegExp(He._id.charAt(0)==="x"?"^"+He._id+"y":He._id+"$"),Rt=[],Jt=0;Jt<Xe.length;Jt++){var sr=Xe[Jt];zt.test(sr)&&Rt.push(sr)}return Rt},te.makeClipPaths=function(Xe){var He=Xe._fullLayout;if(!He._hasOnlyLargeSploms){var zt={_offset:0,_length:He.width,_id:""},Rt={_offset:0,_length:He.height,_id:""},Jt=te.list(Xe,"x",!0),sr=te.list(Xe,"y",!0),ur=[],er,Ft;for(er=0;er<Jt.length;er++)for(ur.push({x:Jt[er],y:Rt}),Ft=0;Ft<sr.length;Ft++)er===0&&ur.push({x:zt,y:sr[Ft]}),ur.push({x:Jt[er],y:sr[Ft]});var ir=He._clips.selectAll(".axesclip").data(ur,function(hr){return hr.x._id+hr.y._id});ir.enter().append("clipPath").classed("axesclip",!0).attr("id",function(hr){return"clip"+He._uid+hr.x._id+hr.y._id}).append("rect"),ir.exit().remove(),ir.each(function(hr){d.select(this).select("rect").attr({x:hr.x._offset||0,y:hr.y._offset||0,width:hr.x._length||1,height:hr.y._length||1})})}},te.draw=function(Xe,He,zt){var Rt=Xe._fullLayout;He==="redraw"&&Rt._paper.selectAll("g.subplot").each(function(Ft){var ir=Ft[0],hr=Rt._plots[ir];if(hr){var xr=hr.xaxis,vr=hr.yaxis;hr.xaxislayer.selectAll("."+xr._id+"tick").remove(),hr.yaxislayer.selectAll("."+vr._id+"tick").remove(),hr.xaxislayer.selectAll("."+xr._id+"tick2").remove(),hr.yaxislayer.selectAll("."+vr._id+"tick2").remove(),hr.xaxislayer.selectAll("."+xr._id+"divider").remove(),hr.yaxislayer.selectAll("."+vr._id+"divider").remove(),hr.minorGridlayer&&hr.minorGridlayer.selectAll("path").remove(),hr.gridlayer&&hr.gridlayer.selectAll("path").remove(),hr.zerolinelayer&&hr.zerolinelayer.selectAll("path").remove(),Rt._infolayer.select(".g-"+xr._id+"title").remove(),Rt._infolayer.select(".g-"+vr._id+"title").remove()}});var Jt=!He||He==="redraw"?te.listIds(Xe):He,sr=te.list(Xe),ur=sr.filter(function(Ft){return Ft.autoshift}).map(function(Ft){return Ft.overlaying});Jt.map(function(Ft){var ir=te.getFromId(Xe,Ft);if(ir.tickmode==="sync"&&ir.overlaying){var hr=Jt.findIndex(function(xr){return xr===ir.overlaying});hr>=0&&Jt.unshift(Jt.splice(hr,1).shift())}});var er={false:{left:0,right:0}};return T.syncOrAsync(Jt.map(function(Ft){return function(){if(Ft){var ir=te.getFromId(Xe,Ft);zt||(zt={}),zt.axShifts=er,zt.overlayingShiftedAx=ur;var hr=te.drawOne(Xe,ir,zt);return ir._shiftPusher&&cr(ir,ir._fullDepth||0,er,!0),ir._r=ir.range.slice(),ir._rl=T.simpleMap(ir._r,ir.r2l),hr}}}))},te.drawOne=function(Xe,He,zt){zt=zt||{};var Rt=zt.axShifts||{},Jt=zt.overlayingShiftedAx||[],sr,ur,er;He.setScale();var Ft=Xe._fullLayout,ir=He._id,hr=ir.charAt(0),xr=te.counterLetter(ir),vr=Ft._plots[He._mainSubplot];if(!vr)return;if(He._shiftPusher=He.autoshift||Jt.indexOf(He._id)!==-1||Jt.indexOf(He.overlaying)!==-1,He._shiftPusher&He.anchor==="free"){var Vr=He.linewidth/2||0;He.ticks==="inside"&&(Vr+=He.ticklen),cr(He,Vr,Rt,!0),cr(He,He.shift||0,Rt,!1)}(zt.skipTitle!==!0||He._shift===void 0)&&(He._shift=dr(He,Rt));var _r=vr[hr+"axislayer"],Rr=He._mainLinePosition,nn=Rr+=He._shift,en=He._mainMirrorPosition,An=He._vals=te.calcTicks(He),wn=[He.mirror,nn,en].join("_");for(sr=0;sr<An.length;sr++)An[sr].axInfo=wn;He._selections={},He._tickAngles&&(He._prevTickAngles=He._tickAngles),He._tickAngles={},He._depth=null;var Tr={};function kr(Hr){var $r=ir+(Hr||"tick");return Tr[$r]||(Tr[$r]=lt(He,$r,nn)),Tr[$r]}if(He.visible){var Wr=te.makeTransTickFn(He),zr=te.makeTransTickLabelFn(He),sn,un,Mn=He.ticks==="inside",Ln=He.ticks==="outside";if(He.tickson==="boundaries"){var Un=Ue(He,An);un=te.clipEnds(He,Un),sn=Mn?un:Un}else un=te.clipEnds(He,An),sn=Mn&&He.ticklabelmode!=="period"?un:An;var ai=He._gridVals=un,yi=st(He,An);if(!Ft._hasOnlyLargeSploms){var bi=He._subplotsWith,Hn={};for(sr=0;sr<bi.length;sr++){ur=bi[sr],er=Ft._plots[ur];var Kn=er[xr+"axis"],yr=Kn._mainAxis._id;if(!Hn[yr]){Hn[yr]=1;var qr=hr==="x"?"M0,"+Kn._offset+"v"+Kn._length:"M"+Kn._offset+",0h"+Kn._length;te.drawGrid(Xe,He,{vals:ai,counterAxis:Kn,layer:er.gridlayer.select("."+ir),minorLayer:er.minorGridlayer.select("."+ir),path:qr,transFn:Wr}),te.drawZeroLine(Xe,He,{counterAxis:Kn,layer:er.zerolinelayer,path:qr,transFn:Wr})}}}var Kr,hn=te.getTickSigns(He),zn=te.getTickSigns(He,"minor");if(He.ticks||He.minor&&He.minor.ticks){var xn=te.makeTickPath(He,nn,hn[2]),Tn=te.makeTickPath(He,nn,zn[2],{minor:!0}),On,Jn,hi,Ri;if(He._anchorAxis&&He.mirror&&He.mirror!==!0?(On=te.makeTickPath(He,en,hn[3]),Jn=te.makeTickPath(He,en,zn[3],{minor:!0}),hi=xn+On,Ri=Tn+Jn):(On="",Jn="",hi=xn,Ri=Tn),He.showdividers&&Ln&&He.tickson==="boundaries"){var Er={};for(sr=0;sr<yi.length;sr++)Er[yi[sr].x]=1;Kr=function(Hr){return Er[Hr.x]?On:hi}}else Kr=function(Hr){return Hr.minor?Ri:hi}}if(te.drawTicks(Xe,He,{vals:sn,layer:_r,path:Kr,transFn:Wr}),He.mirror==="allticks"){var Or=Object.keys(He._linepositions||{});for(sr=0;sr<Or.length;sr++){ur=Or[sr],er=Ft._plots[ur];var Ar=He._linepositions[ur]||[],Fr=Ar[0],yn=Ar[1],Pn=Ar[2],pn=te.makeTickPath(He,Fr,Pn?hn[0]:zn[0],{minor:Pn})+te.makeTickPath(He,yn,Pn?hn[1]:zn[1],{minor:Pn});te.drawTicks(Xe,He,{vals:sn,layer:er[hr+"axislayer"],path:pn,transFn:Wr})}}var ln=[];if(ln.push(function(){return te.drawLabels(Xe,He,{vals:An,layer:_r,plotinfo:er,transFn:zr,labelFns:te.makeLabelFns(He,nn)})}),He.type==="multicategory"){var Sr={x:2,y:10}[hr];ln.push(function(){var Hr={x:"height",y:"width"}[hr],$r=kr()[Hr]+Sr+(He._tickAngles[ir+"tick"]?He.tickfont.size*ne:0);return te.drawLabels(Xe,He,{vals:et(He,An),layer:_r,cls:ir+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Wr,labelFns:te.makeLabelFns(He,nn+$r*hn[4])})}),ln.push(function(){return He._depth=hn[4]*(kr("tick2")[He.side]-nn),It(Xe,He,{vals:yi,layer:_r,path:te.makeTickPath(He,nn,hn[4],{len:He._depth}),transFn:Wr})})}else He.title.hasOwnProperty("standoff")&&ln.push(function(){He._depth=hn[4]*(kr()[He.side]-nn)});var Zr=E.getComponentMethod("rangeslider","isVisible")(He);return!zt.skipTitle&&!(Zr&&He.side==="bottom")&&ln.push(function(){return gr(Xe,He)}),ln.push(function(){var Hr=He.side.charAt(0),$r=q[He.side].charAt(0),bn=te.getPxPosition(Xe,He),kn=Ln?He.ticklen:0,En,Nn,Fn,vi;(He.automargin||Zr||He._shiftPusher)&&(He.type==="multicategory"?En=kr("tick2"):(En=kr(),hr==="x"&&Hr==="b"&&(He._depth=Math.max(En.width>0?En.bottom-bn:0,kn))));var si=0,gi=0;if(He._shiftPusher&&(si=Math.max(kn,En.height>0?Hr==="l"?bn-En.left:En.right-bn:0),He.title.text!==Ft._dfltTitle[hr]&&(gi=(He._titleStandoff||0)+(He._titleScoot||0),Hr==="l"&&(gi+=Xt(He))),He._fullDepth=Math.max(si,gi)),He.automargin){Nn={x:0,y:0,r:0,l:0,t:0,b:0};var Li=[0,1],ma=typeof He._shift=="number"?He._shift:0;if(hr==="x"){if(Hr==="b"?Nn[Hr]=He._depth:(Nn[Hr]=He._depth=Math.max(En.width>0?bn-En.top:0,kn),Li.reverse()),En.width>0){var ia=En.right-(He._offset+He._length);ia>0&&(Nn.xr=1,Nn.r=ia);var Wo=He._offset-En.left;Wo>0&&(Nn.xl=0,Nn.l=Wo)}}else if(Hr==="l"?(He._depth=Math.max(En.height>0?bn-En.left:0,kn),Nn[Hr]=He._depth-ma):(He._depth=Math.max(En.height>0?En.right-bn:0,kn),Nn[Hr]=He._depth+ma,Li.reverse()),En.height>0){var Fo=En.bottom-(He._offset+He._length);Fo>0&&(Nn.yb=0,Nn.b=Fo);var ho=He._offset-En.top;ho>0&&(Nn.yt=1,Nn.t=ho)}Nn[xr]=He.anchor==="free"?He.position:He._anchorAxis.domain[Li[0]],He.title.text!==Ft._dfltTitle[hr]&&(Nn[Hr]+=Xt(He)+(He.title.standoff||0)),He.mirror&&He.anchor!=="free"&&(Fn={x:0,y:0,r:0,l:0,t:0,b:0},Fn[$r]=He.linewidth,He.mirror&&He.mirror!==!0&&(Fn[$r]+=kn),He.mirror===!0||He.mirror==="ticks"?Fn[xr]=He._anchorAxis.domain[Li[1]]:(He.mirror==="all"||He.mirror==="allticks")&&(Fn[xr]=[He._counterDomainMin,He._counterDomainMax][Li[1]]))}Zr&&(vi=E.getComponentMethod("rangeslider","autoMarginOpts")(Xe,He)),typeof He.automargin=="string"&&(be(Nn,He.automargin),be(Fn,He.automargin)),n.autoMargin(Xe,or(He),Nn),n.autoMargin(Xe,mt(He),Fn),n.autoMargin(Xe,ut(He),vi)}),T.syncOrAsync(ln)}};function be(Xe,He){if(Xe){var zt=Object.keys(z).reduce(function(Rt,Jt){return He.indexOf(Jt)!==-1&&z[Jt].forEach(function(sr){Rt[sr]=1}),Rt},{});Object.keys(Xe).forEach(function(Rt){zt[Rt]||(Rt.length===1?Xe[Rt]=0:delete Xe[Rt])})}}function Ue(Xe,He){var zt=[],Rt,Jt=function(sr,ur){var er=sr.xbnd[ur];er!==null&&zt.push(T.extendFlat({},sr,{x:er}))};if(He.length){for(Rt=0;Rt<He.length;Rt++)Jt(He[Rt],0);Jt(He[Rt-1],1)}return zt}function et(Xe,He){for(var zt=[],Rt={},Jt=0;Jt<He.length;Jt++){var sr=He[Jt];Rt[sr.text2]?Rt[sr.text2].push(sr.x):Rt[sr.text2]=[sr.x]}for(var ur in Rt)zt.push(wt(Xe,T.interp(Rt[ur],.5),ur));return zt}function st(Xe,He){var zt=[],Rt,Jt,sr=He.length&&He[He.length-1].x<He[0].x,ur=function(Ft,ir){var hr=Ft.xbnd[ir];hr!==null&&zt.push(T.extendFlat({},Ft,{x:hr}))};if(Xe.showdividers&&He.length){for(Rt=0;Rt<He.length;Rt++){var er=He[Rt];er.text2!==Jt&&ur(er,sr?1:0),Jt=er.text2}ur(He[Rt-1],sr?0:1)}return zt}function lt(Xe,He,zt){var Rt,Jt,sr,ur;if(Xe._selections[He].size())Rt=1/0,Jt=-1/0,sr=1/0,ur=-1/0,Xe._selections[He].each(function(){var Ft=mr(this),ir=o.bBox(Ft.node().parentNode);Rt=Math.min(Rt,ir.top),Jt=Math.max(Jt,ir.bottom),sr=Math.min(sr,ir.left),ur=Math.max(ur,ir.right)});else{var er=te.makeLabelFns(Xe,zt);Rt=Jt=er.yFn({dx:0,dy:0,fontSize:0}),sr=ur=er.xFn({dx:0,dy:0,fontSize:0})}return{top:Rt,bottom:Jt,left:sr,right:ur,height:Jt-Rt,width:ur-sr}}te.getTickSigns=function(Xe,He){var zt=Xe._id.charAt(0),Rt={x:"top",y:"right"}[zt],Jt=Xe.side===Rt?1:-1,sr=[-1,1,Jt,-Jt],ur=He?(Xe.minor||{}).ticks:Xe.ticks;return ur!=="inside"==(zt==="x")&&(sr=sr.map(function(er){return-er})),Xe.side&&sr.push({l:-1,t:-1,r:1,b:1}[Xe.side.charAt(0)]),sr},te.makeTransTickFn=function(Xe){return Xe._id.charAt(0)==="x"?function(He){return v(Xe._offset+Xe.l2p(He.x),0)}:function(He){return v(0,Xe._offset+Xe.l2p(He.x))}},te.makeTransTickLabelFn=function(Xe){var He=Zt(Xe),zt=He[0],Rt=He[1];return Xe._id.charAt(0)==="x"?function(Jt){return v(zt+Xe._offset+Xe.l2p(Gt(Jt)),Rt)}:function(Jt){return v(Rt,zt+Xe._offset+Xe.l2p(Gt(Jt)))}};function Gt(Xe){return Xe.periodX!==void 0?Xe.periodX:Xe.x}function Zt(Xe){var He=Xe.ticklabelposition||"",zt=function(Vr){return He.indexOf(Vr)!==-1},Rt=zt("top"),Jt=zt("left"),sr=zt("right"),ur=zt("bottom"),er=zt("inside"),Ft=ur||Jt||Rt||sr;if(!Ft&&!er)return[0,0];var ir=Xe.side,hr=Ft?(Xe.tickwidth||0)/2:0,xr=ue,vr=Xe.tickfont?Xe.tickfont.size:12;return(ur||Rt)&&(hr+=vr*$,xr+=(Xe.linewidth||0)/2),(Jt||sr)&&(hr+=(Xe.linewidth||0)/2,xr+=ue),er&&ir==="top"&&(xr-=vr*(1-$)),(Jt||Rt)&&(hr=-hr),(ir==="bottom"||ir==="right")&&(xr=-xr),[Ft?hr:0,er?xr:0]}te.makeTickPath=function(Xe,He,zt,Rt){Rt||(Rt={});var Jt=Rt.minor;if(Jt&&!Xe.minor)return"";var sr=Rt.len!==void 0?Rt.len:Jt?Xe.minor.ticklen:Xe.ticklen,ur=Xe._id.charAt(0),er=(Xe.linewidth||1)/2;return ur==="x"?"M0,"+(He+er*zt)+"v"+sr*zt:"M"+(He+er*zt)+",0h"+sr*zt},te.makeLabelFns=function(Xe,He,zt){var Rt=Xe.ticklabelposition||"",Jt=function(Un){return Rt.indexOf(Un)!==-1},sr=Jt("top"),ur=Jt("left"),er=Jt("right"),Ft=Jt("bottom"),ir=Ft||ur||sr||er,hr=Jt("inside"),xr=Rt==="inside"&&Xe.ticks==="inside"||!hr&&Xe.ticks==="outside"&&Xe.tickson!=="boundaries",vr=0,Vr=0,_r=xr?Xe.ticklen:0;if(hr?_r*=-1:ir&&(_r=0),xr&&(vr+=_r,zt)){var Rr=T.deg2rad(zt);vr=_r*Math.cos(Rr)+1,Vr=_r*Math.sin(Rr)}Xe.showticklabels&&(xr||Xe.showline)&&(vr+=.2*Xe.tickfont.size),vr+=(Xe.linewidth||1)/2*(hr?-1:1);var nn={labelStandoff:vr,labelShift:Vr},en,An,wn,Tr,kr=0,Wr=Xe.side,zr=Xe._id.charAt(0),sn=Xe.tickangle,un;if(zr==="x")un=!hr&&Wr==="bottom"||hr&&Wr==="top",Tr=un?1:-1,hr&&(Tr*=-1),en=Vr*Tr,An=He+vr*Tr,wn=un?1:-.2,Math.abs(sn)===90&&(hr?wn+=X:sn===-90&&Wr==="bottom"?wn=$:sn===90&&Wr==="top"?wn=X:wn=.5,kr=X/2*(sn/90)),nn.xFn=function(Un){return Un.dx+en+kr*Un.fontSize},nn.yFn=function(Un){return Un.dy+An+Un.fontSize*wn},nn.anchorFn=function(Un,ai){if(ir){if(ur)return"end";if(er)return"start"}return!S(ai)||ai===0||ai===180?"middle":ai*Tr<0!==hr?"end":"start"},nn.heightFn=function(Un,ai,yi){return ai<-60||ai>60?-.5*yi:Xe.side==="top"!==hr?-yi:0};else if(zr==="y"){if(un=!hr&&Wr==="left"||hr&&Wr==="right",Tr=un?1:-1,hr&&(Tr*=-1),en=vr,An=Vr*Tr,wn=0,!hr&&Math.abs(sn)===90&&(sn===-90&&Wr==="left"||sn===90&&Wr==="right"?wn=$:wn=.5),hr){var Mn=S(sn)?+sn:0;if(Mn!==0){var Ln=T.deg2rad(Mn);kr=Math.abs(Math.sin(Ln))*$*Tr,wn=0}}nn.xFn=function(Un){return Un.dx+He-(en+Un.fontSize*wn)*Tr+kr*Un.fontSize},nn.yFn=function(Un){return Un.dy+An+Un.fontSize*X},nn.anchorFn=function(Un,ai){return S(ai)&&Math.abs(ai)===90?"middle":un?"end":"start"},nn.heightFn=function(Un,ai,yi){return Xe.side==="right"&&(ai*=-1),ai<-30?-yi:ai<30?-.5*yi:0}}return nn};function Tt(Xe){return[Xe.text,Xe.x,Xe.axInfo,Xe.font,Xe.fontSize,Xe.fontColor].join("_")}te.drawTicks=function(Xe,He,zt){zt=zt||{};var Rt=He._id+"tick",Jt=[].concat(He.minor&&He.minor.ticks?zt.vals.filter(function(ur){return ur.minor&&!ur.noTick}):[]).concat(He.ticks?zt.vals.filter(function(ur){return!ur.minor&&!ur.noTick}):[]),sr=zt.layer.selectAll("path."+Rt).data(Jt,Tt);sr.exit().remove(),sr.enter().append("path").classed(Rt,1).classed("ticks",1).classed("crisp",zt.crisp!==!1).each(function(ur){return t.stroke(d.select(this),ur.minor?He.minor.tickcolor:He.tickcolor)}).style("stroke-width",function(ur){return o.crispRound(Xe,ur.minor?He.minor.tickwidth:He.tickwidth,1)+"px"}).attr("d",zt.path).style("display",null),fr(He,[N]),sr.attr("transform",zt.transFn)},te.drawGrid=function(Xe,He,zt){if(zt=zt||{},He.tickmode!=="sync"){var Rt=He._id+"grid",Jt=He.minor&&He.minor.showgrid,sr=Jt?zt.vals.filter(function(en){return en.minor}):[],ur=He.showgrid?zt.vals.filter(function(en){return!en.minor}):[],er=zt.counterAxis;if(er&&te.shouldShowZeroLine(Xe,He,er))for(var Ft=He.tickmode==="array",ir=0;ir<ur.length;ir++){var hr=ur[ir].x;if(Ft?!hr:Math.abs(hr)<He.dtick/100)if(ur=ur.slice(0,ir).concat(ur.slice(ir+1)),Ft)ir--;else break}He._gw=o.crispRound(Xe,He.gridwidth,1);for(var xr=Jt?o.crispRound(Xe,He.minor.gridwidth,1):0,vr=zt.layer,Vr=zt.minorLayer,_r=1;_r>=0;_r--){var Rr=_r?vr:Vr;if(Rr){var nn=Rr.selectAll("path."+Rt).data(_r?ur:sr,Tt);nn.exit().remove(),nn.enter().append("path").classed(Rt,1).classed("crisp",zt.crisp!==!1),nn.attr("transform",zt.transFn).attr("d",zt.path).each(function(en){return t.stroke(d.select(this),en.minor?He.minor.gridcolor:He.gridcolor||"#ddd")}).style("stroke-dasharray",function(en){return o.dashStyle(en.minor?He.minor.griddash:He.griddash,en.minor?He.minor.gridwidth:He.gridwidth)}).style("stroke-width",function(en){return(en.minor?xr:He._gw)+"px"}).style("display",null),typeof zt.path=="function"&&nn.attr("d",zt.path)}}fr(He,[V,O])}},te.drawZeroLine=function(Xe,He,zt){zt=zt||zt;var Rt=He._id+"zl",Jt=te.shouldShowZeroLine(Xe,He,zt.counterAxis),sr=zt.layer.selectAll("path."+Rt).data(Jt?[{x:0,id:He._id}]:[]);sr.exit().remove(),sr.enter().append("path").classed(Rt,1).classed("zl",1).classed("crisp",zt.crisp!==!1).each(function(){zt.layer.selectAll("path").sort(function(ur,er){return K(ur.id,er.id)})}),sr.attr("transform",zt.transFn).attr("d",zt.path).call(t.stroke,He.zerolinecolor||t.defaultLine).style("stroke-width",o.crispRound(Xe,He.zerolinewidth,He._gw||1)+"px").style("display",null),fr(He,[D])},te.drawLabels=function(Xe,He,zt){zt=zt||{};var Rt=Xe._fullLayout,Jt=He._id,sr=zt.cls||Jt+"tick",ur=zt.vals.filter(function(yr){return yr.text}),er=zt.labelFns,Ft=zt.secondary?0:He.tickangle,ir=(He._prevTickAngles||{})[sr],hr=zt.layer.selectAll("g."+sr).data(He.showticklabels?ur:[],Tt),xr=[];hr.enter().append("g").classed(sr,1).append("text").attr("text-anchor","middle").each(function(yr){var qr=d.select(this),Kr=Xe._promises.length;qr.call(g.positionText,er.xFn(yr),er.yFn(yr)).call(o.font,{family:yr.font,size:yr.fontSize,color:yr.fontColor,weight:yr.fontWeight,style:yr.fontStyle,variant:yr.fontVariant,textcase:yr.fontTextcase,lineposition:yr.fontLineposition,shadow:yr.fontShadow}).text(yr.text).call(g.convertToTspans,Xe),Xe._promises[Kr]?xr.push(Xe._promises.pop().then(function(){vr(qr,Ft)})):vr(qr,Ft)}),fr(He,[B]),hr.exit().remove(),zt.repositionOnUpdate&&hr.each(function(yr){d.select(this).select("text").call(g.positionText,er.xFn(yr),er.yFn(yr))});function vr(yr,qr){yr.each(function(Kr){var hn=d.select(this),zn=hn.select(".text-math-group"),xn=er.anchorFn(Kr,qr),Tn=zt.transFn.call(hn.node(),Kr)+(S(qr)&&+qr!=0?" rotate("+qr+","+er.xFn(Kr)+","+(er.yFn(Kr)-Kr.fontSize/2)+")":""),On=g.lineCount(hn),Jn=ne*Kr.fontSize,hi=er.heightFn(Kr,S(qr)?+qr:0,(On-1)*Jn);if(hi&&(Tn+=v(0,hi)),zn.empty()){var Ri=hn.select("text");Ri.attr({transform:Tn,"text-anchor":xn}),Ri.style("opacity",1),He._adjustTickLabelsOverflow&&He._adjustTickLabelsOverflow()}else{var Er=o.bBox(zn.node()).width,Or=Er*{end:-.5,start:.5}[xn];zn.attr("transform",Tn+v(Or,0))}})}He._adjustTickLabelsOverflow=function(){var yr=He.ticklabeloverflow;if(!(!yr||yr==="allow")){var qr=yr.indexOf("hide")!==-1,Kr=He._id.charAt(0)==="x",hn=0,zn=Kr?Xe._fullLayout.width:Xe._fullLayout.height;if(yr.indexOf("domain")!==-1){var xn=T.simpleMap(He.range,He.r2l);hn=He.l2p(xn[0])+He._offset,zn=He.l2p(xn[1])+He._offset}var Tn=Math.min(hn,zn),On=Math.max(hn,zn),Jn=He.side,hi=1/0,Ri=-1/0;hr.each(function(Fr){var yn=d.select(this),Pn=yn.select(".text-math-group");if(Pn.empty()){var pn=o.bBox(yn.node()),ln=0;Kr?(pn.right>On||pn.left<Tn)&&(ln=1):(pn.bottom>On||pn.top+(He.tickangle?0:Fr.fontSize/4)<Tn)&&(ln=1);var Sr=yn.select("text");ln?qr&&Sr.style("opacity",0):(Sr.style("opacity",1),Jn==="bottom"||Jn==="right"?hi=Math.min(hi,Kr?pn.top:pn.left):hi=-1/0,Jn==="top"||Jn==="left"?Ri=Math.max(Ri,Kr?pn.bottom:pn.right):Ri=1/0)}});for(var Er in Rt._plots){var Or=Rt._plots[Er];if(!(He._id!==Or.xaxis._id&&He._id!==Or.yaxis._id)){var Ar=Kr?Or.yaxis:Or.xaxis;Ar&&(Ar["_visibleLabelMin_"+He._id]=hi,Ar["_visibleLabelMax_"+He._id]=Ri)}}}},He._hideCounterAxisInsideTickLabels=function(yr){var qr=He._id.charAt(0)==="x",Kr=[];for(var hn in Rt._plots){var zn=Rt._plots[hn];He._id!==zn.xaxis._id&&He._id!==zn.yaxis._id||Kr.push(qr?zn.yaxis:zn.xaxis)}Kr.forEach(function(xn,Tn){xn&&Kt(xn)&&(yr||[D,O,V,N,B]).forEach(function(On){var Jn=On.K==="tick"&&On.L==="text"&&He.ticklabelmode==="period",hi=Rt._plots[He._mainSubplot],Ri;On.K===D.K?Ri=hi.zerolinelayer.selectAll("."+He._id+"zl"):On.K===O.K?Ri=hi.minorGridlayer.selectAll("."+He._id):On.K===V.K?Ri=hi.gridlayer.selectAll("."+He._id):Ri=hi[He._id.charAt(0)+"axislayer"],Ri.each(function(){var Er=d.select(this);On.L&&(Er=Er.selectAll(On.L)),Er.each(function(Or){var Ar=He.l2p(Jn?Gt(Or):Or.x)+He._offset,Fr=d.select(this);Ar<He["_visibleLabelMax_"+xn._id]&&Ar>He["_visibleLabelMin_"+xn._id]?Fr.style("display","none"):On.K==="tick"&&!Tn&&Fr.style("display",null)})})})})},vr(hr,ir+1?ir:Ft);function Vr(){return xr.length&&Promise.all(xr)}var _r=null;function Rr(){if(vr(hr,Ft),ur.length&&He.autotickangles&&(He.type!=="log"||String(He.dtick).charAt(0)!=="D")){_r=He.autotickangles[0];var yr=0,qr=[],Kr,hn=1;hr.each(function(En){yr=Math.max(yr,En.fontSize);var Nn=He.l2p(En.x),Fn=mr(this),vi=o.bBox(Fn.node());hn=Math.max(hn,g.lineCount(Fn)),qr.push({top:0,bottom:10,height:10,left:Nn-vi.width/2,right:Nn+vi.width/2+2,width:vi.width+2})});var zn=(He.tickson==="boundaries"||He.showdividers)&&!zt.secondary,xn=ur.length,Tn=Math.abs((ur[xn-1].x-ur[0].x)*He._m)/(xn-1),On=zn?Tn/2:Tn,Jn=zn?He.ticklen:yr*1.25*hn,hi=Math.sqrt(Math.pow(On,2)+Math.pow(Jn,2)),Ri=On/hi,Er=He.autotickangles.map(function(En){return En*Math.PI/180}),Or=Er.find(function(En){return Math.abs(Math.cos(En))<=Ri});Or===void 0&&(Or=Er.reduce(function(En,Nn){return Math.abs(Math.cos(En))<Math.abs(Math.cos(Nn))?En:Nn},Er[0]));var Ar=Or*(180/Math.PI);if(zn){var Fr=2;for(He.ticks&&(Fr+=He.tickwidth/2),Kr=0;Kr<qr.length;Kr++){var yn=ur[Kr].xbnd,Pn=qr[Kr];if(yn[0]!==null&&Pn.left-He.l2p(yn[0])<Fr||yn[1]!==null&&He.l2p(yn[1])-Pn.right<Fr){_r=Ar;break}}}else{var pn=He.ticklabelposition||"",ln=function(En){return pn.indexOf(En)!==-1},Sr=ln("top"),Zr=ln("left"),Hr=ln("right"),$r=ln("bottom"),bn=$r||Zr||Sr||Hr,kn=bn?(He.tickwidth||0)+2*ue:0;for(Kr=0;Kr<qr.length-1;Kr++)if(T.bBoxIntersect(qr[Kr],qr[Kr+1],kn)){_r=Ar;break}}_r&&vr(hr,_r)}}He._selections&&(He._selections[sr]=hr);var nn=[Vr];He.automargin&&Rt._redrawFromAutoMarginCount&&ir===90?(_r=ir,nn.push(function(){vr(hr,ir)})):nn.push(Rr),He._tickAngles&&nn.push(function(){He._tickAngles[sr]=_r===null?S(Ft)?Ft:0:_r});var en=function(){var yr=0,qr=0;return hr.each(function(Kr,hn){var zn=mr(this),xn=zn.select(".text-math-group");if(xn.empty()){var Tn;He._vals[hn]&&(Tn=He._vals[hn].bb||o.bBox(zn.node()),He._vals[hn].bb=Tn),yr=Math.max(yr,Tn.width),qr=Math.max(qr,Tn.height)}}),{labelsMaxW:yr,labelsMaxH:qr}},An=He._anchorAxis;if(An&&(An.autorange||An.insiderange)&&Kt(He)&&!ee(Rt,He._id)&&(Rt._insideTickLabelsUpdaterange||(Rt._insideTickLabelsUpdaterange={}),An.autorange&&(Rt._insideTickLabelsUpdaterange[An._name+".autorange"]=An.autorange,nn.push(en)),An.insiderange)){var wn=en(),Tr=He._id.charAt(0)==="y"?wn.labelsMaxW:wn.labelsMaxH;Tr+=2*ue,He.ticklabelposition==="inside"&&(Tr+=He.ticklen||0);var kr=He.side==="right"||He.side==="top"?1:-1,Wr=kr===1?1:0,zr=kr===1?0:1,sn=[];sn[zr]=An.range[zr];var un=An.range,Mn=An.r2p(un[Wr]),Ln=An.r2p(un[zr]),Un=Rt._insideTickLabelsUpdaterange[An._name+".range"];if(Un){var ai=An.r2p(Un[Wr]),yi=An.r2p(Un[zr]),bi=kr*(He._id.charAt(0)==="y"?1:-1);bi*Mn<bi*ai&&(Mn=ai,sn[Wr]=un[Wr]=Un[Wr]),bi*Ln>bi*yi&&(Ln=yi,sn[zr]=un[zr]=Un[zr])}var Hn=Math.abs(Ln-Mn);Hn-Tr>0?(Hn-=Tr,Tr*=1+Tr/Hn):Tr=0,He._id.charAt(0)!=="y"&&(Tr=-Tr),sn[Wr]=An.p2r(An.r2p(un[Wr])+kr*Tr),An.autorange==="min"||An.autorange==="max reversed"?(sn[0]=null,An._rangeInitial0=void 0,An._rangeInitial1=void 0):(An.autorange==="max"||An.autorange==="min reversed")&&(sn[1]=null,An._rangeInitial0=void 0,An._rangeInitial1=void 0),Rt._insideTickLabelsUpdaterange[An._name+".range"]=sn}var Kn=T.syncOrAsync(nn);return Kn&&Kn.then&&Xe._promises.push(Kn),Kn};function It(Xe,He,zt){var Rt=He._id+"divider",Jt=zt.vals,sr=zt.layer.selectAll("path."+Rt).data(Jt,Tt);sr.exit().remove(),sr.enter().insert("path",":first-child").classed(Rt,1).classed("crisp",1).call(t.stroke,He.dividercolor).style("stroke-width",o.crispRound(Xe,He.dividerwidth,1)+"px"),sr.attr("transform",zt.transFn).attr("d",zt.path)}te.getPxPosition=function(Xe,He){var zt=Xe._fullLayout._size,Rt=He._id.charAt(0),Jt=He.side,sr;if(He.anchor!=="free"?sr=He._anchorAxis:Rt==="x"?sr={_offset:zt.t+(1-(He.position||0))*zt.h,_length:0}:Rt==="y"&&(sr={_offset:zt.l+(He.position||0)*zt.w+He._shift,_length:0}),Jt==="top"||Jt==="left")return sr._offset;if(Jt==="bottom"||Jt==="right")return sr._offset+sr._length};function Xt(Xe){var He=Xe.title.font.size,zt=(Xe.title.text.match(g.BR_TAG_ALL)||[]).length;return Xe.title.hasOwnProperty("standoff")?He*($+zt*ne):zt?He*(zt+1)*ne:He}function gr(Xe,He){var zt=Xe._fullLayout,Rt=He._id,Jt=Rt.charAt(0),sr=He.title.font.size,ur,er=(He.title.text.match(g.BR_TAG_ALL)||[]).length;if(He.title.hasOwnProperty("standoff"))He.side==="bottom"||He.side==="right"?ur=He._depth+He.title.standoff+sr*$:(He.side==="top"||He.side==="left")&&(ur=He._depth+He.title.standoff+sr*(X+er*ne));else{var Ft=Kt(He);if(He.type==="multicategory")ur=He._depth;else{var ir=1.5*sr;Ft&&(ir=.5*sr,He.ticks==="outside"&&(ir+=He.ticklen)),ur=10+ir+(He.linewidth?He.linewidth-1:0)}Ft||(Jt==="x"?ur+=He.side==="top"?sr*(He.showticklabels?1:0):sr*(He.showticklabels?1.5:.5):ur+=He.side==="right"?sr*(He.showticklabels?1:.5):sr*(He.showticklabels?.5:0))}var hr=te.getPxPosition(Xe,He),xr,vr,Vr;Jt==="x"?(vr=He._offset+He._length/2,Vr=He.side==="top"?hr-ur:hr+ur):(Vr=He._offset+He._length/2,vr=He.side==="right"?hr+ur:hr-ur,xr={rotate:"-90",offset:0});var _r;if(He.type!=="multicategory"){var Rr=He._selections[He._id+"tick"];if(_r={selection:Rr,side:He.side},Rr&&Rr.node()&&Rr.node().parentNode){var nn=o.getTranslate(Rr.node().parentNode);_r.offsetLeft=nn.x,_r.offsetTop=nn.y}He.title.hasOwnProperty("standoff")&&(_r.pad=0)}return He._titleStandoff=ur,r.draw(Xe,Rt+"title",{propContainer:He,propName:He._name+".title.text",placeholder:zt._dfltTitle[Jt],avoid:_r,transform:xr,attributes:{x:vr,y:Vr,"text-anchor":"middle"}})}te.shouldShowZeroLine=function(Xe,He,zt){var Rt=T.simpleMap(He.range,He.r2l);return Rt[0]*Rt[1]<=0&&He.zeroline&&(He.type==="linear"||He.type==="-")&&!(He.rangebreaks&&He.maskBreaks(0)===k)&&(gt(He,0)||!jt(Xe,He,zt,Rt)||Qt(Xe,He))},te.clipEnds=function(Xe,He){return He.filter(function(zt){return gt(Xe,zt.x)})};function gt(Xe,He){var zt=Xe.l2p(He);return zt>1&&zt<Xe._length-1}function jt(Xe,He,zt,Rt){var Jt=zt._mainAxis;if(!Jt)return;var sr=Xe._fullLayout,ur=He._id.charAt(0),er=te.counterLetter(He._id),Ft=He._offset+(Math.abs(Rt[0])<Math.abs(Rt[1])==(ur==="x")?0:He._length);function ir(_r){if(!_r.showline||!_r.linewidth)return!1;var Rr=Math.max((_r.linewidth+He.zerolinewidth)/2,1);function nn(wn){return typeof wn=="number"&&Math.abs(wn-Ft)<Rr}if(nn(_r._mainLinePosition)||nn(_r._mainMirrorPosition))return!0;var en=_r._linepositions||{};for(var An in en)if(nn(en[An][0])||nn(en[An][1]))return!0}var hr=sr._plots[zt._mainSubplot];if(!(hr.mainplotinfo||hr).overlays.length)return ir(zt);for(var xr=te.list(Xe,er),vr=0;vr<xr.length;vr++){var Vr=xr[vr];if(Vr._mainAxis===Jt&&ir(Vr))return!0}}function Qt(Xe,He){for(var zt=Xe._fullData,Rt=He._mainSubplot,Jt=He._id.charAt(0),sr=0;sr<zt.length;sr++){var ur=zt[sr];if(ur.visible===!0&&ur.xaxis+ur.yaxis===Rt&&(E.traceIs(ur,"bar-like")&&ur.orientation==={x:"h",y:"v"}[Jt]||ur.fill&&ur.fill.charAt(ur.fill.length-1)===Jt))return!0}return!1}function mr(Xe){var He=d.select(Xe),zt=He.select(".text-math-group");return zt.empty()?He.select("text"):zt}te.allowAutoMargin=function(Xe){for(var He=te.list(Xe,"",!0),zt=0;zt<He.length;zt++){var Rt=He[zt];Rt.automargin&&(n.allowAutoMargin(Xe,or(Rt)),Rt.mirror&&n.allowAutoMargin(Xe,mt(Rt))),E.getComponentMethod("rangeslider","isVisible")(Rt)&&n.allowAutoMargin(Xe,ut(Rt))}};function or(Xe){return Xe._id+".automargin"}function mt(Xe){return or(Xe)+".mirror"}function ut(Xe){return Xe._id+".rangeslider"}te.swap=function(Xe,He){for(var zt=bt(Xe,He),Rt=0;Rt<zt.length;Rt++)Pt(Xe,zt[Rt].x,zt[Rt].y)};function bt(Xe,He){var zt=[],Rt,Jt;for(Rt=0;Rt<He.length;Rt++){var sr=[],ur=Xe._fullData[He[Rt]].xaxis,er=Xe._fullData[He[Rt]].yaxis;if(!(!ur||!er)){for(Jt=0;Jt<zt.length;Jt++)(zt[Jt].x.indexOf(ur)!==-1||zt[Jt].y.indexOf(er)!==-1)&&sr.push(Jt);if(!sr.length){zt.push({x:[ur],y:[er]});continue}var Ft=zt[sr[0]],ir;if(sr.length>1)for(Jt=1;Jt<sr.length;Jt++)ir=zt[sr[Jt]],St(Ft.x,ir.x),St(Ft.y,ir.y);St(Ft.x,[ur]),St(Ft.y,[er])}}return zt}function St(Xe,He){for(var zt=0;zt<He.length;zt++)Xe.indexOf(He[zt])===-1&&Xe.push(He[zt])}function Pt(Xe,He,zt){var Rt=[],Jt=[],sr=Xe.layout,ur,er;for(ur=0;ur<He.length;ur++)Rt.push(te.getFromId(Xe,He[ur]));for(ur=0;ur<zt.length;ur++)Jt.push(te.getFromId(Xe,zt[ur]));var Ft=Object.keys(i),ir=["anchor","domain","overlaying","position","side","tickangle","editType"],hr=["linear","log"];for(ur=0;ur<Ft.length;ur++){var xr=Ft[ur],vr=Rt[0][xr],Vr=Jt[0][xr],_r=!0,Rr=!1,nn=!1;if(!(xr.charAt(0)==="_"||typeof vr=="function"||ir.indexOf(xr)!==-1)){for(er=1;er<Rt.length&&_r;er++){var en=Rt[er][xr];xr==="type"&&hr.indexOf(vr)!==-1&&hr.indexOf(en)!==-1&&vr!==en?Rr=!0:en!==vr&&(_r=!1)}for(er=1;er<Jt.length&&_r;er++){var An=Jt[er][xr];xr==="type"&&hr.indexOf(Vr)!==-1&&hr.indexOf(An)!==-1&&Vr!==An?nn=!0:Jt[er][xr]!==Vr&&(_r=!1)}_r&&(Rr&&(sr[Rt[0]._name].type="linear"),nn&&(sr[Jt[0]._name].type="linear"),Ht(sr,xr,Rt,Jt,Xe._fullLayout._dfltTitle))}}for(ur=0;ur<Xe._fullLayout.annotations.length;ur++){var wn=Xe._fullLayout.annotations[ur];He.indexOf(wn.xref)!==-1&&zt.indexOf(wn.yref)!==-1&&T.swapAttrs(sr.annotations[ur],["?"])}}function Ht(Xe,He,zt,Rt,Jt){var sr=T.nestedProperty,ur=sr(Xe[zt[0]._name],He).get(),er=sr(Xe[Rt[0]._name],He).get(),Ft;for(He==="title"&&(ur&&ur.text===Jt.x&&(ur.text=Jt.y),er&&er.text===Jt.y&&(er.text=Jt.x)),Ft=0;Ft<zt.length;Ft++)sr(Xe,zt[Ft]._name+"."+He).set(er);for(Ft=0;Ft<Rt.length;Ft++)sr(Xe,Rt[Ft]._name+"."+He).set(ur)}function Bt(Xe){return Xe._id==="angularaxis"}function Nt(Xe,He){for(var zt=He._rangebreaks.length,Rt=0;Rt<zt;Rt++){var Jt=He._rangebreaks[Rt];if(Xe>=Jt.min&&Xe<Jt.max)return Jt.max}return Xe}function Kt(Xe){return(Xe.ticklabelposition||"").indexOf("inside")!==-1}function fr(Xe,He){Kt(Xe._anchorAxis||{})&&Xe._hideCounterAxisInsideTickLabels&&Xe._hideCounterAxisInsideTickLabels(He)}function cr(Xe,He,zt,Rt){var Jt=Xe.anchor!=="free"&&(Xe.overlaying===void 0||Xe.overlaying===!1)?Xe._id:Xe.overlaying,sr;Rt?sr=Xe.side==="right"?He:-He:sr=He,Jt in zt||(zt[Jt]={}),Xe.side in zt[Jt]||(zt[Jt][Xe.side]=0),zt[Jt][Xe.side]+=sr}function dr(Xe,He){return Xe.autoshift?He[Xe.overlaying][Xe.side]:Xe.shift||0}},52976:function(U,F,e){var d=e(38248),S=e(3400),n=e(39032).BADNUM,E=S.isArrayOrTypedArray,T=S.isDateTime,v=S.cleanNumber,g=Math.round;U.exports=function(m,h,w){var c=m,a=w.noMultiCategory;if(E(c)&&!c.length)return"-";if(!a&&u(c))return"multicategory";if(a&&Array.isArray(c[0])){for(var p=[],x=0;x<c.length;x++)if(E(c[x]))for(var A=0;A<c[x].length;A++)p.push(c[x][A]);c=p}if(o(c,h))return"date";var P=w.autotypenumbers!=="strict";return f(c,P)?"category":t(c,P)?"linear":"-"};function r(l,m){return m?d(l):typeof l=="number"}function t(l,m){for(var h=l.length,w=0;w<h;w++)if(r(l[w],m))return!0;return!1}function o(l,m){for(var h=l.length,w=i(h),c=0,a=0,p={},x=0;x<h;x+=w){var A=g(x),P=l[A],y=String(P);p[y]||(p[y]=1,T(P,m)&&c++,d(P)&&a++)}return c>a*2}function i(l){return Math.max(1,(l-1)/1e3)}function f(l,m){for(var h=l.length,w=i(h),c=0,a=0,p={},x=0;x<h;x+=w){var A=g(x),P=l[A],y=String(P);if(!p[y]){p[y]=1;var C=typeof P;C==="boolean"?a++:(m?v(P)!==n:C==="number")?c++:C==="string"&&a++}}return a>c*2}function u(l){return E(l[0])&&E(l[1])}},28336:function(U,F,e){var d=e(38248),S=e(24040),n=e(3400),E=e(31780),T=e(51272),v=e(94724),g=e(26332),r=e(25404),t=e(95936),o=e(42568),i=e(22416),f=e(42136),u=e(96312),l=e(78344),m=e(33816).WEEKDAY_PATTERN,h=e(33816).HOUR_PATTERN;U.exports=function(x,A,P,y,C){var M=y.letter,s=y.font||{},_=y.splomStash||{},b=P("visible",!y.visibleDflt),k=A._template||{},D=A.type||k.type||"-",V;if(D==="date"){var O=S.getComponentMethod("calendars","handleDefaults");O(x,A,"calendar",y.calendar),y.noTicklabelmode||(V=P("ticklabelmode"))}var N="";(!y.noTicklabelposition||D==="multicategory")&&(N=n.coerce(x,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:V==="period"?["outside","inside"]:M==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),y.noTicklabeloverflow||P("ticklabeloverflow",N.indexOf("inside")!==-1?"hide past domain":D==="category"||D==="multicategory"?"allow":"hide past div"),l(A,C),u(x,A,P,y),i(x,A,P,y),D!=="category"&&!y.noHover&&P("hoverformat");var B=P("color"),z=B!==v.color.dflt?B:s.color,H=_.label||C._dfltTitle[M];if(o(x,A,P,D,y),!b)return A;P("title.text",H),n.coerceFont(P,"title.font",s,{overrideDflt:{size:n.bigFont(s.size),color:z}}),g(x,A,P,D);var X=y.hasMinor;if(X&&(E.newContainer(A,"minor"),g(x,A,P,D,{isMinor:!0})),t(x,A,P,D,y),r(x,A,P,y),X){var $=y.isMinor;y.isMinor=!0,r(x,A,P,y),y.isMinor=$}f(x,A,P,{dfltColor:B,bgColor:y.bgColor,showGrid:y.showGrid,hasMinor:X,attributes:v}),X&&!A.minor.ticks&&!A.minor.showgrid&&delete A.minor,(A.showline||A.ticks)&&P("mirror");var ne=D==="multicategory";if(!y.noTickson&&(D==="category"||ne)&&(A.ticks||A.showgrid)){var q;ne&&(q="boundaries");var ue=P("tickson",q);ue==="boundaries"&&delete A.ticklabelposition}if(ne){var te=P("showdividers");te&&(P("dividercolor"),P("dividerwidth"))}if(D==="date")if(T(x,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:w}),!A.rangebreaks.length)delete A.rangebreaks;else{for(var J=0;J<A.rangebreaks.length;J++)if(A.rangebreaks[J].pattern===m){A._hasDayOfWeekBreaks=!0;break}if(l(A,C),C._has("scattergl")||C._has("splom"))for(var ie=0;ie<y.data.length;ie++){var K=y.data[ie];(K.type==="scattergl"||K.type==="splom")&&(K.visible=!1,n.warn(K.type+" traces do not work on axes with rangebreaks. Setting trace "+K.index+" to `visible: false`."))}}return A};function w(p,x,A){function P(V,O){return n.coerce(p,x,v.rangebreaks,V,O)}var y=P("enabled");if(y){var C=P("bounds");if(C&&C.length>=2){var M="",s,_;if(C.length===2){for(s=0;s<2;s++)if(_=a(C[s]),_){M=m;break}}var b=P("pattern",M);if(b===m)for(s=0;s<2;s++)_=a(C[s]),_&&(x.bounds[s]=C[s]=_-1);if(b)for(s=0;s<2;s++)switch(_=C[s],b){case m:if(!d(_)){x.enabled=!1;return}if(_=+_,_!==Math.floor(_)||_<0||_>=7){x.enabled=!1;return}x.bounds[s]=C[s]=_;break;case h:if(!d(_)){x.enabled=!1;return}if(_=+_,_<0||_>24){x.enabled=!1;return}x.bounds[s]=C[s]=_;break}if(A.autorange===!1){var k=A.range;if(k[0]<k[1]){if(C[0]<k[0]&&C[1]>k[1]){x.enabled=!1;return}}else if(C[0]>k[0]&&C[1]<k[1]){x.enabled=!1;return}}}else{var D=P("values");if(D&&D.length)P("dvalue");else{x.enabled=!1;return}}}}var c={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function a(p){if(typeof p=="string")return c[p.substr(0,3).toLowerCase()]}},29736:function(U,F,e){var d=e(26880),S=d.FORMAT_LINK,n=d.DATE_FORMAT_LINK;function E(g,r){return{valType:"string",dflt:"",editType:"none",description:(r?T:v)("hover text",g)+["By default the values are formatted using "+(r?"generic number format":"`"+g+"axis.hoverformat`")+"."].join(" ")}}function T(g,r){return["Sets the "+g+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+S+"."].join(" ")}function v(g,r){return T(g,r)+[" And for dates see: "+n+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}U.exports={axisHoverFormat:E,descriptionOnlyNumbers:T,descriptionWithDates:v}},79811:function(U,F,e){var d=e(24040),S=e(33816);F.id2name=function(T){if(!(typeof T!="string"||!T.match(S.AX_ID_PATTERN))){var v=T.split(" ")[0].substr(1);return v==="1"&&(v=""),T.charAt(0)+"axis"+v}},F.name2id=function(T){if(T.match(S.AX_NAME_PATTERN)){var v=T.substr(5);return v==="1"&&(v=""),T.charAt(0)+v}},F.cleanId=function(T,v,g){var r=/( domain)$/.test(T);if(!(typeof T!="string"||!T.match(S.AX_ID_PATTERN))&&!(v&&T.charAt(0)!==v)&&!(r&&!g)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(r&&g?" domain":"")}},F.list=function(E,T,v){var g=E._fullLayout;if(!g)return[];var r=F.listIds(E,T),t=new Array(r.length),o;for(o=0;o<r.length;o++){var i=r[o];t[o]=g[i.charAt(0)+"axis"+i.substr(1)]}if(!v){var f=g._subplots.gl3d||[];for(o=0;o<f.length;o++){var u=g[f[o]];T?t.push(u[T+"axis"]):t.push(u.xaxis,u.yaxis,u.zaxis)}}return t},F.listIds=function(E,T){var v=E._fullLayout;if(!v)return[];var g=v._subplots;return T?g[T+"axis"]:g.xaxis.concat(g.yaxis)},F.getFromId=function(E,T,v){var g=E._fullLayout;return T=T===void 0||typeof T!="string"?T:T.replace(" domain",""),v==="x"?T=T.replace(/y[0-9]*/,""):v==="y"&&(T=T.replace(/x[0-9]*/,"")),g[F.id2name(T)]},F.getFromTrace=function(E,T,v){var g=E._fullLayout,r=null;if(d.traceIs(T,"gl3d")){var t=T.scene;t.substr(0,5)==="scene"&&(r=g[t][v+"axis"])}else r=F.getFromId(E,T[v+"axis"]||v);return r},F.idSort=function(E,T){var v=E.charAt(0),g=T.charAt(0);return v!==g?v>g?1:-1:+(E.substr(1)||1)-+(T.substr(1)||1)},F.ref2id=function(E){return/^[xyz]/.test(E)?E.split(" ")[0]:!1};function n(E,T){if(T&&T.length){for(var v=0;v<T.length;v++)if(T[v][E])return!0}return!1}F.isLinked=function(E,T){return n(T,E._axisMatchGroups)||n(T,E._axisConstraintGroups)}},22416:function(U,F,e){var d=e(38116).isTypedArraySpec;function S(n,E){var T=E.dataAttr||n._id.charAt(0),v={},g,r,t;if(E.axData)g=E.axData;else for(g=[],r=0;r<E.data.length;r++){var o=E.data[r];o[T+"axis"]===n._id&&g.push(o)}for(r=0;r<g.length;r++){var i=g[r][T];for(t=0;t<i.length;t++){var f=i[t];f!=null&&(v[f]=1)}}return Object.keys(v)}U.exports=function(E,T,v,g){if(T.type==="category"){var r=E.categoryarray,t=Array.isArray(r)&&r.length>0||d(r),o;t&&(o="array");var i=v("categoryorder",o),f;i==="array"&&(f=v("categoryarray")),!t&&i==="array"&&(i=T.categoryorder="trace"),i==="trace"?T._initialCategories=[]:i==="array"?T._initialCategories=f.slice():(f=S(T,g).sort(),i==="category ascending"?T._initialCategories=f:i==="category descending"&&(T._initialCategories=f.reverse()))}}},98728:function(U,F,e){var d=e(38248),S=e(3400),n=e(39032),E=n.ONEDAY,T=n.ONEWEEK;F.dtick=function(v,g){var r=g==="log",t=g==="date",o=g==="category",i=t?E:1;if(!v)return i;if(d(v))return v=Number(v),v<=0?i:o?Math.max(1,Math.round(v)):t?Math.max(.1,v):v;if(typeof v!="string"||!(t||r))return i;var f=v.charAt(0),u=v.substr(1);return u=d(u)?Number(u):0,u<=0||!(t&&f==="M"&&u===Math.round(u)||r&&f==="L"||r&&f==="D"&&(u===1||u===2))?i:v},F.tick0=function(v,g,r,t){if(g==="date")return S.cleanDate(v,S.dateTick0(r,t%T===0?1:0));if(!(t==="D1"||t==="D2"))return d(v)?Number(v):0}},33816:function(U,F,e){var d=e(53756).counter;U.exports={idRegex:{x:d("x","( domain)?"),y:d("y","( domain)?")},attrRegex:d("[xy]axis"),xAxisMatch:d("xaxis"),yAxisMatch:d("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(U,F,e){var d=e(3400),S=e(19280),n=e(79811).id2name,E=e(94724),T=e(21160),v=e(78344),g=e(39032).ALMOST_EQUAL,r=e(84284).FROM_BL;F.handleDefaults=function(h,w,c){var a=c.axIds,p=c.axHasImage,x=w._axisConstraintGroups=[],A=w._axisMatchGroups=[],P,y,C,M,s,_,b,k;for(P=0;P<a.length;P++)M=n(a[P]),s=h[M],_=w[M],t(s,_,{axIds:a,layoutOut:w,hasImage:p[M]});function D(ne,q){for(P=0;P<ne.length;P++){y=ne[P];for(C in y)w[n(C)][q]=y}}for(D(A,"_matchGroup"),P=0;P<x.length;P++){y=x[P];for(C in y)if(_=w[n(C)],_.fixedrange){for(var V in y){var O=n(V);(h[O]||{}).fixedrange===!1&&d.warn("fixedrange was specified as false for axis "+O+" but was overridden because another axis in its constraint group has fixedrange true"),w[O].fixedrange=!0}break}}for(P=0;P<x.length;){y=x[P];for(C in y){_=w[n(C)],_._matchGroup&&Object.keys(_._matchGroup).length===Object.keys(y).length&&(x.splice(P,1),P--);break}P++}D(x,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],B=!1,z=!1;function H(){k=_[b],b==="rangebreaks"&&(z=_._hasDayOfWeekBreaks)}for(P=0;P<A.length;P++){y=A[P];for(var X=0;X<N.length;X++){b=N[X],k=null;var $;for(C in y)if(M=n(C),s=h[M],_=w[M],b in _){if(!_.matches&&($=_,b in s)){H();break}k===null&&b in s&&H()}if(b==="range"&&k&&s.range&&s.range.length===2&&s.range[0]!==null&&s.range[1]!==null&&(B=!0),b==="autorange"&&k===null&&B&&(k=!1),k===null&&b in $&&(k=$[b]),k!==null)for(C in y)_=w[n(C)],_[b]=b==="range"?k.slice():k,b==="rangebreaks"&&(_._hasDayOfWeekBreaks=z,v(_,w))}}};function t(h,w,c){var a=c.axIds,p=c.layoutOut,x=c.hasImage,A=p._axisConstraintGroups,P=p._axisMatchGroups,y=w._id,C=y.charAt(0),M=((p._splomAxes||{})[C]||{})[y]||{},s=w._id,_=s.charAt(0)==="x";w._matchGroup=null,w._constraintGroup=null;function b(J,ie){return d.coerce(h,w,E,J,ie)}b("constrain",x?"domain":"range"),d.coerce(h,w,{constraintoward:{valType:"enumerated",values:_?["left","center","right"]:["bottom","middle","top"],dflt:_?"center":"middle"}},"constraintoward");var k=w.type,D,V,O=[];for(D=0;D<a.length;D++)if(V=a[D],V!==s){var N=p[n(V)];N.type===k&&O.push(V)}var B=i(A,s);if(B){var z=[];for(D=0;D<O.length;D++)V=O[D],B[V]||z.push(V);O=z}var H=O.length,X,$;H&&(h.matches||M.matches)&&(X=d.coerce(h,w,{matches:{valType:"enumerated",values:O,dflt:O.indexOf(M.matches)!==-1?M.matches:void 0}},"matches"));var ne=x&&!_?w.anchor:void 0;if(H&&!X&&(h.scaleanchor||ne)&&($=d.coerce(h,w,{scaleanchor:{valType:"enumerated",values:O.concat([!1])}},"scaleanchor",ne)),X){w._matchGroup=f(P,s,X,1);var q=p[n(X)],ue=o(p,w)/o(p,q);_!==(X.charAt(0)==="x")&&(ue=(_?"x":"y")+ue),f(A,s,X,ue)}else h.matches&&a.indexOf(h.matches)!==-1&&d.warn("ignored "+w._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if($){var te=b("scaleratio");te||(te=w.scaleratio=1),f(A,s,$,te)}else h.scaleanchor&&a.indexOf(h.scaleanchor)!==-1&&d.warn("ignored "+w._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function o(h,w){var c=w.domain;return c||(c=h[n(w.overlaying)].domain),c[1]-c[0]}function i(h,w){for(var c=0;c<h.length;c++)if(h[c][w])return h[c];return null}function f(h,w,c,a){var p,x,A,P,y,C=i(h,w);C===null?(C={},C[w]=1,y=h.length,h.push(C)):y=h.indexOf(C);var M=Object.keys(C);for(p=0;p<h.length;p++)if(A=h[p],p!==y&&A[c]){var s=A[c];for(x=0;x<M.length;x++)P=M[x],A[P]=u(s,u(a,C[P]));h.splice(y,1);return}if(a!==1)for(x=0;x<M.length;x++){var _=M[x];C[_]=u(a,C[_])}C[c]=1}function u(h,w){var c="",a="",p,x;typeof h=="string"&&(c=h.match(/^[xy]*/)[0],p=c.length,h=+h.substr(p)),typeof w=="string"&&(a=w.match(/^[xy]*/)[0],x=a.length,w=+w.substr(x));var A=h*w;return!p&&!x?A:!p||!x||c.charAt(0)===a.charAt(0)?c+a+h*w:p===x?A:(p>x?c.substr(x):a.substr(p))+A}function l(h,w){for(var c=w._size,a=c.h/c.w,p={},x=Object.keys(h),A=0;A<x.length;A++){var P=x[A],y=h[P];if(typeof y=="string"){var C=y.match(/^[xy]*/)[0],M=C.length;y=+y.substr(M);for(var s=C.charAt(0)==="y"?a:1/a,_=0;_<M;_++)y*=s}p[P]=y}return p}F.enforce=function(w){var c=w._fullLayout,a=c._axisConstraintGroups||[],p,x,A,P,y,C,M,s;for(p=0;p<a.length;p++){A=l(a[p],c);var _=Object.keys(A),b=1/0,k=0,D=1/0,V={},O={},N=!1;for(x=0;x<_.length;x++)P=_[x],O[P]=y=c[n(P)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),V[P]=C=Math.abs(y._m)/A[P],b=Math.min(b,C),(y.constrain==="domain"||!y._constraintShrinkable)&&(D=Math.min(D,C)),delete y._constraintShrinkable,k=Math.max(k,C),y.constrain==="domain"&&(N=!0);if(!(b>g*k&&!N)){for(x=0;x<_.length;x++)if(P=_[x],C=V[P],y=O[P],M=y.constrain,C!==D||M==="domain")if(s=C/D,M==="range")T(y,s);else{var B=y._inputDomain,z=(y.domain[1]-y.domain[0])/(B[1]-B[0]),H=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if(s/=z,s*H<1){y.domain=y._input.domain=B.slice(),T(y,s);continue}if(H<1&&(y.range=y._input.range=y._inputRange.slice(),s*=H),y.autorange){var X=y.r2l(y.range[0]),$=y.r2l(y.range[1]),ne=(X+$)/2,q=ne,ue=ne,te=Math.abs($-ne),J=ne-te*s*1.0001,ie=ne+te*s*1.0001,K=S.makePadFn(c,y,0),ee=S.makePadFn(c,y,1);m(y,s);var le=Math.abs(y._m),j=S.concatExtremes(w,y),Z=j.min,fe=j.max,re,ce;for(ce=0;ce<Z.length;ce++)re=Z[ce].val-K(Z[ce])/le,re>J&&re<q&&(q=re);for(ce=0;ce<fe.length;ce++)re=fe[ce].val+ee(fe[ce])/le,re<ie&&re>ue&&(ue=re);var xe=(ue-q)/(2*te);s/=xe,q=y.l2r(q),ue=y.l2r(ue),y.range=y._input.range=X<$?[q,ue]:[ue,q]}m(y,s)}}}},F.getAxisGroup=function(w,c){for(var a=w._axisMatchGroups,p=0;p<a.length;p++){var x=a[p];if(x[c])return"g"+p}return c},F.clean=function(w,c){if(c._inputDomain){for(var a=!1,p=c._id,x=w._fullLayout._axisConstraintGroups,A=0;A<x.length;A++)if(x[A][p]){a=!0;break}(!a||c.constrain!=="domain")&&(c._input.domain=c.domain=c._inputDomain,delete c._inputDomain)}};function m(h,w){var c=h._inputDomain,a=r[h.constraintoward],p=c[0]+(c[1]-c[0])*a;h.domain=h._input.domain=[p+(c[0]-p)/w,p+(c[1]-p)/w],h.setScale()}},51184:function(U,F,e){var d=e(33428),S=e(3400),n=S.numberFormat,E=e(49760),T=e(89184),v=e(24040),g=S.strTranslate,r=e(72736),t=e(76308),o=e(43616),i=e(93024),f=e(54460),u=e(93972),l=e(86476),m=e(72760),h=m.selectingOrDrawing,w=m.freeMode,c=e(84284).FROM_TL,a=e(73696),p=e(39172).redrawReglTraces,x=e(7316),A=e(79811).getFromId,P=e(22676).prepSelect,y=e(22676).clearOutline,C=e(22676).selectOnClick,M=e(21160),s=e(33816),_=s.MINDRAG,b=s.MINZOOM,k=!0;function D(re,ce,xe,Te,we,_e,ke,Ne){var Ee=re._fullLayout._zoomlayer,ze=ke+Ne==="nsew",Ce=(ke+Ne).length===1,Oe,Le,Ge,rt,ot,$e,qe,ht,vt,pt,wt,Et,nt,Fe,We,Ze,Ye,Ie,De,je,Re,pe,be;xe+=ce.yaxis._shift;function Ue(){if(Oe=ce.xaxis,Le=ce.yaxis,vt=Oe._length,pt=Le._length,qe=Oe._offset,ht=Le._offset,Ge={},Ge[Oe._id]=Oe,rt={},rt[Le._id]=Le,ke&&Ne)for(var er=ce.overlays,Ft=0;Ft<er.length;Ft++){var ir=er[Ft].xaxis;Ge[ir._id]=ir;var hr=er[Ft].yaxis;rt[hr._id]=hr}ot=fe(Ge),$e=fe(rt),nt=N(ot,Ne),Fe=N($e,ke),We=!Fe&&!nt,Et=j(re,re._fullLayout._axisMatchGroups,Ge,rt),wt=j(re,re._fullLayout._axisConstraintGroups,Ge,rt,Et);var xr=wt.isSubplotConstrained||Et.isSubplotConstrained;Ze=Ne||xr,Ye=ke||xr;var vr=re._fullLayout;Ie=vr._has("scattergl"),De=vr._has("splom"),je=vr._has("svg")}Ue();var et=$(Fe+nt,re._fullLayout.dragmode,ze),st=O(ce,ke+Ne+"drag",et,xe,Te,we,_e);if(We&&!ze)return st.onmousedown=null,st.style.pointerEvents="none",st;var lt={element:st,gd:re,plotinfo:ce};lt.prepFn=function(er,Ft,ir){var hr=lt.dragmode,xr=re._fullLayout.dragmode;xr!==hr&&(lt.dragmode=xr),Ue(),pe=re._fullLayout._invScaleX,be=re._fullLayout._invScaleY,We||(ze?er.shiftKey?xr==="pan"?xr="zoom":h(xr)||(xr="pan"):er.ctrlKey&&(xr="pan"):xr="pan"),w(xr)?lt.minDrag=1:lt.minDrag=void 0,h(xr)?(lt.xaxes=ot,lt.yaxes=$e,P(er,Ft,ir,lt,xr)):(lt.clickFn=Zt,h(hr)&&Gt(),We||(xr==="zoom"?(lt.moveFn=bt,lt.doneFn=Pt,lt.minDrag=1,ut(er,Ft,ir)):xr==="pan"&&(lt.moveFn=cr,lt.doneFn=zt))),re._fullLayout._redrag=function(){var vr=re._dragdata;if(vr&&vr.element===st){var Vr=re._fullLayout.dragmode;h(Vr)||(Ue(),Rt([0,0,vt,pt]),lt.moveFn(vr.dx,vr.dy))}}};function Gt(){lt.plotinfo.selection=!1,y(re)}function Zt(er,Ft){var ir=lt.gd;if(ir._fullLayout._activeShapeIndex>=0){ir._fullLayout._deactivateShape(ir);return}var hr=ir._fullLayout.clickmode;if(J(ir),er===2&&!Ce&&He(),ze)hr.indexOf("select")>-1&&C(Ft,ir,ot,$e,ce.id,lt),hr.indexOf("event")>-1&&i.click(ir,Ft,ce.id);else if(er===1&&Ce){var xr=ke?Le:Oe,vr=ke==="s"||Ne==="w"?0:1,Vr=xr._name+".range["+vr+"]",_r=B(xr,vr),Rr="left",nn="middle";if(xr.fixedrange)return;ke?(nn=ke==="n"?"top":"bottom",xr.side==="right"&&(Rr="right")):Ne==="e"&&(Rr="right"),ir._context.showAxisRangeEntryBoxes&&d.select(st).call(r.makeEditable,{gd:ir,immediate:!0,background:ir._fullLayout.paper_bgcolor,text:String(_r),fill:xr.tickfont?xr.tickfont.color:"#444",horizontalAlign:Rr,verticalAlign:nn}).on("edit",function(en){var An=xr.d2r(en);An!==void 0&&v.call("_guiRelayout",ir,Vr,An)})}}l.init(lt);var Tt,It,Xt,gr,gt,jt,Qt,mr,or,mt;function ut(er,Ft,ir){var hr=st.getBoundingClientRect();Tt=Ft-hr.left,It=ir-hr.top,re._fullLayout._calcInverseTransform(re);var xr=S.apply3DTransform(re._fullLayout._invTransform)(Tt,It);Tt=xr[0],It=xr[1],Xt={l:Tt,r:Tt,w:0,t:It,b:It,h:0},gr=re._hmpixcount?re._hmlumcount/re._hmpixcount:E(re._fullLayout.plot_bgcolor).getLuminance(),gt="M0,0H"+vt+"V"+pt+"H0V0",jt=!1,Qt="xy",mt=!1,mr=ne(Ee,gr,qe,ht,gt),or=q(Ee,qe,ht)}function bt(er,Ft){if(re._transitioningWithDuration)return!1;var ir=Math.max(0,Math.min(vt,pe*er+Tt)),hr=Math.max(0,Math.min(pt,be*Ft+It)),xr=Math.abs(ir-Tt),vr=Math.abs(hr-It);Xt.l=Math.min(Tt,ir),Xt.r=Math.max(Tt,ir),Xt.t=Math.min(It,hr),Xt.b=Math.max(It,hr);function Vr(){Qt="",Xt.r=Xt.l,Xt.t=Xt.b,or.attr("d","M0,0Z")}if(wt.isSubplotConstrained)xr>b||vr>b?(Qt="xy",xr/vt>vr/pt?(vr=xr*pt/vt,It>hr?Xt.t=It-vr:Xt.b=It+vr):(xr=vr*vt/pt,Tt>ir?Xt.l=Tt-xr:Xt.r=Tt+xr),or.attr("d",le(Xt))):Vr();else if(Et.isSubplotConstrained)if(xr>b||vr>b){Qt="xy";var _r=Math.min(Xt.l/vt,(pt-Xt.b)/pt),Rr=Math.max(Xt.r/vt,(pt-Xt.t)/pt);Xt.l=_r*vt,Xt.r=Rr*vt,Xt.b=(1-_r)*pt,Xt.t=(1-Rr)*pt,or.attr("d",le(Xt))}else Vr();else!Fe||vr<Math.min(Math.max(xr*.6,_),b)?xr<_||!nt?Vr():(Xt.t=0,Xt.b=pt,Qt="x",or.attr("d",K(Xt,It))):!nt||xr<Math.min(vr*.6,b)?(Xt.l=0,Xt.r=vt,Qt="y",or.attr("d",ee(Xt,Tt))):(Qt="xy",or.attr("d",le(Xt)));Xt.w=Xt.r-Xt.l,Xt.h=Xt.b-Xt.t,Qt&&(mt=!0),re._dragged=mt,ue(mr,or,Xt,gt,jt,gr),St(),re.emit("plotly_relayouting",Re),jt=!0}function St(){Re={},(Qt==="xy"||Qt==="x")&&(z(ot,Xt.l/vt,Xt.r/vt,Re,wt.xaxes),dr("x",Re)),(Qt==="xy"||Qt==="y")&&(z($e,(pt-Xt.b)/pt,(pt-Xt.t)/pt,Re,wt.yaxes),dr("y",Re))}function Pt(){St(),J(re),zt(),ie(re)}var Ht=[0,0,vt,pt],Bt=null,Nt=s.REDRAWDELAY,Kt=ce.mainplot?re._fullLayout._plots[ce.mainplot]:ce;function fr(er){if(!re._context._scrollZoom.cartesian&&!re._fullLayout._enablescrollzoom)return;if(Gt(),re._transitioningWithDuration){er.preventDefault(),er.stopPropagation();return}Ue(),clearTimeout(Bt);var Ft=-er.deltaY;if(isFinite(Ft)||(Ft=er.wheelDelta/10),!isFinite(Ft)){S.log("Did not find wheel motion attributes: ",er);return}var ir=Math.exp(-Math.min(Math.max(Ft,-20),20)/200),hr=Kt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xr=(er.clientX-hr.left)/hr.width,vr=(hr.bottom-er.clientY)/hr.height,Vr;function _r(Rr,nn,en){if(Rr.fixedrange)return;var An=S.simpleMap(Rr.range,Rr.r2l),wn=An[0]+(An[1]-An[0])*nn;function Tr(kr){return Rr.l2r(wn+(kr-wn)*en)}Rr.range=An.map(Tr)}if(Ze){for(Ne||(xr=.5),Vr=0;Vr<ot.length;Vr++)_r(ot[Vr],xr,ir);dr("x"),Ht[2]*=ir,Ht[0]+=Ht[2]*xr*(1/ir-1)}if(Ye){for(ke||(vr=.5),Vr=0;Vr<$e.length;Vr++)_r($e[Vr],vr,ir);dr("y"),Ht[3]*=ir,Ht[1]+=Ht[3]*(1-vr)*(1/ir-1)}Rt(Ht),Xe(),re.emit("plotly_relayouting",Re),Bt=setTimeout(function(){re._fullLayout&&(Ht=[0,0,vt,pt],zt())},Nt),er.preventDefault()}ke.length*Ne.length!==1&&Z(st,fr);function cr(er,Ft){if(er=er*pe,Ft=Ft*be,re._transitioningWithDuration)return;if(re._fullLayout._replotting=!0,nt==="ew"||Fe==="ns"){var ir=nt?-er:0,hr=Fe?-Ft:0;if(Et.isSubplotConstrained){if(nt&&Fe){var xr=(er/vt-Ft/pt)/2;er=xr*vt,Ft=-xr*pt,ir=-er,hr=-Ft}Fe?ir=-hr*vt/pt:hr=-ir*pt/vt}nt&&(H(ot,er),dr("x")),Fe&&(H($e,Ft),dr("y")),Rt([ir,hr,vt,pt]),Xe(),re.emit("plotly_relayouting",Re);return}function vr(Tr,kr,Wr){for(var zr=1-kr,sn,un,Mn=0;Mn<Tr.length;Mn++){var Ln=Tr[Mn];if(!Ln.fixedrange){sn=Ln,un=Ln._rl[zr]+(Ln._rl[kr]-Ln._rl[zr])/X(Wr/Ln._length);var Un=Ln.l2r(un);Un!==!1&&Un!==void 0&&(Ln.range[kr]=Un)}}return sn._length*(sn._rl[kr]-un)/(sn._rl[kr]-sn._rl[zr])}var Vr=nt==="w"==(Fe==="n")?1:-1;if(nt&&Fe&&(wt.isSubplotConstrained||Et.isSubplotConstrained)){var _r=(er/vt+Vr*Ft/pt)/2;er=_r*vt,Ft=Vr*_r*pt}var Rr,nn;if(nt==="w"?er=vr(ot,0,er):nt==="e"?er=vr(ot,1,-er):nt||(er=0),Fe==="n"?Ft=vr($e,1,Ft):Fe==="s"?Ft=vr($e,0,-Ft):Fe||(Ft=0),Rr=nt==="w"?er:0,nn=Fe==="n"?Ft:0,wt.isSubplotConstrained&&!Et.isSubplotConstrained||Et.isSubplotConstrained&&nt&&Fe&&Vr>0){var en;if(Et.isSubplotConstrained||!nt&&Fe.length===1){for(en=0;en<ot.length;en++)ot[en].range=ot[en]._r.slice(),M(ot[en],1-Ft/pt);er=Ft*vt/pt,Rr=er/2}if(Et.isSubplotConstrained||!Fe&&nt.length===1){for(en=0;en<$e.length;en++)$e[en].range=$e[en]._r.slice(),M($e[en],1-er/vt);Ft=er*pt/vt,nn=Ft/2}}(!Et.isSubplotConstrained||!Fe)&&dr("x"),(!Et.isSubplotConstrained||!nt)&&dr("y");var An=vt-er,wn=pt-Ft;Et.isSubplotConstrained&&!(nt&&Fe)&&(nt?(nn=Rr?0:er*pt/vt,wn=An*pt/vt):(Rr=nn?0:Ft*vt/pt,An=wn*vt/pt)),Rt([Rr,nn,An,wn]),Xe(),re.emit("plotly_relayouting",Re)}function dr(er,Ft){for(var ir=Et.isSubplotConstrained?{x:$e,y:ot}[er]:Et[er+"axes"],hr=Et.isSubplotConstrained?{x:ot,y:$e}[er]:[],xr=0;xr<ir.length;xr++){var vr=ir[xr],Vr=vr._id,_r=Et.xLinks[Vr]||Et.yLinks[Vr],Rr=hr[0]||Ge[_r]||rt[_r];Rr&&(Ft?(Ft[vr._name+".range[0]"]=Ft[Rr._name+".range[0]"],Ft[vr._name+".range[1]"]=Ft[Rr._name+".range[1]"]):vr.range=Rr.range.slice())}}function Xe(){var er=[],Ft;function ir(Vr){for(Ft=0;Ft<Vr.length;Ft++)Vr[Ft].fixedrange||er.push(Vr[Ft]._id)}function hr(Vr,_r){for(Ft=0;Ft<Vr.length;Ft++){var Rr=Vr[Ft],nn=Rr[_r];!Rr.fixedrange&&nn.tickmode==="sync"&&er.push(nn._id)}}for(Ze&&(ir(ot),ir(wt.xaxes),ir(Et.xaxes),hr(ce.overlays,"xaxis")),Ye&&(ir($e),ir(wt.yaxes),ir(Et.yaxes),hr(ce.overlays,"yaxis")),Re={},Ft=0;Ft<er.length;Ft++){var xr=er[Ft],vr=A(re,xr);f.drawOne(re,vr,{skipTitle:!0}),Re[vr._name+".range[0]"]=vr.range[0],Re[vr._name+".range[1]"]=vr.range[1]}f.redrawComponents(re,er)}function He(){if(!re._transitioningWithDuration){var er=re._context.doubleClick,Ft=[];nt&&(Ft=Ft.concat(ot)),Fe&&(Ft=Ft.concat($e)),Et.xaxes&&(Ft=Ft.concat(Et.xaxes)),Et.yaxes&&(Ft=Ft.concat(Et.yaxes));var ir={},hr,xr;if(er==="reset+autosize")for(er="autosize",xr=0;xr<Ft.length;xr++){hr=Ft[xr];var vr=hr._rangeInitial0,Vr=hr._rangeInitial1,_r=vr!==void 0||Vr!==void 0;if(_r&&(vr!==void 0&&vr!==hr.range[0]||Vr!==void 0&&Vr!==hr.range[1])||!_r&&hr.autorange!==!0){er="reset";break}}if(er==="autosize")for(xr=0;xr<Ft.length;xr++)hr=Ft[xr],hr.fixedrange||(ir[hr._name+".autorange"]=!0);else if(er==="reset"){for((nt||wt.isSubplotConstrained)&&(Ft=Ft.concat(wt.xaxes)),Fe&&!wt.isSubplotConstrained&&(Ft=Ft.concat(wt.yaxes)),wt.isSubplotConstrained&&(nt?Fe||(Ft=Ft.concat($e)):Ft=Ft.concat(ot)),xr=0;xr<Ft.length;xr++)if(hr=Ft[xr],!hr.fixedrange){var Rr=hr._name,nn=hr._autorangeInitial;hr._rangeInitial0===void 0&&hr._rangeInitial1===void 0?ir[Rr+".autorange"]=!0:hr._rangeInitial0===void 0?(ir[Rr+".autorange"]=nn,ir[Rr+".range"]=[null,hr._rangeInitial1]):hr._rangeInitial1===void 0?(ir[Rr+".range"]=[hr._rangeInitial0,null],ir[Rr+".autorange"]=nn):ir[Rr+".range"]=[hr._rangeInitial0,hr._rangeInitial1]}}re.emit("plotly_doubleclick",null),v.call("_guiRelayout",re,ir)}}function zt(){Rt([0,0,vt,pt]),S.syncOrAsync([x.previousPromises,function(){re._fullLayout._replotting=!1,v.call("_guiRelayout",re,Re)}],re)}function Rt(er){var Ft=re._fullLayout,ir=Ft._plots,hr=Ft._subplots.cartesian,xr,vr,Vr,_r;if(De&&v.subplotsRegistry.splom.drag(re),Ie){for(xr=0;xr<hr.length;xr++)if(vr=ir[hr[xr]],Vr=vr.xaxis,_r=vr.yaxis,vr._scene){var Rr=S.simpleMap(Vr.range,Vr.r2l),nn=S.simpleMap(_r.range,_r.r2l);Vr.limitRange&&Vr.limitRange(),_r.limitRange&&_r.limitRange(),Rr=Vr.range,nn=_r.range,vr._scene.update({range:[Rr[0],nn[0],Rr[1],nn[1]]})}}if((De||Ie)&&(a(re),p(re)),je){var en=er[2]/Oe._length,An=er[3]/Le._length;for(xr=0;xr<hr.length;xr++){vr=ir[hr[xr]],Vr=vr.xaxis,_r=vr.yaxis;var wn=(Ze||Et.isSubplotConstrained)&&!Vr.fixedrange&&Ge[Vr._id],Tr=(Ye||Et.isSubplotConstrained)&&!_r.fixedrange&&rt[_r._id],kr,Wr,zr,sn;if(wn?(kr=en,zr=Ne||Et.isSubplotConstrained?er[0]:ur(Vr,kr)):Et.xaHash[Vr._id]?(kr=en,zr=er[0]*Vr._length/Oe._length):Et.yaHash[Vr._id]?(kr=An,zr=Fe==="ns"?-er[1]*Vr._length/Le._length:ur(Vr,kr,{n:"top",s:"bottom"}[Fe])):(kr=Jt(Vr,en,An),zr=sr(Vr,kr)),kr>1&&(Vr.maxallowed!==void 0&&Ze===(Vr.range[0]<Vr.range[1]?"e":"w")||Vr.minallowed!==void 0&&Ze===(Vr.range[0]<Vr.range[1]?"w":"e"))&&(kr=1,zr=0),Tr?(Wr=An,sn=ke||Et.isSubplotConstrained?er[1]:ur(_r,Wr)):Et.yaHash[_r._id]?(Wr=An,sn=er[1]*_r._length/Le._length):Et.xaHash[_r._id]?(Wr=en,sn=nt==="ew"?-er[0]*_r._length/Oe._length:ur(_r,Wr,{e:"right",w:"left"}[nt])):(Wr=Jt(_r,en,An),sn=sr(_r,Wr)),Wr>1&&(_r.maxallowed!==void 0&&Ye===(_r.range[0]<_r.range[1]?"n":"s")||_r.minallowed!==void 0&&Ye===(_r.range[0]<_r.range[1]?"s":"n"))&&(Wr=1,sn=0),!(!kr&&!Wr)){kr||(kr=1),Wr||(Wr=1);var un=Vr._offset-zr/kr,Mn=_r._offset-sn/Wr;vr.clipRect.call(o.setTranslate,zr,sn).call(o.setScale,kr,Wr),vr.plot.call(o.setTranslate,un,Mn).call(o.setScale,1/kr,1/Wr),(kr!==vr.xScaleFactor||Wr!==vr.yScaleFactor)&&(o.setPointGroupScale(vr.zoomScalePts,kr,Wr),o.setTextPointsScale(vr.zoomScaleTxt,kr,Wr)),o.hideOutsideRangePoints(vr.clipOnAxisFalseTraces,vr),vr.xScaleFactor=kr,vr.yScaleFactor=Wr}}}}function Jt(er,Ft,ir){return er.fixedrange?0:Ze&&wt.xaHash[er._id]?Ft:Ye&&(wt.isSubplotConstrained?wt.xaHash:wt.yaHash)[er._id]?ir:0}function sr(er,Ft){return Ft?(er.range=er._r.slice(),M(er,Ft),ur(er,Ft)):0}function ur(er,Ft,ir){return er._length*(1-Ft)*c[ir||er.constraintoward||"middle"]}return st}function V(re,ce,xe,Te){var we=S.ensureSingle(re.draglayer,ce,xe,function(_e){_e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",re.id)});return we.call(u,Te),we.node()}function O(re,ce,xe,Te,we,_e,ke){var Ne=V(re,"rect",ce,xe);return d.select(Ne).call(o.setRect,Te,we,_e,ke),Ne}function N(re,ce){for(var xe=0;xe<re.length;xe++)if(!re[xe].fixedrange)return ce;return""}function B(re,ce){var xe=re.range[ce],Te=Math.abs(xe-re.range[1-ce]),we;return re.type==="date"?xe:re.type==="log"?(we=Math.ceil(Math.max(0,-Math.log(Te)/Math.LN10))+3,n("."+we+"g")(Math.pow(10,xe))):(we=Math.floor(Math.log(Math.abs(xe))/Math.LN10)-Math.floor(Math.log(Te)/Math.LN10)+4,n("."+String(we)+"g")(xe))}function z(re,ce,xe,Te,we){for(var _e=0;_e<re.length;_e++){var ke=re[_e];if(!ke.fixedrange)if(ke.rangebreaks){var Ne=ke._id.charAt(0)==="y",Ee=Ne?1-ce:ce,ze=Ne?1-xe:xe;Te[ke._name+".range[0]"]=ke.l2r(ke.p2l(Ee*ke._length)),Te[ke._name+".range[1]"]=ke.l2r(ke.p2l(ze*ke._length))}else{var Ce=ke._rl[0],Oe=ke._rl[1]-Ce;Te[ke._name+".range[0]"]=ke.l2r(Ce+Oe*ce),Te[ke._name+".range[1]"]=ke.l2r(Ce+Oe*xe)}}if(we&&we.length){var Le=(ce+(1-xe))/2;z(we,Le,1-Le,Te,[])}}function H(re,ce){for(var xe=0;xe<re.length;xe++){var Te=re[xe];if(!Te.fixedrange){if(Te.rangebreaks){var we=0,_e=Te._length,ke=Te.p2l(we+ce)-Te.p2l(we),Ne=Te.p2l(_e+ce)-Te.p2l(_e),Ee=(ke+Ne)/2;Te.range=[Te.l2r(Te._rl[0]-Ee),Te.l2r(Te._rl[1]-Ee)]}else Te.range=[Te.l2r(Te._rl[0]-ce/Te._m),Te.l2r(Te._rl[1]-ce/Te._m)];Te.limitRange&&Te.limitRange()}}}function X(re){return 1-(re>=0?Math.min(re,.9):1/(1/Math.max(re,-.3)+3.222))}function $(re,ce,xe){return re?re==="nsew"?xe?"":ce==="pan"?"move":"crosshair":re.toLowerCase()+"-resize":"pointer"}function ne(re,ce,xe,Te,we){return re.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",g(xe,Te)).attr("d",we+"Z")}function q(re,ce,xe){return re.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",g(ce,xe)).attr("d","M0,0Z")}function ue(re,ce,xe,Te,we,_e){re.attr("d",Te+"M"+xe.l+","+xe.t+"v"+xe.h+"h"+xe.w+"v-"+xe.h+"h-"+xe.w+"Z"),te(re,ce,we,_e)}function te(re,ce,xe,Te){xe||(re.transition().style("fill",Te>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function J(re){d.select(re).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function ie(re){k&&re.data&&re._context.showTips&&(S.notifier(S._(re,"Double-click to zoom back out"),"long"),k=!1)}function K(re,ce){return"M"+(re.l-.5)+","+(ce-b-.5)+"h-3v"+(2*b+1)+"h3ZM"+(re.r+.5)+","+(ce-b-.5)+"h3v"+(2*b+1)+"h-3Z"}function ee(re,ce){return"M"+(ce-b-.5)+","+(re.t-.5)+"v-3h"+(2*b+1)+"v3ZM"+(ce-b-.5)+","+(re.b+.5)+"v3h"+(2*b+1)+"v-3Z"}function le(re){var ce=Math.floor(Math.min(re.b-re.t,re.r-re.l,b)/2);return"M"+(re.l-3.5)+","+(re.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(re.r+3.5)+","+(re.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(re.r+3.5)+","+(re.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(re.l-3.5)+","+(re.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function j(re,ce,xe,Te,we){for(var _e=!1,ke={},Ne={},Ee,ze,Ce,Oe,Le=(we||{}).xaHash,Ge=(we||{}).yaHash,rt=0;rt<ce.length;rt++){var ot=ce[rt];for(Ee in xe)if(ot[Ee]){for(Ce in ot)!(we&&(Le[Ce]||Ge[Ce]))&&!(Ce.charAt(0)==="x"?xe:Te)[Ce]&&(ke[Ce]=Ee);for(ze in Te)!(we&&(Le[ze]||Ge[ze]))&&ot[ze]&&(_e=!0)}for(ze in Te)if(ot[ze])for(Oe in ot)!(we&&(Le[Oe]||Ge[Oe]))&&!(Oe.charAt(0)==="x"?xe:Te)[Oe]&&(Ne[Oe]=ze)}_e&&(S.extendFlat(ke,Ne),Ne={});var $e={},qe=[];for(Ce in ke){var ht=A(re,Ce);qe.push(ht),$e[ht._id]=ht}var vt={},pt=[];for(Oe in Ne){var wt=A(re,Oe);pt.push(wt),vt[wt._id]=wt}return{xaHash:$e,yaHash:vt,xaxes:qe,yaxes:pt,xLinks:ke,yLinks:Ne,isSubplotConstrained:_e}}function Z(re,ce){if(!T)re.onwheel!==void 0?re.onwheel=ce:re.onmousewheel!==void 0?re.onmousewheel=ce:re.isAddedWheelEvent||(re.isAddedWheelEvent=!0,re.addEventListener("wheel",ce,{passive:!1}));else{var xe=re.onwheel!==void 0?"wheel":"mousewheel";re._onwheel&&re.removeEventListener(xe,re._onwheel),re._onwheel=ce,re.addEventListener(xe,ce,{passive:!1})}}function fe(re){var ce=[];for(var xe in re)ce.push(re[xe]);return ce}U.exports={makeDragBox:D,makeDragger:V,makeRectDragger:O,makeZoombox:ne,makeCorners:q,updateZoombox:ue,xyCorners:le,transitionZoombox:te,removeZoombox:J,showDoubleClickNotifier:ie,attachWheelEventHandler:Z}},42464:function(U,F,e){var d=e(33428),S=e(93024),n=e(86476),E=e(93972),T=e(51184).makeDragBox,v=e(33816).DRAGGERSIZE;F.initInteractions=function(r){var t=r._fullLayout;if(r._context.staticPlot){d.select(r).selectAll(".drag").remove();return}if(!(!t._has("cartesian")&&!t._has("splom"))){var o=Object.keys(t._plots||{}).sort(function(f,u){if((t._plots[f].mainplot&&!0)===(t._plots[u].mainplot&&!0)){var l=f.split("y"),m=u.split("y");return l[0]===m[0]?Number(l[1]||1)-Number(m[1]||1):Number(l[0]||1)-Number(m[0]||1)}return t._plots[f].mainplot?1:-1});o.forEach(function(f){var u=t._plots[f],l=u.xaxis,m=u.yaxis;if(!u.mainplot){var h=T(r,u,l._offset,m._offset,l._length,m._length,"ns","ew");h.onmousemove=function(a){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===f&&r._fullLayout._plots[f]&&S.hover(r,a,f)},S.hover(r,a,f),r._fullLayout._lasthover=h,r._fullLayout._hoversubplot=f},h.onmouseout=function(a){r._dragging||(r._fullLayout._hoversubplot=null,n.unhover(r,a))},r._context.showAxisDragHandles&&(T(r,u,l._offset-v,m._offset-v,v,v,"n","w"),T(r,u,l._offset+l._length,m._offset-v,v,v,"n","e"),T(r,u,l._offset-v,m._offset+m._length,v,v,"s","w"),T(r,u,l._offset+l._length,m._offset+m._length,v,v,"s","e"))}if(r._context.showAxisDragHandles){if(f===l._mainSubplot){var w=l._mainLinePosition;l.side==="top"&&(w-=v),T(r,u,l._offset+l._length*.1,w,l._length*.8,v,"","ew"),T(r,u,l._offset,w,l._length*.1,v,"","w"),T(r,u,l._offset+l._length*.9,w,l._length*.1,v,"","e")}if(f===m._mainSubplot){var c=m._mainLinePosition;m.side!=="right"&&(c-=v),T(r,u,c,m._offset+m._length*.1,v,m._length*.8,"ns",""),T(r,u,c,m._offset+m._length*.9,v,m._length*.1,"s",""),T(r,u,c,m._offset,v,m._length*.1,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(f){f.target=r._fullLayout._lasthover,S.hover(r,f,t._hoversubplot)},i.onclick=function(f){f.target=r._fullLayout._lasthover,S.click(r,f)},i.onmousedown=function(f){r._fullLayout._lasthover.onmousedown(f)},F.updateFx(r)}},F.updateFx=function(g){var r=g._fullLayout,t=r.dragmode==="pan"?"move":"crosshair";E(r._draggers,t)}},36632:function(U,F,e){var d=e(24040),S=e(3400),n=e(79811);U.exports=function(T){return function(g,r){var t=g[T];if(Array.isArray(t))for(var o=d.subplotsRegistry.cartesian,i=o.idRegex,f=r._subplots,u=f.xaxis,l=f.yaxis,m=f.cartesian,h=r._has("cartesian")||r._has("gl2d"),w=0;w<t.length;w++){var c=t[w];if(S.isPlainObject(c)){var a=n.cleanId(c.xref,"x",!1),p=n.cleanId(c.yref,"y",!1),x=i.x.test(a),A=i.y.test(p);if(x||A){h||S.pushUnique(r._basePlotModules,o);var P=!1;x&&u.indexOf(a)===-1&&(u.push(a),P=!0),A&&l.indexOf(p)===-1&&(l.push(p),P=!0),P&&x&&A&&m.push(a+p)}}}}}},57952:function(U,F,e){var d=e(33428),S=e(24040),n=e(3400),E=e(7316),T=e(43616),v=e(84888)._M,g=e(79811),r=e(33816),t=e(9616),o=n.ensureSingle;function i(w,c,a){return n.ensureSingle(w,c,a,function(p){p.datum(a)})}F.name="cartesian",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=r.idRegex,F.attrRegex=r.attrRegex,F.attributes=e(26720),F.layoutAttributes=e(94724),F.supplyLayoutDefaults=e(67352),F.transitionAxes=e(73736),F.finalizeSubplots=function(w,c){var a=c._subplots,p=a.xaxis,x=a.yaxis,A=a.cartesian,P=A.concat(a.gl2d||[]),y={},C={},M,s,_;for(M=0;M<P.length;M++){var b=P[M].split("y");y[b[0]]=1,C["y"+b[1]]=1}for(M=0;M<p.length;M++)s=p[M],y[s]||(_=(w[g.id2name(s)]||{}).anchor,r.idRegex.y.test(_)||(_="y"),A.push(s+_),P.push(s+_),C[_]||(C[_]=1,n.pushUnique(x,_)));for(M=0;M<x.length;M++)_=x[M],C[_]||(s=(w[g.id2name(_)]||{}).anchor,r.idRegex.x.test(s)||(s="x"),A.push(s+_),P.push(s+_),y[s]||(y[s]=1,n.pushUnique(p,s)));if(!P.length){s="",_="";for(var k in w)if(r.attrRegex.test(k)){var D=k.charAt(0);D==="x"?(!s||+k.substr(5)<+s.substr(5))&&(s=k):(!_||+k.substr(5)<+_.substr(5))&&(_=k)}s=s?g.name2id(s):"x",_=_?g.name2id(_):"y",p.push(s),x.push(_),A.push(s+_)}},F.plot=function(w,c,a,p){var x=w._fullLayout,A=x._subplots.cartesian,P=w.calcdata,y;if(!Array.isArray(c))for(c=[],y=0;y<P.length;y++)c.push(y);for(y=0;y<A.length;y++){for(var C=A[y],M=x._plots[C],s=[],_,b=0;b<P.length;b++){var k=P[b],D=k[0].trace;D.xaxis+D.yaxis===C&&((c.indexOf(D.index)!==-1||D.carpet)&&(_&&_[0].trace.xaxis+_[0].trace.yaxis===C&&["tonextx","tonexty","tonext"].indexOf(D.fill)!==-1&&s.indexOf(_)===-1&&s.push(_),s.push(k)),_=k)}f(w,M,s,a,p)}};function f(w,c,a,p,x){for(var A=r.traceLayerClasses,P=w._fullLayout,y=P._modules,C,M,s,_={},b=0;b<a.length;b++){var k=a[b][0].trace,D=k.zorder||0;_[D]||(_[D]=[]),_[D].push(a[b])}for(var V=[],O=[],N=Object.keys(_).map(Number).sort(n.sorterAsc),B=0;B<N.length;B++)for(var z=N[B],H=0;H<y.length;H++){C=y[H];var X=C.name,$=S.modules[X].categories;if($.svg){var ne=C.layerName||X+"layer",q=ne+(B?Number(B)+1:""),ue=C.plot;M=v(a,ue,z),s=M[0],a=M[1],s.length&&V.push({i:A.indexOf(ne),zorder:B,className:q,plotMethod:ue,cdModule:s}),$.zoomScale&&O.push("."+q)}}V.sort(function(ie,K){return(ie.zorder||0)-(K.zorder||0)||ie.i-K.i});var te=c.plot.selectAll("g.mlayer").data(V,function(ie){return ie.className});if(te.enter().append("g").attr("class",function(ie){return ie.className}).classed("mlayer",!0).classed("rangeplot",c.isRangePlot),te.exit().remove(),te.order(),te.each(function(ie){var K=d.select(this),ee=ie.className;ie.plotMethod(w,c,ie.cdModule,K,p,x),r.clipOnAxisFalseQuery.indexOf("."+ee)===-1&&T.setClipUrl(K,c.layerClipId,w)}),P._has("scattergl")&&(C=S.getModule("scattergl"),s=v(a,C)[0],C.plot(w,c,s)),!w._context.staticPlot&&(c._hasClipOnAxisFalse&&(c.clipOnAxisFalseTraces=c.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),O.length)){var J=c.plot.selectAll(O.join(",")).selectAll(".trace");c.zoomScalePts=J.selectAll("path.point"),c.zoomScaleTxt=J.selectAll(".textpoint")}}F.clean=function(w,c,a,p){var x=p._plots||{},A=c._plots||{},P=p._subplots||{},y,C,M;if(p._hasOnlyLargeSploms&&!c._hasOnlyLargeSploms)for(M in x)y=x[M],y.plotgroup&&y.plotgroup.remove();var s=p._has&&p._has("gl"),_=c._has&&c._has("gl");if(s&&!_)for(M in x)y=x[M],y._scene&&y._scene.destroy();if(P.xaxis&&P.yaxis){var b=g.listIds({_fullLayout:p});for(C=0;C<b.length;C++){var k=b[C];c[g.id2name(k)]||p._infolayer.selectAll(".g-"+k+"title").remove()}}var D=p._has&&p._has("cartesian"),V=c._has&&c._has("cartesian");if(D&&!V)m(p._cartesianlayer.selectAll(".subplot"),p),p._defs.selectAll(".axesclip").remove(),delete p._axisConstraintGroups,delete p._axisMatchGroups;else if(P.cartesian)for(C=0;C<P.cartesian.length;C++){var O=P.cartesian[C];if(!A[O]){var N="."+O+",."+O+"-x,."+O+"-y";p._cartesianlayer.selectAll(N).remove(),h(O,p)}}},F.drawFramework=function(w){var c=w._fullLayout,a=u(w),p=c._cartesianlayer.selectAll(".subplot").data(a,String);p.enter().append("g").attr("class",function(x){return"subplot "+x[0]}),p.order(),p.exit().call(m,c),p.each(function(x){var A=x[0],P=c._plots[A];P.plotgroup=d.select(this),l(w,P),P.draglayer=o(c._draggers,"g",A)})},F.rangePlot=function(w,c,a){l(w,c),f(w,c,a),E.style(w)};function u(w){var c=w._fullLayout,a=c._subplots.cartesian,p=a.length,x,A,P,y,C,M,s=[],_=[];for(x=0;x<p;x++){P=a[x],y=c._plots[P],C=y.xaxis,M=y.yaxis;var b=C._mainAxis,k=M._mainAxis,D=b._id+k._id,V=c._plots[D];y.overlays=[],D!==P&&V?(y.mainplot=D,y.mainplotinfo=V,_.push(P)):(y.mainplot=void 0,y.mainplotinfo=void 0,s.push(P))}for(x=0;x<_.length;x++)P=_[x],y=c._plots[P],y.mainplotinfo.overlays.push(y);var O=s.concat(_),N=new Array(p);for(x=0;x<p;x++){P=O[x],y=c._plots[P],C=y.xaxis,M=y.yaxis;var B=[P,C.layer,M.layer,C.overlaying||"",M.overlaying||""];for(A=0;A<y.overlays.length;A++)B.push(y.overlays[A].id);N[x]=B}return N}function l(w,c){var a=c.plotgroup,p=c.id,x=r.layerValue2layerClass[c.xaxis.layer],A=r.layerValue2layerClass[c.yaxis.layer],P=w._fullLayout._hasOnlyLargeSploms;if(c.mainplot){var M=c.mainplotinfo,s=M.plotgroup,_=p+"-x",b=p+"-y";c.minorGridlayer=M.minorGridlayer,c.gridlayer=M.gridlayer,c.zerolinelayer=M.zerolinelayer,o(M.overlinesBelow,"path",_),o(M.overlinesBelow,"path",b),o(M.overaxesBelow,"g",_),o(M.overaxesBelow,"g",b),c.plot=o(M.overplot,"g",p),o(M.overlinesAbove,"path",_),o(M.overlinesAbove,"path",b),o(M.overaxesAbove,"g",_),o(M.overaxesAbove,"g",b),c.xlines=s.select(".overlines-"+x).select("."+_),c.ylines=s.select(".overlines-"+A).select("."+b),c.xaxislayer=s.select(".overaxes-"+x).select("."+_),c.yaxislayer=s.select(".overaxes-"+A).select("."+b)}else if(P)c.xlines=o(a,"path","xlines-above"),c.ylines=o(a,"path","ylines-above"),c.xaxislayer=o(a,"g","xaxislayer-above"),c.yaxislayer=o(a,"g","yaxislayer-above");else{var y=o(a,"g","layer-subplot");c.shapelayer=o(y,"g","shapelayer"),c.imagelayer=o(y,"g","imagelayer"),c.minorGridlayer=o(a,"g","minor-gridlayer"),c.gridlayer=o(a,"g","gridlayer"),c.zerolinelayer=o(a,"g","zerolinelayer");var C=o(a,"g","layer-between");c.shapelayerBetween=o(C,"g","shapelayer"),c.imagelayerBetween=o(C,"g","imagelayer"),o(a,"path","xlines-below"),o(a,"path","ylines-below"),c.overlinesBelow=o(a,"g","overlines-below"),o(a,"g","xaxislayer-below"),o(a,"g","yaxislayer-below"),c.overaxesBelow=o(a,"g","overaxes-below"),c.plot=o(a,"g","plot"),c.overplot=o(a,"g","overplot"),c.xlines=o(a,"path","xlines-above"),c.ylines=o(a,"path","ylines-above"),c.overlinesAbove=o(a,"g","overlines-above"),o(a,"g","xaxislayer-above"),o(a,"g","yaxislayer-above"),c.overaxesAbove=o(a,"g","overaxes-above"),c.xlines=a.select(".xlines-"+x),c.ylines=a.select(".ylines-"+A),c.xaxislayer=a.select(".xaxislayer-"+x),c.yaxislayer=a.select(".yaxislayer-"+A)}P||(i(c.minorGridlayer,"g",c.xaxis._id),i(c.minorGridlayer,"g",c.yaxis._id),c.minorGridlayer.selectAll("g").map(function(k){return k[0]}).sort(g.idSort),i(c.gridlayer,"g",c.xaxis._id),i(c.gridlayer,"g",c.yaxis._id),c.gridlayer.selectAll("g").map(function(k){return k[0]}).sort(g.idSort)),c.xlines.style("fill","none").classed("crisp",!0),c.ylines.style("fill","none").classed("crisp",!0)}function m(w,c){if(w){var a={};w.each(function(C){var M=C[0],s=d.select(this);s.remove(),h(M,c),a[M]=!0});for(var p in c._plots)for(var x=c._plots[p],A=x.overlays||[],P=0;P<A.length;P++){var y=A[P];a[y.id]&&y.plot.selectAll(".trace").remove()}}}function h(w,c){c._draggers.selectAll("g."+w).remove(),c._defs.select("#clip"+c._uid+w+"plot").remove()}F.toSVG=function(w){var c=w._fullLayout._glimages,a=d.select(w).selectAll(".svg-container"),p=a.filter(function(A,P){return P===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function x(){var A=this,P=A.toDataURL("image/png"),y=c.append("svg:image");y.attr({xmlns:t.svg,"xlink:href":P,preserveAspectRatio:"none",x:0,y:0,width:A.style.width,height:A.style.height})}p.each(x)},F.updateFx=e(42464).updateFx},94724:function(U,F,e){var d=e(25376),S=e(22548),n=e(98192).u,E=e(92880).extendFlat,T=e(31780).templatedArray,v=e(29736).descriptionWithDates,g=e(39032).ONEDAY,r=e(33816),t=r.HOUR_PATTERN,o=r.WEEKDAY_PATTERN,i={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},f=E({},i,{values:i.values.slice().concat(["sync"])});function u(C){return{valType:"integer",min:0,dflt:C?5:0,editType:"ticks"}}var l={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},m={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"data_array",editType:"ticks"},w={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function c(C){var M={valType:"number",min:0,editType:"ticks"};return C||(M.dflt=5),M}function a(C){var M={valType:"number",min:0,editType:"ticks"};return C||(M.dflt=1),M}var p={valType:"color",dflt:S.defaultLine,editType:"ticks"},x={valType:"color",dflt:S.lightLine,editType:"ticks"};function A(C){var M={valType:"number",min:0,editType:"ticks"};return C||(M.dflt=1),M}var P=E({},n,{editType:"ticks"}),y={valType:"boolean",editType:"ticks"};U.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:S.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:d({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:T("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[o,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:g},editType:"calc"}),tickmode:f,nticks:u(),tick0:l,dtick:m,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:h,ticktext:{valType:"data_array",editType:"ticks"},ticks:w,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:c(),tickwidth:a(),tickcolor:p,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:E({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:v("tick label")},tickformatstops:T("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:v("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:S.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:y,gridcolor:x,gridwidth:A(),griddash:P,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:S.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:S.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},minor:{tickmode:i,nticks:u("minor"),tick0:l,dtick:m,tickvals:h,ticks:w,ticklen:c("minor"),tickwidth:a("minor"),tickcolor:p,gridcolor:x,gridwidth:A("minor"),griddash:P,showgrid:y,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:d({editType:"ticks"})}}},67352:function(U,F,e){var d=e(3400),S=e(76308),n=e(10624).isUnifiedHover,E=e(41008),T=e(31780),v=e(64859),g=e(94724),r=e(14944),t=e(28336),o=e(71888),i=e(37668),f=e(79811),u=f.id2name,l=f.name2id,m=e(33816).AX_ID_PATTERN,h=e(24040),w=h.traceIs,c=h.getComponentMethod;function a(p,x,A){Array.isArray(p[x])?p[x].push(A):p[x]=[A]}U.exports=function(x,A,P){var y=A.autotypenumbers,C={},M={},s={},_={},b={},k={},D={},V={},O={},N={},B,z;for(B=0;B<P.length;B++){var H=P[B];if(!(!w(H,"cartesian")&&!w(H,"gl2d"))){var X;if(H.xaxis)X=u(H.xaxis),a(C,X,H);else if(H.xaxes)for(z=0;z<H.xaxes.length;z++)a(C,u(H.xaxes[z]),H);var $;if(H.yaxis)$=u(H.yaxis),a(C,$,H);else if(H.yaxes)for(z=0;z<H.yaxes.length;z++)a(C,u(H.yaxes[z]),H);if(H.type==="funnel"?H.orientation==="h"?(X&&(M[X]=!0),$&&(D[$]=!0)):$&&(s[$]=!0):H.type==="image"?($&&(V[$]=!0),X&&(V[X]=!0)):($&&(b[$]=!0,k[$]=!0),(!w(H,"carpet")||H.type==="carpet"&&!H._cheater)&&X&&(_[X]=!0)),H.type==="carpet"&&H._cheater&&X&&(M[X]=!0),w(H,"2dMap")&&(O[X]=!0,O[$]=!0),w(H,"oriented")){var ne=H.orientation==="h"?$:X;N[ne]=!0}}}var q=A._subplots,ue=q.xaxis,te=q.yaxis,J=d.simpleMap(ue,u),ie=d.simpleMap(te,u),K=J.concat(ie),ee=S.background;ue.length&&te.length&&(ee=d.coerce(x,A,v,"plot_bgcolor"));var le=S.combine(ee,A.paper_bgcolor),j,Z,fe,re,ce;function xe(){var pe=C[j]||[];ce._traceIndices=pe.map(function(be){return be._expandedIndex}),ce._annIndices=[],ce._shapeIndices=[],ce._selectionIndices=[],ce._imgIndices=[],ce._subplotsWith=[],ce._counterAxes=[],ce._name=ce._attr=j,ce._id=Z}function Te(pe,be){return d.coerce(re,ce,g,pe,be)}function we(pe,be){return d.coerce2(re,ce,g,pe,be)}function _e(pe){return pe==="x"?te:ue}function ke(pe,be){for(var Ue=pe==="x"?J:ie,et=[],st=0;st<Ue.length;st++){var lt=Ue[st];lt!==be&&!(x[lt]||{}).overlaying&&et.push(l(lt))}return et}var Ne={x:_e("x"),y:_e("y")},Ee=Ne.x.concat(Ne.y),ze={},Ce=[];function Oe(){var pe=re.matches;m.test(pe)&&Ee.indexOf(pe)===-1&&(ze[pe]=re.type,Ce=Object.keys(ze))}var Le=E(x,A),Ge=n(Le);for(B=0;B<K.length;B++){j=K[B],Z=l(j),fe=j.charAt(0),d.isPlainObject(x[j])||(x[j]={}),re=x[j],ce=T.newContainer(A,j,fe+"axis"),xe();var rt=fe==="x"&&!_[j]&&M[j]||fe==="y"&&!b[j]&&s[j],ot=fe==="y"&&(!k[j]&&D[j]||V[j]),$e={hasMinor:!0,letter:fe,font:A.font,outerTicks:O[j],showGrid:!N[j],data:C[j]||[],bgColor:le,calendar:A.calendar,automargin:!0,visibleDflt:rt,reverseDflt:ot,autotypenumbersDflt:y,splomStash:((A._splomAxes||{})[fe]||{})[Z],noAutotickangles:fe==="y"};Te("uirevision",A.uirevision),r(re,ce,Te,$e),t(re,ce,Te,$e,A);var qe=Ge&&fe===Le.charAt(0),ht=we("spikecolor",Ge?ce.color:void 0),vt=we("spikethickness",Ge?1.5:void 0),pt=we("spikedash",Ge?"dot":void 0),wt=we("spikemode",Ge?"across":void 0),Et=we("spikesnap"),nt=Te("showspikes",!!qe||!!ht||!!vt||!!pt||!!wt||!!Et);nt||(delete ce.spikecolor,delete ce.spikethickness,delete ce.spikedash,delete ce.spikemode,delete ce.spikesnap);var Fe=u(re.overlaying),We=[0,1];if(A[Fe]!==void 0){var Ze=u(A[Fe].anchor);A[Ze]!==void 0&&(We=A[Ze].domain)}i(re,ce,Te,{letter:fe,counterAxes:Ne[fe],overlayableAxes:ke(fe,j),grid:A.grid,overlayingDomain:We}),Te("title.standoff"),Oe(),ce._input=re}for(B=0;B<Ce.length;){Z=Ce[B++],j=u(Z),fe=j.charAt(0),d.isPlainObject(x[j])||(x[j]={}),re=x[j],ce=T.newContainer(A,j,fe+"axis"),xe();var Ye={letter:fe,font:A.font,outerTicks:O[j],showGrid:!N[j],data:[],bgColor:le,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:y,splomStash:((A._splomAxes||{})[fe]||{})[Z]};Te("uirevision",A.uirevision),ce.type=ze[Z]||"linear",t(re,ce,Te,Ye,A),i(re,ce,Te,{letter:fe,counterAxes:Ne[fe],overlayableAxes:ke(fe,j),grid:A.grid}),Te("fixedrange"),Oe(),ce._input=re}var Ie=c("rangeslider","handleDefaults"),De=c("rangeselector","handleDefaults");for(B=0;B<J.length;B++)j=J[B],re=x[j],ce=A[j],Ie(x,A,j),ce.type==="date"&&De(re,ce,A,ie,ce.calendar),Te("fixedrange");for(B=0;B<ie.length;B++){j=ie[B],re=x[j],ce=A[j];var je=A[u(ce.anchor)],Re=c("rangeslider","isVisible")(je);Te("fixedrange",Re)}o.handleDefaults(x,A,{axIds:Ee.concat(Ce).sort(f.idSort),axHasImage:V})}},42136:function(U,F,e){var d=e(49760).mix,S=e(22548),n=e(3400);U.exports=function(T,v,g,r){r=r||{};var t=r.dfltColor;function o(s,_){return n.coerce2(T,v,r.attributes,s,_)}var i=o("linecolor",t),f=o("linewidth"),u=g("showline",r.showLine||!!i||!!f);u||(delete v.linecolor,delete v.linewidth);var l=d(t,r.bgColor,r.blend||S.lightFraction).toRgbString(),m=o("gridcolor",l),h=o("gridwidth"),w=o("griddash"),c=g("showgrid",r.showGrid||!!m||!!h||!!w);if(c||(delete v.gridcolor,delete v.gridwidth,delete v.griddash),r.hasMinor){var a=d(v.gridcolor,r.bgColor,67).toRgbString(),p=o("minor.gridcolor",a),x=o("minor.gridwidth",v.gridwidth||1),A=o("minor.griddash",v.griddash||"solid"),P=g("minor.showgrid",!!p||!!x||!!A);P||(delete v.minor.gridcolor,delete v.minor.gridwidth,delete v.minor.griddash)}if(!r.noZeroLine){var y=o("zerolinecolor",t),C=o("zerolinewidth"),M=g("zeroline",r.showGrid||!!y||!!C);M||(delete v.zerolinecolor,delete v.zerolinewidth)}}},37668:function(U,F,e){var d=e(38248),S=e(3400);U.exports=function(E,T,v,g){var r=g.counterAxes||[],t=g.overlayableAxes||[],o=g.letter,i=g.grid,f=g.overlayingDomain,u,l,m,h,w,c;i&&(l=i._domains[o][i._axisMap[T._id]],u=i._anchors[T._id],l&&(m=i[o+"side"].split(" ")[0],h=i.domain[o][m==="right"||m==="top"?1:0])),l=l||[0,1],u=u||(d(E.position)?"free":r[0]||"free"),m=m||(o==="x"?"bottom":"left"),h=h||0,w=0,c=!1;var a=S.coerce(E,T,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:u}},"anchor"),p=S.coerce(E,T,{side:{valType:"enumerated",values:o==="x"?["bottom","top"]:["left","right"],dflt:m}},"side");if(a==="free"){if(o==="y"){var x=v("autoshift");x&&(h=p==="left"?f[0]:f[1],c=T.automargin?T.automargin:!0,w=p==="left"?-3:3),v("shift",w)}v("position",h)}v("automargin",c);var A=!1;if(t.length&&(A=S.coerce(E,T,{overlaying:{valType:"enumerated",values:[!1].concat(t),dflt:!1}},"overlaying")),!A){var P=v("domain",l);P[0]>P[1]-.000244140625&&(T.domain=l),S.noneOrAll(E.domain,T.domain,l),T.tickmode==="sync"&&(T.tickmode="auto")}return v("layer"),T}},42568:function(U,F,e){var d=e(85024);U.exports=function(n,E,T,v,g){g||(g={});var r=g.tickSuffixDflt,t=d(n),o=T("tickprefix");o&&T("showtickprefix",t);var i=T("ticksuffix",r);i&&T("showticksuffix",t)}},96312:function(U,F,e){var d=e(76808);U.exports=function(n,E,T,v){var g=E._template||{},r=E.type||g.type||"-";T("minallowed"),T("maxallowed");var t=T("range");if(!t){var o;!v.noInsiderange&&r!=="log"&&(o=T("insiderange"),o&&(o[0]===null||o[1]===null)&&(E.insiderange=!1,o=void 0),o&&(t=T("range",o)))}var i=E.getAutorangeDflt(t,v),f=T("autorange",i),u;t&&(t[0]===null&&t[1]===null||(t[0]===null||t[1]===null)&&(f==="reversed"||f===!0)||t[0]!==null&&(f==="min"||f==="max reversed")||t[1]!==null&&(f==="max"||f==="min reversed"))&&(t=void 0,delete E.range,E.autorange=!0,u=!0),u||(i=E.getAutorangeDflt(t,v),f=T("autorange",i)),f&&(d(T,f,t),(r==="linear"||r==="-")&&T("rangemode")),E.cleanRange()}},21160:function(U,F,e){var d=e(84284).FROM_BL;U.exports=function(n,E,T){T===void 0&&(T=d[n.constraintoward||"center"]);var v=[n.r2l(n.range[0]),n.r2l(n.range[1])],g=v[0]+(v[1]-v[0])*T;n.range=n._input.range=[n.l2r(g+(v[0]-g)*E),n.l2r(g+(v[1]-g)*E)],n.setScale()}},78344:function(U,F,e){var d=e(33428),S=e(94336).E9,n=e(3400),E=n.numberFormat,T=e(38248),v=n.cleanNumber,g=n.ms2DateTime,r=n.dateTime2ms,t=n.ensureNumber,o=n.isArrayOrTypedArray,i=e(39032),f=i.FP_SAFE,u=i.BADNUM,l=i.LOG_CLIP,m=i.ONEWEEK,h=i.ONEDAY,w=i.ONEHOUR,c=i.ONEMIN,a=i.ONESEC,p=e(79811),x=e(33816),A=x.HOUR_PATTERN,P=x.WEEKDAY_PATTERN;function y(M){return Math.pow(10,M)}function C(M){return M!=null}U.exports=function(s,_){_=_||{};var b=s._id||"x",k=b.charAt(0);function D(K,ee){if(K>0)return Math.log(K)/Math.LN10;if(K<=0&&ee&&s.range&&s.range.length===2){var le=s.range[0],j=s.range[1];return .5*(le+j-2*l*Math.abs(le-j))}else return u}function V(K,ee,le,j){if((j||{}).msUTC&&T(K))return+K;var Z=r(K,le||s.calendar);if(Z===u)if(T(K)){K=+K;var fe=Math.floor(n.mod(K+.05,1)*10),re=Math.round(K-fe/10);Z=r(new Date(re))+fe/10}else return u;return Z}function O(K,ee,le){return g(K,ee,le||s.calendar)}function N(K){return s._categories[Math.round(K)]}function B(K){if(C(K)){if(s._categoriesMap===void 0&&(s._categoriesMap={}),s._categoriesMap[K]!==void 0)return s._categoriesMap[K];s._categories.push(typeof K=="number"?String(K):K);var ee=s._categories.length-1;return s._categoriesMap[K]=ee,ee}return u}function z(K,ee){for(var le=new Array(ee),j=0;j<ee;j++){var Z=(K[0]||[])[j],fe=(K[1]||[])[j];le[j]=H([Z,fe])}return le}function H(K){if(s._categoriesMap)return s._categoriesMap[K]}function X(K){var ee=H(K);if(ee!==void 0)return ee;if(T(K))return+K}function $(K){return T(K)?+K:H(K)}function ne(K,ee,le){return d.round(le+ee*K,2)}function q(K,ee,le){return(K-le)/ee}var ue=function(ee){return T(ee)?ne(ee,s._m,s._b):u},te=function(K){return q(K,s._m,s._b)};if(s.rangebreaks){var J=k==="y";ue=function(K){if(!T(K))return u;var ee=s._rangebreaks.length;if(!ee)return ne(K,s._m,s._b);var le=J;s.range[0]>s.range[1]&&(le=!le);for(var j=le?-1:1,Z=j*K,fe=0,re=0;re<ee;re++){var ce=j*s._rangebreaks[re].min,xe=j*s._rangebreaks[re].max;if(Z<ce)break;if(Z>xe)fe=re+1;else{fe=Z<(ce+xe)/2?re:re+1;break}}var Te=s._B[fe]||0;return isFinite(Te)?ne(K,s._m2,Te):0},te=function(K){var ee=s._rangebreaks.length;if(!ee)return q(K,s._m,s._b);for(var le=0,j=0;j<ee&&!(K<s._rangebreaks[j].pmin);j++)K>s._rangebreaks[j].pmax&&(le=j+1);return q(K,s._m2,s._B[le])}}s.c2l=s.type==="log"?D:t,s.l2c=s.type==="log"?y:t,s.l2p=ue,s.p2l=te,s.c2p=s.type==="log"?function(K,ee){return ue(D(K,ee))}:ue,s.p2c=s.type==="log"?function(K){return y(te(K))}:te,["linear","-"].indexOf(s.type)!==-1?(s.d2r=s.r2d=s.d2c=s.r2c=s.d2l=s.r2l=v,s.c2d=s.c2r=s.l2d=s.l2r=t,s.d2p=s.r2p=function(K){return s.l2p(v(K))},s.p2d=s.p2r=te,s.cleanPos=t):s.type==="log"?(s.d2r=s.d2l=function(K,ee){return D(v(K),ee)},s.r2d=s.r2c=function(K){return y(v(K))},s.d2c=s.r2l=v,s.c2d=s.l2r=t,s.c2r=D,s.l2d=y,s.d2p=function(K,ee){return s.l2p(s.d2r(K,ee))},s.p2d=function(K){return y(te(K))},s.r2p=function(K){return s.l2p(v(K))},s.p2r=te,s.cleanPos=t):s.type==="date"?(s.d2r=s.r2d=n.identity,s.d2c=s.r2c=s.d2l=s.r2l=V,s.c2d=s.c2r=s.l2d=s.l2r=O,s.d2p=s.r2p=function(K,ee,le){return s.l2p(V(K,0,le))},s.p2d=s.p2r=function(K,ee,le){return O(te(K),ee,le)},s.cleanPos=function(K){return n.cleanDate(K,u,s.calendar)}):s.type==="category"?(s.d2c=s.d2l=B,s.r2d=s.c2d=s.l2d=N,s.d2r=s.d2l_noadd=X,s.r2c=function(K){var ee=$(K);return ee!==void 0?ee:s.fraction2r(.5)},s.l2r=s.c2r=t,s.r2l=$,s.d2p=function(K){return s.l2p(s.r2c(K))},s.p2d=function(K){return N(te(K))},s.r2p=s.d2p,s.p2r=te,s.cleanPos=function(K){return typeof K=="string"&&K!==""?K:t(K)}):s.type==="multicategory"&&(s.r2d=s.c2d=s.l2d=N,s.d2r=s.d2l_noadd=X,s.r2c=function(K){var ee=X(K);return ee!==void 0?ee:s.fraction2r(.5)},s.r2c_just_indices=H,s.l2r=s.c2r=t,s.r2l=X,s.d2p=function(K){return s.l2p(s.r2c(K))},s.p2d=function(K){return N(te(K))},s.r2p=s.d2p,s.p2r=te,s.cleanPos=function(K){return Array.isArray(K)||typeof K=="string"&&K!==""?K:t(K)},s.setupMultiCategory=function(K){var ee=s._traceIndices,le,j,Z=s._matchGroup;if(Z&&s._categories.length===0){for(var fe in Z)if(fe!==b){var re=_[p.id2name(fe)];ee=ee.concat(re._traceIndices)}}var ce=[[0,{}],[0,{}]],xe=[];for(le=0;le<ee.length;le++){var Te=K[ee[le]];if(k in Te){var we=Te[k],_e=Te._length||n.minRowLength(we);if(o(we[0])&&o(we[1]))for(j=0;j<_e;j++){var ke=we[0][j],Ne=we[1][j];C(ke)&&C(Ne)&&(xe.push([ke,Ne]),ke in ce[0][1]||(ce[0][1][ke]=ce[0][0]++),Ne in ce[1][1]||(ce[1][1][Ne]=ce[1][0]++))}}}for(xe.sort(function(Ee,ze){var Ce=ce[0][1],Oe=Ce[Ee[0]]-Ce[ze[0]];if(Oe)return Oe;var Le=ce[1][1];return Le[Ee[1]]-Le[ze[1]]}),le=0;le<xe.length;le++)B(xe[le])}),s.fraction2r=function(K){var ee=s.r2l(s.range[0]),le=s.r2l(s.range[1]);return s.l2r(ee+K*(le-ee))},s.r2fraction=function(K){var ee=s.r2l(s.range[0]),le=s.r2l(s.range[1]);return(s.r2l(K)-ee)/(le-ee)},s.limitRange=function(K){var ee=s.minallowed,le=s.maxallowed;if(!(ee===void 0&&le===void 0)){K||(K="range");var j=n.nestedProperty(s,K).get(),Z=n.simpleMap(j,s.r2l),fe=Z[1]<Z[0];fe&&Z.reverse();var re=n.simpleMap([ee,le],s.r2l);if(ee!==void 0&&Z[0]<re[0]&&(j[fe?1:0]=ee),le!==void 0&&Z[1]>re[1]&&(j[fe?0:1]=le),j[0]===j[1]){var ce=s.l2r(ee),xe=s.l2r(le);if(ee!==void 0){var Te=ce+1;le!==void 0&&(Te=Math.min(Te,xe)),j[fe?1:0]=Te}if(le!==void 0){var we=xe+1;ee!==void 0&&(we=Math.max(we,ce)),j[fe?0:1]=we}}}},s.cleanRange=function(K,ee){s._cleanRange(K,ee),s.limitRange(K)},s._cleanRange=function(K,ee){ee||(ee={}),K||(K="range");var le=n.nestedProperty(s,K).get(),j,Z;if(s.type==="date"?Z=n.dfltRange(s.calendar):k==="y"?Z=x.DFLTRANGEY:s._name==="realaxis"?Z=[0,1]:Z=ee.dfltRange||x.DFLTRANGEX,Z=Z.slice(),(s.rangemode==="tozero"||s.rangemode==="nonnegative")&&(Z[0]=0),!le||le.length!==2){n.nestedProperty(s,K).set(Z);return}var fe=le[0]===null,re=le[1]===null;for(s.type==="date"&&!s.autorange&&(le[0]=n.cleanDate(le[0],u,s.calendar),le[1]=n.cleanDate(le[1],u,s.calendar)),j=0;j<2;j++)if(s.type==="date"){if(!n.isDateTime(le[j],s.calendar)){s[K]=Z;break}if(s.r2l(le[0])===s.r2l(le[1])){var ce=n.constrain(s.r2l(le[0]),n.MIN_MS+1e3,n.MAX_MS-1e3);le[0]=s.l2r(ce-1e3),le[1]=s.l2r(ce+1e3);break}}else{if(!T(le[j]))if(!(fe||re)&&T(le[1-j]))le[j]=le[1-j]*(j?10:.1);else{s[K]=Z;break}if(le[j]<-f?le[j]=-f:le[j]>f&&(le[j]=f),le[0]===le[1]){var xe=Math.max(1,Math.abs(le[0]*1e-6));le[0]-=xe,le[1]+=xe}}},s.setScale=function(K){var ee=_._size;if(s.overlaying){var le=p.getFromId({_fullLayout:_},s.overlaying);s.domain=le.domain}var j=K&&s._r?"_r":"range",Z=s.calendar;s.cleanRange(j);var fe=s.r2l(s[j][0],Z),re=s.r2l(s[j][1],Z),ce=k==="y";if(ce?(s._offset=ee.t+(1-s.domain[1])*ee.h,s._length=ee.h*(s.domain[1]-s.domain[0]),s._m=s._length/(fe-re),s._b=-s._m*re):(s._offset=ee.l+s.domain[0]*ee.w,s._length=ee.w*(s.domain[1]-s.domain[0]),s._m=s._length/(re-fe),s._b=-s._m*fe),s._rangebreaks=[],s._lBreaks=0,s._m2=0,s._B=[],s.rangebreaks){var xe,Te;if(s._rangebreaks=s.locateBreaks(Math.min(fe,re),Math.max(fe,re)),s._rangebreaks.length){for(xe=0;xe<s._rangebreaks.length;xe++)Te=s._rangebreaks[xe],s._lBreaks+=Math.abs(Te.max-Te.min);var we=ce;fe>re&&(we=!we),we&&s._rangebreaks.reverse();var _e=we?-1:1;for(s._m2=_e*s._length/(Math.abs(re-fe)-s._lBreaks),s._B.push(-s._m2*(ce?re:fe)),xe=0;xe<s._rangebreaks.length;xe++)Te=s._rangebreaks[xe],s._B.push(s._B[s._B.length-1]-_e*s._m2*(Te.max-Te.min));for(xe=0;xe<s._rangebreaks.length;xe++)Te=s._rangebreaks[xe],Te.pmin=ue(Te.min),Te.pmax=ue(Te.max)}}if(!isFinite(s._m)||!isFinite(s._b)||s._length<0)throw _._replotting=!1,new Error("Something went wrong with axis scaling")},s.maskBreaks=function(K){var ee=s.rangebreaks||[],le,j,Z,fe,re;ee._cachedPatterns||(ee._cachedPatterns=ee.map(function(Ce){return Ce.enabled&&Ce.bounds?n.simpleMap(Ce.bounds,Ce.pattern?v:s.d2c):null})),ee._cachedValues||(ee._cachedValues=ee.map(function(Ce){return Ce.enabled&&Ce.values?n.simpleMap(Ce.values,s.d2c).sort(n.sorterAsc):null}));for(var ce=0;ce<ee.length;ce++){var xe=ee[ce];if(xe.enabled){if(xe.bounds){var Te=xe.pattern;switch(le=ee._cachedPatterns[ce],j=le[0],Z=le[1],Te){case P:re=new Date(K),fe=re.getUTCDay(),j>Z&&(Z+=7,fe<j&&(fe+=7));break;case A:re=new Date(K);var we=re.getUTCHours(),_e=re.getUTCMinutes(),ke=re.getUTCSeconds(),Ne=re.getUTCMilliseconds();fe=we+(_e/60+ke/3600+Ne/36e5),j>Z&&(Z+=24,fe<j&&(fe+=24));break;case"":fe=K;break}if(fe>=j&&fe<Z)return u}else for(var Ee=ee._cachedValues[ce],ze=0;ze<Ee.length;ze++)if(j=Ee[ze],Z=j+xe.dvalue,K>=j&&K<Z)return u}}return K},s.locateBreaks=function(K,ee){var le,j,Z,fe,re=[];if(!s.rangebreaks)return re;var ce=s.rangebreaks.slice().sort(function(Le,Ge){return Le.pattern===P&&Ge.pattern===A?-1:Ge.pattern===P&&Le.pattern===A?1:0}),xe=function(Le,Ge){if(Le=n.constrain(Le,K,ee),Ge=n.constrain(Ge,K,ee),Le!==Ge){for(var rt=!0,ot=0;ot<re.length;ot++){var $e=re[ot];Le<$e.max&&Ge>=$e.min&&(Le<$e.min&&($e.min=Le),Ge>$e.max&&($e.max=Ge),rt=!1)}rt&&re.push({min:Le,max:Ge})}};for(le=0;le<ce.length;le++){var Te=ce[le];if(Te.enabled)if(Te.bounds){var we=K,_e=ee;Te.pattern&&(we=Math.floor(we)),j=n.simpleMap(Te.bounds,Te.pattern?v:s.r2l),Z=j[0],fe=j[1];var ke=new Date(we),Ne,Ee;switch(Te.pattern){case P:Ee=m,Ne=((fe<Z?7:0)+(fe-Z))*h,we+=Z*h-(ke.getUTCDay()*h+ke.getUTCHours()*w+ke.getUTCMinutes()*c+ke.getUTCSeconds()*a+ke.getUTCMilliseconds());break;case A:Ee=h,Ne=((fe<Z?24:0)+(fe-Z))*w,we+=Z*w-(ke.getUTCHours()*w+ke.getUTCMinutes()*c+ke.getUTCSeconds()*a+ke.getUTCMilliseconds());break;default:we=Math.min(j[0],j[1]),_e=Math.max(j[0],j[1]),Ee=_e-we,Ne=Ee}for(var ze=we;ze<_e;ze+=Ee)xe(ze,ze+Ne)}else for(var Ce=n.simpleMap(Te.values,s.d2c),Oe=0;Oe<Ce.length;Oe++)Z=Ce[Oe],fe=Z+Te.dvalue,xe(Z,fe)}return re.sort(function(Le,Ge){return Le.min-Ge.min}),re},s.makeCalcdata=function(K,ee,le){var j,Z,fe,re,ce=s.type,xe=ce==="date"&&K[ee+"calendar"];if(ee in K){if(j=K[ee],re=K._length||n.minRowLength(j),n.isTypedArray(j)&&(ce==="linear"||ce==="log")){if(re===j.length)return j;if(j.subarray)return j.subarray(0,re)}if(ce==="multicategory")return z(j,re);for(Z=new Array(re),fe=0;fe<re;fe++)Z[fe]=s.d2c(j[fe],0,xe,le)}else{var Te=ee+"0"in K?s.d2c(K[ee+"0"],0,xe):0,we=K["d"+ee]?Number(K["d"+ee]):1;for(j=K[{x:"y",y:"x"}[ee]],re=K._length||j.length,Z=new Array(re),fe=0;fe<re;fe++)Z[fe]=Te+fe*we}if(s.rangebreaks)for(fe=0;fe<re;fe++)Z[fe]=s.maskBreaks(Z[fe]);return Z},s.isValidRange=function(K,ee){return Array.isArray(K)&&K.length===2&&(ee&&K[0]===null||T(s.r2l(K[0])))&&(ee&&K[1]===null||T(s.r2l(K[1])))},s.getAutorangeDflt=function(K,ee){var le=!s.isValidRange(K,"nullOk");return le&&ee&&ee.reverseDflt?le="reversed":K&&(K[0]===null&&K[1]===null?le=!0:K[0]===null&&K[1]!==null?le="min":K[0]!==null&&K[1]===null&&(le="max")),le},s.isReversed=function(){var K=s.autorange;return K==="reversed"||K==="min reversed"||K==="max reversed"},s.isPtWithinRange=function(K,ee){var le=s.c2l(K[k],null,ee),j=s.r2l(s.range[0]),Z=s.r2l(s.range[1]);return j<Z?j<=le&&le<=Z:Z<=le&&le<=j},s._emptyCategories=function(){s._categories=[],s._categoriesMap={}},s.clearCalc=function(){var K=s._matchGroup;if(K){var ee=null,le=null;for(var j in K){var Z=_[p.id2name(j)];if(Z._categories){ee=Z._categories,le=Z._categoriesMap;break}}ee&&le?(s._categories=ee,s._categoriesMap=le):s._emptyCategories()}else s._emptyCategories();if(s._initialCategories)for(var fe=0;fe<s._initialCategories.length;fe++)B(s._initialCategories[fe])},s.sortByInitialCategories=function(){var K=[];if(s._emptyCategories(),s._initialCategories)for(var ee=0;ee<s._initialCategories.length;ee++)B(s._initialCategories[ee]);K=K.concat(s._traceIndices);var le=s._matchGroup;for(var j in le)if(b!==j){var Z=_[p.id2name(j)];Z._categories=s._categories,Z._categoriesMap=s._categoriesMap,K=K.concat(Z._traceIndices)}return K};var ie=_._d3locale;s.type==="date"&&(s._dateFormat=ie?ie.timeFormat:S,s._extraFormat=_._extraFormat),s._separators=_.separators,s._numFormat=ie?ie.numberFormat:E,delete s._minDtick,delete s._forceTick0}},85024:function(U){U.exports=function(e){var d=["showexponent","showtickprefix","showticksuffix"],S=d.filter(function(E){return e[E]!==void 0}),n=function(E){return e[E]===e[S[0]]};if(S.every(n)||S.length===1)return e[S[0]]}},95936:function(U,F,e){var d=e(3400),S=e(76308).contrast,n=e(94724),E=e(85024),T=e(51272);U.exports=function(r,t,o,i,f){f||(f={});var u=o("labelalias");d.isPlainObject(u)||delete t.labelalias;var l=E(r),m=o("showticklabels");if(m){var h=f.font||{},w=t.color,c=t.ticklabelposition||"",a=c.indexOf("inside")!==-1?S(f.bgColor):w&&w!==n.color.dflt?w:h.color;if(d.coerceFont(o,"tickfont",h,{overrideDflt:{color:a}}),!f.noTicklabelstep&&i!=="multicategory"&&i!=="log"&&o("ticklabelstep"),!f.noAng){var p=o("tickangle");!f.noAutotickangles&&p==="auto"&&o("autotickangles")}if(i!=="category"){var x=o("tickformat");T(r,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:v}),t.tickformatstops.length||delete t.tickformatstops,!f.noExp&&!x&&i!=="date"&&(o("showexponent",l),o("exponentformat"),o("minexponent"),o("separatethousands"))}}};function v(g,r){function t(i,f){return d.coerce(g,r,n.tickformatstops,i,f)}var o=t("enabled");o&&(t("dtickrange"),t("value"))}},25404:function(U,F,e){var d=e(3400),S=e(94724);U.exports=function(E,T,v,g){var r=g.isMinor,t=r?E.minor||{}:E,o=r?T.minor:T,i=r?S.minor:S,f=r?"minor.":"",u=d.coerce2(t,o,i,"ticklen",r?(T.ticklen||5)*.6:void 0),l=d.coerce2(t,o,i,"tickwidth",r?T.tickwidth||1:void 0),m=d.coerce2(t,o,i,"tickcolor",(r?T.tickcolor:void 0)||o.color),h=v(f+"ticks",!r&&g.outerTicks||u||l||m?"outside":"");h||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},26332:function(U,F,e){var d=e(98728),S=e(3400).isArrayOrTypedArray,n=e(38116).isTypedArraySpec,E=e(38116).decodeTypedArraySpec;U.exports=function(v,g,r,t,o){o||(o={});var i=o.isMinor,f=i?v.minor||{}:v,u=i?g.minor:g,l=i?"minor.":"";function m(P){var y=f[P];return n(y)&&(y=E(y)),y!==void 0?y:(u._template||{})[P]}var h=m("tick0"),w=m("dtick"),c=m("tickvals"),a=S(c)?"array":w?"linear":"auto",p=r(l+"tickmode",a);if(p==="auto"||p==="sync")r(l+"nticks");else if(p==="linear"){var x=u.dtick=d.dtick(w,t);u.tick0=d.tick0(h,t,g.calendar,x)}else if(t!=="multicategory"){var A=r(l+"tickvals");A===void 0?u.tickmode="auto":i||r("ticktext")}}},73736:function(U,F,e){var d=e(33428),S=e(24040),n=e(3400),E=e(43616),T=e(54460);U.exports=function(g,r,t,o){var i=g._fullLayout;if(r.length===0){T.redrawComponents(g);return}function f(A){var P=A.xaxis,y=A.yaxis;i._defs.select("#"+A.clipId+"> rect").call(E.setTranslate,0,0).call(E.setScale,1,1),A.plot.call(E.setTranslate,P._offset,y._offset).call(E.setScale,1,1);var C=A.plot.selectAll(".scatterlayer .trace");C.selectAll(".point").call(E.setPointGroupScale,1,1),C.selectAll(".textpoint").call(E.setTextPointsScale,1,1),C.call(E.hideOutsideRangePoints,A)}function u(A,P){var y=A.plotinfo,C=y.xaxis,M=y.yaxis,s=C._length,_=M._length,b=!!A.xr1,k=!!A.yr1,D=[];if(b){var V=n.simpleMap(A.xr0,C.r2l),O=n.simpleMap(A.xr1,C.r2l),N=V[1]-V[0],B=O[1]-O[0];D[0]=(V[0]*(1-P)+P*O[0]-V[0])/(V[1]-V[0])*s,D[2]=s*(1-P+P*B/N),C.range[0]=C.l2r(V[0]*(1-P)+P*O[0]),C.range[1]=C.l2r(V[1]*(1-P)+P*O[1])}else D[0]=0,D[2]=s;if(k){var z=n.simpleMap(A.yr0,M.r2l),H=n.simpleMap(A.yr1,M.r2l),X=z[1]-z[0],$=H[1]-H[0];D[1]=(z[1]*(1-P)+P*H[1]-z[1])/(z[0]-z[1])*_,D[3]=_*(1-P+P*$/X),M.range[0]=C.l2r(z[0]*(1-P)+P*H[0]),M.range[1]=M.l2r(z[1]*(1-P)+P*H[1])}else D[1]=0,D[3]=_;T.drawOne(g,C,{skipTitle:!0}),T.drawOne(g,M,{skipTitle:!0}),T.redrawComponents(g,[C._id,M._id]);var ne=b?s/D[2]:1,q=k?_/D[3]:1,ue=b?D[0]:0,te=k?D[1]:0,J=b?D[0]/D[2]*s:0,ie=k?D[1]/D[3]*_:0,K=C._offset-J,ee=M._offset-ie;y.clipRect.call(E.setTranslate,ue,te).call(E.setScale,1/ne,1/q),y.plot.call(E.setTranslate,K,ee).call(E.setScale,ne,q),E.setPointGroupScale(y.zoomScalePts,1/ne,1/q),E.setTextPointsScale(y.zoomScaleTxt,1/ne,1/q)}var l;o&&(l=o());function m(){for(var A={},P=0;P<r.length;P++){var y=r[P],C=y.plotinfo.xaxis,M=y.plotinfo.yaxis;y.xr1&&(A[C._name+".range"]=y.xr1.slice()),y.yr1&&(A[M._name+".range"]=y.yr1.slice())}return l&&l(),S.call("relayout",g,A).then(function(){for(var s=0;s<r.length;s++)f(r[s].plotinfo)})}function h(){for(var A={},P=0;P<r.length;P++){var y=r[P],C=y.plotinfo.xaxis,M=y.plotinfo.yaxis;y.xr0&&(A[C._name+".range"]=y.xr0.slice()),y.yr0&&(A[M._name+".range"]=y.yr0.slice())}return S.call("relayout",g,A).then(function(){for(var s=0;s<r.length;s++)f(r[s].plotinfo)})}var w,c,a,p=d.ease(t.easing);g._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(a),a=null,h()});function x(){c=Date.now();for(var A=Math.min(1,(c-w)/t.duration),P=p(A),y=0;y<r.length;y++)u(r[y],P);c-w>t.duration?(m(),a=window.cancelAnimationFrame(x)):a=window.requestAnimationFrame(x)}return w=Date.now(),a=window.requestAnimationFrame(x),Promise.resolve()}},14944:function(U,F,e){var d=e(24040).traceIs,S=e(52976);U.exports=function(r,t,o,i){o("autotypenumbers",i.autotypenumbersDflt);var f=o("type",(i.splomStash||{}).type);f==="-"&&(n(t,i.data),t.type==="-"?t.type="linear":r.type=t.type)};function n(g,r){if(g.type==="-"){var t=g._id,o=t.charAt(0),i;t.indexOf("scene")!==-1&&(t=o);var f=E(r,t,o);if(f){if(f.type==="histogram"&&o==={v:"y",h:"x"}[f.orientation||"v"]){g.type="linear";return}var u=o+"calendar",l=f[u],m={noMultiCategory:!d(f,"cartesian")||d(f,"noMultiCategory")};if(f.type==="box"&&f._hasPreCompStats&&o==={h:"x",v:"y"}[f.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=g.autotypenumbers,v(f,o)){var h=T(f),w=[];for(i=0;i<r.length;i++){var c=r[i];!d(c,"box-violin")||(c[o+"axis"]||o)!==t||(c[h]!==void 0?w.push(c[h][0]):c.name!==void 0?w.push(c.name):w.push("text"),c[u]!==l&&(l=void 0))}g.type=S(w,l,m)}else if(f.type==="splom"){var a=f.dimensions,p=a[f._axesDim[t]];p.visible&&(g.type=S(p.values,l,m))}else g.type=S(f[o]||[f[o+"0"]],l,m)}}}function E(g,r,t){for(var o=0;o<g.length;o++){var i=g[o];if(i.type==="splom"&&i._length>0&&(i["_"+t+"axes"]||{})[r])return i;if((i[t+"axis"]||t)===r){if(v(i,t))return i;if((i[t]||[]).length||i[t+"0"])return i}}}function T(g){return{v:"x",h:"y"}[g.orientation||"v"]}function v(g,r){var t=T(g),o=d(g,"box-violin"),i=d(g._fullInput||{},"candlestick");return o&&!i&&r===t&&g[t]===void 0&&g[t+"0"]===void 0}},62460:function(U,F,e){var d=e(24040),S=e(3400);F.manageCommandObserver=function(r,t,o,i){var f={},u=!0;t&&t._commandObserver&&(f=t._commandObserver),f.cache||(f.cache={}),f.lookupTable={};var l=F.hasSimpleAPICommandBindings(r,o,f.lookupTable);if(t&&t._commandObserver){if(l)return f;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,f}if(l){n(r,l,f.cache),f.check=function(){if(u){var c=n(r,l,f.cache);return c.changed&&i&&f.lookupTable[c.value]!==void 0&&(f.disable(),Promise.resolve(i({value:c.value,type:l.type,prop:l.prop,traces:l.traces,index:f.lookupTable[c.value]})).then(f.enable,f.enable)),c.changed}};for(var m=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<m.length;h++)r._internalOn(m[h],f.check);f.remove=function(){for(var w=0;w<m.length;w++)r._removeInternalListener(m[w],f.check)}}else S.log("Unable to automatically bind plot updates to API command"),f.lookupTable={},f.remove=function(){};return f.disable=function(){u=!1},f.enable=function(){u=!0},t&&(t._commandObserver=f),f},F.hasSimpleAPICommandBindings=function(r,t,o){var i,f=t.length,u;for(i=0;i<f;i++){var l,m=t[i],h=m.method,w=m.args;if(Array.isArray(w)||(w=[]),!h)return!1;var c=F.computeAPICommandBindings(r,h,w);if(c.length!==1)return!1;if(!u)u=c[0],Array.isArray(u.traces)&&u.traces.sort();else{if(l=c[0],l.type!==u.type||l.prop!==u.prop)return!1;if(Array.isArray(u.traces))if(Array.isArray(l.traces)){l.traces.sort();for(var a=0;a<u.traces.length;a++)if(u.traces[a]!==l.traces[a])return!1}else return!1;else if(l.prop!==u.prop)return!1}l=c[0];var p=l.value;if(Array.isArray(p))if(p.length===1)p=p[0];else return!1;o&&(o[p]=i)}return u};function n(r,t,o){var i,f,u,l=!1;if(t.type==="data")i=r._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=r._fullLayout;else return!1;return f=S.nestedProperty(i,t.prop).get(),u=o[t.type]=o[t.type]||{},u.hasOwnProperty(t.prop)&&u[t.prop]!==f&&(l=!0),u[t.prop]=f,{changed:l,value:f}}F.executeAPICommand=function(r,t,o){if(t==="skip")return Promise.resolve();var i=d.apiMethodRegistry[t],f=[r];Array.isArray(o)||(o=[]);for(var u=0;u<o.length;u++)f.push(o[u]);return i.apply(null,f).catch(function(l){return S.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},F.computeAPICommandBindings=function(r,t,o){var i;switch(Array.isArray(o)||(o=[]),t){case"restyle":i=v(r,o);break;case"relayout":i=T(r,o);break;case"update":i=v(r,[o[0],o[2]]).concat(T(r,[o[1]]));break;case"animate":i=E(r,o);break;default:i=[]}return i};function E(r,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function T(r,t){var o=[],i=t[0],f={};if(typeof i=="string")f[i]=t[1];else if(S.isPlainObject(i))f=i;else return o;return g(f,function(u,l,m){o.push({type:"layout",prop:u,value:m})},"",0),o}function v(r,t){var o,i,f,u,l=[];if(i=t[0],f=t[1],o=t[2],u={},typeof i=="string")u[i]=f;else if(S.isPlainObject(i))u=i,o===void 0&&(o=f);else return l;return o===void 0&&(o=null),g(u,function(m,h,w){var c,a;if(Array.isArray(w)){a=w.slice();var p=Math.min(a.length,r.data.length);o&&(p=Math.min(p,o.length)),c=[];for(var x=0;x<p;x++)c[x]=o?o[x]:x}else a=w,c=o?o.slice():null;if(c===null)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(c)){if(!Array.isArray(a)){var A=a;a=[];for(var P=0;P<c.length;P++)a[P]=A}a.length=Math.min(c.length,a.length)}l.push({type:"data",prop:m,traces:c,value:a})},"",0),l}function g(r,t,o,i){Object.keys(r).forEach(function(f){var u=r[f];if(f[0]!=="_"){var l=o+(i>0?".":"")+f;S.isPlainObject(u)?g(u,t,l,i+1):t(l,f,u)}})}},86968:function(U,F,e){var d=e(92880).extendFlat;F.u=function(S,n){S=S||{},n=n||{};var E={valType:"info_array",editType:S.editType,items:[{valType:"number",min:0,max:1,editType:S.editType},{valType:"number",min:0,max:1,editType:S.editType}],dflt:[0,1]};S.name&&S.name+"",S.trace,n.description&&""+n.description;var T={x:d({},E,{}),y:d({},E,{}),editType:S.editType};return S.noGridCell||(T.row={valType:"integer",min:0,dflt:0,editType:S.editType},T.column={valType:"integer",min:0,dflt:0,editType:S.editType}),T},F.Q=function(S,n,E,T){var v=T&&T.x||[0,1],g=T&&T.y||[0,1],r=n.grid;if(r){var t=E("domain.column");t!==void 0&&(t<r.columns?v=r._domains.x[t]:delete S.domain.column);var o=E("domain.row");o!==void 0&&(o<r.rows?g=r._domains.y[o]:delete S.domain.row)}var i=E("domain.x",v),f=E("domain.y",g);i[0]<i[1]||(S.domain.x=v.slice()),f[0]<f[1]||(S.domain.y=g.slice())}},25376:function(U){U.exports=function(F){var e=F.variantValues,d=F.editType,S=F.colorEditType;S===void 0&&(S=d);var n={editType:d,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};F.noNumericWeightValues&&(n.valType="enumerated",n.values=n.extras,n.extras=void 0,n.min=void 0,n.max=void 0);var E={family:{valType:"string",noBlank:!0,strict:!0,editType:d},size:{valType:"number",min:1,editType:d},color:{valType:"color",editType:S},weight:n,style:{editType:d,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:F.noFontVariant?void 0:{editType:d,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:F.noFontTextcase?void 0:{editType:d,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:F.noFontLineposition?void 0:{editType:d,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:F.noFontShadow?void 0:{editType:d,valType:"string",dflt:F.autoShadowDflt?"auto":"none"},editType:d};return F.autoSize&&(E.size.dflt="auto"),F.autoColor&&(E.color.dflt="auto"),F.arrayOk&&(E.family.arrayOk=!0,E.weight.arrayOk=!0,E.style.arrayOk=!0,F.noFontVariant||(E.variant.arrayOk=!0),F.noFontTextcase||(E.textcase.arrayOk=!0),F.noFontLineposition||(E.lineposition.arrayOk=!0),F.noFontShadow||(E.shadow.arrayOk=!0),E.size.arrayOk=!0,E.color.arrayOk=!0),E}},16672:function(U){U.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(U,F){F.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},F.axesNames=["lonaxis","lataxis"],F.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},F.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},F.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},F.clipPad=.001,F.precision=.1,F.landColor="#F0DC82",F.waterColor="#3399FF",F.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},F.sphereSVG={type:"Sphere"},F.fillLayers={ocean:1,land:1,lakes:1},F.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},F.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],F.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],F.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(U,F,e){var d=e(33428),S=e(83356),n=S.geoPath,E=S.geoDistance,T=e(87108),v=e(24040),g=e(3400),r=g.strTranslate,t=e(76308),o=e(43616),i=e(93024),f=e(7316),u=e(54460),l=e(19280).getAutoRange,m=e(86476),h=e(22676).prepSelect,w=e(22676).clearOutline,c=e(22676).selectOnClick,a=e(79248),p=e(79552),x=e(27144),A=e(59972),P=e(55712).NO;function y(b){this.id=b.id,this.graphDiv=b.graphDiv,this.container=b.container,this.topojsonURL=b.topojsonURL,this.isStatic=b.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var C=y.prototype;U.exports=function(k){return new y(k)},C.plot=function(b,k,D,V){var O=this;if(V)return O.update(b,k,!0);O._geoCalcData=b,O._fullLayout=k;var N=k[this.id],B=[],z=!1;for(var H in p.layerNameToAdjective)if(H!=="frame"&&N["show"+H]){z=!0;break}for(var X=!1,$=0;$<b.length;$++){var ne=b[0][0].trace;ne._geo=O,ne.locationmode&&(z=!0);var q=ne.marker;if(q){var ue=q.angle,te=q.angleref;(ue||te==="north"||te==="previous")&&(X=!0)}}if(this._hasMarkerAngles=X,z){var J=A.getTopojsonName(N);(O.topojson===null||J!==O.topojsonName)&&(O.topojsonName=J,PlotlyGeoAssets.topojson[O.topojsonName]===void 0&&B.push(O.fetchTopojson()))}B=B.concat(x.fetchTraceGeoData(b)),D.push(new Promise(function(ie,K){Promise.all(B).then(function(){O.topojson=PlotlyGeoAssets.topojson[O.topojsonName],O.update(b,k),ie()}).catch(K)}))},C.fetchTopojson=function(){var b=this,k=A.getTopojsonPath(b.topojsonURL,b.topojsonName);return new Promise(function(D,V){d.json(k,function(O,N){if(O)return O.status===404?V(new Error(["plotly.js could not find topojson file at",k+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):V(new Error(["unexpected error while fetching topojson file at",k].join(" ")));PlotlyGeoAssets.topojson[b.topojsonName]=N,D()})})},C.update=function(b,k,D){var V=k[this.id];this.hasChoropleth=!1;for(var O=0;O<b.length;O++){var N=b[O],B=N[0].trace;B.type==="choropleth"&&(this.hasChoropleth=!0),B.visible===!0&&B._length>0&&B._module.calcGeoJSON(N,k)}if(!D){var z=this.updateProjection(b,k);if(z)return;(!this.viewInitial||this.scope!==V.scope)&&this.saveViewInitial(V)}this.scope=V.scope,this.updateBaseLayers(k,V),this.updateDims(k,V),this.updateFx(k,V),f.generalUpdatePerTraceModule(this.graphDiv,this,b,V);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var X=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=X.selectAll("path"),this._render()},C.updateProjection=function(b,k){var D=this.graphDiv,V=k[this.id],O=k._size,N=V.domain,B=V.projection,z=V.lonaxis,H=V.lataxis,X=z._ax,$=H._ax,ne=this.projection=M(V),q=[[O.l+O.w*N.x[0],O.t+O.h*(1-N.y[1])],[O.l+O.w*N.x[1],O.t+O.h*(1-N.y[0])]],ue=V.center||{},te=B.rotation||{},J=z.range||[],ie=H.range||[];if(V.fitbounds){X._length=q[1][0]-q[0][0],$._length=q[1][1]-q[0][1],X.range=l(D,X),$.range=l(D,$);var K=(X.range[0]+X.range[1])/2,ee=($.range[0]+$.range[1])/2;if(V._isScoped)ue={lon:K,lat:ee};else if(V._isClipped){ue={lon:K,lat:ee},te={lon:K,lat:ee,roll:te.roll};var le=B.type,j=p.lonaxisSpan[le]/2||180,Z=p.lataxisSpan[le]/2||90;J=[K-j,K+j],ie=[ee-Z,ee+Z]}else ue={lon:K,lat:ee},te={lon:K,lat:te.lat,roll:te.roll}}ne.center([ue.lon-te.lon,ue.lat-te.lat]).rotate([-te.lon,-te.lat,te.roll]).parallels(B.parallels);var fe=_(J,ie);ne.fitExtent(q,fe);var re=this.bounds=ne.getBounds(fe),ce=this.fitScale=ne.scale(),xe=ne.translate();if(V.fitbounds){var Te=ne.getBounds(_(X.range,$.range)),we=Math.min((re[1][0]-re[0][0])/(Te[1][0]-Te[0][0]),(re[1][1]-re[0][1])/(Te[1][1]-Te[0][1]));isFinite(we)?ne.scale(we*ce):g.warn("Something went wrong during"+this.id+"fitbounds computations.")}else ne.scale(B.scale*ce);var _e=this.midPt=[(re[0][0]+re[1][0])/2,(re[0][1]+re[1][1])/2];if(ne.translate([xe[0]+(_e[0]-xe[0]),xe[1]+(_e[1]-xe[1])]).clipExtent(re),V._isAlbersUsa){var ke=ne([ue.lon,ue.lat]),Ne=ne.translate();ne.translate([Ne[0]-(ke[0]-Ne[0]),Ne[1]-(ke[1]-Ne[1])])}},C.updateBaseLayers=function(b,k){var D=this,V=D.topojson,O=D.layers,N=D.basePaths;function B(q){return q==="lonaxis"||q==="lataxis"}function z(q){return!!p.lineLayers[q]}function H(q){return!!p.fillLayers[q]}var X=this.hasChoropleth?p.layersForChoropleth:p.layers,$=X.filter(function(q){return z(q)||H(q)?k["show"+q]:B(q)?k[q].showgrid:!0}),ne=D.framework.selectAll(".layer").data($,String);ne.exit().each(function(q){delete O[q],delete N[q],d.select(this).remove()}),ne.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var ue=O[q]=d.select(this);q==="bg"?D.bgRect=ue.append("rect").style("pointer-events","all"):B(q)?N[q]=ue.append("path").style("fill","none"):q==="backplot"?ue.append("g").classed("choroplethlayer",!0):q==="frontplot"?ue.append("g").classed("scatterlayer",!0):z(q)?N[q]=ue.append("path").style("fill","none").style("stroke-miterlimit",2):H(q)&&(N[q]=ue.append("path").style("stroke","none"))}),ne.order(),ne.each(function(q){var ue=N[q],te=p.layerNameToAdjective[q];q==="frame"?ue.datum(p.sphereSVG):z(q)||H(q)?ue.datum(P(V,V.objects[q])):B(q)&&ue.datum(s(q,k,b)).call(t.stroke,k[q].gridcolor).call(o.dashLine,k[q].griddash,k[q].gridwidth),z(q)?ue.call(t.stroke,k[te+"color"]).call(o.dashLine,"",k[te+"width"]):H(q)&&ue.call(t.fill,k[te+"color"])})},C.updateDims=function(b,k){var D=this.bounds,V=(k.framewidth||0)/2,O=D[0][0]-V,N=D[0][1]-V,B=D[1][0]-O+V,z=D[1][1]-N+V;o.setRect(this.clipRect,O,N,B,z),this.bgRect.call(o.setRect,O,N,B,z).call(t.fill,k.bgcolor),this.xaxis._offset=O,this.xaxis._length=B,this.yaxis._offset=N,this.yaxis._length=z},C.updateFx=function(b,k){var D=this,V=D.graphDiv,O=D.bgRect,N=b.dragmode,B=b.clickmode;if(D.isStatic)return;function z(){var ne=D.viewInitial,q={};for(var ue in ne)q[D.id+"."+ue]=ne[ue];v.call("_guiRelayout",V,q),V.emit("plotly_doubleclick",null)}function H(ne){return D.projection.invert([ne[0]+D.xaxis._offset,ne[1]+D.yaxis._offset])}var X=function(ne,q){if(q.isRect){var ue=ne.range={};ue[D.id]=[H([q.xmin,q.ymin]),H([q.xmax,q.ymax])]}else{var te=ne.lassoPoints={};te[D.id]=q.map(H)}},$={element:D.bgRect.node(),gd:V,plotinfo:{id:D.id,xaxis:D.xaxis,yaxis:D.yaxis,fillRangeItems:X},xaxes:[D.xaxis],yaxes:[D.yaxis],subplot:D.id,clickFn:function(ne){ne===2&&w(V)}};N==="pan"?(O.node().onmousedown=null,O.call(a(D,k)),O.on("dblclick.zoom",z),V._context._scrollZoom.geo||O.on("wheel.zoom",null)):(N==="select"||N==="lasso")&&(O.on(".zoom",null),$.prepFn=function(ne,q,ue){h(ne,q,ue,$,N)},m.init($)),O.on("mousemove",function(){var ne=D.projection.invert(g.getPositionFromD3Event());if(!ne)return m.unhover(V,d.event);D.xaxis.p2c=function(){return ne[0]},D.yaxis.p2c=function(){return ne[1]},i.hover(V,d.event,D.id)}),O.on("mouseout",function(){V._dragging||m.unhover(V,d.event)}),O.on("click",function(){N!=="select"&&N!=="lasso"&&(B.indexOf("select")>-1&&c(d.event,V,[D.xaxis],[D.yaxis],D.id,$),B.indexOf("event")>-1&&i.click(V,d.event))})},C.makeFramework=function(){var b=this,k=b.graphDiv,D=k._fullLayout,V="clip"+D._uid+b.id;b.clipDef=D._clips.append("clipPath").attr("id",V),b.clipRect=b.clipDef.append("rect"),b.framework=d.select(b.container).append("g").attr("class","geo "+b.id).call(o.setClipUrl,V,k),b.project=function(O){var N=b.projection(O);return N?[N[0]-b.xaxis._offset,N[1]-b.yaxis._offset]:[null,null]},b.xaxis={_id:"x",c2p:function(O){return b.project(O)[0]}},b.yaxis={_id:"y",c2p:function(O){return b.project(O)[1]}},b.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(b.mockAxis,D)},C.saveViewInitial=function(b){var k=b.center||{},D=b.projection,V=D.rotation||{};this.viewInitial={fitbounds:b.fitbounds,"projection.scale":D.scale};var O;b._isScoped?O={"center.lon":k.lon,"center.lat":k.lat}:b._isClipped?O={"projection.rotation.lon":V.lon,"projection.rotation.lat":V.lat}:O={"center.lon":k.lon,"center.lat":k.lat,"projection.rotation.lon":V.lon},g.extendFlat(this.viewInitial,O)},C.render=function(b){this._hasMarkerAngles&&b?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},C._render=function(){var b=this.projection,k=b.getPath(),D;function V(N){var B=b(N.lonlat);return B?r(B[0],B[1]):null}function O(N){return b.isLonLatOverEdges(N.lonlat)?"none":null}for(D in this.basePaths)this.basePaths[D].attr("d",k);for(D in this.dataPaths)this.dataPaths[D].attr("d",function(N){return k(N.geojson)});for(D in this.dataPoints)this.dataPoints[D].attr("display",O).attr("transform",V)};function M(b){var k=b.projection,D=k.type,V=p.projNames[D];V="geo"+g.titleCase(V);for(var O=S[V]||T[V],N=O(),B=b._isSatellite?Math.acos(1/k.distance)*180/Math.PI:b._isClipped?p.lonaxisSpan[D]/2:null,z=["center","rotate","parallels","clipExtent"],H=function(ne){return ne?N:[]},X=0;X<z.length;X++){var $=z[X];typeof N[$]!="function"&&(N[$]=H)}return N.isLonLatOverEdges=function(ne){if(N(ne)===null)return!0;if(B){var q=N.rotate(),ue=E(ne,[-q[0],-q[1]]),te=B*Math.PI/180;return ue>te}else return!1},N.getPath=function(){return n().projection(N)},N.getBounds=function(ne){return N.getPath().bounds(ne)},N.precision(p.precision),b._isSatellite&&N.tilt(k.tilt).distance(k.distance),B&&N.clipAngle(B-p.clipPad),N}function s(b,k,D){var V=1e-6,O=2.5,N=k[b],B=p.scopeDefaults[k.scope],z,H,X;b==="lonaxis"?(z=B.lonaxisRange,H=B.lataxisRange,X=function(ee,le){return[ee,le]}):b==="lataxis"&&(z=B.lataxisRange,H=B.lonaxisRange,X=function(ee,le){return[le,ee]});var $={type:"linear",range:[z[0],z[1]-V],tick0:N.tick0,dtick:N.dtick};u.setConvert($,D);var ne=u.calcTicks($);!k.isScoped&&b==="lonaxis"&&ne.pop();for(var q=ne.length,ue=new Array(q),te=0;te<q;te++)for(var J=ne[te].x,ie=ue[te]=[],K=H[0];K<H[1]+O;K+=O)ie.push(X(J,K));return{type:"MultiLineString",coordinates:ue}}function _(b,k){var D=p.clipPad,V=b[0]+D,O=b[1]-D,N=k[0]+D,B=k[1]-D;V>0&&O<0&&(O+=360);var z=(O-V)/4;return{type:"Polygon",coordinates:[[[V,N],[V,B],[V+z,B],[V+2*z,B],[V+3*z,B],[O,B],[O,N],[O-z,N],[O-2*z,N],[O-3*z,N],[V,N]]]}}},10816:function(U,F,e){var d=e(84888).KY,S=e(3400).counterRegex,n=e(43520),E="geo",T=S(E),v={};v[E]={valType:"subplotid",dflt:E,editType:"calc"};function g(o){for(var i=o._fullLayout,f=o.calcdata,u=i._subplots[E],l=0;l<u.length;l++){var m=u[l],h=d(f,E,m),w=i[m],c=w._subplot;c||(c=n({id:m,graphDiv:o,container:i._geolayer.node(),topojsonURL:o._context.topojsonURL,staticPlot:o._context.staticPlot}),i[m]._subplot=c),c.plot(h,i,o._promises)}}function r(o,i,f,u){for(var l=u._subplots[E]||[],m=0;m<l.length;m++){var h=l[m],w=u[h]._subplot;!i[h]&&w&&(w.framework.remove(),w.clipDef.remove())}}function t(o){for(var i=o._fullLayout,f=i._subplots[E],u=0;u<f.length;u++){var l=i[f[u]],m=l._subplot;m.updateFx(i,l)}}U.exports={attr:E,name:E,idRoot:E,idRegex:T,attrRegex:T,attributes:v,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:g,updateFx:t,clean:r}},40384:function(U,F,e){var d=e(22548),S=e(86968).u,n=e(98192).u,E=e(79552),T=e(67824).overrideAll,v=e(95376),g={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:n},r=U.exports=T({domain:S({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:v(E.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:v(E.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:E.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:E.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:E.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:E.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:g,lataxis:g},"plot","from-root");r.uirevision={valType:"any",editType:"none"}},86920:function(U,F,e){var d=e(3400),S=e(168),n=e(84888).op,E=e(79552),T=e(40384),v=E.axesNames;U.exports=function(t,o,i){S(t,o,i,{type:"geo",attributes:T,handleDefaults:g,fullData:i,partition:"y"})};function g(r,t,o,i){var f=n(i.fullData,"geo",i.id),u=f.map(function(ie){return ie._expandedIndex}),l=o("resolution"),m=o("scope"),h=E.scopeDefaults[m],w=o("projection.type",h.projType),c=t._isAlbersUsa=w==="albers usa";c&&(m=t.scope="usa");var a=t._isScoped=m!=="world",p=t._isSatellite=w==="satellite",x=t._isConic=w.indexOf("conic")!==-1||w==="albers",A=t._isClipped=!!E.lonaxisSpan[w];if(r.visible===!1){var P=d.extendDeep({},t._template);P.showcoastlines=!1,P.showcountries=!1,P.showframe=!1,P.showlakes=!1,P.showland=!1,P.showocean=!1,P.showrivers=!1,P.showsubunits=!1,P.lonaxis&&(P.lonaxis.showgrid=!1),P.lataxis&&(P.lataxis.showgrid=!1),t._template=P}for(var y=o("visible"),C,M=0;M<v.length;M++){var s=v[M],_=[30,10][M],b;if(a)b=h[s+"Range"];else{var k=E[s+"Span"],D=(k[w]||k["*"])/2,V=o("projection.rotation."+s.substr(0,3),h.projRotate[M]);b=[V-D,V+D]}var O=o(s+".range",b);o(s+".tick0"),o(s+".dtick",_),C=o(s+".showgrid",y?void 0:!1),C&&(o(s+".gridcolor"),o(s+".gridwidth"),o(s+".griddash")),t[s]._ax={type:"linear",_id:s.slice(0,3),_traceIndices:u,setScale:d.identity,c2l:d.identity,r2l:d.identity,autorange:!0,range:O.slice(),_m:1,_input:{}}}var N=t.lonaxis.range,B=t.lataxis.range,z=N[0],H=N[1];z>0&&H<0&&(H+=360);var X=(z+H)/2,$;if(!c){var ne=a?h.projRotate:[X,0,0];$=o("projection.rotation.lon",ne[0]),o("projection.rotation.lat",ne[1]),o("projection.rotation.roll",ne[2]),C=o("showcoastlines",!a&&y),C&&(o("coastlinecolor"),o("coastlinewidth")),C=o("showocean",y?void 0:!1),C&&o("oceancolor")}var q,ue;if(c?(q=-96.6,ue=38.7):(q=a?X:$,ue=(B[0]+B[1])/2),o("center.lon",q),o("center.lat",ue),p&&(o("projection.tilt"),o("projection.distance")),x){var te=h.projParallels||[0,60];o("projection.parallels",te)}o("projection.scale"),C=o("showland",y?void 0:!1),C&&o("landcolor"),C=o("showlakes",y?void 0:!1),C&&o("lakecolor"),C=o("showrivers",y?void 0:!1),C&&(o("rivercolor"),o("riverwidth")),C=o("showcountries",a&&m!=="usa"&&y),C&&(o("countrycolor"),o("countrywidth")),(m==="usa"||m==="north america"&&l===50)&&(o("showsubunits",y),o("subunitcolor"),o("subunitwidth")),a||(C=o("showframe",y),C&&(o("framecolor"),o("framewidth"))),o("bgcolor");var J=o("fitbounds");J&&(delete t.projection.scale,a?(delete t.center.lon,delete t.center.lat):A?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}},79248:function(U,F,e){var d=e(33428),S=e(3400),n=e(24040),E=Math.PI/180,T=180/Math.PI,v={cursor:"pointer"},g={cursor:"auto"};function r(s,_){var b=s.projection,k;return _._isScoped?k=i:_._isClipped?k=u:k=f,k(s,b)}U.exports=r;function t(s,_){return d.behavior.zoom().translate(_.translate()).scale(_.scale())}function o(s,_,b){var k=s.id,D=s.graphDiv,V=D.layout,O=V[k],N=D._fullLayout,B=N[k],z={},H={};function X($,ne){z[k+"."+$]=S.nestedProperty(O,$).get(),n.call("_storeDirectGUIEdit",V,N._preGUI,z);var q=S.nestedProperty(B,$);q.get()!==ne&&(q.set(ne),S.nestedProperty(O,$).set(ne),H[k+"."+$]=ne)}b(X),X("projection.scale",_.scale()/s.fitScale),X("fitbounds",!1),D.emit("plotly_relayout",H)}function i(s,_){var b=t(s,_);function k(){d.select(this).style(v)}function D(){_.scale(d.event.scale).translate(d.event.translate),s.render(!0);var N=_.invert(s.midPt);s.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":_.scale()/s.fitScale,"geo.center.lon":N[0],"geo.center.lat":N[1]})}function V(N){var B=_.invert(s.midPt);N("center.lon",B[0]),N("center.lat",B[1])}function O(){d.select(this).style(g),o(s,_,V)}return b.on("zoomstart",k).on("zoom",D).on("zoomend",O),b}function f(s,_){var b=t(s,_),k=2,D,V,O,N,B,z,H,X,$;function ne(K){return _.invert(K)}function q(K){var ee=ne(K);if(!ee)return!0;var le=_(ee);return Math.abs(le[0]-K[0])>k||Math.abs(le[1]-K[1])>k}function ue(){d.select(this).style(v),D=d.mouse(this),V=_.rotate(),O=_.translate(),N=V,B=ne(D)}function te(){if(z=d.mouse(this),q(D)){b.scale(_.scale()),b.translate(_.translate());return}_.scale(d.event.scale),_.translate([O[0],d.event.translate[1]]),B?ne(z)&&(X=ne(z),H=[N[0]+(X[0]-B[0]),V[1],V[2]],_.rotate(H),N=H):(D=z,B=ne(D)),$=!0,s.render(!0);var K=_.rotate(),ee=_.invert(s.midPt);s.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":_.scale()/s.fitScale,"geo.center.lon":ee[0],"geo.center.lat":ee[1],"geo.projection.rotation.lon":-K[0]})}function J(){d.select(this).style(g),$&&o(s,_,ie)}function ie(K){var ee=_.rotate(),le=_.invert(s.midPt);K("projection.rotation.lon",-ee[0]),K("center.lon",le[0]),K("center.lat",le[1])}return b.on("zoomstart",ue).on("zoom",te).on("zoomend",J),b}function u(s,_){_.rotate(),_.scale();var b=t(s,_),k=M(b,"zoomstart","zoom","zoomend"),D=0,V=b.on,O;b.on("zoomstart",function(){d.select(this).style(v);var X=d.mouse(this),$=_.rotate(),ne=$,q=_.translate(),ue=m($);O=l(_,X),V.call(b,"zoom",function(){var te=d.mouse(this);if(_.scale(d.event.scale),!O)X=te,O=l(_,X);else if(l(_,te)){_.rotate($).translate(q);var J=l(_,te),ie=w(O,J),K=A(h(ue,ie)),ee=c(K,O,ne);(!isFinite(ee[0])||!isFinite(ee[1])||!isFinite(ee[2]))&&(ee=ne),_.rotate(ee),ne=ee}B(k.of(this,arguments))}),N(k.of(this,arguments))}).on("zoomend",function(){d.select(this).style(g),V.call(b,"zoom",null),z(k.of(this,arguments)),o(s,_,H)}).on("zoom.redraw",function(){s.render(!0);var X=_.rotate();s.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":_.scale()/s.fitScale,"geo.projection.rotation.lon":-X[0],"geo.projection.rotation.lat":-X[1]})});function N(X){D++||X({type:"zoomstart"})}function B(X){X({type:"zoom"})}function z(X){--D||X({type:"zoomend"})}function H(X){var $=_.rotate();X("projection.rotation.lon",-$[0]),X("projection.rotation.lat",-$[1])}return d.rebind(b,k,"on")}function l(s,_){var b=s.invert(_);return b&&isFinite(b[0])&&isFinite(b[1])&&P(b)}function m(s){var _=.5*s[0]*E,b=.5*s[1]*E,k=.5*s[2]*E,D=Math.sin(_),V=Math.cos(_),O=Math.sin(b),N=Math.cos(b),B=Math.sin(k),z=Math.cos(k);return[V*N*z+D*O*B,D*N*z-V*O*B,V*O*z+D*N*B,V*N*B-D*O*z]}function h(s,_){var b=s[0],k=s[1],D=s[2],V=s[3],O=_[0],N=_[1],B=_[2],z=_[3];return[b*O-k*N-D*B-V*z,b*N+k*O+D*z-V*B,b*B-k*z+D*O+V*N,b*z+k*B-D*N+V*O]}function w(s,_){if(!(!s||!_)){var b=C(s,_),k=Math.sqrt(y(b,b)),D=.5*Math.acos(Math.max(-1,Math.min(1,y(s,_)))),V=Math.sin(D)/k;return k&&[Math.cos(D),b[2]*V,-b[1]*V,b[0]*V]}}function c(s,_,b){var k=x(_,2,s[0]);k=x(k,1,s[1]),k=x(k,0,s[2]-b[2]);var D=_[0],V=_[1],O=_[2],N=k[0],B=k[1],z=k[2],H=Math.atan2(V,D)*T,X=Math.sqrt(D*D+V*V),$,ne;Math.abs(B)>X?(ne=(B>0?90:-90)-H,$=0):(ne=Math.asin(B/X)*T-H,$=Math.sqrt(X*X-B*B));var q=180-ne-2*H,ue=(Math.atan2(z,N)-Math.atan2(O,$))*T,te=(Math.atan2(z,N)-Math.atan2(O,-$))*T,J=a(b[0],b[1],ne,ue),ie=a(b[0],b[1],q,te);return J<=ie?[ne,ue,b[2]]:[q,te,b[2]]}function a(s,_,b,k){var D=p(b-s),V=p(k-_);return Math.sqrt(D*D+V*V)}function p(s){return(s%360+540)%360-180}function x(s,_,b){var k=b*E,D=s.slice(),V=_===0?1:0,O=_===2?1:2,N=Math.cos(k),B=Math.sin(k);return D[V]=s[V]*N-s[O]*B,D[O]=s[O]*N+s[V]*B,D}function A(s){return[Math.atan2(2*(s[0]*s[1]+s[2]*s[3]),1-2*(s[1]*s[1]+s[2]*s[2]))*T,Math.asin(Math.max(-1,Math.min(1,2*(s[0]*s[2]-s[3]*s[1]))))*T,Math.atan2(2*(s[0]*s[3]+s[1]*s[2]),1-2*(s[2]*s[2]+s[3]*s[3]))*T]}function P(s){var _=s[0]*E,b=s[1]*E,k=Math.cos(b);return[k*Math.cos(_),k*Math.sin(_),Math.sin(b)]}function y(s,_){for(var b=0,k=0,D=s.length;k<D;++k)b+=s[k]*_[k];return b}function C(s,_){return[s[1]*_[2]-s[2]*_[1],s[2]*_[0]-s[0]*_[2],s[0]*_[1]-s[1]*_[0]]}function M(s){for(var _=0,b=arguments.length,k=[];++_<b;)k.push(arguments[_]);var D=d.dispatch.apply(null,k);return D.of=function(V,O){return function(N){var B;try{B=N.sourceEvent=d.event,N.target=s,d.event=N,D[N.type].apply(V,O)}finally{d.event=B}}},D}},84888:function(U,F,e){var d=e(24040),S=e(33816).SUBPLOT_PATTERN;F.KY=function(n,E,T){var v=d.subplotsRegistry[E];if(!v)return[];for(var g=v.attr,r=[],t=0;t<n.length;t++){var o=n[t],i=o[0].trace;i[g]===T&&r.push(o)}return r},F._M=function(n,E,T){var v=[],g=[],r;if(typeof E=="string"?r=d.getModule(E).plot:typeof E=="function"?r=E:r=E.plot,!r)return[v,n];for(var t=T,o=0;o<n.length;o++){var i=n[o],f=i[0].trace,u=f.zorder!==void 0;f.visible!==!0||f._length===0||(f._module&&f._module.plot===r&&(!u||f.zorder===t)?v.push(i):g.push(i))}return[v,g]},F.op=function(E,T,v){if(!d.subplotsRegistry[T])return[];var g=d.subplotsRegistry[T].attr,r=[],t,o,i;if(T==="gl2d"){var f=v.match(S);o="x"+f[1],i="y"+f[2]}for(var u=0;u<E.length;u++)t=E[u],T==="gl2d"&&d.traceIs(t,"gl2d")?t[g[0]]===o&&t[g[1]]===i&&r.push(t):t[g]===v&&r.push(t);return r}},2428:function(U,F,e){var d=e(62644),S=e(97264),n=e(29128),E=e(33816),T=e(89184);U.exports=g;function v(r,t){this.element=r,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function g(r){var t=r.mouseContainer,o=r.glplot,i=new v(t,o);function f(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function u(){for(var m=r.graphDiv._fullLayout._axisConstraintGroups,h=r.xaxis._id,w=r.yaxis._id,c=0;c<m.length;c++)if(m[c][h]!==-1){if(m[c][w]!==-1)return!0;break}return!1}i.mouseListener=d(t,l),t.addEventListener("touchstart",function(m){var h=n(m.changedTouches[0],t);l(0,h[0],h[1]),l(1,h[0],h[1]),m.preventDefault()},T?{passive:!1}:!1),t.addEventListener("touchmove",function(m){m.preventDefault();var h=n(m.changedTouches[0],t);l(1,h[0],h[1]),m.preventDefault()},T?{passive:!1}:!1),t.addEventListener("touchend",function(m){l(0,i.lastPos[0],i.lastPos[1]),m.preventDefault()},T?{passive:!1}:!1);function l(m,h,w){var c=r.calcDataBox(),a=o.viewBox,p=i.lastPos[0],x=i.lastPos[1],A=E.MINDRAG*o.pixelRatio,P=E.MINZOOM*o.pixelRatio,y,C;h*=o.pixelRatio,w*=o.pixelRatio,w=a[3]-a[1]-w;function M(V,O,N){var B=Math.min(O,N),z=Math.max(O,N);B!==z?(c[V]=B,c[V+2]=z,i.dataBox=c,r.setRanges(c)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(m){var s=h/(a[2]-a[0])*(c[2]-c[0])+c[0],_=w/(a[3]-a[1])*(c[3]-c[1])+c[1];i.boxInited||(i.boxStart[0]=s,i.boxStart[1]=_,i.dragStart[0]=h,i.dragStart[1]=w),i.boxEnd[0]=s,i.boxEnd[1]=_,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var b=Math.abs(i.dragStart[0]-h)<P,k=Math.abs(i.dragStart[1]-w)<P;if(u()&&!(b&&k)){y=i.boxEnd[0]-i.boxStart[0],C=i.boxEnd[1]-i.boxStart[1];var D=(c[3]-c[1])/(c[2]-c[0]);Math.abs(y*D)>Math.abs(C)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(y)*D*(C>=0?1:-1),i.boxEnd[1]<c[1]?(i.boxEnd[1]=c[1],i.boxEnd[0]=i.boxStart[0]+(c[1]-i.boxStart[1])/Math.abs(D)):i.boxEnd[1]>c[3]&&(i.boxEnd[1]=c[3],i.boxEnd[0]=i.boxStart[0]+(c[3]-i.boxStart[1])/Math.abs(D))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(C)/D*(y>=0?1:-1),i.boxEnd[0]<c[0]?(i.boxEnd[0]=c[0],i.boxEnd[1]=i.boxStart[1]+(c[0]-i.boxStart[0])*Math.abs(D)):i.boxEnd[0]>c[2]&&(i.boxEnd[0]=c[2],i.boxEnd[1]=i.boxStart[1]+(c[2]-i.boxStart[0])*Math.abs(D)))}else b&&(i.boxEnd[0]=i.boxStart[0]),k&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(y=i.boxStart[0]!==i.boxEnd[0],C=i.boxStart[1]!==i.boxEnd[1],y||C?(y&&(M(0,i.boxStart[0],i.boxEnd[0]),r.xaxis.autorange=!1),C&&(M(1,i.boxStart[1],i.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,m?(i.panning||(i.dragStart[0]=h,i.dragStart[1]=w),Math.abs(i.dragStart[0]-h)<A&&(h=i.dragStart[0]),Math.abs(i.dragStart[1]-w)<A&&(w=i.dragStart[1]),y=(p-h)*(c[2]-c[0])/(o.viewBox[2]-o.viewBox[0]),C=(x-w)*(c[3]-c[1])/(o.viewBox[3]-o.viewBox[1]),c[0]+=y,c[2]+=y,c[1]+=C,c[3]+=C,r.setRanges(c),i.panning=!0,i.lastInputTime=Date.now(),f(),r.cameraChanged(),r.handleAnnotations()):i.panning&&(i.panning=!1,r.relayoutCallback());break}i.lastPos[0]=h,i.lastPos[1]=w}return i.wheelListener=S(t,function(m,h){if(!r.scrollZoom)return!1;var w=r.calcDataBox(),c=o.viewBox,a=i.lastPos[0],p=i.lastPos[1],x=Math.exp(5*h/(c[3]-c[1])),A=a/(c[2]-c[0])*(w[2]-w[0])+w[0],P=p/(c[3]-c[1])*(w[3]-w[1])+w[1];return w[0]=(w[0]-A)*x+A,w[2]=(w[2]-A)*x+A,w[1]=(w[1]-P)*x+P,w[3]=(w[3]-P)*x+P,r.setRanges(w),i.lastInputTime=Date.now(),f(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),i}},92568:function(U,F,e){var d=e(54460),S=e(43080);function n(g){this.scene=g,this.gl=g.gl,this.pixelRatio=g.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var E=n.prototype,T=["xaxis","yaxis"];E.merge=function(g){this.titleEnable=!1,this.backgroundColor=S(g.plot_bgcolor);var r,t,o,i,f,u,l,m,h,w,c;for(w=0;w<2;++w){r=T[w];var a=r.charAt(0);for(t=g[this.scene[r]._name],o=t.title.text===this.scene.fullLayout._dfltTitle[a]?"":t.title.text,c=0;c<=2;c+=2)this.labelEnable[w+c]=!1,this.labels[w+c]=o,this.labelColor[w+c]=S(t.title.font.color),this.labelFont[w+c]=t.title.font.family,this.labelSize[w+c]=t.title.font.size,this.labelPad[w+c]=this.getLabelPad(r,t),this.tickEnable[w+c]=!1,this.tickColor[w+c]=S((t.tickfont||{}).color),this.tickAngle[w+c]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[w+c]=this.getTickPad(t),this.tickMarkLength[w+c]=0,this.tickMarkWidth[w+c]=t.tickwidth||0,this.tickMarkColor[w+c]=S(t.tickcolor),this.borderLineEnable[w+c]=!1,this.borderLineColor[w+c]=S(t.linecolor),this.borderLineWidth[w+c]=t.linewidth||0;l=this.hasSharedAxis(t),f=this.hasAxisInDfltPos(r,t)&&!l,u=this.hasAxisInAltrPos(r,t)&&!l,i=t.mirror||!1,m=l?String(i).indexOf("all")!==-1:!!i,h=l?i==="allticks":String(i).indexOf("ticks")!==-1,f?this.labelEnable[w]=!0:u&&(this.labelEnable[w+2]=!0),f?this.tickEnable[w]=t.showticklabels:u&&(this.tickEnable[w+2]=t.showticklabels),(f||m)&&(this.borderLineEnable[w]=t.showline),(u||m)&&(this.borderLineEnable[w+2]=t.showline),(f||h)&&(this.tickMarkLength[w]=this.getTickMarkLength(t)),(u||h)&&(this.tickMarkLength[w+2]=this.getTickMarkLength(t)),this.gridLineEnable[w]=t.showgrid,this.gridLineColor[w]=S(t.gridcolor),this.gridLineWidth[w]=t.gridwidth,this.zeroLineEnable[w]=t.zeroline,this.zeroLineColor[w]=S(t.zerolinecolor),this.zeroLineWidth[w]=t.zerolinewidth}},E.hasSharedAxis=function(g){var r=this.scene,t=r.fullLayout._subplots.gl2d,o=d.findSubplotsWithAxis(t,g);return o.indexOf(r.id)!==0},E.hasAxisInDfltPos=function(g,r){var t=r.side;if(g==="xaxis")return t==="bottom";if(g==="yaxis")return t==="left"},E.hasAxisInAltrPos=function(g,r){var t=r.side;if(g==="xaxis")return t==="top";if(g==="yaxis")return t==="right"},E.getLabelPad=function(g,r){var t=1.5,o=r.title.font.size,i=r.showticklabels;if(g==="xaxis")return r.side==="top"?-10+o*(t+(i?1:0)):-10+o*(t+(i?.5:0));if(g==="yaxis")return r.side==="right"?10+o*(t+(i?1:.5)):10+o*(t+(i?.5:0))},E.getTickPad=function(g){return g.ticks==="outside"?10+g.ticklen:15},E.getTickMarkLength=function(g){if(!g.ticks)return 0;var r=g.ticklen;return g.ticks==="inside"?-r:r};function v(g){return new n(g)}U.exports=v},39952:function(U,F,e){var d=e(67824).overrideAll,S=e(17188),n=e(64859),E=e(9616),T=e(33816),v=e(57952),g=e(65460),r=e(84888).op;F.name="gl2d",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=T.idRegex,F.attrRegex=T.attrRegex,F.attributes=e(26720),F.supplyLayoutDefaults=function(t,o,i){o._has("cartesian")||v.supplyLayoutDefaults(t,o,i)},F.layoutAttrOverrides=d(v.layoutAttributes,"plot","from-root"),F.baseLayoutAttrOverrides=d({plot_bgcolor:n.plot_bgcolor,hoverlabel:g.hoverlabel},"plot","nested"),F.plot=function(o){for(var i=o._fullLayout,f=o._fullData,u=i._subplots.gl2d,l=0;l<u.length;l++){var m=u[l],h=i._plots[m],w=r(f,"gl2d",m),c=h._scene2d;c===void 0&&(c=new S({id:m,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},i),h._scene2d=c),c.plot(w,o.calcdata,i,o.layout)}},F.clean=function(t,o,i,f){for(var u=f._subplots.gl2d||[],l=0;l<u.length;l++){var m=u[l],h=f._plots[m];if(h._scene2d){var w=r(t,"gl2d",m);w.length===0&&(h._scene2d.destroy(),delete f._plots[m])}}v.clean.apply(this,arguments)},F.drawFramework=function(t){t._context.staticPlot||v.drawFramework(t)},F.toSVG=function(t){for(var o=t._fullLayout,i=o._subplots.gl2d,f=0;f<i.length;f++){var u=o._plots[i[f]],l=u._scene2d,m=l.toImage("png"),h=o._glimages.append("svg:image");h.attr({xmlns:E.svg,"xlink:href":m,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},F.updateFx=function(t){for(var o=t._fullLayout,i=o._subplots.gl2d,f=0;f<i.length;f++){var u=o._plots[i[f]]._scene2d;u.updateFx(o.dragmode)}}},17188:function(U,F,e){var d=e(24040),S=e(54460),n=e(93024),E=e(67792).gl_plot2d,T=e(67792).gl_spikes2d,v=e(67792).gl_select_box,g=e(5408),r=e(92568),t=e(2428),o=e(16576),i=e(71888),f=i.enforce,u=i.clean,l=e(19280).doAutoRange,m=e(72760),h=m.drawMode,w=m.selectMode,c=["xaxis","yaxis"],a,p,x=e(33816).SUBPLOT_PATTERN;function A(C,M){this.container=C.container,this.graphDiv=C.graphDiv,this.pixelRatio=C.plotGlPixelRatio||window.devicePixelRatio,this.id=C.id,this.staticPlot=!!C.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(M),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(M),this.glplot=E(this.glplotOptions),this.camera=t(this),this.traces={},this.spikes=T(this.glplot),this.selectBox=v(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}U.exports=A;var P=A.prototype;P.makeFramework=function(){if(this.staticPlot){if(!p&&(a=document.createElement("canvas"),p=g({canvas:a,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!p))throw new Error("Error creating static canvas/context for image server");this.canvas=a,this.gl=p}else{var C=this.container.querySelector(".gl-canvas-focus"),M=g({canvas:C,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!M){o(this),this.stopped=!0;return}this.canvas=C,this.gl=M}var s=this.canvas;s.style.width="100%",s.style.height="100%",s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style["pointer-events"]="none",this.updateSize(s);var _=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");_.style.position="absolute",_.style.top=_.style.left="0px",_.style.width=_.style.height="100%",_.style["z-index"]=20,_.style["pointer-events"]="none";var b=this.mouseContainer=document.createElement("div");b.style.position="absolute",b.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var k=this.container;k.appendChild(_),k.appendChild(b);var D=this;b.addEventListener("mouseout",function(){D.isMouseOver=!1,D.unhover()}),b.addEventListener("mouseover",function(){D.isMouseOver=!0})},P.toImage=function(C){C||(C="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(a),this.updateSize(this.canvas);var M=this.glplot.gl,s=M.drawingBufferWidth,_=M.drawingBufferHeight;M.clearColor(1,1,1,0),M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),M.bindFramebuffer(M.FRAMEBUFFER,null);var b=new Uint8Array(s*_*4);M.readPixels(0,0,s,_,M.RGBA,M.UNSIGNED_BYTE,b);for(var k=0,D=_-1;k<D;++k,--D)for(var V=0;V<s;++V)for(var O=0;O<4;++O){var N=b[4*(s*k+V)+O];b[4*(s*k+V)+O]=b[4*(s*D+V)+O],b[4*(s*D+V)+O]=N}var B=document.createElement("canvas");B.width=s,B.height=_;var z=B.getContext("2d",{willReadFrequently:!0}),H=z.createImageData(s,_);H.data.set(b),z.putImageData(H,0,0);var X;switch(C){case"jpeg":X=B.toDataURL("image/jpeg");break;case"webp":X=B.toDataURL("image/webp");break;default:X=B.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(a),X},P.updateSize=function(C){C||(C=this.canvas);var M=this.pixelRatio,s=this.fullLayout,_=s.width,b=s.height,k=Math.ceil(M*_)|0,D=Math.ceil(M*b)|0;return(C.width!==k||C.height!==D)&&(C.width=k,C.height=D),C},P.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var C=[S.calcTicks(this.xaxis),S.calcTicks(this.yaxis)],M=0;M<2;++M)for(var s=0;s<C[M].length;++s)C[M][s].text=C[M][s].text+"";return C};function y(C,M){for(var s=0;s<2;++s){var _=C[s],b=M[s];if(_.length!==b.length)return!0;for(var k=0;k<_.length;++k)if(_[k].x!==b[k].x)return!0}return!1}P.updateRefs=function(C){this.fullLayout=C;var M=this.id.match(x),s="xaxis"+M[1],_="yaxis"+M[2];this.xaxis=this.fullLayout[s],this.yaxis=this.fullLayout[_]},P.relayoutCallback=function(){var C=this.graphDiv,M=this.xaxis,s=this.yaxis,_=C.layout,b={},k=b[M._name+".range"]=M.range.slice(),D=b[s._name+".range"]=s.range.slice();b[M._name+".autorange"]=M.autorange,b[s._name+".autorange"]=s.autorange,d.call("_storeDirectGUIEdit",C.layout,C._fullLayout._preGUI,b);var V=_[M._name];V.range=k,V.autorange=M.autorange;var O=_[s._name];O.range=D,O.autorange=s.autorange,b.lastInputTime=this.camera.lastInputTime,C.emit("plotly_relayout",b)},P.cameraChanged=function(){var C=this.camera;this.glplot.setDataBox(this.calcDataBox());var M=this.computeTickMarks(),s=this.glplotOptions.ticks;y(M,s)&&(this.glplotOptions.ticks=M,this.glplotOptions.dataBox=C.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},P.handleAnnotations=function(){for(var C=this.graphDiv,M=this.fullLayout.annotations,s=0;s<M.length;s++){var _=M[s];_.xref===this.xaxis._id&&_.yref===this.yaxis._id&&d.getComponentMethod("annotations","drawOne")(C,s)}},P.destroy=function(){if(this.glplot){var C=this.traces;C&&Object.keys(C).map(function(M){C[M].dispose(),delete C[M]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},P.plot=function(C,M,s){var _=this.glplot;this.updateRefs(s),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(C,M),this.updateFx(s.dragmode);var b=s.width,k=s.height;this.updateSize(this.canvas);var D=this.glplotOptions;D.merge(s),D.screenBox=[0,0,b,k];var V={_fullLayout:{_axisConstraintGroups:s._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:s._size}};u(V,this.xaxis),u(V,this.yaxis);var O=s._size,N=this.xaxis.domain,B=this.yaxis.domain;D.viewBox=[O.l+N[0]*O.w,O.b+B[0]*O.h,b-O.r-(1-N[1])*O.w,k-O.t-(1-B[1])*O.h],this.mouseContainer.style.width=O.w*(N[1]-N[0])+"px",this.mouseContainer.style.height=O.h*(B[1]-B[0])+"px",this.mouseContainer.height=O.h*(B[1]-B[0]),this.mouseContainer.style.left=O.l+N[0]*O.w+"px",this.mouseContainer.style.top=O.t+(1-B[1])*O.h+"px";var z,H;for(H=0;H<2;++H)z=this[c[H]],z._length=D.viewBox[H+2]-D.viewBox[H],l(this.graphDiv,z),z.setScale();f(V),D.ticks=this.computeTickMarks(),D.dataBox=this.calcDataBox(),D.merge(s),_.update(D),this.glplot.draw()},P.calcDataBox=function(){var C=this.xaxis,M=this.yaxis,s=C.range,_=M.range,b=C.r2l,k=M.r2l;return[b(s[0]),k(_[0]),b(s[1]),k(_[1])]},P.setRanges=function(C){var M=this.xaxis,s=this.yaxis,_=M.l2r,b=s.l2r;M.range=[_(C[0]),_(C[2])],s.range=[b(C[1]),b(C[3])]},P.updateTraces=function(C,M){var s=Object.keys(this.traces),_,b,k;this.fullData=C;e:for(_=0;_<s.length;_++){var D=s[_],V=this.traces[D];for(b=0;b<C.length;b++)if(k=C[b],k.uid===D&&k.type===V.type)continue e;V.dispose(),delete this.traces[D]}for(_=0;_<C.length;_++){k=C[_];var O=M[_],N=this.traces[k.uid];N?N.update(k,O):(N=k._module.plot(this,k,O),this.traces[k.uid]=N)}this.glplot.objects.sort(function(B,z){return B._trace.index-z._trace.index})},P.updateFx=function(C){w(C)||h(C)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),C==="pan"?this.mouseContainer.style.cursor="move":C==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},P.emitPointAction=function(C,M){for(var s=C.trace.uid,_=C.pointIndex,b,k=0;k<this.fullData.length;k++)this.fullData[k].uid===s&&(b=this.fullData[k]);var D={x:C.traceCoord[0],y:C.traceCoord[1],curveNumber:b.index,pointNumber:_,data:b._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};n.appendArrayPointValue(D,b,_),this.graphDiv.emit(M,{points:[D]})},P.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var C=this.glplot,M=this.camera,s=M.mouseListener,_=this.lastButtonState===1&&s.buttons===0,b=this.fullLayout;this.lastButtonState=s.buttons,this.cameraChanged();var k=s.x*C.pixelRatio,D=this.canvas.height-C.pixelRatio*s.y,V;if(M.boxEnabled&&b.dragmode==="zoom"){this.selectBox.enabled=!0;for(var O=this.selectBox.selectBox=[Math.min(M.boxStart[0],M.boxEnd[0]),Math.min(M.boxStart[1],M.boxEnd[1]),Math.max(M.boxStart[0],M.boxEnd[0]),Math.max(M.boxStart[1],M.boxEnd[1])],N=0;N<2;N++)M.boxStart[N]===M.boxEnd[N]&&(O[N]=C.dataBox[N],O[N+2]=C.dataBox[N+2]);C.setDirty()}else if(!M.panning&&this.isMouseOver){this.selectBox.enabled=!1;var B=b._size,z=this.xaxis.domain,H=this.yaxis.domain;V=C.pick(k/C.pixelRatio+B.l+z[0]*B.w,D/C.pixelRatio-(B.t+(1-H[1])*B.h));var X=V&&V.object._trace.handlePick(V);if(X&&_&&this.emitPointAction(X,"plotly_click"),V&&V.object._trace.hoverinfo!=="skip"&&b.hovermode&&X&&(!this.lastPickResult||this.lastPickResult.traceUid!==X.trace.uid||this.lastPickResult.dataCoord[0]!==X.dataCoord[0]||this.lastPickResult.dataCoord[1]!==X.dataCoord[1])){var $=X;this.lastPickResult={traceUid:X.trace?X.trace.uid:null,dataCoord:X.dataCoord.slice()},this.spikes.update({center:V.dataCoord}),$.screenCoord=[((C.viewBox[2]-C.viewBox[0])*(V.dataCoord[0]-C.dataBox[0])/(C.dataBox[2]-C.dataBox[0])+C.viewBox[0])/C.pixelRatio,(this.canvas.height-(C.viewBox[3]-C.viewBox[1])*(V.dataCoord[1]-C.dataBox[1])/(C.dataBox[3]-C.dataBox[1])-C.viewBox[1])/C.pixelRatio],this.emitPointAction(X,"plotly_hover");var ne=this.fullData[$.trace.index]||{},q=$.pointIndex,ue=n.castHoverinfo(ne,b,q);if(ue&&ue!=="all"){var te=ue.split("+");te.indexOf("x")===-1&&($.traceCoord[0]=void 0),te.indexOf("y")===-1&&($.traceCoord[1]=void 0),te.indexOf("z")===-1&&($.traceCoord[2]=void 0),te.indexOf("text")===-1&&($.textLabel=void 0),te.indexOf("name")===-1&&($.name=void 0)}n.loneHover({x:$.screenCoord[0],y:$.screenCoord[1],xLabel:this.hoverFormatter("xaxis",$.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",$.traceCoord[1]),zLabel:$.traceCoord[2],text:$.textLabel,name:$.name,color:n.castHoverOption(ne,q,"bgcolor")||$.color,borderColor:n.castHoverOption(ne,q,"bordercolor"),fontFamily:n.castHoverOption(ne,q,"font.family"),fontSize:n.castHoverOption(ne,q,"font.size"),fontColor:n.castHoverOption(ne,q,"font.color"),nameLength:n.castHoverOption(ne,q,"namelength"),textAlign:n.castHoverOption(ne,q,"align")},{container:this.svgContainer,gd:this.graphDiv})}}V||this.unhover(),C.draw()}},P.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),n.loneUnhover(this.svgContainer))},P.hoverFormatter=function(C,M){if(M!==void 0){var s=this[C];return S.tickText(s,s.c2l(M),"hover").text}}},12536:function(U,F,e){var d=e(67824).overrideAll,S=e(65460),n=e(98432),E=e(84888).op,T=e(3400),v=e(9616),g="gl3d",r="scene";F.name=g,F.attr=r,F.idRoot=r,F.idRegex=F.attrRegex=T.counterRegex("scene"),F.attributes=e(6636),F.layoutAttributes=e(346),F.baseLayoutAttrOverrides=d({hoverlabel:S.hoverlabel},"plot","nested"),F.supplyLayoutDefaults=e(5208),F.plot=function(o){for(var i=o._fullLayout,f=o._fullData,u=i._subplots[g],l=0;l<u.length;l++){var m=u[l],h=E(f,g,m),w=i[m],c=w.camera,a=w._scene;a||(a=new n({id:m,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:c},i),w._scene=a),a.viewInitial||(a.viewInitial={up:{x:c.up.x,y:c.up.y,z:c.up.z},eye:{x:c.eye.x,y:c.eye.y,z:c.eye.z},center:{x:c.center.x,y:c.center.y,z:c.center.z}}),a.plot(h,i,o.layout)}},F.clean=function(t,o,i,f){for(var u=f._subplots[g]||[],l=0;l<u.length;l++){var m=u[l];!o[m]&&f[m]._scene&&(f[m]._scene.destroy(),f._infolayer&&f._infolayer.selectAll(".annotation-"+m).remove())}},F.toSVG=function(t){for(var o=t._fullLayout,i=o._subplots[g],f=o._size,u=0;u<i.length;u++){var l=o[i[u]],m=l.domain,h=l._scene,w=h.toImage("png"),c=o._glimages.append("svg:image");c.attr({xmlns:v.svg,"xlink:href":w,x:f.l+f.w*m.x[0],y:f.t+f.h*(1-m.y[1]),width:f.w*(m.x[1]-m.x[0]),height:f.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"}),h.destroy()}},F.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var i=o.substr(5);return i==="1"&&(i=""),r+i}},F.updateFx=function(t){for(var o=t._fullLayout,i=o._subplots[g],f=0;f<i.length;f++){var u=o[i[f]]._scene;u.updateFx(o.dragmode,o.hovermode)}}},6636:function(U){U.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(U,F,e){var d=e(76308),S=e(94724),n=e(92880).extendFlat,E=e(67824).overrideAll;U.exports=E({visible:S.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:d.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:S.color,categoryorder:S.categoryorder,categoryarray:S.categoryarray,title:{text:S.title.text,font:S.title.font},type:n({},S.type,{values:["-","linear","log","date","category"]}),autotypenumbers:S.autotypenumbers,autorange:S.autorange,autorangeoptions:{minallowed:S.autorangeoptions.minallowed,maxallowed:S.autorangeoptions.maxallowed,clipmin:S.autorangeoptions.clipmin,clipmax:S.autorangeoptions.clipmax,include:S.autorangeoptions.include,editType:"plot"},rangemode:S.rangemode,minallowed:S.minallowed,maxallowed:S.maxallowed,range:n({},S.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:S.minor.tickmode,nticks:S.nticks,tick0:S.tick0,dtick:S.dtick,tickvals:S.tickvals,ticktext:S.ticktext,ticks:S.ticks,mirror:S.mirror,ticklen:S.ticklen,tickwidth:S.tickwidth,tickcolor:S.tickcolor,showticklabels:S.showticklabels,labelalias:S.labelalias,tickfont:S.tickfont,tickangle:S.tickangle,tickprefix:S.tickprefix,showtickprefix:S.showtickprefix,ticksuffix:S.ticksuffix,showticksuffix:S.showticksuffix,showexponent:S.showexponent,exponentformat:S.exponentformat,minexponent:S.minexponent,separatethousands:S.separatethousands,tickformat:S.tickformat,tickformatstops:S.tickformatstops,hoverformat:S.hoverformat,showline:S.showline,linecolor:S.linecolor,linewidth:S.linewidth,showgrid:S.showgrid,gridcolor:n({},S.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:S.gridwidth,zeroline:S.zeroline,zerolinecolor:S.zerolinecolor,zerolinewidth:S.zerolinewidth,_deprecated:{title:S._deprecated.title,titlefont:S._deprecated.titlefont}},"plot","from-root")},64380:function(U,F,e){var d=e(49760).mix,S=e(3400),n=e(31780),E=e(86140),T=e(14944),v=e(28336),g=["xaxis","yaxis","zaxis"],r=100*136/187;U.exports=function(o,i,f){var u,l;function m(c,a){return S.coerce(u,l,E,c,a)}for(var h=0;h<g.length;h++){var w=g[h];u=o[w]||{},l=n.newContainer(i,w),l._id=w[0]+f.scene,l._name=w,T(u,l,m,f),v(u,l,m,{font:f.font,letter:w[0],data:f.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:f.bgColor,calendar:f.calendar},f.fullLayout),m("gridcolor",d(l.color,f.bgColor,r).toRgbString()),m("title.text",w[0]),l.setScale=S.noop,m("showspikes")&&(m("spikesides"),m("spikethickness"),m("spikecolor",l.color)),m("showaxeslabels"),m("showbackground")&&m("backgroundcolor")}}},44728:function(U,F,e){var d=e(43080),S=e(3400),n=["xaxis","yaxis","zaxis"];function E(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var T=E.prototype;T.merge=function(g,r){for(var t=this,o=0;o<3;++o){var i=r[n[o]];if(!i.visible){t.tickEnable[o]=!1,t.labelEnable[o]=!1,t.lineEnable[o]=!1,t.lineTickEnable[o]=!1,t.gridEnable[o]=!1,t.zeroEnable[o]=!1,t.backgroundEnable[o]=!1;continue}t.labels[o]=g._meta?S.templateString(i.title.text,g._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(t.labelColor[o]=d(i.title.font.color)),i.title.font.family&&(t.labelFont[o]=i.title.font.family),i.title.font.size&&(t.labelSize[o]=i.title.font.size),i.title.font.weight&&(t.labelFontWeight[o]=i.title.font.weight),i.title.font.style&&(t.labelFontStyle[o]=i.title.font.style),i.title.font.variant&&(t.labelFontVariant[o]=i.title.font.variant)),"showline"in i&&(t.lineEnable[o]=i.showline),"linecolor"in i&&(t.lineColor[o]=d(i.linecolor)),"linewidth"in i&&(t.lineWidth[o]=i.linewidth),"showgrid"in i&&(t.gridEnable[o]=i.showgrid),"gridcolor"in i&&(t.gridColor[o]=d(i.gridcolor)),"gridwidth"in i&&(t.gridWidth[o]=i.gridwidth),i.type==="log"?t.zeroEnable[o]=!1:"zeroline"in i&&(t.zeroEnable[o]=i.zeroline),"zerolinecolor"in i&&(t.zeroLineColor[o]=d(i.zerolinecolor)),"zerolinewidth"in i&&(t.zeroLineWidth[o]=i.zerolinewidth),"ticks"in i&&i.ticks?t.lineTickEnable[o]=!0:t.lineTickEnable[o]=!1,"ticklen"in i&&(t.lineTickLength[o]=t._defaultLineTickLength[o]=i.ticklen),"tickcolor"in i&&(t.lineTickColor[o]=d(i.tickcolor)),"tickwidth"in i&&(t.lineTickWidth[o]=i.tickwidth),"tickangle"in i&&(t.tickAngle[o]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(t.tickEnable[o]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(t.tickColor[o]=d(i.tickfont.color)),i.tickfont.family&&(t.tickFont[o]=i.tickfont.family),i.tickfont.size&&(t.tickSize[o]=i.tickfont.size),i.tickfont.weight&&(t.tickFontWeight[o]=i.tickfont.weight),i.tickfont.style&&(t.tickFontStyle[o]=i.tickfont.style),i.tickfont.variant&&(t.tickFontVariant[o]=i.tickfont.variant)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(t.lineTickMirror[o]=!0,t.lineMirror[o]=!0):i.mirror===!0?(t.lineTickMirror[o]=!1,t.lineMirror[o]=!0):(t.lineTickMirror[o]=!1,t.lineMirror[o]=!1):t.lineMirror[o]=!1,"showbackground"in i&&i.showbackground!==!1?(t.backgroundEnable[o]=!0,t.backgroundColor[o]=d(i.backgroundcolor)):t.backgroundEnable[o]=!1}};function v(g,r){var t=new E;return t.merge(g,r),t}U.exports=v},5208:function(U,F,e){var d=e(3400),S=e(76308),n=e(24040),E=e(168),T=e(64380),v=e(346),g=e(84888).op,r="gl3d";U.exports=function(i,f,u){var l=f._basePlotModules.length>1;function m(h){if(!l){var w=d.validate(i[h],v[h]);if(w)return i[h]}}E(i,f,u,{type:r,attributes:v,handleDefaults:t,fullLayout:f,font:f.font,fullData:u,getDfltFromLayout:m,autotypenumbersDflt:f.autotypenumbers,paper_bgcolor:f.paper_bgcolor,calendar:f.calendar})};function t(o,i,f,u){for(var l=f("bgcolor"),m=S.combine(l,u.paper_bgcolor),h=["up","center","eye"],w=0;w<h.length;w++)f("camera."+h[w]+".x"),f("camera."+h[w]+".y"),f("camera."+h[w]+".z");f("camera.projection.type");var c=!!f("aspectratio.x")&&!!f("aspectratio.y")&&!!f("aspectratio.z"),a=c?"manual":"auto",p=f("aspectmode",a);c||(o.aspectratio=i.aspectratio={x:1,y:1,z:1},p==="manual"&&(i.aspectmode="auto"),o.aspectmode=i.aspectmode);var x=g(u.fullData,r,u.id);T(o,i,{font:u.font,scene:u.id,data:x,bgColor:m,calendar:u.calendar,autotypenumbersDflt:u.autotypenumbersDflt,fullLayout:u.fullLayout}),n.getComponentMethod("annotations3d","handleDefaults")(o,i,u);var A=u.getDfltFromLayout("dragmode");if(A!==!1&&!A)if(A="orbit",o.camera&&o.camera.up){var P=o.camera.up.x,y=o.camera.up.y,C=o.camera.up.z;C!==0&&(!P||!y||!C||C/Math.sqrt(P*P+y*y+C*C)>.999)&&(A="turntable")}else A="turntable";f("dragmode",A),f("hovermode",u.getDfltFromLayout("hovermode"))}},346:function(U,F,e){var d=e(86140),S=e(86968).u,n=e(92880).extendFlat,E=e(3400).counterRegex;function T(v,g,r){return{x:{valType:"number",dflt:v,editType:"camera"},y:{valType:"number",dflt:g,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}U.exports={_arrayAttrRegexps:[E("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:n(T(0,0,1),{}),center:n(T(0,0,0),{}),eye:n(T(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:S({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:d,yaxis:d,zaxis:d,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(U,F,e){var d=e(43080),S=["xaxis","yaxis","zaxis"];function n(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var E=n.prototype;E.merge=function(v){for(var g=0;g<3;++g){var r=v[S[g]];if(!r.visible){this.enabled[g]=!1,this.drawSides[g]=!1;continue}this.enabled[g]=r.showspikes,this.colors[g]=d(r.spikecolor),this.drawSides[g]=r.spikesides,this.lineWidth[g]=r.spikethickness}};function T(v){var g=new n;return g.merge(v),g}U.exports=T},87152:function(U,F,e){U.exports=T;var d=e(54460),S=e(3400),n=["xaxis","yaxis","zaxis"];function E(v){for(var g=new Array(3),r=0;r<3;++r){for(var t=v[r],o=new Array(t.length),i=0;i<t.length;++i)o[i]=t[i].x;g[r]=o}return g}function T(v){for(var g=v.axesOptions,r=v.glplot.axesPixels,t=v.fullSceneLayout,o=[[],[],[]],i=0;i<3;++i){var f=t[n[i]];if(f._length=(r[i].hi-r[i].lo)*r[i].pixelsPerDataUnit/v.dataScale[i],Math.abs(f._length)===1/0||isNaN(f._length))o[i]=[];else{f._input_range=f.range.slice(),f.range[0]=r[i].lo/v.dataScale[i],f.range[1]=r[i].hi/v.dataScale[i],f._m=1/(v.dataScale[i]*r[i].pixelsPerDataUnit),f.range[0]===f.range[1]&&(f.range[0]-=1,f.range[1]+=1);var u=f.tickmode;if(f.tickmode==="auto"){f.tickmode="linear";var l=f.nticks||S.constrain(f._length/40,4,9);d.autoTicks(f,Math.abs(f.range[1]-f.range[0])/l)}for(var m=d.calcTicks(f,{msUTC:!0}),h=0;h<m.length;++h)m[h].x=m[h].x*v.dataScale[i],f.type==="date"&&(m[h].text=m[h].text.replace(/\<br\>/g," "));o[i]=m,f.tickmode=u}}g.ticks=o;for(var i=0;i<3;++i){.5*(v.glplot.bounds[0][i]+v.glplot.bounds[1][i]);for(var h=0;h<2;++h)g.bounds[h][i]=v.glplot.bounds[h][i]}v.contourLevels=E(o)}},94424:function(U){function F(d,S){var n=[0,0,0,0],E,T;for(E=0;E<4;++E)for(T=0;T<4;++T)n[T]+=d[4*E+T]*S[E];return n}function e(d,S){var n=F(d.projection,F(d.view,F(d.model,[S[0],S[1],S[2],1])));return n}U.exports=e},98432:function(U,F,e){var d=e(67792).gl_plot3d,S=d.createCamera,n=d.createScene,E=e(5408),T=e(89184),v=e(24040),g=e(3400),r=g.preserveDrawingBuffer(),t=e(54460),o=e(93024),i=e(43080),f=e(16576),u=e(94424),l=e(44728),m=e(9020),h=e(87152),w=e(19280).applyAutorangeOptions,c,a,p=!1;function x(D,V){var O=document.createElement("div"),N=D.container;this.graphDiv=D.graphDiv;var B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.style.position="absolute",B.style.top=B.style.left="0px",B.style.width=B.style.height="100%",B.style["z-index"]=20,B.style["pointer-events"]="none",O.appendChild(B),this.svgContainer=B,O.id=D.id,O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",N.appendChild(O),this.fullLayout=V,this.id=D.id||"scene",this.fullSceneLayout=V[this.id],this.plotArgs=[[],{},{}],this.axesOptions=l(V,V[this.id]),this.spikeOptions=m(V[this.id]),this.container=O,this.staticMode=!!D.staticPlot,this.pixelRatio=this.pixelRatio||D.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=v.getComponentMethod("annotations3d","convert"),this.drawAnnotations=v.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var A=x.prototype;A.prepareOptions=function(){var D=this,V={canvas:D.canvas,gl:D.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:D.container,axes:D.axesOptions,spikes:D.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:D.camera,pixelRatio:D.pixelRatio};if(D.staticMode){if(!a&&(c=document.createElement("canvas"),a=E({canvas:c,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!a))throw new Error("error creating static canvas/context for image server");V.gl=a,V.canvas=c}return V};var P=!0;A.tryCreatePlot=function(){var D=this,V=D.prepareOptions(),O=!0;try{D.glplot=n(V)}catch{if(D.staticMode||!P||r)O=!1;else{g.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=V.glOptions.preserveDrawingBuffer=!0,D.glplot=n(V)}catch{r=V.glOptions.preserveDrawingBuffer=!1,O=!1}}}return P=!1,O},A.initializeGLCamera=function(){var D=this,V=D.fullSceneLayout.camera,O=V.projection.type==="orthographic";D.camera=S(D.container,{center:[V.center.x,V.center.y,V.center.z],eye:[V.eye.x,V.eye.y,V.eye.z],up:[V.up.x,V.up.y,V.up.z],_ortho:O,zoomMin:.01,zoomMax:100,mode:"orbit"})},A.initializeGLPlot=function(){var D=this;D.initializeGLCamera();var V=D.tryCreatePlot();if(!V)return f(D);D.traces={},D.make4thDimension();var O=D.graphDiv,N=O.layout,B=function(){var H={};return D.isCameraChanged(N)&&(H[D.id+".camera"]=D.getCamera()),D.isAspectChanged(N)&&(H[D.id+".aspectratio"]=D.glplot.getAspectratio(),N[D.id].aspectmode!=="manual"&&(D.fullSceneLayout.aspectmode=N[D.id].aspectmode=H[D.id+".aspectmode"]="manual")),H},z=function(H){if(H.fullSceneLayout.dragmode!==!1){var X=B();H.saveLayout(N),H.graphDiv.emit("plotly_relayout",X)}};return D.glplot.canvas&&(D.glplot.canvas.addEventListener("mouseup",function(){z(D)}),D.glplot.canvas.addEventListener("touchstart",function(){p=!0}),D.glplot.canvas.addEventListener("wheel",function(H){if(O._context._scrollZoom.gl3d){if(D.camera._ortho){var X=H.deltaX>H.deltaY?1.1:.9090909090909091,$=D.glplot.getAspectratio();D.glplot.setAspectratio({x:X*$.x,y:X*$.y,z:X*$.z})}z(D)}},T?{passive:!1}:!1),D.glplot.canvas.addEventListener("mousemove",function(){if(D.fullSceneLayout.dragmode!==!1&&D.camera.mouseListener.buttons!==0){var H=B();D.graphDiv.emit("plotly_relayouting",H)}}),D.staticMode||D.glplot.canvas.addEventListener("webglcontextlost",function(H){O&&O.emit&&O.emit("plotly_webglcontextlost",{event:H,layer:D.id})},!1)),D.glplot.oncontextloss=function(){D.recoverContext()},D.glplot.onrender=function(){D.render()},!0},A.render=function(){var D=this,V=D.graphDiv,O,N=D.svgContainer,B=D.container.getBoundingClientRect();V._fullLayout._calcInverseTransform(V);var z=V._fullLayout._invScaleX,H=V._fullLayout._invScaleY,X=B.width*z,$=B.height*H;N.setAttributeNS(null,"viewBox","0 0 "+X+" "+$),N.setAttributeNS(null,"width",X),N.setAttributeNS(null,"height",$),h(D),D.glplot.axes.update(D.axesOptions);for(var ne=Object.keys(D.traces),q=null,ue=D.glplot.selection,te=0;te<ne.length;++te)O=D.traces[ne[te]],O.data.hoverinfo!=="skip"&&O.handlePick(ue)&&(q=O),O.setContourLevels&&O.setContourLevels();function J(_e,ke,Ne){var Ee=D.fullSceneLayout[_e+"axis"];return Ee.type!=="log"&&(ke=Ee.d2l(ke)),t.hoverLabelText(Ee,ke,Ne)}if(q!==null){var ie=u(D.glplot.cameraParams,ue.dataCoordinate);O=q.data;var K=V._fullData[O.index],ee=ue.index,le={xLabel:J("x",ue.traceCoordinate[0],O.xhoverformat),yLabel:J("y",ue.traceCoordinate[1],O.yhoverformat),zLabel:J("z",ue.traceCoordinate[2],O.zhoverformat)},j=o.castHoverinfo(K,D.fullLayout,ee),Z=(j||"").split("+"),fe=j&&j==="all";!K.hovertemplate&&!fe&&(Z.indexOf("x")===-1&&(le.xLabel=void 0),Z.indexOf("y")===-1&&(le.yLabel=void 0),Z.indexOf("z")===-1&&(le.zLabel=void 0),Z.indexOf("text")===-1&&(ue.textLabel=void 0),Z.indexOf("name")===-1&&(q.name=void 0));var re,ce=[];O.type==="cone"||O.type==="streamtube"?(le.uLabel=J("x",ue.traceCoordinate[3],O.uhoverformat),(fe||Z.indexOf("u")!==-1)&&ce.push("u: "+le.uLabel),le.vLabel=J("y",ue.traceCoordinate[4],O.vhoverformat),(fe||Z.indexOf("v")!==-1)&&ce.push("v: "+le.vLabel),le.wLabel=J("z",ue.traceCoordinate[5],O.whoverformat),(fe||Z.indexOf("w")!==-1)&&ce.push("w: "+le.wLabel),le.normLabel=ue.traceCoordinate[6].toPrecision(3),(fe||Z.indexOf("norm")!==-1)&&ce.push("norm: "+le.normLabel),O.type==="streamtube"&&(le.divergenceLabel=ue.traceCoordinate[7].toPrecision(3),(fe||Z.indexOf("divergence")!==-1)&&ce.push("divergence: "+le.divergenceLabel)),ue.textLabel&&ce.push(ue.textLabel),re=ce.join("<br>")):O.type==="isosurface"||O.type==="volume"?(le.valueLabel=t.hoverLabelText(D._mockAxis,D._mockAxis.d2l(ue.traceCoordinate[3]),O.valuehoverformat),ce.push("value: "+le.valueLabel),ue.textLabel&&ce.push(ue.textLabel),re=ce.join("<br>")):re=ue.textLabel;var xe={x:ue.traceCoordinate[0],y:ue.traceCoordinate[1],z:ue.traceCoordinate[2],data:K._input,fullData:K,curveNumber:K.index,pointNumber:ee};o.appendArrayPointValue(xe,K,ee),O._module.eventData&&(xe=K._module.eventData(xe,ue,K,{},ee));var Te={points:[xe]};if(D.fullSceneLayout.hovermode){var we=[];o.loneHover({trace:K,x:(.5+.5*ie[0]/ie[3])*X,y:(.5-.5*ie[1]/ie[3])*$,xLabel:le.xLabel,yLabel:le.yLabel,zLabel:le.zLabel,text:re,name:q.name,color:o.castHoverOption(K,ee,"bgcolor")||q.color,borderColor:o.castHoverOption(K,ee,"bordercolor"),fontFamily:o.castHoverOption(K,ee,"font.family"),fontSize:o.castHoverOption(K,ee,"font.size"),fontColor:o.castHoverOption(K,ee,"font.color"),nameLength:o.castHoverOption(K,ee,"namelength"),textAlign:o.castHoverOption(K,ee,"align"),hovertemplate:g.castOption(K,ee,"hovertemplate"),hovertemplateLabels:g.extendFlat({},xe,le),eventData:[xe]},{container:N,gd:V,inOut_bbox:we}),xe.bbox=we[0]}ue.distance<5&&(ue.buttons||p)?V.emit("plotly_click",Te):V.emit("plotly_hover",Te),this.oldEventData=Te}else o.loneUnhover(N),this.oldEventData&&V.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;D.drawAnnotations(D)},A.recoverContext=function(){var D=this;D.glplot.dispose();var V=function(){if(D.glplot.gl.isContextLost()){requestAnimationFrame(V);return}if(!D.initializeGLPlot()){g.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}D.plot.apply(D,D.plotArgs)};requestAnimationFrame(V)};var y=["xaxis","yaxis","zaxis"];function C(D,V,O){for(var N=D.fullSceneLayout,B=0;B<3;B++){var z=y[B],H=z.charAt(0),X=N[z],$=V[H],ne=V[H+"calendar"],q=V["_"+H+"length"];if(!g.isArrayOrTypedArray($))O[0][B]=Math.min(O[0][B],0),O[1][B]=Math.max(O[1][B],q-1);else for(var ue,te=0;te<(q||$.length);te++)if(g.isArrayOrTypedArray($[te]))for(var J=0;J<$[te].length;++J)ue=X.d2l($[te][J],0,ne),!isNaN(ue)&&isFinite(ue)&&(O[0][B]=Math.min(O[0][B],ue),O[1][B]=Math.max(O[1][B],ue));else ue=X.d2l($[te],0,ne),!isNaN(ue)&&isFinite(ue)&&(O[0][B]=Math.min(O[0][B],ue),O[1][B]=Math.max(O[1][B],ue))}}function M(D,V){for(var O=D.fullSceneLayout,N=O.annotations||[],B=0;B<3;B++)for(var z=y[B],H=z.charAt(0),X=O[z],$=0;$<N.length;$++){var ne=N[$];if(ne.visible){var q=X.r2l(ne[H]);!isNaN(q)&&isFinite(q)&&(V[0][B]=Math.min(V[0][B],q),V[1][B]=Math.max(V[1][B],q))}}}A.plot=function(D,V,O){var N=this;if(N.plotArgs=[D,V,O],!N.glplot.contextLost){var B,z,H,X,$,ne,q=V[N.id],ue=O[N.id];N.fullLayout=V,N.fullSceneLayout=q,N.axesOptions.merge(V,q),N.spikeOptions.merge(q),N.setViewport(q),N.updateFx(q.dragmode,q.hovermode),N.camera.enableWheel=N.graphDiv._context._scrollZoom.gl3d,N.glplot.setClearColor(i(q.bgcolor)),N.setConvert($),D?Array.isArray(D)||(D=[D]):D=[];var te=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(H=0;H<D.length;++H)B=D[H],!(B.visible!==!0||B._length===0)&&C(this,B,te);M(this,te);var J=[1,1,1];for(X=0;X<3;++X)te[1][X]===te[0][X]?J[X]=1:J[X]=1/(te[1][X]-te[0][X]);for(N.dataScale=J,N.convertAnnotations(this),H=0;H<D.length;++H)B=D[H],!(B.visible!==!0||B._length===0)&&(z=N.traces[B.uid],z?z.data.type===B.type?z.update(B):(z.dispose(),z=B._module.plot(this,B),N.traces[B.uid]=z):(z=B._module.plot(this,B),N.traces[B.uid]=z),z.name=B.name);var ie=Object.keys(N.traces);e:for(H=0;H<ie.length;++H){for(X=0;X<D.length;++X)if(D[X].uid===ie[H]&&D[X].visible===!0&&D[X]._length!==0)continue e;z=N.traces[ie[H]],z.dispose(),delete N.traces[ie[H]]}N.glplot.objects.sort(function(ot,$e){return ot._trace.data.index-$e._trace.data.index});var K=[[0,0,0],[0,0,0]],ee={};for(H=0;H<3;++H){$=q[y[H]],ne=$.type,ne in ee?(ee[ne].acc*=J[H],ee[ne].count+=1):ee[ne]={acc:J[H],count:1};var le;if($.autorange){K[0][H]=1/0,K[1][H]=-1/0;var j=N.glplot.objects,Z=N.fullSceneLayout.annotations||[],fe=$._name.charAt(0);for(X=0;X<j.length;X++){var re=j[X],ce=re.bounds,xe=re._trace.data._pad||0;re.constructor.name==="ErrorBars"&&$._lowerLogErrorBound?K[0][H]=Math.min(K[0][H],$._lowerLogErrorBound):K[0][H]=Math.min(K[0][H],ce[0][H]/J[H]-xe),K[1][H]=Math.max(K[1][H],ce[1][H]/J[H]+xe)}for(X=0;X<Z.length;X++){var Te=Z[X];if(Te.visible){var we=$.r2l(Te[fe]);K[0][H]=Math.min(K[0][H],we),K[1][H]=Math.max(K[1][H],we)}}if("rangemode"in $&&$.rangemode==="tozero"&&(K[0][H]=Math.min(K[0][H],0),K[1][H]=Math.max(K[1][H],0)),K[0][H]>K[1][H])K[0][H]=-1,K[1][H]=1;else{var _e=K[1][H]-K[0][H];K[0][H]-=_e/32,K[1][H]+=_e/32}if(le=[K[0][H],K[1][H]],le=w(le,$),K[0][H]=le[0],K[1][H]=le[1],$.isReversed()){var ke=K[0][H];K[0][H]=K[1][H],K[1][H]=ke}}else le=$.range,K[0][H]=$.r2l(le[0]),K[1][H]=$.r2l(le[1]);K[0][H]===K[1][H]&&(K[0][H]-=1,K[1][H]+=1),$.range=[K[0][H],K[1][H]],$.limitRange(),N.glplot.setBounds(H,{min:$.range[0]*J[H],max:$.range[1]*J[H]})}var Ne,Ee=q.aspectmode;if(Ee==="cube")Ne=[1,1,1];else if(Ee==="manual"){var ze=q.aspectratio;Ne=[ze.x,ze.y,ze.z]}else if(Ee==="auto"||Ee==="data"){var Ce=[1,1,1];for(H=0;H<3;++H){$=q[y[H]],ne=$.type;var Oe=ee[ne];Ce[H]=Math.pow(Oe.acc,1/Oe.count)/J[H]}Ee==="data"||Math.max.apply(null,Ce)/Math.min.apply(null,Ce)<=4?Ne=Ce:Ne=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");q.aspectratio.x=ue.aspectratio.x=Ne[0],q.aspectratio.y=ue.aspectratio.y=Ne[1],q.aspectratio.z=ue.aspectratio.z=Ne[2],N.glplot.setAspectratio(q.aspectratio),N.viewInitial.aspectratio||(N.viewInitial.aspectratio={x:q.aspectratio.x,y:q.aspectratio.y,z:q.aspectratio.z}),N.viewInitial.aspectmode||(N.viewInitial.aspectmode=q.aspectmode);var Le=q.domain||null,Ge=V._size||null;if(Le&&Ge){var rt=N.container.style;rt.position="absolute",rt.left=Ge.l+Le.x[0]*Ge.w+"px",rt.top=Ge.t+(1-Le.y[1])*Ge.h+"px",rt.width=Ge.w*(Le.x[1]-Le.x[0])+"px",rt.height=Ge.h*(Le.y[1]-Le.y[0])+"px"}N.glplot.redraw()}},A.destroy=function(){var D=this;D.glplot&&(D.camera.mouseListener.enabled=!1,D.container.removeEventListener("wheel",D.camera.wheelListener),D.camera=null,D.glplot.dispose(),D.container.parentNode.removeChild(D.container),D.glplot=null)};function s(D){return[[D.eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]}function _(D){return{up:{x:D.up[0],y:D.up[1],z:D.up[2]},center:{x:D.center[0],y:D.center[1],z:D.center[2]},eye:{x:D.eye[0],y:D.eye[1],z:D.eye[2]},projection:{type:D._ortho===!0?"orthographic":"perspective"}}}A.getCamera=function(){var D=this;return D.camera.view.recalcMatrix(D.camera.view.lastT()),_(D.camera)},A.setViewport=function(D){var V=this,O=D.camera;V.camera.lookAt.apply(this,s(O)),V.glplot.setAspectratio(D.aspectratio);var N=O.projection.type==="orthographic",B=V.camera._ortho;N!==B&&(V.glplot.redraw(),V.glplot.clearRGBA(),V.glplot.dispose(),V.initializeGLPlot())},A.isCameraChanged=function(D){var V=this,O=V.getCamera(),N=g.nestedProperty(D,V.id+".camera"),B=N.get();function z(ne,q,ue,te){var J=["up","center","eye"],ie=["x","y","z"];return q[J[ue]]&&ne[J[ue]][ie[te]]===q[J[ue]][ie[te]]}var H=!1;if(B===void 0)H=!0;else{for(var X=0;X<3;X++)for(var $=0;$<3;$++)if(!z(O,B,X,$)){H=!0;break}(!B.projection||O.projection&&O.projection.type!==B.projection.type)&&(H=!0)}return H},A.isAspectChanged=function(D){var V=this,O=V.glplot.getAspectratio(),N=g.nestedProperty(D,V.id+".aspectratio"),B=N.get();return B===void 0||B.x!==O.x||B.y!==O.y||B.z!==O.z},A.saveLayout=function(D){var V=this,O=V.fullLayout,N,B,z,H,X,$,ne=V.isCameraChanged(D),q=V.isAspectChanged(D),ue=ne||q;if(ue){var te={};if(ne&&(N=V.getCamera(),B=g.nestedProperty(D,V.id+".camera"),z=B.get(),te[V.id+".camera"]=z),q&&(H=V.glplot.getAspectratio(),X=g.nestedProperty(D,V.id+".aspectratio"),$=X.get(),te[V.id+".aspectratio"]=$),v.call("_storeDirectGUIEdit",D,O._preGUI,te),ne){B.set(N);var J=g.nestedProperty(O,V.id+".camera");J.set(N)}if(q){X.set(H);var ie=g.nestedProperty(O,V.id+".aspectratio");ie.set(H),V.glplot.redraw()}}return ue},A.updateFx=function(D,V){var O=this,N=O.camera;if(N)if(D==="orbit")N.mode="orbit",N.keyBindingMode="rotate";else if(D==="turntable"){N.up=[0,0,1],N.mode="turntable",N.keyBindingMode="rotate";var B=O.graphDiv,z=B._fullLayout,H=O.fullSceneLayout.camera,X=H.up.x,$=H.up.y,ne=H.up.z;if(ne/Math.sqrt(X*X+$*$+ne*ne)<.999){var q=O.id+".camera.up",ue={x:0,y:0,z:1},te={};te[q]=ue;var J=B.layout;v.call("_storeDirectGUIEdit",J,z._preGUI,te),H.up=ue,g.nestedProperty(J,q).set(ue)}}else N.keyBindingMode=D;O.fullSceneLayout.hovermode=V};function b(D,V,O){for(var N=0,B=O-1;N<B;++N,--B)for(var z=0;z<V;++z)for(var H=0;H<4;++H){var X=4*(V*N+z)+H,$=4*(V*B+z)+H,ne=D[X];D[X]=D[$],D[$]=ne}}function k(D,V,O){for(var N=0;N<O;++N)for(var B=0;B<V;++B){var z=4*(V*N+B),H=D[z+3];if(H>0)for(var X=255/H,$=0;$<3;++$)D[z+$]=Math.min(X*D[z+$],255)}}A.toImage=function(D){var V=this;D||(D="png"),V.staticMode&&V.container.appendChild(c),V.glplot.redraw();var O=V.glplot.gl,N=O.drawingBufferWidth,B=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var z=new Uint8Array(N*B*4);O.readPixels(0,0,N,B,O.RGBA,O.UNSIGNED_BYTE,z),b(z,N,B),k(z,N,B);var H=document.createElement("canvas");H.width=N,H.height=B;var X=H.getContext("2d",{willReadFrequently:!0}),$=X.createImageData(N,B);$.data.set(z),X.putImageData($,0,0);var ne;switch(D){case"jpeg":ne=H.toDataURL("image/jpeg");break;case"webp":ne=H.toDataURL("image/webp");break;default:ne=H.toDataURL("image/png")}return V.staticMode&&V.container.removeChild(c),ne},A.setConvert=function(){for(var D=this,V=0;V<3;V++){var O=D.fullSceneLayout[y[V]];t.setConvert(O,D.fullLayout),O.setScale=g.noop}},A.make4thDimension=function(){var D=this,V=D.graphDiv,O=V._fullLayout;D._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(D._mockAxis,O)},U.exports=x},52094:function(U){U.exports=function(e,d,S,n){n=n||e.length;for(var E=new Array(n),T=0;T<n;T++)E[T]=[e[T],d[T],S[T]];return E}},64859:function(U,F,e){var d=e(25376),S=e(85656),n=e(22548),E=e(92872),T=e(34200),v=e(66741),g=e(92880).extendFlat,r=d({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif',r.size.dflt=12,r.color.dflt=n.defaultLine,U.exports={font:r,title:{text:{valType:"string",editType:"layoutstyle"},font:d({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:g(v({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:n.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:E.newshape,activeshape:E.activeshape,newselection:T.newselection,activeselection:T.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:g({},S.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:d({editType:"layoutstyle"})}}},47552:function(U,F,e){var d=e(95376),S="1.13.4",n=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',E=[' <a target="_blank" href="https://carto.com/">Carto</a>',n].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),v=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),g={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:n,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:E,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:E,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:v,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},r=d(g);U.exports={requiredVersion:S,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:g,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+S+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(U,F,e){var d=e(3400);U.exports=function(n,E){var T=n.split(" "),v=T[0],g=T[1],r=d.isArrayOrTypedArray(E)?d.mean(E):E,t=.5+r/100,o=1.5+r/100,i=["",""],f=[0,0];switch(v){case"top":i[0]="top",f[1]=-o;break;case"bottom":i[0]="bottom",f[1]=o;break}switch(g){case"left":i[1]="right",f[0]=-t;break;case"right":i[1]="left",f[0]=t;break}var u;return i[0]&&i[1]?u=i.join("-"):i[0]?u=i[0]:i[1]?u=i[1]:u="center",{anchor:u,offset:f}}},33688:function(U,F,e){var d=e(3480),S=e(3400),n=S.strTranslate,E=S.strScale,T=e(84888).KY,v=e(9616),g=e(33428),r=e(43616),t=e(72736),o=e(14440),i="mapbox",f=F.constants=e(47552);F.name=i,F.attr="subplot",F.idRoot=i,F.idRegex=F.attrRegex=S.counterRegex(i),F.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},F.layoutAttributes=e(5232),F.supplyLayoutDefaults=e(5976),F.plot=function(h){var w=h._fullLayout,c=h.calcdata,a=w._subplots[i];if(d.version!==f.requiredVersion)throw new Error(f.wrongVersionErrorMsg);var p=u(h,a);d.accessToken=p;for(var x=0;x<a.length;x++){var A=a[x],P=T(c,i,A),y=w[A],C=y._subplot;C||(C=new o(h,A),w[A]._subplot=C),C.viewInitial||(C.viewInitial={center:S.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),C.plot(P,w,h._promises)}},F.clean=function(m,h,w,c){for(var a=c._subplots[i]||[],p=0;p<a.length;p++){var x=a[p];!h[x]&&c[x]._subplot&&c[x]._subplot.destroy()}},F.toSVG=function(m){for(var h=m._fullLayout,w=h._subplots[i],c=h._size,a=0;a<w.length;a++){var p=h[w[a]],x=p.domain,A=p._subplot,P=A.toImage("png"),y=h._glimages.append("svg:image");y.attr({xmlns:v.svg,"xlink:href":P,x:c.l+c.w*x.x[0],y:c.t+c.h*(1-x.y[1]),width:c.w*(x.x[1]-x.x[0]),height:c.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var C=g.select(p._subplot.div),M=C.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!M){var s=h._glimages.append("g");s.attr("transform",n(c.l+c.w*x.x[0]+10,c.t+c.h*(1-x.y[0])-31)),s.append("path").attr("d",f.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),s.append("path").attr("d",f.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),s.append("path").attr("d",f.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),s.append("polygon").attr("points",f.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var _=C.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),b=h._glimages.append("g"),k=b.append("text");k.text(_).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":_});var D=r.bBox(k.node()),V=c.w*(x.x[1]-x.x[0]);if(D.width>V/2){var O=_.split("|").join("<br>");k.text(O).attr("data-unformatted",O).call(t.convertToTspans,m),D=r.bBox(k.node())}k.attr("transform",n(-3,-D.height+8)),b.insert("rect",".static-attribution").attr({x:-D.width-6,y:-D.height-3,width:D.width+6,height:D.height+3,fill:"rgba(255, 255, 255, 0.75)"});var N=1;D.width+6>V&&(N=V/(D.width+6));var B=[c.l+c.w*x.x[1],c.t+c.h*(1-x.y[0])];b.attr("transform",n(B[0],B[1])+E(N))}};function u(m,h){var w=m._fullLayout,c=m._context;if(c.mapboxAccessToken==="")return"";for(var a=[],p=[],x=!1,A=!1,P=0;P<h.length;P++){var y=w[h[P]],C=y.accesstoken;l(y.style)&&(C?S.pushUnique(a,C):(l(y._input.style)&&(S.error("Uses Mapbox map style, but did not set an access token."),x=!0),A=!0)),C&&S.pushUnique(p,C)}if(A){var M=x?f.noAccessTokenErrorMsg:f.missingStyleErrorMsg;throw S.error(M),new Error(M)}return a.length?(a.length>1&&S.warn(f.multipleTokensErrorMsg),a[0]):(p.length&&S.log(["Listed mapbox access token(s)",p.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function l(m){return typeof m=="string"&&(f.styleValuesMapbox.indexOf(m)!==-1||m.indexOf("mapbox://")===0||m.indexOf("stamen")===0)}F.updateFx=function(m){for(var h=m._fullLayout,w=h._subplots[i],c=0;c<w.length;c++){var a=h[w[c]]._subplot;a.updateFx(h)}}},22360:function(U,F,e){var d=e(3400),S=e(72736).sanitizeHTML,n=e(89032),E=e(47552);function T(o,i){this.subplot=o,this.uid=o.uid+"-"+i,this.index=i,this.idSource="source-"+this.uid,this.idLayer=E.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var v=T.prototype;v.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=g(i)},v.needsNewImage=function(o){var i=this.subplot.map;return i.getSource(this.idSource)&&this.sourceType==="image"&&o.sourcetype==="image"&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},v.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},v.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},v.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},v.updateImage=function(o){var i=this.subplot.map;i.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var f=this.findFollowingMapboxLayerId(this.lookupBelow());f!==null&&this.subplot.map.moveLayer(this.idLayer,f)},v.updateSource=function(o){var i=this.subplot.map;if(i.getSource(this.idSource)&&i.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,!!g(o)){var f=t(o);i.addSource(this.idSource,f)}},v.findFollowingMapboxLayerId=function(o){if(o==="traces")for(var i=this.subplot.getMapLayers(),f=0;f<i.length;f++){var u=i[f].id;if(typeof u=="string"&&u.indexOf(E.traceLayerPrefix)===0){o=u;break}}return o},v.updateLayer=function(o){var i=this.subplot,f=r(o),u=this.lookupBelow(),l=this.findFollowingMapboxLayerId(u);this.removeLayer(),g(o)&&i.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:f.layout,paint:f.paint},l),this.layerType=o.type,this.below=u},v.updateStyle=function(o){if(g(o)){var i=r(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",i.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",i.paint)}},v.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},v.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)};function g(o){if(!o.visible)return!1;var i=o.source;if(Array.isArray(i)&&i.length>0){for(var f=0;f<i.length;f++)if(typeof i[f]!="string"||i[f].length===0)return!1;return!0}return d.isPlainObject(i)||typeof i=="string"&&i.length>0}function r(o){var i={},f={};switch(o.type){case"circle":d.extendFlat(f,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":d.extendFlat(f,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":d.extendFlat(f,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var u=o.symbol,l=n(u.textposition,u.iconsize);d.extendFlat(i,{"icon-image":u.icon+"-15","icon-size":u.iconsize/10,"text-field":u.text,"text-size":u.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":u.placement}),d.extendFlat(f,{"icon-color":o.color,"text-color":u.textfont.color,"text-opacity":o.opacity});break;case"raster":d.extendFlat(f,{"raster-fade-duration":0,"raster-opacity":o.opacity});break}return{layout:i,paint:f}}function t(o){var i=o.sourcetype,f=o.source,u={type:i},l;return i==="geojson"?l="data":i==="vector"?l=typeof f=="string"?"url":"tiles":i==="raster"?(l="tiles",u.tileSize=256):i==="image"&&(l="url",u.coordinates=o.coordinates),u[l]=f,o.sourceattribution&&(u.attribution=S(o.sourceattribution)),u}U.exports=function(i,f,u){var l=new T(i,f);return l.update(u),l}},5232:function(U,F,e){var d=e(3400),S=e(76308).defaultLine,n=e(86968).u,E=e(25376),T=e(52904).textposition,v=e(67824).overrideAll,g=e(31780).templatedArray,r=e(47552),t=E({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var o=U.exports=v({_arrayAttrRegexps:[d.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:g("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:S},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:S}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:d.extendFlat({},T,{arrayOk:!1})}})},"plot","from-root");o.uirevision={valType:"any",editType:"none"}},5976:function(U,F,e){var d=e(3400),S=e(168),n=e(51272),E=e(5232);U.exports=function(r,t,o){S(r,t,o,{type:"mapbox",attributes:E,handleDefaults:T,partition:"y",accessToken:t._mapboxAccessToken})};function T(g,r,t,o){t("accesstoken",o.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch");var i=t("bounds.west"),f=t("bounds.east"),u=t("bounds.south"),l=t("bounds.north");(i===void 0||f===void 0||u===void 0||l===void 0)&&delete r.bounds,n(g,r,{name:"layers",handleItemDefaults:v}),r._input=g}function v(g,r){function t(m,h){return d.coerce(g,r,E.layers,m,h)}var o=t("visible");if(o){var i=t("sourcetype"),f=i==="raster"||i==="image";t("source"),t("sourceattribution"),i==="vector"&&t("sourcelayer"),i==="image"&&t("coordinates");var u;f&&(u="raster");var l=t("type",u);f&&l!=="raster"&&(l=r.type="raster",d.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),l==="circle"&&t("circle.radius"),l==="line"&&(t("line.width"),t("line.dash")),l==="fill"&&t("fill.outlinecolor"),l==="symbol"&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),d.coerceFont(t,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),t("symbol.textposition"),t("symbol.placement"))}}},14440:function(U,F,e){var d=e(3480),S=e(3400),n=e(27144),E=e(24040),T=e(54460),v=e(86476),g=e(93024),r=e(72760),t=r.drawMode,o=r.selectMode,i=e(22676).prepSelect,f=e(22676).clearOutline,u=e(22676).clearSelectionsCache,l=e(22676).selectOnClick,m=e(47552),h=e(22360);function w(P,y){this.id=y,this.gd=P;var C=P._fullLayout,M=P._context;this.container=C._glcontainer.node(),this.isStatic=M.staticPlot,this.uid=C._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(C),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var c=w.prototype;c.plot=function(P,y,C){var M=this,s=y[M.id];M.map&&s.accesstoken!==M.accessToken&&(M.map.remove(),M.map=null,M.styleObj=null,M.traceHash={},M.layerList=[]);var _;M.map?_=new Promise(function(b,k){M.updateMap(P,y,b,k)}):_=new Promise(function(b,k){M.createMap(P,y,b,k)}),C.push(_)},c.createMap=function(P,y,C,M){var s=this,_=y[s.id],b=s.styleObj=p(_.style,y);s.accessToken=_.accesstoken;var k=_.bounds,D=k?[[k.west,k.south],[k.east,k.north]]:null,V=s.map=new d.Map({container:s.div,style:b.style,center:A(_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,maxBounds:D,interactive:!s.isStatic,preserveDrawingBuffer:s.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new d.AttributionControl({compact:!0}));V._canvas.style.left="0px",V._canvas.style.top="0px",s.rejectOnError(M),s.isStatic||s.initFx(P,y);var O=[];O.push(new Promise(function(N){V.once("load",N)})),O=O.concat(n.fetchTraceGeoData(P)),Promise.all(O).then(function(){s.fillBelowLookup(P,y),s.updateData(P),s.updateLayout(y),s.resolveOnRender(C)}).catch(M)},c.updateMap=function(P,y,C,M){var s=this,_=s.map,b=y[this.id];s.rejectOnError(M);var k=[],D=p(b.style,y);JSON.stringify(s.styleObj)!==JSON.stringify(D)&&(s.styleObj=D,_.setStyle(D.style),s.traceHash={},k.push(new Promise(function(V){_.once("styledata",V)}))),k=k.concat(n.fetchTraceGeoData(P)),Promise.all(k).then(function(){s.fillBelowLookup(P,y),s.updateData(P),s.updateLayout(y),s.resolveOnRender(C)}).catch(M)},c.fillBelowLookup=function(P,y){var C=y[this.id],M=C.layers,s,_,b=this.belowLookup={},k=!1;for(s=0;s<P.length;s++){var D=P[s][0].trace,V=D._module;typeof D.below=="string"?_=D.below:V.getBelow&&(_=V.getBelow(D,this)),_===""&&(k=!0),b["trace-"+D.uid]=_||""}for(s=0;s<M.length;s++){var O=M[s];typeof O.below=="string"?_=O.below:k?_="traces":_="",b["layout-"+s]=_}var N={},B,z;for(B in b)_=b[B],N[_]?N[_].push(B):N[_]=[B];for(_ in N){var H=N[_];if(H.length>1)for(s=0;s<H.length;s++)B=H[s],B.indexOf("trace-")===0?(z=B.split("trace-")[1],this.traceHash[z]&&(this.traceHash[z].below=null)):B.indexOf("layout-")===0&&(z=B.split("layout-")[1],this.layerList[z]&&(this.layerList[z].below=null))}};var a={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};c.updateData=function(P){var y=this.traceHash,C,M,s,_,b=P.slice().sort(function(N,B){return a[N[0].trace.type]-a[B[0].trace.type]});for(s=0;s<b.length;s++){var k=b[s];M=k[0].trace,C=y[M.uid];var D=!1;C&&(C.type===M.type?(C.update(k),D=!0):C.dispose()),!D&&M._module&&(y[M.uid]=M._module.plot(this,k))}var V=Object.keys(y);e:for(s=0;s<V.length;s++){var O=V[s];for(_=0;_<P.length;_++)if(M=P[_][0].trace,O===M.uid)continue e;C=y[O],C.dispose(),delete y[O]}},c.updateLayout=function(P){var y=this.map,C=P[this.id];!this.dragging&&!this.wheeling&&(y.setCenter(A(C.center)),y.setZoom(C.zoom),y.setBearing(C.bearing),y.setPitch(C.pitch)),this.updateLayers(P),this.updateFramework(P),this.updateFx(P),this.map.resize(),this.gd._context._scrollZoom.mapbox?y.scrollZoom.enable():y.scrollZoom.disable()},c.resolveOnRender=function(P){var y=this.map;y.on("render",function C(){y.loaded()&&(y.off("render",C),setTimeout(P,10))})},c.rejectOnError=function(P){var y=this.map;function C(){P(new Error(m.mapOnErrorMsg))}y.once("error",C),y.once("style.error",C),y.once("source.error",C),y.once("tile.error",C),y.once("layer.error",C)},c.createFramework=function(P){var y=this,C=y.div=document.createElement("div");C.id=y.uid,C.style.position="absolute",y.container.appendChild(C),y.xaxis={_id:"x",c2p:function(M){return y.project(M).x}},y.yaxis={_id:"y",c2p:function(M){return y.project(M).y}},y.updateFramework(P),y.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},T.setConvert(y.mockAxis,P)},c.initFx=function(P,y){var C=this,M=C.gd,s=C.map;s.on("moveend",function(k){if(C.map){var D=M._fullLayout;if(k.originalEvent||C.wheeling){var V=D[C.id];E.call("_storeDirectGUIEdit",M.layout,D._preGUI,C.getViewEdits(V));var O=C.getView();V._input.center=V.center=O.center,V._input.zoom=V.zoom=O.zoom,V._input.bearing=V.bearing=O.bearing,V._input.pitch=V.pitch=O.pitch,M.emit("plotly_relayout",C.getViewEditsWithDerived(O))}k.originalEvent&&k.originalEvent.type==="mouseup"?C.dragging=!1:C.wheeling&&(C.wheeling=!1),D._rehover&&D._rehover()}}),s.on("wheel",function(){C.wheeling=!0}),s.on("mousemove",function(k){var D=C.div.getBoundingClientRect(),V=[k.originalEvent.offsetX,k.originalEvent.offsetY];k.target.getBoundingClientRect=function(){return D},C.xaxis.p2c=function(){return s.unproject(V).lng},C.yaxis.p2c=function(){return s.unproject(V).lat},M._fullLayout._rehover=function(){M._fullLayout._hoversubplot===C.id&&M._fullLayout[C.id]&&g.hover(M,k,C.id)},g.hover(M,k,C.id),M._fullLayout._hoversubplot=C.id});function _(){g.loneUnhover(y._hoverlayer)}s.on("dragstart",function(){C.dragging=!0,_()}),s.on("zoomstart",_),s.on("mouseout",function(){M._fullLayout._hoversubplot=null});function b(){var k=C.getView();M.emit("plotly_relayouting",C.getViewEditsWithDerived(k))}s.on("drag",b),s.on("zoom",b),s.on("dblclick",function(){var k=M._fullLayout[C.id];E.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,C.getViewEdits(k));var D=C.viewInitial;s.setCenter(A(D.center)),s.setZoom(D.zoom),s.setBearing(D.bearing),s.setPitch(D.pitch);var V=C.getView();k._input.center=k.center=V.center,k._input.zoom=k.zoom=V.zoom,k._input.bearing=k.bearing=V.bearing,k._input.pitch=k.pitch=V.pitch,M.emit("plotly_doubleclick",null),M.emit("plotly_relayout",C.getViewEditsWithDerived(V))}),C.clearOutline=function(){u(C.dragOptions),f(C.dragOptions.gd)},C.onClickInPanFn=function(k){return function(D){var V=M._fullLayout.clickmode;V.indexOf("select")>-1&&l(D.originalEvent,M,[C.xaxis],[C.yaxis],C.id,k),V.indexOf("event")>-1&&g.click(M,D.originalEvent)}}},c.updateFx=function(P){var y=this,C=y.map,M=y.gd;if(y.isStatic)return;function s(D){var V=y.map.unproject(D);return[V.lng,V.lat]}var _=P.dragmode,b;b=function(D,V){if(V.isRect){var O=D.range={};O[y.id]=[s([V.xmin,V.ymin]),s([V.xmax,V.ymax])]}else{var N=D.lassoPoints={};N[y.id]=V.map(s)}};var k=y.dragOptions;y.dragOptions=S.extendDeep(k||{},{dragmode:P.dragmode,element:y.div,gd:M,plotinfo:{id:y.id,domain:P[y.id].domain,xaxis:y.xaxis,yaxis:y.yaxis,fillRangeItems:b},xaxes:[y.xaxis],yaxes:[y.yaxis],subplot:y.id}),C.off("click",y.onClickInPanHandler),o(_)||t(_)?(C.dragPan.disable(),C.on("zoomstart",y.clearOutline),y.dragOptions.prepFn=function(D,V,O){i(D,V,O,y.dragOptions,_)},v.init(y.dragOptions)):(C.dragPan.enable(),C.off("zoomstart",y.clearOutline),y.div.onmousedown=null,y.div.ontouchstart=null,y.div.removeEventListener("touchstart",y.div._ontouchstart),y.onClickInPanHandler=y.onClickInPanFn(y.dragOptions),C.on("click",y.onClickInPanHandler))},c.updateFramework=function(P){var y=P[this.id].domain,C=P._size,M=this.div.style;M.width=C.w*(y.x[1]-y.x[0])+"px",M.height=C.h*(y.y[1]-y.y[0])+"px",M.left=C.l+y.x[0]*C.w+"px",M.top=C.t+(1-y.y[1])*C.h+"px",this.xaxis._offset=C.l+y.x[0]*C.w,this.xaxis._length=C.w*(y.x[1]-y.x[0]),this.yaxis._offset=C.t+(1-y.y[1])*C.h,this.yaxis._length=C.h*(y.y[1]-y.y[0])},c.updateLayers=function(P){var y=P[this.id],C=y.layers,M=this.layerList,s;if(C.length!==M.length){for(s=0;s<M.length;s++)M[s].dispose();for(M=this.layerList=[],s=0;s<C.length;s++)M.push(h(this,s,C[s]))}else for(s=0;s<C.length;s++)M[s].update(C[s])},c.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},c.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},c.setOptions=function(P,y,C){for(var M in C)this.map[y](P,M,C[M])},c.getMapLayers=function(){return this.map.getStyle().layers},c.addLayer=function(P,y){var C=this.map;if(typeof y=="string"){if(y===""){C.addLayer(P,y);return}for(var M=this.getMapLayers(),s=0;s<M.length;s++)if(y===M[s].id){C.addLayer(P,y);return}S.warn(["Trying to add layer with *below* value",y,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}C.addLayer(P)},c.project=function(P){return this.map.project(new d.LngLat(P[0],P[1]))},c.getView=function(){var P=this.map,y=P.getCenter(),C=y.lng,M=y.lat,s={lon:C,lat:M},_=P.getCanvas(),b=parseInt(_.style.width),k=parseInt(_.style.height);return{center:s,zoom:P.getZoom(),bearing:P.getBearing(),pitch:P.getPitch(),_derived:{coordinates:[P.unproject([0,0]).toArray(),P.unproject([b,0]).toArray(),P.unproject([b,k]).toArray(),P.unproject([0,k]).toArray()]}}},c.getViewEdits=function(P){for(var y=this.id,C=["center","zoom","bearing","pitch"],M={},s=0;s<C.length;s++){var _=C[s];M[y+"."+_]=P[_]}return M},c.getViewEditsWithDerived=function(P){var y=this.id,C=this.getViewEdits(P);return C[y+"._derived"]=P._derived,C};function p(P,y){var C={};if(S.isPlainObject(P))C.id=P.id,C.style=P;else if(typeof P=="string")if(C.id=P,m.styleValuesMapbox.indexOf(P)!==-1)C.style=x(P);else if(m.stylesNonMapbox[P]){C.style=m.stylesNonMapbox[P];var M=C.style.sources["plotly-"+P],s=M?M.tiles:void 0;s&&s[0]&&s[0].slice(-9)==="?api_key="&&(s[0]+=y._mapboxAccessToken)}else C.style=P;else C.id=m.styleValueDflt,C.style=x(m.styleValueDflt);return C.transition={duration:0,delay:0},C}function x(P){return m.styleUrlPrefix+P+"-"+m.styleUrlSuffix}function A(P){return[P.lon,P.lat]}U.exports=w},66741:function(U){U.exports=function(F){var e=F.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(U,F,e){var d=e(33428),S=e(94336).m_,n=e(57624).SO,E=e(38248),T=e(83160),v=e(24040),g=e(73060),r=e(31780),t=e(3400),o=e(76308),i=e(39032).BADNUM,f=e(79811),u=e(1936).clearOutline,l=e(55308),m=e(85656),h=e(16672),w=e(84888)._M,c=t.relinkPrivateKeys,a=t._,p=U.exports={};t.extendFlat(p,v),p.attributes=e(45464),p.attributes.type.values=p.allTypes,p.fontAttrs=e(25376),p.layoutAttributes=e(64859);var x=p.transformsRegistry,A=e(62460);p.executeAPICommand=A.executeAPICommand,p.computeAPICommandBindings=A.computeAPICommandBindings,p.manageCommandObserver=A.manageCommandObserver,p.hasSimpleAPICommandBindings=A.hasSimpleAPICommandBindings,p.redrawText=function(K){return K=t.getGraphDiv(K),new Promise(function(ee){setTimeout(function(){K._fullLayout&&(v.getComponentMethod("annotations","draw")(K),v.getComponentMethod("legend","draw")(K),v.getComponentMethod("colorbar","draw")(K),ee(p.previousPromises(K)))},300)})},p.resize=function(K){K=t.getGraphDiv(K);var ee,le=new Promise(function(j,Z){(!K||t.isHidden(K))&&Z(new Error("Resize must be passed a displayed plot div element.")),K._redrawTimer&&clearTimeout(K._redrawTimer),K._resolveResize&&(ee=K._resolveResize),K._resolveResize=j,K._redrawTimer=setTimeout(function(){if(!K.layout||K.layout.width&&K.layout.height||t.isHidden(K)){j(K);return}delete K.layout.width,delete K.layout.height;var fe=K.changed;K.autoplay=!0,v.call("relayout",K,{autosize:!0}).then(function(){K.changed=fe,K._resolveResize===j&&(delete K._resolveResize,j(K))})},100)});return ee&&ee(le),le},p.previousPromises=function(K){if((K._promises||[]).length)return Promise.all(K._promises).then(function(){K._promises=[]})},p.addLinks=function(K){if(!(!K._context.showLink&&!K._context.showSources)){var ee=K._fullLayout,le=t.ensureSingle(ee._paper,"text","js-plot-link-container",function(xe){xe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var Te=d.select(this);Te.append("tspan").classed("js-link-to-tool",!0),Te.append("tspan").classed("js-link-spacer",!0),Te.append("tspan").classed("js-sourcelinks",!0)})}),j=le.node(),Z={y:ee._paper.attr("height")-9};document.body.contains(j)&&j.getComputedTextLength()>=ee.width-20?(Z["text-anchor"]="start",Z.x=5):(Z["text-anchor"]="end",Z.x=ee._paper.attr("width")-7),le.attr(Z);var fe=le.select(".js-link-to-tool"),re=le.select(".js-link-spacer"),ce=le.select(".js-sourcelinks");K._context.showSources&&K._context.showSources(K),K._context.showLink&&P(K,fe),re.text(fe.text()&&ce.text()?" - ":"")}};function P(K,ee){ee.text("");var le=ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(K._context.linkText+" ");if(K._context.sendData)le.on("click",function(){p.sendDataToCloud(K)});else{var j=window.location.pathname.split("/"),Z=window.location.search;le.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+j[2].split(".")[0]+"/"+j[1]+Z})}}p.sendDataToCloud=function(K){var ee=(window.PLOTLYENV||{}).BASE_URL||K._context.plotlyServerURL;if(ee){K.emit("plotly_beforeexport");var le=d.select(K).append("div").attr("id","hiddenform").style("display","none"),j=le.append("form").attr({action:ee+"/external",method:"post",target:"_blank"}),Z=j.append("input").attr({type:"text",name:"data"});return Z.node().value=p.graphJson(K,!1,"keepdata"),j.node().submit(),le.remove(),K.emit("plotly_afterexport"),!1}};var y=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],C=["year","month","dayMonth","dayMonthYear"];p.supplyDefaults=function(K,ee){var le=ee&&ee.skipUpdateCalc,j=K._fullLayout||{};if(j._skipDefaults){delete j._skipDefaults;return}var Z=K._fullLayout={},fe=K.layout||{},re=K._fullData||[],ce=K._fullData=[],xe=K.data||[],Te=K.calcdata||[],we=K._context||{},_e;K._transitionData||p.createTransitionData(K),Z._dfltTitle={plot:a(K,"Click to enter Plot title"),x:a(K,"Click to enter X axis title"),y:a(K,"Click to enter Y axis title"),colorbar:a(K,"Click to enter Colorscale title"),annotation:a(K,"new text")},Z._traceWord=a(K,"trace");var ke=_(K,y);if(Z._mapboxAccessToken=we.mapboxAccessToken,j._initialAutoSizeIsDone){var Ne=j.width,Ee=j.height;p.supplyLayoutGlobalDefaults(fe,Z,ke),fe.width||(Z.width=Ne),fe.height||(Z.height=Ee),p.sanitizeMargins(Z)}else{p.supplyLayoutGlobalDefaults(fe,Z,ke);var ze=!fe.width||!fe.height,Ce=Z.autosize,Oe=we.autosizable,Le=ze&&(Ce||Oe);Le?p.plotAutoSize(K,fe,Z):ze&&p.sanitizeMargins(Z),!Ce&&ze&&(fe.width=Z.width,fe.height=Z.height)}Z._d3locale=b(ke,Z.separators),Z._extraFormat=_(K,C),Z._initialAutoSizeIsDone=!0,Z._dataLength=xe.length,Z._modules=[],Z._visibleModules=[],Z._basePlotModules=[];var Ge=Z._subplots=s(),rt=Z._splomAxes={x:{},y:{}},ot=Z._splomSubplots={};Z._splomGridDflt={},Z._scatterStackOpts={},Z._firstScatter={},Z._alignmentOpts={},Z._colorAxes={},Z._requestRangeslider={},Z._traceUids=M(re,xe),Z._globalTransforms=(K._context||{}).globalTransforms,p.supplyDataDefaults(xe,ce,fe,Z);var $e=Object.keys(rt.x),qe=Object.keys(rt.y);if($e.length>1&&qe.length>1){for(v.getComponentMethod("grid","sizeDefaults")(fe,Z),_e=0;_e<$e.length;_e++)t.pushUnique(Ge.xaxis,$e[_e]);for(_e=0;_e<qe.length;_e++)t.pushUnique(Ge.yaxis,qe[_e]);for(var ht in ot)t.pushUnique(Ge.cartesian,ht)}if(Z._has=p._hasPlotType.bind(Z),re.length===ce.length)for(_e=0;_e<ce.length;_e++)c(ce[_e],re[_e]);p.supplyLayoutModuleDefaults(fe,Z,ce,K._transitionData);var vt=Z._visibleModules,pt=[];for(_e=0;_e<vt.length;_e++){var wt=vt[_e].crossTraceDefaults;wt&&t.pushUnique(pt,wt)}for(_e=0;_e<pt.length;_e++)pt[_e](ce,Z);Z._hasOnlyLargeSploms=Z._basePlotModules.length===1&&Z._basePlotModules[0].name==="splom"&&$e.length>15&&qe.length>15&&Z.shapes.length===0&&Z.images.length===0,p.linkSubplots(ce,Z,re,j),p.cleanPlot(ce,Z,re,j);var Et=!!(j._has&&j._has("gl2d")),nt=!!(Z._has&&Z._has("gl2d")),Fe=!!(j._has&&j._has("cartesian")),We=!!(Z._has&&Z._has("cartesian")),Ze=Fe||Et,Ye=We||nt;Ze&&!Ye?j._bgLayer.remove():Ye&&!Ze&&(Z._shouldCreateBgLayer=!0),j._zoomlayer&&!K._dragging&&u({_fullLayout:j}),k(ce,Z),c(Z,j),v.getComponentMethod("colorscale","crossTraceDefaults")(ce,Z),Z._preGUI||(Z._preGUI={}),Z._tracePreGUI||(Z._tracePreGUI={});var Ie=Z._tracePreGUI,De={},je;for(je in Ie)De[je]="old";for(_e=0;_e<ce.length;_e++)je=ce[_e]._fullInput.uid,De[je]||(Ie[je]={}),De[je]="new";for(je in De)De[je]==="old"&&delete Ie[je];B(Z),v.getComponentMethod("rangeslider","makeData")(Z),!le&&Te.length===ce.length&&p.supplyDefaultsUpdateCalc(Te,ce)},p.supplyDefaultsUpdateCalc=function(K,ee){for(var le=0;le<ee.length;le++){var j=ee[le],Z=(K[le]||[])[0];if(Z&&Z.trace){var fe=Z.trace;if(fe._hasCalcTransform){var re=fe._arrayAttrs,ce,xe,Te;for(ce=0;ce<re.length;ce++)xe=re[ce],Te=t.nestedProperty(fe,xe).get().slice(),t.nestedProperty(j,xe).set(Te)}Z.trace=j}}};function M(K,ee){var le=ee.length,j=[],Z,fe;for(Z=0;Z<K.length;Z++){var re=K[Z]._fullInput;re!==fe&&j.push(re),fe=re}var ce=j.length,xe=new Array(le),Te={};function we(Ne,Ee){xe[Ee]=Ne,Te[Ne]=1}function _e(Ne,Ee){if(Ne&&typeof Ne=="string"&&!Te[Ne])return we(Ne,Ee),!0}for(Z=0;Z<le;Z++){var ke=ee[Z].uid;typeof ke=="number"&&(ke=String(ke)),!_e(ke,Z)&&(Z<ce&&_e(j[Z].uid,Z)||we(t.randstr(Te),Z))}return xe}function s(){var K=v.collectableSubplotTypes,ee={},le,j;if(!K){K=[];var Z=v.subplotsRegistry;for(var fe in Z){var re=Z[fe],ce=re.attr;if(ce&&(K.push(fe),Array.isArray(ce)))for(j=0;j<ce.length;j++)t.pushUnique(K,ce[j])}}for(le=0;le<K.length;le++)ee[K[le]]=[];return ee}function _(K,ee){var le=K._context.locale;le||(le="en-US");var j=!1,Z={};function fe(_e){for(var ke=!0,Ne=0;Ne<ee.length;Ne++){var Ee=ee[Ne];Z[Ee]||(_e[Ee]?Z[Ee]=_e[Ee]:ke=!1)}ke&&(j=!0)}for(var re=0;re<2;re++){for(var ce=K._context.locales,xe=0;xe<2;xe++){var Te=(ce[le]||{}).format;if(Te&&(fe(Te),j))break;ce=v.localeRegistry}var we=le.split("-")[0];if(j||we===le)break;le=we}return j||fe(v.localeRegistry.en.format),Z}function b(K,ee){return K.decimal=ee.charAt(0),K.thousands=ee.charAt(1),{numberFormat:function(le){try{le=n(K).format(t.adjustFormat(le))}catch{return t.warnBadFormat(le),t.noFormat}return le},timeFormat:S(K).utcFormat}}function k(K,ee){var le,j=[];ee.meta&&(le=ee._meta={meta:ee.meta,layout:{meta:ee.meta}});for(var Z=0;Z<K.length;Z++){var fe=K[Z];fe.meta?j[fe.index]=fe._meta={meta:fe.meta}:ee.meta&&(fe._meta={meta:ee.meta}),ee.meta&&(fe._meta.layout={meta:ee.meta})}j.length&&(le||(le=ee._meta={}),le.data=j)}p.createTransitionData=function(K){K._transitionData||(K._transitionData={}),K._transitionData._frames||(K._transitionData._frames=[]),K._transitionData._frameHash||(K._transitionData._frameHash={}),K._transitionData._counter||(K._transitionData._counter=0),K._transitionData._interruptCallbacks||(K._transitionData._interruptCallbacks=[])},p._hasPlotType=function(K){var ee,le=this._basePlotModules||[];for(ee=0;ee<le.length;ee++)if(le[ee].name===K)return!0;var j=this._modules||[];for(ee=0;ee<j.length;ee++){var Z=j[ee].name;if(Z===K)return!0;var fe=v.modules[Z];if(fe&&fe.categories[K])return!0}return!1},p.cleanPlot=function(K,ee,le,j){var Z,fe,re=j._basePlotModules||[];for(Z=0;Z<re.length;Z++){var ce=re[Z];ce.clean&&ce.clean(K,ee,le,j)}var xe=j._has&&j._has("gl"),Te=ee._has&&ee._has("gl");xe&&!Te&&j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.selectAll(".no-webgl").remove(),j._glcanvas=null);var we=!!j._infolayer;e:for(Z=0;Z<le.length;Z++){var _e=le[Z],ke=_e.uid;for(fe=0;fe<K.length;fe++){var Ne=K[fe];if(ke===Ne.uid)continue e}we&&j._infolayer.select(".cb"+ke).remove()}},p.linkSubplots=function(K,ee,le,j){var Z,fe,re=j._plots||{},ce=ee._plots={},xe=ee._subplots,Te={_fullData:K,_fullLayout:ee},we=xe.cartesian.concat(xe.gl2d||[]);for(Z=0;Z<we.length;Z++){var _e=we[Z],ke=re[_e],Ne=f.getFromId(Te,_e,"x"),Ee=f.getFromId(Te,_e,"y"),ze;for(ke?ze=ce[_e]=ke:(ze=ce[_e]={},ze.id=_e),Ne._counterAxes.push(Ee._id),Ee._counterAxes.push(Ne._id),Ne._subplotsWith.push(_e),Ee._subplotsWith.push(_e),ze.xaxis=Ne,ze.yaxis=Ee,ze._hasClipOnAxisFalse=!1,fe=0;fe<K.length;fe++){var Ce=K[fe];if(Ce.xaxis===ze.xaxis._id&&Ce.yaxis===ze.yaxis._id&&Ce.cliponaxis===!1){ze._hasClipOnAxisFalse=!0;break}}}var Oe=f.list(Te,null,!0),Le;for(Z=0;Z<Oe.length;Z++){Le=Oe[Z];var Ge=null;Le.overlaying&&(Ge=f.getFromId(Te,Le.overlaying),Ge&&Ge.overlaying&&(Le.overlaying=!1,Ge=null)),Le._mainAxis=Ge||Le,Ge&&(Le.domain=Ge.domain.slice()),Le._anchorAxis=Le.anchor==="free"?null:f.getFromId(Te,Le.anchor)}for(Z=0;Z<Oe.length;Z++)if(Le=Oe[Z],Le._counterAxes.sort(f.idSort),Le._subplotsWith.sort(t.subplotSort),Le._mainSubplot=D(Le,ee),Le._counterAxes.length&&(Le.spikemode&&Le.spikemode.indexOf("across")!==-1||Le.automargin&&Le.mirror&&Le.anchor!=="free"||v.getComponentMethod("rangeslider","isVisible")(Le))){var rt=1,ot=0;for(fe=0;fe<Le._counterAxes.length;fe++){var $e=f.getFromId(Te,Le._counterAxes[fe]);rt=Math.min(rt,$e.domain[0]),ot=Math.max(ot,$e.domain[1])}rt<ot&&(Le._counterDomainMin=rt,Le._counterDomainMax=ot)}};function D(K,ee){var le={_fullLayout:ee},j=K._id.charAt(0)==="x",Z=K._mainAxis._anchorAxis,fe="",re="",ce="";if(Z&&(ce=Z._mainAxis._id,fe=j?K._id+ce:ce+K._id),!fe||!ee._plots[fe]){fe="";for(var xe=K._counterAxes,Te=0;Te<xe.length;Te++){var we=xe[Te],_e=j?K._id+we:we+K._id;re||(re=_e);var ke=f.getFromId(le,we);if(ce&&ke.overlaying===ce){fe=_e;break}}}return fe||re}p.clearExpandedTraceDefaultColors=function(K){var ee,le,j;function Z(re,ce,xe,Te){le[Te]=ce,le.length=Te+1,re.valType==="color"&&re.dflt===void 0&&ee.push(le.join("."))}for(le=[],ee=K._module._colorAttrs,ee||(K._module._colorAttrs=ee=[],g.crawl(K._module.attributes,Z)),j=0;j<ee.length;j++){var fe=t.nestedProperty(K,"_input."+ee[j]);fe.get()||t.nestedProperty(K,ee[j]).set(null)}},p.supplyDataDefaults=function(K,ee,le,j){var Z=j._modules,fe=j._visibleModules,re=j._basePlotModules,ce=0,xe=0,Te,we,_e;j._transformModules=[];function ke(qe){ee.push(qe);var ht=qe._module;ht&&(t.pushUnique(Z,ht),qe.visible===!0&&t.pushUnique(fe,ht),t.pushUnique(re,qe._module.basePlotModule),ce++,qe._input.visible!==!1&&xe++)}var Ne={},Ee=[],ze=(le.template||{}).data||{},Ce=r.traceTemplater(ze);for(Te=0;Te<K.length;Te++){if(_e=K[Te],we=Ce.newTrace(_e),we.uid=j._traceUids[Te],p.supplyTraceDefaults(_e,we,xe,j,Te),we.index=Te,we._input=_e,we._expandedIndex=ce,we.transforms&&we.transforms.length)for(var Oe=_e.visible!==!1&&we.visible===!1,Le=O(we,ee,le,j),Ge=0;Ge<Le.length;Ge++){var rt=Le[Ge],ot={_template:we._template,type:we.type,uid:we.uid+Ge};Oe&&rt.visible===!1&&delete rt.visible,p.supplyTraceDefaults(rt,ot,ce,j,Te),c(ot,rt),ot.index=Te,ot._input=_e,ot._fullInput=we,ot._expandedIndex=ce,ot._expandedInput=rt,ke(ot)}else we._fullInput=we,we._expandedInput=we,ke(we);v.traceIs(we,"carpetAxis")&&(Ne[we.carpet]=we),v.traceIs(we,"carpetDependent")&&Ee.push(Te)}for(Te=0;Te<Ee.length;Te++)if(we=ee[Ee[Te]],!!we.visible){var $e=Ne[we.carpet];if(we._carpet=$e,!$e||!$e.visible){we.visible=!1;continue}we.xaxis=$e.xaxis,we.yaxis=$e.yaxis}},p.supplyAnimationDefaults=function(K){K=K||{};var ee,le={};function j(Z,fe){return t.coerce(K||{},le,m,Z,fe)}if(j("mode"),j("direction"),j("fromcurrent"),Array.isArray(K.frame))for(le.frame=[],ee=0;ee<K.frame.length;ee++)le.frame[ee]=p.supplyAnimationFrameDefaults(K.frame[ee]||{});else le.frame=p.supplyAnimationFrameDefaults(K.frame||{});if(Array.isArray(K.transition))for(le.transition=[],ee=0;ee<K.transition.length;ee++)le.transition[ee]=p.supplyAnimationTransitionDefaults(K.transition[ee]||{});else le.transition=p.supplyAnimationTransitionDefaults(K.transition||{});return le},p.supplyAnimationFrameDefaults=function(K){var ee={};function le(j,Z){return t.coerce(K||{},ee,m.frame,j,Z)}return le("duration"),le("redraw"),ee},p.supplyAnimationTransitionDefaults=function(K){var ee={};function le(j,Z){return t.coerce(K||{},ee,m.transition,j,Z)}return le("duration"),le("easing"),ee},p.supplyFrameDefaults=function(K){var ee={};function le(j,Z){return t.coerce(K,ee,h,j,Z)}return le("group"),le("name"),le("traces"),le("baseframe"),le("data"),le("layout"),ee},p.supplyTraceDefaults=function(K,ee,le,j,Z){var fe=j.colorway||o.defaults,re=fe[le%fe.length],ce;function xe(Ge,rt){return t.coerce(K,ee,p.attributes,Ge,rt)}var Te=xe("visible");xe("type"),xe("name",j._traceWord+" "+Z),xe("uirevision",j.uirevision);var we=p.getModule(ee);if(ee._module=we,we){var _e=we.basePlotModule,ke=_e.attr,Ne=_e.attributes;if(ke&&Ne){var Ee=j._subplots,ze="";if(Te||_e.name!=="gl2d"){if(Array.isArray(ke))for(ce=0;ce<ke.length;ce++){var Ce=ke[ce],Oe=t.coerce(K,ee,Ne,Ce);Ee[Ce]&&t.pushUnique(Ee[Ce],Oe),ze+=Oe}else ze=t.coerce(K,ee,Ne,ke);Ee[_e.name]&&t.pushUnique(Ee[_e.name],ze)}}}if(Te){if(xe("customdata"),xe("ids"),xe("meta"),v.traceIs(ee,"showLegend")?(t.coerce(K,ee,we.attributes.showlegend?we.attributes:p.attributes,"showlegend"),xe("legend"),xe("legendwidth"),xe("legendgroup"),xe("legendgrouptitle.text"),xe("legendrank"),ee._dfltShowLegend=!0):ee._dfltShowLegend=!1,we&&we.supplyDefaults(K,ee,re,j),v.traceIs(ee,"noOpacity")||xe("opacity"),v.traceIs(ee,"notLegendIsolatable")&&(ee.visible=!!ee.visible),v.traceIs(ee,"noHover")||(ee.hovertemplate||t.coerceHoverinfo(K,ee,j),ee.type!=="parcats"&&v.getComponentMethod("fx","supplyDefaults")(K,ee,re,j)),we&&we.selectPoints){var Le=xe("selectedpoints");t.isTypedArray(Le)&&(ee.selectedpoints=Array.from(Le))}p.supplyTransformDefaults(K,ee,j)}return ee};function V(K){var ee=K.transforms;if(Array.isArray(ee)&&ee.length)for(var le=0;le<ee.length;le++){var j=ee[le],Z=j._module||x[j.type];if(Z&&Z.makesData)return!0}return!1}p.hasMakesDataTransform=V,p.supplyTransformDefaults=function(K,ee,le){if(ee._length||V(K)){var j=le._globalTransforms||[],Z=le._transformModules||[];if(!(!Array.isArray(K.transforms)&&j.length===0))for(var fe=K.transforms||[],re=j.concat(fe),ce=ee.transforms=[],xe=0;xe<re.length;xe++){var Te=re[xe],we=Te.type,_e=x[we],ke,Ne=!(Te._module&&Te._module===_e),Ee=_e&&typeof _e.transform=="function";_e||t.warn("Unrecognized transform type "+we+"."),_e&&_e.supplyDefaults&&(Ne||Ee)?(ke=_e.supplyDefaults(Te,ee,le,K),ke.type=we,ke._module=_e,t.pushUnique(Z,_e)):ke=t.extendFlat({},Te),ce.push(ke)}}};function O(K,ee,le,j){for(var Z=K.transforms,fe=[K],re=0;re<Z.length;re++){var ce=Z[re],xe=x[ce.type];xe&&xe.transform&&(fe=xe.transform(fe,{transform:ce,fullTrace:K,fullData:ee,layout:le,fullLayout:j,transformIndex:re}))}return fe}p.supplyLayoutGlobalDefaults=function(K,ee,le){function j(_e,ke){return t.coerce(K,ee,p.layoutAttributes,_e,ke)}var Z=K.template;t.isPlainObject(Z)&&(ee.template=Z,ee._template=Z.layout,ee._dataTemplate=Z.data),j("autotypenumbers");var fe=t.coerceFont(j,"font"),re=fe.size;t.coerceFont(j,"title.font",fe,{overrideDflt:{size:Math.round(re*1.4)}}),j("title.text",ee._dfltTitle.plot),j("title.xref");var ce=j("title.yref");j("title.pad.t"),j("title.pad.r"),j("title.pad.b"),j("title.pad.l");var xe=j("title.automargin");j("title.x"),j("title.xanchor"),j("title.y"),j("title.yanchor"),xe&&(ce==="paper"&&(ee.title.y!==0&&(ee.title.y=1),ee.title.yanchor==="auto"&&(ee.title.yanchor=ee.title.y===0?"top":"bottom")),ce==="container"&&(ee.title.y==="auto"&&(ee.title.y=1),ee.title.yanchor==="auto"&&(ee.title.yanchor=ee.title.y<.5?"bottom":"top")));var Te=j("uniformtext.mode");Te&&j("uniformtext.minsize"),j("autosize",!(K.width&&K.height)),j("width"),j("height"),j("minreducedwidth"),j("minreducedheight"),j("margin.l"),j("margin.r"),j("margin.t"),j("margin.b"),j("margin.pad"),j("margin.autoexpand"),K.width&&K.height&&p.sanitizeMargins(ee),v.getComponentMethod("grid","sizeDefaults")(K,ee),j("paper_bgcolor"),j("separators",le.decimal+le.thousands),j("hidesources"),j("colorway"),j("datarevision");var we=j("uirevision");j("editrevision",we),j("selectionrevision",we),v.getComponentMethod("modebar","supplyLayoutDefaults")(K,ee),v.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(K,ee,j),v.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(K,ee,j),j("meta"),t.isPlainObject(K.transition)&&(j("transition.duration"),j("transition.easing"),j("transition.ordering")),v.getComponentMethod("calendars","handleDefaults")(K,ee,"calendar"),v.getComponentMethod("fx","supplyLayoutGlobalDefaults")(K,ee,j),t.coerce(K,ee,l,"scattermode")};function N(K){return typeof K=="string"&&K.substr(K.length-2)==="px"&&parseFloat(K)}p.plotAutoSize=function(ee,le,j){var Z=ee._context||{},fe=Z.frameMargins,re,ce,xe=t.isPlotDiv(ee);if(xe&&ee.emit("plotly_autosize"),Z.fillFrame)re=window.innerWidth,ce=window.innerHeight,document.body.style.overflow="hidden";else{var Te=xe?window.getComputedStyle(ee):{};if(re=N(Te.width)||N(Te.maxWidth)||j.width,ce=N(Te.height)||N(Te.maxHeight)||j.height,E(fe)&&fe>0){var we=1-2*fe;re=Math.round(we*re),ce=Math.round(we*ce)}}var _e=p.layoutAttributes.width.min,ke=p.layoutAttributes.height.min;re<_e&&(re=_e),ce<ke&&(ce=ke);var Ne=!le.width&&Math.abs(j.width-re)>1,Ee=!le.height&&Math.abs(j.height-ce)>1;(Ee||Ne)&&(Ne&&(j.width=re),Ee&&(j.height=ce)),ee._initialAutoSize||(ee._initialAutoSize={width:re,height:ce}),p.sanitizeMargins(j)},p.supplyLayoutModuleDefaults=function(K,ee,le,j){var Z=v.componentsRegistry,fe=ee._basePlotModules,re,ce,xe,Te=v.subplotsRegistry.cartesian;for(re in Z)xe=Z[re],xe.includeBasePlot&&xe.includeBasePlot(K,ee);fe.length||fe.push(Te),ee._has("cartesian")&&(v.getComponentMethod("grid","contentDefaults")(K,ee),Te.finalizeSubplots(K,ee));for(var we in ee._subplots)ee._subplots[we].sort(t.subplotSort);for(ce=0;ce<fe.length;ce++)xe=fe[ce],xe.supplyLayoutDefaults&&xe.supplyLayoutDefaults(K,ee,le);var _e=ee._modules;for(ce=0;ce<_e.length;ce++)xe=_e[ce],xe.supplyLayoutDefaults&&xe.supplyLayoutDefaults(K,ee,le);var ke=ee._transformModules;for(ce=0;ce<ke.length;ce++)xe=ke[ce],xe.supplyLayoutDefaults&&xe.supplyLayoutDefaults(K,ee,le,j);for(re in Z)xe=Z[re],xe.supplyLayoutDefaults&&xe.supplyLayoutDefaults(K,ee,le)},p.purge=function(K){var ee=K._fullLayout||{};ee._glcontainer!==void 0&&(ee._glcontainer.selectAll(".gl-canvas").remove(),ee._glcontainer.remove(),ee._glcanvas=null),ee._modeBar&&ee._modeBar.destroy(),K._transitionData&&(K._transitionData._interruptCallbacks&&(K._transitionData._interruptCallbacks.length=0),K._transitionData._animationRaf&&window.cancelAnimationFrame(K._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(K),delete K.data,delete K.layout,delete K._fullData,delete K._fullLayout,delete K.calcdata,delete K.empty,delete K.fid,delete K.undoqueue,delete K.undonum,delete K.autoplay,delete K.changed,delete K._promises,delete K._redrawTimer,delete K._hmlumcount,delete K._hmpixcount,delete K._transitionData,delete K._transitioning,delete K._initialAutoSize,delete K._transitioningWithDuration,delete K._dragging,delete K._dragged,delete K._dragdata,delete K._hoverdata,delete K._snapshotInProgress,delete K._editing,delete K._mouseDownTime,delete K._legendMouseDownTime,K.removeAllListeners&&K.removeAllListeners()},p.style=function(K){var ee=K._fullLayout._visibleModules,le=[],j;for(j=0;j<ee.length;j++){var Z=ee[j];Z.style&&t.pushUnique(le,Z.style)}for(j=0;j<le.length;j++)le[j](K)},p.sanitizeMargins=function(K){if(!(!K||!K.margin)){var ee=K.width,le=K.height,j=K.margin,Z=ee-(j.l+j.r),fe=le-(j.t+j.b),re;Z<0&&(re=(ee-1)/(j.l+j.r),j.l=Math.floor(re*j.l),j.r=Math.floor(re*j.r)),fe<0&&(re=(le-1)/(j.t+j.b),j.t=Math.floor(re*j.t),j.b=Math.floor(re*j.b))}},p.clearAutoMarginIds=function(K){K._fullLayout._pushmarginIds={}},p.allowAutoMargin=function(K,ee){K._fullLayout._pushmarginIds[ee]=1};function B(K){var ee=K.margin;if(!K._size){var le=K._size={l:Math.round(ee.l),r:Math.round(ee.r),t:Math.round(ee.t),b:Math.round(ee.b),p:Math.round(ee.pad)};le.w=Math.round(K.width)-le.l-le.r,le.h=Math.round(K.height)-le.t-le.b}K._pushmargin||(K._pushmargin={}),K._pushmarginIds||(K._pushmarginIds={}),K._reservedMargin||(K._reservedMargin={})}var z=2,H=2;p.autoMargin=function(K,ee,le){var j=K._fullLayout,Z=j.width,fe=j.height,re=j.margin,ce=j.minreducedwidth,xe=j.minreducedheight,Te=t.constrain(Z-re.l-re.r,z,ce),we=t.constrain(fe-re.t-re.b,H,xe),_e=Math.max(0,Z-Te),ke=Math.max(0,fe-we),Ne=j._pushmargin,Ee=j._pushmarginIds;if(re.autoexpand!==!1){if(!le)delete Ne[ee],delete Ee[ee];else{var ze=le.pad;if(ze===void 0&&(ze=Math.min(12,re.l,re.r,re.t,re.b)),_e){var Ce=(le.l+le.r)/_e;Ce>1&&(le.l/=Ce,le.r/=Ce)}if(ke){var Oe=(le.t+le.b)/ke;Oe>1&&(le.t/=Oe,le.b/=Oe)}var Le=le.xl!==void 0?le.xl:le.x,Ge=le.xr!==void 0?le.xr:le.x,rt=le.yt!==void 0?le.yt:le.y,ot=le.yb!==void 0?le.yb:le.y;Ne[ee]={l:{val:Le,size:le.l+ze},r:{val:Ge,size:le.r+ze},b:{val:ot,size:le.b+ze},t:{val:rt,size:le.t+ze}},Ee[ee]=1}if(!j._replotting)return p.doAutoMargin(K)}};function X(K){if("_redrawFromAutoMarginCount"in K._fullLayout)return!1;var ee=f.list(K,"",!0);for(var le in ee)if(ee[le].autoshift||ee[le].shift)return!0;return!1}p.doAutoMargin=function(K){var ee=K._fullLayout,le=ee.width,j=ee.height;ee._size||(ee._size={}),B(ee);var Z=ee._size,fe=ee.margin,re={t:0,b:0,l:0,r:0},ce=t.extendFlat({},Z),xe=fe.l,Te=fe.r,we=fe.t,_e=fe.b,ke=ee._pushmargin,Ne=ee._pushmarginIds,Ee=ee.minreducedwidth,ze=ee.minreducedheight;if(fe.autoexpand!==!1){for(var Ce in ke)Ne[Ce]||delete ke[Ce];var Oe=K._fullLayout._reservedMargin;for(var Le in Oe)for(var Ge in Oe[Le]){var rt=Oe[Le][Ge];re[Ge]=Math.max(re[Ge],rt)}ke.base={l:{val:0,size:xe},r:{val:1,size:Te},t:{val:1,size:we},b:{val:0,size:_e}};for(var ot in re){var $e=0;for(var qe in ke)qe!=="base"&&E(ke[qe][ot].size)&&($e=ke[qe][ot].size>$e?ke[qe][ot].size:$e);var ht=Math.max(0,fe[ot]-$e);re[ot]=Math.max(0,re[ot]-ht)}for(var vt in ke){var pt=ke[vt].l||{},wt=ke[vt].b||{},Et=pt.val,nt=pt.size,Fe=wt.val,We=wt.size,Ze=le-re.r-re.l,Ye=j-re.t-re.b;for(var Ie in ke){if(E(nt)&&ke[Ie].r){var De=ke[Ie].r.val,je=ke[Ie].r.size;if(De>Et){var Re=(nt*De+(je-Ze)*Et)/(De-Et),pe=(je*(1-Et)+(nt-Ze)*(1-De))/(De-Et);Re+pe>xe+Te&&(xe=Re,Te=pe)}}if(E(We)&&ke[Ie].t){var be=ke[Ie].t.val,Ue=ke[Ie].t.size;if(be>Fe){var et=(We*be+(Ue-Ye)*Fe)/(be-Fe),st=(Ue*(1-Fe)+(We-Ye)*(1-be))/(be-Fe);et+st>_e+we&&(_e=et,we=st)}}}}}var lt=t.constrain(le-fe.l-fe.r,z,Ee),Gt=t.constrain(j-fe.t-fe.b,H,ze),Zt=Math.max(0,le-lt),Tt=Math.max(0,j-Gt);if(Zt){var It=(xe+Te)/Zt;It>1&&(xe/=It,Te/=It)}if(Tt){var Xt=(_e+we)/Tt;Xt>1&&(_e/=Xt,we/=Xt)}if(Z.l=Math.round(xe)+re.l,Z.r=Math.round(Te)+re.r,Z.t=Math.round(we)+re.t,Z.b=Math.round(_e)+re.b,Z.p=Math.round(fe.pad),Z.w=Math.round(le)-Z.l-Z.r,Z.h=Math.round(j)-Z.t-Z.b,!ee._replotting&&(p.didMarginChange(ce,Z)||X(K))){"_redrawFromAutoMarginCount"in ee?ee._redrawFromAutoMarginCount++:ee._redrawFromAutoMarginCount=1;var gr=3*(1+Object.keys(Ne).length);if(ee._redrawFromAutoMarginCount<gr)return v.call("_doPlot",K);ee._size=ce,t.warn("Too many auto-margin redraws.")}$(K)};function $(K){var ee=f.list(K,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(le){for(var j=0;j<ee.length;j++){var Z=ee[j][le];Z&&Z()}})}var ne=["l","r","t","b","p","w","h"];p.didMarginChange=function(K,ee){for(var le=0;le<ne.length;le++){var j=ne[le],Z=K[j],fe=ee[j];if(!E(Z)||Math.abs(fe-Z)>1)return!0}return!1},p.graphJson=function(K,ee,le,j,Z,fe){(Z&&ee&&!K._fullData||Z&&!ee&&!K._fullLayout)&&p.supplyDefaults(K);var re=Z?K._fullData:K.data,ce=Z?K._fullLayout:K.layout,xe=(K._transitionData||{})._frames;function Te(ke,Ne){if(typeof ke=="function")return Ne?"_function_":null;if(t.isPlainObject(ke)){var Ee={},ze;return Object.keys(ke).sort().forEach(function(Ge){if(["_","["].indexOf(Ge.charAt(0))===-1){if(typeof ke[Ge]=="function"){Ne&&(Ee[Ge]="_function");return}if(le==="keepdata"){if(Ge.substr(Ge.length-3)==="src")return}else if(le==="keepstream"){if(ze=ke[Ge+"src"],typeof ze=="string"&&ze.indexOf(":")>0&&!t.isPlainObject(ke.stream))return}else if(le!=="keepall"&&(ze=ke[Ge+"src"],typeof ze=="string"&&ze.indexOf(":")>0))return;Ee[Ge]=Te(ke[Ge],Ne)}}),Ee}var Ce=Array.isArray(ke),Oe=t.isTypedArray(ke);if((Ce||Oe)&&ke.dtype&&ke.shape){var Le=ke.bdata;return Te({dtype:ke.dtype,shape:ke.shape,bdata:t.isArrayBuffer(Le)?T.encode(Le):Le},Ne)}return Ce?ke.map(function(Ge){return Te(Ge,Ne)}):Oe?t.simpleMap(ke,t.identity):t.isJSDate(ke)?t.ms2DateTimeLocal(+ke):ke}var we={data:(re||[]).map(function(ke){var Ne=Te(ke);return ee&&delete Ne.fit,Ne})};if(!ee&&(we.layout=Te(ce),Z)){var _e=ce._size;we.layout.computed={margin:{b:_e.b,l:_e.l,r:_e.r,t:_e.t}}}return xe&&(we.frames=Te(xe)),fe&&(we.config=Te(K._context,!0)),j==="object"?we:JSON.stringify(we)},p.modifyFrames=function(K,ee){var le,j,Z,fe=K._transitionData._frames,re=K._transitionData._frameHash;for(le=0;le<ee.length;le++)switch(j=ee[le],j.type){case"replace":Z=j.value;var ce=(fe[j.index]||{}).name,xe=Z.name;fe[j.index]=re[xe]=Z,xe!==ce&&(delete re[ce],re[xe]=Z);break;case"insert":Z=j.value,re[Z.name]=Z,fe.splice(j.index,0,Z);break;case"delete":Z=fe[j.index],delete re[Z.name],fe.splice(j.index,1);break}return Promise.resolve()},p.computeFrame=function(K,ee){var le=K._transitionData._frameHash,j,Z,fe,re;if(!ee)throw new Error("computeFrame must be given a string frame name");var ce=le[ee.toString()];if(!ce)return!1;for(var xe=[ce],Te=[ce.name];ce.baseframe&&(ce=le[ce.baseframe.toString()])&&Te.indexOf(ce.name)===-1;)xe.push(ce),Te.push(ce.name);for(var we={};ce=xe.pop();)if(ce.layout&&(we.layout=p.extendLayout(we.layout,ce.layout)),ce.data){if(we.data||(we.data=[]),Z=ce.traces,!Z)for(Z=[],j=0;j<ce.data.length;j++)Z[j]=j;for(we.traces||(we.traces=[]),j=0;j<ce.data.length;j++)fe=Z[j],fe!=null&&(re=we.traces.indexOf(fe),re===-1&&(re=we.data.length,we.traces[re]=fe),we.data[re]=p.extendTrace(we.data[re],ce.data[j]))}return we},p.recomputeFrameHash=function(K){for(var ee=K._transitionData._frameHash={},le=K._transitionData._frames,j=0;j<le.length;j++){var Z=le[j];Z&&Z.name&&(ee[Z.name]=Z)}},p.extendObjectWithContainers=function(K,ee,le){var j,Z,fe,re,ce,xe,Te,we,_e=t.extendDeepNoArrays({},ee||{}),ke=t.expandObjectPaths(_e),Ne={};if(le&&le.length)for(fe=0;fe<le.length;fe++)j=t.nestedProperty(ke,le[fe]),Z=j.get(),Z===void 0?t.nestedProperty(Ne,le[fe]).set(null):(j.set(null),t.nestedProperty(Ne,le[fe]).set(Z));if(K=t.extendDeepNoArrays(K||{},ke),le&&le.length){for(fe=0;fe<le.length;fe++)if(ce=t.nestedProperty(Ne,le[fe]),Te=ce.get(),!!Te){for(xe=t.nestedProperty(K,le[fe]),we=xe.get(),Array.isArray(we)||(we=[],xe.set(we)),re=0;re<Te.length;re++){var Ee=Te[re];Ee===null?we[re]=null:we[re]=p.extendObjectWithContainers(we[re],Ee)}xe.set(we)}}return K},p.dataArrayContainers=["transforms","dimensions"],p.layoutArrayContainers=v.layoutArrayContainers,p.extendTrace=function(K,ee){return p.extendObjectWithContainers(K,ee,p.dataArrayContainers)},p.extendLayout=function(K,ee){return p.extendObjectWithContainers(K,ee,p.layoutArrayContainers)},p.transition=function(K,ee,le,j,Z,fe){var re={redraw:Z.redraw},ce={},xe=[];return re.prepareFn=function(){for(var Te=Array.isArray(ee)?ee.length:0,we=j.slice(0,Te),_e=0;_e<we.length;_e++){var ke=we[_e],Ne=K._fullData[ke],Ee=Ne._module;if(Ee){if(Ee.animatable){var ze=Ee.basePlotModule.name;ce[ze]||(ce[ze]=[]),ce[ze].push(ke)}K.data[we[_e]]=p.extendTrace(K.data[we[_e]],ee[_e])}}var Ce=t.expandObjectPaths(t.extendDeepNoArrays({},le)),Oe=/^[xy]axis[0-9]*$/;for(var Le in Ce)Oe.test(Le)&&delete Ce[Le].range;p.extendLayout(K.layout,Ce),delete K.calcdata,p.supplyDefaults(K),p.doCalcdata(K);var Ge=t.expandObjectPaths(le);if(Ge){var rt=K._fullLayout._plots;for(var ot in rt){var $e=rt[ot],qe=$e.xaxis,ht=$e.yaxis,vt=qe.range.slice(),pt=ht.range.slice(),wt=null,Et=null,nt=null,Fe=null;Array.isArray(Ge[qe._name+".range"])?wt=Ge[qe._name+".range"].slice():Array.isArray((Ge[qe._name]||{}).range)&&(wt=Ge[qe._name].range.slice()),Array.isArray(Ge[ht._name+".range"])?Et=Ge[ht._name+".range"].slice():Array.isArray((Ge[ht._name]||{}).range)&&(Et=Ge[ht._name].range.slice()),vt&&wt&&(qe.r2l(vt[0])!==qe.r2l(wt[0])||qe.r2l(vt[1])!==qe.r2l(wt[1]))&&(nt={xr0:vt,xr1:wt}),pt&&Et&&(ht.r2l(pt[0])!==ht.r2l(Et[0])||ht.r2l(pt[1])!==ht.r2l(Et[1]))&&(Fe={yr0:pt,yr1:Et}),(nt||Fe)&&xe.push(t.extendFlat({plotinfo:$e},nt,Fe))}}return Promise.resolve()},re.runFn=function(Te){var we,_e=K._fullLayout._basePlotModules,ke=xe.length,Ne;if(le)for(Ne=0;Ne<_e.length;Ne++)_e[Ne].transitionAxes&&_e[Ne].transitionAxes(K,xe,fe,Te);ke?(we=t.extendFlat({},fe),we.duration=0,delete ce.cartesian):we=fe;for(var Ee in ce){var ze=ce[Ee],Ce=K._fullData[ze[0]]._module;Ce.basePlotModule.plot(K,ze,we,Te)}},q(K,fe,re)},p.transitionFromReact=function(K,ee,le,j){var Z=K._fullLayout,fe=Z.transition,re={},ce=[];return re.prepareFn=function(){var xe=Z._plots;re.redraw=!1,ee.anim==="some"&&(re.redraw=!0),le.anim==="some"&&(re.redraw=!0);for(var Te in xe){var we=xe[Te],_e=we.xaxis,ke=we.yaxis,Ne=j[_e._name].range.slice(),Ee=j[ke._name].range.slice(),ze=_e.range.slice(),Ce=ke.range.slice();_e.setScale(),ke.setScale();var Oe=null,Le=null;(_e.r2l(Ne[0])!==_e.r2l(ze[0])||_e.r2l(Ne[1])!==_e.r2l(ze[1]))&&(Oe={xr0:Ne,xr1:ze}),(ke.r2l(Ee[0])!==ke.r2l(Ce[0])||ke.r2l(Ee[1])!==ke.r2l(Ce[1]))&&(Le={yr0:Ee,yr1:Ce}),(Oe||Le)&&ce.push(t.extendFlat({plotinfo:we},Oe,Le))}return Promise.resolve()},re.runFn=function(xe){for(var Te=K._fullData,we=K._fullLayout,_e=we._basePlotModules,ke,Ne,Ee,ze=[],Ce=0;Ce<Te.length;Ce++)ze.push(Ce);function Oe(){if(K._fullLayout)for(var Ge=0;Ge<_e.length;Ge++)_e[Ge].transitionAxes&&_e[Ge].transitionAxes(K,ce,ke,xe)}function Le(){if(K._fullLayout)for(var Ge=0;Ge<_e.length;Ge++)_e[Ge].plot(K,Ee,Ne,xe)}ce.length&&ee.anim?fe.ordering==="traces first"?(ke=t.extendFlat({},fe,{duration:0}),Ee=ze,Ne=fe,setTimeout(Oe,fe.duration),Le()):(ke=fe,Ee=null,Ne=t.extendFlat({},fe,{duration:0}),setTimeout(Le,ke.duration),Oe()):ce.length?(ke=fe,Oe()):ee.anim&&(Ee=ze,Ne=fe,Le())},q(K,fe,re)};function q(K,ee,le){var j=!1;function Z(_e){var ke=Promise.resolve();if(!_e)return ke;for(;_e.length;)ke=ke.then(_e.shift());return ke}function fe(_e){if(_e)for(;_e.length;)_e.shift()}function re(){return K.emit("plotly_transitioning",[]),new Promise(function(_e){K._transitioning=!0,ee.duration>0&&(K._transitioningWithDuration=!0),K._transitionData._interruptCallbacks.push(function(){j=!0}),le.redraw&&K._transitionData._interruptCallbacks.push(function(){return v.call("redraw",K)}),K._transitionData._interruptCallbacks.push(function(){K.emit("plotly_transitioninterrupted",[])});var ke=0,Ne=0;function Ee(){return ke++,function(){Ne++,!j&&Ne===ke&&ce(_e)}}le.runFn(Ee),setTimeout(Ee())})}function ce(_e){if(K._transitionData)return fe(K._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(le.redraw)return v.call("redraw",K)}).then(function(){K._transitioning=!1,K._transitioningWithDuration=!1,K.emit("plotly_transitioned",[])}).then(_e)}function xe(){if(K._transitionData)return K._transitioning=!1,Z(K._transitionData._interruptCallbacks)}var Te=[p.previousPromises,xe,le.prepareFn,p.rehover,p.reselect,re],we=t.syncOrAsync(Te,K);return(!we||!we.then)&&(we=Promise.resolve()),we.then(function(){return K})}p.doCalcdata=function(K,ee){var le=f.list(K),j=K._fullData,Z=K._fullLayout,fe,re,ce,xe,Te=new Array(j.length),we=(K.calcdata||[]).slice();for(K.calcdata=Te,Z._numBoxes=0,Z._numViolins=0,Z._violinScaleGroupStats={},K._hmpixcount=0,K._hmlumcount=0,Z._piecolormap={},Z._sunburstcolormap={},Z._treemapcolormap={},Z._iciclecolormap={},Z._funnelareacolormap={},ce=0;ce<j.length;ce++)if(Array.isArray(ee)&&ee.indexOf(ce)===-1){Te[ce]=we[ce];continue}for(ce=0;ce<j.length;ce++)fe=j[ce],fe._arrayAttrs=g.findArrayAttributes(fe),fe._extremes={};var _e=Z._subplots.polar||[];for(ce=0;ce<_e.length;ce++)le.push(Z[_e[ce]].radialaxis,Z[_e[ce]].angularaxis);for(var ke in Z._colorAxes){var Ne=Z[ke];Ne.cauto!==!1&&(delete Ne.cmin,delete Ne.cmax)}var Ee=!1;function ze(Le){if(fe=j[Le],re=fe._module,fe.visible===!0&&fe.transforms){if(re&&re.calc){var Ge=re.calc(K,fe);Ge[0]&&Ge[0].t&&Ge[0].t._scene&&delete Ge[0].t._scene.dirty}for(xe=0;xe<fe.transforms.length;xe++){var rt=fe.transforms[xe];re=x[rt.type],re&&re.calcTransform&&(fe._hasCalcTransform=!0,Ee=!0,re.calcTransform(K,fe,rt))}}}function Ce(Le,Ge){if(fe=j[Le],re=fe._module,!!re.isContainer===Ge){var rt=[];if(fe.visible===!0&&fe._length!==0){delete fe._indexToPoints;var ot=fe.transforms||[];for(xe=ot.length-1;xe>=0;xe--)if(ot[xe].enabled){fe._indexToPoints=ot[xe]._indexToPoints;break}re&&re.calc&&(rt=re.calc(K,fe))}(!Array.isArray(rt)||!rt[0])&&(rt=[{x:i,y:i}]),rt[0].t||(rt[0].t={}),rt[0].trace=fe,Te[Le]=rt}}for(J(le,j,Z),ce=0;ce<j.length;ce++)Ce(ce,!0);for(ce=0;ce<j.length;ce++)ze(ce);for(Ee&&J(le,j,Z),ce=0;ce<j.length;ce++)Ce(ce,!0);for(ce=0;ce<j.length;ce++)Ce(ce,!1);ie(K);var Oe=te(le,K);if(Oe.length){for(Z._numBoxes=0,Z._numViolins=0,ce=0;ce<Oe.length;ce++)Ce(Oe[ce],!0);for(ce=0;ce<Oe.length;ce++)Ce(Oe[ce],!1);ie(K)}v.getComponentMethod("fx","calc")(K),v.getComponentMethod("errorbars","calc")(K)};var ue=/(total|sum|min|max|mean|median) (ascending|descending)/;function te(K,ee){var le=[],j,Z,fe,re,ce;function xe(Ie,De,je){var Re=De._id.charAt(0);if(Ie==="histogram2dcontour"){var pe=De._counterAxes[0],be=f.getFromId(ee,pe),Ue=Re==="x"||pe==="x"&&be.type==="category",et=Re==="y"||pe==="y"&&be.type==="category";return function(st,lt){return st===0||lt===0||Ue&&st===je[lt].length-1||et&&lt===je.length-1?-1:(Re==="y"?lt:st)-1}}else return function(st,lt){return Re==="y"?lt:st}}var Te={min:function(Ie){return t.aggNums(Math.min,null,Ie)},max:function(Ie){return t.aggNums(Math.max,null,Ie)},sum:function(Ie){return t.aggNums(function(De,je){return De+je},null,Ie)},total:function(Ie){return t.aggNums(function(De,je){return De+je},null,Ie)},mean:function(Ie){return t.mean(Ie)},median:function(Ie){return t.median(Ie)}};function we(Ie,De){return Ie[1]-De[1]}function _e(Ie,De){return De[1]-Ie[1]}for(j=0;j<K.length;j++){var ke=K[j];if(ke.type==="category"){var Ne=ke.categoryorder.match(ue);if(Ne){var Ee=Ne[1],ze=Ne[2],Ce=ke._id.charAt(0),Oe=Ce==="x",Le=[];for(Z=0;Z<ke._categories.length;Z++)Le.push([ke._categories[Z],[]]);for(Z=0;Z<ke._traceIndices.length;Z++){var Ge=ke._traceIndices[Z],rt=ee._fullData[Ge];if(rt.visible===!0){var ot=rt.type;v.traceIs(rt,"histogram")&&(delete rt._xautoBinFinished,delete rt._yautoBinFinished);var $e=ot==="splom",qe=ot==="scattergl",ht=ee.calcdata[Ge];for(fe=0;fe<ht.length;fe++){var vt=ht[fe],pt,wt;if($e){var Et=rt._axesDim[ke._id];if(!Oe){var nt=rt._diag[Et][0];nt&&(ke=ee._fullLayout[f.id2name(nt)])}var Fe=vt.trace.dimensions[Et].values;for(re=0;re<Fe.length;re++)for(pt=ke._categoriesMap[Fe[re]],ce=0;ce<vt.trace.dimensions.length;ce++)if(ce!==Et){var We=vt.trace.dimensions[ce];Le[pt][1].push(We.values[re])}}else if(qe){for(re=0;re<vt.t.x.length;re++)Oe?(pt=vt.t.x[re],wt=vt.t.y[re]):(pt=vt.t.y[re],wt=vt.t.x[re]),Le[pt][1].push(wt);vt.t&&vt.t._scene&&delete vt.t._scene.dirty}else if(vt.hasOwnProperty("z")){wt=vt.z;var Ze=xe(rt.type,ke,wt);for(re=0;re<wt.length;re++)for(ce=0;ce<wt[re].length;ce++)pt=Ze(ce,re),pt+1&&Le[pt][1].push(wt[re][ce])}else for(pt=vt.p,pt===void 0&&(pt=vt[Ce]),wt=vt.s,wt===void 0&&(wt=vt.v),wt===void 0&&(wt=Oe?vt.y:vt.x),Array.isArray(wt)||(wt===void 0?wt=[]:wt=[wt]),re=0;re<wt.length;re++)Le[pt][1].push(wt[re])}}}ke._categoriesValue=Le;var Ye=[];for(Z=0;Z<Le.length;Z++)Ye.push([Le[Z][0],Te[Ee](Le[Z][1])]);Ye.sort(ze==="descending"?_e:we),ke._categoriesAggregatedValue=Ye,ke._initialCategories=Ye.map(function(Ie){return Ie[0]}),le=le.concat(ke.sortByInitialCategories())}}}return le}function J(K,ee,le){var j={};function Z(xe){xe.clearCalc(),xe.type==="multicategory"&&xe.setupMultiCategory(ee),j[xe._id]=1}t.simpleMap(K,Z);for(var fe=le._axisMatchGroups||[],re=0;re<fe.length;re++)for(var ce in fe[re])j[ce]||Z(le[f.id2name(ce)])}function ie(K){var ee=K._fullLayout,le=ee._visibleModules,j={},Z,fe,re;for(fe=0;fe<le.length;fe++){var ce=le[fe],xe=ce.crossTraceCalc;if(xe){var Te=ce.basePlotModule.name;j[Te]?t.pushUnique(j[Te],xe):j[Te]=[xe]}}for(re in j){var we=j[re],_e=ee._subplots[re];if(Array.isArray(_e))for(Z=0;Z<_e.length;Z++){var ke=_e[Z],Ne=re==="cartesian"?ee._plots[ke]:ee[ke];for(fe=0;fe<we.length;fe++)we[fe](K,Ne,ke)}else for(fe=0;fe<we.length;fe++)we[fe](K)}}p.rehover=function(K){K._fullLayout._rehover&&K._fullLayout._rehover()},p.redrag=function(K){K._fullLayout._redrag&&K._fullLayout._redrag()},p.reselect=function(K){var ee=K._fullLayout,le=(K.layout||{}).selections,j=ee._previousSelections;ee._previousSelections=le;var Z=ee._reselect||JSON.stringify(le)!==JSON.stringify(j);v.getComponentMethod("selections","reselect")(K,Z)},p.generalUpdatePerTraceModule=function(K,ee,le,j){var Z=ee.traceHash,fe={},re;for(re=0;re<le.length;re++){var ce=le[re],xe=ce[0].trace;xe.visible&&(fe[xe.type]=fe[xe.type]||[],fe[xe.type].push(ce))}for(var Te in Z)if(!fe[Te]){var we=Z[Te][0],_e=we[0].trace;_e.visible=!1,fe[Te]=[we]}for(var ke in fe){var Ne=fe[ke],Ee=Ne[0][0].trace._module;Ee.plot(K,ee,t.filterVisible(Ne),j)}ee.traceHash=fe},p.plotBasePlot=function(K,ee,le,j,Z){var fe=v.getModule(K),re=w(ee.calcdata,fe)[0];fe.plot(ee,re,j,Z)},p.cleanBasePlot=function(K,ee,le,j,Z){var fe=Z._has&&Z._has(K),re=le._has&&le._has(K);fe&&!re&&Z["_"+K+"layer"].selectAll("g.trace").remove()}},39360:function(U){U.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(U,F,e){var d=e(3400),S=e(92065).tester,n=d.findIndexOfMin,E=d.isAngleInsideSector,T=d.angleDelta,v=d.angleDist;function g(a,p,x,A,P){if(!E(p,A))return!1;var y,C;x[0]<x[1]?(y=x[0],C=x[1]):(y=x[1],C=x[0]);var M=S(f(y,A[0],A[1],P)),s=S(f(C,A[0],A[1],P)),_=[a*Math.cos(p),a*Math.sin(p)];return s.contains(_)&&!M.contains(_)}function r(a,p,x,A){var P,y,C=A[0],M=A[1],s=m(Math.sin(p)-Math.sin(a)),_=m(Math.cos(p)-Math.cos(a)),b=Math.tan(x),k=m(1/b),D=s/_,V=M-D*C;return k?s&&_?(P=V/(b-D),y=b*P):_?(P=M*k,y=M):(P=C,y=C*b):s&&_?(P=0,y=V):_?(P=0,y=M):P=y=NaN,[P,y]}function t(a,p,x,A){var P=-p*x,y=p*p+1,C=2*(p*P-x),M=P*P+x*x-a*a,s=Math.sqrt(C*C-4*y*M),_=(-C+s)/(2*y),b=(-C-s)/(2*y);return[[_,p*_+P+A],[b,p*b+P+A]]}function o(a,p){var x=p.length,A=new Array(x+1),P;for(P=0;P<x;P++){var y=p[P];A[P]=[a*Math.cos(y),a*Math.sin(y)]}return A[P]=A[0].slice(),A}function i(a,p,x,A){var P=A.length,y=[],C,M;function s(z){return[a*Math.cos(z),a*Math.sin(z)]}function _(z,H,X){return r(z,H,X,s(z))}function b(z){return d.mod(z,P)}function k(z){return E(z,[p,x])}var D=n(A,function(z){return k(z)?v(z,p):1/0}),V=_(A[D],A[b(D-1)],p);for(y.push(V),C=D,M=0;M<P;C++,M++){var O=A[b(C)];if(!k(O))break;y.push(s(O))}var N=n(A,function(z){return k(z)?v(z,x):1/0}),B=_(A[N],A[b(N+1)],x);return y.push(B),y.push([0,0]),y.push(y[0].slice()),y}function f(a,p,x,A){return d.isFullCircle([p,x])?o(a,A):i(a,p,x,A)}function u(a,p,x,A){for(var P=1/0,y=1/0,C=f(a,p,x,A),M=0;M<C.length;M++){var s=C[M];P=Math.min(P,s[0]),y=Math.min(y,-s[1])}return[P,y]}function l(a,p){var x=function(y){var C=T(y,a);return C>0?C:1/0},A=n(p,x),P=d.mod(A+1,p.length);return[p[A],p[P]]}function m(a){return Math.abs(a)>1e-10?a:0}function h(a,p,x){p=p||0,x=x||0;for(var A=a.length,P=new Array(A),y=0;y<A;y++){var C=a[y];P[y]=[p+C[0],x-C[1]]}return P}function w(a,p,x,A,P,y){var C=f(a,p,x,A);return"M"+h(C,P,y).join("L")}function c(a,p,x,A,P,y,C){var M,s;a<p?(M=a,s=p):(M=p,s=a);var _=h(f(M,x,A,P),y,C),b=h(f(s,x,A,P),y,C);return"M"+b.reverse().join("L")+"M"+_.join("L")}U.exports={isPtInsidePolygon:g,findPolygonOffset:u,findEnclosingVertexAngles:l,findIntersectionXY:r,findXYatLength:t,clampTiny:m,pathPolygon:w,pathPolygonAnnulus:c}},40872:function(U,F,e){var d=e(84888).KY,S=e(3400).counterRegex,n=e(62400),E=e(39360),T=E.attr,v=E.name,g=S(v),r={};r[T]={valType:"subplotid",dflt:v,editType:"calc"};function t(i){for(var f=i._fullLayout,u=i.calcdata,l=f._subplots[v],m=0;m<l.length;m++){var h=l[m],w=d(u,v,h),c=f[h]._subplot;c||(c=n(i,h),f[h]._subplot=c),c.plot(w,f,i._promises)}}function o(i,f,u,l){for(var m=l._subplots[v]||[],h=l._has&&l._has("gl"),w=f._has&&f._has("gl"),c=h&&!w,a=0;a<m.length;a++){var p=m[a],x=l[p]._subplot;if(!f[p]&&x){x.framework.remove(),x.layers["radial-axis-title"].remove();for(var A in x.clipPaths)x.clipPaths[A].remove()}c&&x._scene&&(x._scene.destroy(),x._scene=null)}}U.exports={attr:T,name:v,idRoot:v,idRegex:g,attrRegex:g,attributes:r,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:t,clean:o,toSVG:e(57952).toSVG}},95300:function(U,F,e){var d=e(22548),S=e(94724),n=e(86968).u,E=e(3400).extendFlat,T=e(67824).overrideAll,v=T({color:S.color,showline:E({},S.showline,{dflt:!0}),linecolor:S.linecolor,linewidth:S.linewidth,showgrid:E({},S.showgrid,{dflt:!0}),gridcolor:S.gridcolor,gridwidth:S.gridwidth,griddash:S.griddash},"plot","from-root"),g=T({tickmode:S.minor.tickmode,nticks:S.nticks,tick0:S.tick0,dtick:S.dtick,tickvals:S.tickvals,ticktext:S.ticktext,ticks:S.ticks,ticklen:S.ticklen,tickwidth:S.tickwidth,tickcolor:S.tickcolor,ticklabelstep:S.ticklabelstep,showticklabels:S.showticklabels,labelalias:S.labelalias,showtickprefix:S.showtickprefix,tickprefix:S.tickprefix,showticksuffix:S.showticksuffix,ticksuffix:S.ticksuffix,showexponent:S.showexponent,exponentformat:S.exponentformat,minexponent:S.minexponent,separatethousands:S.separatethousands,tickfont:S.tickfont,tickangle:S.tickangle,tickformat:S.tickformat,tickformatstops:S.tickformatstops,layer:S.layer},"plot","from-root"),r={visible:E({},S.visible,{dflt:!0}),type:E({},S.type,{values:["-","linear","log","date","category"]}),autotypenumbers:S.autotypenumbers,autorangeoptions:{minallowed:S.autorangeoptions.minallowed,maxallowed:S.autorangeoptions.maxallowed,clipmin:S.autorangeoptions.clipmin,clipmax:S.autorangeoptions.clipmax,include:S.autorangeoptions.include,editType:"plot"},autorange:E({},S.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:E({},S.minallowed,{editType:"plot"}),maxallowed:E({},S.maxallowed,{editType:"plot"}),range:E({},S.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:S.categoryorder,categoryarray:S.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:S.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:E({},S.title.text,{editType:"plot",dflt:""}),font:E({},S.title.font,{editType:"plot"}),editType:"plot"},hoverformat:S.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:S._deprecated.title,titlefont:S._deprecated.titlefont}};E(r,v,g);var t={visible:E({},S.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:S.autotypenumbers,categoryorder:S.categoryorder,categoryarray:S.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:S.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};E(t,v,g),U.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:d.background},radialaxis:r,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(U,F,e){var d=e(3400),S=e(76308),n=e(31780),E=e(168),T=e(84888).op,v=e(26332),g=e(25404),r=e(95936),t=e(42568),o=e(22416),i=e(42136),f=e(76808),u=e(52976),l=e(95300),m=e(57696),h=e(39360),w=h.axisNames;function c(p,x,A,P){var y=A("bgcolor");P.bgColor=S.combine(y,P.paper_bgcolor);var C=A("sector");A("hole");var M=T(P.fullData,h.name,P.id),s=P.layoutOut,_;function b(ce,xe){return A(_+"."+ce,xe)}for(var k=0;k<w.length;k++){_=w[k],d.isPlainObject(p[_])||(p[_]={});var D=p[_],V=n.newContainer(x,_);V._id=V._name=_,V._attr=P.id+"."+_,V._traceIndices=M.map(function(ce){return ce._expandedIndex});var O=h.axisName2dataArray[_],N=a(D,V,b,M,O,P);o(D,V,b,{axData:M,dataAttr:O});var B=b("visible");switch(m(V,x,s),b("uirevision",x.uirevision),V._m=1,_){case"radialaxis":b("minallowed"),b("maxallowed");var z=b("range"),H=V.getAutorangeDflt(z),X=b("autorange",H),$;z&&(z[0]===null&&z[1]===null||(z[0]===null||z[1]===null)&&(X==="reversed"||X===!0)||z[0]!==null&&(X==="min"||X==="max reversed")||z[1]!==null&&(X==="max"||X==="min reversed"))&&(z=void 0,delete V.range,V.autorange=!0,$=!0),$||(H=V.getAutorangeDflt(z),X=b("autorange",H)),D.autorange=X,X&&(f(b,X,z),(N==="linear"||N==="-")&&b("rangemode"),V.isReversed()&&(V._m=-1)),V.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(N==="date"){d.log("Polar plots do not support date angular axes yet.");for(var ne=0;ne<M.length;ne++)M[ne].visible=!1;N=D.type=V.type="linear"}b(N==="linear"?"thetaunit":"period");var q=b("direction");b("rotation",{counterclockwise:0,clockwise:90}[q]);break}if(t(D,V,b,V.type,{tickSuffixDflt:V.thetaunit==="degrees"?"":void 0}),B){var ue,te,J,ie,K,ee,le,j,Z,fe,re=P.font||{};ue=b("color"),te=ue===D.color?ue:re.color,J=re.size,ie=re.family,K=re.weight,ee=re.style,le=re.variant,j=re.textcase,Z=re.lineposition,fe=re.shadow,v(D,V,b,V.type),r(D,V,b,V.type,{font:{weight:K,style:ee,variant:le,textcase:j,lineposition:Z,shadow:fe,color:te,size:J,family:ie},noAutotickangles:_==="angularaxis"}),g(D,V,b,{outerTicks:!0}),i(D,V,b,{dfltColor:ue,bgColor:P.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[_]}),b("layer"),_==="radialaxis"&&(b("side"),b("angle",C[0]),b("title.text"),d.coerceFont(b,"title.font",{weight:K,style:ee,variant:le,textcase:j,lineposition:Z,shadow:fe,color:te,size:d.bigFont(J),family:ie}))}N!=="category"&&b("hoverformat"),V._input=D}x.angularaxis.type==="category"&&A("gridshape")}function a(p,x,A,P,y,C){var M=A("autotypenumbers",C.autotypenumbersDflt),s=A("type");if(s==="-"){for(var _,b=0;b<P.length;b++)if(P[b].visible){_=P[b];break}_&&_[y]&&(x.type=u(_[y],"gregorian",{noMultiCategory:!0,autotypenumbers:M})),x.type==="-"?x.type="linear":p.type=x.type}return x.type}U.exports=function(x,A,P){E(x,A,P,{type:h.name,attributes:l,handleDefaults:c,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:P,layoutOut:A})}},62400:function(U,F,e){var d=e(33428),S=e(49760),n=e(24040),E=e(3400),T=E.strRotate,v=E.strTranslate,g=e(76308),r=e(43616),t=e(7316),o=e(54460),i=e(78344),f=e(57696),u=e(19280).doAutoRange,l=e(51184),m=e(86476),h=e(93024),w=e(81668),c=e(22676).prepSelect,a=e(22676).selectOnClick,p=e(22676).clearOutline,x=e(93972),A=e(73696),P=e(39172).redrawReglTraces,y=e(84284).MID_SHIFT,C=e(39360),M=e(57384),s=e(36416),_=s.smith,b=s.reactanceArc,k=s.resistanceArc,D=s.smithTransform,V=E._,O=E.mod,N=E.deg2rad,B=E.rad2deg;function z(ue,te,J){this.isSmith=J||!1,this.id=te,this.gd=ue,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var ie=ue._fullLayout,K="clip"+ie._uid+te;this.clipIds.forTraces=K+"-for-traces",this.clipPaths.forTraces=ie._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=ie["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",te),this.getHole=function(ee){return this.isSmith?0:ee.hole},this.getSector=function(ee){return this.isSmith?[0,360]:ee.sector},this.getRadial=function(ee){return this.isSmith?ee.realaxis:ee.radialaxis},this.getAngular=function(ee){return this.isSmith?ee.imaginaryaxis:ee.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var H=z.prototype;U.exports=function(te,J,ie){return new z(te,J,ie)},H.plot=function(ue,te){for(var J=this,ie=te[J.id],K=!1,ee=0;ee<ue.length;ee++){var le=ue[ee][0].trace;if(le.cliponaxis===!1){K=!0;break}}J._hasClipOnAxisFalse=K,J.updateLayers(te,ie),J.updateLayout(te,ie),t.generalUpdatePerTraceModule(J.gd,J,ue,ie),J.updateFx(te,ie),J.isSmith&&(delete ie.realaxis.range,delete ie.imaginaryaxis.range)},H.updateLayers=function(ue,te){var J=this,ie=J.isSmith,K=J.layers,ee=J.getRadial(te),le=J.getAngular(te),j=C.layerNames,Z=j.indexOf("frontplot"),fe=j.slice(0,Z),re=le.layer==="below traces",ce=ee.layer==="below traces";re&&fe.push("angular-line"),ce&&fe.push("radial-line"),re&&fe.push("angular-axis"),ce&&fe.push("radial-axis"),fe.push("frontplot"),re||fe.push("angular-line"),ce||fe.push("radial-line"),re||fe.push("angular-axis"),ce||fe.push("radial-axis");var xe=(ie?"smith":"polar")+"sublayer",Te=J.framework.selectAll("."+xe).data(fe,String);Te.enter().append("g").attr("class",function(we){return xe+" "+we}).each(function(we){var _e=K[we]=d.select(this);switch(we){case"frontplot":ie||_e.append("g").classed("barlayer",!0),_e.append("g").classed("scatterlayer",!0);break;case"backplot":_e.append("g").classed("maplayer",!0);break;case"plotbg":K.bg=_e.append("path");break;case"radial-grid":_e.style("fill","none");break;case"angular-grid":_e.style("fill","none");break;case"radial-line":_e.append("line").style("fill","none");break;case"angular-line":_e.append("path").style("fill","none");break}}),Te.order()},H.updateLayout=function(ue,te){var J=this,ie=J.layers,K=ue._size,ee=J.getRadial(te),le=J.getAngular(te),j=te.domain.x,Z=te.domain.y;J.xOffset=K.l+K.w*j[0],J.yOffset=K.t+K.h*(1-Z[1]);var fe=J.xLength=K.w*(j[1]-j[0]),re=J.yLength=K.h*(Z[1]-Z[0]),ce=J.getSector(te);J.sectorInRad=ce.map(N);var xe=J.sectorBBox=$(ce),Te=xe[2]-xe[0],we=xe[3]-xe[1],_e=re/fe,ke=Math.abs(we/Te),Ne,Ee,ze,Ce,Oe;_e>ke?(Ne=fe,Ee=fe*ke,Oe=(re-Ee)/K.h/2,ze=[j[0],j[1]],Ce=[Z[0]+Oe,Z[1]-Oe]):(Ne=re/ke,Ee=re,Oe=(fe-Ne)/K.w/2,ze=[j[0]+Oe,j[1]-Oe],Ce=[Z[0],Z[1]]),J.xLength2=Ne,J.yLength2=Ee,J.xDomain2=ze,J.yDomain2=Ce;var Le=J.xOffset2=K.l+K.w*ze[0],Ge=J.yOffset2=K.t+K.h*(1-Ce[1]),rt=J.radius=Ne/Te,ot=J.innerRadius=J.getHole(te)*rt,$e=J.cx=Le-rt*xe[0],qe=J.cy=Ge+rt*xe[3],ht=J.cxx=$e-Le,vt=J.cyy=qe-Ge,pt=ee.side,wt;pt==="counterclockwise"?(wt=pt,pt="top"):pt==="clockwise"&&(wt=pt,pt="bottom"),J.radialAxis=J.mockAxis(ue,te,ee,{_id:"x",side:pt,_trueSide:wt,domain:[ot/K.w,rt/K.w]}),J.angularAxis=J.mockAxis(ue,te,le,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(ue,te),J.updateAngularAxis(ue,te),J.updateRadialAxis(ue,te),J.updateRadialAxisTitle(ue,te),J.xaxis=J.mockCartesianAxis(ue,te,{_id:"x",domain:ze}),J.yaxis=J.mockCartesianAxis(ue,te,{_id:"y",domain:Ce});var Et=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",Et).attr("transform",v(ht,vt)),ie.frontplot.attr("transform",v(Le,Ge)).call(r.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),ie.bg.attr("d",Et).attr("transform",v($e,qe)).call(g.fill,te.bgcolor)},H.mockAxis=function(ue,te,J,ie){var K=E.extendFlat({},J,ie);return f(K,te,ue),K},H.mockCartesianAxis=function(ue,te,J){var ie=this,K=ie.isSmith,ee=J._id,le=E.extendFlat({type:"linear"},J);i(le,ue);var j={x:[0,2],y:[1,3]};return le.setRange=function(){var Z=ie.sectorBBox,fe=j[ee],re=ie.radialAxis._rl,ce=(re[1]-re[0])/(1-ie.getHole(te));le.range=[Z[fe[0]]*ce,Z[fe[1]]*ce]},le.isPtWithinRange=ee==="x"&&!K?function(Z){return ie.isPtInside(Z)}:function(){return!0},le.setRange(),le.setScale(),le},H.doAutoRange=function(ue,te){var J=this,ie=J.gd,K=J.radialAxis,ee=J.getRadial(te);u(ie,K);var le=K.range;if(ee.range=le.slice(),ee._input.range=le.slice(),K._rl=[K.r2l(le[0],null,"gregorian"),K.r2l(le[1],null,"gregorian")],K.minallowed!==void 0){var j=K.r2l(K.minallowed);K._rl[0]>K._rl[1]?K._rl[1]=Math.max(K._rl[1],j):K._rl[0]=Math.max(K._rl[0],j)}if(K.maxallowed!==void 0){var Z=K.r2l(K.maxallowed);K._rl[0]<K._rl[1]?K._rl[1]=Math.min(K._rl[1],Z):K._rl[0]=Math.min(K._rl[0],Z)}},H.updateRadialAxis=function(ue,te){var J=this,ie=J.gd,K=J.layers,ee=J.radius,le=J.innerRadius,j=J.cx,Z=J.cy,fe=J.getRadial(te),re=O(J.getSector(te)[0],360),ce=J.radialAxis,xe=le<ee,Te=J.isSmith;Te||(J.fillViewInitialKey("radialaxis.angle",fe.angle),J.fillViewInitialKey("radialaxis.range",ce.range.slice()),ce.setGeometry()),ce.tickangle==="auto"&&re>90&&re<=270&&(ce.tickangle=180);var we=Te?function(rt){var ot=D(J,_([rt.x,0]));return v(ot[0]-j,ot[1]-Z)}:function(rt){return v(ce.l2p(rt.x)+le,0)},_e=Te?function(rt){return k(J,rt.x,-1/0,1/0)}:function(rt){return J.pathArc(ce.r2p(rt.x)+le)},ke=X(fe);if(J.radialTickLayout!==ke&&(K["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=ke),xe){ce.setScale();var Ne=0,Ee=Te?(ce.tickvals||[]).filter(function(rt){return rt>=0}).map(function(rt){return o.tickText(ce,rt,!0,!1)}):o.calcTicks(ce),ze=Te?Ee:o.clipEnds(ce,Ee),Ce=o.getTickSigns(ce)[2];Te&&((ce.ticks==="top"&&ce.side==="bottom"||ce.ticks==="bottom"&&ce.side==="top")&&(Ce=-Ce),ce.ticks==="top"&&ce.side==="top"&&(Ne=-ce.ticklen),ce.ticks==="bottom"&&ce.side==="bottom"&&(Ne=ce.ticklen)),o.drawTicks(ie,ce,{vals:Ee,layer:K["radial-axis"],path:o.makeTickPath(ce,0,Ce),transFn:we,crisp:!1}),o.drawGrid(ie,ce,{vals:ze,layer:K["radial-grid"],path:_e,transFn:E.noop,crisp:!1}),o.drawLabels(ie,ce,{vals:Ee,layer:K["radial-axis"],transFn:we,labelFns:o.makeLabelFns(ce,Ne)})}var Oe=J.radialAxisAngle=J.vangles?B(ne(N(fe.angle),J.vangles)):fe.angle,Le=v(j,Z),Ge=Le+T(-Oe);q(K["radial-axis"],xe&&(fe.showticklabels||fe.ticks),{transform:Ge}),q(K["radial-grid"],xe&&fe.showgrid,{transform:Te?"":Le}),q(K["radial-line"].select("line"),xe&&fe.showline,{x1:Te?-ee:le,y1:0,x2:ee,y2:0,transform:Ge}).attr("stroke-width",fe.linewidth).call(g.stroke,fe.linecolor)},H.updateRadialAxisTitle=function(ue,te,J){if(!this.isSmith){var ie=this,K=ie.gd,ee=ie.radius,le=ie.cx,j=ie.cy,Z=ie.getRadial(te),fe=ie.id+"title",re=0;if(Z.title){var ce=r.bBox(ie.layers["radial-axis"].node()).height,xe=Z.title.font.size,Te=Z.side;re=Te==="top"?xe:Te==="counterclockwise"?-(ce+xe*.4):ce+xe*.8}var we=J!==void 0?J:ie.radialAxisAngle,_e=N(we),ke=Math.cos(_e),Ne=Math.sin(_e),Ee=le+ee/2*ke+re*Ne,ze=j-ee/2*Ne+re*ke;ie.layers["radial-axis-title"]=w.draw(K,fe,{propContainer:Z,propName:ie.id+".radialaxis.title",placeholder:V(K,"Click to enter radial axis title"),attributes:{x:Ee,y:ze,"text-anchor":"middle"},transform:{rotate:-we}})}},H.updateAngularAxis=function(ue,te){var J=this,ie=J.gd,K=J.layers,ee=J.radius,le=J.innerRadius,j=J.cx,Z=J.cy,fe=J.getAngular(te),re=J.angularAxis,ce=J.isSmith;ce||(J.fillViewInitialKey("angularaxis.rotation",fe.rotation),re.setGeometry(),re.setScale());var xe=ce?function(ot){var $e=D(J,_([0,ot.x]));return Math.atan2($e[0]-j,$e[1]-Z)-Math.PI/2}:function(ot){return re.t2g(ot.x)};re.type==="linear"&&re.thetaunit==="radians"&&(re.tick0=B(re.tick0),re.dtick=B(re.dtick));var Te=function(ot){return v(j+ee*Math.cos(ot),Z-ee*Math.sin(ot))},we=ce?function(ot){var $e=D(J,_([0,ot.x]));return v($e[0],$e[1])}:function(ot){return Te(xe(ot))},_e=ce?function(ot){var $e=D(J,_([0,ot.x])),qe=Math.atan2($e[0]-j,$e[1]-Z)-Math.PI/2;return v($e[0],$e[1])+T(-B(qe))}:function(ot){var $e=xe(ot);return Te($e)+T(-B($e))},ke=ce?function(ot){return b(J,ot.x,0,1/0)}:function(ot){var $e=xe(ot),qe=Math.cos($e),ht=Math.sin($e);return"M"+[j+le*qe,Z-le*ht]+"L"+[j+ee*qe,Z-ee*ht]},Ne=o.makeLabelFns(re,0),Ee=Ne.labelStandoff,ze={};ze.xFn=function(ot){var $e=xe(ot);return Math.cos($e)*Ee},ze.yFn=function(ot){var $e=xe(ot),qe=Math.sin($e)>0?.2:1;return-Math.sin($e)*(Ee+ot.fontSize*qe)+Math.abs(Math.cos($e))*(ot.fontSize*y)},ze.anchorFn=function(ot){var $e=xe(ot),qe=Math.cos($e);return Math.abs(qe)<.1?"middle":qe>0?"start":"end"},ze.heightFn=function(ot,$e,qe){var ht=xe(ot);return-.5*(1+Math.sin(ht))*qe};var Ce=X(fe);J.angularTickLayout!==Ce&&(K["angular-axis"].selectAll("."+re._id+"tick").remove(),J.angularTickLayout=Ce);var Oe=ce?[1/0].concat(re.tickvals||[]).map(function(ot){return o.tickText(re,ot,!0,!1)}):o.calcTicks(re);ce&&(Oe[0].text="",Oe[0].fontSize*=1.75);var Le;if(te.gridshape==="linear"?(Le=Oe.map(xe),E.angleDelta(Le[0],Le[1])<0&&(Le=Le.slice().reverse())):Le=null,J.vangles=Le,re.type==="category"&&(Oe=Oe.filter(function(ot){return E.isAngleInsideSector(xe(ot),J.sectorInRad)})),re.visible){var Ge=re.ticks==="inside"?-1:1,rt=(re.linewidth||1)/2;o.drawTicks(ie,re,{vals:Oe,layer:K["angular-axis"],path:"M"+Ge*rt+",0h"+Ge*re.ticklen,transFn:_e,crisp:!1}),o.drawGrid(ie,re,{vals:Oe,layer:K["angular-grid"],path:ke,transFn:E.noop,crisp:!1}),o.drawLabels(ie,re,{vals:Oe,layer:K["angular-axis"],repositionOnUpdate:!0,transFn:we,labelFns:ze})}q(K["angular-line"].select("path"),fe.showline,{d:J.pathSubplot(),transform:v(j,Z)}).attr("stroke-width",fe.linewidth).call(g.stroke,fe.linecolor)},H.updateFx=function(ue,te){if(!this.gd._context.staticPlot){var J=!this.isSmith;J&&(this.updateAngularDrag(ue),this.updateRadialDrag(ue,te,0),this.updateRadialDrag(ue,te,1)),this.updateHoverAndMainDrag(ue)}},H.updateHoverAndMainDrag=function(ue){var te=this,J=te.isSmith,ie=te.gd,K=te.layers,ee=ue._zoomlayer,le=C.MINZOOM,j=C.OFFEDGE,Z=te.radius,fe=te.innerRadius,re=te.cx,ce=te.cy,xe=te.cxx,Te=te.cyy,we=te.sectorInRad,_e=te.vangles,ke=te.radialAxis,Ne=M.clampTiny,Ee=M.findXYatLength,ze=M.findEnclosingVertexAngles,Ce=C.cornerHalfWidth,Oe=C.cornerLen/2,Le,Ge,rt=l.makeDragger(K,"path","maindrag",ue.dragmode===!1?"none":"crosshair");d.select(rt).attr("d",te.pathSubplot()).attr("transform",v(re,ce)),rt.onmousemove=function(Tt){h.hover(ie,Tt,te.id),ie._fullLayout._lasthover=rt,ie._fullLayout._hoversubplot=te.id},rt.onmouseout=function(Tt){ie._dragging||m.unhover(ie,Tt)};var ot={element:rt,gd:ie,subplot:te.id,plotinfo:{id:te.id,xaxis:te.xaxis,yaxis:te.yaxis},xaxes:[te.xaxis],yaxes:[te.yaxis]},$e,qe,ht,vt,pt,wt,Et,nt,Fe;function We(Tt,It){return Math.sqrt(Tt*Tt+It*It)}function Ze(Tt,It){return We(Tt-xe,It-Te)}function Ye(Tt,It){return Math.atan2(Te-It,Tt-xe)}function Ie(Tt,It){return[Tt*Math.cos(It),Tt*Math.sin(-It)]}function De(Tt,It){if(Tt===0)return te.pathSector(2*Ce);var Xt=Oe/Tt,gr=It-Xt,gt=It+Xt,jt=Math.max(0,Math.min(Tt,Z)),Qt=jt-Ce,mr=jt+Ce;return"M"+Ie(Qt,gr)+"A"+[Qt,Qt]+" 0,0,0 "+Ie(Qt,gt)+"L"+Ie(mr,gt)+"A"+[mr,mr]+" 0,0,1 "+Ie(mr,gr)+"Z"}function je(Tt,It,Xt){if(Tt===0)return te.pathSector(2*Ce);var gr=Ie(Tt,It),gt=Ie(Tt,Xt),jt=Ne((gr[0]+gt[0])/2),Qt=Ne((gr[1]+gt[1])/2),mr,or;if(jt&&Qt){var mt=Qt/jt,ut=-1/mt,bt=Ee(Ce,mt,jt,Qt);mr=Ee(Oe,ut,bt[0][0],bt[0][1]),or=Ee(Oe,ut,bt[1][0],bt[1][1])}else{var St,Pt;Qt?(St=Oe,Pt=Ce):(St=Ce,Pt=Oe),mr=[[jt-St,Qt-Pt],[jt+St,Qt-Pt]],or=[[jt-St,Qt+Pt],[jt+St,Qt+Pt]]}return"M"+mr.join("L")+"L"+or.reverse().join("L")+"Z"}function Re(){ht=null,vt=null,pt=te.pathSubplot(),wt=!1;var Tt=ie._fullLayout[te.id];Et=S(Tt.bgcolor).getLuminance(),nt=l.makeZoombox(ee,Et,re,ce,pt),nt.attr("fill-rule","evenodd"),Fe=l.makeCorners(ee,re,ce),p(ie)}function pe(Tt,It){return It=Math.max(Math.min(It,Z),fe),Tt<j?Tt=0:Z-Tt<j?Tt=Z:It<j?It=0:Z-It<j&&(It=Z),Math.abs(It-Tt)>le?(Tt<It?(ht=Tt,vt=It):(ht=It,vt=Tt),!0):(ht=null,vt=null,!1)}function be(Tt,It){Tt=Tt||pt,It=It||"M0,0Z",nt.attr("d",Tt),Fe.attr("d",It),l.transitionZoombox(nt,Fe,wt,Et),wt=!0;var Xt={};Gt(Xt),ie.emit("plotly_relayouting",Xt)}function Ue(Tt,It){Tt=Tt*Le,It=It*Ge;var Xt=$e+Tt,gr=qe+It,gt=Ze($e,qe),jt=Math.min(Ze(Xt,gr),Z),Qt=Ye($e,qe),mr,or;pe(gt,jt)&&(mr=pt+te.pathSector(vt),ht&&(mr+=te.pathSector(ht)),or=De(ht,Qt)+De(vt,Qt)),be(mr,or)}function et(Tt,It,Xt,gr){var gt=M.findIntersectionXY(Xt,gr,Xt,[Tt-xe,Te-It]);return We(gt[0],gt[1])}function st(Tt,It){var Xt=$e+Tt,gr=qe+It,gt=Ye($e,qe),jt=Ye(Xt,gr),Qt=ze(gt,_e),mr=ze(jt,_e),or=et($e,qe,Qt[0],Qt[1]),mt=Math.min(et(Xt,gr,mr[0],mr[1]),Z),ut,bt;pe(or,mt)&&(ut=pt+te.pathSector(vt),ht&&(ut+=te.pathSector(ht)),bt=[je(ht,Qt[0],Qt[1]),je(vt,Qt[0],Qt[1])].join(" ")),be(ut,bt)}function lt(){if(l.removeZoombox(ie),!(ht===null||vt===null)){var Tt={};Gt(Tt),l.showDoubleClickNotifier(ie),n.call("_guiRelayout",ie,Tt)}}function Gt(Tt){var It=ke._rl,Xt=(It[1]-It[0])/(1-fe/Z)/Z,gr=[It[0]+(ht-fe)*Xt,It[0]+(vt-fe)*Xt];Tt[te.id+".radialaxis.range"]=gr}function Zt(Tt,It){var Xt=ie._fullLayout.clickmode;if(l.removeZoombox(ie),Tt===2){var gr={};for(var gt in te.viewInitial)gr[te.id+"."+gt]=te.viewInitial[gt];ie.emit("plotly_doubleclick",null),n.call("_guiRelayout",ie,gr)}Xt.indexOf("select")>-1&&Tt===1&&a(It,ie,[te.xaxis],[te.yaxis],te.id,ot),Xt.indexOf("event")>-1&&h.click(ie,It,te.id)}ot.prepFn=function(Tt,It,Xt){var gr=ie._fullLayout.dragmode,gt=rt.getBoundingClientRect();ie._fullLayout._calcInverseTransform(ie);var jt=ie._fullLayout._invTransform;Le=ie._fullLayout._invScaleX,Ge=ie._fullLayout._invScaleY;var Qt=E.apply3DTransform(jt)(It-gt.left,Xt-gt.top);if($e=Qt[0],qe=Qt[1],_e){var mr=M.findPolygonOffset(Z,we[0],we[1],_e);$e+=xe+mr[0],qe+=Te+mr[1]}switch(gr){case"zoom":ot.clickFn=Zt,J||(_e?ot.moveFn=st:ot.moveFn=Ue,ot.doneFn=lt,Re());break;case"select":case"lasso":c(Tt,It,Xt,ot,gr);break}},m.init(ot)},H.updateRadialDrag=function(ue,te,J){var ie=this,K=ie.gd,ee=ie.layers,le=ie.radius,j=ie.innerRadius,Z=ie.cx,fe=ie.cy,re=ie.radialAxis,ce=C.radialDragBoxSize,xe=ce/2;if(!re.visible)return;var Te=N(ie.radialAxisAngle),we=re._rl,_e=we[0],ke=we[1],Ne=we[J],Ee=.75*(we[1]-we[0])/(1-ie.getHole(te))/le,ze,Ce,Oe;J?(ze=Z+(le+xe)*Math.cos(Te),Ce=fe-(le+xe)*Math.sin(Te),Oe="radialdrag"):(ze=Z+(j-xe)*Math.cos(Te),Ce=fe-(j-xe)*Math.sin(Te),Oe="radialdrag-inner");var Le=l.makeRectDragger(ee,Oe,"crosshair",-xe,-xe,ce,ce),Ge={element:Le,gd:K};ue.dragmode===!1&&(Ge.dragmode=!1),q(d.select(Le),re.visible&&j<le,{transform:v(ze,Ce)});var rt,ot,$e;function qe(Et,nt){if(rt)rt(Et,nt);else{var Fe=[Et,-nt],We=[Math.cos(Te),Math.sin(Te)],Ze=Math.abs(E.dot(Fe,We)/Math.sqrt(E.dot(Fe,Fe)));isNaN(Ze)||(rt=Ze<.5?pt:wt)}var Ye={};ht(Ye),K.emit("plotly_relayouting",Ye)}function ht(Et){ot!==null?Et[ie.id+".radialaxis.angle"]=ot:$e!==null&&(Et[ie.id+".radialaxis.range["+J+"]"]=$e)}function vt(){ot!==null?n.call("_guiRelayout",K,ie.id+".radialaxis.angle",ot):$e!==null&&n.call("_guiRelayout",K,ie.id+".radialaxis.range["+J+"]",$e)}function pt(Et,nt){if(J!==0){var Fe=ze+Et,We=Ce+nt;ot=Math.atan2(fe-We,Fe-Z),ie.vangles&&(ot=ne(ot,ie.vangles)),ot=B(ot);var Ze=v(Z,fe)+T(-ot);ee["radial-axis"].attr("transform",Ze),ee["radial-line"].select("line").attr("transform",Ze);var Ye=ie.gd._fullLayout,Ie=Ye[ie.id];ie.updateRadialAxisTitle(Ye,Ie,ot)}}function wt(Et,nt){var Fe=E.dot([Et,-nt],[Math.cos(Te),Math.sin(Te)]);if($e=Ne-Ee*Fe,Ee>0!=(J?$e>_e:$e<ke)){$e=null;return}var We=K._fullLayout,Ze=We[ie.id];re.range[J]=$e,re._rl[J]=$e,ie.updateRadialAxis(We,Ze),ie.xaxis.setRange(),ie.xaxis.setScale(),ie.yaxis.setRange(),ie.yaxis.setScale();var Ye=!1;for(var Ie in ie.traceHash){var De=ie.traceHash[Ie],je=E.filterVisible(De),Re=De[0][0].trace._module;Re.plot(K,ie,je,Ze),n.traceIs(Ie,"gl")&&je.length&&(Ye=!0)}Ye&&(A(K),P(K))}Ge.prepFn=function(){rt=null,ot=null,$e=null,Ge.moveFn=qe,Ge.doneFn=vt,p(K)},Ge.clampFn=function(Et,nt){return Math.sqrt(Et*Et+nt*nt)<C.MINDRAG&&(Et=0,nt=0),[Et,nt]},m.init(Ge)},H.updateAngularDrag=function(ue){var te=this,J=te.gd,ie=te.layers,K=te.radius,ee=te.angularAxis,le=te.cx,j=te.cy,Z=te.cxx,fe=te.cyy,re=C.angularDragBoxSize,ce=l.makeDragger(ie,"path","angulardrag",ue.dragmode===!1?"none":"move"),xe={element:ce,gd:J};ue.dragmode===!1?xe.dragmode=!1:d.select(ce).attr("d",te.pathAnnulus(K,K+re)).attr("transform",v(le,j)).call(x,"move");function Te($e,qe){return Math.atan2(fe+re-qe,$e-Z-re)}var we=ie.frontplot.select(".scatterlayer").selectAll(".trace"),_e=we.selectAll(".point"),ke=we.selectAll(".textpoint"),Ne,Ee,ze,Ce,Oe,Le;function Ge($e,qe){var ht=te.gd._fullLayout,vt=ht[te.id],pt=Ne+$e*ue._invScaleX,wt=Ee+qe*ue._invScaleY,Et=Te(pt,wt),nt=B(Et-Le);if(Ce=ze+nt,ie.frontplot.attr("transform",v(te.xOffset2,te.yOffset2)+T([-nt,Z,fe])),te.vangles){Oe=te.radialAxisAngle+nt;var Fe=v(le,j)+T(-nt),We=v(le,j)+T(-Oe);ie.bg.attr("transform",Fe),ie["radial-grid"].attr("transform",Fe),ie["radial-axis"].attr("transform",We),ie["radial-line"].select("line").attr("transform",We),te.updateRadialAxisTitle(ht,vt,Oe)}else te.clipPaths.forTraces.select("path").attr("transform",v(Z,fe)+T(nt));_e.each(function(){var pe=d.select(this),be=r.getTranslate(pe);pe.attr("transform",v(be.x,be.y)+T([nt]))}),ke.each(function(){var pe=d.select(this),be=pe.select("text"),Ue=r.getTranslate(pe);pe.attr("transform",T([nt,be.attr("x"),be.attr("y")])+v(Ue.x,Ue.y))}),ee.rotation=E.modHalf(Ce,360),te.updateAngularAxis(ht,vt),te._hasClipOnAxisFalse&&!E.isFullCircle(te.sectorInRad)&&we.call(r.hideOutsideRangePoints,te);var Ze=!1;for(var Ye in te.traceHash)if(n.traceIs(Ye,"gl")){var Ie=te.traceHash[Ye],De=E.filterVisible(Ie),je=Ie[0][0].trace._module;je.plot(J,te,De,vt),De.length&&(Ze=!0)}Ze&&(A(J),P(J));var Re={};rt(Re),J.emit("plotly_relayouting",Re)}function rt($e){$e[te.id+".angularaxis.rotation"]=Ce,te.vangles&&($e[te.id+".radialaxis.angle"]=Oe)}function ot(){ke.select("text").attr("transform",null);var $e={};rt($e),n.call("_guiRelayout",J,$e)}xe.prepFn=function($e,qe,ht){var vt=ue[te.id];ze=vt.angularaxis.rotation;var pt=ce.getBoundingClientRect();Ne=qe-pt.left,Ee=ht-pt.top,J._fullLayout._calcInverseTransform(J);var wt=E.apply3DTransform(ue._invTransform)(Ne,Ee);Ne=wt[0],Ee=wt[1],Le=Te(Ne,Ee),xe.moveFn=Ge,xe.doneFn=ot,p(J)},te.vangles&&!E.isFullCircle(te.sectorInRad)&&(xe.prepFn=E.noop,x(d.select(ce),null)),m.init(xe)},H.isPtInside=function(ue){if(this.isSmith)return!0;var te=this.sectorInRad,J=this.vangles,ie=this.angularAxis.c2g(ue.theta),K=this.radialAxis,ee=K.c2l(ue.r),le=K._rl,j=J?M.isPtInsidePolygon:E.isPtInsideSector;return j(ee,ie,le,te,J)},H.pathArc=function(ue){var te=this.sectorInRad,J=this.vangles,ie=J?M.pathPolygon:E.pathArc;return ie(ue,te[0],te[1],J)},H.pathSector=function(ue){var te=this.sectorInRad,J=this.vangles,ie=J?M.pathPolygon:E.pathSector;return ie(ue,te[0],te[1],J)},H.pathAnnulus=function(ue,te){var J=this.sectorInRad,ie=this.vangles,K=ie?M.pathPolygonAnnulus:E.pathAnnulus;return K(ue,te,J[0],J[1],ie)},H.pathSubplot=function(){var ue=this.innerRadius,te=this.radius;return ue?this.pathAnnulus(ue,te):this.pathSector(te)},H.fillViewInitialKey=function(ue,te){ue in this.viewInitial||(this.viewInitial[ue]=te)};function X(ue){var te=ue.ticks+String(ue.ticklen)+String(ue.showticklabels);return"side"in ue&&(te+=ue.side),te}function $(ue){var te=ue[0],J=ue[1],ie=J-te,K=O(te,360),ee=K+ie,le=Math.cos(N(K)),j=Math.sin(N(K)),Z=Math.cos(N(ee)),fe=Math.sin(N(ee)),re,ce,xe,Te;return K<=90&&ee>=90||K>90&&ee>=450?Te=1:j<=0&&fe<=0?Te=0:Te=Math.max(j,fe),K<=180&&ee>=180||K>180&&ee>=540?re=-1:le>=0&&Z>=0?re=0:re=Math.min(le,Z),K<=270&&ee>=270||K>270&&ee>=630?ce=-1:j>=0&&fe>=0?ce=0:ce=Math.min(j,fe),ee>=360?xe=1:le<=0&&Z<=0?xe=0:xe=Math.max(le,Z),[re,ce,xe,Te]}function ne(ue,te){var J=function(K){return E.angleDist(ue,K)},ie=E.findIndexOfMin(te,J);return te[ie]}function q(ue,te,J){return te?(ue.attr("display",null),ue.attr(J)):ue&&ue.attr("display","none"),ue}},57696:function(U,F,e){var d=e(3400),S=e(78344),n=d.deg2rad,E=d.rad2deg;U.exports=function(o,i,f){switch(S(o,f),o._id){case"x":case"radialaxis":T(o,i);break;case"angularaxis":r(o,i);break}};function T(t,o){var i=o._subplot;t.setGeometry=function(){var f=t._rl[0],u=t._rl[1],l=i.innerRadius,m=(i.radius-l)/(u-f),h=l/m,w=f>u?function(c){return c<=0}:function(c){return c>=0};t.c2g=function(c){var a=t.c2l(c)-f;return(w(a)?a:0)+h},t.g2c=function(c){return t.l2c(c+f-h)},t.g2p=function(c){return c*m},t.c2p=function(c){return t.g2p(t.c2g(c))}}}function v(t,o){return o==="degrees"?n(t):t}function g(t,o){return o==="degrees"?E(t):t}function r(t,o){var i=t.type;if(i==="linear"){var f=t.d2c,u=t.c2d;t.d2c=function(l,m){return v(f(l),m)},t.c2d=function(l,m){return u(g(l,m))}}t.makeCalcdata=function(l,m){var h=l[m],w=l._length,c,a,p=function(C){return t.d2c(C,l.thetaunit)};if(h)for(c=new Array(w),a=0;a<w;a++)c[a]=p(h[a]);else{var x=m+"0",A="d"+m,P=x in l?p(l[x]):0,y=l[A]?p(l[A]):(t.period||2*Math.PI)/w;for(c=new Array(w),a=0;a<w;a++)c[a]=P+a*y}return c},t.setGeometry=function(){var l=o.sector,m=l.map(n),h={clockwise:-1,counterclockwise:1}[t.direction],w=n(t.rotation),c=function(M){return h*M+w},a=function(M){return(M-w)/h},p,x,A,P;switch(i){case"linear":x=p=d.identity,P=n,A=E,t.range=d.isFullCircle(m)?[l[0],l[0]+360]:m.map(a).map(E);break;case"category":var y=t._categories.length,C=t.period?Math.max(t.period,y):y;C===0&&(C=1),x=P=function(M){return M*2*Math.PI/C},p=A=function(M){return M*C/Math.PI/2},t.range=[0,C];break}t.c2g=function(M){return c(x(M))},t.g2c=function(M){return p(a(M))},t.t2g=function(M){return c(P(M))},t.g2t=function(M){return A(a(M))}}}},55012:function(U){U.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(U){function F(T){return T<0?-1:T>0?1:0}function e(T){var v=T[0],g=T[1];if(!isFinite(v)||!isFinite(g))return[1,0];var r=(v+1)*(v+1)+g*g;return[(v*v+g*g-1)/r,2*g/r]}function d(T,v){var g=v[0],r=v[1];return[g*T.radius+T.cx,-r*T.radius+T.cy]}function S(T,v){return v*T.radius}function n(T,v,g,r){var t=d(T,e([g,v])),o=t[0],i=t[1],f=d(T,e([r,v])),u=f[0],l=f[1];if(v===0)return["M"+o+","+i,"L"+u+","+l].join(" ");var m=S(T,1/Math.abs(v));return["M"+o+","+i,"A"+m+","+m+" 0 0,"+(v<0?1:0)+" "+u+","+l].join(" ")}function E(T,v,g,r){var t=S(T,1/(v+1)),o=d(T,e([v,g])),i=o[0],f=o[1],u=d(T,e([v,r])),l=u[0],m=u[1];if(F(g)!==F(r)){var h=d(T,e([v,0])),w=h[0],c=h[1];return["M"+i+","+f,"A"+t+","+t+" 0 0,"+(0<g?0:1)+" "+w+","+c,"A"+t+","+t+" 0 0,"+(r<0?0:1)+l+","+m].join(" ")}return["M"+i+","+f,"A"+t+","+t+" 0 0,"+(r<g?0:1)+" "+l+","+m].join(" ")}U.exports={smith:e,reactanceArc:n,resistanceArc:E,smithTransform:d}},47788:function(U,F,e){var d=e(84888).KY,S=e(3400).counterRegex,n=e(62400),E=e(55012),T=E.attr,v=E.name,g=S(v),r={};r[T]={valType:"subplotid",dflt:v,editType:"calc"};function t(i){for(var f=i._fullLayout,u=i.calcdata,l=f._subplots[v],m=0;m<l.length;m++){var h=l[m],w=d(u,v,h),c=f[h]._subplot;c||(c=n(i,h,!0),f[h]._subplot=c),c.plot(w,f,i._promises)}}function o(i,f,u,l){for(var m=l._subplots[v]||[],h=0;h<m.length;h++){var w=m[h],c=l[w]._subplot;if(!f[w]&&c){c.framework.remove();for(var a in c.clipPaths)c.clipPaths[a].remove()}}}U.exports={attr:T,name:v,idRoot:v,idRegex:g,attrRegex:g,attributes:r,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:t,clean:o,toSVG:e(57952).toSVG}},6183:function(U,F,e){var d=e(22548),S=e(94724),n=e(86968).u,E=e(3400).extendFlat,T=e(67824).overrideAll,v=T({color:S.color,showline:E({},S.showline,{dflt:!0}),linecolor:S.linecolor,linewidth:S.linewidth,showgrid:E({},S.showgrid,{dflt:!0}),gridcolor:S.gridcolor,gridwidth:S.gridwidth,griddash:S.griddash},"plot","from-root"),g=T({ticklen:S.ticklen,tickwidth:E({},S.tickwidth,{dflt:2}),tickcolor:S.tickcolor,showticklabels:S.showticklabels,labelalias:S.labelalias,showtickprefix:S.showtickprefix,tickprefix:S.tickprefix,showticksuffix:S.showticksuffix,ticksuffix:S.ticksuffix,tickfont:S.tickfont,tickformat:S.tickformat,hoverformat:S.hoverformat,layer:S.layer},"plot","from-root"),r=E({visible:E({},S.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:E({},S.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},v,g),t=E({visible:E({},S.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:S.ticks,editType:"calc"},v,g);U.exports={domain:n({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:d.background},realaxis:r,imaginaryaxis:t,editType:"calc"}},22836:function(U,F,e){var d=e(3400),S=e(76308),n=e(31780),E=e(168),T=e(84888).op,v=e(42568),g=e(95936),r=e(42136),t=e(78344),o=e(6183),i=e(55012),f=i.axisNames,u=m(function(h){return d.isTypedArray(h)&&(h=Array.from(h)),h.slice().reverse().map(function(w){return-w}).concat([0]).concat(h)},String);function l(h,w,c,a){var p=c("bgcolor");a.bgColor=S.combine(p,a.paper_bgcolor);var x=T(a.fullData,i.name,a.id),A=a.layoutOut,P;function y(H,X){return c(P+"."+H,X)}for(var C=0;C<f.length;C++){P=f[C],d.isPlainObject(h[P])||(h[P]={});var M=h[P],s=n.newContainer(w,P);s._id=s._name=P,s._attr=a.id+"."+P,s._traceIndices=x.map(function(H){return H._expandedIndex});var _=y("visible");if(s.type="linear",t(s,A),v(M,s,y,s.type),_){var b=P==="realaxis";if(b&&y("side"),b)y("tickvals");else{var k=u(w.realaxis.tickvals||o.realaxis.tickvals.dflt);y("tickvals",k)}d.isTypedArray(s.tickvals)&&(s.tickvals=Array.from(s.tickvals));var D,V,O,N,B=a.font||{};_&&(D=y("color"),V=D===M.color?D:B.color,O=B.size,N=B.family),g(M,s,y,s.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!b,noExp:!0,font:{color:V,size:O,family:N}}),d.coerce2(h,w,o,P+".ticklen"),d.coerce2(h,w,o,P+".tickwidth"),d.coerce2(h,w,o,P+".tickcolor",w.color);var z=y("ticks");z||(delete w[P].ticklen,delete w[P].tickwidth,delete w[P].tickcolor),r(M,s,y,{dfltColor:D,bgColor:a.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o[P]}),y("layer")}y("hoverformat"),delete s.type,s._input=M}}U.exports=function(w,c,a){E(w,c,a,{noUirevision:!0,type:i.name,attributes:o,handleDefaults:l,font:c.font,paper_bgcolor:c.paper_bgcolor,fullData:a,layoutOut:c})};function m(h,w){var c={};return function(a){var p=w?w(a):a;if(p in c)return c[p];var x=h(a);return c[p]=x,x}}},168:function(U,F,e){var d=e(3400),S=e(31780),n=e(86968).Q;U.exports=function(T,v,g,r){var t=r.type,o=r.attributes,i=r.handleDefaults,f=r.partition||"x",u=v._subplots[t],l=u.length,m=l&&u[0].replace(/\d+$/,""),h,w;function c(A,P){return d.coerce(h,w,o,A,P)}for(var a=0;a<l;a++){var p=u[a];T[p]?h=T[p]:h=T[p]={},w=S.newContainer(v,p,m),r.noUirevision||c("uirevision",v.uirevision);var x={};x[f]=[a/l,(a+1)/l],n(w,v,c,x),r.id=p,i(h,w,c,r)}}},21776:function(U,F,e){var d=e(26880);d.FORMAT_LINK,d.DATE_FORMAT_LINK;function S(n){var E=n.description?" "+n.description:"",T=n.keys||[];if(T.length>0){for(var v=[],g=0;g<T.length;g++)v[g]="`"+T[g]+"`";E=E+"Finally, the template string has access to ",T.length===1?E=E+"variable "+v[0]:E=E+"variables "+v.slice(0,-1).join(", ")+" and "+v.slice(-1)+"."}return E}F.Ks=function(n,E){n=n||{},E=E||{},S(E);var T={valType:"string",dflt:"",editType:n.editType||"none"};return n.arrayOk!==!1&&(T.arrayOk=!0),T},F.Gw=function(n,E){n=n||{},E=E||{},S(E);var T={valType:"string",dflt:"",editType:n.editType||"calc"};return n.arrayOk!==!1&&(T.arrayOk=!0),T},F.ye=function(n,E){n=n||{},E=E||{},n.newshape,S(E);var T={valType:"string",dflt:"",editType:n.editType||"arraydraw"};return T}},19352:function(U,F,e){var d=e(24696),S=e(84888).KY,n=e(3400).counterRegex,E="ternary";F.name=E;var T=F.attr="subplot";F.idRoot=E,F.idRegex=F.attrRegex=n(E);var v=F.attributes={};v[T]={valType:"subplotid",dflt:"ternary",editType:"calc"},F.layoutAttributes=e(86379),F.supplyLayoutDefaults=e(38536),F.plot=function(r){for(var t=r._fullLayout,o=r.calcdata,i=t._subplots[E],f=0;f<i.length;f++){var u=i[f],l=S(o,E,u),m=t[u]._subplot;m||(m=new d({id:u,graphDiv:r,container:t._ternarylayer.node()},t),t[u]._subplot=m),m.plot(l,t,r._promises)}},F.clean=function(g,r,t,o){for(var i=o._subplots[E]||[],f=0;f<i.length;f++){var u=i[f],l=o[u]._subplot;!r[u]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(U,F,e){var d=e(22548),S=e(86968).u,n=e(94724),E=e(67824).overrideAll,T=e(92880).extendFlat,v={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.minor.tickmode,nticks:T({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,labelalias:n.labelalias,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:T({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:T({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth,griddash:n.griddash,layer:n.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}},g=U.exports=E({domain:S({name:"ternary"}),bgcolor:{valType:"color",dflt:d.background},sum:{valType:"number",dflt:1,min:0},aaxis:v,baxis:v,caxis:v},"plot","from-root");g.uirevision={valType:"any",editType:"none"},g.aaxis.uirevision=g.baxis.uirevision=g.caxis.uirevision={valType:"any",editType:"none"}},38536:function(U,F,e){var d=e(76308),S=e(31780),n=e(3400),E=e(168),T=e(95936),v=e(42568),g=e(25404),r=e(26332),t=e(42136),o=e(86379),i=["aaxis","baxis","caxis"];U.exports=function(m,h,w){E(m,h,w,{type:"ternary",attributes:o,handleDefaults:f,font:h.font,paper_bgcolor:h.paper_bgcolor})};function f(l,m,h,w){var c=h("bgcolor"),a=h("sum");w.bgColor=d.combine(c,w.paper_bgcolor);for(var p,x,A,P=0;P<i.length;P++)p=i[P],x=l[p]||{},A=S.newContainer(m,p),A._name=p,u(x,A,w,m);var y=m.aaxis,C=m.baxis,M=m.caxis;y.min+C.min+M.min>=a&&(y.min=0,C.min=0,M.min=0,l.aaxis&&delete l.aaxis.min,l.baxis&&delete l.baxis.min,l.caxis&&delete l.caxis.min)}function u(l,m,h,w){var c=o[m._name];function a(s,_){return n.coerce(l,m,c,s,_)}a("uirevision",w.uirevision),m.type="linear";var p=a("color"),x=p!==c.color.dflt?p:h.font.color,A=m._name,P=A.charAt(0).toUpperCase(),y="Component "+P,C=a("title.text",y);m._hovertitle=C===y?C:P,n.coerceFont(a,"title.font",h.font,{overrideDflt:{size:n.bigFont(h.font.size),color:x}}),a("min"),r(l,m,a,"linear"),v(l,m,a,"linear"),T(l,m,a,"linear",{noAutotickangles:!0}),g(l,m,a,{outerTicks:!0});var M=a("showticklabels");M&&(n.coerceFont(a,"tickfont",h.font,{overrideDflt:{color:x}}),a("tickangle"),a("tickformat")),t(l,m,a,{dfltColor:p,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c}),a("hoverformat"),a("layer")}},24696:function(U,F,e){var d=e(33428),S=e(49760),n=e(24040),E=e(3400),T=E.strTranslate,v=E._,g=e(76308),r=e(43616),t=e(78344),o=e(92880).extendFlat,i=e(7316),f=e(54460),u=e(86476),l=e(93024),m=e(72760),h=m.freeMode,w=m.rectMode,c=e(81668),a=e(22676).prepSelect,p=e(22676).selectOnClick,x=e(22676).clearOutline,A=e(22676).clearSelectionsCache,P=e(33816);function y(B,z){this.id=B.id,this.graphDiv=B.graphDiv,this.init(z),this.makeFramework(z),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}U.exports=y;var C=y.prototype;C.init=function(B){this.container=B._ternarylayer,this.defs=B._defs,this.layoutId=B._uid,this.traceHash={},this.layers={}},C.plot=function(B,z){var H=this,X=z[H.id],$=z._size;H._hasClipOnAxisFalse=!1;for(var ne=0;ne<B.length;ne++){var q=B[ne][0].trace;if(q.cliponaxis===!1){H._hasClipOnAxisFalse=!0;break}}H.updateLayers(X),H.adjustLayout(X,$),i.generalUpdatePerTraceModule(H.graphDiv,H,B,X),H.layers.plotbg.select("path").call(g.fill,X.bgcolor)},C.makeFramework=function(B){var z=this,H=z.graphDiv,X=B[z.id],$=z.clipId="clip"+z.layoutId+z.id,ne=z.clipIdRelative="clip-relative"+z.layoutId+z.id;z.clipDef=E.ensureSingleById(B._clips,"clipPath",$,function(q){q.append("path").attr("d","M0,0Z")}),z.clipDefRelative=E.ensureSingleById(B._clips,"clipPath",ne,function(q){q.append("path").attr("d","M0,0Z")}),z.plotContainer=E.ensureSingle(z.container,"g",z.id),z.updateLayers(X),r.setClipUrl(z.layers.backplot,$,H),r.setClipUrl(z.layers.grids,$,H)},C.updateLayers=function(B){var z=this,H=z.layers,X=["draglayer","plotbg","backplot","grids"];B.aaxis.layer==="below traces"&&X.push("aaxis","aline"),B.baxis.layer==="below traces"&&X.push("baxis","bline"),B.caxis.layer==="below traces"&&X.push("caxis","cline"),X.push("frontplot"),B.aaxis.layer==="above traces"&&X.push("aaxis","aline"),B.baxis.layer==="above traces"&&X.push("baxis","bline"),B.caxis.layer==="above traces"&&X.push("caxis","cline");var $=z.plotContainer.selectAll("g.toplevel").data(X,String),ne=["agrid","bgrid","cgrid"];$.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var ue=d.select(this);H[q]=ue,q==="frontplot"?ue.append("g").classed("scatterlayer",!0):q==="backplot"?ue.append("g").classed("maplayer",!0):q==="plotbg"?ue.append("path").attr("d","M0,0Z"):q==="aline"||q==="bline"||q==="cline"?ue.append("path"):q==="grids"&&ne.forEach(function(te){H[te]=ue.append("g").classed("grid "+te,!0)})}),$.order()};var M=Math.sqrt(4/3);C.adjustLayout=function(B,z){var H=this,X=B.domain,$=(X.x[0]+X.x[1])/2,ne=(X.y[0]+X.y[1])/2,q=X.x[1]-X.x[0],ue=X.y[1]-X.y[0],te=q*z.w,J=ue*z.h,ie=B.sum,K=B.aaxis.min,ee=B.baxis.min,le=B.caxis.min,j,Z,fe,re,ce,xe;te>M*J?(re=J,fe=re*M):(fe=te,re=fe/M),ce=q*fe/te,xe=ue*re/J,j=z.l+z.w*$-fe/2,Z=z.t+z.h*(1-ne)-re/2,H.x0=j,H.y0=Z,H.w=fe,H.h=re,H.sum=ie,H.xaxis={type:"linear",range:[K+2*le-ie,ie-K-2*ee],domain:[$-ce/2,$+ce/2],_id:"x"},t(H.xaxis,H.graphDiv._fullLayout),H.xaxis.setScale(),H.xaxis.isPtWithinRange=function(Ge){return Ge.a>=H.aaxis.range[0]&&Ge.a<=H.aaxis.range[1]&&Ge.b>=H.baxis.range[1]&&Ge.b<=H.baxis.range[0]&&Ge.c>=H.caxis.range[1]&&Ge.c<=H.caxis.range[0]},H.yaxis={type:"linear",range:[K,ie-ee-le],domain:[ne-xe/2,ne+xe/2],_id:"y"},t(H.yaxis,H.graphDiv._fullLayout),H.yaxis.setScale(),H.yaxis.isPtWithinRange=function(){return!0};var Te=H.yaxis.domain[0],we=H.aaxis=o({},B.aaxis,{range:[K,ie-ee-le],side:"left",tickangle:(+B.aaxis.tickangle||0)-30,domain:[Te,Te+xe*M],anchor:"free",position:0,_id:"y",_length:fe});t(we,H.graphDiv._fullLayout),we.setScale();var _e=H.baxis=o({},B.baxis,{range:[ie-K-le,ee],side:"bottom",domain:H.xaxis.domain,anchor:"free",position:0,_id:"x",_length:fe});t(_e,H.graphDiv._fullLayout),_e.setScale();var ke=H.caxis=o({},B.caxis,{range:[ie-K-ee,le],side:"right",tickangle:(+B.caxis.tickangle||0)+30,domain:[Te,Te+xe*M],anchor:"free",position:0,_id:"y",_length:fe});t(ke,H.graphDiv._fullLayout),ke.setScale();var Ne="M"+j+","+(Z+re)+"h"+fe+"l-"+fe/2+",-"+re+"Z";H.clipDef.select("path").attr("d",Ne),H.layers.plotbg.select("path").attr("d",Ne);var Ee="M0,"+re+"h"+fe+"l-"+fe/2+",-"+re+"Z";H.clipDefRelative.select("path").attr("d",Ee);var ze=T(j,Z);H.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze),H.clipDefRelative.select("path").attr("transform",null);var Ce=T(j-_e._offset,Z+re);H.layers.baxis.attr("transform",Ce),H.layers.bgrid.attr("transform",Ce);var Oe=T(j+fe/2,Z)+"rotate(30)"+T(0,-we._offset);H.layers.aaxis.attr("transform",Oe),H.layers.agrid.attr("transform",Oe);var Le=T(j+fe/2,Z)+"rotate(-30)"+T(0,-ke._offset);H.layers.caxis.attr("transform",Le),H.layers.cgrid.attr("transform",Le),H.drawAxes(!0),H.layers.aline.select("path").attr("d",we.showline?"M"+j+","+(Z+re)+"l"+fe/2+",-"+re:"M0,0").call(g.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),H.layers.bline.select("path").attr("d",_e.showline?"M"+j+","+(Z+re)+"h"+fe:"M0,0").call(g.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),H.layers.cline.select("path").attr("d",ke.showline?"M"+(j+fe/2)+","+Z+"l"+fe/2+","+re:"M0,0").call(g.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),H.graphDiv._context.staticPlot||H.initInteractions(),r.setClipUrl(H.layers.frontplot,H._hasClipOnAxisFalse?null:H.clipId,H.graphDiv)},C.drawAxes=function(B){var z=this,H=z.graphDiv,X=z.id.substr(7)+"title",$=z.layers,ne=z.aaxis,q=z.baxis,ue=z.caxis;if(z.drawAx(ne),z.drawAx(q),z.drawAx(ue),B){var te=Math.max(ne.showticklabels?ne.tickfont.size/2:0,(ue.showticklabels?ue.tickfont.size*.75:0)+(ue.ticks==="outside"?ue.ticklen*.87:0)),J=(q.showticklabels?q.tickfont.size:0)+(q.ticks==="outside"?q.ticklen:0)+3;$["a-title"]=c.draw(H,"a"+X,{propContainer:ne,propName:z.id+".aaxis.title",placeholder:v(H,"Click to enter Component A title"),attributes:{x:z.x0+z.w/2,y:z.y0-ne.title.font.size/3-te,"text-anchor":"middle"}}),$["b-title"]=c.draw(H,"b"+X,{propContainer:q,propName:z.id+".baxis.title",placeholder:v(H,"Click to enter Component B title"),attributes:{x:z.x0-J,y:z.y0+z.h+q.title.font.size*.83+J,"text-anchor":"middle"}}),$["c-title"]=c.draw(H,"c"+X,{propContainer:ue,propName:z.id+".caxis.title",placeholder:v(H,"Click to enter Component C title"),attributes:{x:z.x0+z.w+J,y:z.y0+z.h+ue.title.font.size*.83+J,"text-anchor":"middle"}})}},C.drawAx=function(B){var z=this,H=z.graphDiv,X=B._name,$=X.charAt(0),ne=B._id,q=z.layers[X],ue=30,te=$+"tickLayout",J=s(B);z[te]!==J&&(q.selectAll("."+ne+"tick").remove(),z[te]=J),B.setScale();var ie=f.calcTicks(B),K=f.clipEnds(B,ie),ee=f.makeTransTickFn(B),le=f.getTickSigns(B)[2],j=E.deg2rad(ue),Z=le*(B.linewidth||1)/2,fe=le*B.ticklen,re=z.w,ce=z.h,xe=$==="b"?"M0,"+Z+"l"+Math.sin(j)*fe+","+Math.cos(j)*fe:"M"+Z+",0l"+Math.cos(j)*fe+","+-Math.sin(j)*fe,Te={a:"M0,0l"+ce+",-"+re/2,b:"M0,0l-"+re/2+",-"+ce,c:"M0,0l-"+ce+","+re/2}[$];f.drawTicks(H,B,{vals:B.ticks==="inside"?K:ie,layer:q,path:xe,transFn:ee,crisp:!1}),f.drawGrid(H,B,{vals:K,layer:z.layers[$+"grid"],path:Te,transFn:ee,crisp:!1}),f.drawLabels(H,B,{vals:ie,layer:q,transFn:ee,labelFns:f.makeLabelFns(B,0,ue)})};function s(B){return B.ticks+String(B.ticklen)+String(B.showticklabels)}var _=P.MINZOOM/2+.87,b="m-0.87,.5h"+_+"v3h-"+(_+5.2)+"l"+(_/2+2.6)+",-"+(_*.87+4.5)+"l2.6,1.5l-"+_/2+","+_*.87+"Z",k="m0.87,.5h-"+_+"v3h"+(_+5.2)+"l-"+(_/2+2.6)+",-"+(_*.87+4.5)+"l-2.6,1.5l"+_/2+","+_*.87+"Z",D="m0,1l"+_/2+","+_*.87+"l2.6,-1.5l-"+(_/2+2.6)+",-"+(_*.87+4.5)+"l-"+(_/2+2.6)+","+(_*.87+4.5)+"l2.6,1.5l"+_/2+",-"+_*.87+"Z",V="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",O=!0;C.clearOutline=function(){A(this.dragOptions),x(this.dragOptions.gd)},C.initInteractions=function(){var B=this,z=B.layers.plotbg.select("path").node(),H=B.graphDiv,X=H._fullLayout._zoomlayer,$,ne;this.dragOptions={element:z,gd:H,plotinfo:{id:B.id,domain:H._fullLayout[B.id].domain,xaxis:B.xaxis,yaxis:B.yaxis},subplot:B.id,prepFn:function(Ce,Oe,Le){B.dragOptions.xaxes=[B.xaxis],B.dragOptions.yaxes=[B.yaxis],$=H._fullLayout._invScaleX,ne=H._fullLayout._invScaleY;var Ge=B.dragOptions.dragmode=H._fullLayout.dragmode;h(Ge)?B.dragOptions.minDrag=1:B.dragOptions.minDrag=void 0,Ge==="zoom"?(B.dragOptions.moveFn=_e,B.dragOptions.clickFn=re,B.dragOptions.doneFn=ke,ce(Ce,Oe,Le)):Ge==="pan"?(B.dragOptions.moveFn=Ee,B.dragOptions.clickFn=re,B.dragOptions.doneFn=ze,Ne(),B.clearOutline(H)):(w(Ge)||h(Ge))&&a(Ce,Oe,Le,B.dragOptions,Ge)}};var q,ue,te,J,ie,K,ee,le,j,Z;function fe(Ce){var Oe={};return Oe[B.id+".aaxis.min"]=Ce.a,Oe[B.id+".baxis.min"]=Ce.b,Oe[B.id+".caxis.min"]=Ce.c,Oe}function re(Ce,Oe){var Le=H._fullLayout.clickmode;N(H),Ce===2&&(H.emit("plotly_doubleclick",null),n.call("_guiRelayout",H,fe({a:0,b:0,c:0}))),Le.indexOf("select")>-1&&Ce===1&&p(Oe,H,[B.xaxis],[B.yaxis],B.id,B.dragOptions),Le.indexOf("event")>-1&&l.click(H,Oe,B.id)}function ce(Ce,Oe,Le){var Ge=z.getBoundingClientRect();q=Oe-Ge.left,ue=Le-Ge.top,H._fullLayout._calcInverseTransform(H);var rt=H._fullLayout._invTransform,ot=E.apply3DTransform(rt)(q,ue);q=ot[0],ue=ot[1],te={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]},ie=te,J=B.aaxis.range[1]-te.a,K=S(B.graphDiv._fullLayout[B.id].bgcolor).getLuminance(),ee="M0,"+B.h+"L"+B.w/2+", 0L"+B.w+","+B.h+"Z",le=!1,j=X.append("path").attr("class","zoombox").attr("transform",T(B.x0,B.y0)).style({fill:K>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ee),Z=X.append("path").attr("class","zoombox-corners").attr("transform",T(B.x0,B.y0)).style({fill:g.background,stroke:g.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),B.clearOutline(H)}function xe(Ce,Oe){return 1-Oe/B.h}function Te(Ce,Oe){return 1-(Ce+(B.h-Oe)/Math.sqrt(3))/B.w}function we(Ce,Oe){return(Ce-(B.h-Oe)/Math.sqrt(3))/B.w}function _e(Ce,Oe){var Le=q+Ce*$,Ge=ue+Oe*ne,rt=Math.max(0,Math.min(1,xe(q,ue),xe(Le,Ge))),ot=Math.max(0,Math.min(1,Te(q,ue),Te(Le,Ge))),$e=Math.max(0,Math.min(1,we(q,ue),we(Le,Ge))),qe=(rt/2+$e)*B.w,ht=(1-rt/2-ot)*B.w,vt=(qe+ht)/2,pt=ht-qe,wt=(1-rt)*B.h,Et=wt-pt/M;pt<P.MINZOOM?(ie=te,j.attr("d",ee),Z.attr("d","M0,0Z")):(ie={a:te.a+rt*J,b:te.b+ot*J,c:te.c+$e*J},j.attr("d",ee+"M"+qe+","+wt+"H"+ht+"L"+vt+","+Et+"L"+qe+","+wt+"Z"),Z.attr("d","M"+q+","+ue+V+"M"+qe+","+wt+b+"M"+ht+","+wt+k+"M"+vt+","+Et+D)),le||(j.transition().style("fill",K>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Z.transition().style("opacity",1).duration(200),le=!0),H.emit("plotly_relayouting",fe(ie))}function ke(){N(H),ie!==te&&(n.call("_guiRelayout",H,fe(ie)),O&&H.data&&H._context.showTips&&(E.notifier(v(H,"Double-click to zoom back out"),"long"),O=!1))}function Ne(){te={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]},ie=te}function Ee(Ce,Oe){var Le=Ce/B.xaxis._m,Ge=Oe/B.yaxis._m;ie={a:te.a-Ge,b:te.b+(Le+Ge)/2,c:te.c-(Le-Ge)/2};var rt=[ie.a,ie.b,ie.c].sort(E.sorterAsc),ot={a:rt.indexOf(ie.a),b:rt.indexOf(ie.b),c:rt.indexOf(ie.c)};rt[0]<0&&(rt[1]+rt[0]/2<0?(rt[2]+=rt[0]+rt[1],rt[0]=rt[1]=0):(rt[2]+=rt[0]/2,rt[1]+=rt[0]/2,rt[0]=0),ie={a:rt[ot.a],b:rt[ot.b],c:rt[ot.c]},Oe=(te.a-ie.a)*B.yaxis._m,Ce=(te.c-ie.c-te.b+ie.b)*B.xaxis._m);var $e=T(B.x0+Ce,B.y0+Oe);B.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",$e);var qe=T(-Ce,-Oe);B.clipDefRelative.select("path").attr("transform",qe),B.aaxis.range=[ie.a,B.sum-ie.b-ie.c],B.baxis.range=[B.sum-ie.a-ie.c,ie.b],B.caxis.range=[B.sum-ie.a-ie.b,ie.c],B.drawAxes(!1),B._hasClipOnAxisFalse&&B.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,B),H.emit("plotly_relayouting",fe(ie))}function ze(){n.call("_guiRelayout",H,fe(ie))}z.onmousemove=function(Ce){l.hover(H,Ce,B.id),H._fullLayout._lasthover=z,H._fullLayout._hoversubplot=B.id},z.onmouseout=function(Ce){H._dragging||u.unhover(H,Ce)},u.init(this.dragOptions)};function N(B){d.select(B).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},24040:function(U,F,e){var d=e(24248),S=e(16628),n=e(52416),E=e(63620),T=e(52200).addStyleRule,v=e(92880),g=e(45464),r=e(64859),t=v.extendFlat,o=v.extendDeepAll;F.modules={},F.allCategories={},F.allTypes=[],F.subplotsRegistry={},F.transformsRegistry={},F.componentsRegistry={},F.layoutArrayContainers=[],F.layoutArrayRegexes=[],F.traceLayoutAttributes={},F.localeRegistry={},F.apiMethodRegistry={},F.collectableSubplotTypes=null,F.register=function(A){if(F.collectableSubplotTypes=null,A)A&&!Array.isArray(A)&&(A=[A]);else throw new Error("No argument passed to Plotly.register.");for(var P=0;P<A.length;P++){var y=A[P];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":i(y);break;case"transform":l(y);break;case"component":u(y);break;case"locale":m(y);break;case"apiMethod":var C=y.name;F.apiMethodRegistry[C]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},F.getModule=function(x){var A=F.modules[p(x)];return A?A._module:!1},F.traceIs=function(x,A){if(x=p(x),x==="various")return!1;var P=F.modules[x];return P||(x&&d.log("Unrecognized trace type "+x+"."),P=F.modules[g.type.dflt]),!!P.categories[A]},F.getTransformIndices=function(x,A){for(var P=[],y=x.transforms||[],C=0;C<y.length;C++)y[C].type===A&&P.push(C);return P},F.hasTransform=function(x,A){for(var P=x.transforms||[],y=0;y<P.length;y++)if(P[y].type===A)return!0;return!1},F.getComponentMethod=function(x,A){var P=F.componentsRegistry[x];return P&&P[A]||S},F.call=function(){var x=arguments[0],A=[].slice.call(arguments,1);return F.apiMethodRegistry[x].apply(null,A)};function i(x){var A=x.name,P=x.categories,y=x.meta;if(F.modules[A]){d.log("Type "+A+" already registered");return}F.subplotsRegistry[x.basePlotModule.name]||f(x.basePlotModule);for(var C={},M=0;M<P.length;M++)C[P[M]]=!0,F.allCategories[P[M]]=!0;F.modules[A]={_module:x,categories:C},y&&Object.keys(y).length&&(F.modules[A].meta=y),F.allTypes.push(A);for(var s in F.componentsRegistry)w(s,A);x.layoutAttributes&&t(F.traceLayoutAttributes,x.layoutAttributes);var _=x.basePlotModule,b=_.name;if(b==="mapbox"){var k=_.constants.styleRules;for(var D in k)T(".js-plotly-plot .plotly .mapboxgl-"+D,k[D])}(b==="geo"||b==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function f(x){var A=x.name;if(F.subplotsRegistry[A]){d.log("Plot type "+A+" already registered.");return}h(x),F.subplotsRegistry[A]=x;for(var P in F.componentsRegistry)a(P,x.name)}function u(x){if(typeof x.name!="string")throw new Error("Component module *name* must be a string.");var A=x.name;F.componentsRegistry[A]=x,x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&n(F.layoutArrayContainers,A),h(x));for(var P in F.modules)w(A,P);for(var y in F.subplotsRegistry)a(A,y);for(var C in F.transformsRegistry)c(A,C);x.schema&&x.schema.layout&&o(r,x.schema.layout)}function l(x){if(typeof x.name!="string")throw new Error("Transform module *name* must be a string.");var A="Transform module "+x.name,P=typeof x.transform=="function",y=typeof x.calcTransform=="function";if(!P&&!y)throw new Error(A+" is missing a *transform* or *calcTransform* method.");P&&y&&d.log([A+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),E(x.attributes)||d.log(A+" registered without an *attributes* object."),typeof x.supplyDefaults!="function"&&d.log(A+" registered without a *supplyDefaults* method."),F.transformsRegistry[x.name]=x;for(var C in F.componentsRegistry)c(C,x.name)}function m(x){var A=x.name,P=A.split("-")[0],y=x.dictionary,C=x.format,M=y&&Object.keys(y).length,s=C&&Object.keys(C).length,_=F.localeRegistry,b=_[A];if(b||(_[A]=b={}),P!==A){var k=_[P];k||(_[P]=k={}),M&&k.dictionary===b.dictionary&&(k.dictionary=y),s&&k.format===b.format&&(k.format=C)}M&&(b.dictionary=y),s&&(b.format=C)}function h(x){if(x.layoutAttributes){var A=x.layoutAttributes._arrayAttrRegexps;if(A)for(var P=0;P<A.length;P++)n(F.layoutArrayRegexes,A[P])}}function w(x,A){var P=F.componentsRegistry[x].schema;if(!(!P||!P.traces)){var y=P.traces[A];y&&o(F.modules[A]._module.attributes,y)}}function c(x,A){var P=F.componentsRegistry[x].schema;if(!(!P||!P.transforms)){var y=P.transforms[A];y&&o(F.transformsRegistry[A].attributes,y)}}function a(x,A){var P=F.componentsRegistry[x].schema;if(!(!P||!P.subplots)){var y=F.subplotsRegistry[A],C=y.layoutAttributes,M=y.attr==="subplot"?y.name:y.attr;Array.isArray(M)&&(M=M[0]);var s=P.subplots[M];C&&s&&o(C,s)}}function p(x){return typeof x=="object"&&(x=x.type),x}},91536:function(U,F,e){var d=e(24040),S=e(3400),n=S.extendFlat,E=S.extendDeep;function T(g){var r;switch(g){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function v(g){var r=["xaxis","yaxis","zaxis"];return r.indexOf(g.slice(0,5))>-1}U.exports=function(r,t){var o,i=r.data,f=r.layout,u=E([],i),l=E({},f,T(t.tileClass)),m=r._context||{};if(t.width&&(l.width=t.width),t.height&&(l.height=t.height),t.tileClass==="thumbnail"||t.tileClass==="themes__thumb"){l.annotations=[];var h=Object.keys(l);for(o=0;o<h.length;o++)v(h[o])&&(l[h[o]].title={text:""});for(o=0;o<u.length;o++){var w=u[o];w.showscale=!1,w.marker&&(w.marker.showscale=!1),d.traceIs(w,"pie-like")&&(w.textposition="none")}}if(Array.isArray(t.annotations))for(o=0;o<t.annotations.length;o++)l.annotations.push(t.annotations[o]);var c=Object.keys(l).filter(function(P){return P.match(/^scene\d*$/)});if(c.length){var a={};for(t.tileClass==="thumbnail"&&(a={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),o=0;o<c.length;o++){var p=l[c[o]];p.xaxis||(p.xaxis={}),p.yaxis||(p.yaxis={}),p.zaxis||(p.zaxis={}),n(p.xaxis,a),n(p.yaxis,a),n(p.zaxis,a),p._scene=null}}var x=document.createElement("div");t.tileClass&&(x.className=t.tileClass);var A={gd:x,td:x,layout:l,data:u,config:{staticPlot:t.staticPlot===void 0?!0:t.staticPlot,plotGlPixelRatio:t.plotGlPixelRatio===void 0?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:m.mapboxAccessToken}};return t.setBackground!=="transparent"&&(A.config.setBackground=t.setBackground||"opaque"),A.gd.defaultLayout=T(t.tileClass),A}},39792:function(U,F,e){var d=e(3400),S=e(67024),n=e(48616),E=e(81792);function T(v,g){var r;return d.isPlainObject(v)||(r=d.getGraphDiv(v)),g=g||{},g.format=g.format||"png",g.width=g.width||null,g.height=g.height||null,g.imageDataOnly=!0,new Promise(function(t,o){r&&r._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),d.isIE()&&g.format!=="svg"&&o(new Error(E.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var i=S(v,g),f=g.filename||v.fn||"newplot";f+="."+g.format.replace("-","."),i.then(function(u){return r&&(r._snapshotInProgress=!1),n(u,f,g.format)}).then(function(u){t(u)}).catch(function(u){r&&(r._snapshotInProgress=!1),o(u)})})}U.exports=T},48616:function(U,F,e){var d=e(3400),S=e(81792);function n(E,T,v){var g=document.createElement("a"),r="download"in g,t=new Promise(function(o,i){var f,u;if(d.isIE())return f=S.createBlob(E,"svg"),window.navigator.msSaveBlob(f,T),f=null,o(T);if(r)return f=S.createBlob(E,v),u=S.createObjectURL(f),g.href=u,g.download=T,document.body.appendChild(g),g.click(),document.body.removeChild(g),S.revokeObjectURL(u),f=null,o(T);if(d.isSafari()){var l=v==="svg"?",":";base64,";return S.octetStream(l+encodeURIComponent(E)),o(T)}i(new Error("download error"))});return t}U.exports=n},81792:function(U,F,e){var d=e(24040);F.getDelay=function(E){return E._has&&(E._has("gl3d")||E._has("gl2d")||E._has("mapbox"))?500:0},F.getRedrawFunc=function(E){return function(){d.getComponentMethod("colorbar","draw")(E)}},F.encodeSVG=function(E){return"data:image/svg+xml,"+encodeURIComponent(E)},F.encodeJSON=function(E){return"data:application/json,"+encodeURIComponent(E)};var S=window.URL||window.webkitURL;F.createObjectURL=function(E){return S.createObjectURL(E)},F.revokeObjectURL=function(E){return S.revokeObjectURL(E)},F.createBlob=function(E,T){if(T==="svg")return new window.Blob([E],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([E],{type:"application/json;charset=utf-8"});var v=n(window.atob(E));return new window.Blob([v],{type:"image/"+T})},F.octetStream=function(E){document.location.href="data:application/octet-stream"+E};function n(E){for(var T=E.length,v=new ArrayBuffer(T),g=new Uint8Array(v),r=0;r<T;r++)g[r]=E.charCodeAt(r);return v}F.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,F.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(U,F,e){var d=e(81792),S={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};U.exports=S},63268:function(U,F,e){var d=e(3400),S=e(61252).EventEmitter,n=e(81792);function E(T){var v=T.emitter||new S,g=new Promise(function(r,t){var o=window.Image,i=T.svg,f=T.format||"png";if(d.isIE()&&f!=="svg"){var u=new Error(n.MSG_IE_BAD_FORMAT);return t(u),T.promise?g:v.emit("error",u)}var l=T.canvas,m=T.scale||1,h=T.width||300,w=T.height||150,c=m*h,a=m*w,p=l.getContext("2d",{willReadFrequently:!0}),x=new o,A,P;f==="svg"||d.isSafari()?P=n.encodeSVG(i):(A=n.createBlob(i,"svg"),P=n.createObjectURL(A)),l.width=c,l.height=a,x.onload=function(){var y;switch(A=null,n.revokeObjectURL(P),f!=="svg"&&p.drawImage(x,0,0,c,a),f){case"jpeg":y=l.toDataURL("image/jpeg");break;case"png":y=l.toDataURL("image/png");break;case"webp":y=l.toDataURL("image/webp");break;case"svg":y=P;break;default:var C="Image format is not jpeg, png, svg or webp.";if(t(new Error(C)),!T.promise)return v.emit("error",C)}r(y),T.promise||v.emit("success",y)},x.onerror=function(y){if(A=null,n.revokeObjectURL(P),t(y),!T.promise)return v.emit("error",y)},x.src=P});return T.promise?g:v}U.exports=E},61808:function(U,F,e){var d=e(61252).EventEmitter,S=e(24040),n=e(3400),E=e(81792),T=e(91536),v=e(37164),g=e(63268);function r(t,o){var i=new d,f=T(t,{format:"png"}),u=f.gd;u.style.position="absolute",u.style.left="-5000px",document.body.appendChild(u);function l(){var h=E.getDelay(u._fullLayout);setTimeout(function(){var w=v(u),c=document.createElement("canvas");c.id=n.randstr(),i=g({format:o.format,width:u._fullLayout.width,height:u._fullLayout.height,canvas:c,emitter:i,svg:w}),i.clean=function(){u&&document.body.removeChild(u)}},h)}var m=E.getRedrawFunc(u);return S.call("_doPlot",u,f.data,f.layout,f.config).then(m).then(l).catch(function(h){i.emit("error",h)}),i}U.exports=r},37164:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(76308),T=e(9616),v=/"/g,g="TOBESTRIPPED",r=new RegExp('("'+g+")|("+g+'")',"g");function t(i){var f=d.select("body").append("div").style({display:"none"}).html(""),u=i.replace(/(&[^;]*;)/gi,function(l){return l==="&lt;"?"&#60;":l==="&rt;"?"&#62;":l.indexOf("<")!==-1||l.indexOf(">")!==-1?"":f.html(l).text()});return f.remove(),u}function o(i){return i.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}U.exports=function(f,u,l){var m=f._fullLayout,h=m._paper,w=m._toppaper,c=m.width,a=m.height,p;h.insert("rect",":first-child").call(n.setRect,0,0,c,a).call(E.fill,m.paper_bgcolor);var x=m._basePlotModules||[];for(p=0;p<x.length;p++){var A=x[p];A.toSVG&&A.toSVG(f)}if(w){var P=w.node().childNodes,y=Array.prototype.slice.call(P);for(p=0;p<y.length;p++){var C=y[p];C.childNodes.length&&h.node().appendChild(C)}}m._draggers&&m._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var s=d.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){s.remove();return}else s.style({visibility:null,display:null});var _=this.style.fontFamily;_&&_.indexOf('"')!==-1&&s.style("font-family",_.replace(v,g));var b=this.style.fontWeight;b&&(b==="normal"||b==="400")&&s.style("font-weight",void 0);var k=this.style.fontStyle;k&&k==="normal"&&s.style("font-style",void 0);var D=this.style.fontVariant;D&&D==="normal"&&s.style("font-variant",void 0)}),h.selectAll(".gradient_filled,.pattern_filled").each(function(){var s=d.select(this),_=this.style.fill;_&&_.indexOf("url(")!==-1&&s.style("fill",_.replace(v,g));var b=this.style.stroke;b&&b.indexOf("url(")!==-1&&s.style("stroke",b.replace(v,g))}),(u==="pdf"||u==="eps")&&h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(T.xmlns,"xmlns",T.svg),h.node().setAttributeNS(T.xmlns,"xmlns:xlink",T.xlink),u==="svg"&&l&&(h.attr("width",l*c),h.attr("height",l*a),h.attr("viewBox","0 0 "+c+" "+a));var M=new window.XMLSerializer().serializeToString(h.node());return M=t(M),M=o(M),M=M.replace(r,"'"),S.isIE()&&(M=M.replace(/"/gi,"'"),M=M.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),M=M.replace(/(\\')/gi,'"')),M}},84664:function(U,F,e){var d=e(3400);U.exports=function(n,E){for(var T=0;T<n.length;T++)n[T].i=T;d.mergeArray(E.text,n,"tx"),d.mergeArray(E.hovertext,n,"htx");var v=E.marker;if(v){d.mergeArray(v.opacity,n,"mo",!0),d.mergeArray(v.color,n,"mc");var g=v.line;g&&(d.mergeArray(g.color,n,"mlc"),d.mergeArrayCastPositive(g.width,n,"mlw"))}}},20832:function(U,F,e){var d=e(52904),S=e(29736).axisHoverFormat,n=e(21776).Ks,E=e(21776).Gw,T=e(49084),v=e(25376),g=e(78048),r=e(98192).c,t=e(92880).extendFlat,o=v({editType:"calc",arrayOk:!0,colorEditType:"style"}),i=d.marker,f=i.line,u=t({},f.width,{dflt:0}),l=t({width:u,editType:"calc"},T("marker.line")),m=t({line:l,editType:"calc"},T("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r,cornerradius:{valType:"any",editType:"calc"}});U.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:S("x"),yhoverformat:S("y"),text:d.text,texttemplate:E({editType:"plot"},{keys:g.eventDataKeys}),hovertext:d.hovertext,hovertemplate:n({},{keys:g.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},o,{}),insidetextfont:t({},o,{}),outsidetextfont:t({},o,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},d.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:{marker:{opacity:d.selected.marker.opacity,color:d.selected.marker.color,editType:"style"},textfont:d.selected.textfont,editType:"style"},unselected:{marker:{opacity:d.unselected.marker.opacity,color:d.unselected.marker.color,editType:"style"},textfont:d.unselected.textfont,editType:"style"},zorder:d.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(U,F,e){var d=e(54460),S=e(1220),n=e(94288).hasColorscale,E=e(47128),T=e(84664),v=e(4500);U.exports=function(r,t){var o=d.getFromId(r,t.xaxis||"x"),i=d.getFromId(r,t.yaxis||"y"),f,u,l,m,h,w,c={msUTC:!!(t.base||t.base===0)};t.orientation==="h"?(f=o.makeCalcdata(t,"x",c),l=i.makeCalcdata(t,"y"),m=S(t,i,"y",l),h=!!t.yperiodalignment,w="y"):(f=i.makeCalcdata(t,"y",c),l=o.makeCalcdata(t,"x"),m=S(t,o,"x",l),h=!!t.xperiodalignment,w="x"),u=m.vals;for(var a=Math.min(u.length,f.length),p=new Array(a),x=0;x<a;x++)p[x]={p:u[x],s:f[x]},h&&(p[x].orig_p=l[x],p[x][w+"End"]=m.ends[x],p[x][w+"Start"]=m.starts[x]),t.ids&&(p[x].id=String(t.ids[x]));return n(t,"marker")&&E(r,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),n(t,"marker.line")&&E(r,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(p,t),v(p,t),p}},78048:function(U){U.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(U,F,e){var d=e(38248),S=e(3400).isArrayOrTypedArray,n=e(39032).BADNUM,E=e(24040),T=e(54460),v=e(71888).getAxisGroup,g=e(72592);function r(b,k){for(var D=k.xaxis,V=k.yaxis,O=b._fullLayout,N=b._fullData,B=b.calcdata,z=[],H=[],X=0;X<N.length;X++){var $=N[X];if($.visible===!0&&E.traceIs($,"bar")&&$.xaxis===D._id&&$.yaxis===V._id&&($.orientation==="h"?z.push(B[X]):H.push(B[X]),$._computePh))for(var ne=b.calcdata[X],q=0;q<ne.length;q++)typeof ne[q].ph0=="function"&&(ne[q].ph0=ne[q].ph0()),typeof ne[q].ph1=="function"&&(ne[q].ph1=ne[q].ph1())}var ue={xCat:D.type==="category"||D.type==="multicategory",yCat:V.type==="category"||V.type==="multicategory",mode:O.barmode,norm:O.barnorm,gap:O.bargap,groupgap:O.bargroupgap};t(b,D,V,H,ue),t(b,V,D,z,ue)}function t(b,k,D,V,O){if(V.length){var N,B,z,H,X;switch(f(D,V),O.mode){case"overlay":u(k,D,V,O);break;case"group":for(N=[],B=[],z=0;z<V.length;z++)H=V[z],X=H[0].trace,X.offset===void 0?B.push(H):N.push(H);B.length&&l(b,k,D,B,O),N.length&&u(k,D,N,O);break;case"stack":case"relative":for(N=[],B=[],z=0;z<V.length;z++)H=V[z],X=H[0].trace,X.base===void 0?B.push(H):N.push(H);i(B),B.length&&m(b,k,D,B,O),N.length&&u(k,D,N,O);break}o(V),s(V,k)}}function o(b){var k,D,V,O,N,B,z;for(k=0;k<b.length;k++)D=b[k],V=D[0].trace,O=D[0].t,O.cornerradiusvalue===void 0&&(N=V.marker?V.marker.cornerradius:void 0,N!==void 0&&(B=d(N)?+N:+N.slice(0,-1),z=d(N)?"px":"%",O.cornerradiusvalue=B,O.cornerradiusform=z))}function i(b){if(!(b.length<2)){var k,D,V,O,N,B,z;for(k=0;k<b.length&&(D=b[k],V=D[0].trace,N=V.marker?V.marker.cornerradius:void 0,N===void 0);k++);if(N!==void 0)for(B=d(N)?+N:+N.slice(0,-1),z=d(N)?"px":"%",k=0;k<b.length;k++)D=b[k],O=D[0].t,O.cornerradiusvalue=B,O.cornerradiusform=z}}function f(b,k){var D,V;for(D=0;D<k.length;D++){var O=k[D],N=O[0].trace,B=N.type==="funnel"?N._base:N.base,z,H=N.orientation==="h"?N.xcalendar:N.ycalendar,X=b.type==="category"||b.type==="multicategory"?function(){return null}:b.d2c;if(S(B)){for(V=0;V<Math.min(B.length,O.length);V++)z=X(B[V],0,H),d(z)?(O[V].b=+z,O[V].hasB=1):O[V].b=0;for(;V<O.length;V++)O[V].b=0}else{z=X(B,0,H);var $=d(z);for(z=$?z:0,V=0;V<O.length;V++)O[V].b=z,$&&(O[V].hasB=1)}}}function u(b,k,D,V){for(var O=0;O<D.length;O++){var N=D[O],B=new g([N],{posAxis:b,sepNegVal:!1,overlapNoMerge:!V.norm});h(b,B,V),V.norm?(P(B),C(k,B,V)):x(k,B)}}function l(b,k,D,V,O){var N=new g(V,{posAxis:k,sepNegVal:!1,overlapNoMerge:!O.norm});w(b,k,N,O),y(N,k),O.norm?(P(N),C(D,N,O)):x(D,N)}function m(b,k,D,V,O){var N=new g(V,{posAxis:k,sepNegVal:O.mode==="relative",overlapNoMerge:!(O.norm||O.mode==="stack"||O.mode==="relative")});h(k,N,O),A(D,N,O);for(var B=0;B<V.length;B++)for(var z=V[B],H=0;H<z.length;H++){var X=z[H];if(X.s!==n){var $=X.b+X.s===N.get(X.p,X.s);$&&(X._outmost=!0)}}O.norm&&C(D,N,O)}function h(b,k,D){for(var V=k.minDiff,O=k.traces,N=V*(1-D.gap),B=N,z=B*(1-(D.groupgap||0)),H=-z/2,X=0;X<O.length;X++){var $=O[X],ne=$[0].t;ne.barwidth=z,ne.poffset=H,ne.bargroupwidth=N,ne.bardelta=V}k.binWidth=O[0][0].t.barwidth/100,c(k),a(b,k),p(b,k)}function w(b,k,D,V){for(var O=b._fullLayout,N=D.positions,B=D.distinctPositions,z=D.minDiff,H=D.traces,X=H.length,$=N.length!==B.length,ne=z*(1-V.gap),q=v(O,k._id)+H[0][0].trace.orientation,ue=O._alignmentOpts[q]||{},te=0;te<X;te++){var J=H[te],ie=J[0].trace,K=ue[ie.alignmentgroup]||{},ee=Object.keys(K.offsetGroups||{}).length,le;ee?le=ne/ee:le=$?ne/X:ne;var j=le*(1-(V.groupgap||0)),Z;ee?Z=((2*ie._offsetIndex+1-ee)*le-j)/2:Z=$?((2*te+1-X)*le-j)/2:-j/2;var fe=J[0].t;fe.barwidth=j,fe.poffset=Z,fe.bargroupwidth=ne,fe.bardelta=z}D.binWidth=H[0][0].t.barwidth/100,c(D),a(k,D),p(k,D,$)}function c(b){var k=b.traces,D,V;for(D=0;D<k.length;D++){var O=k[D],N=O[0],B=N.trace,z=N.t,H=B._offset||B.offset,X=z.poffset,$;if(S(H)){for($=Array.prototype.slice.call(H,0,O.length),V=0;V<$.length;V++)d($[V])||($[V]=X);for(V=$.length;V<O.length;V++)$.push(X);z.poffset=$}else H!==void 0&&(z.poffset=H);var ne=B._width||B.width,q=z.barwidth;if(S(ne)){var ue=Array.prototype.slice.call(ne,0,O.length);for(V=0;V<ue.length;V++)d(ue[V])||(ue[V]=q);for(V=ue.length;V<O.length;V++)ue.push(q);if(z.barwidth=ue,H===void 0){for($=[],V=0;V<O.length;V++)$.push(X+(q-ue[V])/2);z.poffset=$}}else ne!==void 0&&(z.barwidth=ne,H===void 0&&(z.poffset=X+(q-ne)/2))}}function a(b,k){for(var D=k.traces,V=_(b),O=0;O<D.length;O++)for(var N=D[O],B=N[0].t,z=B.poffset,H=S(z),X=B.barwidth,$=S(X),ne=0;ne<N.length;ne++){var q=N[ne],ue=q.w=$?X[ne]:X;q.p===void 0&&(q.p=q[V],q["orig_"+V]=q[V]);var te=(H?z[ne]:z)+ue/2;q[V]=q.p+te}}function p(b,k,D){var V=k.traces,O=k.minDiff,N=O/2;T.minDtick(b,k.minDiff,k.distinctPositions[0],D);for(var B=0;B<V.length;B++){var z=V[B],H=z[0],X=H.trace,$=[],ne,q,ue,te;for(te=0;te<z.length;te++)ne=z[te],q=ne.p-N,ue=ne.p+N,$.push(q,ue);if(X.width||X.offset){var J=H.t,ie=J.poffset,K=J.barwidth,ee=S(ie),le=S(K);for(te=0;te<z.length;te++){ne=z[te];var j=ee?ie[te]:ie,Z=le?K[te]:K;q=ne.p+j,ue=q+Z,$.push(q,ue)}}X._extremes[b._id]=T.findExtremes(b,$,{padded:!1})}}function x(b,k){for(var D=k.traces,V=_(b),O=0;O<D.length;O++){for(var N=D[O],B=N[0].trace,z=B.type==="scatter",H=B.orientation==="v",X=[],$=!1,ne=0;ne<N.length;ne++){var q=N[ne],ue=z?0:q.b,te=z?H?q.y:q.x:ue+q.s;q[V]=te,X.push(te),q.hasB&&X.push(ue),(!q.hasB||!q.b)&&($=!0)}B._extremes[b._id]=T.findExtremes(b,X,{tozero:$,padded:!0})}}function A(b,k,D){var V=_(b),O=k.traces,N,B,z,H,X,$;for(H=0;H<O.length;H++)if(N=O[H],B=N[0].trace,B.type==="funnel")for(X=0;X<N.length;X++)$=N[X],$.s!==n&&k.put($.p,-.5*$.s);for(H=0;H<O.length;H++){N=O[H],B=N[0].trace,z=B.type==="funnel";var ne=[];for(X=0;X<N.length;X++)if($=N[X],$.s!==n){var q;z?q=$.s:q=$.s+$.b;var ue=k.put($.p,q),te=ue+q;$.b=ue,$[V]=te,D.norm||(ne.push(te),$.hasB&&ne.push(ue))}D.norm||(B._extremes[b._id]=T.findExtremes(b,ne,{tozero:!0,padded:!0}))}}function P(b){for(var k=b.traces,D=0;D<k.length;D++)for(var V=k[D],O=0;O<V.length;O++){var N=V[O];N.s!==n&&b.put(N.p,N.b+N.s)}}function y(b,k){for(var D=b.traces,V=0;V<D.length;V++){var O=D[V],N=O[0].trace;if(N.base===void 0)for(var B=new g([O],{posAxis:k,sepNegVal:!0,overlapNoMerge:!0}),z=0;z<O.length;z++){var H=O[z];if(H.p!==n){var X=B.put(H.p,H.b+H.s);X&&(H.b=X)}}}}function C(b,k,D){var V=k.traces,O=_(b),N=D.norm==="fraction"?1:100,B=N/1e9,z=b.l2c(b.c2l(0)),H=D.mode==="stack"?N:z;function X(Z){return d(b.c2l(Z))&&(Z<z-B||Z>H+B||!d(z))}for(var $=0;$<V.length;$++){for(var ne=V[$],q=ne[0].trace,ue=[],te=!1,J=!1,ie=0;ie<ne.length;ie++){var K=ne[ie];if(K.s!==n){var ee=Math.abs(N/k.get(K.p,K.s));K.b*=ee,K.s*=ee;var le=K.b,j=le+K.s;K[O]=j,ue.push(j),J=J||X(j),K.hasB&&(ue.push(le),J=J||X(le)),(!K.hasB||!K.b)&&(te=!0)}}q._extremes[b._id]=T.findExtremes(b,ue,{tozero:te,padded:J})}}function M(b,k,D,V){for(var O=_(V),N=0;N<b.length;N++)for(var B=b[N],z=0;z<B.length;z++){var H=B[z],X=H[O];H._sMin=k[X],H._sMax=D[X]}}function s(b,k){var D=_(k),V={},O,N,B,z=1/0,H=-1/0;for(O=0;O<b.length;O++)for(B=b[O],N=0;N<B.length;N++){var X=B[N].p;d(X)&&(z=Math.min(z,X),H=Math.max(H,X))}var $=1e4/(H-z),ne=V.round=function(ce){return String(Math.round($*(ce-z)))},q={},ue={},te=b.some(function(ce){var xe=ce[0].trace;return"marker"in xe&&xe.marker.cornerradius});for(O=0;O<b.length;O++){B=b[O],B[0].t.extents=V;var J=B[0].t.poffset,ie=S(J);for(N=0;N<B.length;N++){var K=B[N],ee=K[D]-K.w/2;if(d(ee)){var le=K[D]+K.w/2,j=ne(K.p);V[j]?V[j]=[Math.min(ee,V[j][0]),Math.max(le,V[j][1])]:V[j]=[ee,le]}if(K.p0=K.p+(ie?J[N]:J),K.p1=K.p0+K.w,K.s0=K.b,K.s1=K.s0+K.s,te){var Z=Math.min(K.s0,K.s1)||0,fe=Math.max(K.s0,K.s1)||0,re=K[D];q[re]=re in q?Math.min(q[re],Z):Z,ue[re]=re in ue?Math.max(ue[re],fe):fe}}}te&&M(b,q,ue,k)}function _(b){return b._id.charAt(0)}U.exports={crossTraceCalc:r,setGroupPositions:t}},31508:function(U,F,e){var d=e(38248),S=e(3400),n=e(76308),E=e(24040),T=e(43980),v=e(31147),g=e(55592),r=e(20011),t=e(20832),o=S.coerceFont;function i(m,h,w,c){function a(y,C){return S.coerce(m,h,t,y,C)}var p=T(m,h,c,a);if(!p){h.visible=!1;return}v(m,h,c,a),a("xhoverformat"),a("yhoverformat"),a("zorder"),a("orientation",h.x&&!h.y?"h":"v"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate");var x=a("textposition");l(m,h,c,a,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),g(m,h,a,w,c);var A=(h.marker.line||{}).color,P=E.getComponentMethod("errorbars","supplyDefaults");P(m,h,A||n.defaultLine,{axis:"y"}),P(m,h,A||n.defaultLine,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(h,a)}function f(m,h){var w,c;function a(A,P){return S.coerce(c._input,c,t,A,P)}for(var p=0;p<m.length;p++)if(c=m[p],c.type==="bar"){w=c._input;var x=a("marker.cornerradius",h.barcornerradius);c.marker&&(c.marker.cornerradius=u(x)),h.barmode==="group"&&r(w,c,h,a)}}function u(m){if(d(m)){if(m=+m,m>=0)return m}else if(typeof m=="string"&&(m=m.trim(),m.slice(-1)==="%"&&d(m.slice(0,-1))&&(m=+m.slice(0,-1),m>=0)))return m+"%"}function l(m,h,w,c,a,p){p=p||{};var x=p.moduleHasSelected!==!1,A=p.moduleHasUnselected!==!1,P=p.moduleHasConstrain!==!1,y=p.moduleHasCliponaxis!==!1,C=p.moduleHasTextangle!==!1,M=p.moduleHasInsideanchor!==!1,s=!!p.hasPathbar,_=Array.isArray(a)||a==="auto",b=_||a==="inside",k=_||a==="outside";if(b||k){var D=o(c,"textfont",w.font),V=S.extendFlat({},D),O=m.textfont&&m.textfont.color,N=!O;if(N&&delete V.color,o(c,"insidetextfont",V),s){var B=S.extendFlat({},D);N&&delete B.color,o(c,"pathbar.textfont",B)}k&&o(c,"outsidetextfont",D),x&&c("selected.textfont.color"),A&&c("unselected.textfont.color"),P&&c("constraintext"),y&&c("cliponaxis"),C&&c("textangle"),c("texttemplate")}b&&M&&c("insidetextanchor")}U.exports={supplyDefaults:i,crossTraceDefaults:f,handleText:l,validateCornerradius:u}},52160:function(U){U.exports=function(e,d,S){return e.x="xVal"in d?d.xVal:d.x,e.y="yVal"in d?d.yVal:d.y,d.xa&&(e.xaxis=d.xa),d.ya&&(e.yaxis=d.ya),S.orientation==="h"?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},60444:function(U,F,e){var d=e(38248),S=e(49760),n=e(3400).isArrayOrTypedArray;F.coerceString=function(E,T,v){if(typeof T=="string"){if(T||!E.noBlank)return T}else if((typeof T=="number"||T===!0)&&!E.strict)return String(T);return v!==void 0?v:E.dflt},F.coerceNumber=function(E,T,v){if(d(T)){T=+T;var g=E.min,r=E.max,t=g!==void 0&&T<g||r!==void 0&&T>r;if(!t)return T}return v!==void 0?v:E.dflt},F.coerceColor=function(E,T,v){return S(T).isValid()?T:v!==void 0?v:E.dflt},F.coerceEnumerated=function(E,T,v){return E.coerceNumber&&(T=+T),E.values.indexOf(T)!==-1?T:v!==void 0?v:E.dflt},F.getValue=function(E,T){var v;return n(E)?T<E.length&&(v=E[T]):v=E,v},F.getLineWidth=function(E,T){var v=0<T.mlw?T.mlw:n(E.marker.line.width)?0:E.marker.line.width;return v}},63400:function(U,F,e){var d=e(93024),S=e(24040),n=e(76308),E=e(3400).fillText,T=e(60444).getLineWidth,v=e(54460).hoverLabelText,g=e(39032).BADNUM;function r(i,f,u,l,m){var h=t(i,f,u,l,m);if(h){var w=h.cd,c=w[0].trace,a=w[h.index];return h.color=o(c,a),S.getComponentMethod("errorbars","hoverInfo")(a,c,h),[h]}}function t(i,f,u,l,m){var h=i.cd,w=h[0].trace,c=h[0].t,a=l==="closest",p=w.type==="waterfall",x=i.maxHoverDistance,A=i.maxSpikeDistance,P,y,C,M,s,_,b;w.orientation==="h"?(P=u,y=f,C="y",M="x",s=ue,_=$):(P=f,y=u,C="x",M="y",_=ue,s=$);var k=w[C+"period"],D=a||k;function V(ce){return N(ce,-1)}function O(ce){return N(ce,1)}function N(ce,xe){var Te=ce.w;return ce[C]+xe*Te/2}function B(ce){return ce[C+"End"]-ce[C+"Start"]}var z=a?V:k?function(ce){return ce.p-B(ce)/2}:function(ce){return Math.min(V(ce),ce.p-c.bardelta/2)},H=a?O:k?function(ce){return ce.p+B(ce)/2}:function(ce){return Math.max(O(ce),ce.p+c.bardelta/2)};function X(ce,xe,Te){return m.finiteRange&&(Te=0),d.inbox(ce-P,xe-P,Te+Math.min(1,Math.abs(xe-ce)/b)-1)}function $(ce){return X(z(ce),H(ce),x)}function ne(ce){return X(V(ce),O(ce),A)}function q(ce){var xe=ce[M];if(p){var Te=Math.abs(ce.rawS)||0;y>0?xe+=Te:y<0&&(xe-=Te)}return xe}function ue(ce){var xe=y,Te=ce.b,we=q(ce);return d.inbox(Te-xe,we-xe,x+(we-xe)/(we-Te)-1)}function te(ce){var xe=y,Te=ce.b,we=q(ce);return d.inbox(Te-xe,we-xe,A+(we-xe)/(we-Te)-1)}var J=i[C+"a"],ie=i[M+"a"];b=Math.abs(J.r2c(J.range[1])-J.r2c(J.range[0]));function K(ce){return(s(ce)+_(ce))/2}var ee=d.getDistanceFunction(l,s,_,K);if(d.getClosest(h,ee,i),i.index!==!1&&h[i.index].p!==g){D||(z=function(ce){return Math.min(V(ce),ce.p-c.bargroupwidth/2)},H=function(ce){return Math.max(O(ce),ce.p+c.bargroupwidth/2)});var le=i.index,j=h[le],Z=w.base?j.b+j.s:j.s;i[M+"0"]=i[M+"1"]=ie.c2p(j[M],!0),i[M+"LabelVal"]=Z;var fe=c.extents[c.extents.round(j.p)];i[C+"0"]=J.c2p(a?z(j):fe[0],!0),i[C+"1"]=J.c2p(a?H(j):fe[1],!0);var re=j.orig_p!==void 0;return i[C+"LabelVal"]=re?j.orig_p:j.p,i.labelLabel=v(J,i[C+"LabelVal"],w[C+"hoverformat"]),i.valueLabel=v(ie,i[M+"LabelVal"],w[M+"hoverformat"]),i.baseLabel=v(ie,j.b,w[M+"hoverformat"]),i.spikeDistance=(te(j)+ne(j))/2,i[C+"Spike"]=J.c2p(j.p,!0),E(j,w,i),i.hovertemplate=w.hovertemplate,i}}function o(i,f){var u=f.mcc||i.marker.color,l=f.mlcc||i.marker.line.color,m=T(i,f);if(n.opacity(u))return u;if(n.opacity(l)&&m)return l}U.exports={hoverPoints:r,hoverOnBars:t,getTraceColor:o}},51132:function(U,F,e){U.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(U){U.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(U,F,e){var d=e(24040),S=e(54460),n=e(3400),E=e(39324),T=e(31508).validateCornerradius;U.exports=function(v,g,r){function t(p,x){return n.coerce(v,g,E,p,x)}for(var o=!1,i=!1,f=!1,u={},l=t("barmode"),m=0;m<r.length;m++){var h=r[m];if(d.traceIs(h,"bar")&&h.visible)o=!0;else continue;if(l==="group"){var w=h.xaxis+h.yaxis;u[w]&&(f=!0),u[w]=!0}if(h.visible&&h.type==="histogram"){var c=S.getFromId({_fullLayout:g},h[h.orientation==="v"?"xaxis":"yaxis"]);c.type!=="category"&&(i=!0)}}if(!o){delete g.barmode;return}l!=="overlay"&&t("barnorm"),t("bargap",i&&!f?0:.2),t("bargroupgap");var a=t("barcornerradius");g.barcornerradius=T(a)}},98184:function(U,F,e){var d=e(33428),S=e(38248),n=e(3400),E=e(72736),T=e(76308),v=e(43616),g=e(24040),r=e(54460).tickText,t=e(82744),o=t.recordMinTextSize,i=t.clearMinTextSize,f=e(60100),u=e(60444),l=e(78048),m=e(20832),h=m.text,w=m.textposition,c=e(10624).appendArrayPointValue,a=l.TEXTPAD;function p($){return $.id}function x($){if($.ids)return p}function A($){return($>0)-($<0)}function P($,ne){return $<ne?1:-1}function y($,ne,q,ue){var te=[],J=[],ie=ue?ne:q,K=ue?q:ne;return te[0]=ie.c2p($.s0,!0),J[0]=K.c2p($.p0,!0),te[1]=ie.c2p($.s1,!0),J[1]=K.c2p($.p1,!0),ue?[te,J]:[J,te]}function C($,ne,q,ue){if(!ne.uniformtext.mode&&M(q)){var te;return ue&&(te=ue()),$.transition().duration(q.duration).ease(q.easing).each("end",function(){te&&te()}).each("interrupt",function(){te&&te()})}else return $}function M($){return $&&$.duration>0}function s($,ne,q,ue,te,J){var ie=ne.xaxis,K=ne.yaxis,ee=$._fullLayout,le=$._context.staticPlot;te||(te={mode:ee.barmode,norm:ee.barmode,gap:ee.bargap,groupgap:ee.bargroupgap},i("bar",ee));var j=n.makeTraceGroups(ue,q,"trace bars").each(function(Z){var fe=d.select(this),re=Z[0].trace,ce=Z[0].t,xe=re.type==="waterfall",Te=re.type==="funnel",we=re.type==="histogram",_e=re.type==="bar",ke=_e||Te,Ne=0;xe&&re.connector.visible&&re.connector.mode==="between"&&(Ne=re.connector.line.width/2);var Ee=re.orientation==="h",ze=M(te),Ce=n.ensureSingle(fe,"g","points"),Oe=x(re),Le=Ce.selectAll("g.point").data(n.identity,Oe);Le.enter().append("g").classed("point",!0),Le.exit().remove(),Le.each(function(rt,ot){var $e=d.select(this),qe=y(rt,ie,K,Ee),ht=qe[0][0],vt=qe[0][1],pt=qe[1][0],wt=qe[1][1],Et=(Ee?vt-ht:wt-pt)===0;Et&&ke&&u.getLineWidth(re,rt)&&(Et=!1),Et||(Et=!S(ht)||!S(vt)||!S(pt)||!S(wt)),rt.isBlank=Et,Et&&(Ee?vt=ht:wt=pt),Ne&&!Et&&(Ee?(ht-=P(ht,vt)*Ne,vt+=P(ht,vt)*Ne):(pt-=P(pt,wt)*Ne,wt+=P(pt,wt)*Ne));var nt,Fe;if(re.type==="waterfall"){if(!Et){var We=re[rt.dir].marker;nt=We.line.width,Fe=We.color}}else nt=u.getLineWidth(re,rt),Fe=rt.mc||re.marker.color;function Ze(ut){var bt=d.round(nt/2%1,2);return te.gap===0&&te.groupgap===0?d.round(Math.round(ut)-bt,2):ut}function Ye(ut,bt,St){return St&&ut===bt?ut:Math.abs(ut-bt)>=2?Ze(ut):ut>bt?Math.ceil(ut):Math.floor(ut)}var Ie=T.opacity(Fe),De=Ie<1||nt>.01?Ze:Ye;$._context.staticPlot||(ht=De(ht,vt,Ee),vt=De(vt,ht,Ee),pt=De(pt,wt,!Ee),wt=De(wt,pt,!Ee));var je=Ee?ie.c2p:K.c2p,Re;rt.s0>0?Re=rt._sMax:rt.s0<0?Re=rt._sMin:Re=rt.s1>0?rt._sMax:rt._sMin;function pe(ut,bt){if(!ut)return 0;var St=Math.abs(Ee?wt-pt:vt-ht),Pt=Math.abs(Ee?vt-ht:wt-pt),Ht=De(Math.abs(je(Re,!0)-je(0,!0))),Bt=rt.hasB?Math.min(St/2,Pt/2):Math.min(St/2,Ht),Nt;if(bt==="%"){var Kt=Math.min(50,ut);Nt=St*(Kt/100)}else Nt=ut;return De(Math.max(Math.min(Nt,Bt),0))}var be=_e||we?pe(ce.cornerradiusvalue,ce.cornerradiusform):0,Ue,et,st="M"+ht+","+pt+"V"+wt+"H"+vt+"V"+pt+"Z",lt=0;if(be&&rt.s){var Gt=A(rt.s0)===0||A(rt.s)===A(rt.s0)?rt.s1:rt.s0;if(lt=De(rt.hasB?0:Math.abs(je(Re,!0)-je(Gt,!0))),lt<be){var Zt=P(ht,vt),Tt=P(pt,wt),It=Zt===-Tt?1:0;if(Ee)if(rt.hasB)Ue="M"+(ht+be*Zt)+","+pt+"A "+be+","+be+" 0 0 "+It+" "+ht+","+(pt+be*Tt)+"V"+(wt-be*Tt)+"A "+be+","+be+" 0 0 "+It+" "+(ht+be*Zt)+","+wt+"H"+(vt-be*Zt)+"A "+be+","+be+" 0 0 "+It+" "+vt+","+(wt-be*Tt)+"V"+(pt+be*Tt)+"A "+be+","+be+" 0 0 "+It+" "+(vt-be*Zt)+","+pt+"Z";else{et=Math.abs(vt-ht)+lt;var Xt=et<be?be-Math.sqrt(et*(2*be-et)):0,gr=lt>0?Math.sqrt(lt*(2*be-lt)):0,gt=Zt>0?Math.max:Math.min;Ue="M"+ht+","+pt+"V"+(wt-Xt*Tt)+"H"+gt(vt-(be-lt)*Zt,ht)+"A "+be+","+be+" 0 0 "+It+" "+vt+","+(wt-be*Tt-gr)+"V"+(pt+be*Tt+gr)+"A "+be+","+be+" 0 0 "+It+" "+gt(vt-(be-lt)*Zt,ht)+","+(pt+Xt*Tt)+"Z"}else if(rt.hasB)Ue="M"+(ht+be*Zt)+","+pt+"A "+be+","+be+" 0 0 "+It+" "+ht+","+(pt+be*Tt)+"V"+(wt-be*Tt)+"A "+be+","+be+" 0 0 "+It+" "+(ht+be*Zt)+","+wt+"H"+(vt-be*Zt)+"A "+be+","+be+" 0 0 "+It+" "+vt+","+(wt-be*Tt)+"V"+(pt+be*Tt)+"A "+be+","+be+" 0 0 "+It+" "+(vt-be*Zt)+","+pt+"Z";else{et=Math.abs(wt-pt)+lt;var jt=et<be?be-Math.sqrt(et*(2*be-et)):0,Qt=lt>0?Math.sqrt(lt*(2*be-lt)):0,mr=Tt>0?Math.max:Math.min;Ue="M"+(ht+jt*Zt)+","+pt+"V"+mr(wt-(be-lt)*Tt,pt)+"A "+be+","+be+" 0 0 "+It+" "+(ht+be*Zt-Qt)+","+wt+"H"+(vt-be*Zt+Qt)+"A "+be+","+be+" 0 0 "+It+" "+(vt-jt*Zt)+","+mr(wt-(be-lt)*Tt,pt)+"V"+pt+"Z"}}else Ue=st}else Ue=st;var or=C(n.ensureSingle($e,"path"),ee,te,J);if(or.style("vector-effect",le?"none":"non-scaling-stroke").attr("d",isNaN((vt-ht)*(wt-pt))||Et&&$._context.staticPlot?"M0,0Z":Ue).call(v.setClipUrl,ne.layerClipId,$),!ee.uniformtext.mode&&ze){var mt=v.makePointStyleFns(re);v.singlePointStyle(rt,or,re,mt,$)}_($,ne,$e,Z,ot,ht,vt,pt,wt,be,lt,te,J),ne.layerClipId&&v.hideOutsideRangePoint(rt,$e.select("text"),ie,K,re.xcalendar,re.ycalendar)});var Ge=re.cliponaxis===!1;v.setClipUrl(fe,Ge?null:ne.layerClipId,$)});g.getComponentMethod("errorbars","plot")($,j,ne,te)}function _($,ne,q,ue,te,J,ie,K,ee,le,j,Z,fe){var re=ne.xaxis,ce=ne.yaxis,xe=$._fullLayout,Te;function we(et,st,lt){var Gt=n.ensureSingle(et,"text").text(st).attr({class:"bartext bartext-"+Te,"text-anchor":"middle","data-notex":1}).call(v.font,lt).call(E.convertToTspans,$);return Gt}var _e=ue[0].trace,ke=_e.orientation==="h",Ne=B(xe,ue,te,re,ce);Te=z(_e,te);var Ee=Z.mode==="stack"||Z.mode==="relative",ze=ue[te],Ce=!Ee||ze._outmost,Oe=ze.hasB,Le=le&&le-j>a;if(!Ne||Te==="none"||(ze.isBlank||J===ie||K===ee)&&(Te==="auto"||Te==="inside")){q.select("text").remove();return}var Ge=xe.font,rt=f.getBarColor(ue[te],_e),ot=f.getInsideTextFont(_e,te,Ge,rt),$e=f.getOutsideTextFont(_e,te,Ge),qe=_e.insidetextanchor||"end",ht=q.datum();ke?re.type==="log"&&ht.s0<=0&&(re.range[0]<re.range[1]?J=0:J=re._length):ce.type==="log"&&ht.s0<=0&&(ce.range[0]<ce.range[1]?K=ce._length:K=0);var vt=Math.abs(ie-J),pt=Math.abs(ee-K),wt=vt-2*a,Et=pt-2*a,nt,Fe,We,Ze,Ye;if(Te==="outside"&&!Ce&&!ze.hasB&&(Te="inside"),Te==="auto")if(Ce){Te="inside",Ye=n.ensureUniformFontSize($,ot),nt=we(q,Ne,Ye),Fe=v.bBox(nt.node()),We=Fe.width,Ze=Fe.height;var Ie=We>0&&Ze>0,De;Le?Oe?De=b(wt-2*le,Et,We,Ze,ke)||b(wt,Et-2*le,We,Ze,ke):ke?De=b(wt-(le-j),Et,We,Ze,ke)||b(wt,Et-2*(le-j),We,Ze,ke):De=b(wt,Et-(le-j),We,Ze,ke)||b(wt-2*(le-j),Et,We,Ze,ke):De=b(wt,Et,We,Ze,ke),Ie&&De?Te="inside":(Te="outside",nt.remove(),nt=null)}else Te="inside";if(!nt){Ye=n.ensureUniformFontSize($,Te==="outside"?$e:ot),nt=we(q,Ne,Ye);var je=nt.attr("transform");if(nt.attr("transform",""),Fe=v.bBox(nt.node()),We=Fe.width,Ze=Fe.height,nt.attr("transform",je),We<=0||Ze<=0){nt.remove();return}}var Re=_e.textangle,pe,be;Te==="outside"?(be=_e.constraintext==="both"||_e.constraintext==="outside",pe=N(J,ie,K,ee,Fe,{isHorizontal:ke,constrained:be,angle:Re})):(be=_e.constraintext==="both"||_e.constraintext==="inside",pe=V(J,ie,K,ee,Fe,{isHorizontal:ke,constrained:be,angle:Re,anchor:qe,hasB:Oe,r:le,overhead:j})),pe.fontSize=Ye.size,o(_e.type==="histogram"?"bar":_e.type,pe,xe),ze.transform=pe;var Ue=C(nt,xe,Z,fe);n.setTransormAndDisplay(Ue,pe)}function b($,ne,q,ue,te){if($<0||ne<0)return!1;var J=q<=$&&ue<=ne,ie=q<=ne&&ue<=$,K=te?$>=q*(ne/ue):ne>=ue*($/q);return J||ie||K}function k($){return $==="auto"?0:$}function D($,ne){var q=Math.PI/180*ne,ue=Math.abs(Math.sin(q)),te=Math.abs(Math.cos(q));return{x:$.width*te+$.height*ue,y:$.width*ue+$.height*te}}function V($,ne,q,ue,te,J){var ie=!!J.isHorizontal,K=!!J.constrained,ee=J.angle||0,le=J.anchor,j=le==="end",Z=le==="start",fe=J.leftToRight||0,re=(fe+1)/2,ce=1-re,xe=J.hasB,Te=J.r,we=J.overhead,_e=te.width,ke=te.height,Ne=Math.abs(ne-$),Ee=Math.abs(ue-q),ze=Ne>2*a&&Ee>2*a?a:0;Ne-=2*ze,Ee-=2*ze;var Ce=k(ee);ee==="auto"&&!(_e<=Ne&&ke<=Ee)&&(_e>Ne||ke>Ee)&&(!(_e>Ee||ke>Ne)||_e<ke!=Ne<Ee)&&(Ce+=90);var Oe=D(te,Ce),Le,Ge;if(Te&&Te-we>a){var rt=O($,ne,q,ue,Oe,Te,we,ie,xe);Le=rt.scale,Ge=rt.pad}else Le=1,K&&(Le=Math.min(1,Ne/Oe.x,Ee/Oe.y)),Ge=0;var ot=te.left*ce+te.right*re,$e=(te.top+te.bottom)/2,qe=($+a)*ce+(ne-a)*re,ht=(q+ue)/2,vt=0,pt=0;if(Z||j){var wt=(ie?Oe.x:Oe.y)/2;Te&&(j||xe)&&(ze+=Ge);var Et=ie?P($,ne):P(q,ue);ie?Z?(qe=$+Et*ze,vt=-Et*wt):(qe=ne-Et*ze,vt=Et*wt):Z?(ht=q+Et*ze,pt=-Et*wt):(ht=ue-Et*ze,pt=Et*wt)}return{textX:ot,textY:$e,targetX:qe,targetY:ht,anchorX:vt,anchorY:pt,scale:Le,rotate:Ce}}function O($,ne,q,ue,te,J,ie,K,ee){var le=Math.max(0,Math.abs(ne-$)-2*a),j=Math.max(0,Math.abs(ue-q)-2*a),Z=J-a,fe=ie?Z-Math.sqrt(Z*Z-(Z-ie)*(Z-ie)):Z,re=ee?Z*2:K?Z-ie:2*fe,ce=ee?Z*2:K?2*fe:Z-ie,xe,Te,we,_e,ke;return te.y/te.x>=j/(le-re)?_e=j/te.y:te.y/te.x<=(j-ce)/le?_e=le/te.x:!ee&&K?(xe=te.x*te.x+te.y*te.y/4,Te=-2*te.x*(le-Z)-te.y*(j/2-Z),we=(le-Z)*(le-Z)+(j/2-Z)*(j/2-Z)-Z*Z,_e=(-Te+Math.sqrt(Te*Te-4*xe*we))/(2*xe)):ee?(xe=(te.x*te.x+te.y*te.y)/4,Te=-te.x*(le/2-Z)-te.y*(j/2-Z),we=(le/2-Z)*(le/2-Z)+(j/2-Z)*(j/2-Z)-Z*Z,_e=(-Te+Math.sqrt(Te*Te-4*xe*we))/(2*xe)):(xe=te.x*te.x/4+te.y*te.y,Te=-te.x*(le/2-Z)-2*te.y*(j-Z),we=(le/2-Z)*(le/2-Z)+(j-Z)*(j-Z)-Z*Z,_e=(-Te+Math.sqrt(Te*Te-4*xe*we))/(2*xe)),_e=Math.min(1,_e),K?ke=Math.max(0,Z-Math.sqrt(Math.max(0,Z*Z-(Z-(j-te.y*_e)/2)*(Z-(j-te.y*_e)/2)))-ie):ke=Math.max(0,Z-Math.sqrt(Math.max(0,Z*Z-(Z-(le-te.x*_e)/2)*(Z-(le-te.x*_e)/2)))-ie),{scale:_e,pad:ke}}function N($,ne,q,ue,te,J){var ie=!!J.isHorizontal,K=!!J.constrained,ee=J.angle||0,le=te.width,j=te.height,Z=Math.abs(ne-$),fe=Math.abs(ue-q),re;ie?re=fe>2*a?a:0:re=Z>2*a?a:0;var ce=1;K&&(ce=ie?Math.min(1,fe/j):Math.min(1,Z/le));var xe=k(ee),Te=D(te,xe),we=(ie?Te.x:Te.y)/2,_e=(te.left+te.right)/2,ke=(te.top+te.bottom)/2,Ne=($+ne)/2,Ee=(q+ue)/2,ze=0,Ce=0,Oe=ie?P(ne,$):P(q,ue);return ie?(Ne=ne-Oe*re,ze=Oe*we):(Ee=ue+Oe*re,Ce=-Oe*we),{textX:_e,textY:ke,targetX:Ne,targetY:Ee,anchorX:ze,anchorY:Ce,scale:ce,rotate:xe}}function B($,ne,q,ue,te){var J=ne[0].trace,ie=J.texttemplate,K;return ie?K=H($,ne,q,ue,te):J.textinfo?K=X(ne,q,ue,te):K=u.getValue(J.text,q),u.coerceString(h,K)}function z($,ne){var q=u.getValue($.textposition,ne);return u.coerceEnumerated(w,q)}function H($,ne,q,ue,te){var J=ne[0].trace,ie=n.castOption(J,q,"texttemplate");if(!ie)return"";var K=J.type==="histogram",ee=J.type==="waterfall",le=J.type==="funnel",j=J.orientation==="h",Z,fe,re,ce;j?(Z="y",fe=te,re="x",ce=ue):(Z="x",fe=ue,re="y",ce=te);function xe(ze){return r(fe,fe.c2l(ze),!0).text}function Te(ze){return r(ce,ce.c2l(ze),!0).text}var we=ne[q],_e={};_e.label=we.p,_e.labelLabel=_e[Z+"Label"]=xe(we.p);var ke=n.castOption(J,we.i,"text");(ke===0||ke)&&(_e.text=ke),_e.value=we.s,_e.valueLabel=_e[re+"Label"]=Te(we.s);var Ne={};c(Ne,J,we.i),(K||Ne.x===void 0)&&(Ne.x=j?_e.value:_e.label),(K||Ne.y===void 0)&&(Ne.y=j?_e.label:_e.value),(K||Ne.xLabel===void 0)&&(Ne.xLabel=j?_e.valueLabel:_e.labelLabel),(K||Ne.yLabel===void 0)&&(Ne.yLabel=j?_e.labelLabel:_e.valueLabel),ee&&(_e.delta=+we.rawS||we.s,_e.deltaLabel=Te(_e.delta),_e.final=we.v,_e.finalLabel=Te(_e.final),_e.initial=_e.final-_e.delta,_e.initialLabel=Te(_e.initial)),le&&(_e.value=we.s,_e.valueLabel=Te(_e.value),_e.percentInitial=we.begR,_e.percentInitialLabel=n.formatPercent(we.begR),_e.percentPrevious=we.difR,_e.percentPreviousLabel=n.formatPercent(we.difR),_e.percentTotal=we.sumR,_e.percenTotalLabel=n.formatPercent(we.sumR));var Ee=n.castOption(J,we.i,"customdata");return Ee&&(_e.customdata=Ee),n.texttemplateString(ie,_e,$._d3locale,Ne,_e,J._meta||{})}function X($,ne,q,ue){var te=$[0].trace,J=te.orientation==="h",ie=te.type==="waterfall",K=te.type==="funnel";function ee(Ee){var ze=J?ue:q;return r(ze,Ee,!0).text}function le(Ee){var ze=J?q:ue;return r(ze,+Ee,!0).text}var j=te.textinfo,Z=$[ne],fe=j.split("+"),re=[],ce,xe=function(Ee){return fe.indexOf(Ee)!==-1};if(xe("label")&&re.push(ee($[ne].p)),xe("text")&&(ce=n.castOption(te,Z.i,"text"),(ce===0||ce)&&re.push(ce)),ie){var Te=+Z.rawS||Z.s,we=Z.v,_e=we-Te;xe("initial")&&re.push(le(_e)),xe("delta")&&re.push(le(Te)),xe("final")&&re.push(le(we))}if(K){xe("value")&&re.push(le(Z.s));var ke=0;xe("percent initial")&&ke++,xe("percent previous")&&ke++,xe("percent total")&&ke++;var Ne=ke>1;xe("percent initial")&&(ce=n.formatPercent(Z.begR),Ne&&(ce+=" of initial"),re.push(ce)),xe("percent previous")&&(ce=n.formatPercent(Z.difR),Ne&&(ce+=" of previous"),re.push(ce)),xe("percent total")&&(ce=n.formatPercent(Z.sumR),Ne&&(ce+=" of total"),re.push(ce))}return re.join("<br>")}U.exports={plot:s,toMoveInsideBar:V}},45784:function(U){U.exports=function(d,S){var n=d.cd,E=d.xaxis,T=d.yaxis,v=n[0].trace,g=v.type==="funnel",r=v.orientation==="h",t=[],o;if(S===!1)for(o=0;o<n.length;o++)n[o].selected=0;else for(o=0;o<n.length;o++){var i=n[o],f="ct"in i?i.ct:F(i,E,T,r,g);S.contains(f,!1,o,d)?(t.push({pointNumber:o,x:E.c2d(i.x),y:T.c2d(i.y)}),i.selected=1):i.selected=0}return t};function F(e,d,S,n,E){var T=d.c2p(n?e.s0:e.p0,!0),v=d.c2p(n?e.s1:e.p1,!0),g=S.c2p(n?e.p0:e.s0,!0),r=S.c2p(n?e.p1:e.s1,!0);return E?[(T+v)/2,(g+r)/2]:n?[v,(g+r)/2]:[(T+v)/2,r]}},72592:function(U,F,e){U.exports=S;var d=e(3400).distinctVals;function S(n,E){this.traces=n,this.sepNegVal=E.sepNegVal,this.overlapNoMerge=E.overlapNoMerge;for(var T=1/0,v=E.posAxis._id.charAt(0),g=[],r=0;r<n.length;r++){for(var t=n[r],o=0;o<t.length;o++){var i=t[o],f=i.p;f===void 0&&(f=i[v]),f!==void 0&&g.push(f)}t[0]&&t[0].width1&&(T=Math.min(t[0].width1,T))}this.positions=g;var u=d(g);this.distinctPositions=u.vals,u.vals.length===1&&T!==1/0?this.minDiff=T:this.minDiff=Math.min(u.minDiff,T);var l=(E.posAxis||{}).type;(l==="category"||l==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}S.prototype.put=function(E,T){var v=this.getLabel(E,T),g=this.bins[v]||0;return this.bins[v]=g+T,g},S.prototype.get=function(E,T){var v=this.getLabel(E,T);return this.bins[v]||0},S.prototype.getLabel=function(E,T){var v=T<0&&this.sepNegVal?"v":"^",g=this.overlapNoMerge?E:Math.round(E/this.binWidth);return v+g}},60100:function(U,F,e){var d=e(33428),S=e(76308),n=e(43616),E=e(3400),T=e(24040),v=e(82744).resizeText,g=e(20832),r=g.textfont,t=g.insidetextfont,o=g.outsidetextfont,i=e(60444);function f(y){var C=d.select(y).selectAll('g[class^="barlayer"]').selectAll("g.trace");v(y,C,"bar");var M=C.size(),s=y._fullLayout;C.style("opacity",function(_){return _[0].trace.opacity}).each(function(_){(s.barmode==="stack"&&M>1||s.bargap===0&&s.bargroupgap===0&&!_[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),C.selectAll("g.points").each(function(_){var b=d.select(this),k=_[0].trace;u(b,k,y)}),T.getComponentMethod("errorbars","style")(C)}function u(y,C,M){n.pointStyle(y.selectAll("path"),C,M),l(y,C,M)}function l(y,C,M){y.selectAll("text").each(function(s){var _=d.select(this),b=E.ensureUniformFontSize(M,c(_,s,C,M));n.font(_,b)})}function m(y,C,M){var s=C[0].trace;s.selectedpoints?h(M,s,y):(u(M,s,y),T.getComponentMethod("errorbars","style")(M))}function h(y,C,M){n.selectedPointStyle(y.selectAll("path"),C),w(y.selectAll("text"),C,M)}function w(y,C,M){y.each(function(s){var _=d.select(this),b;if(s.selected){b=E.ensureUniformFontSize(M,c(_,s,C,M));var k=C.selected.textfont&&C.selected.textfont.color;k&&(b.color=k),n.font(_,b)}else n.selectedTextStyle(_,C)})}function c(y,C,M,s){var _=s._fullLayout.font,b=M.textfont;if(y.classed("bartext-inside")){var k=P(C,M);b=p(M,C.i,_,k)}else y.classed("bartext-outside")&&(b=x(M,C.i,_));return b}function a(y,C,M){return A(r,y.textfont,C,M)}function p(y,C,M,s){var _=a(y,C,M),b=y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[C]===void 0;return b&&(_={color:S.contrast(s),family:_.family,size:_.size,weight:_.weight,style:_.style,variant:_.variant,textcase:_.textcase,lineposition:_.lineposition,shadow:_.shadow}),A(t,y.insidetextfont,C,_)}function x(y,C,M){var s=a(y,C,M);return A(o,y.outsidetextfont,C,s)}function A(y,C,M,s){C=C||{};var _=i.getValue(C.family,M),b=i.getValue(C.size,M),k=i.getValue(C.color,M),D=i.getValue(C.weight,M),V=i.getValue(C.style,M),O=i.getValue(C.variant,M),N=i.getValue(C.textcase,M),B=i.getValue(C.lineposition,M),z=i.getValue(C.shadow,M);return{family:i.coerceString(y.family,_,s.family),size:i.coerceNumber(y.size,b,s.size),color:i.coerceColor(y.color,k,s.color),weight:i.coerceString(y.weight,D,s.weight),style:i.coerceString(y.style,V,s.style),variant:i.coerceString(y.variant,O,s.variant),textcase:i.coerceString(y.variant,N,s.textcase),lineposition:i.coerceString(y.variant,B,s.lineposition),shadow:i.coerceString(y.variant,z,s.shadow)}}function P(y,C){return C.type==="waterfall"?C[y.dir].marker.color:y.mcc||y.mc||C.marker.color}U.exports={style:f,styleTextPoints:l,styleOnSelect:m,getInsideTextFont:p,getOutsideTextFont:x,getBarColor:P,resizeText:v}},55592:function(U,F,e){var d=e(76308),S=e(94288).hasColorscale,n=e(27260),E=e(3400).coercePattern;U.exports=function(v,g,r,t,o){var i=r("marker.color",t),f=S(v,"marker");f&&n(v,g,o,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",d.defaultLine),S(v,"marker.line")&&n(v,g,o,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),E(r,"marker.pattern",i,f),r("selected.marker.color"),r("unselected.marker.color")}},82744:function(U,F,e){var d=e(33428),S=e(3400);function n(g,r,t){var o=g._fullLayout,i=o["_"+t+"Text_minsize"];if(i){var f=o.uniformtext.mode==="hide",u;switch(t){case"funnelarea":case"pie":case"sunburst":u="g.slice";break;case"treemap":case"icicle":u="g.slice, g.pathbar";break;default:u="g.points > g.point"}r.selectAll(u).each(function(l){var m=l.transform;if(m){m.scale=f&&m.hide?0:i/m.fontSize;var h=d.select(this).select("text");S.setTransormAndDisplay(h,m)}})}}function E(g,r,t){if(t.uniformtext.mode){var o=v(g),i=t.uniformtext.minsize,f=r.scale*r.fontSize;r.hide=f<i,t[o]=t[o]||1/0,r.hide||(t[o]=Math.min(t[o],Math.max(f,i)))}}function T(g,r){var t=v(g);r[t]=void 0}function v(g){return"_"+g+"Text_minsize"}U.exports={recordMinTextSize:E,clearMinTextSize:T,resizeText:n}},78100:function(U,F,e){var d=e(21776).Ks,S=e(92880).extendFlat,n=e(8319),E=e(20832);U.exports={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:S({},E.base,{}),offset:S({},E.offset,{}),width:S({},E.width,{}),text:S({},E.text,{}),hovertext:S({},E.hovertext,{}),marker:T(),hoverinfo:n.hoverinfo,hovertemplate:d(),selected:E.selected,unselected:E.unselected};function T(){var v=S({},E.marker);return delete v.cornerradius,v}},47056:function(U,F,e){var d=e(94288).hasColorscale,S=e(47128),n=e(3400).isArrayOrTypedArray,E=e(84664),T=e(96376).setGroupPositions,v=e(4500),g=e(24040).traceIs,r=e(3400).extendFlat;function t(i,f){for(var u=i._fullLayout,l=f.subplot,m=u[l].radialaxis,h=u[l].angularaxis,w=m.makeCalcdata(f,"r"),c=h.makeCalcdata(f,"theta"),a=f._length,p=new Array(a),x=w,A=c,P=0;P<a;P++)p[P]={p:A[P],s:x[P]};function y(C){var M=f[C];M!==void 0&&(f["_"+C]=n(M)?h.makeCalcdata(f,C):h.d2c(M,f.thetaunit))}return h.type==="linear"&&(y("width"),y("offset")),d(f,"marker")&&S(i,f,{vals:f.marker.color,containerStr:"marker",cLetter:"c"}),d(f,"marker.line")&&S(i,f,{vals:f.marker.line.color,containerStr:"marker.line",cLetter:"c"}),E(p,f),v(p,f),p}function o(i,f,u){for(var l=i.calcdata,m=[],h=0;h<l.length;h++){var w=l[h],c=w[0].trace;c.visible===!0&&g(c,"bar")&&c.subplot===u&&m.push(w)}var a=r({},f.radialaxis,{_id:"x"}),p=f.angularaxis;T(i,p,a,m,{mode:f.barmode,norm:f.barnorm,gap:f.bargap,groupgap:f.bargroupgap})}U.exports={calc:t,crossTraceCalc:o}},70384:function(U,F,e){var d=e(3400),S=e(85968).handleRThetaDefaults,n=e(55592),E=e(78100);U.exports=function(v,g,r,t){function o(f,u){return d.coerce(v,g,E,f,u)}var i=S(v,g,t,o);if(!i){g.visible=!1;return}o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),n(v,g,o,r,t),d.coerceSelectionMarkerOpacity(g,o)}},68896:function(U,F,e){var d=e(93024),S=e(3400),n=e(63400).getTraceColor,E=S.fillText,T=e(8504).makeHoverPointText,v=e(57384).isPtInsidePolygon;U.exports=function(r,t,o){var i=r.cd,f=i[0].trace,u=r.subplot,l=u.radialAxis,m=u.angularAxis,h=u.vangles,w=h?v:S.isPtInsideSector,c=r.maxHoverDistance,a=m._period||2*Math.PI,p=Math.abs(l.g2p(Math.sqrt(t*t+o*o))),x=Math.atan2(o,t);l.range[0]>l.range[1]&&(x+=Math.PI);var A=function(M){return w(p,x,[M.rp0,M.rp1],[M.thetag0,M.thetag1],h)?c+Math.min(1,Math.abs(M.thetag1-M.thetag0)/a)-1+(M.rp1-p)/(M.rp1-M.rp0)-1:1/0};if(d.getClosest(i,A,r),r.index!==!1){var P=r.index,y=i[P];r.x0=r.x1=y.ct[0],r.y0=r.y1=y.ct[1];var C=S.extendFlat({},y,{r:y.s,theta:y.p});return E(y,f,r),T(C,f,u,r),r.hovertemplate=f.hovertemplate,r.color=n(f,y),r.xLabelVal=r.yLabelVal=void 0,y.s<0&&(r.idealAlign="left"),[r]}}},94456:function(U,F,e){U.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(U){U.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(U,F,e){var d=e(3400),S=e(9320);U.exports=function(n,E,T){var v={},g;function r(i,f){return d.coerce(n[g]||{},E[g],S,i,f)}for(var t=0;t<T.length;t++){var o=T[t];o.type==="barpolar"&&o.visible===!0&&(g=o.subplot,v[g]||(r("barmode"),r("bargap"),v[g]=1))}}},42040:function(U,F,e){var d=e(33428),S=e(38248),n=e(3400),E=e(43616),T=e(57384);U.exports=function(r,t,o){var i=r._context.staticPlot,f=t.xaxis,u=t.yaxis,l=t.radialAxis,m=t.angularAxis,h=v(t),w=t.layers.frontplot.select("g.barlayer");n.makeTraceGroups(w,o,"trace bars").each(function(){var c=d.select(this),a=n.ensureSingle(c,"g","points"),p=a.selectAll("g.point").data(n.identity);p.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),p.exit().remove(),p.each(function(x){var A=d.select(this),P=x.rp0=l.c2p(x.s0),y=x.rp1=l.c2p(x.s1),C=x.thetag0=m.c2g(x.p0),M=x.thetag1=m.c2g(x.p1),s;if(!S(P)||!S(y)||!S(C)||!S(M)||P===y||C===M)s="M0,0Z";else{var _=l.c2g(x.s1),b=(C+M)/2;x.ct=[f.c2p(_*Math.cos(b)),u.c2p(_*Math.sin(b))],s=h(P,y,C,M)}n.ensureSingle(A,"path").attr("d",s)}),E.setClipUrl(c,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,r)})};function v(g){var r=g.cxx,t=g.cyy;return g.vangles?function(o,i,f,u){var l,m;n.angleDelta(f,u)>0?(l=f,m=u):(l=u,m=f);var h=T.findEnclosingVertexAngles(l,g.vangles)[0],w=T.findEnclosingVertexAngles(m,g.vangles)[1],c=[h,(l+m)/2,w];return T.pathPolygonAnnulus(o,i,l,m,c,r,t)}:function(o,i,f,u){return n.pathAnnulus(o,i,f,u,r,t)}}},63188:function(U,F,e){var d=e(98304),S=e(52904),n=e(20832),E=e(22548),T=e(29736).axisHoverFormat,v=e(21776).Ks,g=e(92880).extendFlat,r=S.marker,t=r.line;U.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:g({},r.symbol,{arrayOk:!1,editType:"plot"}),opacity:g({},r.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:g({},r.angle,{arrayOk:!1,editType:"calc"}),size:g({},r.size,{arrayOk:!1,editType:"calc"}),color:g({},r.color,{arrayOk:!1,editType:"style"}),line:{color:g({},t.color,{arrayOk:!1,dflt:E.defaultLine,editType:"style"}),width:g({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:{marker:S.selected.marker,editType:"style"},unselected:{marker:S.unselected.marker,editType:"style"},text:g({},S.text,{}),hovertext:g({},S.hovertext,{}),hovertemplate:v({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:S.zorder}},62555:function(U,F,e){var d=e(38248),S=e(54460),n=e(1220),E=e(3400),T=e(39032).BADNUM,v=E._;U.exports=function(x,A){var P=x._fullLayout,y=S.getFromId(x,A.xaxis||"x"),C=S.getFromId(x,A.yaxis||"y"),M=[],s=A.type==="violin"?"_numViolins":"_numBoxes",_,b,k,D,V,O,N;A.orientation==="h"?(k=y,D="x",V=C,O="y",N=!!A.yperiodalignment):(k=C,D="y",V=y,O="x",N=!!A.xperiodalignment);var B=g(A,O,V,P[s]),z=B[0],H=B[1],X=E.distinctVals(z,V),$=X.vals,ne=X.minDiff/2,q,ue,te,J,ie,K,ee=(A.boxpoints||A.points)==="all"?E.identity:function(Et){return Et.v<q.lf||Et.v>q.uf};if(A._hasPreCompStats){var le=A[D],j=function(Et){return k.d2c((A[Et]||[])[_])},Z=1/0,fe=-1/0;for(_=0;_<A._length;_++){var re=z[_];if(d(re)){if(q={},q.pos=q[O]=re,N&&H&&(q.orig_p=H[_]),q.q1=j("q1"),q.med=j("median"),q.q3=j("q3"),ue=[],le&&E.isArrayOrTypedArray(le[_]))for(b=0;b<le[_].length;b++)K=k.d2c(le[_][b]),K!==T&&(ie={v:K,i:[_,b]},i(ie,A,[_,b]),ue.push(ie));if(q.pts=ue.sort(u),te=q[D]=ue.map(l),J=te.length,q.med!==T&&q.q1!==T&&q.q3!==T&&q.med>=q.q1&&q.q3>=q.med){var ce=j("lowerfence");q.lf=ce!==T&&ce<=q.q1?ce:m(q,te,J);var xe=j("upperfence");q.uf=xe!==T&&xe>=q.q3?xe:h(q,te,J);var Te=j("mean");q.mean=Te!==T?Te:J?E.mean(te,J):(q.q1+q.q3)/2;var we=j("sd");q.sd=Te!==T&&we>=0?we:J?E.stdev(te,J,q.mean):q.q3-q.q1,q.lo=w(q),q.uo=c(q);var _e=j("notchspan");_e=_e!==T&&_e>0?_e:a(q,J),q.ln=q.med-_e,q.un=q.med+_e;var ke=q.lf,Ne=q.uf;A.boxpoints&&te.length&&(ke=Math.min(ke,te[0]),Ne=Math.max(Ne,te[J-1])),A.notched&&(ke=Math.min(ke,q.ln),Ne=Math.max(Ne,q.un)),q.min=ke,q.max=Ne}else{E.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+q.q1,"median = "+q.med,"q3 = "+q.q3].join(`
`));var Ee;q.med!==T?Ee=q.med:q.q1!==T?q.q3!==T?Ee=(q.q1+q.q3)/2:Ee=q.q1:q.q3!==T?Ee=q.q3:Ee=0,q.med=Ee,q.q1=q.q3=Ee,q.lf=q.uf=Ee,q.mean=q.sd=Ee,q.ln=q.un=Ee,q.min=q.max=Ee}Z=Math.min(Z,q.min),fe=Math.max(fe,q.max),q.pts2=ue.filter(ee),M.push(q)}}A._extremes[k._id]=S.findExtremes(k,[Z,fe],{padded:!0})}else{var ze=k.makeCalcdata(A,D),Ce=r($,ne),Oe=$.length,Le=t(Oe);for(_=0;_<A._length;_++)if(K=ze[_],!!d(K)){var Ge=E.findBin(z[_],Ce);Ge>=0&&Ge<Oe&&(ie={v:K,i:_},i(ie,A,_),Le[Ge].push(ie))}var rt=1/0,ot=-1/0,$e=A.quartilemethod,qe=$e==="exclusive",ht=$e==="inclusive";for(_=0;_<Oe;_++)if(Le[_].length>0){if(q={},q.pos=q[O]=$[_],ue=q.pts=Le[_].sort(u),te=q[D]=ue.map(l),J=te.length,q.min=te[0],q.max=te[J-1],q.mean=E.mean(te,J),q.sd=E.stdev(te,J,q.mean)*A.sdmultiple,q.med=E.interp(te,.5),J%2&&(qe||ht)){var vt,pt;qe?(vt=te.slice(0,J/2),pt=te.slice(J/2+1)):ht&&(vt=te.slice(0,J/2+1),pt=te.slice(J/2)),q.q1=E.interp(vt,.5),q.q3=E.interp(pt,.5)}else q.q1=E.interp(te,.25),q.q3=E.interp(te,.75);q.lf=m(q,te,J),q.uf=h(q,te,J),q.lo=w(q),q.uo=c(q);var wt=a(q,J);q.ln=q.med-wt,q.un=q.med+wt,rt=Math.min(rt,q.ln),ot=Math.max(ot,q.un),q.pts2=ue.filter(ee),M.push(q)}A.notched&&E.isTypedArray(ze)&&(ze=Array.from(ze)),A._extremes[k._id]=S.findExtremes(k,A.notched?ze.concat([rt,ot]):ze,{padded:!0})}return f(M,A),M.length>0?(M[0].t={num:P[s],dPos:ne,posLetter:O,valLetter:D,labels:{med:v(x,"median:"),min:v(x,"min:"),q1:v(x,"q1:"),q3:v(x,"q3:"),max:v(x,"max:"),mean:A.boxmean==="sd"||A.sizemode==="sd"?v(x,"mean  :").replace("",A.sdmultiple===1?"":A.sdmultiple+""):v(x,"mean:"),lf:v(x,"lower fence:"),uf:v(x,"upper fence:")}},P[s]++,M):[{t:{empty:!0}}]};function g(p,x,A,P){var y=x in p,C=x+"0"in p,M="d"+x in p;if(y||C&&M){var s=A.makeCalcdata(p,x),_=n(p,A,x,s).vals;return[_,s]}var b;C?b=p[x+"0"]:"name"in p&&(A.type==="category"||d(p.name)&&["linear","log"].indexOf(A.type)!==-1||E.isDateTime(p.name)&&A.type==="date")?b=p.name:b=P;for(var k=A.type==="multicategory"?A.r2c_just_indices(b):A.d2c(b,0,p[x+"calendar"]),D=p._length,V=new Array(D),O=0;O<D;O++)V[O]=k;return[V]}function r(p,x){for(var A=p.length,P=new Array(A+1),y=0;y<A;y++)P[y]=p[y]-x;return P[A]=p[A-1]+x,P}function t(p){for(var x=new Array(p),A=0;A<p;A++)x[A]=[];return x}var o={text:"tx",hovertext:"htx"};function i(p,x,A){for(var P in o)E.isArrayOrTypedArray(x[P])&&(Array.isArray(A)?E.isArrayOrTypedArray(x[P][A[0]])&&(p[o[P]]=x[P][A[0]][A[1]]):p[o[P]]=x[P][A])}function f(p,x){if(E.isArrayOrTypedArray(x.selectedpoints))for(var A=0;A<p.length;A++){for(var P=p[A].pts||[],y={},C=0;C<P.length;C++)y[P[C].i]=C;E.tagSelected(P,x,y)}}function u(p,x){return p.v-x.v}function l(p){return p.v}function m(p,x,A){return A===0?p.q1:Math.min(p.q1,x[Math.min(E.findBin(2.5*p.q1-1.5*p.q3,x,!0)+1,A-1)])}function h(p,x,A){return A===0?p.q3:Math.max(p.q3,x[Math.max(E.findBin(2.5*p.q3-1.5*p.q1,x),0)])}function w(p){return 4*p.q1-3*p.q3}function c(p){return 4*p.q3-3*p.q1}function a(p,x){return x===0?0:1.57*(p.q3-p.q1)/Math.sqrt(x)}},96404:function(U,F,e){var d=e(54460),S=e(3400),n=e(71888).getAxisGroup,E=["v","h"];function T(g,r){for(var t=g.calcdata,o=r.xaxis,i=r.yaxis,f=0;f<E.length;f++){for(var u=E[f],l=u==="h"?i:o,m=[],h=0;h<t.length;h++){var w=t[h],c=w[0].t,a=w[0].trace;a.visible===!0&&(a.type==="box"||a.type==="candlestick")&&!c.empty&&(a.orientation||"v")===u&&a.xaxis===o._id&&a.yaxis===i._id&&m.push(h)}v("box",g,m,l)}}function v(g,r,t,o){var i=r.calcdata,f=r._fullLayout,u=o._id,l=u.charAt(0),m,h,w,c=[],a=0;for(m=0;m<t.length;m++)for(w=i[t[m]],h=0;h<w.length;h++)c.push(o.c2l(w[h].pos,!0)),a+=(w[h].pts2||[]).length;if(c.length){var p=S.distinctVals(c);(o.type==="category"||o.type==="multicategory")&&(p.minDiff=1);var x=p.minDiff/2;d.minDtick(o,p.minDiff,p.vals[0],!0);var A=g==="violin"?"_numViolins":"_numBoxes",P=f[A],y=f[g+"mode"]==="group"&&P>1,C=1-f[g+"gap"],M=1-f[g+"groupgap"];for(m=0;m<t.length;m++){w=i[t[m]];var s=w[0].trace,_=w[0].t,b=s.width,k=s.side,D,V,O,N;if(b)D=V=N=b/2,O=0;else if(D=x,y){var B=n(f,o._id)+s.orientation,z=f._alignmentOpts[B]||{},H=z[s.alignmentgroup]||{},X=Object.keys(H.offsetGroups||{}).length,$=X||P,ne=X?s._offsetIndex:_.num;V=D*C*M/$,O=2*D*(-.5+(ne+.5)/$)*C,N=D*C/$}else V=D*C*M,O=0,N=D;_.dPos=D,_.bPos=O,_.bdPos=V,_.wHover=N;var q,ue,te=O+V,J,ie,K,ee,le,j,Z=!!b,fe=(s.boxpoints||s.points)&&a>0;if(k==="positive"?(q=D*(b?1:.5),J=te,ue=J=O):k==="negative"?(q=J=O,ue=D*(b?1:.5),ie=te):(q=ue=D,J=ie=te),fe){var re=s.pointpos,ce=s.jitter,xe=s.marker.size/2,Te=0;re+ce>=0&&(Te=te*(re+ce),Te>q?(Z=!0,le=xe,K=Te):Te>J&&(le=xe,K=q)),Te<=q&&(K=q);var we=0;re-ce<=0&&(we=-te*(re-ce),we>ue?(Z=!0,j=xe,ee=we):we>ie&&(j=xe,ee=ue)),we<=ue&&(ee=ue)}else K=q,ee=ue;var _e=new Array(w.length);for(h=0;h<w.length;h++)_e[h]=w[h].pos;s._extremes[u]=d.findExtremes(o,_e,{padded:Z,vpadminus:ee,vpadplus:K,vpadLinearized:!0,ppadminus:{x:j,y:le}[l],ppadplus:{x:le,y:j}[l]})}}}U.exports={crossTraceCalc:T,setPositionOffset:v}},90624:function(U,F,e){var d=e(3400),S=e(24040),n=e(76308),E=e(31147),T=e(20011),v=e(52976),g=e(63188);function r(f,u,l,m){function h(M,s){return d.coerce(f,u,g,M,s)}if(t(f,u,h,m),u.visible!==!1){E(f,u,m,h),h("xhoverformat"),h("yhoverformat");var w=u._hasPreCompStats;w&&(h("lowerfence"),h("upperfence")),h("line.color",(f.marker||{}).color||l),h("line.width"),h("fillcolor",n.addOpacity(u.line.color,.5));var c=!1;if(w){var a=h("mean"),p=h("sd");a&&a.length&&(c=!0,p&&p.length&&(c="sd"))}h("whiskerwidth");var x=h("sizemode"),A;x==="quartiles"&&(A=h("boxmean",c)),h("showwhiskers",x==="quartiles"),(x==="sd"||A==="sd")&&h("sdmultiple"),h("width"),h("quartilemethod");var P=!1;if(w){var y=h("notchspan");y&&y.length&&(P=!0)}else d.validate(f.notchwidth,g.notchwidth)&&(P=!0);var C=h("notched",P);C&&h("notchwidth"),o(f,u,h,{prefix:"box"}),h("zorder")}}function t(f,u,l,m){function h(X){var $=0;return X&&X.length&&($+=1,d.isArrayOrTypedArray(X[0])&&X[0].length&&($+=1)),$}function w(X){return d.validate(f[X],g[X])}var c=l("y"),a=l("x"),p;if(u.type==="box"){var x=l("q1"),A=l("median"),P=l("q3");u._hasPreCompStats=x&&x.length&&A&&A.length&&P&&P.length,p=Math.min(d.minRowLength(x),d.minRowLength(A),d.minRowLength(P))}var y=h(c),C=h(a),M=y&&d.minRowLength(c),s=C&&d.minRowLength(a),_=m.calendar,b={autotypenumbers:m.autotypenumbers},k,D;if(u._hasPreCompStats)switch(String(C)+String(y)){case"00":var V=w("x0")||w("dx"),O=w("y0")||w("dy");O&&!V?k="h":k="v",D=p;break;case"10":k="v",D=Math.min(p,s);break;case"20":k="h",D=Math.min(p,a.length);break;case"01":k="h",D=Math.min(p,M);break;case"02":k="v",D=Math.min(p,c.length);break;case"12":k="v",D=Math.min(p,s,c.length);break;case"21":k="h",D=Math.min(p,a.length,M);break;case"11":D=0;break;case"22":var N=!1,B;for(B=0;B<a.length;B++)if(v(a[B],_,b)==="category"){N=!0;break}if(N)k="v",D=Math.min(p,s,c.length);else{for(B=0;B<c.length;B++)if(v(c[B],_,b)==="category"){N=!0;break}N?(k="h",D=Math.min(p,a.length,M)):(k="v",D=Math.min(p,s,c.length))}break}else y>0?(k="v",C>0?D=Math.min(s,M):D=Math.min(M)):C>0?(k="h",D=Math.min(s)):D=0;if(!D){u.visible=!1;return}u._length=D;var z=l("orientation",k);u._hasPreCompStats?z==="v"&&C===0?(l("x0",0),l("dx",1)):z==="h"&&y===0&&(l("y0",0),l("dy",1)):z==="v"&&C===0?l("x0"):z==="h"&&y===0&&l("y0");var H=S.getComponentMethod("calendars","handleTraceDefaults");H(f,u,["x","y"],m)}function o(f,u,l,m){var h=m.prefix,w=d.coerce2(f,u,g,"marker.outliercolor"),c=l("marker.line.outliercolor"),a="outliers";u._hasPreCompStats?a="all":(w||c)&&(a="suspectedoutliers");var p=l(h+"points",a);p?(l("jitter",p==="all"?.3:0),l("pointpos",p==="all"?-1.5:0),l("marker.symbol"),l("marker.opacity"),l("marker.size"),l("marker.angle"),l("marker.color",u.line.color),l("marker.line.color"),l("marker.line.width"),p==="suspectedoutliers"&&(l("marker.line.outliercolor",u.marker.color),l("marker.line.outlierwidth")),l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"),l("text"),l("hovertext")):delete u.marker;var x=l("hoveron");(x==="all"||x.indexOf("points")!==-1)&&l("hovertemplate"),d.coerceSelectionMarkerOpacity(u,l)}function i(f,u){var l,m;function h(a){return d.coerce(m._input,m,g,a)}for(var w=0;w<f.length;w++){m=f[w];var c=m.type;(c==="box"||c==="violin")&&(l=m._input,u[c+"mode"]==="group"&&T(l,m,u,h))}}U.exports={supplyDefaults:r,crossTraceDefaults:i,handleSampleDefaults:t,handlePointsDefaults:o}},10392:function(U){U.exports=function(e,d){return d.hoverOnBox&&(e.hoverOnBox=d.hoverOnBox),"xVal"in d&&(e.x=d.xVal),"yVal"in d&&(e.y=d.yVal),d.xa&&(e.xaxis=d.xa),d.ya&&(e.yaxis=d.ya),e}},27576:function(U,F,e){var d=e(54460),S=e(3400),n=e(93024),E=e(76308),T=S.fillText;function v(t,o,i,f){var u=t.cd,l=u[0].trace,m=l.hoveron,h=[],w;return m.indexOf("boxes")!==-1&&(h=h.concat(g(t,o,i,f))),m.indexOf("points")!==-1&&(w=r(t,o,i)),f==="closest"?w?[w]:h:(w&&h.push(w),h)}function g(t,o,i,f){var u=t.cd,l=t.xa,m=t.ya,h=u[0].trace,w=u[0].t,c=h.type==="violin",a,p,x,A,P,y,C,M,s,_,b,k=w.bdPos,D,V,O=w.wHover,N=function(we){return x.c2l(we.pos)+w.bPos-x.c2l(y)};c&&h.side!=="both"?(h.side==="positive"&&(s=function(we){var _e=N(we);return n.inbox(_e,_e+O,_)},D=k,V=0),h.side==="negative"&&(s=function(we){var _e=N(we);return n.inbox(_e-O,_e,_)},D=0,V=k)):(s=function(we){var _e=N(we);return n.inbox(_e-O,_e+O,_)},D=V=k);var B;c?B=function(we){return n.inbox(we.span[0]-P,we.span[1]-P,_)}:B=function(we){return n.inbox(we.min-P,we.max-P,_)},h.orientation==="h"?(P=o,y=i,C=B,M=s,a="y",x=m,p="x",A=l):(P=i,y=o,C=s,M=B,a="x",x=l,p="y",A=m);var z=Math.min(1,k/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));_=t.maxHoverDistance-z,b=t.maxSpikeDistance-z;function H(we){return(C(we)+M(we))/2}var X=n.getDistanceFunction(f,C,M,H);if(n.getClosest(u,X,t),t.index===!1)return[];var $=u[t.index],ne=h.line.color,q=(h.marker||{}).color;E.opacity(ne)&&h.line.width?t.color=ne:E.opacity(q)&&h.boxpoints?t.color=q:t.color=h.fillcolor,t[a+"0"]=x.c2p($.pos+w.bPos-V,!0),t[a+"1"]=x.c2p($.pos+w.bPos+D,!0),t[a+"LabelVal"]=$.orig_p!==void 0?$.orig_p:$.pos;var ue=a+"Spike";t.spikeDistance=H($)*b/_,t[ue]=x.c2p($.pos,!0);var te=h.boxmean||h.sizemode==="sd"||(h.meanline||{}).visible,J=h.boxpoints||h.points,ie=J&&te?["max","uf","q3","med","mean","q1","lf","min"]:J&&!te?["max","uf","q3","med","q1","lf","min"]:!J&&te?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],K=A.range[1]<A.range[0];h.orientation===(K?"v":"h")&&ie.reverse();for(var ee=t.spikeDistance,le=t[ue],j=[],Z=0;Z<ie.length;Z++){var fe=ie[Z];if(fe in $){var re=$[fe],ce=A.c2p(re,!0),xe=S.extendFlat({},t);xe.attr=fe,xe[p+"0"]=xe[p+"1"]=ce,xe[p+"LabelVal"]=re,xe[p+"Label"]=(w.labels?w.labels[fe]+" ":"")+d.hoverLabelText(A,re,h[p+"hoverformat"]),xe.hoverOnBox=!0,fe==="mean"&&"sd"in $&&(h.boxmean==="sd"||h.sizemode==="sd")&&(xe[p+"err"]=$.sd),xe.hovertemplate=!1,j.push(xe)}}t.name="",t.spikeDistance=void 0,t[ue]=void 0;for(var Te=0;Te<j.length;Te++)j[Te].attr!=="med"?(j[Te].name="",j[Te].spikeDistance=void 0,j[Te][ue]=void 0):(j[Te].spikeDistance=ee,j[Te][ue]=le);return j}function r(t,o,i){for(var f=t.cd,u=t.xa,l=t.ya,m=f[0].trace,h=u.c2p(o),w=l.c2p(i),c,a=function(B){var z=Math.max(3,B.mrc||0);return Math.max(Math.abs(u.c2p(B.x)-h)-z,1-3/z)},p=function(B){var z=Math.max(3,B.mrc||0);return Math.max(Math.abs(l.c2p(B.y)-w)-z,1-3/z)},x=n.quadrature(a,p),A=!1,P,y,C=0;C<f.length;C++){P=f[C];for(var M=0;M<(P.pts||[]).length;M++){y=P.pts[M];var s=x(y);s<=t.distance&&(t.distance=s,A=[C,M])}}if(!A)return!1;P=f[A[0]],y=P.pts[A[1]];var _=u.c2p(y.x,!0),b=l.c2p(y.y,!0),k=y.mrc||1;c=S.extendFlat({},t,{index:y.i,color:(m.marker||{}).color,name:m.name,x0:_-k,x1:_+k,y0:b-k,y1:b+k,spikeDistance:t.distance,hovertemplate:m.hovertemplate});var D=P.orig_p,V=D!==void 0?D:P.pos,O;m.orientation==="h"?(O=l,c.xLabelVal=y.x,c.yLabelVal=V):(O=u,c.xLabelVal=V,c.yLabelVal=y.y);var N=O._id.charAt(0);return c[N+"Spike"]=O.c2p(P.pos,!0),T(y,m,c),c}U.exports={hoverPoints:v,hoverOnBoxes:g,hoverOnPoints:r}},67244:function(U,F,e){U.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(U){U.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(U,F,e){var d=e(24040),S=e(3400),n=e(16560);function E(v,g,r,t,o){for(var i=o+"Layout",f=!1,u=0;u<r.length;u++){var l=r[u];if(d.traceIs(l,i)){f=!0;break}}f&&(t(o+"mode"),t(o+"gap"),t(o+"groupgap"))}function T(v,g,r){function t(o,i){return S.coerce(v,g,n,o,i)}E(v,g,r,t,"box")}U.exports={supplyLayoutDefaults:T,_supply:E}},18728:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=5,T=.01;function v(o,i,f,u){var l=o._context.staticPlot,m=i.xaxis,h=i.yaxis;S.makeTraceGroups(u,f,"trace boxes").each(function(w){var c=d.select(this),a=w[0],p=a.t,x=a.trace;if(p.wdPos=p.bdPos*x.whiskerwidth,x.visible!==!0||p.empty){c.remove();return}var A,P;x.orientation==="h"?(A=h,P=m):(A=m,P=h),g(c,{pos:A,val:P},x,p,l),r(c,{x:m,y:h},x,p),t(c,{pos:A,val:P},x,p)})}function g(o,i,f,u,l){var m=f.orientation==="h",h=i.val,w=i.pos,c=!!w.rangebreaks,a=u.bPos,p=u.wdPos||0,x=u.bPosPxOffset||0,A=f.whiskerwidth||0,P=f.showwhiskers!==!1,y=f.notched||!1,C=y?1-2*f.notchwidth:1,M,s;Array.isArray(u.bdPos)?(M=u.bdPos[0],s=u.bdPos[1]):(M=u.bdPos,s=u.bdPos);var _=o.selectAll("path.box").data(f.type!=="violin"||f.box.visible?S.identity:[]);_.enter().append("path").style("vector-effect",l?"none":"non-scaling-stroke").attr("class","box"),_.exit().remove(),_.each(function(b){if(b.empty)return d.select(this).attr("d","M0,0Z");var k=w.c2l(b.pos+a,!0),D=w.l2p(k-M)+x,V=w.l2p(k+s)+x,O=c?(D+V)/2:w.l2p(k)+x,N=f.whiskerwidth,B=c?D*N+(1-N)*O:w.l2p(k-p)+x,z=c?V*N+(1-N)*O:w.l2p(k+p)+x,H=w.l2p(k-M*C)+x,X=w.l2p(k+s*C)+x,$=f.sizemode==="sd",ne=h.c2p($?b.mean-b.sd:b.q1,!0),q=$?h.c2p(b.mean+b.sd,!0):h.c2p(b.q3,!0),ue=S.constrain($?h.c2p(b.mean,!0):h.c2p(b.med,!0),Math.min(ne,q)+1,Math.max(ne,q)-1),te=b.lf===void 0||f.boxpoints===!1||$,J=h.c2p(te?b.min:b.lf,!0),ie=h.c2p(te?b.max:b.uf,!0),K=h.c2p(b.ln,!0),ee=h.c2p(b.un,!0);m?d.select(this).attr("d","M"+ue+","+H+"V"+X+"M"+ne+","+D+"V"+V+(y?"H"+K+"L"+ue+","+X+"L"+ee+","+V:"")+"H"+q+"V"+D+(y?"H"+ee+"L"+ue+","+H+"L"+K+","+D:"")+"Z"+(P?"M"+ne+","+O+"H"+J+"M"+q+","+O+"H"+ie+(A===0?"":"M"+J+","+B+"V"+z+"M"+ie+","+B+"V"+z):"")):d.select(this).attr("d","M"+H+","+ue+"H"+X+"M"+D+","+ne+"H"+V+(y?"V"+K+"L"+X+","+ue+"L"+V+","+ee:"")+"V"+q+"H"+D+(y?"V"+ee+"L"+H+","+ue+"L"+D+","+K:"")+"Z"+(P?"M"+O+","+ne+"V"+J+"M"+O+","+q+"V"+ie+(A===0?"":"M"+B+","+J+"H"+z+"M"+B+","+ie+"H"+z):""))})}function r(o,i,f,u){var l=i.x,m=i.y,h=u.bdPos,w=u.bPos,c=f.boxpoints||f.points;S.seedPseudoRandom();var a=function(A){return A.forEach(function(P){P.t=u,P.trace=f}),A},p=o.selectAll("g.points").data(c?a:[]);p.enter().append("g").attr("class","points"),p.exit().remove();var x=p.selectAll("path").data(function(A){var P,y=A.pts2,C=Math.max((A.max-A.min)/10,A.q3-A.q1),M=C*1e-9,s=C*T,_=[],b=0,k;if(f.jitter){if(C===0)for(b=1,_=new Array(y.length),P=0;P<y.length;P++)_[P]=1;else for(P=0;P<y.length;P++){var D=Math.max(0,P-E),V=y[D].v,O=Math.min(y.length-1,P+E),N=y[O].v;c!=="all"&&(y[P].v<A.lf?N=Math.min(N,A.lf):V=Math.max(V,A.uf));var B=Math.sqrt(s*(O-D)/(N-V+M))||0;B=S.constrain(Math.abs(B),0,1),_.push(B),b=Math.max(B,b)}k=f.jitter*2/(b||1)}for(P=0;P<y.length;P++){var z=y[P],H=z.v,X=f.jitter?k*_[P]*(S.pseudoRandom()-.5):0,$=A.pos+w+h*(f.pointpos+X);f.orientation==="h"?(z.y=$,z.x=H):(z.x=$,z.y=H),c==="suspectedoutliers"&&H<A.uo&&H>A.lo&&(z.so=!0)}return y});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(n.translatePoints,l,m)}function t(o,i,f,u){var l=i.val,m=i.pos,h=!!m.rangebreaks,w=u.bPos,c=u.bPosPxOffset||0,a=f.boxmean||(f.meanline||{}).visible,p,x;Array.isArray(u.bdPos)?(p=u.bdPos[0],x=u.bdPos[1]):(p=u.bdPos,x=u.bdPos);var A=o.selectAll("path.mean").data(f.type==="box"&&f.boxmean||f.type==="violin"&&f.box.visible&&f.meanline.visible?S.identity:[]);A.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),A.exit().remove(),A.each(function(P){var y=m.c2l(P.pos+w,!0),C=m.l2p(y-p)+c,M=m.l2p(y+x)+c,s=h?(C+M)/2:m.l2p(y)+c,_=l.c2p(P.mean,!0),b=l.c2p(P.mean-P.sd,!0),k=l.c2p(P.mean+P.sd,!0);f.orientation==="h"?d.select(this).attr("d","M"+_+","+C+"V"+M+(a==="sd"?"m0,0L"+b+","+s+"L"+_+","+C+"L"+k+","+s+"Z":"")):d.select(this).attr("d","M"+C+","+_+"H"+M+(a==="sd"?"m0,0L"+s+","+b+"L"+C+","+_+"L"+s+","+k+"Z":""))})}U.exports={plot:v,plotBoxAndWhiskers:g,plotPoints:r,plotBoxMean:t}},8264:function(U){U.exports=function(e,d){var S=e.cd,n=e.xaxis,E=e.yaxis,T=[],v,g;if(d===!1)for(v=0;v<S.length;v++)for(g=0;g<(S[v].pts||[]).length;g++)S[v].pts[g].selected=0;else for(v=0;v<S.length;v++)for(g=0;g<(S[v].pts||[]).length;g++){var r=S[v].pts[g],t=n.c2p(r.x),o=E.c2p(r.y);d.contains([t,o],null,r.i,e)?(T.push({pointNumber:r.i,x:n.c2d(r.x),y:E.c2d(r.y)}),r.selected=1):r.selected=0}return T}},25776:function(U,F,e){var d=e(33428),S=e(76308),n=e(43616);function E(v,g,r){var t=r||d.select(v).selectAll("g.trace.boxes");t.style("opacity",function(o){return o[0].trace.opacity}),t.each(function(o){var i=d.select(this),f=o[0].trace,u=f.line.width;function l(w,c,a,p){w.style("stroke-width",c+"px").call(S.stroke,a).call(S.fill,p)}var m=i.selectAll("path.box");if(f.type==="candlestick")m.each(function(w){if(!w.empty){var c=d.select(this),a=f[w.dir];l(c,a.line.width,a.line.color,a.fillcolor),c.style("opacity",f.selectedpoints&&!w.selected?.3:1)}});else{l(m,u,f.line.color,f.fillcolor),i.selectAll("path.mean").style({"stroke-width":u,"stroke-dasharray":2*u+"px,"+u+"px"}).call(S.stroke,f.line.color);var h=i.selectAll("path.point");n.pointStyle(h,f,v)}})}function T(v,g,r){var t=g[0].trace,o=r.selectAll("path.point");t.selectedpoints?n.selectedPointStyle(o,t):n.pointStyle(o,t,v)}U.exports={style:E,styleOnSelect:T}},64216:function(U,F,e){var d=e(3400).extendFlat,S=e(29736).axisHoverFormat,n=e(20279),E=e(63188);function T(v){return{line:{color:d({},E.line.color,{dflt:v}),width:E.line.width,editType:"style"},fillcolor:E.fillcolor,editType:"style"}}U.exports={xperiod:n.xperiod,xperiod0:n.xperiod0,xperiodalignment:n.xperiodalignment,xhoverformat:S("x"),yhoverformat:S("y"),x:n.x,open:n.open,high:n.high,low:n.low,close:n.close,line:{width:d({},E.line.width,{}),editType:"style"},increasing:T(n.increasing.line.color.dflt),decreasing:T(n.decreasing.line.color.dflt),text:n.text,hovertext:n.hovertext,whiskerwidth:d({},E.whiskerwidth,{dflt:0}),hoverlabel:n.hoverlabel,zorder:E.zorder}},46283:function(U,F,e){var d=e(3400),S=e(54460),n=e(1220),E=e(42812).calcCommon;U.exports=function(v,g){var r=v._fullLayout,t=S.getFromId(v,g.xaxis),o=S.getFromId(v,g.yaxis),i=t.makeCalcdata(g,"x"),f=n(g,t,"x",i).vals,u=E(v,g,i,f,o,T);return u.length?(d.extendFlat(u[0].t,{num:r._numBoxes,dPos:d.distinctVals(f).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,u):[{t:{empty:!0}}]};function T(v,g,r,t){return{min:r,q1:Math.min(v,t),med:t,q3:Math.max(v,t),max:g}}},64588:function(U,F,e){var d=e(3400),S=e(76308),n=e(52744),E=e(31147),T=e(64216);U.exports=function(r,t,o,i){function f(l,m){return d.coerce(r,t,T,l,m)}var u=n(r,t,f,i);if(!u){t.visible=!1;return}E(r,t,i,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),v(r,t,f,"increasing"),v(r,t,f,"decreasing"),f("text"),f("hovertext"),f("whiskerwidth"),i._requestRangeslider[t.xaxis]=!0,f("zorder")};function v(g,r,t,o){var i=t(o+".line.color");t(o+".line.width",r.line.width),t(o+".fillcolor",S.addOpacity(i,.5))}},61712:function(U,F,e){U.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(U,F,e){var d=e(63856),S=e(31780);U.exports=function(T,v,g,r,t){var o=r("a");o||(r("da"),r("a0"));var i=r("b");i||(r("db"),r("b0")),n(T,v,g,t)};function n(E,T,v,g){var r=["aaxis","baxis"];r.forEach(function(t){var o=t.charAt(0),i=E[t]||{},f=S.newContainer(T,t),u={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:o+"axis",letter:o,font:T.font,name:t,data:E[o],calendar:T.calendar,dfltColor:g,bgColor:v.paper_bgcolor,autotypenumbersDflt:v.autotypenumbers,fullLayout:v};d(i,f,u),f._categories=f._categories||[],!E[t]&&i.type!=="-"&&(E[t]={type:i.type})})}},51676:function(U,F,e){var d=e(3400).isArrayOrTypedArray;U.exports=function(n){return S(n,0)};function S(n,E){if(!d(n)||E>=10)return null;for(var T=1/0,v=-1/0,g=n.length,r=0;r<g;r++){var t=n[r];if(d(t)){var o=S(t,E+1);o&&(T=Math.min(o[0],T),v=Math.max(o[1],v))}else T=Math.min(t,T),v=Math.max(t,v)}return[T,v]}},85720:function(U,F,e){var d=e(25376),S=e(98692),n=e(22548),E=d({editType:"calc"}),T=e(52904).zorder;E.family.dflt='"Open Sans", verdana, arial, sans-serif',E.size.dflt=12,E.color.dflt=n.defaultLine,U.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:S,baxis:S,font:E,color:{valType:"color",dflt:n.defaultLine,editType:"plot"},transforms:void 0,zorder:T}},77712:function(U,F,e){var d=e(3400).isArrayOrTypedArray;U.exports=function(S,n,E,T){var v,g,r,t,o,i,f,u,l,m,h,w,c,a=d(E)?"a":"b",p=a==="a"?S.aaxis:S.baxis,x=p.smoothing,A=a==="a"?S.a2i:S.b2j,P=a==="a"?E:T,y=a==="a"?T:E,C=a==="a"?n.a.length:n.b.length,M=a==="a"?n.b.length:n.a.length,s=Math.floor(a==="a"?S.b2j(y):S.a2i(y)),_=a==="a"?function(ne){return S.evalxy([],ne,s)}:function(ne){return S.evalxy([],s,ne)};x&&(r=Math.max(0,Math.min(M-2,s)),t=s-r,g=a==="a"?function(ne,q){return S.dxydi([],ne,r,q,t)}:function(ne,q){return S.dxydj([],r,ne,t,q)});var b=A(P[0]),k=A(P[1]),D=b<k?1:-1,V=(k-b)*1e-8,O=D>0?Math.floor:Math.ceil,N=D>0?Math.ceil:Math.floor,B=D>0?Math.min:Math.max,z=D>0?Math.max:Math.min,H=O(b+V),X=N(k-V);f=_(b);var $=[[f]];for(v=H;v*D<X*D;v+=D)o=[],h=z(b,v),w=B(k,v+D),c=w-h,i=Math.max(0,Math.min(C-2,Math.floor(.5*(h+w)))),u=_(w),x&&(l=g(i,h-i),m=g(i,w-i),o.push([f[0]+l[0]/3*c,f[1]+l[1]/3*c]),o.push([u[0]-m[0]/3*c,u[1]-m[1]/3*c])),o.push(u),$.push(o),f=u;return $}},98692:function(U,F,e){var d=e(25376),S=e(22548),n=e(94724),E=e(29736).descriptionWithDates,T=e(67824).overrideAll,v=e(98192).u,g=e(92880).extendFlat;U.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:d({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:n.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:g({},n.labelalias,{editType:"calc"}),tickfont:d({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:E("tick label")},tickformatstops:T(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:S.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:g({},v,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:g({},v,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:S.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:d({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(U,F,e){var d=e(85720),S=e(76308).addOpacity,n=e(24040),E=e(3400),T=e(26332),v=e(95936),g=e(42568),r=e(22416),t=e(78344),o=e(52976);U.exports=function(u,l,m){var h=m.letter,w=m.font||{},c=d[h+"axis"];function a(H,X){return E.coerce(u,l,c,H,X)}function p(H,X){return E.coerce2(u,l,c,H,X)}m.name&&(l._name=m.name,l._id=m.name),a("autotypenumbers",m.autotypenumbersDflt);var x=a("type");if(x==="-"&&(m.data&&i(l,m.data),l.type==="-"?l.type="linear":x=u.type=l.type),a("smoothing"),a("cheatertype"),a("showticklabels"),a("labelprefix",h+" = "),a("labelsuffix"),a("showtickprefix"),a("showticksuffix"),a("separatethousands"),a("tickformat"),a("exponentformat"),a("minexponent"),a("showexponent"),a("categoryorder"),a("tickmode"),a("tickvals"),a("ticktext"),a("tick0"),a("dtick"),l.tickmode==="array"&&(a("arraytick0"),a("arraydtick")),a("labelpadding"),l._hovertitle=h,x==="date"){var A=n.getComponentMethod("calendars","handleDefaults");A(u,l,"calendar",m.calendar)}t(l,m.fullLayout),l.c2p=E.identity;var P=a("color",m.dfltColor),y=P===u.color?P:w.color,C=a("title.text");C&&(E.coerceFont(a,"title.font",w,{overrideDflt:{size:E.bigFont(w.size),color:y}}),a("title.offset")),a("tickangle");var M=a("autorange",!l.isValidRange(u.range));M&&a("rangemode"),a("range"),l.cleanRange(),a("fixedrange"),T(u,l,a,x),g(u,l,a,x,m),v(u,l,a,x,m),r(u,l,a,{data:m.data,dataAttr:h});var s=p("gridcolor",S(P,.3)),_=p("gridwidth"),b=p("griddash"),k=a("showgrid");k||(delete l.gridcolor,delete l.gridwidth,delete l.griddash);var D=p("startlinecolor",P),V=p("startlinewidth",_),O=a("startline",l.showgrid||!!D||!!V);O||(delete l.startlinecolor,delete l.startlinewidth);var N=p("endlinecolor",P),B=p("endlinewidth",_),z=a("endline",l.showgrid||!!N||!!B);return z||(delete l.endlinecolor,delete l.endlinewidth),k?(a("minorgridcount"),a("minorgridwidth",_),a("minorgriddash",b),a("minorgridcolor",S(s,.06)),l.minorgridcount||(delete l.minorgridwidth,delete l.minorgriddash,delete l.minorgridcolor)):(delete l.gridcolor,delete l.gridwidth,delete l.griddash),l.showticklabels==="none"&&(delete l.tickfont,delete l.tickangle,delete l.showexponent,delete l.exponentformat,delete l.minexponent,delete l.tickformat,delete l.showticksuffix,delete l.showtickprefix),l.showticksuffix||delete l.ticksuffix,l.showtickprefix||delete l.tickprefix,a("tickmode"),l};function i(f,u){if(f.type==="-"){var l=f._id,m=l.charAt(0),h=m+"calendar",w=f[h];f.type=o(u,w,{autotypenumbers:f.autotypenumbers})}}},58744:function(U,F,e){var d=e(54460),S=e(3400).isArray1D,n=e(60776),E=e(51676),T=e(19216),v=e(14724),g=e(24944),r=e(26136),t=e(51512),o=e(2872),i=e(81e3);U.exports=function(u,l){var m=d.getFromId(u,l.xaxis),h=d.getFromId(u,l.yaxis),w=l.aaxis,c=l.baxis,a=l.x,p=l.y,x=[];a&&S(a)&&x.push("x"),p&&S(p)&&x.push("y"),x.length&&o(l,w,c,"a","b",x);var A=l._a=l._a||l.a,P=l._b=l._b||l.b;a=l._x||l.x,p=l._y||l.y;var y={};if(l._cheater){var C=w.cheatertype==="index"?A.length:A,M=c.cheatertype==="index"?P.length:P;a=n(C,M,l.cheaterslope)}l._x=a=r(a),l._y=p=r(p),t(a,A,P),t(p,A,P),i(l),l.setScale();var s=E(a),_=E(p),b=.5*(s[1]-s[0]),k=.5*(s[1]+s[0]),D=.5*(_[1]-_[0]),V=.5*(_[1]+_[0]),O=1.3;return s=[k-b*O,k+b*O],_=[V-D*O,V+D*O],l._extremes[m._id]=d.findExtremes(m,s,{padded:!0}),l._extremes[h._id]=d.findExtremes(h,_,{padded:!0}),T(l,"a","b"),T(l,"b","a"),v(l,w),v(l,c),y.clipsegments=g(l._xctrl,l._yctrl,w,c),y.x=a,y.y=p,y.a=A,y.b=P,[y]}},24944:function(U){U.exports=function(e,d,S,n){var E,T,v,g=[],r=!!S.smoothing,t=!!n.smoothing,o=e[0].length-1,i=e.length-1;for(E=0,T=[],v=[];E<=o;E++)T[E]=e[0][E],v[E]=d[0][E];for(g.push({x:T,y:v,bicubic:r}),E=0,T=[],v=[];E<=i;E++)T[E]=e[E][o],v[E]=d[E][o];for(g.push({x:T,y:v,bicubic:t}),E=o,T=[],v=[];E>=0;E--)T[o-E]=e[i][E],v[o-E]=d[i][E];for(g.push({x:T,y:v,bicubic:r}),E=i,T=[],v=[];E>=0;E--)T[i-E]=e[E][0],v[i-E]=d[E][0];return g.push({x:T,y:v,bicubic:t}),g}},19216:function(U,F,e){var d=e(54460),S=e(92880).extendFlat;U.exports=function(E,T,v){var g,r,t,o,i,f,u,l,m,h,w,c,a,p,x=E["_"+T],A=E[T+"axis"],P=A._gridlines=[],y=A._minorgridlines=[],C=A._boundarylines=[],M=E["_"+v],s=E[v+"axis"];A.tickmode==="array"&&(A.tickvals=x.slice());var _=E._xctrl,b=E._yctrl,k=_[0].length,D=_.length,V=E._a.length,O=E._b.length;d.prepTicks(A),A.tickmode==="array"&&delete A.tickvals;var N=A.smoothing?3:1;function B(H){var X,$,ne,q,ue,te,J,ie,K,ee,le,j,Z=[],fe=[],re={};if(T==="b")for($=E.b2j(H),ne=Math.floor(Math.max(0,Math.min(O-2,$))),q=$-ne,re.length=O,re.crossLength=V,re.xy=function(ce){return E.evalxy([],ce,$)},re.dxy=function(ce,xe){return E.dxydi([],ce,ne,xe,q)},X=0;X<V;X++)te=Math.min(V-2,X),J=X-te,ie=E.evalxy([],X,$),s.smoothing&&X>0&&(K=E.dxydi([],X-1,ne,0,q),Z.push(ue[0]+K[0]/3),fe.push(ue[1]+K[1]/3),ee=E.dxydi([],X-1,ne,1,q),Z.push(ie[0]-ee[0]/3),fe.push(ie[1]-ee[1]/3)),Z.push(ie[0]),fe.push(ie[1]),ue=ie;else for(X=E.a2i(H),te=Math.floor(Math.max(0,Math.min(V-2,X))),J=X-te,re.length=V,re.crossLength=O,re.xy=function(ce){return E.evalxy([],X,ce)},re.dxy=function(ce,xe){return E.dxydj([],te,ce,J,xe)},$=0;$<O;$++)ne=Math.min(O-2,$),q=$-ne,ie=E.evalxy([],X,$),s.smoothing&&$>0&&(le=E.dxydj([],te,$-1,J,0),Z.push(ue[0]+le[0]/3),fe.push(ue[1]+le[1]/3),j=E.dxydj([],te,$-1,J,1),Z.push(ie[0]-j[0]/3),fe.push(ie[1]-j[1]/3)),Z.push(ie[0]),fe.push(ie[1]),ue=ie;return re.axisLetter=T,re.axis=A,re.crossAxis=s,re.value=H,re.constvar=v,re.index=l,re.x=Z,re.y=fe,re.smoothing=s.smoothing,re}function z(H){var X,$,ne,q,ue,te=[],J=[],ie={};if(ie.length=x.length,ie.crossLength=M.length,T==="b")for(ne=Math.max(0,Math.min(O-2,H)),ue=Math.min(1,Math.max(0,H-ne)),ie.xy=function(K){return E.evalxy([],K,H)},ie.dxy=function(K,ee){return E.dxydi([],K,ne,ee,ue)},X=0;X<k;X++)te[X]=_[H*N][X],J[X]=b[H*N][X];else for($=Math.max(0,Math.min(V-2,H)),q=Math.min(1,Math.max(0,H-$)),ie.xy=function(K){return E.evalxy([],H,K)},ie.dxy=function(K,ee){return E.dxydj([],$,K,q,ee)},X=0;X<D;X++)te[X]=_[X][H*N],J[X]=b[X][H*N];return ie.axisLetter=T,ie.axis=A,ie.crossAxis=s,ie.value=x[H],ie.constvar=v,ie.index=H,ie.x=te,ie.y=J,ie.smoothing=s.smoothing,ie}if(A.tickmode==="array"){for(o=5e-15,i=[Math.floor((x.length-1-A.arraytick0)/A.arraydtick*(1+o)),Math.ceil(-A.arraytick0/A.arraydtick/(1+o))].sort(function(H,X){return H-X}),f=i[0]-1,u=i[1]+1,l=f;l<u;l++)r=A.arraytick0+A.arraydtick*l,!(r<0||r>x.length-1)&&P.push(S(z(r),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(l=f;l<u;l++)if(t=A.arraytick0+A.arraydtick*l,w=Math.min(t+A.arraydtick,x.length-1),!(t<0||t>x.length-1)&&!(w<0||w>x.length-1))for(c=x[t],a=x[w],g=0;g<A.minorgridcount;g++)p=w-t,!(p<=0)&&(h=c+(a-c)*(g+1)/(A.minorgridcount+1)*(A.arraydtick/p),!(h<x[0]||h>x[x.length-1])&&y.push(S(B(h),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash})));A.startline&&C.push(S(z(0),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&C.push(S(z(x.length-1),{color:A.endlinecolor,width:A.endlinewidth}))}else{for(o=5e-15,i=[Math.floor((x[x.length-1]-A.tick0)/A.dtick*(1+o)),Math.ceil((x[0]-A.tick0)/A.dtick/(1+o))].sort(function(H,X){return H-X}),f=i[0],u=i[1],l=f;l<=u;l++)m=A.tick0+A.dtick*l,P.push(S(B(m),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(l=f-1;l<u+1;l++)for(m=A.tick0+A.dtick*l,g=0;g<A.minorgridcount;g++)h=m+A.dtick*(g+1)/(A.minorgridcount+1),!(h<x[0]||h>x[x.length-1])&&y.push(S(B(h),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash}));A.startline&&C.push(S(B(x[0]),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&C.push(S(B(x[x.length-1]),{color:A.endlinecolor,width:A.endlinewidth}))}}},14724:function(U,F,e){var d=e(54460),S=e(92880).extendFlat;U.exports=function(E,T){var v,g,r,t,o,i=T._labels=[],f=T._gridlines;for(v=0;v<f.length;v++)o=f[v],["start","both"].indexOf(T.showticklabels)!==-1&&(g=d.tickText(T,o.value),S(g,{prefix:r,suffix:t,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:v===0,isLast:v===f.length-1}),i.push(g)),["end","both"].indexOf(T.showticklabels)!==-1&&(g=d.tickText(T,o.value),S(g,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:v===0,isLast:v===f.length-1}),i.push(g))}},62284:function(U){var F=.5;U.exports=function(d,S,n,E){var T=d[0]-S[0],v=d[1]-S[1],g=n[0]-S[0],r=n[1]-S[1],t=Math.pow(T*T+v*v,F/2),o=Math.pow(g*g+r*r,F/2),i=(o*o*T-t*t*g)*E,f=(o*o*v-t*t*r)*E,u=o*(t+o)*3,l=t*(t+o)*3;return[[S[0]+(u&&i/u),S[1]+(u&&f/u)],[S[0]-(l&&i/l),S[1]-(l&&f/l)]]}},60776:function(U,F,e){var d=e(3400).isArrayOrTypedArray;U.exports=function(S,n,E){var T,v,g,r,t,o,i=[],f=d(S)?S.length:S,u=d(n)?n.length:n,l=d(S)?S:null,m=d(n)?n:null;l&&(g=(l.length-1)/(l[l.length-1]-l[0])/(f-1)),m&&(r=(m.length-1)/(m[m.length-1]-m[0])/(u-1));var h,w=1/0,c=-1/0;for(v=0;v<u;v++)for(i[v]=[],o=m?(m[v]-m[0])*r:v/(u-1),T=0;T<f;T++)t=l?(l[T]-l[0])*g:T/(f-1),h=t-o*E,w=Math.min(h,w),c=Math.max(h,c),i[v][T]=h;var a=1/(c-w),p=-w*a;for(v=0;v<u;v++)for(T=0;T<f;T++)i[v][T]=a*i[v][T]+p;return i}},30180:function(U,F,e){var d=e(62284),S=e(3400).ensureArray;function n(E,T,v){var g=-.5*v[0]+1.5*T[0],r=-.5*v[1]+1.5*T[1];return[(2*g+E[0])/3,(2*r+E[1])/3]}U.exports=function(T,v,g,r,t,o){var i,f,u,l,m,h,w,c,a,p,x=g[0].length,A=g.length,P=t?3*x-2:x,y=o?3*A-2:A;for(T=S(T,y),v=S(v,y),u=0;u<y;u++)T[u]=S(T[u],P),v[u]=S(v[u],P);for(f=0,l=0;f<A;f++,l+=o?3:1)for(m=T[l],h=v[l],w=g[f],c=r[f],i=0,u=0;i<x;i++,u+=t?3:1)m[u]=w[i],h[u]=c[i];if(t)for(f=0,l=0;f<A;f++,l+=o?3:1){for(i=1,u=3;i<x-1;i++,u+=3)a=d([g[f][i-1],r[f][i-1]],[g[f][i],r[f][i]],[g[f][i+1],r[f][i+1]],t),T[l][u-1]=a[0][0],v[l][u-1]=a[0][1],T[l][u+1]=a[1][0],v[l][u+1]=a[1][1];p=n([T[l][0],v[l][0]],[T[l][2],v[l][2]],[T[l][3],v[l][3]]),T[l][1]=p[0],v[l][1]=p[1],p=n([T[l][P-1],v[l][P-1]],[T[l][P-3],v[l][P-3]],[T[l][P-4],v[l][P-4]]),T[l][P-2]=p[0],v[l][P-2]=p[1]}if(o)for(u=0;u<P;u++){for(l=3;l<y-3;l+=3)a=d([T[l-3][u],v[l-3][u]],[T[l][u],v[l][u]],[T[l+3][u],v[l+3][u]],o),T[l-1][u]=a[0][0],v[l-1][u]=a[0][1],T[l+1][u]=a[1][0],v[l+1][u]=a[1][1];p=n([T[0][u],v[0][u]],[T[2][u],v[2][u]],[T[3][u],v[3][u]]),T[1][u]=p[0],v[1][u]=p[1],p=n([T[y-1][u],v[y-1][u]],[T[y-3][u],v[y-3][u]],[T[y-4][u],v[y-4][u]]),T[y-2][u]=p[0],v[y-2][u]=p[1]}if(t&&o)for(l=1;l<y;l+=(l+1)%3===0?2:1){for(u=3;u<P-3;u+=3)a=d([T[l][u-3],v[l][u-3]],[T[l][u],v[l][u]],[T[l][u+3],v[l][u+3]],t),T[l][u-1]=.5*(T[l][u-1]+a[0][0]),v[l][u-1]=.5*(v[l][u-1]+a[0][1]),T[l][u+1]=.5*(T[l][u+1]+a[1][0]),v[l][u+1]=.5*(v[l][u+1]+a[1][1]);p=n([T[l][0],v[l][0]],[T[l][2],v[l][2]],[T[l][3],v[l][3]]),T[l][1]=.5*(T[l][1]+p[0]),v[l][1]=.5*(v[l][1]+p[1]),p=n([T[l][P-1],v[l][P-1]],[T[l][P-3],v[l][P-3]],[T[l][P-4],v[l][P-4]]),T[l][P-2]=.5*(T[l][P-2]+p[0]),v[l][P-2]=.5*(v[l][P-2]+p[1])}return[T,v]}},24588:function(U){U.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(U){U.exports=function(F,e,d){return e&&d?function(S,n,E,T,v){S||(S=[]);var g,r,t,o,i,f;n*=3,E*=3;var u=T*T,l=1-T,m=l*l,h=l*T*2,w=-3*m,c=3*(m-h),a=3*(h-u),p=3*u,x=v*v,A=x*v,P=1-v,y=P*P,C=y*P;for(f=0;f<F.length;f++)i=F[f],g=w*i[E][n]+c*i[E][n+1]+a*i[E][n+2]+p*i[E][n+3],r=w*i[E+1][n]+c*i[E+1][n+1]+a*i[E+1][n+2]+p*i[E+1][n+3],t=w*i[E+2][n]+c*i[E+2][n+1]+a*i[E+2][n+2]+p*i[E+2][n+3],o=w*i[E+3][n]+c*i[E+3][n+1]+a*i[E+3][n+2]+p*i[E+3][n+3],S[f]=C*g+3*(y*v*r+P*x*t)+A*o;return S}:e?function(S,n,E,T,v){S||(S=[]);var g,r,t,o;n*=3;var i=T*T,f=1-T,u=f*f,l=f*T*2,m=-3*u,h=3*(u-l),w=3*(l-i),c=3*i,a=1-v;for(t=0;t<F.length;t++)o=F[t],g=m*o[E][n]+h*o[E][n+1]+w*o[E][n+2]+c*o[E][n+3],r=m*o[E+1][n]+h*o[E+1][n+1]+w*o[E+1][n+2]+c*o[E+1][n+3],S[t]=a*g+v*r;return S}:d?function(S,n,E,T,v){S||(S=[]);var g,r,t,o,i,f;E*=3;var u=v*v,l=u*v,m=1-v,h=m*m,w=h*m;for(i=0;i<F.length;i++)f=F[i],g=f[E][n+1]-f[E][n],r=f[E+1][n+1]-f[E+1][n],t=f[E+2][n+1]-f[E+2][n],o=f[E+3][n+1]-f[E+3][n],S[i]=w*g+3*(h*v*r+m*u*t)+l*o;return S}:function(S,n,E,T,v){S||(S=[]);var g,r,t,o,i=1-v;for(t=0;t<F.length;t++)o=F[t],g=o[E][n+1]-o[E][n],r=o[E+1][n+1]-o[E+1][n],S[t]=i*g+v*r;return S}}},24464:function(U){U.exports=function(F,e,d){return e&&d?function(S,n,E,T,v){S||(S=[]);var g,r,t,o,i,f;n*=3,E*=3;var u=T*T,l=u*T,m=1-T,h=m*m,w=h*m,c=v*v,a=1-v,p=a*a,x=a*v*2,A=-3*p,P=3*(p-x),y=3*(x-c),C=3*c;for(f=0;f<F.length;f++)i=F[f],g=A*i[E][n]+P*i[E+1][n]+y*i[E+2][n]+C*i[E+3][n],r=A*i[E][n+1]+P*i[E+1][n+1]+y*i[E+2][n+1]+C*i[E+3][n+1],t=A*i[E][n+2]+P*i[E+1][n+2]+y*i[E+2][n+2]+C*i[E+3][n+2],o=A*i[E][n+3]+P*i[E+1][n+3]+y*i[E+2][n+3]+C*i[E+3][n+3],S[f]=w*g+3*(h*T*r+m*u*t)+l*o;return S}:e?function(S,n,E,T,v){S||(S=[]);var g,r,t,o,i,f;n*=3;var u=v*v,l=u*v,m=1-v,h=m*m,w=h*m;for(i=0;i<F.length;i++)f=F[i],g=f[E+1][n]-f[E][n],r=f[E+1][n+1]-f[E][n+1],t=f[E+1][n+2]-f[E][n+2],o=f[E+1][n+3]-f[E][n+3],S[i]=w*g+3*(h*v*r+m*u*t)+l*o;return S}:d?function(S,n,E,T,v){S||(S=[]);var g,r,t,o;E*=3;var i=1-T,f=v*v,u=1-v,l=u*u,m=u*v*2,h=-3*l,w=3*(l-m),c=3*(m-f),a=3*f;for(t=0;t<F.length;t++)o=F[t],g=h*o[E][n]+w*o[E+1][n]+c*o[E+2][n]+a*o[E+3][n],r=h*o[E][n+1]+w*o[E+1][n+1]+c*o[E+2][n+1]+a*o[E+3][n+1],S[t]=i*g+T*r;return S}:function(S,n,E,T,v){S||(S=[]);var g,r,t,o,i=1-T;for(t=0;t<F.length;t++)o=F[t],g=o[E+1][n]-o[E][n],r=o[E+1][n+1]-o[E][n+1],S[t]=i*g+T*r;return S}}},29056:function(U){U.exports=function(F,e,d,S,n){var E=e-2,T=d-2;return S&&n?function(v,g,r){v||(v=[]);var t,o,i,f,u,l,m=Math.max(0,Math.min(Math.floor(g),E)),h=Math.max(0,Math.min(Math.floor(r),T)),w=Math.max(0,Math.min(1,g-m)),c=Math.max(0,Math.min(1,r-h));m*=3,h*=3;var a=w*w,p=a*w,x=1-w,A=x*x,P=A*x,y=c*c,C=y*c,M=1-c,s=M*M,_=s*M;for(l=0;l<F.length;l++)u=F[l],t=P*u[h][m]+3*(A*w*u[h][m+1]+x*a*u[h][m+2])+p*u[h][m+3],o=P*u[h+1][m]+3*(A*w*u[h+1][m+1]+x*a*u[h+1][m+2])+p*u[h+1][m+3],i=P*u[h+2][m]+3*(A*w*u[h+2][m+1]+x*a*u[h+2][m+2])+p*u[h+2][m+3],f=P*u[h+3][m]+3*(A*w*u[h+3][m+1]+x*a*u[h+3][m+2])+p*u[h+3][m+3],v[l]=_*t+3*(s*c*o+M*y*i)+C*f;return v}:S?function(v,g,r){v||(v=[]);var t=Math.max(0,Math.min(Math.floor(g),E)),o=Math.max(0,Math.min(Math.floor(r),T)),i=Math.max(0,Math.min(1,g-t)),f=Math.max(0,Math.min(1,r-o)),u,l,m,h,w,c;t*=3;var a=i*i,p=a*i,x=1-i,A=x*x,P=A*x,y=1-f;for(w=0;w<F.length;w++)c=F[w],u=y*c[o][t]+f*c[o+1][t],l=y*c[o][t+1]+f*c[o+1][t+1],m=y*c[o][t+2]+f*c[o+1][t+1],h=y*c[o][t+3]+f*c[o+1][t+1],v[w]=P*u+3*(A*i*l+x*a*m)+p*h;return v}:n?function(v,g,r){v||(v=[]);var t=Math.max(0,Math.min(Math.floor(g),E)),o=Math.max(0,Math.min(Math.floor(r),T)),i=Math.max(0,Math.min(1,g-t)),f=Math.max(0,Math.min(1,r-o)),u,l,m,h,w,c;o*=3;var a=f*f,p=a*f,x=1-f,A=x*x,P=A*x,y=1-i;for(w=0;w<F.length;w++)c=F[w],u=y*c[o][t]+i*c[o][t+1],l=y*c[o+1][t]+i*c[o+1][t+1],m=y*c[o+2][t]+i*c[o+2][t+1],h=y*c[o+3][t]+i*c[o+3][t+1],v[w]=P*u+3*(A*f*l+x*a*m)+p*h;return v}:function(v,g,r){v||(v=[]);var t=Math.max(0,Math.min(Math.floor(g),E)),o=Math.max(0,Math.min(Math.floor(r),T)),i=Math.max(0,Math.min(1,g-t)),f=Math.max(0,Math.min(1,r-o)),u,l,m,h,w=1-f,c=1-i;for(m=0;m<F.length;m++)h=F[m],u=c*h[o][t]+i*h[o][t+1],l=c*h[o+1][t]+i*h[o+1][t+1],v[m]=w*u+f*l;return v}}},38356:function(U,F,e){var d=e(3400),S=e(86411),n=e(93504),E=e(85720),T=e(22548);U.exports=function(g,r,t,o){function i(l,m){return d.coerce(g,r,E,l,m)}r._clipPathId="clip"+r.uid+"carpet";var f=i("color",T.defaultLine);if(d.coerceFont(i,"font",o.font),i("carpet"),n(g,r,o,i,f),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var u=S(g,r,i);u||(r.visible=!1),r._cheater&&i("cheaterslope"),i("zorder")}},95856:function(U,F,e){U.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(U){U.exports=function(F,e){for(var d=F._fullData.length,S,n=0;n<d;n++){var E=F._fullData[n];if(E.index!==e.index&&E.type==="carpet"&&(S||(S=E),E.carpet===e.carpet))return E}return S}},53416:function(U){U.exports=function(e,d,S){if(e.length===0)return"";var n,E=[],T=S?3:1;for(n=0;n<e.length;n+=T)E.push(e[n]+","+d[n]),S&&n<e.length-T&&(E.push("C"),E.push([e[n+1]+","+d[n+1],e[n+2]+","+d[n+2]+" "].join(" ")));return E.join(S?"":"L")}},87072:function(U,F,e){var d=e(3400).isArrayOrTypedArray;U.exports=function(n,E,T){var v;for(d(n)?n.length>E.length&&(n=n.slice(0,E.length)):n=[],v=0;v<E.length;v++)n[v]=T(E[v]);return n}},15584:function(U){U.exports=function(e,d,S,n,E,T){var v=E[0]*e.dpdx(d),g=E[1]*e.dpdy(S),r=1,t=1;if(T){var o=Math.sqrt(E[0]*E[0]+E[1]*E[1]),i=Math.sqrt(T[0]*T[0]+T[1]*T[1]),f=(E[0]*T[0]+E[1]*T[1])/o/i;t=Math.max(0,f)}var u=Math.atan2(g,v)*180/Math.PI;return u<-90?(u+=180,r=-r):u>90&&(u-=180,r=-r),{angle:u,flip:r,p:e.c2p(n,d,S),offsetMultplier:t}}},164:function(U,F,e){var d=e(33428),S=e(43616),n=e(87072),E=e(53416),T=e(15584),v=e(72736),g=e(3400),r=g.strRotate,t=g.strTranslate,o=e(84284);U.exports=function(a,p,x,A){var P=a._context.staticPlot,y=p.xaxis,C=p.yaxis,M=a._fullLayout,s=M._clips;g.makeTraceGroups(A,x,"trace").each(function(_){var b=d.select(this),k=_[0],D=k.trace,V=D.aaxis,O=D.baxis,N=g.ensureSingle(b,"g","minorlayer"),B=g.ensureSingle(b,"g","majorlayer"),z=g.ensureSingle(b,"g","boundarylayer"),H=g.ensureSingle(b,"g","labellayer");b.style("opacity",D.opacity),f(y,C,B,V,"a",V._gridlines,!0),f(y,C,B,O,"b",O._gridlines,!0),f(y,C,N,V,"a",V._minorgridlines,!0),f(y,C,N,O,"b",O._minorgridlines,!0),f(y,C,z,V,"a-boundary",V._boundarylines,P),f(y,C,z,O,"b-boundary",O._boundarylines,P);var X=u(a,y,C,D,k,H,V._labels,"a-label"),$=u(a,y,C,D,k,H,O._labels,"b-label");l(a,H,D,k,y,C,X,$),i(D,k,s,y,C)})};function i(c,a,p,x,A){var P,y,C,M,s=p.select("#"+c._clipPathId);s.size()||(s=p.append("clipPath").classed("carpetclip",!0));var _=g.ensureSingle(s,"path","carpetboundary"),b=a.clipsegments,k=[];for(M=0;M<b.length;M++)P=b[M],y=n([],P.x,x.c2p),C=n([],P.y,A.c2p),k.push(E(y,C,P.bicubic));var D="M"+k.join("L")+"Z";s.attr("id",c._clipPathId),_.attr("d",D)}function f(c,a,p,x,A,P,y){var C="const-"+A+"-lines",M=p.selectAll("."+C).data(P);M.enter().append("path").classed(C,!0).style("vector-effect",y?"none":"non-scaling-stroke"),M.each(function(s){var _=s,b=_.x,k=_.y,D=n([],b,c.c2p),V=n([],k,a.c2p),O="M"+E(D,V,_.smoothing),N=d.select(this);N.attr("d",O).style("stroke-width",_.width).style("stroke",_.color).style("stroke-dasharray",S.dashStyle(_.dash,_.width)).style("fill","none")}),M.exit().remove()}function u(c,a,p,x,A,P,y,C){var M=P.selectAll("text."+C).data(y);M.enter().append("text").classed(C,!0);var s=0,_={};return M.each(function(b,k){var D;if(b.axis.tickangle==="auto")D=T(x,a,p,b.xy,b.dxy);else{var V=(b.axis.tickangle+180)*Math.PI/180;D=T(x,a,p,b.xy,[Math.cos(V),Math.sin(V)])}k||(_={angle:D.angle,flip:D.flip});var O=(b.endAnchor?-1:1)*D.flip,N=d.select(this).attr({"text-anchor":O>0?"start":"end","data-notex":1}).call(S.font,b.font).text(b.text).call(v.convertToTspans,c),B=S.bBox(this);N.attr("transform",t(D.p[0],D.p[1])+r(D.angle)+t(b.axis.labelpadding*O,B.height*.3)),s=Math.max(s,B.width+b.axis.labelpadding)}),M.exit().remove(),_.maxExtent=s,_}function l(c,a,p,x,A,P,y,C){var M,s,_,b,k=g.aggNums(Math.min,null,p.a),D=g.aggNums(Math.max,null,p.a),V=g.aggNums(Math.min,null,p.b),O=g.aggNums(Math.max,null,p.b);M=.5*(k+D),s=V,_=p.ab2xy(M,s,!0),b=p.dxyda_rough(M,s),y.angle===void 0&&g.extendFlat(y,T(p,A,P,_,p.dxydb_rough(M,s))),w(c,a,p,x,_,b,p.aaxis,A,P,y,"a-title"),M=k,s=.5*(V+O),_=p.ab2xy(M,s,!0),b=p.dxydb_rough(M,s),C.angle===void 0&&g.extendFlat(C,T(p,A,P,_,p.dxyda_rough(M,s))),w(c,a,p,x,_,b,p.baxis,A,P,C,"b-title")}var m=o.LINE_SPACING,h=(1-o.MID_SHIFT)/m+1;function w(c,a,p,x,A,P,y,C,M,s,_){var b=[];y.title.text&&b.push(y.title.text);var k=a.selectAll("text."+_).data(b),D=s.maxExtent;k.enter().append("text").classed(_,!0),k.each(function(){var V=T(p,C,M,A,P);["start","both"].indexOf(y.showticklabels)===-1&&(D=0);var O=y.title.font.size;D+=O+y.title.offset;var N=s.angle+(s.flip<0?180:0),B=(N-V.angle+450)%360,z=B>90&&B<270,H=d.select(this);H.text(y.title.text).call(v.convertToTspans,c),z&&(D=(-v.lineCount(H)+h)*m*O-D),H.attr("transform",t(V.p[0],V.p[1])+r(V.angle)+t(0,D)).attr("text-anchor","middle").call(S.font,y.title.font)}),k.exit().remove()}},81e3:function(U,F,e){var d=e(24588),S=e(14952).findBin,n=e(30180),E=e(29056),T=e(26435),v=e(24464);U.exports=function(r){var t=r._a,o=r._b,i=t.length,f=o.length,u=r.aaxis,l=r.baxis,m=t[0],h=t[i-1],w=o[0],c=o[f-1],a=t[t.length-1]-t[0],p=o[o.length-1]-o[0],x=a*d.RELATIVE_CULL_TOLERANCE,A=p*d.RELATIVE_CULL_TOLERANCE;m-=x,h+=x,w-=A,c+=A,r.isVisible=function(P,y){return P>m&&P<h&&y>w&&y<c},r.isOccluded=function(P,y){return P<m||P>h||y<w||y>c},r.setScale=function(){var P=r._x,y=r._y,C=n(r._xctrl,r._yctrl,P,y,u.smoothing,l.smoothing);r._xctrl=C[0],r._yctrl=C[1],r.evalxy=E([r._xctrl,r._yctrl],i,f,u.smoothing,l.smoothing),r.dxydi=T([r._xctrl,r._yctrl],u.smoothing,l.smoothing),r.dxydj=v([r._xctrl,r._yctrl],u.smoothing,l.smoothing)},r.i2a=function(P){var y=Math.max(0,Math.floor(P[0]),i-2),C=P[0]-y;return(1-C)*t[y]+C*t[y+1]},r.j2b=function(P){var y=Math.max(0,Math.floor(P[1]),i-2),C=P[1]-y;return(1-C)*o[y]+C*o[y+1]},r.ij2ab=function(P){return[r.i2a(P[0]),r.j2b(P[1])]},r.a2i=function(P){var y=Math.max(0,Math.min(S(P,t),i-2)),C=t[y],M=t[y+1];return Math.max(0,Math.min(i-1,y+(P-C)/(M-C)))},r.b2j=function(P){var y=Math.max(0,Math.min(S(P,o),f-2)),C=o[y],M=o[y+1];return Math.max(0,Math.min(f-1,y+(P-C)/(M-C)))},r.ab2ij=function(P){return[r.a2i(P[0]),r.b2j(P[1])]},r.i2c=function(P,y){return r.evalxy([],P,y)},r.ab2xy=function(P,y,C){if(!C&&(P<t[0]||P>t[i-1]|y<o[0]||y>o[f-1]))return[!1,!1];var M=r.a2i(P),s=r.b2j(y),_=r.evalxy([],M,s);if(C){var b=0,k=0,D=[],V,O,N,B;P<t[0]?(V=0,O=0,b=(P-t[0])/(t[1]-t[0])):P>t[i-1]?(V=i-2,O=1,b=(P-t[i-1])/(t[i-1]-t[i-2])):(V=Math.max(0,Math.min(i-2,Math.floor(M))),O=M-V),y<o[0]?(N=0,B=0,k=(y-o[0])/(o[1]-o[0])):y>o[f-1]?(N=f-2,B=1,k=(y-o[f-1])/(o[f-1]-o[f-2])):(N=Math.max(0,Math.min(f-2,Math.floor(s))),B=s-N),b&&(r.dxydi(D,V,N,O,B),_[0]+=D[0]*b,_[1]+=D[1]*b),k&&(r.dxydj(D,V,N,O,B),_[0]+=D[0]*k,_[1]+=D[1]*k)}return _},r.c2p=function(P,y,C){return[y.c2p(P[0]),C.c2p(P[1])]},r.p2x=function(P,y,C){return[y.p2c(P[0]),C.p2c(P[1])]},r.dadi=function(P){var y=Math.max(0,Math.min(t.length-2,P));return t[y+1]-t[y]},r.dbdj=function(P){var y=Math.max(0,Math.min(o.length-2,P));return o[y+1]-o[y]},r.dxyda=function(P,y,C,M){var s=r.dxydi(null,P,y,C,M),_=r.dadi(P,C);return[s[0]/_,s[1]/_]},r.dxydb=function(P,y,C,M){var s=r.dxydj(null,P,y,C,M),_=r.dbdj(y,M);return[s[0]/_,s[1]/_]},r.dxyda_rough=function(P,y,C){var M=a*(C||.1),s=r.ab2xy(P+M,y,!0),_=r.ab2xy(P-M,y,!0);return[(s[0]-_[0])*.5/M,(s[1]-_[1])*.5/M]},r.dxydb_rough=function(P,y,C){var M=p*(C||.1),s=r.ab2xy(P,y+M,!0),_=r.ab2xy(P,y-M,!0);return[(s[0]-_[0])*.5/M,(s[1]-_[1])*.5/M]},r.dpdx=function(P){return P._m},r.dpdy=function(P){return P._m}}},51512:function(U,F,e){var d=e(3400);U.exports=function(n,E,T){var v,g,r,t=[],o=[],i=n[0].length,f=n.length;function u($,ne){var q=0,ue,te=0;return $>0&&(ue=n[ne][$-1])!==void 0&&(te++,q+=ue),$<i-1&&(ue=n[ne][$+1])!==void 0&&(te++,q+=ue),ne>0&&(ue=n[ne-1][$])!==void 0&&(te++,q+=ue),ne<f-1&&(ue=n[ne+1][$])!==void 0&&(te++,q+=ue),q/Math.max(1,te)}var l=0;for(v=0;v<i;v++)for(g=0;g<f;g++)n[g][v]===void 0&&(t.push(v),o.push(g),n[g][v]=u(v,g)),l=Math.max(l,Math.abs(n[g][v]));if(!t.length)return n;var m,h,w,c,a,p,x,A,P,y,C,M=1e-5,s=0,_=100,b=0,k=t.length;do{for(s=0,r=0;r<k;r++){v=t[r],g=o[r];var D=0,V=0,O,N,B,z,H,X;v===0?(H=Math.min(i-1,2),B=E[H],z=E[1],O=n[g][H],N=n[g][1],V+=N+(N-O)*(E[0]-z)/(z-B),D++):v===i-1&&(H=Math.max(0,i-3),B=E[H],z=E[i-2],O=n[g][H],N=n[g][i-2],V+=N+(N-O)*(E[i-1]-z)/(z-B),D++),(v===0||v===i-1)&&g>0&&g<f-1&&(m=T[g+1]-T[g],h=T[g]-T[g-1],V+=(h*n[g+1][v]+m*n[g-1][v])/(h+m),D++),g===0?(X=Math.min(f-1,2),B=T[X],z=T[1],O=n[X][v],N=n[1][v],V+=N+(N-O)*(T[0]-z)/(z-B),D++):g===f-1&&(X=Math.max(0,f-3),B=T[X],z=T[f-2],O=n[X][v],N=n[f-2][v],V+=N+(N-O)*(T[f-1]-z)/(z-B),D++),(g===0||g===f-1)&&v>0&&v<i-1&&(m=E[v+1]-E[v],h=E[v]-E[v-1],V+=(h*n[g][v+1]+m*n[g][v-1])/(h+m),D++),D?V/=D:(w=E[v+1]-E[v],c=E[v]-E[v-1],a=T[g+1]-T[g],p=T[g]-T[g-1],x=w*c*(w+c),A=a*p*(a+p),V=(x*(p*n[g+1][v]+a*n[g-1][v])+A*(c*n[g][v+1]+w*n[g][v-1]))/(A*(c+w)+x*(p+a))),P=V-n[g][v],y=P/l,s+=y*y,C=D?0:.85,n[g][v]+=P*(1+C)}s=Math.sqrt(s)}while(b++<_&&s>M);return d.log("Smoother converged to",s,"after",b,"iterations"),n}},86411:function(U,F,e){var d=e(3400).isArray1D;U.exports=function(n,E,T){var v=T("x"),g=v&&v.length,r=T("y"),t=r&&r.length;if(!g&&!t)return!1;if(E._cheater=!v,(!g||d(v))&&(!t||d(r))){var o=g?v.length:1/0;t&&(o=Math.min(o,r.length)),E.a&&E.a.length&&(o=Math.min(o,E.a.length)),E.b&&E.b.length&&(o=Math.min(o,E.b.length)),E._length=o}else E._length=null;return!0}},83372:function(U,F,e){var d=e(21776).Ks,S=e(6096),n=e(49084),E=e(45464),T=e(22548).defaultLine,v=e(92880).extendFlat,g=S.marker.line;U.exports=v({locations:{valType:"data_array",editType:"calc"},locationmode:S.locationmode,z:{valType:"data_array",editType:"calc"},geojson:v({},S.geojson,{}),featureidkey:S.featureidkey,text:v({},S.text,{}),hovertext:v({},S.hovertext,{}),marker:{line:{color:v({},g.color,{dflt:T}),width:v({},g.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:S.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:S.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:v({},E.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:d(),showlegend:v({},E.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(U,F,e){var d=e(38248),S=e(39032).BADNUM,n=e(47128),E=e(20148),T=e(4500);function v(g){return g&&typeof g=="string"}U.exports=function(r,t){var o=t._length,i=new Array(o),f;t.geojson?f=function(w){return v(w)||d(w)}:f=v;for(var u=0;u<o;u++){var l=i[u]={},m=t.locations[u],h=t.z[u];f(m)&&d(h)?(l.loc=m,l.z=h):(l.loc=null,l.z=S),l.index=u}return E(i,t),n(r,t,{vals:t.z,containerStr:"",cLetter:"z"}),T(i,t),i}},30972:function(U,F,e){var d=e(3400),S=e(27260),n=e(83372);U.exports=function(T,v,g,r){function t(h,w){return d.coerce(T,v,n,h,w)}var o=t("locations"),i=t("z");if(!(o&&o.length&&d.isArrayOrTypedArray(i)&&i.length)){v.visible=!1;return}v._length=Math.min(o.length,i.length);var f=t("geojson"),u;(typeof f=="string"&&f!==""||d.isPlainObject(f))&&(u="geojson-id");var l=t("locationmode",u);l==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate");var m=t("marker.line.width");m&&t("marker.line.color"),t("marker.opacity"),S(T,v,r,t,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(v,t)}},52428:function(U){U.exports=function(e,d,S,n,E){e.location=d.location,e.z=d.z;var T=n[E];return T.fIn&&T.fIn.properties&&(e.properties=T.fIn.properties),e.ct=T.ct,e}},69224:function(U,F,e){var d=e(54460),S=e(83372),n=e(3400).fillText;U.exports=function(v,g,r){var t=v.cd,o=t[0].trace,i=v.subplot,f,u,l,m,h=[g,r],w=[g+360,r];for(u=0;u<t.length;u++)if(f=t[u],m=!1,f._polygons){for(l=0;l<f._polygons.length;l++)f._polygons[l].contains(h)&&(m=!m),f._polygons[l].contains(w)&&(m=!m);if(m)break}if(!(!m||!f))return v.x0=v.x1=v.xa.c2p(f.ct),v.y0=v.y1=v.ya.c2p(f.ct),v.index=f.index,v.location=f.loc,v.z=f.z,v.zLabel=d.tickText(i.mockAxis,i.mockAxis.c2l(f.z),"hover").text,v.hovertemplate=f.hovertemplate,E(v,o,f),[v]};function E(T,v,g){if(!v.hovertemplate){var r=g.hi||v.hoverinfo,t=String(g.loc),o=r==="all"?S.hoverinfo.flags:r.split("+"),i=o.indexOf("name")!==-1,f=o.indexOf("location")!==-1,u=o.indexOf("z")!==-1,l=o.indexOf("text")!==-1,m=!i&&f,h=[];m?T.nameOverride=t:(i&&(T.nameOverride=v.name),f&&h.push(t)),u&&h.push(T.zLabel),l&&n(g,v,h),T.extraText=h.join("<br>")}}},54272:function(U,F,e){U.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(U,F,e){var d=e(33428),S=e(3400),n=e(27144),E=e(59972).getTopojsonFeatures,T=e(19280).findExtremes,v=e(7947).style;function g(t,o,i){var f=o.layers.backplot.select(".choroplethlayer");S.makeTraceGroups(f,i,"trace choropleth").each(function(u){var l=d.select(this),m=l.selectAll("path.choroplethlocation").data(S.identity);m.enter().append("path").classed("choroplethlocation",!0),m.exit().remove(),v(t,u)})}function r(t,o){for(var i=t[0].trace,f=o[i.geo],u=f._subplot,l=i.locationmode,m=i._length,h=l==="geojson-id"?n.extractTraceFeature(t):E(i,u.topojson),w=[],c=[],a=0;a<m;a++){var p=t[a],x=l==="geojson-id"?p.fOut:n.locationToFeature(l,p.loc,h);if(x){p.geojson=x,p.ct=x.properties.ct,p._polygons=n.feature2polygons(x);var A=n.computeBbox(x);w.push(A[0],A[2]),c.push(A[1],A[3])}else p.geojson=null}if(f.fitbounds==="geojson"&&l==="geojson-id"){var P=n.computeBbox(n.getTraceGeojson(i));w=[P[0],P[2]],c=[P[1],P[3]]}var y={padded:!0};i._extremes.lon=T(f.lonaxis._ax,w,y),i._extremes.lat=T(f.lataxis._ax,c,y)}U.exports={calcGeoJSON:r,plot:g}},17328:function(U){U.exports=function(e,d){var S=e.cd,n=e.xaxis,E=e.yaxis,T=[],v,g,r,t,o;if(d===!1)for(v=0;v<S.length;v++)S[v].selected=0;else for(v=0;v<S.length;v++)g=S[v],r=g.ct,r&&(t=n.c2p(r),o=E.c2p(r),d.contains([t,o],null,v,e)?(T.push({pointNumber:v,lon:r[0],lat:r[1]}),g.selected=1):g.selected=0);return T}},7947:function(U,F,e){var d=e(33428),S=e(76308),n=e(43616),E=e(8932);function T(r,t){t&&v(r,t)}function v(r,t){var o=t[0].trace,i=t[0].node3,f=i.selectAll(".choroplethlocation"),u=o.marker||{},l=u.line||{},m=E.makeColorScaleFuncFromTrace(o);f.each(function(h){d.select(this).attr("fill",m(h.z)).call(S.stroke,h.mlc||l.color).call(n.dashLine,"",h.mlw||l.width||0).style("opacity",u.opacity)}),n.selectedPointStyle(f,o)}function g(r,t){var o=t[0].node3,i=t[0].trace;i.selectedpoints?n.selectedPointStyle(o.selectAll(".choroplethlocation"),i):v(r,t)}U.exports={style:T,styleOnSelect:g}},45608:function(U,F,e){var d=e(83372),S=e(49084),n=e(21776).Ks,E=e(45464),T=e(92880).extendFlat;U.exports=T({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:T({},d.featureidkey,{}),below:{valType:"string",editType:"plot"},text:d.text,hovertext:d.hovertext,marker:{line:{color:T({},d.marker.line.color,{editType:"plot"}),width:T({},d.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:T({},d.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:T({},d.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:T({},d.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:d.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:T({},E.showlegend,{dflt:!1})},S("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(U,F,e){var d=e(38248),S=e(3400),n=e(8932),E=e(43616),T=e(44808).makeBlank,v=e(27144);function g(t){var o=t[0].trace,i=o.visible===!0&&o._length!==0,f={layout:{visibility:"none"},paint:{}},u={layout:{visibility:"none"},paint:{}},l=o._opts={fill:f,line:u,geojson:T()};if(!i)return l;var m=v.extractTraceFeature(t);if(!m)return l;var h=n.makeColorScaleFuncFromTrace(o),w=o.marker,c=w.line||{},a;S.isArrayOrTypedArray(w.opacity)&&(a=function(s){var _=s.mo;return d(_)?+S.constrain(_,0,1):0});var p;S.isArrayOrTypedArray(c.color)&&(p=function(s){return s.mlc});var x;S.isArrayOrTypedArray(c.width)&&(x=function(s){return s.mlw});for(var A=0;A<t.length;A++){var P=t[A],y=P.fOut;if(y){var C=y.properties;C.fc=h(P.z),a&&(C.mo=a(P)),p&&(C.mlc=p(P)),x&&(C.mlw=x(P)),P.ct=C.ct,P._polygons=v.feature2polygons(y)}}var M=a?{type:"identity",property:"mo"}:w.opacity;return S.extendFlat(f.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":M}),S.extendFlat(u.paint,{"line-color":p?{type:"identity",property:"mlc"}:c.color,"line-width":x?{type:"identity",property:"mlw"}:c.width,"line-opacity":M}),f.layout.visibility="visible",u.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:m},r(t),l}function r(t){var o=t[0].trace,i=o._opts,f;if(o.selectedpoints){for(var u=E.makeSelectedPointStyleFns(o),l=0;l<t.length;l++){var m=t[l];m.fOut&&(m.fOut.properties.mo2=u.selectedOpacityFn(m))}f={type:"identity",property:"mo2"}}else f=S.isArrayOrTypedArray(o.marker.opacity)?{type:"identity",property:"mo"}:o.marker.opacity;return S.extendFlat(i.fill.paint,{"fill-opacity":f}),S.extendFlat(i.line.paint,{"line-opacity":f}),i}U.exports={convert:g,convertOnSelect:r}},9352:function(U,F,e){var d=e(3400),S=e(27260),n=e(45608);U.exports=function(T,v,g,r){function t(l,m){return d.coerce(T,v,n,l,m)}var o=t("locations"),i=t("z"),f=t("geojson");if(!d.isArrayOrTypedArray(o)||!o.length||!d.isArrayOrTypedArray(i)||!i.length||!(typeof f=="string"&&f!==""||d.isPlainObject(f))){v.visible=!1;return}t("featureidkey"),v._length=Math.min(o.length,i.length),t("below"),t("text"),t("hovertext"),t("hovertemplate");var u=t("marker.line.width");u&&t("marker.line.color"),t("marker.opacity"),S(T,v,r,t,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(v,t)}},85404:function(U,F,e){U.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(d,S){if(S){var n=S[0].trace;n._glTrace.updateOnSelect(S)}},getBelow:function(d,S){for(var n=S.getMapLayers(),E=n.length-2;E>=0;E--){var T=n[E].id;if(typeof T=="string"&&T.indexOf("water")===0){for(var v=E+1;v<n.length;v++)if(T=n[v].id,typeof T=="string"&&T.indexOf("plotly-")===-1)return T}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(U,F,e){var d=e(13504).convert,S=e(13504).convertOnSelect,n=e(47552).traceLayerPrefix;function E(v,g){this.type="choroplethmapbox",this.subplot=v,this.uid=g,this.sourceId="source-"+g,this.layerList=[["fill",n+g+"-fill"],["line",n+g+"-line"]],this.below=null}var T=E.prototype;T.update=function(v){this._update(d(v)),v[0].trace._glTrace=this},T.updateOnSelect=function(v){this._update(S(v))},T._update=function(v){var g=this.subplot,r=this.layerList,t=g.belowLookup["trace-"+this.uid];g.map.getSource(this.sourceId).setData(v.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(v,t),this.below=t);for(var o=0;o<r.length;o++){var i=r[o],f=i[0],u=i[1],l=v[f];g.setOptions(u,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&g.setOptions(u,"setPaintProperty",l.paint)}},T._addLayers=function(v,g){for(var r=this.subplot,t=this.layerList,o=this.sourceId,i=0;i<t.length;i++){var f=t[i],u=f[0],l=v[u];r.addLayer({type:u,id:f[1],source:o,layout:l.layout,paint:l.paint},g)}},T._removeLayers=function(){for(var v=this.subplot.map,g=this.layerList,r=g.length-1;r>=0;r--)v.removeLayer(g[r][1])},T.dispose=function(){var v=this.subplot.map;this._removeLayers(),v.removeSource(this.sourceId)},U.exports=function(g,r){var t=r[0].trace,o=new E(g,t.uid),i=o.sourceId,f=d(r),u=o.below=g.belowLookup["trace-"+t.uid];return g.map.addSource(i,{type:"geojson",data:f.geojson}),o._addLayers(f,u),r[0].trace._glTrace=o,o}},86040:function(U,F,e){var d=e(49084),S=e(29736).axisHoverFormat,n=e(21776).Ks,E=e(52948),T=e(45464),v=e(92880).extendFlat,g={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["norm"]}),uhoverformat:S("u",1),vhoverformat:S("v",1),whoverformat:S("w",1),xhoverformat:S("x"),yhoverformat:S("y"),zhoverformat:S("z"),showlegend:v({},T.showlegend,{dflt:!1})};v(g,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){g[t]=E[t]}),g.hoverinfo=v({},T.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),g.transforms=void 0,U.exports=g},83344:function(U,F,e){var d=e(47128);U.exports=function(n,E){for(var T=E.u,v=E.v,g=E.w,r=Math.min(E.x.length,E.y.length,E.z.length,T.length,v.length,g.length),t=-1/0,o=1/0,i=0;i<r;i++){var f=T[i],u=v[i],l=g[i],m=Math.sqrt(f*f+u*u+l*l);t=Math.max(t,m),o=Math.min(o,m)}E._len=r,E._normMax=t,d(n,E,{vals:[o,t],containerStr:"",cLetter:"c"})}},6648:function(U,F,e){var d=e(67792).gl_cone3d,S=e(67792).gl_cone3d.createConeMesh,n=e(3400).simpleMap,E=e(33040).parseColorScale,T=e(8932).extractOpts,v=e(3400).isArrayOrTypedArray,g=e(52094);function r(m,h){this.scene=m,this.uid=h,this.mesh=null,this.data=null}var t=r.prototype;t.handlePick=function(m){if(m.object===this.mesh){var h=m.index=m.data.index,w=this.data.x[h],c=this.data.y[h],a=this.data.z[h],p=this.data.u[h],x=this.data.v[h],A=this.data.w[h];m.traceCoordinate=[w,c,a,p,x,A,Math.sqrt(p*p+x*x+A*A)];var P=this.data.hovertext||this.data.text;return v(P)&&P[h]!==void 0?m.textLabel=P[h]:P&&(m.textLabel=P),!0}};var o={xaxis:0,yaxis:1,zaxis:2},i={tip:1,tail:0,cm:.25,center:.5},f={tip:1,tail:1,cm:.75,center:.5};function u(m,h){var w=m.fullSceneLayout,c=m.dataScale,a={};function p(C,M){var s=w[M],_=c[o[M]];return n(C,function(b){return s.d2l(b)*_})}a.vectors=g(p(h.u,"xaxis"),p(h.v,"yaxis"),p(h.w,"zaxis"),h._len),a.positions=g(p(h.x,"xaxis"),p(h.y,"yaxis"),p(h.z,"zaxis"),h._len);var x=T(h);a.colormap=E(h),a.vertexIntensityBounds=[x.min/h._normMax,x.max/h._normMax],a.coneOffset=i[h.anchor];var A=h.sizemode;A==="scaled"?a.coneSize=h.sizeref||.5:A==="absolute"?a.coneSize=h.sizeref&&h._normMax?h.sizeref/h._normMax:.5:A==="raw"&&(a.coneSize=h.sizeref),a.coneSizemode=A;var P=d(a),y=h.lightposition;return P.lightPosition=[y.x,y.y,y.z],P.ambient=h.lighting.ambient,P.diffuse=h.lighting.diffuse,P.specular=h.lighting.specular,P.roughness=h.lighting.roughness,P.fresnel=h.lighting.fresnel,P.opacity=h.opacity,h._pad=f[h.anchor]*P.vectorScale*P.coneScale*h._normMax,P}t.update=function(m){this.data=m;var h=u(this.scene,m);this.mesh.update(h)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function l(m,h){var w=m.glplot.gl,c=u(m,h),a=S(w,c),p=new r(m,h.uid);return p.mesh=a,p.data=h,a._trace=p,m.glplot.add(a),p}U.exports=l},86096:function(U,F,e){var d=e(3400),S=e(27260),n=e(86040);U.exports=function(T,v,g,r){function t(w,c){return d.coerce(T,v,n,w,c)}var o=t("u"),i=t("v"),f=t("w"),u=t("x"),l=t("y"),m=t("z");if(!o||!o.length||!i||!i.length||!f||!f.length||!u||!u.length||!l||!l.length||!m||!m.length){v.visible=!1;return}var h=t("sizemode");t("sizeref",h==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),S(T,v,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),v._length=null}},26048:function(U,F,e){U.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(d,S){return d.norm=S.traceCoordinate[6],d},meta:{}}},67104:function(U,F,e){var d=e(83328),S=e(52904),n=e(29736),E=n.axisHoverFormat,T=n.descriptionOnlyNumbers,v=e(49084),g=e(98192).u,r=e(25376),t=e(92880).extendFlat,o=e(69104),i=o.COMPARISON_OPS2,f=o.INTERVAL_OPS,u=S.line;U.exports=t({z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,text:d.text,hovertext:d.hovertext,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z",1),hovertemplate:d.hovertemplate,texttemplate:t({},d.texttemplate,{}),textfont:t({},d.textfont,{}),hoverongaps:d.hoverongaps,connectgaps:t({},d.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:T("contour label")},operation:{valType:"enumerated",values:[].concat(i).concat(f),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},u.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:g,smoothing:t({},u.smoothing,{}),editType:"plot"},zorder:S.zorder},v("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(U,F,e){var d=e(8932),S=e(19512),n=e(54444),E=e(46960);U.exports=function(v,g){var r=S(v,g),t=r[0].z;n(g,t);var o=g.contours,i=d.extractOpts(g),f;if(o.coloring==="heatmap"&&i.auto&&g.autocontour===!1){var u=o.start,l=E(o),m=o.size||1,h=Math.floor((l-u)/m)+1;isFinite(m)||(m=1,h=1);var w=u-m/2,c=w+h*m;f=[w,c]}else f=t;return d.calc(v,g,{vals:f,cLetter:"z"}),r}},56008:function(U){U.exports=function(F,e){var d=F[0],S=d.z,n;switch(e.type){case"levels":var E=Math.min(S[0][0],S[0][1]);for(n=0;n<F.length;n++){var T=F[n];T.prefixBoundary=!T.edgepaths.length&&(E>T.level||T.starts.length&&E===T.level)}break;case"constraint":if(d.prefixBoundary=!1,d.edgepaths.length)return;var v=d.x.length,g=d.y.length,r=-1/0,t=1/0;for(n=0;n<g;n++)t=Math.min(t,S[n][0]),t=Math.min(t,S[n][v-1]),r=Math.max(r,S[n][0]),r=Math.max(r,S[n][v-1]);for(n=1;n<v-1;n++)t=Math.min(t,S[0][n]),t=Math.min(t,S[g-1][n]),r=Math.max(r,S[0][n]),r=Math.max(r,S[g-1][n]);var o=e.value,i,f;switch(e._operation){case">":o>r&&(d.prefixBoundary=!0);break;case"<":(o<t||d.starts.length&&o===t)&&(d.prefixBoundary=!0);break;case"[]":i=Math.min(o[0],o[1]),f=Math.max(o[0],o[1]),(f<t||i>r||d.starts.length&&f===t)&&(d.prefixBoundary=!0);break;case"][":i=Math.min(o[0],o[1]),f=Math.max(o[0],o[1]),i<t&&f>r&&(d.prefixBoundary=!0);break}break}}},55296:function(U,F,e){var d=e(8932),S=e(41076),n=e(46960);function E(T,v,g){var r=v.contours,t=v.line,o=r.size||1,i=r.coloring,f=S(v,{isColorbar:!0});if(i==="heatmap"){var u=d.extractOpts(v);g._fillgradient=u.reversescale?d.flipScale(u.colorscale):u.colorscale,g._zrange=[u.min,u.max]}else i==="fill"&&(g._fillcolor=f);g._line={color:i==="lines"?f:t.color,width:r.showlines!==!1?t.width:0,dash:t.dash},g._levels={start:r.start,end:n(r),size:o}}U.exports={min:"zmin",max:"zmax",calc:E}},93252:function(U){U.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(U,F,e){var d=e(38248),S=e(17428),n=e(76308),E=n.addOpacity,T=n.opacity,v=e(69104),g=e(3400).isArrayOrTypedArray,r=v.CONSTRAINT_REDUCTION,t=v.COMPARISON_OPS2;U.exports=function(f,u,l,m,h,w){var c=u.contours,a,p,x,A=l("contours.operation");if(c._operation=r[A],o(l,c),A==="="?a=c.showlines=!0:(a=l("contours.showlines"),x=l("fillcolor",E((f.line||{}).color||h,.5))),a){var P=x&&T(x)?E(u.fillcolor,1):h;p=l("line.color",P),l("line.width",2),l("line.dash")}l("line.smoothing"),S(l,m,p,w)};function o(i,f){var u;t.indexOf(f.operation)===-1?(i("contours.value",[0,1]),g(f.value)?f.value.length>2?f.value=f.value.slice(2):f.length===0?f.value=[0,1]:f.length<2?(u=parseFloat(f.value[0]),f.value=[u,u+1]):f.value=[parseFloat(f.value[0]),parseFloat(f.value[1])]:d(f.value)&&(u=parseFloat(f.value),f.value=[u,u+1])):(i("contours.value",0),d(f.value)||(g(f.value)?f.value=parseFloat(f.value[0]):f.value=0))}},3212:function(U,F,e){var d=e(69104),S=e(38248);U.exports={"[]":E("[]"),"][":E("]["),">":T(">"),"<":T("<"),"=":T("=")};function n(v,g){var r=Array.isArray(g),t;function o(i){return S(i)?+i:null}return d.COMPARISON_OPS2.indexOf(v)!==-1?t=o(r?g[0]:g):d.INTERVAL_OPS.indexOf(v)!==-1?t=r?[o(g[0]),o(g[1])]:[o(g),o(g)]:d.SET_OPS.indexOf(v)!==-1&&(t=r?g.map(o):[o(g)]),t}function E(v){return function(g){g=n(v,g);var r=Math.min(g[0],g[1]),t=Math.max(g[0],g[1]);return{start:r,end:t,size:t-r}}}function T(v){return function(g){return g=n(v,g),{start:g,end:1/0,size:1/0}}}},84952:function(U){U.exports=function(e,d,S,n){var E=n("contours.start"),T=n("contours.end"),v=E===!1||T===!1,g=S("contours.size"),r;v?r=d.autocontour=!0:r=S("autocontour",!1),(r||!g)&&S("ncontours")}},82172:function(U,F,e){var d=e(3400);U.exports=function(n,E){var T,v,g,r=function(i){return i.reverse()},t=function(i){return i};switch(E){case"=":case"<":return n;case">":for(n.length!==1&&d.warn("Contour data invalid for the specified inequality operation."),v=n[0],T=0;T<v.edgepaths.length;T++)v.edgepaths[T]=r(v.edgepaths[T]);for(T=0;T<v.paths.length;T++)v.paths[T]=r(v.paths[T]);for(T=0;T<v.starts.length;T++)v.starts[T]=r(v.starts[T]);return n;case"][":var o=r;r=t,t=o;case"[]":for(n.length!==2&&d.warn("Contour data invalid for the specified inequality range operation."),v=S(n[0]),g=S(n[1]),T=0;T<v.edgepaths.length;T++)v.edgepaths[T]=r(v.edgepaths[T]);for(T=0;T<v.paths.length;T++)v.paths[T]=r(v.paths[T]);for(T=0;T<v.starts.length;T++)v.starts[T]=r(v.starts[T]);for(;g.edgepaths.length;)v.edgepaths.push(t(g.edgepaths.shift()));for(;g.paths.length;)v.paths.push(t(g.paths.shift()));for(;g.starts.length;)v.starts.push(t(g.starts.shift()));return[v]}};function S(n){return d.extendFlat({},n,{edgepaths:d.extendDeep([],n.edgepaths),paths:d.extendDeep([],n.paths),starts:d.extendDeep([],n.starts)})}},57004:function(U,F,e){var d=e(3400),S=e(51264),n=e(31147),E=e(95536),T=e(84952),v=e(97680),g=e(39096),r=e(67104);U.exports=function(o,i,f,u){function l(c,a){return d.coerce(o,i,r,c,a)}function m(c){return d.coerce2(o,i,r,c)}var h=S(o,i,l,u);if(!h){i.visible=!1;return}n(o,i,u,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var w=l("contours.type")==="constraint";l("connectgaps",d.isArray1D(i.z)),w?E(o,i,l,u,f):(T(o,i,l,m),v(o,i,l,u)),i.contours&&i.contours.coloring==="heatmap"&&g(l,u),l("zorder")}},61512:function(U,F,e){var d=e(3400),S=e(3212),n=e(46960);U.exports=function(T,v,g){for(var r=T.type==="constraint"?S[T._operation](T.value):T,t=r.size,o=[],i=n(r),f=g.trace._carpetTrace,u=f?{xaxis:f.aaxis,yaxis:f.baxis,x:g.a,y:g.b}:{xaxis:v.xaxis,yaxis:v.yaxis,x:g.x,y:g.y},l=r.start;l<i;l+=t)if(o.push(d.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:g.z,smoothing:g.trace.line.smoothing},u)),o.length>1e3){d.warn("Too many contours, clipping at 1000",T);break}return o}},46960:function(U){U.exports=function(e){return e.end+e.size/1e6}},88748:function(U,F,e){var d=e(3400),S=e(93252);U.exports=function(t,o,i){var f,u,l,m,h;for(o=o||.01,i=i||.01,l=0;l<t.length;l++){for(m=t[l],h=0;h<m.starts.length;h++)u=m.starts[h],T(m,u,"edge",o,i);for(f=0;Object.keys(m.crossings).length&&f<1e4;)f++,u=Object.keys(m.crossings)[0].split(",").map(Number),T(m,u,void 0,o,i);f===1e4&&d.log("Infinite loop in contour?")}};function n(r,t,o,i){return Math.abs(r[0]-t[0])<o&&Math.abs(r[1]-t[1])<i}function E(r,t){var o=r[2]-t[2],i=r[3]-t[3];return Math.sqrt(o*o+i*i)}function T(r,t,o,i,f){var u=t.join(","),l=r.crossings[u],m=v(l,o,t),h=[g(r,t,[-m[0],-m[1]])],w=r.z.length,c=r.z[0].length,a=t.slice(),p=m.slice(),x;for(x=0;x<1e4;x++){if(l>20?(l=S.CHOOSESADDLE[l][(m[0]||m[1])<0?0:1],r.crossings[u]=S.SADDLEREMAINDER[l]):delete r.crossings[u],m=S.NEWDELTA[l],!m){d.log("Found bad marching index:",l,t,r.level);break}h.push(g(r,t,m)),t[0]+=m[0],t[1]+=m[1],u=t.join(","),n(h[h.length-1],h[h.length-2],i,f)&&h.pop();var A=m[0]&&(t[0]<0||t[0]>c-2)||m[1]&&(t[1]<0||t[1]>w-2),P=t[0]===a[0]&&t[1]===a[1]&&m[0]===p[0]&&m[1]===p[1];if(P||o&&A)break;l=r.crossings[u]}x===1e4&&d.log("Infinite loop in contour?");var y=n(h[0],h[h.length-1],i,f),C=0,M=.2*r.smoothing,s=[],_=0,b,k,D,V,O,N,B,z,H,X,$;for(x=1;x<h.length;x++)B=E(h[x],h[x-1]),C+=B,s.push(B);var ne=C/s.length*M;function q(J){return h[J%h.length]}for(x=h.length-2;x>=_;x--)if(b=s[x],b<ne){for(D=0,k=x-1;k>=_&&b+s[k]<ne;k--)b+=s[k];if(y&&x===h.length-2)for(D=0;D<k&&b+s[D]<ne;D++)b+=s[D];O=x-k+D+1,N=Math.floor((x+k+D+2)/2),!y&&x===h.length-2?V=h[h.length-1]:!y&&k===-1?V=h[0]:O%2?V=q(N):V=[(q(N)[0]+q(N+1)[0])/2,(q(N)[1]+q(N+1)[1])/2],h.splice(k+1,x-k+1,V),x=k+1,D&&(_=D),y&&(x===h.length-2?h[D]=h[h.length-1]:x===0&&(h[h.length-1]=h[0]))}for(h.splice(0,_),x=0;x<h.length;x++)h[x].length=2;if(!(h.length<2))if(y)h.pop(),r.paths.push(h);else{o||d.log("Unclosed interior contour?",r.level,a.join(","),h.join("L"));var ue=!1;for(z=0;z<r.edgepaths.length;z++)if(X=r.edgepaths[z],!ue&&n(X[0],h[h.length-1],i,f)){h.pop(),ue=!0;var te=!1;for(H=0;H<r.edgepaths.length;H++)if($=r.edgepaths[H],n($[$.length-1],h[0],i,f)){te=!0,h.shift(),r.edgepaths.splice(z,1),H===z?r.paths.push(h.concat($)):(H>z&&H--,r.edgepaths[H]=$.concat(h,X));break}te||(r.edgepaths[z]=h.concat(X))}for(z=0;z<r.edgepaths.length&&!ue;z++)X=r.edgepaths[z],n(X[X.length-1],h[0],i,f)&&(h.shift(),r.edgepaths[z]=X.concat(h),ue=!0);ue||r.edgepaths.push(h)}}function v(r,t,o){var i=0,f=0;return r>20&&t?r===208||r===1114?i=o[0]===0?1:-1:f=o[1]===0?1:-1:S.BOTTOMSTART.indexOf(r)!==-1?f=1:S.LEFTSTART.indexOf(r)!==-1?i=1:S.TOPSTART.indexOf(r)!==-1?f=-1:i=-1,[i,f]}function g(r,t,o){var i=t[0]+Math.max(o[0],0),f=t[1]+Math.max(o[1],0),u=r.z[f][i],l=r.xaxis,m=r.yaxis;if(o[1]){var h=(r.level-u)/(r.z[f][i+1]-u),w=(h!==1?(1-h)*l.c2l(r.x[i]):0)+(h!==0?h*l.c2l(r.x[i+1]):0);return[l.c2p(l.l2c(w),!0),m.c2p(r.y[f],!0),i+h,f]}else{var c=(r.level-u)/(r.z[f+1][i]-u),a=(c!==1?(1-c)*m.c2l(r.y[f]):0)+(c!==0?c*m.c2l(r.y[f+1]):0);return[l.c2p(r.x[i],!0),m.c2p(m.l2c(a),!0),i,f+c]}}},38200:function(U,F,e){var d=e(76308),S=e(55512);U.exports=function(E,T,v,g,r){r||(r={}),r.isContour=!0;var t=S(E,T,v,g,r);return t&&t.forEach(function(o){var i=o.trace;i.contours.type==="constraint"&&(i.fillcolor&&d.opacity(i.fillcolor)?o.color=d.addOpacity(i.fillcolor,1):i.contours.showlines&&d.opacity(i.line.color)&&(o.color=d.addOpacity(i.line.color,1)))}),t}},66240:function(U,F,e){U.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(U,F,e){var d=e(3400);U.exports=function(n,E,T,v){v||(v={});var g=n("contours.showlabels");if(g){var r=E.font;d.coerceFont(n,"contours.labelfont",r,{overrideDflt:{color:T}}),n("contours.labelformat")}v.hasHover!==!1&&n("zhoverformat")}},41076:function(U,F,e){var d=e(33428),S=e(8932),n=e(46960);U.exports=function(T){var v=T.contours,g=v.start,r=n(v),t=v.size||1,o=Math.floor((r-g)/t)+1,i=v.coloring==="lines"?0:1,f=S.extractOpts(T);isFinite(t)||(t=1,o=1);var u=f.reversescale?S.flipScale(f.colorscale):f.colorscale,l=u.length,m=new Array(l),h=new Array(l),w,c,a=f.min,p=f.max;if(v.coloring==="heatmap"){for(c=0;c<l;c++)w=u[c],m[c]=w[0]*(p-a)+a,h[c]=w[1];var x=d.extent([a,p,v.start,v.start+t*(o-1)]),A=x[a<p?0:1],P=x[a<p?1:0];A!==a&&(m.splice(0,0,A),h.splice(0,0,h[0])),P!==p&&(m.push(P),h.push(h[h.length-1]))}else{var y=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(y&&(g<=a||r>=p)&&(g<=a&&(g=a),r>=p&&(r=p),o=Math.floor((r-g)/t)+1,i=0),c=0;c<l;c++)w=u[c],m[c]=(w[0]*(o+i-1)-i/2)*t+g,h[c]=w[1];(y||T.autocontour)&&(m[0]>a&&(m.unshift(a),h.unshift(h[0])),m[m.length-1]<p&&(m.push(p),h.push(h[h.length-1])))}return S.makeColorScaleFunc({domain:m,range:h},{noNumericCheck:!0})}},72424:function(U,F,e){var d=e(93252);U.exports=function(E){var T=E[0].z,v=T.length,g=T[0].length,r=v===2||g===2,t,o,i,f,u,l,m,h,w;for(o=0;o<v-1;o++)for(f=[],o===0&&(f=f.concat(d.BOTTOMSTART)),o===v-2&&(f=f.concat(d.TOPSTART)),t=0;t<g-1;t++)for(i=f.slice(),t===0&&(i=i.concat(d.LEFTSTART)),t===g-2&&(i=i.concat(d.RIGHTSTART)),u=t+","+o,l=[[T[o][t],T[o][t+1]],[T[o+1][t],T[o+1][t+1]]],w=0;w<E.length;w++)h=E[w],m=S(h.level,l),m&&(h.crossings[u]=m,i.indexOf(m)!==-1&&(h.starts.push([t,o]),r&&i.indexOf(m,i.indexOf(m)+1)!==-1&&h.starts.push([t,o])))};function S(n,E){var T=(E[0][0]>n?0:1)+(E[0][1]>n?0:2)+(E[1][1]>n?0:4)+(E[1][0]>n?0:8);if(T===5||T===10){var v=(E[0][0]+E[0][1]+E[1][0]+E[1][1])/4;return n>v?T===5?713:1114:T===5?104:208}return T===15?0:T}},23676:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(8932),T=e(72736),v=e(54460),g=e(78344),r=e(41420),t=e(72424),o=e(88748),i=e(61512),f=e(82172),u=e(56008),l=e(93252),m=l.LABELOPTIMIZER;F.plot=function(y,C,M,s){var _=C.xaxis,b=C.yaxis;S.makeTraceGroups(s,M,"contour").each(function(k){var D=d.select(this),V=k[0],O=V.trace,N=V.x,B=V.y,z=O.contours,H=i(z,C,V),X=S.ensureSingle(D,"g","heatmapcoloring"),$=[];z.coloring==="heatmap"&&($=[k]),r(y,C,$,X),t(H),o(H);var ne=_.c2p(N[0],!0),q=_.c2p(N[N.length-1],!0),ue=b.c2p(B[0],!0),te=b.c2p(B[B.length-1],!0),J=[[ne,te],[q,te],[q,ue],[ne,ue]],ie=H;z.type==="constraint"&&(ie=f(H,z._operation)),h(D,J,z),w(D,ie,J,z),a(D,H,y,V,z),x(D,C,y,V,J)})};function h(P,y,C){var M=S.ensureSingle(P,"g","contourbg"),s=M.selectAll("path").data(C.coloring==="fill"?[0]:[]);s.enter().append("path"),s.exit().remove(),s.attr("d","M"+y.join("L")+"Z").style("stroke","none")}function w(P,y,C,M){var s=M.coloring==="fill"||M.type==="constraint"&&M._operation!=="=",_="M"+C.join("L")+"Z";s&&u(y,M);var b=S.ensureSingle(P,"g","contourfill"),k=b.selectAll("path").data(s?y:[]);k.enter().append("path"),k.exit().remove(),k.each(function(D){var V=(D.prefixBoundary?_:"")+c(D,C);V?d.select(this).attr("d",V).style("stroke","none"):d.select(this).remove()})}function c(P,y){var C="",M=0,s=P.edgepaths.map(function(ne,q){return q}),_=!0,b,k,D,V,O,N;function B(ne){return Math.abs(ne[1]-y[0][1])<.01}function z(ne){return Math.abs(ne[1]-y[2][1])<.01}function H(ne){return Math.abs(ne[0]-y[0][0])<.01}function X(ne){return Math.abs(ne[0]-y[2][0])<.01}for(;s.length;){for(N=n.smoothopen(P.edgepaths[M],P.smoothing),C+=_?N:N.replace(/^M/,"L"),s.splice(s.indexOf(M),1),b=P.edgepaths[M][P.edgepaths[M].length-1],V=-1,D=0;D<4;D++){if(!b){S.log("Missing end?",M,P);break}for(B(b)&&!X(b)?k=y[1]:H(b)?k=y[0]:z(b)?k=y[3]:X(b)&&(k=y[2]),O=0;O<P.edgepaths.length;O++){var $=P.edgepaths[O][0];Math.abs(b[0]-k[0])<.01?Math.abs(b[0]-$[0])<.01&&($[1]-b[1])*(k[1]-$[1])>=0&&(k=$,V=O):Math.abs(b[1]-k[1])<.01?Math.abs(b[1]-$[1])<.01&&($[0]-b[0])*(k[0]-$[0])>=0&&(k=$,V=O):S.log("endpt to newendpt is not vert. or horz.",b,k,$)}if(b=k,V>=0)break;C+="L"+k}if(V===P.edgepaths.length){S.log("unclosed perimeter path");break}M=V,_=s.indexOf(M)===-1,_&&(M=s[0],C+="Z")}for(M=0;M<P.paths.length;M++)C+=n.smoothclosed(P.paths[M],P.smoothing);return C}function a(P,y,C,M,s){var _=C._context.staticPlot,b=S.ensureSingle(P,"g","contourlines"),k=s.showlines!==!1,D=s.showlabels,V=k&&D,O=F.createLines(b,k||D,y,_),N=F.createLineClip(b,V,C,M.trace.uid),B=P.selectAll("g.contourlabels").data(D?[0]:[]);if(B.exit().remove(),B.enter().append("g").classed("contourlabels",!0),D){var z=[],H=[];S.clearLocationCache();var X=F.labelFormatter(C,M),$=n.tester.append("text").attr("data-notex",1).call(n.font,s.labelfont),ne=y[0].xaxis,q=y[0].yaxis,ue=ne._length,te=q._length,J=ne.range,ie=q.range,K=S.aggNums(Math.min,null,M.x),ee=S.aggNums(Math.max,null,M.x),le=S.aggNums(Math.min,null,M.y),j=S.aggNums(Math.max,null,M.y),Z=Math.max(ne.c2p(K,!0),0),fe=Math.min(ne.c2p(ee,!0),ue),re=Math.max(q.c2p(j,!0),0),ce=Math.min(q.c2p(le,!0),te),xe={};J[0]<J[1]?(xe.left=Z,xe.right=fe):(xe.left=fe,xe.right=Z),ie[0]<ie[1]?(xe.top=re,xe.bottom=ce):(xe.top=ce,xe.bottom=re),xe.middle=(xe.top+xe.bottom)/2,xe.center=(xe.left+xe.right)/2,z.push([[xe.left,xe.top],[xe.right,xe.top],[xe.right,xe.bottom],[xe.left,xe.bottom]]);var Te=Math.sqrt(ue*ue+te*te),we=l.LABELDISTANCE*Te/Math.max(1,y.length/l.LABELINCREASE);O.each(function(_e){var ke=F.calcTextOpts(_e.level,X,$,C);d.select(this).selectAll("path").each(function(){var Ne=this,Ee=S.getVisibleSegment(Ne,xe,ke.height/2);if(Ee&&!(Ee.len<(ke.width+ke.height)*l.LABELMIN))for(var ze=Math.min(Math.ceil(Ee.len/we),l.LABELMAX),Ce=0;Ce<ze;Ce++){var Oe=F.findBestTextLocation(Ne,Ee,ke,H,xe);if(!Oe)break;F.addLabelData(Oe,ke,H,z)}})}),$.remove(),F.drawLabels(B,H,C,N,V?z:null)}D&&!k&&O.remove()}F.createLines=function(P,y,C,M){var s=C[0].smoothing,_=P.selectAll("g.contourlevel").data(y?C:[]);if(_.exit().remove(),_.enter().append("g").classed("contourlevel",!0),y){var b=_.selectAll("path.openline").data(function(D){return D.pedgepaths||D.edgepaths});b.exit().remove(),b.enter().append("path").classed("openline",!0),b.attr("d",function(D){return n.smoothopen(D,s)}).style("stroke-miterlimit",1).style("vector-effect",M?"none":"non-scaling-stroke");var k=_.selectAll("path.closedline").data(function(D){return D.ppaths||D.paths});k.exit().remove(),k.enter().append("path").classed("closedline",!0),k.attr("d",function(D){return n.smoothclosed(D,s)}).style("stroke-miterlimit",1).style("vector-effect",M?"none":"non-scaling-stroke")}return _},F.createLineClip=function(P,y,C,M){var s=C._fullLayout._clips,_=y?"clipline"+M:null,b=s.selectAll("#"+_).data(y?[0]:[]);return b.exit().remove(),b.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),n.setClipUrl(P,_,C),b},F.labelFormatter=function(P,y){var C=P._fullLayout,M=y.trace,s=M.contours,_={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(s.labelformat)_.tickformat=s.labelformat,g(_,C);else{var b=E.extractOpts(M);if(b&&b.colorbar&&b.colorbar._axis)_=b.colorbar._axis;else{if(s.type==="constraint"){var k=s.value;S.isArrayOrTypedArray(k)?_.range=[k[0],k[k.length-1]]:_.range=[k,k]}else _.range=[s.start,s.end],_.nticks=(s.end-s.start)/s.size;_.range[0]===_.range[1]&&(_.range[1]+=_.range[0]||1),_.nticks||(_.nticks=1e3),g(_,C),v.prepTicks(_),_._tmin=null,_._tmax=null}}return function(D){return v.tickText(_,D).text}},F.calcTextOpts=function(P,y,C,M){var s=y(P);C.text(s).call(T.convertToTspans,M);var _=C.node(),b=n.bBox(_,!0);return{text:s,width:b.width,height:b.height,fontSize:+_.style["font-size"].replace("px",""),level:P,dy:(b.top+b.bottom)/2}},F.findBestTextLocation=function(P,y,C,M,s){var _=C.width,b,k,D,V,O;y.isClosed?(k=y.len/m.INITIALSEARCHPOINTS,b=y.min+k/2,D=y.max):(k=(y.len-_)/(m.INITIALSEARCHPOINTS+1),b=y.min+k+_/2,D=y.max-(k+_)/2);for(var N=1/0,B=0;B<m.ITERATIONS;B++){for(var z=b;z<D;z+=k){var H=S.getTextLocation(P,y.total,z,_),X=p(H,C,M,s);X<N&&(N=X,O=H,V=z)}if(N>m.MAXCOST*2)break;B&&(k/=2),b=V-k/2,D=b+k*1.5}if(N<=m.MAXCOST)return O};function p(P,y,C,M){var s=y.width/2,_=y.height/2,b=P.x,k=P.y,D=P.theta,V=Math.cos(D)*s,O=Math.sin(D)*s,N=(b>M.center?M.right-b:b-M.left)/(V+Math.abs(Math.sin(D)*_)),B=(k>M.middle?M.bottom-k:k-M.top)/(Math.abs(O)+Math.cos(D)*_);if(N<1||B<1)return 1/0;var z=m.EDGECOST*(1/(N-1)+1/(B-1));z+=m.ANGLECOST*D*D;for(var H=b-V,X=k-O,$=b+V,ne=k+O,q=0;q<C.length;q++){var ue=C[q],te=Math.cos(ue.theta)*ue.width/2,J=Math.sin(ue.theta)*ue.width/2,ie=S.segmentDistance(H,X,$,ne,ue.x-te,ue.y-J,ue.x+te,ue.y+J)*2/(y.height+ue.height),K=ue.level===y.level,ee=K?m.SAMELEVELDISTANCE:1;if(ie<=ee)return 1/0;var le=m.NEIGHBORCOST*(K?m.SAMELEVELFACTOR:1);z+=le/(ie-ee)}return z}F.addLabelData=function(P,y,C,M){var s=y.fontSize,_=y.width+s/3,b=Math.max(0,y.height-s/3),k=P.x,D=P.y,V=P.theta,O=Math.sin(V),N=Math.cos(V),B=function(H,X){return[k+H*N-X*O,D+H*O+X*N]},z=[B(-_/2,-b/2),B(-_/2,b/2),B(_/2,b/2),B(_/2,-b/2)];C.push({text:y.text,x:k,y:D,dy:y.dy,theta:V,level:y.level,width:_,height:b}),M.push(z)},F.drawLabels=function(P,y,C,M,s){var _=P.selectAll("text").data(y,function(V){return V.text+","+V.x+","+V.y+","+V.theta});if(_.exit().remove(),_.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(V){var O=V.x+Math.sin(V.theta)*V.dy,N=V.y-Math.cos(V.theta)*V.dy;d.select(this).text(V.text).attr({x:O,y:N,transform:"rotate("+180*V.theta/Math.PI+" "+O+" "+N+")"}).call(T.convertToTspans,C)}),s){for(var b="",k=0;k<s.length;k++)b+="M"+s[k].join("L")+"Z";var D=S.ensureSingle(M,"path","");D.attr("d",b)}};function x(P,y,C,M,s){var _=M.trace,b=C._fullLayout._clips,k="clip"+_.uid,D=b.selectAll("#"+k).data(_.connectgaps?[]:[0]);if(D.enter().append("clipPath").classed("contourclip",!0).attr("id",k),D.exit().remove(),_.connectgaps===!1){var V={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:y.xaxis,yaxis:y.yaxis,x:M.x,y:M.y,z:A(M),smoothing:0};t([V]),o([V]),u([V],{type:"levels"});var O=S.ensureSingle(D,"path","");O.attr("d",(V.prefixBoundary?"M"+s.join("L")+"Z":"")+c(V,s))}else k=null;n.setClipUrl(P,k,C)}function A(P){var y=P.trace._emptypoints,C=[],M=P.z.length,s=P.z[0].length,_,b=[],k;for(_=0;_<s;_++)b.push(1);for(_=0;_<M;_++)C.push(b.slice());for(_=0;_<y.length;_++)k=y[_],C[k[0]][k[1]]=0;return P.zmask=C,C}},54444:function(U,F,e){var d=e(54460),S=e(3400);U.exports=function(T,v){var g=T.contours;if(T.autocontour){var r=T.zmin,t=T.zmax;(T.zauto||r===void 0)&&(r=S.aggNums(Math.min,null,v)),(T.zauto||t===void 0)&&(t=S.aggNums(Math.max,null,v));var o=n(r,t,T.ncontours);g.size=o.dtick,g.start=d.tickFirst(o),o.range.reverse(),g.end=d.tickFirst(o),g.start===r&&(g.start+=g.size),g.end===t&&(g.end-=g.size),g.start>g.end&&(g.start=g.end=(g.start+g.end)/2),T._input.contours||(T._input.contours={}),S.extendFlat(T._input.contours,{start:g.start,end:g.end,size:g.size}),T._input.autocontour=!0}else if(g.type!=="constraint"){var i=g.start,f=g.end,u=T._input.contours;if(i>f&&(g.start=u.start=f,f=g.end=u.end=i,i=g.start),!(g.size>0)){var l;i===f?l=1:l=n(i,f,T.ncontours).dtick,u.size=g.size=l}}};function n(E,T,v){var g={type:"linear",range:[E,T]};return d.autoTicks(g,(T-E)/(v||15)),g}},52440:function(U,F,e){var d=e(33428),S=e(43616),n=e(41648),E=e(41076);U.exports=function(v){var g=d.select(v).selectAll("g.contour");g.style("opacity",function(r){return r[0].trace.opacity}),g.each(function(r){var t=d.select(this),o=r[0].trace,i=o.contours,f=o.line,u=i.size||1,l=i.start,m=i.type==="constraint",h=!m&&i.coloring==="lines",w=!m&&i.coloring==="fill",c=h||w?E(o):null;t.selectAll("g.contourlevel").each(function(x){d.select(this).selectAll("path").call(S.lineGroupStyle,f.width,h?c(x.level):f.color,f.dash)});var a=i.labelfont;if(t.selectAll("g.contourlabels text").each(function(x){S.font(d.select(this),{weight:a.weight,style:a.style,variant:a.variant,textcase:a.textcase,lineposition:a.lineposition,shadow:a.shadow,family:a.family,size:a.size,color:a.color||(h?c(x.level):f.color)})}),m)t.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(w){var p;t.selectAll("g.contourfill path").style("fill",function(x){return p===void 0&&(p=x.level),c(x.level+.5*u)}),p===void 0&&(p=l),t.selectAll("g.contourbg path").style("fill",c(p-.5*u))}}),n(v)}},97680:function(U,F,e){var d=e(27260),S=e(17428);U.exports=function(E,T,v,g,r){var t=v("contours.coloring"),o,i="";t==="fill"&&(o=v("contours.showlines")),o!==!1&&(t!=="lines"&&(i=v("line.color","#000")),v("line.width",.5),v("line.dash")),t!=="none"&&(E.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,d(E,T,g,v,{prefix:"",cLetter:"z"})),v("line.smoothing"),S(v,g,i,r)}},37960:function(U,F,e){var d=e(83328),S=e(67104),n=e(49084),E=e(92880).extendFlat,T=S.contours;U.exports=E({carpet:{valType:"string",editType:"calc"},z:d.z,a:d.x,a0:d.x0,da:d.dx,b:d.y,b0:d.y0,db:d.dy,text:d.text,hovertext:d.hovertext,transpose:d.transpose,atype:d.xtype,btype:d.ytype,fillcolor:S.fillcolor,autocontour:S.autocontour,ncontours:S.ncontours,contours:{type:T.type,start:T.start,end:T.end,size:T.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:T.showlines,showlabels:T.showlabels,labelfont:T.labelfont,labelformat:T.labelformat,operation:T.operation,value:T.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:S.line.color,width:S.line.width,dash:S.line.dash,smoothing:S.line.smoothing,editType:"plot"},zorder:S.zorder,transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},30572:function(U,F,e){var d=e(47128),S=e(3400),n=e(2872),E=e(26136),T=e(70448),v=e(11240),g=e(35744),r=e(3252),t=e(50948),o=e(54444);U.exports=function(u,l){var m=l._carpetTrace=t(u,l);if(!(!m||!m.visible||m.visible==="legendonly")){if(!l.a||!l.b){var h=u.data[m.index],w=u.data[l.index];w.a||(w.a=h.a),w.b||(w.b=h.b),r(w,l,l._defaultColor,u._fullLayout)}var c=i(u,l);return o(l,l._z),c}};function i(f,u){var l=u._carpetTrace,m=l.aaxis,h=l.baxis,w,c,a,p,x,A,P;m._minDtick=0,h._minDtick=0,S.isArray1D(u.z)&&n(u,m,h,"a","b",["z"]),w=u._a=u._a||u.a,p=u._b=u._b||u.b,w=w?m.makeCalcdata(u,"_a"):[],p=p?h.makeCalcdata(u,"_b"):[],c=u.a0||0,a=u.da||1,x=u.b0||0,A=u.db||1,P=u._z=E(u._z||u.z,u.transpose),u._emptypoints=v(P),T(P,u._emptypoints);var y=S.maxRowLength(P),C=u.xtype==="scaled"?"":w,M=g(u,C,c,a,y,m),s=u.ytype==="scaled"?"":p,_=g(u,s,x,A,P.length,h),b={a:M,b:_,z:P};return u.contours.type==="levels"&&u.contours.coloring!=="none"&&d(f,u,{vals:P,containerStr:"",cLetter:"z"}),[b]}},3252:function(U,F,e){var d=e(3400),S=e(51264),n=e(37960),E=e(95536),T=e(84952),v=e(97680);U.exports=function(r,t,o,i){function f(h,w){return d.coerce(r,t,n,h,w)}function u(h){return d.coerce2(r,t,n,h)}if(f("carpet"),r.a&&r.b){var l=S(r,t,f,i,"a","b");if(!l){t.visible=!1;return}f("text");var m=f("contours.type")==="constraint";m?E(r,t,f,i,o,{hasHover:!1}):(T(r,t,f,u),v(r,t,f,i,{hasHover:!1}))}else t._defaultColor=o,t._length=null;f("zorder")}},40448:function(U,F,e){U.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(U,F,e){var d=e(33428),S=e(87072),n=e(53416),E=e(43616),T=e(3400),v=e(72424),g=e(88748),r=e(23676),t=e(93252),o=e(82172),i=e(61512),f=e(56008),u=e(50948),l=e(77712);U.exports=function(C,M,s,_){var b=M.xaxis,k=M.yaxis;T.makeTraceGroups(_,s,"contour").each(function(D){var V=d.select(this),O=D[0],N=O.trace,B=N._carpetTrace=u(C,N),z=C.calcdata[B.index][0];if(!B.visible||B.visible==="legendonly")return;var H=O.a,X=O.b,$=N.contours,ne=i($,M,O),q=$.type==="constraint",ue=$._operation,te=q?ue==="="?"lines":"fill":$.coloring;function J(Te){var we=B.ab2xy(Te[0],Te[1],!0);return[b.c2p(we[0]),k.c2p(we[1])]}var ie=[[H[0],X[X.length-1]],[H[H.length-1],X[X.length-1]],[H[H.length-1],X[0]],[H[0],X[0]]];v(ne);var K=(H[H.length-1]-H[0])*1e-8,ee=(X[X.length-1]-X[0])*1e-8;g(ne,K,ee);var le=ne;$.type==="constraint"&&(le=o(ne,ue)),m(ne,J);var j,Z,fe,re,ce=[];for(re=z.clipsegments.length-1;re>=0;re--)j=z.clipsegments[re],Z=S([],j.x,b.c2p),fe=S([],j.y,k.c2p),Z.reverse(),fe.reverse(),ce.push(n(Z,fe,j.bicubic));var xe="M"+ce.join("L")+"Z";x(V,z.clipsegments,b,k,q,te),A(N,V,b,k,le,ie,J,B,z,te,xe),h(V,ne,C,O,$,M,B),E.setClipUrl(V,B._clipPathId,C)})};function m(y,C){var M,s,_,b,k,D,V,O,N;for(M=0;M<y.length;M++){for(b=y[M],k=b.pedgepaths=[],D=b.ppaths=[],s=0;s<b.edgepaths.length;s++){for(N=b.edgepaths[s],V=[],_=0;_<N.length;_++)V[_]=C(N[_]);k.push(V)}for(s=0;s<b.paths.length;s++){for(N=b.paths[s],O=[],_=0;_<N.length;_++)O[_]=C(N[_]);D.push(O)}}}function h(y,C,M,s,_,b,k){var D=M._context.staticPlot,V=T.ensureSingle(y,"g","contourlines"),O=_.showlines!==!1,N=_.showlabels,B=O&&N,z=r.createLines(V,O||N,C,D),H=r.createLineClip(V,B,M,s.trace.uid),X=y.selectAll("g.contourlabels").data(N?[0]:[]);if(X.exit().remove(),X.enter().append("g").classed("contourlabels",!0),N){var $=b.xaxis,ne=b.yaxis,q=$._length,ue=ne._length,te=[[[0,0],[q,0],[q,ue],[0,ue]]],J=[];T.clearLocationCache();var ie=r.labelFormatter(M,s),K=E.tester.append("text").attr("data-notex",1).call(E.font,_.labelfont),ee={left:0,right:q,center:q/2,top:0,bottom:ue,middle:ue/2},le=Math.sqrt(q*q+ue*ue),j=t.LABELDISTANCE*le/Math.max(1,C.length/t.LABELINCREASE);z.each(function(Z){var fe=r.calcTextOpts(Z.level,ie,K,M);d.select(this).selectAll("path").each(function(re){var ce=this,xe=T.getVisibleSegment(ce,ee,fe.height/2);if(xe&&(w(ce,re,Z,xe,k,fe.height),!(xe.len<(fe.width+fe.height)*t.LABELMIN)))for(var Te=Math.min(Math.ceil(xe.len/j),t.LABELMAX),we=0;we<Te;we++){var _e=r.findBestTextLocation(ce,xe,fe,J,ee);if(!_e)break;r.addLabelData(_e,fe,J,te)}})}),K.remove(),r.drawLabels(X,J,M,H,B?te:null)}N&&!O&&z.remove()}function w(y,C,M,s,_,b){for(var k,D=0;D<M.pedgepaths.length;D++)C===M.pedgepaths[D]&&(k=M.edgepaths[D]);if(!k)return;var V=_.a[0],O=_.a[_.a.length-1],N=_.b[0],B=_.b[_.b.length-1];function z(q,ue){var te=0,J,ie=.1;return(Math.abs(q[0]-V)<ie||Math.abs(q[0]-O)<ie)&&(J=a(_.dxydb_rough(q[0],q[1],ie)),te=Math.max(te,b*p(ue,J)/2)),(Math.abs(q[1]-N)<ie||Math.abs(q[1]-B)<ie)&&(J=a(_.dxyda_rough(q[0],q[1],ie)),te=Math.max(te,b*p(ue,J)/2)),te}var H=c(y,0,1),X=c(y,s.total,s.total-1),$=z(k[0],H),ne=s.total-z(k[k.length-1],X);s.min<$&&(s.min=$),s.max>ne&&(s.max=ne),s.len=s.max-s.min}function c(y,C,M){var s=y.getPointAtLength(C),_=y.getPointAtLength(M),b=_.x-s.x,k=_.y-s.y,D=Math.sqrt(b*b+k*k);return[b/D,k/D]}function a(y){var C=Math.sqrt(y[0]*y[0]+y[1]*y[1]);return[y[0]/C,y[1]/C]}function p(y,C){var M=Math.abs(y[0]*C[0]+y[1]*C[1]),s=Math.sqrt(1-M*M);return s/M}function x(y,C,M,s,_,b){var k,D,V,O,N=T.ensureSingle(y,"g","contourbg"),B=N.selectAll("path").data(b==="fill"&&!_?[0]:[]);B.enter().append("path"),B.exit().remove();var z=[];for(O=0;O<C.length;O++)k=C[O],D=S([],k.x,M.c2p),V=S([],k.y,s.c2p),z.push(n(D,V,k.bicubic));B.attr("d","M"+z.join("L")+"Z").style("stroke","none")}function A(y,C,M,s,_,b,k,D,V,O,N){var B=O==="fill";B&&f(_,y.contours);var z=T.ensureSingle(C,"g","contourfill"),H=z.selectAll("path").data(B?_:[]);H.enter().append("path"),H.exit().remove(),H.each(function(X){var $=(X.prefixBoundary?N:"")+P(y,X,b,k,D,V,M,s);$?d.select(this).attr("d",$).style("stroke","none"):d.select(this).remove()})}function P(y,C,M,s,_,b,k,D){var V,O="",N=C.edgepaths.map(function(fe,re){return re}),B=!0,z,H,X,$,ne,q,ue=Math.abs(M[0][0]-M[2][0])*1e-4,te=Math.abs(M[0][1]-M[2][1])*1e-4;function J(fe){return Math.abs(fe[1]-M[0][1])<te}function ie(fe){return Math.abs(fe[1]-M[2][1])<te}function K(fe){return Math.abs(fe[0]-M[0][0])<ue}function ee(fe){return Math.abs(fe[0]-M[2][0])<ue}function le(fe,re){var ce,xe,Te,we,_e="";for(J(fe)&&!ee(fe)||ie(fe)&&!K(fe)?(we=_.aaxis,Te=l(_,b,[fe[0],re[0]],.5*(fe[1]+re[1]))):(we=_.baxis,Te=l(_,b,.5*(fe[0]+re[0]),[fe[1],re[1]])),ce=1;ce<Te.length;ce++)for(_e+=we.smoothing?"C":"L",xe=0;xe<Te[ce].length;xe++){var ke=Te[ce][xe];_e+=[k.c2p(ke[0]),D.c2p(ke[1])]+" "}return _e}for(V=0,z=null;N.length;){var j=C.edgepaths[V][0];for(z&&(O+=le(z,j)),q=E.smoothopen(C.edgepaths[V].map(s),C.smoothing),O+=B?q:q.replace(/^M/,"L"),N.splice(N.indexOf(V),1),z=C.edgepaths[V][C.edgepaths[V].length-1],$=-1,X=0;X<4;X++){if(!z){T.log("Missing end?",V,C);break}for(J(z)&&!ee(z)?H=M[1]:K(z)?H=M[0]:ie(z)?H=M[3]:ee(z)&&(H=M[2]),ne=0;ne<C.edgepaths.length;ne++){var Z=C.edgepaths[ne][0];Math.abs(z[0]-H[0])<ue?Math.abs(z[0]-Z[0])<ue&&(Z[1]-z[1])*(H[1]-Z[1])>=0&&(H=Z,$=ne):Math.abs(z[1]-H[1])<te?Math.abs(z[1]-Z[1])<te&&(Z[0]-z[0])*(H[0]-Z[0])>=0&&(H=Z,$=ne):T.log("endpt to newendpt is not vert. or horz.",z,H,Z)}if($>=0)break;O+=le(z,H),z=H}if($===C.edgepaths.length){T.log("unclosed perimeter path");break}V=$,B=N.indexOf(V)===-1,B&&(V=N[0],O+=le(z,H)+"Z",z=null)}for(V=0;V<C.paths.length;V++)O+=E.smoothclosed(C.paths[V].map(s),C.smoothing);return O}},33928:function(U,F,e){var d=e(49084),S=e(21776).Ks,n=e(45464),E=e(31512),T=e(92880).extendFlat;U.exports=T({lon:E.lon,lat:E.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:E.text,hovertext:E.hovertext,hoverinfo:T({},n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:S(),showlegend:T({},n.showlegend,{dflt:!1})},d("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(U,F,e){var d=e(38248),S=e(3400).isArrayOrTypedArray,n=e(39032).BADNUM,E=e(47128),T=e(3400)._;U.exports=function(g,r){for(var t=r._length,o=new Array(t),i=r.z,f=S(i)&&i.length,u=0;u<t;u++){var l=o[u]={},m=r.lon[u],h=r.lat[u];if(l.lonlat=d(m)&&d(h)?[+m,+h]:[n,n],f){var w=i[u];l.z=d(w)?w:n}}return E(g,r,{vals:f?i:[0,1],containerStr:"",cLetter:"z"}),t&&(o[0].t={labels:{lat:T(g,"lat:")+" ",lon:T(g,"lon:")+" "}}),o}},4629:function(U,F,e){var d=e(38248),S=e(3400),n=e(76308),E=e(8932),T=e(39032).BADNUM,v=e(44808).makeBlank;U.exports=function(r){var t=r[0].trace,o=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},f=t._opts={heatmap:i,geojson:v()};if(!o)return f;var u=[],l,m=t.z,h=t.radius,w=S.isArrayOrTypedArray(m)&&m.length,c=S.isArrayOrTypedArray(h);for(l=0;l<r.length;l++){var a=r[l],p=a.lonlat;if(p[0]!==T){var x={};if(w){var A=a.z;x.z=A!==T?A:0}c&&(x.r=d(h[l])&&h[l]>0?+h[l]:0),u.push({type:"Feature",geometry:{type:"Point",coordinates:p},properties:x})}}var P=E.extractOpts(t),y=P.reversescale?E.flipScale(P.colorscale):P.colorscale,C=y[0][1],M=n.opacity(C)<1?C:n.addOpacity(C,0),s=["interpolate",["linear"],["heatmap-density"],0,M];for(l=1;l<y.length;l++)s.push(y[l][0],y[l][1]);var _=["interpolate",["linear"],["get","z"],P.min,0,P.max,1];return S.extendFlat(f.heatmap.paint,{"heatmap-weight":w?_:1/(P.max-P.min),"heatmap-color":s,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),f.geojson={type:"FeatureCollection",features:u},f.heatmap.layout.visibility="visible",f}},97664:function(U,F,e){var d=e(3400),S=e(27260),n=e(33928);U.exports=function(T,v,g,r){function t(u,l){return d.coerce(T,v,n,u,l)}var o=t("lon")||[],i=t("lat")||[],f=Math.min(o.length,i.length);if(!f){v.visible=!1;return}v._length=f,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),S(T,v,r,t,{prefix:"",cLetter:"z"})}},96176:function(U){U.exports=function(e,d){return e.lon=d.lon,e.lat=d.lat,e.z=d.z,e}},25336:function(U,F,e){var d=e(54460),S=e(63312).hoverPoints,n=e(63312).getExtraText;U.exports=function(T,v,g){var r=S(T,v,g);if(r){var t=r[0],o=t.cd,i=o[0].trace,f=o[t.index];if(delete t.color,"z"in f){var u=t.subplot.mockAxis;t.z=f.z,t.zLabel=d.tickText(u,u.c2l(f.z),"hover").text}return t.extraText=n(i,f,o[0].t.labels),[t]}}},15088:function(U,F,e){U.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(d,S){for(var n=S.getMapLayers(),E=0;E<n.length;E++){var T=n[E],v=T.id;if(T.type==="symbol"&&typeof v=="string"&&v.indexOf("plotly-")===-1)return v}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(U,F,e){var d=e(4629),S=e(47552).traceLayerPrefix;function n(T,v){this.type="densitymapbox",this.subplot=T,this.uid=v,this.sourceId="source-"+v,this.layerList=[["heatmap",S+v+"-heatmap"]],this.below=null}var E=n.prototype;E.update=function(T){var v=this.subplot,g=this.layerList,r=d(T),t=v.belowLookup["trace-"+this.uid];v.map.getSource(this.sourceId).setData(r.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(r,t),this.below=t);for(var o=0;o<g.length;o++){var i=g[o],f=i[0],u=i[1],l=r[f];v.setOptions(u,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&v.setOptions(u,"setPaintProperty",l.paint)}},E._addLayers=function(T,v){for(var g=this.subplot,r=this.layerList,t=this.sourceId,o=0;o<r.length;o++){var i=r[o],f=i[0],u=T[f];g.addLayer({type:f,id:i[1],source:t,layout:u.layout,paint:u.paint},v)}},E._removeLayers=function(){for(var T=this.subplot.map,v=this.layerList,g=v.length-1;g>=0;g--)T.removeLayer(v[g][1])},E.dispose=function(){var T=this.subplot.map;this._removeLayers(),T.removeSource(this.sourceId)},U.exports=function(v,g){var r=g[0].trace,t=new n(v,r.uid),o=t.sourceId,i=d(g),f=t.below=v.belowLookup["trace-"+r.uid];return v.map.addSource(o,{type:"geojson",data:i.geojson}),t._addLayers(i,f),t}},74248:function(U,F,e){var d=e(3400);U.exports=function(n,E){for(var T=0;T<n.length;T++)n[T].i=T;d.mergeArray(E.text,n,"tx"),d.mergeArray(E.hovertext,n,"htx");var v=E.marker;if(v){d.mergeArray(v.opacity,n,"mo"),d.mergeArray(v.color,n,"mc");var g=v.line;g&&(d.mergeArray(g.color,n,"mlc"),d.mergeArrayCastPositive(g.width,n,"mlw"))}}},20088:function(U,F,e){var d=e(20832),S=e(52904).line,n=e(45464),E=e(29736).axisHoverFormat,T=e(21776).Ks,v=e(21776).Gw,g=e(74732),r=e(92880).extendFlat,t=e(76308);U.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),hovertext:d.hovertext,hovertemplate:T({},{keys:g.eventDataKeys}),hoverinfo:r({},n.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:v({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),text:d.text,textposition:d.textposition,insidetextanchor:r({},d.insidetextanchor,{dflt:"middle"}),textangle:r({},d.textangle,{dflt:0}),textfont:d.textfont,insidetextfont:d.insidetextfont,outsidetextfont:d.outsidetextfont,constraintext:d.constraintext,cliponaxis:d.cliponaxis,orientation:r({},d.orientation,{}),offset:r({},d.offset,{arrayOk:!1}),width:r({},d.width,{arrayOk:!1}),marker:o(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},S.color,{dflt:t.defaultLine}),width:r({},S.width,{dflt:0,editType:"plot"}),dash:S.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,zorder:d.zorder};function o(){var i=r({},d.marker);return delete i.pattern,delete i.cornerradius,i}},23096:function(U,F,e){var d=e(54460),S=e(1220),n=e(74248),E=e(4500),T=e(39032).BADNUM;U.exports=function(r,t){var o=d.getFromId(r,t.xaxis||"x"),i=d.getFromId(r,t.yaxis||"y"),f,u,l,m,h,w,c,a;t.orientation==="h"?(f=o.makeCalcdata(t,"x"),l=i.makeCalcdata(t,"y"),m=S(t,i,"y",l),h=!!t.yperiodalignment,w="y"):(f=i.makeCalcdata(t,"y"),l=o.makeCalcdata(t,"x"),m=S(t,o,"x",l),h=!!t.xperiodalignment,w="x"),u=m.vals;var p=Math.min(u.length,f.length),x=new Array(p);for(t._base=[],c=0;c<p;c++){f[c]<0&&(f[c]=T);var A=!1;f[c]!==T&&c+1<p&&f[c+1]!==T&&(A=!0),a=x[c]={p:u[c],s:f[c],cNext:A},t._base[c]=-.5*a.s,h&&(x[c].orig_p=l[c],x[c][w+"End"]=m.ends[c],x[c][w+"Start"]=m.starts[c]),t.ids&&(a.id=String(t.ids[c])),c===0&&(x[0].vTotal=0),x[0].vTotal+=v(a.s),a.begR=v(a.s)/v(x[0].s)}var P;for(c=0;c<p;c++)a=x[c],a.s!==T&&(a.sumR=a.s/x[0].vTotal,a.difR=P!==void 0?a.s/P:1,P=a.s);return n(x,t),E(x,t),x};function v(g){return g===T?0:g}},74732:function(U){U.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(U,F,e){var d=e(96376).setGroupPositions;U.exports=function(n,E){var T=n._fullLayout,v=n._fullData,g=n.calcdata,r=E.xaxis,t=E.yaxis,o=[],i=[],f=[],u,l;for(l=0;l<v.length;l++){var m=v[l],h=m.orientation==="h";m.visible===!0&&m.xaxis===r._id&&m.yaxis===t._id&&m.type==="funnel"&&(u=g[l],h?f.push(u):i.push(u),o.push(u))}var w={mode:T.funnelmode,norm:T.funnelnorm,gap:T.funnelgap,groupgap:T.funnelgroupgap};for(d(n,r,t,i,w),d(n,t,r,f,w),l=0;l<o.length;l++){u=o[l];for(var c=0;c<u.length;c++)c+1<u.length&&(u[c].nextP0=u[c+1].p0,u[c].nextS0=u[c+1].s0,u[c].nextP1=u[c+1].p1,u[c].nextS1=u[c+1].s1)}}},45432:function(U,F,e){var d=e(3400),S=e(20011),n=e(31508).handleText,E=e(43980),T=e(31147),v=e(20088),g=e(76308);function r(i,f,u,l){function m(A,P){return d.coerce(i,f,v,A,P)}var h=E(i,f,l,m);if(!h){f.visible=!1;return}T(i,f,l,m),m("xhoverformat"),m("yhoverformat"),m("orientation",f.y&&!f.x?"v":"h"),m("offset"),m("width");var w=m("text");m("hovertext"),m("hovertemplate");var c=m("textposition");n(i,f,l,m,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f.textposition!=="none"&&!f.texttemplate&&m("textinfo",d.isArrayOrTypedArray(w)?"text+value":"value");var a=m("marker.color",u);m("marker.line.color",g.defaultLine),m("marker.line.width");var p=m("connector.visible");if(p){m("connector.fillcolor",t(a));var x=m("connector.line.width");x&&(m("connector.line.color"),m("connector.line.dash"))}m("zorder")}function t(i){var f=d.isArrayOrTypedArray(i)?"#000":i;return g.addOpacity(f,.5*g.opacity(f))}function o(i,f){var u,l;function m(w){return d.coerce(l._input,l,v,w)}if(f.funnelmode==="group")for(var h=0;h<i.length;h++)l=i[h],u=l._input,S(u,l,f,m)}U.exports={supplyDefaults:r,crossTraceDefaults:o}},34580:function(U){U.exports=function(e,d){return e.x="xVal"in d?d.xVal:d.x,e.y="yVal"in d?d.yVal:d.y,"percentInitial"in d&&(e.percentInitial=d.percentInitial),"percentPrevious"in d&&(e.percentPrevious=d.percentPrevious),"percentTotal"in d&&(e.percentTotal=d.percentTotal),d.xa&&(e.xaxis=d.xa),d.ya&&(e.yaxis=d.ya),e}},31488:function(U,F,e){var d=e(76308).opacity,S=e(63400).hoverOnBars,n=e(3400).formatPercent;U.exports=function(v,g,r,t,o){var i=S(v,g,r,t,o);if(i){var f=i.cd,u=f[0].trace,l=u.orientation==="h",m=i.index,h=f[m],w=l?"x":"y";i[w+"LabelVal"]=h.s,i.percentInitial=h.begR,i.percentInitialLabel=n(h.begR,1),i.percentPrevious=h.difR,i.percentPreviousLabel=n(h.difR,1),i.percentTotal=h.sumR,i.percentTotalLabel=n(h.sumR,1);var c=h.hi||u.hoverinfo,a=[];if(c&&c!=="none"&&c!=="skip"){var p=c==="all",x=c.split("+"),A=function(P){return p||x.indexOf(P)!==-1};A("percent initial")&&a.push(i.percentInitialLabel+" of initial"),A("percent previous")&&a.push(i.percentPreviousLabel+" of previous"),A("percent total")&&a.push(i.percentTotalLabel+" of total")}return i.extraText=a.join("<br>"),i.color=E(u,h),[i]}};function E(T,v){var g=T.marker,r=v.mc||g.color,t=v.mlc||g.line.color,o=v.mlw||g.line.width;if(d(r))return r;if(d(t)&&o)return t}},94704:function(U,F,e){U.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(U){U.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(U,F,e){var d=e(3400),S=e(7076);U.exports=function(n,E,T){var v=!1;function g(o,i){return d.coerce(n,E,S,o,i)}for(var r=0;r<T.length;r++){var t=T[r];if(t.visible&&t.type==="funnel"){v=!0;break}}v&&(g("funnelmode"),g("funnelgap",.2),g("funnelgroupgap"))}},42200:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(39032).BADNUM,T=e(98184),v=e(82744).clearMinTextSize;U.exports=function(i,f,u,l){var m=i._fullLayout;v("funnel",m),g(i,f,u,l),r(i,f,u,l),T.plot(i,f,u,l,{mode:m.funnelmode,norm:m.funnelmode,gap:m.funnelgap,groupgap:m.funnelgroupgap})};function g(o,i,f,u){var l=i.xaxis,m=i.yaxis;S.makeTraceGroups(u,f,"trace bars").each(function(h){var w=d.select(this),c=h[0].trace,a=S.ensureSingle(w,"g","regions");if(!c.connector||!c.connector.visible){a.remove();return}var p=c.orientation==="h",x=a.selectAll("g.region").data(S.identity);x.enter().append("g").classed("region",!0),x.exit().remove();var A=x.size();x.each(function(P,y){if(!(y!==A-1&&!P.cNext)){var C=t(P,l,m,p),M=C[0],s=C[1],_="";M[0]!==E&&s[0]!==E&&M[1]!==E&&s[1]!==E&&M[2]!==E&&s[2]!==E&&M[3]!==E&&s[3]!==E&&(p?_+="M"+M[0]+","+s[1]+"L"+M[2]+","+s[2]+"H"+M[3]+"L"+M[1]+","+s[1]+"Z":_+="M"+M[1]+","+s[1]+"L"+M[2]+","+s[3]+"V"+s[2]+"L"+M[1]+","+s[0]+"Z"),_===""&&(_="M0,0Z"),S.ensureSingle(d.select(this),"path").attr("d",_).call(n.setClipUrl,i.layerClipId,o)}})})}function r(o,i,f,u){var l=i.xaxis,m=i.yaxis;S.makeTraceGroups(u,f,"trace bars").each(function(h){var w=d.select(this),c=h[0].trace,a=S.ensureSingle(w,"g","lines");if(!c.connector||!c.connector.visible||!c.connector.line.width){a.remove();return}var p=c.orientation==="h",x=a.selectAll("g.line").data(S.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var A=x.size();x.each(function(P,y){if(!(y!==A-1&&!P.cNext)){var C=t(P,l,m,p),M=C[0],s=C[1],_="";M[3]!==void 0&&s[3]!==void 0&&(p?(_+="M"+M[0]+","+s[1]+"L"+M[2]+","+s[2],_+="M"+M[1]+","+s[1]+"L"+M[3]+","+s[2]):(_+="M"+M[1]+","+s[1]+"L"+M[2]+","+s[3],_+="M"+M[1]+","+s[0]+"L"+M[2]+","+s[2])),_===""&&(_="M0,0Z"),S.ensureSingle(d.select(this),"path").attr("d",_).call(n.setClipUrl,i.layerClipId,o)}})})}function t(o,i,f,u){var l=[],m=[],h=u?i:f,w=u?f:i;return l[0]=h.c2p(o.s0,!0),m[0]=w.c2p(o.p0,!0),l[1]=h.c2p(o.s1,!0),m[1]=w.c2p(o.p1,!0),l[2]=h.c2p(o.nextS0,!0),m[2]=w.c2p(o.nextP0,!0),l[3]=h.c2p(o.nextS1,!0),m[3]=w.c2p(o.nextP1,!0),u?[l,m]:[m,l]}},44544:function(U,F,e){var d=e(33428),S=e(43616),n=e(76308),E=e(13448).DESELECTDIM,T=e(60100),v=e(82744).resizeText,g=T.styleTextPoints;function r(t,o,i){var f=i||d.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");v(t,f,"funnel"),f.style("opacity",function(u){return u[0].trace.opacity}),f.each(function(u){var l=d.select(this),m=u[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var w=m.marker;d.select(this).call(n.fill,h.mc||w.color).call(n.stroke,h.mlc||w.line.color).call(S.dashLine,w.line.dash,h.mlw||w.line.width).style("opacity",m.selectedpoints&&!h.selected?E:1)}}),g(l,m,t),l.selectAll(".regions").each(function(){d.select(this).selectAll("path").style("stroke-width",0).call(n.fill,m.connector.fillcolor)}),l.selectAll(".lines").each(function(){var h=m.connector.line;S.lineGroupStyle(d.select(this).selectAll("path"),h.width,h.color,h.dash)})})}U.exports={style:r}},22332:function(U,F,e){var d=e(74996),S=e(45464),n=e(86968).u,E=e(21776).Ks,T=e(21776).Gw,v=e(92880).extendFlat;U.exports={labels:d.labels,label0:d.label0,dlabel:d.dlabel,values:d.values,marker:{colors:d.marker.colors,line:{color:v({},d.marker.line.color,{dflt:null}),width:v({},d.marker.line.width,{dflt:1}),editType:"calc"},pattern:d.marker.pattern,editType:"calc"},text:d.text,hovertext:d.hovertext,scalegroup:v({},d.scalegroup,{}),textinfo:v({},d.textinfo,{flags:["label","text","value","percent"]}),texttemplate:T({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:v({},S.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:E({},{keys:["label","color","value","text","percent"]}),textposition:v({},d.textposition,{values:["inside","none"],dflt:"inside"}),textfont:d.textfont,insidetextfont:d.insidetextfont,title:{text:d.title.text,font:d.title.font,position:v({},d.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(U,F,e){var d=e(7316);F.name="funnelarea",F.plot=function(S,n,E,T){d.plotBasePlot(F.name,S,n,E,T)},F.clean=function(S,n,E,T){d.cleanBasePlot(F.name,S,n,E,T)}},54e3:function(U,F,e){var d=e(45768);function S(E,T){return d.calc(E,T)}function n(E){d.crossTraceCalc(E,{type:"funnelarea"})}U.exports={calc:S,crossTraceCalc:n}},92688:function(U,F,e){var d=e(3400),S=e(22332),n=e(86968).Q,E=e(31508).handleText,T=e(74174).handleLabelsAndValues,v=e(74174).handleMarkerDefaults;U.exports=function(r,t,o,i){function f(A,P){return d.coerce(r,t,S,A,P)}var u=f("labels"),l=f("values"),m=T(u,l),h=m.len;if(t._hasLabels=m.hasLabels,t._hasValues=m.hasValues,!t._hasLabels&&t._hasValues&&(f("label0"),f("dlabel")),!h){t.visible=!1;return}t._length=h,v(r,t,i,f),f("scalegroup");var w=f("text"),c=f("texttemplate"),a;if(c||(a=f("textinfo",Array.isArray(w)?"text+percent":"percent")),f("hovertext"),f("hovertemplate"),c||a&&a!=="none"){var p=f("textposition");E(r,t,i,f,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else a==="none"&&f("textposition","none");n(t,i,f);var x=f("title.text");x&&(f("title.position"),d.coerceFont(f,"title.font",i.font)),f("aspectratio"),f("baseratio")}},62396:function(U,F,e){U.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(U,F,e){var d=e(85204).hiddenlabels;U.exports={hiddenlabels:d,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(U,F,e){var d=e(3400),S=e(61280);U.exports=function(E,T){function v(g,r){return d.coerce(E,T,S,g,r)}v("hiddenlabels"),v("funnelareacolorway",T.colorway),v("extendfunnelareacolors")}},39472:function(U,F,e){var d=e(33428),S=e(43616),n=e(3400),E=n.strScale,T=n.strTranslate,v=e(72736),g=e(98184),r=g.toMoveInsideBar,t=e(82744),o=t.recordMinTextSize,i=t.clearMinTextSize,f=e(69656),u=e(37820),l=u.attachFxHandlers,m=u.determineInsideTextFont,h=u.layoutAreas,w=u.prerenderTitles,c=u.positionTitleOutside,a=u.formatSliceLabel;U.exports=function(y,C){var M=y._context.staticPlot,s=y._fullLayout;i("funnelarea",s),w(C,y),h(C,s._size),n.makeTraceGroups(s._funnelarealayer,C,"trace").each(function(_){var b=d.select(this),k=_[0],D=k.trace;A(_),b.each(function(){var V=d.select(this).selectAll("g.slice").data(_);V.enter().append("g").classed("slice",!0),V.exit().remove(),V.each(function(N,B){if(N.hidden){d.select(this).selectAll("path,g").remove();return}N.pointNumber=N.i,N.curveNumber=D.index;var z=k.cx,H=k.cy,X=d.select(this),$=X.selectAll("path.surface").data([N]);$.enter().append("path").classed("surface",!0).style({"pointer-events":M?"none":"all"}),X.call(l,y,_);var ne="M"+(z+N.TR[0])+","+(H+N.TR[1])+p(N.TR,N.BR)+p(N.BR,N.BL)+p(N.BL,N.TL)+"Z";$.attr("d",ne),a(y,N,k);var q=f.castOption(D.textposition,N.pts),ue=X.selectAll("g.slicetext").data(N.text&&q!=="none"?[0]:[]);ue.enter().append("g").classed("slicetext",!0),ue.exit().remove(),ue.each(function(){var te=n.ensureSingle(d.select(this),"text","",function(fe){fe.attr("data-notex",1)}),J=n.ensureUniformFontSize(y,m(D,N,s.font));te.text(N.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(S.font,J).call(v.convertToTspans,y);var ie=S.bBox(te.node()),K,ee,le,j=Math.min(N.BL[1],N.BR[1])+H,Z=Math.max(N.TL[1],N.TR[1])+H;ee=Math.max(N.TL[0],N.BL[0])+z,le=Math.min(N.TR[0],N.BR[0])+z,K=r(ee,le,j,Z,ie,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),K.fontSize=J.size,o(D.type,K,s),_[B].transform=K,n.setTransormAndDisplay(te,K)})});var O=d.select(this).selectAll("g.titletext").data(D.title.text?[0]:[]);O.enter().append("g").classed("titletext",!0),O.exit().remove(),O.each(function(){var N=n.ensureSingle(d.select(this),"text","",function(H){H.attr("data-notex",1)}),B=D.title.text;D._meta&&(B=n.templateString(B,D._meta)),N.text(B).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(S.font,D.title.font).call(v.convertToTspans,y);var z=c(k,s._size);N.attr("transform",T(z.x,z.y)+E(Math.min(1,z.scale))+T(z.tx,z.ty))})})})};function p(P,y){var C=y[0]-P[0],M=y[1]-P[1];return"l"+C+","+M}function x(P,y){return[.5*(P[0]+y[0]),.5*(P[1]+y[1])]}function A(P){if(!P.length)return;var y=P[0],C=y.trace,M=C.aspectratio,s=C.baseratio;s>.999&&(s=.999);var _=Math.pow(s,2),b=y.vTotal,k=b*_/(1-_),D=b,V=k/b;function O(){var re=Math.sqrt(V);return{x:re,y:-re}}function N(){var re=O();return[re.x,re.y]}var B,z=[];z.push(N());var H,X;for(H=P.length-1;H>-1;H--)if(X=P[H],!X.hidden){var $=X.v/D;V+=$,z.push(N())}var ne=1/0,q=-1/0;for(H=0;H<z.length;H++)B=z[H],ne=Math.min(ne,B[1]),q=Math.max(q,B[1]);for(H=0;H<z.length;H++)z[H][1]-=(q+ne)/2;var ue=z[z.length-1][0],te=y.r,J=(q-ne)/2,ie=te/ue,K=te/J*M;for(y.r=K*J,H=0;H<z.length;H++)z[H][0]*=ie,z[H][1]*=K;B=z[0];var ee=[-B[0],B[1]],le=[B[0],B[1]],j=0;for(H=P.length-1;H>-1;H--)if(X=P[H],!X.hidden){j+=1;var Z=z[j][0],fe=z[j][1];X.TL=[-Z,fe],X.TR=[Z,fe],X.BL=ee,X.BR=le,X.pxmid=x(X.TR,X.BR),ee=X.TL,le=X.TR}}},62096:function(U,F,e){var d=e(33428),S=e(10528),n=e(82744).resizeText;U.exports=function(T){var v=T._fullLayout._funnelarealayer.selectAll(".trace");n(T,v,"funnelarea"),v.each(function(g){var r=g[0],t=r.trace,o=d.select(this);o.style({opacity:t.opacity}),o.selectAll("path.surface").each(function(i){d.select(this).call(S,i,t,T)})})}},83328:function(U,F,e){var d=e(52904),S=e(45464),n=e(25376),E=e(29736).axisHoverFormat,T=e(21776).Ks,v=e(21776).Gw,g=e(49084),r=e(92880).extendFlat;U.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},d.x,{impliedEdits:{xtype:"array"}}),x0:r({},d.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},d.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},d.y,{impliedEdits:{ytype:"array"}}),y0:r({},d.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},d.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},d.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},d.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},d.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},d.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},d.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},d.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z",1),hovertemplate:T(),texttemplate:v({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:n({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},S.showlegend,{dflt:!1}),zorder:d.zorder},{transforms:void 0},g("",{cLetter:"z",autoColorDflt:!1}))},19512:function(U,F,e){var d=e(24040),S=e(3400),n=e(54460),E=e(1220),T=e(55480),v=e(47128),g=e(2872),r=e(26136),t=e(70448),o=e(11240),i=e(35744),f=e(39032).BADNUM;U.exports=function(h,w){var c=n.getFromId(h,w.xaxis||"x"),a=n.getFromId(h,w.yaxis||"y"),p=d.traceIs(w,"contour"),x=d.traceIs(w,"histogram"),A=d.traceIs(w,"gl2d"),P=p?"best":w.zsmooth,y,C,M,s,_,b,k,D,V,O,N;if(c._minDtick=0,a._minDtick=0,x)N=T(h,w),s=N.orig_x,y=N.x,C=N.x0,M=N.dx,D=N.orig_y,_=N.y,b=N.y0,k=N.dy,V=N.z;else{var B=w.z;S.isArray1D(B)?(g(w,c,a,"x","y",["z"]),y=w._x,_=w._y,B=w._z):(s=w.x?c.makeCalcdata(w,"x"):[],D=w.y?a.makeCalcdata(w,"y"):[],y=E(w,c,"x",s).vals,_=E(w,a,"y",D).vals,w._x=y,w._y=_),C=w.x0,M=w.dx,b=w.y0,k=w.dy,V=r(B,w,c,a)}(c.rangebreaks||a.rangebreaks)&&(V=l(y,_,V),x||(y=u(y),_=u(_),w._x=y,w._y=_)),!x&&(p||w.connectgaps)&&(w._emptypoints=o(V),t(V,w._emptypoints));function z(ie){P=w._input.zsmooth=w.zsmooth=!1,S.warn('cannot use zsmooth: "fast": '+ie)}function H(ie){if(ie.length>1){var K=(ie[ie.length-1]-ie[0])/(ie.length-1),ee=Math.abs(K/100);for(O=0;O<ie.length-1;O++)if(Math.abs(ie[O+1]-ie[O]-K)>ee)return!1}return!0}w._islinear=!1,c.type==="log"||a.type==="log"?P==="fast"&&z("log axis found"):H(y)?H(_)?w._islinear=!0:P==="fast"&&z("y scale is not linear"):P==="fast"&&z("x scale is not linear");var X=S.maxRowLength(V),$=w.xtype==="scaled"?"":y,ne=i(w,$,C,M,X,c),q=w.ytype==="scaled"?"":_,ue=i(w,q,b,k,V.length,a);A||(w._extremes[c._id]=n.findExtremes(c,ne),w._extremes[a._id]=n.findExtremes(a,ue));var te={x:ne,y:ue,z:V,text:w._text||w.text,hovertext:w._hovertext||w.hovertext};if(w.xperiodalignment&&s&&(te.orig_x=s),w.yperiodalignment&&D&&(te.orig_y=D),$&&$.length===ne.length-1&&(te.xCenter=$),q&&q.length===ue.length-1&&(te.yCenter=q),x&&(te.xRanges=N.xRanges,te.yRanges=N.yRanges,te.pts=N.pts),p||v(h,w,{vals:V,cLetter:"z"}),p&&w.contours&&w.contours.coloring==="heatmap"){var J={type:w.type==="contour"?"heatmap":"histogram2d",xcalendar:w.xcalendar,ycalendar:w.ycalendar};te.xfill=i(J,$,C,M,X,c),te.yfill=i(J,q,b,k,V.length,a)}return[te]};function u(m){for(var h=[],w=m.length,c=0;c<w;c++){var a=m[c];a!==f&&h.push(a)}return h}function l(m,h,w){for(var c=[],a=-1,p=0;p<w.length;p++)if(h[p]!==f){a++,c[a]=[];for(var x=0;x<w[p].length;x++)m[x]!==f&&c[a].push(w[p][x])}return c}},26136:function(U,F,e){var d=e(38248),S=e(3400),n=e(39032).BADNUM;U.exports=function(T,v,g,r){var t,o,i,f,u,l;function m(x){if(d(x))return+x}if(v&&v.transpose){for(t=0,u=0;u<T.length;u++)t=Math.max(t,T[u].length);if(t===0)return!1;i=function(x){return x.length},f=function(x,A,P){return(x[P]||[])[A]}}else t=T.length,i=function(x,A){return x[A].length},f=function(x,A,P){return(x[A]||[])[P]};var h=function(x,A,P){return A===n||P===n?n:f(x,A,P)};function w(x){if(v&&v.type!=="carpet"&&v.type!=="contourcarpet"&&x&&x.type==="category"&&v["_"+x._id.charAt(0)].length){var A=x._id.charAt(0),P={},y=v["_"+A+"CategoryMap"]||v[A];for(u=0;u<y.length;u++)P[y[u]]=u;return function(C){var M=P[x._categories[C]];return M+1?M:n}}else return S.identity}var c=w(g),a=w(r);r&&r.type==="category"&&(t=r._categories.length);var p=new Array(t);for(u=0;u<t;u++)for(g&&g.type==="category"?o=g._categories.length:o=i(T,u),p[u]=new Array(o),l=0;l<o;l++)p[u][l]=m(h(T,a(u),c(l)));return p}},96288:function(U){U.exports={min:"zmin",max:"zmax"}},2872:function(U,F,e){var d=e(3400),S=e(39032).BADNUM,n=e(1220);U.exports=function(T,v,g,r,t,o){var i=T._length,f=v.makeCalcdata(T,r),u=g.makeCalcdata(T,t);f=n(T,v,r,f).vals,u=n(T,g,t,u).vals;var l=T.text,m=l!==void 0&&d.isArray1D(l),h=T.hovertext,w=h!==void 0&&d.isArray1D(h),c,a,p=d.distinctVals(f),x=p.vals,A=d.distinctVals(u),P=A.vals,y=[],C,M,s=P.length,_=x.length;for(c=0;c<o.length;c++)y[c]=d.init2dArray(s,_);m&&(C=d.init2dArray(s,_)),w&&(M=d.init2dArray(s,_));var b=d.init2dArray(s,_);for(c=0;c<i;c++)if(f[c]!==S&&u[c]!==S){var k=d.findBin(f[c]+p.minDiff/2,x),D=d.findBin(u[c]+A.minDiff/2,P);for(a=0;a<o.length;a++){var V=o[a],O=T[V],N=y[a];N[D][k]=O[c],b[D][k]=c}m&&(C[D][k]=l[c]),w&&(M[D][k]=h[c])}for(T["_"+r]=x,T["_"+t]=P,a=0;a<o.length;a++)T["_"+o[a]]=y[a];m&&(T._text=C),w&&(T._hovertext=M),v&&v.type==="category"&&(T["_"+r+"CategoryMap"]=x.map(function(B){return v._categories[B]})),g&&g.type==="category"&&(T["_"+t+"CategoryMap"]=P.map(function(B){return g._categories[B]})),T._after2before=b}},24480:function(U,F,e){var d=e(3400),S=e(51264),n=e(39096),E=e(31147),T=e(82748),v=e(27260),g=e(83328);U.exports=function(t,o,i,f){function u(m,h){return d.coerce(t,o,g,m,h)}var l=S(t,o,u,f);if(!l){o.visible=!1;return}E(t,o,f,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hovertemplate"),n(u,f),T(t,o,u,f),u("hoverongaps"),u("connectgaps",d.isArray1D(o.z)&&o.zsmooth!==!1),v(t,o,f,u,{prefix:"",cLetter:"z"}),u("zorder")}},11240:function(U,F,e){var d=e(3400).maxRowLength;U.exports=function(n){var E=[],T={},v=[],g=n[0],r=[],t=[0,0,0],o=d(n),i,f,u,l,m,h,w,c;for(f=0;f<n.length;f++)for(i=r,r=g,g=n[f+1]||[],u=0;u<o;u++)r[u]===void 0&&(h=(r[u-1]!==void 0?1:0)+(r[u+1]!==void 0?1:0)+(i[u]!==void 0?1:0)+(g[u]!==void 0?1:0),h?(f===0&&h++,u===0&&h++,f===n.length-1&&h++,u===r.length-1&&h++,h<4&&(T[[f,u]]=[f,u,h]),E.push([f,u,h])):v.push([f,u]));for(;v.length;){for(w={},c=!1,m=v.length-1;m>=0;m--)l=v[m],f=l[0],u=l[1],h=((T[[f-1,u]]||t)[2]+(T[[f+1,u]]||t)[2]+(T[[f,u-1]]||t)[2]+(T[[f,u+1]]||t)[2])/20,h&&(w[l]=[f,u,h],v.splice(m,1),c=!0);if(!c)throw"findEmpties iterated with no new neighbors";for(l in w)T[l]=w[l],E.push(w[l])}return E.sort(function(a,p){return p[2]-a[2]})}},55512:function(U,F,e){var d=e(93024),S=e(3400),n=S.isArrayOrTypedArray,E=e(54460),T=e(8932).extractOpts;U.exports=function(g,r,t,o,i){i||(i={});var f=i.isContour,u=g.cd[0],l=u.trace,m=g.xa,h=g.ya,w=u.x,c=u.y,a=u.z,p=u.xCenter,x=u.yCenter,A=u.zmask,P=l.zhoverformat,y=w,C=c,M,s,_,b;if(g.index!==!1){try{_=Math.round(g.index[1]),b=Math.round(g.index[0])}catch{S.error("Error hovering on heatmap, pointNumber must be [row,col], found:",g.index);return}if(_<0||_>=a[0].length||b<0||b>a.length)return}else{if(d.inbox(r-w[0],r-w[w.length-1],0)>0||d.inbox(t-c[0],t-c[c.length-1],0)>0)return;if(f){var k;for(y=[2*w[0]-w[1]],k=1;k<w.length;k++)y.push((w[k]+w[k-1])/2);for(y.push([2*w[w.length-1]-w[w.length-2]]),C=[2*c[0]-c[1]],k=1;k<c.length;k++)C.push((c[k]+c[k-1])/2);C.push([2*c[c.length-1]-c[c.length-2]])}_=Math.max(0,Math.min(y.length-2,S.findBin(r,y))),b=Math.max(0,Math.min(C.length-2,S.findBin(t,C)))}var D=m.c2p(w[_]),V=m.c2p(w[_+1]),O=h.c2p(c[b]),N=h.c2p(c[b+1]),B,z;f?(B=u.orig_x||w,z=u.orig_y||c,V=D,M=B[_],N=O,s=z[b]):(B=u.orig_x||p||w,z=u.orig_y||x||c,M=p?B[_]:(B[_]+B[_+1])/2,s=x?z[b]:(z[b]+z[b+1])/2,m&&m.type==="category"&&(M=w[_]),h&&h.type==="category"&&(s=c[b]),l.zsmooth&&(D=V=m.c2p(M),O=N=h.c2p(s)));var H=a[b][_];if(A&&!A[b][_]&&(H=void 0),!(H===void 0&&!l.hoverongaps)){var X;n(u.hovertext)&&n(u.hovertext[b])?X=u.hovertext[b][_]:n(u.text)&&n(u.text[b])&&(X=u.text[b][_]);var $=T(l),ne={type:"linear",range:[$.min,$.max],hoverformat:P,_separators:m._separators,_numFormat:m._numFormat},q=E.tickText(ne,H,"hover").text;return[S.extendFlat(g,{index:l._after2before?l._after2before[b][_]:[b,_],distance:g.maxHoverDistance,spikeDistance:g.maxSpikeDistance,x0:D,x1:V,y0:O,y1:N,xLabelVal:M,yLabelVal:s,zLabelVal:H,zLabel:q,text:X})]}}},81932:function(U,F,e){U.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(U,F,e){var d=e(3400),S=.01,n=[[-1,0],[1,0],[0,-1],[0,1]];function E(v){return .5-.25*Math.min(1,v*.5)}U.exports=function(g,r){var t=1,o;for(T(g,r),o=0;o<r.length&&!(r[o][2]<4);o++);for(r=r.slice(o),o=0;o<100&&t>S;o++)t=T(g,r,E(t));return t>S&&d.log("interp2d didn't converge quickly",t),g};function T(v,g,r){var t=0,o,i,f,u,l,m,h,w,c,a,p,x,A;for(u=0;u<g.length;u++){for(o=g[u],i=o[0],f=o[1],p=v[i][f],a=0,c=0,l=0;l<4;l++)m=n[l],h=v[i+m[0]],h&&(w=h[f+m[1]],w!==void 0&&(a===0?x=A=w:(x=Math.min(x,w),A=Math.max(A,w)),c++,a+=w));if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";v[i][f]=a/c,p===void 0?c<4&&(t=1):(v[i][f]=(1+r)*v[i][f]-r*p,A>x&&(t=Math.max(t,Math.abs(v[i][f]-p)/(A-x))))}return t}},39096:function(U,F,e){var d=e(3400);U.exports=function(n,E){n("texttemplate");var T=d.extendFlat({},E.font,{color:"auto",size:"auto"});d.coerceFont(n,"textfont",T)}},35744:function(U,F,e){var d=e(24040),S=e(3400).isArrayOrTypedArray;U.exports=function(E,T,v,g,r,t){var o=[],i=d.traceIs(E,"contour"),f=d.traceIs(E,"histogram"),u=d.traceIs(E,"gl2d"),l,m,h,w=S(T)&&T.length>1;if(w&&!f&&t.type!=="category"){var c=T.length;if(c<=r){if(i||u)o=Array.from(T).slice(0,r);else if(r===1)t.type==="log"?o=[.5*T[0],2*T[0]]:o=[T[0]-.5,T[0]+.5];else if(t.type==="log"){for(o=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],h=1;h<c;h++)o.push(Math.sqrt(T[h-1]*T[h]));o.push(Math.pow(T[c-1],1.5)/Math.pow(T[c-2],.5))}else{for(o=[1.5*T[0]-.5*T[1]],h=1;h<c;h++)o.push((T[h-1]+T[h])*.5);o.push(1.5*T[c-1]-.5*T[c-2])}if(c<r){var a=o[o.length-1],p;if(t.type==="log")for(p=a/o[o.length-2],h=c;h<r;h++)a*=p,o.push(a);else for(p=a-o[o.length-2],h=c;h<r;h++)a+=p,o.push(a)}}else return i?T.slice(0,r):T.slice(0,r+1)}else{var x=E[t._id.charAt(0)+"calendar"];if(f)l=t.r2c(v,0,x);else if(S(T)&&T.length===1)l=T[0];else if(v===void 0)l=0;else{var A=t.type==="log"?t.d2c:t.r2c;l=A(v,0,x)}for(m=g||1,h=i||u?0:-.5;h<r;h++)o.push(l+m*h)}return o}},41420:function(U,F,e){var d=e(33428),S=e(49760),n=e(24040),E=e(43616),T=e(54460),v=e(3400),g=e(72736),r=e(76688),t=e(76308),o=e(8932).extractOpts,i=e(8932).makeColorScaleFuncFromTrace,f=e(9616),u=e(84284),l=u.LINE_SPACING,m=e(9188),h=e(2264).STYLE,w="heatmap-label";function c(P){return P.selectAll("g."+w)}function a(P){c(P).remove()}U.exports=function(P,y,C,M){var s=y.xaxis,_=y.yaxis;v.makeTraceGroups(M,C,"hm").each(function(b){var k=d.select(this),D=b[0],V=D.trace,O=V.xgap||0,N=V.ygap||0,B=D.z,z=D.x,H=D.y,X=D.xCenter,$=D.yCenter,ne=n.traceIs(V,"contour"),q=ne?"best":V.zsmooth,ue=B.length,te=v.maxRowLength(B),J=!1,ie=!1,K,ee,le,j,Z,fe,re,ce;for(fe=0;K===void 0&&fe<z.length-1;)K=s.c2p(z[fe]),fe++;for(fe=z.length-1;ee===void 0&&fe>0;)ee=s.c2p(z[fe]),fe--;for(ee<K&&(le=ee,ee=K,K=le,J=!0),fe=0;j===void 0&&fe<H.length-1;)j=_.c2p(H[fe]),fe++;for(fe=H.length-1;Z===void 0&&fe>0;)Z=_.c2p(H[fe]),fe--;Z<j&&(le=j,j=Z,Z=le,ie=!0),ne&&(X=z,$=H,z=D.xfill,H=D.yfill);var xe="default";if(q?xe=q==="best"?"smooth":"fast":V._islinear&&O===0&&N===0&&m()&&(xe="fast"),xe!=="fast"){var Te=q==="best"?0:.5;K=Math.max(-Te*s._length,K),ee=Math.min((1+Te)*s._length,ee),j=Math.max(-Te*_._length,j),Z=Math.min((1+Te)*_._length,Z)}var we=Math.round(ee-K),_e=Math.round(Z-j),ke=K>=s._length||ee<=0||j>=_._length||Z<=0;if(ke){var Ne=k.selectAll("image").data([]);Ne.exit().remove(),a(k);return}var Ee,ze;xe==="fast"?(Ee=te,ze=ue):(Ee=we,ze=_e);var Ce=document.createElement("canvas");Ce.width=Ee,Ce.height=ze;var Oe=Ce.getContext("2d",{willReadFrequently:!0}),Le=i(V,{noNumericCheck:!0,returnArray:!0}),Ge,rt;xe==="fast"?(Ge=J?function(zr){return te-1-zr}:v.identity,rt=ie?function(zr){return ue-1-zr}:v.identity):(Ge=function(zr){return v.constrain(Math.round(s.c2p(z[zr])-K),0,we)},rt=function(zr){return v.constrain(Math.round(_.c2p(H[zr])-j),0,_e)});var ot=rt(0),$e=[ot,ot],qe=J?0:1,ht=ie?0:1,vt=0,pt=0,wt=0,Et=0,nt,Fe,We,Ze,Ye;function Ie(zr,sn){if(zr!==void 0){var un=Le(zr);return un[0]=Math.round(un[0]),un[1]=Math.round(un[1]),un[2]=Math.round(un[2]),vt+=sn,pt+=un[0]*sn,wt+=un[1]*sn,Et+=un[2]*sn,un}return[0,0,0,0]}function De(zr,sn,un,Mn){var Ln=zr[un.bin0];if(Ln===void 0)return Ie(void 0,1);var Un=zr[un.bin1],ai=sn[un.bin0],yi=sn[un.bin1],bi=Un-Ln||0,Hn=ai-Ln||0,Kn;return Un===void 0?yi===void 0?Kn=0:ai===void 0?Kn=2*(yi-Ln):Kn=(2*yi-ai-Ln)*2/3:yi===void 0?ai===void 0?Kn=0:Kn=(2*Ln-Un-ai)*2/3:ai===void 0?Kn=(2*yi-Un-Ln)*2/3:Kn=yi+Ln-Un-ai,Ie(Ln+un.frac*bi+Mn.frac*(Hn+un.frac*Kn))}if(xe!=="default"){var je=0,Re;try{Re=new Uint8Array(Ee*ze*4)}catch{Re=new Array(Ee*ze*4)}if(xe==="smooth"){var pe=X||z,be=$||H,Ue=new Array(pe.length),et=new Array(be.length),st=new Array(we),lt=X?x:p,Gt=$?x:p,Zt,Tt,It;for(fe=0;fe<pe.length;fe++)Ue[fe]=Math.round(s.c2p(pe[fe])-K);for(fe=0;fe<be.length;fe++)et[fe]=Math.round(_.c2p(be[fe])-j);for(fe=0;fe<we;fe++)st[fe]=lt(fe,Ue);for(re=0;re<_e;re++)for(Zt=Gt(re,et),Tt=B[Zt.bin0],It=B[Zt.bin1],fe=0;fe<we;fe++,je+=4)Ye=De(Tt,It,st[fe],Zt),A(Re,je,Ye)}else for(re=0;re<ue;re++)for(Ze=B[re],$e=rt(re),fe=0;fe<te;fe++)Ye=Ie(Ze[fe],1),je=($e*te+Ge(fe))*4,A(Re,je,Ye);var Xt=Oe.createImageData(Ee,ze);try{Xt.data.set(Re)}catch{var gr=Xt.data,gt=gr.length;for(re=0;re<gt;re++)gr[re]=Re[re]}Oe.putImageData(Xt,0,0)}else{var jt=Math.floor(O/2),Qt=Math.floor(N/2);for(re=0;re<ue;re++)if(Ze=B[re],$e.reverse(),$e[ht]=rt(re+1),!($e[0]===$e[1]||$e[0]===void 0||$e[1]===void 0))for(Fe=Ge(0),nt=[Fe,Fe],fe=0;fe<te;fe++)nt.reverse(),nt[qe]=Ge(fe+1),!(nt[0]===nt[1]||nt[0]===void 0||nt[1]===void 0)&&(We=Ze[fe],Ye=Ie(We,(nt[1]-nt[0])*($e[1]-$e[0])),Oe.fillStyle="rgba("+Ye.join(",")+")",Oe.fillRect(nt[0]+jt,$e[0]+Qt,nt[1]-nt[0]-O,$e[1]-$e[0]-N))}pt=Math.round(pt/vt),wt=Math.round(wt/vt),Et=Math.round(Et/vt);var mr=S("rgb("+pt+","+wt+","+Et+")");P._hmpixcount=(P._hmpixcount||0)+vt,P._hmlumcount=(P._hmlumcount||0)+vt*mr.getLuminance();var or=k.selectAll("image").data(b);or.enter().append("svg:image").attr({xmlns:f.svg,preserveAspectRatio:"none"}),or.attr({height:_e,width:we,x:K,y:j,"xlink:href":Ce.toDataURL("image/png")}),xe==="fast"&&!q&&or.attr("style",h),a(k);var mt=V.texttemplate;if(mt){var ut=o(V),bt={type:"linear",range:[ut.min,ut.max],_separators:s._separators,_numFormat:s._numFormat},St=V.type==="histogram2dcontour",Pt=V.type==="contour",Ht=Pt?1:0,Bt=Pt?ue-1:ue,Nt=Pt?1:0,Kt=Pt?te-1:te,fr=[];for(fe=Ht;fe<Bt;fe++){var cr;if(Pt)cr=D.y[fe];else if(St){if(fe===0||fe===ue-1)continue;cr=D.y[fe]}else if(D.yCenter)cr=D.yCenter[fe];else{if(fe+1===ue&&D.y[fe+1]===void 0)continue;cr=(D.y[fe]+D.y[fe+1])/2}var dr=Math.round(_.c2p(cr));if(!(0>dr||dr>_._length))for(re=Nt;re<Kt;re++){var Xe;if(Pt)Xe=D.x[re];else if(St){if(re===0||re===te-1)continue;Xe=D.x[re]}else if(D.xCenter)Xe=D.xCenter[re];else{if(re+1===te&&D.x[re+1]===void 0)continue;Xe=(D.x[re]+D.x[re+1])/2}var He=Math.round(s.c2p(Xe));if(!(0>He||He>s._length)){var zt=r({x:Xe,y:cr},V,P._fullLayout);zt.x=Xe,zt.y=cr;var Rt=D.z[fe][re];Rt===void 0?(zt.z="",zt.zLabel=""):(zt.z=Rt,zt.zLabel=T.tickText(bt,Rt,"hover").text);var Jt=D.text&&D.text[fe]&&D.text[fe][re];(Jt===void 0||Jt===!1)&&(Jt=""),zt.text=Jt;var sr=v.texttemplateString(mt,zt,P._fullLayout._d3locale,zt,V._meta||{});if(sr){var ur=sr.split("<br>"),er=ur.length,Ft=0;for(ce=0;ce<er;ce++)Ft=Math.max(Ft,ur[ce].length);fr.push({l:er,c:Ft,t:sr,x:He,y:dr,z:Rt})}}}}var ir=V.textfont,hr=ir.size,xr=P._fullLayout.font.size;if(!hr||hr==="auto"){var vr=1/0,Vr=1/0,_r=0,Rr=0;for(ce=0;ce<fr.length;ce++){var nn=fr[ce];if(_r=Math.max(_r,nn.l),Rr=Math.max(Rr,nn.c),ce<fr.length-1){var en=fr[ce+1],An=Math.abs(en.x-nn.x),wn=Math.abs(en.y-nn.y);An&&(vr=Math.min(vr,An)),wn&&(Vr=Math.min(Vr,wn))}}!isFinite(vr)||!isFinite(Vr)?hr=xr:(vr-=O,Vr-=N,vr/=Rr,Vr/=_r,vr/=l/2,Vr/=l,hr=Math.min(Math.floor(vr),Math.floor(Vr),xr))}if(hr<=0||!isFinite(hr))return;var Tr=function(zr){return zr.x},kr=function(zr){return zr.y-hr*(zr.l*l/2-1)},Wr=c(k).data(fr);Wr.enter().append("g").classed(w,1).append("text").attr("text-anchor","middle").each(function(zr){var sn=d.select(this),un=ir.color;(!un||un==="auto")&&(un=t.contrast(zr.z===void 0?P._fullLayout.plot_bgcolor:"rgba("+Le(zr.z).join()+")")),sn.attr("data-notex",1).call(g.positionText,Tr(zr),kr(zr)).call(E.font,{family:ir.family,size:hr,color:un,weight:ir.weight,style:ir.style,variant:ir.variant,textcase:ir.textcase,lineposition:ir.lineposition,shadow:ir.shadow}).text(zr.t).call(g.convertToTspans,P)})}})};function p(P,y){var C=y.length-2,M=v.constrain(v.findBin(P,y),0,C),s=y[M],_=y[M+1],b=v.constrain(M+(P-s)/(_-s)-.5,0,C),k=Math.round(b),D=Math.abs(b-k);return!b||b===C||!D?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:D,bin1:Math.round(k+D/(b-k))}}function x(P,y){var C=y.length-1,M=v.constrain(v.findBin(P,y),0,C),s=y[M],_=y[M+1],b=(P-s)/(_-s)||0;return b<=0?{bin0:M,bin1:M,frac:0}:b<.5?{bin0:M,bin1:M+1,frac:b}:{bin0:M+1,bin1:M,frac:1-b}}function A(P,y,C){P[y]=C[0],P[y+1]=C[1],P[y+2]=C[2],P[y+3]=Math.round(C[3]*255)}},41648:function(U,F,e){var d=e(33428);U.exports=function(n){d.select(n).selectAll(".hm image").style("opacity",function(E){return E.trace.opacity})}},82748:function(U){U.exports=function(e,d,S){var n=S("zsmooth");n===!1&&(S("xgap"),S("ygap")),S("zhoverformat")}},51264:function(U,F,e){var d=e(38248),S=e(3400),n=e(24040);U.exports=function(g,r,t,o,i,f){var u=t("z");i=i||"x",f=f||"y";var l,m;if(u===void 0||!u.length)return 0;if(S.isArray1D(u)){l=t(i),m=t(f);var h=S.minRowLength(l),w=S.minRowLength(m);if(h===0||w===0)return 0;r._length=Math.min(h,w,u.length)}else{if(l=E(i,t),m=E(f,t),!T(u))return 0;t("transpose"),r._length=null}if(g.type==="heatmapgl")return!0;var c=n.getComponentMethod("calendars","handleTraceDefaults");return c(g,r,[i,f],o),!0};function E(v,g){var r=g(v),t=r?g(v+"type","array"):"scaled";return t==="scaled"&&(g(v+"0"),g("d"+v)),r}function T(v){for(var g=!0,r=!1,t=!1,o,i=0;i<v.length;i++){if(o=v[i],!S.isArrayOrTypedArray(o)){g=!1;break}o.length>0&&(r=!0);for(var f=0;f<o.length;f++)if(d(o[f])){t=!0;break}}return g&&r&&t}},74512:function(U,F,e){for(var d=e(83328),S=e(49084),n=e(92880).extendFlat,E=e(67824).overrideAll,T=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],v={},g=0;g<T.length;g++){var r=T[g];v[r]=d[r]}v.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},n(v,S("",{cLetter:"z",autoColorDflt:!1})),U.exports=E(v,"calc","nested")},84656:function(U,F,e){var d=e(67792).gl_heatmap2d,S=e(54460),n=e(43080);function E(r,t){this.scene=r,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=d(r.glplot,this.options),this.heatmap._trace=this}var T=E.prototype;T.handlePick=function(r){var t=this.options,o=t.shape,i=r.pointId,f=i%o[0],u=Math.floor(i/o[0]),l=i;return{trace:this,dataCoord:r.dataCoord,traceCoord:[t.x[f],t.y[u],t.z[l]],textLabel:this.textLabels[i],name:this.name,pointIndex:[u,f],hoverinfo:this.hoverinfo}},T.update=function(r,t){var o=t[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var i=o.z;this.options.z=[].concat.apply([],i);var f=i[0].length,u=i.length;this.options.shape=[f,u],this.options.x=o.x,this.options.y=o.y,this.options.zsmooth=r.zsmooth;var l=v(r);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var m=this.scene.xaxis,h=this.scene.yaxis,w,c;r.zsmooth===!1&&(w={ppad:o.x[1]-o.x[0]},c={ppad:o.y[1]-o.y[0]}),r._extremes[m._id]=S.findExtremes(m,o.x,w),r._extremes[h._id]=S.findExtremes(h,o.y,c)},T.dispose=function(){this.heatmap.dispose()};function v(r){for(var t=r.colorscale,o=r.zmin,i=r.zmax,f=t.length,u=new Array(f),l=new Array(4*f),m=0;m<f;m++){var h=t[m],w=n(h[1]);u[m]=o+h[0]*(i-o);for(var c=0;c<4;c++)l[4*m+c]=w[c]}return{colorLevels:u,colorValues:l}}function g(r,t,o){var i=new E(r,t.uid);return i.update(t,o),i}U.exports=g},86464:function(U,F,e){var d=e(3400),S=e(51264),n=e(27260),E=e(74512);U.exports=function(v,g,r,t){function o(f,u){return d.coerce(v,g,E,f,u)}var i=S(v,g,o,t);if(!i){g.visible=!1;return}o("text"),o("zsmooth"),n(v,g,t,o,{prefix:"",cLetter:"z"})}},45536:function(U,F,e){U.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(U,F,e){var d=e(20832),S=e(29736).axisHoverFormat,n=e(21776).Ks,E=e(21776).Gw,T=e(25376),v=e(11120),g=e(73316),r=e(92880).extendFlat;U.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:S("x"),yhoverformat:S("y"),text:r({},d.text,{}),hovertext:r({},d.hovertext,{}),orientation:d.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:v("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:v("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({},{keys:g.eventDataKeys}),texttemplate:E({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},d.textposition,{arrayOk:!1}),textfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:d.insidetextanchor,textangle:d.textangle,cliponaxis:d.cliponaxis,constraintext:d.constraintext,marker:d.marker,offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,_deprecated:{bardir:d._deprecated.bardir},zorder:d.zorder}},2e3:function(U){U.exports=function(e,d){for(var S=e.length,n=0,E=0;E<S;E++)d[E]?(e[E]/=d[E],n+=e[E]):e[E]=null;return n}},11120:function(U){U.exports=function(e,d){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(U,F,e){var d=e(38248);U.exports={count:function(S,n,E){return E[S]++,1},sum:function(S,n,E,T){var v=T[n];return d(v)?(v=Number(v),E[S]+=v,v):0},avg:function(S,n,E,T,v){var g=T[n];return d(g)&&(g=Number(g),E[S]+=g,v[S]++),0},min:function(S,n,E,T){var v=T[n];if(d(v))if(v=Number(v),d(E[S])){if(E[S]>v){var g=v-E[S];return E[S]=v,g}}else return E[S]=v,v;return 0},max:function(S,n,E,T){var v=T[n];if(d(v))if(v=Number(v),d(E[S])){if(E[S]<v){var g=v-E[S];return E[S]=v,g}}else return E[S]=v,v;return 0}}},67712:function(U,F,e){var d=e(39032),S=d.ONEAVGYEAR,n=d.ONEAVGMONTH,E=d.ONEDAY,T=d.ONEHOUR,v=d.ONEMIN,g=d.ONESEC,r=e(54460).tickIncrement;U.exports=function(l,m,h,w,c){var a=-1.1*m,p=-.1*m,x=l-p,A=h[0],P=h[1],y=Math.min(t(A+p,A+x,w,c),t(P+p,P+x,w,c)),C=Math.min(t(A+a,A+p,w,c),t(P+a,P+p,w,c)),M,s;if(y>C&&C<Math.abs(P-A)/4e3?(M=y,s=!1):(M=Math.min(y,C),s=!0),w.type==="date"&&M>E){var _=M===S?1:6,b=M===S?"M12":"M1";return function(k,D){var V=w.c2d(k,S,c),O=V.indexOf("-",_);O>0&&(V=V.substr(0,O));var N=w.d2c(V,0,c);if(N<k){var B=r(N,b,!1,c);(N+B)/2<k+l&&(N=B)}return D&&s?r(N,b,!0,c):N}}return function(k,D){var V=M*Math.round(k/M);return V+M/10<k&&V+M*.9<k+l&&(V+=M),D&&s&&(V-=M),V}};function t(u,l,m,h){if(u*l<=0)return 1/0;for(var w=Math.abs(l-u),c=m.type==="date",a=o(w,c),p=0;p<10;p++){var x=o(a*80,c);if(a===x)break;if(i(x,u,l,c,m,h))a=x;else break}return a}function o(u,l){return l&&u>g?u>E?u>S*1.1?S:u>n*1.1?n:E:u>T?T:u>v?v:g:Math.pow(10,Math.floor(Math.log(u)/Math.LN10))}function i(u,l,m,h,w,c){if(h&&u>E){var a=f(l,w,c),p=f(m,w,c),x=u===S?0:1;return a[x]!==p[x]}return Math.floor(m/u)-Math.floor(l/u)>.1}function f(u,l,m){var h=l.c2d(u,S,m).split("-");return h[0]===""&&(h.unshift(),h[0]="-"+h[0]),h}},35852:function(U,F,e){var d=e(38248),S=e(3400),n=e(24040),E=e(54460),T=e(84664),v=e(16964),g=e(10648),r=e(2e3),t=e(67712);function o(m,h){var w=[],c=[],a=h.orientation==="h",p=E.getFromId(m,a?h.yaxis:h.xaxis),x=a?"y":"x",A={x:"y",y:"x"}[x],P=h[x+"calendar"],y=h.cumulative,C,M=i(m,h,p,x),s=M[0],_=M[1],b=typeof s.size=="string",k=[],D=b?k:s,V=[],O=[],N=[],B=0,z=h.histnorm,H=h.histfunc,X=z.indexOf("density")!==-1,$,ne,q;y.enabled&&X&&(z=z.replace(/ ?density$/,""),X=!1);var ue=H==="max"||H==="min",te=ue?null:0,J=v.count,ie=g[z],K=!1,ee=function(Oe){return p.r2c(Oe,0,P)},le;for(S.isArrayOrTypedArray(h[A])&&H!=="count"&&(le=h[A],K=H==="avg",J=v[H]),C=ee(s.start),ne=ee(s.end)+(C-E.tickIncrement(C,s.size,!1,P))/1e6;C<ne&&w.length<1e6&&($=E.tickIncrement(C,s.size,!1,P),w.push((C+$)/2),c.push(te),N.push([]),k.push(C),X&&V.push(1/($-C)),K&&O.push(0),!($<=C));)C=$;k.push(C),!b&&p.type==="date"&&(D={start:ee(D.start),end:ee(D.end),size:D.size}),m._fullLayout._roundFnOpts||(m._fullLayout._roundFnOpts={});var j=h["_"+x+"bingroup"],Z={leftGap:1/0,rightGap:1/0};j&&(m._fullLayout._roundFnOpts[j]||(m._fullLayout._roundFnOpts[j]=Z),Z=m._fullLayout._roundFnOpts[j]);var fe=c.length,re=!0,ce=Z.leftGap,xe=Z.rightGap,Te={};for(C=0;C<_.length;C++){var we=_[C];q=S.findBin(we,D),q>=0&&q<fe&&(B+=J(q,C,c,le,O),re&&N[q].length&&we!==_[N[q][0]]&&(re=!1),N[q].push(C),Te[C]=q,ce=Math.min(ce,we-k[q]),xe=Math.min(xe,k[q+1]-we))}Z.leftGap=ce,Z.rightGap=xe;var _e;re||(_e=function(Oe,Le){return function(){var Ge=m._fullLayout._roundFnOpts[j];return t(Ge.leftGap,Ge.rightGap,k,p,P)(Oe,Le)}}),K&&(B=r(c,O)),ie&&ie(c,B,V),y.enabled&&l(c,y.direction,y.currentbin);var ke=Math.min(w.length,c.length),Ne=[],Ee=0,ze=ke-1;for(C=0;C<ke;C++)if(c[C]){Ee=C;break}for(C=ke-1;C>=Ee;C--)if(c[C]){ze=C;break}for(C=Ee;C<=ze;C++)if(d(w[C])&&d(c[C])){var Ce={p:w[C],s:c[C],b:0};y.enabled||(Ce.pts=N[C],re?Ce.ph0=Ce.ph1=N[C].length?_[N[C][0]]:w[C]:(h._computePh=!0,Ce.ph0=_e(k[C]),Ce.ph1=_e(k[C+1],!0))),Ne.push(Ce)}return Ne.length===1&&(Ne[0].width1=E.tickIncrement(Ne[0].p,s.size,!1,P)-Ne[0].p),T(Ne,h),S.isArrayOrTypedArray(h.selectedpoints)&&S.tagSelected(Ne,h,Te),Ne}function i(m,h,w,c,a){var p=c+"bins",x=m._fullLayout,A=h["_"+c+"bingroup"],P=x._histogramBinOpts[A],y=x.barmode==="overlay",C,M,s,_,b,k,D,V=function(we){return w.r2c(we,0,_)},O=function(we){return w.c2r(we,0,_)},N=w.type==="date"?function(we){return we||we===0?S.cleanDate(we,null,_):null}:function(we){return d(we)?Number(we):null};function B(we,_e,ke){_e[we+"Found"]?(_e[we]=N(_e[we]),_e[we]===null&&(_e[we]=ke[we])):(k[we]=_e[we]=ke[we],S.nestedProperty(M[0],p+"."+we).set(ke[we]))}if(h["_"+c+"autoBinFinished"])delete h["_"+c+"autoBinFinished"];else{M=P.traces;var z=[],H=!0,X=!1,$=!1;for(C=0;C<M.length;C++)if(s=M[C],s.visible){var ne=P.dirs[C];b=s["_"+ne+"pos0"]=w.makeCalcdata(s,ne),z=S.concat(z,b),delete s["_"+c+"autoBinFinished"],h.visible===!0&&(H?H=!1:(delete s._autoBin,s["_"+c+"autoBinFinished"]=1),n.traceIs(s,"2dMap")&&(X=!0),s.type==="histogram2dcontour"&&($=!0))}_=M[0][c+"calendar"];var q=E.autoBin(z,w,P.nbins,X,_,P.sizeFound&&P.size),ue=M[0]._autoBin={};if(k=ue[P.dirs[0]]={},$&&(P.size||(q.start=O(E.tickIncrement(V(q.start),q.size,!0,_))),P.end===void 0&&(q.end=O(E.tickIncrement(V(q.end),q.size,!1,_)))),y&&!n.traceIs(h,"2dMap")&&q._dataSpan===0&&w.type!=="category"&&w.type!=="multicategory"&&h.bingroup===""&&typeof h.xbins>"u"){if(a)return[q,b,!0];q=f(m,h,w,c,p)}D=s.cumulative||{},D.enabled&&D.currentbin!=="include"&&(D.direction==="decreasing"?q.start=O(E.tickIncrement(V(q.start),q.size,!0,_)):q.end=O(E.tickIncrement(V(q.end),q.size,!1,_))),P.size=q.size,P.sizeFound||(k.size=q.size,S.nestedProperty(M[0],p+".size").set(q.size)),B("start",P,q),B("end",P,q)}b=h["_"+c+"pos0"],delete h["_"+c+"pos0"];var te=h._input[p]||{},J=S.extendFlat({},P),ie=P.start,K=w.r2l(te.start),ee=K!==void 0;if((P.startFound||ee)&&K!==w.r2l(ie)){var le=ee?K:S.aggNums(Math.min,null,b),j={type:w.type==="category"||w.type==="multicategory"?"linear":w.type,r2l:w.r2l,dtick:P.size,tick0:ie,calendar:_,range:[le,E.tickIncrement(le,P.size,!1,_)].map(w.l2r)},Z=E.tickFirst(j);Z>w.r2l(le)&&(Z=E.tickIncrement(Z,P.size,!0,_)),J.start=w.l2r(Z),ee||S.nestedProperty(h,p+".start").set(J.start)}var fe=P.end,re=w.r2l(te.end),ce=re!==void 0;if((P.endFound||ce)&&re!==w.r2l(fe)){var xe=ce?re:S.aggNums(Math.max,null,b);J.end=w.l2r(xe),ce||S.nestedProperty(h,p+".start").set(J.end)}var Te="autobin"+c;return h._input[Te]===!1&&(h._input[p]=S.extendFlat({},h[p]||{}),delete h._input[Te],delete h[Te]),[J,b]}function f(m,h,w,c,a){var p=m._fullLayout,x=u(m,h),A=!1,P=1/0,y=[h],C,M,s;for(C=0;C<x.length;C++)if(M=x[C],M===h)A=!0;else if(!A)s=p._histogramBinOpts[M["_"+c+"bingroup"]],P=Math.min(P,s.size||M[a].size);else{var _=i(m,M,w,c,!0),b=_[0],k=_[2];M["_"+c+"autoBinFinished"]=1,M["_"+c+"pos0"]=_[1],k?y.push(M):P=Math.min(P,b.size)}var D=new Array(y.length);for(C=0;C<y.length;C++)for(var V=y[C]["_"+c+"pos0"],O=0;O<V.length;O++)if(V[O]!==void 0){D[C]=V[O];break}for(isFinite(P)||(P=S.distinctVals(D).minDiff),C=0;C<y.length;C++){M=y[C];var N=M[c+"calendar"],B={start:w.c2r(D[C]-P/2,0,N),end:w.c2r(D[C]+P/2,0,N),size:P};M._input[a]=M[a]=B,s=p._histogramBinOpts[M["_"+c+"bingroup"]],s&&S.extendFlat(s,B)}return h[a]}function u(m,h){for(var w=h.xaxis,c=h.yaxis,a=h.orientation,p=[],x=m._fullData,A=0;A<x.length;A++){var P=x[A];P.type==="histogram"&&P.visible===!0&&P.orientation===a&&P.xaxis===w&&P.yaxis===c&&p.push(P)}return p}function l(m,h,w){var c,a,p;function x(P){p=m[P],m[P]/=2}function A(P){a=m[P],m[P]=p+a/2,p+=a}if(w==="half")if(h==="increasing")for(x(0),c=1;c<m.length;c++)A(c);else for(x(m.length-1),c=m.length-2;c>=0;c--)A(c);else if(h==="increasing"){for(c=1;c<m.length;c++)m[c]+=m[c-1];w==="exclude"&&(m.unshift(0),m.pop())}else{for(c=m.length-2;c>=0;c--)m[c]+=m[c+1];w==="exclude"&&(m.push(0),m.shift())}}U.exports={calc:o,calcAllAutoBins:i}},73316:function(U){U.exports={eventDataKeys:["binNumber"]}},80536:function(U,F,e){var d=e(3400),S=e(79811),n=e(24040).traceIs,E=e(20011),T=e(31508).validateCornerradius,v=d.nestedProperty,g=e(71888).getAxisGroup,r=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];U.exports=function(i,f){var u=f._histogramBinOpts={},l=[],m={},h=[],w,c,a,p,x,A,P;function y(q,ue){return d.coerce(w._input,w,w._module.attributes,q,ue)}function C(q){return q.orientation==="v"?"x":"y"}function M(q,ue){var te=S.getFromTrace({_fullLayout:f},q,ue);return te.type}function s(q,ue,te){var J=q.uid+"__"+te;ue||(ue=J);var ie=M(q,te),K=q[te+"calendar"]||"",ee=u[ue],le=!0;ee&&(ie===ee.axType&&K===ee.calendar?(le=!1,ee.traces.push(q),ee.dirs.push(te)):(ue=J,ie!==ee.axType&&d.warn(["Attempted to group the bins of trace",q.index,"set on a","type:"+ie,"axis","with bins on","type:"+ee.axType,"axis."].join(" ")),K!==ee.calendar&&d.warn(["Attempted to group the bins of trace",q.index,"set with a",K,"calendar","with bins",ee.calendar?"on a "+ee.calendar+" calendar":"w/o a set calendar"].join(" ")))),le&&(u[ue]={traces:[q],dirs:[te],axType:ie,calendar:q[te+"calendar"]||""}),q["_"+te+"bingroup"]=ue}for(x=0;x<i.length;x++)if(w=i[x],n(w,"histogram")){if(l.push(w),delete w._xautoBinFinished,delete w._yautoBinFinished,w.type==="histogram"){var _=y("marker.cornerradius",f.barcornerradius);w.marker&&(w.marker.cornerradius=T(_))}n(w,"2dMap")||E(w._input,w,f,y)}var b=f._alignmentOpts||{};for(x=0;x<l.length;x++){if(w=l[x],a="",!n(w,"2dMap")){if(p=C(w),f.barmode==="group"&&w.alignmentgroup){var k=w[p+"axis"],D=g(f,k)+w.orientation;(b[D]||{})[w.alignmentgroup]&&(a=D)}!a&&f.barmode!=="overlay"&&(a=g(f,w.xaxis)+g(f,w.yaxis)+C(w))}a?(m[a]||(m[a]=[]),m[a].push(w)):h.push(w)}for(a in m){if(c=m[a],c.length===1){h.push(c[0]);continue}var V=!1;for(c.length&&(w=c[0],V=y("bingroup")),a=V||a,x=0;x<c.length;x++){w=c[x];var O=w._input.bingroup;O&&O!==a&&d.warn(["Trace",w.index,"must match","within bingroup",a+".","Ignoring its bingroup:",O,"setting."].join(" ")),w.bingroup=a,s(w,a,C(w))}}for(x=0;x<h.length;x++){w=h[x];var N=y("bingroup");if(n(w,"2dMap"))for(P=0;P<2;P++){p=t[P];var B=y(p+"bingroup",N?N+"__"+p:null);s(w,B,p)}else s(w,N,C(w))}for(a in u){var z=u[a];for(c=z.traces,A=0;A<r.length;A++){var H=r[A],X=H.name,$,ne;if(!(X==="nbins"&&z.sizeFound)){for(x=0;x<c.length;x++){if(w=c[x],p=z.dirs[x],$=H.aStr[p],v(w._input,$).get()!==void 0){z[X]=y($),z[X+"Found"]=!0;break}ne=(w._autoBin||{})[p]||{},ne[X]&&v(w,$).set(ne[X])}if(X==="start"||X==="end")for(;x<c.length;x++)w=c[x],w["_"+p+"bingroup"]&&(ne=(w._autoBin||{})[p]||{},y($,ne[X]));X==="nbins"&&!z.sizeFound&&!z.nbinsFound&&(w=c[0],z[X]=y($))}}}}},6616:function(U,F,e){var d=e(24040),S=e(3400),n=e(76308),E=e(31508).handleText,T=e(55592),v=e(40196);U.exports=function(r,t,o,i){function f(C,M){return S.coerce(r,t,v,C,M)}var u=f("x"),l=f("y"),m=f("cumulative.enabled");m&&(f("cumulative.direction"),f("cumulative.currentbin")),f("text");var h=f("textposition");E(r,t,i,f,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat");var w=f("orientation",l&&!u?"h":"v"),c=w==="v"?"x":"y",a=w==="v"?"y":"x",p=u&&l?Math.min(S.minRowLength(u)&&S.minRowLength(l)):S.minRowLength(t[c]||[]);if(!p){t.visible=!1;return}t._length=p;var x=d.getComponentMethod("calendars","handleTraceDefaults");x(r,t,["x","y"],i);var A=t[a];A&&f("histfunc"),f("histnorm"),f("autobin"+c),T(r,t,f,o,i),S.coerceSelectionMarkerOpacity(t,f);var P=(t.marker.line||{}).color,y=d.getComponentMethod("errorbars","supplyDefaults");y(r,t,P||n.defaultLine,{axis:"y"}),y(r,t,P||n.defaultLine,{axis:"x",inherit:"y"}),f("zorder")}},84980:function(U){U.exports=function(e,d,S,n,E){if(e.x="xVal"in d?d.xVal:d.x,e.y="yVal"in d?d.yVal:d.y,"zLabelVal"in d&&(e.z=d.zLabelVal),d.xa&&(e.xaxis=d.xa),d.ya&&(e.yaxis=d.ya),!(S.cumulative||{}).enabled){var T=Array.isArray(E)?n[0].pts[E[0]][E[1]]:n[E].pts;e.pointNumbers=T,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex;var v;if(S._indexToPoints){v=[];for(var g=0;g<T.length;g++)v=v.concat(S._indexToPoints[T[g]])}else v=T;e.pointIndices=v}return e}},43339:function(U,F,e){var d=e(63400).hoverPoints,S=e(54460).hoverLabelText;U.exports=function(E,T,v,g,r){var t=d(E,T,v,g,r);if(t){E=t[0];var o=E.cd[E.index],i=E.cd[0].trace;if(!i.cumulative.enabled){var f=i.orientation==="h"?"y":"x";E[f+"Label"]=S(E[f+"a"],[o.ph0,o.ph1],i[f+"hoverformat"])}return t}}},42600:function(U,F,e){U.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(U){U.exports={percent:function(F,e){for(var d=F.length,S=100/e,n=0;n<d;n++)F[n]*=S},probability:function(F,e){for(var d=F.length,S=0;S<d;S++)F[S]/=e},density:function(F,e,d,S){var n=F.length;S=S||1;for(var E=0;E<n;E++)F[E]*=d[E]*S},"probability density":function(F,e,d,S){var n=F.length;S&&(e/=S);for(var E=0;E<n;E++)F[E]*=d[E]/e}}},37008:function(U,F,e){var d=e(40196),S=e(11120),n=e(83328),E=e(45464),T=e(29736).axisHoverFormat,v=e(21776).Ks,g=e(21776).Gw,r=e(49084),t=e(92880).extendFlat;U.exports=t({x:d.x,y:d.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:S("x"),nbinsy:d.nbinsy,ybins:S("y"),autobinx:d.autobinx,autobiny:d.autobiny,bingroup:t({},d.bingroup,{}),xbingroup:t({},d.bingroup,{}),ybingroup:t({},d.bingroup,{}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:v({},{keys:"z"}),texttemplate:g({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:n.textfont,showlegend:t({},E.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},55480:function(U,F,e){var d=e(3400),S=e(54460),n=e(16964),E=e(10648),T=e(2e3),v=e(67712),g=e(35852).calcAllAutoBins;U.exports=function(f,u){var l=S.getFromId(f,u.xaxis),m=S.getFromId(f,u.yaxis),h=u.xcalendar,w=u.ycalendar,c=function(Ye){return l.r2c(Ye,0,h)},a=function(Ye){return m.r2c(Ye,0,w)},p=function(Ye){return l.c2r(Ye,0,h)},x=function(Ye){return m.c2r(Ye,0,w)},A,P,y,C,M=g(f,u,l,"x"),s=M[0],_=M[1],b=g(f,u,m,"y"),k=b[0],D=b[1],V=u._length;_.length>V&&_.splice(V,_.length-V),D.length>V&&D.splice(V,D.length-V);var O=[],N=[],B=[],z=typeof s.size=="string",H=typeof k.size=="string",X=[],$=[],ne=z?X:s,q=H?$:k,ue=0,te=[],J=[],ie=u.histnorm,K=u.histfunc,ee=ie.indexOf("density")!==-1,le=K==="max"||K==="min",j=le?null:0,Z=n.count,fe=E[ie],re=!1,ce=[],xe=[],Te="z"in u?u.z:"marker"in u&&Array.isArray(u.marker.color)?u.marker.color:"";Te&&K!=="count"&&(re=K==="avg",Z=n[K]);var we=s.size,_e=c(s.start),ke=c(s.end)+(_e-S.tickIncrement(_e,we,!1,h))/1e6;for(A=_e;A<ke;A=S.tickIncrement(A,we,!1,h))N.push(j),X.push(A),re&&B.push(0);X.push(A);var Ne=N.length,Ee=(A-_e)/Ne,ze=p(_e+Ee/2),Ce=k.size,Oe=a(k.start),Le=a(k.end)+(Oe-S.tickIncrement(Oe,Ce,!1,w))/1e6;for(A=Oe;A<Le;A=S.tickIncrement(A,Ce,!1,w)){O.push(N.slice()),$.push(A);var Ge=new Array(Ne);for(P=0;P<Ne;P++)Ge[P]=[];J.push(Ge),re&&te.push(B.slice())}$.push(A);var rt=O.length,ot=(A-Oe)/rt,$e=x(Oe+ot/2);ee&&(ce=r(N.length,ne,Ee,z),xe=r(O.length,q,ot,H)),!z&&l.type==="date"&&(ne=t(c,ne)),!H&&m.type==="date"&&(q=t(a,q));var qe=!0,ht=!0,vt=new Array(Ne),pt=new Array(rt),wt=1/0,Et=1/0,nt=1/0,Fe=1/0;for(A=0;A<V;A++){var We=_[A],Ze=D[A];y=d.findBin(We,ne),C=d.findBin(Ze,q),y>=0&&y<Ne&&C>=0&&C<rt&&(ue+=Z(y,A,O[C],Te,te[C]),J[C][y].push(A),qe&&(vt[y]===void 0?vt[y]=We:vt[y]!==We&&(qe=!1)),ht&&(pt[C]===void 0?pt[C]=Ze:pt[C]!==Ze&&(ht=!1)),wt=Math.min(wt,We-X[y]),Et=Math.min(Et,X[y+1]-We),nt=Math.min(nt,Ze-$[C]),Fe=Math.min(Fe,$[C+1]-Ze))}if(re)for(C=0;C<rt;C++)ue+=T(O[C],te[C]);if(fe)for(C=0;C<rt;C++)fe(O[C],ue,ce,xe[C]);return{x:_,xRanges:o(X,qe&&vt,wt,Et,l,h),x0:ze,dx:Ee,y:D,yRanges:o($,ht&&pt,nt,Fe,m,w),y0:$e,dy:ot,z:O,pts:J}};function r(i,f,u,l){var m=new Array(i),h;if(l)for(h=0;h<i;h++)m[h]=1/(f[h+1]-f[h]);else{var w=1/u;for(h=0;h<i;h++)m[h]=w}return m}function t(i,f){return{start:i(f.start),end:i(f.end),size:f.size}}function o(i,f,u,l,m,h){var w,c=i.length-1,a=new Array(c),p=v(u,l,i,m,h);for(w=0;w<c;w++){var x=(f||[])[w];a[w]=x===void 0?[p(i[w]),p(i[w+1],!0)]:[x,x]}return a}},99784:function(U,F,e){var d=e(3400),S=e(56408),n=e(82748),E=e(27260),T=e(39096),v=e(37008);U.exports=function(r,t,o,i){function f(u,l){return d.coerce(r,t,v,u,l)}S(r,t,f,i),t.visible!==!1&&(n(r,t,f,i),E(r,t,i,f,{prefix:"",cLetter:"z"}),f("hovertemplate"),T(f,i),f("xhoverformat"),f("yhoverformat"))}},59576:function(U,F,e){var d=e(55512),S=e(54460).hoverLabelText;U.exports=function(E,T,v,g,r){var t=d(E,T,v,g,r);if(t){E=t[0];var o=E.index,i=o[0],f=o[1],u=E.cd[0],l=u.trace,m=u.xRanges[f],h=u.yRanges[i];return E.xLabel=S(E.xa,[m[0],m[1]],l.xhoverformat),E.yLabel=S(E.ya,[h[0],h[1]],l.yhoverformat),t}}},21536:function(U,F,e){U.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(U,F,e){var d=e(24040),S=e(3400);U.exports=function(E,T,v,g){var r=v("x"),t=v("y"),o=S.minRowLength(r),i=S.minRowLength(t);if(!o||!i){T.visible=!1;return}T._length=Math.min(o,i);var f=d.getComponentMethod("calendars","handleTraceDefaults");f(E,T,["x","y"],g);var u=v("z")||v("marker.color");u&&v("histfunc"),v("histnorm"),v("autobinx"),v("autobiny")}},81220:function(U,F,e){var d=e(37008),S=e(67104),n=e(49084),E=e(29736).axisHoverFormat,T=e(92880).extendFlat;U.exports=T({x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:d.xbins,nbinsy:d.nbinsy,ybins:d.ybins,autobinx:d.autobinx,autobiny:d.autobiny,bingroup:d.bingroup,xbingroup:d.xbingroup,ybingroup:d.ybingroup,autocontour:S.autocontour,ncontours:S.ncontours,contours:S.contours,line:{color:S.line.color,width:T({},S.line.width,{dflt:.5}),dash:S.line.dash,smoothing:S.line.smoothing,editType:"plot"},xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z",1),hovertemplate:d.hovertemplate,texttemplate:S.texttemplate,textfont:S.textfont},n("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(U,F,e){var d=e(3400),S=e(56408),n=e(84952),E=e(97680),T=e(39096),v=e(81220);U.exports=function(r,t,o,i){function f(l,m){return d.coerce(r,t,v,l,m)}function u(l){return d.coerce2(r,t,v,l)}S(r,t,f,i),t.visible!==!1&&(n(r,t,f,u),E(r,t,f,i),f("xhoverformat"),f("yhoverformat"),f("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&T(f,i))}},65664:function(U,F,e){U.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(U,F,e){var d=e(21776).Ks,S=e(21776).Gw,n=e(49084),E=e(86968).u,T=e(74996),v=e(424),g=e(40516),r=e(32984),t=e(92880).extendFlat,o=e(98192).c;U.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:g.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:v.marker.colors,line:v.marker.line,pattern:o,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),leaf:v.leaf,pathbar:g.pathbar,text:T.text,textinfo:v.textinfo,texttemplate:S({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:T.hovertext,hoverinfo:v.hoverinfo,hovertemplate:d({},{keys:r.eventDataKeys}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:g.outsidetextfont,textposition:g.textposition,sort:T.sort,root:v.root,domain:E({name:"icicle",trace:!0,editType:"calc"})}},59564:function(U,F,e){var d=e(7316);F.name="icicle",F.plot=function(S,n,E,T){d.plotBasePlot(F.name,S,n,E,T)},F.clean=function(S,n,E,T){d.cleanBasePlot(F.name,S,n,E,T)}},73876:function(U,F,e){var d=e(3776);F.r=function(S,n){return d.calc(S,n)},F.q=function(S){return d._runCrossTraceCalc("icicle",S)}},7045:function(U,F,e){var d=e(3400),S=e(97376),n=e(76308),E=e(86968).Q,T=e(31508).handleText,v=e(78048).TEXTPAD,g=e(74174).handleMarkerDefaults,r=e(8932),t=r.hasColorscale,o=r.handleDefaults;U.exports=function(f,u,l,m){function h(y,C){return d.coerce(f,u,S,y,C)}var w=h("labels"),c=h("parents");if(!w||!w.length||!c||!c.length){u.visible=!1;return}var a=h("values");a&&a.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var p=h("text");h("texttemplate"),u.texttemplate||h("textinfo",d.isArrayOrTypedArray(p)?"text+label":"label"),h("hovertext"),h("hovertemplate");var x=h("pathbar.visible"),A="auto";T(f,u,m,h,A,{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),g(f,u,m,h);var P=u._hasColorscale=t(f,"marker","colors")||(f.marker||{}).coloraxis;P&&o(f,u,m,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",P?1:.7),u._hovered={marker:{line:{width:2,color:n.contrast(m.paper_bgcolor)}}},x&&(h("pathbar.thickness",u.pathbar.textfont.size+2*v),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),E(u,m,h),u._length=null}},67880:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(72736),T=e(25132),v=e(47192).styleOne,g=e(32984),r=e(78176),t=e(45716),o=e(96488).formatSliceLabel,i=!1;U.exports=function(u,l,m,h,w){var c=w.width,a=w.height,p=w.viewX,x=w.viewY,A=w.pathSlice,P=w.toMoveInsideSlice,y=w.strTransform,C=w.hasTransition,M=w.handleSlicesExit,s=w.makeUpdateSliceInterpolator,_=w.makeUpdateTextInterpolator,b=w.prevEntry,k={},D=u._context.staticPlot,V=u._fullLayout,O=l[0],N=O.trace,B=N.textposition.indexOf("left")!==-1,z=N.textposition.indexOf("right")!==-1,H=N.textposition.indexOf("bottom")!==-1,X=T(m,[c,a],{flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,orientation:N.tiling.orientation,pad:{inner:N.tiling.pad},maxDepth:N._maxDepth}),$=X.descendants(),ne=1/0,q=-1/0;$.forEach(function(K){var ee=K.depth;ee>=N._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(ne=Math.min(ne,ee),q=Math.max(q,ee))}),h=h.data($,r.getPtId),N._maxVisibleLayers=isFinite(q)?q-ne+1:0,h.enter().append("g").classed("slice",!0),M(h,i,k,[c,a],A),h.order();var ue=null;if(C&&b){var te=r.getPtId(b);h.each(function(K){ue===null&&r.getPtId(K)===te&&(ue={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var J=function(){return ue||{x0:0,x1:c,y0:0,y1:a}},ie=h;return C&&(ie=ie.transition().each("end",function(){var K=d.select(this);r.setSliceCursor(K,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ie.each(function(K){K._x0=p(K.x0),K._x1=p(K.x1),K._y0=x(K.y0),K._y1=x(K.y1),K._hoverX=p(K.x1-N.tiling.pad),K._hoverY=x(H?K.y1-N.tiling.pad/2:K.y0+N.tiling.pad/2);var ee=d.select(this),le=S.ensureSingle(ee,"path","surface",function(re){re.style("pointer-events",D?"none":"all")});C?le.transition().attrTween("d",function(re){var ce=s(re,i,J(),[c,a],{orientation:N.tiling.orientation,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1});return function(xe){return A(ce(xe))}}):le.attr("d",A),ee.call(t,m,u,l,{styleOne:v,eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,u,{isTransitioning:u._transitioning}),le.call(v,K,N,u,{hovered:!1}),K.x0===K.x1||K.y0===K.y1?K._text="":K._text=o(K,m,N,l,V)||"";var j=S.ensureSingle(ee,"g","slicetext"),Z=S.ensureSingle(j,"text","",function(re){re.attr("data-notex",1)}),fe=S.ensureUniformFontSize(u,r.determineTextFont(N,K,V.font));Z.text(K._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":B?"start":"middle").call(n.font,fe).call(E.convertToTspans,u),K.textBB=n.bBox(Z.node()),K.transform=P(K,{fontSize:fe.size}),K.transform.fontSize=fe.size,C?Z.transition().attrTween("transform",function(re){var ce=_(re,i,J(),[c,a]);return function(xe){return y(ce(xe))}}):Z.attr("transform",y(K))}),ue}},29044:function(U,F,e){U.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(U){U.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(U,F,e){var d=e(3400),S=e(90676);U.exports=function(E,T){function v(g,r){return d.coerce(E,T,S,g,r)}v("iciclecolorway",T.colorway),v("extendiciclecolors")}},25132:function(U,F,e){var d=e(74148),S=e(83024);U.exports=function(E,T,v){var g=v.flipX,r=v.flipY,t=v.orientation==="h",o=v.maxDepth,i=T[0],f=T[1];o&&(i=(E.height+1)*T[0]/Math.min(E.height+1,o),f=(E.height+1)*T[1]/Math.min(E.height+1,o));var u=d.partition().padding(v.pad.inner).size(t?[T[1],i]:[T[0],f])(E);return(t||g||r)&&S(u,T,{swapXY:t,flipX:g,flipY:r}),u}},38364:function(U,F,e){var d=e(95808),S=e(67880);U.exports=function(E,T,v,g){return d(E,T,v,g,{type:"icicle",drawDescendants:S})}},47192:function(U,F,e){var d=e(33428),S=e(76308),n=e(3400),E=e(82744).resizeText,T=e(60404);function v(r){var t=r._fullLayout._iciclelayer.selectAll(".trace");E(r,t,"icicle"),t.each(function(o){var i=d.select(this),f=o[0],u=f.trace;i.style("opacity",u.opacity),i.selectAll("path.surface").each(function(l){d.select(this).call(g,l,u,r)})})}function g(r,t,o,i){var f=t.data.data,u=!t.children,l=f.i,m=n.castOption(o,l,"marker.line.color")||S.defaultLine,h=n.castOption(o,l,"marker.line.width")||0;r.call(T,t,o,i).style("stroke-width",h).call(S.stroke,m).style("opacity",u?o.leaf.opacity:null)}U.exports={style:v,styleOne:g}},95188:function(U,F,e){for(var d=e(45464),S=e(52904).zorder,n=e(21776).Ks,E=e(92880).extendFlat,T=e(47797).colormodel,v=["rgb","rgba","rgba256","hsl","hsla"],g=[],r=[],t=0;t<v.length;t++){var o=T[v[t]];g.push("For the `"+v[t]+"` colormodel, it is ["+(o.zminDflt||o.min).join(", ")+"]."),r.push("For the `"+v[t]+"` colormodel, it is ["+(o.zmaxDflt||o.max).join(", ")+"].")}U.exports=E({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:v,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:E({},d.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:n({},{keys:["z","color","colormodel"]}),zorder:S,transforms:void 0})},93336:function(U,F,e){var d=e(3400),S=e(47797),n=e(38248),E=e(54460),T=e(3400).maxRowLength,v=e(18712).i;U.exports=function(i,f){var u,l;if(f._hasZ)u=f.z.length,l=T(f.z);else if(f._hasSource){var m=v(f.source);u=m.height,l=m.width}var h=E.getFromId(i,f.xaxis||"x"),w=E.getFromId(i,f.yaxis||"y"),c=h.d2c(f.x0)-f.dx/2,a=w.d2c(f.y0)-f.dy/2,p,x=[c,c+l*f.dx],A=[a,a+u*f.dy];if(h&&h.type==="log")for(p=0;p<l;p++)x.push(c+p*f.dx);if(w&&w.type==="log")for(p=0;p<u;p++)A.push(a+p*f.dy);f._extremes[h._id]=E.findExtremes(h,x),f._extremes[w._id]=E.findExtremes(w,A),f._scaler=t(f);var P={x0:c,y0:a,z:f.z,w:l,h:u};return[P]};function g(o,i,f,u){return function(l){return d.constrain((l-o)*i,f,u)}}function r(o,i){return function(f){return d.constrain(f,o,i)}}function t(o){var i=S.colormodel[o.colormodel],f=i.colormodel||o.colormodel,u=f.length;o._sArray=[];for(var l=0;l<u;l++)i.min[l]!==o.zmin[l]||i.max[l]!==o.zmax[l]?o._sArray.push(g(o.zmin[l],(i.max[l]-i.min[l])/(o.zmax[l]-o.zmin[l]),i.min[l],i.max[l])):o._sArray.push(r(i.min[l],i.max[l]));return function(m){for(var h=m.slice(0,u),w=0;w<u;w++){var c=h[w];if(!n(c))return!1;h[w]=o._sArray[w](c)}return h}}},47797:function(U){U.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(F){return F.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(F){return F.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(F){return F.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(F){var e=F.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(F){var e=F.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}}}},13188:function(U,F,e){var d=e(3400),S=e(95188),n=e(47797),E=e(81792).IMAGE_URL_PREFIX;U.exports=function(v,g){function r(i,f){return d.coerce(v,g,S,i,f)}r("source"),g.source&&!g.source.match(E)&&delete g.source,g._hasSource=!!g.source;var t=r("z");if(g._hasZ=!(t===void 0||!t.length||!t[0]||!t[0].length),!g._hasZ&&!g._hasSource){g.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var o;g._hasZ?(r("colormodel","rgb"),o=n.colormodel[g.colormodel],r("zmin",o.zminDflt||o.min),r("zmax",o.zmaxDflt||o.max)):g._hasSource&&(g.colormodel="rgba256",o=n.colormodel[g.colormodel],g.zmin=o.zminDflt,g.zmax=o.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),g._length=null,r("zorder")}},79972:function(U){U.exports=function(e,d){return"xVal"in d&&(e.x=d.xVal),"yVal"in d&&(e.y=d.yVal),d.xa&&(e.xaxis=d.xa),d.ya&&(e.yaxis=d.ya),e.color=d.color,e.colormodel=d.trace.colormodel,e.z||(e.z=d.color),e}},18712:function(U,F,e){var d=e(19480),S=e(81792).IMAGE_URL_PREFIX,n=e(33576).Buffer;F.i=function(E){var T=E.replace(S,""),v=new n(T,"base64");return d(v)}},24892:function(U,F,e){var d=e(93024),S=e(3400),n=S.isArrayOrTypedArray,E=e(47797);U.exports=function(v,g,r){var t=v.cd[0],o=t.trace,i=v.xa,f=v.ya;if(!(d.inbox(g-t.x0,g-(t.x0+t.w*o.dx),0)>0||d.inbox(r-t.y0,r-(t.y0+t.h*o.dy),0)>0)){var u=Math.floor((g-t.x0)/o.dx),l=Math.floor(Math.abs(r-t.y0)/o.dy),m;if(o._hasZ?m=t.z[l][u]:o._hasSource&&(m=o._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(u,l,1,1).data),!!m){var h=t.hi||o.hoverinfo,w;if(h){var c=h.split("+");c.indexOf("all")!==-1&&(c=["color"]),c.indexOf("color")!==-1&&(w=!0)}var a=E.colormodel[o.colormodel],p=a.colormodel||o.colormodel,x=p.length,A=o._scaler(m),P=a.suffix,y=[];(o.hovertemplate||w)&&(y.push("["+[A[0]+P[0],A[1]+P[1],A[2]+P[2]].join(", ")),x===4&&y.push(", "+A[3]+P[3]),y.push("]"),y=y.join(""),v.extraText=p.toUpperCase()+": "+y);var C;n(o.hovertext)&&n(o.hovertext[l])?C=o.hovertext[l][u]:n(o.text)&&n(o.text[l])&&(C=o.text[l][u]);var M=f.c2p(t.y0+(l+.5)*o.dy),s=t.x0+(u+.5)*o.dx,_=t.y0+(l+.5)*o.dy,b="["+m.slice(0,o.colormodel.length).join(", ")+"]";return[S.extendFlat(v,{index:[l,u],x0:i.c2p(t.x0+u*o.dx),x1:i.c2p(t.x0+(u+1)*o.dx),y0:M,y1:M,color:A,xVal:s,xLabelVal:s,yVal:_,yLabelVal:_,zLabelVal:b,text:C,hovertemplateLabels:{zLabel:b,colorLabel:y,"color[0]Label":A[0]+P[0],"color[1]Label":A[1]+P[1],"color[2]Label":A[2]+P[2],"color[3]Label":A[3]+P[3]}})]}}}},48928:function(U,F,e){U.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(U,F,e){var d=e(33428),S=e(3400),n=S.strTranslate,E=e(9616),T=e(47797),v=e(9188),g=e(2264).STYLE;U.exports=function(t,o,i,f){var u=o.xaxis,l=o.yaxis,m=!t._context._exportedPlot&&v();S.makeTraceGroups(f,i,"im").each(function(h){var w=d.select(this),c=h[0],a=c.trace,p=(a.zsmooth==="fast"||a.zsmooth===!1&&m)&&!a._hasZ&&a._hasSource&&u.type==="linear"&&l.type==="linear";a._realImage=p;var x=c.z,A=c.x0,P=c.y0,y=c.w,C=c.h,M=a.dx,s=a.dy,_,b,k,D,V,O;for(O=0;_===void 0&&O<y;)_=u.c2p(A+O*M),O++;for(O=y;b===void 0&&O>0;)b=u.c2p(A+O*M),O--;for(O=0;D===void 0&&O<C;)D=l.c2p(P+O*s),O++;for(O=C;V===void 0&&O>0;)V=l.c2p(P+O*s),O--;if(b<_&&(k=b,b=_,_=k),V<D&&(k=D,D=V,V=k),!p){var N=.5;_=Math.max(-N*u._length,_),b=Math.min((1+N)*u._length,b),D=Math.max(-N*l._length,D),V=Math.min((1+N)*l._length,V)}var B=Math.round(b-_),z=Math.round(V-D),H=B<=0||z<=0;if(H){var X=w.selectAll("image").data([]);X.exit().remove();return}function $(j){var Z=document.createElement("canvas");Z.width=B,Z.height=z;var fe=Z.getContext("2d",{willReadFrequently:!0}),re=function(Oe){return S.constrain(Math.round(u.c2p(A+Oe*M)-_),0,B)},ce=function(Oe){return S.constrain(Math.round(l.c2p(P+Oe*s)-D),0,z)},xe=T.colormodel[a.colormodel],Te=xe.colormodel||a.colormodel,we=xe.fmt,_e;for(O=0;O<c.w;O++){var ke=re(O),Ne=re(O+1);if(!(Ne===ke||isNaN(Ne)||isNaN(ke)))for(var Ee=0;Ee<c.h;Ee++){var ze=ce(Ee),Ce=ce(Ee+1);Ce===ze||isNaN(Ce)||isNaN(ze)||!j(O,Ee)||(_e=a._scaler(j(O,Ee)),_e?fe.fillStyle=Te+"("+we(_e).join(",")+")":fe.fillStyle="rgba(0,0,0,0)",fe.fillRect(ke,ze,Ne-ke,Ce-ze))}}return Z}var ne=w.selectAll("image").data([h]);ne.enter().append("svg:image").attr({xmlns:E.svg,preserveAspectRatio:"none"}),ne.exit().remove();var q=a.zsmooth===!1?g:"";if(p){var ue=S.simpleMap(u.range,u.r2l),te=S.simpleMap(l.range,l.r2l),J=ue[1]<ue[0],ie=te[1]>te[0];if(J||ie){var K=_+B/2,ee=D+z/2;q+="transform:"+n(K+"px",ee+"px")+"scale("+(J?-1:1)+","+(ie?-1:1)+")"+n(-K+"px",-ee+"px")+";"}}ne.attr("style",q);var le=new Promise(function(j){if(a._hasZ)j();else if(a._hasSource)if(a._canvas&&a._canvas.el.width===y&&a._canvas.el.height===C&&a._canvas.source===a.source)j();else{var Z=document.createElement("canvas");Z.width=y,Z.height=C;var fe=Z.getContext("2d",{willReadFrequently:!0});a._image=a._image||new Image;var re=a._image;re.onload=function(){fe.drawImage(re,0,0),a._canvas={el:Z,source:a.source},j()},re.setAttribute("src",a.source)}}).then(function(){var j,Z;if(a._hasZ)Z=$(function(ce,xe){var Te=x[xe][ce];return S.isTypedArray(Te)&&(Te=Array.from(Te)),Te}),j=Z.toDataURL("image/png");else if(a._hasSource)if(p)j=a.source;else{var fe=a._canvas.el.getContext("2d",{willReadFrequently:!0}),re=fe.getImageData(0,0,y,C).data;Z=$(function(ce,xe){var Te=4*(xe*y+ce);return[re[Te],re[Te+1],re[Te+2],re[Te+3]]}),j=Z.toDataURL("image/png")}ne.attr({"xlink:href":j,height:z,width:B,x:_,y:D})});t._promises.push(le)})}},28576:function(U,F,e){var d=e(33428);U.exports=function(n){d.select(n).selectAll(".im image").style("opacity",function(E){return E[0].trace.opacity})}},89864:function(U,F,e){var d=e(92880).extendFlat,S=e(92880).extendDeep,n=e(67824).overrideAll,E=e(25376),T=e(22548),v=e(86968).u,g=e(94724),r=e(31780).templatedArray,t=e(48164),o=e(29736).descriptionOnlyNumbers,i=E({editType:"plot",colorEditType:"plot"}),f={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:T.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},u={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},l=r("step",S({},f,{range:u}));U.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:v({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:d({},i,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:o("value")},font:d({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:o("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:d({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:S({},f,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:n({range:u,visible:d({},g.visible,{dflt:!0}),tickmode:g.minor.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:d({},g.ticks,{dflt:"outside"}),ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,ticklabelstep:g.ticklabelstep,showticklabels:g.showticklabels,labelalias:g.labelalias,tickfont:E({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,editType:"plot"},"plot"),steps:l,threshold:{line:{color:d({},f.line.color,{}),width:d({},f.line.width,{dflt:1}),editType:"plot"},thickness:d({},f.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(U,F,e){var d=e(7316);F.name="indicator",F.plot=function(S,n,E,T){d.plotBasePlot(F.name,S,n,E,T)},F.clean=function(S,n,E,T){d.cleanBasePlot(F.name,S,n,E,T)}},79136:function(U){function F(e,d){var S=[],n=d.value;typeof d._lastValue!="number"&&(d._lastValue=d.value);var E=d._lastValue,T=E;return d._hasDelta&&typeof d.delta.reference=="number"&&(T=d.delta.reference),S[0]={y:n,lastY:E,delta:n-T,relativeDelta:(n-T)/T},S}U.exports={calc:F}},12096:function(U){U.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(U,F,e){var d=e(3400),S=e(89864),n=e(86968).Q,E=e(31780),T=e(51272),v=e(12096),g=e(26332),r=e(25404),t=e(95936),o=e(42568);function i(u,l,m,h){function w(B,z){return d.coerce(u,l,S,B,z)}n(l,h,w),w("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var c=w("value");l._range=[0,typeof c=="number"?1.5*c:1];var a=new Array(2),p;if(l._hasNumber){w("number.valueformat");var x=d.extendFlat({},h.font);x.size=void 0,d.coerceFont(w,"number.font",x),l.number.font.size===void 0&&(l.number.font.size=v.defaultNumberFontSize,a[0]=!0),w("number.prefix"),w("number.suffix"),p=l.number.font.size}var A;if(l._hasDelta){var P=d.extendFlat({},h.font);P.size=void 0,d.coerceFont(w,"delta.font",P),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(p||v.defaultNumberFontSize),a[1]=!0),w("delta.reference",l.value),w("delta.relative"),w("delta.valueformat",l.delta.relative?"2%":""),w("delta.increasing.symbol"),w("delta.increasing.color"),w("delta.decreasing.symbol"),w("delta.decreasing.color"),w("delta.position"),w("delta.prefix"),w("delta.suffix"),A=l.delta.font.size}l._scaleNumbers=(!l._hasNumber||a[0])&&(!l._hasDelta||a[1])||!1;var y=d.extendFlat({},h.font);y.size=.25*(p||A||v.defaultNumberFontSize),d.coerceFont(w,"title.font",y),w("title.text");var C,M,s,_;function b(B,z){return d.coerce(C,M,S.gauge,B,z)}function k(B,z){return d.coerce(s,_,S.gauge.axis,B,z)}if(l._hasGauge){C=u.gauge,C||(C={}),M=E.newContainer(l,"gauge"),b("shape");var D=l._isBullet=l.gauge.shape==="bullet";D||w("title.align","center");var V=l._isAngular=l.gauge.shape==="angular";V||w("align","center"),b("bgcolor",h.paper_bgcolor),b("borderwidth"),b("bordercolor"),b("bar.color"),b("bar.line.color"),b("bar.line.width");var O=v.valueThickness*(l.gauge.shape==="bullet"?.5:1);b("bar.thickness",O),T(C,M,{name:"steps",handleItemDefaults:f}),b("threshold.value"),b("threshold.thickness"),b("threshold.line.width"),b("threshold.line.color"),s={},C&&(s=C.axis||{}),_=E.newContainer(M,"axis"),k("visible"),l._range=k("range",l._range);var N={font:h.font,noAutotickangles:!0,outerTicks:!0};g(s,_,k,"linear"),o(s,_,k,"linear",N),t(s,_,k,"linear",N),r(s,_,k,N)}else w("title.align","center"),w("align","center"),l._isAngular=l._isBullet=!1;l._length=null}function f(u,l){function m(h,w){return d.coerce(u,l,S.gauge.steps,h,w)}m("color"),m("line.color"),m("line.width"),m("range"),m("thickness")}U.exports={supplyDefaults:i}},43480:function(U,F,e){U.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(U,F,e){var d=e(33428),S=e(67756).qy,n=e(67756).Gz,E=e(3400),T=E.strScale,v=E.strTranslate,g=E.rad2deg,r=e(84284).MID_SHIFT,t=e(43616),o=e(12096),i=e(72736),f=e(54460),u=e(28336),l=e(37668),m=e(94724),h=e(76308),w={left:"start",center:"middle",right:"end"},c={left:0,center:.5,right:1},a=/[yzafpnmkMGTPEZY]/;function p(D){return D&&D.duration>0}U.exports=function(V,O,N,B){var z=V._fullLayout,H;p(N)&&B&&(H=B()),E.makeTraceGroups(z._indicatorlayer,O,"trace").each(function(X){var $=X[0],ne=$.trace,q=d.select(this),ue=ne._hasGauge,te=ne._isAngular,J=ne._isBullet,ie=ne.domain,K={w:z._size.w*(ie.x[1]-ie.x[0]),h:z._size.h*(ie.y[1]-ie.y[0]),l:z._size.l+z._size.w*ie.x[0],r:z._size.r+z._size.w*(1-ie.x[1]),t:z._size.t+z._size.h*(1-ie.y[1]),b:z._size.b+z._size.h*ie.y[0]},ee=K.l+K.w/2,le=K.t+K.h/2,j=Math.min(K.w/2,K.h),Z=o.innerRadius*j,fe,re,ce,xe=ne.align||"center";if(re=le,!ue)fe=K.l+c[xe]*K.w,ce=function(Le){return s(Le,K.w,K.h)};else if(te&&(fe=ee,re=le+j/2,ce=function(Le){return _(Le,.9*Z)}),J){var Te=o.bulletPadding,we=1-o.bulletNumberDomainSize+Te;fe=K.l+(we+(1-we)*c[xe])*K.w,ce=function(Le){return s(Le,(o.bulletNumberDomainSize-Te)*K.w,K.h)}}P(V,q,X,{numbersX:fe,numbersY:re,numbersScaler:ce,transitionOpts:N,onComplete:H});var _e,ke;ue&&(_e={range:ne.gauge.axis.range,color:ne.gauge.bgcolor,line:{color:ne.gauge.bordercolor,width:0},thickness:1},ke={range:ne.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:ne.gauge.bordercolor,width:ne.gauge.borderwidth},thickness:1});var Ne=q.selectAll("g.angular").data(te?X:[]);Ne.exit().remove();var Ee=q.selectAll("g.angularaxis").data(te?X:[]);Ee.exit().remove(),te&&A(V,q,X,{radius:j,innerRadius:Z,gauge:Ne,layer:Ee,size:K,gaugeBg:_e,gaugeOutline:ke,transitionOpts:N,onComplete:H});var ze=q.selectAll("g.bullet").data(J?X:[]);ze.exit().remove();var Ce=q.selectAll("g.bulletaxis").data(J?X:[]);Ce.exit().remove(),J&&x(V,q,X,{gauge:ze,layer:Ce,size:K,gaugeBg:_e,gaugeOutline:ke,transitionOpts:N,onComplete:H});var Oe=q.selectAll("text.title").data(X);Oe.exit().remove(),Oe.enter().append("text").classed("title",!0),Oe.attr("text-anchor",function(){return J?w.right:w[ne.title.align]}).text(ne.title.text).call(t.font,ne.title.font).call(i.convertToTspans,V),Oe.attr("transform",function(){var Le=K.l+K.w*c[ne.title.align],Ge,rt=o.titlePadding,ot=t.bBox(Oe.node());if(ue){if(te)if(ne.gauge.axis.visible){var $e=t.bBox(Ee.node());Ge=$e.top-rt-ot.bottom}else Ge=K.t+K.h/2-j/2-ot.bottom-rt;J&&(Ge=re-(ot.top+ot.bottom)/2,Le=K.l-o.bulletPadding*K.w)}else Ge=ne._numbersTop-rt-ot.bottom;return v(Le,Ge)})})};function x(D,V,O,N){var B=O[0].trace,z=N.gauge,H=N.layer,X=N.gaugeBg,$=N.gaugeOutline,ne=N.size,q=B.domain,ue=N.transitionOpts,te=N.onComplete,J,ie,K,ee,le;z.enter().append("g").classed("bullet",!0),z.attr("transform",v(ne.l,ne.t)),H.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),H.selectAll("g.xbulletaxistick,path,text").remove();var j=ne.h,Z=B.gauge.bar.thickness*j,fe=q.x[0],re=q.x[0]+(q.x[1]-q.x[0])*(B._hasNumber||B._hasDelta?1-o.bulletNumberDomainSize:1);J=M(D,B.gauge.axis),J._id="xbulletaxis",J.domain=[fe,re],J.setScale(),ie=f.calcTicks(J),K=f.makeTransTickFn(J),ee=f.getTickSigns(J)[2],le=ne.t+ne.h,J.visible&&(f.drawTicks(D,J,{vals:J.ticks==="inside"?f.clipEnds(J,ie):ie,layer:H,path:f.makeTickPath(J,le,ee),transFn:K}),f.drawLabels(D,J,{vals:ie,layer:H,transFn:K,labelFns:f.makeLabelFns(J,le)}));function ce(Ee){Ee.attr("width",function(ze){return Math.max(0,J.c2p(ze.range[1])-J.c2p(ze.range[0]))}).attr("x",function(ze){return J.c2p(ze.range[0])}).attr("y",function(ze){return .5*(1-ze.thickness)*j}).attr("height",function(ze){return ze.thickness*j})}var xe=[X].concat(B.gauge.steps),Te=z.selectAll("g.bg-bullet").data(xe);Te.enter().append("g").classed("bg-bullet",!0).append("rect"),Te.select("rect").call(ce).call(y),Te.exit().remove();var we=z.selectAll("g.value-bullet").data([B.gauge.bar]);we.enter().append("g").classed("value-bullet",!0).append("rect"),we.select("rect").attr("height",Z).attr("y",(j-Z)/2).call(y),p(ue)?we.select("rect").transition().duration(ue.duration).ease(ue.easing).each("end",function(){te&&te()}).each("interrupt",function(){te&&te()}).attr("width",Math.max(0,J.c2p(Math.min(B.gauge.axis.range[1],O[0].y)))):we.select("rect").attr("width",typeof O[0].y=="number"?Math.max(0,J.c2p(Math.min(B.gauge.axis.range[1],O[0].y))):0),we.exit().remove();var _e=O.filter(function(){return B.gauge.threshold.value||B.gauge.threshold.value===0}),ke=z.selectAll("g.threshold-bullet").data(_e);ke.enter().append("g").classed("threshold-bullet",!0).append("line"),ke.select("line").attr("x1",J.c2p(B.gauge.threshold.value)).attr("x2",J.c2p(B.gauge.threshold.value)).attr("y1",(1-B.gauge.threshold.thickness)/2*j).attr("y2",(1-(1-B.gauge.threshold.thickness)/2)*j).call(h.stroke,B.gauge.threshold.line.color).style("stroke-width",B.gauge.threshold.line.width),ke.exit().remove();var Ne=z.selectAll("g.gauge-outline").data([$]);Ne.enter().append("g").classed("gauge-outline",!0).append("rect"),Ne.select("rect").call(ce).call(y),Ne.exit().remove()}function A(D,V,O,N){var B=O[0].trace,z=N.size,H=N.radius,X=N.innerRadius,$=N.gaugeBg,ne=N.gaugeOutline,q=[z.l+z.w/2,z.t+z.h/2+H/2],ue=N.gauge,te=N.layer,J=N.transitionOpts,ie=N.onComplete,K=Math.PI/2;function ee(qe){var ht=B.gauge.axis.range[0],vt=B.gauge.axis.range[1],pt=(qe-ht)/(vt-ht)*Math.PI-K;return pt<-K?-K:pt>K?K:pt}function le(qe){return d.svg.arc().innerRadius((X+H)/2-qe/2*(H-X)).outerRadius((X+H)/2+qe/2*(H-X)).startAngle(-K)}function j(qe){qe.attr("d",function(ht){return le(ht.thickness).startAngle(ee(ht.range[0])).endAngle(ee(ht.range[1]))()})}var Z,fe,re,ce;ue.enter().append("g").classed("angular",!0),ue.attr("transform",v(q[0],q[1])),te.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),te.selectAll("g.xangularaxistick,path,text").remove(),Z=M(D,B.gauge.axis),Z.type="linear",Z.range=B.gauge.axis.range,Z._id="xangularaxis",Z.ticklabeloverflow="allow",Z.setScale();var xe=function(qe){return(Z.range[0]-qe.x)/(Z.range[1]-Z.range[0])*Math.PI+Math.PI},Te={},we=f.makeLabelFns(Z,0),_e=we.labelStandoff;Te.xFn=function(qe){var ht=xe(qe);return Math.cos(ht)*_e},Te.yFn=function(qe){var ht=xe(qe),vt=Math.sin(ht)>0?.2:1;return-Math.sin(ht)*(_e+qe.fontSize*vt)+Math.abs(Math.cos(ht))*(qe.fontSize*r)},Te.anchorFn=function(qe){var ht=xe(qe),vt=Math.cos(ht);return Math.abs(vt)<.1?"middle":vt>0?"start":"end"},Te.heightFn=function(qe,ht,vt){var pt=xe(qe);return-.5*(1+Math.sin(pt))*vt};var ke=function(qe){return v(q[0]+H*Math.cos(qe),q[1]-H*Math.sin(qe))};re=function(qe){return ke(xe(qe))};var Ne=function(qe){var ht=xe(qe);return ke(ht)+"rotate("+-g(ht)+")"};if(fe=f.calcTicks(Z),ce=f.getTickSigns(Z)[2],Z.visible){ce=Z.ticks==="inside"?-1:1;var Ee=(Z.linewidth||1)/2;f.drawTicks(D,Z,{vals:fe,layer:te,path:"M"+ce*Ee+",0h"+ce*Z.ticklen,transFn:Ne}),f.drawLabels(D,Z,{vals:fe,layer:te,transFn:re,labelFns:Te})}var ze=[$].concat(B.gauge.steps),Ce=ue.selectAll("g.bg-arc").data(ze);Ce.enter().append("g").classed("bg-arc",!0).append("path"),Ce.select("path").call(j).call(y),Ce.exit().remove();var Oe=le(B.gauge.bar.thickness),Le=ue.selectAll("g.value-arc").data([B.gauge.bar]);Le.enter().append("g").classed("value-arc",!0).append("path");var Ge=Le.select("path");p(J)?(Ge.transition().duration(J.duration).ease(J.easing).each("end",function(){ie&&ie()}).each("interrupt",function(){ie&&ie()}).attrTween("d",C(Oe,ee(O[0].lastY),ee(O[0].y))),B._lastValue=O[0].y):Ge.attr("d",typeof O[0].y=="number"?Oe.endAngle(ee(O[0].y)):"M0,0Z"),Ge.call(y),Le.exit().remove(),ze=[];var rt=B.gauge.threshold.value;(rt||rt===0)&&ze.push({range:[rt,rt],color:B.gauge.threshold.color,line:{color:B.gauge.threshold.line.color,width:B.gauge.threshold.line.width},thickness:B.gauge.threshold.thickness});var ot=ue.selectAll("g.threshold-arc").data(ze);ot.enter().append("g").classed("threshold-arc",!0).append("path"),ot.select("path").call(j).call(y),ot.exit().remove();var $e=ue.selectAll("g.gauge-outline").data([ne]);$e.enter().append("g").classed("gauge-outline",!0).append("path"),$e.select("path").call(j).call(y),$e.exit().remove()}function P(D,V,O,N){var B=O[0].trace,z=N.numbersX,H=N.numbersY,X=B.align||"center",$=w[X],ne=N.transitionOpts,q=N.onComplete,ue=E.ensureSingle(V,"g","numbers"),te,J,ie,K=[];B._hasNumber&&K.push("number"),B._hasDelta&&(K.push("delta"),B.delta.position==="left"&&K.reverse());var ee=ue.selectAll("text").data(K);ee.enter().append("text"),ee.attr("text-anchor",function(){return $}).attr("class",function(ke){return ke}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ee.exit().remove();function le(ke,Ne,Ee,ze){if(ke.match("s")&&Ee>=0!=ze>=0&&!Ne(Ee).slice(-1).match(a)&&!Ne(ze).slice(-1).match(a)){var Ce=ke.slice().replace("s","f").replace(/\d+/,function(Le){return parseInt(Le)-1}),Oe=M(D,{tickformat:Ce});return function(Le){return Math.abs(Le)<1?f.tickText(Oe,Le).text:Ne(Le)}}else return Ne}function j(){var ke=M(D,{tickformat:B.number.valueformat},B._range);ke.setScale(),f.prepTicks(ke);var Ne=function(Le){return f.tickText(ke,Le).text},Ee=B.number.suffix,ze=B.number.prefix,Ce=ue.select("text.number");function Oe(){var Le=typeof O[0].y=="number"?ze+Ne(O[0].y)+Ee:"-";Ce.text(Le).call(t.font,B.number.font).call(i.convertToTspans,D)}return p(ne)?Ce.transition().duration(ne.duration).ease(ne.easing).each("end",function(){Oe(),q&&q()}).each("interrupt",function(){Oe(),q&&q()}).attrTween("text",function(){var Le=d.select(this),Ge=n(O[0].lastY,O[0].y);B._lastValue=O[0].y;var rt=le(B.number.valueformat,Ne,O[0].lastY,O[0].y);return function(ot){Le.text(ze+rt(Ge(ot))+Ee)}}):Oe(),te=b(ze+Ne(O[0].y)+Ee,B.number.font,$,D),Ce}function Z(){var ke=M(D,{tickformat:B.delta.valueformat},B._range);ke.setScale(),f.prepTicks(ke);var Ne=function(ot){return f.tickText(ke,ot).text},Ee=B.delta.suffix,ze=B.delta.prefix,Ce=function(ot){var $e=B.delta.relative?ot.relativeDelta:ot.delta;return $e},Oe=function(ot,$e){return ot===0||typeof ot!="number"||isNaN(ot)?"-":(ot>0?B.delta.increasing.symbol:B.delta.decreasing.symbol)+ze+$e(ot)+Ee},Le=function(ot){return ot.delta>=0?B.delta.increasing.color:B.delta.decreasing.color};B._deltaLastValue===void 0&&(B._deltaLastValue=Ce(O[0]));var Ge=ue.select("text.delta");Ge.call(t.font,B.delta.font).call(h.fill,Le({delta:B._deltaLastValue}));function rt(){Ge.text(Oe(Ce(O[0]),Ne)).call(h.fill,Le(O[0])).call(i.convertToTspans,D)}return p(ne)?Ge.transition().duration(ne.duration).ease(ne.easing).tween("text",function(){var ot=d.select(this),$e=Ce(O[0]),qe=B._deltaLastValue,ht=le(B.delta.valueformat,Ne,qe,$e),vt=n(qe,$e);return B._deltaLastValue=$e,function(pt){ot.text(Oe(vt(pt),ht)),ot.call(h.fill,Le({delta:vt(pt)}))}}).each("end",function(){rt(),q&&q()}).each("interrupt",function(){rt(),q&&q()}):rt(),J=b(Oe(Ce(O[0]),Ne),B.delta.font,$,D),Ge}var fe=B.mode+B.align,re;if(B._hasDelta&&(re=Z(),fe+=B.delta.position+B.delta.font.size+B.delta.font.family+B.delta.valueformat,fe+=B.delta.increasing.symbol+B.delta.decreasing.symbol,ie=J),B._hasNumber&&(j(),fe+=B.number.font.size+B.number.font.family+B.number.valueformat+B.number.suffix+B.number.prefix,ie=te),B._hasDelta&&B._hasNumber){var ce=[(te.left+te.right)/2,(te.top+te.bottom)/2],xe=[(J.left+J.right)/2,(J.top+J.bottom)/2],Te,we,_e=.75*B.delta.font.size;B.delta.position==="left"&&(Te=k(B,"deltaPos",0,-1*(te.width*c[B.align]+J.width*(1-c[B.align])+_e),fe,Math.min),we=ce[1]-xe[1],ie={width:te.width+J.width+_e,height:Math.max(te.height,J.height),left:J.left+Te,right:te.right,top:Math.min(te.top,J.top+we),bottom:Math.max(te.bottom,J.bottom+we)}),B.delta.position==="right"&&(Te=k(B,"deltaPos",0,te.width*(1-c[B.align])+J.width*c[B.align]+_e,fe,Math.max),we=ce[1]-xe[1],ie={width:te.width+J.width+_e,height:Math.max(te.height,J.height),left:te.left,right:J.right+Te,top:Math.min(te.top,J.top+we),bottom:Math.max(te.bottom,J.bottom+we)}),B.delta.position==="bottom"&&(Te=null,we=J.height,ie={width:Math.max(te.width,J.width),height:te.height+J.height,left:Math.min(te.left,J.left),right:Math.max(te.right,J.right),top:te.bottom-te.height,bottom:te.bottom+J.height}),B.delta.position==="top"&&(Te=null,we=te.top,ie={width:Math.max(te.width,J.width),height:te.height+J.height,left:Math.min(te.left,J.left),right:Math.max(te.right,J.right),top:te.bottom-te.height-J.height,bottom:te.bottom}),re.attr({dx:Te,dy:we})}(B._hasNumber||B._hasDelta)&&ue.attr("transform",function(){var ke=N.numbersScaler(ie);fe+=ke[2];var Ne=k(B,"numbersScale",1,ke[0],fe,Math.min),Ee;B._scaleNumbers||(Ne=1),B._isAngular?Ee=H-Ne*ie.bottom:Ee=H-Ne*(ie.top+ie.bottom)/2,B._numbersTop=Ne*ie.top+Ee;var ze=ie[X];X==="center"&&(ze=(ie.left+ie.right)/2);var Ce=z-Ne*ze;return Ce=k(B,"numbersTranslate",0,Ce,fe,Math.max),v(Ce,Ee)+T(Ne)})}function y(D){D.each(function(V){h.stroke(d.select(this),V.line.color)}).each(function(V){h.fill(d.select(this),V.color)}).style("stroke-width",function(V){return V.line.width})}function C(D,V,O){return function(){var N=S(V,O);return function(B){return D.endAngle(N(B))()}}}function M(D,V,O){var N=D._fullLayout,B=E.extendFlat({type:"linear",ticks:"outside",range:O,showline:!0},V),z={type:"linear",_id:"x"+V._id},H={letter:"x",font:N.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function X($,ne){return E.coerce(B,z,m,$,ne)}return u(B,z,X,H,N),l(B,z,X,H),z}function s(D,V,O){var N=Math.min(V/D.width,O/D.height);return[N,D,V+"x"+O]}function _(D,V){var O=Math.sqrt(D.width/2*(D.width/2)+D.height*D.height),N=V/O;return[N,D,V]}function b(D,V,O,N){var B=document.createElementNS("http://www.w3.org/2000/svg","text"),z=d.select(B);return z.text(D).attr("x",0).attr("y",0).attr("text-anchor",O).attr("data-unformatted",D).call(i.convertToTspans,N).call(t.font,V),t.bBox(z.node())}function k(D,V,O,N,B,z){var H="_cache"+V;D[H]&&D[H].key===B||(D[H]={key:B,value:O});var X=E.aggNums(z,null,[D[H].value,N],2);return D[H].value=X,X}},50048:function(U,F,e){var d=e(49084),S=e(29736).axisHoverFormat,n=e(21776).Ks,E=e(52948),T=e(45464),v=e(92880).extendFlat,g=e(67824).overrideAll;function r(i){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function t(i){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var o=U.exports=g(v({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:t(),y:t(),z:t()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:n(),xhoverformat:S("x"),yhoverformat:S("y"),zhoverformat:S("z"),valuehoverformat:S("value",1),showlegend:v({},T.showlegend,{dflt:!1})},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:E.opacity,lightposition:E.lightposition,lighting:E.lighting,flatshading:E.flatshading,contour:E.contour,hoverinfo:v({},T.hoverinfo)}),"calc","nested");o.flatshading.dflt=!0,o.lighting.facenormalsepsilon.dflt=0,o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},62624:function(U,F,e){var d=e(47128),S=e(3832).processGrid,n=e(3832).filter;U.exports=function(T,v){v._len=Math.min(v.x.length,v.y.length,v.z.length,v.value.length),v._x=n(v.x,v._len),v._y=n(v.y,v._len),v._z=n(v.z,v._len),v._value=n(v.value,v._len);var g=S(v);v._gridFill=g.fill,v._Xs=g.Xs,v._Ys=g.Ys,v._Zs=g.Zs,v._len=g.len;for(var r=1/0,t=-1/0,o=0;o<v._len;o++){var i=v._value[o];r=Math.min(r,i),t=Math.max(t,i)}v._minValues=r,v._maxValues=t,v._vMin=v.isomin===void 0||v.isomin===null?r:v.isomin,v._vMax=v.isomax===void 0||v.isomax===null?t:v.isomax,d(T,v,{vals:[v._vMin,v._vMax],containerStr:"",cLetter:"c"})}},31460:function(U,F,e){var d=e(67792).gl_mesh3d,S=e(33040).parseColorScale,n=e(3400).isArrayOrTypedArray,E=e(43080),T=e(8932).extractOpts,v=e(52094),g=function(u,l){for(var m=l.length-1;m>0;m--){var h=Math.min(l[m],l[m-1]),w=Math.max(l[m],l[m-1]);if(w>h&&h<u&&u<=w)return{id:m,distRatio:(w-u)/(w-h)}}return{id:0,distRatio:0}};function r(u,l,m){this.scene=u,this.uid=m,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var t=r.prototype;t.handlePick=function(u){if(u.object===this.mesh){var l=u.data.index,m=this.data._meshX[l],h=this.data._meshY[l],w=this.data._meshZ[l],c=this.data._Ys.length,a=this.data._Zs.length,p=g(m,this.data._Xs).id,x=g(h,this.data._Ys).id,A=g(w,this.data._Zs).id,P=u.index=A+a*x+a*c*p;u.traceCoordinate=[this.data._meshX[P],this.data._meshY[P],this.data._meshZ[P],this.data._value[P]];var y=this.data.hovertext||this.data.text;return n(y)&&y[P]!==void 0?u.textLabel=y[P]:y&&(u.textLabel=y),!0}},t.update=function(u){var l=this.scene,m=l.fullSceneLayout;this.data=i(u);function h(x,A,P,y){return A.map(function(C){return x.d2l(C,0,y)*P})}var w=v(h(m.xaxis,u._meshX,l.dataScale[0],u.xcalendar),h(m.yaxis,u._meshY,l.dataScale[1],u.ycalendar),h(m.zaxis,u._meshZ,l.dataScale[2],u.zcalendar)),c=v(u._meshI,u._meshJ,u._meshK),a={positions:w,cells:c,lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,contourEnable:u.contour.show,contourColor:E(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading},p=T(u);a.vertexIntensity=u._meshIntensity,a.vertexIntensityBounds=[p.min,p.max],a.colormap=S(u),this.mesh.update(a)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var o=["xyz","xzy","yxz","yzx","zxy","zyx"];function i(u){u._meshI=[],u._meshJ=[],u._meshK=[];var l=u.surface.show,m=u.spaceframe.show,h=u.surface.fill,w=u.spaceframe.fill,c=!1,a=!1,p=0,x,A,P=u._Xs,y=u._Ys,C=u._Zs,M=P.length,s=y.length,_=C.length,b=o.indexOf(u._gridFill.replace(/-/g,"").replace(/\+/g,"")),k=function(Ze,Ye,Ie){switch(b){case 5:return Ie+_*Ye+_*s*Ze;case 4:return Ie+_*Ze+_*M*Ye;case 3:return Ye+s*Ie+s*_*Ze;case 2:return Ye+s*Ze+s*M*Ie;case 1:return Ze+M*Ie+M*_*Ye;default:return Ze+M*Ye+M*s*Ie}},D=u._minValues,V=u._maxValues,O=u._vMin,N=u._vMax,B,z,H,X;function $(Ze,Ye,Ie){for(var De=X.length,je=A;je<De;je++)if(Ze===B[je]&&Ye===z[je]&&Ie===H[je])return je;return-1}function ne(){A=x}function q(){B=[],z=[],H=[],X=[],x=0,ne()}function ue(Ze,Ye,Ie,De){return B.push(Ze),z.push(Ye),H.push(Ie),X.push(De),x++,x-1}function te(Ze,Ye,Ie){return u._meshI.push(Ze),u._meshJ.push(Ye),u._meshK.push(Ie),p++,p-1}function J(Ze,Ye,Ie){for(var De=[],je=0;je<Ze.length;je++)De[je]=(Ze[je]+Ye[je]+Ie[je])/3;return De}function ie(Ze,Ye,Ie){for(var De=[],je=0;je<Ze.length;je++)De[je]=Ze[je]*(1-Ie)+Ie*Ye[je];return De}var K;function ee(Ze){K=Ze}function le(Ze,Ye){var Ie=Ze[0],De=Ze[1],je=Ze[2],Re=J(Ie,De,je),pe=Math.sqrt(1-K),be=ie(Re,Ie,pe),Ue=ie(Re,De,pe),et=ie(Re,je,pe),st=Ye[0],lt=Ye[1],Gt=Ye[2];return{xyzv:[[Ie,De,Ue],[Ue,be,Ie],[De,je,et],[et,Ue,De],[je,Ie,be],[be,et,je]],abc:[[st,lt,-1],[-1,-1,st],[lt,Gt,-1],[-1,-1,lt],[Gt,st,-1],[-1,-1,Gt]]}}function j(Ze,Ye){return Ze==="all"||Ze===null?!0:Ze.indexOf(Ye)>-1}function Z(Ze,Ye){return Ze===null?Ye:Ze}function fe(Ze,Ye,Ie){ne();var De=[Ye],je=[Ie];if(K>=1)De=[Ye],je=[Ie];else if(K>0){var Re=le(Ye,Ie);De=Re.xyzv,je=Re.abc}for(var pe=0;pe<De.length;pe++){Ye=De[pe],Ie=je[pe];for(var be=[],Ue=0;Ue<3;Ue++){var et=Ye[Ue][0],st=Ye[Ue][1],lt=Ye[Ue][2],Gt=Ye[Ue][3],Zt=Ie[Ue]>-1?Ie[Ue]:$(et,st,lt);Zt>-1?be[Ue]=Zt:be[Ue]=ue(et,st,lt,Z(Ze,Gt))}te(be[0],be[1],be[2])}}function re(Ze,Ye,Ie){var De=function(je,Re,pe){fe(Ze,[Ye[je],Ye[Re],Ye[pe]],[Ie[je],Ie[Re],Ie[pe]])};De(0,1,2),De(2,3,0)}function ce(Ze,Ye,Ie){var De=function(je,Re,pe){fe(Ze,[Ye[je],Ye[Re],Ye[pe]],[Ie[je],Ie[Re],Ie[pe]])};De(0,1,2),De(3,0,1),De(2,3,0),De(1,2,3)}function xe(Ze,Ye,Ie,De){var je=Ze[3];je<Ie&&(je=Ie),je>De&&(je=De);for(var Re=(Ze[3]-je)/(Ze[3]-Ye[3]+1e-9),pe=[],be=0;be<4;be++)pe[be]=(1-Re)*Ze[be]+Re*Ye[be];return pe}function Te(Ze,Ye,Ie){return Ze>=Ye&&Ze<=Ie}function we(Ze){var Ye=.001*(N-O);return Ze>=O-Ye&&Ze<=N+Ye}function _e(Ze){for(var Ye=[],Ie=0;Ie<4;Ie++){var De=Ze[Ie];Ye.push([u._x[De],u._y[De],u._z[De],u._value[De]])}return Ye}var ke=3;function Ne(Ze,Ye,Ie,De,je,Re){Re||(Re=1),Ie=[-1,-1,-1];var pe=!1,be=[Te(Ye[0][3],De,je),Te(Ye[1][3],De,je),Te(Ye[2][3],De,je)];if(!be[0]&&!be[1]&&!be[2])return!1;var Ue=function(st,lt,Gt){return we(lt[0][3])&&we(lt[1][3])&&we(lt[2][3])?(fe(st,lt,Gt),!0):Re<ke?Ne(st,lt,Gt,O,N,++Re):!1};if(be[0]&&be[1]&&be[2])return Ue(Ze,Ye,Ie)||pe;var et=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(st){if(be[st[0]]&&be[st[1]]&&!be[st[2]]){var lt=Ye[st[0]],Gt=Ye[st[1]],Zt=Ye[st[2]],Tt=xe(Zt,lt,De,je),It=xe(Zt,Gt,De,je);pe=Ue(Ze,[It,Tt,lt],[-1,-1,Ie[st[0]]])||pe,pe=Ue(Ze,[lt,Gt,It],[Ie[st[0]],Ie[st[1]],-1])||pe,et=!0}}),et||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(st){if(be[st[0]]&&!be[st[1]]&&!be[st[2]]){var lt=Ye[st[0]],Gt=Ye[st[1]],Zt=Ye[st[2]],Tt=xe(Gt,lt,De,je),It=xe(Zt,lt,De,je);pe=Ue(Ze,[It,Tt,lt],[-1,-1,Ie[st[0]]])||pe,et=!0}}),pe}function Ee(Ze,Ye,Ie,De){var je=!1,Re=_e(Ye),pe=[Te(Re[0][3],Ie,De),Te(Re[1][3],Ie,De),Te(Re[2][3],Ie,De),Te(Re[3][3],Ie,De)];if(!pe[0]&&!pe[1]&&!pe[2]&&!pe[3])return je;if(pe[0]&&pe[1]&&pe[2]&&pe[3])return a&&(je=ce(Ze,Re,Ye)||je),je;var be=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ue){if(pe[Ue[0]]&&pe[Ue[1]]&&pe[Ue[2]]&&!pe[Ue[3]]){var et=Re[Ue[0]],st=Re[Ue[1]],lt=Re[Ue[2]],Gt=Re[Ue[3]];if(a)je=fe(Ze,[et,st,lt],[Ye[Ue[0]],Ye[Ue[1]],Ye[Ue[2]]])||je;else{var Zt=xe(Gt,et,Ie,De),Tt=xe(Gt,st,Ie,De),It=xe(Gt,lt,Ie,De);je=fe(null,[Zt,Tt,It],[-1,-1,-1])||je}be=!0}}),be||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ue){if(pe[Ue[0]]&&pe[Ue[1]]&&!pe[Ue[2]]&&!pe[Ue[3]]){var et=Re[Ue[0]],st=Re[Ue[1]],lt=Re[Ue[2]],Gt=Re[Ue[3]],Zt=xe(lt,et,Ie,De),Tt=xe(lt,st,Ie,De),It=xe(Gt,st,Ie,De),Xt=xe(Gt,et,Ie,De);a?(je=fe(Ze,[et,Xt,Zt],[Ye[Ue[0]],-1,-1])||je,je=fe(Ze,[st,Tt,It],[Ye[Ue[1]],-1,-1])||je):je=re(null,[Zt,Tt,It,Xt],[-1,-1,-1,-1])||je,be=!0}}),be)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ue){if(pe[Ue[0]]&&!pe[Ue[1]]&&!pe[Ue[2]]&&!pe[Ue[3]]){var et=Re[Ue[0]],st=Re[Ue[1]],lt=Re[Ue[2]],Gt=Re[Ue[3]],Zt=xe(st,et,Ie,De),Tt=xe(lt,et,Ie,De),It=xe(Gt,et,Ie,De);a?(je=fe(Ze,[et,Zt,Tt],[Ye[Ue[0]],-1,-1])||je,je=fe(Ze,[et,Tt,It],[Ye[Ue[0]],-1,-1])||je,je=fe(Ze,[et,It,Zt],[Ye[Ue[0]],-1,-1])||je):je=fe(null,[Zt,Tt,It],[-1,-1,-1])||je,be=!0}}),je}function ze(Ze,Ye,Ie,De,je,Re,pe,be,Ue,et,st){var lt=!1;return c&&(j(Ze,"A")&&(lt=Ee(null,[Ye,Ie,De,Re],et,st)||lt),j(Ze,"B")&&(lt=Ee(null,[Ie,De,je,Ue],et,st)||lt),j(Ze,"C")&&(lt=Ee(null,[Ie,Re,pe,Ue],et,st)||lt),j(Ze,"D")&&(lt=Ee(null,[De,Re,be,Ue],et,st)||lt),j(Ze,"E")&&(lt=Ee(null,[Ie,De,Re,Ue],et,st)||lt)),a&&(lt=Ee(Ze,[Ie,De,Re,Ue],et,st)||lt),lt}function Ce(Ze,Ye,Ie,De,je,Re,pe,be){return[be[0]===!0?!0:Ne(Ze,_e([Ye,Ie,De]),[Ye,Ie,De],Re,pe),be[1]===!0?!0:Ne(Ze,_e([De,je,Ye]),[De,je,Ye],Re,pe)]}function Oe(Ze,Ye,Ie,De,je,Re,pe,be,Ue){return be?Ce(Ze,Ye,Ie,je,De,Re,pe,Ue):Ce(Ze,Ie,je,De,Ye,Re,pe,Ue)}function Le(Ze,Ye,Ie,De,je,Re,pe){var be=!1,Ue,et,st,lt,Gt=function(){be=Ne(Ze,[Ue,et,st],[-1,-1,-1],je,Re)||be,be=Ne(Ze,[st,lt,Ue],[-1,-1,-1],je,Re)||be},Zt=pe[0],Tt=pe[1],It=pe[2];return Zt&&(Ue=ie(_e([k(Ye,Ie-0,De-0)])[0],_e([k(Ye-1,Ie-0,De-0)])[0],Zt),et=ie(_e([k(Ye,Ie-0,De-1)])[0],_e([k(Ye-1,Ie-0,De-1)])[0],Zt),st=ie(_e([k(Ye,Ie-1,De-1)])[0],_e([k(Ye-1,Ie-1,De-1)])[0],Zt),lt=ie(_e([k(Ye,Ie-1,De-0)])[0],_e([k(Ye-1,Ie-1,De-0)])[0],Zt),Gt()),Tt&&(Ue=ie(_e([k(Ye-0,Ie,De-0)])[0],_e([k(Ye-0,Ie-1,De-0)])[0],Tt),et=ie(_e([k(Ye-0,Ie,De-1)])[0],_e([k(Ye-0,Ie-1,De-1)])[0],Tt),st=ie(_e([k(Ye-1,Ie,De-1)])[0],_e([k(Ye-1,Ie-1,De-1)])[0],Tt),lt=ie(_e([k(Ye-1,Ie,De-0)])[0],_e([k(Ye-1,Ie-1,De-0)])[0],Tt),Gt()),It&&(Ue=ie(_e([k(Ye-0,Ie-0,De)])[0],_e([k(Ye-0,Ie-0,De-1)])[0],It),et=ie(_e([k(Ye-0,Ie-1,De)])[0],_e([k(Ye-0,Ie-1,De-1)])[0],It),st=ie(_e([k(Ye-1,Ie-1,De)])[0],_e([k(Ye-1,Ie-1,De-1)])[0],It),lt=ie(_e([k(Ye-1,Ie-0,De)])[0],_e([k(Ye-1,Ie-0,De-1)])[0],It),Gt()),be}function Ge(Ze,Ye,Ie,De,je,Re,pe,be,Ue,et,st,lt){var Gt=Ze;return lt?(c&&Ze==="even"&&(Gt=null),ze(Gt,Ye,Ie,De,je,Re,pe,be,Ue,et,st)):(c&&Ze==="odd"&&(Gt=null),ze(Gt,Ue,be,pe,Re,je,De,Ie,Ye,et,st))}function rt(Ze,Ye,Ie,De,je){for(var Re=[],pe=0,be=0;be<Ye.length;be++)for(var Ue=Ye[be],et=1;et<_;et++)for(var st=1;st<s;st++)Re.push(Oe(Ze,k(Ue,st-1,et-1),k(Ue,st-1,et),k(Ue,st,et-1),k(Ue,st,et),Ie,De,(Ue+st+et)%2,je&&je[pe]?je[pe]:[])),pe++;return Re}function ot(Ze,Ye,Ie,De,je){for(var Re=[],pe=0,be=0;be<Ye.length;be++)for(var Ue=Ye[be],et=1;et<M;et++)for(var st=1;st<_;st++)Re.push(Oe(Ze,k(et-1,Ue,st-1),k(et,Ue,st-1),k(et-1,Ue,st),k(et,Ue,st),Ie,De,(et+Ue+st)%2,je&&je[pe]?je[pe]:[])),pe++;return Re}function $e(Ze,Ye,Ie,De,je){for(var Re=[],pe=0,be=0;be<Ye.length;be++)for(var Ue=Ye[be],et=1;et<s;et++)for(var st=1;st<M;st++)Re.push(Oe(Ze,k(st-1,et-1,Ue),k(st-1,et,Ue),k(st,et-1,Ue),k(st,et,Ue),Ie,De,(st+et+Ue)%2,je&&je[pe]?je[pe]:[])),pe++;return Re}function qe(Ze,Ye,Ie){for(var De=1;De<_;De++)for(var je=1;je<s;je++)for(var Re=1;Re<M;Re++)Ge(Ze,k(Re-1,je-1,De-1),k(Re-1,je-1,De),k(Re-1,je,De-1),k(Re-1,je,De),k(Re,je-1,De-1),k(Re,je-1,De),k(Re,je,De-1),k(Re,je,De),Ye,Ie,(Re+je+De)%2)}function ht(Ze,Ye,Ie){a=!0,qe(Ze,Ye,Ie),a=!1}function vt(Ze,Ye,Ie){c=!0,qe(Ze,Ye,Ie),c=!1}function pt(Ze,Ye,Ie,De,je,Re){for(var pe=[],be=0,Ue=0;Ue<Ye.length;Ue++)for(var et=Ye[Ue],st=1;st<_;st++)for(var lt=1;lt<s;lt++)pe.push(Le(Ze,et,lt,st,Ie,De,je[Ue],Re&&Re[be]?Re[be]:[])),be++;return pe}function wt(Ze,Ye,Ie,De,je,Re){for(var pe=[],be=0,Ue=0;Ue<Ye.length;Ue++)for(var et=Ye[Ue],st=1;st<M;st++)for(var lt=1;lt<_;lt++)pe.push(Le(Ze,st,et,lt,Ie,De,je[Ue],Re&&Re[be]?Re[be]:[])),be++;return pe}function Et(Ze,Ye,Ie,De,je,Re){for(var pe=[],be=0,Ue=0;Ue<Ye.length;Ue++)for(var et=Ye[Ue],st=1;st<s;st++)for(var lt=1;lt<M;lt++)pe.push(Le(Ze,lt,st,et,Ie,De,je[Ue],Re&&Re[be]?Re[be]:[])),be++;return pe}function nt(Ze,Ye){for(var Ie=[],De=Ze;De<Ye;De++)Ie.push(De);return Ie}function Fe(){for(var Ze=0;Ze<M;Ze++)for(var Ye=0;Ye<s;Ye++)for(var Ie=0;Ie<_;Ie++){var De=k(Ze,Ye,Ie);ue(u._x[De],u._y[De],u._z[De],u._value[De])}}function We(){q(),Fe();var Ze=null;if(m&&w&&(ee(w),ht(Ze,O,N)),l&&h){ee(h);for(var Ye=u.surface.pattern,Ie=u.surface.count,De=0;De<Ie;De++){var je=Ie===1?.5:De/(Ie-1),Re=(1-je)*O+je*N,pe=Math.abs(Re-D),be=Math.abs(Re-V),Ue=pe>be?[D,Re]:[Re,V];vt(Ye,Ue[0],Ue[1])}}var et=[[Math.min(O,V),Math.max(O,V)],[Math.min(D,N),Math.max(D,N)]];["x","y","z"].forEach(function(st){for(var lt=[],Gt=0;Gt<et.length;Gt++){var Zt=0,Tt=et[Gt][0],It=et[Gt][1],Xt=u.slices[st];if(Xt.show&&Xt.fill){ee(Xt.fill);var gr=[],gt=[],jt=[];if(Xt.locations.length)for(var Qt=0;Qt<Xt.locations.length;Qt++){var mr=g(Xt.locations[Qt],st==="x"?P:st==="y"?y:C);mr.distRatio===0?gr.push(mr.id):mr.id>0&&(gt.push(mr.id),st==="x"?jt.push([mr.distRatio,0,0]):st==="y"?jt.push([0,mr.distRatio,0]):jt.push([0,0,mr.distRatio]))}else st==="x"?gr=nt(1,M-1):st==="y"?gr=nt(1,s-1):gr=nt(1,_-1);gt.length>0&&(st==="x"?lt[Zt]=pt(Ze,gt,Tt,It,jt,lt[Zt]):st==="y"?lt[Zt]=wt(Ze,gt,Tt,It,jt,lt[Zt]):lt[Zt]=Et(Ze,gt,Tt,It,jt,lt[Zt]),Zt++),gr.length>0&&(st==="x"?lt[Zt]=rt(Ze,gr,Tt,It,lt[Zt]):st==="y"?lt[Zt]=ot(Ze,gr,Tt,It,lt[Zt]):lt[Zt]=$e(Ze,gr,Tt,It,lt[Zt]),Zt++)}var or=u.caps[st];or.show&&or.fill&&(ee(or.fill),st==="x"?lt[Zt]=rt(Ze,[0,M-1],Tt,It,lt[Zt]):st==="y"?lt[Zt]=ot(Ze,[0,s-1],Tt,It,lt[Zt]):lt[Zt]=$e(Ze,[0,_-1],Tt,It,lt[Zt]),Zt++)}}),p===0&&q(),u._meshX=B,u._meshY=z,u._meshZ=H,u._meshIntensity=X,u._Xs=P,u._Ys=y,u._Zs=C}return We(),u}function f(u,l){var m=u.glplot.gl,h=d({gl:m}),w=new r(u,h,l.uid);return h._trace=w,w.update(l),u.glplot.add(h),w}U.exports={findNearestOnAxis:g,generateIsoMeshes:i,createIsosurfaceTrace:f}},70548:function(U,F,e){var d=e(3400),S=e(24040),n=e(50048),E=e(27260);function T(g,r,t,o){function i(f,u){return d.coerce(g,r,n,f,u)}v(g,r,t,o,i)}function v(g,r,t,o,i){var f=i("isomin"),u=i("isomax");u!=null&&f!==void 0&&f!==null&&f>u&&(r.isomin=null,r.isomax=null);var l=i("x"),m=i("y"),h=i("z"),w=i("value");if(!l||!l.length||!m||!m.length||!h||!h.length||!w||!w.length){r.visible=!1;return}var c=S.getComponentMethod("calendars","handleTraceDefaults");c(g,r,["x","y","z"],o),i("valuehoverformat"),["x","y","z"].forEach(function(A){i(A+"hoverformat");var P="caps."+A,y=i(P+".show");y&&i(P+".fill");var C="slices."+A,M=i(C+".show");M&&(i(C+".fill"),i(C+".locations"))});var a=i("spaceframe.show");a&&i("spaceframe.fill");var p=i("surface.show");p&&(i("surface.count"),i("surface.fill"),i("surface.pattern"));var x=i("contour.show");x&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(A){i(A)}),E(g,r,o,i,{prefix:"",cLetter:"c"}),r._length=null}U.exports={supplyDefaults:T,supplyIsoDefaults:v}},6296:function(U,F,e){U.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(U,F,e){var d=e(49084),S=e(29736).axisHoverFormat,n=e(21776).Ks,E=e(16716),T=e(45464),v=e(92880).extendFlat;U.exports=v({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"}),xhoverformat:S("x"),yhoverformat:S("y"),zhoverformat:S("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},d("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:E.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:v({},E.contours.x.show,{}),color:E.contours.x.color,width:E.contours.x.width,editType:"calc"},lightposition:{x:v({},E.lightposition.x,{dflt:1e5}),y:v({},E.lightposition.y,{dflt:1e5}),z:v({},E.lightposition.z,{dflt:0}),editType:"calc"},lighting:v({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},E.lighting),hoverinfo:v({},T.hoverinfo,{editType:"calc"}),showlegend:v({},T.showlegend,{dflt:!1})})},1876:function(U,F,e){var d=e(47128);U.exports=function(n,E){E.intensity&&d(n,E,{vals:E.intensity,containerStr:"",cLetter:"c"})}},576:function(U,F,e){var d=e(67792).gl_mesh3d,S=e(67792).delaunay_triangulate,n=e(67792).alpha_shape,E=e(67792).convex_hull,T=e(33040).parseColorScale,v=e(3400).isArrayOrTypedArray,g=e(43080),r=e(8932).extractOpts,t=e(52094);function o(c,a,p){this.scene=c,this.uid=p,this.mesh=a,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var i=o.prototype;i.handlePick=function(c){if(c.object===this.mesh){var a=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[a],this.data.y[a],this.data.z[a]];var p=this.data.hovertext||this.data.text;return v(p)&&p[a]!==void 0?c.textLabel=p[a]:p&&(c.textLabel=p),!0}};function f(c){for(var a=[],p=c.length,x=0;x<p;x++)a[x]=g(c[x]);return a}function u(c,a,p,x){for(var A=[],P=a.length,y=0;y<P;y++)A[y]=c.d2l(a[y],0,x)*p;return A}function l(c){for(var a=[],p=c.length,x=0;x<p;x++)a[x]=Math.round(c[x]);return a}function m(c,a){for(var p=["x","y","z"].indexOf(c),x=[],A=a.length,P=0;P<A;P++)x[P]=[a[P][(p+1)%3],a[P][(p+2)%3]];return S(x)}function h(c,a){for(var p=c.length,x=0;x<p;x++)if(c[x]<=-.5||c[x]>=a-.5)return!1;return!0}i.update=function(c){var a=this.scene,p=a.fullSceneLayout;this.data=c;var x=c.x.length,A=t(u(p.xaxis,c.x,a.dataScale[0],c.xcalendar),u(p.yaxis,c.y,a.dataScale[1],c.ycalendar),u(p.zaxis,c.z,a.dataScale[2],c.zcalendar)),P;if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!h(c.i,x)||!h(c.j,x)||!h(c.k,x))return;P=t(l(c.i),l(c.j),l(c.k))}else c.alphahull===0?P=E(A):c.alphahull>0?P=n(c.alphahull,A):P=m(c.delaunayaxis,A);var y={positions:A,cells:P,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:g(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var C=r(c);this.color="#fff";var M=c.intensitymode;y[M+"Intensity"]=c.intensity,y[M+"IntensityBounds"]=[C.min,C.max],y.colormap=T(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],y.vertexColors=f(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],y.cellColors=f(c.facecolor)):(this.color=c.color,y.meshColor=g(c.color));this.mesh.update(y)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function w(c,a){var p=c.glplot.gl,x=d({gl:p}),A=new o(c,x,a.uid);return x._trace=A,A.update(a),c.glplot.add(x),A}U.exports=w},74212:function(U,F,e){var d=e(24040),S=e(3400),n=e(27260),E=e(52948);U.exports=function(v,g,r,t){function o(m,h){return S.coerce(v,g,E,m,h)}function i(m){var h=m.map(function(w){var c=o(w);return c&&S.isArrayOrTypedArray(c)?c:null});return h.every(function(w){return w&&w.length===h[0].length})&&h}var f=i(["x","y","z"]);if(!f){g.visible=!1;return}if(i(["i","j","k"]),g.i&&(!g.j||!g.k)||g.j&&(!g.k||!g.i)||g.k&&(!g.i||!g.j)){g.visible=!1;return}var u=d.getComponentMethod("calendars","handleTraceDefaults");u(v,g,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(m){o(m)});var l=o("contour.show");l&&(o("contour.color"),o("contour.width")),"intensity"in v?(o("intensity"),o("intensitymode"),n(v,g,t,o,{prefix:"",cLetter:"c"})):(g.showscale=!1,"facecolor"in v?o("facecolor"):"vertexcolor"in v?o("vertexcolor"):o("color",r)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),g._length=null}},7404:function(U,F,e){U.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(U,F,e){var d=e(3400).extendFlat,S=e(52904),n=e(29736).axisHoverFormat,E=e(98192).u,T=e(55756),v=e(48164),g=v.INCREASING.COLOR,r=v.DECREASING.COLOR,t=S.line;function o(i){return{line:{color:d({},t.color,{dflt:i}),width:t.width,dash:E,editType:"style"},editType:"style"}}U.exports={xperiod:S.xperiod,xperiod0:S.xperiod0,xperiodalignment:S.xperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:d({},t.width,{}),dash:d({},E,{}),editType:"style"},increasing:o(g),decreasing:o(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:d({},T.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:S.zorder}},42812:function(U,F,e){var d=e(3400),S=d._,n=e(54460),E=e(1220),T=e(39032).BADNUM;function v(o,i){var f=n.getFromId(o,i.xaxis),u=n.getFromId(o,i.yaxis),l=t(o,f,i),m=i._minDiff;i._minDiff=null;var h=i._origX;i._origX=null;var w=i._xcalc;i._xcalc=null;var c=r(o,i,h,w,u,g);return i._extremes[f._id]=n.findExtremes(f,w,{vpad:m/2}),c.length?(d.extendFlat(c[0].t,{wHover:m/2,tickLen:l}),c):[{t:{empty:!0}}]}function g(o,i,f,u){return{o,h:i,l:f,c:u}}function r(o,i,f,u,l,m){for(var h=l.makeCalcdata(i,"open"),w=l.makeCalcdata(i,"high"),c=l.makeCalcdata(i,"low"),a=l.makeCalcdata(i,"close"),p=d.isArrayOrTypedArray(i.text),x=d.isArrayOrTypedArray(i.hovertext),A=!0,P=null,y=!!i.xperiodalignment,C=[],M=0;M<u.length;M++){var s=u[M],_=h[M],b=w[M],k=c[M],D=a[M];if(s!==T&&_!==T&&b!==T&&k!==T&&D!==T){D===_?P!==null&&D!==P&&(A=D>P):A=D>_,P=D;var V=m(_,b,k,D);V.pos=s,V.yc=(_+D)/2,V.i=M,V.dir=A?"increasing":"decreasing",V.x=V.pos,V.y=[k,b],y&&(V.orig_p=f[M]),p&&(V.tx=i.text[M]),x&&(V.htx=i.hovertext[M]),C.push(V)}else C.push({pos:s,empty:!0})}return i._extremes[l._id]=n.findExtremes(l,d.concat(c,w),{padded:!0}),C.length&&(C[0].t={labels:{open:S(o,"open:")+" ",high:S(o,"high:")+" ",low:S(o,"low:")+" ",close:S(o,"close:")+" "}}),C}function t(o,i,f){var u=f._minDiff;if(!u){var l=o._fullData,m=[];u=1/0;var h;for(h=0;h<l.length;h++){var w=l[h];if(w.type==="ohlc"&&w.visible===!0&&w.xaxis===i._id){m.push(w);var c=i.makeCalcdata(w,"x");w._origX=c;var a=E(f,i,"x",c).vals;w._xcalc=a;var p=d.distinctVals(a).minDiff;p&&isFinite(p)&&(u=Math.min(u,p))}}for(u===1/0&&(u=1),h=0;h<m.length;h++)m[h]._minDiff=u}return u*f.tickwidth}U.exports={calc:v,calcCommon:r}},23860:function(U,F,e){var d=e(3400),S=e(52744),n=e(31147),E=e(20279);U.exports=function(g,r,t,o){function i(u,l){return d.coerce(g,r,E,u,l)}var f=S(g,r,i,o);if(!f){r.visible=!1;return}n(g,r,o,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),i("line.dash"),T(g,r,i,"increasing"),T(g,r,i,"decreasing"),i("text"),i("hovertext"),i("tickwidth"),o._requestRangeslider[r.xaxis]=!0,i("zorder")};function T(v,g,r,t){r(t+".line.color"),r(t+".line.width",g.line.width),r(t+".line.dash",g.line.dash)}},18720:function(U,F,e){var d=e(54460),S=e(3400),n=e(93024),E=e(76308),T=e(3400).fillText,v=e(48164),g={increasing:v.INCREASING.SYMBOL,decreasing:v.DECREASING.SYMBOL};function r(f,u,l,m){var h=f.cd,w=h[0].trace;return w.hoverlabel.split?o(f,u,l,m):i(f,u,l,m)}function t(f,u,l,m){var h=f.cd,w=f.xa,c=h[0].trace,a=h[0].t,p=c.type,x=p==="ohlc"?"l":"min",A=p==="ohlc"?"h":"max",P,y,C=a.bPos||0,M=function(X){return X.pos+C-u},s=a.bdPos||a.tickLen,_=a.wHover,b=Math.min(1,s/Math.abs(w.r2c(w.range[1])-w.r2c(w.range[0])));P=f.maxHoverDistance-b,y=f.maxSpikeDistance-b;function k(X){var $=M(X);return n.inbox($-_,$+_,P)}function D(X){var $=X[x],ne=X[A];return $===ne||n.inbox($-l,ne-l,P)}function V(X){return(k(X)+D(X))/2}var O=n.getDistanceFunction(m,k,D,V);if(n.getClosest(h,O,f),f.index===!1)return null;var N=h[f.index];if(N.empty)return null;var B=N.dir,z=c[B],H=z.line.color;return E.opacity(H)&&z.line.width?f.color=H:f.color=z.fillcolor,f.x0=w.c2p(N.pos+C-s,!0),f.x1=w.c2p(N.pos+C+s,!0),f.xLabelVal=N.orig_p!==void 0?N.orig_p:N.pos,f.spikeDistance=V(N)*y/P,f.xSpike=w.c2p(N.pos,!0),f}function o(f,u,l,m){var h=f.cd,w=f.ya,c=h[0].trace,a=h[0].t,p=[],x=t(f,u,l,m);if(!x)return[];var A=x.index,P=h[A],y=P.hi||c.hoverinfo,C=y.split("+"),M=y==="all",s=M||C.indexOf("y")!==-1;if(!s)return[];for(var _=["high","open","close","low"],b={},k=0;k<_.length;k++){var D=_[k],V=c[D][x.index],O=w.c2p(V,!0),N;V in b?(N=b[V],N.yLabel+="<br>"+a.labels[D]+d.hoverLabelText(w,V,c.yhoverformat)):(N=S.extendFlat({},x),N.y0=N.y1=O,N.yLabelVal=V,N.yLabel=a.labels[D]+d.hoverLabelText(w,V,c.yhoverformat),N.name="",p.push(N),b[V]=N)}return p}function i(f,u,l,m){var h=f.cd,w=f.ya,c=h[0].trace,a=h[0].t,p=t(f,u,l,m);if(!p)return[];var x=p.index,A=h[x],P=p.index=A.i,y=A.dir;function C(V){return a.labels[V]+d.hoverLabelText(w,c[V][P],c.yhoverformat)}var M=A.hi||c.hoverinfo,s=M.split("+"),_=M==="all",b=_||s.indexOf("y")!==-1,k=_||s.indexOf("text")!==-1,D=b?[C("open"),C("high"),C("low"),C("close")+"  "+g[y]]:[];return k&&T(A,c,D),p.extraText=D.join("<br>"),p.y0=p.y1=w.c2p(A.yc,!0),[p]}U.exports={hoverPoints:r,hoverSplit:o,hoverOnPoints:i}},65456:function(U,F,e){U.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(U,F,e){var d=e(24040),S=e(3400);U.exports=function(E,T,v,g){var r=v("x"),t=v("open"),o=v("high"),i=v("low"),f=v("close");v("hoverlabel.split");var u=d.getComponentMethod("calendars","handleTraceDefaults");if(u(E,T,["x"],g),!!(t&&o&&i&&f)){var l=Math.min(t.length,o.length,i.length,f.length);return r&&(l=Math.min(l,S.minRowLength(r))),T._length=l,l}}},36664:function(U,F,e){var d=e(33428),S=e(3400);U.exports=function(E,T,v,g){var r=T.yaxis,t=T.xaxis,o=!!t.rangebreaks;S.makeTraceGroups(g,v,"trace ohlc").each(function(i){var f=d.select(this),u=i[0],l=u.t,m=u.trace;if(m.visible!==!0||l.empty){f.remove();return}var h=l.tickLen,w=f.selectAll("path").data(S.identity);w.enter().append("path"),w.exit().remove(),w.attr("d",function(c){if(c.empty)return"M0,0Z";var a=t.c2p(c.pos-h,!0),p=t.c2p(c.pos+h,!0),x=o?(a+p)/2:t.c2p(c.pos,!0),A=r.c2p(c.o,!0),P=r.c2p(c.h,!0),y=r.c2p(c.l,!0),C=r.c2p(c.c,!0);return"M"+a+","+A+"H"+x+"M"+x+","+P+"V"+y+"M"+p+","+C+"H"+x})})}},97384:function(U){U.exports=function(e,d){var S=e.cd,n=e.xaxis,E=e.yaxis,T=[],v,g=S[0].t.bPos||0;if(d===!1)for(v=0;v<S.length;v++)S[v].selected=0;else for(v=0;v<S.length;v++){var r=S[v];d.contains([n.c2p(r.pos+g),E.c2p(r.yc)],null,r.i,e)?(T.push({pointNumber:r.i,x:n.c2d(r.pos),y:E.c2d(r.yc)}),r.selected=1):r.selected=0}return T}},14008:function(U,F,e){var d=e(33428),S=e(43616),n=e(76308);U.exports=function(T,v,g){var r=g||d.select(T).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(t){return t[0].trace.opacity}),r.each(function(t){var o=t[0].trace;d.select(this).selectAll("path").each(function(i){if(!i.empty){var f=o[i.dir].line;d.select(this).style("fill","none").call(n.stroke,f.color).call(S.dashLine,f.dash,f.width).style("opacity",o.selectedpoints&&!i.selected?.3:1)}})})}},72140:function(U,F,e){var d=e(92880).extendFlat,S=e(45464),n=e(25376),E=e(49084),T=e(21776).Ks,v=e(86968).u,g=d({editType:"calc"},E("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:T({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});U.exports={domain:v({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:d({},S.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:T({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:n({editType:"calc"}),tickfont:n({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:g,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(U,F,e){var d=e(84888)._M,S=e(60268),n="parcats";F.name=n,F.plot=function(E,T,v,g){var r=d(E.calcdata,n);if(r.length){var t=r[0];S(E,t,v,g)}},F.clean=function(E,T,v,g){var r=g._has&&g._has("parcats"),t=T._has&&T._has("parcats");r&&!t&&g._paperdiv.selectAll(".parcats").remove()}},69136:function(U,F,e){var d=e(71688).wrap,S=e(94288).hasColorscale,n=e(47128),E=e(68944),T=e(43616),v=e(3400),g=e(38248);U.exports=function(a,p){var x=v.filterVisible(p.dimensions);if(x.length===0)return[];var A=x.map(function(te){var J;if(te.categoryorder==="trace")J=null;else if(te.categoryorder==="array")J=te.categoryarray;else{J=E(te.values);for(var ie=!0,K=0;K<J.length;K++)if(!g(J[K])){ie=!1;break}J.sort(ie?v.sorterAsc:void 0),te.categoryorder==="category descending"&&(J=J.reverse())}return l(te.values,J)}),P,y,C;v.isArrayOrTypedArray(p.counts)?P=p.counts:P=[p.counts],m(x),x.forEach(function(te,J){h(te,A[J])});var M=p.line,s;M?(S(p,"line")&&n(a,p,{vals:p.line.color,containerStr:"line",cLetter:"c"}),s=T.tryColorscale(M)):s=v.identity;function _(te){var J,ie;return v.isArrayOrTypedArray(M.color)?(J=M.color[te%M.color.length],ie=J):J=M.color,{color:s(J),rawColor:ie}}var b=x[0].values.length,k={},D=A.map(function(te){return te.inds});C=0;var V,O;for(V=0;V<b;V++){var N=[];for(O=0;O<D.length;O++)N.push(D[O][V]);y=P[V%P.length],C+=y;var B=_(V),z=N+"-"+B.rawColor;k[z]===void 0&&(k[z]=f(N,B.color,B.rawColor)),u(k[z],V,y)}var H=x.map(function(te,J){return t(J,te._index,te._displayindex,te.label,C)});for(V=0;V<b;V++)for(y=P[V%P.length],O=0;O<H.length;O++){var X=H[O].containerInd,$=A[O].inds[V],ne=H[O].categories;if(ne[$]===void 0){var q=p.dimensions[X]._categoryarray[$],ue=p.dimensions[X]._ticktext[$];ne[$]=o(O,$,q,ue)}i(ne[$],V,y)}return d(r(H,k,C))};function r(c,a,p){var x=c.map(function(A){return A.categories.length}).reduce(function(A,P){return Math.max(A,P)});return{dimensions:c,paths:a,trace:void 0,maxCats:x,count:p}}function t(c,a,p,x,A){return{dimensionInd:c,containerInd:a,displayInd:p,dimensionLabel:x,count:A,categories:[],dragX:null}}function o(c,a,p,x){return{dimensionInd:c,categoryInd:a,categoryValue:p,displayInd:a,categoryLabel:x,valueInds:[],count:0,dragY:null}}function i(c,a,p){c.valueInds.push(a),c.count+=p}function f(c,a,p){return{categoryInds:c,color:a,rawColor:p,valueInds:[],count:0}}function u(c,a,p){c.valueInds.push(a),c.count+=p}function l(c,a){a==null?a=[]:a=a.map(function(s){return s});var p={},x={},A=[];a.forEach(function(s,_){p[s]=0,x[s]=_});for(var P=0;P<c.length;P++){var y=c[P],C;p[y]===void 0?(p[y]=1,C=a.push(y)-1,x[y]=C):(p[y]++,C=x[y]),A.push(C)}var M=a.map(function(s){return p[s]});return{uniqueValues:a,uniqueCounts:M,inds:A}}function m(c){var a=c.map(function(x){return x.displayindex}),p;if(w(a))for(p=0;p<c.length;p++)c[p]._displayindex=c[p].displayindex;else for(p=0;p<c.length;p++)c[p]._displayindex=p}function h(c,a){c._categoryarray=a.uniqueValues,c.ticktext===null||c.ticktext===void 0?c._ticktext=[]:c._ticktext=c.ticktext.slice();for(var p=c._ticktext.length;p<a.uniqueValues.length;p++)c._ticktext.push(a.uniqueValues[p])}function w(c){for(var a=new Array(c.length),p=0;p<c.length;p++){if(c[p]<0||c[p]>=c.length||a[c[p]]!==void 0)return!1;a[c[p]]=!0}return!0}},76671:function(U,F,e){var d=e(3400),S=e(94288).hasColorscale,n=e(27260),E=e(86968).Q,T=e(51272),v=e(72140),g=e(26284),r=e(38116).isTypedArraySpec;function t(i,f,u,l,m){m("line.shape"),m("line.hovertemplate");var h=m("line.color",l.colorway[0]);if(S(i,"line")&&d.isArrayOrTypedArray(h)){if(h.length)return m("line.colorscale"),n(i,f,l,m,{prefix:"line.",cLetter:"c"}),h.length;f.line.color=u}return 1/0}function o(i,f){function u(p,x){return d.coerce(i,f,v.dimensions,p,x)}var l=u("values"),m=u("visible");if(l&&l.length||(m=f.visible=!1),m){u("label"),u("displayindex",f._index);var h=i.categoryarray,w=d.isArrayOrTypedArray(h)&&h.length>0||r(h),c;w&&(c="array");var a=u("categoryorder",c);a==="array"?(u("categoryarray"),u("ticktext")):(delete i.categoryarray,delete i.ticktext),!w&&a==="array"&&(f.categoryorder="trace")}}U.exports=function(f,u,l,m){function h(p,x){return d.coerce(f,u,v,p,x)}var w=T(f,u,{name:"dimensions",handleItemDefaults:o}),c=t(f,u,l,m,h);E(u,m,h),(!Array.isArray(w)||!w.length)&&(u.visible=!1),g(u,w,"values",c),h("hoveron"),h("hovertemplate"),h("arrangement"),h("bundlecolors"),h("sortpaths"),h("counts");var a=m.font;d.coerceFont(h,"labelfont",a,{overrideDflt:{size:Math.round(a.size)}}),d.coerceFont(h,"tickfont",a,{autoShadowDflt:!0,overrideDflt:{size:Math.round(a.size/1.2)}})}},22020:function(U,F,e){U.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(U,F,e){var d=e(33428),S=e(67756).Gz,n=e(36424),E=e(93024),T=e(3400),v=T.strTranslate,g=e(43616),r=e(49760),t=e(72736);function o(K,ee,le,j){var Z=ee._context.staticPlot,fe=K.map(q.bind(0,ee,le)),re=j.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",Z?"none":"all");var ce=re.selectAll("g.trace.parcats").data(fe,i),xe=ce.enter().append("g").attr("class","trace parcats");ce.attr("transform",function(Le){return v(Le.x,Le.y)}),xe.append("g").attr("class","paths");var Te=ce.select("g.paths"),we=Te.selectAll("path.path").data(function(Le){return Le.paths},i);we.attr("fill",function(Le){return Le.model.color});var _e=we.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Le){return Le.model.color}).attr("fill-opacity",0);a(_e),we.attr("d",function(Le){return Le.svgD}),_e.empty()||we.sort(u),we.exit().remove(),we.on("mouseover",l).on("mouseout",m).on("click",c),xe.append("g").attr("class","dimensions");var ke=ce.select("g.dimensions"),Ne=ke.selectAll("g.dimension").data(function(Le){return Le.dimensions},i);Ne.enter().append("g").attr("class","dimension"),Ne.attr("transform",function(Le){return v(Le.x,0)}),Ne.exit().remove();var Ee=Ne.selectAll("g.category").data(function(Le){return Le.categories},i),ze=Ee.enter().append("g").attr("class","category");Ee.attr("transform",function(Le){return v(0,Le.y)}),ze.append("rect").attr("class","catrect").attr("pointer-events","none"),Ee.select("rect.catrect").attr("fill","none").attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}),A(ze);var Ce=Ee.selectAll("rect.bandrect").data(function(Le){return Le.bands},i);Ce.each(function(){T.raiseToTop(this)}),Ce.attr("fill",function(Le){return Le.color});var Oe=Ce.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Le){return Le.color}).attr("fill-opacity",0);Ce.attr("fill",function(Le){return Le.color}).attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}).attr("y",function(Le){return Le.y}).attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":Le.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(Oe),Ce.exit().remove(),ze.append("text").attr("class","catlabel").attr("pointer-events","none"),Ee.select("text.catlabel").attr("text-anchor",function(Le){return f(Le)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(Le){return f(Le)?Le.width+5:-5}).attr("y",function(Le){return Le.height/2}).text(function(Le){return Le.model.categoryLabel}).each(function(Le){g.font(d.select(this),Le.parcatsViewModel.categorylabelfont),t.convertToTspans(d.select(this),ee)}),ze.append("text").attr("class","dimlabel"),Ee.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Le){return Le.width/2}).attr("y",-5).text(function(Le,Ge){return Ge===0?Le.parcatsViewModel.model.dimensions[Le.model.dimensionInd].dimensionLabel:null}).each(function(Le){g.font(d.select(this),Le.parcatsViewModel.labelfont)}),Ee.selectAll("rect.bandrect").on("mouseover",O).on("mouseout",N),Ee.exit().remove(),Ne.call(d.behavior.drag().origin(function(Le){return{x:Le.x,y:0}}).on("dragstart",B).on("drag",z).on("dragend",H)),ce.each(function(Le){Le.traceSelection=d.select(this),Le.pathSelection=d.select(this).selectAll("g.paths").selectAll("path.path"),Le.dimensionSelection=d.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ce.exit().remove()}U.exports=function(K,ee,le,j){o(le,K,j,ee)};function i(K){return K.key}function f(K){var ee=K.parcatsViewModel.dimensions.length,le=K.parcatsViewModel.dimensions[ee-1].model.dimensionInd;return K.model.dimensionInd===le}function u(K,ee){return K.model.rawColor>ee.model.rawColor?1:K.model.rawColor<ee.model.rawColor?-1:0}function l(K){if(!K.parcatsViewModel.dragDimension&&K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){T.raiseToTop(this),p(d.select(this));var ee=h(K),le=w(K);if(K.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ee,event:d.event,constraints:le}),K.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var j=d.mouse(this)[0],Z=K.parcatsViewModel.graphDiv,fe=K.parcatsViewModel.trace,re=Z._fullLayout,ce=re._paperdiv.node().getBoundingClientRect(),xe=K.parcatsViewModel.graphDiv.getBoundingClientRect(),Te,we,_e;for(_e=0;_e<K.leftXs.length-1;_e++)if(K.leftXs[_e]+K.dimWidths[_e]-2<=j&&j<=K.leftXs[_e+1]+2){var ke=K.parcatsViewModel.dimensions[_e],Ne=K.parcatsViewModel.dimensions[_e+1];Te=(ke.x+ke.width+Ne.x)/2,we=(K.topYs[_e]+K.topYs[_e+1]+K.height)/2;break}var Ee=K.parcatsViewModel.x+Te,ze=K.parcatsViewModel.y+we,Ce=r.mostReadable(K.model.color,["black","white"]),Oe=K.model.count,Le=Oe/K.parcatsViewModel.model.count,Ge={countLabel:Oe,probabilityLabel:Le.toFixed(3)},rt=[];K.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&rt.push(["Count:",Ge.countLabel].join(" ")),K.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&rt.push(["P:",Ge.probabilityLabel].join(" "));var ot=rt.join("<br>"),$e=d.mouse(Z)[0];E.loneHover({trace:fe,x:Ee-ce.left+xe.left,y:ze-ce.top+xe.top,text:ot,color:K.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ce,idealAlign:$e<Ee?"right":"left",hovertemplate:(fe.line||{}).hovertemplate,hovertemplateLabels:Ge,eventData:[{data:fe._input,fullData:fe,count:Oe,probability:Le}]},{container:re._hoverlayer.node(),outerContainer:re._paper.node(),gd:Z})}}}function m(K){if(!K.parcatsViewModel.dragDimension&&(a(d.select(this)),E.loneUnhover(K.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),K.parcatsViewModel.pathSelection.sort(u),K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ee=h(K),le=w(K);K.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ee,event:d.event,constraints:le})}}function h(K){for(var ee=[],le=X(K.parcatsViewModel),j=0;j<K.model.valueInds.length;j++){var Z=K.model.valueInds[j];ee.push({curveNumber:le,pointNumber:Z})}return ee}function w(K){for(var ee={},le=K.parcatsViewModel.model.dimensions,j=0;j<le.length;j++){var Z=le[j],fe=Z.categories[K.model.categoryInds[j]];ee[Z.containerInd]=fe.categoryValue}return K.model.rawColor!==void 0&&(ee.color=K.model.rawColor),ee}function c(K){if(K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=h(K),le=w(K);K.parcatsViewModel.graphDiv.emit("plotly_click",{points:ee,event:d.event,constraints:le})}}function a(K){K.attr("fill",function(ee){return ee.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function p(K){K.attr("fill-opacity",.8).attr("stroke",function(ee){return r.mostReadable(ee.model.color,["black","white"])}).attr("stroke-width",.3)}function x(K){K.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function A(K){K.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function P(K){K.attr("stroke","black").attr("stroke-width",1.5)}function y(K){K.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function C(K){var ee=K.parcatsViewModel.pathSelection,le=K.categoryViewModel.model.dimensionInd,j=K.categoryViewModel.model.categoryInd;return ee.filter(function(Z){return Z.model.categoryInds[le]===j&&Z.model.color===K.color})}function M(K){var ee=d.select(K.parentNode).selectAll("rect.bandrect");ee.each(function(le){var j=C(le);p(j),j.each(function(){T.raiseToTop(this)})}),x(d.select(K.parentNode))}function s(K){var ee=d.select(K).datum(),le=C(ee);p(le),le.each(function(){T.raiseToTop(this)}),d.select(K.parentNode).selectAll("rect.bandrect").filter(function(j){return j.color===ee.color}).each(function(){T.raiseToTop(this),P(d.select(this))})}function _(K,ee,le){var j=d.select(K).datum(),Z=j.categoryViewModel.model,fe=j.parcatsViewModel.graphDiv,re=d.select(K.parentNode).selectAll("rect.bandrect"),ce=[];re.each(function(Te){var we=C(Te);we.each(function(_e){Array.prototype.push.apply(ce,h(_e))})});var xe={};xe[Z.dimensionInd]=Z.categoryValue,fe.emit(ee,{points:ce,event:le,constraints:xe})}function b(K,ee,le){var j=d.select(K).datum(),Z=j.categoryViewModel.model,fe=j.parcatsViewModel.graphDiv,re=C(j),ce=[];re.each(function(Te){Array.prototype.push.apply(ce,h(Te))});var xe={};xe[Z.dimensionInd]=Z.categoryValue,j.rawColor!==void 0&&(xe.color=j.rawColor),fe.emit(ee,{points:ce,event:le,constraints:xe})}function k(K,ee,le){K._fullLayout._calcInverseTransform(K);var j=K._fullLayout._invScaleX,Z=K._fullLayout._invScaleY,fe=d.select(le.parentNode).select("rect.catrect"),re=fe.node().getBoundingClientRect(),ce=fe.datum(),xe=ce.parcatsViewModel,Te=xe.model.dimensions[ce.model.dimensionInd],we=xe.trace,_e=re.top+re.height/2,ke,Ne;xe.dimensions.length>1&&Te.displayInd===xe.dimensions.length-1?(ke=re.left,Ne="left"):(ke=re.left+re.width,Ne="right");var Ee=ce.model.count,ze=ce.model.categoryLabel,Ce=Ee/ce.parcatsViewModel.model.count,Oe={countLabel:Ee,categoryLabel:ze,probabilityLabel:Ce.toFixed(3)},Le=[];ce.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Le.push(["Count:",Oe.countLabel].join(" ")),ce.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Le.push(["P("+Oe.categoryLabel+"):",Oe.probabilityLabel].join(" "));var Ge=Le.join("<br>");return{trace:we,x:j*(ke-ee.left),y:Z*(_e-ee.top),text:Ge,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Ne,hovertemplate:we.hovertemplate,hovertemplateLabels:Oe,eventData:[{data:we._input,fullData:we,count:Ee,category:ze,probability:Ce}]}}function D(K,ee,le){var j=[];return d.select(le.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Z=this;j.push(k(K,ee,Z))}),j}function V(K,ee,le){K._fullLayout._calcInverseTransform(K);var j=K._fullLayout._invScaleX,Z=K._fullLayout._invScaleY,fe=le.getBoundingClientRect(),re=d.select(le).datum(),ce=re.categoryViewModel,xe=ce.parcatsViewModel,Te=xe.model.dimensions[ce.model.dimensionInd],we=xe.trace,_e=fe.y+fe.height/2,ke,Ne;xe.dimensions.length>1&&Te.displayInd===xe.dimensions.length-1?(ke=fe.left,Ne="left"):(ke=fe.left+fe.width,Ne="right");var Ee=ce.model.categoryLabel,ze=re.parcatsViewModel.model.count,Ce=0;re.categoryViewModel.bands.forEach(function(pt){pt.color===re.color&&(Ce+=pt.count)});var Oe=ce.model.count,Le=0;xe.pathSelection.each(function(pt){pt.model.color===re.color&&(Le+=pt.model.count)});var Ge=Ce/ze,rt=Ce/Le,ot=Ce/Oe,$e={countLabel:Ce,categoryLabel:Ee,probabilityLabel:Ge.toFixed(3)},qe=[];ce.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&qe.push(["Count:",$e.countLabel].join(" ")),ce.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(qe.push("P(color  "+Ee+"): "+$e.probabilityLabel),qe.push("P("+Ee+" | color): "+rt.toFixed(3)),qe.push("P(color | "+Ee+"): "+ot.toFixed(3)));var ht=qe.join("<br>"),vt=r.mostReadable(re.color,["black","white"]);return{trace:we,x:j*(ke-ee.left),y:Z*(_e-ee.top),text:ht,color:re.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:vt,fontSize:10,idealAlign:Ne,hovertemplate:we.hovertemplate,hovertemplateLabels:$e,eventData:[{data:we._input,fullData:we,category:Ee,count:ze,probability:Ge,categorycount:Oe,colorcount:Le,bandcolorcount:Ce}]}}function O(K){if(!K.parcatsViewModel.dragDimension&&K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=d.mouse(this)[1];if(ee<-1)return;var le=K.parcatsViewModel.graphDiv,j=le._fullLayout,Z=j._paperdiv.node().getBoundingClientRect(),fe=K.parcatsViewModel.hoveron,re=this;if(fe==="color"?(s(re),b(re,"plotly_hover",d.event)):(M(re),_(re,"plotly_hover",d.event)),K.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ce;fe==="category"?ce=k(le,Z,re):fe==="color"?ce=V(le,Z,re):fe==="dimension"&&(ce=D(le,Z,re)),ce&&E.loneHover(ce,{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:le})}}}function N(K){var ee=K.parcatsViewModel;if(!ee.dragDimension&&(a(ee.pathSelection),A(ee.dimensionSelection.selectAll("g.category")),y(ee.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),E.loneUnhover(ee.graphDiv._fullLayout._hoverlayer.node()),ee.pathSelection.sort(u),ee.hoverinfoItems.indexOf("skip")===-1)){var le=K.parcatsViewModel.hoveron,j=this;le==="color"?b(j,"plotly_unhover",d.event):_(j,"plotly_unhover",d.event)}}function B(K){K.parcatsViewModel.arrangement!=="fixed"&&(K.dragDimensionDisplayInd=K.model.displayInd,K.initialDragDimensionDisplayInds=K.parcatsViewModel.model.dimensions.map(function(ee){return ee.displayInd}),K.dragHasMoved=!1,K.dragCategoryDisplayInd=null,d.select(this).selectAll("g.category").select("rect.catrect").each(function(ee){var le=d.mouse(this)[0],j=d.mouse(this)[1];-2<=le&&le<=ee.width+2&&-2<=j&&j<=ee.height+2&&(K.dragCategoryDisplayInd=ee.model.displayInd,K.initialDragCategoryDisplayInds=K.model.categories.map(function(Z){return Z.displayInd}),ee.model.dragY=ee.y,T.raiseToTop(this.parentNode),d.select(this.parentNode).selectAll("rect.bandrect").each(function(Z){Z.y<j&&j<=Z.y+Z.height&&(K.potentialClickBand=this)}))}),K.parcatsViewModel.dragDimension=K,E.loneUnhover(K.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function z(K){if(K.parcatsViewModel.arrangement!=="fixed"&&(K.dragHasMoved=!0,K.dragDimensionDisplayInd!==null)){var ee=K.dragDimensionDisplayInd,le=ee-1,j=ee+1,Z=K.parcatsViewModel.dimensions[ee];if(K.dragCategoryDisplayInd!==null){var fe=Z.categories[K.dragCategoryDisplayInd];fe.model.dragY+=d.event.dy;var re=fe.model.dragY,ce=fe.model.displayInd,xe=Z.categories,Te=xe[ce-1],we=xe[ce+1];Te!==void 0&&re<Te.y+Te.height/2&&(fe.model.displayInd=Te.model.displayInd,Te.model.displayInd=ce),we!==void 0&&re+fe.height>we.y+we.height/2&&(fe.model.displayInd=we.model.displayInd,we.model.displayInd=ce),K.dragCategoryDisplayInd=fe.model.displayInd}if(K.dragCategoryDisplayInd===null||K.parcatsViewModel.arrangement==="freeform"){Z.model.dragX=d.event.x;var _e=K.parcatsViewModel.dimensions[le],ke=K.parcatsViewModel.dimensions[j];_e!==void 0&&Z.model.dragX<_e.x+_e.width&&(Z.model.displayInd=_e.model.displayInd,_e.model.displayInd=ee),ke!==void 0&&Z.model.dragX+Z.width>ke.x&&(Z.model.displayInd=ke.model.displayInd,ke.model.displayInd=K.dragDimensionDisplayInd),K.dragDimensionDisplayInd=Z.model.displayInd}J(K.parcatsViewModel),te(K.parcatsViewModel),ne(K.parcatsViewModel),$(K.parcatsViewModel)}}function H(K){if(K.parcatsViewModel.arrangement!=="fixed"&&K.dragDimensionDisplayInd!==null){d.select(this).selectAll("text").attr("font-weight","normal");var ee={},le=X(K.parcatsViewModel),j=K.parcatsViewModel.model.dimensions.map(function(ke){return ke.displayInd}),Z=K.initialDragDimensionDisplayInds.some(function(ke,Ne){return ke!==j[Ne]});Z&&j.forEach(function(ke,Ne){var Ee=K.parcatsViewModel.model.dimensions[Ne].containerInd;ee["dimensions["+Ee+"].displayindex"]=ke});var fe=!1;if(K.dragCategoryDisplayInd!==null){var re=K.model.categories.map(function(ke){return ke.displayInd});if(fe=K.initialDragCategoryDisplayInds.some(function(ke,Ne){return ke!==re[Ne]}),fe){var ce=K.model.categories.slice().sort(function(ke,Ne){return ke.displayInd-Ne.displayInd}),xe=ce.map(function(ke){return ke.categoryValue}),Te=ce.map(function(ke){return ke.categoryLabel});ee["dimensions["+K.model.containerInd+"].categoryarray"]=[xe],ee["dimensions["+K.model.containerInd+"].ticktext"]=[Te],ee["dimensions["+K.model.containerInd+"].categoryorder"]="array"}}if(K.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!K.dragHasMoved&&K.potentialClickBand&&(K.parcatsViewModel.hoveron==="color"?b(K.potentialClickBand,"plotly_click",d.event.sourceEvent):_(K.potentialClickBand,"plotly_click",d.event.sourceEvent)),K.model.dragX=null,K.dragCategoryDisplayInd!==null){var we=K.parcatsViewModel.dimensions[K.dragDimensionDisplayInd].categories[K.dragCategoryDisplayInd];we.model.dragY=null,K.dragCategoryDisplayInd=null}K.dragDimensionDisplayInd=null,K.parcatsViewModel.dragDimension=null,K.dragHasMoved=null,K.potentialClickBand=null,J(K.parcatsViewModel),te(K.parcatsViewModel);var _e=d.transition().duration(300).ease("cubic-in-out");_e.each(function(){ne(K.parcatsViewModel,!0),$(K.parcatsViewModel,!0)}).each("end",function(){(Z||fe)&&n.restyle(K.parcatsViewModel.graphDiv,ee,[le])})}}function X(K){for(var ee,le=K.graphDiv._fullData,j=0;j<le.length;j++)if(K.key===le[j].uid){ee=j;break}return ee}function $(K,ee){ee===void 0&&(ee=!1);function le(j){return ee?j.transition():j}K.pathSelection.data(function(j){return j.paths},i),le(K.pathSelection).attr("d",function(j){return j.svgD})}function ne(K,ee){ee===void 0&&(ee=!1);function le(xe){return ee?xe.transition():xe}K.dimensionSelection.data(function(xe){return xe.dimensions},i);var j=K.dimensionSelection.selectAll("g.category").data(function(xe){return xe.categories},i);le(K.dimensionSelection).attr("transform",function(xe){return v(xe.x,0)}),le(j).attr("transform",function(xe){return v(0,xe.y)});var Z=j.select(".dimlabel");Z.text(function(xe,Te){return Te===0?xe.parcatsViewModel.model.dimensions[xe.model.dimensionInd].dimensionLabel:null});var fe=j.select(".catlabel");fe.attr("text-anchor",function(xe){return f(xe)?"start":"end"}).attr("x",function(xe){return f(xe)?xe.width+5:-5}).each(function(xe){var Te,we;f(xe)?(Te=xe.width+5,we="start"):(Te=-5,we="end"),d.select(this).selectAll("tspan").attr("x",Te).attr("text-anchor",we)});var re=j.selectAll("rect.bandrect").data(function(xe){return xe.bands},i),ce=re.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(xe){return xe.color}).attr("fill-opacity",0);re.attr("fill",function(xe){return xe.color}).attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}).attr("y",function(xe){return xe.y}),y(ce),re.each(function(){T.raiseToTop(this)}),re.exit().remove()}function q(K,ee,le){var j=le[0],Z=ee.margin||{l:80,r:80,t:100,b:80},fe=j.trace,re=fe.domain,ce=ee.width,xe=ee.height,Te=Math.floor(ce*(re.x[1]-re.x[0])),we=Math.floor(xe*(re.y[1]-re.y[0])),_e=re.x[0]*ce+Z.l,ke=ee.height-re.y[1]*ee.height+Z.t,Ne=fe.line.shape,Ee;fe.hoverinfo==="all"?Ee=["count","probability"]:Ee=(fe.hoverinfo||"").split("+");var ze={trace:fe,key:fe.uid,model:j,x:_e,y:ke,width:Te,height:we,hoveron:fe.hoveron,hoverinfoItems:Ee,arrangement:fe.arrangement,bundlecolors:fe.bundlecolors,sortpaths:fe.sortpaths,labelfont:fe.labelfont,categorylabelfont:fe.tickfont,pathShape:Ne,dragDimension:null,margin:Z,paths:[],dimensions:[],graphDiv:K,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&(J(ze),te(ze)),ze}function ue(K,ee,le,j,Z){var fe=[],re=[],ce,xe;for(xe=0;xe<le.length-1;xe++)ce=S(le[xe]+K[xe],K[xe+1]),fe.push(ce(Z)),re.push(ce(1-Z));var Te="M "+K[0]+","+ee[0];for(Te+="l"+le[0]+",0 ",xe=1;xe<le.length;xe++)Te+="C"+fe[xe-1]+","+ee[xe-1]+" "+re[xe-1]+","+ee[xe]+" "+K[xe]+","+ee[xe],Te+="l"+le[xe]+",0 ";for(Te+="l0,"+j+" ",Te+="l -"+le[le.length-1]+",0 ",xe=le.length-2;xe>=0;xe--)Te+="C"+re[xe]+","+(ee[xe+1]+j)+" "+fe[xe]+","+(ee[xe]+j)+" "+(K[xe]+le[xe])+","+(ee[xe]+j),Te+="l-"+le[xe]+",0 ";return Te+="Z",Te}function te(K){var ee=K.dimensions,le=K.model,j=ee.map(function(nt){return nt.categories.map(function(Fe){return Fe.y})}),Z=K.model.dimensions.map(function(nt){return nt.categories.map(function(Fe){return Fe.displayInd})}),fe=K.model.dimensions.map(function(nt){return nt.displayInd}),re=K.dimensions.map(function(nt){return nt.model.dimensionInd}),ce=ee.map(function(nt){return nt.x}),xe=ee.map(function(nt){return nt.width}),Te=[];for(var we in le.paths)le.paths.hasOwnProperty(we)&&Te.push(le.paths[we]);function _e(nt){var Fe=nt.categoryInds.map(function(Ze,Ye){return Z[Ye][Ze]}),We=re.map(function(Ze){return Fe[Ze]});return We}Te.sort(function(nt,Fe){var We=_e(nt),Ze=_e(Fe);return K.sortpaths==="backward"&&(We.reverse(),Ze.reverse()),We.push(nt.valueInds[0]),Ze.push(Fe.valueInds[0]),K.bundlecolors&&(We.unshift(nt.rawColor),Ze.unshift(Fe.rawColor)),We<Ze?-1:We>Ze?1:0});for(var ke=new Array(Te.length),Ne=ee[0].model.count,Ee=ee[0].categories.map(function(nt){return nt.height}).reduce(function(nt,Fe){return nt+Fe}),ze=0;ze<Te.length;ze++){var Ce=Te[ze],Oe;Ne>0?Oe=Ee*(Ce.count/Ne):Oe=0;for(var Le=new Array(j.length),Ge=0;Ge<Ce.categoryInds.length;Ge++){var rt=Ce.categoryInds[Ge],ot=Z[Ge][rt],$e=fe[Ge];Le[$e]=j[$e][ot],j[$e][ot]+=Oe;var qe=K.dimensions[$e].categories[ot],ht=qe.bands.length,vt=qe.bands[ht-1];if(vt===void 0||Ce.rawColor!==vt.rawColor){var pt=vt===void 0?0:vt.y+vt.height;qe.bands.push({key:pt,color:Ce.color,rawColor:Ce.rawColor,height:Oe,width:qe.width,count:Ce.count,y:pt,categoryViewModel:qe,parcatsViewModel:K})}else{var wt=qe.bands[ht-1];wt.height+=Oe,wt.count+=Ce.count}}var Et;K.pathShape==="hspline"?Et=ue(ce,Le,xe,Oe,.5):Et=ue(ce,Le,xe,Oe,0),ke[ze]={key:Ce.valueInds[0],model:Ce,height:Oe,leftXs:ce,topYs:Le,dimWidths:xe,svgD:Et,parcatsViewModel:K}}K.paths=ke}function J(K){var ee=K.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});ee.sort(function(re,ce){return re.displayInd-ce.displayInd});var le=[];for(var j in ee){var Z=ee[j].dimensionInd,fe=K.model.dimensions[Z];le.push(ie(K,fe))}K.dimensions=le}function ie(K,ee){var le=40,j=16,Z=K.model.dimensions.length,fe=ee.displayInd,re,ce,xe;Z>1?re=(K.width-2*le-j)/(Z-1):re=0,ce=le,xe=ce+re*fe;var Te=[],we=K.model.maxCats,_e=ee.categories.length,ke=8,Ne=ee.count,Ee=K.height-ke*(we-1),ze,Ce,Oe,Le,Ge,rt=(we-_e)*ke/2,ot=ee.categories.map(function($e){return{displayInd:$e.displayInd,categoryInd:$e.categoryInd}});for(ot.sort(function($e,qe){return $e.displayInd-qe.displayInd}),Ge=0;Ge<_e;Ge++)Le=ot[Ge].categoryInd,Ce=ee.categories[Le],Ne>0?ze=Ce.count/Ne*Ee:ze=0,Oe={key:Ce.valueInds[0],model:Ce,width:j,height:ze,y:Ce.dragY!==null?Ce.dragY:rt,bands:[],parcatsViewModel:K},rt=rt+ze+ke,Te.push(Oe);return{key:ee.dimensionInd,x:ee.dragX!==null?ee.dragX:xe,y:0,width:j,model:ee,categories:Te,parcatsViewModel:K,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},60268:function(U,F,e){var d=e(51036);U.exports=function(n,E,T,v){var g=n._fullLayout,r=g._paper,t=g._size;d(n,r,E,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,v)}},82296:function(U,F,e){var d=e(49084),S=e(94724),n=e(25376),E=e(86968).u,T=e(92880).extendFlat,v=e(31780).templatedArray;U.exports={domain:E({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:n({editType:"plot"}),tickfont:n({autoShadowDflt:!0,editType:"plot"}),rangefont:n({editType:"plot"}),dimensions:v("dimension",{label:{valType:"string",editType:"plot"},tickvals:T({},S.tickvals,{editType:"plot"}),ticktext:T({},S.ticktext,{editType:"plot"}),tickformat:T({},S.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:T({editType:"calc"},d("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(U,F,e){var d=e(30140),S=e(33428),n=e(71688).keyFun,E=e(71688).repeat,T=e(3400).sorterAsc,v=e(3400).strTranslate,g=d.bar.snapRatio;function r(H,X){return H*(1-g)+X*g}var t=d.bar.snapClose;function o(H,X){return H*(1-t)+X*t}function i(H,X,$,ne){if(f($,ne))return $;var q=H?-1:1,ue=0,te=X.length-1;if(q<0){var J=ue;ue=te,te=J}for(var ie=X[ue],K=ie,ee=ue;q*ee<q*te;ee+=q){var le=ee+q,j=X[le];if(q*$<q*o(ie,j))return r(ie,K);if(q*$<q*j||le===te)return r(j,ie);K=ie,ie=j}}function f(H,X){for(var $=0;$<X.length;$++)if(H>=X[$][0]&&H<=X[$][1])return!0;return!1}function u(H){H.attr("x",-d.bar.captureWidth/2).attr("width",d.bar.captureWidth)}function l(H){H.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function m(H){if(!H.brush.filterSpecified)return"0,"+H.height;for(var X=h(H.brush.filter.getConsolidated(),H.height),$=[0],ne,q,ue,te=X.length?X[0][0]:null,J=0;J<X.length;J++)ne=X[J],q=ne[1]-ne[0],$.push(te),$.push(q),ue=J+1,ue<X.length&&(te=X[ue][0]-ne[1]);return $.push(H.height),$}function h(H,X){return H.map(function($){return $.map(function(ne){return Math.max(0,ne*X)}).sort(T)})}function w(H,X){var $=d.bar.handleHeight;if(!(X>H[1]+$||X<H[0]-$))return X>=.9*H[1]+.1*H[0]?"n":X<=.9*H[0]+.1*H[1]?"s":"ns"}function c(){S.select(document.body).style("cursor",null)}function a(H){H.attr("stroke-dasharray",m)}function p(H,X){var $=S.select(H).selectAll(".highlight, .highlight-shadow"),ne=X?$.transition().duration(d.bar.snapDuration).each("end",X):$;a(ne)}function x(H,X){var $=H.brush,ne=$.filterSpecified,q=NaN,ue={},te;if(ne){var J=H.height,ie=$.filter.getConsolidated(),K=h(ie,J),ee=NaN,le=NaN,j=NaN;for(te=0;te<=K.length;te++){var Z=K[te];if(Z&&Z[0]<=X&&X<=Z[1]){ee=te;break}else if(le=te?te-1:NaN,Z&&Z[0]>X){j=te;break}}if(q=ee,isNaN(q)&&(isNaN(le)||isNaN(j)?q=isNaN(le)?j:le:q=X-K[le][1]<K[j][0]-X?le:j),!isNaN(q)){var fe=K[q],re=w(fe,X);re&&(ue.interval=ie[q],ue.intervalPix=fe,ue.region=re)}}if(H.ordinal&&!ue.region){var ce=H.unitTickvals,xe=H.unitToPaddedPx.invert(X);for(te=0;te<ce.length;te++){var Te=[ce[Math.max(te-1,0)]*.25+ce[te]*.75,ce[Math.min(te+1,ce.length-1)]*.25+ce[te]*.75];if(xe>=Te[0]&&xe<=Te[1]){ue.clickableOrdinalRange=Te;break}}}return ue}function A(H,X){S.event.sourceEvent.stopPropagation();var $=X.height-S.mouse(H)[1]-2*d.verticalPadding,ne=X.unitToPaddedPx.invert($),q=X.brush,ue=x(X,$),te=ue.interval,J=q.svgBrush;if(J.wasDragged=!1,J.grabbingBar=ue.region==="ns",J.grabbingBar){var ie=te.map(X.unitToPaddedPx);J.grabPoint=$-ie[0]-d.verticalPadding,J.barLength=ie[1]-ie[0]}J.clickableOrdinalRange=ue.clickableOrdinalRange,J.stayingIntervals=X.multiselect&&q.filterSpecified?q.filter.getConsolidated():[],te&&(J.stayingIntervals=J.stayingIntervals.filter(function(K){return K[0]!==te[0]&&K[1]!==te[1]})),J.startExtent=ue.region?te[ue.region==="s"?1:0]:ne,X.parent.inBrushDrag=!0,J.brushStartCallback()}function P(H,X){S.event.sourceEvent.stopPropagation();var $=X.height-S.mouse(H)[1]-2*d.verticalPadding,ne=X.brush.svgBrush;ne.wasDragged=!0,ne._dragging=!0,ne.grabbingBar?ne.newExtent=[$-ne.grabPoint,$+ne.barLength-ne.grabPoint].map(X.unitToPaddedPx.invert):ne.newExtent=[ne.startExtent,X.unitToPaddedPx.invert($)].sort(T),X.brush.filterSpecified=!0,ne.extent=ne.stayingIntervals.concat([ne.newExtent]),ne.brushCallback(X),p(H.parentNode)}function y(H,X){var $=X.brush,ne=$.filter,q=$.svgBrush;q._dragging||(C(H,X),P(H,X),X.brush.svgBrush.wasDragged=!1),q._dragging=!1;var ue=S.event;ue.sourceEvent.stopPropagation();var te=q.grabbingBar;if(q.grabbingBar=!1,q.grabLocation=void 0,X.parent.inBrushDrag=!1,c(),!q.wasDragged){q.wasDragged=void 0,q.clickableOrdinalRange?$.filterSpecified&&X.multiselect?q.extent.push(q.clickableOrdinalRange):(q.extent=[q.clickableOrdinalRange],$.filterSpecified=!0):te?(q.extent=q.stayingIntervals,q.extent.length===0&&D($)):D($),q.brushCallback(X),p(H.parentNode),q.brushEndCallback($.filterSpecified?ne.getConsolidated():[]);return}var J=function(){ne.set(ne.getConsolidated())};if(X.ordinal){var ie=X.unitTickvals;ie[ie.length-1]<ie[0]&&ie.reverse(),q.newExtent=[i(0,ie,q.newExtent[0],q.stayingIntervals),i(1,ie,q.newExtent[1],q.stayingIntervals)];var K=q.newExtent[1]>q.newExtent[0];q.extent=q.stayingIntervals.concat(K?[q.newExtent]:[]),q.extent.length||D($),q.brushCallback(X),K?p(H.parentNode,J):(J(),p(H.parentNode))}else J();q.brushEndCallback($.filterSpecified?ne.getConsolidated():[])}function C(H,X){var $=X.height-S.mouse(H)[1]-2*d.verticalPadding,ne=x(X,$),q="crosshair";ne.clickableOrdinalRange?q="pointer":ne.region&&(q=ne.region+"-resize"),S.select(document.body).style("cursor",q)}function M(H){H.on("mousemove",function(X){S.event.preventDefault(),X.parent.inBrushDrag||C(this,X)}).on("mouseleave",function(X){X.parent.inBrushDrag||c()}).call(S.behavior.drag().on("dragstart",function(X){A(this,X)}).on("drag",function(X){P(this,X)}).on("dragend",function(X){y(this,X)}))}function s(H,X){return H[0]-X[0]}function _(H,X,$){var ne=$._context.staticPlot,q=H.selectAll(".background").data(E);q.enter().append("rect").classed("background",!0).call(u).call(l).style("pointer-events",ne?"none":"auto").attr("transform",v(0,d.verticalPadding)),q.call(M).attr("height",function(J){return J.height-d.verticalPadding});var ue=H.selectAll(".highlight-shadow").data(E);ue.enter().append("line").classed("highlight-shadow",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width+d.bar.strokeWidth).attr("stroke",X).attr("opacity",d.bar.strokeOpacity).attr("stroke-linecap","butt"),ue.attr("y1",function(J){return J.height}).call(a);var te=H.selectAll(".highlight").data(E);te.enter().append("line").classed("highlight",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width-d.bar.strokeWidth).attr("stroke",d.bar.fillColor).attr("opacity",d.bar.fillOpacity).attr("stroke-linecap","butt"),te.attr("y1",function(J){return J.height}).call(a)}function b(H,X,$){var ne=H.selectAll("."+d.cn.axisBrush).data(E,n);ne.enter().append("g").classed(d.cn.axisBrush,!0),_(ne,X,$)}function k(H){return H.svgBrush.extent.map(function(X){return X.slice()})}function D(H){H.filterSpecified=!1,H.svgBrush.extent=[[-1/0,1/0]]}function V(H){return function($){var ne=$.brush,q=k(ne),ue=q.slice();ne.filter.set(ue),H()}}function O(H){for(var X=H.slice(),$=[],ne,q=X.shift();q;){for(ne=q.slice();(q=X.shift())&&q[0]<=ne[1];)ne[1]=Math.max(ne[1],q[1]);$.push(ne)}return $.length===1&&$[0][0]>$[0][1]&&($=[]),$}function N(){var H=[],X,$;return{set:function(ne){H=ne.map(function(q){return q.slice().sort(T)}).sort(s),H.length===1&&H[0][0]===-1/0&&H[0][1]===1/0&&(H=[[0,-1]]),X=O(H),$=H.reduce(function(q,ue){return[Math.min(q[0],ue[0]),Math.max(q[1],ue[1])]},[1/0,-1/0])},get:function(){return H.slice()},getConsolidated:function(){return X},getBounds:function(){return $}}}function B(H,X,$,ne,q,ue){var te=N();return te.set($),{filter:te,filterSpecified:X,svgBrush:{extent:[],brushStartCallback:ne,brushCallback:V(q),brushEndCallback:ue}}}function z(H,X){if(Array.isArray(H[0])?(H=H.map(function(ne){return ne.sort(T)}),X.multiselect?H=O(H.sort(s)):H=[H[0]]):H=[H.sort(T)],X.tickvals){var $=X.tickvals.slice().sort(T);if(H=H.map(function(ne){var q=[i(0,$,ne[0],[]),i(1,$,ne[1],[])];if(q[1]>q[0])return q}).filter(function(ne){return ne}),!H.length)return}return H.length>1?H:H[0]}U.exports={makeBrush:B,ensureAxisBrush:b,cleanRanges:z}},61664:function(U,F,e){U.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(U,F,e){var d=e(33428),S=e(84888)._M,n=e(24196),E=e(9616);F.name="parcoords",F.plot=function(T){var v=S(T.calcdata,"parcoords")[0];v.length&&n(T,v)},F.clean=function(T,v,g,r){var t=r._has&&r._has("parcoords"),o=v._has&&v._has("parcoords");t&&!o&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},F.toSVG=function(T){var v=T._fullLayout._glimages,g=d.select(T).selectAll(".svg-container"),r=g.filter(function(o,i){return i===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function t(){var o=this,i=o.toDataURL("image/png"),f=v.append("svg:image");f.attr({xmlns:E.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:o.style.width,height:o.style.height})}r.each(t),window.setTimeout(function(){d.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(U,F,e){var d=e(3400).isArrayOrTypedArray,S=e(8932),n=e(71688).wrap;U.exports=function(v,g){var r,t;return S.hasColorscale(g,"line")&&d(g.line.color)?(r=g.line.color,t=S.extractOpts(g.line).colorscale,S.calc(v,g,{vals:r,containerStr:"line",cLetter:"c"})):(r=E(g._length),t=[[0,g.line.color],[1,g.line.color]]),n({lineColor:r,cscale:t})};function E(T){for(var v=new Array(T),g=0;g<T;g++)v[g]=.5;return v}},30140:function(U){U.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(U,F,e){var d=e(3400),S=e(94288).hasColorscale,n=e(27260),E=e(86968).Q,T=e(51272),v=e(54460),g=e(82296),r=e(71864),t=e(30140).maxDimensionCount,o=e(26284);function i(u,l,m,h,w){var c=w("line.color",m);if(S(u,"line")&&d.isArrayOrTypedArray(c)){if(c.length)return w("line.colorscale"),n(u,l,h,w,{prefix:"line.",cLetter:"c"}),c.length;l.line.color=m}return 1/0}function f(u,l,m,h){function w(A,P){return d.coerce(u,l,g.dimensions,A,P)}var c=w("values"),a=w("visible");if(c&&c.length||(a=l.visible=!1),a){w("label"),w("tickvals"),w("ticktext"),w("tickformat");var p=w("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:p},v.setConvert(l._ax,h.layout),w("multiselect");var x=w("constraintrange");x&&(l.constraintrange=r.cleanRanges(x,l))}}U.exports=function(l,m,h,w){function c(P,y){return d.coerce(l,m,g,P,y)}var a=l.dimensions;Array.isArray(a)&&a.length>t&&(d.log("parcoords traces support up to "+t+" dimensions at the moment"),a.splice(t));var p=T(l,m,{name:"dimensions",layout:w,handleItemDefaults:f}),x=i(l,m,h,w,c);E(m,w,c),(!Array.isArray(p)||!p.length)&&(m.visible=!1),o(m,p,"values",x);var A=d.extendFlat({},w.font,{size:Math.round(w.font.size/1.2)});d.coerceFont(c,"labelfont",A),d.coerceFont(c,"tickfont",A,{autoShadowDflt:!0}),d.coerceFont(c,"rangefont",A),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(U,F,e){var d=e(3400).isTypedArray;F.convertTypedArray=function(S){return d(S)?Array.prototype.slice.call(S):S},F.isOrdinal=function(S){return!!S.tickvals},F.isVisible=function(S){return S.visible||!("visible"in S)}},29928:function(U,F,e){var d=e(61664);d.plot=e(24196),U.exports=d},51352:function(U,F,e){var d=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),S=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),n=e(30140).maxDimensionCount,E=e(3400),T=1e-6,v=2048,g=new Uint8Array(4),r=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(y){y.read({x:0,y:0,width:1,height:1,data:g})}function i(y,C,M,s,_){var b=y._gl;b.enable(b.SCISSOR_TEST),b.scissor(C,M,s,_),y.clear({color:[0,0,0,0],depth:1})}function f(y,C,M,s,_,b){var k=b.key;function D(V){var O=Math.min(s,_-V*s);V===0&&(window.cancelAnimationFrame(M.currentRafs[k]),delete M.currentRafs[k],i(y,b.scissorX,b.scissorY,b.scissorWidth,b.viewBoxSize[1])),!M.clearOnly&&(b.count=2*O,b.offset=2*V*s,C(b),V*s+O<_&&(M.currentRafs[k]=window.requestAnimationFrame(function(){D(V+1)})),M.drawCompleted=!1)}M.drawCompleted||(o(y),M.drawCompleted=!0),D(0)}function u(y){return Math.max(T,Math.min(1-T,y))}function l(y,C){for(var M=new Array(256),s=0;s<256;s++)M[s]=y(s/255).concat(C);return M}function m(y,C){return(y>>>8*C)%256/255}function h(y,C,M){for(var s=new Array(y*(n+4)),_=0,b=0;b<y;b++){for(var k=0;k<n;k++)s[_++]=k<C.length?C[k].paddedUnitValues[b]:.5;s[_++]=m(b,2),s[_++]=m(b,1),s[_++]=m(b,0),s[_++]=u(M[b])}return s}function w(y,C,M){for(var s=new Array(C*8),_=0,b=0;b<C;b++)for(var k=0;k<2;k++)for(var D=0;D<4;D++){var V=y*4+D,O=M[b*64+V];V===63&&k===0&&(O*=-1),s[_++]=O}return s}function c(y){var C="0"+y;return C.substr(C.length-2)}function a(y){return y<n?"p"+c(y+1)+"_"+c(y+4):"colors"}function p(y,C,M){for(var s=0;s<=n;s+=4)y[a(s)](w(s/4,C,M))}function x(y){for(var C={},M=0;M<=n;M+=4)C[a(M)]=y.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return C}function A(y,C,M,s,_,b,k,D,V,O,N,B,z,H){for(var X=[[],[]],$=0;$<64;$++)X[0][$]=$===_?1:0,X[1][$]=$===b?1:0;k*=H,D*=H,V*=H,O*=H;var ne=y.lines.canvasOverdrag*H,q=y.domain,ue=y.canvasWidth*H,te=y.canvasHeight*H,J=y.pad.l*H,ie=y.pad.b*H,K=y.layoutHeight*H,ee=y.layoutWidth*H,le=y.deselectedLines.color,j=y.deselectedLines.opacity,Z=E.extendFlat({key:N,resolution:[ue,te],viewBoxPos:[k+ne,D],viewBoxSize:[V,O],i0:_,i1:b,dim0A:X[0].slice(0,16),dim0B:X[0].slice(16,32),dim0C:X[0].slice(32,48),dim0D:X[0].slice(48,64),dim1A:X[1].slice(0,16),dim1B:X[1].slice(16,32),dim1C:X[1].slice(32,48),dim1D:X[1].slice(48,64),drwLayer:B,contextColor:[le[0]/255,le[1]/255,le[2]/255,j!=="auto"?le[3]*j:Math.max(1/255,Math.pow(1/y.lines.color.length,1/3))],scissorX:(s===C?0:k+ne)+(J-ne)+ee*q.x[0],scissorWidth:(s===M?ue-k+ne:V+.5)+(s===C?k+ne:0),scissorY:D+ie+K*q.y[0],scissorHeight:O,viewportX:J-ne+ee*q.x[0],viewportY:ie+K*q.y[0],viewportWidth:ue,viewportHeight:te},z);return Z}function P(y){var C=v-1,M=Math.max(0,Math.floor(y[0]*C),0),s=Math.min(C,Math.ceil(y[1]*C),C);return[Math.min(M,s),Math.max(M,s)]}U.exports=function(y,C){var M=C.context,s=C.pick,_=C.regl,b=_._gl,k=b.getParameter(b.ALIASED_LINE_WIDTH_RANGE),D=Math.max(k[0],Math.min(k[1],C.viewModel.plotGlPixelRatio)),V={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,N,B,z,H=x(_),X,$=_.texture(t),ne=[];ue(C);var q=_({profile:!1,blend:{enable:M,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!M,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:_.prop("scissorX"),y:_.prop("scissorY"),width:_.prop("scissorWidth"),height:_.prop("scissorHeight")}},viewport:{x:_.prop("viewportX"),y:_.prop("viewportY"),width:_.prop("viewportWidth"),height:_.prop("viewportHeight")},dither:!1,vert:d,frag:S,primitive:"lines",lineWidth:D,attributes:H,uniforms:{resolution:_.prop("resolution"),viewBoxPos:_.prop("viewBoxPos"),viewBoxSize:_.prop("viewBoxSize"),dim0A:_.prop("dim0A"),dim1A:_.prop("dim1A"),dim0B:_.prop("dim0B"),dim1B:_.prop("dim1B"),dim0C:_.prop("dim0C"),dim1C:_.prop("dim1C"),dim0D:_.prop("dim0D"),dim1D:_.prop("dim1D"),loA:_.prop("loA"),hiA:_.prop("hiA"),loB:_.prop("loB"),hiB:_.prop("hiB"),loC:_.prop("loC"),hiC:_.prop("hiC"),loD:_.prop("loD"),hiD:_.prop("hiD"),palette:$,contextColor:_.prop("contextColor"),maskTexture:_.prop("maskTexture"),drwLayer:_.prop("drwLayer"),maskHeight:_.prop("maskHeight")},offset:_.prop("offset"),count:_.prop("count")});function ue(le){O=le.model,N=le.viewModel,B=N.dimensions.slice(),z=B[0]?B[0].values.length:0;var j=O.lines,Z=s?j.color.map(function(re,ce){return ce/j.color.length}):j.color,fe=h(z,B,Z);p(H,z,fe),!M&&!s&&($=_.texture(E.extendFlat({data:l(O.unitToColor,255)},t)))}function te(le){var j,Z,fe,re=[[],[]];for(fe=0;fe<64;fe++){var ce=!le&&fe<B.length?B[fe].brush.filter.getBounds():[-1/0,1/0];re[0][fe]=ce[0],re[1][fe]=ce[1]}var xe=v*8,Te=new Array(xe);for(j=0;j<xe;j++)Te[j]=255;if(!le)for(j=0;j<B.length;j++){var we=j%8,_e=(j-we)/8,ke=Math.pow(2,we),Ne=B[j],Ee=Ne.brush.filter.get();if(!(Ee.length<2)){var ze=P(Ee[0])[1];for(Z=1;Z<Ee.length;Z++){var Ce=P(Ee[Z]);for(fe=ze+1;fe<Ce[0];fe++)Te[fe*8+_e]&=~ke;ze=Math.max(ze,Ce[1])}}}var Oe={shape:[8,v],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Te};return X?X(Oe):X=_.texture(Oe),{maskTexture:X,maskHeight:v,loA:re[0].slice(0,16),loB:re[0].slice(16,32),loC:re[0].slice(32,48),loD:re[0].slice(48,64),hiA:re[1].slice(0,16),hiB:re[1].slice(16,32),hiC:re[1].slice(32,48),hiD:re[1].slice(48,64)}}function J(le,j,Z){var fe=le.length,re,ce,xe,Te=1/0,we=-1/0;for(re=0;re<fe;re++)le[re].dim0.canvasX<Te&&(Te=le[re].dim0.canvasX,ce=re),le[re].dim1.canvasX>we&&(we=le[re].dim1.canvasX,xe=re);fe===0&&i(_,0,0,O.canvasWidth,O.canvasHeight);var _e=te(M);for(re=0;re<fe;re++){var ke=le[re],Ne=ke.dim0.crossfilterDimensionIndex,Ee=ke.dim1.crossfilterDimensionIndex,ze=ke.canvasX,Ce=ke.canvasY,Oe=ze+ke.panelSizeX,Le=ke.plotGlPixelRatio;if(j||!ne[Ne]||ne[Ne][0]!==ze||ne[Ne][1]!==Oe){ne[Ne]=[ze,Oe];var Ge=A(O,ce,xe,re,Ne,Ee,ze,Ce,ke.panelSizeX,ke.panelSizeY,ke.dim0.crossfilterDimensionIndex,M?0:s?2:1,_e,Le);V.clearOnly=Z;var rt=j?O.lines.blockLineCount:z;f(_,q,V,rt,z,Ge)}}}function ie(le,j){return _.read({x:le,y:j,width:1,height:1,data:r}),r}function K(le,j,Z,fe){var re=new Uint8Array(4*Z*fe);return _.read({x:le,y:j,width:Z,height:fe,data:re}),re}function ee(){y.style["pointer-events"]="none",$.destroy(),X&&X.destroy();for(var le in H)H[le].destroy()}return{render:J,readPixel:ie,readPixels:K,destroy:ee,update:ue}}},26284:function(U){U.exports=function(F,e,d,S){S||(S=1/0);var n,E;for(n=0;n<e.length;n++)E=e[n],E.visible&&(S=Math.min(S,E[d].length));for(S===1/0&&(S=0),F._length=S,n=0;n<e.length;n++)E=e[n],E.visible&&(E._length=S);return S}},36336:function(U,F,e){var d=e(33428),S=e(3400),n=S.isArrayOrTypedArray,E=S.numberFormat,T=e(96824),v=e(54460),g=S.strRotate,r=S.strTranslate,t=e(72736),o=e(43616),i=e(8932),f=e(71688),u=f.keyFun,l=f.repeat,m=f.unwrap,h=e(95724),w=e(30140),c=e(71864),a=e(51352);function p(ne,q,ue){return S.aggNums(ne,null,q,ue)}function x(ne,q){return P(p(Math.min,ne,q),p(Math.max,ne,q))}function A(ne){var q=ne.range;return q?P(q[0],q[1]):x(ne.values,ne._length)}function P(ne,q){return(isNaN(ne)||!isFinite(ne))&&(ne=0),(isNaN(q)||!isFinite(q))&&(q=0),ne===q&&(ne===0?(ne-=1,q+=1):(ne*=.9,q*=1.1)),[ne,q]}function y(ne,q){return q?function(ue,te){var J=q[te];return J??ne(ue)}:ne}function C(ne,q,ue,te,J){var ie=A(ue);return te?d.scale.ordinal().domain(te.map(y(E(ue.tickformat),J))).range(te.map(function(K){var ee=(K-ie[0])/(ie[1]-ie[0]);return ne-q+ee*(2*q-ne)})):d.scale.linear().domain(ie).range([ne-q,q])}function M(ne,q){return d.scale.linear().range([q,ne-q])}function s(ne,q){return d.scale.linear().domain(A(ne)).range([q,1-q])}function _(ne){if(ne.tickvals){var q=A(ne);return d.scale.ordinal().domain(ne.tickvals).range(ne.tickvals.map(function(ue){return(ue-q[0])/(q[1]-q[0])}))}}function b(ne){var q=ne.map(function(ie){return ie[0]}),ue=ne.map(function(ie){var K=T(ie[1]);return d.rgb("rgb("+K[0]+","+K[1]+","+K[2]+")")}),te=function(ie){return function(K){return K[ie]}},J="rgb".split("").map(function(ie){return d.scale.linear().clamp(!0).domain(q).range(ue.map(te(ie)))});return function(ie){return J.map(function(K){return K(ie)})}}function k(ne){return ne.dimensions.some(function(q){return q.brush.filterSpecified})}function D(ne,q,ue){var te=m(q),J=te.trace,ie=h.convertTypedArray(te.lineColor),K=J.line,ee={color:T(J.unselected.line.color),opacity:J.unselected.line.opacity},le=i.extractOpts(K),j=le.reversescale?i.flipScale(te.cscale):te.cscale,Z=J.domain,fe=J.dimensions,re=ne.width,ce=J.labelangle,xe=J.labelside,Te=J.labelfont,we=J.tickfont,_e=J.rangefont,ke=S.extendDeepNoArrays({},K,{color:ie.map(d.scale.linear().domain(A({values:ie,range:[le.min,le.max],_length:J._length}))),blockLineCount:w.blockLineCount,canvasOverdrag:w.overdrag*w.canvasPixelRatio}),Ne=Math.floor(re*(Z.x[1]-Z.x[0])),Ee=Math.floor(ne.height*(Z.y[1]-Z.y[0])),ze=ne.margin||{l:80,r:80,t:100,b:80},Ce=Ne,Oe=Ee;return{key:ue,colCount:fe.filter(h.isVisible).length,dimensions:fe,tickDistance:w.tickDistance,unitToColor:b(j),lines:ke,deselectedLines:ee,labelAngle:ce,labelSide:xe,labelFont:Te,tickFont:we,rangeFont:_e,layoutWidth:re,layoutHeight:ne.height,domain:Z,translateX:Z.x[0]*re,translateY:ne.height-Z.y[1]*ne.height,pad:ze,canvasWidth:Ce*w.canvasPixelRatio+2*ke.canvasOverdrag,canvasHeight:Oe*w.canvasPixelRatio,width:Ce,height:Oe,canvasPixelRatio:w.canvasPixelRatio}}function V(ne,q,ue){var te=ue.width,J=ue.height,ie=ue.dimensions,K=ue.canvasPixelRatio,ee=function(re){return te*re/Math.max(1,ue.colCount-1)},le=w.verticalPadding/J,j=M(J,w.verticalPadding),Z={key:ue.key,xScale:ee,model:ue,inBrushDrag:!1},fe={};return Z.dimensions=ie.filter(h.isVisible).map(function(re,ce){var xe=s(re,le),Te=fe[re.label];fe[re.label]=(Te||0)+1;var we=re.label+(Te?"__"+Te:""),_e=re.constraintrange,ke=_e&&_e.length;ke&&!n(_e[0])&&(_e=[_e]);var Ne=ke?_e.map(function(qe){return qe.map(xe)}):[[-1/0,1/0]],Ee=function(){var qe=Z;qe.focusLayer&&qe.focusLayer.render(qe.panels,!0);var ht=k(qe);!ne.contextShown()&&ht?(qe.contextLayer&&qe.contextLayer.render(qe.panels,!0),ne.contextShown(!0)):ne.contextShown()&&!ht&&(qe.contextLayer&&qe.contextLayer.render(qe.panels,!0,!0),ne.contextShown(!1))},ze=re.values;ze.length>re._length&&(ze=ze.slice(0,re._length));var Ce=re.tickvals,Oe;function Le(qe,ht){return{val:qe,text:Oe[ht]}}function Ge(qe,ht){return qe.val-ht.val}if(n(Ce)&&Ce.length){S.isTypedArray(Ce)&&(Ce=Array.from(Ce)),Oe=re.ticktext,!n(Oe)||!Oe.length?Oe=Ce.map(E(re.tickformat)):Oe.length>Ce.length?Oe=Oe.slice(0,Ce.length):Ce.length>Oe.length&&(Ce=Ce.slice(0,Oe.length));for(var rt=1;rt<Ce.length;rt++)if(Ce[rt]<Ce[rt-1]){for(var ot=Ce.map(Le).sort(Ge),$e=0;$e<Ce.length;$e++)Ce[$e]=ot[$e].val,Oe[$e]=ot[$e].text;break}}else Ce=void 0;return ze=h.convertTypedArray(ze),{key:we,label:re.label,tickFormat:re.tickformat,tickvals:Ce,ticktext:Oe,ordinal:h.isOrdinal(re),multiselect:re.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:re._index,height:J,values:ze,paddedUnitValues:ze.map(xe),unitTickvals:Ce&&Ce.map(xe),xScale:ee,x:ee(ce),canvasX:ee(ce)*K,unitToPaddedPx:j,domainScale:C(J,w.verticalPadding,re,Ce,Oe),ordinalScale:_(re),parent:Z,model:ue,brush:c.makeBrush(ne,ke,Ne,function(){ne.linePickActive(!1)},Ee,function(qe){if(Z.focusLayer.render(Z.panels,!0),Z.pickLayer&&Z.pickLayer.render(Z.panels,!0),ne.linePickActive(!0),q&&q.filterChanged){var ht=xe.invert,vt=qe.map(function(pt){return pt.map(ht).sort(S.sorterAsc)}).sort(function(pt,wt){return pt[0]-wt[0]});q.filterChanged(Z.key,re._index,vt)}})}}),Z}function O(ne){ne.classed(w.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function N(){var ne=!0,q=!1;return{linePickActive:function(ue){return arguments.length?ne=!!ue:ne},contextShown:function(ue){return arguments.length?q=!!ue:q}}}function B(ne,q){var ue=q==="top"?1:-1,te=ne*Math.PI/180,J=Math.sin(te),ie=Math.cos(te);return{dir:ue,dx:J,dy:ie,degrees:ne}}function z(ne,q,ue){for(var te=q.panels||(q.panels=[]),J=ne.data(),ie=0;ie<J.length-1;ie++){var K=te[ie]||(te[ie]={}),ee=J[ie],le=J[ie+1];K.dim0=ee,K.dim1=le,K.canvasX=ee.canvasX,K.panelSizeX=le.canvasX-ee.canvasX,K.panelSizeY=q.model.canvasHeight,K.y=0,K.canvasY=0,K.plotGlPixelRatio=ue}}function H(ne){for(var q=0;q<ne.length;q++)for(var ue=0;ue<ne[q].length;ue++)for(var te=ne[q][ue].trace,J=te.dimensions,ie=0;ie<J.length;ie++){var K=J[ie].values,ee=J[ie]._ax;ee&&(ee.range?ee.range=P(ee.range[0],ee.range[1]):ee.range=x(K,te._length),ee.dtick||(ee.dtick=.01*(Math.abs(ee.range[1]-ee.range[0])||1)),ee.tickformat=J[ie].tickformat,v.calcTicks(ee),ee.cleanRange())}}function X(ne,q){return v.tickText(ne._ax,q,!1).text}function $(ne,q){if(ne.ordinal)return"";var ue=ne.domainScale.domain(),te=ue[q?ue.length-1:0];return X(ne.model.dimensions[ne.visibleIndex],te)}U.exports=function(q,ue,te,J){var ie=q._context.staticPlot,K=q._fullLayout,ee=K._toppaper,le=K._glcontainer,j=q._context.plotGlPixelRatio,Z=q._fullLayout.paper_bgcolor;H(ue);var fe=N(),re=ue.filter(function($e){return m($e).trace.visible}).map(D.bind(0,te)).map(V.bind(0,fe,J));le.each(function($e,qe){return S.extendFlat($e,re[qe])});var ce=le.selectAll(".gl-canvas").each(function($e){$e.viewModel=re[0],$e.viewModel.plotGlPixelRatio=j,$e.viewModel.paperColor=Z,$e.model=$e.viewModel?$e.viewModel.model:null}),xe=null,Te=ce.filter(function($e){return $e.pick});Te.style("pointer-events",ie?"none":"auto").on("mousemove",function($e){if(fe.linePickActive()&&$e.lineLayer&&J&&J.hover){var qe=d.event,ht=this.width,vt=this.height,pt=d.mouse(this),wt=pt[0],Et=pt[1];if(wt<0||Et<0||wt>=ht||Et>=vt)return;var nt=$e.lineLayer.readPixel(wt,vt-1-Et),Fe=nt[3]!==0,We=Fe?nt[2]+256*(nt[1]+256*nt[0]):null,Ze={x:wt,y:Et,clientX:qe.clientX,clientY:qe.clientY,dataIndex:$e.model.key,curveNumber:We};We!==xe&&(Fe?J.hover(Ze):J.unhover&&J.unhover(Ze),xe=We)}}),ce.style("opacity",function($e){return $e.pick?0:1}),ee.style("background","rgba(255, 255, 255, 0)");var we=ee.selectAll("."+w.cn.parcoords).data(re,u);we.exit().remove(),we.enter().append("g").classed(w.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),we.attr("transform",function($e){return r($e.model.translateX,$e.model.translateY)});var _e=we.selectAll("."+w.cn.parcoordsControlView).data(l,u);_e.enter().append("g").classed(w.cn.parcoordsControlView,!0),_e.attr("transform",function($e){return r($e.model.pad.l,$e.model.pad.t)});var ke=_e.selectAll("."+w.cn.yAxis).data(function($e){return $e.dimensions},u);ke.enter().append("g").classed(w.cn.yAxis,!0),_e.each(function($e){z(ke,$e,j)}),ce.each(function($e){if($e.viewModel){!$e.lineLayer||J?$e.lineLayer=a(this,$e):$e.lineLayer.update($e),($e.key||$e.key===0)&&($e.viewModel[$e.key]=$e.lineLayer);var qe=!$e.context||J;$e.lineLayer.render($e.viewModel.panels,qe)}}),ke.attr("transform",function($e){return r($e.xScale($e.xIndex),0)}),ke.call(d.behavior.drag().origin(function($e){return $e}).on("drag",function($e){var qe=$e.parent;fe.linePickActive(!1),$e.x=Math.max(-w.overdrag,Math.min($e.model.width+w.overdrag,d.event.x)),$e.canvasX=$e.x*$e.model.canvasPixelRatio,ke.sort(function(ht,vt){return ht.x-vt.x}).each(function(ht,vt){ht.xIndex=vt,ht.x=$e===ht?ht.x:ht.xScale(ht.xIndex),ht.canvasX=ht.x*ht.model.canvasPixelRatio}),z(ke,qe,j),ke.filter(function(ht){return Math.abs($e.xIndex-ht.xIndex)!==0}).attr("transform",function(ht){return r(ht.xScale(ht.xIndex),0)}),d.select(this).attr("transform",r($e.x,0)),ke.each(function(ht,vt,pt){pt===$e.parent.key&&(qe.dimensions[vt]=ht)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!k(qe)),qe.focusLayer.render&&qe.focusLayer.render(qe.panels)}).on("dragend",function($e){var qe=$e.parent;$e.x=$e.xScale($e.xIndex),$e.canvasX=$e.x*$e.model.canvasPixelRatio,z(ke,qe,j),d.select(this).attr("transform",function(ht){return r(ht.x,0)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!k(qe)),qe.focusLayer&&qe.focusLayer.render(qe.panels),qe.pickLayer&&qe.pickLayer.render(qe.panels,!0),fe.linePickActive(!0),J&&J.axesMoved&&J.axesMoved(qe.key,qe.dimensions.map(function(ht){return ht.crossfilterDimensionIndex}))})),ke.exit().remove();var Ne=ke.selectAll("."+w.cn.axisOverlays).data(l,u);Ne.enter().append("g").classed(w.cn.axisOverlays,!0),Ne.selectAll("."+w.cn.axis).remove();var Ee=Ne.selectAll("."+w.cn.axis).data(l,u);Ee.enter().append("g").classed(w.cn.axis,!0),Ee.each(function($e){var qe=$e.model.height/$e.model.tickDistance,ht=$e.domainScale,vt=ht.domain();d.select(this).call(d.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(qe,$e.tickFormat).tickValues($e.ordinal?vt:null).tickFormat(function(pt){return h.isOrdinal($e)?pt:X($e.model.dimensions[$e.visibleIndex],pt)}).scale(ht)),o.font(Ee.selectAll("text"),$e.model.tickFont)}),Ee.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ee.selectAll("text").style("cursor","default");var ze=Ne.selectAll("."+w.cn.axisHeading).data(l,u);ze.enter().append("g").classed(w.cn.axisHeading,!0);var Ce=ze.selectAll("."+w.cn.axisTitle).data(l,u);Ce.enter().append("text").classed(w.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ie?"none":"auto"),Ce.text(function($e){return $e.label}).each(function($e){var qe=d.select(this);o.font(qe,$e.model.labelFont),t.convertToTspans(qe,q)}).attr("transform",function($e){var qe=B($e.model.labelAngle,$e.model.labelSide),ht=w.axisTitleOffset;return(qe.dir>0?"":r(0,2*ht+$e.model.height))+g(qe.degrees)+r(-ht*qe.dx,-ht*qe.dy)}).attr("text-anchor",function($e){var qe=B($e.model.labelAngle,$e.model.labelSide),ht=Math.abs(qe.dx),vt=Math.abs(qe.dy);return 2*ht>vt?qe.dir*qe.dx<0?"start":"end":"middle"});var Oe=Ne.selectAll("."+w.cn.axisExtent).data(l,u);Oe.enter().append("g").classed(w.cn.axisExtent,!0);var Le=Oe.selectAll("."+w.cn.axisExtentTop).data(l,u);Le.enter().append("g").classed(w.cn.axisExtentTop,!0),Le.attr("transform",r(0,-w.axisExtentOffset));var Ge=Le.selectAll("."+w.cn.axisExtentTopText).data(l,u);Ge.enter().append("text").classed(w.cn.axisExtentTopText,!0).call(O),Ge.text(function($e){return $($e,!0)}).each(function($e){o.font(d.select(this),$e.model.rangeFont)});var rt=Oe.selectAll("."+w.cn.axisExtentBottom).data(l,u);rt.enter().append("g").classed(w.cn.axisExtentBottom,!0),rt.attr("transform",function($e){return r(0,$e.model.height+w.axisExtentOffset)});var ot=rt.selectAll("."+w.cn.axisExtentBottomText).data(l,u);ot.enter().append("text").classed(w.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),ot.text(function($e){return $($e,!1)}).each(function($e){o.font(d.select(this),$e.model.rangeFont)}),c.ensureAxisBrush(Ne,Z,q)}},24196:function(U,F,e){var d=e(36336),S=e(5048),n=e(95724).isVisible,E={};function T(r,t,o){var i=t.indexOf(o),f=r.indexOf(i);return f===-1&&(f+=t.length),f}function v(r,t){return function(i,f){return T(r,t,i)-T(r,t,f)}}var g=U.exports=function(t,o){var i=t._fullLayout,f=S(t,[],E);if(f){var u={},l={},m={},h={},w=i._size;o.forEach(function(A,P){var y=A[0].trace;m[P]=y.index;var C=h[P]=y._fullInput.index;u[P]=t.data[C].dimensions,l[P]=t.data[C].dimensions.slice()});var c=function(A,P,y){var C=l[A][P],M=y.map(function(V){return V.slice()}),s="dimensions["+P+"].constraintrange",_=i._tracePreGUI[t._fullData[m[A]]._fullInput.uid];if(_[s]===void 0){var b=C.constraintrange;_[s]=b||null}var k=t._fullData[m[A]].dimensions[P];M.length?(M.length===1&&(M=M[0]),C.constraintrange=M,k.constraintrange=M.slice(),M=[M]):(delete C.constraintrange,delete k.constraintrange,M=null);var D={};D[s]=M,t.emit("plotly_restyle",[D,[h[A]]])},a=function(A){t.emit("plotly_hover",A)},p=function(A){t.emit("plotly_unhover",A)},x=function(A,P){var y=v(P,l[A].filter(n));u[A].sort(y),l[A].filter(function(C){return!n(C)}).sort(function(C){return l[A].indexOf(C)}).forEach(function(C){u[A].splice(u[A].indexOf(C),1),u[A].splice(l[A].indexOf(C),0,C)}),t.emit("plotly_restyle",[{dimensions:[u[A]]},[h[A]]])};d(t,o,{width:w.w,height:w.h,margin:{t:w.t,r:w.r,b:w.b,l:w.l}},{filterChanged:c,hover:a,unhover:p,axesMoved:x})}};g.reglPrecompiled=E},74996:function(U,F,e){var d=e(45464),S=e(86968).u,n=e(25376),E=e(22548),T=e(21776).Ks,v=e(21776).Gw,g=e(92880).extendFlat,r=e(98192).c,t=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});U.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:E.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:r,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:g({},d.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","percent","text"]}),texttemplate:v({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:g({},t,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:g({},t,{}),outsidetextfont:g({},t,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:g({},t,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:S({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:g({},t,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(U,F,e){var d=e(7316);F.name="pie",F.plot=function(S,n,E,T){d.plotBasePlot(F.name,S,n,E,T)},F.clean=function(S,n,E,T){d.cleanBasePlot(F.name,S,n,E,T)}},45768:function(U,F,e){var d=e(38248),S=e(49760),n=e(76308),E={};function T(t,o){var i=[],f=t._fullLayout,u=f.hiddenlabels||[],l=o.labels,m=o.marker.colors||[],h=o.values,w=o._length,c=o._hasValues&&w,a,p;if(o.dlabel)for(l=new Array(w),a=0;a<w;a++)l[a]=String(o.label0+a*o.dlabel);var x={},A=v(f["_"+o.type+"colormap"]),P=0,y=!1;for(a=0;a<w;a++){var C,M,s;if(c){if(C=h[a],!d(C))continue;C=+C}else C=1;M=l[a],(M===void 0||M==="")&&(M=a),M=String(M);var _=x[M];_===void 0?(x[M]=i.length,s=u.indexOf(M)!==-1,s||(P+=C),i.push({v:C,label:M,color:A(m[a],M),i:a,pts:[a],hidden:s})):(y=!0,p=i[_],p.v+=C,p.pts.push(a),p.hidden||(P+=C),p.color===!1&&m[a]&&(p.color=A(m[a],M)))}i=i.filter(function(k){return k.v>=0});var b=o.type==="funnelarea"?y:o.sort;return b&&i.sort(function(k,D){return D.v-k.v}),i[0]&&(i[0].vTotal=P),i}function v(t){return function(i,f){return!i||(i=S(i),!i.isValid())?!1:(i=n.addOpacity(i,i.getAlpha()),t[f]||(t[f]=i),i)}}function g(t,o){var i=(o||{}).type;i||(i="pie");var f=t._fullLayout,u=t.calcdata,l=f[i+"colorway"],m=f["_"+i+"colormap"];f["extend"+i+"colors"]&&(l=r(l,E));for(var h=0,w=0;w<u.length;w++){var c=u[w],a=c[0].trace.type;if(a===i)for(var p=0;p<c.length;p++){var x=c[p];x.color===!1&&(m[x.label]?x.color=m[x.label]:(m[x.label]=x.color=l[h%l.length],h++))}}}function r(t,o){var i,f=JSON.stringify(t),u=o[f];if(!u){for(u=t.slice(),i=0;i<t.length;i++)u.push(S(t[i]).lighten(20).toHexString());for(i=0;i<t.length;i++)u.push(S(t[i]).darken(20).toHexString());o[f]=u}return u}U.exports={calc:T,crossTraceCalc:g,makePullColorFn:v,generateExtendedColors:r}},74174:function(U,F,e){var d=e(38248),S=e(3400),n=e(74996),E=e(86968).Q,T=e(31508).handleText,v=e(3400).coercePattern;function g(o,i){var f=S.isArrayOrTypedArray(o),u=S.isArrayOrTypedArray(i),l=Math.min(f?o.length:1/0,u?i.length:1/0);if(isFinite(l)||(l=0),l&&u){for(var m,h=0;h<l;h++){var w=i[h];if(d(w)&&w>0){m=!0;break}}m||(l=0)}return{hasLabels:f,hasValues:u,len:l}}function r(o,i,f,u,l){var m=u("marker.line.width");m&&u("marker.line.color",l?void 0:f.paper_bgcolor);var h=u("marker.colors");v(u,"marker.pattern",h),o.marker&&!i.marker.pattern.fgcolor&&(i.marker.pattern.fgcolor=o.marker.colors),i.marker.pattern.bgcolor||(i.marker.pattern.bgcolor=f.paper_bgcolor)}function t(o,i,f,u){function l(_,b){return S.coerce(o,i,n,_,b)}var m=l("labels"),h=l("values"),w=g(m,h),c=w.len;if(i._hasLabels=w.hasLabels,i._hasValues=w.hasValues,!i._hasLabels&&i._hasValues&&(l("label0"),l("dlabel")),!c){i.visible=!1;return}i._length=c,r(o,i,u,l,!0),l("scalegroup");var a=l("text"),p=l("texttemplate"),x;if(p||(x=l("textinfo",S.isArrayOrTypedArray(a)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),p||x&&x!=="none"){var A=l("textposition");T(o,i,u,l,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var P=Array.isArray(A)||A==="auto",y=P||A==="outside";y&&l("automargin"),(A==="inside"||A==="auto"||Array.isArray(A))&&l("insidetextorientation")}else x==="none"&&l("textposition","none");E(i,u,l);var C=l("hole"),M=l("title.text");if(M){var s=l("title.position",C?"middle center":"top center");!C&&s==="middle center"&&(i.title.position="top center"),S.coerceFont(l,"title.font",u.font)}l("sort"),l("direction"),l("rotation"),l("pull")}U.exports={handleLabelsAndValues:g,handleMarkerDefaults:r,supplyDefaults:t}},53644:function(U,F,e){var d=e(10624).appendArrayMultiPointValues;U.exports=function(n,E){var T={curveNumber:E.index,pointNumbers:n.pts,data:E._input,fullData:E,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,bbox:n.bbox,v:n.v};return n.pts.length===1&&(T.pointNumber=T.i=n.pts[0]),d(T,E,n.pts),E.type==="funnelarea"&&(delete T.v,delete T.i),T}},21552:function(U,F,e){var d=e(43616),S=e(76308);U.exports=function(E,T,v,g){var r=v.marker.pattern;r&&r.shape?d.pointStyle(E,v,g,T):S.fill(E,T.color)}},69656:function(U,F,e){var d=e(3400);function S(n){return n.indexOf("e")!==-1?n.replace(/[.]?0+e/,"e"):n.indexOf(".")!==-1?n.replace(/[.]?0+$/,""):n}F.formatPiePercent=function(E,T){var v=S((E*100).toPrecision(3));return d.numSeparate(v,T)+"%"},F.formatPieValue=function(E,T){var v=S(E.toPrecision(10));return d.numSeparate(v,T)},F.getFirstFilled=function(E,T){if(d.isArrayOrTypedArray(E))for(var v=0;v<T.length;v++){var g=E[T[v]];if(g||g===0||g==="")return g}},F.castOption=function(E,T){if(d.isArrayOrTypedArray(E))return F.getFirstFilled(E,T);if(E)return E},F.getRotationAngle=function(n){return(n==="auto"?0:n)*Math.PI/180}},75792:function(U,F,e){U.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(U){U.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(U,F,e){var d=e(3400),S=e(85204);U.exports=function(E,T){function v(g,r){return d.coerce(E,T,S,g,r)}v("hiddenlabels"),v("piecolorway",T.colorway),v("extendpiecolors")}},37820:function(U,F,e){var d=e(33428),S=e(7316),n=e(93024),E=e(76308),T=e(43616),v=e(3400),g=v.strScale,r=v.strTranslate,t=e(72736),o=e(82744),i=o.recordMinTextSize,f=o.clearMinTextSize,u=e(78048).TEXTPAD,l=e(69656),m=e(53644),h=e(3400).isValidTextValue;function w(J,ie){var K=J._context.staticPlot,ee=J._fullLayout,le=ee._size;f("pie",ee),A(ie,J),X(ie,le);var j=v.makeTraceGroups(ee._pielayer,ie,"trace").each(function(Z){var fe=d.select(this),re=Z[0],ce=re.trace;ne(Z),fe.attr("stroke-linejoin","round"),fe.each(function(){var xe=d.select(this).selectAll("g.slice").data(Z);xe.enter().append("g").classed("slice",!0),xe.exit().remove();var Te=[[[],[]],[[],[]]],we=!1;xe.each(function(Le,Ge){if(Le.hidden){d.select(this).selectAll("path,g").remove();return}Le.pointNumber=Le.i,Le.curveNumber=ce.index,Te[Le.pxmid[1]<0?0:1][Le.pxmid[0]<0?0:1].push(Le);var rt=re.cx,ot=re.cy,$e=d.select(this),qe=$e.selectAll("path.surface").data([Le]);if(qe.enter().append("path").classed("surface",!0).style({"pointer-events":K?"none":"all"}),$e.call(a,J,Z),ce.pull){var ht=+l.castOption(ce.pull,Le.pts)||0;ht>0&&(rt+=ht*Le.pxmid[0],ot+=ht*Le.pxmid[1])}Le.cxFinal=rt,Le.cyFinal=ot;function vt(Ze,Ye,Ie,De){var je=De*(Ye[0]-Ze[0]),Re=De*(Ye[1]-Ze[1]);return"a"+De*re.r+","+De*re.r+" 0 "+Le.largeArc+(Ie?" 1 ":" 0 ")+je+","+Re}var pt=ce.hole;if(Le.v===re.vTotal){var wt="M"+(rt+Le.px0[0])+","+(ot+Le.px0[1])+vt(Le.px0,Le.pxmid,!0,1)+vt(Le.pxmid,Le.px0,!0,1)+"Z";pt?qe.attr("d","M"+(rt+pt*Le.px0[0])+","+(ot+pt*Le.px0[1])+vt(Le.px0,Le.pxmid,!1,pt)+vt(Le.pxmid,Le.px0,!1,pt)+"Z"+wt):qe.attr("d",wt)}else{var Et=vt(Le.px0,Le.px1,!0,1);if(pt){var nt=1-pt;qe.attr("d","M"+(rt+pt*Le.px1[0])+","+(ot+pt*Le.px1[1])+vt(Le.px1,Le.px0,!1,pt)+"l"+nt*Le.px0[0]+","+nt*Le.px0[1]+Et+"Z")}else qe.attr("d","M"+rt+","+ot+"l"+Le.px0[0]+","+Le.px0[1]+Et+"Z")}ue(J,Le,re);var Fe=l.castOption(ce.textposition,Le.pts),We=$e.selectAll("g.slicetext").data(Le.text&&Fe!=="none"?[0]:[]);We.enter().append("g").classed("slicetext",!0),We.exit().remove(),We.each(function(){var Ze=v.ensureSingle(d.select(this),"text","",function(Ue){Ue.attr("data-notex",1)}),Ye=v.ensureUniformFontSize(J,Fe==="outside"?p(ce,Le,ee.font):x(ce,Le,ee.font));Ze.text(Le.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(T.font,Ye).call(t.convertToTspans,J);var Ie=T.bBox(Ze.node()),De;if(Fe==="outside")De=D(Ie,Le);else if(De=P(Ie,Le,re),Fe==="auto"&&De.scale<1){var je=v.ensureUniformFontSize(J,ce.outsidetextfont);Ze.call(T.font,je),Ie=T.bBox(Ze.node()),De=D(Ie,Le)}var Re=De.textPosAngle,pe=Re===void 0?Le.pxmid:q(re.r,Re);if(De.targetX=rt+pe[0]*De.rCenter+(De.x||0),De.targetY=ot+pe[1]*De.rCenter+(De.y||0),te(De,Ie),De.outside){var be=De.targetY;Le.yLabelMin=be-Ie.height/2,Le.yLabelMid=be,Le.yLabelMax=be+Ie.height/2,Le.labelExtraX=0,Le.labelExtraY=0,we=!0}De.fontSize=Ye.size,i(ce.type,De,ee),Z[Ge].transform=De,v.setTransormAndDisplay(Ze,De)})});var _e=d.select(this).selectAll("g.titletext").data(ce.title.text?[0]:[]);if(_e.enter().append("g").classed("titletext",!0),_e.exit().remove(),_e.each(function(){var Le=v.ensureSingle(d.select(this),"text","",function(ot){ot.attr("data-notex",1)}),Ge=ce.title.text;ce._meta&&(Ge=v.templateString(Ge,ce._meta)),Le.text(Ge).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(T.font,ce.title.font).call(t.convertToTspans,J);var rt;ce.title.position==="middle center"?rt=V(re):rt=O(re,le),Le.attr("transform",r(rt.x,rt.y)+g(Math.min(1,rt.scale))+r(rt.tx,rt.ty))}),we&&H(Te,ce),c(xe,ce),we&&ce.automargin){var ke=T.bBox(fe.node()),Ne=ce.domain,Ee=le.w*(Ne.x[1]-Ne.x[0]),ze=le.h*(Ne.y[1]-Ne.y[0]),Ce=(.5*Ee-re.r)/le.w,Oe=(.5*ze-re.r)/le.h;S.autoMargin(J,"pie."+ce.uid+".automargin",{xl:Ne.x[0]-Ce,xr:Ne.x[1]+Ce,yb:Ne.y[0]-Oe,yt:Ne.y[1]+Oe,l:Math.max(re.cx-re.r-ke.left,0),r:Math.max(ke.right-(re.cx+re.r),0),b:Math.max(ke.bottom-(re.cy+re.r),0),t:Math.max(re.cy-re.r-ke.top,0),pad:5})}})});setTimeout(function(){j.selectAll("tspan").each(function(){var Z=d.select(this);Z.attr("dy")&&Z.attr("dy",Z.attr("dy"))})},0)}function c(J,ie){J.each(function(K){var ee=d.select(this);if(!K.labelExtraX&&!K.labelExtraY){ee.select("path.textline").remove();return}var le=ee.select("g.slicetext text");K.transform.targetX+=K.labelExtraX,K.transform.targetY+=K.labelExtraY,v.setTransormAndDisplay(le,K.transform);var j=K.cxFinal+K.pxmid[0],Z=K.cyFinal+K.pxmid[1],fe="M"+j+","+Z,re=(K.yLabelMax-K.yLabelMin)*(K.pxmid[0]<0?-1:1)/4;if(K.labelExtraX){var ce=K.labelExtraX*K.pxmid[1]/K.pxmid[0],xe=K.yLabelMid+K.labelExtraY-(K.cyFinal+K.pxmid[1]);Math.abs(ce)>Math.abs(xe)?fe+="l"+xe*K.pxmid[0]/K.pxmid[1]+","+xe+"H"+(j+K.labelExtraX+re):fe+="l"+K.labelExtraX+","+ce+"v"+(xe-ce)+"h"+re}else fe+="V"+(K.yLabelMid+K.labelExtraY)+"h"+re;v.ensureSingle(ee,"path","textline").call(E.stroke,ie.outsidetextfont.color).attr({"stroke-width":Math.min(2,ie.outsidetextfont.size/8),d:fe,fill:"none"})})}function a(J,ie,K){var ee=K[0],le=ee.cx,j=ee.cy,Z=ee.trace,fe=Z.type==="funnelarea";"_hasHoverLabel"in Z||(Z._hasHoverLabel=!1),"_hasHoverEvent"in Z||(Z._hasHoverEvent=!1),J.on("mouseover",function(re){var ce=ie._fullLayout,xe=ie._fullData[Z.index];if(!(ie._dragging||ce.hovermode===!1)){var Te=xe.hoverinfo;if(Array.isArray(Te)&&(Te=n.castHoverinfo({hoverinfo:[l.castOption(Te,re.pts)],_module:Z._module},ce,0)),Te==="all"&&(Te="label+text+value+percent+name"),xe.hovertemplate||Te!=="none"&&Te!=="skip"&&Te){var we=re.rInscribed||0,_e=le+re.pxmid[0]*(1-we),ke=j+re.pxmid[1]*(1-we),Ne=ce.separators,Ee=[];if(Te&&Te.indexOf("label")!==-1&&Ee.push(re.label),re.text=l.castOption(xe.hovertext||xe.text,re.pts),Te&&Te.indexOf("text")!==-1){var ze=re.text;v.isValidTextValue(ze)&&Ee.push(ze)}re.value=re.v,re.valueLabel=l.formatPieValue(re.v,Ne),Te&&Te.indexOf("value")!==-1&&Ee.push(re.valueLabel),re.percent=re.v/ee.vTotal,re.percentLabel=l.formatPiePercent(re.percent,Ne),Te&&Te.indexOf("percent")!==-1&&Ee.push(re.percentLabel);var Ce=xe.hoverlabel,Oe=Ce.font,Le=[];n.loneHover({trace:Z,x0:_e-we*ee.r,x1:_e+we*ee.r,y:ke,_x0:fe?le+re.TL[0]:_e-we*ee.r,_x1:fe?le+re.TR[0]:_e+we*ee.r,_y0:fe?j+re.TL[1]:ke-we*ee.r,_y1:fe?j+re.BL[1]:ke+we*ee.r,text:Ee.join("<br>"),name:xe.hovertemplate||Te.indexOf("name")!==-1?xe.name:void 0,idealAlign:re.pxmid[0]<0?"left":"right",color:l.castOption(Ce.bgcolor,re.pts)||re.color,borderColor:l.castOption(Ce.bordercolor,re.pts),fontFamily:l.castOption(Oe.family,re.pts),fontSize:l.castOption(Oe.size,re.pts),fontColor:l.castOption(Oe.color,re.pts),nameLength:l.castOption(Ce.namelength,re.pts),textAlign:l.castOption(Ce.align,re.pts),hovertemplate:l.castOption(xe.hovertemplate,re.pts),hovertemplateLabels:re,eventData:[m(re,xe)]},{container:ce._hoverlayer.node(),outerContainer:ce._paper.node(),gd:ie,inOut_bbox:Le}),re.bbox=Le[0],Z._hasHoverLabel=!0}Z._hasHoverEvent=!0,ie.emit("plotly_hover",{points:[m(re,xe)],event:d.event})}}),J.on("mouseout",function(re){var ce=ie._fullLayout,xe=ie._fullData[Z.index],Te=d.select(this).datum();Z._hasHoverEvent&&(re.originalEvent=d.event,ie.emit("plotly_unhover",{points:[m(Te,xe)],event:d.event}),Z._hasHoverEvent=!1),Z._hasHoverLabel&&(n.loneUnhover(ce._hoverlayer.node()),Z._hasHoverLabel=!1)}),J.on("click",function(re){var ce=ie._fullLayout,xe=ie._fullData[Z.index];ie._dragging||ce.hovermode===!1||(ie._hoverdata=[m(re,xe)],n.click(ie,d.event))})}function p(J,ie,K){var ee=l.castOption(J.outsidetextfont.color,ie.pts)||l.castOption(J.textfont.color,ie.pts)||K.color,le=l.castOption(J.outsidetextfont.family,ie.pts)||l.castOption(J.textfont.family,ie.pts)||K.family,j=l.castOption(J.outsidetextfont.size,ie.pts)||l.castOption(J.textfont.size,ie.pts)||K.size,Z=l.castOption(J.outsidetextfont.weight,ie.pts)||l.castOption(J.textfont.weight,ie.pts)||K.weight,fe=l.castOption(J.outsidetextfont.style,ie.pts)||l.castOption(J.textfont.style,ie.pts)||K.style,re=l.castOption(J.outsidetextfont.variant,ie.pts)||l.castOption(J.textfont.variant,ie.pts)||K.variant,ce=l.castOption(J.outsidetextfont.textcase,ie.pts)||l.castOption(J.textfont.textcase,ie.pts)||K.textcase,xe=l.castOption(J.outsidetextfont.lineposition,ie.pts)||l.castOption(J.textfont.lineposition,ie.pts)||K.lineposition,Te=l.castOption(J.outsidetextfont.shadow,ie.pts)||l.castOption(J.textfont.shadow,ie.pts)||K.shadow;return{color:ee,family:le,size:j,weight:Z,style:fe,variant:re,textcase:ce,lineposition:xe,shadow:Te}}function x(J,ie,K){var ee=l.castOption(J.insidetextfont.color,ie.pts);!ee&&J._input.textfont&&(ee=l.castOption(J._input.textfont.color,ie.pts));var le=l.castOption(J.insidetextfont.family,ie.pts)||l.castOption(J.textfont.family,ie.pts)||K.family,j=l.castOption(J.insidetextfont.size,ie.pts)||l.castOption(J.textfont.size,ie.pts)||K.size,Z=l.castOption(J.insidetextfont.weight,ie.pts)||l.castOption(J.textfont.weight,ie.pts)||K.weight,fe=l.castOption(J.insidetextfont.style,ie.pts)||l.castOption(J.textfont.style,ie.pts)||K.style,re=l.castOption(J.insidetextfont.variant,ie.pts)||l.castOption(J.textfont.variant,ie.pts)||K.variant,ce=l.castOption(J.insidetextfont.textcase,ie.pts)||l.castOption(J.textfont.textcase,ie.pts)||K.textcase,xe=l.castOption(J.insidetextfont.lineposition,ie.pts)||l.castOption(J.textfont.lineposition,ie.pts)||K.lineposition,Te=l.castOption(J.insidetextfont.shadow,ie.pts)||l.castOption(J.textfont.shadow,ie.pts)||K.shadow;return{color:ee||E.contrast(ie.color),family:le,size:j,weight:Z,style:fe,variant:re,textcase:ce,lineposition:xe,shadow:Te}}function A(J,ie){for(var K,ee,le=0;le<J.length;le++)if(K=J[le][0],ee=K.trace,ee.title.text){var j=ee.title.text;ee._meta&&(j=v.templateString(j,ee._meta));var Z=T.tester.append("text").attr("data-notex",1).text(j).call(T.font,ee.title.font).call(t.convertToTspans,ie),fe=T.bBox(Z.node(),!0);K.titleBox={width:fe.width,height:fe.height},Z.remove()}}function P(J,ie,K){var ee=K.r||ie.rpx1,le=ie.rInscribed,j=ie.startangle===ie.stopangle;if(j)return{rCenter:1-le,scale:0,rotate:0,textPosAngle:0};var Z=ie.ring,fe=Z===1&&Math.abs(ie.startangle-ie.stopangle)===Math.PI*2,re=ie.halfangle,ce=ie.midangle,xe=K.trace.insidetextorientation,Te=xe==="horizontal",we=xe==="tangential",_e=xe==="radial",ke=xe==="auto",Ne=[],Ee;if(!ke){var ze=function($e,qe){if(y(ie,$e)){var ht=Math.abs($e-ie.startangle),vt=Math.abs($e-ie.stopangle),pt=ht<vt?ht:vt;qe==="tan"?Ee=M(J,ee,Z,pt,0):Ee=C(J,ee,Z,pt,Math.PI/2),Ee.textPosAngle=$e,Ne.push(Ee)}},Ce;if(Te||we){for(Ce=4;Ce>=-4;Ce-=2)ze(Math.PI*Ce,"tan");for(Ce=4;Ce>=-4;Ce-=2)ze(Math.PI*(Ce+1),"tan")}if(Te||_e){for(Ce=4;Ce>=-4;Ce-=2)ze(Math.PI*(Ce+1.5),"rad");for(Ce=4;Ce>=-4;Ce-=2)ze(Math.PI*(Ce+.5),"rad")}}if(fe||ke||Te){var Oe=Math.sqrt(J.width*J.width+J.height*J.height);if(Ee={scale:le*ee*2/Oe,rCenter:1-le,rotate:0},Ee.textPosAngle=(ie.startangle+ie.stopangle)/2,Ee.scale>=1)return Ee;Ne.push(Ee)}(ke||_e)&&(Ee=C(J,ee,Z,re,ce),Ee.textPosAngle=(ie.startangle+ie.stopangle)/2,Ne.push(Ee)),(ke||we)&&(Ee=M(J,ee,Z,re,ce),Ee.textPosAngle=(ie.startangle+ie.stopangle)/2,Ne.push(Ee));for(var Le=0,Ge=0,rt=0;rt<Ne.length;rt++){var ot=Ne[rt].scale;if(Ge<ot&&(Ge=ot,Le=rt),!ke&&Ge>=1)break}return Ne[Le]}function y(J,ie){var K=J.startangle,ee=J.stopangle;return K>ie&&ie>ee||K<ie&&ie<ee}function C(J,ie,K,ee,le){ie=Math.max(0,ie-2*u);var j=J.width/J.height,Z=b(j,ee,ie,K);return{scale:Z*2/J.height,rCenter:s(j,Z/ie),rotate:_(le)}}function M(J,ie,K,ee,le){ie=Math.max(0,ie-2*u);var j=J.height/J.width,Z=b(j,ee,ie,K);return{scale:Z*2/J.width,rCenter:s(j,Z/ie),rotate:_(le+Math.PI/2)}}function s(J,ie){return Math.cos(ie)-J*ie}function _(J){return(180/Math.PI*J+720)%180-90}function b(J,ie,K,ee){var le=J+1/(2*Math.tan(ie));return K*Math.min(1/(Math.sqrt(le*le+.5)+le),ee/(Math.sqrt(J*J+ee/2)+J))}function k(J,ie){return J.v===ie.vTotal&&!ie.trace.hole?1:Math.min(1/(1+1/Math.sin(J.halfangle)),J.ring/2)}function D(J,ie){var K=ie.pxmid[0],ee=ie.pxmid[1],le=J.width/2,j=J.height/2;return K<0&&(le*=-1),ee<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:le+Math.abs(j)*(le>0?1:-1)/2,y:j/(1+K*K/(ee*ee)),outside:!0}}function V(J){var ie=Math.sqrt(J.titleBox.width*J.titleBox.width+J.titleBox.height*J.titleBox.height);return{x:J.cx,y:J.cy,scale:J.trace.hole*J.r*2/ie,tx:0,ty:-J.titleBox.height/2+J.trace.title.font.size}}function O(J,ie){var K=1,ee=1,le,j=J.trace,Z={x:J.cx,y:J.cy},fe={tx:0,ty:0};fe.ty+=j.title.font.size,le=z(j),j.title.position.indexOf("top")!==-1?(Z.y-=(1+le)*J.r,fe.ty-=J.titleBox.height):j.title.position.indexOf("bottom")!==-1&&(Z.y+=(1+le)*J.r);var re=N(J.r,J.trace.aspectratio),ce=ie.w*(j.domain.x[1]-j.domain.x[0])/2;return j.title.position.indexOf("left")!==-1?(ce=ce+re,Z.x-=(1+le)*re,fe.tx+=J.titleBox.width/2):j.title.position.indexOf("center")!==-1?ce*=2:j.title.position.indexOf("right")!==-1&&(ce=ce+re,Z.x+=(1+le)*re,fe.tx-=J.titleBox.width/2),K=ce/J.titleBox.width,ee=B(J,ie)/J.titleBox.height,{x:Z.x,y:Z.y,scale:Math.min(K,ee),tx:fe.tx,ty:fe.ty}}function N(J,ie){return J/(ie===void 0?1:ie)}function B(J,ie){var K=J.trace,ee=ie.h*(K.domain.y[1]-K.domain.y[0]);return Math.min(J.titleBox.height,ee/2)}function z(J){var ie=J.pull;if(!ie)return 0;var K;if(v.isArrayOrTypedArray(ie))for(ie=0,K=0;K<J.pull.length;K++)J.pull[K]>ie&&(ie=J.pull[K]);return ie}function H(J,ie){var K,ee,le,j,Z,fe,re,ce,xe,Te,we,_e,ke;function Ne(Oe,Le){return Oe.pxmid[1]-Le.pxmid[1]}function Ee(Oe,Le){return Le.pxmid[1]-Oe.pxmid[1]}function ze(Oe,Le){Le||(Le={});var Ge=Le.labelExtraY+(ee?Le.yLabelMax:Le.yLabelMin),rt=ee?Oe.yLabelMin:Oe.yLabelMax,ot=ee?Oe.yLabelMax:Oe.yLabelMin,$e=Oe.cyFinal+Z(Oe.px0[1],Oe.px1[1]),qe=Ge-rt,ht,vt,pt,wt,Et,nt;if(qe*re>0&&(Oe.labelExtraY=qe),!!v.isArrayOrTypedArray(ie.pull))for(vt=0;vt<Te.length;vt++)pt=Te[vt],!(pt===Oe||(l.castOption(ie.pull,Oe.pts)||0)>=(l.castOption(ie.pull,pt.pts)||0))&&((Oe.pxmid[1]-pt.pxmid[1])*re>0?(wt=pt.cyFinal+Z(pt.px0[1],pt.px1[1]),qe=wt-rt-Oe.labelExtraY,qe*re>0&&(Oe.labelExtraY+=qe)):(ot+Oe.labelExtraY-$e)*re>0&&(ht=3*fe*Math.abs(vt-Te.indexOf(Oe)),Et=pt.cxFinal+j(pt.px0[0],pt.px1[0]),nt=Et+ht-(Oe.cxFinal+Oe.pxmid[0])-Oe.labelExtraX,nt*fe>0&&(Oe.labelExtraX+=nt)))}for(ee=0;ee<2;ee++)for(le=ee?Ne:Ee,Z=ee?Math.max:Math.min,re=ee?1:-1,K=0;K<2;K++){for(j=K?Math.max:Math.min,fe=K?1:-1,ce=J[ee][K],ce.sort(le),xe=J[1-ee][K],Te=xe.concat(ce),_e=[],we=0;we<ce.length;we++)ce[we].yLabelMid!==void 0&&_e.push(ce[we]);for(ke=!1,we=0;ee&&we<xe.length;we++)if(xe[we].yLabelMid!==void 0){ke=xe[we];break}for(we=0;we<_e.length;we++){var Ce=we&&_e[we-1];ke&&!we&&(Ce=ke),ze(_e[we],Ce)}}}function X(J,ie){for(var K=[],ee=0;ee<J.length;ee++){var le=J[ee][0],j=le.trace,Z=j.domain,fe=ie.w*(Z.x[1]-Z.x[0]),re=ie.h*(Z.y[1]-Z.y[0]);j.title.text&&j.title.position!=="middle center"&&(re-=B(le,ie));var ce=fe/2,xe=re/2;j.type==="funnelarea"&&!j.scalegroup&&(xe/=j.aspectratio),le.r=Math.min(ce,xe)/(1+z(j)),le.cx=ie.l+ie.w*(j.domain.x[1]+j.domain.x[0])/2,le.cy=ie.t+ie.h*(1-j.domain.y[0])-re/2,j.title.text&&j.title.position.indexOf("bottom")!==-1&&(le.cy-=B(le,ie)),j.scalegroup&&K.indexOf(j.scalegroup)===-1&&K.push(j.scalegroup)}$(J,K)}function $(J,ie){for(var K,ee,le,j=0;j<ie.length;j++){var Z=1/0,fe=ie[j];for(ee=0;ee<J.length;ee++)if(K=J[ee][0],le=K.trace,le.scalegroup===fe){var re;if(le.type==="pie")re=K.r*K.r;else if(le.type==="funnelarea"){var ce,xe;le.aspectratio>1?(ce=K.r,xe=ce/le.aspectratio):(xe=K.r,ce=xe*le.aspectratio),ce*=(1+le.baseratio)/2,re=ce*xe}Z=Math.min(Z,re/K.vTotal)}for(ee=0;ee<J.length;ee++)if(K=J[ee][0],le=K.trace,le.scalegroup===fe){var Te=Z*K.vTotal;le.type==="funnelarea"&&(Te/=(1+le.baseratio)/2,Te/=le.aspectratio),K.r=Math.sqrt(Te)}}}function ne(J){var ie=J[0],K=ie.r,ee=ie.trace,le=l.getRotationAngle(ee.rotation),j=2*Math.PI/ie.vTotal,Z="px0",fe="px1",re,ce,xe;if(ee.direction==="counterclockwise"){for(re=0;re<J.length&&J[re].hidden;re++);if(re===J.length)return;le+=j*J[re].v,j*=-1,Z="px1",fe="px0"}for(xe=q(K,le),re=0;re<J.length;re++)ce=J[re],!ce.hidden&&(ce[Z]=xe,ce.startangle=le,le+=j*ce.v/2,ce.pxmid=q(K,le),ce.midangle=le,le+=j*ce.v/2,xe=q(K,le),ce.stopangle=le,ce[fe]=xe,ce.largeArc=ce.v>ie.vTotal/2?1:0,ce.halfangle=Math.PI*Math.min(ce.v/ie.vTotal,.5),ce.ring=1-ee.hole,ce.rInscribed=k(ce,ie))}function q(J,ie){return[J*Math.sin(ie),-J*Math.cos(ie)]}function ue(J,ie,K){var ee=J._fullLayout,le=K.trace,j=le.texttemplate,Z=le.textinfo;if(!j&&Z&&Z!=="none"){var fe=Z.split("+"),re=function(Le){return fe.indexOf(Le)!==-1},ce=re("label"),xe=re("text"),Te=re("value"),we=re("percent"),_e=ee.separators,ke;if(ke=ce?[ie.label]:[],xe){var Ne=l.getFirstFilled(le.text,ie.pts);h(Ne)&&ke.push(Ne)}Te&&ke.push(l.formatPieValue(ie.v,_e)),we&&ke.push(l.formatPiePercent(ie.v/K.vTotal,_e)),ie.text=ke.join("<br>")}function Ee(Le){return{label:Le.label,value:Le.v,valueLabel:l.formatPieValue(Le.v,ee.separators),percent:Le.v/K.vTotal,percentLabel:l.formatPiePercent(Le.v/K.vTotal,ee.separators),color:Le.color,text:Le.text,customdata:v.castOption(le,Le.i,"customdata")}}if(j){var ze=v.castOption(le,ie.i,"texttemplate");if(!ze)ie.text="";else{var Ce=Ee(ie),Oe=l.getFirstFilled(le.text,ie.pts);(h(Oe)||Oe==="")&&(Ce.text=Oe),ie.text=v.texttemplateString(ze,Ce,J._fullLayout._d3locale,Ce,le._meta||{})}}}function te(J,ie){var K=J.rotate*Math.PI/180,ee=Math.cos(K),le=Math.sin(K),j=(ie.left+ie.right)/2,Z=(ie.top+ie.bottom)/2;J.textX=j*ee-Z*le,J.textY=j*le+Z*ee,J.noCenter=!0}U.exports={plot:w,formatSliceLabel:ue,transformInsideText:P,determineInsideTextFont:x,positionTitleOutside:O,prerenderTitles:A,layoutAreas:X,attachFxHandlers:a,computeTransform:te}},22152:function(U,F,e){var d=e(33428),S=e(10528),n=e(82744).resizeText;U.exports=function(T){var v=T._fullLayout._pielayer.selectAll(".trace");n(T,v,"pie"),v.each(function(g){var r=g[0],t=r.trace,o=d.select(this);o.style({opacity:t.opacity}),o.selectAll("path.surface").each(function(i){d.select(this).call(S,i,t,T)})})}},10528:function(U,F,e){var d=e(76308),S=e(69656).castOption,n=e(21552);U.exports=function(T,v,g,r){var t=g.marker.line,o=S(t.color,v.pts)||d.defaultLine,i=S(t.width,v.pts)||0;T.call(n,v,g,r).style("stroke-width",i).call(d.stroke,o)}},35484:function(U,F,e){var d=e(52904);U.exports={x:d.x,y:d.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:d.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(U,F,e){var d=e(67792).gl_pointcloud2d,S=e(3400).isArrayOrTypedArray,n=e(43080),E=e(19280).findExtremes,T=e(44928);function v(t,o){this.scene=t,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=d(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var g=v.prototype;g.handlePick=function(t){var o=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[o*2],this.pickXYData[o*2+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:S(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},g.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=T(t,{})},g.updateFast=function(t){var o=this.xData=this.pickXData=t.x,i=this.yData=this.pickYData=t.y,f=this.pickXYData=t.xy,u=t.xbounds&&t.ybounds,l=t.indices,m,h,w,c=this.bounds,a,p,x;if(f){if(w=f,m=f.length>>>1,u)c[0]=t.xbounds[0],c[2]=t.xbounds[1],c[1]=t.ybounds[0],c[3]=t.ybounds[1];else for(x=0;x<m;x++)a=w[x*2],p=w[x*2+1],a<c[0]&&(c[0]=a),a>c[2]&&(c[2]=a),p<c[1]&&(c[1]=p),p>c[3]&&(c[3]=p);if(l)h=l;else for(h=new Int32Array(m),x=0;x<m;x++)h[x]=x}else for(m=o.length,w=new Float32Array(2*m),h=new Int32Array(m),x=0;x<m;x++)a=o[x],p=i[x],h[x]=x,w[x*2]=a,w[x*2+1]=p,a<c[0]&&(c[0]=a),a>c[2]&&(c[2]=a),p<c[1]&&(c[1]=p),p>c[3]&&(c[3]=p);this.idToIndex=h,this.pointcloudOptions.idToIndex=h,this.pointcloudOptions.positions=w;var A=n(t.marker.color),P=n(t.marker.border.color),y=t.opacity*t.marker.opacity;A[3]*=y,this.pointcloudOptions.color=A;var C=t.marker.blend;if(C===null){var M=100;C=o.length<M||i.length<M}this.pointcloudOptions.blend=C,P[3]*=y,this.pointcloudOptions.borderColor=P;var s=t.marker.sizemin,_=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=s,this.pointcloudOptions.sizeMax=_,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var b=this.scene.xaxis,k=this.scene.yaxis,D=_/2||.5;t._extremes[b._id]=E(b,[c[0],c[2]],{ppad:D}),t._extremes[k._id]=E(k,[c[1],c[3]],{ppad:D})},g.dispose=function(){this.pointcloud.dispose()};function r(t,o){var i=new v(t,o.uid);return i.update(o),i}U.exports=r},41904:function(U,F,e){var d=e(3400),S=e(35484);U.exports=function(E,T,v){function g(r,t){return d.coerce(E,T,S,r,t)}g("x"),g("y"),g("xbounds"),g("ybounds"),E.xy&&E.xy instanceof Float32Array&&(T.xy=E.xy),E.indices&&E.indices instanceof Int32Array&&(T.indices=E.indices),g("text"),g("marker.color",v),g("marker.opacity"),g("marker.blend"),g("marker.sizemin"),g("marker.sizemax"),g("marker.border.color",v),g("marker.border.arearatio"),T._length=null}},156:function(U,F,e){U.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(U,F,e){var d=e(25376),S=e(45464),n=e(22548),E=e(55756),T=e(86968).u,v=e(21776).Ks,g=e(49084),r=e(31780).templatedArray,t=e(29736).descriptionOnlyNumbers,o=e(92880).extendFlat,i=e(67824).overrideAll,f=U.exports=i({hoverinfo:o({},S.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:E.hoverlabel,domain:T({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:d({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:E.hoverlabel,hovertemplate:v({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:E.hoverlabel,hovertemplate:v({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:o(g().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");f.transforms=void 0},10760:function(U,F,e){var d=e(67824).overrideAll,S=e(84888)._M,n=e(59596),E=e(65460),T=e(93972),v=e(86476),g=e(22676).prepSelect,r=e(3400),t=e(24040),o="sankey";F.name=o,F.baseLayoutAttrOverrides=d({hoverlabel:E.hoverlabel},"plot","nested"),F.plot=function(f){var u=S(f.calcdata,o)[0];n(f,u),F.updateFx(f)},F.clean=function(f,u,l,m){var h=m._has&&m._has(o),w=u._has&&u._has(o);h&&!w&&(m._paperdiv.selectAll(".sankey").remove(),m._paperdiv.selectAll(".bgsankey").remove())},F.updateFx=function(f){for(var u=0;u<f._fullData.length;u++)i(f,u)};function i(f,u){var l=f._fullData[u],m=f._fullLayout,h=m.dragmode,w=m.dragmode==="pan"?"move":"crosshair",c=l._bgRect;if(c&&!(h==="pan"||h==="zoom")){T(c,w);var a={_id:"x",c2p:r.identity,_offset:l._sankey.translateX,_length:l._sankey.width},p={_id:"y",c2p:r.identity,_offset:l._sankey.translateY,_length:l._sankey.height},x={gd:f,element:c.node(),plotinfo:{id:u,xaxis:a,yaxis:p,fillRangeItems:r.noop},subplot:u,xaxes:[a],yaxes:[p],doneFnCompleted:function(A){var P=f._fullData[u],y,C=P.node.groups.slice(),M=[];function s(D){for(var V=P._sankey.graph.nodes,O=0;O<V.length;O++)if(V[O].pointNumber===D)return V[O]}for(var _=0;_<A.length;_++){var b=s(A[_].pointNumber);if(b)if(b.group){for(var k=0;k<b.childrenNodes.length;k++)M.push(b.childrenNodes[k].pointNumber);C[b.pointNumber-P.node._count]=!1}else M.push(b.pointNumber)}y=C.filter(Boolean).concat([M]),t.call("_guiRestyle",f,{"node.groups":[y]},u)}};x.prepFn=function(A,P,y){g(A,P,y,x,h)},v.init(x)}}},48068:function(U,F,e){var d=e(78484),S=e(3400),n=e(71688).wrap,E=S.isArrayOrTypedArray,T=S.isIndex,v=e(8932);function g(t){var o=t.node,i=t.link,f=[],u=E(i.color),l=E(i.hovercolor),m=E(i.customdata),h={},w={},c=i.colorscales.length,a;for(a=0;a<c;a++){var p=i.colorscales[a],x=v.extractScale(p,{cLetter:"c"}),A=v.makeColorScaleFunc(x);w[p.label]=A}var P=0;for(a=0;a<i.value.length;a++)i.source[a]>P&&(P=i.source[a]),i.target[a]>P&&(P=i.target[a]);var y=P+1;t.node._count=y;var C,M=t.node.groups,s={};for(a=0;a<M.length;a++){var _=M[a];for(C=0;C<_.length;C++){var b=_[C],k=y+a;s.hasOwnProperty(b)?S.warn("Node "+b+" is already part of a group."):s[b]=k}}var D={source:[],target:[]};for(a=0;a<i.value.length;a++){var V=i.value[a],O=i.source[a],N=i.target[a];if(V>0&&T(O,y)&&T(N,y)&&!(s.hasOwnProperty(O)&&s.hasOwnProperty(N)&&s[O]===s[N])){s.hasOwnProperty(N)&&(N=s[N]),s.hasOwnProperty(O)&&(O=s[O]),O=+O,N=+N,h[O]=h[N]=!0;var B="";i.label&&i.label[a]&&(B=i.label[a]);var z=null;B&&w.hasOwnProperty(B)&&(z=w[B]),f.push({pointNumber:a,label:B,color:u?i.color[a]:i.color,hovercolor:l?i.hovercolor[a]:i.hovercolor,customdata:m?i.customdata[a]:i.customdata,concentrationscale:z,source:O,target:N,value:+V}),D.source.push(O),D.target.push(N)}}var H=y+M.length,X=E(o.color),$=E(o.customdata),ne=[];for(a=0;a<H;a++)if(h[a]){var q=o.label[a];ne.push({group:a>y-1,childrenNodes:[],pointNumber:a,label:q,color:X?o.color[a]:o.color,customdata:$?o.customdata[a]:o.customdata})}var ue=!1;return r(H,D.source,D.target)&&(ue=!0),{circular:ue,links:f,nodes:ne,groups:M,groupLookup:s}}function r(t,o,i){for(var f=S.init2dArray(t,0),u=0;u<Math.min(o.length,i.length);u++)if(S.isIndex(o[u],t)&&S.isIndex(i[u],t)){if(o[u]===i[u])return!0;f[o[u]].push(i[u])}var l=d(f);return l.components.some(function(m){return m.length>1})}U.exports=function(o,i){var f=g(i);return n({circular:f.circular,_nodes:f.nodes,_links:f.links,_groups:f.groups,_groupLookup:f.groupLookup})}},11820:function(U){U.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(U,F,e){var d=e(3400),S=e(41440),n=e(76308),E=e(49760),T=e(86968).Q,v=e(16132),g=e(31780),r=e(51272);U.exports=function(i,f,u,l){function m(k,D){return d.coerce(i,f,S,k,D)}var h=d.extendDeep(l.hoverlabel,i.hoverlabel),w=i.node,c=g.newContainer(f,"node");function a(k,D){return d.coerce(w,c,S.node,k,D)}a("label"),a("groups"),a("x"),a("y"),a("pad"),a("thickness"),a("line.color"),a("line.width"),a("hoverinfo",i.hoverinfo),v(w,c,a,h),a("hovertemplate"),a("align");var p=l.colorway,x=function(k){return p[k%p.length]};a("color",c.label.map(function(k,D){return n.addOpacity(x(D),.8)})),a("customdata");var A=i.link||{},P=g.newContainer(f,"link");function y(k,D){return d.coerce(A,P,S.link,k,D)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",i.hoverinfo),v(A,P,y,h),y("hovertemplate");var C=E(l.paper_bgcolor).getLuminance()<.333,M=C?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)",s=y("color",M);function _(k){var D=E(k);if(!D.isValid())return k;var V=D.getAlpha();return V<=.8?D.setAlpha(V+.2):D=C?D.brighten():D.darken(),D.toRgbString()}y("hovercolor",Array.isArray(s)?s.map(_):_(s)),y("customdata"),r(A,P,{name:"colorscales",handleItemDefaults:t}),T(f,l,m),m("orientation"),m("valueformat"),m("valuesuffix");var b;c.x.length&&c.y.length&&(b="freeform"),m("arrangement",b),d.coerceFont(m,"textfont",l.font,{autoShadowDflt:!0}),f._length=null};function t(o,i){function f(u,l){return d.coerce(o,i,S.link.colorscales,u,l)}f("label"),f("cmin"),f("cmax"),f("colorscale")}},45499:function(U,F,e){U.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(U,F,e){var d=e(33428),S=e(3400),n=S.numberFormat,E=e(83248),T=e(93024),v=e(76308),g=e(11820).cn,r=S._;function t(p){return p!==""}function o(p,x){return p.filter(function(A){return A.key===x.traceId})}function i(p,x){d.select(p).select("path").style("fill-opacity",x),d.select(p).select("rect").style("fill-opacity",x)}function f(p){d.select(p).select("text.name").style("fill","black")}function u(p){return function(x){return p.node.sourceLinks.indexOf(x.link)!==-1||p.node.targetLinks.indexOf(x.link)!==-1}}function l(p){return function(x){return x.node.sourceLinks.indexOf(p.link)!==-1||x.node.targetLinks.indexOf(p.link)!==-1}}function m(p,x,A){x&&A&&o(A,x).selectAll("."+g.sankeyLink).filter(u(x)).call(w.bind(0,x,A,!1))}function h(p,x,A){x&&A&&o(A,x).selectAll("."+g.sankeyLink).filter(u(x)).call(c.bind(0,x,A,!1))}function w(p,x,A,P){P.style("fill",function(y){if(!y.link.concentrationscale)return y.tinyColorHoverHue}).style("fill-opacity",function(y){if(!y.link.concentrationscale)return y.tinyColorHoverAlpha}),P.each(function(y){var C=y.link.label;C!==""&&o(x,p).selectAll("."+g.sankeyLink).filter(function(M){return M.link.label===C}).style("fill",function(M){if(!M.link.concentrationscale)return M.tinyColorHoverHue}).style("fill-opacity",function(M){if(!M.link.concentrationscale)return M.tinyColorHoverAlpha})}),A&&o(x,p).selectAll("."+g.sankeyNode).filter(l(p)).call(m)}function c(p,x,A,P){P.style("fill",function(y){return y.tinyColorHue}).style("fill-opacity",function(y){return y.tinyColorAlpha}),P.each(function(y){var C=y.link.label;C!==""&&o(x,p).selectAll("."+g.sankeyLink).filter(function(M){return M.link.label===C}).style("fill",function(M){return M.tinyColorHue}).style("fill-opacity",function(M){return M.tinyColorAlpha})}),A&&o(x,p).selectAll(g.sankeyNode).filter(l(p)).call(h)}function a(p,x){var A=p.hoverlabel||{},P=S.nestedProperty(A,x).get();return Array.isArray(P)?!1:P}U.exports=function(x,A){for(var P=x._fullLayout,y=P._paper,C=P._size,M=0;M<x._fullData.length;M++)if(x._fullData[M].visible&&x._fullData[M].type===g.sankey&&!x._fullData[M]._viewInitial){var s=x._fullData[M].node;x._fullData[M]._viewInitial={node:{groups:s.groups.slice(),x:s.x.slice(),y:s.y.slice()}}}var _=function(q,ue){var te=ue.link;te.originalEvent=d.event,x._hoverdata=[te],T.click(x,{target:!0})},b=function(q,ue,te){x._fullLayout.hovermode!==!1&&(d.select(q).call(w.bind(0,ue,te,!0)),ue.link.trace.link.hoverinfo!=="skip"&&(ue.link.fullData=ue.link.trace,x.emit("plotly_hover",{event:d.event,points:[ue.link]})))},k=r(x,"source:")+" ",D=r(x,"target:")+" ",V=r(x,"concentration:")+" ",O=r(x,"incoming flow count:")+" ",N=r(x,"outgoing flow count:")+" ",B=function(q,ue){if(x._fullLayout.hovermode===!1)return;var te=ue.link.trace.link;if(te.hoverinfo==="none"||te.hoverinfo==="skip")return;var J=[];function ie(re){var ce,xe;re.circular?(ce=(re.circularPathData.leftInnerExtent+re.circularPathData.rightInnerExtent)/2,xe=re.circularPathData.verticalFullExtent):(ce=(re.source.x1+re.target.x0)/2,xe=(re.y0+re.y1)/2);var Te=[ce,xe];return re.trace.orientation==="v"&&Te.reverse(),Te[0]+=ue.parent.translateX,Te[1]+=ue.parent.translateY,Te}for(var K=0,ee=0;ee<ue.flow.links.length;ee++){var le=ue.flow.links[ee];if(!(x._fullLayout.hovermode==="closest"&&ue.link.pointNumber!==le.pointNumber)){ue.link.pointNumber===le.pointNumber&&(K=ee),le.fullData=le.trace,te=ue.link.trace.link;var j=ie(le),Z={valueLabel:n(ue.valueFormat)(le.value)+ue.valueSuffix};J.push({x:j[0],y:j[1],name:Z.valueLabel,text:[le.label||"",k+le.source.label,D+le.target.label,le.concentrationscale?V+n("%0.2f")(le.flow.labelConcentration):""].filter(t).join("<br>"),color:a(te,"bgcolor")||v.addOpacity(le.color,1),borderColor:a(te,"bordercolor"),fontFamily:a(te,"font.family"),fontSize:a(te,"font.size"),fontColor:a(te,"font.color"),fontWeight:a(te,"font.weight"),fontStyle:a(te,"font.style"),fontVariant:a(te,"font.variant"),fontTextcase:a(te,"font.textcase"),fontLineposition:a(te,"font.lineposition"),fontShadow:a(te,"font.shadow"),nameLength:a(te,"namelength"),textAlign:a(te,"align"),idealAlign:d.event.x<j[0]?"right":"left",hovertemplate:te.hovertemplate,hovertemplateLabels:Z,eventData:[le]})}}var fe=T.loneHover(J,{container:P._hoverlayer.node(),outerContainer:P._paper.node(),gd:x,anchorIndex:K});fe.each(function(){var re=this;ue.link.concentrationscale||i(re,.65),f(re)})},z=function(q,ue,te){x._fullLayout.hovermode!==!1&&(d.select(q).call(c.bind(0,ue,te,!0)),ue.link.trace.link.hoverinfo!=="skip"&&(ue.link.fullData=ue.link.trace,x.emit("plotly_unhover",{event:d.event,points:[ue.link]})),T.loneUnhover(P._hoverlayer.node()))},H=function(q,ue,te){var J=ue.node;J.originalEvent=d.event,x._hoverdata=[J],d.select(q).call(h,ue,te),T.click(x,{target:!0})},X=function(q,ue,te){x._fullLayout.hovermode!==!1&&(d.select(q).call(m,ue,te),ue.node.trace.node.hoverinfo!=="skip"&&(ue.node.fullData=ue.node.trace,x.emit("plotly_hover",{event:d.event,points:[ue.node]})))},$=function(q,ue){if(x._fullLayout.hovermode!==!1){var te=ue.node.trace.node;if(!(te.hoverinfo==="none"||te.hoverinfo==="skip")){var J=d.select(q).select("."+g.nodeRect),ie=x._fullLayout._paperdiv.node().getBoundingClientRect(),K=J.node().getBoundingClientRect(),ee=K.left-2-ie.left,le=K.right+2-ie.left,j=K.top+K.height/4-ie.top,Z={valueLabel:n(ue.valueFormat)(ue.node.value)+ue.valueSuffix};ue.node.fullData=ue.node.trace,x._fullLayout._calcInverseTransform(x);var fe=x._fullLayout._invScaleX,re=x._fullLayout._invScaleY,ce=T.loneHover({x0:fe*ee,x1:fe*le,y:re*j,name:n(ue.valueFormat)(ue.node.value)+ue.valueSuffix,text:[ue.node.label,O+ue.node.targetLinks.length,N+ue.node.sourceLinks.length].filter(t).join("<br>"),color:a(te,"bgcolor")||ue.tinyColorHue,borderColor:a(te,"bordercolor"),fontFamily:a(te,"font.family"),fontSize:a(te,"font.size"),fontColor:a(te,"font.color"),fontWeight:a(te,"font.weight"),fontStyle:a(te,"font.style"),fontVariant:a(te,"font.variant"),fontTextcase:a(te,"font.textcase"),fontLineposition:a(te,"font.lineposition"),fontShadow:a(te,"font.shadow"),nameLength:a(te,"namelength"),textAlign:a(te,"align"),idealAlign:"left",hovertemplate:te.hovertemplate,hovertemplateLabels:Z,eventData:[ue.node]},{container:P._hoverlayer.node(),outerContainer:P._paper.node(),gd:x});i(ce,.85),f(ce)}}},ne=function(q,ue,te){x._fullLayout.hovermode!==!1&&(d.select(q).call(h,ue,te),ue.node.trace.node.hoverinfo!=="skip"&&(ue.node.fullData=ue.node.trace,x.emit("plotly_unhover",{event:d.event,points:[ue.node]})),T.loneUnhover(P._hoverlayer.node()))};E(x,y,A,{width:C.w,height:C.h,margin:{t:C.t,r:C.r,b:C.b,l:C.l}},{linkEvents:{hover:b,follow:B,unhover:z,select:_},nodeEvents:{hover:X,follow:$,unhover:ne,select:H}})}},83248:function(U,F,e){var d=e(49812),S=e(67756).Gz,n=e(33428),E=e(26800),T=e(48932),v=e(11820),g=e(49760),r=e(76308),t=e(43616),o=e(3400),i=o.strTranslate,f=o.strRotate,u=e(71688),l=u.keyFun,m=u.repeat,h=u.unwrap,w=e(72736),c=e(24040),a=e(84284),p=a.CAP_SHIFT,x=a.LINE_SPACING,A=3;function P(ie,K,ee){var le=h(K),j=le.trace,Z=j.domain,fe=j.orientation==="h",re=j.node.pad,ce=j.node.thickness,xe={justify:E.sankeyJustify,left:E.sankeyLeft,right:E.sankeyRight,center:E.sankeyCenter}[j.node.align],Te=ie.width*(Z.x[1]-Z.x[0]),we=ie.height*(Z.y[1]-Z.y[0]),_e=le._nodes,ke=le._links,Ne=le.circular,Ee;Ne?Ee=T.sankeyCircular().circularLinkGap(0):Ee=E.sankey(),Ee.iterations(v.sankeyIterations).size(fe?[Te,we]:[we,Te]).nodeWidth(ce).nodePadding(re).nodeId(function(nt){return nt.pointNumber}).nodeAlign(xe).nodes(_e).links(ke);var ze=Ee();Ee.nodePadding()<re&&o.warn("node.pad was reduced to ",Ee.nodePadding()," to fit within the figure.");var Ce,Oe,Le;for(var Ge in le._groupLookup){var rt=parseInt(le._groupLookup[Ge]),ot;for(Ce=0;Ce<ze.nodes.length;Ce++)if(ze.nodes[Ce].pointNumber===rt){ot=ze.nodes[Ce];break}if(ot){var $e={pointNumber:parseInt(Ge),x0:ot.x0,x1:ot.x1,y0:ot.y0,y1:ot.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ze.nodes.unshift($e),ot.childrenNodes.unshift($e)}}function qe(){for(Ce=0;Ce<ze.nodes.length;Ce++){var nt=ze.nodes[Ce],Fe={},We,Ze;for(Oe=0;Oe<nt.targetLinks.length;Oe++)Ze=nt.targetLinks[Oe],We=Ze.source.pointNumber+":"+Ze.target.pointNumber,Fe.hasOwnProperty(We)||(Fe[We]=[]),Fe[We].push(Ze);var Ye=Object.keys(Fe);for(Oe=0;Oe<Ye.length;Oe++){We=Ye[Oe];var Ie=Fe[We],De=0,je={};for(Le=0;Le<Ie.length;Le++)Ze=Ie[Le],je[Ze.label]||(je[Ze.label]=0),je[Ze.label]+=Ze.value,De+=Ze.value;for(Le=0;Le<Ie.length;Le++)Ze=Ie[Le],Ze.flow={value:De,labelConcentration:je[Ze.label]/De,concentration:Ze.value/De,links:Ie},Ze.concentrationscale&&(Ze.color=g(Ze.concentrationscale(Ze.flow.labelConcentration)))}var Re=0;for(Oe=0;Oe<nt.sourceLinks.length;Oe++)Re+=nt.sourceLinks[Oe].value;for(Oe=0;Oe<nt.sourceLinks.length;Oe++)Ze=nt.sourceLinks[Oe],Ze.concentrationOut=Ze.value/Re;var pe=0;for(Oe=0;Oe<nt.targetLinks.length;Oe++)pe+=nt.targetLinks[Oe].value;for(Oe=0;Oe<nt.targetLinks.length;Oe++)Ze=nt.targetLinks[Oe],Ze.concenrationIn=Ze.value/pe}}qe();function ht(nt){nt.forEach(function(Fe){var We,Ze,Ye=0,Ie=Fe.length,De;for(Fe.sort(function(je,Re){return je.y0-Re.y0}),De=0;De<Ie;++De)We=Fe[De],We.y0>=Ye||(Ze=Ye-We.y0,Ze>1e-6&&(We.y0+=Ze,We.y1+=Ze)),Ye=We.y1+re})}function vt(nt){var Fe=nt.map(function(Re,pe){return{x0:Re.x0,index:pe}}).sort(function(Re,pe){return Re.x0-pe.x0}),We=[],Ze=-1,Ye,Ie=-1/0,De;for(Ce=0;Ce<Fe.length;Ce++){var je=nt[Fe[Ce].index];je.x0>Ie+ce&&(Ze+=1,Ye=je.x0),Ie=je.x0,We[Ze]||(We[Ze]=[]),We[Ze].push(je),De=Ye-je.x0,je.x0+=De,je.x1+=De}return We}if(j.node.x.length&&j.node.y.length){for(Ce=0;Ce<Math.min(j.node.x.length,j.node.y.length,ze.nodes.length);Ce++)if(j.node.x[Ce]&&j.node.y[Ce]){var pt=[j.node.x[Ce]*Te,j.node.y[Ce]*we];ze.nodes[Ce].x0=pt[0]-ce/2,ze.nodes[Ce].x1=pt[0]+ce/2;var wt=ze.nodes[Ce].y1-ze.nodes[Ce].y0;ze.nodes[Ce].y0=pt[1]-wt/2,ze.nodes[Ce].y1=pt[1]+wt/2}if(j.arrangement==="snap"){_e=ze.nodes;var Et=vt(_e);ht(Et)}Ee.update(ze)}return{circular:Ne,key:ee,trace:j,guid:o.randstr(),horizontal:fe,width:Te,height:we,nodePad:j.node.pad,nodeLineColor:j.node.line.color,nodeLineWidth:j.node.line.width,linkLineColor:j.link.line.color,linkLineWidth:j.link.line.width,linkArrowLength:j.link.arrowlen,valueFormat:j.valueformat,valueSuffix:j.valuesuffix,textFont:j.textfont,translateX:Z.x[0]*ie.width+ie.margin.l,translateY:ie.height-Z.y[1]*ie.height+ie.margin.t,dragParallel:fe?we:Te,dragPerpendicular:fe?Te:we,arrangement:j.arrangement,sankey:Ee,graph:ze,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function y(ie,K,ee){var le=g(K.color),j=g(K.hovercolor),Z=K.source.label+"|"+K.target.label,fe=Z+"__"+ee;return K.trace=ie.trace,K.curveNumber=ie.trace.index,{circular:ie.circular,key:fe,traceId:ie.key,pointNumber:K.pointNumber,link:K,tinyColorHue:r.tinyRGB(le),tinyColorAlpha:le.getAlpha(),tinyColorHoverHue:r.tinyRGB(j),tinyColorHoverAlpha:j.getAlpha(),linkPath:M,linkLineColor:ie.linkLineColor,linkLineWidth:ie.linkLineWidth,linkArrowLength:ie.linkArrowLength,valueFormat:ie.valueFormat,valueSuffix:ie.valueSuffix,sankey:ie.sankey,parent:ie,interactionState:ie.interactionState,flow:K.flow}}function C(ie,K){var ee="",le=ie.width/2,j=ie.circularPathData;return ie.circularLinkType==="top"?ee="M "+(j.targetX-K)+" "+(j.targetY+le)+" L"+(j.rightInnerExtent-K)+" "+(j.targetY+le)+"A"+(j.rightLargeArcRadius+le)+" "+(j.rightSmallArcRadius+le)+" 0 0 1 "+(j.rightFullExtent-le-K)+" "+(j.targetY-j.rightSmallArcRadius)+"L"+(j.rightFullExtent-le-K)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+le)+" "+(j.rightLargeArcRadius+le)+" 0 0 1 "+(j.rightInnerExtent-K)+" "+(j.verticalFullExtent-le)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent-le)+"A"+(j.leftLargeArcRadius+le)+" "+(j.leftLargeArcRadius+le)+" 0 0 1 "+(j.leftFullExtent+le)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+le)+" "+(j.sourceY-j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+le)+" "+(j.leftSmallArcRadius+le)+" 0 0 1 "+j.leftInnerExtent+" "+(j.sourceY+le)+"L"+j.sourceX+" "+(j.sourceY+le)+"L"+j.sourceX+" "+(j.sourceY-le)+"L"+j.leftInnerExtent+" "+(j.sourceY-le)+"A"+(j.leftLargeArcRadius-le)+" "+(j.leftSmallArcRadius-le)+" 0 0 0 "+(j.leftFullExtent-le)+" "+(j.sourceY-j.leftSmallArcRadius)+"L"+(j.leftFullExtent-le)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-le)+" "+(j.leftLargeArcRadius-le)+" 0 0 0 "+j.leftInnerExtent+" "+(j.verticalFullExtent+le)+"L"+(j.rightInnerExtent-K)+" "+(j.verticalFullExtent+le)+"A"+(j.rightLargeArcRadius-le)+" "+(j.rightLargeArcRadius-le)+" 0 0 0 "+(j.rightFullExtent+le-K)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+le-K)+" "+(j.targetY-j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-le)+" "+(j.rightSmallArcRadius-le)+" 0 0 0 "+(j.rightInnerExtent-K)+" "+(j.targetY-le)+"L"+(j.targetX-K)+" "+(j.targetY-le)+(K>0?"L"+j.targetX+" "+j.targetY:"")+"Z":ee="M "+(j.targetX-K)+" "+(j.targetY-le)+" L"+(j.rightInnerExtent-K)+" "+(j.targetY-le)+"A"+(j.rightLargeArcRadius+le)+" "+(j.rightSmallArcRadius+le)+" 0 0 0 "+(j.rightFullExtent-le-K)+" "+(j.targetY+j.rightSmallArcRadius)+"L"+(j.rightFullExtent-le-K)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+le)+" "+(j.rightLargeArcRadius+le)+" 0 0 0 "+(j.rightInnerExtent-K)+" "+(j.verticalFullExtent+le)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent+le)+"A"+(j.leftLargeArcRadius+le)+" "+(j.leftLargeArcRadius+le)+" 0 0 0 "+(j.leftFullExtent+le)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+le)+" "+(j.sourceY+j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+le)+" "+(j.leftSmallArcRadius+le)+" 0 0 0 "+j.leftInnerExtent+" "+(j.sourceY-le)+"L"+j.sourceX+" "+(j.sourceY-le)+"L"+j.sourceX+" "+(j.sourceY+le)+"L"+j.leftInnerExtent+" "+(j.sourceY+le)+"A"+(j.leftLargeArcRadius-le)+" "+(j.leftSmallArcRadius-le)+" 0 0 1 "+(j.leftFullExtent-le)+" "+(j.sourceY+j.leftSmallArcRadius)+"L"+(j.leftFullExtent-le)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-le)+" "+(j.leftLargeArcRadius-le)+" 0 0 1 "+j.leftInnerExtent+" "+(j.verticalFullExtent-le)+"L"+(j.rightInnerExtent-K)+" "+(j.verticalFullExtent-le)+"A"+(j.rightLargeArcRadius-le)+" "+(j.rightLargeArcRadius-le)+" 0 0 1 "+(j.rightFullExtent+le-K)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+le-K)+" "+(j.targetY+j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-le)+" "+(j.rightSmallArcRadius-le)+" 0 0 1 "+(j.rightInnerExtent-K)+" "+(j.targetY+le)+"L"+(j.targetX-K)+" "+(j.targetY+le)+(K>0?"L"+j.targetX+" "+j.targetY:"")+"Z",ee}function M(){var ie=.5;function K(ee){var le=ee.linkArrowLength;if(ee.link.circular)return C(ee.link,le);var j=Math.abs((ee.link.target.x0-ee.link.source.x1)/2);le>j&&(le=j);var Z=ee.link.source.x1,fe=ee.link.target.x0-le,re=S(Z,fe),ce=re(ie),xe=re(1-ie),Te=ee.link.y0-ee.link.width/2,we=ee.link.y0+ee.link.width/2,_e=ee.link.y1-ee.link.width/2,ke=ee.link.y1+ee.link.width/2,Ne="M"+Z+","+Te,Ee="C"+ce+","+Te+" "+xe+","+_e+" "+fe+","+_e,ze="C"+xe+","+ke+" "+ce+","+we+" "+Z+","+we,Ce=le>0?"L"+(fe+le)+","+(_e+ee.link.width/2):"";return Ce+="L"+fe+","+ke,Ne+Ee+Ce+ze+"Z"}return K}function s(ie,K){var ee=g(K.color),le=v.nodePadAcross,j=ie.nodePad/2;K.dx=K.x1-K.x0,K.dy=K.y1-K.y0;var Z=K.dx,fe=Math.max(.5,K.dy),re="node_"+K.pointNumber;return K.group&&(re=o.randstr()),K.trace=ie.trace,K.curveNumber=ie.trace.index,{index:K.pointNumber,key:re,partOfGroup:K.partOfGroup||!1,group:K.group,traceId:ie.key,trace:ie.trace,node:K,nodePad:ie.nodePad,nodeLineColor:ie.nodeLineColor,nodeLineWidth:ie.nodeLineWidth,textFont:ie.textFont,size:ie.horizontal?ie.height:ie.width,visibleWidth:Math.ceil(Z),visibleHeight:fe,zoneX:-le,zoneY:-j,zoneWidth:Z+2*le,zoneHeight:fe+2*j,labelY:ie.horizontal?K.dy/2+1:K.dx/2+1,left:K.originalLayer===1,sizeAcross:ie.width,forceLayouts:ie.forceLayouts,horizontal:ie.horizontal,darkBackground:ee.getBrightness()<=128,tinyColorHue:r.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),valueFormat:ie.valueFormat,valueSuffix:ie.valueSuffix,sankey:ie.sankey,graph:ie.graph,arrangement:ie.arrangement,uniqueNodeLabelPathId:[ie.guid,ie.key,re].join("_"),interactionState:ie.interactionState,figure:ie}}function _(ie){ie.attr("transform",function(K){return i(K.node.x0.toFixed(3),K.node.y0.toFixed(3))})}function b(ie){ie.call(_)}function k(ie,K){ie.call(b),K.attr("d",M())}function D(ie){ie.attr("width",function(K){return K.node.x1-K.node.x0}).attr("height",function(K){return K.visibleHeight})}function V(ie){return ie.link.width>1||ie.linkLineWidth>0}function O(ie){var K=i(ie.translateX,ie.translateY);return K+(ie.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function N(ie,K,ee){ie.on(".basic",null).on("mouseover.basic",function(le){!le.interactionState.dragInProgress&&!le.partOfGroup&&(ee.hover(this,le,K),le.interactionState.hovered=[this,le])}).on("mousemove.basic",function(le){!le.interactionState.dragInProgress&&!le.partOfGroup&&(ee.follow(this,le),le.interactionState.hovered=[this,le])}).on("mouseout.basic",function(le){!le.interactionState.dragInProgress&&!le.partOfGroup&&(ee.unhover(this,le,K),le.interactionState.hovered=!1)}).on("click.basic",function(le){le.interactionState.hovered&&(ee.unhover(this,le,K),le.interactionState.hovered=!1),!le.interactionState.dragInProgress&&!le.partOfGroup&&ee.select(this,le,K)})}function B(ie,K,ee,le){var j=n.behavior.drag().origin(function(Z){return{x:Z.node.x0+Z.visibleWidth/2,y:Z.node.y0+Z.visibleHeight/2}}).on("dragstart",function(Z){if(Z.arrangement!=="fixed"&&(o.ensureSingle(le._fullLayout._infolayer,"g","dragcover",function(re){le._fullLayout._dragCover=re}),o.raiseToTop(this),Z.interactionState.dragInProgress=Z.node,q(Z.node),Z.interactionState.hovered&&(ee.nodeEvents.unhover.apply(0,Z.interactionState.hovered),Z.interactionState.hovered=!1),Z.arrangement==="snap")){var fe=Z.traceId+"|"+Z.key;Z.forceLayouts[fe]?Z.forceLayouts[fe].alpha(1):z(ie,fe,Z),H(ie,K,Z,fe,le)}}).on("drag",function(Z){if(Z.arrangement!=="fixed"){var fe=n.event.x,re=n.event.y;Z.arrangement==="snap"?(Z.node.x0=fe-Z.visibleWidth/2,Z.node.x1=fe+Z.visibleWidth/2,Z.node.y0=re-Z.visibleHeight/2,Z.node.y1=re+Z.visibleHeight/2):(Z.arrangement==="freeform"&&(Z.node.x0=fe-Z.visibleWidth/2,Z.node.x1=fe+Z.visibleWidth/2),re=Math.max(0,Math.min(Z.size-Z.visibleHeight/2,re)),Z.node.y0=re-Z.visibleHeight/2,Z.node.y1=re+Z.visibleHeight/2),q(Z.node),Z.arrangement!=="snap"&&(Z.sankey.update(Z.graph),k(ie.filter(ue(Z)),K))}}).on("dragend",function(Z){if(Z.arrangement!=="fixed"){Z.interactionState.dragInProgress=!1;for(var fe=0;fe<Z.node.childrenNodes.length;fe++)Z.node.childrenNodes[fe].x=Z.node.x,Z.node.childrenNodes[fe].y=Z.node.y;Z.arrangement!=="snap"&&$(Z,le)}});ie.on(".drag",null).call(j)}function z(ie,K,ee,le){te(ee.graph.nodes);var j=ee.graph.nodes.filter(function(Z){return Z.originalX===ee.node.originalX}).filter(function(Z){return!Z.partOfGroup});ee.forceLayouts[K]=d.forceSimulation(j).alphaDecay(0).force("collide",d.forceCollide().radius(function(Z){return Z.dy/2+ee.nodePad/2}).strength(1).iterations(v.forceIterations)).force("constrain",X(ie,K,j,ee)).stop()}function H(ie,K,ee,le,j){window.requestAnimationFrame(function Z(){var fe;for(fe=0;fe<v.forceTicksPerFrame;fe++)ee.forceLayouts[le].tick();var re=ee.graph.nodes;if(J(re),ee.sankey.update(ee.graph),k(ie.filter(ue(ee)),K),ee.forceLayouts[le].alpha()>0)window.requestAnimationFrame(Z);else{var ce=ee.node.originalX;ee.node.x0=ce-ee.visibleWidth/2,ee.node.x1=ce+ee.visibleWidth/2,$(ee,j)}})}function X(ie,K,ee,le){return function(){for(var Z=0,fe=0;fe<ee.length;fe++){var re=ee[fe];re===le.interactionState.dragInProgress?(re.x=re.lastDraggedX,re.y=re.lastDraggedY):(re.vx=(re.originalX-re.x)/v.forceTicksPerFrame,re.y=Math.min(le.size-re.dy/2,Math.max(re.dy/2,re.y))),Z=Math.max(Z,Math.abs(re.vx),Math.abs(re.vy))}!le.interactionState.dragInProgress&&Z<.1&&le.forceLayouts[K].alpha()>0&&le.forceLayouts[K].alpha(0)}}function $(ie,K){for(var ee=[],le=[],j=0;j<ie.graph.nodes.length;j++){var Z=(ie.graph.nodes[j].x0+ie.graph.nodes[j].x1)/2,fe=(ie.graph.nodes[j].y0+ie.graph.nodes[j].y1)/2;ee.push(Z/ie.figure.width),le.push(fe/ie.figure.height)}c.call("_guiRestyle",K,{"node.x":[ee],"node.y":[le]},ie.trace.index).then(function(){K._fullLayout._dragCover&&K._fullLayout._dragCover.remove()})}function ne(ie){var K=[],ee;for(ee=0;ee<ie.length;ee++)ie[ee].originalX=(ie[ee].x0+ie[ee].x1)/2,ie[ee].originalY=(ie[ee].y0+ie[ee].y1)/2,K.indexOf(ie[ee].originalX)===-1&&K.push(ie[ee].originalX);for(K.sort(function(le,j){return le-j}),ee=0;ee<ie.length;ee++)ie[ee].originalLayerIndex=K.indexOf(ie[ee].originalX),ie[ee].originalLayer=ie[ee].originalLayerIndex/(K.length-1)}function q(ie){ie.lastDraggedX=ie.x0+ie.dx/2,ie.lastDraggedY=ie.y0+ie.dy/2}function ue(ie){return function(K){return K.node.originalX===ie.node.originalX}}function te(ie){for(var K=0;K<ie.length;K++)ie[K].y=(ie[K].y0+ie[K].y1)/2,ie[K].x=(ie[K].x0+ie[K].x1)/2}function J(ie){for(var K=0;K<ie.length;K++)ie[K].y0=ie[K].y-ie[K].dy/2,ie[K].y1=ie[K].y0+ie[K].dy,ie[K].x0=ie[K].x-ie[K].dx/2,ie[K].x1=ie[K].x0+ie[K].dx}U.exports=function(ie,K,ee,le,j){var Z=ie._context.staticPlot,fe=!1;o.ensureSingle(ie._fullLayout._infolayer,"g","first-render",function(){fe=!0});var re=ie._fullLayout._dragCover,ce=ee.filter(function(ze){return h(ze).trace.visible}).map(P.bind(null,le)),xe=K.selectAll("."+v.cn.sankey).data(ce,l);xe.exit().remove(),xe.enter().append("g").classed(v.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Z?"none":"auto").attr("transform",O),xe.each(function(ze,Ce){ie._fullData[Ce]._sankey=ze;var Oe="bgsankey-"+ze.trace.uid+"-"+Ce;o.ensureSingle(ie._fullLayout._draggers,"rect",Oe),ie._fullData[Ce]._bgRect=n.select("."+Oe),ie._fullData[Ce]._bgRect.style("pointer-events",Z?"none":"all").attr("width",ze.width).attr("height",ze.height).attr("x",ze.translateX).attr("y",ze.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),xe.transition().ease(v.ease).duration(v.duration).attr("transform",O);var Te=xe.selectAll("."+v.cn.sankeyLinks).data(m,l);Te.enter().append("g").classed(v.cn.sankeyLinks,!0).style("fill","none");var we=Te.selectAll("."+v.cn.sankeyLink).data(function(ze){var Ce=ze.graph.links;return Ce.filter(function(Oe){return Oe.value}).map(y.bind(null,ze))},l);we.enter().append("path").classed(v.cn.sankeyLink,!0).call(N,xe,j.linkEvents),we.style("stroke",function(ze){return V(ze)?r.tinyRGB(g(ze.linkLineColor)):ze.tinyColorHue}).style("stroke-opacity",function(ze){return V(ze)?r.opacity(ze.linkLineColor):ze.tinyColorAlpha}).style("fill",function(ze){return ze.tinyColorHue}).style("fill-opacity",function(ze){return ze.tinyColorAlpha}).style("stroke-width",function(ze){return V(ze)?ze.linkLineWidth:1}).attr("d",M()),we.style("opacity",function(){return ie._context.staticPlot||fe||re?1:0}).transition().ease(v.ease).duration(v.duration).style("opacity",1),we.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var _e=xe.selectAll("."+v.cn.sankeyNodeSet).data(m,l);_e.enter().append("g").classed(v.cn.sankeyNodeSet,!0),_e.style("cursor",function(ze){switch(ze.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ke=_e.selectAll("."+v.cn.sankeyNode).data(function(ze){var Ce=ze.graph.nodes;return ne(Ce),Ce.map(s.bind(null,ze))},l);ke.enter().append("g").classed(v.cn.sankeyNode,!0).call(_).style("opacity",function(ze){return(ie._context.staticPlot||fe)&&!ze.partOfGroup?1:0}),ke.call(N,xe,j.nodeEvents).call(B,we,j,ie),ke.transition().ease(v.ease).duration(v.duration).call(_).style("opacity",function(ze){return ze.partOfGroup?0:1}),ke.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var Ne=ke.selectAll("."+v.cn.nodeRect).data(m);Ne.enter().append("rect").classed(v.cn.nodeRect,!0).call(D),Ne.style("stroke-width",function(ze){return ze.nodeLineWidth}).style("stroke",function(ze){return r.tinyRGB(g(ze.nodeLineColor))}).style("stroke-opacity",function(ze){return r.opacity(ze.nodeLineColor)}).style("fill",function(ze){return ze.tinyColorHue}).style("fill-opacity",function(ze){return ze.tinyColorAlpha}),Ne.transition().ease(v.ease).duration(v.duration).call(D);var Ee=ke.selectAll("."+v.cn.nodeLabel).data(m);Ee.enter().append("text").classed(v.cn.nodeLabel,!0).style("cursor","default"),Ee.attr("data-notex",1).text(function(ze){return ze.node.label}).each(function(ze){var Ce=n.select(this);t.font(Ce,ze.textFont),w.convertToTspans(Ce,ie)}).attr("text-anchor",function(ze){return ze.horizontal&&ze.left?"end":"start"}).attr("transform",function(ze){var Ce=n.select(this),Oe=w.lineCount(Ce),Le=ze.textFont.size*((Oe-1)*x-p),Ge=ze.nodeLineWidth/2+A,rt=((ze.horizontal?ze.visibleHeight:ze.visibleWidth)-Le)/2;ze.horizontal&&(ze.left?Ge=-Ge:Ge+=ze.visibleWidth);var ot=ze.horizontal?"":"scale(-1,1)"+f(90);return i(ze.horizontal?Ge:rt,ze.horizontal?rt:Ge)+ot}),Ee.transition().ease(v.ease).duration(v.duration)}},81128:function(U){U.exports=function(e,d){for(var S=e.cd,n=[],E=S[0].trace,T=E._sankey.graph.nodes,v=0;v<T.length;v++){var g=T[v];if(!g.partOfGroup){var r=[(g.x0+g.x1)/2,(g.y0+g.y1)/2];E.orientation==="v"&&r.reverse(),d&&d.contains(r,!1,v,e)&&n.push({pointNumber:g.pointNumber})}}return n}},20148:function(U,F,e){var d=e(3400);U.exports=function(n,E){for(var T=0;T<n.length;T++)n[T].i=T;d.mergeArray(E.text,n,"tx"),d.mergeArray(E.texttemplate,n,"txt"),d.mergeArray(E.hovertext,n,"htx"),d.mergeArray(E.customdata,n,"data"),d.mergeArray(E.textposition,n,"tp"),E.textfont&&(d.mergeArrayCastPositive(E.textfont.size,n,"ts"),d.mergeArray(E.textfont.color,n,"tc"),d.mergeArray(E.textfont.family,n,"tf"),d.mergeArray(E.textfont.weight,n,"tw"),d.mergeArray(E.textfont.style,n,"ty"),d.mergeArray(E.textfont.variant,n,"tv"),d.mergeArray(E.textfont.textcase,n,"tC"),d.mergeArray(E.textfont.lineposition,n,"tE"),d.mergeArray(E.textfont.shadow,n,"tS"));var v=E.marker;if(v){d.mergeArrayCastPositive(v.size,n,"ms"),d.mergeArrayCastPositive(v.opacity,n,"mo"),d.mergeArray(v.symbol,n,"mx"),d.mergeArray(v.angle,n,"ma"),d.mergeArray(v.standoff,n,"mf"),d.mergeArray(v.color,n,"mc");var g=v.line;v.line&&(d.mergeArray(g.color,n,"mlc"),d.mergeArrayCastPositive(g.width,n,"mlw"));var r=v.gradient;r&&r.type!=="none"&&(d.mergeArray(r.type,n,"mgt"),d.mergeArray(r.color,n,"mgc"))}}},52904:function(U,F,e){var d=e(29736).axisHoverFormat,S=e(21776).Gw,n=e(21776).Ks,E=e(49084),T=e(25376),v=e(98192).u,g=e(98192).c,r=e(43616),t=e(88200),o=e(92880).extendFlat,i=e(98304);function f(m){return{valType:"any",dflt:0,editType:"calc"}}function u(m){return{valType:"any",editType:"calc"}}function l(m){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}U.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:f(),yperiod:f(),xperiod0:u(),yperiod0:u(),xperiodalignment:l(),yperiodalignment:l(),xhoverformat:d("x"),yhoverformat:d("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:S({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:n({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:o({},v,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:i(!0),fillgradient:o({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:g,marker:o({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:o({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},E("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},E("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:T({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(U,F,e){var d=e(38248),S=e(3400),n=e(54460),E=e(1220),T=e(39032).BADNUM,v=e(43028),g=e(90136),r=e(20148),t=e(4500);function o(h,w){var c=h._fullLayout,a=w._xA=n.getFromId(h,w.xaxis||"x","x"),p=w._yA=n.getFromId(h,w.yaxis||"y","y"),x=a.makeCalcdata(w,"x"),A=p.makeCalcdata(w,"y"),P=E(w,a,"x",x),y=E(w,p,"y",A),C=P.vals,M=y.vals,s=w._length,_=new Array(s),b=w.ids,k=m(w,c,a,p),D=!1,V,O,N,B,z,H;u(c,w);var X="x",$="y",ne;if(k)S.pushUnique(k.traceIndices,w._expandedIndex),V=k.orientation==="v",V?($="s",ne="x"):(X="s",ne="y"),z=k.stackgaps==="interpolate";else{var q=f(w,s);i(h,w,a,p,C,M,q)}var ue=!!w.xperiodalignment,te=!!w.yperiodalignment;for(O=0;O<s;O++){var J=_[O]={},ie=d(C[O]),K=d(M[O]);ie&&K?(J[X]=C[O],J[$]=M[O],ue&&(J.orig_x=x[O],J.xEnd=P.ends[O],J.xStart=P.starts[O]),te&&(J.orig_y=A[O],J.yEnd=y.ends[O],J.yStart=y.starts[O])):k&&(V?ie:K)?(J[ne]=V?C[O]:M[O],J.gap=!0,z?(J.s=T,D=!0):J.s=0):J[X]=J[$]=T,b&&(J.id=String(b[O]))}if(r(_,w),g(h,w),t(_,w),k){for(O=0;O<_.length;)_[O][ne]===T?_.splice(O,1):O++;if(S.sort(_,function(Z,fe){return Z[ne]-fe[ne]||Z.i-fe.i}),D){for(O=0;O<_.length-1&&_[O].gap;)O++;for(H=_[O].s,H||(H=_[O].s=0),N=0;N<O;N++)_[N].s=H;for(B=_.length-1;B>O&&_[B].gap;)B--;for(H=_[B].s,N=_.length-1;N>B;N--)_[N].s=H;for(;O<B;)if(O++,_[O].gap){for(N=O+1;_[N].gap;)N++;for(var ee=_[O-1][ne],le=_[O-1].s,j=(_[N].s-le)/(_[N][ne]-ee);O<N;)_[O].s=le+(_[O][ne]-ee)*j,O++}}}return _}function i(h,w,c,a,p,x,A){var P=w._length,y=h._fullLayout,C=c._id,M=a._id,s=y._firstScatter[l(w)]===w.uid,_=(m(w,y,c,a)||{}).orientation,b=w.fill;c._minDtick=0,a._minDtick=0;var k={padded:!0},D={padded:!0};A&&(k.ppad=D.ppad=A);var V=P<2||p[0]!==p[P-1]||x[0]!==x[P-1];V&&(b==="tozerox"||b==="tonextx"&&(s||_==="h"))?k.tozero=!0:!(w.error_y||{}).visible&&(b==="tonexty"||b==="tozeroy"||!v.hasMarkers(w)&&!v.hasText(w))&&(k.padded=!1,k.ppad=0),V&&(b==="tozeroy"||b==="tonexty"&&(s||_==="v"))?D.tozero=!0:(b==="tonextx"||b==="tozerox")&&(D.padded=!1),C&&(w._extremes[C]=n.findExtremes(c,p,k)),M&&(w._extremes[M]=n.findExtremes(a,x,D))}function f(h,w){if(v.hasMarkers(h)){var c=h.marker,a=1.6*(h.marker.sizeref||1),p;if(h.marker.sizemode==="area"?p=function(C){return Math.max(Math.sqrt((C||0)/a),3)}:p=function(C){return Math.max((C||0)/a,3)},S.isArrayOrTypedArray(c.size)){var x={type:"linear"};n.setConvert(x);for(var A=x.makeCalcdata(h.marker,"size"),P=new Array(w),y=0;y<w;y++)P[y]=p(A[y]);return P}else return p(c.size)}}function u(h,w){var c=l(w),a=h._firstScatter;a[c]||(a[c]=w.uid)}function l(h){var w=h.stackgroup;return h.xaxis+h.yaxis+h.type+(w?"-"+w:"")}function m(h,w,c,a){var p=h.stackgroup;if(p){var x=w._scatterStackOpts[c._id+a._id][p],A=x.orientation==="v"?a:c;if(A.type==="linear"||A.type==="log")return x}}U.exports={calc:o,calcMarkerSize:f,calcAxisExpansion:i,setFirstScatter:u,getStackOpts:m}},4500:function(U,F,e){var d=e(3400);U.exports=function(n,E){d.isArrayOrTypedArray(E.selectedpoints)&&d.tagSelected(n,E)}},90136:function(U,F,e){var d=e(94288).hasColorscale,S=e(47128),n=e(43028);U.exports=function(T,v){n.hasLines(v)&&d(v,"line")&&S(T,v,{vals:v.line.color,containerStr:"line",cLetter:"c"}),n.hasMarkers(v)&&(d(v,"marker")&&S(T,v,{vals:v.marker.color,containerStr:"marker",cLetter:"c"}),d(v,"marker.line")&&S(T,v,{vals:v.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(U){U.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(U,F,e){var d=e(16356),S=e(96376).setGroupPositions;function n(v,g){for(var r=g.xaxis,t=g.yaxis,o=v._fullLayout,i=v._fullData,f=v.calcdata,u=[],l=[],m=0;m<i.length;m++){var h=i[m];h.visible===!0&&h.type==="scatter"&&h.xaxis===r._id&&h.yaxis===t._id&&(h.orientation==="h"?u.push(f[m]):h.orientation==="v"&&l.push(f[m]))}var w={mode:o.scattermode,gap:o.scattergap};S(v,r,t,l,w),S(v,t,r,u,w)}U.exports=function(g,r){g._fullLayout.scattermode==="group"&&n(g,r);var t=r.xaxis,o=r.yaxis,i=t._id+o._id,f=g._fullLayout._scatterStackOpts[i];if(f){var u=g.calcdata,l,m,h,w,c,a,p,x,A,P,y,C,M,s,_;for(var b in f){P=f[b];var k=P.traceIndices;if(k.length){for(y=P.stackgaps==="interpolate",C=P.groupnorm,P.orientation==="v"?(M="x",s="y"):(M="y",s="x"),_=new Array(k.length),l=0;l<_.length;l++)_[l]=!1;a=u[k[0]];var D=new Array(a.length);for(l=0;l<a.length;l++)D[l]=a[l][M];for(l=1;l<k.length;l++){for(c=u[k[l]],m=h=0;m<c.length;m++){for(p=c[m][M];p>D[h]&&h<D.length;h++)E(c,m,D[h],l,_,y,M),m++;if(p!==D[h]){for(w=0;w<l;w++)E(u[k[w]],h,p,w,_,y,M);D.splice(h,0,p)}h++}for(;h<D.length;h++)E(c,m,D[h],l,_,y,M),m++}var V=D.length;for(m=0;m<a.length;m++){for(x=a[m][s]=a[m].s,l=1;l<k.length;l++)c=u[k[l]],c[0].trace._rawLength=c[0].trace._length,c[0].trace._length=V,x+=c[m].s,c[m][s]=x;if(C)for(A=(C==="fraction"?x:x/100)||1,l=0;l<k.length;l++){var O=u[k[l]][m];O[s]/=A,O.sNorm=O.s/A}}for(l=0;l<k.length;l++){c=u[k[l]];var N=c[0].trace,B=d.calcMarkerSize(N,N._rawLength),z=Array.isArray(B);if(B&&_[l]||z){var H=B;for(B=new Array(V),m=0;m<V;m++)B[m]=c[m].gap?0:z?H[c[m].i]:H}var X=new Array(V),$=new Array(V);for(m=0;m<V;m++)X[m]=c[m].x,$[m]=c[m].y;d.calcAxisExpansion(g,N,t,o,X,$,B),c[0].t.orientation=P.orientation}}}}};function E(v,g,r,t,o,i,f){o[t]=!0;var u={i:null,gap:!0,s:0};if(u[f]=r,v.splice(g,0,u),g&&r===v[g-1][f]){var l=v[g-1];u.s=l.s,u.i=l.i,u.gap=l.gap}else i&&(u.s=T(v,g,r,f));g||(v[0].t=v[1].t,v[0].trace=v[1].trace,delete v[1].t,delete v[1].trace)}function T(v,g,r,t){var o=v[g-1],i=v[g+1];return i?o?o.s+(i.s-o.s)*(r-o[t])/(i[t]-o[t]):i.s:o.s}},35036:function(U,F,e){var d=e(3400),S=e(20011),n=e(52904);U.exports=function(T,v){var g,r,t;function o(m){return d.coerce(r._input,r,n,m)}if(v.scattermode==="group")for(t=0;t<T.length;t++)r=T[t],r.type==="scatter"&&(g=r._input,S(g,r,v,o));for(t=0;t<T.length;t++){var i=T[t];if(i.type==="scatter"){var f=i.fill;if(!(f==="none"||f==="toself")&&(i.opacity=void 0,f==="tonexty"||f==="tonextx"))for(var u=t-1;u>=0;u--){var l=T[u];if(l.type==="scatter"&&l.xaxis===i.xaxis&&l.yaxis===i.yaxis){l.opacity=void 0;break}}}}}},18800:function(U,F,e){var d=e(3400),S=e(24040),n=e(52904),E=e(88200),T=e(43028),v=e(43980),g=e(31147),r=e(43912),t=e(74428),o=e(66828),i=e(11731),f=e(124),u=e(70840),l=e(3400).coercePattern;U.exports=function(h,w,c,a){function p(_,b){return d.coerce(h,w,n,_,b)}var x=v(h,w,a,p);if(x||(w.visible=!1),!!w.visible){g(h,w,a,p),p("xhoverformat"),p("yhoverformat"),p("zorder");var A=r(h,w,a,p);a.scattermode==="group"&&w.orientation===void 0&&p("orientation","v");var P=!A&&x<E.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("mode",P),T.hasMarkers(w)&&t(h,w,c,a,p,{gradient:!0}),T.hasLines(w)&&(o(h,w,c,a,p,{backoff:!0}),i(h,w,p),p("connectgaps"),p("line.simplify")),T.hasText(w)&&(p("texttemplate"),f(h,w,a,p));var y=[];(T.hasMarkers(w)||T.hasText(w))&&(p("cliponaxis"),p("marker.maxdisplayed"),y.push("points")),p("fill",A?A.fillDflt:"none"),w.fill!=="none"&&(u(h,w,c,p,{moduleHasFillgradient:!0}),T.hasLines(w)||i(h,w,p),l(p,"fillpattern",w.fillcolor,!1));var C=(w.line||{}).color,M=(w.marker||{}).color;(w.fill==="tonext"||w.fill==="toself")&&y.push("fills"),p("hoveron",y.join("+")||"points"),w.hoveron!=="fills"&&p("hovertemplate");var s=S.getComponentMethod("errorbars","supplyDefaults");s(h,w,C||M||c,{axis:"y"}),s(h,w,C||M||c,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(w,p)}}},98304:function(U){U.exports=function(e){return{valType:"color",editType:"style",anim:!0}}},70840:function(U,F,e){var d=e(76308),S=e(3400).isArrayOrTypedArray;function n(E){for(var T=d.interpolate(E[0][1],E[1][1],.5),v=2;v<E.length;v++){var g=d.interpolate(E[v-1][1],E[v][1],.5);T=d.interpolate(T,g,E[v-1][0]/E[v][0])}return T}U.exports=function(T,v,g,r,t){t||(t={});var o=!1;if(v.marker){var i=v.marker.color,f=(v.marker.line||{}).color;i&&!S(i)?o=i:f&&!S(f)&&(o=f)}var u;if(t.moduleHasFillgradient){var l=r("fillgradient.type");if(l!=="none"){r("fillgradient.start"),r("fillgradient.stop");var m=r("fillgradient.colorscale");m&&(u=n(m))}}r("fillcolor",d.addOpacity((v.line||{}).color||o||u||g,.5))}},76688:function(U,F,e){var d=e(54460);U.exports=function(n,E,T){var v={},g={_fullLayout:T},r=d.getFromTrace(g,E,"x"),t=d.getFromTrace(g,E,"y"),o=n.orig_x;o===void 0&&(o=n.x);var i=n.orig_y;return i===void 0&&(i=n.y),v.xLabel=d.tickText(r,r.c2l(o),!0).text,v.yLabel=d.tickText(t,t.c2l(i),!0).text,v}},44928:function(U,F,e){var d=e(76308),S=e(43028);U.exports=function(E,T){var v,g;if(E.mode==="lines")return v=E.line.color,v&&d.opacity(v)?v:E.fillcolor;if(E.mode==="none")return E.fill?E.fillcolor:"";var r=T.mcc||(E.marker||{}).color,t=T.mlcc||((E.marker||{}).line||{}).color;return g=r&&d.opacity(r)?r:t&&d.opacity(t)&&(T.mlw||((E.marker||{}).line||{}).width)?t:"",g?d.opacity(g)<.3?d.addOpacity(g,.3):g:(v=(E.line||{}).color,v&&d.opacity(v)&&S.hasLines(E)&&E.line.width?v:E.fillcolor)}},20011:function(U,F,e){var d=e(71888).getAxisGroup;U.exports=function(n,E,T,v){var g=E.orientation,r=E[{v:"x",h:"y"}[g]+"axis"],t=d(T,r)+g,o=T._alignmentOpts||{},i=v("alignmentgroup"),f=o[t];f||(f=o[t]={});var u=f[i];u?u.traces.push(E):u=f[i]={traces:[E],alignmentIndex:Object.keys(f).length,offsetGroups:{}};var l=v("offsetgroup"),m=u.offsetGroups,h=m[l];l&&(h||(h=m[l]={offsetIndex:Object.keys(m).length}),E._offsetIndex=h.offsetIndex)}},98723:function(U,F,e){var d=e(3400),S=e(93024),n=e(24040),E=e(44928),T=e(76308),v=d.fillText;U.exports=function(r,t,o,i){var f=r.cd,u=f[0].trace,l=r.xa,m=r.ya,h=l.c2p(t),w=m.c2p(o),c=[h,w],a=u.hoveron||"",p=u.mode.indexOf("markers")!==-1?3:.5,x=!!u.xperiodalignment,A=!!u.yperiodalignment;if(a.indexOf("points")!==-1){var P=function(ne){if(x){var q=l.c2p(ne.xStart),ue=l.c2p(ne.xEnd);return h>=Math.min(q,ue)&&h<=Math.max(q,ue)?0:1/0}var te=Math.max(3,ne.mrc||0),J=1-1/te,ie=Math.abs(l.c2p(ne.x)-h);return ie<te?J*ie/te:ie-te+J},y=function(ne){if(A){var q=m.c2p(ne.yStart),ue=m.c2p(ne.yEnd);return w>=Math.min(q,ue)&&w<=Math.max(q,ue)?0:1/0}var te=Math.max(3,ne.mrc||0),J=1-1/te,ie=Math.abs(m.c2p(ne.y)-w);return ie<te?J*ie/te:ie-te+J},C=function(ne){var q=Math.max(p,ne.mrc||0),ue=l.c2p(ne.x)-h,te=m.c2p(ne.y)-w;return Math.max(Math.sqrt(ue*ue+te*te)-q,1-p/q)},M=S.getDistanceFunction(i,P,y,C);if(S.getClosest(f,M,r),r.index!==!1){var s=f[r.index],_=l.c2p(s.x,!0),b=m.c2p(s.y,!0),k=s.mrc||1;r.index=s.i;var D=f[0].t.orientation,V=D&&(s.sNorm||s.s),O=D==="h"?V:s.orig_x!==void 0?s.orig_x:s.x,N=D==="v"?V:s.orig_y!==void 0?s.orig_y:s.y;return d.extendFlat(r,{color:E(u,s),x0:_-k,x1:_+k,xLabelVal:O,y0:b-k,y1:b+k,yLabelVal:N,spikeDistance:C(s),hovertemplate:u.hovertemplate}),v(s,u,r),n.getComponentMethod("errorbars","hoverInfo")(s,u,r),[r]}}function B(ne){if(!ne)return!1;var q=ne.node();try{var ue=new DOMPoint(c[0],c[1]);return q.isPointInFill(ue)}catch{var te=q.ownerSVGElement.createSVGPoint();return te.x=c[0],te.y=c[1],q.isPointInFill(te)}}function z(ne){var q,ue=[],te=1/0,J=-1/0,ie=1/0,K=-1/0,ee;for(q=0;q<ne.length;q++){var le=ne[q];le.contains(c)&&(ue.push(le),ie=Math.min(ie,le.ymin),K=Math.max(K,le.ymax))}if(ue.length===0)return null;ie=Math.max(ie,0),K=Math.min(K,m._length),ee=(ie+K)/2;var j,Z,fe,re,ce,xe,Te;for(q=0;q<ue.length;q++)for(Z=ue[q].pts,j=1;j<Z.length;j++)xe=Z[j-1][1],Te=Z[j][1],xe>ee!=Te>=ee&&(re=Z[j-1][0],ce=Z[j][0],Te-xe&&(fe=re+(ce-re)*(ee-xe)/(Te-xe),te=Math.min(te,fe),J=Math.max(J,fe)));return te=Math.max(te,0),J=Math.min(J,l._length),{x0:te,x1:J,y0:ee,y1:ee}}if(a.indexOf("fills")!==-1&&u._fillElement){var H=B(u._fillElement)&&!B(u._fillExclusionElement);if(H){var X=z(u._polygons);X===null&&(X={x0:c[0],x1:c[0],y0:c[1],y1:c[1]});var $=T.defaultLine;return T.opacity(u.fillcolor)?$=u.fillcolor:T.opacity((u.line||{}).color)&&($=u.line.color),d.extendFlat(r,{distance:r.maxHoverDistance,x0:X.x0,x1:X.x1,y0:X.y0,y1:X.y1,color:$,hovertemplate:!1}),delete r.index,u.text&&!d.isArrayOrTypedArray(u.text)?r.text=String(u.text):r.text=u.name,[r]}}}},65875:function(U,F,e){var d=e(43028);U.exports={hasLines:d.hasLines,hasMarkers:d.hasMarkers,hasText:d.hasText,isBubble:d.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(U){U.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(U,F,e){var d=e(3400),S=e(55308);U.exports=function(n,E){function T(g,r){return d.coerce(n,E,S,g,r)}var v=E.barmode==="group";E.scattermode==="group"&&T("scattergap",v?E.bargap:.2)}},66828:function(U,F,e){var d=e(3400).isArrayOrTypedArray,S=e(94288).hasColorscale,n=e(27260);U.exports=function(T,v,g,r,t,o){o||(o={});var i=(T.marker||{}).color;if(i&&i._inputArray&&(i=i._inputArray),t("line.color",g),S(T,"line"))n(T,v,r,t,{prefix:"line.",cLetter:"c"});else{var f=(d(i)?!1:i)||g;t("line.color",f)}t("line.width"),o.noDash||t("line.dash"),o.backoff&&t("line.backoff")}},52340:function(U,F,e){var d=e(43616),S=e(39032),n=S.BADNUM,E=S.LOG_CLIP,T=E+.5,v=E-.5,g=e(3400),r=g.segmentsIntersect,t=g.constrain,o=e(88200);U.exports=function(f,u){var l=u.trace||{},m=u.xaxis,h=u.yaxis,w=m.type==="log",c=h.type==="log",a=m._length,p=h._length,x=u.backoff,A=l.marker,P=u.connectGaps,y=u.baseTolerance,C=u.shape,M=C==="linear",s=l.fill&&l.fill!=="none",_=[],b=o.minTolerance,k=f.length,D=new Array(k),V=0,O,N,B,z,H,X,$,ne,q,ue,te,J,ie,K,ee,le;function j(st){var lt=f[st];if(!lt)return!1;var Gt=u.linearized?m.l2p(lt.x):m.c2p(lt.x),Zt=u.linearized?h.l2p(lt.y):h.c2p(lt.y);if(Gt===n){if(w&&(Gt=m.c2p(lt.x,!0)),Gt===n)return!1;c&&Zt===n&&(Gt*=Math.abs(m._m*p*(m._m>0?T:v)/(h._m*a*(h._m>0?T:v)))),Gt*=1e3}if(Zt===n){if(c&&(Zt=h.c2p(lt.y,!0)),Zt===n)return!1;Zt*=1e3}return[Gt,Zt]}function Z(st,lt,Gt,Zt){var Tt=Gt-st,It=Zt-lt,Xt=.5-st,gr=.5-lt,gt=Tt*Tt+It*It,jt=Tt*Xt+It*gr;if(jt>0&&jt<gt){var Qt=Xt*It-gr*Tt;if(Qt*Qt<gt)return!0}}var fe,re;function ce(st,lt){var Gt=st[0]/a,Zt=st[1]/p,Tt=Math.max(0,-Gt,Gt-1,-Zt,Zt-1);return Tt&&fe!==void 0&&Z(Gt,Zt,fe,re)&&(Tt=0),Tt&&lt&&Z(Gt,Zt,lt[0]/a,lt[1]/p)&&(Tt=0),(1+o.toleranceGrowth*Tt)*y}function xe(st,lt){var Gt=st[0]-lt[0],Zt=st[1]-lt[1];return Math.sqrt(Gt*Gt+Zt*Zt)}var Te=o.maxScreensAway,we=-a*Te,_e=a*(1+Te),ke=-p*Te,Ne=p*(1+Te),Ee=[[we,ke,_e,ke],[_e,ke,_e,Ne],[_e,Ne,we,Ne],[we,Ne,we,ke]],ze,Ce,Oe,Le,Ge,rt;function ot(st,lt){for(var Gt=[],Zt=0,Tt=0;Tt<4;Tt++){var It=Ee[Tt],Xt=r(st[0],st[1],lt[0],lt[1],It[0],It[1],It[2],It[3]);Xt&&(!Zt||Math.abs(Xt.x-Gt[0][0])>1||Math.abs(Xt.y-Gt[0][1])>1)&&(Xt=[Xt.x,Xt.y],Zt&&xe(Xt,st)<xe(Gt[0],st)?Gt.unshift(Xt):Gt.push(Xt),Zt++)}return Gt}function $e(st){if(st[0]<we||st[0]>_e||st[1]<ke||st[1]>Ne)return[t(st[0],we,_e),t(st[1],ke,Ne)]}function qe(st,lt){if(st[0]===lt[0]&&(st[0]===we||st[0]===_e)||st[1]===lt[1]&&(st[1]===ke||st[1]===Ne))return!0}function ht(st,lt){var Gt=[],Zt=$e(st),Tt=$e(lt);return Zt&&Tt&&qe(Zt,Tt)||(Zt&&Gt.push(Zt),Tt&&Gt.push(Tt)),Gt}function vt(st,lt,Gt){return function(Zt,Tt){var It=$e(Zt),Xt=$e(Tt),gr=[];if(It&&Xt&&qe(It,Xt))return gr;It&&gr.push(It),Xt&&gr.push(Xt);var gt=2*g.constrain((Zt[st]+Tt[st])/2,lt,Gt)-((It||Zt)[st]+(Xt||Tt)[st]);if(gt){var jt;It&&Xt?jt=gt>0==It[st]>Xt[st]?It:Xt:jt=It||Xt,jt[st]+=gt}return gr}}var pt;C==="linear"||C==="spline"?pt=ot:C==="hv"||C==="vh"?pt=ht:C==="hvh"?pt=vt(0,we,_e):C==="vhv"&&(pt=vt(1,ke,Ne));function wt(st,lt){var Gt=lt[0]-st[0],Zt=(lt[1]-st[1])/Gt,Tt=(st[1]*lt[0]-lt[1]*st[0])/Gt;return Tt>0?[Zt>0?we:_e,Ne]:[Zt>0?_e:we,ke]}function Et(st){var lt=st[0],Gt=st[1],Zt=lt===D[V-1][0],Tt=Gt===D[V-1][1];if(!(Zt&&Tt))if(V>1){var It=lt===D[V-2][0],Xt=Gt===D[V-2][1];Zt&&(lt===we||lt===_e)&&It?Xt?V--:D[V-1]=st:Tt&&(Gt===ke||Gt===Ne)&&Xt?It?V--:D[V-1]=st:D[V++]=st}else D[V++]=st}function nt(st){D[V-1][0]!==st[0]&&D[V-1][1]!==st[1]&&Et([Oe,Le]),Et(st),Ge=null,Oe=Le=0}var Fe=g.isArrayOrTypedArray(A);function We(st){if(st&&x&&(st.i=O,st.d=f,st.trace=l,st.marker=Fe?A[st.i]:A,st.backoff=x),fe=st[0]/a,re=st[1]/p,ze=st[0]<we?we:st[0]>_e?_e:0,Ce=st[1]<ke?ke:st[1]>Ne?Ne:0,ze||Ce){if(!V)D[V++]=[ze||st[0],Ce||st[1]];else if(Ge){var lt=pt(Ge,st);lt.length>1&&(nt(lt[0]),D[V++]=lt[1])}else rt=pt(D[V-1],st)[0],D[V++]=rt;var Gt=D[V-1];ze&&Ce&&(Gt[0]!==ze||Gt[1]!==Ce)?(Ge&&(Oe!==ze&&Le!==Ce?Et(Oe&&Le?wt(Ge,st):[Oe||ze,Le||Ce]):Oe&&Le&&Et([Oe,Le])),Et([ze,Ce])):Oe-ze&&Le-Ce&&Et([ze||Oe,Ce||Le]),Ge=st,Oe=ze,Le=Ce}else Ge&&nt(pt(Ge,st)[0]),D[V++]=st}for(O=0;O<k;O++)if(N=j(O),!!N){for(V=0,Ge=null,We(N),O++;O<k;O++){if(z=j(O),!z){if(P)continue;break}if(!M||!u.simplify){We(z);continue}var Ze=j(O+1);if(ue=xe(z,N),!(!(s&&(V===0||V===k-1))&&ue<ce(z,Ze)*b)){for(ne=[(z[0]-N[0])/ue,(z[1]-N[1])/ue],H=N,te=ue,J=K=ee=0,$=!1,B=z,O++;O<f.length;O++){if(X=Ze,Ze=j(O+1),!X){if(P)continue;break}if(q=[X[0]-N[0],X[1]-N[1]],le=q[0]*ne[1]-q[1]*ne[0],K=Math.min(K,le),ee=Math.max(ee,le),ee-K>ce(X,Ze))break;B=X,ie=q[0]*ne[0]+q[1]*ne[1],ie>te?(te=ie,z=X,$=!1):ie<J&&(J=ie,H=X,$=!0)}if($?(We(z),B!==H&&We(H)):(H!==N&&We(H),B!==z&&We(z)),We(B),O>=f.length||!X)break;We(X),N=X}}Ge&&Et([Oe||Ge[0],Le||Ge[1]]),_.push(D.slice(0,V))}var Ye=C.slice(C.length-1);if(x&&Ye!=="h"&&Ye!=="v"){for(var Ie=!1,De=-1,je=[],Re=0;Re<_.length;Re++)for(var pe=0;pe<_[Re].length-1;pe++){var be=_[Re][pe],Ue=_[Re][pe+1],et=d.applyBackoff(Ue,be);(et[0]!==Ue[0]||et[1]!==Ue[1])&&(Ie=!0),je[De+1]||(De++,je[De]=[be,[et[0],et[1]]])}return Ie?je:_}return _}},11731:function(U){U.exports=function(e,d,S){var n=S("line.shape");n==="spline"&&S("line.smoothing")}},14328:function(U){var F={tonextx:1,tonexty:1,tonext:1};U.exports=function(d,S,n){var E,T,v,g,r,t={},o=!1,i=-1,f=0,u=-1;for(T=0;T<n.length;T++)E=n[T][0].trace,v=E.stackgroup||"",v?v in t?r=t[v]:(r=t[v]=f,f++):E.fill in F&&u>=0?r=u:(r=u=f,f++),r<i&&(o=!0),E._groupIndex=i=r;var l=n.slice();o&&l.sort(function(h,w){var c=h[0].trace,a=w[0].trace;return c._groupIndex-a._groupIndex||c.index-a.index});var m={};for(T=0;T<l.length;T++)E=l[T][0].trace,v=E.stackgroup||"",E.visible===!0?(E._nexttrace=null,E.fill in F&&(g=m[v],E._prevtrace=g||null,g&&(g._nexttrace=E)),E._ownfill=E.fill&&(E.fill.substr(0,6)==="tozero"||E.fill==="toself"||E.fill.substr(0,2)==="to"&&!E._prevtrace),m[v]=E):E._prevtrace=E._nexttrace=E._ownfill=null;return l}},7152:function(U,F,e){var d=e(38248);U.exports=function(n,E){E||(E=2);var T=n.marker,v=T.sizeref||1,g=T.sizemin||0,r=T.sizemode==="area"?function(t){return Math.sqrt(t/v)}:function(t){return t/v};return function(t){var o=r(t/E);return d(o)&&o>0?Math.max(o,g):0}}},5528:function(U){U.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(U,F,e){var d=e(76308),S=e(94288).hasColorscale,n=e(27260),E=e(43028);U.exports=function(v,g,r,t,o,i){var f=E.isBubble(v),u=(v.line||{}).color,l;if(i=i||{},u&&(r=u),o("marker.symbol"),o("marker.opacity",f?.7:1),o("marker.size"),i.noAngle||(o("marker.angle"),i.noAngleRef||o("marker.angleref"),i.noStandOff||o("marker.standoff")),o("marker.color",r),S(v,"marker")&&n(v,g,t,o,{prefix:"marker.",cLetter:"c"}),i.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),i.noLine||(u&&!Array.isArray(u)&&g.marker.color!==u?l=u:f?l=d.background:l=d.defaultLine,o("marker.line.color",l),S(v,"marker.line")&&n(v,g,t,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",f?1:0)),f&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),i.gradient){var m=o("marker.gradient.type");m!=="none"&&o("marker.gradient.color")}}},31147:function(U,F,e){var d=e(3400).dateTick0,S=e(39032),n=S.ONEWEEK;function E(T,v){return T%n===0?d(v,1):d(v,0)}U.exports=function(v,g,r,t,o){if(o||(o={x:!0,y:!0}),o.x){var i=t("xperiod");i&&(t("xperiod0",E(i,g.xcalendar)),t("xperiodalignment"))}if(o.y){var f=t("yperiod");f&&(t("yperiod0",E(f,g.ycalendar)),t("yperiodalignment"))}}},96504:function(U,F,e){var d=e(33428),S=e(24040),n=e(3400),E=n.ensureSingle,T=n.identity,v=e(43616),g=e(43028),r=e(52340),t=e(14328),o=e(92065).tester;U.exports=function(m,h,w,c,a,p){var x,A,P=!a,y=!!a&&a.duration>0,C=t(m,h,w);if(x=c.selectAll("g.trace").data(C,function(s){return s[0].trace.uid}),x.enter().append("g").attr("class",function(s){return"trace scatter trace"+s[0].trace.uid}).style("stroke-miterlimit",2),x.order(),i(m,x,h),y){p&&(A=p());var M=d.transition().duration(a.duration).ease(a.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()});M.each(function(){c.selectAll("g.trace").each(function(s,_){f(m,_,h,s,C,this,a)})})}else x.each(function(s,_){f(m,_,h,s,C,this,a)});P&&x.exit().remove(),c.selectAll("path:not([d])").remove()};function i(l,m,h){m.each(function(w){var c=E(d.select(this),"g","fills");v.setClipUrl(c,h.layerClipId,l);var a=w[0].trace,p=[];a._ownfill&&p.push("_ownFill"),a._nexttrace&&p.push("_nextFill");var x=c.selectAll("g").data(p,T);x.enter().append("g"),x.exit().each(function(A){a[A]=null}).remove(),x.order().each(function(A){a[A]=E(d.select(this),"path","js-fill")})})}function f(l,m,h,w,c,a,p){var x=l._context.staticPlot,A;u(l,m,h,w,c);var P=!!p&&p.duration>0;function y(Et){return P?Et.transition():Et}var C=h.xaxis,M=h.yaxis,s=w[0].trace,_=s.line,b=d.select(a),k=E(b,"g","errorbars"),D=E(b,"g","lines"),V=E(b,"g","points"),O=E(b,"g","text");if(S.getComponentMethod("errorbars","plot")(l,k,h,p),s.visible!==!0)return;y(b).style("opacity",s.opacity);var N,B,z=s.fill.charAt(s.fill.length-1);z!=="x"&&z!=="y"&&(z="");var H,X;z==="y"?(H=1,X=M.c2p(0,!0)):z==="x"&&(H=0,X=C.c2p(0,!0)),w[0][h.isRangePlot?"nodeRangePlot3":"node3"]=b;var $="",ne=[],q=s._prevtrace,ue=null,te=null;q&&($=q._prevRevpath||"",B=q._nextFill,ne=q._ownPolygons,ue=q._fillsegments,te=q._fillElement);var J,ie,K="",ee="",le,j,Z,fe,re,ce,xe=[];s._polygons=[];var Te=[],we=[],_e=n.noop;if(N=s._ownFill,g.hasLines(s)||s.fill!=="none"){B&&B.datum(w),["hv","vh","hvh","vhv"].indexOf(_.shape)!==-1?(le=v.steps(_.shape),j=v.steps(_.shape.split("").reverse().join(""))):_.shape==="spline"?le=j=function(Et){var nt=Et[Et.length-1];return Et.length>1&&Et[0][0]===nt[0]&&Et[0][1]===nt[1]?v.smoothclosed(Et.slice(1),_.smoothing):v.smoothopen(Et,_.smoothing)}:le=j=function(Et){return"M"+Et.join("L")},Z=function(Et){return j(Et.reverse())},we=r(w,{xaxis:C,yaxis:M,trace:s,connectGaps:s.connectgaps,baseTolerance:Math.max(_.width||1,3)/4,shape:_.shape,backoff:_.backoff,simplify:_.simplify,fill:s.fill}),Te=new Array(we.length);var ke=0;for(A=0;A<we.length;A++){var Ne,Ee=we[A];!Ne||!z?(Ne=Ee.slice(),Te[ke]=Ne,ke++):Ne.push.apply(Ne,Ee)}s._fillElement=null,s._fillExclusionElement=te,s._fillsegments=Te.slice(0,ke),Te=s._fillsegments,we.length&&(fe=we[0][0].slice(),re=we[we.length-1],ce=re[re.length-1].slice()),_e=function(Et){return function(nt){if(J=le(nt),ie=Z(nt),K?z?(K+="L"+J.substr(1),ee=ie+("L"+ee.substr(1))):(K+="Z"+J,ee=ie+"Z"+ee):(K=J,ee=ie),g.hasLines(s)){var Fe=d.select(this);if(Fe.datum(w),Et)y(Fe.style("opacity",0).attr("d",J).call(v.lineGroupStyle)).style("opacity",1);else{var We=y(Fe);We.attr("d",J),v.singleLineStyle(w,We)}}}}}var ze=D.selectAll(".js-line").data(we);y(ze.exit()).style("opacity",0).remove(),ze.each(_e(!1)),ze.enter().append("path").classed("js-line",!0).style("vector-effect",x?"none":"non-scaling-stroke").call(v.lineGroupStyle).each(_e(!0)),v.setClipUrl(ze,h.layerClipId,l);function Ce(Et){y(Et).attr("d","M0,0Z")}var Oe=function(){var Et=new Array(Te.length);for(A=0;A<Te.length;A++)Et[A]=o(Te[A]);return Et},Le=function(Et){var nt,Fe;if(!Et||Et.length===0)for(nt=new Array(Te.length),Fe=0;Fe<Te.length;Fe++){var We=Te[Fe][0].slice(),Ze=Te[Fe][Te[Fe].length-1].slice();We[H]=Ze[H]=X;var Ye=[Ze,We],Ie=Ye.concat(Te[Fe]);nt[Fe]=o(Ie)}else{for(nt=new Array(Et.length-1+Te.length),Fe=0;Fe<Et.length-1;Fe++)nt[Fe]=o(Et[Fe]);var De=Et[Et.length-1].slice();for(De.reverse(),Fe=0;Fe<Te.length;Fe++)nt[Et.length-1+Fe]=o(Te[Fe].concat(De))}return nt};we.length?(N?(N.datum(w),fe&&ce&&(z?(fe[H]=ce[H]=X,y(N).attr("d","M"+ce+"L"+fe+"L"+K.substr(1)).call(v.singleFillStyle,l),xe=Le(null)):(y(N).attr("d",K+"Z").call(v.singleFillStyle,l),xe=Oe())),s._polygons=xe,s._fillElement=N):B&&(s.fill.substr(0,6)==="tonext"&&K&&$?(s.fill==="tonext"?(y(B).attr("d",K+"Z"+$+"Z").call(v.singleFillStyle,l),xe=Oe(),s._polygons=xe.concat(ne)):(y(B).attr("d",K+"L"+$.substr(1)+"Z").call(v.singleFillStyle,l),xe=Le(ue),s._polygons=xe),s._fillElement=B):Ce(B)),s._prevRevpath=ee):(N?Ce(N):B&&Ce(B),s._prevRevpath=null),s._ownPolygons=xe;function Ge(Et){return Et.filter(function(nt){return!nt.gap&&nt.vis})}function rt(Et){return Et.filter(function(nt){return nt.vis})}function ot(Et){return Et.filter(function(nt){return!nt.gap})}function $e(Et){return Et.id}function qe(Et){if(Et.ids)return $e}function ht(){return!1}function vt(Et,nt,Fe){var We,Ze,Ye,Ie=Fe[0].trace,De=g.hasMarkers(Ie),je=g.hasText(Ie),Re=qe(Ie),pe=ht,be=ht;if(De||je){var Ue=T,et=Ie.stackgroup,st=et&&l._fullLayout._scatterStackOpts[C._id+M._id][et].stackgaps==="infer zero";Ie.marker.maxdisplayed||Ie._needsCull?Ue=st?rt:Ge:et&&!st&&(Ue=ot),De&&(pe=Ue),je&&(be=Ue)}Ze=Et.selectAll("path.point"),We=Ze.data(pe,Re);var lt=We.enter().append("path").classed("point",!0);P&&lt.call(v.pointStyle,Ie,l).call(v.translatePoints,C,M).style("opacity",0).transition().style("opacity",1),We.order();var Gt;De&&(Gt=v.makePointStyleFns(Ie)),We.each(function(Zt){var Tt=d.select(this),It=y(Tt);Ye=v.translatePoint(Zt,It,C,M),Ye?(v.singlePointStyle(Zt,It,Ie,Gt,l),h.layerClipId&&v.hideOutsideRangePoint(Zt,It,C,M,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&Tt.classed("plotly-customdata",Zt.data!==null&&Zt.data!==void 0)):It.remove()}),P?We.exit().transition().style("opacity",0).remove():We.exit().remove(),Ze=nt.selectAll("g"),We=Ze.data(be,Re),We.enter().append("g").classed("textpoint",!0).append("text"),We.order(),We.each(function(Zt){var Tt=d.select(this),It=y(Tt.select("text"));Ye=v.translatePoint(Zt,It,C,M),Ye?h.layerClipId&&v.hideOutsideRangePoint(Zt,Tt,C,M,Ie.xcalendar,Ie.ycalendar):Tt.remove()}),We.selectAll("text").call(v.textPointStyle,Ie,l).each(function(Zt){var Tt=C.c2p(Zt.x),It=M.c2p(Zt.y);d.select(this).selectAll("tspan.line").each(function(){y(d.select(this)).attr({x:Tt,y:It})})}),We.exit().remove()}V.datum(w),O.datum(w),vt(V,O,w);var pt=s.cliponaxis===!1,wt=pt?null:h.layerClipId;v.setClipUrl(V,wt,l),v.setClipUrl(O,wt,l)}function u(l,m,h,w,c){var a=h.xaxis,p=h.yaxis,x=d.extent(n.simpleMap(a.range,a.r2c)),A=d.extent(n.simpleMap(p.range,p.r2c)),P=w[0].trace;if(g.hasMarkers(P)){var y=P.marker.maxdisplayed;if(y!==0){var C=w.filter(function(b){return b.x>=x[0]&&b.x<=x[1]&&b.y>=A[0]&&b.y<=A[1]}),M=Math.ceil(C.length/y),s=0;c.forEach(function(b,k){var D=b[0].trace;g.hasMarkers(D)&&D.marker.maxdisplayed>0&&k<m&&s++});var _=Math.round(s*M/3+Math.floor(s/3)*M/7.1);w.forEach(function(b){delete b.vis}),C.forEach(function(b,k){Math.round((k+_)%M)===0&&(b.vis=!0)})}}}},91560:function(U,F,e){var d=e(43028);U.exports=function(n,E){var T=n.cd,v=n.xaxis,g=n.yaxis,r=[],t=T[0].trace,o,i,f,u,l=!d.hasMarkers(t)&&!d.hasText(t);if(l)return[];if(E===!1)for(o=0;o<T.length;o++)T[o].selected=0;else for(o=0;o<T.length;o++)i=T[o],f=v.c2p(i.x),u=g.c2p(i.y),i.i!==null&&E.contains([f,u],!1,o,n)?(r.push({pointNumber:i.i,x:v.c2d(i.x),y:g.c2d(i.y)}),i.selected=1):i.selected=0;return r}},43912:function(U){var F=["orientation","groupnorm","stackgaps"];U.exports=function(d,S,n,E){var T=n._scatterStackOpts,v=E("stackgroup");if(v){var g=S.xaxis+S.yaxis,r=T[g];r||(r=T[g]={});var t=r[v],o=!1;t?t.traces.push(S):(t=r[v]={traceIndices:[],traces:[S]},o=!0);for(var i={orientation:S.x&&!S.y?"h":"v"},f=0;f<F.length;f++){var u=F[f],l=u+"Found";if(!t[l]){var m=d[u]!==void 0,h=u==="orientation";if((m||o)&&(t[u]=E(u,i[u]),h&&(t.fillDflt=t[u]==="h"?"tonextx":"tonexty"),m&&(t[l]=!0,!o&&(delete t.traces[0][u],h))))for(var w=0;w<t.traces.length-1;w++){var c=t.traces[w];c._input.fill!==c.fill&&(c.fill=t.fillDflt)}}}return t}}},49224:function(U,F,e){var d=e(33428),S=e(43616),n=e(24040);function E(r){var t=d.select(r).selectAll("g.trace.scatter");t.style("opacity",function(o){return o[0].trace.opacity}),t.selectAll("g.points").each(function(o){var i=d.select(this),f=o.trace||o[0].trace;T(i,f,r)}),t.selectAll("g.text").each(function(o){var i=d.select(this),f=o.trace||o[0].trace;v(i,f,r)}),t.selectAll("g.trace path.js-line").call(S.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(S.fillGroupStyle,r,!1),n.getComponentMethod("errorbars","style")(t)}function T(r,t,o){S.pointStyle(r.selectAll("path.point"),t,o)}function v(r,t,o){S.textPointStyle(r.selectAll("text"),t,o)}function g(r,t,o){var i=t[0].trace;i.selectedpoints?(S.selectedPointStyle(o.selectAll("path.point"),i),S.selectedTextStyle(o.selectAll("text"),i)):(T(o,i,r),v(o,i,r))}U.exports={style:E,stylePoints:T,styleText:v,styleOnSelect:g}},43028:function(U,F,e){var d=e(3400),S=e(38116).isTypedArraySpec;U.exports={hasLines:function(n){return n.visible&&n.mode&&n.mode.indexOf("lines")!==-1},hasMarkers:function(n){return n.visible&&(n.mode&&n.mode.indexOf("markers")!==-1||n.type==="splom")},hasText:function(n){return n.visible&&n.mode&&n.mode.indexOf("text")!==-1},isBubble:function(n){var E=n.marker;return d.isPlainObject(E)&&(d.isArrayOrTypedArray(E.size)||S(E.size))}}},124:function(U,F,e){var d=e(3400);U.exports=function(S,n,E,T,v){v=v||{},T("textposition"),d.coerceFont(T,"textfont",v.font||E.font,v),v.noSelect||(T("selected.textfont.color"),T("unselected.textfont.color"))}},43980:function(U,F,e){var d=e(3400),S=e(24040);U.exports=function(E,T,v,g){var r=g("x"),t=g("y"),o,i=S.getComponentMethod("calendars","handleTraceDefaults");if(i(E,T,["x","y"],v),r){var f=d.minRowLength(r);t?o=Math.min(f,d.minRowLength(t)):(o=f,g("y0"),g("dy"))}else{if(!t)return 0;o=d.minRowLength(t),g("x0"),g("dx")}return T._length=o,o}},91592:function(U,F,e){var d=e(52904),S=e(25376),n=e(49084),E=e(29736).axisHoverFormat,T=e(21776).Ks,v=e(21776).Gw,g=e(45464),r=e(99168),t=e(87792),o=e(92880).extendFlat,i=e(67824).overrideAll,f=e(95376),u=d.line,l=d.marker,m=l.line,h=o({width:u.width,dash:{valType:"enumerated",values:f(r),dflt:"solid"}},n("line"));function w(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:.6666666666666666}}}var c=U.exports=i({x:d.x,y:d.y,z:{valType:"data_array"},text:o({},d.text,{}),texttemplate:v({},{}),hovertext:o({},d.hovertext,{}),hovertemplate:T(),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),mode:o({},d.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:w(),y:w(),z:w()},connectgaps:d.connectgaps,line:h,marker:o({symbol:{valType:"enumerated",values:f(t),dflt:"circle",arrayOk:!0},size:o({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:o({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:o({width:o({},m.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:o({},d.textposition,{dflt:"top center"}),textfont:S({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:g.opacity,hoverinfo:o({},g.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},41484:function(U,F,e){var d=e(20148),S=e(90136);U.exports=function(E,T){var v=[{x:!1,y:!1,trace:T,t:{}}];return d(v,T),S(E,T),v}},45156:function(U,F,e){var d=e(24040);function S(T,v,g,r){if(!v||!v.visible)return null;for(var t=d.getComponentMethod("errorbars","makeComputeError")(v),o=new Array(T.length),i=0;i<T.length;i++){var f=t(+T[i],i);if(r.type==="log"){var u=r.c2l(T[i]),l=T[i]-f[0],m=T[i]+f[1];if(o[i]=[(r.c2l(l,!0)-u)*g,(r.c2l(m,!0)-u)*g],l>0){var h=r.c2l(l);r._lowerLogErrorBound||(r._lowerLogErrorBound=h),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,h)}}else o[i]=[-f[0]*g,f[1]*g]}return o}function n(T){for(var v=0;v<T.length;v++)if(T[v])return T[v].length;return 0}function E(T,v,g){var r=[S(T.x,T.error_x,v[0],g.xaxis),S(T.y,T.error_y,v[1],g.yaxis),S(T.z,T.error_z,v[2],g.zaxis)],t=n(r);if(t===0)return null;for(var o=new Array(t),i=0;i<t;i++){for(var f=[[0,0,0],[0,0,0]],u=0;u<3;u++)if(r[u])for(var l=0;l<2;l++)f[l][u]=r[u][i][l];o[i]=f}return o}U.exports=E},41064:function(U,F,e){var d=e(67792).gl_line3d,S=e(67792).gl_scatter3d,n=e(67792).gl_error3d,E=e(67792).gl_mesh3d,T=e(67792).delaunay_triangulate,v=e(3400),g=e(43080),r=e(33040).formatColor,t=e(7152),o=e(99168),i=e(87792),f=e(54460),u=e(10624).appendArrayPointValue,l=e(45156);function m(b,k){this.scene=b,this.uid=k,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=m.prototype;h.handlePick=function(b){if(b.object&&(b.object===this.linePlot||b.object===this.delaunayMesh||b.object===this.textMarkers||b.object===this.scatterPlot)){var k=b.index=b.data.index;return b.object.highlight&&b.object.highlight(null),this.scatterPlot&&(b.object=this.scatterPlot,this.scatterPlot.highlight(b.data)),b.textLabel="",this.textLabels&&(v.isArrayOrTypedArray(this.textLabels)?(this.textLabels[k]||this.textLabels[k]===0)&&(b.textLabel=this.textLabels[k]):b.textLabel=this.textLabels),b.traceCoordinate=[this.data.x[k],this.data.y[k],this.data.z[k]],!0}};function w(b,k,D){var V=(D+1)%3,O=(D+2)%3,N=[],B=[],z;for(z=0;z<b.length;++z){var H=b[z];isNaN(H[V])||!isFinite(H[V])||isNaN(H[O])||!isFinite(H[O])||(N.push([H[V],H[O]]),B.push(z))}var X=T(N);for(z=0;z<X.length;++z)for(var $=X[z],ne=0;ne<$.length;++ne)$[ne]=B[$[ne]];return{positions:b,cells:X,meshColor:k}}function c(b){for(var k=[0,0,0],D=[[0,0,0],[0,0,0],[0,0,0]],V=[1,1,1],O=0;O<3;O++){var N=b[O];N&&N.copy_zstyle!==!1&&b[2].visible!==!1&&(N=b[2]),!(!N||!N.visible)&&(k[O]=N.width/2,D[O]=g(N.color),V[O]=N.thickness)}return{capSize:k,color:D,lineWidth:V}}function a(b){return b==null?0:b.indexOf("left")>-1?-1:b.indexOf("right")>-1?1:0}function p(b){return b==null?0:b.indexOf("top")>-1?-1:b.indexOf("bottom")>-1?1:0}function x(b){var k=0,D=0,V=[k,D];if(Array.isArray(b))for(var O=0;O<b.length;O++)V[O]=[k,D],b[O]&&(V[O][0]=a(b[O]),V[O][1]=p(b[O]));else V[0]=a(b),V[1]=p(b);return V}function A(b,k){return k(b*4)}function P(b){return i[b]}function y(b,k,D,V,O){var N=null;if(v.isArrayOrTypedArray(b)){N=[];for(var B=0;B<k;B++)b[B]===void 0?N[B]=V:N[B]=D(b[B],O)}else N=D(b,v.identity);return N}function C(b,k){var D=[],V=b.fullSceneLayout,O=b.dataScale,N=V.xaxis,B=V.yaxis,z=V.zaxis,H=k.marker,X=k.line,$=k.x||[],ne=k.y||[],q=k.z||[],ue=$.length,te=k.xcalendar,J=k.ycalendar,ie=k.zcalendar,K,ee,le,j,Z,fe;for(Z=0;Z<ue;Z++)K=N.d2l($[Z],0,te)*O[0],ee=B.d2l(ne[Z],0,J)*O[1],le=z.d2l(q[Z],0,ie)*O[2],D[Z]=[K,ee,le];if(Array.isArray(k.text))fe=k.text;else if(v.isTypedArray(k.text))fe=Array.from(k.text);else if(k.text!==void 0)for(fe=new Array(ue),Z=0;Z<ue;Z++)fe[Z]=k.text;function re(ot,$e){var qe=V[ot];return f.tickText(qe,qe.d2l($e),!0).text}var ce=k.texttemplate;if(ce){var xe=b.fullLayout,Te=xe._d3locale,we=Array.isArray(ce),_e=we?Math.min(ce.length,ue):ue,ke=we?function(ot){return ce[ot]}:function(){return ce};for(fe=new Array(_e),Z=0;Z<_e;Z++){var Ne={x:$[Z],y:ne[Z],z:q[Z]},Ee={xLabel:re("xaxis",$[Z]),yLabel:re("yaxis",ne[Z]),zLabel:re("zaxis",q[Z])},ze={};u(ze,k,Z);var Ce=k._meta||{};fe[Z]=v.texttemplateString(ke(Z),Ee,Te,ze,Ne,Ce)}}if(j={position:D,mode:k.mode,text:fe},"line"in k&&(j.lineColor=r(X,1,ue),j.lineWidth=X.width,j.lineDashes=X.dash),"marker"in k){var Oe=t(k);j.scatterColor=r(H,1,ue),j.scatterSize=y(H.size,ue,A,20,Oe),j.scatterMarker=y(H.symbol,ue,P,""),j.scatterLineWidth=H.line.width,j.scatterLineColor=r(H.line,1,ue),j.scatterAngle=0}"textposition"in k&&(j.textOffset=x(k.textposition),j.textColor=r(k.textfont,1,ue),j.textSize=y(k.textfont.size,ue,v.identity,12),j.textFontFamily=k.textfont.family,j.textFontWeight=k.textfont.weight,j.textFontStyle=k.textfont.style,j.textFontVariant=k.textfont.variant,j.textAngle=0);var Le=["x","y","z"];for(j.project=[!1,!1,!1],j.projectScale=[1,1,1],j.projectOpacity=[1,1,1],Z=0;Z<3;++Z){var Ge=k.projection[Le[Z]];(j.project[Z]=Ge.show)&&(j.projectOpacity[Z]=Ge.opacity,j.projectScale[Z]=Ge.scale)}j.errorBounds=l(k,O,V);var rt=c([k.error_x,k.error_y,k.error_z]);return j.errorColor=rt.color,j.errorLineWidth=rt.lineWidth,j.errorCapSize=rt.capSize,j.delaunayAxis=k.surfaceaxis,j.delaunayColor=g(k.surfacecolor),j}function M(b){if(v.isArrayOrTypedArray(b)){var k=b[0];return v.isArrayOrTypedArray(k)&&(b=k),"rgb("+b.slice(0,3).map(function(D){return Math.round(D*255)})+")"}return null}function s(b){return v.isArrayOrTypedArray(b)?b.length===4&&typeof b[0]=="number"?M(b):b.map(M):null}h.update=function(b){var k=this.scene.glplot.gl,D,V,O,N,B=o.solid;this.data=b;var z=C(this.scene,b);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in o&&(B=o[z.lineDashes]),this.color=s(z.scatterColor)||s(z.lineColor),this.dataPoints=z.position,D={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:b.opacity,connectGaps:b.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(D):(this.linePlot=d(D),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var H=b.opacity;if(b.marker&&b.marker.opacity!==void 0&&(H*=b.marker.opacity),V={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:H,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(V):(this.scatterPlot=S(V),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),N={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFontFamily,fontWeight:z.textFontWeight,fontStyle:z.textFontStyle,fontVariant:z.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:b.opacity},this.textLabels=b.hovertext||b.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(N):(this.textMarkers=S(N),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),O={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:b.opacity},this.errorBars?z.errorBounds?this.errorBars.update(O):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=n(O),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var X=w(z.position,z.delaunayColor,z.delaunayAxis);X.opacity=b.opacity,this.delaunayMesh?this.delaunayMesh.update(X):(X.gl=k,this.delaunayMesh=E(X),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function _(b,k){var D=new m(b,k.uid);return D.update(k),D}U.exports=_},83484:function(U,F,e){var d=e(24040),S=e(3400),n=e(43028),E=e(74428),T=e(66828),v=e(124),g=e(91592);U.exports=function(o,i,f,u){function l(A,P){return S.coerce(o,i,g,A,P)}var m=r(o,i,l,u);if(!m){i.visible=!1;return}l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),l("mode"),n.hasMarkers(i)&&E(o,i,f,u,l,{noSelect:!0,noAngle:!0}),n.hasLines(i)&&(l("connectgaps"),T(o,i,f,u,l)),n.hasText(i)&&(l("texttemplate"),v(o,i,u,l,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var h=(i.line||{}).color,w=(i.marker||{}).color;l("surfaceaxis")>=0&&l("surfacecolor",h||w);for(var c=["x","y","z"],a=0;a<3;++a){var p="projection."+c[a];l(p+".show")&&(l(p+".opacity"),l(p+".scale"))}var x=d.getComponentMethod("errorbars","supplyDefaults");x(o,i,h||w||f,{axis:"z"}),x(o,i,h||w||f,{axis:"y",inherit:"z"}),x(o,i,h||w||f,{axis:"x",inherit:"z"})};function r(t,o,i,f){var u=0,l=i("x"),m=i("y"),h=i("z"),w=d.getComponentMethod("calendars","handleTraceDefaults");return w(t,o,["x","y","z"],f),l&&m&&h&&(u=Math.min(l.length,m.length,h.length),o._length=o._xlength=o._ylength=o._zlength=u),u}},3296:function(U,F,e){U.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(U,F,e){var d=e(98304),S=e(52904),n=e(45464),E=e(21776).Ks,T=e(21776).Gw,v=e(49084),g=e(92880).extendFlat,r=S.marker,t=S.line,o=r.line;U.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:g({},S.mode,{dflt:"markers"}),text:g({},S.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:g({},S.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:g({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:S.connectgaps,fill:g({},S.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:d(),marker:g({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,angle:r.angle,angleref:r.angleref,standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:g({width:o.width,editType:"calc"},v("marker.line")),gradient:r.gradient,editType:"calc"},v("marker")),textfont:S.textfont,textposition:S.textposition,selected:S.selected,unselected:S.unselected,hoverinfo:g({},n.hoverinfo,{flags:["a","b","text","name"]}),hoveron:S.hoveron,hovertemplate:E(),zorder:S.zorder}},48228:function(U,F,e){var d=e(38248),S=e(90136),n=e(20148),E=e(4500),T=e(16356).calcMarkerSize,v=e(50948);U.exports=function(r,t){var o=t._carpetTrace=v(r,t);if(!(!o||!o.visible||o.visible==="legendonly")){var i;t.xaxis=o.xaxis,t.yaxis=o.yaxis;var f=t._length,u=new Array(f),l,m,h=!1;for(i=0;i<f;i++)if(l=t.a[i],m=t.b[i],d(l)&&d(m)){var w=o.ab2xy(+l,+m,!0),c=o.isVisible(+l,+m);c||(h=!0),u[i]={x:w[0],y:w[1],a:l,b:m,vis:c}}else u[i]={x:!1,y:!1};return t._needsCull=h,u[0].carpet=o,u[0].trace=t,T(t,f),S(r,t),n(u,t),E(u,t),u}}},6176:function(U,F,e){var d=e(3400),S=e(88200),n=e(43028),E=e(74428),T=e(66828),v=e(11731),g=e(124),r=e(70840),t=e(90372);U.exports=function(i,f,u,l){function m(A,P){return d.coerce(i,f,t,A,P)}m("carpet"),f.xaxis="x",f.yaxis="y";var h=m("a"),w=m("b"),c=Math.min(h.length,w.length);if(!c){f.visible=!1;return}f._length=c,m("text"),m("texttemplate"),m("hovertext");var a=c<S.PTS_LINESONLY?"lines+markers":"lines";m("mode",a),n.hasMarkers(f)&&E(i,f,u,l,m,{gradient:!0}),n.hasLines(f)&&(T(i,f,u,l,m,{backoff:!0}),v(i,f,m),m("connectgaps")),n.hasText(f)&&g(i,f,l,m);var p=[];(n.hasMarkers(f)||n.hasText(f))&&(m("marker.maxdisplayed"),p.push("points")),m("fill"),f.fill!=="none"&&(r(i,f,u,m),n.hasLines(f)||v(i,f,m)),(f.fill==="tonext"||f.fill==="toself")&&p.push("fills");var x=m("hoveron",p.join("+")||"points");x!=="fills"&&m("hovertemplate"),m("zorder"),d.coerceSelectionMarkerOpacity(f,m)}},89307:function(U){U.exports=function(e,d,S,n,E){var T=n[E];return e.a=T.a,e.b=T.b,e.y=T.y,e}},52364:function(U){U.exports=function(e,d){var S={},n=d._carpet,E=n.ab2ij([e.a,e.b]),T=Math.floor(E[0]),v=E[0]-T,g=Math.floor(E[1]),r=E[1]-g,t=n.evalxy([],T,g,v,r);return S.yLabel=t[1].toFixed(3),S}},58960:function(U,F,e){var d=e(98723),S=e(3400).fillText;U.exports=function(E,T,v,g){var r=d(E,T,v,g);if(!r||r[0].index===!1)return;var t=r[0];if(t.index===void 0){var o=1-t.y0/E.ya._length,i=E.xa._length,f=i*o/2,u=i-f;return t.x0=Math.max(Math.min(t.x0,u),f),t.x1=Math.max(Math.min(t.x1,u),f),r}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var m=t.trace,h=m._carpet,w=m._module.formatLabels(l,m);t.yLabel=w.yLabel,delete t.text;var c=[];function a(A,P){var y;A.labelprefix&&A.labelprefix.length>0?y=A.labelprefix.replace(/ = $/,""):y=A._hovertitle,c.push(y+": "+P.toFixed(3)+A.labelsuffix)}if(!m.hovertemplate){var p=l.hi||m.hoverinfo,x=p.split("+");x.indexOf("all")!==-1&&(x=["a","b","text"]),x.indexOf("a")!==-1&&a(h.aaxis,l.a),x.indexOf("b")!==-1&&a(h.baxis,l.b),c.push("y: "+t.yLabel),x.indexOf("text")!==-1&&S(l,m,c),t.extraText=c.join("<br>")}return r}},4184:function(U,F,e){U.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(U,F,e){var d=e(96504),S=e(54460),n=e(43616);U.exports=function(T,v,g,r){var t,o,i,f=g[0][0].carpet,u=S.getFromId(T,f.xaxis||"x"),l=S.getFromId(T,f.yaxis||"y"),m={xaxis:u,yaxis:l,plot:v.plot};for(t=0;t<g.length;t++)o=g[t][0].trace,o._xA=u,o._yA=l;for(d(T,m,g,r),t=0;t<g.length;t++)o=g[t][0].trace,i=r.selectAll("g.trace"+o.uid+" .js-line"),n.setClipUrl(i,g[t][0].carpet._clipPathId,T)}},6096:function(U,F,e){var d=e(21776).Ks,S=e(21776).Gw,n=e(98304),E=e(52904),T=e(45464),v=e(49084),g=e(98192).u,r=e(92880).extendFlat,t=e(67824).overrideAll,o=E.marker,i=E.line,f=o.line;U.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:r({},E.mode,{dflt:"markers"}),text:r({},E.text,{}),texttemplate:S({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:r({},E.hovertext,{}),textfont:E.textfont,textposition:E.textposition,line:{color:i.color,width:i.width,dash:g},connectgaps:E.connectgaps,marker:r({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:r({},o.angleref,{values:["previous","up","north"]}),standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,colorbar:o.colorbar,line:r({width:f.width},v("marker.line")),gradient:o.gradient},v("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n(),selected:E.selected,unselected:E.unselected,hoverinfo:r({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:d()},"calc","nested")},25212:function(U,F,e){var d=e(38248),S=e(39032).BADNUM,n=e(90136),E=e(20148),T=e(4500),v=e(3400).isArrayOrTypedArray,g=e(3400)._;function r(t){return t&&typeof t=="string"}U.exports=function(o,i){var f=v(i.locations),u=f?i.locations.length:i._length,l=new Array(u),m;i.geojson?m=function(x){return r(x)||d(x)}:m=r;for(var h=0;h<u;h++){var w=l[h]={};if(f){var c=i.locations[h];w.loc=m(c)?c:null}else{var a=i.lon[h],p=i.lat[h];d(a)&&d(p)?w.lonlat=[+a,+p]:w.lonlat=[S,S]}}return E(l,i),n(o,i),T(l,i),u&&(l[0].t={labels:{lat:g(o,"lat:")+" ",lon:g(o,"lon:")+" "}}),l}},86188:function(U,F,e){var d=e(3400),S=e(43028),n=e(74428),E=e(66828),T=e(124),v=e(70840),g=e(6096);U.exports=function(t,o,i,f){function u(x,A){return d.coerce(t,o,g,x,A)}var l=u("locations"),m;if(l&&l.length){var h=u("geojson"),w;(typeof h=="string"&&h!==""||d.isPlainObject(h))&&(w="geojson-id");var c=u("locationmode",w);c==="geojson-id"&&u("featureidkey"),m=l.length}else{var a=u("lon")||[],p=u("lat")||[];m=Math.min(a.length,p.length)}if(!m){o.visible=!1;return}o._length=m,u("text"),u("hovertext"),u("hovertemplate"),u("mode"),S.hasMarkers(o)&&n(t,o,i,f,u,{gradient:!0}),S.hasLines(o)&&(E(t,o,i,f,u),u("connectgaps")),S.hasText(o)&&(u("texttemplate"),T(t,o,f,u)),u("fill"),o.fill!=="none"&&v(t,o,i,u),d.coerceSelectionMarkerOpacity(o,u)}},58544:function(U){U.exports=function(e,d,S,n,E){e.lon=d.lon,e.lat=d.lat,e.location=d.loc?d.loc:null;var T=n[E];return T.fIn&&T.fIn.properties&&(e.properties=T.fIn.properties),e}},56696:function(U,F,e){var d=e(54460);U.exports=function(n,E,T){var v={},g=T[E.geo]._subplot,r=g.mockAxis,t=n.lonlat;return v.lonLabel=d.tickText(r,r.c2l(t[0]),!0).text,v.latLabel=d.tickText(r,r.c2l(t[1]),!0).text,v}},64292:function(U,F,e){var d=e(93024),S=e(39032).BADNUM,n=e(44928),E=e(3400).fillText,T=e(6096);U.exports=function(r,t,o){var i=r.cd,f=i[0].trace,u=r.xa,l=r.ya,m=r.subplot,h=m.projection.isLonLatOverEdges,w=m.project;function c(C){var M=C.lonlat;if(M[0]===S||h(M))return 1/0;var s=w(M),_=w([t,o]),b=Math.abs(s[0]-_[0]),k=Math.abs(s[1]-_[1]),D=Math.max(3,C.mrc||0);return Math.max(Math.sqrt(b*b+k*k)-D,1-3/D)}if(d.getClosest(i,c,r),r.index!==!1){var a=i[r.index],p=a.lonlat,x=[u.c2p(p),l.c2p(p)],A=a.mrc||1;r.x0=x[0]-A,r.x1=x[0]+A,r.y0=x[1]-A,r.y1=x[1]+A,r.loc=a.loc,r.lon=p[0],r.lat=p[1];var P={};P[f.geo]={_subplot:m};var y=f._module.formatLabels(a,f,P);return r.lonLabel=y.lonLabel,r.latLabel=y.latLabel,r.color=n(f,a),r.extraText=v(f,a,r,i[0].t.labels),r.hovertemplate=f.hovertemplate,[r]}};function v(g,r,t,o){if(g.hovertemplate)return;var i=r.hi||g.hoverinfo,f=i==="all"?T.hoverinfo.flags:i.split("+"),u=f.indexOf("location")!==-1&&Array.isArray(g.locations),l=f.indexOf("lon")!==-1,m=f.indexOf("lat")!==-1,h=f.indexOf("text")!==-1,w=[];function c(a){return a+""}return u?w.push(r.loc):l&&m?w.push("("+c(t.latLabel)+", "+c(t.lonLabel)+")"):l?w.push(o.lon+c(t.lonLabel)):m&&w.push(o.lat+c(t.latLabel)),h&&E(r,g,w),w.join("<br>")}},36952:function(U,F,e){U.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(U,F,e){var d=e(33428),S=e(3400),n=e(59972).getTopojsonFeatures,E=e(44808),T=e(27144),v=e(19280).findExtremes,g=e(39032).BADNUM,r=e(16356).calcMarkerSize,t=e(43028),o=e(25064);function i(u,l,m){var h=l.layers.frontplot.select(".scatterlayer"),w=S.makeTraceGroups(h,m,"trace scattergeo");function c(a,p){a.lonlat[0]===g&&d.select(p).remove()}w.selectAll("*").remove(),w.each(function(a){var p=d.select(this),x=a[0].trace;if(t.hasLines(x)||x.fill!=="none"){var A=E.calcTraceToLineCoords(a),P=x.fill!=="none"?E.makePolygon(A):E.makeLine(A);p.selectAll("path.js-line").data([{geojson:P,trace:x}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(x)&&p.selectAll("path.point").data(S.identity).enter().append("path").classed("point",!0).each(function(y){c(y,this)}),t.hasText(x)&&p.selectAll("g").data(S.identity).enter().append("g").append("text").each(function(y){c(y,this)}),o(u,a)})}function f(u,l){var m=u[0].trace,h=l[m.geo],w=h._subplot,c=m._length,a,p;if(S.isArrayOrTypedArray(m.locations)){var x=m.locationmode,A=x==="geojson-id"?T.extractTraceFeature(u):n(m,w.topojson);for(a=0;a<c;a++){p=u[a];var P=x==="geojson-id"?p.fOut:T.locationToFeature(x,p.loc,A);p.lonlat=P?P.properties.ct:[g,g]}}var y={padded:!0},C,M;if(h.fitbounds==="geojson"&&m.locationmode==="geojson-id"){var s=T.computeBbox(T.getTraceGeojson(m));C=[s[0],s[2]],M=[s[1],s[3]]}else{for(C=new Array(c),M=new Array(c),a=0;a<c;a++)p=u[a],C[a]=p.lonlat[0],M[a]=p.lonlat[1];y.ppad=r(m,c)}m._extremes.lon=v(h.lonaxis._ax,C,y),m._extremes.lat=v(h.lataxis._ax,M,y)}U.exports={calcGeoJSON:f,plot:i}},8796:function(U,F,e){var d=e(43028),S=e(39032).BADNUM;U.exports=function(E,T){var v=E.cd,g=E.xaxis,r=E.yaxis,t=[],o=v[0].trace,i,f,u,l,m,h=!d.hasMarkers(o)&&!d.hasText(o);if(h)return[];if(T===!1)for(m=0;m<v.length;m++)v[m].selected=0;else for(m=0;m<v.length;m++)i=v[m],f=i.lonlat,f[0]!==S&&(u=g.c2p(f),l=r.c2p(f),T.contains([u,l],null,m,E)?(t.push({pointNumber:m,lon:f[0],lat:f[1]}),i.selected=1):i.selected=0);return t}},25064:function(U,F,e){var d=e(33428),S=e(43616),n=e(76308),E=e(49224),T=E.stylePoints,v=E.styleText;U.exports=function(t,o){o&&g(t,o)};function g(r,t){var o=t[0].trace,i=t[0].node3;i.style("opacity",t[0].trace.opacity),T(i,o,r),v(i,o,r),i.selectAll("path.js-line").style("fill","none").each(function(f){var u=d.select(this),l=f.trace,m=l.line||{};u.call(n.stroke,m.color).call(S.dashLine,m.dash||"",m.width||0),l.fill!=="none"&&u.call(n.fill,l.fillcolor)})}},2876:function(U,F,e){var d=e(45464),S=e(25376),n=e(98304),E=e(52904),T=e(29736).axisHoverFormat,v=e(49084),g=e(95376),r=e(92880).extendFlat,t=e(67824).overrideAll,o=e(67072).DASHES,i=E.line,f=E.marker,u=f.line,l=U.exports=t({x:E.x,x0:E.x0,dx:E.dx,y:E.y,y0:E.y0,dy:E.dy,xperiod:E.xperiod,yperiod:E.yperiod,xperiod0:E.xperiod0,yperiod0:E.yperiod0,xperiodalignment:E.xperiodalignment,yperiodalignment:E.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),text:E.text,hovertext:E.hovertext,textposition:E.textposition,textfont:S({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:g(o),dflt:"solid"}},marker:r({},v("marker"),{symbol:f.symbol,angle:f.angle,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:r({},v("marker.line"),{width:u.width})}),connectgaps:E.connectgaps,fill:r({},E.fill,{dflt:"none"}),fillcolor:n(),selected:{marker:E.selected.marker,textfont:E.selected.textfont},unselected:{marker:E.unselected.marker,textfont:E.unselected.textfont},opacity:d.opacity},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes",l.hovertemplate=E.hovertemplate,l.texttemplate=E.texttemplate},64628:function(U,F,e){var d=e(41272);U.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:d.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(U,F,e){var d=e(3108),S=e(3400),n=e(79811),E=e(19280).findExtremes,T=e(1220),v=e(16356),g=v.calcMarkerSize,r=v.calcAxisExpansion,t=v.setFirstScatter,o=e(90136),i=e(84236),f=e(74588),u=e(39032).BADNUM,l=e(67072).TOO_MANY_POINTS;U.exports=function(c,a){var p=c._fullLayout,x=a._xA=n.getFromId(c,a.xaxis,"x"),A=a._yA=n.getFromId(c,a.yaxis,"y"),P=p._plots[a.xaxis+a.yaxis],y=a._length,C=y>=l,M=y*2,s={},_,b=x.makeCalcdata(a,"x"),k=A.makeCalcdata(a,"y"),D=T(a,x,"x",b),V=T(a,A,"y",k),O=D.vals,N=V.vals;a._x=O,a._y=N,a.xperiodalignment&&(a._origX=b,a._xStarts=D.starts,a._xEnds=D.ends),a.yperiodalignment&&(a._origY=k,a._yStarts=V.starts,a._yEnds=V.ends);var B=new Array(M),z=new Array(y);for(_=0;_<y;_++)B[_*2]=O[_]===u?NaN:O[_],B[_*2+1]=N[_]===u?NaN:N[_],z[_]=_;if(x.type==="log")for(_=0;_<M;_+=2)B[_]=x.c2l(B[_]);if(A.type==="log")for(_=1;_<M;_+=2)B[_]=A.c2l(B[_]);C&&x.type!=="log"&&A.type!=="log"?s.tree=d(B):s.ids=z,o(c,a);var H=h(c,P,a,B,O,N),X=f(c,P);t(p,a);var $;return C?H.marker&&($=H.marker.sizeAvg||Math.max(H.marker.size,3)):$=g(a,y),r(c,a,x,A,O,N,$),H.errorX&&m(a,x,H.errorX),H.errorY&&m(a,A,H.errorY),H.fill&&!X.fill2d&&(X.fill2d=!0),H.marker&&!X.scatter2d&&(X.scatter2d=!0),H.line&&!X.line2d&&(X.line2d=!0),(H.errorX||H.errorY)&&!X.error2d&&(X.error2d=!0),H.text&&!X.glText&&(X.glText=!0),H.marker&&(H.marker.snap=y),X.lineOptions.push(H.line),X.errorXOptions.push(H.errorX),X.errorYOptions.push(H.errorY),X.fillOptions.push(H.fill),X.markerOptions.push(H.marker),X.markerSelectedOptions.push(H.markerSel),X.markerUnselectedOptions.push(H.markerUnsel),X.textOptions.push(H.text),X.textSelectedOptions.push(H.textSel),X.textUnselectedOptions.push(H.textUnsel),X.selectBatch.push([]),X.unselectBatch.push([]),s._scene=X,s.index=X.count,s.x=O,s.y=N,s.positions=B,X.count++,[{x:!1,y:!1,t:s,trace:a}]};function m(w,c,a){var p=w._extremes[c._id],x=E(c,a._bnds,{padded:!0});p.min=p.min.concat(x.min),p.max=p.max.concat(x.max)}function h(w,c,a,p,x,A){var P=i.style(w,a);if(P.marker&&(P.marker.positions=p),P.line&&p.length>1&&S.extendFlat(P.line,i.linePositions(w,a,p)),P.errorX||P.errorY){var y=i.errorBarPositions(w,a,p,x,A);P.errorX&&S.extendFlat(P.errorX,y.x),P.errorY&&S.extendFlat(P.errorY,y.y)}return P.text&&(S.extendFlat(P.text,{positions:p},i.textPosition(w,a,P.text,P.marker)),S.extendFlat(P.textSel,{positions:p},i.textPosition(w,a,P.text,P.markerSel)),S.extendFlat(P.textUnsel,{positions:p},i.textPosition(w,a,P.text,P.markerUnsel))),P}},67072:function(U){var F=20;U.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:F,SYMBOL_STROKE:F/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(U,F,e){var d=e(38248),S=e(20472),n=e(72160),E=e(24040),T=e(3400),v=T.isArrayOrTypedArray,g=e(43616),r=e(79811),t=e(33040).formatColor,o=e(43028),i=e(7152),f=e(80088),u=e(67072),l=e(13448).DESELECTDIM,m={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=e(10624).appendArrayPointValue;function w(O,N){var B,z={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},H=O._context.plotGlPixelRatio;if(N.visible!==!0)return z;if(o.hasText(N)&&(z.text=c(O,N),z.textSel=A(O,N,N.selected),z.textUnsel=A(O,N,N.unselected)),o.hasMarkers(N)&&(z.marker=p(O,N),z.markerSel=x(O,N,N.selected),z.markerUnsel=x(O,N,N.unselected),!N.unselected&&v(N.marker.opacity))){var X=N.marker.opacity;for(z.markerUnsel.opacity=new Array(X.length),B=0;B<X.length;B++)z.markerUnsel.opacity[B]=l*X[B]}if(o.hasLines(N)){z.line={overlay:!0,thickness:N.line.width*H,color:N.line.color,opacity:N.opacity};var $=(u.DASHES[N.line.dash]||[1]).slice();for(B=0;B<$.length;++B)$[B]*=N.line.width*H;z.line.dashes=$}return N.error_x&&N.error_x.visible&&(z.errorX=P(N,N.error_x,H)),N.error_y&&N.error_y.visible&&(z.errorY=P(N,N.error_y,H)),N.fill&&N.fill!=="none"&&(z.fill={closed:!0,fill:N.fillcolor,thickness:0}),z}function c(O,N){var B=O._fullLayout,z=N._length,H=N.textfont,X=N.textposition,$=v(X)?X:[X],ne=H.color,q=H.size,ue=H.family,te=H.weight,J=H.style,ie=H.variant,K={},ee,le=O._context.plotGlPixelRatio,j=N.texttemplate;if(j){K.text=[];var Z=B._d3locale,fe=Array.isArray(j),re=fe?Math.min(j.length,z):z,ce=fe?function(Ee){return j[Ee]}:function(){return j};for(ee=0;ee<re;ee++){var xe={i:ee},Te=N._module.formatLabels(xe,N,B),we={};h(we,N,ee);var _e=N._meta||{};K.text.push(T.texttemplateString(ce(ee),Te,Z,we,xe,_e))}}else v(N.text)&&N.text.length<z?K.text=N.text.slice():K.text=N.text;if(v(K.text))for(ee=K.text.length;ee<z;ee++)K.text[ee]="";for(K.opacity=N.opacity,K.font={},K.align=[],K.baseline=[],ee=0;ee<$.length;ee++){var ke=$[ee].split(/\s+/);switch(ke[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(ke[1])}switch(ke[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(ke[0])}}if(v(ne))for(K.color=new Array(z),ee=0;ee<z;ee++)K.color[ee]=ne[ee];else K.color=ne;if(v(q)||Array.isArray(ue)||v(te)||Array.isArray(J)||Array.isArray(ie))for(K.font=new Array(z),ee=0;ee<z;ee++){var Ne=K.font[ee]={};Ne.size=(T.isTypedArray(q)?q[ee]:v(q)?d(q[ee])?q[ee]:0:q)*le,Ne.family=Array.isArray(ue)?ue[ee]:ue,Ne.weight=a(v(te)?te[ee]:te),Ne.style=Array.isArray(J)?J[ee]:J,Ne.variant=Array.isArray(ie)?ie[ee]:ie}else K.font={size:q*le,family:ue,weight:a(te),style:J,variant:ie};return K}function a(O){return O<=1e3?O>500?"bold":"normal":O}function p(O,N){var B=N._length,z=N.marker,H={},X,$=v(z.symbol),ne=v(z.angle),q=v(z.color),ue=v(z.line.color),te=v(z.opacity),J=v(z.size),ie=v(z.line.width),K;if($||(K=f.isOpenSymbol(z.symbol)),$||q||ue||te||ne){H.symbols=new Array(B),H.angles=new Array(B),H.colors=new Array(B),H.borderColors=new Array(B);var ee=z.symbol,le=z.angle,j=t(z,z.opacity,B),Z=t(z.line,z.opacity,B);if(!v(Z[0])){var fe=Z;for(Z=Array(B),X=0;X<B;X++)Z[X]=fe}if(!v(j[0])){var re=j;for(j=Array(B),X=0;X<B;X++)j[X]=re}if(!v(ee)){var ce=ee;for(ee=Array(B),X=0;X<B;X++)ee[X]=ce}if(!v(le)){var xe=le;for(le=Array(B),X=0;X<B;X++)le[X]=xe}for(H.symbols=ee,H.angles=le,H.colors=j,H.borderColors=Z,X=0;X<B;X++)$&&(K=f.isOpenSymbol(z.symbol[X])),K&&(Z[X]=j[X].slice(),j[X]=j[X].slice(),j[X][3]=0);for(H.opacity=N.opacity,H.markers=new Array(B),X=0;X<B;X++)H.markers[X]=b({mx:H.symbols[X],ma:H.angles[X]},N)}else K?(H.color=n(z.color,"uint8"),H.color[3]=0,H.borderColor=n(z.color,"uint8")):(H.color=n(z.color,"uint8"),H.borderColor=n(z.line.color,"uint8")),H.opacity=N.opacity*z.opacity,H.marker=b({mx:z.symbol,ma:z.angle},N);var Te=1,we=i(N,Te),_e;if(J||ie){var ke=H.sizes=new Array(B),Ne=H.borderSizes=new Array(B),Ee=0,ze;if(J){for(X=0;X<B;X++)ke[X]=we(z.size[X]),Ee+=ke[X];ze=Ee/B}else for(_e=we(z.size),X=0;X<B;X++)ke[X]=_e;if(ie)for(X=0;X<B;X++)Ne[X]=z.line.width[X];else for(_e=z.line.width,X=0;X<B;X++)Ne[X]=_e;H.sizeAvg=ze}else H.size=we(z&&z.size||10),H.borderSizes=we(z.line.width);return H}function x(O,N,B){var z=N.marker,H={};return B&&(B.marker&&B.marker.symbol?H=p(O,T.extendFlat({},z,B.marker)):B.marker&&(B.marker.size&&(H.size=B.marker.size),B.marker.color&&(H.colors=B.marker.color),B.marker.opacity!==void 0&&(H.opacity=B.marker.opacity))),H}function A(O,N,B){var z={};if(!B)return z;if(B.textfont){var H={opacity:1,text:N.text,texttemplate:N.texttemplate,textposition:N.textposition,textfont:T.extendFlat({},N.textfont)};B.textfont&&T.extendFlat(H.textfont,B.textfont),z=c(O,H)}return z}function P(O,N,B){var z={capSize:N.width*2*B,lineWidth:N.thickness*B,color:N.color};return N.copy_ystyle&&(z=O.error_y),z}var y=u.SYMBOL_SDF_SIZE,C=u.SYMBOL_SIZE,M=u.SYMBOL_STROKE,s={},_=g.symbolFuncs[0](C*.05);function b(O,N){var B=O.mx;if(B==="circle")return null;var z,H,X=g.symbolNumber(B),$=g.symbolFuncs[X%100],ne=!!g.symbolNoDot[X%100],q=!!g.symbolNoFill[X%100],ue=f.isDotSymbol(B);if(O.ma&&(B+="_"+O.ma),s[B])return s[B];var te=g.getMarkerAngle(O,N);return ue&&!ne?z=$(C*1.1,te)+_:z=$(C,te),H=S(z,{w:y,h:y,viewBox:[-C,-C,C,C],stroke:q?M:-M}),s[B]=H,H||null}function k(O,N,B){var z=B.length,H=z/2,X,$;if(o.hasLines(N)&&H)if(N.line.shape==="hv"){for(X=[],$=0;$<H-1;$++)isNaN(B[$*2])||isNaN(B[$*2+1])?X.push(NaN,NaN,NaN,NaN):(X.push(B[$*2],B[$*2+1]),!isNaN(B[$*2+2])&&!isNaN(B[$*2+3])?X.push(B[$*2+2],B[$*2+1]):X.push(NaN,NaN));X.push(B[z-2],B[z-1])}else if(N.line.shape==="hvh"){for(X=[],$=0;$<H-1;$++)if(isNaN(B[$*2])||isNaN(B[$*2+1])||isNaN(B[$*2+2])||isNaN(B[$*2+3]))!isNaN(B[$*2])&&!isNaN(B[$*2+1])?X.push(B[$*2],B[$*2+1]):X.push(NaN,NaN),X.push(NaN,NaN);else{var ne=(B[$*2]+B[$*2+2])/2;X.push(B[$*2],B[$*2+1],ne,B[$*2+1],ne,B[$*2+3])}X.push(B[z-2],B[z-1])}else if(N.line.shape==="vhv"){for(X=[],$=0;$<H-1;$++)if(isNaN(B[$*2])||isNaN(B[$*2+1])||isNaN(B[$*2+2])||isNaN(B[$*2+3]))!isNaN(B[$*2])&&!isNaN(B[$*2+1])?X.push(B[$*2],B[$*2+1]):X.push(NaN,NaN),X.push(NaN,NaN);else{var q=(B[$*2+1]+B[$*2+3])/2;X.push(B[$*2],B[$*2+1],B[$*2],q,B[$*2+2],q)}X.push(B[z-2],B[z-1])}else if(N.line.shape==="vh"){for(X=[],$=0;$<H-1;$++)isNaN(B[$*2])||isNaN(B[$*2+1])?X.push(NaN,NaN,NaN,NaN):(X.push(B[$*2],B[$*2+1]),!isNaN(B[$*2+2])&&!isNaN(B[$*2+3])?X.push(B[$*2],B[$*2+3]):X.push(NaN,NaN));X.push(B[z-2],B[z-1])}else X=B;var ue=!1;for($=0;$<X.length;$++)if(isNaN(X[$])){ue=!0;break}var te=ue||X.length>u.TOO_MANY_POINTS||o.hasMarkers(N)?"rect":"round";if(ue&&N.connectgaps){var J=X[0],ie=X[1];for($=0;$<X.length;$+=2)isNaN(X[$])||isNaN(X[$+1])?(X[$]=J,X[$+1]=ie):(J=X[$],ie=X[$+1])}return{join:te,positions:X}}function D(O,N,B,z,H){var X=E.getComponentMethod("errorbars","makeComputeError"),$=r.getFromId(O,N.xaxis,"x"),ne=r.getFromId(O,N.yaxis,"y"),q=B.length/2,ue={};function te(J,ie){var K=ie._id.charAt(0),ee=N["error_"+K];if(ee&&ee.visible&&(ie.type==="linear"||ie.type==="log")){for(var le=X(ee),j={x:0,y:1}[K],Z={x:[0,1,2,3],y:[2,3,0,1]}[K],fe=new Float64Array(4*q),re=1/0,ce=-1/0,xe=0,Te=0;xe<q;xe++,Te+=4){var we=J[xe];if(d(we)){var _e=B[xe*2+j],ke=le(we,xe),Ne=ke[0],Ee=ke[1];if(d(Ne)&&d(Ee)){var ze=we-Ne,Ce=we+Ee;fe[Te+Z[0]]=_e-ie.c2l(ze),fe[Te+Z[1]]=ie.c2l(Ce)-_e,fe[Te+Z[2]]=0,fe[Te+Z[3]]=0,re=Math.min(re,we-Ne),ce=Math.max(ce,we+Ee)}}}ue[K]={positions:B,errors:fe,_bnds:[re,ce]}}}return te(z,$),te(H,ne),ue}function V(O,N,B,z){var H=N._length,X={},$;if(o.hasMarkers(N)){var ne=B.font,q=B.align,ue=B.baseline;for(X.offset=new Array(H),$=0;$<H;$++){var te=z.sizes?z.sizes[$]:z.size,J=v(ne)?ne[$].size:ne.size,ie=v(q)?q.length>1?q[$]:q[0]:q,K=v(ue)?ue.length>1?ue[$]:ue[0]:ue,ee=m[ie],le=m[K],j=te?te/.8+1:0,Z=-le*j-le*.5;X.offset[$]=[ee*j/J,Z/J]}}return X}U.exports={style:w,markerStyle:p,markerSelection:x,linePositions:k,errorBarPositions:D,textPosition:V}},80220:function(U,F,e){var d=e(3400),S=e(24040),n=e(80088),E=e(2876),T=e(88200),v=e(43028),g=e(43980),r=e(31147),t=e(74428),o=e(66828),i=e(70840),f=e(124);U.exports=function(l,m,h,w){function c(M,s){return d.coerce(l,m,E,M,s)}var a=l.marker?n.isOpenSymbol(l.marker.symbol):!1,p=v.isBubble(l),x=g(l,m,w,c);if(!x){m.visible=!1;return}r(l,m,w,c),c("xhoverformat"),c("yhoverformat");var A=x<T.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("hovertemplate"),c("mode",A),v.hasMarkers(m)&&(t(l,m,h,w,c,{noAngleRef:!0,noStandOff:!0}),c("marker.line.width",a||p?1:0)),v.hasLines(m)&&(c("connectgaps"),o(l,m,h,w,c),c("line.shape")),v.hasText(m)&&(c("texttemplate"),f(l,m,w,c,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var P=(m.line||{}).color,y=(m.marker||{}).color;c("fill"),m.fill!=="none"&&i(l,m,h,c);var C=S.getComponentMethod("errorbars","supplyDefaults");C(l,m,P||y||h,{axis:"y"}),C(l,m,P||y||h,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(m,c)}},26768:function(U,F,e){var d=e(3400),S=e(76308),n=e(13448).DESELECTDIM;function E(T){var v=T[0],g=v.trace,r=v.t,t=r._scene,o=r.index,i=t.selectBatch[o],f=t.unselectBatch[o],u=t.textOptions[o],l=t.textSelectedOptions[o]||{},m=t.textUnselectedOptions[o]||{},h=d.extendFlat({},u),w,c;if(i.length||f.length){var a=l.color,p=m.color,x=u.color,A=d.isArrayOrTypedArray(x);for(h.color=new Array(g._length),w=0;w<i.length;w++)c=i[w],h.color[c]=a||(A?x[c]:x);for(w=0;w<f.length;w++){c=f[w];var P=A?x[c]:x;h.color[c]=p||(a?P:S.addOpacity(P,n))}}t.glText[o].update(h)}U.exports={styleTextSelection:E}},99396:function(U,F,e){var d=e(76688);U.exports=function(n,E,T){var v=n.i;return"x"in n||(n.x=E._x[v]),"y"in n||(n.y=E._y[v]),d(n,E,T)}},80088:function(U,F,e){var d=e(67072);F.isOpenSymbol=function(S){return typeof S=="string"?d.OPEN_RE.test(S):S%200>100},F.isDotSymbol=function(S){return typeof S=="string"?d.DOT_RE.test(S):S>200}},41272:function(U,F,e){var d=e(24040),S=e(3400),n=e(44928);function E(v,g,r,t){var o=v.cd,i=o[0].t,f=o[0].trace,u=v.xa,l=v.ya,m=i.x,h=i.y,w=u.c2p(g),c=l.c2p(r),a=v.distance,p;if(i.tree){var x=u.p2c(w-a),A=u.p2c(w+a),P=l.p2c(c-a),y=l.p2c(c+a);t==="x"?p=i.tree.range(Math.min(x,A),Math.min(l._rl[0],l._rl[1]),Math.max(x,A),Math.max(l._rl[0],l._rl[1])):p=i.tree.range(Math.min(x,A),Math.min(P,y),Math.max(x,A),Math.max(P,y))}else p=i.ids;var C,M,s,_,b,k,D,V,O,N=a;if(t==="x"){var B=!!f.xperiodalignment,z=!!f.yperiodalignment;for(b=0;b<p.length;b++){if(C=p[b],s=m[C],k=Math.abs(u.c2p(s)-w),B){var H=u.c2p(f._xStarts[C]),X=u.c2p(f._xEnds[C]);k=w>=Math.min(H,X)&&w<=Math.max(H,X)?0:1/0}if(k<N){if(N=k,_=h[C],D=l.c2p(_)-c,z){var $=l.c2p(f._yStarts[C]),ne=l.c2p(f._yEnds[C]);D=c>=Math.min($,ne)&&c<=Math.max($,ne)?0:1/0}O=Math.sqrt(k*k+D*D),M=p[b]}}}else for(b=p.length-1;b>-1;b--)C=p[b],s=m[C],_=h[C],k=u.c2p(s)-w,D=l.c2p(_)-c,V=Math.sqrt(k*k+D*D),V<N&&(N=O=V,M=C);return v.index=M,v.distance=N,v.dxy=O,M===void 0?[v]:[T(v,m,h,f)]}function T(v,g,r,t){var o=v.xa,i=v.ya,f=v.distance,u=v.dxy,l=v.index,m={pointNumber:l,x:g[l],y:r[l]};m.tx=S.isArrayOrTypedArray(t.text)?t.text[l]:t.text,m.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,m.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,m.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var h=t.textfont;h&&(m.ts=S.isArrayOrTypedArray(h.size)?h.size[l]:h.size,m.tc=S.isArrayOrTypedArray(h.color)?h.color[l]:h.color,m.tf=Array.isArray(h.family)?h.family[l]:h.family,m.tw=Array.isArray(h.weight)?h.weight[l]:h.weight,m.ty=Array.isArray(h.style)?h.style[l]:h.style,m.tv=Array.isArray(h.variant)?h.variant[l]:h.variant);var w=t.marker;w&&(m.ms=S.isArrayOrTypedArray(w.size)?w.size[l]:w.size,m.mo=S.isArrayOrTypedArray(w.opacity)?w.opacity[l]:w.opacity,m.mx=S.isArrayOrTypedArray(w.symbol)?w.symbol[l]:w.symbol,m.ma=S.isArrayOrTypedArray(w.angle)?w.angle[l]:w.angle,m.mc=S.isArrayOrTypedArray(w.color)?w.color[l]:w.color);var c=w&&w.line;c&&(m.mlc=Array.isArray(c.color)?c.color[l]:c.color,m.mlw=S.isArrayOrTypedArray(c.width)?c.width[l]:c.width);var a=w&&w.gradient;a&&a.type!=="none"&&(m.mgt=Array.isArray(a.type)?a.type[l]:a.type,m.mgc=Array.isArray(a.color)?a.color[l]:a.color);var p=o.c2p(m.x,!0),x=i.c2p(m.y,!0),A=m.mrc||1,P=t.hoverlabel;P&&(m.hbg=Array.isArray(P.bgcolor)?P.bgcolor[l]:P.bgcolor,m.hbc=Array.isArray(P.bordercolor)?P.bordercolor[l]:P.bordercolor,m.hts=S.isArrayOrTypedArray(P.font.size)?P.font.size[l]:P.font.size,m.htc=Array.isArray(P.font.color)?P.font.color[l]:P.font.color,m.htf=Array.isArray(P.font.family)?P.font.family[l]:P.font.family,m.hnl=S.isArrayOrTypedArray(P.namelength)?P.namelength[l]:P.namelength);var y=t.hoverinfo;y&&(m.hi=Array.isArray(y)?y[l]:y);var C=t.hovertemplate;C&&(m.ht=Array.isArray(C)?C[l]:C);var M={};M[v.index]=m;var s=t._origX,_=t._origY,b=S.extendFlat({},v,{color:n(t,m),x0:p-A,x1:p+A,xLabelVal:s?s[l]:m.x,y0:x-A,y1:x+A,yLabelVal:_?_[l]:m.y,cd:M,distance:f,spikeDistance:u,hovertemplate:m.ht});return m.htx?b.text=m.htx:m.tx?b.text=m.tx:t.text&&(b.text=t.text),S.fillText(m,t,b),d.getComponentMethod("errorbars","hoverInfo")(m,t,b),b}U.exports={hoverPoints:E,calcHover:T}},38983:function(U,F,e){var d=e(64628);d.plot=e(89876),U.exports=d},89876:function(U,F,e){var d=e(38540),S=e(13472),n=e(24544),E=e(23352),T=e(3400),v=e(72760).selectMode,g=e(5048),r=e(43028),t=e(14328),o=e(26768).styleTextSelection,i={};function f(l,m,h,w){var c=l._size,a=l.width*w,p=l.height*w,x=c.l*w,A=c.b*w,P=c.r*w,y=c.t*w,C=c.w*w,M=c.h*w;return[x+m.domain[0]*C,A+h.domain[0]*M,a-P-(1-m.domain[1])*C,p-y-(1-h.domain[1])*M]}var u=U.exports=function(m,h,w){if(w.length){var c=m._fullLayout,a=h._scene,p=h.xaxis,x=h.yaxis,A,P;if(a){var y=g(m,["ANGLE_instanced_arrays","OES_element_index_uint"],i);if(!y){a.init();return}var C=a.count,M=c._glcanvas.data()[0].regl;if(t(m,h,w),a.dirty){if((a.line2d||a.error2d)&&!(a.scatter2d||a.fill2d||a.glText)&&M.clear({}),a.error2d===!0&&(a.error2d=n(M)),a.line2d===!0&&(a.line2d=S(M)),a.scatter2d===!0&&(a.scatter2d=d(M)),a.fill2d===!0&&(a.fill2d=S(M)),a.glText===!0)for(a.glText=new Array(C),A=0;A<C;A++)a.glText[A]=new E(M);if(a.glText){if(C>a.glText.length){var s=C-a.glText.length;for(A=0;A<s;A++)a.glText.push(new E(M))}else if(C<a.glText.length){var _=a.glText.length-C,b=a.glText.splice(C,_);b.forEach(function(j){j.destroy()})}for(A=0;A<C;A++)a.glText[A].update(a.textOptions[A])}if(a.line2d&&(a.line2d.update(a.lineOptions),a.lineOptions=a.lineOptions.map(function(j){if(j&&j.positions){for(var Z=j.positions,fe=0;fe<Z.length&&(isNaN(Z[fe])||isNaN(Z[fe+1]));)fe+=2;for(var re=Z.length-2;re>fe&&(isNaN(Z[re])||isNaN(Z[re+1]));)re-=2;j.positions=Z.slice(fe,re+2)}return j}),a.line2d.update(a.lineOptions)),a.error2d){var k=(a.errorXOptions||[]).concat(a.errorYOptions||[]);a.error2d.update(k)}a.scatter2d&&a.scatter2d.update(a.markerOptions),a.fillOrder=T.repeat(null,C),a.fill2d&&(a.fillOptions=a.fillOptions.map(function(j,Z){var fe=w[Z];if(!(!j||!fe||!fe[0]||!fe[0].trace)){var re=fe[0],ce=re.trace,xe=re.t,Te=a.lineOptions[Z],we,_e,ke=[];ce._ownfill&&ke.push(Z),ce._nexttrace&&ke.push(Z+1),ke.length&&(a.fillOrder[Z]=ke);var Ne=[],Ee=Te&&Te.positions||xe.positions,ze,Ce;if(ce.fill==="tozeroy"){for(ze=0;ze<Ee.length&&isNaN(Ee[ze+1]);)ze+=2;for(Ce=Ee.length-2;Ce>ze&&isNaN(Ee[Ce+1]);)Ce-=2;Ee[ze+1]!==0&&(Ne=[Ee[ze],0]),Ne=Ne.concat(Ee.slice(ze,Ce+2)),Ee[Ce+1]!==0&&(Ne=Ne.concat([Ee[Ce],0]))}else if(ce.fill==="tozerox"){for(ze=0;ze<Ee.length&&isNaN(Ee[ze]);)ze+=2;for(Ce=Ee.length-2;Ce>ze&&isNaN(Ee[Ce]);)Ce-=2;Ee[ze]!==0&&(Ne=[0,Ee[ze+1]]),Ne=Ne.concat(Ee.slice(ze,Ce+2)),Ee[Ce]!==0&&(Ne=Ne.concat([0,Ee[Ce+1]]))}else if(ce.fill==="toself"||ce.fill==="tonext"){for(Ne=[],we=0,j.splitNull=!0,_e=0;_e<Ee.length;_e+=2)(isNaN(Ee[_e])||isNaN(Ee[_e+1]))&&(Ne=Ne.concat(Ee.slice(we,_e)),Ne.push(Ee[we],Ee[we+1]),Ne.push(null,null),we=_e+2);Ne=Ne.concat(Ee.slice(we)),we&&Ne.push(Ee[we],Ee[we+1])}else{var Oe=ce._nexttrace;if(Oe){var Le=a.lineOptions[Z+1];if(Le){var Ge=Le.positions;if(ce.fill==="tonexty"){for(Ne=Ee.slice(),Z=Math.floor(Ge.length/2);Z--;){var rt=Ge[Z*2],ot=Ge[Z*2+1];isNaN(rt)||isNaN(ot)||Ne.push(rt,ot)}j.fill=Oe.fillcolor}}}}if(ce._prevtrace&&ce._prevtrace.fill==="tonext"){var $e=a.lineOptions[Z-1].positions,qe=Ne.length/2;we=qe;var ht=[we];for(_e=0;_e<$e.length;_e+=2)(isNaN($e[_e])||isNaN($e[_e+1]))&&(ht.push(_e/2+qe+1),we=_e+2);Ne=Ne.concat($e),j.hole=ht}return j.fillmode=ce.fill,j.opacity=ce.opacity,j.positions=Ne,j}}),a.fill2d.update(a.fillOptions))}var D=c.dragmode,V=v(D),O=c.clickmode.indexOf("select")>-1;for(A=0;A<C;A++){var N=w[A][0],B=N.trace,z=N.t,H=z.index,X=B._length,$=z.x,ne=z.y;if(B.selectedpoints||V||O){if(V||(V=!0),B.selectedpoints){var q=a.selectBatch[H]=T.selIndices2selPoints(B),ue={};for(P=0;P<q.length;P++)ue[q[P]]=1;var te=[];for(P=0;P<X;P++)ue[P]||te.push(P);a.unselectBatch[H]=te}var J=z.xpx=new Array(X),ie=z.ypx=new Array(X);for(P=0;P<X;P++)J[P]=p.c2p($[P]),ie[P]=x.c2p(ne[P])}else z.xpx=z.ypx=null}if(V){if(a.select2d||(a.select2d=d(c._glcanvas.data()[1].regl)),a.scatter2d){var K=new Array(C);for(A=0;A<C;A++)K[A]=a.selectBatch[A].length||a.unselectBatch[A].length?a.markerUnselectedOptions[A]:{};a.scatter2d.update(K)}a.select2d&&(a.select2d.update(a.markerOptions),a.select2d.update(a.markerSelectedOptions)),a.glText&&w.forEach(function(j){var Z=((j||[])[0]||{}).trace||{};r.hasText(Z)&&o(j)})}else a.scatter2d&&a.scatter2d.update(a.markerOptions);var ee={viewport:f(c,p,x,m._context.plotGlPixelRatio),range:[(p._rl||p.range)[0],(x._rl||x.range)[0],(p._rl||p.range)[1],(x._rl||x.range)[1]]},le=T.repeat(ee,a.count);a.fill2d&&a.fill2d.update(le),a.line2d&&a.line2d.update(le),a.error2d&&a.error2d.update(le.concat(le)),a.scatter2d&&a.scatter2d.update(le),a.select2d&&a.select2d.update(le),a.glText&&a.glText.forEach(function(j){j.update(ee)})}}};u.reglPrecompiled=i},74588:function(U,F,e){var d=e(3400);U.exports=function(n,E){var T=E._scene,v={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},g={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return E._scene||(T=E._scene={},T.init=function(){d.extendFlat(T,g,v)},T.init(),T.update=function(t){var o=d.repeat(t,T.count);if(T.fill2d&&T.fill2d.update(o),T.scatter2d&&T.scatter2d.update(o),T.line2d&&T.line2d.update(o),T.error2d&&T.error2d.update(o.concat(o)),T.select2d&&T.select2d.update(o),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(t)},T.draw=function(){for(var t=T.count,o=T.fill2d,i=T.error2d,f=T.line2d,u=T.scatter2d,l=T.glText,m=T.select2d,h=T.selectBatch,w=T.unselectBatch,c=0;c<t;c++){if(o&&T.fillOrder[c]&&o.draw(T.fillOrder[c]),f&&T.lineOptions[c]&&f.draw(c),i&&(T.errorXOptions[c]&&i.draw(c),T.errorYOptions[c]&&i.draw(c+t)),u&&T.markerOptions[c])if(w[c].length){var a=d.repeat([],T.count);a[c]=w[c],u.draw(a)}else h[c].length||u.draw(c);l[c]&&T.textOptions[c]&&l[c].render()}m&&m.draw(h),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(t){t.destroy&&t.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,E._scene=null}),T.dirty||d.extendFlat(T,v),T}},73224:function(U,F,e){var d=e(43028),S=e(26768).styleTextSelection;U.exports=function(E,T){var v=E.cd,g=E.xaxis,r=E.yaxis,t=[],o=v[0].trace,i=v[0].t,f=o._length,u=i.x,l=i.y,m=i._scene,h=i.index;if(!m)return t;var w=d.hasText(o),c=d.hasMarkers(o),a=!c&&!w;if(o.visible!==!0||a)return t;var p=[],x=[];if(T!==!1&&!T.degenerate)for(var A=0;A<f;A++)T.contains([i.xpx[A],i.ypx[A]],!1,A,E)?(p.push(A),t.push({pointNumber:A,x:g.c2d(u[A]),y:r.c2d(l[A])})):x.push(A);if(c){var P=m.scatter2d;if(!p.length&&!x.length){var y=new Array(m.count);y[h]=m.markerOptions[h],P.update.apply(P,y)}else if(!m.selectBatch[h].length&&!m.unselectBatch[h].length){var C=new Array(m.count);C[h]=m.markerUnselectedOptions[h],P.update.apply(P,C)}}return m.selectBatch[h]=p,m.unselectBatch[h]=x,w&&S(v),t}},31512:function(U,F,e){var d=e(21776).Ks,S=e(21776).Gw,n=e(98304),E=e(6096),T=e(52904),v=e(5232),g=e(45464),r=e(49084),t=e(92880).extendFlat,o=e(67824).overrideAll,i=e(5232),f=E.line,u=E.marker;U.exports=o({lon:E.lon,lat:E.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},i.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},u.opacity,{dflt:1})},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:S({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},T.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:T.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},r("marker")),fill:E.fill,fillcolor:n(),textfont:v.layers.symbol.textfont,textposition:v.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:t({},g.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:d()},"calc","nested")},79732:function(U){var F=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];U.exports={isSupportedFont:function(e){return F.indexOf(e)!==-1}}},59392:function(U,F,e){var d=e(38248),S=e(3400),n=e(39032).BADNUM,E=e(44808),T=e(8932),v=e(43616),g=e(7152),r=e(43028),t=e(79732).isSupportedFont,o=e(89032),i=e(10624).appendArrayPointValue,f=e(72736).NEWLINES,u=e(72736).BR_TAG_ALL;U.exports=function(P,y){var C=y[0].trace,M=C.visible===!0&&C._length!==0,s=C.fill!=="none",_=r.hasLines(C),b=r.hasMarkers(C),k=r.hasText(C),D=b&&C.marker.symbol==="circle",V=b&&C.marker.symbol!=="circle",O=C.cluster&&C.cluster.enabled,N=l("fill"),B=l("line"),z=l("circle"),H=l("symbol"),X={fill:N,line:B,circle:z,symbol:H};if(!M)return X;var $;if((s||_)&&($=E.calcTraceToLineCoords(y)),s&&(N.geojson=E.makePolygon($),N.layout.visibility="visible",S.extendFlat(N.paint,{"fill-color":C.fillcolor})),_&&(B.geojson=E.makeLine($),B.layout.visibility="visible",S.extendFlat(B.paint,{"line-width":C.line.width,"line-color":C.line.color,"line-opacity":C.opacity})),D){var ne=m(y);z.geojson=ne.geojson,z.layout.visibility="visible",O&&(z.filter=["!",["has","point_count"]],X.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":p(C.cluster.color,C.cluster.step),"circle-radius":p(C.cluster.size,C.cluster.step),"circle-opacity":p(C.cluster.opacity,C.cluster.step)}},X.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":x(C),"text-size":12}}),S.extendFlat(z.paint,{"circle-color":ne.mcc,"circle-radius":ne.mrc,"circle-opacity":ne.mo})}if(D&&O&&(z.filter=["!",["has","point_count"]]),(V||k)&&(H.geojson=h(y,P),S.extendFlat(H.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),V&&(S.extendFlat(H.layout,{"icon-size":C.marker.size/10}),"angle"in C.marker&&C.marker.angle!=="auto"&&S.extendFlat(H.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),H.layout["icon-allow-overlap"]=C.marker.allowoverlap,S.extendFlat(H.paint,{"icon-opacity":C.opacity*C.marker.opacity,"icon-color":C.marker.color})),k)){var q=(C.marker||{}).size,ue=o(C.textposition,q);S.extendFlat(H.layout,{"text-size":C.textfont.size,"text-anchor":ue.anchor,"text-offset":ue.offset,"text-font":x(C)}),S.extendFlat(H.paint,{"text-color":C.textfont.color,"text-opacity":C.opacity})}return X};function l(A){return{type:A,geojson:E.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function m(A){var P=A[0].trace,y=P.marker,C=P.selectedpoints,M=S.isArrayOrTypedArray(y.color),s=S.isArrayOrTypedArray(y.size),_=S.isArrayOrTypedArray(y.opacity),b;function k(q){return P.opacity*q}function D(q){return q/2}var V;M&&(T.hasColorscale(P,"marker")?V=T.makeColorScaleFuncFromTrace(y):V=S.identity);var O;s&&(O=g(P));var N;_&&(N=function(q){var ue=d(q)?+S.constrain(q,0,1):0;return k(ue)});var B=[];for(b=0;b<A.length;b++){var z=A[b],H=z.lonlat;if(!a(H)){var X={};V&&(X.mcc=z.mcc=V(z.mc)),O&&(X.mrc=z.mrc=O(z.ms)),N&&(X.mo=N(z.mo)),C&&(X.selected=z.selected||0),B.push({type:"Feature",id:b+1,geometry:{type:"Point",coordinates:H},properties:X})}}var $;if(C)for($=v.makeSelectedPointStyleFns(P),b=0;b<B.length;b++){var ne=B[b].properties;$.selectedOpacityFn&&(ne.mo=k($.selectedOpacityFn(ne))),$.selectedColorFn&&(ne.mcc=$.selectedColorFn(ne)),$.selectedSizeFn&&(ne.mrc=$.selectedSizeFn(ne))}return{geojson:{type:"FeatureCollection",features:B},mcc:M||$&&$.selectedColorFn?{type:"identity",property:"mcc"}:y.color,mrc:s||$&&$.selectedSizeFn?{type:"identity",property:"mrc"}:D(y.size),mo:_||$&&$.selectedOpacityFn?{type:"identity",property:"mo"}:k(y.opacity)}}function h(A,P){for(var y=P._fullLayout,C=A[0].trace,M=C.marker||{},s=M.symbol,_=M.angle,b=s!=="circle"?w(s):c,k=_!=="auto"?w(_,!0):c,D=r.hasText(C)?w(C.text):c,V=[],O=0;O<A.length;O++){var N=A[O];if(!a(N.lonlat)){var B=C.texttemplate,z;if(B){var H=Array.isArray(B)?B[O]||"":B,X=C._module.formatLabels(N,C,y),$={};i($,C,N.i);var ne=C._meta||{};z=S.texttemplateString(H,X,y._d3locale,$,N,ne)}else z=D(O);z&&(z=z.replace(f,"").replace(u,`
`)),V.push({type:"Feature",geometry:{type:"Point",coordinates:N.lonlat},properties:{symbol:b(O),angle:k(O),text:z}})}}return{type:"FeatureCollection",features:V}}function w(A,P){return S.isArrayOrTypedArray(A)?P?function(y){return d(A[y])?+A[y]:0}:function(y){return A[y]}:A?function(){return A}:c}function c(){return""}function a(A){return A[0]===n}function p(A,P){var y;if(S.isArrayOrTypedArray(A)&&S.isArrayOrTypedArray(P)){y=["step",["get","point_count"],A[0]];for(var C=1;C<A.length;C++)y.push(P[C-1],A[C])}else y=A;return y}function x(A){var P=A.textfont,y=P.family,C=P.style,M=P.weight,s=y.split(" "),_=s[s.length-1]==="Italic";_&&s.pop(),_=_||C==="italic";var b=s.join(" ");M==="bold"&&s.indexOf("Bold")===-1?b+=" Bold":M<=1e3&&(s[0]==="Metropolis"?(b="Metropolis",M>850?b+=" Black":M>750?b+=" Extra Bold":M>650?b+=" Bold":M>550?b+=" Semi Bold":M>450?b+=" Medium":M>350?b+=" Regular":M>250?b+=" Light":M>150?b+=" Extra Light":b+=" Thin"):s.slice(0,2).join(" ")==="Open Sans"?(b="Open Sans",M>750?b+=" Extrabold":M>650?b+=" Bold":M>550?b+=" Semibold":M>350?b+=" Regular":b+=" Light"):s.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(b="Klokantech Noto Sans",s[3]==="CJK"&&(b+=" CJK"),b+=M>500?" Bold":" Regular")),_&&(b+=" Italic"),b==="Open Sans Regular Italic"?b="Open Sans Italic":b==="Open Sans Regular Bold"?b="Open Sans Bold":b==="Open Sans Regular Bold Italic"?b="Open Sans Bold Italic":b==="Klokantech Noto Sans Regular Italic"&&(b="Klokantech Noto Sans Italic"),t(b)||(b=y);var k=b.split(", ");return k}},15752:function(U,F,e){var d=e(3400),S=e(43028),n=e(74428),E=e(66828),T=e(124),v=e(70840),g=e(31512),r=e(79732).isSupportedFont;U.exports=function(i,f,u,l){function m(s,_){return d.coerce(i,f,g,s,_)}function h(s,_){return d.coerce2(i,f,g,s,_)}var w=t(i,f,m);if(!w){f.visible=!1;return}if(m("text"),m("texttemplate"),m("hovertext"),m("hovertemplate"),m("mode"),m("below"),S.hasMarkers(f)){n(i,f,u,l,m,{noLine:!0,noAngle:!0}),m("marker.allowoverlap"),m("marker.angle");var c=f.marker;c.symbol!=="circle"&&(d.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),d.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}S.hasLines(f)&&(E(i,f,u,l,m,{noDash:!0}),m("connectgaps"));var a=h("cluster.maxzoom"),p=h("cluster.step"),x=h("cluster.color",f.marker&&f.marker.color||u),A=h("cluster.size"),P=h("cluster.opacity"),y=a!==!1||p!==!1||x!==!1||A!==!1||P!==!1,C=m("cluster.enabled",y);if(C||S.hasText(f)){var M=l.font.family;T(i,f,l,m,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:r(M)?M:"Open Sans Regular",weight:l.font.weight,style:l.font.style,size:l.font.size,color:l.font.color}})}m("fill"),f.fill!=="none"&&v(i,f,u,m),d.coerceSelectionMarkerOpacity(f,m)};function t(o,i,f){var u=f("lon")||[],l=f("lat")||[],m=Math.min(u.length,l.length);return i._length=m,m}},37920:function(U){U.exports=function(e,d){return e.lon=d.lon,e.lat=d.lat,e}},11960:function(U,F,e){var d=e(54460);U.exports=function(n,E,T){var v={},g=T[E.subplot]._subplot,r=g.mockAxis,t=n.lonlat;return v.lonLabel=d.tickText(r,r.c2l(t[0]),!0).text,v.latLabel=d.tickText(r,r.c2l(t[1]),!0).text,v}},63312:function(U,F,e){var d=e(93024),S=e(3400),n=e(44928),E=S.fillText,T=e(39032).BADNUM,v=e(47552).traceLayerPrefix;function g(t,o,i){var f=t.cd,u=f[0].trace,l=t.xa,m=t.ya,h=t.subplot,w=[],c=v+u.uid+"-circle",a=u.cluster&&u.cluster.enabled;if(a){var p=h.map.queryRenderedFeatures(null,{layers:[c]});w=p.map(function(O){return O.id})}var x=o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360),A=x*360,P=o-A;function y(O){var N=O.lonlat;if(N[0]===T||a&&w.indexOf(O.i+1)===-1)return 1/0;var B=S.modHalf(N[0],360),z=N[1],H=h.project([B,z]),X=H.x-l.c2p([P,z]),$=H.y-m.c2p([B,i]),ne=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(X*X+$*$)-ne,1-3/ne)}if(d.getClosest(f,y,t),t.index!==!1){var C=f[t.index],M=C.lonlat,s=[S.modHalf(M[0],360)+A,M[1]],_=l.c2p(s),b=m.c2p(s),k=C.mrc||1;t.x0=_-k,t.x1=_+k,t.y0=b-k,t.y1=b+k;var D={};D[u.subplot]={_subplot:h};var V=u._module.formatLabels(C,u,D);return t.lonLabel=V.lonLabel,t.latLabel=V.latLabel,t.color=n(u,C),t.extraText=r(u,C,f[0].t.labels),t.hovertemplate=u.hovertemplate,[t]}}function r(t,o,i){if(t.hovertemplate)return;var f=o.hi||t.hoverinfo,u=f.split("+"),l=u.indexOf("all")!==-1,m=u.indexOf("lon")!==-1,h=u.indexOf("lat")!==-1,w=o.lonlat,c=[];function a(p){return p+""}return l||m&&h?c.push("("+a(w[1])+", "+a(w[0])+")"):m?c.push(i.lon+a(w[0])):h&&c.push(i.lat+a(w[1])),(l||u.indexOf("text")!==-1)&&E(o,t,c),c.join("<br>")}U.exports={hoverPoints:g,getExtraText:r}},11572:function(U,F,e){U.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(d,S){if(S){var n=S[0].trace;n._glTrace.update(S)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(U,F,e){var d=e(3400),S=e(59392),n=e(47552).traceLayerPrefix,E={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function T(g,r,t,o){this.type="scattermapbox",this.subplot=g,this.uid=r,this.clusterEnabled=t,this.isHidden=o,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol",cluster:"source-"+r+"-circle",clusterCount:"source-"+r+"-circle"},this.layerIds={fill:n+r+"-fill",line:n+r+"-line",circle:n+r+"-circle",symbol:n+r+"-symbol",cluster:n+r+"-cluster",clusterCount:n+r+"-cluster-count"},this.below=null}var v=T.prototype;v.addSource=function(g,r,t){var o={type:"geojson",data:r.geojson};t&&t.enabled&&d.extendFlat(o,{cluster:!0,clusterMaxZoom:t.maxzoom});var i=this.subplot.map.getSource(this.sourceIds[g]);i?i.setData(r.geojson):this.subplot.map.addSource(this.sourceIds[g],o)},v.setSourceData=function(g,r){this.subplot.map.getSource(this.sourceIds[g]).setData(r.geojson)},v.addLayer=function(g,r,t){var o={type:r.type,id:this.layerIds[g],source:this.sourceIds[g],layout:r.layout,paint:r.paint};r.filter&&(o.filter=r.filter);for(var i=this.layerIds[g],f,u=this.subplot.getMapLayers(),l=0;l<u.length;l++)if(u[l].id===i){f=!0;break}f?(this.subplot.setOptions(i,"setLayoutProperty",o.layout),o.layout.visibility==="visible"&&this.subplot.setOptions(i,"setPaintProperty",o.paint)):this.subplot.addLayer(o,t)},v.update=function(r){var t=r[0].trace,o=this.subplot,i=o.map,f=S(o.gd,r),u=o.belowLookup["trace-"+this.uid],l=!!(t.cluster&&t.cluster.enabled),m=!!this.clusterEnabled,h=this;function w(M){M||h.addSource("circle",f.circle,t.cluster);for(var s=E.cluster,_=0;_<s.length;_++){var b=s[_],k=f[b];h.addLayer(b,k,u)}}function c(M){for(var s=E.cluster,_=s.length-1;_>=0;_--){var b=s[_];i.removeLayer(h.layerIds[b])}M||i.removeSource(h.sourceIds.circle)}function a(M){for(var s=E.nonCluster,_=0;_<s.length;_++){var b=s[_],k=f[b];M||h.addSource(b,k),h.addLayer(b,k,u)}}function p(M){for(var s=E.nonCluster,_=s.length-1;_>=0;_--){var b=s[_];i.removeLayer(h.layerIds[b]),M||i.removeSource(h.sourceIds[b])}}function x(M){m?c(M):p(M)}function A(M){l?w(M):a(M)}function P(){for(var M=l?E.cluster:E.nonCluster,s=0;s<M.length;s++){var _=M[s],b=f[_];b&&(o.setOptions(h.layerIds[_],"setLayoutProperty",b.layout),b.layout.visibility==="visible"&&(_!=="cluster"&&h.setSourceData(_,b),o.setOptions(h.layerIds[_],"setPaintProperty",b.paint)))}}var y=this.isHidden,C=t.visible!==!0;C?y||x():y?C||A():m!==l?(x(),A()):(this.below!==u&&(x(!0),A(!0)),P()),this.clusterEnabled=l,this.isHidden=C,this.below=u,r[0].trace._glTrace=this},v.dispose=function(){for(var r=this.subplot.map,t=this.clusterEnabled?E.cluster:E.nonCluster,o=t.length-1;o>=0;o--){var i=t[o];r.removeLayer(this.layerIds[i]),r.removeSource(this.sourceIds[i])}},U.exports=function(r,t){var o=t[0].trace,i=o.cluster&&o.cluster.enabled,f=o.visible!==!0,u=new T(r,o.uid,i,f),l=S(r.gd,t),m=u.below=r.belowLookup["trace-"+o.uid],h,w,c;if(i)for(u.addSource("circle",l.circle,o.cluster),h=0;h<E.cluster.length;h++)w=E.cluster[h],c=l[w],u.addLayer(w,c,m);else for(h=0;h<E.nonCluster.length;h++)w=E.nonCluster[h],c=l[w],u.addSource(w,c,o.cluster),u.addLayer(w,c,m);return t[0].trace._glTrace=u,u}},404:function(U,F,e){var d=e(3400),S=e(43028),n=e(39032).BADNUM;U.exports=function(T,v){var g=T.cd,r=T.xaxis,t=T.yaxis,o=[],i=g[0].trace,f;if(!S.hasMarkers(i))return[];if(v===!1)for(f=0;f<g.length;f++)g[f].selected=0;else for(f=0;f<g.length;f++){var u=g[f],l=u.lonlat;if(l[0]!==n){var m=[d.modHalf(l[0],360),l[1]],h=[r.c2p(m),t.c2p(m)];v.contains(h,null,f,T)?(o.push({pointNumber:f,lon:l[0],lat:l[1]}),u.selected=1):u.selected=0}}return o}},8319:function(U,F,e){var d=e(21776).Ks,S=e(21776).Gw,n=e(92880).extendFlat,E=e(98304),T=e(52904),v=e(45464),g=T.line;U.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:S({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:g.color,width:g.width,dash:g.dash,backoff:g.backoff,shape:n({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:n({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:n({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:E(),hoverinfo:n({},v.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:d(),selected:T.selected,unselected:T.unselected}},58320:function(U,F,e){var d=e(38248),S=e(39032).BADNUM,n=e(54460),E=e(90136),T=e(20148),v=e(4500),g=e(16356).calcMarkerSize;U.exports=function(t,o){for(var i=t._fullLayout,f=o.subplot,u=i[f].radialaxis,l=i[f].angularaxis,m=u.makeCalcdata(o,"r"),h=l.makeCalcdata(o,"theta"),w=o._length,c=new Array(w),a=0;a<w;a++){var p=m[a],x=h[a],A=c[a]={};d(p)&&d(x)?(A.r=p,A.theta=x):A.r=S}var P=g(o,w);return o._extremes.x=n.findExtremes(u,m,{ppad:P}),E(t,o),T(c,o),v(c,o),c}},85968:function(U,F,e){var d=e(3400),S=e(43028),n=e(74428),E=e(66828),T=e(11731),v=e(124),g=e(70840),r=e(88200).PTS_LINESONLY,t=e(8319);function o(f,u,l,m){function h(a,p){return d.coerce(f,u,t,a,p)}var w=i(f,u,m,h);if(!w){u.visible=!1;return}h("thetaunit"),h("mode",w<r?"lines+markers":"lines"),h("text"),h("hovertext"),u.hoveron!=="fills"&&h("hovertemplate"),S.hasMarkers(u)&&n(f,u,l,m,h,{gradient:!0}),S.hasLines(u)&&(E(f,u,l,m,h,{backoff:!0}),T(f,u,h),h("connectgaps")),S.hasText(u)&&(h("texttemplate"),v(f,u,m,h));var c=[];(S.hasMarkers(u)||S.hasText(u))&&(h("cliponaxis"),h("marker.maxdisplayed"),c.push("points")),h("fill"),u.fill!=="none"&&(g(f,u,l,h),S.hasLines(u)||T(f,u,h)),(u.fill==="tonext"||u.fill==="toself")&&c.push("fills"),h("hoveron",c.join("+")||"points"),d.coerceSelectionMarkerOpacity(u,h)}function i(f,u,l,m){var h=m("r"),w=m("theta");d.isTypedArray(h)&&(u.r=h=Array.from(h)),d.isTypedArray(w)&&(u.theta=w=Array.from(w));var c;if(h)w?c=Math.min(h.length,w.length):(c=h.length,m("theta0"),m("dtheta"));else{if(!w)return 0;c=u.theta.length,m("r0"),m("dr")}return u._length=c,c}U.exports={handleRThetaDefaults:i,supplyDefaults:o}},22852:function(U,F,e){var d=e(3400),S=e(54460);U.exports=function(E,T,v){var g={},r=v[T.subplot]._subplot,t,o;r?(t=r.radialAxis,o=r.angularAxis):(r=v[T.subplot],t=r.radialaxis,o=r.angularaxis);var i=t.c2l(E.r);g.rLabel=S.tickText(t,i,!0).text;var f=o.thetaunit==="degrees"?d.rad2deg(E.theta):E.theta;return g.thetaLabel=S.tickText(o,f,!0).text,g}},8504:function(U,F,e){var d=e(98723);function S(E,T,v,g){var r=d(E,T,v,g);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var o=E.subplot,i=t.cd[t.index],f=t.trace;if(o.isPtInside(i))return t.xLabelVal=void 0,t.yLabelVal=void 0,n(i,f,o,t),t.hovertemplate=f.hovertemplate,r}}function n(E,T,v,g){var r=v.radialAxis,t=v.angularAxis;r._hovertitle="r",t._hovertitle="";var o={};o[T.subplot]={_subplot:v};var i=T._module.formatLabels(E,T,o);g.rLabel=i.rLabel,g.thetaLabel=i.thetaLabel;var f=E.hi||T.hoverinfo,u=[];function l(h,w){u.push(h._hovertitle+": "+w)}if(!T.hovertemplate){var m=f.split("+");m.indexOf("all")!==-1&&(m=["r","theta","text"]),m.indexOf("r")!==-1&&l(r,g.rLabel),m.indexOf("theta")!==-1&&l(t,g.thetaLabel),m.indexOf("text")!==-1&&g.text&&(u.push(g.text),delete g.text),g.extraText=u.join("<br>")}}U.exports={hoverPoints:S,makeHoverPointText:n}},76924:function(U,F,e){U.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(U,F,e){var d=e(96504),S=e(39032).BADNUM;U.exports=function(E,T,v){for(var g=T.layers.frontplot.select("g.scatterlayer"),r=T.xaxis,t=T.yaxis,o={xaxis:r,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},i=T.radialAxis,f=T.angularAxis,u=0;u<v.length;u++)for(var l=v[u],m=0;m<l.length;m++){m===0&&(l[0].trace._xA=r,l[0].trace._yA=t);var h=l[m],w=h.r;if(w===S)h.x=h.y=S;else{var c=i.c2g(w),a=f.c2g(h.theta);h.x=c*Math.cos(a),h.y=c*Math.sin(a)}}d(E,o,v,g)}},24396:function(U,F,e){var d=e(8319),S=e(2876),n=e(21776).Gw;U.exports={mode:d.mode,r:d.r,theta:d.theta,r0:d.r0,dr:d.dr,theta0:d.theta0,dtheta:d.dtheta,thetaunit:d.thetaunit,text:d.text,texttemplate:n({editType:"plot"},{keys:["r","theta","text"]}),hovertext:d.hovertext,hovertemplate:d.hovertemplate,line:{color:S.line.color,width:S.line.width,dash:S.line.dash,editType:"calc"},connectgaps:S.connectgaps,marker:S.marker,fill:S.fill,fillcolor:S.fillcolor,textposition:S.textposition,textfont:S.textfont,hoverinfo:d.hoverinfo,selected:d.selected,unselected:d.unselected}},27160:function(U,F,e){U.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(U,F,e){var d=e(90136),S=e(16356).calcMarkerSize,n=e(84236),E=e(54460),T=e(67072).TOO_MANY_POINTS;U.exports=function(g,r){var t=g._fullLayout,o=r.subplot,i=t[o].radialaxis,f=t[o].angularaxis,u=r._r=i.makeCalcdata(r,"r"),l=r._theta=f.makeCalcdata(r,"theta"),m=r._length,h={};m<u.length&&(u=u.slice(0,m)),m<l.length&&(l=l.slice(0,m)),h.r=u,h.theta=l,d(g,r);var w=h.opts=n.style(g,r),c;return m<T?c=S(r,m):w.marker&&(c=2*(w.marker.sizeAvg||Math.max(w.marker.size,3))),r._extremes.x=E.findExtremes(i,u,{ppad:c}),[{x:!1,y:!1,t:h,trace:r}]}},98608:function(U,F,e){var d=e(3400),S=e(43028),n=e(85968).handleRThetaDefaults,E=e(74428),T=e(66828),v=e(124),g=e(70840),r=e(88200).PTS_LINESONLY,t=e(24396);U.exports=function(i,f,u,l){function m(w,c){return d.coerce(i,f,t,w,c)}var h=n(i,f,l,m);if(!h){f.visible=!1;return}m("thetaunit"),m("mode",h<r?"lines+markers":"lines"),m("text"),m("hovertext"),f.hoveron!=="fills"&&m("hovertemplate"),S.hasMarkers(f)&&E(i,f,u,l,m,{noAngleRef:!0,noStandOff:!0}),S.hasLines(f)&&(T(i,f,u,l,m),m("connectgaps")),S.hasText(f)&&(m("texttemplate"),v(i,f,l,m,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),m("fill"),f.fill!=="none"&&g(i,f,u,m),d.coerceSelectionMarkerOpacity(f,m)}},94120:function(U,F,e){var d=e(22852);U.exports=function(n,E,T){var v=n.i;return"r"in n||(n.r=E._r[v]),"theta"in n||(n.theta=E._theta[v]),d(n,E,T)}},1600:function(U,F,e){var d=e(41272),S=e(8504).makeHoverPointText;function n(E,T,v,g){var r=E.cd,t=r[0].t,o=t.r,i=t.theta,f=d.hoverPoints(E,T,v,g);if(!(!f||f[0].index===!1)){var u=f[0];if(u.index===void 0)return f;var l=E.subplot,m=u.cd[u.index],h=u.trace;if(m.r=o[u.index],m.theta=i[u.index],!!l.isPtInside(m))return u.xLabelVal=void 0,u.yLabelVal=void 0,S(m,h,l,u),f}}U.exports={hoverPoints:n}},62944:function(U,F,e){var d=e(27160);d.plot=e(56512),U.exports=d},56512:function(U,F,e){var d=e(3108),S=e(38248),n=e(89876),E=e(74588),T=e(84236),v=e(3400),g=e(67072).TOO_MANY_POINTS,r={};U.exports=function(o,i,f){if(f.length){var u=i.radialAxis,l=i.angularAxis,m=E(o,i);return f.forEach(function(h){if(!(!h||!h[0]||!h[0].trace)){var w=h[0],c=w.trace,a=w.t,p=c._length,x=a.r,A=a.theta,P=a.opts,y,C=x.slice(),M=A.slice();for(y=0;y<x.length;y++)i.isPtInside({r:x[y],theta:A[y]})||(C[y]=NaN,M[y]=NaN);var s=new Array(p*2),_=Array(p),b=Array(p);for(y=0;y<p;y++){var k=C[y],D,V;if(S(k)){var O=u.c2g(k),N=l.c2g(M[y],c.thetaunit);D=O*Math.cos(N),V=O*Math.sin(N)}else D=V=NaN;_[y]=s[y*2]=D,b[y]=s[y*2+1]=V}a.tree=d(s),P.marker&&p>=g&&(P.marker.cluster=a.tree),P.marker&&(P.markerSel.positions=P.markerUnsel.positions=P.marker.positions=s),P.line&&s.length>1&&v.extendFlat(P.line,T.linePositions(o,c,s)),P.text&&(v.extendFlat(P.text,{positions:s},T.textPosition(o,c,P.text,P.marker)),v.extendFlat(P.textSel,{positions:s},T.textPosition(o,c,P.text,P.markerSel)),v.extendFlat(P.textUnsel,{positions:s},T.textPosition(o,c,P.text,P.markerUnsel))),P.fill&&!m.fill2d&&(m.fill2d=!0),P.marker&&!m.scatter2d&&(m.scatter2d=!0),P.line&&!m.line2d&&(m.line2d=!0),P.text&&!m.glText&&(m.glText=!0),m.lineOptions.push(P.line),m.fillOptions.push(P.fill),m.markerOptions.push(P.marker),m.markerSelectedOptions.push(P.markerSel),m.markerUnselectedOptions.push(P.markerUnsel),m.textOptions.push(P.text),m.textSelectedOptions.push(P.textSel),m.textUnselectedOptions.push(P.textUnsel),m.selectBatch.push([]),m.unselectBatch.push([]),a.x=_,a.y=b,a.rawx=_,a.rawy=b,a.r=x,a.theta=A,a.positions=s,a._scene=m,a.index=m.count,m.count++}}),n(o,i,f)}},U.exports.reglPrecompiled=r},69496:function(U,F,e){var d=e(21776).Ks,S=e(21776).Gw,n=e(92880).extendFlat,E=e(98304),T=e(52904),v=e(45464),g=T.line;U.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:S({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:g.color,width:g.width,dash:g.dash,backoff:g.backoff,shape:n({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:n({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:n({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:E(),hoverinfo:n({},v.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:d(),selected:T.selected,unselected:T.unselected}},47507:function(U,F,e){var d=e(38248),S=e(39032).BADNUM,n=e(90136),E=e(20148),T=e(4500),v=e(16356).calcMarkerSize;U.exports=function(r,t){for(var o=r._fullLayout,i=t.subplot,f=o[i].realaxis,u=o[i].imaginaryaxis,l=f.makeCalcdata(t,"real"),m=u.makeCalcdata(t,"imag"),h=t._length,w=new Array(h),c=0;c<h;c++){var a=l[c],p=m[c],x=w[c]={};d(a)&&d(p)?(x.real=a,x.imag=p):x.real=S}return v(t,h),n(r,t),E(w,t),T(w,t),w}},76716:function(U,F,e){var d=e(3400),S=e(43028),n=e(74428),E=e(66828),T=e(11731),v=e(124),g=e(70840),r=e(88200).PTS_LINESONLY,t=e(69496);U.exports=function(f,u,l,m){function h(a,p){return d.coerce(f,u,t,a,p)}var w=o(f,u,m,h);if(!w){u.visible=!1;return}h("mode",w<r?"lines+markers":"lines"),h("text"),h("hovertext"),u.hoveron!=="fills"&&h("hovertemplate"),S.hasMarkers(u)&&n(f,u,l,m,h,{gradient:!0}),S.hasLines(u)&&(E(f,u,l,m,h,{backoff:!0}),T(f,u,h),h("connectgaps")),S.hasText(u)&&(h("texttemplate"),v(f,u,m,h));var c=[];(S.hasMarkers(u)||S.hasText(u))&&(h("cliponaxis"),h("marker.maxdisplayed"),c.push("points")),h("fill"),u.fill!=="none"&&(g(f,u,l,h),S.hasLines(u)||T(f,u,h)),(u.fill==="tonext"||u.fill==="toself")&&c.push("fills"),h("hoveron",c.join("+")||"points"),d.coerceSelectionMarkerOpacity(u,h)};function o(i,f,u,l){var m=l("real"),h=l("imag"),w;return m&&h&&(w=Math.min(m.length,h.length)),d.isTypedArray(m)&&(f.real=m=Array.from(m)),d.isTypedArray(h)&&(f.imag=h=Array.from(h)),f._length=w,w}},49504:function(U,F,e){var d=e(54460);U.exports=function(n,E,T){var v={},g=T[E.subplot]._subplot;return v.realLabel=d.tickText(g.radialAxis,n.real,!0).text,v.imagLabel=d.tickText(g.angularAxis,n.imag,!0).text,v}},25292:function(U,F,e){var d=e(98723);function S(E,T,v,g){var r=d(E,T,v,g);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var o=E.subplot,i=t.cd[t.index],f=t.trace;if(o.isPtInside(i))return t.xLabelVal=void 0,t.yLabelVal=void 0,n(i,f,o,t),t.hovertemplate=f.hovertemplate,r}}function n(E,T,v,g){var r=v.radialAxis,t=v.angularAxis;r._hovertitle="real",t._hovertitle="imag";var o={};o[T.subplot]={_subplot:v};var i=T._module.formatLabels(E,T,o);g.realLabel=i.realLabel,g.imagLabel=i.imagLabel;var f=E.hi||T.hoverinfo,u=[];function l(h,w){u.push(h._hovertitle+": "+w)}if(!T.hovertemplate){var m=f.split("+");m.indexOf("all")!==-1&&(m=["real","imag","text"]),m.indexOf("real")!==-1&&l(r,g.realLabel),m.indexOf("imag")!==-1&&l(t,g.imagLabel),m.indexOf("text")!==-1&&g.text&&(u.push(g.text),delete g.text),g.extraText=u.join("<br>")}}U.exports={hoverPoints:S,makeHoverPointText:n}},95443:function(U,F,e){U.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(U,F,e){var d=e(96504),S=e(39032).BADNUM,n=e(36416),E=n.smith;U.exports=function(v,g,r){for(var t=g.layers.frontplot.select("g.scatterlayer"),o=g.xaxis,i=g.yaxis,f={xaxis:o,yaxis:i,plot:g.framework,layerClipId:g._hasClipOnAxisFalse?g.clipIds.forTraces:null},u=0;u<r.length;u++)for(var l=r[u],m=0;m<l.length;m++){m===0&&(l[0].trace._xA=o,l[0].trace._yA=i);var h=l[m],w=h.real;if(w===S)h.x=h.y=S;else{var c=E([w,h.imag]);h.x=c[0],h.y=c[1]}}d(v,f,r,t)}},5896:function(U,F,e){var d=e(21776).Ks,S=e(21776).Gw,n=e(98304),E=e(52904),T=e(45464),v=e(49084),g=e(98192).u,r=e(92880).extendFlat,t=E.marker,o=E.line,i=t.line;U.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:r({},E.mode,{dflt:"markers"}),text:r({},E.text,{}),texttemplate:S({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:r({},E.hovertext,{}),line:{color:o.color,width:o.width,dash:g,backoff:o.backoff,shape:r({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:E.connectgaps,cliponaxis:E.cliponaxis,fill:r({},E.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:n(),marker:r({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:r({width:i.width,editType:"calc"},v("marker.line")),gradient:t.gradient,editType:"calc"},v("marker")),textfont:E.textfont,textposition:E.textposition,selected:E.selected,unselected:E.unselected,hoverinfo:r({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:E.hoveron,hovertemplate:d()}},34335:function(U,F,e){var d=e(38248),S=e(90136),n=e(20148),E=e(4500),T=e(16356).calcMarkerSize,v=["a","b","c"],g={a:["b","c"],b:["a","c"],c:["a","b"]};U.exports=function(t,o){var i=t._fullLayout[o.subplot],f=i.sum,u=o.sum||f,l={a:o.a,b:o.b,c:o.c},m,h,w,c,a,p;for(m=0;m<v.length;m++)if(w=v[m],!l[w]){for(a=l[g[w][0]],p=l[g[w][1]],c=new Array(a.length),h=0;h<a.length;h++)c[h]=u-a[h]-p[h];l[w]=c}var x=o._length,A=new Array(x),P,y,C,M,s,_;for(m=0;m<x;m++)P=l.a[m],y=l.b[m],C=l.c[m],d(P)&&d(y)&&d(C)?(P=+P,y=+y,C=+C,M=f/(P+y+C),M!==1&&(P*=M,y*=M,C*=M),_=P,s=C-y,A[m]={x:s,y:_,a:P,b:y,c:C}):A[m]={x:!1,y:!1};return T(o,x),S(t,o),n(A,o),E(A,o),A}},84256:function(U,F,e){var d=e(3400),S=e(88200),n=e(43028),E=e(74428),T=e(66828),v=e(11731),g=e(124),r=e(70840),t=e(5896);U.exports=function(i,f,u,l){function m(A,P){return d.coerce(i,f,t,A,P)}var h=m("a"),w=m("b"),c=m("c"),a;if(h?(a=h.length,w?(a=Math.min(a,w.length),c&&(a=Math.min(a,c.length))):c?a=Math.min(a,c.length):a=0):w&&c&&(a=Math.min(w.length,c.length)),!a){f.visible=!1;return}f._length=a,m("sum"),m("text"),m("hovertext"),f.hoveron!=="fills"&&m("hovertemplate");var p=a<S.PTS_LINESONLY?"lines+markers":"lines";m("mode",p),n.hasMarkers(f)&&E(i,f,u,l,m,{gradient:!0}),n.hasLines(f)&&(T(i,f,u,l,m,{backoff:!0}),v(i,f,m),m("connectgaps")),n.hasText(f)&&(m("texttemplate"),g(i,f,l,m));var x=[];(n.hasMarkers(f)||n.hasText(f))&&(m("cliponaxis"),m("marker.maxdisplayed"),x.push("points")),m("fill"),f.fill!=="none"&&(r(i,f,u,m),n.hasLines(f)||v(i,f,m)),(f.fill==="tonext"||f.fill==="toself")&&x.push("fills"),m("hoveron",x.join("+")||"points"),d.coerceSelectionMarkerOpacity(f,m)}},97476:function(U){U.exports=function(e,d,S,n,E){if(d.xa&&(e.xaxis=d.xa),d.ya&&(e.yaxis=d.ya),n[E]){var T=n[E];e.a=T.a,e.b=T.b,e.c=T.c}else e.a=d.a,e.b=d.b,e.c=d.c;return e}},90404:function(U,F,e){var d=e(54460);U.exports=function(n,E,T){var v={},g=T[E.subplot]._subplot;return v.aLabel=d.tickText(g.aaxis,n.a,!0).text,v.bLabel=d.tickText(g.baxis,n.b,!0).text,v.cLabel=d.tickText(g.caxis,n.c,!0).text,v}},26596:function(U,F,e){var d=e(98723);U.exports=function(n,E,T,v){var g=d(n,E,T,v);if(!g||g[0].index===!1)return;var r=g[0];if(r.index===void 0){var t=1-r.y0/n.ya._length,o=n.xa._length,i=o*t/2,f=o-i;return r.x0=Math.max(Math.min(r.x0,f),i),r.x1=Math.max(Math.min(r.x1,f),i),g}var u=r.cd[r.index],l=r.trace,m=r.subplot;r.a=u.a,r.b=u.b,r.c=u.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var h={};h[l.subplot]={_subplot:m};var w=l._module.formatLabels(u,l,h);r.aLabel=w.aLabel,r.bLabel=w.bLabel,r.cLabel=w.cLabel;var c=u.hi||l.hoverinfo,a=[];function p(A,P){a.push(A._hovertitle+": "+P)}if(!l.hovertemplate){var x=c.split("+");x.indexOf("all")!==-1&&(x=["a","b","c"]),x.indexOf("a")!==-1&&p(m.aaxis,r.aLabel),x.indexOf("b")!==-1&&p(m.baxis,r.bLabel),x.indexOf("c")!==-1&&p(m.caxis,r.cLabel)}return r.extraText=a.join("<br>"),r.hovertemplate=l.hovertemplate,g}},34864:function(U,F,e){U.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(U,F,e){var d=e(96504);U.exports=function(n,E,T){var v=E.plotContainer;v.select(".scatterlayer").selectAll("*").remove();for(var g=E.xaxis,r=E.yaxis,t={xaxis:g,yaxis:r,plot:v,layerClipId:E._hasClipOnAxisFalse?E.clipIdRelative:null},o=E.layers.frontplot.select("g.scatterlayer"),i=0;i<T.length;i++){var f=T[i];f.length&&(f[0].trace._xA=g,f[0].trace._yA=r)}d(n,t,T,o)}},44524:function(U,F,e){var d=e(52904),S=e(49084),n=e(29736).axisHoverFormat,E=e(21776).Ks,T=e(2876),v=e(33816).idRegex,g=e(31780).templatedArray,r=e(92880).extendFlat,t=d.marker,o=t.line,i=r(S("marker.line",{editTypeOverride:"calc"}),{width:r({},o.width,{editType:"calc"}),editType:"calc"}),f=r(S("marker"),{symbol:t.symbol,angle:t.angle,size:r({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:i,editType:"calc"});f.color.editType=f.cmin.editType=f.cmax.editType="style";function u(l){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:v[l],editType:"plot"}}}U.exports={dimensions:g("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},T.text,{}),hovertext:r({},T.hovertext,{}),hovertemplate:E(),xhoverformat:n("x"),yhoverformat:n("y"),marker:f,xaxes:u("x"),yaxes:u("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:T.selected.marker,editType:"calc"},unselected:{marker:T.unselected.marker,editType:"calc"},opacity:T.opacity}},28888:function(U,F,e){var d=e(24040),S=e(12704);U.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},d.register(S)},99332:function(U,F,e){var d=e(13472),S=e(24040),n=e(5048),E=e(84888)._M,T=e(57952),v=e(79811).getFromId,g=e(54460).shouldShowZeroLine,r="splom",t={};function o(h){var w=h._fullLayout,c=S.getModule(r),a=E(h.calcdata,c)[0],p=n(h,["ANGLE_instanced_arrays","OES_element_index_uint"],t);p&&(w._hasOnlyLargeSploms&&u(h),c.plot(h,{},a))}function i(h){var w=h.calcdata,c=h._fullLayout;c._hasOnlyLargeSploms&&u(h);for(var a=0;a<w.length;a++){var p=w[a][0],x=p.trace,A=c._splomScenes[x.uid];x.type==="splom"&&A&&A.matrix&&f(h,x,A)}}function f(h,w,c){for(var a=c.matrixOptions.data.length,p=w._visibleDims,x=c.viewOpts.ranges=new Array(a),A=0;A<p.length;A++){var P=p[A],y=x[A]=new Array(4),C=v(h,w._diag[P][0]);C&&(y[0]=C.r2l(C.range[0]),y[2]=C.r2l(C.range[1]));var M=v(h,w._diag[P][1]);M&&(y[1]=M.r2l(M.range[0]),y[3]=M.r2l(M.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:x},{ranges:x}):c.matrix.update({ranges:x})}function u(h){var w=h._fullLayout,c=w._glcanvas.data()[0].regl,a=w._splomGrid;a||(a=w._splomGrid=d(c)),a.update(l(h))}function l(h){var w=h._context.plotGlPixelRatio,c=h._fullLayout,a=c._size,p=[0,0,c.width*w,c.height*w],x={},A;function P(X,$,ne,q,ue,te){ne*=w,q*=w,ue*=w,te*=w;var J=$[X+"color"],ie=$[X+"width"],K=String(J+ie);K in x?x[K].data.push(NaN,NaN,ne,q,ue,te):x[K]={data:[ne,q,ue,te],join:"rect",thickness:ie*w,color:J,viewport:p,range:p,overlay:!1}}for(A in c._splomSubplots){var y=c._plots[A],C=y.xaxis,M=y.yaxis,s=C._gridVals,_=M._gridVals,b=C._offset,k=C._length,D=M._length,V=a.b+M.domain[0]*a.h,O=-M._m,N=-O*M.r2l(M.range[0],M.calendar),B,z;if(C.showgrid)for(A=0;A<s.length;A++)B=b+C.l2p(s[A].x),P("grid",C,B,V,B,V+D);if(M.showgrid)for(A=0;A<_.length;A++)z=V+N+O*_[A].x,P("grid",M,b,z,b+k,z);g(h,C,M)&&(B=b+C.l2p(0),P("zeroline",C,B,V,B,V+D)),g(h,M,C)&&(z=V+N+0,P("zeroline",M,b,z,b+k,z))}var H=[];for(A in x)H.push(x[A]);return H}function m(h,w,c,a){var p={},x;if(a._splomScenes){for(x=0;x<h.length;x++){var A=h[x];A.type==="splom"&&(p[A.uid]=1)}for(x=0;x<c.length;x++){var P=c[x];if(!p[P.uid]){var y=a._splomScenes[P.uid];y&&y.destroy&&y.destroy(),a._splomScenes[P.uid]=null,delete a._splomScenes[P.uid]}}}Object.keys(a._splomScenes||{}).length===0&&delete a._splomScenes,a._splomGrid&&!w._hasOnlyLargeSploms&&a._hasOnlyLargeSploms&&(a._splomGrid.destroy(),a._splomGrid=null,delete a._splomGrid),T.clean(h,w,c,a)}U.exports={name:r,attr:T.attr,attrRegex:T.attrRegex,layoutAttributes:T.layoutAttributes,supplyLayoutDefaults:T.supplyLayoutDefaults,drawFramework:T.drawFramework,plot:o,drag:i,updateGrid:u,clean:m,updateFx:T.updateFx,toSVG:T.toSVG,reglPrecompiled:t}},66821:function(U,F,e){var d=e(3400),S=e(79811),n=e(16356).calcMarkerSize,E=e(16356).calcAxisExpansion,T=e(90136),v=e(84236).markerSelection,g=e(84236).markerStyle,r=e(72308),t=e(39032).BADNUM,o=e(67072).TOO_MANY_POINTS;U.exports=function(f,u){var l=u.dimensions,m=u._length,h={},w=h.cdata=[],c=h.data=[],a=u._visibleDims=[],p,x,A,P,y;function C(k,D){for(var V=k.makeCalcdata({v:D.values,vcalendar:u.calendar},"v"),O=0;O<V.length;O++)V[O]=V[O]===t?NaN:V[O];w.push(V),c.push(k.type==="log"?d.simpleMap(V,k.c2l):V)}for(p=0;p<l.length;p++)if(A=l[p],A.visible){if(P=S.getFromId(f,u._diag[p][0]),y=S.getFromId(f,u._diag[p][1]),P&&y&&P.type!==y.type){d.log("Skipping splom dimension "+p+" with conflicting axis types");continue}P?(C(P,A),y&&y.type==="category"&&(y._categories=P._categories.slice())):C(y,A),a.push(p)}T(f,u),d.extendFlat(h,g(f,u));var M=w.length,s=M*m>o,_;for(s?_=h.sizeAvg||Math.max(h.size,3):_=n(u,m),x=0;x<a.length;x++)p=a[x],A=l[p],P=S.getFromId(f,u._diag[p][0])||{},y=S.getFromId(f,u._diag[p][1])||{},E(f,u,P,y,w[x],w[x],_);var b=r(f,u);return b.matrix||(b.matrix=!0),b.matrixOptions=h,b.selectedOptions=v(f,u,u.selected),b.unselectedOptions=v(f,u,u.unselected),[{x:!1,y:!1,t:{},trace:u}]}},69544:function(U,F,e){var d=e(3400),S=e(51272),n=e(44524),E=e(43028),T=e(74428),v=e(26284),g=e(80088).isOpenSymbol;U.exports=function(i,f,u,l){function m(P,y){return d.coerce(i,f,n,P,y)}var h=S(i,f,{name:"dimensions",handleItemDefaults:r}),w=m("diagonal.visible"),c=m("showupperhalf"),a=m("showlowerhalf"),p=v(f,h,"values");if(!p||!w&&!c&&!a){f.visible=!1;return}m("text"),m("hovertext"),m("hovertemplate"),m("xhoverformat"),m("yhoverformat"),T(i,f,u,l,m,{noAngleRef:!0,noStandOff:!0});var x=g(f.marker.symbol),A=E.isBubble(f);m("marker.line.width",x||A?1:0),t(i,f,l,m),d.coerceSelectionMarkerOpacity(f,m)};function r(o,i){function f(l,m){return d.coerce(o,i,n.dimensions,l,m)}f("label");var u=f("values");u&&u.length?f("visible"):i.visible=!1,f("axis.type"),f("axis.matches")}function t(o,i,f,u){var l=i.dimensions,m=l.length,h=i.showupperhalf,w=i.showlowerhalf,c=i.diagonal.visible,a,p,x=new Array(m),A=new Array(m);for(a=0;a<m;a++){var P=a?a+1:"";x[a]="x"+P,A[a]="y"+P}var y=u("xaxes",x),C=u("yaxes",A),M=i._diag=new Array(m);i._xaxes={},i._yaxes={};var s=[],_=[];function b(X,$,ne,q){if(X){var ue=X.charAt(0),te=f._splomAxes[ue];if(i["_"+ue+"axes"][X]=1,q.push(X),!(X in te)){var J=te[X]={};ne&&(J.label=ne.label||"",ne.visible&&ne.axis&&(ne.axis.type&&(J.type=ne.axis.type),ne.axis.matches&&(J.matches=$)))}}}var k=!c&&!w,D=!c&&!h;for(i._axesDim={},a=0;a<m;a++){var V=l[a],O=a===0,N=a===m-1,B=O&&k||N&&D?void 0:y[a],z=O&&D||N&&k?void 0:C[a];b(B,z,V,s),b(z,B,V,_),M[a]=[B,z],i._axesDim[B]=a,i._axesDim[z]=a}for(a=0;a<s.length;a++)for(p=0;p<_.length;p++){var H=s[a]+_[p];(a>p&&h||a<p&&w||a===p&&(c||!w||!h))&&(f._splomSubplots[H]=1)}(!w||!c&&h&&w)&&(f._splomGridDflt.xside="bottom",f._splomGridDflt.yside="left")}},83156:function(U,F,e){var d=e(3400),S=e(90136),n=e(84236).markerStyle;U.exports=function(T,v){var g=v.trace,r=T._fullLayout._splomScenes[g.uid];if(r){S(T,g),d.extendFlat(r.matrixOptions,n(T,g));var t=d.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(t,null)}}},50328:function(U,F){F.getDimIndex=function(d,S){for(var n=S._id,E=n.charAt(0),T={x:0,y:1}[E],v=d._visibleDims,g=0;g<v.length;g++){var r=v[g];if(d._diag[r][T]===n)return g}return!1}},72248:function(U,F,e){var d=e(50328),S=e(41272).calcHover,n=e(54460).getFromId,E=e(92880).extendFlat;function T(g,r,t,o,i){i||(i={});var f=(o||"").charAt(0)==="x",u=(o||"").charAt(0)==="y",l=v(g,r,t);if((f||u)&&i.hoversubplots==="axis"&&l[0])for(var m=(f?g.xa:g.ya)._subplotsWith,h=i.gd,w=E({},g),c=0;c<m.length;c++){var a=m[c];if(a!==g.xa._id+g.ya._id){u?w.xa=n(h,a,"x"):w.ya=n(h,a,"y");var p=f||u,x=v(w,r,t,p);l=l.concat(x)}}return l}function v(g,r,t,o){var i=g.cd,f=i[0].trace,u=g.scene,l=u.matrixOptions.cdata,m=g.xa,h=g.ya,w=m.c2p(r),c=h.c2p(t),a=g.distance,p=d.getDimIndex(f,m),x=d.getDimIndex(f,h);if(p===!1||x===!1)return[g];for(var A=l[p],P=l[x],y,C,M=a,s=0;s<A.length;s++)if(!(o&&s!==g.index)){var _=A[s],b=P[s],k=m.c2p(_)-w,D=h.c2p(b)-c,V=Math.sqrt(k*k+D*D);(o||V<M)&&(M=C=V,y=s)}return g.index=y,g.distance=M,g.dxy=C,y===void 0?[g]:[S(g,A,P,f)]}U.exports={hoverPoints:T}},97924:function(U,F,e){var d=e(28888);d.basePlotModule=e(99332),U.exports=d},54840:function(U,F,e){var d=e(55795),S=e(3400),n=e(79811),E=e(72760).selectMode;U.exports=function(g,r,t){if(t.length)for(var o=0;o<t.length;o++)T(g,t[o][0])};function T(v,g){var r=v._fullLayout,t=r._size,o=g.trace,i=g.t,f=r._splomScenes[o.uid],u=f.matrixOptions,l=u.cdata,m=r._glcanvas.data()[0].regl,h=r.dragmode,w,c,a,p,x;if(l.length!==0){u.lower=o.showupperhalf,u.upper=o.showlowerhalf,u.diagonal=o.diagonal.visible;var A=o._visibleDims,P=l.length,y=f.viewOpts={};for(y.ranges=new Array(P),y.domains=new Array(P),x=0;x<A.length;x++){a=A[x];var C=y.ranges[x]=new Array(4),M=y.domains[x]=new Array(4);w=n.getFromId(v,o._diag[a][0]),w&&(C[0]=w._rl[0],C[2]=w._rl[1],M[0]=w.domain[0],M[2]=w.domain[1]),c=n.getFromId(v,o._diag[a][1]),c&&(C[1]=c._rl[0],C[3]=c._rl[1],M[1]=c.domain[0],M[3]=c.domain[1])}var s=v._context.plotGlPixelRatio,_=t.l*s,b=t.b*s,k=t.w*s,D=t.h*s;y.viewport=[_,b,k+_,D+b],f.matrix===!0&&(f.matrix=d(m));var V=r.clickmode.indexOf("select")>-1,O=E(h)||!!o.selectedpoints||V,N=!0;if(O){var B=o._length;if(o.selectedpoints){f.selectBatch=o.selectedpoints;var z=o.selectedpoints,H={};for(a=0;a<z.length;a++)H[z[a]]=!0;var X=[];for(a=0;a<B;a++)H[a]||X.push(a);f.unselectBatch=X}var $=i.xpx=new Array(P),ne=i.ypx=new Array(P);for(x=0;x<A.length;x++){if(a=A[x],w=n.getFromId(v,o._diag[a][0]),w)for($[x]=new Array(B),p=0;p<B;p++)$[x][p]=w.c2p(l[x][p]);if(c=n.getFromId(v,o._diag[a][1]),c)for(ne[x]=new Array(B),p=0;p<B;p++)ne[x][p]=c.c2p(l[x][p])}if(f.selectBatch.length||f.unselectBatch.length){var q=S.extendFlat({},u,f.unselectedOptions,y),ue=S.extendFlat({},u,f.selectedOptions,y);f.matrix.update(q,ue),N=!1}}else i.xpx=i.ypx=null;if(N){var te=S.extendFlat({},u,y);f.matrix.update(te,null)}}}},72308:function(U,F,e){var d=e(3400);U.exports=function(n,E){var T=n._fullLayout,v=E.uid,g=T._splomScenes;g||(g=T._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},t={matrix:!1,selectBatch:[],unselectBatch:[]},o=g[E.uid];return o||(o=g[v]=d.extendFlat({},r,t),o.draw=function(){o.matrix&&o.matrix.draw&&(o.selectBatch.length||o.unselectBatch.length?o.matrix.draw(o.unselectBatch,o.selectBatch):o.matrix.draw()),o.dirty=!1},o.destroy=function(){o.matrix&&o.matrix.destroy&&o.matrix.destroy(),o.matrixOptions=null,o.selectBatch=null,o.unselectBatch=null,o=null}),o.dirty||d.extendFlat(o,r),o}},62500:function(U,F,e){var d=e(3400),S=d.pushUnique,n=e(43028),E=e(50328);U.exports=function(v,g){var r=v.cd,t=r[0].trace,o=r[0].t,i=v.scene,f=i.matrixOptions.cdata,u=v.xaxis,l=v.yaxis,m=[];if(!i)return m;var h=!n.hasMarkers(t)&&!n.hasText(t);if(t.visible!==!0||h)return m;var w=E.getDimIndex(t,u),c=E.getDimIndex(t,l);if(w===!1||c===!1)return m;var a=o.xpx[w],p=o.ypx[c],x=f[w],A=f[c],P=(v.scene.selectBatch||[]).slice(),y=[];if(g!==!1&&!g.degenerate)for(var C=0;C<x.length;C++)g.contains([a[C],p[C]],null,C,v)?(m.push({pointNumber:C,x:x[C],y:A[C]}),S(P,C)):P.indexOf(C)!==-1?S(P,C):y.push(C);var M=i.matrixOptions;return!P.length&&!y.length?i.matrix.update(M,null):!i.selectBatch.length&&!i.unselectBatch.length&&i.matrix.update(i.unselectedOptions,d.extendFlat({},M,i.selectedOptions,i.viewOpts)),i.selectBatch=P,i.unselectBatch=y,m}},90167:function(U,F,e){var d=e(49084),S=e(29736).axisHoverFormat,n=e(21776).Ks,E=e(52948),T=e(45464),v=e(92880).extendFlat,g={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:S("u",1),vhoverformat:S("v",1),whoverformat:S("w",1),xhoverformat:S("x"),yhoverformat:S("y"),zhoverformat:S("z"),showlegend:v({},T.showlegend,{dflt:!1})};v(g,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){g[t]=E[t]}),g.hoverinfo=v({},T.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),g.transforms=void 0,U.exports=g},3832:function(U,F,e){var d=e(3400),S=e(47128);function n(g,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=v(r.u,r._len),r._v=v(r.v,r._len),r._w=v(r.w,r._len),r._x=v(r.x,r._len),r._y=v(r.y,r._len),r._z=v(r.z,r._len);var t=E(r);r._gridFill=t.fill,r._Xs=t.Xs,r._Ys=t.Ys,r._Zs=t.Zs,r._len=t.len;var o=0,i,f,u;r.starts&&(i=v(r.starts.x||[]),f=v(r.starts.y||[]),u=v(r.starts.z||[]),o=Math.min(i.length,f.length,u.length)),r._startsX=i||[],r._startsY=f||[],r._startsZ=u||[];var l=0,m=1/0,h;for(h=0;h<r._len;h++){var w=r._u[h],c=r._v[h],a=r._w[h],p=Math.sqrt(w*w+c*c+a*a);l=Math.max(l,p),m=Math.min(m,p)}for(S(g,r,{vals:[m,l],containerStr:"",cLetter:"c"}),h=0;h<o;h++){var x=i[h];t.xMax=Math.max(t.xMax,x),t.xMin=Math.min(t.xMin,x);var A=f[h];t.yMax=Math.max(t.yMax,A),t.yMin=Math.min(t.yMin,A);var P=u[h];t.zMax=Math.max(t.zMax,P),t.zMin=Math.min(t.zMin,P)}r._slen=o,r._normMax=l,r._xbnds=[t.xMin,t.xMax],r._ybnds=[t.yMin,t.yMax],r._zbnds=[t.zMin,t.zMax]}function E(g){var r=g._x,t=g._y,o=g._z,i=g._len,f,u,l,m=-1/0,h=1/0,w=-1/0,c=1/0,a=-1/0,p=1/0,x="",A,P,y,C,M,s,_,b,k;for(i&&(C=r[0],s=t[0],b=o[0]),i>1&&(M=r[i-1],_=t[i-1],k=o[i-1]),f=0;f<i;f++)m=Math.max(m,r[f]),h=Math.min(h,r[f]),w=Math.max(w,t[f]),c=Math.min(c,t[f]),a=Math.max(a,o[f]),p=Math.min(p,o[f]),!A&&r[f]!==C&&(A=!0,x+="x"),!P&&t[f]!==s&&(P=!0,x+="y"),!y&&o[f]!==b&&(y=!0,x+="z");A||(x+="x"),P||(x+="y"),y||(x+="z");var D=T(g._x),V=T(g._y),O=T(g._z);x=x.replace("x",(C>M?"-":"+")+"x"),x=x.replace("y",(s>_?"-":"+")+"y"),x=x.replace("z",(b>k?"-":"+")+"z");var N=function(){i=0,D=[],V=[],O=[]};(!i||i<D.length*V.length*O.length)&&N();var B=function(ce){return ce==="x"?r:ce==="y"?t:o},z=function(ce){return ce==="x"?D:ce==="y"?V:O},H=function(ce){return ce[i-1]<ce[0]?-1:1},X=B(x[1]),$=B(x[3]),ne=B(x[5]),q=z(x[1]).length,ue=z(x[3]).length,te=z(x[5]).length,J=!1,ie=function(ce,xe,Te){return q*(ue*ce+xe)+Te},K=H(B(x[1])),ee=H(B(x[3])),le=H(B(x[5]));for(f=0;f<te-1;f++){for(u=0;u<ue-1;u++){for(l=0;l<q-1;l++){var j=ie(f,u,l),Z=ie(f,u,l+1),fe=ie(f,u+1,l),re=ie(f+1,u,l);if((!(X[j]*K<X[Z]*K)||!($[j]*ee<$[fe]*ee)||!(ne[j]*le<ne[re]*le))&&(J=!0),J)break}if(J)break}if(J)break}return J&&(d.warn("Encountered arbitrary coordinates! Unable to input data grid."),N()),{xMin:h,yMin:c,zMin:p,xMax:m,yMax:w,zMax:a,Xs:D,Ys:V,Zs:O,len:i,fill:x}}function T(g){return d.distinctVals(g).vals}function v(g,r){if(r===void 0&&(r=g.length),d.isTypedArray(g))return g.subarray(0,r);for(var t=[],o=0;o<r;o++)t[o]=+g[o];return t}U.exports={calc:n,filter:v,processGrid:E}},25668:function(U,F,e){var d=e(67792).gl_streamtube3d,S=d.createTubeMesh,n=e(3400),E=e(33040).parseColorScale,T=e(8932).extractOpts,v=e(52094),g={xaxis:0,yaxis:1,zaxis:2};function r(l,m){this.scene=l,this.uid=m,this.mesh=null,this.data=null}var t=r.prototype;t.handlePick=function(l){var m=this.scene.fullSceneLayout,h=this.scene.dataScale;function w(p,x){var A=m[x],P=h[g[x]];return A.l2c(p)/P}if(l.object===this.mesh){var c=l.data.position,a=l.data.velocity;return l.traceCoordinate=[w(c[0],"xaxis"),w(c[1],"yaxis"),w(c[2],"zaxis"),w(a[0],"xaxis"),w(a[1],"yaxis"),w(a[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}};function o(l){var m=l.length,h;return m>2?h=l.slice(1,m-1):m===2?h=[(l[0]+l[1])/2]:h=l,h}function i(l){var m=l.length;return m===1?[.5,.5]:[l[1]-l[0],l[m-1]-l[m-2]]}function f(l,m){var h=l.fullSceneLayout,w=l.dataScale,c=m._len,a={};function p(ue,te){var J=h[te],ie=w[g[te]];return n.simpleMap(ue,function(K){return J.d2l(K)*ie})}if(a.vectors=v(p(m._u,"xaxis"),p(m._v,"yaxis"),p(m._w,"zaxis"),c),!c)return{positions:[],cells:[]};var x=p(m._Xs,"xaxis"),A=p(m._Ys,"yaxis"),P=p(m._Zs,"zaxis");a.meshgrid=[x,A,P],a.gridFill=m._gridFill;var y=m._slen;if(y)a.startingPositions=v(p(m._startsX,"xaxis"),p(m._startsY,"yaxis"),p(m._startsZ,"zaxis"));else{for(var C=A[0],M=o(x),s=o(P),_=new Array(M.length*s.length),b=0,k=0;k<M.length;k++)for(var D=0;D<s.length;D++)_[b++]=[M[k],C,s[D]];a.startingPositions=_}a.colormap=E(m),a.tubeSize=m.sizeref,a.maxLength=m.maxdisplayed;var V=p(m._xbnds,"xaxis"),O=p(m._ybnds,"yaxis"),N=p(m._zbnds,"zaxis"),B=i(x),z=i(A),H=i(P),X=[[V[0]-B[0],O[0]-z[0],N[0]-H[0]],[V[1]+B[1],O[1]+z[1],N[1]+H[1]]],$=d(a,X),ne=T(m);$.vertexIntensityBounds=[ne.min/m._normMax,ne.max/m._normMax];var q=m.lightposition;return $.lightPosition=[q.x,q.y,q.z],$.ambient=m.lighting.ambient,$.diffuse=m.lighting.diffuse,$.specular=m.lighting.specular,$.roughness=m.lighting.roughness,$.fresnel=m.lighting.fresnel,$.opacity=m.opacity,m._pad=$.tubeScale*m.sizeref*2,$}t.update=function(l){this.data=l;var m=f(this.scene,l);this.mesh.update(m)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function u(l,m){var h=l.glplot.gl,w=f(l,m),c=S(h,w),a=new r(l,m.uid);return a.mesh=c,a.data=m,c._trace=a,l.glplot.add(c),a}U.exports=u},54304:function(U,F,e){var d=e(3400),S=e(27260),n=e(90167);U.exports=function(T,v,g,r){function t(h,w){return d.coerce(T,v,n,h,w)}var o=t("u"),i=t("v"),f=t("w"),u=t("x"),l=t("y"),m=t("z");if(!o||!o.length||!i||!i.length||!f||!f.length||!u||!u.length||!l||!l.length||!m||!m.length){v.visible=!1;return}t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),S(T,v,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),v._length=null}},15436:function(U,F,e){U.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(d,S){return d.tubex=d.x,d.tubey=d.y,d.tubez=d.z,d.tubeu=S.traceCoordinate[3],d.tubev=S.traceCoordinate[4],d.tubew=S.traceCoordinate[5],d.norm=S.traceCoordinate[6],d.divergence=S.traceCoordinate[7],delete d.x,delete d.y,delete d.z,d},meta:{}}},424:function(U,F,e){var d=e(45464),S=e(21776).Ks,n=e(21776).Gw,E=e(49084),T=e(86968).u,v=e(74996),g=e(27328),r=e(92880).extendFlat,t=e(98192).c;U.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},v.marker.line.color,{dflt:null}),width:r({},v.marker.line.width,{dflt:1}),editType:"calc"},pattern:t,editType:"calc"},E("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:v.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:n({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:v.hovertext,hoverinfo:r({},d.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:S({},{keys:g.eventDataKeys}),textfont:v.textfont,insidetextorientation:v.insidetextorientation,insidetextfont:v.insidetextfont,outsidetextfont:r({},v.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:v.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:T({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(U,F,e){var d=e(7316);F.name="sunburst",F.plot=function(S,n,E,T){d.plotBasePlot(F.name,S,n,E,T)},F.clean=function(S,n,E,T){d.cleanBasePlot(F.name,S,n,E,T)}},3776:function(U,F,e){var d=e(74148),S=e(38248),n=e(3400),E=e(8932).makeColorScaleFuncFromTrace,T=e(45768).makePullColorFn,v=e(45768).generateExtendedColors,g=e(8932).calc,r=e(39032).ALMOST_EQUAL,t={},o={},i={};F.calc=function(u,l){var m=u._fullLayout,h=l.ids,w=n.isArrayOrTypedArray(h),c=l.labels,a=l.parents,p=l.values,x=n.isArrayOrTypedArray(p),A=[],P={},y={},C=function(K,ee){P[K]?P[K].push(ee):P[K]=[ee],y[ee]=1},M=function(K){return K||typeof K=="number"},s=function(K){return!x||S(p[K])&&p[K]>=0},_,b,k;w?(_=Math.min(h.length,a.length),b=function(K){return M(h[K])&&s(K)},k=function(K){return String(h[K])}):(_=Math.min(c.length,a.length),b=function(K){return M(c[K])&&s(K)},k=function(K){return String(c[K])}),x&&(_=Math.min(_,p.length));for(var D=0;D<_;D++)if(b(D)){var V=k(D),O=M(a[D])?String(a[D]):"",N={i:D,id:V,pid:O,label:M(c[D])?String(c[D]):""};x&&(N.v=+p[D]),A.push(N),C(O,V)}if(P[""]){if(P[""].length>1){for(var H=n.randstr(),X=0;X<A.length;X++)A[X].pid===""&&(A[X].pid=H);A.unshift({hasMultipleRoots:!0,id:H,pid:"",label:""})}}else{var B=[],z;for(z in P)y[z]||B.push(z);if(B.length===1)z=B[0],A.unshift({hasImpliedRoot:!0,id:z,pid:"",label:z});else return n.warn(["Multiple implied roots, cannot build",l.type,"hierarchy of",l.name+".","These roots include:",B.join(", ")].join(" "))}var $;try{$=d.stratify().id(function(K){return K.id}).parentId(function(K){return K.pid})(A)}catch(K){return n.warn(["Failed to build",l.type,"hierarchy of",l.name+".","Error:",K.message].join(" "))}var ne=d.hierarchy($),q=!1;if(x)switch(l.branchvalues){case"remainder":ne.sum(function(K){return K.data.v});break;case"total":ne.each(function(K){var ee=K.data.data,le=ee.v;if(K.children){var j=K.children.reduce(function(Z,fe){return Z+fe.data.data.v},0);if((ee.hasImpliedRoot||ee.hasMultipleRoots)&&(le=j),le<j*r)return q=!0,n.warn(["Total value for node",K.data.data.id,"of",l.name,"is smaller than the sum of its children.",`
parent value =`,le,`
children sum =`,j].join(" "))}K.value=le});break}else f(ne,l,{branches:l.count.indexOf("branches")!==-1,leaves:l.count.indexOf("leaves")!==-1});if(!q){l.sort&&ne.sort(function(K,ee){return ee.value-K.value});var ue,te,J=l.marker.colors||[],ie=!!J.length;return l._hasColorscale?(ie||(J=x?l.values:l._values),g(u,l,{vals:J,containerStr:"marker",cLetter:"c"}),te=E(l.marker)):ue=T(m["_"+l.type+"colormap"]),ne.each(function(K){var ee=K.data.data;ee.color=l._hasColorscale?te(J[ee.i]):ue(J[ee.i],ee.id)}),A[0].hierarchy=ne,A}},F._runCrossTraceCalc=function(u,l){var m=l._fullLayout,h=l.calcdata,w=m[u+"colorway"],c=m["_"+u+"colormap"];m["extend"+u+"colors"]&&(w=v(w,u==="icicle"?i:u==="treemap"?o:t));var a=0,p;function x(C){var M=C.data.data,s=M.id;M.color===!1&&(c[s]?M.color=c[s]:C.parent?C.parent.parent?M.color=C.parent.data.data.color:(c[s]=M.color=w[a%w.length],a++):M.color=p)}for(var A=0;A<h.length;A++){var P=h[A],y=P[0];y.trace.type===u&&y.hierarchy&&(p=y.trace.root.color,y.hierarchy.each(x))}},F.crossTraceCalc=function(u){return F._runCrossTraceCalc("sunburst",u)};function f(u,l,m){var h=0,w=u.children;if(w){for(var c=w.length,a=0;a<c;a++)h+=f(w[a],l,m);m.branches&&h++}else m.leaves&&h++;return u.value=u.data.data.value=h,l._values||(l._values=[]),l._values[u.data.data.i]=h,h}},27328:function(U){U.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(U,F,e){var d=e(3400),S=e(424),n=e(86968).Q,E=e(31508).handleText,T=e(74174).handleMarkerDefaults,v=e(8932),g=v.hasColorscale,r=v.handleDefaults;U.exports=function(o,i,f,u){function l(x,A){return d.coerce(o,i,S,x,A)}var m=l("labels"),h=l("parents");if(!m||!m.length||!h||!h.length){i.visible=!1;return}var w=l("values");w&&w.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),T(o,i,u,l);var c=i._hasColorscale=g(o,"marker","colors")||(o.marker||{}).coloraxis;c&&r(o,i,u,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",c?1:.7);var a=l("text");l("texttemplate"),i.texttemplate||l("textinfo",d.isArrayOrTypedArray(a)?"text+label":"label"),l("hovertext"),l("hovertemplate");var p="auto";E(o,i,u,l,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),n(i,u,l),i._length=null}},60404:function(U,F,e){var d=e(43616),S=e(76308);U.exports=function(E,T,v,g,r){var t=T.data.data,o=t.i,i=r||t.color;if(o>=0){T.i=t.i;var f=v.marker;f.pattern?(!f.colors||!f.pattern.shape)&&(f.color=i,T.color=i):(f.color=i,T.color=i),d.pointStyle(E,v,g,T)}else S.fill(E,i)}},45716:function(U,F,e){var d=e(33428),S=e(24040),n=e(10624).appendArrayPointValue,E=e(93024),T=e(3400),v=e(95924),g=e(78176),r=e(69656),t=r.formatPieValue;U.exports=function(f,u,l,m,h){var w=m[0],c=w.trace,a=w.hierarchy,p=c.type==="sunburst",x=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1);var A=function(C){var M=l._fullLayout;if(!(l._dragging||M.hovermode===!1)){var s=l._fullData[c.index],_=C.data.data,b=_.i,k=g.isHierarchyRoot(C),D=g.getParent(a,C),V=g.getValue(C),O=function(Z){return T.castOption(s,b,Z)},N=O("hovertemplate"),B=E.castHoverinfo(s,M,b),z=M.separators,H;if(N||B&&B!=="none"&&B!=="skip"){var X,$;p&&(X=w.cx+C.pxmid[0]*(1-C.rInscribed),$=w.cy+C.pxmid[1]*(1-C.rInscribed)),x&&(X=C._hoverX,$=C._hoverY);var ne={},q=[],ue=[],te=function(Z){return q.indexOf(Z)!==-1};B&&(q=B==="all"?s._module.attributes.hoverinfo.flags:B.split("+")),ne.label=_.label,te("label")&&ne.label&&ue.push(ne.label),_.hasOwnProperty("v")&&(ne.value=_.v,ne.valueLabel=t(ne.value,z),te("value")&&ue.push(ne.valueLabel)),ne.currentPath=C.currentPath=g.getPath(C.data),te("current path")&&!k&&ue.push(ne.currentPath);var J,ie=[],K=function(){ie.indexOf(J)===-1&&(ue.push(J),ie.push(J))};ne.percentParent=C.percentParent=V/g.getValue(D),ne.parent=C.parentString=g.getPtLabel(D),te("percent parent")&&(J=g.formatPercent(ne.percentParent,z)+" of "+ne.parent,K()),ne.percentEntry=C.percentEntry=V/g.getValue(u),ne.entry=C.entry=g.getPtLabel(u),te("percent entry")&&!k&&!C.onPathbar&&(J=g.formatPercent(ne.percentEntry,z)+" of "+ne.entry,K()),ne.percentRoot=C.percentRoot=V/g.getValue(a),ne.root=C.root=g.getPtLabel(a),te("percent root")&&!k&&(J=g.formatPercent(ne.percentRoot,z)+" of "+ne.root,K()),ne.text=O("hovertext")||O("text"),te("text")&&(J=ne.text,T.isValidTextValue(J)&&ue.push(J)),H=[o(C,s,h.eventDataKeys)];var ee={trace:s,y:$,_x0:C._x0,_x1:C._x1,_y0:C._y0,_y1:C._y1,text:ue.join("<br>"),name:N||te("name")?s.name:void 0,color:O("hoverlabel.bgcolor")||_.color,borderColor:O("hoverlabel.bordercolor"),fontFamily:O("hoverlabel.font.family"),fontSize:O("hoverlabel.font.size"),fontColor:O("hoverlabel.font.color"),fontWeight:O("hoverlabel.font.weight"),fontStyle:O("hoverlabel.font.style"),fontVariant:O("hoverlabel.font.variant"),nameLength:O("hoverlabel.namelength"),textAlign:O("hoverlabel.align"),hovertemplate:N,hovertemplateLabels:ne,eventData:H};p&&(ee.x0=X-C.rInscribed*C.rpx1,ee.x1=X+C.rInscribed*C.rpx1,ee.idealAlign=C.pxmid[0]<0?"left":"right"),x&&(ee.x=X,ee.idealAlign=X<0?"left":"right");var le=[];E.loneHover(ee,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:l,inOut_bbox:le}),H[0].bbox=le[0],c._hasHoverLabel=!0}if(x){var j=f.select("path.surface");h.styleOne(j,C,s,l,{hovered:!0})}c._hasHoverEvent=!0,l.emit("plotly_hover",{points:H||[o(C,s,h.eventDataKeys)],event:d.event})}},P=function(C){var M=l._fullLayout,s=l._fullData[c.index],_=d.select(this).datum();if(c._hasHoverEvent&&(C.originalEvent=d.event,l.emit("plotly_unhover",{points:[o(_,s,h.eventDataKeys)],event:d.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(E.loneUnhover(M._hoverlayer.node()),c._hasHoverLabel=!1),x){var b=f.select("path.surface");h.styleOne(b,_,s,l,{hovered:!1})}},y=function(C){var M=l._fullLayout,s=l._fullData[c.index],_=p&&(g.isHierarchyRoot(C)||g.isLeaf(C)),b=g.getPtId(C),k=g.isEntry(C)?g.findEntryWithChild(a,b):g.findEntryWithLevel(a,b),D=g.getPtId(k),V={points:[o(C,s,h.eventDataKeys)],event:d.event};_||(V.nextLevel=D);var O=v.triggerHandler(l,"plotly_"+c.type+"click",V);if(O!==!1&&M.hovermode&&(l._hoverdata=[o(C,s,h.eventDataKeys)],E.click(l,d.event)),!_&&O!==!1&&!l._dragging&&!l._transitioning){S.call("_storeDirectGUIEdit",s,M._tracePreGUI[s.uid],{level:s.level});var N={data:[{level:D}],traces:[c.index]},B={frame:{redraw:!1,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:!0};E.loneUnhover(M._hoverlayer.node()),S.call("animate",l,N,B)}};f.on("mouseover",A),f.on("mouseout",P),f.on("click",y)};function o(i,f,u){for(var l=i.data.data,m={curveNumber:f.index,pointNumber:l.i,data:f._input,fullData:f},h=0;h<u.length;h++){var w=u[h];w in i&&(m[w]=i[w])}return"parentString"in i&&!g.isHierarchyRoot(i)&&(m.parent=i.parentString),n(m,f,l.i),m}},78176:function(U,F,e){var d=e(3400),S=e(76308),n=e(93972),E=e(69656);F.findEntryWithLevel=function(r,t){var o;return t&&r.eachAfter(function(i){if(F.getPtId(i)===t)return o=i.copy()}),o||r},F.findEntryWithChild=function(r,t){var o;return r.eachAfter(function(i){for(var f=i.children||[],u=0;u<f.length;u++){var l=f[u];if(F.getPtId(l)===t)return o=i.copy()}}),o||r},F.isEntry=function(r){return!r.parent},F.isLeaf=function(r){return!r.children},F.getPtId=function(r){return r.data.data.id},F.getPtLabel=function(r){return r.data.data.label},F.getValue=function(r){return r.value},F.isHierarchyRoot=function(r){return g(r)===""},F.setSliceCursor=function(r,t,o){var i=o.isTransitioning;if(!i){var f=r.datum();i=o.hideOnRoot&&F.isHierarchyRoot(f)||o.hideOnLeaves&&F.isLeaf(f)}n(r,i?null:"pointer")};function T(r,t,o){return{color:F.getOutsideTextFontKey("color",r,t,o),family:F.getOutsideTextFontKey("family",r,t,o),size:F.getOutsideTextFontKey("size",r,t,o),weight:F.getOutsideTextFontKey("weight",r,t,o),style:F.getOutsideTextFontKey("style",r,t,o),variant:F.getOutsideTextFontKey("variant",r,t,o),textcase:F.getOutsideTextFontKey("textcase",r,t,o),lineposition:F.getOutsideTextFontKey("lineposition",r,t,o),shadow:F.getOutsideTextFontKey("shadow",r,t,o)}}function v(r,t,o,i){var f=(i||{}).onPathbar,u=t.data.data,l=u.i,m=d.castOption(r,l,(f?"pathbar.textfont":"insidetextfont")+".color");return!m&&r._input.textfont&&(m=d.castOption(r._input,l,"textfont.color")),{color:m||S.contrast(u.color),family:F.getInsideTextFontKey("family",r,t,o,i),size:F.getInsideTextFontKey("size",r,t,o,i),weight:F.getInsideTextFontKey("weight",r,t,o,i),style:F.getInsideTextFontKey("style",r,t,o,i),variant:F.getInsideTextFontKey("variant",r,t,o,i),textcase:F.getInsideTextFontKey("textcase",r,t,o,i),lineposition:F.getInsideTextFontKey("lineposition",r,t,o,i),shadow:F.getInsideTextFontKey("shadow",r,t,o,i)}}F.getInsideTextFontKey=function(r,t,o,i,f){var u=(f||{}).onPathbar,l=u?"pathbar.textfont":"insidetextfont",m=o.data.data.i;return d.castOption(t,m,l+"."+r)||d.castOption(t,m,"textfont."+r)||i.size},F.getOutsideTextFontKey=function(r,t,o,i){var f=o.data.data.i;return d.castOption(t,f,"outsidetextfont."+r)||d.castOption(t,f,"textfont."+r)||i.size},F.isOutsideText=function(r,t){return!r._hasColorscale&&F.isHierarchyRoot(t)},F.determineTextFont=function(r,t,o,i){return F.isOutsideText(r,t)?T(r,t,o):v(r,t,o,i)},F.hasTransition=function(r){return!!(r&&r.duration>0)},F.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},F.isHeader=function(r,t){return!(F.isLeaf(r)||r.depth===t._maxDepth-1)};function g(r){return r.data.data.pid}F.getParent=function(r,t){return F.findEntryWithLevel(r,g(t))},F.listPath=function(r,t){var o=r.parent;if(!o)return[];var i=t?[o.data[t]]:[o];return F.listPath(o,t).concat(i)},F.getPath=function(r){return F.listPath(r,"label").join("/")+"/"},F.formatValue=E.formatPieValue,F.formatPercent=function(r,t){var o=d.formatPercent(r,0);return o==="0%"&&(o=E.formatPiePercent(r,t)),o}},5621:function(U,F,e){U.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(U){U.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(U,F,e){var d=e(3400),S=e(84920);U.exports=function(E,T){function v(g,r){return d.coerce(E,T,S,g,r)}v("sunburstcolorway",T.colorway),v("extendsunburstcolors")}},96488:function(U,F,e){var d=e(33428),S=e(74148),n=e(67756).qy,E=e(43616),T=e(3400),v=e(72736),g=e(82744),r=g.recordMinTextSize,t=g.clearMinTextSize,o=e(37820),i=e(69656).getRotationAngle,f=o.computeTransform,u=o.transformInsideText,l=e(85676).styleOne,m=e(60100).resizeText,h=e(45716),w=e(27328),c=e(78176);F.plot=function(y,C,M,s){var _=y._fullLayout,b=_._sunburstlayer,k,D,V=!M,O=!_.uniformtext.mode&&c.hasTransition(M);if(t("sunburst",_),k=b.selectAll("g.trace.sunburst").data(C,function(B){return B[0].trace.uid}),k.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),k.order(),O){s&&(D=s());var N=d.transition().duration(M.duration).ease(M.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()});N.each(function(){b.selectAll("g.trace").each(function(B){a(y,B,this,M)})})}else k.each(function(B){a(y,B,this,M)}),_.uniformtext.mode&&m(y,_._sunburstlayer.selectAll(".trace"),"sunburst");V&&k.exit().remove()};function a(y,C,M,s){var _=y._context.staticPlot,b=y._fullLayout,k=!b.uniformtext.mode&&c.hasTransition(s),D=d.select(M),V=D.selectAll("g.slice"),O=C[0],N=O.trace,B=O.hierarchy,z=c.findEntryWithLevel(B,N.level),H=c.getMaxDepth(N),X=b._size,$=N.domain,ne=X.w*($.x[1]-$.x[0]),q=X.h*($.y[1]-$.y[0]),ue=.5*Math.min(ne,q),te=O.cx=X.l+X.w*($.x[1]+$.x[0])/2,J=O.cy=X.t+X.h*(1-$.y[0])-q/2;if(!z)return V.remove();var ie=null,K={};k&&V.each(function(Ge){K[c.getPtId(Ge)]={rpx0:Ge.rpx0,rpx1:Ge.rpx1,x0:Ge.x0,x1:Ge.x1,transform:Ge.transform},!ie&&c.isEntry(Ge)&&(ie=Ge)});var ee=p(z).descendants(),le=z.height+1,j=0,Z=H;O.hasMultipleRoots&&c.isHierarchyRoot(z)&&(ee=ee.slice(1),le-=1,j=1,Z+=1),ee=ee.filter(function(Ge){return Ge.y1<=Z});var fe=i(N.rotation);fe&&ee.forEach(function(Ge){Ge.x0+=fe,Ge.x1+=fe});var re=Math.min(le,H),ce=function(Ge){return(Ge-j)/re*ue},xe=function(Ge,rt){return[Ge*Math.cos(rt),-Ge*Math.sin(rt)]},Te=function(Ge){return T.pathAnnulus(Ge.rpx0,Ge.rpx1,Ge.x0,Ge.x1,te,J)},we=function(Ge){return te+A(Ge)[0]*(Ge.transform.rCenter||0)+(Ge.transform.x||0)},_e=function(Ge){return J+A(Ge)[1]*(Ge.transform.rCenter||0)+(Ge.transform.y||0)};V=V.data(ee,c.getPtId),V.enter().append("g").classed("slice",!0),k?V.exit().transition().each(function(){var Ge=d.select(this),rt=Ge.select("path.surface");rt.transition().attrTween("d",function($e){var qe=ze($e);return function(ht){return Te(qe(ht))}});var ot=Ge.select("g.slicetext");ot.attr("opacity",0)}).remove():V.exit().remove(),V.order();var ke=null;if(k&&ie){var Ne=c.getPtId(ie);V.each(function(Ge){ke===null&&c.getPtId(Ge)===Ne&&(ke=Ge.x1)})}var Ee=V;k&&(Ee=Ee.transition().each("end",function(){var Ge=d.select(this);c.setSliceCursor(Ge,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Ee.each(function(Ge){var rt=d.select(this),ot=T.ensureSingle(rt,"path","surface",function(wt){wt.style("pointer-events",_?"none":"all")});Ge.rpx0=ce(Ge.y0),Ge.rpx1=ce(Ge.y1),Ge.xmid=(Ge.x0+Ge.x1)/2,Ge.pxmid=xe(Ge.rpx1,Ge.xmid),Ge.midangle=-(Ge.xmid-Math.PI/2),Ge.startangle=-(Ge.x0-Math.PI/2),Ge.stopangle=-(Ge.x1-Math.PI/2),Ge.halfangle=.5*Math.min(T.angleDelta(Ge.x0,Ge.x1)||Math.PI,Math.PI),Ge.ring=1-Ge.rpx0/Ge.rpx1,Ge.rInscribed=x(Ge),k?ot.transition().attrTween("d",function(wt){var Et=Ce(wt);return function(nt){return Te(Et(nt))}}):ot.attr("d",Te),rt.call(h,z,y,C,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,transitionEasing:w.CLICK_TRANSITION_EASING}).call(c.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),ot.call(l,Ge,N,y);var $e=T.ensureSingle(rt,"g","slicetext"),qe=T.ensureSingle($e,"text","",function(wt){wt.attr("data-notex",1)}),ht=T.ensureUniformFontSize(y,c.determineTextFont(N,Ge,b.font));qe.text(F.formatSliceLabel(Ge,z,N,C,b)).classed("slicetext",!0).attr("text-anchor","middle").call(E.font,ht).call(v.convertToTspans,y);var vt=E.bBox(qe.node());Ge.transform=u(vt,Ge,O),Ge.transform.targetX=we(Ge),Ge.transform.targetY=_e(Ge);var pt=function(wt,Et){var nt=wt.transform;return f(nt,Et),nt.fontSize=ht.size,r(N.type,nt,b),T.getTextTransform(nt)};k?qe.transition().attrTween("transform",function(wt){var Et=Oe(wt);return function(nt){return pt(Et(nt),vt)}}):qe.attr("transform",pt(Ge,vt))});function ze(Ge){var rt=c.getPtId(Ge),ot=K[rt],$e=K[c.getPtId(z)],qe;if($e){var ht=(Ge.x1>$e.x1?2*Math.PI:0)+fe;qe=Ge.rpx1<$e.rpx1?{x0:Ge.x0,x1:Ge.x1,rpx0:0,rpx1:0}:{x0:ht,x1:ht,rpx0:Ge.rpx0,rpx1:Ge.rpx1}}else{var vt,pt=c.getPtId(Ge.parent);V.each(function(We){if(c.getPtId(We)===pt)return vt=We});var wt=vt.children,Et;wt.forEach(function(We,Ze){if(c.getPtId(We)===rt)return Et=Ze});var nt=wt.length,Fe=n(vt.x0,vt.x1);qe={rpx0:ue,rpx1:ue,x0:Fe(Et/nt),x1:Fe((Et+1)/nt)}}return n(ot,qe)}function Ce(Ge){var rt=K[c.getPtId(Ge)],ot,$e={x0:Ge.x0,x1:Ge.x1,rpx0:Ge.rpx0,rpx1:Ge.rpx1};if(rt)ot=rt;else if(ie)if(Ge.parent)if(ke){var qe=(Ge.x1>ke?2*Math.PI:0)+fe;ot={x0:qe,x1:qe}}else ot={rpx0:ue,rpx1:ue},T.extendFlat(ot,Le(Ge));else ot={rpx0:0,rpx1:0};else ot={x0:fe,x1:fe};return n(ot,$e)}function Oe(Ge){var rt=K[c.getPtId(Ge)],ot,$e=Ge.transform;if(rt)ot=rt;else if(ot={rpx1:Ge.rpx1,transform:{textPosAngle:$e.textPosAngle,scale:0,rotate:$e.rotate,rCenter:$e.rCenter,x:$e.x,y:$e.y}},ie)if(Ge.parent)if(ke){var qe=Ge.x1>ke?2*Math.PI:0;ot.x0=ot.x1=qe}else T.extendFlat(ot,Le(Ge));else ot.x0=ot.x1=fe;else ot.x0=ot.x1=fe;var ht=n(ot.transform.textPosAngle,Ge.transform.textPosAngle),vt=n(ot.rpx1,Ge.rpx1),pt=n(ot.x0,Ge.x0),wt=n(ot.x1,Ge.x1),Et=n(ot.transform.scale,$e.scale),nt=n(ot.transform.rotate,$e.rotate),Fe=$e.rCenter===0?3:ot.transform.rCenter===0?1/3:1,We=n(ot.transform.rCenter,$e.rCenter),Ze=function(Ye){return We(Math.pow(Ye,Fe))};return function(Ye){var Ie=vt(Ye),De=pt(Ye),je=wt(Ye),Re=Ze(Ye),pe=xe(Ie,(De+je)/2),be=ht(Ye),Ue={pxmid:pe,rpx1:Ie,transform:{textPosAngle:be,rCenter:Re,x:$e.x,y:$e.y}};return r(N.type,$e,b),{transform:{targetX:we(Ue),targetY:_e(Ue),scale:Et(Ye),rotate:nt(Ye),rCenter:Re}}}}function Le(Ge){var rt=Ge.parent,ot=K[c.getPtId(rt)],$e={};if(ot){var qe=rt.children,ht=qe.indexOf(Ge),vt=qe.length,pt=n(ot.x0,ot.x1);$e.x0=pt(ht/vt),$e.x1=pt(ht/vt)}else $e.x0=$e.x1=0;return $e}}function p(y){return S.partition().size([2*Math.PI,y.height+1])(y)}F.formatSliceLabel=function(y,C,M,s,_){var b=M.texttemplate,k=M.textinfo;if(!b&&(!k||k==="none"))return"";var D=_.separators,V=s[0],O=y.data.data,N=V.hierarchy,B=c.isHierarchyRoot(y),z=c.getParent(N,y),H=c.getValue(y);if(!b){var X=k.split("+"),$=function(j){return X.indexOf(j)!==-1},ne=[],q;if($("label")&&O.label&&ne.push(O.label),O.hasOwnProperty("v")&&$("value")&&ne.push(c.formatValue(O.v,D)),!B){$("current path")&&ne.push(c.getPath(y.data));var ue=0;$("percent parent")&&ue++,$("percent entry")&&ue++,$("percent root")&&ue++;var te=ue>1;if(ue){var J,ie=function(j){q=c.formatPercent(J,D),te&&(q+=" of "+j),ne.push(q)};$("percent parent")&&!B&&(J=H/c.getValue(z),ie("parent")),$("percent entry")&&(J=H/c.getValue(C),ie("entry")),$("percent root")&&(J=H/c.getValue(N),ie("root"))}}return $("text")&&(q=T.castOption(M,O.i,"text"),T.isValidTextValue(q)&&ne.push(q)),ne.join("<br>")}var K=T.castOption(M,O.i,"texttemplate");if(!K)return"";var ee={};O.label&&(ee.label=O.label),O.hasOwnProperty("v")&&(ee.value=O.v,ee.valueLabel=c.formatValue(O.v,D)),ee.currentPath=c.getPath(y.data),B||(ee.percentParent=H/c.getValue(z),ee.percentParentLabel=c.formatPercent(ee.percentParent,D),ee.parent=c.getPtLabel(z)),ee.percentEntry=H/c.getValue(C),ee.percentEntryLabel=c.formatPercent(ee.percentEntry,D),ee.entry=c.getPtLabel(C),ee.percentRoot=H/c.getValue(N),ee.percentRootLabel=c.formatPercent(ee.percentRoot,D),ee.root=c.getPtLabel(N),O.hasOwnProperty("color")&&(ee.color=O.color);var le=T.castOption(M,O.i,"text");return(T.isValidTextValue(le)||le==="")&&(ee.text=le),ee.customdata=T.castOption(M,O.i,"customdata"),T.texttemplateString(K,ee,_._d3locale,ee,M._meta||{})};function x(y){return y.rpx0===0&&T.isFullCircle([y.x0,y.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(y.halfangle)),y.ring/2))}function A(y){return P(y.rpx1,y.transform.textPosAngle)}function P(y,C){return[y*Math.sin(C),-y*Math.cos(C)]}},85676:function(U,F,e){var d=e(33428),S=e(76308),n=e(3400),E=e(82744).resizeText,T=e(60404);function v(r){var t=r._fullLayout._sunburstlayer.selectAll(".trace");E(r,t,"sunburst"),t.each(function(o){var i=d.select(this),f=o[0],u=f.trace;i.style("opacity",u.opacity),i.selectAll("path.surface").each(function(l){d.select(this).call(g,l,u,r)})})}function g(r,t,o,i){var f=t.data.data,u=!t.children,l=f.i,m=n.castOption(o,l,"marker.line.color")||S.defaultLine,h=n.castOption(o,l,"marker.line.width")||0;r.call(T,t,o,i).style("stroke-width",h).call(S.stroke,m).style("opacity",u?o.leaf.opacity:null)}U.exports={style:v,styleOne:g}},16716:function(U,F,e){var d=e(76308),S=e(49084),n=e(29736).axisHoverFormat,E=e(21776).Ks,T=e(45464),v=e(92880).extendFlat,g=e(67824).overrideAll;function r(i){return{valType:"boolean",dflt:!1}}function t(i){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:d.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:d.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var o=U.exports=g(v({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:E(),xhoverformat:n("x"),yhoverformat:n("y"),zhoverformat:n("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},S("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:v({},S.zauto,{}),zmin:v({},S.zmin,{}),zmax:v({},S.zmax,{})},hoverinfo:v({},T.hoverinfo),showlegend:v({},T.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},56576:function(U,F,e){var d=e(47128);U.exports=function(n,E){E.surfacecolor?d(n,E,{vals:E.surfacecolor,containerStr:"",cLetter:"c"}):d(n,E,{vals:E.z,containerStr:"",cLetter:"c"})}},79164:function(U,F,e){var d=e(67792).gl_surface3d,S=e(67792).ndarray,n=e(67792).ndarray_linear_interpolate.d2,E=e(70448),T=e(11240),v=e(3400).isArrayOrTypedArray,g=e(33040).parseColorScale,r=e(43080),t=e(8932).extractOpts;function o(s,_,b){this.scene=s,this.uid=b,this.surface=_,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=o.prototype;i.getXat=function(s,_,b,k){var D=v(this.data.x)?v(this.data.x[0])?this.data.x[_][s]:this.data.x[s]:s;return b===void 0?D:k.d2l(D,0,b)},i.getYat=function(s,_,b,k){var D=v(this.data.y)?v(this.data.y[0])?this.data.y[_][s]:this.data.y[_]:_;return b===void 0?D:k.d2l(D,0,b)},i.getZat=function(s,_,b,k){var D=this.data.z[_][s];return D===null&&this.data.connectgaps&&this.data._interpolatedZ&&(D=this.data._interpolatedZ[_][s]),b===void 0?D:k.d2l(D,0,b)},i.handlePick=function(s){if(s.object===this.surface){var _=(s.data.index[0]-1)/this.dataScaleX-1,b=(s.data.index[1]-1)/this.dataScaleY-1,k=Math.max(Math.min(Math.round(_),this.data.z[0].length-1),0),D=Math.max(Math.min(Math.round(b),this.data._ylength-1),0);s.index=[k,D],s.traceCoordinate=[this.getXat(k,D),this.getYat(k,D),this.getZat(k,D)],s.dataCoordinate=[this.getXat(k,D,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(k,D,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(k,D,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var V=0;V<3;V++){var O=s.dataCoordinate[V];O!=null&&(s.dataCoordinate[V]*=this.scene.dataScale[V])}var N=this.data.hovertext||this.data.text;return v(N)&&N[D]&&N[D][k]!==void 0?s.textLabel=N[D][k]:N?s.textLabel=N:s.textLabel="",s.data.dataCoordinate=s.dataCoordinate.slice(),this.surface.highlight(s.data),this.scene.glplot.spikes.position=s.dataCoordinate,!0}};function f(s){var _=s[0].rgb,b=s[s.length-1].rgb;return _[0]===b[0]&&_[1]===b[1]&&_[2]===b[2]&&_[3]===b[3]}var u=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(s,_){if(s<_)return 0;for(var b=0;Math.floor(s%_)===0;)s/=_,b++;return b}function m(s){for(var _=[],b=0;b<u.length;b++){var k=u[b];_.push(l(s,k))}return _}function h(s){for(var _=m(s),b=s,k=0;k<u.length;k++)if(_[k]>0){b=u[k];break}return b}function w(s,_){if(!(s<1||_<1)){for(var b=m(s),k=m(_),D=1,V=0;V<u.length;V++)D*=Math.pow(u[V],Math.max(b[V],k[V]));return D}}function c(s){if(s.length!==0){for(var _=1,b=0;b<s.length;b++)_=w(_,s[b]);return _}}i.calcXnums=function(s){var _,b=[];for(_=1;_<s;_++){var k=this.getXat(_-1,0),D=this.getXat(_,0);D!==k&&k!==void 0&&k!==null&&D!==void 0&&D!==null?b[_-1]=Math.abs(D-k):b[_-1]=0}var V=0;for(_=1;_<s;_++)V+=b[_-1];for(_=1;_<s;_++)b[_-1]===0?b[_-1]=1:b[_-1]=Math.round(V/b[_-1]);return b},i.calcYnums=function(s){var _,b=[];for(_=1;_<s;_++){var k=this.getYat(0,_-1),D=this.getYat(0,_);D!==k&&k!==void 0&&k!==null&&D!==void 0&&D!==null?b[_-1]=Math.abs(D-k):b[_-1]=0}var V=0;for(_=1;_<s;_++)V+=b[_-1];for(_=1;_<s;_++)b[_-1]===0?b[_-1]=1:b[_-1]=Math.round(V/b[_-1]);return b};var a=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],p=a[9],x=a[13];i.estimateScale=function(s,_){for(var b=_===0?this.calcXnums(s):this.calcYnums(s),k=1+c(b);k<p;)k*=2;for(;k>x;)k--,k/=h(k),k++,k<p&&(k=x);var D=Math.round(k/s);return D>1?D:1};function A(s,_,b){var k=b[8]+b[2]*_[0]+b[5]*_[1];return s[0]=(b[6]+b[0]*_[0]+b[3]*_[1])/k,s[1]=(b[7]+b[1]*_[0]+b[4]*_[1])/k,s}function P(s,_,b){return y(s,_,A,b),s}function y(s,_,b,k){for(var D=[0,0],V=s.shape[0],O=s.shape[1],N=0;N<V;N++)for(var B=0;B<O;B++)b(D,[N,B],k),s.set(N,B,n(_,D[0],D[1]));return s}i.refineCoords=function(s){for(var _=this.dataScaleX,b=this.dataScaleY,k=s[0].shape[0],D=s[0].shape[1],V=Math.floor(s[0].shape[0]*_+1)|0,O=Math.floor(s[0].shape[1]*b+1)|0,N=1+k+1,B=1+D+1,z=S(new Float32Array(N*B),[N,B]),H=[1/_,0,0,0,1/b,0,0,0,1],X=0;X<s.length;++X){this.surface.padField(z,s[X]);var $=S(new Float32Array(V*O),[V,O]);P($,z,H),s[X]=$}};function C(s,_){for(var b=!1,k=0;k<s.length;k++)if(_===s[k]){b=!0;break}b===!1&&s.push(_)}i.setContourLevels=function(){var s=[[],[],[]],_=[!1,!1,!1],b=!1,k,D,V;for(k=0;k<3;++k)if(this.showContour[k]&&(b=!0,this.contourSize[k]>0&&this.contourStart[k]!==null&&this.contourEnd[k]!==null&&this.contourEnd[k]>this.contourStart[k]))for(_[k]=!0,D=this.contourStart[k];D<this.contourEnd[k];D+=this.contourSize[k])V=D*this.scene.dataScale[k],C(s[k],V);if(b){var O=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(O[k]=_[k]?s[k]:this.scene.contourLevels[k]);this.surface.update({levels:O})}},i.update=function(s){var _=this.scene,b=_.fullSceneLayout,k=this.surface,D=g(s),V=_.dataScale,O=s.z[0].length,N=s._ylength,B=_.contourLevels;this.data=s;var z,H,X,$,ne=[];for(z=0;z<3;z++)for(ne[z]=[],H=0;H<O;H++)ne[z][H]=[];for(H=0;H<O;H++)for(X=0;X<N;X++)ne[0][H][X]=this.getXat(H,X,s.xcalendar,b.xaxis),ne[1][H][X]=this.getYat(H,X,s.ycalendar,b.yaxis),ne[2][H][X]=this.getZat(H,X,s.zcalendar,b.zaxis);if(s.connectgaps)for(s._emptypoints=T(ne[2]),E(ne[2],s._emptypoints),s._interpolatedZ=[],H=0;H<O;H++)for(s._interpolatedZ[H]=[],X=0;X<N;X++)s._interpolatedZ[H][X]=ne[2][H][X];for(z=0;z<3;z++)for(H=0;H<O;H++)for(X=0;X<N;X++)$=ne[z][H][X],$==null?ne[z][H][X]=NaN:$=ne[z][H][X]*=V[z];for(z=0;z<3;z++)for(H=0;H<O;H++)for(X=0;X<N;X++)$=ne[z][H][X],$!=null&&(this.minValues[z]>$&&(this.minValues[z]=$),this.maxValues[z]<$&&(this.maxValues[z]=$));for(z=0;z<3;z++)this.objectOffset[z]=.5*(this.minValues[z]+this.maxValues[z]);for(z=0;z<3;z++)for(H=0;H<O;H++)for(X=0;X<N;X++)$=ne[z][H][X],$!=null&&(ne[z][H][X]-=this.objectOffset[z]);var q=[S(new Float32Array(O*N),[O,N]),S(new Float32Array(O*N),[O,N]),S(new Float32Array(O*N),[O,N])];for(z=0;z<3;z++)for(H=0;H<O;H++)for(X=0;X<N;X++)q[z].set(H,X,ne[z][H][X]);ne=[];var ue={colormap:D,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!s.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:s.opacityscale,opacity:s.opacity},te=t(s);if(ue.intensityBounds=[te.min,te.max],s.surfacecolor){var J=S(new Float32Array(O*N),[O,N]);for(H=0;H<O;H++)for(X=0;X<N;X++)J.set(H,X,s.surfacecolor[X][H]);q.push(J)}else ue.intensityBounds[0]*=V[2],ue.intensityBounds[1]*=V[2];(x<q[0].shape[0]||x<q[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(q[0].shape[0],0),this.dataScaleY=this.estimateScale(q[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(q)),s.surfacecolor&&(ue.intensity=q.pop());var ie=[!0,!0,!0],K=["x","y","z"];for(z=0;z<3;++z){var ee=s.contours[K[z]];ie[z]=ee.highlight,ue.showContour[z]=ee.show||ee.highlight,ue.showContour[z]&&(ue.contourProject[z]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[z]=!0,ue.levels[z]=B[z],k.highlightColor[z]=ue.contourColor[z]=r(ee.color),ee.usecolormap?k.highlightTint[z]=ue.contourTint[z]=0:k.highlightTint[z]=ue.contourTint[z]=1,ue.contourWidth[z]=ee.width,this.contourStart[z]=ee.start,this.contourEnd[z]=ee.end,this.contourSize[z]=ee.size):(this.showContour[z]=!1,this.contourStart[z]=null,this.contourEnd[z]=null,this.contourSize[z]=0),ee.highlight&&(ue.dynamicColor[z]=r(ee.highlightcolor),ue.dynamicWidth[z]=ee.highlightwidth))}f(D)&&(ue.vertexColor=!0),ue.objectOffset=this.objectOffset,ue.coords=q,k.update(ue),k.visible=s.visible,k.enableDynamic=ie,k.enableHighlight=ie,k.snapToData=!0,"lighting"in s&&(k.ambientLight=s.lighting.ambient,k.diffuseLight=s.lighting.diffuse,k.specularLight=s.lighting.specular,k.roughness=s.lighting.roughness,k.fresnel=s.lighting.fresnel),"lightposition"in s&&(k.lightPosition=[s.lightposition.x,s.lightposition.y,s.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function M(s,_){var b=s.glplot.gl,k=d({gl:b}),D=new o(s,k,_.uid);return k._trace=D,D.update(_),s.glplot.add(k),D}U.exports=M},60192:function(U,F,e){var d=e(24040),S=e(3400),n=e(27260),E=e(16716),T=.1;function v(i,f){for(var u=[],l=32,m=0;m<l;m++){var h=m/(l-1),w=f+(1-f)*(1-Math.pow(Math.sin(i*h*Math.PI),2));u.push([h,Math.max(0,Math.min(1,w))])}return u}function g(i){var f=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var u=0;u<i.length;u++){var l=i[u];if(l.length!==2||+l[0]<f)return!1;f=+l[0]}return!0}function r(i,f,u,l){var m,h;function w(s,_){return S.coerce(i,f,E,s,_)}var c=w("x"),a=w("y"),p=w("z");if(!p||!p.length||c&&c.length<1||a&&a.length<1){f.visible=!1;return}f._xlength=Array.isArray(c)&&S.isArrayOrTypedArray(c[0])?p.length:p[0].length,f._ylength=p.length;var x=d.getComponentMethod("calendars","handleTraceDefaults");x(i,f,["x","y","z"],l),w("text"),w("hovertext"),w("hovertemplate"),w("xhoverformat"),w("yhoverformat"),w("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(s){w(s)});var A=w("surfacecolor"),P=["x","y","z"];for(m=0;m<3;++m){var y="contours."+P[m],C=w(y+".show"),M=w(y+".highlight");if(C||M)for(h=0;h<3;++h)w(y+".project."+P[h]);C&&(w(y+".color"),w(y+".width"),w(y+".usecolormap")),M&&(w(y+".highlightcolor"),w(y+".highlightwidth")),w(y+".start"),w(y+".end"),w(y+".size")}A||(o(i,"zmin","cmin"),o(i,"zmax","cmax"),o(i,"zauto","cauto")),n(i,f,l,w,{prefix:"",cLetter:"c"}),t(i,f,l,w),f._length=null}function t(i,f,u,l){var m=l("opacityscale");m==="max"?f.opacityscale=[[0,T],[1,1]]:m==="min"?f.opacityscale=[[0,1],[1,T]]:m==="extremes"?f.opacityscale=v(1,T):g(m)||(f.opacityscale=void 0)}function o(i,f,u){f in i&&!(u in i)&&(i[u]=i[f])}U.exports={supplyDefaults:r,opacityscaleDefaults:t}},91304:function(U,F,e){U.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(U,F,e){var d=e(13916),S=e(92880).extendFlat,n=e(67824).overrideAll,E=e(25376),T=e(86968).u,v=e(29736).descriptionOnlyNumbers,g=U.exports=n({domain:T({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:S({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:S({},E({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:S({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:S({},E({arrayOk:!0}))}},"calc","from-root");g.transforms=void 0},85852:function(U,F,e){var d=e(84888)._M,S=e(24752),n="table";F.name=n,F.plot=function(E){var T=d(E.calcdata,n)[0];T.length&&S(E,T)},F.clean=function(E,T,v,g){var r=g._has&&g._has(n),t=T._has&&T._has(n);r&&!t&&g._paperdiv.selectAll(".table").remove()}},39312:function(U,F,e){var d=e(71688).wrap;U.exports=function(){return d({})}},23536:function(U){U.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(U,F,e){var d=e(23536),S=e(92880).extendFlat,n=e(38248),E=e(38116).isTypedArray,T=e(38116).isArrayOrTypedArray;U.exports=function(m,h){var w=r(h.cells.values),c=function($){return $.slice(h.header.values.length,$.length)},a=r(h.header.values);a.length&&!a[0].length&&(a[0]=[""],a=r(a));var p=a.concat(c(w).map(function(){return t((a[0]||[""]).length)})),x=h.domain,A=Math.floor(m._fullLayout._size.w*(x.x[1]-x.x[0])),P=Math.floor(m._fullLayout._size.h*(x.y[1]-x.y[0])),y=h.header.values.length?p[0].map(function(){return h.header.height}):[d.emptyHeaderHeight],C=w.length?w[0].map(function(){return h.cells.height}):[],M=y.reduce(g,0),s=P-M,_=s+d.uplift,b=f(C,_),k=f(y,M),D=i(k,[]),V=i(b,D),O={},N=h._fullInput.columnorder;T(N)&&(N=Array.from(N)),N=N.concat(c(w.map(function($,ne){return ne})));var B=p.map(function($,ne){var q=T(h.columnwidth)?h.columnwidth[Math.min(ne,h.columnwidth.length-1)]:h.columnwidth;return n(q)?Number(q):1}),z=B.reduce(g,0);B=B.map(function($){return $/z*A});var H=Math.max(v(h.header.line.width),v(h.cells.line.width)),X={key:h.uid+m._context.staticPlot,translateX:x.x[0]*m._fullLayout._size.w,translateY:m._fullLayout._size.h*(1-x.y[1]),size:m._fullLayout._size,width:A,maxLineWidth:H,height:P,columnOrder:N,groupHeight:P,rowBlocks:V,headerRowBlocks:D,scrollY:0,cells:S({},h.cells,{values:w}),headerCells:S({},h.header,{values:p}),gdColumns:p.map(function($){return $[0]}),gdColumnsOriginalOrder:p.map(function($){return $[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function($,ne){var q=O[$];O[$]=(q||0)+1;var ue=$+"__"+O[$];return{key:ue,label:$,specIndex:ne,xIndex:N[ne],xScale:o,x:void 0,calcdata:void 0,columnWidth:B[ne]}})};return X.columns.forEach(function($){$.calcdata=X,$.x=o($)}),X};function v(l){if(T(l)){for(var m=0,h=0;h<l.length;h++)m=Math.max(m,v(l[h]));return m}return l}function g(l,m){return l+m}function r(l){var m=l.slice(),h=1/0,w=0,c;for(c=0;c<m.length;c++)E(m[c])?m[c]=Array.from(m[c]):T(m[c])||(m[c]=[m[c]]),h=Math.min(h,m[c].length),w=Math.max(w,m[c].length);if(h!==w)for(c=0;c<m.length;c++){var a=w-m[c].length;a&&(m[c]=m[c].concat(t(a)))}return m}function t(l){for(var m=new Array(l),h=0;h<l;h++)m[h]="";return m}function o(l){return l.calcdata.columns.reduce(function(m,h){return h.xIndex<l.xIndex?m+h.columnWidth:m},0)}function i(l,m){var h=Object.keys(l);return h.map(function(w){return S({},l[w],{auxiliaryBlocks:m})})}function f(l,m){for(var h={},w,c=0,a=0,p=u(),x=0,A=0,P=0;P<l.length;P++)w=l[P],p.rows.push({rowIndex:P,rowHeight:w}),a+=w,(a>=m||P===l.length-1)&&(h[c]=p,p.key=A++,p.firstRowIndex=x,p.lastRowIndex=P,p=u(),c+=a,x=P+1,a=0);return h}function u(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},53056:function(U,F,e){var d=e(92880).extendFlat;F.splitToPanels=function(n){var E=[0,0],T=d({},n,{key:"header",type:"header",page:0,prevPages:E,currentRepaint:[null,null],dragHandle:!0,values:n.calcdata.headerCells.values[n.specIndex],rowBlocks:n.calcdata.headerRowBlocks,calcdata:d({},n.calcdata,{cells:n.calcdata.headerCells})}),v=d({},n,{key:"cells1",type:"cells",page:0,prevPages:E,currentRepaint:[null,null],dragHandle:!1,values:n.calcdata.cells.values[n.specIndex],rowBlocks:n.calcdata.rowBlocks}),g=d({},n,{key:"cells2",type:"cells",page:1,prevPages:E,currentRepaint:[null,null],dragHandle:!1,values:n.calcdata.cells.values[n.specIndex],rowBlocks:n.calcdata.rowBlocks});return[v,g,T]},F.splitToCells=function(n){var E=S(n);return(n.values||[]).slice(E[0],E[1]).map(function(T,v){var g=typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:v+g,key:E[0]+v,column:n,calcdata:n.calcdata,page:n.page,rowBlocks:n.rowBlocks,value:T}})};function S(n){var E=n.rowBlocks[n.page],T=E?E.rows[0].rowIndex:0,v=E?T+E.rows.length:0;return[T,v]}},53212:function(U,F,e){var d=e(3400),S=e(60520),n=e(86968).Q;function E(T,v){for(var g=T.columnorder||[],r=T.header.values.length,t=g.slice(0,r),o=t.slice().sort(function(u,l){return u-l}),i=t.map(function(u){return o.indexOf(u)}),f=i.length;f<r;f++)i.push(f);v("columnorder",i)}U.exports=function(v,g,r,t){function o(i,f){return d.coerce(v,g,S,i,f)}n(g,t,o),o("columnwidth"),o("header.values"),o("header.format"),o("header.align"),o("header.prefix"),o("header.suffix"),o("header.height"),o("header.line.width"),o("header.line.color"),o("header.fill.color"),d.coerceFont(o,"header.font",t.font),E(g,o),o("cells.values"),o("cells.format"),o("cells.align"),o("cells.prefix"),o("cells.suffix"),o("cells.height"),o("cells.line.width"),o("cells.line.color"),o("cells.fill.color"),d.coerceFont(o,"cells.font",t.font),g._length=null}},41724:function(U,F,e){U.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(U,F,e){var d=e(23536),S=e(33428),n=e(3400),E=n.numberFormat,T=e(71688),v=e(43616),g=e(72736),r=e(3400).raiseToTop,t=e(3400).strTranslate,o=e(3400).cancelTransition,i=e(55992),f=e(53056),u=e(76308);U.exports=function(fe,re){var ce=!fe._context.staticPlot,xe=fe._fullLayout._paper.selectAll("."+d.cn.table).data(re.map(function($e){var qe=T.unwrap($e),ht=qe.trace;return i(fe,ht)}),T.keyFun);xe.exit().remove(),xe.enter().append("g").classed(d.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),xe.attr("width",function($e){return $e.width+$e.size.l+$e.size.r}).attr("height",function($e){return $e.height+$e.size.t+$e.size.b}).attr("transform",function($e){return t($e.translateX,$e.translateY)});var Te=xe.selectAll("."+d.cn.tableControlView).data(T.repeat,T.keyFun),we=Te.enter().append("g").classed(d.cn.tableControlView,!0).style("box-sizing","content-box");if(ce){var _e="onwheel"in document?"wheel":"mousewheel";we.on("mousemove",function($e){Te.filter(function(qe){return $e===qe}).call(c,fe)}).on(_e,function($e){if(!$e.scrollbarState.wheeling){$e.scrollbarState.wheeling=!0;var qe=$e.scrollY+S.event.deltaY,ht=$(fe,Te,null,qe)($e);ht||(S.event.stopPropagation(),S.event.preventDefault()),$e.scrollbarState.wheeling=!1}}).call(c,fe,!0)}Te.attr("transform",function($e){return t($e.size.l,$e.size.t)});var ke=Te.selectAll("."+d.cn.scrollBackground).data(T.repeat,T.keyFun);ke.enter().append("rect").classed(d.cn.scrollBackground,!0).attr("fill","none"),ke.attr("width",function($e){return $e.width}).attr("height",function($e){return $e.height}),Te.each(function($e){v.setClipUrl(S.select(this),m(fe,$e),fe)});var Ne=Te.selectAll("."+d.cn.yColumn).data(function($e){return $e.columns},T.keyFun);Ne.enter().append("g").classed(d.cn.yColumn,!0),Ne.exit().remove(),Ne.attr("transform",function($e){return t($e.x,0)}),ce&&Ne.call(S.behavior.drag().origin(function($e){var qe=S.select(this);return O(qe,$e,-d.uplift),r(this),$e.calcdata.columnDragInProgress=!0,c(Te.filter(function(ht){return $e.calcdata.key===ht.key}),fe),$e}).on("drag",function($e){var qe=S.select(this),ht=function(wt){return($e===wt?S.event.x:wt.x)+wt.columnWidth/2};$e.x=Math.max(-d.overdrag,Math.min($e.calcdata.width+d.overdrag-$e.columnWidth,S.event.x));var vt=w(Ne).filter(function(wt){return wt.calcdata.key===$e.calcdata.key}),pt=vt.sort(function(wt,Et){return ht(wt)-ht(Et)});pt.forEach(function(wt,Et){wt.xIndex=Et,wt.x=$e===wt?wt.x:wt.xScale(wt)}),Ne.filter(function(wt){return $e!==wt}).transition().ease(d.transitionEase).duration(d.transitionDuration).attr("transform",function(wt){return t(wt.x,0)}),qe.call(o).attr("transform",t($e.x,-d.uplift))}).on("dragend",function($e){var qe=S.select(this),ht=$e.calcdata;$e.x=$e.xScale($e),$e.calcdata.columnDragInProgress=!1,O(qe,$e,0),D(fe,ht,ht.columns.map(function(vt){return vt.xIndex}))})),Ne.each(function($e){v.setClipUrl(S.select(this),h(fe,$e),fe)});var Ee=Ne.selectAll("."+d.cn.columnBlock).data(f.splitToPanels,T.keyFun);Ee.enter().append("g").classed(d.cn.columnBlock,!0).attr("id",function($e){return $e.key}),Ee.style("cursor",function($e){return $e.dragHandle?"ew-resize":$e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ze=Ee.filter(B),Ce=Ee.filter(N);ce&&Ce.call(S.behavior.drag().origin(function($e){return S.event.stopPropagation(),$e}).on("drag",$(fe,Te,-1)).on("dragend",function(){})),a(fe,Te,ze,Ee),a(fe,Te,Ce,Ee);var Oe=Te.selectAll("."+d.cn.scrollAreaClip).data(T.repeat,T.keyFun);Oe.enter().append("clipPath").classed(d.cn.scrollAreaClip,!0).attr("id",function($e){return m(fe,$e)});var Le=Oe.selectAll("."+d.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);Le.enter().append("rect").classed(d.cn.scrollAreaClipRect,!0).attr("x",-d.overdrag).attr("y",-d.uplift).attr("fill","none"),Le.attr("width",function($e){return $e.width+2*d.overdrag}).attr("height",function($e){return $e.height+d.uplift});var Ge=Ne.selectAll("."+d.cn.columnBoundary).data(T.repeat,T.keyFun);Ge.enter().append("g").classed(d.cn.columnBoundary,!0);var rt=Ne.selectAll("."+d.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);rt.enter().append("clipPath").classed(d.cn.columnBoundaryClippath,!0),rt.attr("id",function($e){return h(fe,$e)});var ot=rt.selectAll("."+d.cn.columnBoundaryRect).data(T.repeat,T.keyFun);ot.enter().append("rect").classed(d.cn.columnBoundaryRect,!0).attr("fill","none"),ot.attr("width",function($e){return $e.columnWidth+2*l($e)}).attr("height",function($e){return $e.calcdata.height+2*l($e)+d.uplift}).attr("x",function($e){return-l($e)}).attr("y",function($e){return-l($e)}),X(null,Ce,Te)};function l(Z){return Math.ceil(Z.calcdata.maxLineWidth/2)}function m(Z,fe){return"clip"+Z._fullLayout._uid+"_scrollAreaBottomClip_"+fe.key}function h(Z,fe){return"clip"+Z._fullLayout._uid+"_columnBoundaryClippath_"+fe.calcdata.key+"_"+fe.specIndex}function w(Z){return[].concat.apply([],Z.map(function(fe){return fe})).map(function(fe){return fe.__data__})}function c(Z,fe,re){function ce(Ne){var Ee=Ne.rowBlocks;return ie(Ee,Ee.length-1)+(Ee.length?K(Ee[Ee.length-1],1/0):1)}var xe=Z.selectAll("."+d.cn.scrollbarKit).data(T.repeat,T.keyFun);xe.enter().append("g").classed(d.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),xe.each(function(Ne){var Ee=Ne.scrollbarState;Ee.totalHeight=ce(Ne),Ee.scrollableAreaHeight=Ne.groupHeight-z(Ne),Ee.currentlyVisibleHeight=Math.min(Ee.totalHeight,Ee.scrollableAreaHeight),Ee.ratio=Ee.currentlyVisibleHeight/Ee.totalHeight,Ee.barLength=Math.max(Ee.ratio*Ee.currentlyVisibleHeight,d.goldenRatio*d.scrollbarWidth),Ee.barWiggleRoom=Ee.currentlyVisibleHeight-Ee.barLength,Ee.wiggleRoom=Math.max(0,Ee.totalHeight-Ee.scrollableAreaHeight),Ee.topY=Ee.barWiggleRoom===0?0:Ne.scrollY/Ee.wiggleRoom*Ee.barWiggleRoom,Ee.bottomY=Ee.topY+Ee.barLength,Ee.dragMultiplier=Ee.wiggleRoom/Ee.barWiggleRoom}).attr("transform",function(Ne){var Ee=Ne.width+d.scrollbarWidth/2+d.scrollbarOffset;return t(Ee,z(Ne))});var Te=xe.selectAll("."+d.cn.scrollbar).data(T.repeat,T.keyFun);Te.enter().append("g").classed(d.cn.scrollbar,!0);var we=Te.selectAll("."+d.cn.scrollbarSlider).data(T.repeat,T.keyFun);we.enter().append("g").classed(d.cn.scrollbarSlider,!0),we.attr("transform",function(Ne){return t(0,Ne.scrollbarState.topY||0)});var _e=we.selectAll("."+d.cn.scrollbarGlyph).data(T.repeat,T.keyFun);_e.enter().append("line").classed(d.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",d.scrollbarWidth).attr("stroke-linecap","round").attr("y1",d.scrollbarWidth/2),_e.attr("y2",function(Ne){return Ne.scrollbarState.barLength-d.scrollbarWidth/2}).attr("stroke-opacity",function(Ne){return Ne.columnDragInProgress||!Ne.scrollbarState.barWiggleRoom||re?0:.4}),_e.transition().delay(0).duration(0),_e.transition().delay(d.scrollbarHideDelay).duration(d.scrollbarHideDuration).attr("stroke-opacity",0);var ke=Te.selectAll("."+d.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);ke.enter().append("line").classed(d.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",d.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Ne){var Ee=S.event.y,ze=this.getBoundingClientRect(),Ce=Ne.scrollbarState,Oe=Ee-ze.top,Le=S.scale.linear().domain([0,Ce.scrollableAreaHeight]).range([0,Ce.totalHeight]).clamp(!0);Ce.topY<=Oe&&Oe<=Ce.bottomY||$(fe,Z,null,Le(Oe-Ce.barLength/2))(Ne)}).call(S.behavior.drag().origin(function(Ne){return S.event.stopPropagation(),Ne.scrollbarState.scrollbarScrollInProgress=!0,Ne}).on("drag",$(fe,Z)).on("dragend",function(){})),ke.attr("y2",function(Ne){return Ne.scrollbarState.scrollableAreaHeight}),fe._context.staticPlot&&(_e.remove(),ke.remove())}function a(Z,fe,re,ce){var xe=p(re),Te=x(xe);C(Te);var we=A(Te);s(we);var _e=y(Te),ke=P(_e);M(ke),_(ke,fe,ce,Z),J(Te)}function p(Z){var fe=Z.selectAll("."+d.cn.columnCells).data(T.repeat,T.keyFun);return fe.enter().append("g").classed(d.cn.columnCells,!0),fe.exit().remove(),fe}function x(Z){var fe=Z.selectAll("."+d.cn.columnCell).data(f.splitToCells,function(re){return re.keyWithinBlock});return fe.enter().append("g").classed(d.cn.columnCell,!0),fe.exit().remove(),fe}function A(Z){var fe=Z.selectAll("."+d.cn.cellRect).data(T.repeat,function(re){return re.keyWithinBlock});return fe.enter().append("rect").classed(d.cn.cellRect,!0),fe}function P(Z){var fe=Z.selectAll("."+d.cn.cellText).data(T.repeat,function(re){return re.keyWithinBlock});return fe.enter().append("text").classed(d.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){S.event.stopPropagation()}),fe}function y(Z){var fe=Z.selectAll("."+d.cn.cellTextHolder).data(T.repeat,function(re){return re.keyWithinBlock});return fe.enter().append("g").classed(d.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),fe}function C(Z){Z.each(function(fe,re){var ce=fe.calcdata.cells.font,xe=fe.column.specIndex,Te={size:V(ce.size,xe,re),color:V(ce.color,xe,re),family:V(ce.family,xe,re),weight:V(ce.weight,xe,re),style:V(ce.style,xe,re),variant:V(ce.variant,xe,re),textcase:V(ce.textcase,xe,re),lineposition:V(ce.lineposition,xe,re),shadow:V(ce.shadow,xe,re)};fe.rowNumber=fe.key,fe.align=V(fe.calcdata.cells.align,xe,re),fe.cellBorderWidth=V(fe.calcdata.cells.line.width,xe,re),fe.font=Te})}function M(Z){Z.each(function(fe){v.font(S.select(this),fe.font)})}function s(Z){Z.attr("width",function(fe){return fe.column.columnWidth}).attr("stroke-width",function(fe){return fe.cellBorderWidth}).each(function(fe){var re=S.select(this);u.stroke(re,V(fe.calcdata.cells.line.color,fe.column.specIndex,fe.rowNumber)),u.fill(re,V(fe.calcdata.cells.fill.color,fe.column.specIndex,fe.rowNumber))})}function _(Z,fe,re,ce){Z.text(function(xe){var Te=xe.column.specIndex,we=xe.rowNumber,_e=xe.value,ke=typeof _e=="string",Ne=ke&&_e.match(/<br>/i),Ee=!ke||Ne;xe.mayHaveMarkup=ke&&_e.match(/[<&>]/);var ze=b(_e);xe.latex=ze;var Ce=ze?"":V(xe.calcdata.cells.prefix,Te,we)||"",Oe=ze?"":V(xe.calcdata.cells.suffix,Te,we)||"",Le=ze?null:V(xe.calcdata.cells.format,Te,we)||null,Ge=Ce+(Le?E(Le)(xe.value):xe.value)+Oe,rt;xe.wrappingNeeded=!xe.wrapped&&!Ee&&!ze&&(rt=k(Ge)),xe.cellHeightMayIncrease=Ne||ze||xe.mayHaveMarkup||(rt===void 0?k(Ge):rt),xe.needsConvertToTspans=xe.mayHaveMarkup||xe.wrappingNeeded||xe.latex;var ot;if(xe.wrappingNeeded){var $e=d.wrapSplitCharacter===" "?Ge.replace(/<a href=/ig,"<a_href="):Ge,qe=$e.split(d.wrapSplitCharacter),ht=d.wrapSplitCharacter===" "?qe.map(function(vt){return vt.replace(/<a_href=/ig,"<a href=")}):qe;xe.fragments=ht.map(function(vt){return{text:vt,width:null}}),xe.fragments.push({fragment:d.wrapSpacer,width:null}),ot=ht.join(d.lineBreaker)+d.lineBreaker+d.wrapSpacer}else delete xe.fragments,ot=Ge;return ot}).attr("dy",function(xe){return xe.needsConvertToTspans?0:"0.75em"}).each(function(xe){var Te=this,we=S.select(Te),_e=xe.wrappingNeeded?q:ue;xe.needsConvertToTspans?g.convertToTspans(we,ce,_e(re,Te,fe,ce,xe)):S.select(Te.parentNode).attr("transform",function(ke){return t(te(ke),d.cellPad)}).attr("text-anchor",function(ke){return{left:"start",center:"middle",right:"end"}[ke.align]})})}function b(Z){return typeof Z=="string"&&Z.match(d.latexCheck)}function k(Z){return Z.indexOf(d.wrapSplitCharacter)!==-1}function D(Z,fe,re){var ce=fe.gdColumnsOriginalOrder;fe.gdColumns.sort(function(xe,Te){return re[ce.indexOf(xe)]-re[ce.indexOf(Te)]}),fe.columnorder=re,Z.emit("plotly_restyle")}function V(Z,fe,re){if(n.isArrayOrTypedArray(Z)){var ce=Z[Math.min(fe,Z.length-1)];return n.isArrayOrTypedArray(ce)?ce[Math.min(re,ce.length-1)]:ce}else return Z}function O(Z,fe,re){Z.transition().ease(d.releaseTransitionEase).duration(d.releaseTransitionDuration).attr("transform",t(fe.x,re))}function N(Z){return Z.type==="cells"}function B(Z){return Z.type==="header"}function z(Z){var fe=Z.rowBlocks.length?Z.rowBlocks[0].auxiliaryBlocks:[];return fe.reduce(function(re,ce){return re+K(ce,1/0)},0)}function H(Z,fe,re){for(var ce=[],xe=0,Te=0;Te<Z.length;Te++){for(var we=Z[Te],_e=we.rows,ke=0,Ne=0;Ne<_e.length;Ne++)ke+=_e[Ne].rowHeight;we.allRowsHeight=ke;var Ee=xe+ke,ze=fe,Ce=ze+re;ze<Ee&&Ce>xe&&ce.push(Te),xe+=ke}return ce}function X(Z,fe,re){var ce=w(fe)[0];if(ce!==void 0){var xe=ce.rowBlocks,Te=ce.calcdata,we=ie(xe,xe.length),_e=ce.calcdata.groupHeight-z(ce),ke=Te.scrollY=Math.max(0,Math.min(we-_e,Te.scrollY)),Ne=H(xe,ke,_e);Ne.length===1&&(Ne[0]===xe.length-1?Ne.unshift(Ne[0]-1):Ne.push(Ne[0]+1)),Ne[0]%2&&Ne.reverse(),fe.each(function(Ee,ze){Ee.page=Ne[ze],Ee.scrollY=ke}),fe.attr("transform",function(Ee){var ze=ie(Ee.rowBlocks,Ee.page)-Ee.scrollY;return t(0,ze)}),Z&&(ne(Z,re,fe,Ne,ce.prevPages,ce,0),ne(Z,re,fe,Ne,ce.prevPages,ce,1),c(re,Z))}}function $(Z,fe,re,ce){return function(Te){var we=Te.calcdata?Te.calcdata:Te,_e=fe.filter(function(ze){return we.key===ze.key}),ke=re||we.scrollbarState.dragMultiplier,Ne=we.scrollY;we.scrollY=ce===void 0?we.scrollY+ke*S.event.dy:ce;var Ee=_e.selectAll("."+d.cn.yColumn).selectAll("."+d.cn.columnBlock).filter(N);return X(Z,Ee,_e),we.scrollY===Ne}}function ne(Z,fe,re,ce,xe,Te,we){var _e=ce[we]!==xe[we];_e&&(clearTimeout(Te.currentRepaint[we]),Te.currentRepaint[we]=setTimeout(function(){var ke=re.filter(function(Ne,Ee){return Ee===we&&ce[Ee]!==xe[Ee]});a(Z,fe,ke,re),xe[we]=ce[we]}))}function q(Z,fe,re,ce){return function(){var Te=S.select(fe.parentNode);Te.each(function(we){var _e=we.fragments;Te.selectAll("tspan.line").each(function(Ge,rt){_e[rt].width=this.getComputedTextLength()});var ke=_e[_e.length-1].width,Ne=_e.slice(0,-1),Ee=[],ze,Ce,Oe=0,Le=we.column.columnWidth-2*d.cellPad;for(we.value="";Ne.length;)ze=Ne.shift(),Ce=ze.width+ke,Oe+Ce>Le&&(we.value+=Ee.join(d.wrapSpacer)+d.lineBreaker,Ee=[],Oe=0),Ee.push(ze.text),Oe+=Ce;Oe&&(we.value+=Ee.join(d.wrapSpacer)),we.wrapped=!0}),Te.selectAll("tspan.line").remove(),_(Te.select("."+d.cn.cellText),re,Z,ce),S.select(fe.parentNode.parentNode).call(J)}}function ue(Z,fe,re,ce,xe){return function(){if(!xe.settledY){var we=S.select(fe.parentNode),_e=le(xe),ke=xe.key-_e.firstRowIndex,Ne=_e.rows[ke].rowHeight,Ee=xe.cellHeightMayIncrease?fe.parentNode.getBoundingClientRect().height+2*d.cellPad:Ne,ze=Math.max(Ee,Ne),Ce=ze-_e.rows[ke].rowHeight;Ce&&(_e.rows[ke].rowHeight=ze,Z.selectAll("."+d.cn.columnCell).call(J),X(null,Z.filter(N),0),c(re,ce,!0)),we.attr("transform",function(){var Oe=this,Le=Oe.parentNode,Ge=Le.getBoundingClientRect(),rt=S.select(Oe.parentNode).select("."+d.cn.cellRect).node().getBoundingClientRect(),ot=Oe.transform.baseVal.consolidate(),$e=rt.top-Ge.top+(ot?ot.matrix.f:d.cellPad);return t(te(xe,S.select(Oe.parentNode).select("."+d.cn.cellTextHolder).node().getBoundingClientRect().width),$e)}),xe.settledY=!0}}}function te(Z,fe){switch(Z.align){case"left":return d.cellPad;case"right":return Z.column.columnWidth-(fe||0)-d.cellPad;case"center":return(Z.column.columnWidth-(fe||0))/2;default:return d.cellPad}}function J(Z){Z.attr("transform",function(fe){var re=fe.rowBlocks[0].auxiliaryBlocks.reduce(function(we,_e){return we+K(_e,1/0)},0),ce=le(fe),xe=K(ce,fe.key),Te=xe+re;return t(0,Te)}).selectAll("."+d.cn.cellRect).attr("height",function(fe){return j(le(fe),fe.key).rowHeight})}function ie(Z,fe){for(var re=0,ce=fe-1;ce>=0;ce--)re+=ee(Z[ce]);return re}function K(Z,fe){for(var re=0,ce=0;ce<Z.rows.length&&Z.rows[ce].rowIndex<fe;ce++)re+=Z.rows[ce].rowHeight;return re}function ee(Z){var fe=Z.allRowsHeight;if(fe!==void 0)return fe;for(var re=0,ce=0;ce<Z.rows.length;ce++)re+=Z.rows[ce].rowHeight;return Z.allRowsHeight=re,re}function le(Z){return Z.rowBlocks[Z.page]}function j(Z,fe){return Z.rows[fe-Z.firstRowIndex]}},40516:function(U,F,e){var d=e(21776).Ks,S=e(21776).Gw,n=e(49084),E=e(86968).u,T=e(74996),v=e(424),g=e(32984),r=e(92880).extendFlat,t=e(98192).c;U.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:v.marker.colors,pattern:t,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:v.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},T.textfont,{}),editType:"calc"},text:T.text,textinfo:v.textinfo,texttemplate:S({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:T.hovertext,hoverinfo:v.hoverinfo,hovertemplate:d({},{keys:g.eventDataKeys}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:r({},T.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:T.sort,root:v.root,domain:E({name:"treemap",trace:!0,editType:"calc"})}},79516:function(U,F,e){var d=e(7316);F.name="treemap",F.plot=function(S,n,E,T){d.plotBasePlot(F.name,S,n,E,T)},F.clean=function(S,n,E,T){d.cleanBasePlot(F.name,S,n,E,T)}},97840:function(U,F,e){var d=e(3776);F.r=function(S,n){return d.calc(S,n)},F.q=function(S){return d._runCrossTraceCalc("treemap",S)}},32984:function(U){U.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(U,F,e){var d=e(3400),S=e(40516),n=e(76308),E=e(86968).Q,T=e(31508).handleText,v=e(78048).TEXTPAD,g=e(74174).handleMarkerDefaults,r=e(8932),t=r.hasColorscale,o=r.handleDefaults;U.exports=function(f,u,l,m){function h(s,_){return d.coerce(f,u,S,s,_)}var w=h("labels"),c=h("parents");if(!w||!w.length||!c||!c.length){u.visible=!1;return}var a=h("values");a&&a.length?h("branchvalues"):h("count"),h("level"),h("maxdepth");var p=h("tiling.packing");p==="squarify"&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var x=h("text");h("texttemplate"),u.texttemplate||h("textinfo",d.isArrayOrTypedArray(x)?"text+label":"label"),h("hovertext"),h("hovertemplate");var A=h("pathbar.visible"),P="auto";T(f,u,m,h,P,{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var y=u.textposition.indexOf("bottom")!==-1;g(f,u,m,h);var C=u._hasColorscale=t(f,"marker","colors")||(f.marker||{}).coloraxis;C?o(f,u,m,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(u.marker.colors||[]).length);var M=u.textfont.size*2;h("marker.pad.t",y?M/4:M),h("marker.pad.l",M/4),h("marker.pad.r",M/4),h("marker.pad.b",y?M:M/4),h("marker.cornerradius"),u._hovered={marker:{line:{width:2,color:n.contrast(m.paper_bgcolor)}}},A&&(h("pathbar.thickness",u.pathbar.textfont.size+2*v),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),E(u,m,h),u._length=null}},95808:function(U,F,e){var d=e(33428),S=e(78176),n=e(82744),E=n.clearMinTextSize,T=e(60100).resizeText,v=e(52960);U.exports=function(r,t,o,i,f){var u=f.type,l=f.drawDescendants,m=r._fullLayout,h=m["_"+u+"layer"],w,c,a=!o;if(E(u,m),w=h.selectAll("g.trace."+u).data(t,function(x){return x[0].trace.uid}),w.enter().append("g").classed("trace",!0).classed(u,!0),w.order(),!m.uniformtext.mode&&S.hasTransition(o)){i&&(c=i());var p=d.transition().duration(o.duration).ease(o.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()});p.each(function(){h.selectAll("g.trace").each(function(x){v(r,x,this,o,l)})})}else w.each(function(x){v(r,x,this,o,l)}),m.uniformtext.mode&&T(r,h.selectAll(".trace"),u);a&&w.exit().remove()}},27336:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(72736),T=e(13832),v=e(66192).styleOne,g=e(32984),r=e(78176),t=e(45716),o=!0;U.exports=function(f,u,l,m,h){var w=h.barDifY,c=h.width,a=h.height,p=h.viewX,x=h.viewY,A=h.pathSlice,P=h.toMoveInsideSlice,y=h.strTransform,C=h.hasTransition,M=h.handleSlicesExit,s=h.makeUpdateSliceInterpolator,_=h.makeUpdateTextInterpolator,b={},k=f._context.staticPlot,D=f._fullLayout,V=u[0],O=V.trace,N=V.hierarchy,B=c/O._entryDepth,z=r.listPath(l.data,"id"),H=T(N.copy(),[c,a],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();H=H.filter(function($){var ne=z.indexOf($.data.id);return ne===-1?!1:($.x0=B*ne,$.x1=B*(ne+1),$.y0=w,$.y1=w+a,$.onPathbar=!0,!0)}),H.reverse(),m=m.data(H,r.getPtId),m.enter().append("g").classed("pathbar",!0),M(m,o,b,[c,a],A),m.order();var X=m;C&&(X=X.transition().each("end",function(){var $=d.select(this);r.setSliceCursor($,f,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function($){$._x0=p($.x0),$._x1=p($.x1),$._y0=x($.y0),$._y1=x($.y1),$._hoverX=p($.x1-Math.min(c,a)/2),$._hoverY=x($.y1-a/2);var ne=d.select(this),q=S.ensureSingle(ne,"path","surface",function(ie){ie.style("pointer-events",k?"none":"all")});C?q.transition().attrTween("d",function(ie){var K=s(ie,o,b,[c,a]);return function(ee){return A(K(ee))}}):q.attr("d",A),ne.call(t,l,f,u,{styleOne:v,eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,f,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:f._transitioning}),q.call(v,$,O,f,{hovered:!1}),$._text=(r.getPtLabel($)||"").split("<br>").join(" ")||"";var ue=S.ensureSingle(ne,"g","slicetext"),te=S.ensureSingle(ue,"text","",function(ie){ie.attr("data-notex",1)}),J=S.ensureUniformFontSize(f,r.determineTextFont(O,$,D.font,{onPathbar:!0}));te.text($._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(n.font,J).call(E.convertToTspans,f),$.textBB=n.bBox(te.node()),$.transform=P($,{fontSize:J.size,onPathbar:!0}),$.transform.fontSize=J.size,C?te.transition().attrTween("transform",function(ie){var K=_(ie,o,b,[c,a]);return function(ee){return y(K(ee))}}):te.attr("transform",y($))})}},76477:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(72736),T=e(13832),v=e(66192).styleOne,g=e(32984),r=e(78176),t=e(45716),o=e(96488).formatSliceLabel,i=!1;U.exports=function(u,l,m,h,w){var c=w.width,a=w.height,p=w.viewX,x=w.viewY,A=w.pathSlice,P=w.toMoveInsideSlice,y=w.strTransform,C=w.hasTransition,M=w.handleSlicesExit,s=w.makeUpdateSliceInterpolator,_=w.makeUpdateTextInterpolator,b=w.prevEntry,k={},D=u._context.staticPlot,V=u._fullLayout,O=l[0],N=O.trace,B=N.textposition.indexOf("left")!==-1,z=N.textposition.indexOf("right")!==-1,H=N.textposition.indexOf("bottom")!==-1,X=!H&&!N.marker.pad.t||H&&!N.marker.pad.b,$=T(m,[c,a],{packing:N.tiling.packing,squarifyratio:N.tiling.squarifyratio,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,pad:{inner:N.tiling.pad,top:N.marker.pad.t,left:N.marker.pad.l,right:N.marker.pad.r,bottom:N.marker.pad.b}}),ne=$.descendants(),q=1/0,ue=-1/0;ne.forEach(function(ee){var le=ee.depth;le>=N._maxDepth?(ee.x0=ee.x1=(ee.x0+ee.x1)/2,ee.y0=ee.y1=(ee.y0+ee.y1)/2):(q=Math.min(q,le),ue=Math.max(ue,le))}),h=h.data(ne,r.getPtId),N._maxVisibleLayers=isFinite(ue)?ue-q+1:0,h.enter().append("g").classed("slice",!0),M(h,i,k,[c,a],A),h.order();var te=null;if(C&&b){var J=r.getPtId(b);h.each(function(ee){te===null&&r.getPtId(ee)===J&&(te={x0:ee.x0,x1:ee.x1,y0:ee.y0,y1:ee.y1})})}var ie=function(){return te||{x0:0,x1:c,y0:0,y1:a}},K=h;return C&&(K=K.transition().each("end",function(){var ee=d.select(this);r.setSliceCursor(ee,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(ee){var le=r.isHeader(ee,N);ee._x0=p(ee.x0),ee._x1=p(ee.x1),ee._y0=x(ee.y0),ee._y1=x(ee.y1),ee._hoverX=p(ee.x1-N.marker.pad.r),ee._hoverY=x(H?ee.y1-N.marker.pad.b/2:ee.y0+N.marker.pad.t/2);var j=d.select(this),Z=S.ensureSingle(j,"path","surface",function(we){we.style("pointer-events",D?"none":"all")});C?Z.transition().attrTween("d",function(we){var _e=s(we,i,ie(),[c,a]);return function(ke){return A(_e(ke))}}):Z.attr("d",A),j.call(t,m,u,l,{styleOne:v,eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,u,{isTransitioning:u._transitioning}),Z.call(v,ee,N,u,{hovered:!1}),ee.x0===ee.x1||ee.y0===ee.y1?ee._text="":le?ee._text=X?"":r.getPtLabel(ee)||"":ee._text=o(ee,m,N,l,V)||"";var fe=S.ensureSingle(j,"g","slicetext"),re=S.ensureSingle(fe,"text","",function(we){we.attr("data-notex",1)}),ce=S.ensureUniformFontSize(u,r.determineTextFont(N,ee,V.font)),xe=ee._text||" ",Te=le&&xe.indexOf("<br>")===-1;re.text(xe).classed("slicetext",!0).attr("text-anchor",z?"end":B||Te?"start":"middle").call(n.font,ce).call(E.convertToTspans,u),ee.textBB=n.bBox(re.node()),ee.transform=P(ee,{fontSize:ce.size,isHeader:le}),ee.transform.fontSize=ce.size,C?re.transition().attrTween("transform",function(we){var _e=_(we,i,ie(),[c,a]);return function(ke){return y(_e(ke))}}):re.attr("transform",y(ee))}),te}},83024:function(U){U.exports=function F(e,d,S){var n;S.swapXY&&(n=e.x0,e.x0=e.y0,e.y0=n,n=e.x1,e.x1=e.y1,e.y1=n),S.flipX&&(n=e.x0,e.x0=d[0]-e.x1,e.x1=d[0]-n),S.flipY&&(n=e.y0,e.y0=d[1]-e.y1,e.y1=d[1]-n);var E=e.children;if(E)for(var T=0;T<E.length;T++)F(E[T],d,S)}},31991:function(U,F,e){U.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(U){U.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(U,F,e){var d=e(3400),S=e(45392);U.exports=function(E,T){function v(g,r){return d.coerce(E,T,S,g,r)}v("treemapcolorway",T.colorway),v("extendtreemapcolors")}},13832:function(U,F,e){var d=e(74148),S=e(83024);U.exports=function(T,v,g){var r=g.flipX,t=g.flipY,o=g.packing==="dice-slice",i=g.pad[t?"bottom":"top"],f=g.pad[r?"right":"left"],u=g.pad[r?"left":"right"],l=g.pad[t?"top":"bottom"],m;o&&(m=f,f=i,i=m,m=u,u=l,l=m);var h=d.treemap().tile(n(g.packing,g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(f).paddingRight(u).paddingTop(i).paddingBottom(l).size(o?[v[1],v[0]]:v)(T);return(o||r||t)&&S(h,v,{swapXY:o,flipX:r,flipY:t}),h};function n(E,T){switch(E){case"squarify":return d.treemapSquarify.ratio(T);case"binary":return d.treemapBinary;case"dice":return d.treemapDice;case"slice":return d.treemapSlice;default:return d.treemapSliceDice}}},53264:function(U,F,e){var d=e(95808),S=e(76477);U.exports=function(E,T,v,g){return d(E,T,v,g,{type:"treemap",drawDescendants:S})}},52960:function(U,F,e){var d=e(33428),S=e(67756).qy,n=e(78176),E=e(3400),T=e(78048).TEXTPAD,v=e(98184),g=v.toMoveInsideBar,r=e(82744),t=r.recordMinTextSize,o=e(32984),i=e(27336);function f(u){return n.isHierarchyRoot(u)?"":n.getPtId(u)}U.exports=function(l,m,h,w,c){var a=l._fullLayout,p=m[0],x=p.trace,A=x.type,P=A==="icicle",y=p.hierarchy,C=n.findEntryWithLevel(y,x.level),M=d.select(h),s=M.selectAll("g.pathbar"),_=M.selectAll("g.slice");if(!C){s.remove(),_.remove();return}var b=n.isHierarchyRoot(C),k=!a.uniformtext.mode&&n.hasTransition(w),D=n.getMaxDepth(x),V=function(Fe){return Fe.data.depth-C.data.depth<D},O=a._size,N=x.domain,B=O.w*(N.x[1]-N.x[0]),z=O.h*(N.y[1]-N.y[0]),H=B,X=x.pathbar.thickness,$=x.marker.line.width+o.gapWithPathbar,ne=x.pathbar.visible?x.pathbar.side.indexOf("bottom")>-1?z+$:-(X+$):0,q={x0:H,x1:H,y0:ne,y1:ne+X},ue=function(Fe,We,Ze){var Ye=x.tiling.pad,Ie=function(pe){return pe-Ye<=We.x0},De=function(pe){return pe+Ye>=We.x1},je=function(pe){return pe-Ye<=We.y0},Re=function(pe){return pe+Ye>=We.y1};return Fe.x0===We.x0&&Fe.x1===We.x1&&Fe.y0===We.y0&&Fe.y1===We.y1?{x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1}:{x0:Ie(Fe.x0-Ye)?0:De(Fe.x0-Ye)?Ze[0]:Fe.x0,x1:Ie(Fe.x1+Ye)?0:De(Fe.x1+Ye)?Ze[0]:Fe.x1,y0:je(Fe.y0-Ye)?0:Re(Fe.y0-Ye)?Ze[1]:Fe.y0,y1:je(Fe.y1+Ye)?0:Re(Fe.y1+Ye)?Ze[1]:Fe.y1}},te=null,J={},ie={},K=null,ee=function(Fe,We){return We?J[f(Fe)]:ie[f(Fe)]},le=function(Fe,We,Ze,Ye){if(We)return J[f(y)]||q;var Ie=ie[x.level]||Ze;return V(Fe)?ue(Fe,Ie,Ye):{}};p.hasMultipleRoots&&b&&D++,x._maxDepth=D,x._backgroundColor=a.paper_bgcolor,x._entryDepth=C.data.depth,x._atRootLevel=b;var j=-B/2+O.l+O.w*(N.x[1]+N.x[0])/2,Z=-z/2+O.t+O.h*(1-(N.y[1]+N.y[0])/2),fe=function(Fe){return j+Fe},re=function(Fe){return Z+Fe},ce=re(0),xe=fe(0),Te=function(Fe){return xe+Fe},we=function(Fe){return ce+Fe};function _e(Fe,We){return Fe+","+We}var ke=Te(0),Ne=function(Fe){Fe.x=Math.max(ke,Fe.x)},Ee=x.pathbar.edgeshape,ze=function(Fe){var We=Te(Math.max(Math.min(Fe.x0,Fe.x0),0)),Ze=Te(Math.min(Math.max(Fe.x1,Fe.x1),H)),Ye=we(Fe.y0),Ie=we(Fe.y1),De=X/2,je={},Re={};je.x=We,Re.x=Ze,je.y=Re.y=(Ye+Ie)/2;var pe={x:We,y:Ye},be={x:Ze,y:Ye},Ue={x:Ze,y:Ie},et={x:We,y:Ie};return Ee===">"?(pe.x-=De,be.x-=De,Ue.x-=De,et.x-=De):Ee==="/"?(Ue.x-=De,et.x-=De,je.x-=De/2,Re.x-=De/2):Ee==="\\"?(pe.x-=De,be.x-=De,je.x-=De/2,Re.x-=De/2):Ee==="<"&&(je.x-=De,Re.x-=De),Ne(pe),Ne(et),Ne(je),Ne(be),Ne(Ue),Ne(Re),"M"+_e(pe.x,pe.y)+"L"+_e(be.x,be.y)+"L"+_e(Re.x,Re.y)+"L"+_e(Ue.x,Ue.y)+"L"+_e(et.x,et.y)+"L"+_e(je.x,je.y)+"Z"},Ce=x[P?"tiling":"marker"].pad,Oe=function(Fe){return x.textposition.indexOf(Fe)!==-1},Le=Oe("top"),Ge=Oe("left"),rt=Oe("right"),ot=Oe("bottom"),$e=function(Fe){var We=fe(Fe.x0),Ze=fe(Fe.x1),Ye=re(Fe.y0),Ie=re(Fe.y1),De=Ze-We,je=Ie-Ye;if(!De||!je)return"";var Re=x.marker.cornerradius||0,pe=Math.min(Re,De/2,je/2);pe&&Fe.data&&Fe.data.data&&Fe.data.data.label&&(Le&&(pe=Math.min(pe,Ce.t)),Ge&&(pe=Math.min(pe,Ce.l)),rt&&(pe=Math.min(pe,Ce.r)),ot&&(pe=Math.min(pe,Ce.b)));var be=function(Ue,et){return pe?"a"+_e(pe,pe)+" 0 0 1 "+_e(Ue,et):""};return"M"+_e(We,Ye+pe)+be(pe,-pe)+"L"+_e(Ze-pe,Ye)+be(pe,pe)+"L"+_e(Ze,Ie-pe)+be(-pe,pe)+"L"+_e(We+pe,Ie)+be(-pe,-pe)+"Z"},qe=function(Fe,We){var Ze=Fe.x0,Ye=Fe.x1,Ie=Fe.y0,De=Fe.y1,je=Fe.textBB,Re=Le||We.isHeader&&!ot,pe=Re?"start":ot?"end":"middle",be=Oe("right"),Ue=Oe("left")||We.onPathbar,et=Ue?-1:be?1:0;if(We.isHeader){if(Ze+=(P?Ce:Ce.l)-T,Ye-=(P?Ce:Ce.r)-T,Ze>=Ye){var st=(Ze+Ye)/2;Ze=st,Ye=st}var lt;ot?(lt=De-(P?Ce:Ce.b),Ie<lt&&lt<De&&(Ie=lt)):(lt=Ie+(P?Ce:Ce.t),Ie<lt&&lt<De&&(De=lt))}var Gt=g(Ze,Ye,Ie,De,je,{isHorizontal:!1,constrained:!0,angle:0,anchor:pe,leftToRight:et});return Gt.fontSize=We.fontSize,Gt.targetX=fe(Gt.targetX),Gt.targetY=re(Gt.targetY),isNaN(Gt.targetX)||isNaN(Gt.targetY)?{}:(Ze!==Ye&&Ie!==De&&t(x.type,Gt,a),{scale:Gt.scale,rotate:Gt.rotate,textX:Gt.textX,textY:Gt.textY,anchorX:Gt.anchorX,anchorY:Gt.anchorY,targetX:Gt.targetX,targetY:Gt.targetY})},ht=function(Fe,We){for(var Ze,Ye=0,Ie=Fe;!Ze&&Ye<D;)Ye++,Ie=Ie.parent,Ie?Ze=ee(Ie,We):Ye=D;return Ze||{}},vt=function(Fe,We,Ze,Ye){var Ie=ee(Fe,We),De;if(We)De=q;else{var je=ee(C,We);je?De=ue(Fe,je,Ye):De={}}return S(Ie,De)},pt=function(Fe,We,Ze,Ye,Ie){var De=ee(Fe,We),je;if(De)je=De;else if(We)je=q;else if(te)if(Fe.parent){var Re=K||Ze;Re&&!We?je=ue(Fe,Re,Ye):(je={},E.extendFlat(je,ht(Fe,We)))}else je=E.extendFlat({},Fe),P&&(Ie.orientation==="h"?Ie.flipX?je.x0=Fe.x1:je.x1=0:Ie.flipY?je.y0=Fe.y1:je.y1=0);else je={};return S(je,{x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1})},wt=function(Fe,We,Ze,Ye){var Ie=ee(Fe,We),De={},je=le(Fe,We,Ze,Ye);E.extendFlat(De,{transform:qe({x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1,textBB:Fe.textBB,_text:Fe._text},{isHeader:n.isHeader(Fe,x)})}),Ie?De=Ie:Fe.parent&&E.extendFlat(De,ht(Fe,We));var Re=Fe.transform;return Fe.x0!==Fe.x1&&Fe.y0!==Fe.y1&&t(x.type,Re,a),S(De,{transform:{scale:Re.scale,rotate:Re.rotate,textX:Re.textX,textY:Re.textY,anchorX:Re.anchorX,anchorY:Re.anchorY,targetX:Re.targetX,targetY:Re.targetY}})},Et=function(Fe,We,Ze,Ye,Ie){var De=Ye[0],je=Ye[1];k?Fe.exit().transition().each(function(){var Re=d.select(this),pe=Re.select("path.surface");pe.transition().attrTween("d",function(Ue){var et=vt(Ue,We,Ze,[De,je]);return function(st){return Ie(et(st))}});var be=Re.select("g.slicetext");be.attr("opacity",0)}).remove():Fe.exit().remove()},nt=function(Fe){var We=Fe.transform;return Fe.x0!==Fe.x1&&Fe.y0!==Fe.y1&&t(x.type,We,a),E.getTextTransform({textX:We.textX,textY:We.textY,anchorX:We.anchorX,anchorY:We.anchorY,targetX:We.targetX,targetY:We.targetY,scale:We.scale,rotate:We.rotate})};k&&(s.each(function(Fe){J[f(Fe)]={x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1},Fe.transform&&(J[f(Fe)].transform={textX:Fe.transform.textX,textY:Fe.transform.textY,anchorX:Fe.transform.anchorX,anchorY:Fe.transform.anchorY,targetX:Fe.transform.targetX,targetY:Fe.transform.targetY,scale:Fe.transform.scale,rotate:Fe.transform.rotate})}),_.each(function(Fe){ie[f(Fe)]={x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1},Fe.transform&&(ie[f(Fe)].transform={textX:Fe.transform.textX,textY:Fe.transform.textY,anchorX:Fe.transform.anchorX,anchorY:Fe.transform.anchorY,targetX:Fe.transform.targetX,targetY:Fe.transform.targetY,scale:Fe.transform.scale,rotate:Fe.transform.rotate}),!te&&n.isEntry(Fe)&&(te=Fe)})),K=c(l,m,C,_,{width:B,height:z,viewX:fe,viewY:re,pathSlice:$e,toMoveInsideSlice:qe,prevEntry:te,makeUpdateSliceInterpolator:pt,makeUpdateTextInterpolator:wt,handleSlicesExit:Et,hasTransition:k,strTransform:nt}),x.pathbar.visible?i(l,m,C,s,{barDifY:ne,width:H,height:X,viewX:Te,viewY:we,pathSlice:ze,toMoveInsideSlice:qe,makeUpdateSliceInterpolator:pt,makeUpdateTextInterpolator:wt,handleSlicesExit:Et,hasTransition:k,strTransform:nt}):s.remove()}},66192:function(U,F,e){var d=e(33428),S=e(76308),n=e(3400),E=e(78176),T=e(82744).resizeText,v=e(60404);function g(t){var o=t._fullLayout._treemaplayer.selectAll(".trace");T(t,o,"treemap"),o.each(function(i){var f=d.select(this),u=i[0],l=u.trace;f.style("opacity",l.opacity),f.selectAll("path.surface").each(function(m){d.select(this).call(r,m,l,t,{hovered:!1})})})}function r(t,o,i,f,u){var l=(u||{}).hovered,m=o.data.data,h=m.i,w,c,a=m.color,p=E.isHierarchyRoot(o),x=1;if(l)w=i._hovered.marker.line.color,c=i._hovered.marker.line.width;else if(p&&a===i.root.color)x=100,w="rgba(0,0,0,0)",c=0;else if(w=n.castOption(i,h,"marker.line.color")||S.defaultLine,c=n.castOption(i,h,"marker.line.width")||0,!i._hasColorscale&&!o.onPathbar){var A=i.marker.depthfade;if(A){var P=S.combine(S.addOpacity(i._backgroundColor,.75),a),y;if(A===!0){var C=E.getMaxDepth(i);isFinite(C)?E.isLeaf(o)?y=0:y=i._maxVisibleLayers-(o.data.depth-i._entryDepth):y=o.data.height+1}else y=o.data.depth-i._entryDepth,i._atRootLevel||y++;if(y>0)for(var M=0;M<y;M++){var s=.5*M/y;a=S.combine(S.addOpacity(P,s),a)}}}t.call(v,o,i,f,a).style("stroke-width",c).call(S.stroke,w).style("opacity",x)}U.exports={style:g,styleOne:r}},13988:function(U,F,e){var d=e(63188),S=e(92880).extendFlat,n=e(29736).axisHoverFormat;U.exports={y:d.y,x:d.x,x0:d.x0,y0:d.y0,xhoverformat:n("x"),yhoverformat:n("y"),name:S({},d.name,{}),orientation:S({},d.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,points:S({},d.boxpoints,{}),jitter:S({},d.jitter,{}),pointpos:S({},d.pointpos,{}),width:S({},d.width,{}),marker:d.marker,text:d.text,hovertext:d.hovertext,hovertemplate:d.hovertemplate,quartilemethod:d.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:d.zorder}},67064:function(U,F,e){var d=e(3400),S=e(54460),n=e(62555),E=e(63800),T=e(39032).BADNUM;U.exports=function(o,i){var f=n(o,i);if(f[0].t.empty)return f;for(var u=o._fullLayout,l=S.getFromId(o,i[i.orientation==="h"?"xaxis":"yaxis"]),m=1/0,h=-1/0,w=0,c=0,a=0;a<f.length;a++){var p=f[a],x=p.pts.map(E.extractVal),A=p.bandwidth=g(i,p,x),P=p.span=r(i,p,l,A);if(p.min===p.max&&A===0)P=p.span=[p.min,p.max],p.density=[{v:1,t:P[0]}],p.bandwidth=A,w=Math.max(w,1);else{var y=P[1]-P[0],C=Math.ceil(y/(A/3)),M=y/C;if(!isFinite(M)||!isFinite(C))return d.error("Something went wrong with computing the violin span"),f[0].t.empty=!0,f;var s=E.makeKDE(p,i,x);p.density=new Array(C);for(var _=0,b=P[0];b<P[1]+M/2;_++,b+=M){var k=s(b);p.density[_]={v:k,t:b},w=Math.max(w,k)}}c=Math.max(c,x.length),m=Math.min(m,P[0]),h=Math.max(h,P[1])}var D=S.findExtremes(l,[m,h],{padded:!0});if(i._extremes[l._id]=D,i.width)f[0].t.maxKDE=w;else{var V=u._violinScaleGroupStats,O=i.scalegroup,N=V[O];N?(N.maxKDE=Math.max(N.maxKDE,w),N.maxCount=Math.max(N.maxCount,c)):V[O]={maxKDE:w,maxCount:c}}return f[0].t.labels.kde=d._(o,"kde:"),f};function v(t,o,i){var f=Math.min(o,i/1.349);return 1.059*f*Math.pow(t,-.2)}function g(t,o,i){var f=o.max-o.min;if(!f)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,f/1e4);var u=i.length,l=d.stdev(i,u-1,o.mean);return Math.max(v(u,l,o.q3-o.q1),f/100)}function r(t,o,i,f){var u=t.spanmode,l=t.span||[],m=[o.min,o.max],h=[o.min-2*f,o.max+2*f],w;function c(p){var x=l[p],A=i.type==="multicategory"?i.r2c(x):i.d2c(x,0,t[o.valLetter+"calendar"]);return A===T?h[p]:A}u==="soft"?w=h:u==="hard"?w=m:w=[c(0),c(1)];var a={type:"linear",range:w};return S.setConvert(a),a.cleanRange(),w}},14348:function(U,F,e){var d=e(96404).setPositionOffset,S=["v","h"];U.exports=function(E,T){for(var v=E.calcdata,g=T.xaxis,r=T.yaxis,t=0;t<S.length;t++){for(var o=S[t],i=o==="h"?r:g,f=[],u=0;u<v.length;u++){var l=v[u],m=l[0].t,h=l[0].trace;h.visible===!0&&h.type==="violin"&&!m.empty&&h.orientation===o&&h.xaxis===g._id&&h.yaxis===r._id&&f.push(u)}d("violin",E,f,i)}}},36240:function(U,F,e){var d=e(3400),S=e(76308),n=e(90624),E=e(13988);U.exports=function(v,g,r,t){function o(M,s){return d.coerce(v,g,E,M,s)}function i(M,s){return d.coerce2(v,g,E,M,s)}if(n.handleSampleDefaults(v,g,o,t),g.visible!==!1){o("bandwidth"),o("side");var f=o("width");f||(o("scalegroup",g.name),o("scalemode"));var u=o("span"),l;Array.isArray(u)&&(l="manual"),o("spanmode",l);var m=o("line.color",(v.marker||{}).color||r),h=o("line.width"),w=o("fillcolor",S.addOpacity(g.line.color,.5));n.handlePointsDefaults(v,g,o,{prefix:""});var c=i("box.width"),a=i("box.fillcolor",w),p=i("box.line.color",m),x=i("box.line.width",h),A=o("box.visible",!!(c||a||p||x));A||(g.box={visible:!1});var P=i("meanline.color",m),y=i("meanline.width",h),C=o("meanline.visible",!!(P||y));C||(g.meanline={visible:!1}),o("quartilemethod"),o("zorder")}}},63800:function(U,F,e){var d=e(3400),S={gaussian:function(n){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*n*n)}};F.makeKDE=function(n,E,T){var v=T.length,g=S.gaussian,r=n.bandwidth,t=1/(v*r);return function(o){for(var i=0,f=0;f<v;f++)i+=g((o-T[f])/r);return t*i}},F.getPositionOnKdePath=function(n,E,T){var v,g;E.orientation==="h"?(v="y",g="x"):(v="x",g="y");var r=d.findPointOnPath(n.path,T,g,{pathLength:n.pathLength}),t=n.posCenterPx,o=r[v],i=E.side==="both"?2*t-o:t;return[o,i]},F.getKdeValue=function(n,E,T){var v=n.pts.map(F.extractVal),g=F.makeKDE(n,E,v);return g(T)/n.posDensityScale},F.extractVal=function(n){return n.v}},78e3:function(U,F,e){var d=e(76308),S=e(3400),n=e(54460),E=e(27576),T=e(63800);U.exports=function(g,r,t,o,i){i||(i={});var f=i.hoverLayer,u=g.cd,l=u[0].trace,m=l.hoveron,h=m.indexOf("violins")!==-1,w=m.indexOf("kde")!==-1,c=[],a,p;if(h||w){var x=E.hoverOnBoxes(g,r,t,o);if(w&&x.length>0){var A=g.xa,P=g.ya,y,C,M,s,_;l.orientation==="h"?(_=r,y="y",M=P,C="x",s=A):(_=t,y="x",M=A,C="y",s=P);var b=u[g.index];if(_>=b.span[0]&&_<=b.span[1]){var k=S.extendFlat({},g),D=s.c2p(_,!0),V=T.getKdeValue(b,l,_),O=T.getPositionOnKdePath(b,l,D),N=M._offset,B=M._length;k[y+"0"]=O[0],k[y+"1"]=O[1],k[C+"0"]=k[C+"1"]=D,k[C+"Label"]=C+": "+n.hoverLabelText(s,_,l[C+"hoverformat"])+", "+u[0].t.labels.kde+" "+V.toFixed(3);for(var z=0,H=0;H<x.length;H++)if(x[H].attr==="med"){z=H;break}k.spikeDistance=x[z].spikeDistance;var X=y+"Spike";k[X]=x[z][X],x[z].spikeDistance=void 0,x[z][X]=void 0,k.hovertemplate=!1,c.push(k),p={},p[y+"1"]=S.constrain(N+O[0],N,N+B),p[y+"2"]=S.constrain(N+O[1],N,N+B),p[C+"1"]=p[C+"2"]=s._offset+D}}h&&(c=c.concat(x))}m.indexOf("points")!==-1&&(a=E.hoverOnPoints(g,r,t));var $=f.selectAll(".violinline-"+l.uid).data(p?[0]:[]);return $.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5),$.exit().remove(),$.attr(p).call(d.stroke,g.color),o==="closest"?a?[a]:c:(a&&c.push(a),c)}},22869:function(U,F,e){U.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(U,F,e){var d=e(16560),S=e(3400).extendFlat;U.exports={violinmode:S({},d.boxmode,{}),violingap:S({},d.boxgap,{}),violingroupgap:S({},d.boxgroupgap,{})}},8939:function(U,F,e){var d=e(3400),S=e(98228),n=e(68832);U.exports=function(T,v,g){function r(t,o){return d.coerce(T,v,S,t,o)}n._supply(T,v,g,r,"violin")}},5140:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(18728),T=e(52340),v=e(63800);U.exports=function(r,t,o,i){var f=r._context.staticPlot,u=r._fullLayout,l=t.xaxis,m=t.yaxis;function h(w,c){var a=T(w,{xaxis:l,yaxis:m,trace:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return n.smoothopen(a[0],1)}S.makeTraceGroups(i,o,"trace violins").each(function(w){var c=d.select(this),a=w[0],p=a.t,x=a.trace;if(x.visible!==!0||p.empty){c.remove();return}var A=p.bPos,P=p.bdPos,y=t[p.valLetter+"axis"],C=t[p.posLetter+"axis"],M=x.side==="both",s=M||x.side==="positive",_=M||x.side==="negative",b=c.selectAll("path.violin").data(S.identity);b.enter().append("path").style("vector-effect",f?"none":"non-scaling-stroke").attr("class","violin"),b.exit().remove(),b.each(function(H){var X=d.select(this),$=H.density,ne=$.length,q=C.c2l(H.pos+A,!0),ue=C.l2p(q),te;if(x.width)te=p.maxKDE/P;else{var J=u._violinScaleGroupStats[x.scalegroup];te=x.scalemode==="count"?J.maxKDE/P*(J.maxCount/H.pts.length):J.maxKDE/P}var ie,K,ee,le,j,Z,fe;if(s){for(Z=new Array(ne),le=0;le<ne;le++)fe=Z[le]={},fe[p.posLetter]=q+$[le].v/te,fe[p.valLetter]=y.c2l($[le].t,!0);ie=h(Z,x)}if(_){for(Z=new Array(ne),j=0,le=ne-1;j<ne;j++,le--)fe=Z[j]={},fe[p.posLetter]=q-$[le].v/te,fe[p.valLetter]=y.c2l($[le].t,!0);K=h(Z,x)}if(M)ee=ie+"L"+K.substr(1)+"Z";else{var re=[ue,y.c2p($[0].t)],ce=[ue,y.c2p($[ne-1].t)];x.orientation==="h"&&(re.reverse(),ce.reverse()),s?ee="M"+re+"L"+ie.substr(1)+"L"+ce:ee="M"+ce+"L"+K.substr(1)+"L"+re}X.attr("d",ee),H.posCenterPx=ue,H.posDensityScale=te*P,H.path=X.node(),H.pathLength=H.path.getTotalLength()/(M?2:1)});var k=x.box,D=k.width,V=(k.line||{}).width,O,N;M?(O=P*D,N=0):s?(O=[0,P*D/2],N=V*{x:1,y:-1}[p.posLetter]):(O=[P*D/2,0],N=V*{x:-1,y:1}[p.posLetter]),E.plotBoxAndWhiskers(c,{pos:C,val:y},x,{bPos:A,bdPos:O,bPosPxOffset:N}),E.plotBoxMean(c,{pos:C,val:y},x,{bPos:A,bdPos:O,bPosPxOffset:N});var B;!x.box.visible&&x.meanline.visible&&(B=S.identity);var z=c.selectAll("path.meanline").data(B||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",f?"none":"non-scaling-stroke"),z.exit().remove(),z.each(function(H){var X=y.c2p(H.mean,!0),$=v.getPositionOnKdePath(H,x,X);d.select(this).attr("d",x.orientation==="h"?"M"+X+","+$[0]+"V"+$[1]:"M"+$[0]+","+X+"H"+$[1])}),E.plotPoints(c,{x:l,y:m},x,p)})}},95908:function(U,F,e){var d=e(33428),S=e(76308),n=e(49224).stylePoints;U.exports=function(T){var v=d.select(T).selectAll("g.trace.violins");v.style("opacity",function(g){return g[0].trace.opacity}),v.each(function(g){var r=g[0].trace,t=d.select(this),o=r.box||{},i=o.line||{},f=r.meanline||{},u=f.width;t.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(S.stroke,r.line.color).call(S.fill,r.fillcolor),t.selectAll("path.box").style("stroke-width",i.width+"px").call(S.stroke,i.color).call(S.fill,o.fillcolor);var l={"stroke-width":u+"px","stroke-dasharray":2*u+"px,"+u+"px"};t.selectAll("path.mean").style(l).call(S.stroke,f.color),t.selectAll("path.meanline").style(l).call(S.stroke,f.color),n(t,r,T)})}},58168:function(U,F,e){var d=e(49084),S=e(50048),n=e(16716),E=e(45464),T=e(92880).extendFlat,v=e(67824).overrideAll,g=U.exports=v(T({x:S.x,y:S.y,z:S.z,value:S.value,isomin:S.isomin,isomax:S.isomax,surface:S.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:S.slices,caps:S.caps,text:S.text,hovertext:S.hovertext,xhoverformat:S.xhoverformat,yhoverformat:S.yhoverformat,zhoverformat:S.zhoverformat,valuehoverformat:S.valuehoverformat,hovertemplate:S.hovertemplate},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:S.colorbar,opacity:S.opacity,opacityscale:n.opacityscale,lightposition:S.lightposition,lighting:S.lighting,flatshading:S.flatshading,contour:S.contour,hoverinfo:T({},E.hoverinfo),showlegend:T({},E.showlegend,{dflt:!1})}),"calc","nested");g.x.editType=g.y.editType=g.z.editType=g.value.editType="calc+clearAxisTypes",g.transforms=void 0},91976:function(U,F,e){var d=e(67792).gl_mesh3d,S=e(33040).parseColorScale,n=e(3400).isArrayOrTypedArray,E=e(43080),T=e(8932).extractOpts,v=e(52094),g=e(31460).findNearestOnAxis,r=e(31460).generateIsoMeshes;function t(f,u,l){this.scene=f,this.uid=l,this.mesh=u,this.name="",this.data=null,this.showContour=!1}var o=t.prototype;o.handlePick=function(f){if(f.object===this.mesh){var u=f.data.index,l=this.data._meshX[u],m=this.data._meshY[u],h=this.data._meshZ[u],w=this.data._Ys.length,c=this.data._Zs.length,a=g(l,this.data._Xs).id,p=g(m,this.data._Ys).id,x=g(h,this.data._Zs).id,A=f.index=x+c*p+c*w*a;f.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var P=this.data.hovertext||this.data.text;return n(P)&&P[A]!==void 0?f.textLabel=P[A]:P&&(f.textLabel=P),!0}},o.update=function(f){var u=this.scene,l=u.fullSceneLayout;this.data=r(f);function m(p,x,A,P){return x.map(function(y){return p.d2l(y,0,P)*A})}var h=v(m(l.xaxis,f._meshX,u.dataScale[0],f.xcalendar),m(l.yaxis,f._meshY,u.dataScale[1],f.ycalendar),m(l.zaxis,f._meshZ,u.dataScale[2],f.zcalendar)),w=v(f._meshI,f._meshJ,f._meshK),c={positions:h,cells:w,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,opacityscale:f.opacityscale,contourEnable:f.contour.show,contourColor:E(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading},a=T(f);c.vertexIntensity=f._meshIntensity,c.vertexIntensityBounds=[a.min,a.max],c.colormap=S(f),this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function i(f,u){var l=f.glplot.gl,m=d({gl:l}),h=new t(f,m,u.uid);return m._trace=h,h.update(u),f.glplot.add(m),h}U.exports=i},12448:function(U,F,e){var d=e(3400),S=e(58168),n=e(70548).supplyIsoDefaults,E=e(60192).opacityscaleDefaults;U.exports=function(v,g,r,t){function o(i,f){return d.coerce(v,g,S,i,f)}n(v,g,r,t,o),E(v,g,t,o)}},67776:function(U,F,e){U.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(U,F,e){var d=e(20832),S=e(52904).line,n=e(45464),E=e(29736).axisHoverFormat,T=e(21776).Ks,v=e(21776).Gw,g=e(10213),r=e(92880).extendFlat,t=e(76308);function o(i){return{marker:{color:r({},d.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},d.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},d.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}U.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),hovertext:d.hovertext,hovertemplate:T({},{keys:g.eventDataKeys}),hoverinfo:r({},n.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:v({editType:"plot"},{keys:g.eventDataKeys.concat(["label"])}),text:d.text,textposition:d.textposition,insidetextanchor:d.insidetextanchor,textangle:d.textangle,textfont:d.textfont,insidetextfont:d.insidetextfont,outsidetextfont:d.outsidetextfont,constraintext:d.constraintext,cliponaxis:d.cliponaxis,orientation:d.orientation,offset:d.offset,width:d.width,increasing:o(),decreasing:o(),totals:o(),connector:{line:{color:r({},S.color,{dflt:t.defaultLine}),width:r({},S.width,{editType:"plot"}),dash:S.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,zorder:d.zorder}},73540:function(U,F,e){var d=e(54460),S=e(1220),n=e(3400).mergeArray,E=e(4500),T=e(39032).BADNUM;function v(r){return r==="a"||r==="absolute"}function g(r){return r==="t"||r==="total"}U.exports=function(t,o){var i=d.getFromId(t,o.xaxis||"x"),f=d.getFromId(t,o.yaxis||"y"),u,l,m,h,w,c;o.orientation==="h"?(u=i.makeCalcdata(o,"x"),m=f.makeCalcdata(o,"y"),h=S(o,f,"y",m),w=!!o.yperiodalignment,c="y"):(u=f.makeCalcdata(o,"y"),m=i.makeCalcdata(o,"x"),h=S(o,i,"x",m),w=!!o.xperiodalignment,c="x"),l=h.vals;for(var a=Math.min(l.length,u.length),p=new Array(a),x=0,A,P=!1,y=0;y<a;y++){var C=u[y]||0,M=!1;(u[y]!==T||g(o.measure[y])||v(o.measure[y]))&&y+1<a&&(u[y+1]!==T||g(o.measure[y+1])||v(o.measure[y+1]))&&(M=!0);var s=p[y]={i:y,p:l[y],s:C,rawS:C,cNext:M};v(o.measure[y])?(x=s.s,s.isSum=!0,s.dir="totals",s.s=x):g(o.measure[y])?(s.isSum=!0,s.dir="totals",s.s=x):(s.isSum=!1,s.dir=s.rawS<0?"decreasing":"increasing",A=s.s,s.s=x+A,x+=A),s.dir==="totals"&&(P=!0),w&&(p[y].orig_p=m[y],p[y][c+"End"]=h.ends[y],p[y][c+"Start"]=h.starts[y]),o.ids&&(s.id=String(o.ids[y])),s.v=(o.base||0)+x}return p.length&&(p[0].hasTotals=P),n(o.text,p,"tx"),n(o.hovertext,p,"htx"),E(p,o),p}},10213:function(U){U.exports={eventDataKeys:["initial","delta","final"]}},50152:function(U,F,e){var d=e(96376).setGroupPositions;U.exports=function(n,E){var T=n._fullLayout,v=n._fullData,g=n.calcdata,r=E.xaxis,t=E.yaxis,o=[],i=[],f=[],u,l;for(l=0;l<v.length;l++){var m=v[l];m.visible===!0&&m.xaxis===r._id&&m.yaxis===t._id&&m.type==="waterfall"&&(u=g[l],m.orientation==="h"?f.push(u):i.push(u),o.push(u))}var h={mode:T.waterfallmode,norm:T.waterfallnorm,gap:T.waterfallgap,groupgap:T.waterfallgroupgap};for(d(n,r,t,i,h),d(n,t,r,f,h),l=0;l<o.length;l++){u=o[l];for(var w=0;w<u.length;w++){var c=u[w];c.isSum===!1&&(c.s0+=w===0?0:u[w-1].s),w+1<u.length&&(u[w].nextP0=u[w+1].p0,u[w].nextS0=u[w+1].s0)}}}},24224:function(U,F,e){var d=e(3400),S=e(20011),n=e(31508).handleText,E=e(43980),T=e(31147),v=e(65776),g=e(76308),r=e(48164),t=r.INCREASING.COLOR,o=r.DECREASING.COLOR,i="#4499FF";function f(m,h,w){m(h+".marker.color",w),m(h+".marker.line.color",g.defaultLine),m(h+".marker.line.width")}function u(m,h,w,c){function a(y,C){return d.coerce(m,h,v,y,C)}var p=E(m,h,c,a);if(!p){h.visible=!1;return}T(m,h,c,a),a("xhoverformat"),a("yhoverformat"),a("measure"),a("orientation",h.x&&!h.y?"h":"v"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate");var x=a("textposition");n(m,h,c,a,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h.textposition!=="none"&&(a("texttemplate"),h.texttemplate||a("textinfo")),f(a,"increasing",t),f(a,"decreasing",o),f(a,"totals",i);var A=a("connector.visible");if(A){a("connector.mode");var P=a("connector.line.width");P&&(a("connector.line.color"),a("connector.line.dash"))}a("zorder")}function l(m,h){var w,c;function a(x){return d.coerce(c._input,c,v,x)}if(h.waterfallmode==="group")for(var p=0;p<m.length;p++)c=m[p],w=c._input,S(w,c,h,a)}U.exports={supplyDefaults:u,crossTraceDefaults:l}},53256:function(U){U.exports=function(e,d){return e.x="xVal"in d?d.xVal:d.x,e.y="yVal"in d?d.yVal:d.y,"initial"in d&&(e.initial=d.initial),"delta"in d&&(e.delta=d.delta),"final"in d&&(e.final=d.final),d.xa&&(e.xaxis=d.xa),d.ya&&(e.yaxis=d.ya),e}},94196:function(U,F,e){var d=e(54460).hoverLabelText,S=e(76308).opacity,n=e(63400).hoverOnBars,E=e(48164),T={increasing:E.INCREASING.SYMBOL,decreasing:E.DECREASING.SYMBOL};U.exports=function(r,t,o,i,f){var u=n(r,t,o,i,f);if(!u)return;var l=u.cd,m=l[0].trace,h=m.orientation==="h",w=h?"x":"y",c=h?r.xa:r.ya;function a(b){return d(c,b,m[w+"hoverformat"])}var p=u.index,x=l[p],A=x.isSum?x.b+x.s:x.rawS;u.initial=x.b+x.s-A,u.delta=A,u.final=u.initial+u.delta;var P=a(Math.abs(u.delta));u.deltaLabel=A<0?"("+P+")":P,u.finalLabel=a(u.final),u.initialLabel=a(u.initial);var y=x.hi||m.hoverinfo,C=[];if(y&&y!=="none"&&y!=="skip"){var M=y==="all",s=y.split("+"),_=function(b){return M||s.indexOf(b)!==-1};x.isSum||(_("final")&&(h?!_("x"):!_("y"))&&C.push(u.finalLabel),_("delta")&&(A<0?C.push(u.deltaLabel+" "+T.decreasing):C.push(u.deltaLabel+" "+T.increasing)),_("initial")&&C.push("Initial: "+u.initialLabel))}return C.length&&(u.extraText=C.join("<br>")),u.color=v(m,x),[u]};function v(g,r){var t=g[r.dir].marker,o=t.color,i=t.line.color,f=t.line.width;if(S(o))return o;if(S(i)&&f)return i}},95952:function(U,F,e){U.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(U){U.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(U,F,e){var d=e(3400),S=e(91352);U.exports=function(n,E,T){var v=!1;function g(o,i){return d.coerce(n,E,S,o,i)}for(var r=0;r<T.length;r++){var t=T[r];if(t.visible&&t.type==="waterfall"){v=!0;break}}v&&(g("waterfallmode"),g("waterfallgap",.2),g("waterfallgroupgap"))}},64488:function(U,F,e){var d=e(33428),S=e(3400),n=e(43616),E=e(39032).BADNUM,T=e(98184),v=e(82744).clearMinTextSize;U.exports=function(o,i,f,u){var l=o._fullLayout;v("waterfall",l),T.plot(o,i,f,u,{mode:l.waterfallmode,norm:l.waterfallmode,gap:l.waterfallgap,groupgap:l.waterfallgroupgap}),g(o,i,f,u)};function g(t,o,i,f){var u=o.xaxis,l=o.yaxis;S.makeTraceGroups(f,i,"trace bars").each(function(m){var h=d.select(this),w=m[0].trace,c=S.ensureSingle(h,"g","lines");if(!w.connector||!w.connector.visible){c.remove();return}var a=w.orientation==="h",p=w.connector.mode,x=c.selectAll("g.line").data(S.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var A=x.size();x.each(function(P,y){if(!(y!==A-1&&!P.cNext)){var C=r(P,u,l,a),M=C[0],s=C[1],_="";M[0]!==E&&s[0]!==E&&M[1]!==E&&s[1]!==E&&(p==="spanning"&&!P.isSum&&y>0&&(a?_+="M"+M[0]+","+s[1]+"V"+s[0]:_+="M"+M[1]+","+s[0]+"H"+M[0]),p!=="between"&&(P.isSum||y<A-1)&&(a?_+="M"+M[1]+","+s[0]+"V"+s[1]:_+="M"+M[0]+","+s[1]+"H"+M[1]),M[2]!==E&&s[2]!==E&&(a?_+="M"+M[1]+","+s[1]+"V"+s[2]:_+="M"+M[1]+","+s[1]+"H"+M[2])),_===""&&(_="M0,0Z"),S.ensureSingle(d.select(this),"path").attr("d",_).call(n.setClipUrl,o.layerClipId,t)}})})}function r(t,o,i,f){var u=[],l=[],m=f?o:i,h=f?i:o;return u[0]=m.c2p(t.s0,!0),l[0]=h.c2p(t.p0,!0),u[1]=m.c2p(t.s1,!0),l[1]=h.c2p(t.p1,!0),u[2]=m.c2p(t.nextS0,!0),l[2]=h.c2p(t.nextP0,!0),f?[u,l]:[l,u]}},12252:function(U,F,e){var d=e(33428),S=e(43616),n=e(76308),E=e(13448).DESELECTDIM,T=e(60100),v=e(82744).resizeText,g=T.styleTextPoints;function r(t,o,i){var f=i||d.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");v(t,f,"waterfall"),f.style("opacity",function(u){return u[0].trace.opacity}),f.each(function(u){var l=d.select(this),m=u[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var w=m[h.dir].marker;d.select(this).call(n.fill,w.color).call(n.stroke,w.line.color).call(S.dashLine,w.line.dash,w.line.width).style("opacity",m.selectedpoints&&!h.selected?E:1)}}),g(l,m,t),l.selectAll(".lines").each(function(){var h=m.connector.line;S.lineGroupStyle(d.select(this).selectAll("path"),h.width,h.color,h.dash)})})}U.exports={style:r}},84224:function(U,F,e){var d=e(54460),S=e(3400),n=e(73060),E=e(60468).W,T=e(39032).BADNUM;F.moduleType="transform",F.name="aggregate";var v=F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},g=v.aggregations;F.supplyDefaults=function(u,l){var m={},h;function w(b,k){return S.coerce(u,m,v,b,k)}var c=w("enabled");if(!c)return m;var a=n.findArrayAttributes(l),p={};for(h=0;h<a.length;h++)p[a[h]]=1;var x=w("groups");if(!Array.isArray(x)){if(!p[x])return m.enabled=!1,m;p[x]=0}var A=u.aggregations||[],P=m.aggregations=new Array(A.length),y;function C(b,k){return S.coerce(A[h],y,g,b,k)}for(h=0;h<A.length;h++){y={_index:h};var M=C("target"),s=C("func"),_=C("enabled");_&&M&&(p[M]||s==="count"&&p[M]===void 0)?(s==="stddev"&&C("funcmode"),p[M]=0,P[h]=y):P[h]={enabled:!1,_index:h}}for(h=0;h<a.length;h++)p[a[h]]&&P.push({target:a[h],func:g.func.dflt,enabled:!0,_index:-1});return m},F.calcTransform=function(u,l,m){if(m.enabled){var h=m.groups,w=S.getTargetArray(l,{target:h});if(w){var c,a,p,x,A={},P={},y=[],C=E(l.transforms,m),M=w.length;for(l._length&&(M=Math.min(M,l._length)),c=0;c<M;c++)a=w[c],p=A[a],p===void 0?(A[a]=y.length,x=[c],y.push(x),P[A[a]]=C(c)):(y[p].push(c),P[A[a]]=(P[A[a]]||[]).concat(C(c)));m._indexToPoints=P;var s=m.aggregations;for(c=0;c<s.length;c++)r(u,l,y,s[c]);typeof h=="string"&&r(u,l,y,{target:h,func:"first",enabled:!0}),l._length=y.length}}};function r(u,l,m,h){if(h.enabled){for(var w=h.target,c=S.nestedProperty(l,w),a=c.get(),p=d.getDataConversions(u,l,w,a),x=t(h,p),A=new Array(m.length),P=0;P<m.length;P++)A[P]=x(a,m[P]);c.set(A),h.func==="count"&&S.pushUnique(l._arrayAttrs,w)}}function t(u,l){var m=u.func,h=l.d2c,w=l.c2d;switch(m){case"count":return o;case"first":return i;case"last":return f;case"sum":return function(c,a){for(var p=0,x=0;x<a.length;x++){var A=h(c[a[x]]);A!==T&&(p+=A)}return w(p)};case"avg":return function(c,a){for(var p=0,x=0,A=0;A<a.length;A++){var P=h(c[a[A]]);P!==T&&(p+=P,x++)}return x?w(p/x):T};case"min":return function(c,a){for(var p=1/0,x=0;x<a.length;x++){var A=h(c[a[x]]);A!==T&&(p=Math.min(p,A))}return p===1/0?T:w(p)};case"max":return function(c,a){for(var p=-1/0,x=0;x<a.length;x++){var A=h(c[a[x]]);A!==T&&(p=Math.max(p,A))}return p===-1/0?T:w(p)};case"range":return function(c,a){for(var p=1/0,x=-1/0,A=0;A<a.length;A++){var P=h(c[a[A]]);P!==T&&(p=Math.min(p,P),x=Math.max(x,P))}return x===-1/0||p===1/0?T:w(x-p)};case"change":return function(c,a){var p=h(c[a[0]]),x=h(c[a[a.length-1]]);return p===T||x===T?T:w(x-p)};case"median":return function(c,a){for(var p=[],x=0;x<a.length;x++){var A=h(c[a[x]]);A!==T&&p.push(A)}if(!p.length)return T;p.sort(S.sorterAsc);var P=(p.length-1)/2;return w((p[Math.floor(P)]+p[Math.ceil(P)])/2)};case"mode":return function(c,a){for(var p={},x=0,A=T,P=0;P<a.length;P++){var y=h(c[a[P]]);if(y!==T){var C=p[y]=(p[y]||0)+1;C>x&&(x=C,A=y)}}return x?w(A):T};case"rms":return function(c,a){for(var p=0,x=0,A=0;A<a.length;A++){var P=h(c[a[A]]);P!==T&&(p+=P*P,x++)}return x?w(Math.sqrt(p/x)):T};case"stddev":return function(c,a){var p=0,x=0,A=1,P=T,y;for(y=0;y<a.length&&P===T;y++)P=h(c[a[y]]);if(P===T)return T;for(;y<a.length;y++){var C=h(c[a[y]]);if(C!==T){var M=C-P;p+=M,x+=M*M,A++}}var s=u.funcmode==="sample"?A-1:A;return s?Math.sqrt((x-p*p/A)/s):0}}}function o(u,l){return l.length}function i(u,l){return u[l[0]]}function f(u,l){return u[l[l.length-1]]}},76744:function(U,F,e){var d=e(3400),S=e(24040),n=e(54460),E=e(60468).W,T=e(69104),v=T.COMPARISON_OPS,g=T.INTERVAL_OPS,r=T.SET_OPS;F.moduleType="transform",F.name="filter",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(v).concat(g).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},F.supplyDefaults=function(o){var i={};function f(h,w){return d.coerce(o,i,F.attributes,h,w)}var u=f("enabled");if(u){var l=f("target");if(d.isArrayOrTypedArray(l)&&l.length===0)return i.enabled=!1,i;f("preservegaps"),f("operation"),f("value");var m=S.getComponentMethod("calendars","handleDefaults");m(o,i,"valuecalendar",null),m(o,i,"targetcalendar",null)}return i},F.calcTransform=function(o,i,f){if(!f.enabled)return;var u=d.getTargetArray(i,f);if(!u)return;var l=f.target,m=u.length;i._length&&(m=Math.min(m,i._length));var h=f.targetcalendar,w=i._arrayAttrs,c=f.preservegaps;if(typeof l=="string"){var a=d.nestedProperty(i,l+"calendar").get();a&&(h=a)}var p=n.getDataToCoordFunc(o,i,l,u),x=t(f,p,h),A={},P={},y=0;function C(D,V){for(var O=0;O<w.length;O++){var N=d.nestedProperty(i,w[O]);D(N,V)}}var M,s;c?(M=function(D){A[D.astr]=d.extendDeep([],D.get()),D.set(new Array(m))},s=function(D,V){var O=A[D.astr][V];D.get()[V]=O}):(M=function(D){A[D.astr]=d.extendDeep([],D.get()),D.set([])},s=function(D,V){var O=A[D.astr][V];D.get().push(O)}),C(M);for(var _=E(i.transforms,f),b=0;b<m;b++){var k=x(u[b]);k?(C(s,b),P[y++]=_(b)):c&&y++}f._indexToPoints=P,i._length=y};function t(o,i,f){var u=o.operation,l=o.value,m=d.isArrayOrTypedArray(l);function h(p){return p.indexOf(u)!==-1}var w=function(p){return i(p,0,o.valuecalendar)},c=function(p){return i(p,0,f)},a;switch(h(v)?a=w(m?l[0]:l):h(g)?a=m?[w(l[0]),w(l[1])]:[w(l),w(l)]:h(r)&&(a=m?l.map(w):[w(l)]),u){case"=":return function(p){return c(p)===a};case"!=":return function(p){return c(p)!==a};case"<":return function(p){return c(p)<a};case"<=":return function(p){return c(p)<=a};case">":return function(p){return c(p)>a};case">=":return function(p){return c(p)>=a};case"[]":return function(p){var x=c(p);return x>=a[0]&&x<=a[1]};case"()":return function(p){var x=c(p);return x>a[0]&&x<a[1]};case"[)":return function(p){var x=c(p);return x>=a[0]&&x<a[1]};case"(]":return function(p){var x=c(p);return x>a[0]&&x<=a[1]};case"][":return function(p){var x=c(p);return x<=a[0]||x>=a[1]};case")(":return function(p){var x=c(p);return x<a[0]||x>a[1]};case"](":return function(p){var x=c(p);return x<=a[0]||x>a[1]};case")[":return function(p){var x=c(p);return x<a[0]||x>=a[1]};case"{}":return function(p){return a.indexOf(c(p))!==-1};case"}{":return function(p){return a.indexOf(c(p))===-1}}}},32028:function(U,F,e){var d=e(3400),S=e(73060),n=e(7316),E=e(60468).W;F.moduleType="transform",F.name="groupby",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},F.supplyDefaults=function(v,g,r){var t,o={};function i(w,c){return d.coerce(v,o,F.attributes,w,c)}var f=i("enabled");if(!f)return o;i("groups"),i("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var u=v.styles,l=o.styles=[];if(u)for(t=0;t<u.length;t++){var m=l[t]={};d.coerce(u[t],l[t],F.attributes.styles,"target");var h=d.coerce(u[t],l[t],F.attributes.styles,"value");d.isPlainObject(h)?m.value=d.extendDeep({},h):h&&delete m.value}return o},F.transform=function(v,g){var r,t,o,i=[];for(t=0;t<v.length;t++)for(r=T(v[t],g),o=0;o<r.length;o++)i.push(r[o]);return i};function T(v,g){var r,t,o,i,f,u,l,m,h,w,c=g.transform,a=g.transformIndex,p=v.transforms[a].groups,x=E(v.transforms,c);if(!d.isArrayOrTypedArray(p)||p.length===0)return[v];var A=d.filterUnique(p),P=new Array(A.length),y=p.length,C=S.findArrayAttributes(v),M=c.styles||[],s={};for(r=0;r<M.length;r++)s[M[r].target]=M[r].value;c.styles&&(w=d.keyedContainer(c,"styles","target","value.name"));var _={},b={};for(r=0;r<A.length;r++){u=A[r],_[u]=r,b[u]=0,l=P[r]=d.extendDeepNoArrays({},v),l._group=u,l.transforms[a]._indexToPoints={};var k=null;for(w&&(k=w.get(u)),k||k===""?l.name=k:l.name=d.templateString(c.nameformat,{trace:v.name,group:u}),m=l.transforms,l.transforms=[],t=0;t<m.length;t++)l.transforms[t]=d.extendDeepNoArrays({},m[t]);for(t=0;t<C.length;t++)d.nestedProperty(l,C[t]).set([])}for(o=0;o<C.length;o++){for(i=C[o],t=0,h=[];t<A.length;t++)h[t]=d.nestedProperty(P[t],i).get();for(f=d.nestedProperty(v,i).get(),t=0;t<y;t++)h[_[p[t]]].push(f[t])}for(t=0;t<y;t++){l=P[_[p[t]]];var D=l.transforms[a]._indexToPoints;D[b[p[t]]]=x(t),b[p[t]]++}for(r=0;r<A.length;r++)u=A[r],l=P[r],n.clearExpandedTraceDefaultColors(l),l=d.extendDeepNoArrays(l,s[u]||{});return P}},60468:function(U,F){F.W=function(e,d){for(var S,n,E=0;E<e.length&&(S=e[E],S!==d);E++)!S._indexToPoints||S.enabled===!1||(n=S._indexToPoints);var T=n?function(v){return n[v]}:function(v){return[v]};return T}},76272:function(U,F,e){var d=e(3400),S=e(54460),n=e(60468).W,E=e(39032).BADNUM;F.moduleType="transform",F.name="sort",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},F.supplyDefaults=function(g){var r={};function t(i,f){return d.coerce(g,r,F.attributes,i,f)}var o=t("enabled");return o&&(t("target"),t("order")),r},F.calcTransform=function(g,r,t){if(t.enabled){var o=d.getTargetArray(r,t);if(o){var i=t.target,f=o.length;r._length&&(f=Math.min(f,r._length));var u=r._arrayAttrs,l=S.getDataToCoordFunc(g,r,i,o),m=T(t,o,l,f),h=n(r.transforms,t),w={},c,a;for(c=0;c<u.length;c++){var p=d.nestedProperty(r,u[c]),x=p.get(),A=new Array(f);for(a=0;a<f;a++)A[a]=x[m[a]];p.set(A)}for(a=0;a<f;a++)w[a]=h(m[a]);t._indexToPoints=w,r._length=f}}};function T(g,r,t,o){var i=new Array(o),f=new Array(o),u;for(u=0;u<o;u++)i[u]={v:r[u],i:u};for(i.sort(v(g,t)),u=0;u<o;u++)f[u]=i[u].i;return f}function v(g,r){switch(g.order){case"ascending":return function(t,o){var i=r(t.v),f=r(o.v);return i===E?1:f===E?-1:i-f};case"descending":return function(t,o){var i=r(t.v),f=r(o.v);return i===E?1:f===E?-1:f-i}}}},25788:function(U,F){F.version="2.33.0"},67792:function(U,F,e){var d=e(4168);(function(){var S={1964:function(v,g,r){v.exports={alpha_shape:r(3502),convex_hull:r(7352),delaunay_triangulate:r(7642),gl_cone3d:r(6405),gl_error3d:r(9165),gl_heatmap2d:r(2510),gl_line3d:r(5714),gl_mesh3d:r(7201),gl_plot2d:r(1850),gl_plot3d:r(4100),gl_pointcloud2d:r(4696),gl_scatter3d:r(8418),gl_select_box:r(3161),gl_spikes2d:r(4098),gl_streamtube3d:r(7815),gl_surface3d:r(9499),ndarray:r(9618),ndarray_linear_interpolate:r(4317)}},4793:function(v,g,r){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/function t(Re,pe){if(!(Re instanceof pe))throw new TypeError("Cannot call a class as a function")}function o(Re,pe){for(var be=0;be<pe.length;be++){var Ue=pe[be];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(Re,f(Ue.key),Ue)}}function i(Re,pe,be){return pe&&o(Re.prototype,pe),Object.defineProperty(Re,"prototype",{writable:!1}),Re}function f(Re){var pe=u(Re,"string");return x(pe)=="symbol"?pe:pe+""}function u(Re,pe){if(x(Re)!="object"||!Re)return Re;var be=Re[Symbol.toPrimitive];if(be!==void 0){var Ue=be.call(Re,pe);if(x(Ue)!="object")return Ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Re)}function l(Re,pe,be){return pe=c(pe),m(Re,w()?Reflect.construct(pe,[],c(Re).constructor):pe.apply(Re,be))}function m(Re,pe){if(pe&&(x(pe)==="object"||typeof pe=="function"))return pe;if(pe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(Re)}function h(Re){if(Re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Re}function w(){try{var Re=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w=function(){return!!Re})()}function c(Re){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(be){return be.__proto__||Object.getPrototypeOf(be)},c(Re)}function a(Re,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");Re.prototype=Object.create(pe&&pe.prototype,{constructor:{value:Re,writable:!0,configurable:!0}}),Object.defineProperty(Re,"prototype",{writable:!1}),pe&&p(Re,pe)}function p(Re,pe){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ue,et){return Ue.__proto__=et,Ue},p(Re,pe)}function x(Re){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},x(Re)}var A=r(7507),P=r(3778),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.hp=_,g.IS=50;var C=2147483647;_.TYPED_ARRAY_SUPPORT=M(),!_.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function M(){try{var Re=new Uint8Array(1),pe={foo:function(){return 42}};return Object.setPrototypeOf(pe,Uint8Array.prototype),Object.setPrototypeOf(Re,pe),Re.foo()===42}catch{return!1}}Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}});function s(Re){if(Re>C)throw new RangeError('The value "'+Re+'" is invalid for option "size"');var pe=new Uint8Array(Re);return Object.setPrototypeOf(pe,_.prototype),pe}function _(Re,pe,be){if(typeof Re=="number"){if(typeof pe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return V(Re)}return b(Re,pe,be)}_.poolSize=8192;function b(Re,pe,be){if(typeof Re=="string")return O(Re,pe);if(ArrayBuffer.isView(Re))return B(Re);if(Re==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(Re));if(Ze(Re,ArrayBuffer)||Re&&Ze(Re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(Re,SharedArrayBuffer)||Re&&Ze(Re.buffer,SharedArrayBuffer)))return z(Re,pe,be);if(typeof Re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ue=Re.valueOf&&Re.valueOf();if(Ue!=null&&Ue!==Re)return _.from(Ue,pe,be);var et=H(Re);if(et)return et;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Re[Symbol.toPrimitive]=="function")return _.from(Re[Symbol.toPrimitive]("string"),pe,be);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(Re))}_.from=function(Re,pe,be){return b(Re,pe,be)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array);function k(Re){if(typeof Re!="number")throw new TypeError('"size" argument must be of type number');if(Re<0)throw new RangeError('The value "'+Re+'" is invalid for option "size"')}function D(Re,pe,be){return k(Re),Re<=0?s(Re):pe!==void 0?typeof be=="string"?s(Re).fill(pe,be):s(Re).fill(pe):s(Re)}_.alloc=function(Re,pe,be){return D(Re,pe,be)};function V(Re){return k(Re),s(Re<0?0:X(Re)|0)}_.allocUnsafe=function(Re){return V(Re)},_.allocUnsafeSlow=function(Re){return V(Re)};function O(Re,pe){if((typeof pe!="string"||pe==="")&&(pe="utf8"),!_.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var be=$(Re,pe)|0,Ue=s(be),et=Ue.write(Re,pe);return et!==be&&(Ue=Ue.slice(0,et)),Ue}function N(Re){for(var pe=Re.length<0?0:X(Re.length)|0,be=s(pe),Ue=0;Ue<pe;Ue+=1)be[Ue]=Re[Ue]&255;return be}function B(Re){if(Ze(Re,Uint8Array)){var pe=new Uint8Array(Re);return z(pe.buffer,pe.byteOffset,pe.byteLength)}return N(Re)}function z(Re,pe,be){if(pe<0||Re.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(Re.byteLength<pe+(be||0))throw new RangeError('"length" is outside of buffer bounds');var Ue;return pe===void 0&&be===void 0?Ue=new Uint8Array(Re):be===void 0?Ue=new Uint8Array(Re,pe):Ue=new Uint8Array(Re,pe,be),Object.setPrototypeOf(Ue,_.prototype),Ue}function H(Re){if(_.isBuffer(Re)){var pe=X(Re.length)|0,be=s(pe);return be.length===0||Re.copy(be,0,0,pe),be}if(Re.length!==void 0)return typeof Re.length!="number"||Ye(Re.length)?s(0):N(Re);if(Re.type==="Buffer"&&Array.isArray(Re.data))return N(Re.data)}function X(Re){if(Re>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return Re|0}_.isBuffer=function(pe){return pe!=null&&pe._isBuffer===!0&&pe!==_.prototype},_.compare=function(pe,be){if(Ze(pe,Uint8Array)&&(pe=_.from(pe,pe.offset,pe.byteLength)),Ze(be,Uint8Array)&&(be=_.from(be,be.offset,be.byteLength)),!_.isBuffer(pe)||!_.isBuffer(be))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===be)return 0;for(var Ue=pe.length,et=be.length,st=0,lt=Math.min(Ue,et);st<lt;++st)if(pe[st]!==be[st]){Ue=pe[st],et=be[st];break}return Ue<et?-1:et<Ue?1:0},_.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(pe,be){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return _.alloc(0);var Ue;if(be===void 0)for(be=0,Ue=0;Ue<pe.length;++Ue)be+=pe[Ue].length;var et=_.allocUnsafe(be),st=0;for(Ue=0;Ue<pe.length;++Ue){var lt=pe[Ue];if(Ze(lt,Uint8Array))st+lt.length>et.length?(_.isBuffer(lt)||(lt=_.from(lt)),lt.copy(et,st)):Uint8Array.prototype.set.call(et,lt,st);else if(_.isBuffer(lt))lt.copy(et,st);else throw new TypeError('"list" argument must be an Array of Buffers');st+=lt.length}return et};function $(Re,pe){if(_.isBuffer(Re))return Re.length;if(ArrayBuffer.isView(Re)||Ze(Re,ArrayBuffer))return Re.byteLength;if(typeof Re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+x(Re));var be=Re.length,Ue=arguments.length>2&&arguments[2]===!0;if(!Ue&&be===0)return 0;for(var et=!1;;)switch(pe){case"ascii":case"latin1":case"binary":return be;case"utf8":case"utf-8":return wt(Re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be*2;case"hex":return be>>>1;case"base64":return Fe(Re).length;default:if(et)return Ue?-1:wt(Re).length;pe=(""+pe).toLowerCase(),et=!0}}_.byteLength=$;function ne(Re,pe,be){var Ue=!1;if((pe===void 0||pe<0)&&(pe=0),pe>this.length||((be===void 0||be>this.length)&&(be=this.length),be<=0)||(be>>>=0,pe>>>=0,be<=pe))return"";for(Re||(Re="utf8");;)switch(Re){case"hex":return Te(this,pe,be);case"utf8":case"utf-8":return Z(this,pe,be);case"ascii":return ce(this,pe,be);case"latin1":case"binary":return xe(this,pe,be);case"base64":return j(this,pe,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,pe,be);default:if(Ue)throw new TypeError("Unknown encoding: "+Re);Re=(Re+"").toLowerCase(),Ue=!0}}_.prototype._isBuffer=!0;function q(Re,pe,be){var Ue=Re[pe];Re[pe]=Re[be],Re[be]=Ue}_.prototype.swap16=function(){var pe=this.length;if(pe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var be=0;be<pe;be+=2)q(this,be,be+1);return this},_.prototype.swap32=function(){var pe=this.length;if(pe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var be=0;be<pe;be+=4)q(this,be,be+3),q(this,be+1,be+2);return this},_.prototype.swap64=function(){var pe=this.length;if(pe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var be=0;be<pe;be+=8)q(this,be,be+7),q(this,be+1,be+6),q(this,be+2,be+5),q(this,be+3,be+4);return this},_.prototype.toString=function(){var pe=this.length;return pe===0?"":arguments.length===0?Z(this,0,pe):ne.apply(this,arguments)},_.prototype.toLocaleString=_.prototype.toString,_.prototype.equals=function(pe){if(!_.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe?!0:_.compare(this,pe)===0},_.prototype.inspect=function(){var pe="",be=g.IS;return pe=this.toString("hex",0,be).replace(/(.{2})/g,"$1 ").trim(),this.length>be&&(pe+=" ... "),"<Buffer "+pe+">"},y&&(_.prototype[y]=_.prototype.inspect),_.prototype.compare=function(pe,be,Ue,et,st){if(Ze(pe,Uint8Array)&&(pe=_.from(pe,pe.offset,pe.byteLength)),!_.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+x(pe));if(be===void 0&&(be=0),Ue===void 0&&(Ue=pe?pe.length:0),et===void 0&&(et=0),st===void 0&&(st=this.length),be<0||Ue>pe.length||et<0||st>this.length)throw new RangeError("out of range index");if(et>=st&&be>=Ue)return 0;if(et>=st)return-1;if(be>=Ue)return 1;if(be>>>=0,Ue>>>=0,et>>>=0,st>>>=0,this===pe)return 0;for(var lt=st-et,Gt=Ue-be,Zt=Math.min(lt,Gt),Tt=this.slice(et,st),It=pe.slice(be,Ue),Xt=0;Xt<Zt;++Xt)if(Tt[Xt]!==It[Xt]){lt=Tt[Xt],Gt=It[Xt];break}return lt<Gt?-1:Gt<lt?1:0};function ue(Re,pe,be,Ue,et){if(Re.length===0)return-1;if(typeof be=="string"?(Ue=be,be=0):be>2147483647?be=2147483647:be<-2147483648&&(be=-2147483648),be=+be,Ye(be)&&(be=et?0:Re.length-1),be<0&&(be=Re.length+be),be>=Re.length){if(et)return-1;be=Re.length-1}else if(be<0)if(et)be=0;else return-1;if(typeof pe=="string"&&(pe=_.from(pe,Ue)),_.isBuffer(pe))return pe.length===0?-1:te(Re,pe,be,Ue,et);if(typeof pe=="number")return pe=pe&255,typeof Uint8Array.prototype.indexOf=="function"?et?Uint8Array.prototype.indexOf.call(Re,pe,be):Uint8Array.prototype.lastIndexOf.call(Re,pe,be):te(Re,[pe],be,Ue,et);throw new TypeError("val must be string, number or Buffer")}function te(Re,pe,be,Ue,et){var st=1,lt=Re.length,Gt=pe.length;if(Ue!==void 0&&(Ue=String(Ue).toLowerCase(),Ue==="ucs2"||Ue==="ucs-2"||Ue==="utf16le"||Ue==="utf-16le")){if(Re.length<2||pe.length<2)return-1;st=2,lt/=2,Gt/=2,be/=2}function Zt(gt,jt){return st===1?gt[jt]:gt.readUInt16BE(jt*st)}var Tt;if(et){var It=-1;for(Tt=be;Tt<lt;Tt++)if(Zt(Re,Tt)===Zt(pe,It===-1?0:Tt-It)){if(It===-1&&(It=Tt),Tt-It+1===Gt)return It*st}else It!==-1&&(Tt-=Tt-It),It=-1}else for(be+Gt>lt&&(be=lt-Gt),Tt=be;Tt>=0;Tt--){for(var Xt=!0,gr=0;gr<Gt;gr++)if(Zt(Re,Tt+gr)!==Zt(pe,gr)){Xt=!1;break}if(Xt)return Tt}return-1}_.prototype.includes=function(pe,be,Ue){return this.indexOf(pe,be,Ue)!==-1},_.prototype.indexOf=function(pe,be,Ue){return ue(this,pe,be,Ue,!0)},_.prototype.lastIndexOf=function(pe,be,Ue){return ue(this,pe,be,Ue,!1)};function J(Re,pe,be,Ue){be=Number(be)||0;var et=Re.length-be;Ue?(Ue=Number(Ue),Ue>et&&(Ue=et)):Ue=et;var st=pe.length;Ue>st/2&&(Ue=st/2);var lt;for(lt=0;lt<Ue;++lt){var Gt=parseInt(pe.substr(lt*2,2),16);if(Ye(Gt))return lt;Re[be+lt]=Gt}return lt}function ie(Re,pe,be,Ue){return We(wt(pe,Re.length-be),Re,be,Ue)}function K(Re,pe,be,Ue){return We(Et(pe),Re,be,Ue)}function ee(Re,pe,be,Ue){return We(Fe(pe),Re,be,Ue)}function le(Re,pe,be,Ue){return We(nt(pe,Re.length-be),Re,be,Ue)}_.prototype.write=function(pe,be,Ue,et){if(be===void 0)et="utf8",Ue=this.length,be=0;else if(Ue===void 0&&typeof be=="string")et=be,Ue=this.length,be=0;else if(isFinite(be))be=be>>>0,isFinite(Ue)?(Ue=Ue>>>0,et===void 0&&(et="utf8")):(et=Ue,Ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var st=this.length-be;if((Ue===void 0||Ue>st)&&(Ue=st),pe.length>0&&(Ue<0||be<0)||be>this.length)throw new RangeError("Attempt to write outside buffer bounds");et||(et="utf8");for(var lt=!1;;)switch(et){case"hex":return J(this,pe,be,Ue);case"utf8":case"utf-8":return ie(this,pe,be,Ue);case"ascii":case"latin1":case"binary":return K(this,pe,be,Ue);case"base64":return ee(this,pe,be,Ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,pe,be,Ue);default:if(lt)throw new TypeError("Unknown encoding: "+et);et=(""+et).toLowerCase(),lt=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(Re,pe,be){return pe===0&&be===Re.length?A.fromByteArray(Re):A.fromByteArray(Re.slice(pe,be))}function Z(Re,pe,be){be=Math.min(Re.length,be);for(var Ue=[],et=pe;et<be;){var st=Re[et],lt=null,Gt=st>239?4:st>223?3:st>191?2:1;if(et+Gt<=be){var Zt=void 0,Tt=void 0,It=void 0,Xt=void 0;switch(Gt){case 1:st<128&&(lt=st);break;case 2:Zt=Re[et+1],(Zt&192)===128&&(Xt=(st&31)<<6|Zt&63,Xt>127&&(lt=Xt));break;case 3:Zt=Re[et+1],Tt=Re[et+2],(Zt&192)===128&&(Tt&192)===128&&(Xt=(st&15)<<12|(Zt&63)<<6|Tt&63,Xt>2047&&(Xt<55296||Xt>57343)&&(lt=Xt));break;case 4:Zt=Re[et+1],Tt=Re[et+2],It=Re[et+3],(Zt&192)===128&&(Tt&192)===128&&(It&192)===128&&(Xt=(st&15)<<18|(Zt&63)<<12|(Tt&63)<<6|It&63,Xt>65535&&Xt<1114112&&(lt=Xt))}}lt===null?(lt=65533,Gt=1):lt>65535&&(lt-=65536,Ue.push(lt>>>10&1023|55296),lt=56320|lt&1023),Ue.push(lt),et+=Gt}return re(Ue)}var fe=4096;function re(Re){var pe=Re.length;if(pe<=fe)return String.fromCharCode.apply(String,Re);for(var be="",Ue=0;Ue<pe;)be+=String.fromCharCode.apply(String,Re.slice(Ue,Ue+=fe));return be}function ce(Re,pe,be){var Ue="";be=Math.min(Re.length,be);for(var et=pe;et<be;++et)Ue+=String.fromCharCode(Re[et]&127);return Ue}function xe(Re,pe,be){var Ue="";be=Math.min(Re.length,be);for(var et=pe;et<be;++et)Ue+=String.fromCharCode(Re[et]);return Ue}function Te(Re,pe,be){var Ue=Re.length;(!pe||pe<0)&&(pe=0),(!be||be<0||be>Ue)&&(be=Ue);for(var et="",st=pe;st<be;++st)et+=Ie[Re[st]];return et}function we(Re,pe,be){for(var Ue=Re.slice(pe,be),et="",st=0;st<Ue.length-1;st+=2)et+=String.fromCharCode(Ue[st]+Ue[st+1]*256);return et}_.prototype.slice=function(pe,be){var Ue=this.length;pe=~~pe,be=be===void 0?Ue:~~be,pe<0?(pe+=Ue,pe<0&&(pe=0)):pe>Ue&&(pe=Ue),be<0?(be+=Ue,be<0&&(be=0)):be>Ue&&(be=Ue),be<pe&&(be=pe);var et=this.subarray(pe,be);return Object.setPrototypeOf(et,_.prototype),et};function _e(Re,pe,be){if(Re%1!==0||Re<0)throw new RangeError("offset is not uint");if(Re+pe>be)throw new RangeError("Trying to access beyond buffer length")}_.prototype.readUintLE=_.prototype.readUIntLE=function(pe,be,Ue){pe=pe>>>0,be=be>>>0,Ue||_e(pe,be,this.length);for(var et=this[pe],st=1,lt=0;++lt<be&&(st*=256);)et+=this[pe+lt]*st;return et},_.prototype.readUintBE=_.prototype.readUIntBE=function(pe,be,Ue){pe=pe>>>0,be=be>>>0,Ue||_e(pe,be,this.length);for(var et=this[pe+--be],st=1;be>0&&(st*=256);)et+=this[pe+--be]*st;return et},_.prototype.readUint8=_.prototype.readUInt8=function(pe,be){return pe=pe>>>0,be||_e(pe,1,this.length),this[pe]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(pe,be){return pe=pe>>>0,be||_e(pe,2,this.length),this[pe]|this[pe+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(pe,be){return pe=pe>>>0,be||_e(pe,2,this.length),this[pe]<<8|this[pe+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(pe,be){return pe=pe>>>0,be||_e(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+this[pe+3]*16777216},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(pe,be){return pe=pe>>>0,be||_e(pe,4,this.length),this[pe]*16777216+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},_.prototype.readBigUInt64LE=De(function(pe){pe=pe>>>0,qe(pe,"offset");var be=this[pe],Ue=this[pe+7];(be===void 0||Ue===void 0)&&ht(pe,this.length-8);var et=be+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24),st=this[++pe]+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+Ue*Math.pow(2,24);return BigInt(et)+(BigInt(st)<<BigInt(32))}),_.prototype.readBigUInt64BE=De(function(pe){pe=pe>>>0,qe(pe,"offset");var be=this[pe],Ue=this[pe+7];(be===void 0||Ue===void 0)&&ht(pe,this.length-8);var et=be*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe],st=this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+Ue;return(BigInt(et)<<BigInt(32))+BigInt(st)}),_.prototype.readIntLE=function(pe,be,Ue){pe=pe>>>0,be=be>>>0,Ue||_e(pe,be,this.length);for(var et=this[pe],st=1,lt=0;++lt<be&&(st*=256);)et+=this[pe+lt]*st;return st*=128,et>=st&&(et-=Math.pow(2,8*be)),et},_.prototype.readIntBE=function(pe,be,Ue){pe=pe>>>0,be=be>>>0,Ue||_e(pe,be,this.length);for(var et=be,st=1,lt=this[pe+--et];et>0&&(st*=256);)lt+=this[pe+--et]*st;return st*=128,lt>=st&&(lt-=Math.pow(2,8*be)),lt},_.prototype.readInt8=function(pe,be){return pe=pe>>>0,be||_e(pe,1,this.length),this[pe]&128?(255-this[pe]+1)*-1:this[pe]},_.prototype.readInt16LE=function(pe,be){pe=pe>>>0,be||_e(pe,2,this.length);var Ue=this[pe]|this[pe+1]<<8;return Ue&32768?Ue|4294901760:Ue},_.prototype.readInt16BE=function(pe,be){pe=pe>>>0,be||_e(pe,2,this.length);var Ue=this[pe+1]|this[pe]<<8;return Ue&32768?Ue|4294901760:Ue},_.prototype.readInt32LE=function(pe,be){return pe=pe>>>0,be||_e(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},_.prototype.readInt32BE=function(pe,be){return pe=pe>>>0,be||_e(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},_.prototype.readBigInt64LE=De(function(pe){pe=pe>>>0,qe(pe,"offset");var be=this[pe],Ue=this[pe+7];(be===void 0||Ue===void 0)&&ht(pe,this.length-8);var et=this[pe+4]+this[pe+5]*Math.pow(2,8)+this[pe+6]*Math.pow(2,16)+(Ue<<24);return(BigInt(et)<<BigInt(32))+BigInt(be+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24))}),_.prototype.readBigInt64BE=De(function(pe){pe=pe>>>0,qe(pe,"offset");var be=this[pe],Ue=this[pe+7];(be===void 0||Ue===void 0)&&ht(pe,this.length-8);var et=(be<<24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe];return(BigInt(et)<<BigInt(32))+BigInt(this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+Ue)}),_.prototype.readFloatLE=function(pe,be){return pe=pe>>>0,be||_e(pe,4,this.length),P.read(this,pe,!0,23,4)},_.prototype.readFloatBE=function(pe,be){return pe=pe>>>0,be||_e(pe,4,this.length),P.read(this,pe,!1,23,4)},_.prototype.readDoubleLE=function(pe,be){return pe=pe>>>0,be||_e(pe,8,this.length),P.read(this,pe,!0,52,8)},_.prototype.readDoubleBE=function(pe,be){return pe=pe>>>0,be||_e(pe,8,this.length),P.read(this,pe,!1,52,8)};function ke(Re,pe,be,Ue,et,st){if(!_.isBuffer(Re))throw new TypeError('"buffer" argument must be a Buffer instance');if(pe>et||pe<st)throw new RangeError('"value" argument is out of bounds');if(be+Ue>Re.length)throw new RangeError("Index out of range")}_.prototype.writeUintLE=_.prototype.writeUIntLE=function(pe,be,Ue,et){if(pe=+pe,be=be>>>0,Ue=Ue>>>0,!et){var st=Math.pow(2,8*Ue)-1;ke(this,pe,be,Ue,st,0)}var lt=1,Gt=0;for(this[be]=pe&255;++Gt<Ue&&(lt*=256);)this[be+Gt]=pe/lt&255;return be+Ue},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(pe,be,Ue,et){if(pe=+pe,be=be>>>0,Ue=Ue>>>0,!et){var st=Math.pow(2,8*Ue)-1;ke(this,pe,be,Ue,st,0)}var lt=Ue-1,Gt=1;for(this[be+lt]=pe&255;--lt>=0&&(Gt*=256);)this[be+lt]=pe/Gt&255;return be+Ue},_.prototype.writeUint8=_.prototype.writeUInt8=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,1,255,0),this[be]=pe&255,be+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,2,65535,0),this[be]=pe&255,this[be+1]=pe>>>8,be+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,2,65535,0),this[be]=pe>>>8,this[be+1]=pe&255,be+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,4,4294967295,0),this[be+3]=pe>>>24,this[be+2]=pe>>>16,this[be+1]=pe>>>8,this[be]=pe&255,be+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,4,4294967295,0),this[be]=pe>>>24,this[be+1]=pe>>>16,this[be+2]=pe>>>8,this[be+3]=pe&255,be+4};function Ne(Re,pe,be,Ue,et){$e(pe,Ue,et,Re,be,7);var st=Number(pe&BigInt(4294967295));Re[be++]=st,st=st>>8,Re[be++]=st,st=st>>8,Re[be++]=st,st=st>>8,Re[be++]=st;var lt=Number(pe>>BigInt(32)&BigInt(4294967295));return Re[be++]=lt,lt=lt>>8,Re[be++]=lt,lt=lt>>8,Re[be++]=lt,lt=lt>>8,Re[be++]=lt,be}function Ee(Re,pe,be,Ue,et){$e(pe,Ue,et,Re,be,7);var st=Number(pe&BigInt(4294967295));Re[be+7]=st,st=st>>8,Re[be+6]=st,st=st>>8,Re[be+5]=st,st=st>>8,Re[be+4]=st;var lt=Number(pe>>BigInt(32)&BigInt(4294967295));return Re[be+3]=lt,lt=lt>>8,Re[be+2]=lt,lt=lt>>8,Re[be+1]=lt,lt=lt>>8,Re[be]=lt,be+8}_.prototype.writeBigUInt64LE=De(function(pe){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ne(this,pe,be,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=De(function(pe){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ee(this,pe,be,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(pe,be,Ue,et){if(pe=+pe,be=be>>>0,!et){var st=Math.pow(2,8*Ue-1);ke(this,pe,be,Ue,st-1,-st)}var lt=0,Gt=1,Zt=0;for(this[be]=pe&255;++lt<Ue&&(Gt*=256);)pe<0&&Zt===0&&this[be+lt-1]!==0&&(Zt=1),this[be+lt]=(pe/Gt>>0)-Zt&255;return be+Ue},_.prototype.writeIntBE=function(pe,be,Ue,et){if(pe=+pe,be=be>>>0,!et){var st=Math.pow(2,8*Ue-1);ke(this,pe,be,Ue,st-1,-st)}var lt=Ue-1,Gt=1,Zt=0;for(this[be+lt]=pe&255;--lt>=0&&(Gt*=256);)pe<0&&Zt===0&&this[be+lt+1]!==0&&(Zt=1),this[be+lt]=(pe/Gt>>0)-Zt&255;return be+Ue},_.prototype.writeInt8=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,1,127,-128),pe<0&&(pe=255+pe+1),this[be]=pe&255,be+1},_.prototype.writeInt16LE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,2,32767,-32768),this[be]=pe&255,this[be+1]=pe>>>8,be+2},_.prototype.writeInt16BE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,2,32767,-32768),this[be]=pe>>>8,this[be+1]=pe&255,be+2},_.prototype.writeInt32LE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,4,2147483647,-2147483648),this[be]=pe&255,this[be+1]=pe>>>8,this[be+2]=pe>>>16,this[be+3]=pe>>>24,be+4},_.prototype.writeInt32BE=function(pe,be,Ue){return pe=+pe,be=be>>>0,Ue||ke(this,pe,be,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[be]=pe>>>24,this[be+1]=pe>>>16,this[be+2]=pe>>>8,this[be+3]=pe&255,be+4},_.prototype.writeBigInt64LE=De(function(pe){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ne(this,pe,be,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=De(function(pe){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ee(this,pe,be,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ze(Re,pe,be,Ue,et,st){if(be+Ue>Re.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("Index out of range")}function Ce(Re,pe,be,Ue,et){return pe=+pe,be=be>>>0,et||ze(Re,pe,be,4),P.write(Re,pe,be,Ue,23,4),be+4}_.prototype.writeFloatLE=function(pe,be,Ue){return Ce(this,pe,be,!0,Ue)},_.prototype.writeFloatBE=function(pe,be,Ue){return Ce(this,pe,be,!1,Ue)};function Oe(Re,pe,be,Ue,et){return pe=+pe,be=be>>>0,et||ze(Re,pe,be,8),P.write(Re,pe,be,Ue,52,8),be+8}_.prototype.writeDoubleLE=function(pe,be,Ue){return Oe(this,pe,be,!0,Ue)},_.prototype.writeDoubleBE=function(pe,be,Ue){return Oe(this,pe,be,!1,Ue)},_.prototype.copy=function(pe,be,Ue,et){if(!_.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(Ue||(Ue=0),!et&&et!==0&&(et=this.length),be>=pe.length&&(be=pe.length),be||(be=0),et>0&&et<Ue&&(et=Ue),et===Ue||pe.length===0||this.length===0)return 0;if(be<0)throw new RangeError("targetStart out of bounds");if(Ue<0||Ue>=this.length)throw new RangeError("Index out of range");if(et<0)throw new RangeError("sourceEnd out of bounds");et>this.length&&(et=this.length),pe.length-be<et-Ue&&(et=pe.length-be+Ue);var st=et-Ue;return this===pe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(be,Ue,et):Uint8Array.prototype.set.call(pe,this.subarray(Ue,et),be),st},_.prototype.fill=function(pe,be,Ue,et){if(typeof pe=="string"){if(typeof be=="string"?(et=be,be=0,Ue=this.length):typeof Ue=="string"&&(et=Ue,Ue=this.length),et!==void 0&&typeof et!="string")throw new TypeError("encoding must be a string");if(typeof et=="string"&&!_.isEncoding(et))throw new TypeError("Unknown encoding: "+et);if(pe.length===1){var st=pe.charCodeAt(0);(et==="utf8"&&st<128||et==="latin1")&&(pe=st)}}else typeof pe=="number"?pe=pe&255:typeof pe=="boolean"&&(pe=Number(pe));if(be<0||this.length<be||this.length<Ue)throw new RangeError("Out of range index");if(Ue<=be)return this;be=be>>>0,Ue=Ue===void 0?this.length:Ue>>>0,pe||(pe=0);var lt;if(typeof pe=="number")for(lt=be;lt<Ue;++lt)this[lt]=pe;else{var Gt=_.isBuffer(pe)?pe:_.from(pe,et),Zt=Gt.length;if(Zt===0)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(lt=0;lt<Ue-be;++lt)this[lt+be]=Gt[lt%Zt]}return this};var Le={};function Ge(Re,pe,be){Le[Re]=function(Ue){function et(){var st;return t(this,et),st=l(this,et),Object.defineProperty(st,"message",{value:pe.apply(st,arguments),writable:!0,configurable:!0}),st.name="".concat(st.name," [").concat(Re,"]"),st.stack,delete st.name,st}return a(et,Ue),i(et,[{key:"code",get:function(){return Re},set:function(lt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:lt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Re,"]: ").concat(this.message)}}])}(be)}Ge("ERR_BUFFER_OUT_OF_BOUNDS",function(Re){return Re?"".concat(Re," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Ge("ERR_INVALID_ARG_TYPE",function(Re,pe){return'The "'.concat(Re,'" argument must be of type number. Received type ').concat(x(pe))},TypeError),Ge("ERR_OUT_OF_RANGE",function(Re,pe,be){var Ue='The value of "'.concat(Re,'" is out of range.'),et=be;return Number.isInteger(be)&&Math.abs(be)>Math.pow(2,32)?et=rt(String(be)):typeof be=="bigint"&&(et=String(be),(be>Math.pow(BigInt(2),BigInt(32))||be<-Math.pow(BigInt(2),BigInt(32)))&&(et=rt(et)),et+="n"),Ue+=" It must be ".concat(pe,". Received ").concat(et),Ue},RangeError);function rt(Re){for(var pe="",be=Re.length,Ue=Re[0]==="-"?1:0;be>=Ue+4;be-=3)pe="_".concat(Re.slice(be-3,be)).concat(pe);return"".concat(Re.slice(0,be)).concat(pe)}function ot(Re,pe,be){qe(pe,"offset"),(Re[pe]===void 0||Re[pe+be]===void 0)&&ht(pe,Re.length-(be+1))}function $e(Re,pe,be,Ue,et,st){if(Re>be||Re<pe){var lt=typeof pe=="bigint"?"n":"",Gt;throw pe===0||pe===BigInt(0)?Gt=">= 0".concat(lt," and < 2").concat(lt," ** ").concat((st+1)*8).concat(lt):Gt=">= -(2".concat(lt," ** ").concat((st+1)*8-1).concat(lt,") and < 2 ** ")+"".concat((st+1)*8-1).concat(lt),new Le.ERR_OUT_OF_RANGE("value",Gt,Re)}ot(Ue,et,st)}function qe(Re,pe){if(typeof Re!="number")throw new Le.ERR_INVALID_ARG_TYPE(pe,"number",Re)}function ht(Re,pe,be){throw Math.floor(Re)!==Re?(qe(Re,be),new Le.ERR_OUT_OF_RANGE("offset","an integer",Re)):pe<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(pe),Re)}var vt=/[^+/0-9A-Za-z-_]/g;function pt(Re){if(Re=Re.split("=")[0],Re=Re.trim().replace(vt,""),Re.length<2)return"";for(;Re.length%4!==0;)Re=Re+"=";return Re}function wt(Re,pe){pe=pe||1/0;for(var be,Ue=Re.length,et=null,st=[],lt=0;lt<Ue;++lt){if(be=Re.charCodeAt(lt),be>55295&&be<57344){if(!et){if(be>56319){(pe-=3)>-1&&st.push(239,191,189);continue}else if(lt+1===Ue){(pe-=3)>-1&&st.push(239,191,189);continue}et=be;continue}if(be<56320){(pe-=3)>-1&&st.push(239,191,189),et=be;continue}be=(et-55296<<10|be-56320)+65536}else et&&(pe-=3)>-1&&st.push(239,191,189);if(et=null,be<128){if((pe-=1)<0)break;st.push(be)}else if(be<2048){if((pe-=2)<0)break;st.push(be>>6|192,be&63|128)}else if(be<65536){if((pe-=3)<0)break;st.push(be>>12|224,be>>6&63|128,be&63|128)}else if(be<1114112){if((pe-=4)<0)break;st.push(be>>18|240,be>>12&63|128,be>>6&63|128,be&63|128)}else throw new Error("Invalid code point")}return st}function Et(Re){for(var pe=[],be=0;be<Re.length;++be)pe.push(Re.charCodeAt(be)&255);return pe}function nt(Re,pe){for(var be,Ue,et,st=[],lt=0;lt<Re.length&&!((pe-=2)<0);++lt)be=Re.charCodeAt(lt),Ue=be>>8,et=be%256,st.push(et),st.push(Ue);return st}function Fe(Re){return A.toByteArray(pt(Re))}function We(Re,pe,be,Ue){var et;for(et=0;et<Ue&&!(et+be>=pe.length||et>=Re.length);++et)pe[et+be]=Re[et];return et}function Ze(Re,pe){return Re instanceof pe||Re!=null&&Re.constructor!=null&&Re.constructor.name!=null&&Re.constructor.name===pe.name}function Ye(Re){return Re!==Re}var Ie=function(){for(var Re="0123456789abcdef",pe=new Array(256),be=0;be<16;++be)for(var Ue=be*16,et=0;et<16;++et)pe[Ue+et]=Re[be]+Re[et];return pe}();function De(Re){return typeof BigInt>"u"?je:Re}function je(){throw new Error("BigInt not supported")}},9216:function(v){v.exports=o,v.exports.isMobile=o,v.exports.default=o;var g=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,t=/android|ipad|playbook|silk/i;function o(i){i||(i={});var f=i.ua;if(!f&&typeof navigator<"u"&&(f=navigator.userAgent),f&&f.headers&&typeof f.headers["user-agent"]=="string"&&(f=f.headers["user-agent"]),typeof f!="string")return!1;var u=g.test(f)&&!r.test(f)||!!i.tablet&&t.test(f);return!u&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&f.indexOf("Macintosh")!==-1&&f.indexOf("Safari")!==-1&&(u=!0),u}},6296:function(v,g,r){v.exports=l;var t=r(7261),o=r(9977),i=r(4192);function f(m,h){this._controllerNames=Object.keys(m),this._controllerList=this._controllerNames.map(function(w){return m[w]}),this._mode=h,this._active=m[h],this._active||(this._mode="turntable",this._active=m.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var u=f.prototype;u.flush=function(m){for(var h=this._controllerList,w=0;w<h.length;++w)h[w].flush(m)},u.idle=function(m){for(var h=this._controllerList,w=0;w<h.length;++w)h[w].idle(m)},u.lookAt=function(m,h,w,c){for(var a=this._controllerList,p=0;p<a.length;++p)a[p].lookAt(m,h,w,c)},u.rotate=function(m,h,w,c){for(var a=this._controllerList,p=0;p<a.length;++p)a[p].rotate(m,h,w,c)},u.pan=function(m,h,w,c){for(var a=this._controllerList,p=0;p<a.length;++p)a[p].pan(m,h,w,c)},u.translate=function(m,h,w,c){for(var a=this._controllerList,p=0;p<a.length;++p)a[p].translate(m,h,w,c)},u.setMatrix=function(m,h){for(var w=this._controllerList,c=0;c<w.length;++c)w[c].setMatrix(m,h)},u.setDistanceLimits=function(m,h){for(var w=this._controllerList,c=0;c<w.length;++c)w[c].setDistanceLimits(m,h)},u.setDistance=function(m,h){for(var w=this._controllerList,c=0;c<w.length;++c)w[c].setDistance(m,h)},u.recalcMatrix=function(m){this._active.recalcMatrix(m)},u.getDistance=function(m){return this._active.getDistance(m)},u.getDistanceLimits=function(m){return this._active.getDistanceLimits(m)},u.lastT=function(){return this._active.lastT()},u.setMode=function(m){if(m!==this._mode){var h=this._controllerNames.indexOf(m);if(!(h<0)){var w=this._active,c=this._controllerList[h],a=Math.max(w.lastT(),c.lastT());w.recalcMatrix(a),c.setMatrix(a,w.computedMatrix),this._active=c,this._mode=m,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},u.getMode=function(){return this._mode};function l(m){m=m||{};var h=m.eye||[0,0,1],w=m.center||[0,0,0],c=m.up||[0,1,0],a=m.distanceLimits||[0,1/0],p=m.mode||"turntable",x=t(),A=o(),P=i();return x.setDistanceLimits(a[0],a[1]),x.lookAt(0,h,w,c),A.setDistanceLimits(a[0],a[1]),A.lookAt(0,h,w,c),P.setDistanceLimits(a[0],a[1]),P.lookAt(0,h,w,c),new f({turntable:x,orbit:A,matrix:P},p)}},7169:function(v,g,r){var t=typeof WeakMap>"u"?r(1538):WeakMap,o=r(2762),i=r(8116),f=new t;function u(l){var m=f.get(l),h=m&&(m._triangleBuffer.handle||m._triangleBuffer.buffer);if(!h||!l.isBuffer(h)){var w=o(l,new Float32Array([-1,-1,-1,4,4,-1]));m=i(l,[{buffer:w,type:l.FLOAT,size:2}]),m._triangleBuffer=w,f.set(l,m)}m.bind(),l.drawArrays(l.TRIANGLES,0,3),m.unbind()}v.exports=u},1085:function(v,g,r){var t=r(1371);v.exports=o;function o(i,f,u){f=typeof f=="number"?f:1,u=u||": ";var l=i.split(/\r?\n/),m=String(l.length+f-1).length;return l.map(function(h,w){var c=w+f,a=String(c).length,p=t(c,m-a);return p+u+h}).join(`
`)}},3952:function(v,g,r){v.exports=i;var t=r(3250);function o(f,u){for(var l=new Array(u+1),m=0;m<f.length;++m)l[m]=f[m];for(var m=0;m<=f.length;++m){for(var h=f.length;h<=u;++h){for(var w=new Array(u),c=0;c<u;++c)w[c]=Math.pow(h+1-m,c);l[h]=w}var a=t.apply(void 0,l);if(a)return!0}return!1}function i(f){var u=f.length;if(u===0)return[];if(u===1)return[0];for(var l=f[0].length,m=[f[0]],h=[0],w=1;w<u;++w){if(m.push(f[w]),!o(m,l)){m.pop();continue}if(h.push(w),h.length===l+1)return h}return h}},5995:function(v,g,r){v.exports=i;var t=r(7642),o=r(6037);function i(f,u){return t(u).filter(function(l){for(var m=new Array(l.length),h=0;h<l.length;++h)m[h]=u[l[h]];return o(m)*f<1})}},3502:function(v,g,r){v.exports=i;var t=r(5995),o=r(9127);function i(f,u){return o(t(f,u))}},6468:function(v){v.exports=function(r){return atob(r)}},2642:function(v,g,r){v.exports=i;var t=r(727);function o(f){for(var u=0,l=0;l<f.length;++l)u+=f[l];return u}function i(f,u){for(var l=u.length,m=new Array(l+1),h=0;h<l;++h){for(var w=new Array(l+1),c=0;c<=l;++c)w[c]=f[c][h];m[h]=w}m[l]=new Array(l+1);for(var h=0;h<=l;++h)m[l][h]=1;for(var a=new Array(l+1),h=0;h<l;++h)a[h]=u[h];a[l]=1;var p=t(m,a),x=o(p[l+1]);x===0&&(x=1);for(var A=new Array(l+1),h=0;h<=l;++h)A[h]=o(p[h])/x;return A}},7507:function(v,g){g.byteLength=m,g.toByteArray=w,g.fromByteArray=p;for(var r=[],t=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,u=i.length;f<u;++f)r[f]=i[f],t[i.charCodeAt(f)]=f;t[45]=62,t[95]=63;function l(x){var A=x.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=x.indexOf("=");P===-1&&(P=A);var y=P===A?0:4-P%4;return[P,y]}function m(x){var A=l(x),P=A[0],y=A[1];return(P+y)*3/4-y}function h(x,A,P){return(A+P)*3/4-P}function w(x){var A,P=l(x),y=P[0],C=P[1],M=new o(h(x,y,C)),s=0,_=C>0?y-4:y,b;for(b=0;b<_;b+=4)A=t[x.charCodeAt(b)]<<18|t[x.charCodeAt(b+1)]<<12|t[x.charCodeAt(b+2)]<<6|t[x.charCodeAt(b+3)],M[s++]=A>>16&255,M[s++]=A>>8&255,M[s++]=A&255;return C===2&&(A=t[x.charCodeAt(b)]<<2|t[x.charCodeAt(b+1)]>>4,M[s++]=A&255),C===1&&(A=t[x.charCodeAt(b)]<<10|t[x.charCodeAt(b+1)]<<4|t[x.charCodeAt(b+2)]>>2,M[s++]=A>>8&255,M[s++]=A&255),M}function c(x){return r[x>>18&63]+r[x>>12&63]+r[x>>6&63]+r[x&63]}function a(x,A,P){for(var y,C=[],M=A;M<P;M+=3)y=(x[M]<<16&16711680)+(x[M+1]<<8&65280)+(x[M+2]&255),C.push(c(y));return C.join("")}function p(x){for(var A,P=x.length,y=P%3,C=[],M=16383,s=0,_=P-y;s<_;s+=M)C.push(a(x,s,s+M>_?_:s+M));return y===1?(A=x[P-1],C.push(r[A>>2]+r[A<<4&63]+"==")):y===2&&(A=(x[P-2]<<8)+x[P-1],C.push(r[A>>10]+r[A>>4&63]+r[A<<2&63]+"=")),C.join("")}},3865:function(v,g,r){var t=r(869);v.exports=o;function o(i,f){return t(i[0].mul(f[1]).add(f[0].mul(i[1])),i[1].mul(f[1]))}},1318:function(v){v.exports=g;function g(r,t){return r[0].mul(t[1]).cmp(t[0].mul(r[1]))}},8697:function(v,g,r){var t=r(869);v.exports=o;function o(i,f){return t(i[0].mul(f[1]),i[1].mul(f[0]))}},7842:function(v,g,r){var t=r(6330),o=r(1533),i=r(2651),f=r(4387),u=r(869),l=r(8697);v.exports=m;function m(h,w){if(t(h))return w?l(h,m(w)):[h[0].clone(),h[1].clone()];var c=0,a,p;if(o(h))a=h.clone();else if(typeof h=="string")a=f(h);else{if(h===0)return[i(0),i(1)];if(h===Math.floor(h))a=i(h);else{for(;h!==Math.floor(h);)h=h*Math.pow(2,256),c-=256;a=i(h)}}if(t(w))a.mul(w[1]),p=w[0].clone();else if(o(w))p=w.clone();else if(typeof w=="string")p=f(w);else if(!w)p=i(1);else if(w===Math.floor(w))p=i(w);else{for(;w!==Math.floor(w);)w=w*Math.pow(2,256),c+=256;p=i(w)}return c>0?a=a.ushln(c):c<0&&(p=p.ushln(-c)),u(a,p)}},6330:function(v,g,r){var t=r(1533);v.exports=o;function o(i){return Array.isArray(i)&&i.length===2&&t(i[0])&&t(i[1])}},5716:function(v,g,r){var t=r(6859);v.exports=o;function o(i){return i.cmp(new t(0))}},1369:function(v,g,r){var t=r(5716);v.exports=o;function o(i){var f=i.length,u=i.words,l=0;if(f===1)l=u[0];else if(f===2)l=u[0]+u[1]*67108864;else for(var m=0;m<f;m++){var h=u[m];l+=h*Math.pow(67108864,m)}return t(i)*l}},4025:function(v,g,r){var t=r(2361),o=r(8828).countTrailingZeros;v.exports=i;function i(f){var u=o(t.lo(f));if(u<32)return u;var l=o(t.hi(f));return l>20?52:l+32}},1533:function(v,g,r){r(6859),v.exports=t;function t(o){return o&&typeof o=="object"&&!!o.words}},2651:function(v,g,r){var t=r(6859),o=r(2361);v.exports=i;function i(f){var u=o.exponent(f);return u<52?new t(f):new t(f*Math.pow(2,52-u)).ushln(u-52)}},869:function(v,g,r){var t=r(2651),o=r(5716);v.exports=i;function i(f,u){var l=o(f),m=o(u);if(l===0)return[t(0),t(1)];if(m===0)return[t(0),t(0)];m<0&&(f=f.neg(),u=u.neg());var h=f.gcd(u);return h.cmpn(1)?[f.div(h),u.div(h)]:[f,u]}},4387:function(v,g,r){var t=r(6859);v.exports=o;function o(i){return new t(i)}},6504:function(v,g,r){var t=r(869);v.exports=o;function o(i,f){return t(i[0].mul(f[0]),i[1].mul(f[1]))}},7721:function(v,g,r){var t=r(5716);v.exports=o;function o(i){return t(i[0])*t(i[1])}},5572:function(v,g,r){var t=r(869);v.exports=o;function o(i,f){return t(i[0].mul(f[1]).sub(i[1].mul(f[0])),i[1].mul(f[1]))}},946:function(v,g,r){var t=r(1369),o=r(4025);v.exports=i;function i(f){var u=f[0],l=f[1];if(u.cmpn(0)===0)return 0;var m=u.abs().divmod(l.abs()),h=m.div,w=t(h),c=m.mod,a=u.negative!==l.negative?-1:1;if(c.cmpn(0)===0)return a*w;if(w){var p=o(w)+4,x=t(c.ushln(p).divRound(l));return a*(w+x*Math.pow(2,-p))}else{var A=l.bitLength()-c.bitLength()+53,x=t(c.ushln(A).divRound(l));return A<1023?a*x*Math.pow(2,-A):(x*=Math.pow(2,-1023),a*x*Math.pow(2,1023-A))}}},2478:function(v){function g(u,l,m,h,w){for(var c=w+1;h<=w;){var a=h+w>>>1,p=u[a],x=m!==void 0?m(p,l):p-l;x>=0?(c=a,w=a-1):h=a+1}return c}function r(u,l,m,h,w){for(var c=w+1;h<=w;){var a=h+w>>>1,p=u[a],x=m!==void 0?m(p,l):p-l;x>0?(c=a,w=a-1):h=a+1}return c}function t(u,l,m,h,w){for(var c=h-1;h<=w;){var a=h+w>>>1,p=u[a],x=m!==void 0?m(p,l):p-l;x<0?(c=a,h=a+1):w=a-1}return c}function o(u,l,m,h,w){for(var c=h-1;h<=w;){var a=h+w>>>1,p=u[a],x=m!==void 0?m(p,l):p-l;x<=0?(c=a,h=a+1):w=a-1}return c}function i(u,l,m,h,w){for(;h<=w;){var c=h+w>>>1,a=u[c],p=m!==void 0?m(a,l):a-l;if(p===0)return c;p<=0?h=c+1:w=c-1}return-1}function f(u,l,m,h,w,c){return typeof m=="function"?c(u,l,m,h===void 0?0:h|0,w===void 0?u.length-1:w|0):c(u,l,void 0,m===void 0?0:m|0,h===void 0?u.length-1:h|0)}v.exports={ge:function(u,l,m,h,w){return f(u,l,m,h,w,g)},gt:function(u,l,m,h,w){return f(u,l,m,h,w,r)},lt:function(u,l,m,h,w){return f(u,l,m,h,w,t)},le:function(u,l,m,h,w){return f(u,l,m,h,w,o)},eq:function(u,l,m,h,w){return f(u,l,m,h,w,i)}}},8828:function(v,g){"use restrict";var r=32;g.INT_BITS=r,g.INT_MAX=2147483647,g.INT_MIN=-1<<r-1,g.sign=function(i){return(i>0)-(i<0)},g.abs=function(i){var f=i>>r-1;return(i^f)-f},g.min=function(i,f){return f^(i^f)&-(i<f)},g.max=function(i,f){return i^(i^f)&-(i<f)},g.isPow2=function(i){return!(i&i-1)&&!!i},g.log2=function(i){var f,u;return f=(i>65535)<<4,i>>>=f,u=(i>255)<<3,i>>>=u,f|=u,u=(i>15)<<2,i>>>=u,f|=u,u=(i>3)<<1,i>>>=u,f|=u,f|i>>1},g.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},g.popCount=function(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),(i+(i>>>4)&252645135)*16843009>>>24};function t(i){var f=32;return i&=-i,i&&f--,i&65535&&(f-=16),i&16711935&&(f-=8),i&252645135&&(f-=4),i&858993459&&(f-=2),i&1431655765&&(f-=1),f}g.countTrailingZeros=t,g.nextPow2=function(i){return i+=i===0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1},g.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i-(i>>>1)},g.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,i&=15,27030>>>i&1};var o=new Array(256);(function(i){for(var f=0;f<256;++f){var u=f,l=f,m=7;for(u>>>=1;u;u>>>=1)l<<=1,l|=u&1,--m;i[f]=l<<m&255}})(o),g.reverse=function(i){return o[i&255]<<24|o[i>>>8&255]<<16|o[i>>>16&255]<<8|o[i>>>24&255]},g.interleave2=function(i,f){return i&=65535,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,i|f<<1},g.deinterleave2=function(i,f){return i=i>>>f&1431655765,i=(i|i>>>1)&858993459,i=(i|i>>>2)&252645135,i=(i|i>>>4)&16711935,i=(i|i>>>16)&65535,i<<16>>16},g.interleave3=function(i,f,u){return i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,i|=f<<1,u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,i|u<<2},g.deinterleave3=function(i,f){return i=i>>>f&1227133513,i=(i|i>>>2)&3272356035,i=(i|i>>>4)&251719695,i=(i|i>>>8)&4278190335,i=(i|i>>>16)&1023,i<<22>>22},g.nextCombination=function(i){var f=i|i-1;return f+1|(~f&-~f)-1>>>t(i)+1}},6859:function(v,g,r){v=r.nmd(v),function(t,o){function i(B,z){if(!B)throw new Error(z||"Assertion failed")}function f(B,z){B.super_=z;var H=function(){};H.prototype=z.prototype,B.prototype=new H,B.prototype.constructor=B}function u(B,z,H){if(u.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((z==="le"||z==="be")&&(H=z,z=10),this._init(B||0,z||10,H||"be"))}typeof t=="object"?t.exports=u:o.BN=u,u.BN=u,u.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=r(7790).Buffer}catch{}u.isBN=function(z){return z instanceof u?!0:z!==null&&typeof z=="object"&&z.constructor.wordSize===u.wordSize&&Array.isArray(z.words)},u.max=function(z,H){return z.cmp(H)>0?z:H},u.min=function(z,H){return z.cmp(H)<0?z:H},u.prototype._init=function(z,H,X){if(typeof z=="number")return this._initNumber(z,H,X);if(typeof z=="object")return this._initArray(z,H,X);H==="hex"&&(H=16),i(H===(H|0)&&H>=2&&H<=36),z=z.toString().replace(/\s+/g,"");var $=0;z[0]==="-"&&($++,this.negative=1),$<z.length&&(H===16?this._parseHex(z,$,X):(this._parseBase(z,H,$),X==="le"&&this._initArray(this.toArray(),H,X)))},u.prototype._initNumber=function(z,H,X){z<0&&(this.negative=1,z=-z),z<67108864?(this.words=[z&67108863],this.length=1):z<4503599627370496?(this.words=[z&67108863,z/67108864&67108863],this.length=2):(i(z<9007199254740992),this.words=[z&67108863,z/67108864&67108863,1],this.length=3),X==="le"&&this._initArray(this.toArray(),H,X)},u.prototype._initArray=function(z,H,X){if(i(typeof z.length=="number"),z.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(z.length/3),this.words=new Array(this.length);for(var $=0;$<this.length;$++)this.words[$]=0;var ne,q,ue=0;if(X==="be")for($=z.length-1,ne=0;$>=0;$-=3)q=z[$]|z[$-1]<<8|z[$-2]<<16,this.words[ne]|=q<<ue&67108863,this.words[ne+1]=q>>>26-ue&67108863,ue+=24,ue>=26&&(ue-=26,ne++);else if(X==="le")for($=0,ne=0;$<z.length;$+=3)q=z[$]|z[$+1]<<8|z[$+2]<<16,this.words[ne]|=q<<ue&67108863,this.words[ne+1]=q>>>26-ue&67108863,ue+=24,ue>=26&&(ue-=26,ne++);return this.strip()};function m(B,z){var H=B.charCodeAt(z);return H>=65&&H<=70?H-55:H>=97&&H<=102?H-87:H-48&15}function h(B,z,H){var X=m(B,H);return H-1>=z&&(X|=m(B,H-1)<<4),X}u.prototype._parseHex=function(z,H,X){this.length=Math.ceil((z.length-H)/6),this.words=new Array(this.length);for(var $=0;$<this.length;$++)this.words[$]=0;var ne=0,q=0,ue;if(X==="be")for($=z.length-1;$>=H;$-=2)ue=h(z,H,$)<<ne,this.words[q]|=ue&67108863,ne>=18?(ne-=18,q+=1,this.words[q]|=ue>>>26):ne+=8;else{var te=z.length-H;for($=te%2===0?H+1:H;$<z.length;$+=2)ue=h(z,H,$)<<ne,this.words[q]|=ue&67108863,ne>=18?(ne-=18,q+=1,this.words[q]|=ue>>>26):ne+=8}this.strip()};function w(B,z,H,X){for(var $=0,ne=Math.min(B.length,H),q=z;q<ne;q++){var ue=B.charCodeAt(q)-48;$*=X,ue>=49?$+=ue-49+10:ue>=17?$+=ue-17+10:$+=ue}return $}u.prototype._parseBase=function(z,H,X){this.words=[0],this.length=1;for(var $=0,ne=1;ne<=67108863;ne*=H)$++;$--,ne=ne/H|0;for(var q=z.length-X,ue=q%$,te=Math.min(q,q-ue)+X,J=0,ie=X;ie<te;ie+=$)J=w(z,ie,ie+$,H),this.imuln(ne),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J);if(ue!==0){var K=1;for(J=w(z,ie,z.length,H),ie=0;ie<ue;ie++)K*=H;this.imuln(K),this.words[0]+J<67108864?this.words[0]+=J:this._iaddn(J)}this.strip()},u.prototype.copy=function(z){z.words=new Array(this.length);for(var H=0;H<this.length;H++)z.words[H]=this.words[H];z.length=this.length,z.negative=this.negative,z.red=this.red},u.prototype.clone=function(){var z=new u(null);return this.copy(z),z},u.prototype._expand=function(z){for(;this.length<z;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},u.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];u.prototype.toString=function(z,H){z=z||10,H=H|0||1;var X;if(z===16||z==="hex"){X="";for(var $=0,ne=0,q=0;q<this.length;q++){var ue=this.words[q],te=((ue<<$|ne)&16777215).toString(16);ne=ue>>>24-$&16777215,ne!==0||q!==this.length-1?X=c[6-te.length]+te+X:X=te+X,$+=2,$>=26&&($-=26,q--)}for(ne!==0&&(X=ne.toString(16)+X);X.length%H!==0;)X="0"+X;return this.negative!==0&&(X="-"+X),X}if(z===(z|0)&&z>=2&&z<=36){var J=a[z],ie=p[z];X="";var K=this.clone();for(K.negative=0;!K.isZero();){var ee=K.modn(ie).toString(z);K=K.idivn(ie),K.isZero()?X=ee+X:X=c[J-ee.length]+ee+X}for(this.isZero()&&(X="0"+X);X.length%H!==0;)X="0"+X;return this.negative!==0&&(X="-"+X),X}i(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var z=this.words[0];return this.length===2?z+=this.words[1]*67108864:this.length===3&&this.words[2]===1?z+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-z:z},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(z,H){return i(typeof l<"u"),this.toArrayLike(l,z,H)},u.prototype.toArray=function(z,H){return this.toArrayLike(Array,z,H)},u.prototype.toArrayLike=function(z,H,X){var $=this.byteLength(),ne=X||Math.max(1,$);i($<=ne,"byte array longer than desired length"),i(ne>0,"Requested array length <= 0"),this.strip();var q=H==="le",ue=new z(ne),te,J,ie=this.clone();if(q){for(J=0;!ie.isZero();J++)te=ie.andln(255),ie.iushrn(8),ue[J]=te;for(;J<ne;J++)ue[J]=0}else{for(J=0;J<ne-$;J++)ue[J]=0;for(J=0;!ie.isZero();J++)te=ie.andln(255),ie.iushrn(8),ue[ne-J-1]=te}return ue},Math.clz32?u.prototype._countBits=function(z){return 32-Math.clz32(z)}:u.prototype._countBits=function(z){var H=z,X=0;return H>=4096&&(X+=13,H>>>=13),H>=64&&(X+=7,H>>>=7),H>=8&&(X+=4,H>>>=4),H>=2&&(X+=2,H>>>=2),X+H},u.prototype._zeroBits=function(z){if(z===0)return 26;var H=z,X=0;return H&8191||(X+=13,H>>>=13),H&127||(X+=7,H>>>=7),H&15||(X+=4,H>>>=4),H&3||(X+=2,H>>>=2),H&1||X++,X},u.prototype.bitLength=function(){var z=this.words[this.length-1],H=this._countBits(z);return(this.length-1)*26+H};function x(B){for(var z=new Array(B.bitLength()),H=0;H<z.length;H++){var X=H/26|0,$=H%26;z[H]=(B.words[X]&1<<$)>>>$}return z}u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var z=0,H=0;H<this.length;H++){var X=this._zeroBits(this.words[H]);if(z+=X,X!==26)break}return z},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(z){return this.negative!==0?this.abs().inotn(z).iaddn(1):this.clone()},u.prototype.fromTwos=function(z){return this.testn(z-1)?this.notn(z).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return this.negative!==0},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(z){for(;this.length<z.length;)this.words[this.length++]=0;for(var H=0;H<z.length;H++)this.words[H]=this.words[H]|z.words[H];return this.strip()},u.prototype.ior=function(z){return i((this.negative|z.negative)===0),this.iuor(z)},u.prototype.or=function(z){return this.length>z.length?this.clone().ior(z):z.clone().ior(this)},u.prototype.uor=function(z){return this.length>z.length?this.clone().iuor(z):z.clone().iuor(this)},u.prototype.iuand=function(z){var H;this.length>z.length?H=z:H=this;for(var X=0;X<H.length;X++)this.words[X]=this.words[X]&z.words[X];return this.length=H.length,this.strip()},u.prototype.iand=function(z){return i((this.negative|z.negative)===0),this.iuand(z)},u.prototype.and=function(z){return this.length>z.length?this.clone().iand(z):z.clone().iand(this)},u.prototype.uand=function(z){return this.length>z.length?this.clone().iuand(z):z.clone().iuand(this)},u.prototype.iuxor=function(z){var H,X;this.length>z.length?(H=this,X=z):(H=z,X=this);for(var $=0;$<X.length;$++)this.words[$]=H.words[$]^X.words[$];if(this!==H)for(;$<H.length;$++)this.words[$]=H.words[$];return this.length=H.length,this.strip()},u.prototype.ixor=function(z){return i((this.negative|z.negative)===0),this.iuxor(z)},u.prototype.xor=function(z){return this.length>z.length?this.clone().ixor(z):z.clone().ixor(this)},u.prototype.uxor=function(z){return this.length>z.length?this.clone().iuxor(z):z.clone().iuxor(this)},u.prototype.inotn=function(z){i(typeof z=="number"&&z>=0);var H=Math.ceil(z/26)|0,X=z%26;this._expand(H),X>0&&H--;for(var $=0;$<H;$++)this.words[$]=~this.words[$]&67108863;return X>0&&(this.words[$]=~this.words[$]&67108863>>26-X),this.strip()},u.prototype.notn=function(z){return this.clone().inotn(z)},u.prototype.setn=function(z,H){i(typeof z=="number"&&z>=0);var X=z/26|0,$=z%26;return this._expand(X+1),H?this.words[X]=this.words[X]|1<<$:this.words[X]=this.words[X]&~(1<<$),this.strip()},u.prototype.iadd=function(z){var H;if(this.negative!==0&&z.negative===0)return this.negative=0,H=this.isub(z),this.negative^=1,this._normSign();if(this.negative===0&&z.negative!==0)return z.negative=0,H=this.isub(z),z.negative=1,H._normSign();var X,$;this.length>z.length?(X=this,$=z):(X=z,$=this);for(var ne=0,q=0;q<$.length;q++)H=(X.words[q]|0)+($.words[q]|0)+ne,this.words[q]=H&67108863,ne=H>>>26;for(;ne!==0&&q<X.length;q++)H=(X.words[q]|0)+ne,this.words[q]=H&67108863,ne=H>>>26;if(this.length=X.length,ne!==0)this.words[this.length]=ne,this.length++;else if(X!==this)for(;q<X.length;q++)this.words[q]=X.words[q];return this},u.prototype.add=function(z){var H;return z.negative!==0&&this.negative===0?(z.negative=0,H=this.sub(z),z.negative^=1,H):z.negative===0&&this.negative!==0?(this.negative=0,H=z.sub(this),this.negative=1,H):this.length>z.length?this.clone().iadd(z):z.clone().iadd(this)},u.prototype.isub=function(z){if(z.negative!==0){z.negative=0;var H=this.iadd(z);return z.negative=1,H._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(z),this.negative=1,this._normSign();var X=this.cmp(z);if(X===0)return this.negative=0,this.length=1,this.words[0]=0,this;var $,ne;X>0?($=this,ne=z):($=z,ne=this);for(var q=0,ue=0;ue<ne.length;ue++)H=($.words[ue]|0)-(ne.words[ue]|0)+q,q=H>>26,this.words[ue]=H&67108863;for(;q!==0&&ue<$.length;ue++)H=($.words[ue]|0)+q,q=H>>26,this.words[ue]=H&67108863;if(q===0&&ue<$.length&&$!==this)for(;ue<$.length;ue++)this.words[ue]=$.words[ue];return this.length=Math.max(this.length,ue),$!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(z){return this.clone().isub(z)};function A(B,z,H){H.negative=z.negative^B.negative;var X=B.length+z.length|0;H.length=X,X=X-1|0;var $=B.words[0]|0,ne=z.words[0]|0,q=$*ne,ue=q&67108863,te=q/67108864|0;H.words[0]=ue;for(var J=1;J<X;J++){for(var ie=te>>>26,K=te&67108863,ee=Math.min(J,z.length-1),le=Math.max(0,J-B.length+1);le<=ee;le++){var j=J-le|0;$=B.words[j]|0,ne=z.words[le]|0,q=$*ne+K,ie+=q/67108864|0,K=q&67108863}H.words[J]=K|0,te=ie|0}return te!==0?H.words[J]=te|0:H.length--,H.strip()}var P=function(z,H,X){var $=z.words,ne=H.words,q=X.words,ue=0,te,J,ie,K=$[0]|0,ee=K&8191,le=K>>>13,j=$[1]|0,Z=j&8191,fe=j>>>13,re=$[2]|0,ce=re&8191,xe=re>>>13,Te=$[3]|0,we=Te&8191,_e=Te>>>13,ke=$[4]|0,Ne=ke&8191,Ee=ke>>>13,ze=$[5]|0,Ce=ze&8191,Oe=ze>>>13,Le=$[6]|0,Ge=Le&8191,rt=Le>>>13,ot=$[7]|0,$e=ot&8191,qe=ot>>>13,ht=$[8]|0,vt=ht&8191,pt=ht>>>13,wt=$[9]|0,Et=wt&8191,nt=wt>>>13,Fe=ne[0]|0,We=Fe&8191,Ze=Fe>>>13,Ye=ne[1]|0,Ie=Ye&8191,De=Ye>>>13,je=ne[2]|0,Re=je&8191,pe=je>>>13,be=ne[3]|0,Ue=be&8191,et=be>>>13,st=ne[4]|0,lt=st&8191,Gt=st>>>13,Zt=ne[5]|0,Tt=Zt&8191,It=Zt>>>13,Xt=ne[6]|0,gr=Xt&8191,gt=Xt>>>13,jt=ne[7]|0,Qt=jt&8191,mr=jt>>>13,or=ne[8]|0,mt=or&8191,ut=or>>>13,bt=ne[9]|0,St=bt&8191,Pt=bt>>>13;X.negative=z.negative^H.negative,X.length=19,te=Math.imul(ee,We),J=Math.imul(ee,Ze),J=J+Math.imul(le,We)|0,ie=Math.imul(le,Ze);var Ht=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,te=Math.imul(Z,We),J=Math.imul(Z,Ze),J=J+Math.imul(fe,We)|0,ie=Math.imul(fe,Ze),te=te+Math.imul(ee,Ie)|0,J=J+Math.imul(ee,De)|0,J=J+Math.imul(le,Ie)|0,ie=ie+Math.imul(le,De)|0;var Bt=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,te=Math.imul(ce,We),J=Math.imul(ce,Ze),J=J+Math.imul(xe,We)|0,ie=Math.imul(xe,Ze),te=te+Math.imul(Z,Ie)|0,J=J+Math.imul(Z,De)|0,J=J+Math.imul(fe,Ie)|0,ie=ie+Math.imul(fe,De)|0,te=te+Math.imul(ee,Re)|0,J=J+Math.imul(ee,pe)|0,J=J+Math.imul(le,Re)|0,ie=ie+Math.imul(le,pe)|0;var Nt=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,te=Math.imul(we,We),J=Math.imul(we,Ze),J=J+Math.imul(_e,We)|0,ie=Math.imul(_e,Ze),te=te+Math.imul(ce,Ie)|0,J=J+Math.imul(ce,De)|0,J=J+Math.imul(xe,Ie)|0,ie=ie+Math.imul(xe,De)|0,te=te+Math.imul(Z,Re)|0,J=J+Math.imul(Z,pe)|0,J=J+Math.imul(fe,Re)|0,ie=ie+Math.imul(fe,pe)|0,te=te+Math.imul(ee,Ue)|0,J=J+Math.imul(ee,et)|0,J=J+Math.imul(le,Ue)|0,ie=ie+Math.imul(le,et)|0;var Kt=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,te=Math.imul(Ne,We),J=Math.imul(Ne,Ze),J=J+Math.imul(Ee,We)|0,ie=Math.imul(Ee,Ze),te=te+Math.imul(we,Ie)|0,J=J+Math.imul(we,De)|0,J=J+Math.imul(_e,Ie)|0,ie=ie+Math.imul(_e,De)|0,te=te+Math.imul(ce,Re)|0,J=J+Math.imul(ce,pe)|0,J=J+Math.imul(xe,Re)|0,ie=ie+Math.imul(xe,pe)|0,te=te+Math.imul(Z,Ue)|0,J=J+Math.imul(Z,et)|0,J=J+Math.imul(fe,Ue)|0,ie=ie+Math.imul(fe,et)|0,te=te+Math.imul(ee,lt)|0,J=J+Math.imul(ee,Gt)|0,J=J+Math.imul(le,lt)|0,ie=ie+Math.imul(le,Gt)|0;var fr=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(fr>>>26)|0,fr&=67108863,te=Math.imul(Ce,We),J=Math.imul(Ce,Ze),J=J+Math.imul(Oe,We)|0,ie=Math.imul(Oe,Ze),te=te+Math.imul(Ne,Ie)|0,J=J+Math.imul(Ne,De)|0,J=J+Math.imul(Ee,Ie)|0,ie=ie+Math.imul(Ee,De)|0,te=te+Math.imul(we,Re)|0,J=J+Math.imul(we,pe)|0,J=J+Math.imul(_e,Re)|0,ie=ie+Math.imul(_e,pe)|0,te=te+Math.imul(ce,Ue)|0,J=J+Math.imul(ce,et)|0,J=J+Math.imul(xe,Ue)|0,ie=ie+Math.imul(xe,et)|0,te=te+Math.imul(Z,lt)|0,J=J+Math.imul(Z,Gt)|0,J=J+Math.imul(fe,lt)|0,ie=ie+Math.imul(fe,Gt)|0,te=te+Math.imul(ee,Tt)|0,J=J+Math.imul(ee,It)|0,J=J+Math.imul(le,Tt)|0,ie=ie+Math.imul(le,It)|0;var cr=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(cr>>>26)|0,cr&=67108863,te=Math.imul(Ge,We),J=Math.imul(Ge,Ze),J=J+Math.imul(rt,We)|0,ie=Math.imul(rt,Ze),te=te+Math.imul(Ce,Ie)|0,J=J+Math.imul(Ce,De)|0,J=J+Math.imul(Oe,Ie)|0,ie=ie+Math.imul(Oe,De)|0,te=te+Math.imul(Ne,Re)|0,J=J+Math.imul(Ne,pe)|0,J=J+Math.imul(Ee,Re)|0,ie=ie+Math.imul(Ee,pe)|0,te=te+Math.imul(we,Ue)|0,J=J+Math.imul(we,et)|0,J=J+Math.imul(_e,Ue)|0,ie=ie+Math.imul(_e,et)|0,te=te+Math.imul(ce,lt)|0,J=J+Math.imul(ce,Gt)|0,J=J+Math.imul(xe,lt)|0,ie=ie+Math.imul(xe,Gt)|0,te=te+Math.imul(Z,Tt)|0,J=J+Math.imul(Z,It)|0,J=J+Math.imul(fe,Tt)|0,ie=ie+Math.imul(fe,It)|0,te=te+Math.imul(ee,gr)|0,J=J+Math.imul(ee,gt)|0,J=J+Math.imul(le,gr)|0,ie=ie+Math.imul(le,gt)|0;var dr=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(dr>>>26)|0,dr&=67108863,te=Math.imul($e,We),J=Math.imul($e,Ze),J=J+Math.imul(qe,We)|0,ie=Math.imul(qe,Ze),te=te+Math.imul(Ge,Ie)|0,J=J+Math.imul(Ge,De)|0,J=J+Math.imul(rt,Ie)|0,ie=ie+Math.imul(rt,De)|0,te=te+Math.imul(Ce,Re)|0,J=J+Math.imul(Ce,pe)|0,J=J+Math.imul(Oe,Re)|0,ie=ie+Math.imul(Oe,pe)|0,te=te+Math.imul(Ne,Ue)|0,J=J+Math.imul(Ne,et)|0,J=J+Math.imul(Ee,Ue)|0,ie=ie+Math.imul(Ee,et)|0,te=te+Math.imul(we,lt)|0,J=J+Math.imul(we,Gt)|0,J=J+Math.imul(_e,lt)|0,ie=ie+Math.imul(_e,Gt)|0,te=te+Math.imul(ce,Tt)|0,J=J+Math.imul(ce,It)|0,J=J+Math.imul(xe,Tt)|0,ie=ie+Math.imul(xe,It)|0,te=te+Math.imul(Z,gr)|0,J=J+Math.imul(Z,gt)|0,J=J+Math.imul(fe,gr)|0,ie=ie+Math.imul(fe,gt)|0,te=te+Math.imul(ee,Qt)|0,J=J+Math.imul(ee,mr)|0,J=J+Math.imul(le,Qt)|0,ie=ie+Math.imul(le,mr)|0;var Xe=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,te=Math.imul(vt,We),J=Math.imul(vt,Ze),J=J+Math.imul(pt,We)|0,ie=Math.imul(pt,Ze),te=te+Math.imul($e,Ie)|0,J=J+Math.imul($e,De)|0,J=J+Math.imul(qe,Ie)|0,ie=ie+Math.imul(qe,De)|0,te=te+Math.imul(Ge,Re)|0,J=J+Math.imul(Ge,pe)|0,J=J+Math.imul(rt,Re)|0,ie=ie+Math.imul(rt,pe)|0,te=te+Math.imul(Ce,Ue)|0,J=J+Math.imul(Ce,et)|0,J=J+Math.imul(Oe,Ue)|0,ie=ie+Math.imul(Oe,et)|0,te=te+Math.imul(Ne,lt)|0,J=J+Math.imul(Ne,Gt)|0,J=J+Math.imul(Ee,lt)|0,ie=ie+Math.imul(Ee,Gt)|0,te=te+Math.imul(we,Tt)|0,J=J+Math.imul(we,It)|0,J=J+Math.imul(_e,Tt)|0,ie=ie+Math.imul(_e,It)|0,te=te+Math.imul(ce,gr)|0,J=J+Math.imul(ce,gt)|0,J=J+Math.imul(xe,gr)|0,ie=ie+Math.imul(xe,gt)|0,te=te+Math.imul(Z,Qt)|0,J=J+Math.imul(Z,mr)|0,J=J+Math.imul(fe,Qt)|0,ie=ie+Math.imul(fe,mr)|0,te=te+Math.imul(ee,mt)|0,J=J+Math.imul(ee,ut)|0,J=J+Math.imul(le,mt)|0,ie=ie+Math.imul(le,ut)|0;var He=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(He>>>26)|0,He&=67108863,te=Math.imul(Et,We),J=Math.imul(Et,Ze),J=J+Math.imul(nt,We)|0,ie=Math.imul(nt,Ze),te=te+Math.imul(vt,Ie)|0,J=J+Math.imul(vt,De)|0,J=J+Math.imul(pt,Ie)|0,ie=ie+Math.imul(pt,De)|0,te=te+Math.imul($e,Re)|0,J=J+Math.imul($e,pe)|0,J=J+Math.imul(qe,Re)|0,ie=ie+Math.imul(qe,pe)|0,te=te+Math.imul(Ge,Ue)|0,J=J+Math.imul(Ge,et)|0,J=J+Math.imul(rt,Ue)|0,ie=ie+Math.imul(rt,et)|0,te=te+Math.imul(Ce,lt)|0,J=J+Math.imul(Ce,Gt)|0,J=J+Math.imul(Oe,lt)|0,ie=ie+Math.imul(Oe,Gt)|0,te=te+Math.imul(Ne,Tt)|0,J=J+Math.imul(Ne,It)|0,J=J+Math.imul(Ee,Tt)|0,ie=ie+Math.imul(Ee,It)|0,te=te+Math.imul(we,gr)|0,J=J+Math.imul(we,gt)|0,J=J+Math.imul(_e,gr)|0,ie=ie+Math.imul(_e,gt)|0,te=te+Math.imul(ce,Qt)|0,J=J+Math.imul(ce,mr)|0,J=J+Math.imul(xe,Qt)|0,ie=ie+Math.imul(xe,mr)|0,te=te+Math.imul(Z,mt)|0,J=J+Math.imul(Z,ut)|0,J=J+Math.imul(fe,mt)|0,ie=ie+Math.imul(fe,ut)|0,te=te+Math.imul(ee,St)|0,J=J+Math.imul(ee,Pt)|0,J=J+Math.imul(le,St)|0,ie=ie+Math.imul(le,Pt)|0;var zt=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(zt>>>26)|0,zt&=67108863,te=Math.imul(Et,Ie),J=Math.imul(Et,De),J=J+Math.imul(nt,Ie)|0,ie=Math.imul(nt,De),te=te+Math.imul(vt,Re)|0,J=J+Math.imul(vt,pe)|0,J=J+Math.imul(pt,Re)|0,ie=ie+Math.imul(pt,pe)|0,te=te+Math.imul($e,Ue)|0,J=J+Math.imul($e,et)|0,J=J+Math.imul(qe,Ue)|0,ie=ie+Math.imul(qe,et)|0,te=te+Math.imul(Ge,lt)|0,J=J+Math.imul(Ge,Gt)|0,J=J+Math.imul(rt,lt)|0,ie=ie+Math.imul(rt,Gt)|0,te=te+Math.imul(Ce,Tt)|0,J=J+Math.imul(Ce,It)|0,J=J+Math.imul(Oe,Tt)|0,ie=ie+Math.imul(Oe,It)|0,te=te+Math.imul(Ne,gr)|0,J=J+Math.imul(Ne,gt)|0,J=J+Math.imul(Ee,gr)|0,ie=ie+Math.imul(Ee,gt)|0,te=te+Math.imul(we,Qt)|0,J=J+Math.imul(we,mr)|0,J=J+Math.imul(_e,Qt)|0,ie=ie+Math.imul(_e,mr)|0,te=te+Math.imul(ce,mt)|0,J=J+Math.imul(ce,ut)|0,J=J+Math.imul(xe,mt)|0,ie=ie+Math.imul(xe,ut)|0,te=te+Math.imul(Z,St)|0,J=J+Math.imul(Z,Pt)|0,J=J+Math.imul(fe,St)|0,ie=ie+Math.imul(fe,Pt)|0;var Rt=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,te=Math.imul(Et,Re),J=Math.imul(Et,pe),J=J+Math.imul(nt,Re)|0,ie=Math.imul(nt,pe),te=te+Math.imul(vt,Ue)|0,J=J+Math.imul(vt,et)|0,J=J+Math.imul(pt,Ue)|0,ie=ie+Math.imul(pt,et)|0,te=te+Math.imul($e,lt)|0,J=J+Math.imul($e,Gt)|0,J=J+Math.imul(qe,lt)|0,ie=ie+Math.imul(qe,Gt)|0,te=te+Math.imul(Ge,Tt)|0,J=J+Math.imul(Ge,It)|0,J=J+Math.imul(rt,Tt)|0,ie=ie+Math.imul(rt,It)|0,te=te+Math.imul(Ce,gr)|0,J=J+Math.imul(Ce,gt)|0,J=J+Math.imul(Oe,gr)|0,ie=ie+Math.imul(Oe,gt)|0,te=te+Math.imul(Ne,Qt)|0,J=J+Math.imul(Ne,mr)|0,J=J+Math.imul(Ee,Qt)|0,ie=ie+Math.imul(Ee,mr)|0,te=te+Math.imul(we,mt)|0,J=J+Math.imul(we,ut)|0,J=J+Math.imul(_e,mt)|0,ie=ie+Math.imul(_e,ut)|0,te=te+Math.imul(ce,St)|0,J=J+Math.imul(ce,Pt)|0,J=J+Math.imul(xe,St)|0,ie=ie+Math.imul(xe,Pt)|0;var Jt=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,te=Math.imul(Et,Ue),J=Math.imul(Et,et),J=J+Math.imul(nt,Ue)|0,ie=Math.imul(nt,et),te=te+Math.imul(vt,lt)|0,J=J+Math.imul(vt,Gt)|0,J=J+Math.imul(pt,lt)|0,ie=ie+Math.imul(pt,Gt)|0,te=te+Math.imul($e,Tt)|0,J=J+Math.imul($e,It)|0,J=J+Math.imul(qe,Tt)|0,ie=ie+Math.imul(qe,It)|0,te=te+Math.imul(Ge,gr)|0,J=J+Math.imul(Ge,gt)|0,J=J+Math.imul(rt,gr)|0,ie=ie+Math.imul(rt,gt)|0,te=te+Math.imul(Ce,Qt)|0,J=J+Math.imul(Ce,mr)|0,J=J+Math.imul(Oe,Qt)|0,ie=ie+Math.imul(Oe,mr)|0,te=te+Math.imul(Ne,mt)|0,J=J+Math.imul(Ne,ut)|0,J=J+Math.imul(Ee,mt)|0,ie=ie+Math.imul(Ee,ut)|0,te=te+Math.imul(we,St)|0,J=J+Math.imul(we,Pt)|0,J=J+Math.imul(_e,St)|0,ie=ie+Math.imul(_e,Pt)|0;var sr=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(sr>>>26)|0,sr&=67108863,te=Math.imul(Et,lt),J=Math.imul(Et,Gt),J=J+Math.imul(nt,lt)|0,ie=Math.imul(nt,Gt),te=te+Math.imul(vt,Tt)|0,J=J+Math.imul(vt,It)|0,J=J+Math.imul(pt,Tt)|0,ie=ie+Math.imul(pt,It)|0,te=te+Math.imul($e,gr)|0,J=J+Math.imul($e,gt)|0,J=J+Math.imul(qe,gr)|0,ie=ie+Math.imul(qe,gt)|0,te=te+Math.imul(Ge,Qt)|0,J=J+Math.imul(Ge,mr)|0,J=J+Math.imul(rt,Qt)|0,ie=ie+Math.imul(rt,mr)|0,te=te+Math.imul(Ce,mt)|0,J=J+Math.imul(Ce,ut)|0,J=J+Math.imul(Oe,mt)|0,ie=ie+Math.imul(Oe,ut)|0,te=te+Math.imul(Ne,St)|0,J=J+Math.imul(Ne,Pt)|0,J=J+Math.imul(Ee,St)|0,ie=ie+Math.imul(Ee,Pt)|0;var ur=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(ur>>>26)|0,ur&=67108863,te=Math.imul(Et,Tt),J=Math.imul(Et,It),J=J+Math.imul(nt,Tt)|0,ie=Math.imul(nt,It),te=te+Math.imul(vt,gr)|0,J=J+Math.imul(vt,gt)|0,J=J+Math.imul(pt,gr)|0,ie=ie+Math.imul(pt,gt)|0,te=te+Math.imul($e,Qt)|0,J=J+Math.imul($e,mr)|0,J=J+Math.imul(qe,Qt)|0,ie=ie+Math.imul(qe,mr)|0,te=te+Math.imul(Ge,mt)|0,J=J+Math.imul(Ge,ut)|0,J=J+Math.imul(rt,mt)|0,ie=ie+Math.imul(rt,ut)|0,te=te+Math.imul(Ce,St)|0,J=J+Math.imul(Ce,Pt)|0,J=J+Math.imul(Oe,St)|0,ie=ie+Math.imul(Oe,Pt)|0;var er=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(er>>>26)|0,er&=67108863,te=Math.imul(Et,gr),J=Math.imul(Et,gt),J=J+Math.imul(nt,gr)|0,ie=Math.imul(nt,gt),te=te+Math.imul(vt,Qt)|0,J=J+Math.imul(vt,mr)|0,J=J+Math.imul(pt,Qt)|0,ie=ie+Math.imul(pt,mr)|0,te=te+Math.imul($e,mt)|0,J=J+Math.imul($e,ut)|0,J=J+Math.imul(qe,mt)|0,ie=ie+Math.imul(qe,ut)|0,te=te+Math.imul(Ge,St)|0,J=J+Math.imul(Ge,Pt)|0,J=J+Math.imul(rt,St)|0,ie=ie+Math.imul(rt,Pt)|0;var Ft=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,te=Math.imul(Et,Qt),J=Math.imul(Et,mr),J=J+Math.imul(nt,Qt)|0,ie=Math.imul(nt,mr),te=te+Math.imul(vt,mt)|0,J=J+Math.imul(vt,ut)|0,J=J+Math.imul(pt,mt)|0,ie=ie+Math.imul(pt,ut)|0,te=te+Math.imul($e,St)|0,J=J+Math.imul($e,Pt)|0,J=J+Math.imul(qe,St)|0,ie=ie+Math.imul(qe,Pt)|0;var ir=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(ir>>>26)|0,ir&=67108863,te=Math.imul(Et,mt),J=Math.imul(Et,ut),J=J+Math.imul(nt,mt)|0,ie=Math.imul(nt,ut),te=te+Math.imul(vt,St)|0,J=J+Math.imul(vt,Pt)|0,J=J+Math.imul(pt,St)|0,ie=ie+Math.imul(pt,Pt)|0;var hr=(ue+te|0)+((J&8191)<<13)|0;ue=(ie+(J>>>13)|0)+(hr>>>26)|0,hr&=67108863,te=Math.imul(Et,St),J=Math.imul(Et,Pt),J=J+Math.imul(nt,St)|0,ie=Math.imul(nt,Pt);var xr=(ue+te|0)+((J&8191)<<13)|0;return ue=(ie+(J>>>13)|0)+(xr>>>26)|0,xr&=67108863,q[0]=Ht,q[1]=Bt,q[2]=Nt,q[3]=Kt,q[4]=fr,q[5]=cr,q[6]=dr,q[7]=Xe,q[8]=He,q[9]=zt,q[10]=Rt,q[11]=Jt,q[12]=sr,q[13]=ur,q[14]=er,q[15]=Ft,q[16]=ir,q[17]=hr,q[18]=xr,ue!==0&&(q[19]=ue,X.length++),X};Math.imul||(P=A);function y(B,z,H){H.negative=z.negative^B.negative,H.length=B.length+z.length;for(var X=0,$=0,ne=0;ne<H.length-1;ne++){var q=$;$=0;for(var ue=X&67108863,te=Math.min(ne,z.length-1),J=Math.max(0,ne-B.length+1);J<=te;J++){var ie=ne-J,K=B.words[ie]|0,ee=z.words[J]|0,le=K*ee,j=le&67108863;q=q+(le/67108864|0)|0,j=j+ue|0,ue=j&67108863,q=q+(j>>>26)|0,$+=q>>>26,q&=67108863}H.words[ne]=ue,X=q,q=$}return X!==0?H.words[ne]=X:H.length--,H.strip()}function C(B,z,H){var X=new M;return X.mulp(B,z,H)}u.prototype.mulTo=function(z,H){var X,$=this.length+z.length;return this.length===10&&z.length===10?X=P(this,z,H):$<63?X=A(this,z,H):$<1024?X=y(this,z,H):X=C(this,z,H),X};function M(B,z){this.x=B,this.y=z}M.prototype.makeRBT=function(z){for(var H=new Array(z),X=u.prototype._countBits(z)-1,$=0;$<z;$++)H[$]=this.revBin($,X,z);return H},M.prototype.revBin=function(z,H,X){if(z===0||z===X-1)return z;for(var $=0,ne=0;ne<H;ne++)$|=(z&1)<<H-ne-1,z>>=1;return $},M.prototype.permute=function(z,H,X,$,ne,q){for(var ue=0;ue<q;ue++)$[ue]=H[z[ue]],ne[ue]=X[z[ue]]},M.prototype.transform=function(z,H,X,$,ne,q){this.permute(q,z,H,X,$,ne);for(var ue=1;ue<ne;ue<<=1)for(var te=ue<<1,J=Math.cos(2*Math.PI/te),ie=Math.sin(2*Math.PI/te),K=0;K<ne;K+=te)for(var ee=J,le=ie,j=0;j<ue;j++){var Z=X[K+j],fe=$[K+j],re=X[K+j+ue],ce=$[K+j+ue],xe=ee*re-le*ce;ce=ee*ce+le*re,re=xe,X[K+j]=Z+re,$[K+j]=fe+ce,X[K+j+ue]=Z-re,$[K+j+ue]=fe-ce,j!==te&&(xe=J*ee-ie*le,le=J*le+ie*ee,ee=xe)}},M.prototype.guessLen13b=function(z,H){var X=Math.max(H,z)|1,$=X&1,ne=0;for(X=X/2|0;X;X=X>>>1)ne++;return 1<<ne+1+$},M.prototype.conjugate=function(z,H,X){if(!(X<=1))for(var $=0;$<X/2;$++){var ne=z[$];z[$]=z[X-$-1],z[X-$-1]=ne,ne=H[$],H[$]=-H[X-$-1],H[X-$-1]=-ne}},M.prototype.normalize13b=function(z,H){for(var X=0,$=0;$<H/2;$++){var ne=Math.round(z[2*$+1]/H)*8192+Math.round(z[2*$]/H)+X;z[$]=ne&67108863,ne<67108864?X=0:X=ne/67108864|0}return z},M.prototype.convert13b=function(z,H,X,$){for(var ne=0,q=0;q<H;q++)ne=ne+(z[q]|0),X[2*q]=ne&8191,ne=ne>>>13,X[2*q+1]=ne&8191,ne=ne>>>13;for(q=2*H;q<$;++q)X[q]=0;i(ne===0),i((ne&-8192)===0)},M.prototype.stub=function(z){for(var H=new Array(z),X=0;X<z;X++)H[X]=0;return H},M.prototype.mulp=function(z,H,X){var $=2*this.guessLen13b(z.length,H.length),ne=this.makeRBT($),q=this.stub($),ue=new Array($),te=new Array($),J=new Array($),ie=new Array($),K=new Array($),ee=new Array($),le=X.words;le.length=$,this.convert13b(z.words,z.length,ue,$),this.convert13b(H.words,H.length,ie,$),this.transform(ue,q,te,J,$,ne),this.transform(ie,q,K,ee,$,ne);for(var j=0;j<$;j++){var Z=te[j]*K[j]-J[j]*ee[j];J[j]=te[j]*ee[j]+J[j]*K[j],te[j]=Z}return this.conjugate(te,J,$),this.transform(te,J,le,q,$,ne),this.conjugate(le,q,$),this.normalize13b(le,$),X.negative=z.negative^H.negative,X.length=z.length+H.length,X.strip()},u.prototype.mul=function(z){var H=new u(null);return H.words=new Array(this.length+z.length),this.mulTo(z,H)},u.prototype.mulf=function(z){var H=new u(null);return H.words=new Array(this.length+z.length),C(this,z,H)},u.prototype.imul=function(z){return this.clone().mulTo(z,this)},u.prototype.imuln=function(z){i(typeof z=="number"),i(z<67108864);for(var H=0,X=0;X<this.length;X++){var $=(this.words[X]|0)*z,ne=($&67108863)+(H&67108863);H>>=26,H+=$/67108864|0,H+=ne>>>26,this.words[X]=ne&67108863}return H!==0&&(this.words[X]=H,this.length++),this},u.prototype.muln=function(z){return this.clone().imuln(z)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(z){var H=x(z);if(H.length===0)return new u(1);for(var X=this,$=0;$<H.length&&H[$]===0;$++,X=X.sqr());if(++$<H.length)for(var ne=X.sqr();$<H.length;$++,ne=ne.sqr())H[$]!==0&&(X=X.mul(ne));return X},u.prototype.iushln=function(z){i(typeof z=="number"&&z>=0);var H=z%26,X=(z-H)/26,$=67108863>>>26-H<<26-H,ne;if(H!==0){var q=0;for(ne=0;ne<this.length;ne++){var ue=this.words[ne]&$,te=(this.words[ne]|0)-ue<<H;this.words[ne]=te|q,q=ue>>>26-H}q&&(this.words[ne]=q,this.length++)}if(X!==0){for(ne=this.length-1;ne>=0;ne--)this.words[ne+X]=this.words[ne];for(ne=0;ne<X;ne++)this.words[ne]=0;this.length+=X}return this.strip()},u.prototype.ishln=function(z){return i(this.negative===0),this.iushln(z)},u.prototype.iushrn=function(z,H,X){i(typeof z=="number"&&z>=0);var $;H?$=(H-H%26)/26:$=0;var ne=z%26,q=Math.min((z-ne)/26,this.length),ue=67108863^67108863>>>ne<<ne,te=X;if($-=q,$=Math.max(0,$),te){for(var J=0;J<q;J++)te.words[J]=this.words[J];te.length=q}if(q!==0)if(this.length>q)for(this.length-=q,J=0;J<this.length;J++)this.words[J]=this.words[J+q];else this.words[0]=0,this.length=1;var ie=0;for(J=this.length-1;J>=0&&(ie!==0||J>=$);J--){var K=this.words[J]|0;this.words[J]=ie<<26-ne|K>>>ne,ie=K&ue}return te&&ie!==0&&(te.words[te.length++]=ie),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(z,H,X){return i(this.negative===0),this.iushrn(z,H,X)},u.prototype.shln=function(z){return this.clone().ishln(z)},u.prototype.ushln=function(z){return this.clone().iushln(z)},u.prototype.shrn=function(z){return this.clone().ishrn(z)},u.prototype.ushrn=function(z){return this.clone().iushrn(z)},u.prototype.testn=function(z){i(typeof z=="number"&&z>=0);var H=z%26,X=(z-H)/26,$=1<<H;if(this.length<=X)return!1;var ne=this.words[X];return!!(ne&$)},u.prototype.imaskn=function(z){i(typeof z=="number"&&z>=0);var H=z%26,X=(z-H)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=X)return this;if(H!==0&&X++,this.length=Math.min(X,this.length),H!==0){var $=67108863^67108863>>>H<<H;this.words[this.length-1]&=$}return this.strip()},u.prototype.maskn=function(z){return this.clone().imaskn(z)},u.prototype.iaddn=function(z){return i(typeof z=="number"),i(z<67108864),z<0?this.isubn(-z):this.negative!==0?this.length===1&&(this.words[0]|0)<z?(this.words[0]=z-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(z),this.negative=1,this):this._iaddn(z)},u.prototype._iaddn=function(z){this.words[0]+=z;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},u.prototype.isubn=function(z){if(i(typeof z=="number"),i(z<67108864),z<0)return this.iaddn(-z);if(this.negative!==0)return this.negative=0,this.iaddn(z),this.negative=1,this;if(this.words[0]-=z,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this.strip()},u.prototype.addn=function(z){return this.clone().iaddn(z)},u.prototype.subn=function(z){return this.clone().isubn(z)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(z,H,X){var $=z.length+X,ne;this._expand($);var q,ue=0;for(ne=0;ne<z.length;ne++){q=(this.words[ne+X]|0)+ue;var te=(z.words[ne]|0)*H;q-=te&67108863,ue=(q>>26)-(te/67108864|0),this.words[ne+X]=q&67108863}for(;ne<this.length-X;ne++)q=(this.words[ne+X]|0)+ue,ue=q>>26,this.words[ne+X]=q&67108863;if(ue===0)return this.strip();for(i(ue===-1),ue=0,ne=0;ne<this.length;ne++)q=-(this.words[ne]|0)+ue,ue=q>>26,this.words[ne]=q&67108863;return this.negative=1,this.strip()},u.prototype._wordDiv=function(z,H){var X=this.length-z.length,$=this.clone(),ne=z,q=ne.words[ne.length-1]|0,ue=this._countBits(q);X=26-ue,X!==0&&(ne=ne.ushln(X),$.iushln(X),q=ne.words[ne.length-1]|0);var te=$.length-ne.length,J;if(H!=="mod"){J=new u(null),J.length=te+1,J.words=new Array(J.length);for(var ie=0;ie<J.length;ie++)J.words[ie]=0}var K=$.clone()._ishlnsubmul(ne,1,te);K.negative===0&&($=K,J&&(J.words[te]=1));for(var ee=te-1;ee>=0;ee--){var le=($.words[ne.length+ee]|0)*67108864+($.words[ne.length+ee-1]|0);for(le=Math.min(le/q|0,67108863),$._ishlnsubmul(ne,le,ee);$.negative!==0;)le--,$.negative=0,$._ishlnsubmul(ne,1,ee),$.isZero()||($.negative^=1);J&&(J.words[ee]=le)}return J&&J.strip(),$.strip(),H!=="div"&&X!==0&&$.iushrn(X),{div:J||null,mod:$}},u.prototype.divmod=function(z,H,X){if(i(!z.isZero()),this.isZero())return{div:new u(0),mod:new u(0)};var $,ne,q;return this.negative!==0&&z.negative===0?(q=this.neg().divmod(z,H),H!=="mod"&&($=q.div.neg()),H!=="div"&&(ne=q.mod.neg(),X&&ne.negative!==0&&ne.iadd(z)),{div:$,mod:ne}):this.negative===0&&z.negative!==0?(q=this.divmod(z.neg(),H),H!=="mod"&&($=q.div.neg()),{div:$,mod:q.mod}):this.negative&z.negative?(q=this.neg().divmod(z.neg(),H),H!=="div"&&(ne=q.mod.neg(),X&&ne.negative!==0&&ne.isub(z)),{div:q.div,mod:ne}):z.length>this.length||this.cmp(z)<0?{div:new u(0),mod:this}:z.length===1?H==="div"?{div:this.divn(z.words[0]),mod:null}:H==="mod"?{div:null,mod:new u(this.modn(z.words[0]))}:{div:this.divn(z.words[0]),mod:new u(this.modn(z.words[0]))}:this._wordDiv(z,H)},u.prototype.div=function(z){return this.divmod(z,"div",!1).div},u.prototype.mod=function(z){return this.divmod(z,"mod",!1).mod},u.prototype.umod=function(z){return this.divmod(z,"mod",!0).mod},u.prototype.divRound=function(z){var H=this.divmod(z);if(H.mod.isZero())return H.div;var X=H.div.negative!==0?H.mod.isub(z):H.mod,$=z.ushrn(1),ne=z.andln(1),q=X.cmp($);return q<0||ne===1&&q===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},u.prototype.modn=function(z){i(z<=67108863);for(var H=(1<<26)%z,X=0,$=this.length-1;$>=0;$--)X=(H*X+(this.words[$]|0))%z;return X},u.prototype.idivn=function(z){i(z<=67108863);for(var H=0,X=this.length-1;X>=0;X--){var $=(this.words[X]|0)+H*67108864;this.words[X]=$/z|0,H=$%z}return this.strip()},u.prototype.divn=function(z){return this.clone().idivn(z)},u.prototype.egcd=function(z){i(z.negative===0),i(!z.isZero());var H=this,X=z.clone();H.negative!==0?H=H.umod(z):H=H.clone();for(var $=new u(1),ne=new u(0),q=new u(0),ue=new u(1),te=0;H.isEven()&&X.isEven();)H.iushrn(1),X.iushrn(1),++te;for(var J=X.clone(),ie=H.clone();!H.isZero();){for(var K=0,ee=1;!(H.words[0]&ee)&&K<26;++K,ee<<=1);if(K>0)for(H.iushrn(K);K-- >0;)($.isOdd()||ne.isOdd())&&($.iadd(J),ne.isub(ie)),$.iushrn(1),ne.iushrn(1);for(var le=0,j=1;!(X.words[0]&j)&&le<26;++le,j<<=1);if(le>0)for(X.iushrn(le);le-- >0;)(q.isOdd()||ue.isOdd())&&(q.iadd(J),ue.isub(ie)),q.iushrn(1),ue.iushrn(1);H.cmp(X)>=0?(H.isub(X),$.isub(q),ne.isub(ue)):(X.isub(H),q.isub($),ue.isub(ne))}return{a:q,b:ue,gcd:X.iushln(te)}},u.prototype._invmp=function(z){i(z.negative===0),i(!z.isZero());var H=this,X=z.clone();H.negative!==0?H=H.umod(z):H=H.clone();for(var $=new u(1),ne=new u(0),q=X.clone();H.cmpn(1)>0&&X.cmpn(1)>0;){for(var ue=0,te=1;!(H.words[0]&te)&&ue<26;++ue,te<<=1);if(ue>0)for(H.iushrn(ue);ue-- >0;)$.isOdd()&&$.iadd(q),$.iushrn(1);for(var J=0,ie=1;!(X.words[0]&ie)&&J<26;++J,ie<<=1);if(J>0)for(X.iushrn(J);J-- >0;)ne.isOdd()&&ne.iadd(q),ne.iushrn(1);H.cmp(X)>=0?(H.isub(X),$.isub(ne)):(X.isub(H),ne.isub($))}var K;return H.cmpn(1)===0?K=$:K=ne,K.cmpn(0)<0&&K.iadd(z),K},u.prototype.gcd=function(z){if(this.isZero())return z.abs();if(z.isZero())return this.abs();var H=this.clone(),X=z.clone();H.negative=0,X.negative=0;for(var $=0;H.isEven()&&X.isEven();$++)H.iushrn(1),X.iushrn(1);do{for(;H.isEven();)H.iushrn(1);for(;X.isEven();)X.iushrn(1);var ne=H.cmp(X);if(ne<0){var q=H;H=X,X=q}else if(ne===0||X.cmpn(1)===0)break;H.isub(X)}while(!0);return X.iushln($)},u.prototype.invm=function(z){return this.egcd(z).a.umod(z)},u.prototype.isEven=function(){return(this.words[0]&1)===0},u.prototype.isOdd=function(){return(this.words[0]&1)===1},u.prototype.andln=function(z){return this.words[0]&z},u.prototype.bincn=function(z){i(typeof z=="number");var H=z%26,X=(z-H)/26,$=1<<H;if(this.length<=X)return this._expand(X+1),this.words[X]|=$,this;for(var ne=$,q=X;ne!==0&&q<this.length;q++){var ue=this.words[q]|0;ue+=ne,ne=ue>>>26,ue&=67108863,this.words[q]=ue}return ne!==0&&(this.words[q]=ne,this.length++),this},u.prototype.isZero=function(){return this.length===1&&this.words[0]===0},u.prototype.cmpn=function(z){var H=z<0;if(this.negative!==0&&!H)return-1;if(this.negative===0&&H)return 1;this.strip();var X;if(this.length>1)X=1;else{H&&(z=-z),i(z<=67108863,"Number is too big");var $=this.words[0]|0;X=$===z?0:$<z?-1:1}return this.negative!==0?-X|0:X},u.prototype.cmp=function(z){if(this.negative!==0&&z.negative===0)return-1;if(this.negative===0&&z.negative!==0)return 1;var H=this.ucmp(z);return this.negative!==0?-H|0:H},u.prototype.ucmp=function(z){if(this.length>z.length)return 1;if(this.length<z.length)return-1;for(var H=0,X=this.length-1;X>=0;X--){var $=this.words[X]|0,ne=z.words[X]|0;if($!==ne){$<ne?H=-1:$>ne&&(H=1);break}}return H},u.prototype.gtn=function(z){return this.cmpn(z)===1},u.prototype.gt=function(z){return this.cmp(z)===1},u.prototype.gten=function(z){return this.cmpn(z)>=0},u.prototype.gte=function(z){return this.cmp(z)>=0},u.prototype.ltn=function(z){return this.cmpn(z)===-1},u.prototype.lt=function(z){return this.cmp(z)===-1},u.prototype.lten=function(z){return this.cmpn(z)<=0},u.prototype.lte=function(z){return this.cmp(z)<=0},u.prototype.eqn=function(z){return this.cmpn(z)===0},u.prototype.eq=function(z){return this.cmp(z)===0},u.red=function(z){return new O(z)},u.prototype.toRed=function(z){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),z.convertTo(this)._forceRed(z)},u.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(z){return this.red=z,this},u.prototype.forceRed=function(z){return i(!this.red,"Already a number in reduction context"),this._forceRed(z)},u.prototype.redAdd=function(z){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,z)},u.prototype.redIAdd=function(z){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,z)},u.prototype.redSub=function(z){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,z)},u.prototype.redISub=function(z){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,z)},u.prototype.redShl=function(z){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,z)},u.prototype.redMul=function(z){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.mul(this,z)},u.prototype.redIMul=function(z){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.imul(this,z)},u.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(z){return i(this.red&&!z.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,z)};var s={k256:null,p224:null,p192:null,p25519:null};function _(B,z){this.name=B,this.p=new u(z,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var z=new u(null);return z.words=new Array(Math.ceil(this.n/13)),z},_.prototype.ireduce=function(z){var H=z,X;do this.split(H,this.tmp),H=this.imulK(H),H=H.iadd(this.tmp),X=H.bitLength();while(X>this.n);var $=X<this.n?-1:H.ucmp(this.p);return $===0?(H.words[0]=0,H.length=1):$>0?H.isub(this.p):H.strip!==void 0?H.strip():H._strip(),H},_.prototype.split=function(z,H){z.iushrn(this.n,0,H)},_.prototype.imulK=function(z){return z.imul(this.k)};function b(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(b,_),b.prototype.split=function(z,H){for(var X=4194303,$=Math.min(z.length,9),ne=0;ne<$;ne++)H.words[ne]=z.words[ne];if(H.length=$,z.length<=9){z.words[0]=0,z.length=1;return}var q=z.words[9];for(H.words[H.length++]=q&X,ne=10;ne<z.length;ne++){var ue=z.words[ne]|0;z.words[ne-10]=(ue&X)<<4|q>>>22,q=ue}q>>>=22,z.words[ne-10]=q,q===0&&z.length>10?z.length-=10:z.length-=9},b.prototype.imulK=function(z){z.words[z.length]=0,z.words[z.length+1]=0,z.length+=2;for(var H=0,X=0;X<z.length;X++){var $=z.words[X]|0;H+=$*977,z.words[X]=H&67108863,H=$*64+(H/67108864|0)}return z.words[z.length-1]===0&&(z.length--,z.words[z.length-1]===0&&z.length--),z};function k(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(k,_);function D(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(D,_);function V(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(V,_),V.prototype.imulK=function(z){for(var H=0,X=0;X<z.length;X++){var $=(z.words[X]|0)*19+H,ne=$&67108863;$>>>=26,z.words[X]=ne,H=$}return H!==0&&(z.words[z.length++]=H),z},u._prime=function(z){if(s[z])return s[z];var H;if(z==="k256")H=new b;else if(z==="p224")H=new k;else if(z==="p192")H=new D;else if(z==="p25519")H=new V;else throw new Error("Unknown prime "+z);return s[z]=H,H};function O(B){if(typeof B=="string"){var z=u._prime(B);this.m=z.p,this.prime=z}else i(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}O.prototype._verify1=function(z){i(z.negative===0,"red works only with positives"),i(z.red,"red works only with red numbers")},O.prototype._verify2=function(z,H){i((z.negative|H.negative)===0,"red works only with positives"),i(z.red&&z.red===H.red,"red works only with red numbers")},O.prototype.imod=function(z){return this.prime?this.prime.ireduce(z)._forceRed(this):z.umod(this.m)._forceRed(this)},O.prototype.neg=function(z){return z.isZero()?z.clone():this.m.sub(z)._forceRed(this)},O.prototype.add=function(z,H){this._verify2(z,H);var X=z.add(H);return X.cmp(this.m)>=0&&X.isub(this.m),X._forceRed(this)},O.prototype.iadd=function(z,H){this._verify2(z,H);var X=z.iadd(H);return X.cmp(this.m)>=0&&X.isub(this.m),X},O.prototype.sub=function(z,H){this._verify2(z,H);var X=z.sub(H);return X.cmpn(0)<0&&X.iadd(this.m),X._forceRed(this)},O.prototype.isub=function(z,H){this._verify2(z,H);var X=z.isub(H);return X.cmpn(0)<0&&X.iadd(this.m),X},O.prototype.shl=function(z,H){return this._verify1(z),this.imod(z.ushln(H))},O.prototype.imul=function(z,H){return this._verify2(z,H),this.imod(z.imul(H))},O.prototype.mul=function(z,H){return this._verify2(z,H),this.imod(z.mul(H))},O.prototype.isqr=function(z){return this.imul(z,z.clone())},O.prototype.sqr=function(z){return this.mul(z,z)},O.prototype.sqrt=function(z){if(z.isZero())return z.clone();var H=this.m.andln(3);if(i(H%2===1),H===3){var X=this.m.add(new u(1)).iushrn(2);return this.pow(z,X)}for(var $=this.m.subn(1),ne=0;!$.isZero()&&$.andln(1)===0;)ne++,$.iushrn(1);i(!$.isZero());var q=new u(1).toRed(this),ue=q.redNeg(),te=this.m.subn(1).iushrn(1),J=this.m.bitLength();for(J=new u(2*J*J).toRed(this);this.pow(J,te).cmp(ue)!==0;)J.redIAdd(ue);for(var ie=this.pow(J,$),K=this.pow(z,$.addn(1).iushrn(1)),ee=this.pow(z,$),le=ne;ee.cmp(q)!==0;){for(var j=ee,Z=0;j.cmp(q)!==0;Z++)j=j.redSqr();i(Z<le);var fe=this.pow(ie,new u(1).iushln(le-Z-1));K=K.redMul(fe),ie=fe.redSqr(),ee=ee.redMul(ie),le=Z}return K},O.prototype.invm=function(z){var H=z._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},O.prototype.pow=function(z,H){if(H.isZero())return new u(1).toRed(this);if(H.cmpn(1)===0)return z.clone();var X=4,$=new Array(1<<X);$[0]=new u(1).toRed(this),$[1]=z;for(var ne=2;ne<$.length;ne++)$[ne]=this.mul($[ne-1],z);var q=$[0],ue=0,te=0,J=H.bitLength()%26;for(J===0&&(J=26),ne=H.length-1;ne>=0;ne--){for(var ie=H.words[ne],K=J-1;K>=0;K--){var ee=ie>>K&1;if(q!==$[0]&&(q=this.sqr(q)),ee===0&&ue===0){te=0;continue}ue<<=1,ue|=ee,te++,!(te!==X&&(ne!==0||K!==0))&&(q=this.mul(q,$[ue]),te=0,ue=0)}J=26}return q},O.prototype.convertTo=function(z){var H=z.umod(this.m);return H===z?H.clone():H},O.prototype.convertFrom=function(z){var H=z.clone();return H.red=null,H},u.mont=function(z){return new N(z)};function N(B){O.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(N,O),N.prototype.convertTo=function(z){return this.imod(z.ushln(this.shift))},N.prototype.convertFrom=function(z){var H=this.imod(z.mul(this.rinv));return H.red=null,H},N.prototype.imul=function(z,H){if(z.isZero()||H.isZero())return z.words[0]=0,z.length=1,z;var X=z.imul(H),$=X.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ne=X.isub($).iushrn(this.shift),q=ne;return ne.cmp(this.m)>=0?q=ne.isub(this.m):ne.cmpn(0)<0&&(q=ne.iadd(this.m)),q._forceRed(this)},N.prototype.mul=function(z,H){if(z.isZero()||H.isZero())return new u(0)._forceRed(this);var X=z.mul(H),$=X.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ne=X.isub($).iushrn(this.shift),q=ne;return ne.cmp(this.m)>=0?q=ne.isub(this.m):ne.cmpn(0)<0&&(q=ne.iadd(this.m)),q._forceRed(this)},N.prototype.invm=function(z){var H=this.imod(z._invmp(this.m).mul(this.r2));return H._forceRed(this)}}(v,this)},6204:function(v){v.exports=g;function g(r){var t,o,i,f=r.length,u=0;for(t=0;t<f;++t)u+=r[t].length;var l=new Array(u),m=0;for(t=0;t<f;++t){var h=r[t],w=h.length;for(o=0;o<w;++o){var c=l[m++]=new Array(w-1),a=0;for(i=0;i<w;++i)i!==o&&(c[a++]=h[i]);if(o&1){var p=c[1];c[1]=c[0],c[0]=p}}}return l}},6867:function(v,g,r){v.exports=a;var t=r(1888),o=r(855),i=r(7150);function f(p,x){for(var A=0;A<p;++A)if(!(x[A]<=x[A+p]))return!0;return!1}function u(p,x,A,P){for(var y=0,C=0,M=0,s=p.length;M<s;++M){var _=p[M];if(!f(x,_)){for(var b=0;b<2*x;++b)A[y++]=_[b];P[C++]=M}}return C}function l(p,x,A,P){var y=p.length,C=x.length;if(!(y<=0||C<=0)){var M=p[0].length>>>1;if(!(M<=0)){var s,_=t.mallocDouble(2*M*y),b=t.mallocInt32(y);if(y=u(p,M,_,b),y>0){if(M===1&&P)o.init(y),s=o.sweepComplete(M,A,0,y,_,b,0,y,_,b);else{var k=t.mallocDouble(2*M*C),D=t.mallocInt32(C);C=u(x,M,k,D),C>0&&(o.init(y+C),M===1?s=o.sweepBipartite(M,A,0,y,_,b,0,C,k,D):s=i(M,A,P,y,_,b,C,k,D),t.free(k),t.free(D))}t.free(_),t.free(b)}return s}}}var m;function h(p,x){m.push([p,x])}function w(p){return m=[],l(p,p,h,!0),m}function c(p,x){return m=[],l(p,x,h,!1),m}function a(p,x,A){switch(arguments.length){case 1:return w(p);case 2:return typeof x=="function"?l(p,p,x,!0):c(p,x);case 3:return l(p,x,A,!1);default:throw new Error("box-intersect: Invalid arguments")}}},2455:function(v,g){function r(){function i(l,m,h,w,c,a,p,x,A,P,y){for(var C=2*l,M=w,s=C*w;M<c;++M,s+=C){var _=a[m+s],b=a[m+s+l],k=p[M];e:for(var D=x,V=C*x;D<A;++D,V+=C){var O=P[m+V],N=P[m+V+l],B=y[D];if(!(N<_||b<O)){for(var z=m+1;z<l;++z){var H=a[z+s],X=a[z+l+s],$=P[z+V],ne=P[z+l+V];if(X<$||ne<H)continue e}var q=h(k,B);if(q!==void 0)return q}}}}function f(l,m,h,w,c,a,p,x,A,P,y){for(var C=2*l,M=x,s=C*x;M<A;++M,s+=C){var _=P[m+s],b=P[m+s+l],k=y[M];e:for(var D=w,V=C*w;D<c;++D,V+=C){var O=a[m+V],N=a[m+V+l],B=p[D];if(!(b<O||N<_)){for(var z=m+1;z<l;++z){var H=a[z+V],X=a[z+l+V],$=P[z+s],ne=P[z+l+s];if(X<$||ne<H)continue e}var q=h(B,k);if(q!==void 0)return q}}}}function u(l,m,h,w,c,a,p,x,A,P,y){return c-w>A-x?i(l,m,h,w,c,a,p,x,A,P,y):f(l,m,h,w,c,a,p,x,A,P,y)}return u}function t(){function i(h,w,c,a,p,x,A,P,y,C,M){for(var s=2*h,_=a,b=s*a;_<p;++_,b+=s){var k=x[w+b],D=x[w+b+h],V=A[_];e:for(var O=P,N=s*P;O<y;++O,N+=s){var B=C[w+N],z=M[O];if(!(B<=k||D<B)){for(var H=w+1;H<h;++H){var X=x[H+b],$=x[H+h+b],ne=C[H+N],q=C[H+h+N];if($<ne||q<X)continue e}var ue=c(z,V);if(ue!==void 0)return ue}}}}function f(h,w,c,a,p,x,A,P,y,C,M){for(var s=2*h,_=a,b=s*a;_<p;++_,b+=s){var k=x[w+b],D=x[w+b+h],V=A[_];e:for(var O=P,N=s*P;O<y;++O,N+=s){var B=C[w+N],z=M[O];if(!(B<k||D<B)){for(var H=w+1;H<h;++H){var X=x[H+b],$=x[H+h+b],ne=C[H+N],q=C[H+h+N];if($<ne||q<X)continue e}var ue=c(V,z);if(ue!==void 0)return ue}}}}function u(h,w,c,a,p,x,A,P,y,C,M){for(var s=2*h,_=P,b=s*P;_<y;++_,b+=s){var k=C[w+b],D=M[_];e:for(var V=a,O=s*a;V<p;++V,O+=s){var N=x[w+O],B=x[w+O+h],z=A[V];if(!(k<=N||B<k)){for(var H=w+1;H<h;++H){var X=x[H+O],$=x[H+h+O],ne=C[H+b],q=C[H+h+b];if($<ne||q<X)continue e}var ue=c(D,z);if(ue!==void 0)return ue}}}}function l(h,w,c,a,p,x,A,P,y,C,M){for(var s=2*h,_=P,b=s*P;_<y;++_,b+=s){var k=C[w+b],D=M[_];e:for(var V=a,O=s*a;V<p;++V,O+=s){var N=x[w+O],B=x[w+O+h],z=A[V];if(!(k<N||B<k)){for(var H=w+1;H<h;++H){var X=x[H+O],$=x[H+h+O],ne=C[H+b],q=C[H+h+b];if($<ne||q<X)continue e}var ue=c(z,D);if(ue!==void 0)return ue}}}}function m(h,w,c,a,p,x,A,P,y,C,M,s){return x-p>C-y?a?i(h,w,c,p,x,A,P,y,C,M,s):f(h,w,c,p,x,A,P,y,C,M,s):a?u(h,w,c,p,x,A,P,y,C,M,s):l(h,w,c,p,x,A,P,y,C,M,s)}return m}function o(i){return i?r():t()}g.partial=o(!1),g.full=o(!0)},7150:function(v,g,r){v.exports=B;var t=r(1888),o=r(8828),i=r(2455),f=i.partial,u=i.full,l=r(855),m=r(3545),h=r(8105),w=128,c=1<<22,a=1<<22,p=h("!(lo>=p0)&&!(p1>=hi)"),x=h("lo===p0"),A=h("lo<p0"),P=h("hi<=p0"),y=h("lo<=p0&&p0<=hi"),C=h("lo<p0&&p0<=hi"),M=6,s=2,_=1024,b=t.mallocInt32(_),k=t.mallocDouble(_);function D(z,H){var X=8*o.log2(H+1)*(z+1)|0,$=o.nextPow2(M*X);b.length<$&&(t.free(b),b=t.mallocInt32($));var ne=o.nextPow2(s*X);k.length<ne&&(t.free(k),k=t.mallocDouble(ne))}function V(z,H,X,$,ne,q,ue,te,J){var ie=M*z;b[ie]=H,b[ie+1]=X,b[ie+2]=$,b[ie+3]=ne,b[ie+4]=q,b[ie+5]=ue;var K=s*z;k[K]=te,k[K+1]=J}function O(z,H,X,$,ne,q,ue,te,J,ie,K){var ee=2*z,le=J*ee,j=ie[le+H];e:for(var Z=ne,fe=ne*ee;Z<q;++Z,fe+=ee){var re=ue[fe+H],ce=ue[fe+H+z];if(!(j<re||ce<j)&&!($&&j===re)){for(var xe=te[Z],Te=H+1;Te<z;++Te){var re=ue[fe+Te],ce=ue[fe+Te+z],we=ie[le+Te],_e=ie[le+Te+z];if(ce<we||_e<re)continue e}var ke;if($?ke=X(K,xe):ke=X(xe,K),ke!==void 0)return ke}}}function N(z,H,X,$,ne,q,ue,te,J,ie){var K=2*z,ee=te*K,le=J[ee+H];e:for(var j=$,Z=$*K;j<ne;++j,Z+=K){var fe=ue[j];if(fe!==ie){var re=q[Z+H],ce=q[Z+H+z];if(!(le<re||ce<le)){for(var xe=H+1;xe<z;++xe){var re=q[Z+xe],ce=q[Z+xe+z],Te=J[ee+xe],we=J[ee+xe+z];if(ce<Te||we<re)continue e}var _e=X(fe,ie);if(_e!==void 0)return _e}}}}function B(z,H,X,$,ne,q,ue,te,J){D(z,$+ue);var ie=0,K=2*z,ee;for(V(ie++,0,0,$,0,ue,X?16:0,-1/0,1/0),X||V(ie++,0,0,ue,0,$,1,-1/0,1/0);ie>0;){ie-=1;var le=ie*M,j=b[le],Z=b[le+1],fe=b[le+2],re=b[le+3],ce=b[le+4],xe=b[le+5],Te=ie*s,we=k[Te],_e=k[Te+1],ke=xe&1,Ne=!!(xe&16),Ee=ne,ze=q,Ce=te,Oe=J;if(ke&&(Ee=te,ze=J,Ce=ne,Oe=q),!(xe&2&&(fe=A(z,j,Z,fe,Ee,ze,_e),Z>=fe))&&!(xe&4&&(Z=P(z,j,Z,fe,Ee,ze,we),Z>=fe))){var Le=fe-Z,Ge=ce-re;if(Ne){if(z*Le*(Le+Ge)<a){if(ee=l.scanComplete(z,j,H,Z,fe,Ee,ze,re,ce,Ce,Oe),ee!==void 0)return ee;continue}}else if(z*Math.min(Le,Ge)<w){if(ee=f(z,j,H,ke,Z,fe,Ee,ze,re,ce,Ce,Oe),ee!==void 0)return ee;continue}else if(z*Le*Ge<c){if(ee=l.scanBipartite(z,j,H,ke,Z,fe,Ee,ze,re,ce,Ce,Oe),ee!==void 0)return ee;continue}var rt=p(z,j,Z,fe,Ee,ze,we,_e);if(Z<rt)if(z*(rt-Z)<w){if(ee=u(z,j+1,H,Z,rt,Ee,ze,re,ce,Ce,Oe),ee!==void 0)return ee}else if(j===z-2){if(ke?ee=l.sweepBipartite(z,H,re,ce,Ce,Oe,Z,rt,Ee,ze):ee=l.sweepBipartite(z,H,Z,rt,Ee,ze,re,ce,Ce,Oe),ee!==void 0)return ee}else V(ie++,j+1,Z,rt,re,ce,ke,-1/0,1/0),V(ie++,j+1,re,ce,Z,rt,ke^1,-1/0,1/0);if(rt<fe){var ot=m(z,j,re,ce,Ce,Oe),$e=Ce[K*ot+j],qe=x(z,j,ot,ce,Ce,Oe,$e);if(qe<ce&&V(ie++,j,rt,fe,qe,ce,(ke|4)+(Ne?16:0),$e,_e),re<ot&&V(ie++,j,rt,fe,re,ot,(ke|2)+(Ne?16:0),we,$e),ot+1===qe){if(Ne?ee=N(z,j,H,rt,fe,Ee,ze,ot,Ce,Oe[ot]):ee=O(z,j,H,ke,rt,fe,Ee,ze,ot,Ce,Oe[ot]),ee!==void 0)return ee}else if(ot<qe){var ht;if(Ne){if(ht=y(z,j,rt,fe,Ee,ze,$e),rt<ht){var vt=x(z,j,rt,ht,Ee,ze,$e);if(j===z-2){if(rt<vt&&(ee=l.sweepComplete(z,H,rt,vt,Ee,ze,ot,qe,Ce,Oe),ee!==void 0)||vt<ht&&(ee=l.sweepBipartite(z,H,vt,ht,Ee,ze,ot,qe,Ce,Oe),ee!==void 0))return ee}else rt<vt&&V(ie++,j+1,rt,vt,ot,qe,16,-1/0,1/0),vt<ht&&(V(ie++,j+1,vt,ht,ot,qe,0,-1/0,1/0),V(ie++,j+1,ot,qe,vt,ht,1,-1/0,1/0))}}else ke?ht=C(z,j,rt,fe,Ee,ze,$e):ht=y(z,j,rt,fe,Ee,ze,$e),rt<ht&&(j===z-2?ke?ee=l.sweepBipartite(z,H,ot,qe,Ce,Oe,rt,ht,Ee,ze):ee=l.sweepBipartite(z,H,rt,ht,Ee,ze,ot,qe,Ce,Oe):(V(ie++,j+1,rt,ht,ot,qe,ke,-1/0,1/0),V(ie++,j+1,ot,qe,rt,ht,ke^1,-1/0,1/0)))}}}}}},3545:function(v,g,r){v.exports=u;var t=r(8105),o=t("lo<p0"),i=8;function f(l,m,h,w,c,a){for(var p=2*l,x=p*(h+1)+m,A=h+1;A<w;++A,x+=p)for(var P=c[x],y=A,C=p*(A-1);y>h&&c[C+m]>P;--y,C-=p){for(var M=C,s=C+p,_=0;_<p;++_,++M,++s){var b=c[M];c[M]=c[s],c[s]=b}var k=a[y];a[y]=a[y-1],a[y-1]=k}}function u(l,m,h,w,c,a){if(w<=h+1)return h;for(var p=h,x=w,A=w+h>>>1,P=2*l,y=A,C=c[P*A+m];p<x;){if(x-p<i){f(l,m,p,x,c,a),C=c[P*A+m];break}var M=x-p,s=Math.random()*M+p|0,_=c[P*s+m],b=Math.random()*M+p|0,k=c[P*b+m],D=Math.random()*M+p|0,V=c[P*D+m];_<=k?V>=k?(y=b,C=k):_>=V?(y=s,C=_):(y=D,C=V):k>=V?(y=b,C=k):V>=_?(y=s,C=_):(y=D,C=V);for(var B=P*(x-1),z=P*y,O=0;O<P;++O,++B,++z){var N=c[B];c[B]=c[z],c[z]=N}var H=a[x-1];a[x-1]=a[y],a[y]=H,y=o(l,m,p,x-1,c,a,C);for(var B=P*(x-1),z=P*y,O=0;O<P;++O,++B,++z){var N=c[B];c[B]=c[z],c[z]=N}var H=a[x-1];if(a[x-1]=a[y],a[y]=H,A<y){for(x=y-1;p<x&&c[P*(x-1)+m]===C;)x-=1;x+=1}else if(y<A)for(p=y+1;p<x&&c[P*p+m]===C;)p+=1;else break}return o(l,m,h,A,c,a,c[P*A+m])}},8105:function(v){v.exports=r;var g={"lo===p0":t,"lo<p0":o,"lo<=p0":i,"hi<=p0":f,"lo<p0&&p0<=hi":l,"lo<=p0&&p0<=hi":u,"!(lo>=p0)&&!(p1>=hi)":m};function r(h){return g[h]}function t(h,w,c,a,p,x,A){for(var P=2*h,y=P*c,C=y,M=c,s=w,_=h+w,b=c;a>b;++b,y+=P){var k=p[y+s];if(k===A)if(M===b)M+=1,C+=P;else{for(var D=0;P>D;++D){var V=p[y+D];p[y+D]=p[C],p[C++]=V}var O=x[b];x[b]=x[M],x[M++]=O}}return M}function o(h,w,c,a,p,x,A){for(var P=2*h,y=P*c,C=y,M=c,s=w,_=h+w,b=c;a>b;++b,y+=P){var k=p[y+s];if(k<A)if(M===b)M+=1,C+=P;else{for(var D=0;P>D;++D){var V=p[y+D];p[y+D]=p[C],p[C++]=V}var O=x[b];x[b]=x[M],x[M++]=O}}return M}function i(h,w,c,a,p,x,A){for(var P=2*h,y=P*c,C=y,M=c,s=w,_=h+w,b=c;a>b;++b,y+=P){var k=p[y+_];if(k<=A)if(M===b)M+=1,C+=P;else{for(var D=0;P>D;++D){var V=p[y+D];p[y+D]=p[C],p[C++]=V}var O=x[b];x[b]=x[M],x[M++]=O}}return M}function f(h,w,c,a,p,x,A){for(var P=2*h,y=P*c,C=y,M=c,s=w,_=h+w,b=c;a>b;++b,y+=P){var k=p[y+_];if(k<=A)if(M===b)M+=1,C+=P;else{for(var D=0;P>D;++D){var V=p[y+D];p[y+D]=p[C],p[C++]=V}var O=x[b];x[b]=x[M],x[M++]=O}}return M}function u(h,w,c,a,p,x,A){for(var P=2*h,y=P*c,C=y,M=c,s=w,_=h+w,b=c;a>b;++b,y+=P){var k=p[y+s],D=p[y+_];if(k<=A&&A<=D)if(M===b)M+=1,C+=P;else{for(var V=0;P>V;++V){var O=p[y+V];p[y+V]=p[C],p[C++]=O}var N=x[b];x[b]=x[M],x[M++]=N}}return M}function l(h,w,c,a,p,x,A){for(var P=2*h,y=P*c,C=y,M=c,s=w,_=h+w,b=c;a>b;++b,y+=P){var k=p[y+s],D=p[y+_];if(k<A&&A<=D)if(M===b)M+=1,C+=P;else{for(var V=0;P>V;++V){var O=p[y+V];p[y+V]=p[C],p[C++]=O}var N=x[b];x[b]=x[M],x[M++]=N}}return M}function m(h,w,c,a,p,x,A,P){for(var y=2*h,C=y*c,M=C,s=c,_=w,b=h+w,k=c;a>k;++k,C+=y){var D=p[C+_],V=p[C+b];if(!(D>=A)&&!(P>=V))if(s===k)s+=1,M+=y;else{for(var O=0;y>O;++O){var N=p[C+O];p[C+O]=p[M],p[M++]=N}var B=x[k];x[k]=x[s],x[s++]=B}}return s}},1811:function(v){v.exports=r;var g=32;function r(w,c){c<=4*g?t(0,c-1,w):h(0,c-1,w)}function t(w,c,a){for(var p=2*(w+1),x=w+1;x<=c;++x){for(var A=a[p++],P=a[p++],y=x,C=p-2;y-- >w;){var M=a[C-2],s=a[C-1];if(M<A)break;if(M===A&&s<P)break;a[C]=M,a[C+1]=s,C-=2}a[C]=A,a[C+1]=P}}function o(w,c,a){w*=2,c*=2;var p=a[w],x=a[w+1];a[w]=a[c],a[w+1]=a[c+1],a[c]=p,a[c+1]=x}function i(w,c,a){w*=2,c*=2,a[w]=a[c],a[w+1]=a[c+1]}function f(w,c,a,p){w*=2,c*=2,a*=2;var x=p[w],A=p[w+1];p[w]=p[c],p[w+1]=p[c+1],p[c]=p[a],p[c+1]=p[a+1],p[a]=x,p[a+1]=A}function u(w,c,a,p,x){w*=2,c*=2,x[w]=x[c],x[c]=a,x[w+1]=x[c+1],x[c+1]=p}function l(w,c,a){w*=2,c*=2;var p=a[w],x=a[c];return p<x?!1:p===x?a[w+1]>a[c+1]:!0}function m(w,c,a,p){w*=2;var x=p[w];return x<c?!0:x===c?p[w+1]<a:!1}function h(w,c,a){var p=(c-w+1)/6|0,x=w+p,A=c-p,P=w+c>>1,y=P-p,C=P+p,M=x,s=y,_=P,b=C,k=A,D=w+1,V=c-1,O=0;l(M,s,a)&&(O=M,M=s,s=O),l(b,k,a)&&(O=b,b=k,k=O),l(M,_,a)&&(O=M,M=_,_=O),l(s,_,a)&&(O=s,s=_,_=O),l(M,b,a)&&(O=M,M=b,b=O),l(_,b,a)&&(O=_,_=b,b=O),l(s,k,a)&&(O=s,s=k,k=O),l(s,_,a)&&(O=s,s=_,_=O),l(b,k,a)&&(O=b,b=k,k=O);for(var N=a[2*s],B=a[2*s+1],z=a[2*b],H=a[2*b+1],X=2*M,$=2*_,ne=2*k,q=2*x,ue=2*P,te=2*A,J=0;J<2;++J){var ie=a[X+J],K=a[$+J],ee=a[ne+J];a[q+J]=ie,a[ue+J]=K,a[te+J]=ee}i(y,w,a),i(C,c,a);for(var le=D;le<=V;++le)if(m(le,N,B,a))le!==D&&o(le,D,a),++D;else if(!m(le,z,H,a))for(;;)if(m(V,z,H,a)){m(V,N,B,a)?(f(le,D,V,a),++D,--V):(o(le,V,a),--V);break}else{if(--V<le)break;continue}u(w,D-1,N,B,a),u(c,V+1,z,H,a),D-2-w<=g?t(w,D-2,a):h(w,D-2,a),c-(V+2)<=g?t(V+2,c,a):h(V+2,c,a),V-D<=g?t(D,V,a):h(D,V,a)}},855:function(v,g,r){v.exports={init:x,sweepBipartite:y,sweepComplete:C,scanBipartite:M,scanComplete:s};var t=r(1888),o=r(8828),i=r(1811),f=1<<28,u=1024,l=t.mallocInt32(u),m=t.mallocInt32(u),h=t.mallocInt32(u),w=t.mallocInt32(u),c=t.mallocInt32(u),a=t.mallocInt32(u),p=t.mallocDouble(u*8);function x(_){var b=o.nextPow2(_);l.length<b&&(t.free(l),l=t.mallocInt32(b)),m.length<b&&(t.free(m),m=t.mallocInt32(b)),h.length<b&&(t.free(h),h=t.mallocInt32(b)),w.length<b&&(t.free(w),w=t.mallocInt32(b)),c.length<b&&(t.free(c),c=t.mallocInt32(b)),a.length<b&&(t.free(a),a=t.mallocInt32(b));var k=8*b;p.length<k&&(t.free(p),p=t.mallocDouble(k))}function A(_,b,k,D){var V=b[D],O=_[k-1];_[V]=O,b[O]=V}function P(_,b,k,D){_[k]=D,b[D]=k}function y(_,b,k,D,V,O,N,B,z,H){for(var X=0,$=2*_,ne=_-1,q=$-1,ue=k;ue<D;++ue){var te=O[ue],J=$*ue;p[X++]=V[J+ne],p[X++]=-(te+1),p[X++]=V[J+q],p[X++]=te}for(var ue=N;ue<B;++ue){var te=H[ue]+f,ie=$*ue;p[X++]=z[ie+ne],p[X++]=-te,p[X++]=z[ie+q],p[X++]=te}var K=X>>>1;i(p,K);for(var ee=0,le=0,ue=0;ue<K;++ue){var j=p[2*ue+1]|0;if(j>=f)j=j-f|0,A(h,w,le--,j);else if(j>=0)A(l,m,ee--,j);else if(j<=-f){j=-j-f|0;for(var Z=0;Z<ee;++Z){var fe=b(l[Z],j);if(fe!==void 0)return fe}P(h,w,le++,j)}else{j=-j-1|0;for(var Z=0;Z<le;++Z){var fe=b(j,h[Z]);if(fe!==void 0)return fe}P(l,m,ee++,j)}}}function C(_,b,k,D,V,O,N,B,z,H){for(var X=0,$=2*_,ne=_-1,q=$-1,ue=k;ue<D;++ue){var te=O[ue]+1<<1,J=$*ue;p[X++]=V[J+ne],p[X++]=-te,p[X++]=V[J+q],p[X++]=te}for(var ue=N;ue<B;++ue){var te=H[ue]+1<<1,ie=$*ue;p[X++]=z[ie+ne],p[X++]=-te|1,p[X++]=z[ie+q],p[X++]=te|1}var K=X>>>1;i(p,K);for(var ee=0,le=0,j=0,ue=0;ue<K;++ue){var Z=p[2*ue+1]|0,fe=Z&1;if(ue<K-1&&Z>>1===p[2*ue+3]>>1&&(fe=2,ue+=1),Z<0){for(var re=-(Z>>1)-1,ce=0;ce<j;++ce){var xe=b(c[ce],re);if(xe!==void 0)return xe}if(fe!==0)for(var ce=0;ce<ee;++ce){var xe=b(l[ce],re);if(xe!==void 0)return xe}if(fe!==1)for(var ce=0;ce<le;++ce){var xe=b(h[ce],re);if(xe!==void 0)return xe}fe===0?P(l,m,ee++,re):fe===1?P(h,w,le++,re):fe===2&&P(c,a,j++,re)}else{var re=(Z>>1)-1;fe===0?A(l,m,ee--,re):fe===1?A(h,w,le--,re):fe===2&&A(c,a,j--,re)}}}function M(_,b,k,D,V,O,N,B,z,H,X,$){var ne=0,q=2*_,ue=b,te=b+_,J=1,ie=1;D?ie=f:J=f;for(var K=V;K<O;++K){var ee=K+J,le=q*K;p[ne++]=N[le+ue],p[ne++]=-ee,p[ne++]=N[le+te],p[ne++]=ee}for(var K=z;K<H;++K){var ee=K+ie,j=q*K;p[ne++]=X[j+ue],p[ne++]=-ee}var Z=ne>>>1;i(p,Z);for(var fe=0,K=0;K<Z;++K){var re=p[2*K+1]|0;if(re<0){var ee=-re,ce=!1;if(ee>=f?(ce=!D,ee-=f):(ce=!!D,ee-=1),ce)P(l,m,fe++,ee);else{var xe=$[ee],Te=q*ee,we=X[Te+b+1],_e=X[Te+b+1+_];e:for(var ke=0;ke<fe;++ke){var Ne=l[ke],Ee=q*Ne;if(!(_e<N[Ee+b+1]||N[Ee+b+1+_]<we)){for(var ze=b+2;ze<_;++ze)if(X[Te+ze+_]<N[Ee+ze]||N[Ee+ze+_]<X[Te+ze])continue e;var Ce=B[Ne],Oe;if(D?Oe=k(xe,Ce):Oe=k(Ce,xe),Oe!==void 0)return Oe}}}}else A(l,m,fe--,re-J)}}function s(_,b,k,D,V,O,N,B,z,H,X){for(var $=0,ne=2*_,q=b,ue=b+_,te=D;te<V;++te){var J=te+f,ie=ne*te;p[$++]=O[ie+q],p[$++]=-J,p[$++]=O[ie+ue],p[$++]=J}for(var te=B;te<z;++te){var J=te+1,K=ne*te;p[$++]=H[K+q],p[$++]=-J}var ee=$>>>1;i(p,ee);for(var le=0,te=0;te<ee;++te){var j=p[2*te+1]|0;if(j<0){var J=-j;if(J>=f)l[le++]=J-f;else{J-=1;var Z=X[J],fe=ne*J,re=H[fe+b+1],ce=H[fe+b+1+_];e:for(var xe=0;xe<le;++xe){var Te=l[xe],we=N[Te];if(we===Z)break;var _e=ne*Te;if(!(ce<O[_e+b+1]||O[_e+b+1+_]<re)){for(var ke=b+2;ke<_;++ke)if(H[fe+ke+_]<O[_e+ke]||O[_e+ke+_]<H[fe+ke])continue e;var Ne=k(we,Z);if(Ne!==void 0)return Ne}}}}else{for(var J=j-f,xe=le-1;xe>=0;--xe)if(l[xe]===J){for(var ke=xe+1;ke<le;++ke)l[ke-1]=l[ke];break}--le}}}},2538:function(v,g,r){var t=r(8902),o=r(5542),i=r(2272),f=r(5023);v.exports=w;function u(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function l(c,a){return c[0]-a[0]||c[1]-a[1]}function m(c){return c.map(u).sort(l)}function h(c,a,p){return a in c?c[a]:p}function w(c,a,p){Array.isArray(a)?(p=p||{},a=a||[]):(p=a||{},a=[]);var x=!!h(p,"delaunay",!0),A=!!h(p,"interior",!0),P=!!h(p,"exterior",!0),y=!!h(p,"infinity",!1);if(!A&&!P||c.length===0)return[];var C=t(c,a);if(x||A!==P||y){for(var M=o(c.length,m(a)),s=0;s<C.length;++s){var _=C[s];M.addTriangle(_[0],_[1],_[2])}return x&&i(c,M),P?A?y?f(M,0,y):M.cells():f(M,1,y):f(M,-1)}else return C}},2272:function(v,g,r){var t=r(2646)[4];r(2478),v.exports=i;function o(f,u,l,m,h,w){var c=u.opposite(m,h);if(!(c<0)){if(h<m){var a=m;m=h,h=a,a=w,w=c,c=a}u.isConstraint(m,h)||t(f[m],f[h],f[w],f[c])<0&&l.push(m,h)}}function i(f,u){for(var l=[],m=f.length,h=u.stars,w=0;w<m;++w)for(var c=h[w],a=1;a<c.length;a+=2){var p=c[a];if(!(p<w)&&!u.isConstraint(w,p)){for(var x=c[a-1],A=-1,P=1;P<c.length;P+=2)if(c[P-1]===p){A=c[P];break}A<0||t(f[w],f[p],f[x],f[A])<0&&l.push(w,p)}}for(;l.length>0;){for(var p=l.pop(),w=l.pop(),x=-1,A=-1,c=h[w],y=1;y<c.length;y+=2){var C=c[y-1],M=c[y];C===p?A=M:M===p&&(x=C)}x<0||A<0||t(f[w],f[p],f[x],f[A])>=0||(u.flip(w,p),o(f,u,l,x,w,A),o(f,u,l,w,A,x),o(f,u,l,A,p,x),o(f,u,l,p,x,A))}}},5023:function(v,g,r){var t=r(2478);v.exports=m;function o(h,w,c,a,p,x,A){this.cells=h,this.neighbor=w,this.flags=a,this.constraint=c,this.active=p,this.next=x,this.boundary=A}var i=o.prototype;function f(h,w){return h[0]-w[0]||h[1]-w[1]||h[2]-w[2]}i.locate=function(){var h=[0,0,0];return function(w,c,a){var p=w,x=c,A=a;return c<a?c<w&&(p=c,x=a,A=w):a<w&&(p=a,x=w,A=c),p<0?-1:(h[0]=p,h[1]=x,h[2]=A,t.eq(this.cells,h,f))}}();function u(h,w){for(var c=h.cells(),a=c.length,p=0;p<a;++p){var x=c[p],A=x[0],P=x[1],y=x[2];P<y?P<A&&(x[0]=P,x[1]=y,x[2]=A):y<A&&(x[0]=y,x[1]=A,x[2]=P)}c.sort(f);for(var C=new Array(a),p=0;p<C.length;++p)C[p]=0;var M=[],s=[],_=new Array(3*a),b=new Array(3*a),k=null;w&&(k=[]);for(var D=new o(c,_,b,C,M,s,k),p=0;p<a;++p)for(var x=c[p],V=0;V<3;++V){var A=x[V],P=x[(V+1)%3],O=_[3*p+V]=D.locate(P,A,h.opposite(P,A)),N=b[3*p+V]=h.isConstraint(A,P);O<0&&(N?s.push(p):(M.push(p),C[p]=1),w&&k.push([P,A,-1]))}return D}function l(h,w,c){for(var a=0,p=0;p<h.length;++p)w[p]===c&&(h[a++]=h[p]);return h.length=a,h}function m(h,w,c){var a=u(h,c);if(w===0)return c?a.cells.concat(a.boundary):a.cells;for(var p=1,x=a.active,A=a.next,P=a.flags,y=a.cells,C=a.constraint,M=a.neighbor;x.length>0||A.length>0;){for(;x.length>0;){var s=x.pop();if(P[s]!==-p){P[s]=p,y[s];for(var _=0;_<3;++_){var b=M[3*s+_];b>=0&&P[b]===0&&(C[3*s+_]?A.push(b):(x.push(b),P[b]=p))}}}var k=A;A=x,x=k,A.length=0,p=-p}var D=l(y,P,w);return c?D.concat(a.boundary):D}},8902:function(v,g,r){var t=r(2478),o=r(3250)[3],i=0,f=1,u=2;v.exports=A;function l(P,y,C,M,s){this.a=P,this.b=y,this.idx=C,this.lowerIds=M,this.upperIds=s}function m(P,y,C,M){this.a=P,this.b=y,this.type=C,this.idx=M}function h(P,y){var C=P.a[0]-y.a[0]||P.a[1]-y.a[1]||P.type-y.type;return C||P.type!==i&&(C=o(P.a,P.b,y.b),C)?C:P.idx-y.idx}function w(P,y){return o(P.a,P.b,y)}function c(P,y,C,M,s){for(var _=t.lt(y,M,w),b=t.gt(y,M,w),k=_;k<b;++k){for(var D=y[k],V=D.lowerIds,N=V.length;N>1&&o(C[V[N-2]],C[V[N-1]],M)>0;)P.push([V[N-1],V[N-2],s]),N-=1;V.length=N,V.push(s);for(var O=D.upperIds,N=O.length;N>1&&o(C[O[N-2]],C[O[N-1]],M)<0;)P.push([O[N-2],O[N-1],s]),N-=1;O.length=N,O.push(s)}}function a(P,y){var C;return P.a[0]<y.a[0]?C=o(P.a,P.b,y.a):C=o(y.b,y.a,P.a),C||(y.b[0]<P.b[0]?C=o(P.a,P.b,y.b):C=o(y.b,y.a,P.b),C||P.idx-y.idx)}function p(P,y,C){var M=t.le(P,C,a),s=P[M],_=s.upperIds,b=_[_.length-1];s.upperIds=[b],P.splice(M+1,0,new l(C.a,C.b,C.idx,[b],_))}function x(P,y,C){var M=C.a;C.a=C.b,C.b=M;var s=t.eq(P,C,a),_=P[s],b=P[s-1];b.upperIds=_.upperIds,P.splice(s,1)}function A(P,y){for(var C=P.length,M=y.length,s=[],_=0;_<C;++_)s.push(new m(P[_],null,i,_));for(var _=0;_<M;++_){var b=y[_],k=P[b[0]],D=P[b[1]];k[0]<D[0]?s.push(new m(k,D,u,_),new m(D,k,f,_)):k[0]>D[0]&&s.push(new m(D,k,u,_),new m(k,D,f,_))}s.sort(h);for(var V=s[0].a[0]-(1+Math.abs(s[0].a[0]))*Math.pow(2,-52),O=[new l([V,1],[V,0],-1,[],[])],N=[],_=0,B=s.length;_<B;++_){var z=s[_],H=z.type;H===i?c(N,O,P,z.a,z.idx):H===u?p(O,P,z):x(O,P,z)}return N}},5542:function(v,g,r){var t=r(2478);v.exports=u;function o(l,m){this.stars=l,this.edges=m}var i=o.prototype;function f(l,m,h){for(var w=1,c=l.length;w<c;w+=2)if(l[w-1]===m&&l[w]===h){l[w-1]=l[c-2],l[w]=l[c-1],l.length=c-2;return}}i.isConstraint=function(){var l=[0,0];function m(h,w){return h[0]-w[0]||h[1]-w[1]}return function(h,w){return l[0]=Math.min(h,w),l[1]=Math.max(h,w),t.eq(this.edges,l,m)>=0}}(),i.removeTriangle=function(l,m,h){var w=this.stars;f(w[l],m,h),f(w[m],h,l),f(w[h],l,m)},i.addTriangle=function(l,m,h){var w=this.stars;w[l].push(m,h),w[m].push(h,l),w[h].push(l,m)},i.opposite=function(l,m){for(var h=this.stars[m],w=1,c=h.length;w<c;w+=2)if(h[w]===l)return h[w-1];return-1},i.flip=function(l,m){var h=this.opposite(l,m),w=this.opposite(m,l);this.removeTriangle(l,m,h),this.removeTriangle(m,l,w),this.addTriangle(l,w,h),this.addTriangle(m,h,w)},i.edges=function(){for(var l=this.stars,m=[],h=0,w=l.length;h<w;++h)for(var c=l[h],a=0,p=c.length;a<p;a+=2)m.push([c[a],c[a+1]]);return m},i.cells=function(){for(var l=this.stars,m=[],h=0,w=l.length;h<w;++h)for(var c=l[h],a=0,p=c.length;a<p;a+=2){var x=c[a],A=c[a+1];h<Math.min(x,A)&&m.push([h,x,A])}return m};function u(l,m){for(var h=new Array(l),w=0;w<l;++w)h[w]=[];return new o(h,m)}},2419:function(v){v.exports=g;function g(r){for(var t=1,o=1;o<r.length;++o)for(var i=0;i<o;++i)if(r[o]<r[i])t=-t;else if(r[i]===r[o])return 0;return t}},3628:function(v,g,r){var t=r(1338),o=r(727);function i(l,m){for(var h=0,w=l.length,c=0;c<w;++c)h+=l[c]*m[c];return h}function f(l){var m=l.length;if(m===0)return[];l[0].length;var h=t([l.length+1,l.length+1],1),w=t([l.length+1],1);h[m][m]=0;for(var c=0;c<m;++c){for(var a=0;a<=c;++a)h[a][c]=h[c][a]=2*i(l[c],l[a]);w[c]=i(l[c],l[c])}for(var p=o(h,w),x=0,A=p[m+1],c=0;c<A.length;++c)x+=A[c];for(var P=new Array(m),c=0;c<m;++c){for(var A=p[c],y=0,a=0;a<A.length;++a)y+=A[a];P[c]=y/x}return P}function u(l){if(l.length===0)return[];for(var m=l[0].length,h=t([m]),w=f(l),c=0;c<l.length;++c)for(var a=0;a<m;++a)h[a]+=l[c][a]*w[c];return h}u.barycenetric=f,v.exports=u},6037:function(v,g,r){v.exports=o;var t=r(3628);function o(i){for(var f=t(i),u=0,l=0;l<i.length;++l)for(var m=i[l],h=0;h<f.length;++h)u+=Math.pow(m[h]-f[h],2);return Math.sqrt(u/i.length)}},332:function(v,g,r){v.exports=k;var t=r(1755),o=r(6867),i=r(1125),f=r(7842),u=r(1318),l=r(946),m=r(5838),h=r(1278),w=r(3637);function c(D){var V=l(D);return[h(V,-1/0),h(V,1/0)]}function a(D,V){for(var O=new Array(V.length),N=0;N<V.length;++N){var B=V[N],z=D[B[0]],H=D[B[1]];O[N]=[h(Math.min(z[0],H[0]),-1/0),h(Math.min(z[1],H[1]),-1/0),h(Math.max(z[0],H[0]),1/0),h(Math.max(z[1],H[1]),1/0)]}return O}function p(D){for(var V=new Array(D.length),O=0;O<D.length;++O){var N=D[O];V[O]=[h(N[0],-1/0),h(N[1],-1/0),h(N[0],1/0),h(N[1],1/0)]}return V}function x(D,V,O){var N=[];return o(O,function(B,z){var H=V[B],X=V[z];if(!(H[0]===X[0]||H[0]===X[1]||H[1]===X[0]||H[1]===X[1])){var $=D[H[0]],ne=D[H[1]],q=D[X[0]],ue=D[X[1]];i($,ne,q,ue)&&N.push([B,z])}}),N}function A(D,V,O,N){var B=[];return o(O,N,function(z,H){var X=V[z];if(!(X[0]===H||X[1]===H)){var $=D[H],ne=D[X[0]],q=D[X[1]];i(ne,q,$,$)&&B.push([z,H])}}),B}function P(D,V,O,N,B){var z,H,X=D.map(function(Te){return[f(Te[0]),f(Te[1])]});for(z=0;z<O.length;++z){var $=O[z];H=$[0];var ne=$[1],q=V[H],ue=V[ne],te=w(m(D[q[0]]),m(D[q[1]]),m(D[ue[0]]),m(D[ue[1]]));if(te){var J=D.length;D.push([l(te[0]),l(te[1])]),X.push(te),N.push([H,J],[ne,J])}}for(N.sort(function(Te,we){if(Te[0]!==we[0])return Te[0]-we[0];var _e=X[Te[1]],ke=X[we[1]];return u(_e[0],ke[0])||u(_e[1],ke[1])}),z=N.length-1;z>=0;--z){var ie=N[z];H=ie[0];var K=V[H],ee=K[0],le=K[1],j=D[ee],Z=D[le];if((j[0]-Z[0]||j[1]-Z[1])<0){var fe=ee;ee=le,le=fe}K[0]=ee;var re=K[1]=ie[1],ce;for(B&&(ce=K[2]);z>0&&N[z-1][0]===H;){var ie=N[--z],xe=ie[1];B?V.push([re,xe,ce]):V.push([re,xe]),re=xe}B?V.push([re,le,ce]):V.push([re,le])}return X}function y(D,V,O){for(var N=V.length,B=new t(N),z=[],H=0;H<V.length;++H){var X=V[H],$=c(X[0]),ne=c(X[1]);z.push([h($[0],-1/0),h(ne[0],-1/0),h($[1],1/0),h(ne[1],1/0)])}o(z,function(ie,K){B.link(ie,K)});for(var q=!0,ue=new Array(N),H=0;H<N;++H){var te=B.find(H);te!==H&&(q=!1,D[te]=[Math.min(D[H][0],D[te][0]),Math.min(D[H][1],D[te][1])])}if(q)return null;for(var J=0,H=0;H<N;++H){var te=B.find(H);te===H?(ue[H]=J,D[J++]=D[H]):ue[H]=-1}D.length=J;for(var H=0;H<N;++H)ue[H]<0&&(ue[H]=ue[B.find(H)]);return ue}function C(D,V){return D[0]-V[0]||D[1]-V[1]}function M(D,V){var O=D[0]-V[0]||D[1]-V[1];return O||(D[2]<V[2]?-1:D[2]>V[2]?1:0)}function s(D,V,O){if(D.length!==0){if(V)for(var N=0;N<D.length;++N){var B=D[N],z=V[B[0]],H=V[B[1]];B[0]=Math.min(z,H),B[1]=Math.max(z,H)}else for(var N=0;N<D.length;++N){var B=D[N],z=B[0],H=B[1];B[0]=Math.min(z,H),B[1]=Math.max(z,H)}O?D.sort(M):D.sort(C);for(var X=1,N=1;N<D.length;++N){var $=D[N-1],ne=D[N];ne[0]===$[0]&&ne[1]===$[1]&&(!O||ne[2]===$[2])||(D[X++]=ne)}D.length=X}}function _(D,V,O){var N=y(D,[],p(D));return s(V,N,O),!!N}function b(D,V,O){var N=a(D,V),B=x(D,V,N),z=p(D),H=A(D,V,N,z),X=P(D,V,B,H,O),$=y(D,X);return s(V,$,O),$?!0:B.length>0||H.length>0}function k(D,V,O){var N;if(O){N=V;for(var B=new Array(V.length),z=0;z<V.length;++z){var H=V[z];B[z]=[H[0],H[1],O[z]]}V=B}for(var X=_(D,V,!!O);b(D,V,!!O);)X=!0;if(O&&X){N.length=0,O.length=0;for(var z=0;z<V.length;++z){var H=V[z];N.push([H[0],H[1]]),O.push(H[2])}}return X}},3637:function(v,g,r){v.exports=w;var t=r(6504),o=r(8697),i=r(5572),f=r(7721),u=r(544),l=r(2653),m=r(8987);function h(c,a){return i(t(c[0],a[1]),t(c[1],a[0]))}function w(c,a,p,x){var A=u(a,c),P=u(x,p),y=h(A,P);if(f(y)===0)return null;var C=u(c,p),M=h(P,C),s=o(M,y),_=m(A,s),b=l(c,_);return b}},3642:function(v){v.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(v,g,r){var t=r(3642),o=r(395);v.exports=i;function i(m){var h,w,c,a,p,x,A,P,s,y,C;if(m||(m={}),P=(m.nshades||72)-1,A=m.format||"hex",x=m.colormap,x||(x="jet"),typeof x=="string"){if(x=x.toLowerCase(),!t[x])throw Error(x+" not a supported colorscale");p=t[x]}else if(Array.isArray(x))p=x.slice();else throw Error("unsupported colormap option",x);if(p.length>P+1)throw new Error(x+" map requires nshades to be at least size "+p.length);Array.isArray(m.alpha)?m.alpha.length!==2?y=[1,1]:y=m.alpha.slice():typeof m.alpha=="number"?y=[m.alpha,m.alpha]:y=[1,1],h=p.map(function(k){return Math.round(k.index*P)}),y[0]=Math.min(Math.max(y[0],0),1),y[1]=Math.min(Math.max(y[1],0),1);var M=p.map(function(k,D){var V=p[D].index,O=p[D].rgb.slice();return O.length===4&&O[3]>=0&&O[3]<=1||(O[3]=y[0]+(y[1]-y[0])*V),O}),s=[];for(C=0;C<h.length-1;++C){a=h[C+1]-h[C],w=M[C],c=M[C+1];for(var _=0;_<a;_++){var b=_/a;s.push([Math.round(o(w[0],c[0],b)),Math.round(o(w[1],c[1],b)),Math.round(o(w[2],c[2],b)),o(w[3],c[3],b)])}}return s.push(p[p.length-1].rgb.concat(y[1])),A==="hex"?s=s.map(u):A==="rgbaString"?s=s.map(l):A==="float"&&(s=s.map(f)),s}function f(m){return[m[0]/255,m[1]/255,m[2]/255,m[3]]}function u(m){for(var h,w="#",c=0;c<3;++c)h=m[c],h=h.toString(16),w+=("00"+h).substr(h.length);return w}function l(m){return"rgba("+m.join(",")+")"}},3140:function(v,g,r){v.exports=m;var t=r(3250),o=r(8572),i=r(9362),f=r(5382),u=r(8210);function l(h,w,c){var a=i(h[0],-w[0]),p=i(h[1],-w[1]),x=i(c[0],-w[0]),A=i(c[1],-w[1]),P=u(f(a,x),f(p,A));return P[P.length-1]>=0}function m(h,w,c,a){var p=t(w,c,a);if(p===0){var x=o(t(h,w,c)),A=o(t(h,w,a));if(x===A){if(x===0){var P=l(h,w,c),y=l(h,w,a);return P===y?0:P?1:-1}return 0}else{if(A===0)return x>0||l(h,w,a)?-1:1;if(x===0)return A>0||l(h,w,c)?1:-1}return o(A-x)}var C=t(h,w,c);if(C>0)return p>0&&t(h,w,a)>0?1:-1;if(C<0)return p>0||t(h,w,a)>0?1:-1;var M=t(h,w,a);return M>0||l(h,w,c)?1:-1}},8572:function(v){v.exports=function(r){return r<0?-1:r>0?1:0}},8507:function(v){v.exports=t;var g=Math.min;function r(o,i){return o-i}function t(o,i){var f=o.length,u=o.length-i.length;if(u)return u;switch(f){case 0:return 0;case 1:return o[0]-i[0];case 2:return o[0]+o[1]-i[0]-i[1]||g(o[0],o[1])-g(i[0],i[1]);case 3:var l=o[0]+o[1],m=i[0]+i[1];if(u=l+o[2]-(m+i[2]),u)return u;var h=g(o[0],o[1]),w=g(i[0],i[1]);return g(h,o[2])-g(w,i[2])||g(h+o[2],l)-g(w+i[2],m);case 4:var c=o[0],a=o[1],p=o[2],x=o[3],A=i[0],P=i[1],y=i[2],C=i[3];return c+a+p+x-(A+P+y+C)||g(c,a,p,x)-g(A,P,y,C,A)||g(c+a,c+p,c+x,a+p,a+x,p+x)-g(A+P,A+y,A+C,P+y,P+C,y+C)||g(c+a+p,c+a+x,c+p+x,a+p+x)-g(A+P+y,A+P+C,A+y+C,P+y+C);default:for(var M=o.slice().sort(r),s=i.slice().sort(r),_=0;_<f;++_)if(u=M[_]-s[_],u)return u;return 0}}},3788:function(v,g,r){var t=r(8507),o=r(2419);v.exports=i;function i(f,u){return t(f,u)||o(f)-o(u)}},7352:function(v,g,r){var t=r(5721),o=r(4750),i=r(2690);v.exports=f;function f(u){var l=u.length;if(l===0)return[];if(l===1)return[[0]];var m=u[0].length;return m===0?[]:m===1?t(u):m===2?o(u):i(u,m)}},5721:function(v){v.exports=g;function g(r){for(var t=0,o=0,i=1;i<r.length;++i)r[i][0]<r[t][0]&&(t=i),r[i][0]>r[o][0]&&(o=i);return t<o?[[t],[o]]:t>o?[[o],[t]]:[[t]]}},4750:function(v,g,r){v.exports=o;var t=r(3090);function o(i){var f=t(i),u=f.length;if(u<=2)return[];for(var l=new Array(u),m=f[u-1],h=0;h<u;++h){var w=f[h];l[h]=[m,w],m=w}return l}},2690:function(v,g,r){v.exports=u;var t=r(8954),o=r(3952);function i(l,m){for(var h=l.length,w=new Array(h),c=0;c<m.length;++c)w[c]=l[m[c]];for(var a=m.length,c=0;c<h;++c)m.indexOf(c)<0&&(w[a++]=l[c]);return w}function f(l,m){for(var h=l.length,w=m.length,c=0;c<h;++c)for(var a=l[c],p=0;p<a.length;++p){var x=a[p];if(x<w)a[p]=m[x];else{x=x-w;for(var A=0;A<w;++A)x>=m[A]&&(x+=1);a[p]=x}}return l}function u(l,m){try{return t(l,!0)}catch{var h=o(l);if(h.length<=m)return[];var w=i(l,h),c=t(w,!0);return f(c,h)}}},4769:function(v){function g(t,o,i,f,u,l){var m=6*u*u-6*u,h=3*u*u-4*u+1,w=-6*u*u+6*u,c=3*u*u-2*u;if(t.length){l||(l=new Array(t.length));for(var a=t.length-1;a>=0;--a)l[a]=m*t[a]+h*o[a]+w*i[a]+c*f[a];return l}return m*t+h*o+w*i[a]+c*f}function r(t,o,i,f,u,l){var m=u-1,h=u*u,w=m*m,c=(1+2*u)*w,a=u*w,p=h*(3-2*u),x=h*m;if(t.length){l||(l=new Array(t.length));for(var A=t.length-1;A>=0;--A)l[A]=c*t[A]+a*o[A]+p*i[A]+x*f[A];return l}return c*t+a*o+p*i+x*f}v.exports=r,v.exports.derivative=g},7642:function(v,g,r){var t=r(8954),o=r(1682);v.exports=l;function i(m,h){this.point=m,this.index=h}function f(m,h){for(var w=m.point,c=h.point,a=w.length,p=0;p<a;++p){var x=c[p]-w[p];if(x)return x}return 0}function u(m,h,w){if(m===1)return w?[[-1,0]]:[];var c=h.map(function(P,y){return[P[0],y]});c.sort(function(P,y){return P[0]-y[0]});for(var a=new Array(m-1),p=1;p<m;++p){var x=c[p-1],A=c[p];a[p-1]=[x[1],A[1]]}return w&&a.push([-1,a[0][1]],[a[m-1][1],-1]),a}function l(m,h){var w=m.length;if(w===0)return[];var c=m[0].length;if(c<1)return[];if(c===1)return u(w,m,h);for(var a=new Array(w),p=1,x=0;x<w;++x){for(var A=m[x],P=new Array(c+1),y=0,C=0;C<c;++C){var M=A[C];P[C]=M,y+=M*M}P[c]=y,a[x]=new i(P,x),p=Math.max(y,p)}o(a,f),w=a.length;for(var s=new Array(w+c+1),_=new Array(w+c+1),b=(c+1)*(c+1)*p,k=new Array(c+1),x=0;x<=c;++x)k[x]=0;k[c]=b,s[0]=k.slice(),_[0]=-1;for(var x=0;x<=c;++x){var P=k.slice();P[x]=1,s[x+1]=P,_[x+1]=-1}for(var x=0;x<w;++x){var D=a[x];s[x+c+1]=D.point,_[x+c+1]=D.index}var V=t(s,!1);if(h?V=V.filter(function(O){for(var N=0,B=0;B<=c;++B){var z=_[O[B]];if(z<0&&++N>=2)return!1;O[B]=z}return!0}):V=V.filter(function(O){for(var N=0;N<=c;++N){var B=_[O[N]];if(B<0)return!1;O[N]=B}return!0}),c&1)for(var x=0;x<V.length;++x){var D=V[x],P=D[0];D[0]=D[1],D[1]=P}return V}},2361:function(v){var g=!1;if(typeof Float64Array<"u"){var r=new Float64Array(1),t=new Uint32Array(r.buffer);if(r[0]=1,g=!0,t[1]===1072693248){let i=function(l,m){return t[0]=l,t[1]=m,r[0]},f=function(l){return r[0]=l,t[0]},u=function(l){return r[0]=l,t[1]};v.exports=function(m){return r[0]=m,[t[0],t[1]]},v.exports.pack=i,v.exports.lo=f,v.exports.hi=u}else if(t[0]===1072693248){let i=function(l,m){return t[1]=l,t[0]=m,r[0]},f=function(l){return r[0]=l,t[1]},u=function(l){return r[0]=l,t[0]};v.exports=function(m){return r[0]=m,[t[1],t[0]]},v.exports.pack=i,v.exports.lo=f,v.exports.hi=u}else g=!1}if(!g){let i=function(l,m){return o.writeUInt32LE(l,0,!0),o.writeUInt32LE(m,4,!0),o.readDoubleLE(0,!0)},f=function(l){return o.writeDoubleLE(l,0,!0),o.readUInt32LE(0,!0)},u=function(l){return o.writeDoubleLE(l,0,!0),o.readUInt32LE(4,!0)};var o=new Buffer(8);v.exports=function(m){return o.writeDoubleLE(m,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},v.exports.pack=i,v.exports.lo=f,v.exports.hi=u}v.exports.sign=function(i){return v.exports.hi(i)>>>31},v.exports.exponent=function(i){var f=v.exports.hi(i);return(f<<1>>>21)-1023},v.exports.fraction=function(i){var f=v.exports.lo(i),u=v.exports.hi(i),l=u&(1<<20)-1;return u&2146435072&&(l+=1048576),[f,l]},v.exports.denormalized=function(i){var f=v.exports.hi(i);return!(f&2146435072)}},1338:function(v){function g(o,i,f){var u=o[f]|0;if(u<=0)return[];var l=new Array(u),m;if(f===o.length-1)for(m=0;m<u;++m)l[m]=i;else for(m=0;m<u;++m)l[m]=g(o,i,f+1);return l}function r(o,i){var f,u;for(f=new Array(o),u=0;u<o;++u)f[u]=i;return f}function t(o,i){switch(typeof i>"u"&&(i=0),typeof o){case"number":if(o>0)return r(o|0,i);break;case"object":if(typeof o.length=="number")return g(o,i,0);break}return[]}v.exports=t},3134:function(v,g,r){v.exports=o;var t=r(1682);function o(i,f){var u=i.length;if(typeof f!="number"){f=0;for(var l=0;l<u;++l){var m=i[l];f=Math.max(f,m[0],m[1])}f=(f|0)+1}f=f|0;for(var h=new Array(f),l=0;l<f;++l)h[l]=[];for(var l=0;l<u;++l){var m=i[l];h[m[0]].push(m[1]),h[m[1]].push(m[0])}for(var w=0;w<f;++w)t(h[w],function(c,a){return c-a});return h}},5033:function(v){v.exports=g;function g(r,t,o){var i=t||0,f=o||1;return[[r[12]+r[0],r[13]+r[1],r[14]+r[2],r[15]+r[3]],[r[12]-r[0],r[13]-r[1],r[14]-r[2],r[15]-r[3]],[r[12]+r[4],r[13]+r[5],r[14]+r[6],r[15]+r[7]],[r[12]-r[4],r[13]-r[5],r[14]-r[6],r[15]-r[7]],[i*r[12]+r[8],i*r[13]+r[9],i*r[14]+r[10],i*r[15]+r[11]],[f*r[12]-r[8],f*r[13]-r[9],f*r[14]-r[10],f*r[15]-r[11]]]}},9215:function(v,g,r){v.exports=m;var t=r(4769),o=r(2478);function i(h,w,c){return Math.min(w,Math.max(h,c))}function f(h,w,c){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var a=0;a<this.dimension;++a)this.bounds[0][a]=-1/0,this.bounds[1][a]=1/0;this._state=h.slice().reverse(),this._velocity=w.slice().reverse(),this._time=[c],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var u=f.prototype;u.flush=function(h){var w=o.gt(this._time,h)-1;w<=0||(this._time.splice(0,w),this._state.splice(0,w*this.dimension),this._velocity.splice(0,w*this.dimension))},u.curve=function(h){var w=this._time,c=w.length,a=o.le(w,h),p=this._scratch[0],x=this._state,A=this._velocity,P=this.dimension,y=this.bounds;if(a<0)for(var C=P-1,M=0;M<P;++M,--C)p[M]=x[C];else if(a>=c-1)for(var C=x.length-1,s=h-w[c-1],M=0;M<P;++M,--C)p[M]=x[C]+s*A[C];else{for(var C=P*(a+1)-1,_=w[a],b=w[a+1],k=b-_||1,D=this._scratch[1],V=this._scratch[2],O=this._scratch[3],N=this._scratch[4],B=!0,M=0;M<P;++M,--C)D[M]=x[C],O[M]=A[C]*k,V[M]=x[C+P],N[M]=A[C+P]*k,B=B&&D[M]===V[M]&&O[M]===N[M]&&O[M]===0;if(B)for(var M=0;M<P;++M)p[M]=D[M];else t(D,O,V,N,(h-_)/k,p)}for(var z=y[0],H=y[1],M=0;M<P;++M)p[M]=i(z[M],H[M],p[M]);return p},u.dcurve=function(h){var w=this._time,c=w.length,a=o.le(w,h),p=this._scratch[0],x=this._state,A=this._velocity,P=this.dimension;if(a>=c-1){var y=x.length-1;h-w[c-1];for(var C=0;C<P;++C,--y)p[C]=A[y]}else{for(var y=P*(a+1)-1,M=w[a],s=w[a+1],_=s-M||1,b=this._scratch[1],k=this._scratch[2],D=this._scratch[3],V=this._scratch[4],O=!0,C=0;C<P;++C,--y)b[C]=x[y],D[C]=A[y]*_,k[C]=x[y+P],V[C]=A[y+P]*_,O=O&&b[C]===k[C]&&D[C]===V[C]&&D[C]===0;if(O)for(var C=0;C<P;++C)p[C]=0;else{t.derivative(b,D,k,V,(h-M)/_,p);for(var C=0;C<P;++C)p[C]/=_}}return p},u.lastT=function(){var h=this._time;return h[h.length-1]},u.stable=function(){for(var h=this._velocity,w=h.length,c=this.dimension-1;c>=0;--c)if(h[--w])return!1;return!0},u.jump=function(h){var w=this.lastT(),c=this.dimension;if(!(h<w||arguments.length!==c+1)){var a=this._state,p=this._velocity,x=a.length-this.dimension,A=this.bounds,P=A[0],y=A[1];this._time.push(w,h);for(var C=0;C<2;++C)for(var M=0;M<c;++M)a.push(a[x++]),p.push(0);this._time.push(h);for(var M=c;M>0;--M)a.push(i(P[M-1],y[M-1],arguments[M])),p.push(0)}},u.push=function(h){var w=this.lastT(),c=this.dimension;if(!(h<w||arguments.length!==c+1)){var a=this._state,p=this._velocity,x=a.length-this.dimension,A=h-w,P=this.bounds,y=P[0],C=P[1],M=A>1e-6?1/A:0;this._time.push(h);for(var s=c;s>0;--s){var _=i(y[s-1],C[s-1],arguments[s]);a.push(_),p.push((_-a[x++])*M)}}},u.set=function(h){var w=this.dimension;if(!(h<this.lastT()||arguments.length!==w+1)){var c=this._state,a=this._velocity,p=this.bounds,x=p[0],A=p[1];this._time.push(h);for(var P=w;P>0;--P)c.push(i(x[P-1],A[P-1],arguments[P])),a.push(0)}},u.move=function(h){var w=this.lastT(),c=this.dimension;if(!(h<=w||arguments.length!==c+1)){var a=this._state,p=this._velocity,x=a.length-this.dimension,A=this.bounds,P=A[0],y=A[1],C=h-w,M=C>1e-6?1/C:0;this._time.push(h);for(var s=c;s>0;--s){var _=arguments[s];a.push(i(P[s-1],y[s-1],a[x++]+_)),p.push(_*M)}}},u.idle=function(h){var w=this.lastT();if(!(h<w)){var c=this.dimension,a=this._state,p=this._velocity,x=a.length-c,A=this.bounds,P=A[0],y=A[1],C=h-w;this._time.push(h);for(var M=c-1;M>=0;--M)a.push(i(P[M],y[M],a[x]+C*p[x])),p.push(0),x+=1}};function l(h){for(var w=new Array(h),c=0;c<h;++c)w[c]=0;return w}function m(h,w,c){switch(arguments.length){case 0:return new f([0],[0],0);case 1:if(typeof h=="number"){var a=l(h);return new f(a,a,0)}else return new f(h,l(h.length),0);case 2:if(typeof w=="number"){var a=l(h.length);return new f(h,a,+w)}else c=0;case 3:if(h.length!==w.length)throw new Error("state and velocity lengths must match");return new f(h,w,c)}}},3840:function(v){v.exports=P;var g=0,r=1;function t(y,C,M,s,_,b){this._color=y,this.key=C,this.value=M,this.left=s,this.right=_,this._count=b}function o(y){return new t(y._color,y.key,y.value,y.left,y.right,y._count)}function i(y,C){return new t(y,C.key,C.value,C.left,C.right,C._count)}function f(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function u(y,C){this._compare=y,this.root=C}var l=u.prototype;Object.defineProperty(l,"keys",{get:function(){var y=[];return this.forEach(function(C,M){y.push(C)}),y}}),Object.defineProperty(l,"values",{get:function(){var y=[];return this.forEach(function(C,M){y.push(M)}),y}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(y,C){for(var M=this._compare,s=this.root,_=[],b=[];s;){var k=M(y,s.key);_.push(s),b.push(k),k<=0?s=s.left:s=s.right}_.push(new t(g,y,C,null,null,1));for(var D=_.length-2;D>=0;--D){var s=_[D];b[D]<=0?_[D]=new t(s._color,s.key,s.value,_[D+1],s.right,s._count+1):_[D]=new t(s._color,s.key,s.value,s.left,_[D+1],s._count+1)}for(var D=_.length-1;D>1;--D){var V=_[D-1],s=_[D];if(V._color===r||s._color===r)break;var O=_[D-2];if(O.left===V)if(V.left===s){var N=O.right;if(N&&N._color===g)V._color=r,O.right=i(r,N),O._color=g,D-=1;else{if(O._color=g,O.left=V.right,V._color=r,V.right=O,_[D-2]=V,_[D-1]=s,f(O),f(V),D>=3){var B=_[D-3];B.left===O?B.left=V:B.right=V}break}}else{var N=O.right;if(N&&N._color===g)V._color=r,O.right=i(r,N),O._color=g,D-=1;else{if(V.right=s.left,O._color=g,O.left=s.right,s._color=r,s.left=V,s.right=O,_[D-2]=s,_[D-1]=V,f(O),f(V),f(s),D>=3){var B=_[D-3];B.left===O?B.left=s:B.right=s}break}}else if(V.right===s){var N=O.left;if(N&&N._color===g)V._color=r,O.left=i(r,N),O._color=g,D-=1;else{if(O._color=g,O.right=V.left,V._color=r,V.left=O,_[D-2]=V,_[D-1]=s,f(O),f(V),D>=3){var B=_[D-3];B.right===O?B.right=V:B.left=V}break}}else{var N=O.left;if(N&&N._color===g)V._color=r,O.left=i(r,N),O._color=g,D-=1;else{if(V.left=s.right,O._color=g,O.right=s.left,s._color=r,s.right=V,s.left=O,_[D-2]=s,_[D-1]=V,f(O),f(V),f(s),D>=3){var B=_[D-3];B.right===O?B.right=s:B.left=s}break}}}return _[0]._color=r,new u(M,_[0])};function m(y,C){if(C.left){var M=m(y,C.left);if(M)return M}var M=y(C.key,C.value);if(M)return M;if(C.right)return m(y,C.right)}function h(y,C,M,s){var _=C(y,s.key);if(_<=0){if(s.left){var b=h(y,C,M,s.left);if(b)return b}var b=M(s.key,s.value);if(b)return b}if(s.right)return h(y,C,M,s.right)}function w(y,C,M,s,_){var b=M(y,_.key),k=M(C,_.key),D;if(b<=0&&(_.left&&(D=w(y,C,M,s,_.left),D)||k>0&&(D=s(_.key,_.value),D)))return D;if(k>0&&_.right)return w(y,C,M,s,_.right)}l.forEach=function(C,M,s){if(this.root)switch(arguments.length){case 1:return m(C,this.root);case 2:return h(M,this._compare,C,this.root);case 3:return this._compare(M,s)>=0?void 0:w(M,s,this._compare,C,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var y=[],C=this.root;C;)y.push(C),C=C.left;return new c(this,y)}}),Object.defineProperty(l,"end",{get:function(){for(var y=[],C=this.root;C;)y.push(C),C=C.right;return new c(this,y)}}),l.at=function(y){if(y<0)return new c(this,[]);for(var C=this.root,M=[];;){if(M.push(C),C.left){if(y<C.left._count){C=C.left;continue}y-=C.left._count}if(!y)return new c(this,M);if(y-=1,C.right){if(y>=C.right._count)break;C=C.right}else break}return new c(this,[])},l.ge=function(y){for(var C=this._compare,M=this.root,s=[],_=0;M;){var b=C(y,M.key);s.push(M),b<=0&&(_=s.length),b<=0?M=M.left:M=M.right}return s.length=_,new c(this,s)},l.gt=function(y){for(var C=this._compare,M=this.root,s=[],_=0;M;){var b=C(y,M.key);s.push(M),b<0&&(_=s.length),b<0?M=M.left:M=M.right}return s.length=_,new c(this,s)},l.lt=function(y){for(var C=this._compare,M=this.root,s=[],_=0;M;){var b=C(y,M.key);s.push(M),b>0&&(_=s.length),b<=0?M=M.left:M=M.right}return s.length=_,new c(this,s)},l.le=function(y){for(var C=this._compare,M=this.root,s=[],_=0;M;){var b=C(y,M.key);s.push(M),b>=0&&(_=s.length),b<0?M=M.left:M=M.right}return s.length=_,new c(this,s)},l.find=function(y){for(var C=this._compare,M=this.root,s=[];M;){var _=C(y,M.key);if(s.push(M),_===0)return new c(this,s);_<=0?M=M.left:M=M.right}return new c(this,[])},l.remove=function(y){var C=this.find(y);return C?C.remove():this},l.get=function(y){for(var C=this._compare,M=this.root;M;){var s=C(y,M.key);if(s===0)return M.value;s<=0?M=M.left:M=M.right}};function c(y,C){this.tree=y,this._stack=C}var a=c.prototype;Object.defineProperty(a,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(a,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),a.clone=function(){return new c(this.tree,this._stack.slice())};function p(y,C){y.key=C.key,y.value=C.value,y.left=C.left,y.right=C.right,y._color=C._color,y._count=C._count}function x(y){for(var C,M,s,_,b=y.length-1;b>=0;--b){if(C=y[b],b===0){C._color=r;return}if(M=y[b-1],M.left===C){if(s=M.right,s.right&&s.right._color===g){if(s=M.right=o(s),_=s.right=o(s.right),M.right=s.left,s.left=M,s.right=_,s._color=M._color,C._color=r,M._color=r,_._color=r,f(M),f(s),b>1){var k=y[b-2];k.left===M?k.left=s:k.right=s}y[b-1]=s;return}else if(s.left&&s.left._color===g){if(s=M.right=o(s),_=s.left=o(s.left),M.right=_.left,s.left=_.right,_.left=M,_.right=s,_._color=M._color,M._color=r,s._color=r,C._color=r,f(M),f(s),f(_),b>1){var k=y[b-2];k.left===M?k.left=_:k.right=_}y[b-1]=_;return}if(s._color===r)if(M._color===g){M._color=r,M.right=i(g,s);return}else{M.right=i(g,s);continue}else{if(s=o(s),M.right=s.left,s.left=M,s._color=M._color,M._color=g,f(M),f(s),b>1){var k=y[b-2];k.left===M?k.left=s:k.right=s}y[b-1]=s,y[b]=M,b+1<y.length?y[b+1]=C:y.push(C),b=b+2}}else{if(s=M.left,s.left&&s.left._color===g){if(s=M.left=o(s),_=s.left=o(s.left),M.left=s.right,s.right=M,s.left=_,s._color=M._color,C._color=r,M._color=r,_._color=r,f(M),f(s),b>1){var k=y[b-2];k.right===M?k.right=s:k.left=s}y[b-1]=s;return}else if(s.right&&s.right._color===g){if(s=M.left=o(s),_=s.right=o(s.right),M.left=_.right,s.right=_.left,_.right=M,_.left=s,_._color=M._color,M._color=r,s._color=r,C._color=r,f(M),f(s),f(_),b>1){var k=y[b-2];k.right===M?k.right=_:k.left=_}y[b-1]=_;return}if(s._color===r)if(M._color===g){M._color=r,M.left=i(g,s);return}else{M.left=i(g,s);continue}else{if(s=o(s),M.left=s.right,s.right=M,s._color=M._color,M._color=g,f(M),f(s),b>1){var k=y[b-2];k.right===M?k.right=s:k.left=s}y[b-1]=s,y[b]=M,b+1<y.length?y[b+1]=C:y.push(C),b=b+2}}}}a.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var C=new Array(y.length),M=y[y.length-1];C[C.length-1]=new t(M._color,M.key,M.value,M.left,M.right,M._count);for(var s=y.length-2;s>=0;--s){var M=y[s];M.left===y[s+1]?C[s]=new t(M._color,M.key,M.value,C[s+1],M.right,M._count):C[s]=new t(M._color,M.key,M.value,M.left,C[s+1],M._count)}if(M=C[C.length-1],M.left&&M.right){var _=C.length;for(M=M.left;M.right;)C.push(M),M=M.right;var b=C[_-1];C.push(new t(M._color,b.key,b.value,M.left,M.right,M._count)),C[_-1].key=M.key,C[_-1].value=M.value;for(var s=C.length-2;s>=_;--s)M=C[s],C[s]=new t(M._color,M.key,M.value,M.left,C[s+1],M._count);C[_-1].left=C[_]}if(M=C[C.length-1],M._color===g){var k=C[C.length-2];k.left===M?k.left=null:k.right===M&&(k.right=null),C.pop();for(var s=0;s<C.length;++s)C[s]._count--;return new u(this.tree._compare,C[0])}else if(M.left||M.right){M.left?p(M,M.left):M.right&&p(M,M.right),M._color=r;for(var s=0;s<C.length-1;++s)C[s]._count--;return new u(this.tree._compare,C[0])}else{if(C.length===1)return new u(this.tree._compare,null);for(var s=0;s<C.length;++s)C[s]._count--;var D=C[C.length-2];x(C),D.left===M?D.left=null:D.right=null}return new u(this.tree._compare,C[0])},Object.defineProperty(a,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(a,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(a,"index",{get:function(){var y=0,C=this._stack;if(C.length===0){var M=this.tree.root;return M?M._count:0}else C[C.length-1].left&&(y=C[C.length-1].left._count);for(var s=C.length-2;s>=0;--s)C[s+1]===C[s].right&&(++y,C[s].left&&(y+=C[s].left._count));return y},enumerable:!0}),a.next=function(){var y=this._stack;if(y.length!==0){var C=y[y.length-1];if(C.right)for(C=C.right;C;)y.push(C),C=C.left;else for(y.pop();y.length>0&&y[y.length-1].right===C;)C=y[y.length-1],y.pop()}},Object.defineProperty(a,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var C=y.length-1;C>0;--C)if(y[C-1].left===y[C])return!0;return!1}}),a.update=function(y){var C=this._stack;if(C.length===0)throw new Error("Can't update empty node!");var M=new Array(C.length),s=C[C.length-1];M[M.length-1]=new t(s._color,s.key,y,s.left,s.right,s._count);for(var _=C.length-2;_>=0;--_)s=C[_],s.left===C[_+1]?M[_]=new t(s._color,s.key,s.value,M[_+1],s.right,s._count):M[_]=new t(s._color,s.key,s.value,s.left,M[_+1],s._count);return new u(this.tree._compare,M[0])},a.prev=function(){var y=this._stack;if(y.length!==0){var C=y[y.length-1];if(C.left)for(C=C.left;C;)y.push(C),C=C.right;else for(y.pop();y.length>0&&y[y.length-1].left===C;)C=y[y.length-1],y.pop()}},Object.defineProperty(a,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var C=y.length-1;C>0;--C)if(y[C-1].right===y[C])return!0;return!1}});function A(y,C){return y<C?-1:y>C?1:0}function P(y){return new u(y||A,null)}},3837:function(v,g,r){v.exports=D;var t=r(4935),o=r(501),i=r(5304),f=r(6429),u=r(6444),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),m=ArrayBuffer,h=DataView;function w(V){return m.isView(V)&&!(V instanceof h)}function c(V){return Array.isArray(V)||w(V)}function a(V,O){return V[0]=O[0],V[1]=O[1],V[2]=O[2],V}function p(V){this.gl=V,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(V)}var x=p.prototype;x.update=function(V){V=V||{};function O(ee,le,j){if(j in V){var Z=V[j],fe=this[j],re;(ee?c(Z)&&c(Z[0]):c(Z))?this[j]=re=[le(Z[0]),le(Z[1]),le(Z[2])]:this[j]=re=[le(Z),le(Z),le(Z)];for(var ce=0;ce<3;++ce)if(re[ce]!==fe[ce])return!0}return!1}var N=O.bind(this,!1,Number),B=O.bind(this,!1,Boolean),z=O.bind(this,!1,String),H=O.bind(this,!0,function(ee){if(c(ee)){if(ee.length===3)return[+ee[0],+ee[1],+ee[2],1];if(ee.length===4)return[+ee[0],+ee[1],+ee[2],+ee[3]]}return[0,0,0,1]}),X,$=!1,ne=!1;if("bounds"in V)for(var q=V.bounds,ue=0;ue<2;++ue)for(var te=0;te<3;++te)q[ue][te]!==this.bounds[ue][te]&&(ne=!0),this.bounds[ue][te]=q[ue][te];if("ticks"in V){X=V.ticks,$=!0,this.autoTicks=!1;for(var ue=0;ue<3;++ue)this.tickSpacing[ue]=0}else N("tickSpacing")&&(this.autoTicks=!0,ne=!0);if(this._firstInit&&("ticks"in V||"tickSpacing"in V||(this.autoTicks=!0),ne=!0,$=!0,this._firstInit=!1),ne&&this.autoTicks&&(X=u.create(this.bounds,this.tickSpacing),$=!0),$){for(var ue=0;ue<3;++ue)X[ue].sort(function(le,j){return le.x-j.x});u.equal(X,this.ticks)?$=!1:this.ticks=X}B("tickEnable"),z("tickFont")&&($=!0),z("tickFontStyle")&&($=!0),z("tickFontWeight")&&($=!0),z("tickFontVariant")&&($=!0),N("tickSize"),N("tickAngle"),N("tickPad"),H("tickColor");var J=z("labels");z("labelFont")&&(J=!0),z("labelFontStyle")&&(J=!0),z("labelFontWeight")&&(J=!0),z("labelFontVariant")&&(J=!0),B("labelEnable"),N("labelSize"),N("labelPad"),H("labelColor"),B("lineEnable"),B("lineMirror"),N("lineWidth"),H("lineColor"),B("lineTickEnable"),B("lineTickMirror"),N("lineTickLength"),N("lineTickWidth"),H("lineTickColor"),B("gridEnable"),N("gridWidth"),H("gridColor"),B("zeroEnable"),H("zeroLineColor"),N("zeroLineWidth"),B("backgroundEnable"),H("backgroundColor");var ie=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],K=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(J||$)&&this._text.update(this.bounds,this.labels,ie,this.ticks,K):this._text=t(this.gl,this.bounds,this.labels,ie,this.ticks,K),this._lines&&$&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};function A(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var P=[new A,new A,new A];function y(V,O,N,B,z){for(var H=V.primalOffset,X=V.primalMinor,$=V.mirrorOffset,ne=V.mirrorMinor,q=B[O],ue=0;ue<3;++ue)if(O!==ue){var te=H,J=$,ie=X,K=ne;q&1<<ue&&(te=$,J=H,ie=ne,K=X),te[ue]=N[0][ue],J[ue]=N[1][ue],z[ue]>0?(ie[ue]=-1,K[ue]=0):(ie[ue]=0,K[ue]=1)}}var C=[0,0,0],M={model:l,view:l,projection:l,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(V){};var s=0,_=[0,0,0],b=[0,0,0],k=[0,0,0];x.draw=function(V){V=V||M;for(var j=this.gl,O=V.model||l,N=V.view||l,B=V.projection||l,z=this.bounds,H=V._ortho||!1,X=f(O,N,B,z,H),$=X.cubeEdges,ne=X.axis,q=N[12],ue=N[13],te=N[14],J=N[15],ie=H?2:1,K=ie*this.pixelRatio*(B[3]*q+B[7]*ue+B[11]*te+B[15]*J)/j.drawingBufferHeight,ee=0;ee<3;++ee)this.lastCubeProps.cubeEdges[ee]=$[ee],this.lastCubeProps.axis[ee]=ne[ee];for(var le=P,ee=0;ee<3;++ee)y(P[ee],ee,this.bounds,$,ne);for(var j=this.gl,Z=C,ee=0;ee<3;++ee)this.backgroundEnable[ee]?Z[ee]=ne[ee]:Z[ee]=0;this._background.draw(O,N,B,z,Z,this.backgroundColor),this._lines.bind(O,N,B,this);for(var ee=0;ee<3;++ee){var fe=[0,0,0];ne[ee]>0?fe[ee]=z[1][ee]:fe[ee]=z[0][ee];for(var re=0;re<2;++re){var ce=(ee+1+re)%3,xe=(ee+1+(re^1))%3;this.gridEnable[ce]&&this._lines.drawGrid(ce,xe,this.bounds,fe,this.gridColor[ce],this.gridWidth[ce]*this.pixelRatio)}for(var re=0;re<2;++re){var ce=(ee+1+re)%3,xe=(ee+1+(re^1))%3;this.zeroEnable[xe]&&Math.min(z[0][xe],z[1][xe])<=0&&Math.max(z[0][xe],z[1][xe])>=0&&this._lines.drawZero(ce,xe,this.bounds,fe,this.zeroLineColor[xe],this.zeroLineWidth[xe]*this.pixelRatio)}}for(var ee=0;ee<3;++ee){this.lineEnable[ee]&&this._lines.drawAxisLine(ee,this.bounds,le[ee].primalOffset,this.lineColor[ee],this.lineWidth[ee]*this.pixelRatio),this.lineMirror[ee]&&this._lines.drawAxisLine(ee,this.bounds,le[ee].mirrorOffset,this.lineColor[ee],this.lineWidth[ee]*this.pixelRatio);for(var Te=a(_,le[ee].primalMinor),we=a(b,le[ee].mirrorMinor),_e=this.lineTickLength,re=0;re<3;++re){var ke=K/O[5*re];Te[re]*=_e[re]*ke,we[re]*=_e[re]*ke}this.lineTickEnable[ee]&&this._lines.drawAxisTicks(ee,le[ee].primalOffset,Te,this.lineTickColor[ee],this.lineTickWidth[ee]*this.pixelRatio),this.lineTickMirror[ee]&&this._lines.drawAxisTicks(ee,le[ee].mirrorOffset,we,this.lineTickColor[ee],this.lineTickWidth[ee]*this.pixelRatio)}this._lines.unbind(),this._text.bind(O,N,B,this.pixelRatio);var Ne,Ee=.5,ze,Ce;function Oe(qe){Ce=[0,0,0],Ce[qe]=1}function Le(qe,ht,vt){var pt=(qe+1)%3,wt=(qe+2)%3,Et=ht[pt],nt=ht[wt],Fe=vt[pt],We=vt[wt];if(Et>0&&We>0){Oe(pt);return}else if(Et>0&&We<0){Oe(pt);return}else if(Et<0&&We>0){Oe(pt);return}else if(Et<0&&We<0){Oe(pt);return}else if(nt>0&&Fe>0){Oe(wt);return}else if(nt>0&&Fe<0){Oe(wt);return}else if(nt<0&&Fe>0){Oe(wt);return}else if(nt<0&&Fe<0){Oe(wt);return}}for(var ee=0;ee<3;++ee){for(var Ge=le[ee].primalMinor,rt=le[ee].mirrorMinor,ot=a(k,le[ee].primalOffset),re=0;re<3;++re)this.lineTickEnable[ee]&&(ot[re]+=K*Ge[re]*Math.max(this.lineTickLength[re],0)/O[5*re]);var $e=[0,0,0];if($e[ee]=1,this.tickEnable[ee]){this.tickAngle[ee]===-3600?(this.tickAngle[ee]=0,this.tickAlign[ee]="auto"):this.tickAlign[ee]=-1,ze=1,Ne=[this.tickAlign[ee],Ee,ze],Ne[0]==="auto"?Ne[0]=s:Ne[0]=parseInt(""+Ne[0]),Ce=[0,0,0],Le(ee,Ge,rt);for(var re=0;re<3;++re)ot[re]+=K*Ge[re]*this.tickPad[re]/O[5*re];this._text.drawTicks(ee,this.tickSize[ee],this.tickAngle[ee],ot,this.tickColor[ee],$e,Ce,Ne)}if(this.labelEnable[ee]){ze=0,Ce=[0,0,0],this.labels[ee].length>4&&(Oe(ee),ze=1),Ne=[this.labelAlign[ee],Ee,ze],Ne[0]==="auto"?Ne[0]=s:Ne[0]=parseInt(""+Ne[0]);for(var re=0;re<3;++re)ot[re]+=K*Ge[re]*this.labelPad[re]/O[5*re];ot[ee]+=.5*(z[0][ee]+z[1][ee]),this._text.drawLabel(ee,this.labelSize[ee],this.labelAngle[ee],ot,this.labelColor[ee],[0,0,0],Ce,Ne)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function D(V,O){var N=new p(V);return N.update(O),N}},5304:function(v,g,r){v.exports=l;var t=r(2762),o=r(8116),i=r(1879).bg;function f(m,h,w,c){this.gl=m,this.buffer=h,this.vao=w,this.shader=c}var u=f.prototype;u.draw=function(m,h,w,c,a,p){for(var x=!1,A=0;A<3;++A)x=x||a[A];if(x){var P=this.gl;P.enable(P.POLYGON_OFFSET_FILL),P.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:m,view:h,projection:w,bounds:c,enable:a,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),P.disable(P.POLYGON_OFFSET_FILL)}},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function l(m){for(var h=[],w=[],c=0,a=0;a<3;++a)for(var p=(a+1)%3,x=(a+2)%3,A=[0,0,0],P=[0,0,0],y=-1;y<=1;y+=2){w.push(c,c+2,c+1,c+1,c+2,c+3),A[a]=y,P[a]=y;for(var C=-1;C<=1;C+=2){A[p]=C;for(var M=-1;M<=1;M+=2)A[x]=M,h.push(A[0],A[1],A[2],P[0],P[1],P[2]),c+=1}var s=p;p=x,x=s}var _=t(m,new Float32Array(h)),b=t(m,new Uint16Array(w),m.ELEMENT_ARRAY_BUFFER),k=o(m,[{buffer:_,type:m.FLOAT,size:3,offset:0,stride:24},{buffer:_,type:m.FLOAT,size:3,offset:12,stride:24}],b),D=i(m);return D.attributes.position.location=0,D.attributes.normal.location=1,new f(m,_,k,D)}},6429:function(v,g,r){v.exports=y;var t=r(8828),o=r(6760),i=r(5202),f=r(3250),u=new Array(16),l=new Array(8),m=new Array(8),h=new Array(3),w=[0,0,0];(function(){for(var C=0;C<8;++C)l[C]=[1,1,1,1],m[C]=[1,1,1]})();function c(C,M,s){for(var _=0;_<4;++_){C[_]=s[12+_];for(var b=0;b<3;++b)C[_]+=M[b]*s[4*b+_]}}var a=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(C){for(var M=0;M<a.length;++M)if(C=i.positive(C,a[M]),C.length<3)return 0;for(var s=C[0],_=s[0]/s[3],b=s[1]/s[3],k=0,M=1;M+1<C.length;++M){var D=C[M],V=C[M+1],O=D[0]/D[3],N=D[1]/D[3],B=V[0]/V[3],z=V[1]/V[3],H=O-_,X=N-b,$=B-_,ne=z-b;k+=Math.abs(H*ne-X*$)}return k}var x=[1,1,1],A=[0,0,0],P={cubeEdges:x,axis:A};function y(C,M,s,_,b){o(u,M,C),o(u,s,u);for(var k=0,D=0;D<2;++D){h[2]=_[D][2];for(var V=0;V<2;++V){h[1]=_[V][1];for(var O=0;O<2;++O)h[0]=_[O][0],c(l[k],h,u),k+=1}}for(var N=-1,D=0;D<8;++D){for(var B=l[D][3],z=0;z<3;++z)m[D][z]=l[D][z]/B;b&&(m[D][2]*=-1),B<0&&(N<0||m[D][2]<m[N][2])&&(N=D)}if(N<0){N=0;for(var H=0;H<3;++H){for(var X=(H+2)%3,$=(H+1)%3,ne=-1,q=-1,ue=0;ue<2;++ue){var te=ue<<H,J=te+(ue<<X)+(1-ue<<$),ie=te+(1-ue<<X)+(ue<<$);f(m[te],m[J],m[ie],w)<0||(ue?ne=1:q=1)}if(ne<0||q<0){q>ne&&(N|=1<<H);continue}for(var ue=0;ue<2;++ue){var te=ue<<H,J=te+(ue<<X)+(1-ue<<$),ie=te+(1-ue<<X)+(ue<<$),K=p([l[te],l[J],l[ie],l[te+(1<<X)+(1<<$)]]);ue?ne=K:q=K}if(q>ne){N|=1<<H;continue}}}for(var ee=7^N,le=-1,D=0;D<8;++D)D===N||D===ee||(le<0||m[le][1]>m[D][1])&&(le=D);for(var j=-1,D=0;D<3;++D){var Z=le^1<<D;if(!(Z===N||Z===ee)){j<0&&(j=Z);var $=m[Z];$[0]<m[j][0]&&(j=Z)}}for(var fe=-1,D=0;D<3;++D){var Z=le^1<<D;if(!(Z===N||Z===ee||Z===j)){fe<0&&(fe=Z);var $=m[Z];$[0]>m[fe][0]&&(fe=Z)}}var re=x;re[0]=re[1]=re[2]=0,re[t.log2(j^le)]=le&j,re[t.log2(le^fe)]=le&fe;var ce=fe^7;ce===N||ce===ee?(ce=j^7,re[t.log2(fe^ce)]=ce&fe):re[t.log2(j^ce)]=ce&j;for(var xe=A,Te=N,H=0;H<3;++H)Te&1<<H?xe[H]=-1:xe[H]=1;return P}},501:function(v,g,r){v.exports=x;var t=r(2762),o=r(8116),i=r(1879).n,f=[0,0,0],u=[0,0,0],l=[0,0,0],m=[0,0,0],h=[1,1];function w(A){return A[0]=A[1]=A[2]=0,A}function c(A,P){return A[0]=P[0],A[1]=P[1],A[2]=P[2],A}function a(A,P,y,C,M,s,_,b){this.gl=A,this.vertBuffer=P,this.vao=y,this.shader=C,this.tickCount=M,this.tickOffset=s,this.gridCount=_,this.gridOffset=b}var p=a.prototype;p.bind=function(A,P,y){this.shader.bind(),this.shader.uniforms.model=A,this.shader.uniforms.view=P,this.shader.uniforms.projection=y,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(A,P,y,C,M){var s=w(u);this.shader.uniforms.majorAxis=u,s[A]=P[1][A]-P[0][A],this.shader.uniforms.minorAxis=s;var _=c(m,y);_[A]+=P[0][A],this.shader.uniforms.offset=_,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=C;var b=w(l);b[(A+2)%3]=1,this.shader.uniforms.screenAxis=b,this.vao.draw(this.gl.TRIANGLES,6);var b=w(l);b[(A+1)%3]=1,this.shader.uniforms.screenAxis=b,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(A,P,y,C,M){if(this.tickCount[A]){var s=w(f);s[A]=1,this.shader.uniforms.majorAxis=s,this.shader.uniforms.offset=P,this.shader.uniforms.minorAxis=y,this.shader.uniforms.color=C,this.shader.uniforms.lineWidth=M;var _=w(l);_[A]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[A],this.tickOffset[A])}},p.drawGrid=function(A,P,y,C,M,s){if(this.gridCount[A]){var _=w(u);_[P]=y[1][P]-y[0][P],this.shader.uniforms.minorAxis=_;var b=c(m,C);b[P]+=y[0][P],this.shader.uniforms.offset=b;var k=w(f);k[A]=1,this.shader.uniforms.majorAxis=k;var D=w(l);D[A]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,this.gridCount[A],this.gridOffset[A])}},p.drawZero=function(A,P,y,C,M,s){var _=w(u);this.shader.uniforms.majorAxis=_,_[A]=y[1][A]-y[0][A],this.shader.uniforms.minorAxis=_;var b=c(m,C);b[A]+=y[0][A],this.shader.uniforms.offset=b;var k=w(l);k[P]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function x(A,P,y){var C=[],M=[0,0,0],s=[0,0,0],_=[0,0,0],b=[0,0,0];C.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var k=0;k<3;++k){for(var O=C.length/3|0,D=0;D<y[k].length;++D){var V=+y[k][D].x;C.push(V,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1)}var B=C.length/3|0;M[k]=O,s[k]=B-O;for(var O=C.length/3|0,N=0;N<y[k].length;++N){var V=+y[k][N].x;C.push(V,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1)}var B=C.length/3|0;_[k]=O,b[k]=B-O}var z=t(A,new Float32Array(C)),H=o(A,[{buffer:z,type:A.FLOAT,size:3,stride:0,offset:0}]),X=i(A);return X.attributes.position.location=0,new a(A,z,H,X,s,M,b,_)}},1879:function(v,g,r){var t=r(3236),o=r(9405),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),f=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);g.n=function(w){return o(w,i,f,null,[{name:"position",type:"vec3"}])};var u=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),l=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);g.Q=function(w){return o(w,u,l,null,[{name:"position",type:"vec3"}])};var m=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),h=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);g.bg=function(w){return o(w,m,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(v,g,r){v.exports=p;var t=r(2762),o=r(8116),i=r(4359),f=r(1879).Q,u=window||d.global||{},l=u.__TEXT_CACHE||{};u.__TEXT_CACHE={};var m=3;function h(x,A,P,y){this.gl=x,this.shader=A,this.buffer=P,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var w=h.prototype,c=[0,0];w.bind=function(x,A,P,y){this.vao.bind(),this.shader.bind();var C=this.shader.uniforms;C.model=x,C.view=A,C.projection=P,C.pixelScale=y,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},w.unbind=function(){this.vao.unbind()},w.update=function(x,A,P,y,C){var M=[];function s(H,X,$,ne,q,ue){var te=[$.style,$.weight,$.variant,$.family].join("_"),J=l[te];J||(J=l[te]={});var ie=J[X];ie||(ie=J[X]=a(X,{triangles:!0,font:$.family,fontStyle:$.style,fontWeight:$.weight,fontVariant:$.variant,textAlign:"center",textBaseline:"middle",lineSpacing:q,styletags:ue}));for(var K=(ne||12)/12,ee=ie.positions,le=ie.cells,j=0,Z=le.length;j<Z;++j)for(var fe=le[j],re=2;re>=0;--re){var ce=ee[fe[re]];M.push(K*ce[0],-K*ce[1],H)}}for(var _=[0,0,0],b=[0,0,0],k=[0,0,0],D=[0,0,0],V=1.25,O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},N=0;N<3;++N){k[N]=M.length/m|0,s(.5*(x[0][N]+x[1][N]),A[N],P[N],12,V,O),D[N]=(M.length/m|0)-k[N],_[N]=M.length/m|0;for(var B=0;B<y[N].length;++B)if(y[N][B].text){var z={family:y[N][B].font||C[N].family,style:C[N].fontStyle||C[N].style,weight:C[N].fontWeight||C[N].weight,variant:C[N].fontVariant||C[N].variant};s(y[N][B].x,y[N][B].text,z,y[N][B].fontSize||12,V,O)}b[N]=(M.length/m|0)-_[N]}this.buffer.update(M),this.tickOffset=_,this.tickCount=b,this.labelOffset=k,this.labelCount=D},w.drawTicks=function(x,A,P,y,C,M,s,_){this.tickCount[x]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=C,this.shader.uniforms.angle=P,this.shader.uniforms.scale=A,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=s,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x]))},w.drawLabel=function(x,A,P,y,C,M,s,_){this.labelCount[x]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=C,this.shader.uniforms.angle=P,this.shader.uniforms.scale=A,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=s,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.labelCount[x],this.labelOffset[x]))},w.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function a(x,A){try{return i(x,A)}catch(P){return console.warn('error vectorizing text:"'+x+'" error:',P),{cells:[],positions:[]}}}function p(x,A,P,y,C,M){var s=t(x),_=o(x,[{buffer:s,size:3}]),b=f(x);b.attributes.position.location=0;var k=new h(x,b,s,_);return k.update(A,P,y,C,M),k}},6444:function(v,g){g.create=t,g.equal=o;function r(i,f){var u=i+"",l=u.indexOf("."),m=0;l>=0&&(m=u.length-l-1);var h=Math.pow(10,m),w=Math.round(i*f*h),c=w+"";if(c.indexOf("e")>=0)return c;var a=w/h,p=w%h;w<0?(a=-Math.ceil(a)|0,p=-p|0):(a=Math.floor(a)|0,p=p|0);var x=""+a;if(w<0&&(x="-"+x),m){for(var A=""+p;A.length<m;)A="0"+A;return x+"."+A}else return x}function t(i,f){for(var u=[],l=0;l<3;++l){var m=[];.5*(i[0][l]+i[1][l]);for(var h=0;h*f[l]<=i[1][l];++h)m.push({x:h*f[l],text:r(f[l],h)});for(var h=-1;h*f[l]>=i[0][l];--h)m.push({x:h*f[l],text:r(f[l],h)});u.push(m)}return u}function o(i,f){for(var u=0;u<3;++u){if(i[u].length!==f[u].length)return!1;for(var l=0;l<i[u].length;++l){var m=i[u][l],h=f[u][l];if(m.x!==h.x||m.text!==h.text||m.font!==h.font||m.fontColor!==h.fontColor||m.fontSize!==h.fontSize||m.dx!==h.dx||m.dy!==h.dy)return!1}}return!0}},5445:function(v,g,r){v.exports=P;var t=r(5033),o=r(5202),i=r(6429),f=r(6760),u=r(5665),l=r(5352),m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function w(y,C,M){this.lo=y,this.hi=C,this.pixelsPerDataUnit=M}var c=[0,0,0,1],a=[0,0,0,1];function p(y,C,M,s,_){for(var b=0;b<3;++b){for(var k=c,D=a,V=0;V<3;++V)D[V]=k[V]=M[V];D[3]=k[3]=1,D[b]+=1,l(D,D,C),D[3]<0&&(y[b]=1/0),k[b]-=1,l(k,k,C),k[3]<0&&(y[b]=1/0);var O=(k[0]/k[3]-D[0]/D[3])*s,N=(k[1]/k[3]-D[1]/D[3])*_;y[b]=.25*Math.sqrt(O*O+N*N)}return y}var x=[new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0)],A=[0,0,0];function P(y,C,M,s,N){var b=C.model||m,k=C.view||m,D=C.projection||m,V=C._ortho||!1,O=y.bounds,N=N||i(b,k,D,O,V),B=N.axis;f(h,k,b),f(h,D,h);for(var z=x,H=0;H<3;++H)z[H].lo=1/0,z[H].hi=-1/0,z[H].pixelsPerDataUnit=1/0;var X=t(u(h,h));u(h,h);for(var $=0;$<3;++$){var ne=($+1)%3,q=($+2)%3,ue=A;e:for(var H=0;H<2;++H){var te=[];if(B[$]<0!=!!H){ue[$]=O[H][$];for(var J=0;J<2;++J){ue[ne]=O[J^H][ne];for(var ie=0;ie<2;++ie)ue[q]=O[ie^J^H][q],te.push(ue.slice())}for(var K=V?5:4,J=K;J===K;++J){if(te.length===0)continue e;te=o.positive(te,X[J])}for(var J=0;J<te.length;++J)for(var q=te[J],ee=p(A,h,q,M,s),ie=0;ie<3;++ie)z[ie].lo=Math.min(z[ie].lo,q[ie]),z[ie].hi=Math.max(z[ie].hi,q[ie]),ie!==$&&(z[ie].pixelsPerDataUnit=Math.min(z[ie].pixelsPerDataUnit,Math.abs(ee[ie])))}}}return z}},2762:function(v,g,r){var t=r(1888),o=r(5298),i=r(9618),f=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function u(a,p,x,A,P){this.gl=a,this.type=p,this.handle=x,this.length=A,this.usage=P}var l=u.prototype;l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)};function m(a,p,x,A,P,y){var C=P.length*P.BYTES_PER_ELEMENT;if(y<0)return a.bufferData(p,P,A),C;if(C+y>x)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return a.bufferSubData(p,y,P),x}function h(a,p){for(var x=t.malloc(a.length,p),A=a.length,P=0;P<A;++P)x[P]=a[P];return x}function w(a,p){for(var x=1,A=p.length-1;A>=0;--A){if(p[A]!==x)return!1;x*=a[A]}return!0}l.update=function(a,p){if(typeof p!="number"&&(p=-1),this.bind(),typeof a=="object"&&typeof a.shape<"u"){var x=a.dtype;if(f.indexOf(x)<0&&(x="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var A=gl.getExtension("OES_element_index_uint");A&&x!=="uint16"?x="uint32":x="uint16"}if(x===a.dtype&&w(a.shape,a.stride))a.offset===0&&a.data.length===a.shape[0]?this.length=m(this.gl,this.type,this.length,this.usage,a.data,p):this.length=m(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),p);else{var P=t.malloc(a.size,x),y=i(P,a.shape);o.assign(y,a),p<0?this.length=m(this.gl,this.type,this.length,this.usage,P,p):this.length=m(this.gl,this.type,this.length,this.usage,P.subarray(0,a.size),p),t.free(P)}}else if(Array.isArray(a)){var C;this.type===this.gl.ELEMENT_ARRAY_BUFFER?C=h(a,"uint16"):C=h(a,"float32"),p<0?this.length=m(this.gl,this.type,this.length,this.usage,C,p):this.length=m(this.gl,this.type,this.length,this.usage,C.subarray(0,a.length),p),t.free(C)}else if(typeof a=="object"&&typeof a.length=="number")this.length=m(this.gl,this.type,this.length,this.usage,a,p);else if(typeof a=="number"||a===void 0){if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");a=a|0,a<=0&&(a=1),this.gl.bufferData(this.type,a|0,this.usage),this.length=a}else throw new Error("gl-buffer: Invalid data type")};function c(a,p,x,A){if(x=x||a.ARRAY_BUFFER,A=A||a.DYNAMIC_DRAW,x!==a.ARRAY_BUFFER&&x!==a.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(A!==a.DYNAMIC_DRAW&&A!==a.STATIC_DRAW&&A!==a.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var P=a.createBuffer(),y=new u(a,x,P,0,A);return y.update(p),y}v.exports=c},6405:function(v,g,r){var t=r(2931);v.exports=function(i,f){var u=i.positions,l=i.vectors,m={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return f&&(f[0]=[0,0,0],f[1]=[0,0,0]),m;for(var h=0,w=1/0,c=-1/0,a=1/0,p=-1/0,x=1/0,A=-1/0,P=null,y=null,C=[],M=1/0,s=!1,_=i.coneSizemode==="raw",b=0;b<u.length;b++){var k=u[b];w=Math.min(k[0],w),c=Math.max(k[0],c),a=Math.min(k[1],a),p=Math.max(k[1],p),x=Math.min(k[2],x),A=Math.max(k[2],A);var D=l[b];if(t.length(D)>h&&(h=t.length(D)),b&&!_){var V=2*t.distance(P,k)/(t.length(y)+t.length(D));V?(M=Math.min(M,V),s=!1):s=!0}s||(P=k,y=D),C.push(D)}var O=[w,a,x],N=[c,p,A];f&&(f[0]=O,f[1]=N),h===0&&(h=1);var B=1/h;isFinite(M)||(M=1),m.vectorScale=M;var z=i.coneSize||(_?1:.5);i.absoluteConeSize&&(z=i.absoluteConeSize*B),m.coneScale=z;for(var b=0,H=0;b<u.length;b++)for(var k=u[b],X=k[0],$=k[1],ne=k[2],q=C[b],ue=t.length(q)*B,te=0,J=8;te<J;te++){m.positions.push([X,$,ne,H++]),m.positions.push([X,$,ne,H++]),m.positions.push([X,$,ne,H++]),m.positions.push([X,$,ne,H++]),m.positions.push([X,$,ne,H++]),m.positions.push([X,$,ne,H++]),m.vectors.push(q),m.vectors.push(q),m.vectors.push(q),m.vectors.push(q),m.vectors.push(q),m.vectors.push(q),m.vertexIntensity.push(ue,ue,ue),m.vertexIntensity.push(ue,ue,ue);var ie=m.positions.length;m.cells.push([ie-6,ie-5,ie-4],[ie-3,ie-2,ie-1])}return m};var o=r(614);v.exports.createMesh=r(9060),v.exports.createConeMesh=function(i,f){return v.exports.createMesh(i,f,{shaders:o,traceType:"cone"})}},9060:function(v,g,r){var t=r(9405),o=r(2762),i=r(8116),f=r(7766),u=r(6760),l=r(7608),m=r(9618),h=r(6729),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(C,M,s,_,b,k,D,V,O,N,B){this.gl=C,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=M,this.dirty=!0,this.triShader=s,this.pickShader=_,this.trianglePositions=b,this.triangleVectors=k,this.triangleColors=V,this.triangleUVs=O,this.triangleIds=D,this.triangleVAO=N,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=B,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var a=c.prototype;a.isOpaque=function(){return this.opacity>=1},a.isTransparent=function(){return this.opacity<1},a.pickSlots=1,a.setPickBase=function(C){this.pickId=C};function p(C){for(var M=h({colormap:C,nshades:256,format:"rgba"}),s=new Uint8Array(256*4),_=0;_<256;++_){for(var b=M[_],k=0;k<3;++k)s[4*_+k]=b[k];s[4*_+3]=b[3]*255}return m(s,[256,256,4],[4,0,1])}function x(C){for(var M=C.length,s=new Array(M),_=0;_<M;++_)s[_]=C[_][2];return s}a.update=function(C){C=C||{};var M=this.gl;this.dirty=!0,"lightPosition"in C&&(this.lightPosition=C.lightPosition),"opacity"in C&&(this.opacity=C.opacity),"ambient"in C&&(this.ambientLight=C.ambient),"diffuse"in C&&(this.diffuseLight=C.diffuse),"specular"in C&&(this.specularLight=C.specular),"roughness"in C&&(this.roughness=C.roughness),"fresnel"in C&&(this.fresnel=C.fresnel),C.tubeScale!==void 0&&(this.tubeScale=C.tubeScale),C.vectorScale!==void 0&&(this.vectorScale=C.vectorScale),C.coneScale!==void 0&&(this.coneScale=C.coneScale),C.coneOffset!==void 0&&(this.coneOffset=C.coneOffset),C.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=M.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=M.LINEAR,this.texture.setPixels(p(C.colormap)),this.texture.generateMipmap());var s=C.cells,_=C.positions,b=C.vectors;if(!(!_||!s||!b)){var k=[],D=[],V=[],O=[],N=[];this.cells=s,this.positions=_,this.vectors=b;var B=C.meshColor||[1,1,1,1],z=C.vertexIntensity,H=1/0,X=-1/0;if(z)if(C.vertexIntensityBounds)H=+C.vertexIntensityBounds[0],X=+C.vertexIntensityBounds[1];else for(var $=0;$<z.length;++$){var ne=z[$];H=Math.min(H,ne),X=Math.max(X,ne)}else for(var $=0;$<_.length;++$){var ne=_[$][2];H=Math.min(H,ne),X=Math.max(X,ne)}z?this.intensity=z:this.intensity=x(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var $=0;$<_.length;++$)for(var q=_[$],ue=0;ue<3;++ue)isNaN(q[ue])||!isFinite(q[ue])||(this.bounds[0][ue]=Math.min(this.bounds[0][ue],q[ue]),this.bounds[1][ue]=Math.max(this.bounds[1][ue],q[ue]));var te=0;e:for(var $=0;$<s.length;++$){var J=s[$];switch(J.length){case 3:for(var ue=0;ue<3;++ue)for(var ie=J[ue],q=_[ie],K=0;K<3;++K)if(isNaN(q[K])||!isFinite(q[K]))continue e;for(var ue=0;ue<3;++ue){var ie=J[2-ue],q=_[ie];k.push(q[0],q[1],q[2],q[3]);var ee=b[ie];D.push(ee[0],ee[1],ee[2],ee[3]||0);var le=B;le.length===3?V.push(le[0],le[1],le[2],1):V.push(le[0],le[1],le[2],le[3]);var j;z?j=[(z[ie]-H)/(X-H),0]:j=[(q[2]-H)/(X-H),0],O.push(j[0],j[1]),N.push($)}te+=1;break}}this.triangleCount=te,this.trianglePositions.update(k),this.triangleVectors.update(D),this.triangleColors.update(V),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(N))}},a.drawTransparent=a.draw=function(C){C=C||{};for(var M=this.gl,s=C.model||w,_=C.view||w,b=C.projection||w,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)k[0][D]=Math.max(k[0][D],this.clipBounds[0][D]),k[1][D]=Math.min(k[1][D],this.clipBounds[1][D]);var V={model:s,view:_,projection:b,inverseModel:w.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};V.inverseModel=l(V.inverseModel,V.model),M.disable(M.CULL_FACE),this.texture.bind(0);var O=new Array(16);u(O,V.view,V.model),u(O,V.projection,O),l(O,O);for(var D=0;D<3;++D)V.eyePosition[D]=O[12+D]/O[15];for(var N=O[15],D=0;D<3;++D)N+=this.lightPosition[D]*O[4*D+3];for(var D=0;D<3;++D){for(var B=O[12+D],z=0;z<3;++z)B+=O[4*z+D]*this.lightPosition[z];V.lightPosition[D]=B/N}if(this.triangleCount>0){var H=this.triShader;H.bind(),H.uniforms=V,this.triangleVAO.bind(),M.drawArrays(M.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},a.drawPick=function(C){C=C||{};for(var M=this.gl,s=C.model||w,_=C.view||w,b=C.projection||w,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)k[0][D]=Math.max(k[0][D],this.clipBounds[0][D]),k[1][D]=Math.min(k[1][D],this.clipBounds[1][D]);this._model=[].slice.call(s),this._view=[].slice.call(_),this._projection=[].slice.call(b),this._resolution=[M.drawingBufferWidth,M.drawingBufferHeight];var V={model:s,view:_,projection:b,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=V,this.triangleCount>0&&(this.triangleVAO.bind(),M.drawArrays(M.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},a.pick=function(C){if(!C||C.id!==this.pickId)return null;var M=C.value[0]+256*C.value[1]+65536*C.value[2],s=this.cells[M],_=this.positions[s[1]].slice(0,3),b={position:_,dataCoordinate:_,index:Math.floor(s[1]/48)};return this.traceType==="cone"?b.index=Math.floor(s[1]/48):this.traceType==="streamtube"&&(b.intensity=this.intensity[s[1]],b.velocity=this.vectors[s[1]].slice(0,3),b.divergence=this.vectors[s[1]][3],b.index=M),b},a.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function A(C,M){var s=t(C,M.meshShader.vertex,M.meshShader.fragment,null,M.meshShader.attributes);return s.attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s.attributes.vector.location=4,s}function P(C,M){var s=t(C,M.pickShader.vertex,M.pickShader.fragment,null,M.pickShader.attributes);return s.attributes.position.location=0,s.attributes.id.location=1,s.attributes.vector.location=4,s}function y(C,M,s){var _=s.shaders;arguments.length===1&&(M=C,C=M.gl);var b=A(C,_),k=P(C,_),D=f(C,m(new Uint8Array([255,255,255,255]),[1,1,4]));D.generateMipmap(),D.minFilter=C.LINEAR_MIPMAP_LINEAR,D.magFilter=C.LINEAR;var V=o(C),O=o(C),N=o(C),B=o(C),z=o(C),H=i(C,[{buffer:V,type:C.FLOAT,size:4},{buffer:z,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:N,type:C.FLOAT,size:4},{buffer:B,type:C.FLOAT,size:2},{buffer:O,type:C.FLOAT,size:4}]),X=new c(C,D,b,k,V,O,z,N,B,H,s.traceType||"cone");return X.update(M),X}v.exports=y},614:function(v,g,r){var t=r(3236),o=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);g.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},g.pickShader={vertex:f,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(v){v.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(v,g,r){var t=r(737);v.exports=function(i){return t[i]}},9165:function(v,g,r){v.exports=c;var t=r(2762),o=r(8116),i=r(3436),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(a,p,x,A){this.gl=a,this.shader=A,this.buffer=p,this.vao=x,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=u.prototype;l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(a){var p=this.gl,x=this.shader.uniforms;this.shader.bind();var A=x.view=a.view||f,P=x.projection=a.projection||f;x.model=a.model||f,x.clipBounds=this.clipBounds,x.opacity=this.opacity;var y=A[12],C=A[13],M=A[14],s=A[15],_=a._ortho||!1,b=_?2:1,k=b*this.pixelRatio*(P[3]*y+P[7]*C+P[11]*M+P[15]*s)/p.drawingBufferHeight;this.vao.bind();for(var D=0;D<3;++D)p.lineWidth(this.lineWidth[D]*this.pixelRatio),x.capSize=this.capSize[D]*k,this.lineCount[D]&&p.drawArrays(p.LINES,this.lineOffset[D],this.lineCount[D]);this.vao.unbind()};function m(a,p){for(var x=0;x<3;++x)a[0][x]=Math.min(a[0][x],p[x]),a[1][x]=Math.max(a[1][x],p[x])}var h=function(){for(var a=new Array(3),p=0;p<3;++p){for(var x=[],A=1;A<=2;++A)for(var P=-1;P<=1;P+=2){var y=(A+p)%3,C=[0,0,0];C[y]=P,x.push(C)}a[p]=x}return a}();function w(a,p,x,A){for(var P=h[A],y=0;y<P.length;++y){var C=P[y];a.push(p[0],p[1],p[2],x[0],x[1],x[2],x[3],C[0],C[1],C[2])}return P.length}l.update=function(a){a=a||{},"lineWidth"in a&&(this.lineWidth=a.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in a&&(this.capSize=a.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in a&&(this.opacity=+a.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=a.color||[[0,0,0],[0,0,0],[0,0,0]],x=a.position,A=a.error;if(Array.isArray(p[0])||(p=[p,p,p]),x&&A){var P=[],y=x.length,C=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var M=0;M<3;++M){this.lineOffset[M]=C;e:for(var s=0;s<y;++s){for(var _=x[s],b=0;b<3;++b)if(isNaN(_[b])||!isFinite(_[b]))continue e;var k=A[s],D=p[M];if(Array.isArray(D[0])&&(D=p[s]),D.length===3?D=[D[0],D[1],D[2],1]:D.length===4&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),!(isNaN(k[0][M])||isNaN(k[1][M]))){if(k[0][M]<0){var V=_.slice();V[M]+=k[0][M],P.push(_[0],_[1],_[2],D[0],D[1],D[2],D[3],0,0,0,V[0],V[1],V[2],D[0],D[1],D[2],D[3],0,0,0),m(this.bounds,V),C+=2+w(P,V,D,M)}if(k[1][M]>0){var V=_.slice();V[M]+=k[1][M],P.push(_[0],_[1],_[2],D[0],D[1],D[2],D[3],0,0,0,V[0],V[1],V[2],D[0],D[1],D[2],D[3],0,0,0),m(this.bounds,V),C+=2+w(P,V,D,M)}}}this.lineCount[M]=C-this.lineOffset[M]}this.buffer.update(P)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function c(a){var p=a.gl,x=t(p),A=o(p,[{buffer:x,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:x,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:x,type:p.FLOAT,size:3,offset:28,stride:40}]),P=i(p);P.attributes.position.location=0,P.attributes.color.location=1,P.attributes.offset.location=2;var y=new u(p,x,A,P);return y.update(a),y}},3436:function(v,g,r){var t=r(3236),o=r(9405),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),f=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);v.exports=function(u){return o(u,i,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(v,g,r){var t=r(7766);v.exports=C;var o=null,i,f,u,l;function m(M){var s=M.getParameter(M.FRAMEBUFFER_BINDING),_=M.getParameter(M.RENDERBUFFER_BINDING),b=M.getParameter(M.TEXTURE_BINDING_2D);return[s,_,b]}function h(M,s){M.bindFramebuffer(M.FRAMEBUFFER,s[0]),M.bindRenderbuffer(M.RENDERBUFFER,s[1]),M.bindTexture(M.TEXTURE_2D,s[2])}function w(M,s){var _=M.getParameter(s.MAX_COLOR_ATTACHMENTS_WEBGL);o=new Array(_+1);for(var b=0;b<=_;++b){for(var k=new Array(_),D=0;D<b;++D)k[D]=M.COLOR_ATTACHMENT0+D;for(var D=b;D<_;++D)k[D]=M.NONE;o[b]=k}}function c(M){switch(M){case i:throw new Error("gl-fbo: Framebuffer unsupported");case f:throw new Error("gl-fbo: Framebuffer incomplete attachment");case u:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function a(M,s,_,b,k,D){if(!b)return null;var V=t(M,s,_,k,b);return V.magFilter=M.NEAREST,V.minFilter=M.NEAREST,V.mipSamples=1,V.bind(),M.framebufferTexture2D(M.FRAMEBUFFER,D,M.TEXTURE_2D,V.handle,0),V}function p(M,s,_,b,k){var D=M.createRenderbuffer();return M.bindRenderbuffer(M.RENDERBUFFER,D),M.renderbufferStorage(M.RENDERBUFFER,b,s,_),M.framebufferRenderbuffer(M.FRAMEBUFFER,k,M.RENDERBUFFER,D),D}function x(M){var s=m(M.gl),_=M.gl,b=M.handle=_.createFramebuffer(),k=M._shape[0],D=M._shape[1],V=M.color.length,O=M._ext,N=M._useStencil,B=M._useDepth,z=M._colorType;_.bindFramebuffer(_.FRAMEBUFFER,b);for(var H=0;H<V;++H)M.color[H]=a(_,k,D,z,_.RGBA,_.COLOR_ATTACHMENT0+H);V===0?(M._color_rb=p(_,k,D,_.RGBA4,_.COLOR_ATTACHMENT0),O&&O.drawBuffersWEBGL(o[0])):V>1&&O.drawBuffersWEBGL(o[V]);var X=_.getExtension("WEBGL_depth_texture");X?N?M.depth=a(_,k,D,X.UNSIGNED_INT_24_8_WEBGL,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):B&&(M.depth=a(_,k,D,_.UNSIGNED_SHORT,_.DEPTH_COMPONENT,_.DEPTH_ATTACHMENT)):B&&N?M._depth_rb=p(_,k,D,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):B?M._depth_rb=p(_,k,D,_.DEPTH_COMPONENT16,_.DEPTH_ATTACHMENT):N&&(M._depth_rb=p(_,k,D,_.STENCIL_INDEX,_.STENCIL_ATTACHMENT));var $=_.checkFramebufferStatus(_.FRAMEBUFFER);if($!==_.FRAMEBUFFER_COMPLETE){M._destroyed=!0,_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(M.handle),M.handle=null,M.depth&&(M.depth.dispose(),M.depth=null),M._depth_rb&&(_.deleteRenderbuffer(M._depth_rb),M._depth_rb=null);for(var H=0;H<M.color.length;++H)M.color[H].dispose(),M.color[H]=null;M._color_rb&&(_.deleteRenderbuffer(M._color_rb),M._color_rb=null),h(_,s),c($)}h(_,s)}function A(M,s,_,b,k,D,V,O){this.gl=M,this._shape=[s|0,_|0],this._destroyed=!1,this._ext=O,this.color=new Array(k);for(var N=0;N<k;++N)this.color[N]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=b,this._useDepth=D,this._useStencil=V;var B=this,z=[s|0,_|0];Object.defineProperties(z,{0:{get:function(){return B._shape[0]},set:function(H){return B.width=H}},1:{get:function(){return B._shape[1]},set:function(H){return B.height=H}}}),this._shapeVector=z,x(this)}var P=A.prototype;function y(M,s,_){if(M._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(M._shape[0]===s&&M._shape[1]===_)){var b=M.gl,k=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(s<0||s>k||_<0||_>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");M._shape[0]=s,M._shape[1]=_;for(var D=m(b),V=0;V<M.color.length;++V)M.color[V].shape=M._shape;M._color_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,M._color_rb),b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,M._shape[0],M._shape[1])),M.depth&&(M.depth.shape=M._shape),M._depth_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,M._depth_rb),M._useDepth&&M._useStencil?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,M._shape[0],M._shape[1]):M._useDepth?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,M._shape[0],M._shape[1]):M._useStencil&&b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX,M._shape[0],M._shape[1])),b.bindFramebuffer(b.FRAMEBUFFER,M.handle);var O=b.checkFramebufferStatus(b.FRAMEBUFFER);O!==b.FRAMEBUFFER_COMPLETE&&(M.dispose(),h(b,D),c(O)),h(b,D)}}Object.defineProperties(P,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(M){if(Array.isArray(M)||(M=[M|0,M|0]),M.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var s=M[0]|0,_=M[1]|0;return y(this,s,_),[s,_]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(M){return M=M|0,y(this,M,this._shape[1]),M},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(M){return M=M|0,y(this,this._shape[0],M),M},enumerable:!1}}),P.bind=function(){if(!this._destroyed){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this.handle),M.viewport(0,0,this._shape[0],this._shape[1])}},P.dispose=function(){if(!this._destroyed){this._destroyed=!0;var M=this.gl;M.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(M.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var s=0;s<this.color.length;++s)this.color[s].dispose(),this.color[s]=null;this._color_rb&&(M.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function C(M,s,_,b){i||(i=M.FRAMEBUFFER_UNSUPPORTED,f=M.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,u=M.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=M.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=M.getExtension("WEBGL_draw_buffers");if(!o&&k&&w(M,k),Array.isArray(s)&&(b=_,_=s[1]|0,s=s[0]|0),typeof s!="number")throw new Error("gl-fbo: Missing shape parameter");var D=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(s<0||s>D||_<0||_>D)throw new Error("gl-fbo: Parameters are too large for FBO");b=b||{};var V=1;if("color"in b){if(V=Math.max(b.color|0,0),V<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(V>1)if(k){if(V>M.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+V+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var O=M.UNSIGNED_BYTE,N=M.getExtension("OES_texture_float");if(b.float&&V>0){if(!N)throw new Error("gl-fbo: Context does not support floating point textures");O=M.FLOAT}else b.preferFloat&&V>0&&N&&(O=M.FLOAT);var B=!0;"depth"in b&&(B=!!b.depth);var z=!1;return"stencil"in b&&(z=!!b.stencil),new A(M,s,_,O,V,B,z,k)}},2992:function(v,g,r){var t=r(3387).sprintf,o=r(5171),i=r(1848),f=r(1085);v.exports=u;function u(l,m,h){var w=i(m)||"of unknown name (see npm glsl-shader-name)",c="unknown type";h!==void 0&&(c=h===o.FRAGMENT_SHADER?"fragment":"vertex");for(var a=t(`Error compiling %s shader %s:
`,c,w),p=t("%s%s",a,l),x=l.split(`
`),A={},P=0;P<x.length;P++){var y=x[P];if(!(y===""||y==="\0")){var C=parseInt(y.split(":")[2]);if(isNaN(C))throw new Error(t("Could not parse error: %s",y));A[C]=y}}for(var M=f(m).split(`
`),P=0;P<M.length;P++)if(!(!A[P+3]&&!A[P+2]&&!A[P+1])){var s=M[P];if(a+=s+`
`,A[P+1]){var _=A[P+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),a+=t(`^^^ %s

`,_)}}return{long:a.trim(),short:p.trim()}}},2510:function(v,g,r){v.exports=c;var t=r(2478),o=r(7762),i=r(1888),f=r(9405),u=r(2762),l=r(6768);function m(a,p,x,A,P,y,C){this.plot=a,this.shader=p,this.pickShader=x,this.positionBuffer=A,this.weightBuffer=P,this.colorBuffer=y,this.idBuffer=C,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var h=m.prototype,w=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=function(){var a=[1,0,0,0,1,0,0,0,1];return function(){var p=this.plot,x=this.shader,A=this.bounds,P=this.numVertices;if(!(P<=0)){var y=p.gl,C=p.dataBox,M=A[2]-A[0],s=A[3]-A[1],_=C[2]-C[0],b=C[3]-C[1];a[0]=2*M/_,a[4]=2*s/b,a[6]=2*(A[0]-C[0])/_-1,a[7]=2*(A[1]-C[1])/b-1,x.bind();var k=x.uniforms;k.viewTransform=a,k.shape=this.shape;var D=x.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(y.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(y.UNSIGNED_BYTE,!0),y.drawArrays(y.TRIANGLES,0,P)}}}(),h.drawPick=function(){var a=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0];return function(x){var A=this.plot,P=this.pickShader,y=this.bounds,C=this.numVertices;if(!(C<=0)){var M=A.gl,s=A.dataBox,_=y[2]-y[0],b=y[3]-y[1],k=s[2]-s[0],D=s[3]-s[1];a[0]=2*_/k,a[4]=2*b/D,a[6]=2*(y[0]-s[0])/k-1,a[7]=2*(y[1]-s[1])/D-1;for(var V=0;V<4;++V)p[V]=x>>V*8&255;this.pickOffset=x,P.bind();var O=P.uniforms;O.viewTransform=a,O.pickOffset=p,O.shape=this.shape;var N=P.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,C),x+this.shape[0]*this.shape[1]}}}(),h.pick=function(a,p,x){var A=this.pickOffset,P=this.shape[0]*this.shape[1];if(x<A||x>=A+P)return null;var y=x-A,C=this.xData,M=this.yData;return{object:this,pointId:y,dataCoord:[C[y%this.shape[0]],M[y/this.shape[0]|0]]}},h.update=function(a){a=a||{};var p=a.shape||[0,0],x=a.x||o(p[0]),A=a.y||o(p[1]),P=a.z||new Float32Array(p[0]*p[1]),y=a.zsmooth!==!1;this.xData=x,this.yData=A;var C=a.colorLevels||[0],M=a.colorValues||[0,0,0,1],s=C.length,_=this.bounds,b,k,D,V;y?(b=_[0]=x[0],k=_[1]=A[0],D=_[2]=x[x.length-1],V=_[3]=A[A.length-1]):(b=_[0]=x[0]+(x[1]-x[0])/2,k=_[1]=A[0]+(A[1]-A[0])/2,D=_[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,V=_[3]=A[A.length-1]+(A[A.length-1]-A[A.length-2])/2);var O=1/(D-b),N=1/(V-k),B=p[0],z=p[1];this.shape=[B,z];var H=(y?(B-1)*(z-1):B*z)*(w.length>>>1);this.numVertices=H;for(var X=i.mallocUint8(H*4),$=i.mallocFloat32(H*2),ne=i.mallocUint8(H*2),q=i.mallocUint32(H),ue=0,te=y?B-1:B,J=y?z-1:z,ie=0;ie<J;++ie){var K,ee;y?(K=N*(A[ie]-k),ee=N*(A[ie+1]-k)):(K=ie<z-1?N*(A[ie]-(A[ie+1]-A[ie])/2-k):N*(A[ie]-(A[ie]-A[ie-1])/2-k),ee=ie<z-1?N*(A[ie]+(A[ie+1]-A[ie])/2-k):N*(A[ie]+(A[ie]-A[ie-1])/2-k));for(var le=0;le<te;++le){var j,Z;y?(j=O*(x[le]-b),Z=O*(x[le+1]-b)):(j=le<B-1?O*(x[le]-(x[le+1]-x[le])/2-b):O*(x[le]-(x[le]-x[le-1])/2-b),Z=le<B-1?O*(x[le]+(x[le+1]-x[le])/2-b):O*(x[le]+(x[le]-x[le-1])/2-b));for(var fe=0;fe<w.length;fe+=2){var re=w[fe],ce=w[fe+1],xe=y?(ie+ce)*B+(le+re):ie*B+le,Te=P[xe],we=t.le(C,Te),_e,ke,Ne,Ee;if(we<0)_e=M[0],ke=M[1],Ne=M[2],Ee=M[3];else if(we===s-1)_e=M[4*s-4],ke=M[4*s-3],Ne=M[4*s-2],Ee=M[4*s-1];else{var ze=(Te-C[we])/(C[we+1]-C[we]),Ce=1-ze,Oe=4*we,Le=4*(we+1);_e=Ce*M[Oe]+ze*M[Le],ke=Ce*M[Oe+1]+ze*M[Le+1],Ne=Ce*M[Oe+2]+ze*M[Le+2],Ee=Ce*M[Oe+3]+ze*M[Le+3]}X[4*ue]=255*_e,X[4*ue+1]=255*ke,X[4*ue+2]=255*Ne,X[4*ue+3]=255*Ee,$[2*ue]=j*.5+Z*.5,$[2*ue+1]=K*.5+ee*.5,ne[2*ue]=re,ne[2*ue+1]=ce,q[ue]=ie*B+le,ue+=1}}}this.positionBuffer.update($),this.weightBuffer.update(ne),this.colorBuffer.update(X),this.idBuffer.update(q),i.free($),i.free(X),i.free(ne),i.free(q)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function c(a,p){var x=a.gl,A=f(x,l.vertex,l.fragment),P=f(x,l.pickVertex,l.pickFragment),y=u(x),C=u(x),M=u(x),s=u(x),_=new m(a,A,P,y,C,M,s);return _.update(p),a.addObject(_),_}},6768:function(v,g,r){var t=r(3236);v.exports={fragment:t([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(v,g,r){var t=r(3236),o=r(9405),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),f=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),u=t([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];g.createShader=function(m){return o(m,i,f,null,l)},g.createPickShader=function(m){return o(m,i,u,null,l)}},5714:function(v,g,r){v.exports=M;var t=r(2762),o=r(8116),i=r(7766),f=new Uint8Array(4),u=new Float32Array(f.buffer);function l(s,_,b,k){return f[0]=k,f[1]=b,f[2]=_,f[3]=s,u[0]}var m=r(2478),h=r(9618),w=r(7319),c=w.createShader,a=w.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function x(s,_){for(var b=0,k=0;k<3;++k){var D=s[k]-_[k];b+=D*D}return Math.sqrt(b)}function A(s){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],b=0;b<3;++b)_[0][b]=Math.max(s[0][b],_[0][b]),_[1][b]=Math.min(s[1][b],_[1][b]);return _}function P(s,_,b,k){this.arcLength=s,this.position=_,this.index=b,this.dataCoordinate=k}function y(s,_,b,k,D,V){this.gl=s,this.shader=_,this.pickShader=b,this.buffer=k,this.vao=D,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=V,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var C=y.prototype;C.isTransparent=function(){return this.hasAlpha},C.isOpaque=function(){return!this.hasAlpha},C.pickSlots=1,C.setPickBase=function(s){this.pickId=s},C.drawTransparent=C.draw=function(s){if(this.vertexCount){var _=this.gl,b=this.shader,k=this.vao;b.bind(),b.uniforms={model:s.model||p,view:s.view||p,projection:s.projection||p,clipBounds:A(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(_.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},C.drawPick=function(s){if(this.vertexCount){var _=this.gl,b=this.pickShader,k=this.vao;b.bind(),b.uniforms={model:s.model||p,view:s.view||p,projection:s.projection||p,pickId:this.pickId,clipBounds:A(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(_.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},C.update=function(s){var _,b;this.dirty=!0;var k=!!s.connectGaps;"dashScale"in s&&(this.dashScale=s.dashScale),this.hasAlpha=!1,"opacity"in s&&(this.opacity=+s.opacity,this.opacity<1&&(this.hasAlpha=!0));var D=[],V=[],O=[],N=0,B=0,z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],H=s.position||s.positions;if(H){var X=s.color||s.colors||[0,0,0,1],$=s.lineWidth||1,ne=!1;e:for(_=1;_<H.length;++_){var q=H[_-1],ue=H[_];for(V.push(N),O.push(q.slice()),b=0;b<3;++b){if(isNaN(q[b])||isNaN(ue[b])||!isFinite(q[b])||!isFinite(ue[b])){if(!k&&D.length>0){for(var te=0;te<24;++te)D.push(D[D.length-12]);B+=2,ne=!0}continue e}z[0][b]=Math.min(z[0][b],q[b],ue[b]),z[1][b]=Math.max(z[1][b],q[b],ue[b])}var J,ie;Array.isArray(X[0])?(J=X.length>_-1?X[_-1]:X.length>0?X[X.length-1]:[0,0,0,1],ie=X.length>_?X[_]:X.length>0?X[X.length-1]:[0,0,0,1]):J=ie=X,J.length===3&&(J=[J[0],J[1],J[2],1]),ie.length===3&&(ie=[ie[0],ie[1],ie[2],1]),!this.hasAlpha&&J[3]<1&&(this.hasAlpha=!0);var K;Array.isArray($)?K=$.length>_-1?$[_-1]:$.length>0?$[$.length-1]:[0,0,0,1]:K=$;var ee=N;if(N+=x(q,ue),ne){for(b=0;b<2;++b)D.push(q[0],q[1],q[2],ue[0],ue[1],ue[2],ee,K,J[0],J[1],J[2],J[3]);B+=2,ne=!1}D.push(q[0],q[1],q[2],ue[0],ue[1],ue[2],ee,K,J[0],J[1],J[2],J[3],q[0],q[1],q[2],ue[0],ue[1],ue[2],ee,-K,J[0],J[1],J[2],J[3],ue[0],ue[1],ue[2],q[0],q[1],q[2],N,-K,ie[0],ie[1],ie[2],ie[3],ue[0],ue[1],ue[2],q[0],q[1],q[2],N,K,ie[0],ie[1],ie[2],ie[3]),B+=4}}if(this.buffer.update(D),V.push(N),O.push(H[H.length-1].slice()),this.bounds=z,this.vertexCount=B,this.points=O,this.arcLength=V,"dashes"in s){var le=s.dashes,j=le.slice();for(j.unshift(0),_=1;_<j.length;++_)j[_]=j[_-1]+j[_];var Z=h(new Array(256*4),[256,1,4]);for(_=0;_<256;++_){for(b=0;b<4;++b)Z.set(_,0,b,0);m.le(j,j[j.length-1]*_/255)&1?Z.set(_,0,0,0):Z.set(_,0,0,255)}this.texture.setPixels(Z)}},C.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},C.pick=function(s){if(!s||s.id!==this.pickId)return null;var _=l(s.value[0],s.value[1],s.value[2],0),b=m.le(this.arcLength,_);if(b<0)return null;if(b===this.arcLength.length-1)return new P(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),b);for(var k=this.points[b],D=this.points[Math.min(b+1,this.points.length-1)],V=(_-this.arcLength[b])/(this.arcLength[b+1]-this.arcLength[b]),O=1-V,N=[0,0,0],B=0;B<3;++B)N[B]=O*k[B]+V*D[B];var z=Math.min(V<.5?b:b+1,this.points.length-1);return new P(_,N,z,this.points[z])};function M(s){var _=s.gl||s.scene&&s.scene.gl,b=c(_);b.attributes.position.location=0,b.attributes.nextPosition.location=1,b.attributes.arcLength.location=2,b.attributes.lineWidth.location=3,b.attributes.color.location=4;var k=a(_);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var D=t(_),V=o(_,[{buffer:D,size:3,offset:0,stride:48},{buffer:D,size:3,offset:12,stride:48},{buffer:D,size:1,offset:24,stride:48},{buffer:D,size:1,offset:28,stride:48},{buffer:D,size:4,offset:32,stride:48}]),O=h(new Array(256*4),[256,1,4]),N=0;N<1024;++N)O.data[N]=255;var B=i(_,O);B.wrap=_.REPEAT;var z=new y(_,b,k,D,V,B);return z.update(s),z}},1903:function(v){v.exports=g;function g(r){var t=new Float32Array(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}},6864:function(v){v.exports=g;function g(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},9921:function(v){v.exports=g;function g(r){var t=r[0],o=r[1],i=r[2],f=r[3],u=r[4],l=r[5],m=r[6],h=r[7],w=r[8],c=r[9],a=r[10],p=r[11],x=r[12],A=r[13],P=r[14],y=r[15],C=t*l-o*u,M=t*m-i*u,s=t*h-f*u,_=o*m-i*l,b=o*h-f*l,k=i*h-f*m,D=w*A-c*x,V=w*P-a*x,O=w*y-p*x,N=c*P-a*A,B=c*y-p*A,z=a*y-p*P;return C*z-M*B+s*N+_*O-b*V+k*D}},7399:function(v){v.exports=g;function g(r,t){var o=t[0],i=t[1],f=t[2],u=t[3],l=o+o,m=i+i,h=f+f,w=o*l,c=i*l,a=i*m,p=f*l,x=f*m,A=f*h,P=u*l,y=u*m,C=u*h;return r[0]=1-a-A,r[1]=c+C,r[2]=p-y,r[3]=0,r[4]=c-C,r[5]=1-w-A,r[6]=x+P,r[7]=0,r[8]=p+y,r[9]=x-P,r[10]=1-w-a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},6743:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2],l=t[3],m=i+i,h=f+f,w=u+u,c=i*m,a=i*h,p=i*w,x=f*h,A=f*w,P=u*w,y=l*m,C=l*h,M=l*w;return r[0]=1-(x+P),r[1]=a+M,r[2]=p-C,r[3]=0,r[4]=a-M,r[5]=1-(c+P),r[6]=A+y,r[7]=0,r[8]=p+C,r[9]=A-y,r[10]=1-(c+x),r[11]=0,r[12]=o[0],r[13]=o[1],r[14]=o[2],r[15]=1,r}},7894:function(v){v.exports=g;function g(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7608:function(v){v.exports=g;function g(r,t){var o=t[0],i=t[1],f=t[2],u=t[3],l=t[4],m=t[5],h=t[6],w=t[7],c=t[8],a=t[9],p=t[10],x=t[11],A=t[12],P=t[13],y=t[14],C=t[15],M=o*m-i*l,s=o*h-f*l,_=o*w-u*l,b=i*h-f*m,k=i*w-u*m,D=f*w-u*h,V=c*P-a*A,O=c*y-p*A,N=c*C-x*A,B=a*y-p*P,z=a*C-x*P,H=p*C-x*y,X=M*H-s*z+_*B+b*N-k*O+D*V;return X?(X=1/X,r[0]=(m*H-h*z+w*B)*X,r[1]=(f*z-i*H-u*B)*X,r[2]=(P*D-y*k+C*b)*X,r[3]=(p*k-a*D-x*b)*X,r[4]=(h*N-l*H-w*O)*X,r[5]=(o*H-f*N+u*O)*X,r[6]=(y*_-A*D-C*s)*X,r[7]=(c*D-p*_+x*s)*X,r[8]=(l*z-m*N+w*V)*X,r[9]=(i*N-o*z-u*V)*X,r[10]=(A*k-P*_+C*M)*X,r[11]=(a*_-c*k-x*M)*X,r[12]=(m*O-l*B-h*V)*X,r[13]=(o*B-i*O+f*V)*X,r[14]=(P*s-A*b-y*M)*X,r[15]=(c*b-a*s+p*M)*X,r):null}},6582:function(v,g,r){var t=r(7894);v.exports=o;function o(i,f,u,l){var m,h,w,c,a,p,x,A,P,y,C=f[0],M=f[1],s=f[2],_=l[0],b=l[1],k=l[2],D=u[0],V=u[1],O=u[2];return Math.abs(C-D)<1e-6&&Math.abs(M-V)<1e-6&&Math.abs(s-O)<1e-6?t(i):(x=C-D,A=M-V,P=s-O,y=1/Math.sqrt(x*x+A*A+P*P),x*=y,A*=y,P*=y,m=b*P-k*A,h=k*x-_*P,w=_*A-b*x,y=Math.sqrt(m*m+h*h+w*w),y?(y=1/y,m*=y,h*=y,w*=y):(m=0,h=0,w=0),c=A*w-P*h,a=P*m-x*w,p=x*h-A*m,y=Math.sqrt(c*c+a*a+p*p),y?(y=1/y,c*=y,a*=y,p*=y):(c=0,a=0,p=0),i[0]=m,i[1]=c,i[2]=x,i[3]=0,i[4]=h,i[5]=a,i[6]=A,i[7]=0,i[8]=w,i[9]=p,i[10]=P,i[11]=0,i[12]=-(m*C+h*M+w*s),i[13]=-(c*C+a*M+p*s),i[14]=-(x*C+A*M+P*s),i[15]=1,i)}},6760:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2],l=t[3],m=t[4],h=t[5],w=t[6],c=t[7],a=t[8],p=t[9],x=t[10],A=t[11],P=t[12],y=t[13],C=t[14],M=t[15],s=o[0],_=o[1],b=o[2],k=o[3];return r[0]=s*i+_*m+b*a+k*P,r[1]=s*f+_*h+b*p+k*y,r[2]=s*u+_*w+b*x+k*C,r[3]=s*l+_*c+b*A+k*M,s=o[4],_=o[5],b=o[6],k=o[7],r[4]=s*i+_*m+b*a+k*P,r[5]=s*f+_*h+b*p+k*y,r[6]=s*u+_*w+b*x+k*C,r[7]=s*l+_*c+b*A+k*M,s=o[8],_=o[9],b=o[10],k=o[11],r[8]=s*i+_*m+b*a+k*P,r[9]=s*f+_*h+b*p+k*y,r[10]=s*u+_*w+b*x+k*C,r[11]=s*l+_*c+b*A+k*M,s=o[12],_=o[13],b=o[14],k=o[15],r[12]=s*i+_*m+b*a+k*P,r[13]=s*f+_*h+b*p+k*y,r[14]=s*u+_*w+b*x+k*C,r[15]=s*l+_*c+b*A+k*M,r}},4040:function(v){v.exports=g;function g(r,t,o,i,f,u,l){var m=1/(t-o),h=1/(i-f),w=1/(u-l);return r[0]=-2*m,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*w,r[11]=0,r[12]=(t+o)*m,r[13]=(f+i)*h,r[14]=(l+u)*w,r[15]=1,r}},4772:function(v){v.exports=g;function g(r,t,o,i,f){var u=1/Math.tan(t/2),l=1/(i-f);return r[0]=u/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=u,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(f+i)*l,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*f*i*l,r[15]=0,r}},6079:function(v){v.exports=g;function g(r,t,o,i){var f=i[0],u=i[1],l=i[2],m=Math.sqrt(f*f+u*u+l*l),h,w,c,a,p,x,A,P,y,C,M,s,_,b,k,D,V,O,N,B,z,H,X,$;return Math.abs(m)<1e-6?null:(m=1/m,f*=m,u*=m,l*=m,h=Math.sin(o),w=Math.cos(o),c=1-w,a=t[0],p=t[1],x=t[2],A=t[3],P=t[4],y=t[5],C=t[6],M=t[7],s=t[8],_=t[9],b=t[10],k=t[11],D=f*f*c+w,V=u*f*c+l*h,O=l*f*c-u*h,N=f*u*c-l*h,B=u*u*c+w,z=l*u*c+f*h,H=f*l*c+u*h,X=u*l*c-f*h,$=l*l*c+w,r[0]=a*D+P*V+s*O,r[1]=p*D+y*V+_*O,r[2]=x*D+C*V+b*O,r[3]=A*D+M*V+k*O,r[4]=a*N+P*B+s*z,r[5]=p*N+y*B+_*z,r[6]=x*N+C*B+b*z,r[7]=A*N+M*B+k*z,r[8]=a*H+P*X+s*$,r[9]=p*H+y*X+_*$,r[10]=x*H+C*X+b*$,r[11]=A*H+M*X+k*$,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r)}},5567:function(v){v.exports=g;function g(r,t,o){var i=Math.sin(o),f=Math.cos(o),u=t[4],l=t[5],m=t[6],h=t[7],w=t[8],c=t[9],a=t[10],p=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=u*f+w*i,r[5]=l*f+c*i,r[6]=m*f+a*i,r[7]=h*f+p*i,r[8]=w*f-u*i,r[9]=c*f-l*i,r[10]=a*f-m*i,r[11]=p*f-h*i,r}},2408:function(v){v.exports=g;function g(r,t,o){var i=Math.sin(o),f=Math.cos(o),u=t[0],l=t[1],m=t[2],h=t[3],w=t[8],c=t[9],a=t[10],p=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=u*f-w*i,r[1]=l*f-c*i,r[2]=m*f-a*i,r[3]=h*f-p*i,r[8]=u*i+w*f,r[9]=l*i+c*f,r[10]=m*i+a*f,r[11]=h*i+p*f,r}},7089:function(v){v.exports=g;function g(r,t,o){var i=Math.sin(o),f=Math.cos(o),u=t[0],l=t[1],m=t[2],h=t[3],w=t[4],c=t[5],a=t[6],p=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=u*f+w*i,r[1]=l*f+c*i,r[2]=m*f+a*i,r[3]=h*f+p*i,r[4]=w*f-u*i,r[5]=c*f-l*i,r[6]=a*f-m*i,r[7]=p*f-h*i,r}},2504:function(v){v.exports=g;function g(r,t,o){var i=o[0],f=o[1],u=o[2];return r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i,r[3]=t[3]*i,r[4]=t[4]*f,r[5]=t[5]*f,r[6]=t[6]*f,r[7]=t[7]*f,r[8]=t[8]*u,r[9]=t[9]*u,r[10]=t[10]*u,r[11]=t[11]*u,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}},7656:function(v){v.exports=g;function g(r,t,o){var i=o[0],f=o[1],u=o[2],l,m,h,w,c,a,p,x,A,P,y,C;return t===r?(r[12]=t[0]*i+t[4]*f+t[8]*u+t[12],r[13]=t[1]*i+t[5]*f+t[9]*u+t[13],r[14]=t[2]*i+t[6]*f+t[10]*u+t[14],r[15]=t[3]*i+t[7]*f+t[11]*u+t[15]):(l=t[0],m=t[1],h=t[2],w=t[3],c=t[4],a=t[5],p=t[6],x=t[7],A=t[8],P=t[9],y=t[10],C=t[11],r[0]=l,r[1]=m,r[2]=h,r[3]=w,r[4]=c,r[5]=a,r[6]=p,r[7]=x,r[8]=A,r[9]=P,r[10]=y,r[11]=C,r[12]=l*i+c*f+A*u+t[12],r[13]=m*i+a*f+P*u+t[13],r[14]=h*i+p*f+y*u+t[14],r[15]=w*i+x*f+C*u+t[15]),r}},5665:function(v){v.exports=g;function g(r,t){if(r===t){var o=t[1],i=t[2],f=t[3],u=t[6],l=t[7],m=t[11];r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=o,r[6]=t[9],r[7]=t[13],r[8]=i,r[9]=u,r[11]=t[14],r[12]=f,r[13]=l,r[14]=m}else r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15];return r}},7626:function(v,g,r){var t=r(2642),o=r(9346);v.exports=m;function i(h,w){for(var c=[0,0,0,0],a=0;a<4;++a)for(var p=0;p<4;++p)c[p]+=h[4*a+p]*w[a];return c}function f(h,w,c,a,p){for(var x=i(a,i(c,i(w,[h[0],h[1],h[2],1]))),A=0;A<3;++A)x[A]/=x[3];return[.5*p[0]*(1+x[0]),.5*p[1]*(1-x[1])]}function u(h,w){if(h.length===2){for(var c=0,a=0,p=0;p<2;++p)c+=Math.pow(w[p]-h[0][p],2),a+=Math.pow(w[p]-h[1][p],2);return c=Math.sqrt(c),a=Math.sqrt(a),c+a<1e-6?[1,0]:[a/(c+a),c/(a+c)]}else if(h.length===3){var x=[0,0];return o(h[0],h[1],h[2],w,x),t(h,x)}return[]}function l(h,w){for(var c=[0,0,0],a=0;a<h.length;++a)for(var p=h[a],x=w[a],A=0;A<3;++A)c[A]+=x*p[A];return c}function m(h,w,c,a,p,x){if(h.length===1)return[0,h[0].slice()];for(var A=new Array(h.length),P=0;P<h.length;++P)A[P]=f(h[P],c,a,p,x);for(var y=0,C=1/0,P=0;P<A.length;++P){for(var M=0,s=0;s<2;++s)M+=Math.pow(A[P][s]-w[s],2);M<C&&(C=M,y=P)}for(var _=u(A,w),b=0,P=0;P<3;++P){if(_[P]<-.001||_[P]>1.0001)return null;b+=_[P]}return Math.abs(b-1)>.001?null:[y,l(h,_),_]}},840:function(v,g,r){var t=r(3236),o=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),f=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),u=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),l=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),m=t([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),w=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),c=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),p=t([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);g.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},g.wireShader={vertex:f,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},g.pointShader={vertex:l,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},g.pickShader={vertex:h,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},g.pointPickShader={vertex:c,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},g.contourShader={vertex:a,fragment:p,attributes:[{name:"position",type:"vec3"}]}},7201:function(v,g,r){var t=1e-6,o=1e-6,i=r(9405),f=r(2762),u=r(8116),l=r(7766),m=r(8406),h=r(6760),w=r(7608),c=r(9618),a=r(6729),p=r(7765),x=r(1888),A=r(840),P=r(7626),y=A.meshShader,C=A.wireShader,M=A.pointShader,s=A.pickShader,_=A.pointPickShader,b=A.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function D(te,J,ie,K,ee,le,j,Z,fe,re,ce,xe,Te,we,_e,ke,Ne,Ee,ze,Ce,Oe,Le,Ge,rt,ot,$e,qe){this.gl=te,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=J,this.dirty=!0,this.triShader=ie,this.lineShader=K,this.pointShader=ee,this.pickShader=le,this.pointPickShader=j,this.contourShader=Z,this.trianglePositions=fe,this.triangleColors=ce,this.triangleNormals=Te,this.triangleUVs=xe,this.triangleIds=re,this.triangleVAO=we,this.triangleCount=0,this.lineWidth=1,this.edgePositions=_e,this.edgeColors=Ne,this.edgeUVs=Ee,this.edgeIds=ke,this.edgeVAO=ze,this.edgeCount=0,this.pointPositions=Ce,this.pointColors=Le,this.pointUVs=Ge,this.pointSizes=rt,this.pointIds=Oe,this.pointVAO=ot,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=$e,this.contourVAO=qe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var V=D.prototype;V.isOpaque=function(){return!this.hasAlpha},V.isTransparent=function(){return this.hasAlpha},V.pickSlots=1,V.setPickBase=function(te){this.pickId=te};function O(te,J){if(!J||!J.length)return 1;for(var ie=0;ie<J.length;++ie){if(J.length<2)return 1;if(J[ie][0]===te)return J[ie][1];if(J[ie][0]>te&&ie>0){var K=(J[ie][0]-te)/(J[ie][0]-J[ie-1][0]);return J[ie][1]*(1-K)+K*J[ie-1][1]}}return 1}function N(te,J){for(var ie=a({colormap:te,nshades:256,format:"rgba"}),K=new Uint8Array(256*4),ee=0;ee<256;++ee){for(var le=ie[ee],j=0;j<3;++j)K[4*ee+j]=le[j];J?K[4*ee+3]=255*O(ee/255,J):K[4*ee+3]=255*le[3]}return c(K,[256,256,4],[4,0,1])}function B(te){for(var J=te.length,ie=new Array(J),K=0;K<J;++K)ie[K]=te[K][2];return ie}V.highlight=function(te){if(!te||!this.contourEnable){this.contourCount=0;return}for(var J=p(this.cells,this.intensity,te.intensity),ie=J.cells,K=J.vertexIds,ee=J.vertexWeights,le=ie.length,j=x.mallocFloat32(2*3*le),Z=0,fe=0;fe<le;++fe)for(var re=ie[fe],ce=0;ce<2;++ce){var xe=re[0];re.length===2&&(xe=re[ce]);for(var Te=K[xe][0],we=K[xe][1],_e=ee[xe],ke=1-_e,Ne=this.positions[Te],Ee=this.positions[we],ze=0;ze<3;++ze)j[Z++]=_e*Ne[ze]+ke*Ee[ze]}this.contourCount=Z/3|0,this.contourPositions.update(j.subarray(0,Z)),x.free(j)},V.update=function(te){te=te||{};var J=this.gl;this.dirty=!0,"contourEnable"in te&&(this.contourEnable=te.contourEnable),"contourColor"in te&&(this.contourColor=te.contourColor),"lineWidth"in te&&(this.lineWidth=te.lineWidth),"lightPosition"in te&&(this.lightPosition=te.lightPosition),this.hasAlpha=!1,"opacity"in te&&(this.opacity=te.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in te&&(this.opacityscale=te.opacityscale,this.hasAlpha=!0),"ambient"in te&&(this.ambientLight=te.ambient),"diffuse"in te&&(this.diffuseLight=te.diffuse),"specular"in te&&(this.specularLight=te.specular),"roughness"in te&&(this.roughness=te.roughness),"fresnel"in te&&(this.fresnel=te.fresnel),te.texture?(this.texture.dispose(),this.texture=l(J,te.texture)):te.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=J.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=J.LINEAR,this.texture.setPixels(N(te.colormap,this.opacityscale)),this.texture.generateMipmap());var ie=te.cells,K=te.positions;if(!(!K||!ie)){var ee=[],le=[],j=[],Z=[],fe=[],re=[],ce=[],xe=[],Te=[],we=[],_e=[],ke=[],Ne=[],Ee=[];this.cells=ie,this.positions=K;var ze=te.vertexNormals,Ce=te.cellNormals,Oe=te.vertexNormalsEpsilon===void 0?t:te.vertexNormalsEpsilon,Le=te.faceNormalsEpsilon===void 0?o:te.faceNormalsEpsilon;te.useFacetNormals&&!Ce&&(Ce=m.faceNormals(ie,K,Le)),!Ce&&!ze&&(ze=m.vertexNormals(ie,K,Oe));var Ge=te.vertexColors,rt=te.cellColors,ot=te.meshColor||[1,1,1,1],$e=te.vertexUVs,qe=te.vertexIntensity,ht=te.cellUVs,vt=te.cellIntensity,pt=1/0,wt=-1/0;if(!$e&&!ht)if(qe)if(te.vertexIntensityBounds)pt=+te.vertexIntensityBounds[0],wt=+te.vertexIntensityBounds[1];else for(var Et=0;Et<qe.length;++Et){var nt=qe[Et];pt=Math.min(pt,nt),wt=Math.max(wt,nt)}else if(vt)if(te.cellIntensityBounds)pt=+te.cellIntensityBounds[0],wt=+te.cellIntensityBounds[1];else for(var Et=0;Et<vt.length;++Et){var nt=vt[Et];pt=Math.min(pt,nt),wt=Math.max(wt,nt)}else for(var Et=0;Et<K.length;++Et){var nt=K[Et][2];pt=Math.min(pt,nt),wt=Math.max(wt,nt)}qe?this.intensity=qe:vt?this.intensity=vt:this.intensity=B(K),this.pickVertex=!(vt||rt);var Fe=te.pointSizes,We=te.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Et=0;Et<K.length;++Et)for(var Ze=K[Et],Ye=0;Ye<3;++Ye)isNaN(Ze[Ye])||!isFinite(Ze[Ye])||(this.bounds[0][Ye]=Math.min(this.bounds[0][Ye],Ze[Ye]),this.bounds[1][Ye]=Math.max(this.bounds[1][Ye],Ze[Ye]));var Ie=0,De=0,je=0;e:for(var Et=0;Et<ie.length;++Et){var Re=ie[Et];switch(Re.length){case 1:for(var pe=Re[0],Ze=K[pe],Ye=0;Ye<3;++Ye)if(isNaN(Ze[Ye])||!isFinite(Ze[Ye]))continue e;we.push(Ze[0],Ze[1],Ze[2]);var be;Ge?be=Ge[pe]:rt?be=rt[Et]:be=ot,this.opacityscale&&qe?le.push(be[0],be[1],be[2],this.opacity*O((qe[pe]-pt)/(wt-pt),this.opacityscale)):be.length===3?_e.push(be[0],be[1],be[2],this.opacity):(_e.push(be[0],be[1],be[2],be[3]*this.opacity),be[3]<1&&(this.hasAlpha=!0));var Ue;$e?Ue=$e[pe]:qe?Ue=[(qe[pe]-pt)/(wt-pt),0]:ht?Ue=ht[Et]:vt?Ue=[(vt[Et]-pt)/(wt-pt),0]:Ue=[(Ze[2]-pt)/(wt-pt),0],ke.push(Ue[0],Ue[1]),Fe?Ne.push(Fe[pe]):Ne.push(We),Ee.push(Et),je+=1;break;case 2:for(var Ye=0;Ye<2;++Ye)for(var pe=Re[Ye],Ze=K[pe],et=0;et<3;++et)if(isNaN(Ze[et])||!isFinite(Ze[et]))continue e;for(var Ye=0;Ye<2;++Ye){var pe=Re[Ye],Ze=K[pe];re.push(Ze[0],Ze[1],Ze[2]);var be;Ge?be=Ge[pe]:rt?be=rt[Et]:be=ot,this.opacityscale&&qe?le.push(be[0],be[1],be[2],this.opacity*O((qe[pe]-pt)/(wt-pt),this.opacityscale)):be.length===3?ce.push(be[0],be[1],be[2],this.opacity):(ce.push(be[0],be[1],be[2],be[3]*this.opacity),be[3]<1&&(this.hasAlpha=!0));var Ue;$e?Ue=$e[pe]:qe?Ue=[(qe[pe]-pt)/(wt-pt),0]:ht?Ue=ht[Et]:vt?Ue=[(vt[Et]-pt)/(wt-pt),0]:Ue=[(Ze[2]-pt)/(wt-pt),0],xe.push(Ue[0],Ue[1]),Te.push(Et)}De+=1;break;case 3:for(var Ye=0;Ye<3;++Ye)for(var pe=Re[Ye],Ze=K[pe],et=0;et<3;++et)if(isNaN(Ze[et])||!isFinite(Ze[et]))continue e;for(var Ye=0;Ye<3;++Ye){var pe=Re[2-Ye],Ze=K[pe];ee.push(Ze[0],Ze[1],Ze[2]);var be;Ge?be=Ge[pe]:rt?be=rt[Et]:be=ot,be?this.opacityscale&&qe?le.push(be[0],be[1],be[2],this.opacity*O((qe[pe]-pt)/(wt-pt),this.opacityscale)):be.length===3?le.push(be[0],be[1],be[2],this.opacity):(le.push(be[0],be[1],be[2],be[3]*this.opacity),be[3]<1&&(this.hasAlpha=!0)):le.push(.5,.5,.5,1);var Ue;$e?Ue=$e[pe]:qe?Ue=[(qe[pe]-pt)/(wt-pt),0]:ht?Ue=ht[Et]:vt?Ue=[(vt[Et]-pt)/(wt-pt),0]:Ue=[(Ze[2]-pt)/(wt-pt),0],Z.push(Ue[0],Ue[1]);var st;ze?st=ze[pe]:st=Ce[Et],j.push(st[0],st[1],st[2]),fe.push(Et)}Ie+=1;break}}this.pointCount=je,this.edgeCount=De,this.triangleCount=Ie,this.pointPositions.update(we),this.pointColors.update(_e),this.pointUVs.update(ke),this.pointSizes.update(Ne),this.pointIds.update(new Uint32Array(Ee)),this.edgePositions.update(re),this.edgeColors.update(ce),this.edgeUVs.update(xe),this.edgeIds.update(new Uint32Array(Te)),this.trianglePositions.update(ee),this.triangleColors.update(le),this.triangleUVs.update(Z),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(fe))}},V.drawTransparent=V.draw=function(te){te=te||{};for(var J=this.gl,ie=te.model||k,K=te.view||k,ee=te.projection||k,le=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)le[0][j]=Math.max(le[0][j],this.clipBounds[0][j]),le[1][j]=Math.min(le[1][j],this.clipBounds[1][j]);var Z={model:ie,view:K,projection:ee,inverseModel:k.slice(),clipBounds:le,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Z.inverseModel=w(Z.inverseModel,Z.model),J.disable(J.CULL_FACE),this.texture.bind(0);var fe=new Array(16);h(fe,Z.view,Z.model),h(fe,Z.projection,fe),w(fe,fe);for(var j=0;j<3;++j)Z.eyePosition[j]=fe[12+j]/fe[15];for(var re=fe[15],j=0;j<3;++j)re+=this.lightPosition[j]*fe[4*j+3];for(var j=0;j<3;++j){for(var ce=fe[12+j],xe=0;xe<3;++xe)ce+=fe[4*xe+j]*this.lightPosition[xe];Z.lightPosition[j]=ce/re}if(this.triangleCount>0){var Te=this.triShader;Te.bind(),Te.uniforms=Z,this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var Te=this.lineShader;Te.bind(),Te.uniforms=Z,this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var Te=this.pointShader;Te.bind(),Te.uniforms=Z,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var Te=this.contourShader;Te.bind(),Te.uniforms=Z,this.contourVAO.bind(),J.drawArrays(J.LINES,0,this.contourCount),this.contourVAO.unbind()}},V.drawPick=function(te){te=te||{};for(var J=this.gl,ie=te.model||k,K=te.view||k,ee=te.projection||k,le=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)le[0][j]=Math.max(le[0][j],this.clipBounds[0][j]),le[1][j]=Math.min(le[1][j],this.clipBounds[1][j]);this._model=[].slice.call(ie),this._view=[].slice.call(K),this._projection=[].slice.call(ee),this._resolution=[J.drawingBufferWidth,J.drawingBufferHeight];var Z={model:ie,view:K,projection:ee,clipBounds:le,pickId:this.pickId/255},fe=this.pickShader;if(fe.bind(),fe.uniforms=Z,this.triangleCount>0&&(this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var fe=this.pointPickShader;fe.bind(),fe.uniforms=Z,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind()}},V.pick=function(te){if(!te||te.id!==this.pickId)return null;for(var J=te.value[0]+256*te.value[1]+65536*te.value[2],ie=this.cells[J],K=this.positions,ee=new Array(ie.length),le=0;le<ie.length;++le)ee[le]=K[ie[le]];var j=te.coord[0],Z=te.coord[1];if(!this.pickVertex){var fe=this.positions[ie[0]],re=this.positions[ie[1]],ce=this.positions[ie[2]],xe=[(fe[0]+re[0]+ce[0])/3,(fe[1]+re[1]+ce[1])/3,(fe[2]+re[2]+ce[2])/3];return{_cellCenter:!0,position:[j,Z],index:J,cell:ie,cellId:J,intensity:this.intensity[J],dataCoordinate:xe}}var Te=P(ee,[j*this.pixelRatio,this._resolution[1]-Z*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!Te)return null;for(var we=Te[2],_e=0,le=0;le<ie.length;++le)_e+=we[le]*this.intensity[ie[le]];return{position:Te[1],index:ie[Te[0]],cell:ie,cellId:J,intensity:_e,dataCoordinate:this.positions[ie[Te[0]]]}},V.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function z(te){var J=i(te,y.vertex,y.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.normal.location=4,J}function H(te){var J=i(te,C.vertex,C.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J}function X(te){var J=i(te,M.vertex,M.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.pointSize.location=4,J}function $(te){var J=i(te,s.vertex,s.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J}function ne(te){var J=i(te,_.vertex,_.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J.attributes.pointSize.location=4,J}function q(te){var J=i(te,b.vertex,b.fragment);return J.attributes.position.location=0,J}function ue(te,J){arguments.length===1&&(J=te,te=J.gl);var ie=te.getExtension("OES_standard_derivatives")||te.getExtension("MOZ_OES_standard_derivatives")||te.getExtension("WEBKIT_OES_standard_derivatives");if(!ie)throw new Error("derivatives not supported");var K=z(te),ee=H(te),le=X(te),j=$(te),Z=ne(te),fe=q(te),re=l(te,c(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=te.LINEAR_MIPMAP_LINEAR,re.magFilter=te.LINEAR;var ce=f(te),xe=f(te),Te=f(te),we=f(te),_e=f(te),ke=u(te,[{buffer:ce,type:te.FLOAT,size:3},{buffer:_e,type:te.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xe,type:te.FLOAT,size:4},{buffer:Te,type:te.FLOAT,size:2},{buffer:we,type:te.FLOAT,size:3}]),Ne=f(te),Ee=f(te),ze=f(te),Ce=f(te),Oe=u(te,[{buffer:Ne,type:te.FLOAT,size:3},{buffer:Ce,type:te.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ee,type:te.FLOAT,size:4},{buffer:ze,type:te.FLOAT,size:2}]),Le=f(te),Ge=f(te),rt=f(te),ot=f(te),$e=f(te),qe=u(te,[{buffer:Le,type:te.FLOAT,size:3},{buffer:$e,type:te.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ge,type:te.FLOAT,size:4},{buffer:rt,type:te.FLOAT,size:2},{buffer:ot,type:te.FLOAT,size:1}]),ht=f(te),vt=u(te,[{buffer:ht,type:te.FLOAT,size:3}]),pt=new D(te,re,K,ee,le,j,Z,fe,ce,_e,xe,Te,we,ke,Ne,Ce,Ee,ze,Oe,Le,$e,Ge,rt,ot,qe,ht,vt);return pt.update(J),pt}v.exports=ue},8120:function(v,g,r){v.exports=l;var t=r(2762),o=r(9405),i=r(3603);function f(m,h,w){this.plot=m,this.vbo=h,this.shader=w}var u=f.prototype;u.bind=function(){var m=this.shader;this.vbo.bind(),this.shader.bind(),m.attributes.coord.pointer(),m.uniforms.screenBox=this.plot.screenBox},u.drawBox=function(){var m=[0,0],h=[0,0];return function(w,c,a,p,x){var A=this.plot,P=this.shader,y=A.gl;m[0]=w,m[1]=c,h[0]=a,h[1]=p,P.uniforms.lo=m,P.uniforms.hi=h,P.uniforms.color=x,y.drawArrays(y.TRIANGLE_STRIP,0,4)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function l(m){var h=m.gl,w=t(h,[0,0,0,1,1,0,1,1]),c=o(h,i.boxVert,i.lineFrag);return new f(m,w,c)}},1913:function(v,g,r){v.exports=h;var t=r(2762),o=r(9405),i=r(2478),f=r(3603);function u(w,c,a,p){this.plot=w,this.vbo=c,this.shader=a,this.tickShader=p,this.ticks=[[],[]]}function l(w,c){return w-c}var m=u.prototype;m.draw=function(){var w=[0,0],c=[0,0],a=[0,0];return function(){for(var p=this.plot,x=this.vbo,A=this.shader,P=this.ticks,y=p.gl,C=p._tickBounds,M=p.dataBox,s=p.viewBox,_=p.gridLineWidth,b=p.gridLineColor,k=p.gridLineEnable,D=p.pixelRatio,V=0;V<2;++V){var O=C[V],N=C[V+2],B=N-O,z=.5*(M[V+2]+M[V]),H=M[V+2]-M[V];c[V]=2*B/H,w[V]=2*(O-z)/H}A.bind(),x.bind(),A.attributes.dataCoord.pointer(),A.uniforms.dataShift=w,A.uniforms.dataScale=c;for(var X=0,V=0;V<2;++V){a[0]=a[1]=0,a[V]=1,A.uniforms.dataAxis=a,A.uniforms.lineWidth=_[V]/(s[V+2]-s[V])*D,A.uniforms.color=b[V];var $=P[V].length*6;k[V]&&$&&y.drawArrays(y.TRIANGLES,X,$),X+=$}}}(),m.drawTickMarks=function(){var w=[0,0],c=[0,0],a=[1,0],p=[0,1],x=[0,0],A=[0,0];return function(){for(var P=this.plot,y=this.vbo,C=this.tickShader,M=this.ticks,s=P.gl,_=P._tickBounds,b=P.dataBox,k=P.viewBox,D=P.pixelRatio,V=P.screenBox,O=V[2]-V[0],N=V[3]-V[1],B=k[2]-k[0],z=k[3]-k[1],H=0;H<2;++H){var X=_[H],$=_[H+2],ne=$-X,q=.5*(b[H+2]+b[H]),ue=b[H+2]-b[H];c[H]=2*ne/ue,w[H]=2*(X-q)/ue}c[0]*=B/O,w[0]*=B/O,c[1]*=z/N,w[1]*=z/N,C.bind(),y.bind(),C.attributes.dataCoord.pointer();var te=C.uniforms;te.dataShift=w,te.dataScale=c;var J=P.tickMarkLength,ie=P.tickMarkWidth,K=P.tickMarkColor,ee=0,le=M[0].length*6,j=Math.min(i.ge(M[0],(b[0]-_[0])/(_[2]-_[0]),l),M[0].length),Z=Math.min(i.gt(M[0],(b[2]-_[0])/(_[2]-_[0]),l),M[0].length),fe=ee+6*j,re=6*Math.max(0,Z-j),ce=Math.min(i.ge(M[1],(b[1]-_[1])/(_[3]-_[1]),l),M[1].length),xe=Math.min(i.gt(M[1],(b[3]-_[1])/(_[3]-_[1]),l),M[1].length),Te=le+6*ce,we=6*Math.max(0,xe-ce);x[0]=2*(k[0]-J[1])/O-1,x[1]=(k[3]+k[1])/N-1,A[0]=J[1]*D/O,A[1]=ie[1]*D/N,we&&(te.color=K[1],te.tickScale=A,te.dataAxis=p,te.screenOffset=x,s.drawArrays(s.TRIANGLES,Te,we)),x[0]=(k[2]+k[0])/O-1,x[1]=2*(k[1]-J[0])/N-1,A[0]=ie[0]*D/O,A[1]=J[0]*D/N,re&&(te.color=K[0],te.tickScale=A,te.dataAxis=a,te.screenOffset=x,s.drawArrays(s.TRIANGLES,fe,re)),x[0]=2*(k[2]+J[3])/O-1,x[1]=(k[3]+k[1])/N-1,A[0]=J[3]*D/O,A[1]=ie[3]*D/N,we&&(te.color=K[3],te.tickScale=A,te.dataAxis=p,te.screenOffset=x,s.drawArrays(s.TRIANGLES,Te,we)),x[0]=(k[2]+k[0])/O-1,x[1]=2*(k[3]+J[2])/N-1,A[0]=ie[2]*D/O,A[1]=J[2]*D/N,re&&(te.color=K[2],te.tickScale=A,te.dataAxis=a,te.screenOffset=x,s.drawArrays(s.TRIANGLES,fe,re))}}(),m.update=function(){var w=[1,1,-1,-1,1,-1],c=[1,-1,1,1,-1,-1];return function(a){var p=a.ticks,x=a.bounds,A=new Float32Array(6*3*(p[0].length+p[1].length));this.plot.zeroLineEnable;for(var P=0,y=[[],[]],C=0;C<2;++C)for(var M=y[C],s=p[C],_=x[C],b=x[C+2],k=0;k<s.length;++k){var D=(s[k].x-_)/(b-_);M.push(D);for(var V=0;V<6;++V)A[P++]=D,A[P++]=w[V],A[P++]=c[V]}this.ticks=y,this.vbo.update(A)}}(),m.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function h(w){var c=w.gl,a=t(c),p=o(c,f.gridVert,f.gridFrag),x=o(c,f.tickVert,f.gridFrag),A=new u(w,a,p,x);return A}},4747:function(v,g,r){v.exports=l;var t=r(2762),o=r(9405),i=r(3603);function f(m,h,w){this.plot=m,this.vbo=h,this.shader=w}var u=f.prototype;u.bind=function(){var m=this.shader;this.vbo.bind(),this.shader.bind(),m.attributes.coord.pointer(),m.uniforms.screenBox=this.plot.screenBox},u.drawLine=function(){var m=[0,0],h=[0,0];return function(w,c,a,p,x,A){var P=this.plot,y=this.shader,C=P.gl;m[0]=w,m[1]=c,h[0]=a,h[1]=p,y.uniforms.start=m,y.uniforms.end=h,y.uniforms.width=x*P.pixelRatio,y.uniforms.color=A,C.drawArrays(C.TRIANGLE_STRIP,0,4)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function l(m){var h=m.gl,w=t(h,[-1,-1,-1,1,1,-1,1,1]),c=o(h,i.lineVert,i.lineFrag),a=new f(m,w,c);return a}},3603:function(v,g,r){var t=r(3236),o=t([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);v.exports={lineVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:o,textVert:t([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:o,gridVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:o,boxVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(v,g,r){v.exports=h;var t=r(2762),o=r(9405),i=r(529),f=r(2478),u=r(3603);function l(w,c,a){this.plot=w,this.vbo=c,this.shader=a,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var m=l.prototype;m.drawTicks=function(){var w=[0,0],c=[0,0],a=[0,0];return function(p){var x=this.plot,A=this.shader,P=this.tickX[p],y=this.tickOffset[p],C=x.gl,M=x.viewBox,s=x.dataBox,_=x.screenBox,b=x.pixelRatio,k=x.tickEnable,D=x.tickPad,V=x.tickColor,O=x.tickAngle,N=x.labelEnable,B=x.labelPad,z=x.labelColor,H=x.labelAngle,X=this.labelOffset[p],$=this.labelCount[p],ne=f.lt(P,s[p]),q=f.le(P,s[p+2]);w[0]=w[1]=0,w[p]=1,c[p]=(M[2+p]+M[p])/(_[2+p]-_[p])-1;var ue=2/_[2+(p^1)]-_[p^1];c[p^1]=ue*M[p^1]-1,k[p]&&(c[p^1]-=ue*b*D[p],ne<q&&y[q]>y[ne]&&(A.uniforms.dataAxis=w,A.uniforms.screenOffset=c,A.uniforms.color=V[p],A.uniforms.angle=O[p],C.drawArrays(C.TRIANGLES,y[ne],y[q]-y[ne]))),N[p]&&$&&(c[p^1]-=ue*b*B[p],A.uniforms.dataAxis=a,A.uniforms.screenOffset=c,A.uniforms.color=z[p],A.uniforms.angle=H[p],C.drawArrays(C.TRIANGLES,X,$)),c[p^1]=ue*M[2+(p^1)]-1,k[p+2]&&(c[p^1]+=ue*b*D[p+2],ne<q&&y[q]>y[ne]&&(A.uniforms.dataAxis=w,A.uniforms.screenOffset=c,A.uniforms.color=V[p+2],A.uniforms.angle=O[p+2],C.drawArrays(C.TRIANGLES,y[ne],y[q]-y[ne]))),N[p+2]&&$&&(c[p^1]+=ue*b*B[p+2],A.uniforms.dataAxis=a,A.uniforms.screenOffset=c,A.uniforms.color=z[p+2],A.uniforms.angle=H[p+2],C.drawArrays(C.TRIANGLES,X,$))}}(),m.drawTitle=function(){var w=[0,0],c=[0,0];return function(){var a=this.plot,p=this.shader,x=a.gl,A=a.screenBox,P=a.titleCenter,y=a.titleAngle,C=a.titleColor,M=a.pixelRatio;if(this.titleCount){for(var s=0;s<2;++s)c[s]=2*(P[s]*M-A[s])/(A[2+s]-A[s])-1;p.bind(),p.uniforms.dataAxis=w,p.uniforms.screenOffset=c,p.uniforms.angle=y,p.uniforms.color=C,x.drawArrays(x.TRIANGLES,this.titleOffset,this.titleCount)}}}(),m.bind=function(){var w=[0,0],c=[0,0],a=[0,0];return function(){var p=this.plot,x=this.shader,A=p._tickBounds,P=p.dataBox,y=p.screenBox,C=p.viewBox;x.bind();for(var M=0;M<2;++M){var s=A[M],_=A[M+2],b=_-s,k=.5*(P[M+2]+P[M]),D=P[M+2]-P[M],V=C[M],O=C[M+2],N=O-V,B=y[M],z=y[M+2],H=z-B;c[M]=2*b/D*N/H,w[M]=2*(s-k)/D*N/H}a[1]=2*p.pixelRatio/(y[3]-y[1]),a[0]=a[1]*(y[3]-y[1])/(y[2]-y[0]),x.uniforms.dataScale=c,x.uniforms.dataShift=w,x.uniforms.textScale=a,this.vbo.bind(),x.attributes.textCoordinate.pointer()}}(),m.update=function(w){var c=[],a=w.ticks,p=w.bounds,x,A,P,y,C;for(C=0;C<2;++C){var M=[Math.floor(c.length/3)],s=[-1/0],_=a[C];for(x=0;x<_.length;++x){var b=_[x],k=b.x,D=b.text,V=b.font||"sans-serif",O=b.fontStyle||"normal",N=b.fontWeight||"normal",B=b.fontVariant||"normal";y=b.fontSize||12;for(var z=1/(p[C+2]-p[C]),H=p[C],X=D.split(`
`),$=0;$<X.length;$++)for(P=i(V,X[$],{fontStyle:O,fontWeight:N,fontVariant:B}).data,A=0;A<P.length;A+=2)c.push(P[A]*y,-P[A+1]*y-$*y*1.2,(k-H)*z);M.push(Math.floor(c.length/3)),s.push(k)}this.tickOffset[C]=M,this.tickX[C]=s}for(C=0;C<2;++C){for(this.labelOffset[C]=Math.floor(c.length/3),P=i(w.labelFont[C],w.labels[C],{fontStyle:w.labelFontStyle[C],fontWeight:w.labelFontWeight[C],fontVariant:w.labelFontVariant[C],textAlign:"center"}).data,y=w.labelSize[C],x=0;x<P.length;x+=2)c.push(P[x]*y,-P[x+1]*y,0);this.labelCount[C]=Math.floor(c.length/3)-this.labelOffset[C]}for(this.titleOffset=Math.floor(c.length/3),P=i(w.titleFont,w.title,{fontStyle:w.titleFontStyle,fontWeight:w.titleFontWeight,fontVariant:w.titleFontVariant}).data,y=w.titleSize,x=0;x<P.length;x+=2)c.push(P[x]*y,-P[x+1]*y,0);this.titleCount=Math.floor(c.length/3)-this.titleOffset,this.vbo.update(c)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(w){var c=w.gl,a=t(c),p=o(c,u.textVert,u.textFrag),x=new l(w,a,p);return x}},1850:function(v,g,r){v.exports=c;var t=r(3589),o=r(1913),i=r(2142),f=r(4747),u=r(8120);function l(a,p){this.gl=a,this.pickBuffer=p,this.screenBox=[0,0,a.drawingBufferWidth,a.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var m=l.prototype;m.setDirty=function(){this.dirty=this.pickDirty=!0},m.setOverlayDirty=function(){this.dirty=!0},m.nextDepthValue=function(){return this._depthCounter++/65536},m.draw=function(){return function(){var a=this.gl,p=this.screenBox,x=this.viewBox,A=this.dataBox,P=this.pixelRatio,y=this.grid,C=this.line,M=this.text,s=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),a.disable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.depthMask(!1),a.enable(a.BLEND),a.blendEquation(a.FUNC_ADD,a.FUNC_ADD),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),this.borderColor){a.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var _=this.borderColor;a.clearColor(_[0]*_[3],_[1]*_[3],_[2]*_[3],_[3]),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)}a.scissor(x[0],x[1],x[2]-x[0],x[3]-x[1]),a.viewport(x[0],x[1],x[2]-x[0],x[3]-x[1]);var b=this.backgroundColor;a.clearColor(b[0]*b[3],b[1]*b[3],b[2]*b[3],b[3]),a.clear(a.COLOR_BUFFER_BIT),y.draw();var k=this.zeroLineEnable,D=this.zeroLineColor,V=this.zeroLineWidth;if(k[0]||k[1]){C.bind();for(var O=0;O<2;++O)if(!(!k[O]||!(A[O]<=0&&A[O+2]>=0))){var N=p[O]-A[O]*(p[O+2]-p[O])/(A[O+2]-A[O]);O===0?C.drawLine(N,p[1],N,p[3],V[O],D[O]):C.drawLine(p[0],N,p[2],N,V[O],D[O])}}for(var O=0;O<s.length;++O)s[O].draw();a.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),a.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),C.bind();var B=this.borderLineEnable,z=this.borderLineWidth,H=this.borderLineColor;B[1]&&C.drawLine(x[0],x[1]-.5*z[1]*P,x[0],x[3]+.5*z[3]*P,z[1],H[1]),B[0]&&C.drawLine(x[0]-.5*z[0]*P,x[1],x[2]+.5*z[2]*P,x[1],z[0],H[0]),B[3]&&C.drawLine(x[2],x[1]-.5*z[1]*P,x[2],x[3]+.5*z[3]*P,z[3],H[3]),B[2]&&C.drawLine(x[0]-.5*z[0]*P,x[3],x[2]+.5*z[2]*P,x[3],z[2],H[2]),M.bind();for(var O=0;O<2;++O)M.drawTicks(O);this.titleEnable&&M.drawTitle();for(var X=this.overlays,O=0;O<X.length;++O)X[O].draw();a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.depthMask(!0)}}}(),m.drawPick=function(){return function(){if(!this.static){var a=this.pickBuffer;this.gl,this._pickTimeout=null,a.begin();for(var p=1,x=this.objects,A=0;A<x.length;++A)p=x[A].drawPick(p);a.end()}}}(),m.pick=function(){return function(a,p){if(!this.static){var x=this.pixelRatio,A=this.pickPixelRatio,P=this.viewBox,y=Math.round((a-P[0]/x)*A)|0,C=Math.round((p-P[1]/x)*A)|0,M=this.pickBuffer.query(y,C,this.pickRadius);if(!M)return null;for(var s=M.id+(M.value[0]<<8)+(M.value[1]<<16)+(M.value[2]<<24),_=this.objects,b=0;b<_.length;++b){var k=_[b].pick(y,C,s);if(k)return k}return null}}}();function h(a){for(var p=a.slice(),x=0;x<p.length;++x)p[x]=p[x].slice();return p}function w(a,p){return a.x-p.x}m.setScreenBox=function(a){var p=this.screenBox,x=this.pixelRatio;p[0]=Math.round(a[0]*x)|0,p[1]=Math.round(a[1]*x)|0,p[2]=Math.round(a[2]*x)|0,p[3]=Math.round(a[3]*x)|0,this.setDirty()},m.setDataBox=function(a){var p=this.dataBox,x=p[0]!==a[0]||p[1]!==a[1]||p[2]!==a[2]||p[3]!==a[3];x&&(p[0]=a[0],p[1]=a[1],p[2]=a[2],p[3]=a[3],this.setDirty())},m.setViewBox=function(a){var p=this.pixelRatio,x=this.viewBox;x[0]=Math.round(a[0]*p)|0,x[1]=Math.round(a[1]*p)|0,x[2]=Math.round(a[2]*p)|0,x[3]=Math.round(a[3]*p)|0;var A=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((a[2]-a[0])*A)|0,Math.round((a[3]-a[1])*A)|0],this.setDirty()},m.update=function(a){a=a||{};var p=this.gl;this.pixelRatio=a.pixelRatio||1;var x=this.pixelRatio;this.pickPixelRatio=Math.max(x,1),this.setScreenBox(a.screenBox||[0,0,p.drawingBufferWidth/x,p.drawingBufferHeight/x]),this.screenBox,this.setViewBox(a.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/x,.125*(this.screenBox[3]-this.screenBox[1])/x,.875*(this.screenBox[2]-this.screenBox[0])/x,.875*(this.screenBox[3]-this.screenBox[1])/x]);var A=this.viewBox,P=(A[2]-A[0])/(A[3]-A[1]);this.setDataBox(a.dataBox||[-10,-10/P,10,10/P]),this.borderColor=a.borderColor!==!1?(a.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(a.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(a.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(a.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(a.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(a.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(a.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(a.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(a.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(a.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(a.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(a.titleCenter||[.5*(A[0]+A[2])/x,(A[3]+120)/x]).slice(),this.titleEnable=!("titleEnable"in a)||!!a.titleEnable,this.titleAngle=a.titleAngle||0,this.titleColor=(a.titleColor||[0,0,0,1]).slice(),this.labelPad=(a.labelPad||[15,15,15,15]).slice(),this.labelAngle=(a.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(a.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(a.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(a.tickPad||[15,15,15,15]).slice(),this.tickAngle=(a.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(a.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(a.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(a.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(a.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(a.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var y=a.ticks||[[],[]],C=this._tickBounds;C[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(var M=0;M<2;++M){var s=y[M].slice(0);s.length!==0&&(s.sort(w),C[M]=Math.min(C[M],s[0].x),C[M+2]=Math.max(C[M+2],s[s.length-1].x))}this.grid.update({bounds:C,ticks:y}),this.text.update({bounds:C,ticks:y,labels:a.labels||["x","y"],labelSize:a.labelSize||[12,12],labelFont:a.labelFont||["sans-serif","sans-serif"],labelFontStyle:a.labelFontStyle||["normal","normal"],labelFontWeight:a.labelFontWeight||["normal","normal"],labelFontVariant:a.labelFontVariant||["normal","normal"],title:a.title||"",titleSize:a.titleSize||18,titleFont:a.titleFont||"sans-serif",titleFontStyle:a.titleFontStyle||"normal",titleFontWeight:a.titleFontWeight||"normal",titleFontVariant:a.titleFontVariant||"normal"}),this.static=!!a.static,this.setDirty()},m.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var a=this.objects.length-1;a>=0;--a)this.objects[a].dispose();this.objects.length=0;for(var a=this.overlays.length-1;a>=0;--a)this.overlays[a].dispose();this.overlays.length=0,this.gl=null},m.addObject=function(a){this.objects.indexOf(a)<0&&(this.objects.push(a),this.setDirty())},m.removeObject=function(a){for(var p=this.objects,x=0;x<p.length;++x)if(p[x]===a){p.splice(x,1),this.setDirty();break}},m.addOverlay=function(a){this.overlays.indexOf(a)<0&&(this.overlays.push(a),this.setOverlayDirty())},m.removeOverlay=function(a){for(var p=this.overlays,x=0;x<p.length;++x)if(p[x]===a){p.splice(x,1),this.setOverlayDirty();break}};function c(a){var p=a.gl,x=t(p,[p.drawingBufferWidth,p.drawingBufferHeight]),A=new l(p,x);return A.grid=o(A),A.text=i(A),A.line=f(A),A.box=u(A),A.update(a),A}},4437:function(v,g,r){v.exports=m;var t=r(3025),o=r(6296),i=r(351),f=r(8512),u=r(24),l=r(7520);function m(h,w){h=h||document.body,w=w||{};var c=[.01,1/0];"distanceLimits"in w&&(c[0]=w.distanceLimits[0],c[1]=w.distanceLimits[1]),"zoomMin"in w&&(c[0]=w.zoomMin),"zoomMax"in w&&(c[1]=w.zoomMax);var a=o({center:w.center||[0,0,0],up:w.up||[0,1,0],eye:w.eye||[0,0,10],mode:w.mode||"orbit",distanceLimits:c}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,A=h.clientWidth,P=h.clientHeight,y={keyBindingMode:"rotate",enableWheel:!0,view:a,element:h,delay:w.delay||16,rotateSpeed:w.rotateSpeed||1,zoomSpeed:w.zoomSpeed||1,translateSpeed:w.translateSpeed||1,flipX:!!w.flipX,flipY:!!w.flipY,modes:a.modes,_ortho:w._ortho||w.projection&&w.projection.type==="orthographic"||!1,tick:function(){var C=t(),M=this.delay,s=C-2*M;a.idle(C-M),a.recalcMatrix(s),a.flush(C-(100+M*2));for(var _=!0,b=a.computedMatrix,k=0;k<16;++k)_=_&&p[k]===b[k],p[k]=b[k];var D=h.clientWidth===A&&h.clientHeight===P;return A=h.clientWidth,P=h.clientHeight,_?!D:(x=Math.exp(a.computedRadius[0]),!0)},lookAt:function(C,M,s){a.lookAt(a.lastT(),C,M,s)},rotate:function(C,M,s){a.rotate(a.lastT(),C,M,s)},pan:function(C,M,s){a.pan(a.lastT(),C,M,s)},translate:function(C,M,s){a.translate(a.lastT(),C,M,s)}};return Object.defineProperties(y,{matrix:{get:function(){return a.computedMatrix},set:function(C){return a.setMatrix(a.lastT(),C),a.computedMatrix},enumerable:!0},mode:{get:function(){return a.getMode()},set:function(C){var M=a.computedUp.slice(),s=a.computedEye.slice(),_=a.computedCenter.slice();if(a.setMode(C),C==="turntable"){var b=t();a._active.lookAt(b,s,_,M),a._active.lookAt(b+500,s,_,[0,0,1]),a._active.flush(b)}return a.getMode()},enumerable:!0},center:{get:function(){return a.computedCenter},set:function(C){return a.lookAt(a.lastT(),null,C),a.computedCenter},enumerable:!0},eye:{get:function(){return a.computedEye},set:function(C){return a.lookAt(a.lastT(),C),a.computedEye},enumerable:!0},up:{get:function(){return a.computedUp},set:function(C){return a.lookAt(a.lastT(),null,null,C),a.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(C){return a.setDistance(a.lastT(),C),C},enumerable:!0},distanceLimits:{get:function(){return a.getDistanceLimits(c)},set:function(C){return a.setDistanceLimits(C),C},enumerable:!0}}),h.addEventListener("contextmenu",function(C){return C.preventDefault(),!1}),y._lastX=-1,y._lastY=-1,y._lastMods={shift:!1,control:!1,alt:!1,meta:!1},y.enableMouseListeners=function(){y.mouseListener=i(h,C),h.addEventListener("touchstart",function(M){var s=u(M.changedTouches[0],h);C(0,s[0],s[1],y._lastMods),C(1,s[0],s[1],y._lastMods)},l?{passive:!0}:!1),h.addEventListener("touchmove",function(M){var s=u(M.changedTouches[0],h);C(1,s[0],s[1],y._lastMods),M.preventDefault()},l?{passive:!1}:!1),h.addEventListener("touchend",function(M){C(0,y._lastX,y._lastY,y._lastMods)},l?{passive:!0}:!1);function C(M,s,_,b){var k=y.keyBindingMode;if(k!==!1){var D=k==="rotate",V=k==="pan",O=k==="zoom",N=!!b.control,B=!!b.alt,z=!!b.shift,H=!!(M&1),X=!!(M&2),$=!!(M&4),ne=1/h.clientHeight,q=ne*(s-y._lastX),ue=ne*(_-y._lastY),te=y.flipX?1:-1,J=y.flipY?1:-1,ie=Math.PI*y.rotateSpeed,K=t();if(y._lastX!==-1&&y._lastY!==-1&&((D&&H&&!N&&!B&&!z||H&&!N&&!B&&z)&&a.rotate(K,te*ie*q,-J*ie*ue,0),(V&&H&&!N&&!B&&!z||X||H&&N&&!B&&!z)&&a.pan(K,-y.translateSpeed*q*x,y.translateSpeed*ue*x,0),O&&H&&!N&&!B&&!z||$||H&&!N&&B&&!z)){var ee=-y.zoomSpeed*ue/window.innerHeight*(K-a.lastT())*100;a.pan(K,0,0,x*(Math.exp(ee)-1))}return y._lastX=s,y._lastY=_,y._lastMods=b,!0}}y.wheelListener=f(h,function(M,s){if(y.keyBindingMode!==!1&&y.enableWheel){var _=y.flipX?1:-1,b=y.flipY?1:-1,k=t();if(Math.abs(M)>Math.abs(s))a.rotate(k,0,0,-M*_*Math.PI*y.rotateSpeed/window.innerWidth);else if(!y._ortho){var D=-y.zoomSpeed*b*s/window.innerHeight*(k-a.lastT())/20;a.pan(k,0,0,x*(Math.exp(D)-1))}}},!0)},y.enableMouseListeners(),y}},799:function(v,g,r){var t=r(3236),o=r(9405),i=t([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),f=t([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);v.exports=function(u){return o(u,i,f,null,[{name:"position",type:"vec2"}])}},4100:function(v,g,r){var t=r(4437),o=r(3837),i=r(5445),f=r(4449),u=r(3589),l=r(2260),m=r(7169),h=r(351),w=r(4772),c=r(4040),a=r(799),p=r(9216)({tablet:!0,featureDetect:!0});v.exports={createScene:C,createCamera:t};function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function A(s,_){var b=null;try{b=s.getContext("webgl",_),b||(b=s.getContext("experimental-webgl",_))}catch{return null}return b}function P(s){var _=Math.round(Math.log(Math.abs(s))/Math.log(10));if(_<0){var b=Math.round(Math.pow(10,-_));return Math.ceil(s*b)/b}else if(_>0){var b=Math.round(Math.pow(10,_));return Math.ceil(s/b)*b}return Math.ceil(s)}function y(s){return typeof s=="boolean"?s:!0}function C(s){s=s||{},s.camera=s.camera||{};var _=s.canvas;if(!_)if(_=document.createElement("canvas"),s.container){var b=s.container;b.appendChild(_)}else document.body.appendChild(_);var k=s.gl;if(k||(s.glOptions&&(p=!!s.glOptions.preserveDrawingBuffer),k=A(_,s.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!k)throw new Error("webgl not supported");var D=s.bounds||[[-10,-10,-10],[10,10,10]],V=new x,O=l(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!p}),N=a(k),B=s.cameraObject&&s.cameraObject._ortho===!0||s.camera.projection&&s.camera.projection.type==="orthographic"||!1,z={eye:s.camera.eye||[2,0,0],center:s.camera.center||[0,0,0],up:s.camera.up||[0,1,0],zoomMin:s.camera.zoomMax||.1,zoomMax:s.camera.zoomMin||100,mode:s.camera.mode||"turntable",_ortho:B},H=s.axes||{},X=o(k,H);X.enable=!H.disable;var $=s.spikes||{},ne=f(k,$),q=[],ue=[],te=[],J=[],ie=!0,j=!0,K=new Array(16),ee=new Array(16),le={view:null,projection:K,model:ee,_ortho:!1},j=!0,Z=[k.drawingBufferWidth,k.drawingBufferHeight],fe=s.cameraObject||t(_,z),re={gl:k,contextLost:!1,pixelRatio:s.pixelRatio||1,canvas:_,selection:V,camera:fe,axes:X,axesPixels:null,spikes:ne,bounds:D,objects:q,shape:Z,aspect:s.aspectRatio||[1,1,1],pickRadius:s.pickRadius||10,zNear:s.zNear||.01,zFar:s.zFar||1e3,fovy:s.fovy||Math.PI/4,clearColor:s.clearColor||[0,0,0,0],autoResize:y(s.autoResize),autoBounds:y(s.autoBounds),autoScale:!!s.autoScale,autoCenter:y(s.autoCenter),clipToBounds:y(s.clipToBounds),snapToData:!!s.snapToData,onselect:s.onselect||null,onrender:s.onrender||null,onclick:s.onclick||null,cameraParams:le,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ce){this.aspect[0]=Ce.x,this.aspect[1]=Ce.y,this.aspect[2]=Ce.z,j=!0},setBounds:function(Ce,Oe){this.bounds[0][Ce]=Oe.min,this.bounds[1][Ce]=Oe.max},setClearColor:function(Ce){this.clearColor=Ce},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ce=[k.drawingBufferWidth/re.pixelRatio|0,k.drawingBufferHeight/re.pixelRatio|0];function xe(){if(!re._stopped&&re.autoResize){var Ce=_.parentNode,Oe=1,Le=1;Ce&&Ce!==document.body?(Oe=Ce.clientWidth,Le=Ce.clientHeight):(Oe=window.innerWidth,Le=window.innerHeight);var Ge=Math.ceil(Oe*re.pixelRatio)|0,rt=Math.ceil(Le*re.pixelRatio)|0;if(Ge!==_.width||rt!==_.height){_.width=Ge,_.height=rt;var ot=_.style;ot.position=ot.position||"absolute",ot.left="0px",ot.top="0px",ot.width=Oe+"px",ot.height=Le+"px",ie=!0}}}re.autoResize&&xe(),window.addEventListener("resize",xe);function Te(){for(var Ce=q.length,Oe=J.length,Le=0;Le<Oe;++Le)te[Le]=0;e:for(var Le=0;Le<Ce;++Le){var Ge=q[Le],rt=Ge.pickSlots;if(!rt){ue[Le]=-1;continue}for(var ot=0;ot<Oe;++ot)if(te[ot]+rt<255){ue[Le]=ot,Ge.setPickBase(te[ot]+1),te[ot]+=rt;continue e}var $e=u(k,Z);ue[Le]=Oe,J.push($e),te.push(rt),Ge.setPickBase(1),Oe+=1}for(;Oe>0&&te[Oe-1]===0;)te.pop(),J.pop().dispose()}re.update=function(Ce){re._stopped||(ie=!0,j=!0)},re.add=function(Ce){re._stopped||(Ce.axes=X,q.push(Ce),ue.push(-1),ie=!0,j=!0,Te())},re.remove=function(Ce){if(!re._stopped){var Oe=q.indexOf(Ce);Oe<0||(q.splice(Oe,1),ue.pop(),ie=!0,j=!0,Te())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",xe),_.removeEventListener("webglcontextlost",we),re.mouseListener.enabled=!1,!re.contextLost)){X.dispose(),ne.dispose();for(var Ce=0;Ce<q.length;++Ce)q[Ce].dispose();O.dispose();for(var Ce=0;Ce<J.length;++Ce)J[Ce].dispose();N.dispose(),k=null,X=null,ne=null,q=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=h(_,function(Ce,Oe,Le){if(!re._stopped){var Ge=J.length,rt=q.length,ot=V.object;V.distance=1/0,V.mouse[0]=Oe,V.mouse[1]=Le,V.object=null,V.screen=null,V.dataCoordinate=V.dataPosition=null;var $e=!1;if(Ce&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(j=!0),re._mouseRotating=!1;for(var qe=0;qe<Ge;++qe){var ht=J[qe].query(Oe,ce[1]-Le-1,re.pickRadius);if(ht){if(ht.distance>V.distance)continue;for(var vt=0;vt<rt;++vt){var pt=q[vt];if(ue[vt]===qe){var wt=pt.pick(ht);wt&&(V.buttons=Ce,V.screen=ht.coord,V.distance=ht.distance,V.object=pt,V.index=wt.distance,V.dataPosition=wt.position,V.dataCoordinate=wt.dataCoordinate,V.data=wt,$e=!0)}}}}}ot&&ot!==V.object&&(ot.highlight&&ot.highlight(null),ie=!0),V.object&&(V.object.highlight&&V.object.highlight(V.data),ie=!0),$e=$e||V.object!==ot,$e&&re.onselect&&re.onselect(V),Ce&1&&!(re._prevButtons&1)&&re.onclick&&re.onclick(V),re._prevButtons=Ce}})};function we(){if(re.contextLost)return!0;k.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}_.addEventListener("webglcontextlost",we);function _e(){if(!we()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var Ce=q.length,Oe=J.length,Le=0;Le<Oe;++Le){var Ge=J[Le];Ge.shape=ce,Ge.begin();for(var rt=0;rt<Ce;++rt)if(ue[rt]===Le){var ot=q[rt];ot.drawPick&&(ot.pixelRatio=1,ot.drawPick(le))}Ge.end()}}}var ke=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Ne=[ke[0].slice(),ke[1].slice()];function Ee(){if(!we()){xe();var Ce=re.camera.tick();le.view=re.camera.matrix,ie=ie||Ce,j=j||Ce,X.pixelRatio=re.pixelRatio,ne.pixelRatio=re.pixelRatio;var Oe=q.length,Le=ke[0],Ge=ke[1];Le[0]=Le[1]=Le[2]=1/0,Ge[0]=Ge[1]=Ge[2]=-1/0;for(var rt=0;rt<Oe;++rt){var ot=q[rt];ot.pixelRatio=re.pixelRatio,ot.axes=re.axes,ie=ie||!!ot.dirty,j=j||!!ot.dirty;var $e=ot.bounds;if($e)for(var qe=$e[0],ht=$e[1],vt=0;vt<3;++vt)Le[vt]=Math.min(Le[vt],qe[vt]),Ge[vt]=Math.max(Ge[vt],ht[vt])}var pt=re.bounds;if(re.autoBounds)for(var vt=0;vt<3;++vt){if(Ge[vt]<Le[vt])Le[vt]=-1,Ge[vt]=1;else{Le[vt]===Ge[vt]&&(Le[vt]-=1,Ge[vt]+=1);var wt=.05*(Ge[vt]-Le[vt]);Le[vt]=Le[vt]-wt,Ge[vt]=Ge[vt]+wt}pt[0][vt]=Le[vt],pt[1][vt]=Ge[vt]}for(var Et=!1,vt=0;vt<3;++vt)Et=Et||Ne[0][vt]!==pt[0][vt]||Ne[1][vt]!==pt[1][vt],Ne[0][vt]=pt[0][vt],Ne[1][vt]=pt[1][vt];if(j=j||Et,ie=ie||Et,!!ie){if(Et){for(var nt=[0,0,0],rt=0;rt<3;++rt)nt[rt]=P((pt[1][rt]-pt[0][rt])/10);X.autoTicks?X.update({bounds:pt,tickSpacing:nt}):X.update({bounds:pt})}var Fe=k.drawingBufferWidth,We=k.drawingBufferHeight;Z[0]=Fe,Z[1]=We,ce[0]=Math.max(Fe/re.pixelRatio,1)|0,ce[1]=Math.max(We/re.pixelRatio,1)|0,M(re,B);for(var rt=0;rt<Oe;++rt){var ot=q[rt];ot.axesBounds=pt,re.clipToBounds&&(ot.clipBounds=pt)}V.object&&(re.snapToData?ne.position=V.dataCoordinate:ne.position=V.dataPosition,ne.bounds=pt),j&&(j=!1,_e()),re.axesPixels=i(re.axes,le,Fe,We),re.onrender&&re.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,Fe,We),re.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var Ze=!1;X.enable&&(Ze=Ze||X.isTransparent(),X.draw(le)),ne.axes=X,V.object&&ne.draw(le),k.disable(k.CULL_FACE);for(var rt=0;rt<Oe;++rt){var ot=q[rt];ot.axes=X,ot.pixelRatio=re.pixelRatio,ot.isOpaque&&ot.isOpaque()&&ot.draw(le),ot.isTransparent&&ot.isTransparent()&&(Ze=!0)}if(Ze){O.shape=Z,O.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),X.enable&&X.isTransparent()&&X.drawTransparent(le);for(var rt=0;rt<Oe;++rt){var ot=q[rt];ot.isOpaque&&ot.isOpaque()&&ot.draw(le)}k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),X.isTransparent()&&X.drawTransparent(le);for(var rt=0;rt<Oe;++rt){var ot=q[rt];ot.isTransparent&&ot.isTransparent()&&ot.drawTransparent(le)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),N.bind(),O.color[0].bind(0),N.uniforms.accumBuffer=0,m(k),k.disable(k.BLEND)}ie=!1;for(var rt=0;rt<Oe;++rt)q[rt].dirty=!1}}}function ze(){re._stopped||re.contextLost||(Ee(),requestAnimationFrame(ze))}return re.enableMouseListeners(),ze(),re.redraw=function(){re._stopped||(ie=!0,Ee())},re}function M(s,_){var b=s.bounds,k=s.cameraParams,D=k.projection,V=k.model,O=s.gl.drawingBufferWidth,N=s.gl.drawingBufferHeight,B=s.zNear,z=s.zFar,H=s.fovy,X=O/N;_?(c(D,-X,X,-1,1,B,z),k._ortho=!0):(w(D,H,X,B,z),k._ortho=!1);for(var $=0;$<16;++$)V[$]=0;V[15]=1;for(var ne=0,$=0;$<3;++$)ne=Math.max(ne,b[1][$]-b[0][$]);for(var $=0;$<3;++$)s.autoScale?V[5*$]=s.aspect[$]/(b[1][$]-b[0][$]):V[5*$]=1/ne,s.autoCenter&&(V[12+$]=-V[5*$]*.5*(b[0][$]+b[1][$]))}},6640:function(v,g,r){var t=r(3236);g.pointVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),g.pointFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),g.pickVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),g.pickFragment=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(v,g,r){var t=r(9405),o=r(2762),i=r(1888),f=r(6640);v.exports=h;function u(w,c,a,p,x){this.plot=w,this.offsetBuffer=c,this.pickBuffer=a,this.shader=p,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var l=u.prototype;l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},l.update=function(w){var c;w=w||{};function a(M,s){return M in w?w[M]:s}this.sizeMin=a("sizeMin",.5),this.sizeMax=a("sizeMax",20),this.color=a("color",[1,0,0,1]).slice(),this.areaRatio=a("areaRatio",1),this.borderColor=a("borderColor",[0,0,0,1]).slice(),this.blend=a("blend",!1);var p=w.positions.length>>>1,x=w.positions instanceof Float32Array,A=w.idToIndex instanceof Int32Array&&w.idToIndex.length>=p,P=w.positions,y=x?P:i.mallocFloat32(P.length),C=A?w.idToIndex:i.mallocInt32(p);if(x||y.set(P),!A)for(y.set(P),c=0;c<p;c++)C[c]=c;this.points=P,this.offsetBuffer.update(y),this.pickBuffer.update(C),x||i.free(y),A||i.free(C),this.pointCount=p,this.pickOffset=0};function m(w,c){var a=0,p=w.length>>>1,x;for(x=0;x<p;x++){var A=w[x*2],P=w[x*2+1];A>=c[0]&&A<=c[2]&&P>=c[1]&&P<=c[3]&&a++}return a}l.unifiedDraw=function(){var w=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(a){var p=a!==void 0,x=p?this.pickShader:this.shader,A=this.plot.gl,P=this.plot.dataBox;if(this.pointCount===0)return a;var y=P[2]-P[0],C=P[3]-P[1],M=m(this.points,P),s=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(M,.33333)));w[0]=2/y,w[4]=2/C,w[6]=-2*P[0]/y-1,w[7]=-2*P[1]/C-1,this.offsetBuffer.bind(),x.bind(),x.attributes.position.pointer(),x.uniforms.matrix=w,x.uniforms.color=this.color,x.uniforms.borderColor=this.borderColor,x.uniforms.pointCloud=s<5,x.uniforms.pointSize=s,x.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(c[0]=a&255,c[1]=a>>8&255,c[2]=a>>16&255,c[3]=a>>24&255,this.pickBuffer.bind(),x.attributes.pickId.pointer(A.UNSIGNED_BYTE),x.uniforms.pickOffset=c,this.pickOffset=a);var _=A.getParameter(A.BLEND),b=A.getParameter(A.DITHER);return _&&!this.blend&&A.disable(A.BLEND),b&&A.disable(A.DITHER),A.drawArrays(A.POINTS,0,this.pointCount),_&&!this.blend&&A.enable(A.BLEND),b&&A.enable(A.DITHER),a+this.pointCount}}(),l.draw=l.unifiedDraw,l.drawPick=l.unifiedDraw,l.pick=function(w,c,a){var p=this.pickOffset,x=this.pointCount;if(a<p||a>=p+x)return null;var A=a-p,P=this.points;return{object:this,pointId:A,dataCoord:[P[2*A],P[2*A+1]]}};function h(w,c){var a=w.gl,p=o(a),x=o(a),A=t(a,f.pointVertex,f.pointFragment),P=t(a,f.pickVertex,f.pickFragment),y=new u(w,p,x,A,P);return y.update(c),w.addObject(y),y}},783:function(v){v.exports=g;function g(r,t,o,i){var f=t[0],u=t[1],l=t[2],m=t[3],h=o[0],w=o[1],c=o[2],a=o[3],p,x,A,P,y;return x=f*h+u*w+l*c+m*a,x<0&&(x=-x,h=-h,w=-w,c=-c,a=-a),1-x>1e-6?(p=Math.acos(x),A=Math.sin(p),P=Math.sin((1-i)*p)/A,y=Math.sin(i*p)/A):(P=1-i,y=i),r[0]=P*f+y*h,r[1]=P*u+y*w,r[2]=P*l+y*c,r[3]=P*m+y*a,r}},5964:function(v){v.exports=function(g){return!g&&g!==0?"":g.toString()}},9366:function(v,g,r){var t=r(4359);v.exports=i;var o={};function i(f,u,l){var m=[u.style,u.weight,u.variant,u.family].join("_"),h=o[m];if(h||(h=o[m]={}),f in h)return h[f];var w={textAlign:"center",textBaseline:"middle",lineHeight:1,font:u.family,fontStyle:u.style,fontWeight:u.weight,fontVariant:u.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};w.triangles=!0;var c=t(f,w);w.triangles=!1;var a=t(f,w),p,x;if(l&&l!==1){for(p=0;p<c.positions.length;++p)for(x=0;x<c.positions[p].length;++x)c.positions[p][x]/=l;for(p=0;p<a.positions.length;++p)for(x=0;x<a.positions[p].length;++x)a.positions[p][x]/=l}var A=[[1/0,1/0],[-1/0,-1/0]],P=a.positions.length;for(p=0;p<P;++p){var y=a.positions[p];for(x=0;x<2;++x)A[0][x]=Math.min(A[0][x],y[x]),A[1][x]=Math.max(A[1][x],y[x])}return h[f]=[c,a,A]}},1283:function(v,g,r){var t=r(9405),o=r(3236),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),f=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),l=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),m=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],w={vertex:i,fragment:l,attributes:h},c={vertex:f,fragment:l,attributes:h},a={vertex:u,fragment:l,attributes:h},p={vertex:i,fragment:m,attributes:h},x={vertex:f,fragment:m,attributes:h},A={vertex:u,fragment:m,attributes:h};function P(y,C){var M=t(y,C),s=M.attributes;return s.position.location=0,s.color.location=1,s.glyph.location=2,s.id.location=3,M}g.createPerspective=function(y){return P(y,w)},g.createOrtho=function(y){return P(y,c)},g.createProject=function(y){return P(y,a)},g.createPickPerspective=function(y){return P(y,p)},g.createPickOrtho=function(y){return P(y,x)},g.createPickProject=function(y){return P(y,A)}},8418:function(v,g,r){var t=r(5219),o=r(2762),i=r(8116),f=r(1888),u=r(6760),l=r(1283),m=r(9366),h=r(5964),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c=ArrayBuffer,a=DataView;function p(ee){return c.isView(ee)&&!(ee instanceof a)}function x(ee){return Array.isArray(ee)||p(ee)}v.exports=K;function A(ee,le){var j=ee[0],Z=ee[1],fe=ee[2],re=ee[3];return ee[0]=le[0]*j+le[4]*Z+le[8]*fe+le[12]*re,ee[1]=le[1]*j+le[5]*Z+le[9]*fe+le[13]*re,ee[2]=le[2]*j+le[6]*Z+le[10]*fe+le[14]*re,ee[3]=le[3]*j+le[7]*Z+le[11]*fe+le[15]*re,ee}function P(ee,le,j,Z){return A(Z,Z),A(Z,Z),A(Z,Z)}function y(ee,le){this.index=ee,this.dataCoordinate=this.position=le}function C(ee){return ee===!0||ee>1?1:ee}function M(ee,le,j,Z,fe,re,ce,xe,Te,we,_e,ke){this.gl=ee,this.pixelRatio=1,this.shader=le,this.orthoShader=j,this.projectShader=Z,this.pointBuffer=fe,this.colorBuffer=re,this.glyphBuffer=ce,this.idBuffer=xe,this.vao=Te,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=we,this.pickOrthoShader=_e,this.pickProjectShader=ke,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var s=M.prototype;s.pickSlots=1,s.setPickBase=function(ee){this.pickId=ee},s.isTransparent=function(){if(this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&this.projectHasAlpha)return!0;return!1},s.isOpaque=function(){if(!this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&!this.projectHasAlpha)return!0;return!1};var _=[0,0],b=[0,0,0],k=[0,0,0],D=[0,0,0,1],V=[0,0,0,1],O=w.slice(),N=[0,0,0],B=[[0,0,0],[0,0,0]];function z(ee){return ee[0]=ee[1]=ee[2]=0,ee}function H(ee,le){return ee[0]=le[0],ee[1]=le[1],ee[2]=le[2],ee[3]=1,ee}function X(ee,le,j,Z){return ee[0]=le[0],ee[1]=le[1],ee[2]=le[2],ee[j]=Z,ee}function $(ee){for(var le=B,j=0;j<2;++j)for(var Z=0;Z<3;++Z)le[j][Z]=Math.max(Math.min(ee[j][Z],1e8),-1e8);return le}function ne(ee,le,j,Z){var fe=le.axesProject,re=le.gl,ce=ee.uniforms,xe=j.model||w,Te=j.view||w,we=j.projection||w,_e=le.axesBounds,ke=$(le.clipBounds),Ne;le.axes&&le.axes.lastCubeProps?Ne=le.axes.lastCubeProps.axis:Ne=[1,1,1],_[0]=2/re.drawingBufferWidth,_[1]=2/re.drawingBufferHeight,ee.bind(),ce.view=Te,ce.projection=we,ce.screenSize=_,ce.highlightId=le.highlightId,ce.highlightScale=le.highlightScale,ce.clipBounds=ke,ce.pickGroup=le.pickId/255,ce.pixelRatio=Z;for(var Ee=0;Ee<3;++Ee)if(fe[Ee]){ce.scale=le.projectScale[Ee],ce.opacity=le.projectOpacity[Ee];for(var ze=O,Ce=0;Ce<16;++Ce)ze[Ce]=0;for(var Ce=0;Ce<4;++Ce)ze[5*Ce]=1;ze[5*Ee]=0,Ne[Ee]<0?ze[12+Ee]=_e[0][Ee]:ze[12+Ee]=_e[1][Ee],u(ze,xe,ze),ce.model=ze;var Oe=(Ee+1)%3,Le=(Ee+2)%3,Ge=z(b),rt=z(k);Ge[Oe]=1,rt[Le]=1;var ot=P(we,Te,xe,H(D,Ge)),$e=P(we,Te,xe,H(V,rt));if(Math.abs(ot[1])>Math.abs($e[1])){var qe=ot;ot=$e,$e=qe,qe=Ge,Ge=rt,rt=qe;var ht=Oe;Oe=Le,Le=ht}ot[0]<0&&(Ge[Oe]=-1),$e[1]>0&&(rt[Le]=-1);for(var vt=0,pt=0,Ce=0;Ce<4;++Ce)vt+=Math.pow(xe[4*Oe+Ce],2),pt+=Math.pow(xe[4*Le+Ce],2);Ge[Oe]/=Math.sqrt(vt),rt[Le]/=Math.sqrt(pt),ce.axes[0]=Ge,ce.axes[1]=rt,ce.fragClipBounds[0]=X(N,ke[0],Ee,-1e8),ce.fragClipBounds[1]=X(N,ke[1],Ee,1e8),le.vao.bind(),le.vao.draw(re.TRIANGLES,le.vertexCount),le.lineWidth>0&&(re.lineWidth(le.lineWidth*Z),le.vao.draw(re.LINES,le.lineVertexCount,le.vertexCount)),le.vao.unbind()}}var q=[-1e8,-1e8,-1e8],ue=[1e8,1e8,1e8],te=[q,ue];function J(ee,le,j,Z,fe,re,ce){var xe=j.gl;if((re===j.projectHasAlpha||ce)&&ne(le,j,Z,fe),re===j.hasAlpha||ce){ee.bind();var Te=ee.uniforms;Te.model=Z.model||w,Te.view=Z.view||w,Te.projection=Z.projection||w,_[0]=2/xe.drawingBufferWidth,_[1]=2/xe.drawingBufferHeight,Te.screenSize=_,Te.highlightId=j.highlightId,Te.highlightScale=j.highlightScale,Te.fragClipBounds=te,Te.clipBounds=j.axes.bounds,Te.opacity=j.opacity,Te.pickGroup=j.pickId/255,Te.pixelRatio=fe,j.vao.bind(),j.vao.draw(xe.TRIANGLES,j.vertexCount),j.lineWidth>0&&(xe.lineWidth(j.lineWidth*fe),j.vao.draw(xe.LINES,j.lineVertexCount,j.vertexCount)),j.vao.unbind()}}s.draw=function(ee){var le=this.useOrtho?this.orthoShader:this.shader;J(le,this.projectShader,this,ee,this.pixelRatio,!1,!1)},s.drawTransparent=function(ee){var le=this.useOrtho?this.orthoShader:this.shader;J(le,this.projectShader,this,ee,this.pixelRatio,!0,!1)},s.drawPick=function(ee){var le=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;J(le,this.pickProjectShader,this,ee,1,!0,!0)},s.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;var le=ee.value[2]+(ee.value[1]<<8)+(ee.value[0]<<16);if(le>=this.pointCount||le<0)return null;var j=this.points[le],Z=this._selectResult;Z.index=le;for(var fe=0;fe<3;++fe)Z.position[fe]=Z.dataCoordinate[fe]=j[fe];return Z},s.highlight=function(ee){if(!ee)this.highlightId=[1,1,1,1];else{var le=ee.index,j=le&255,Z=le>>8&255,fe=le>>16&255;this.highlightId=[j/255,Z/255,fe/255,0]}};function ie(ee,le,j,Z){var fe;x(ee)?le<ee.length?fe=ee[le]:fe=void 0:fe=ee,fe=h(fe);var re=!0;t(fe)&&(fe="",re=!1),j||(j={});var ce=j.family;x(ce)&&(ce=ce[le]),ce||(ce="normal");var xe=j.weight;x(xe)&&(xe=xe[le]),xe||(xe="normal");var Te=j.style;x(Te)&&(Te=Te[le]),Te||(Te="normal");var we=j.variant;x(we)&&(we=we[le]),we||(we="normal");var _e=m(fe,{family:ce,weight:xe,style:Te,variant:we},Z),_e=m(fe,j,Z);return{mesh:_e[0],lines:_e[1],bounds:_e[2],visible:re}}s.update=function(ee){if(ee=ee||{},"perspective"in ee&&(this.useOrtho=!ee.perspective),"orthographic"in ee&&(this.useOrtho=!!ee.orthographic),"lineWidth"in ee&&(this.lineWidth=ee.lineWidth),"project"in ee)if(x(ee.project))this.axesProject=ee.project;else{var le=!!ee.project;this.axesProject=[le,le,le]}if("projectScale"in ee)if(x(ee.projectScale))this.projectScale=ee.projectScale.slice();else{var j=+ee.projectScale;this.projectScale=[j,j,j]}if(this.projectHasAlpha=!1,"projectOpacity"in ee){if(x(ee.projectOpacity))this.projectOpacity=ee.projectOpacity.slice();else{var j=+ee.projectOpacity;this.projectOpacity=[j,j,j]}for(var Z=0;Z<3;++Z)this.projectOpacity[Z]=C(this.projectOpacity[Z]),this.projectOpacity[Z]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in ee&&(this.opacity=C(ee.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var fe=ee.position,re={family:ee.font||"normal",style:ee.fontStyle||"normal",weight:ee.fontWeight||"normal",variant:ee.fontVariant||"normal"},ce=ee.alignment||[0,0],xe,Te;if(ce.length===2)xe=ce[0],Te=ce[1];else{xe=[],Te=[];for(var Z=0;Z<ce.length;++Z)xe[Z]=ce[Z][0],Te[Z]=ce[Z][1]}var we=[1/0,1/0,1/0],_e=[-1/0,-1/0,-1/0],ke=ee.glyph,Ne=ee.color,Ee=ee.size,ze=ee.angle,Ce=ee.lineColor,Oe=-1,Le=0,Ge=0,rt=0;if(fe.length){rt=fe.length;e:for(var Z=0;Z<rt;++Z){for(var ot=fe[Z],$e=0;$e<3;++$e)if(isNaN(ot[$e])||!isFinite(ot[$e]))continue e;var qe=ie(ke,Z,re,this.pixelRatio),ht=qe.mesh,vt=qe.lines,pt=qe.bounds;Le+=ht.cells.length*3,Ge+=vt.edges.length*2}}var wt=Le+Ge,Et=f.mallocFloat(3*wt),nt=f.mallocFloat(4*wt),Fe=f.mallocFloat(2*wt),We=f.mallocUint32(wt);if(wt>0){var Ze=0,Ye=Le,Ie=[0,0,0,1],De=[0,0,0,1],je=x(Ne)&&x(Ne[0]),Re=x(Ce)&&x(Ce[0]);e:for(var Z=0;Z<rt;++Z){Oe+=1;for(var ot=fe[Z],$e=0;$e<3;++$e){if(isNaN(ot[$e])||!isFinite(ot[$e]))continue e;_e[$e]=Math.max(_e[$e],ot[$e]),we[$e]=Math.min(we[$e],ot[$e])}var qe=ie(ke,Z,re,this.pixelRatio),ht=qe.mesh,vt=qe.lines,pt=qe.bounds,pe=qe.visible;if(!pe)Ie=[1,1,1,0];else if(x(Ne)){var be;if(je?Z<Ne.length?be=Ne[Z]:be=[0,0,0,0]:be=Ne,be.length===3){for(var $e=0;$e<3;++$e)Ie[$e]=be[$e];Ie[3]=1}else if(be.length===4){for(var $e=0;$e<4;++$e)Ie[$e]=be[$e];!this.hasAlpha&&be[3]<1&&(this.hasAlpha=!0)}}else Ie[0]=Ie[1]=Ie[2]=0,Ie[3]=1;if(!pe)De=[1,1,1,0];else if(x(Ce)){var be;if(Re?Z<Ce.length?be=Ce[Z]:be=[0,0,0,0]:be=Ce,be.length===3){for(var $e=0;$e<3;++$e)De[$e]=be[$e];De[$e]=1}else if(be.length===4){for(var $e=0;$e<4;++$e)De[$e]=be[$e];!this.hasAlpha&&be[3]<1&&(this.hasAlpha=!0)}}else De[0]=De[1]=De[2]=0,De[3]=1;var Ue=.5;pe?x(Ee)?Z<Ee.length?Ue=+Ee[Z]:Ue=12:Ee?Ue=+Ee:this.useOrtho&&(Ue=12):Ue=0;var et=0;x(ze)?Z<ze.length?et=+ze[Z]:et=0:ze&&(et=+ze);for(var st=Math.cos(et),lt=Math.sin(et),ot=fe[Z],$e=0;$e<3;++$e)_e[$e]=Math.max(_e[$e],ot[$e]),we[$e]=Math.min(we[$e],ot[$e]);var Gt=xe,Zt=Te,Gt=0;x(xe)?Z<xe.length?Gt=xe[Z]:Gt=0:xe&&(Gt=xe);var Zt=0;x(Te)?Z<Te.length?Zt=Te[Z]:Zt=0:Te&&(Zt=Te),Gt*=Gt>0?1-pt[0][0]:Gt<0?1+pt[1][0]:1,Zt*=Zt>0?1-pt[0][1]:Zt<0?1+pt[1][1]:1;for(var Tt=[Gt,Zt],jt=ht.cells||[],Qt=ht.positions||[],$e=0;$e<jt.length;++$e)for(var It=jt[$e],Xt=0;Xt<3;++Xt){for(var gr=0;gr<3;++gr)Et[3*Ze+gr]=ot[gr];for(var gr=0;gr<4;++gr)nt[4*Ze+gr]=Ie[gr];We[Ze]=Oe;var gt=Qt[It[Xt]];Fe[2*Ze]=Ue*(st*gt[0]-lt*gt[1]+Tt[0]),Fe[2*Ze+1]=Ue*(lt*gt[0]+st*gt[1]+Tt[1]),Ze+=1}for(var jt=vt.edges,Qt=vt.positions,$e=0;$e<jt.length;++$e)for(var It=jt[$e],Xt=0;Xt<2;++Xt){for(var gr=0;gr<3;++gr)Et[3*Ye+gr]=ot[gr];for(var gr=0;gr<4;++gr)nt[4*Ye+gr]=De[gr];We[Ye]=Oe;var gt=Qt[It[Xt]];Fe[2*Ye]=Ue*(st*gt[0]-lt*gt[1]+Tt[0]),Fe[2*Ye+1]=Ue*(lt*gt[0]+st*gt[1]+Tt[1]),Ye+=1}}}this.bounds=[we,_e],this.points=fe,this.pointCount=fe.length,this.vertexCount=Le,this.lineVertexCount=Ge,this.pointBuffer.update(Et),this.colorBuffer.update(nt),this.glyphBuffer.update(Fe),this.idBuffer.update(We),f.free(Et),f.free(nt),f.free(Fe),f.free(We)},s.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function K(ee){var le=ee.gl,j=l.createPerspective(le),Z=l.createOrtho(le),fe=l.createProject(le),re=l.createPickPerspective(le),ce=l.createPickOrtho(le),xe=l.createPickProject(le),Te=o(le),we=o(le),_e=o(le),ke=o(le),Ne=i(le,[{buffer:Te,size:3,type:le.FLOAT},{buffer:we,size:4,type:le.FLOAT},{buffer:_e,size:2,type:le.FLOAT},{buffer:ke,size:4,type:le.UNSIGNED_BYTE,normalized:!0}]),Ee=new M(le,j,Z,fe,Te,we,_e,ke,Ne,re,ce,xe);return Ee.update(ee),Ee}},4298:function(v,g,r){var t=r(3236);g.boxVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),g.boxFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(v,g,r){var t=r(9405),o=r(2762),i=r(4298);v.exports=l;function f(m,h,w){this.plot=m,this.boxBuffer=h,this.boxShader=w,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var u=f.prototype;u.draw=function(){if(this.enabled){var m=this.plot,h=this.selectBox,w=this.borderWidth;this.innerFill;var c=this.innerColor;this.outerFill;var a=this.outerColor,p=this.borderColor,x=m.box,A=m.screenBox,P=m.dataBox,y=m.viewBox,C=m.pixelRatio,M=(h[0]-P[0])*(y[2]-y[0])/(P[2]-P[0])+y[0],s=(h[1]-P[1])*(y[3]-y[1])/(P[3]-P[1])+y[1],_=(h[2]-P[0])*(y[2]-y[0])/(P[2]-P[0])+y[0],b=(h[3]-P[1])*(y[3]-y[1])/(P[3]-P[1])+y[1];if(M=Math.max(M,y[0]),s=Math.max(s,y[1]),_=Math.min(_,y[2]),b=Math.min(b,y[3]),!(_<M||b<s)){x.bind();var k=A[2]-A[0],D=A[3]-A[1];if(this.outerFill&&(x.drawBox(0,0,k,s,a),x.drawBox(0,s,M,b,a),x.drawBox(0,b,k,D,a),x.drawBox(_,s,k,b,a)),this.innerFill&&x.drawBox(M,s,_,b,c),w>0){var V=w*C;x.drawBox(M-V,s-V,_+V,s+V,p),x.drawBox(M-V,b-V,_+V,b+V,p),x.drawBox(M-V,s-V,M+V,b+V,p),x.drawBox(_-V,s-V,_+V,b+V,p)}}}},u.update=function(m){m=m||{},this.innerFill=!!m.innerFill,this.outerFill=!!m.outerFill,this.innerColor=(m.innerColor||[0,0,0,.5]).slice(),this.outerColor=(m.outerColor||[0,0,0,.5]).slice(),this.borderColor=(m.borderColor||[0,0,0,1]).slice(),this.borderWidth=m.borderWidth||0,this.selectBox=(m.selectBox||this.selectBox).slice()},u.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function l(m,h){var w=m.gl,c=o(w,[0,0,0,1,1,0,1,1]),a=t(w,i.boxVertex,i.boxFragment),p=new f(m,c,a);return p.update(h),m.addOverlay(p),p}},3589:function(v,g,r){v.exports=w;var t=r(2260),o=r(1888),i=r(9618),f=r(8828).nextPow2,u=function(c,a,p){for(var x=1e8,A=-1,P=-1,y=c.shape[0],C=c.shape[1],M=0;M<y;M++)for(var s=0;s<C;s++){var _=c.get(M,s,0),b=c.get(M,s,1),k=c.get(M,s,2),D=c.get(M,s,3);if(_<255||b<255||k<255||D<255){var V=a-M,O=p-s,N=V*V+O*O;N<x&&(x=N,A=M,P=s)}}return[A,P,x]};function l(c,a,p,x,A){this.coord=[c,a],this.id=p,this.value=x,this.distance=A}function m(c,a,p){this.gl=c,this.fbo=a,this.buffer=p,this._readTimeout=null;var x=this;this._readCallback=function(){x.gl&&(a.bind(),c.readPixels(0,0,a.shape[0],a.shape[1],c.RGBA,c.UNSIGNED_BYTE,x.buffer),x._readTimeout=null)}}var h=m.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var a=this.fbo.shape[0],p=this.fbo.shape[1];if(p*a*4>this.buffer.length){o.free(this.buffer);for(var x=this.buffer=o.mallocUint8(f(p*a*4)),A=0;A<p*a*4;++A)x[A]=255}return c}}}),h.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},h.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(c,a,p){if(!this.gl)return null;var x=this.fbo.shape.slice();c=c|0,a=a|0,typeof p!="number"&&(p=1);var A=Math.min(Math.max(c-p,0),x[0])|0,P=Math.min(Math.max(c+p,0),x[0])|0,y=Math.min(Math.max(a-p,0),x[1])|0,C=Math.min(Math.max(a+p,0),x[1])|0;if(P<=A||C<=y)return null;var M=[P-A,C-y],s=i(this.buffer,[M[0],M[1],4],[4,x[0]*4,1],4*(A+x[0]*y)),_=u(s.hi(M[0],M[1],1),p,p),b=_[0],k=_[1];if(b<0||Math.pow(this.radius,2)<_[2])return null;var D=s.get(b,k,0),V=s.get(b,k,1),O=s.get(b,k,2),N=s.get(b,k,3);return new l(b+A|0,k+y|0,D,[V,O,N],Math.sqrt(_[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function w(c,a){var p=a[0],x=a[1],A={},P=t(c,p,x,A),y=o.mallocUint8(p*x*4);return new m(c,P,y)}},9405:function(v,g,r){var t=r(3327),o=r(8731),i=r(216),f=r(5091),u=r(2145),l=r(8866);function m(a){this.gl=a,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=m.prototype;h.bind=function(){this.program||this._relink();var a,p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),x=this.gl.lastAttribCount;if(p>x)for(a=x;a<p;a++)this.gl.enableVertexAttribArray(a);else if(x>p)for(a=p;a<x;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},h.dispose=function(){for(var a=this.gl.lastAttribCount,p=0;p<a;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function w(a,p){return a.name<p.name?-1:1}h.update=function(a,p,x,A){if(!p||arguments.length===1){var P=a;a=P.vertex,p=P.fragment,x=P.uniforms,A=P.attributes}var y=this,C=y.gl,M=y._vref;y._vref=f.shader(C,C.VERTEX_SHADER,a),M&&M.dispose(),y.vertShader=y._vref.shader;var s=this._fref;if(y._fref=f.shader(C,C.FRAGMENT_SHADER,p),s&&s.dispose(),y.fragShader=y._fref.shader,!x||!A){var _=C.createProgram();if(C.attachShader(_,y.fragShader),C.attachShader(_,y.vertShader),C.linkProgram(_),!C.getProgramParameter(_,C.LINK_STATUS)){var b=C.getProgramInfoLog(_);throw new l(b,"Error linking program:"+b)}x=x||u.uniforms(C,_),A=A||u.attributes(C,_),C.deleteProgram(_)}A=A.slice(),A.sort(w);var k=[],D=[],V=[],O;for(O=0;O<A.length;++O){var N=A[O];if(N.type.indexOf("mat")>=0){for(var B=N.type.charAt(N.type.length-1)|0,z=new Array(B),H=0;H<B;++H)z[H]=V.length,D.push(N.name+"["+H+"]"),typeof N.location=="number"?V.push(N.location+H):Array.isArray(N.location)&&N.location.length===B&&typeof N.location[H]=="number"?V.push(N.location[H]|0):V.push(-1);k.push({name:N.name,type:N.type,locations:z})}else k.push({name:N.name,type:N.type,locations:[V.length]}),D.push(N.name),typeof N.location=="number"?V.push(N.location|0):V.push(-1)}var X=0;for(O=0;O<V.length;++O)if(V[O]<0){for(;V.indexOf(X)>=0;)X+=1;V[O]=X}var $=new Array(x.length);function ne(){y.program=f.program(C,y._vref,y._fref,D,V);for(var q=0;q<x.length;++q)$[q]=C.getUniformLocation(y.program,x[q].name)}ne(),y._relink=ne,y.types={uniforms:i(x),attributes:i(A)},y.attributes=o(C,y,k,V),Object.defineProperty(y,"uniforms",t(C,y,x,$))};function c(a,p,x,A,P){var y=new m(a);return y.update(p,x,A,P),y}v.exports=c},8866:function(v){function g(r,t,o){this.shortMessage=t||"",this.longMessage=o||"",this.rawError=r||"",this.message="gl-shader: "+(t||r||"")+(o?`
`+o:""),this.stack=new Error().stack}g.prototype=new Error,g.prototype.name="GLError",g.prototype.constructor=g,v.exports=g},8731:function(v,g,r){v.exports=m;var t=r(8866);function o(h,w,c,a,p,x){this._gl=h,this._wrapper=w,this._index=c,this._locations=a,this._dimension=p,this._constFunc=x}var i=o.prototype;i.pointer=function(w,c,a,p){var x=this,A=x._gl,P=x._locations[x._index];A.vertexAttribPointer(P,x._dimension,w||A.FLOAT,!!c,a||0,p||0),A.enableVertexAttribArray(P)},i.set=function(h,w,c,a){return this._constFunc(this._locations[this._index],h,w,c,a)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=h|0,this._wrapper.program=null),h|0}});var f=[function(h,w,c){return c.length===void 0?h.vertexAttrib1f(w,c):h.vertexAttrib1fv(w,c)},function(h,w,c,a){return c.length===void 0?h.vertexAttrib2f(w,c,a):h.vertexAttrib2fv(w,c)},function(h,w,c,a,p){return c.length===void 0?h.vertexAttrib3f(w,c,a,p):h.vertexAttrib3fv(w,c)},function(h,w,c,a,p,x){return c.length===void 0?h.vertexAttrib4f(w,c,a,p,x):h.vertexAttrib4fv(w,c)}];function u(h,w,c,a,p,x,A){var P=f[p],y=new o(h,w,c,a,p,P);Object.defineProperty(x,A,{set:function(C){return h.disableVertexAttribArray(a[c]),P(h,a[c],C),C},get:function(){return y},enumerable:!0})}function l(h,w,c,a,p,x,A){for(var P=new Array(p),y=new Array(p),C=0;C<p;++C)u(h,w,c[C],a,p,P,C),y[C]=P[C];Object.defineProperty(P,"location",{set:function(_){if(Array.isArray(_))for(var b=0;b<p;++b)y[b].location=_[b];else for(var b=0;b<p;++b)y[b].location=_+b;return _},get:function(){for(var _=new Array(p),b=0;b<p;++b)_[b]=a[c[b]];return _},enumerable:!0}),P.pointer=function(_,b,k,D){_=_||h.FLOAT,b=!!b,k=k||p*p,D=D||0;for(var V=0;V<p;++V){var O=a[c[V]];h.vertexAttribPointer(O,p,_,b,k,D+V*p),h.enableVertexAttribArray(O)}};var M=new Array(p),s=h["vertexAttrib"+p+"fv"];Object.defineProperty(x,A,{set:function(_){for(var b=0;b<p;++b){var k=a[c[b]];if(h.disableVertexAttribArray(k),Array.isArray(_[0]))s.call(h,k,_[b]);else{for(var D=0;D<p;++D)M[D]=_[p*b+D];s.call(h,k,M)}}return _},get:function(){return P},enumerable:!0})}function m(h,w,c,a){for(var p={},x=0,A=c.length;x<A;++x){var P=c[x],y=P.name,C=P.type,M=P.locations;switch(C){case"bool":case"int":case"float":u(h,w,M[0],a,1,p,y);break;default:if(C.indexOf("vec")>=0){var s=C.charCodeAt(C.length-1)-48;if(s<2||s>4)throw new t("","Invalid data type for attribute "+y+": "+C);u(h,w,M[0],a,s,p,y)}else if(C.indexOf("mat")>=0){var s=C.charCodeAt(C.length-1)-48;if(s<2||s>4)throw new t("","Invalid data type for attribute "+y+": "+C);l(h,w,M,a,s,p,y)}else throw new t("","Unknown data type for attribute "+y+": "+C);break}}return p}},3327:function(v,g,r){var t=r(216),o=r(8866);v.exports=u;function i(l){return function(){return l}}function f(l,m){for(var h=new Array(l),w=0;w<l;++w)h[w]=m;return h}function u(l,m,h,w){function c(C){return function(M,s,_){return M.getUniform(s.program,_[C])}}function a(C){return function(s){for(var _=p("",C),b=0;b<_.length;++b){var k=_[b],D=k[0],V=k[1];if(w[V]){var O=s;if(typeof D=="string"&&(D.indexOf(".")===0||D.indexOf("[")===0)){var N=D;if(D.indexOf(".")===0&&(N=D.slice(1)),N.indexOf("]")===N.length-1){var B=N.indexOf("["),z=N.slice(0,B),H=N.slice(B+1,N.length-1);O=z?s[z][H]:s[H]}else O=s[N]}var X=h[V].type,$;switch(X){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(w[V],O);break;case"float":l.uniform1f(w[V],O);break;default:var ne=X.indexOf("vec");if(0<=ne&&ne<=1&&X.length===4+ne){if($=X.charCodeAt(X.length-1)-48,$<2||$>4)throw new o("","Invalid data type");switch(X.charAt(0)){case"b":case"i":l["uniform"+$+"iv"](w[V],O);break;case"v":l["uniform"+$+"fv"](w[V],O);break;default:throw new o("","Unrecognized data type for vector "+name+": "+X)}}else if(X.indexOf("mat")===0&&X.length===4){if($=X.charCodeAt(X.length-1)-48,$<2||$>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+X);l["uniformMatrix"+$+"fv"](w[V],!1,O);break}else throw new o("","Unknown uniform data type for "+name+": "+X)}}}}}function p(C,M){if(typeof M!="object")return[[C,M]];var s=[];for(var _ in M){var b=M[_],k=C;parseInt(_)+""===_?k+="["+_+"]":k+="."+_,typeof b=="object"?s.push.apply(s,p(k,b)):s.push([k,b])}return s}function x(C){switch(C){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var M=C.indexOf("vec");if(0<=M&&M<=1&&C.length===4+M){var s=C.charCodeAt(C.length-1)-48;if(s<2||s>4)throw new o("","Invalid data type");return C.charAt(0)==="b"?f(s,!1):f(s,0)}else if(C.indexOf("mat")===0&&C.length===4){var s=C.charCodeAt(C.length-1)-48;if(s<2||s>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+C);return f(s*s,0)}else throw new o("","Unknown uniform data type for "+name+": "+C)}}function A(C,M,s){if(typeof s=="object"){var _=P(s);Object.defineProperty(C,M,{get:i(_),set:a(s),enumerable:!0,configurable:!1})}else w[s]?Object.defineProperty(C,M,{get:c(s),set:a(s),enumerable:!0,configurable:!1}):C[M]=x(h[s].type)}function P(C){var M;if(Array.isArray(C)){M=new Array(C.length);for(var s=0;s<C.length;++s)A(M,s,C[s])}else{M={};for(var _ in C)A(M,_,C[_])}return M}var y=t(h,!0);return{get:i(P(y)),set:a(y),enumerable:!0,configurable:!0}}},216:function(v){v.exports=g;function g(r,t){for(var o={},i=0;i<r.length;++i)for(var f=r[i].name,u=f.split("."),l=o,m=0;m<u.length;++m){var h=u[m].split("[");if(h.length>1){h[0]in l||(l[h[0]]=[]),l=l[h[0]];for(var w=1;w<h.length;++w){var c=parseInt(h[w]);w<h.length-1||m<u.length-1?(c in l||(w<h.length-1?l[c]=[]:l[c]={}),l=l[c]):t?l[c]=i:l[c]=r[i].type}}else m<u.length-1?(h[0]in l||(l[h[0]]={}),l=l[h[0]]):t?l[h[0]]=i:l[h[0]]=r[i].type}return o}},2145:function(v,g){g.uniforms=i,g.attributes=f;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},t=null;function o(u,l){if(!t){var m=Object.keys(r);t={};for(var h=0;h<m.length;++h){var w=m[h];t[u[w]]=r[w]}}return t[l]}function i(u,l){for(var m=u.getProgramParameter(l,u.ACTIVE_UNIFORMS),h=[],w=0;w<m;++w){var c=u.getActiveUniform(l,w);if(c){var a=o(u,c.type);if(c.size>1)for(var p=0;p<c.size;++p)h.push({name:c.name.replace("[0]","["+p+"]"),type:a});else h.push({name:c.name,type:a})}}return h}function f(u,l){for(var m=u.getProgramParameter(l,u.ACTIVE_ATTRIBUTES),h=[],w=0;w<m;++w){var c=u.getActiveAttrib(l,w);c&&h.push({name:c.name,type:o(u,c.type)})}return h}},5091:function(v,g,r){g.shader=p,g.program=x;var t=r(8866),o=r(2992),i=typeof WeakMap>"u"?r(606):WeakMap,f=new i,u=0;function l(A,P,y,C,M,s,_){this.id=A,this.src=P,this.type=y,this.shader=C,this.count=s,this.programs=[],this.cache=_}l.prototype.dispose=function(){if(--this.count===0){for(var A=this.cache,P=A.gl,y=this.programs,C=0,M=y.length;C<M;++C){var s=A.programs[y[C]];s&&(delete A.programs[C],P.deleteProgram(s))}P.deleteShader(this.shader),delete A.shaders[this.type===P.FRAGMENT_SHADER|0][this.src]}};function m(A){this.gl=A,this.shaders=[{},{}],this.programs={}}var h=m.prototype;function w(A,P,y){var C=A.createShader(P);if(A.shaderSource(C,y),A.compileShader(C),!A.getShaderParameter(C,A.COMPILE_STATUS)){var M=A.getShaderInfoLog(C);try{var s=o(M,y,P)}catch(_){throw console.warn("Failed to format compiler error: "+_),new t(M,`Error compiling shader:
`+M)}throw new t(M,s.short,s.long)}return C}h.getShaderReference=function(A,P){var y=this.gl,C=this.shaders[A===y.FRAGMENT_SHADER|0],M=C[P];if(!M||!y.isShader(M.shader)){var s=w(y,A,P);M=C[P]=new l(u++,P,A,s,[],1,this)}else M.count+=1;return M};function c(A,P,y,C,M){var s=A.createProgram();A.attachShader(s,P),A.attachShader(s,y);for(var _=0;_<C.length;++_)A.bindAttribLocation(s,M[_],C[_]);if(A.linkProgram(s),!A.getProgramParameter(s,A.LINK_STATUS)){var b=A.getProgramInfoLog(s);throw new t(b,"Error linking program: "+b)}return s}h.getProgram=function(A,P,y,C){var M=[A.id,P.id,y.join(":"),C.join(":")].join("@"),s=this.programs[M];return(!s||!this.gl.isProgram(s))&&(this.programs[M]=s=c(this.gl,A.shader,P.shader,y,C),A.programs.push(M),P.programs.push(M)),s};function a(A){var P=f.get(A);return P||(P=new m(A),f.set(A,P)),P}function p(A,P,y){return a(A).getShaderReference(P,y)}function x(A,P,y,C,M){return a(A).getProgram(P,y,C,M)}},4098:function(v){v.exports=t;function g(o){this.plot=o,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var r=g.prototype;r.update=function(o){o=o||{},this.enable=(o.enable||[!0,!0,!1,!1]).slice(),this.width=(o.width||[1,1,1,1]).slice(),this.color=(o.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(i){return i.slice()}),this.center=(o.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var o=this.enable,i=this.width,f=this.color,u=this.center,l=this.plot,m=l.line,h=l.dataBox,w=l.viewBox;if(m.bind(),h[0]<=u[0]&&u[0]<=h[2]&&h[1]<=u[1]&&u[1]<=h[3]){var c=w[0]+(u[0]-h[0])/(h[2]-h[0])*(w[2]-w[0]),a=w[1]+(u[1]-h[1])/(h[3]-h[1])*(w[3]-w[1]);o[0]&&m.drawLine(c,a,w[0],a,i[0],f[0]),o[1]&&m.drawLine(c,a,c,w[1],i[1],f[1]),o[2]&&m.drawLine(c,a,w[2],a,i[2],f[2]),o[3]&&m.drawLine(c,a,c,w[3],i[3],f[3])}},r.dispose=function(){this.plot.removeOverlay(this)};function t(o,i){var f=new g(o);return f.update(i),o.addOverlay(f),f}},1493:function(v,g,r){var t=r(3236),o=r(9405),i=t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),f=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);v.exports=function(u){return o(u,i,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(v,g,r){var t=r(2762),o=r(8116),i=r(1493);v.exports=c;var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(a,p,x,A){this.gl=a,this.buffer=p,this.vao=x,this.shader=A,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=u.prototype,m=[0,0,0],h=[0,0,0],w=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(a){},l.draw=function(a){var p=this.gl,x=this.vao,A=this.shader;x.bind(),A.bind();var P=a.model||f,y=a.view||f,C=a.projection||f,M;this.axes&&(M=this.axes.lastCubeProps.axis);for(var s=m,_=h,b=0;b<3;++b)M&&M[b]<0?(s[b]=this.bounds[0][b],_[b]=this.bounds[1][b]):(s[b]=this.bounds[1][b],_[b]=this.bounds[0][b]);w[0]=p.drawingBufferWidth,w[1]=p.drawingBufferHeight,A.uniforms.model=P,A.uniforms.view=y,A.uniforms.projection=C,A.uniforms.coordinates=[this.position,s,_],A.uniforms.colors=this.colors,A.uniforms.screenShape=w;for(var b=0;b<3;++b)A.uniforms.lineWidth=this.lineWidth[b]*this.pixelRatio,this.enabled[b]&&(x.draw(p.TRIANGLES,6,6*b),this.drawSides[b]&&x.draw(p.TRIANGLES,12,18+12*b));x.unbind()},l.update=function(a){a&&("bounds"in a&&(this.bounds=a.bounds),"position"in a&&(this.position=a.position),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"colors"in a&&(this.colors=a.colors),"enabled"in a&&(this.enabled=a.enabled),"drawSides"in a&&(this.drawSides=a.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function c(a,p){var x=[];function A(s,_,b,k,D,V){var O=[s,_,b,0,0,0,1];O[k+3]=1,O[k]=D,x.push.apply(x,O),O[6]=-1,x.push.apply(x,O),O[k]=V,x.push.apply(x,O),x.push.apply(x,O),O[6]=1,x.push.apply(x,O),O[k]=D,x.push.apply(x,O)}A(0,0,0,0,0,1),A(0,0,0,1,0,1),A(0,0,0,2,0,1),A(1,0,0,1,-1,1),A(1,0,0,2,-1,1),A(0,1,0,0,-1,1),A(0,1,0,2,-1,1),A(0,0,1,0,-1,1),A(0,0,1,1,-1,1);var P=t(a,x),y=o(a,[{type:a.FLOAT,buffer:P,size:3,offset:0,stride:28},{type:a.FLOAT,buffer:P,size:3,offset:12,stride:28},{type:a.FLOAT,buffer:P,size:1,offset:24,stride:28}]),C=i(a);C.attributes.position.location=0,C.attributes.color.location=1,C.attributes.weight.location=2;var M=new u(a,P,y,C);return M.update(p),M}},6740:function(v,g,r){var t=r(3236),o=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);g.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},g.pickShader={vertex:f,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(v,g,r){var t=r(2931),o=r(9970),i=["xyz","xzy","yxz","yzx","zxy","zyx"],f=function(x,A,P,y){for(var C=x.points,M=x.velocities,s=x.divergences,_=[],b=[],k=[],D=[],V=[],O=[],N=0,B=0,z=o.create(),H=o.create(),X=8,$=0;$<C.length;$++){var ne=C[$],q=M[$],ue=s[$];A===0&&(ue=P*.05),B=t.length(q)/y,z=o.create(),t.copy(z,q),z[3]=ue;for(var te=0;te<X;te++)V[te]=[ne[0],ne[1],ne[2],te];if(D.length>0)for(var te=0;te<X;te++){var J=(te+1)%X;_.push(D[te],V[te],V[J],V[J],D[J],D[te]),k.push(H,z,z,z,H,H),O.push(N,B,B,B,N,N);var ie=_.length;b.push([ie-6,ie-5,ie-4],[ie-3,ie-2,ie-1])}var K=D;D=V,V=K;var ee=H;H=z,z=ee;var le=N;N=B,B=le}return{positions:_,cells:b,vectors:k,vertexIntensity:O}},u=function(x,A,P,y){for(var C=0,M=0;M<x.length;M++)for(var s=x[M].velocities,_=0;_<s.length;_++)C=Math.max(C,t.length(s[_]));for(var b=x.map(function($){return f($,P,y,C)}),k=[],D=[],V=[],O=[],M=0;M<b.length;M++){var N=b[M],B=k.length;k=k.concat(N.positions),V=V.concat(N.vectors),O=O.concat(N.vertexIntensity);for(var _=0;_<N.cells.length;_++){var z=N.cells[_],H=[];D.push(H);for(var X=0;X<z.length;X++)H.push(z[X]+B)}}return{positions:k,cells:D,vectors:V,vertexIntensity:O,colormap:A}},l=function(x,A){var P=x.length,y;for(y=0;y<P;y++){var C=x[y];if(C===A)return y;if(C>A)return y-1}return y},m=function(x,A,P){return x<A?A:x>P?P:x},h=function(x,A,P){var y=A.vectors,C=A.meshgrid,M=x[0],s=x[1],_=x[2],b=C[0].length,k=C[1].length,D=C[2].length,V=l(C[0],M),O=l(C[1],s),N=l(C[2],_),B=V+1,z=O+1,H=N+1;if(V=m(V,0,b-1),B=m(B,0,b-1),O=m(O,0,k-1),z=m(z,0,k-1),N=m(N,0,D-1),H=m(H,0,D-1),V<0||O<0||N<0||B>b-1||z>k-1||H>D-1)return t.create();var X=C[0][V],$=C[0][B],ne=C[1][O],q=C[1][z],ue=C[2][N],te=C[2][H],J=(M-X)/($-X),ie=(s-ne)/(q-ne),K=(_-ue)/(te-ue);isFinite(J)||(J=.5),isFinite(ie)||(ie=.5),isFinite(K)||(K=.5);var ee,le,j,Z,fe,re;switch(P.reversedX&&(V=b-1-V,B=b-1-B),P.reversedY&&(O=k-1-O,z=k-1-z),P.reversedZ&&(N=D-1-N,H=D-1-H),P.filled){case 5:fe=N,re=H,j=O*D,Z=z*D,ee=V*D*k,le=B*D*k;break;case 4:fe=N,re=H,ee=V*D,le=B*D,j=O*D*b,Z=z*D*b;break;case 3:j=O,Z=z,fe=N*k,re=H*k,ee=V*k*D,le=B*k*D;break;case 2:j=O,Z=z,ee=V*k,le=B*k,fe=N*k*b,re=H*k*b;break;case 1:ee=V,le=B,fe=N*b,re=H*b,j=O*b*D,Z=z*b*D;break;default:ee=V,le=B,j=O*b,Z=z*b,fe=N*b*k,re=H*b*k;break}var ce=y[ee+j+fe],xe=y[ee+j+re],Te=y[ee+Z+fe],we=y[ee+Z+re],_e=y[le+j+fe],ke=y[le+j+re],Ne=y[le+Z+fe],Ee=y[le+Z+re],ze=t.create(),Ce=t.create(),Oe=t.create(),Le=t.create();t.lerp(ze,ce,_e,J),t.lerp(Ce,xe,ke,J),t.lerp(Oe,Te,Ne,J),t.lerp(Le,we,Ee,J);var Ge=t.create(),rt=t.create();t.lerp(Ge,ze,Oe,ie),t.lerp(rt,Ce,Le,ie);var ot=t.create();return t.lerp(ot,Ge,rt,K),ot},w=function(x){var A=1/0;x.sort(function(M,s){return M-s});for(var P=x.length,y=1;y<P;y++){var C=Math.abs(x[y]-x[y-1]);C<A&&(A=C)}return A},c=function(x){for(var A=[],P=[],y=[],C={},M={},s={},_=x.length,b=0;b<_;b++){var k=x[b],D=k[0],V=k[1],O=k[2];C[D]||(A.push(D),C[D]=!0),M[V]||(P.push(V),M[V]=!0),s[O]||(y.push(O),s[O]=!0)}var N=w(A),B=w(P),z=w(y),H=Math.min(N,B,z);return isFinite(H)?H:1};v.exports=function(x,A){var P=x.startingPositions,y=x.maxLength||1e3,C=x.tubeSize||1,M=x.absoluteTubeSize,s=x.gridFill||"+x+y+z",_={};s.indexOf("-x")!==-1&&(_.reversedX=!0),s.indexOf("-y")!==-1&&(_.reversedY=!0),s.indexOf("-z")!==-1&&(_.reversedZ=!0),_.filled=i.indexOf(s.replace(/-/g,"").replace(/\+/g,""));var b=x.getVelocity||function(ke){return h(ke,x,_)},k=x.getDivergence||function(ke,Ne){var Ee=t.create(),ze=1e-4;t.add(Ee,ke,[ze,0,0]);var Ce=b(Ee);t.subtract(Ce,Ce,Ne),t.scale(Ce,Ce,1/ze),t.add(Ee,ke,[0,ze,0]);var Oe=b(Ee);t.subtract(Oe,Oe,Ne),t.scale(Oe,Oe,1/ze),t.add(Ee,ke,[0,0,ze]);var Le=b(Ee);return t.subtract(Le,Le,Ne),t.scale(Le,Le,1/ze),t.add(Ee,Ce,Oe),t.add(Ee,Ee,Le),Ee},D=[],V=A[0][0],O=A[0][1],N=A[0][2],B=A[1][0],z=A[1][1],H=A[1][2],X=function(ke){var Ne=ke[0],Ee=ke[1],ze=ke[2];return!(Ne<V||Ne>B||Ee<O||Ee>z||ze<N||ze>H)},$=t.distance(A[0],A[1]),ne=10*$/y,q=ne*ne,ue=1,te=0,J=P.length;J>1&&(ue=c(P));for(var ie=0;ie<J;ie++){var K=t.create();t.copy(K,P[ie]);var ee=[K],le=[],j=b(K),Z=K;le.push(j);var fe=[],re=k(K,j),ce=t.length(re);isFinite(ce)&&ce>te&&(te=ce),fe.push(ce),D.push({points:ee,velocities:le,divergences:fe});for(var xe=0;xe<y*100&&ee.length<y&&X(K);){xe++;var Te=t.clone(j),we=t.squaredLength(Te);if(we===0)break;if(we>q&&t.scale(Te,Te,ne/Math.sqrt(we)),t.add(Te,Te,K),j=b(Te),t.squaredDistance(Z,Te)-q>-1e-4*q){ee.push(Te),Z=Te,le.push(j);var re=k(Te,j),ce=t.length(re);isFinite(ce)&&ce>te&&(te=ce),fe.push(ce)}K=Te}}var _e=u(D,x.colormap,te,ue);return M?_e.tubeScale=M:(te===0&&(te=1),_e.tubeScale=C*.5*ue/te),_e};var a=r(6740),p=r(6405).createMesh;v.exports.createTubeMesh=function(x,A){return p(x,A,{shaders:a,traceType:"streamtube"})}},990:function(v,g,r){var t=r(9405),o=r(3236),i=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),f=o([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),l=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);g.createShader=function(m){var h=t(m,i,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},g.createPickShader=function(m){var h=t(m,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},g.createContourShader=function(m){var h=t(m,u,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h},g.createPickContourShader=function(m){var h=t(m,u,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h}},9499:function(v,g,r){v.exports=le;var t=r(8828),o=r(2762),i=r(8116),f=r(7766),u=r(1888),l=r(6729),m=r(5298),h=r(9994),w=r(9618),c=r(3711),a=r(6760),p=r(7608),x=r(2478),A=r(6199),P=r(990),y=P.createShader,C=P.createContourShader,M=P.createPickShader,s=P.createPickContourShader,_=4*10,b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var j=0;j<3;++j){var Z=D[j],fe=(j+1)%3,re=(j+2)%3;Z[fe+0]=1,Z[re+3]=1,Z[j+6]=1}})();function V(j,Z,fe,re,ce){this.position=j,this.index=Z,this.uv=fe,this.level=re,this.dataCoordinate=ce}var O=256;function N(j,Z,fe,re,ce,xe,Te,we,_e,ke,Ne,Ee,ze,Ce,Oe){this.gl=j,this.shape=Z,this.bounds=fe,this.objectOffset=Oe,this.intensityBounds=[],this._shader=re,this._pickShader=ce,this._coordinateBuffer=xe,this._vao=Te,this._colorMap=we,this._contourShader=_e,this._contourPickShader=ke,this._contourBuffer=Ne,this._contourVAO=Ee,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new V([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ze,this._dynamicVAO=Ce,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[w(u.mallocFloat(1024),[0,0]),w(u.mallocFloat(1024),[0,0]),w(u.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var B=N.prototype;B.genColormap=function(j,Z){var fe=!1,re=h([l({colormap:j,nshades:O,format:"rgba"}).map(function(ce,xe){var Te=Z?z(xe/255,Z):ce[3];return Te<1&&(fe=!0),[ce[0],ce[1],ce[2],255*Te]})]);return m.divseq(re,255),this.hasAlphaScale=fe,re},B.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},B.isOpaque=function(){return!this.isTransparent()},B.pickSlots=1,B.setPickBase=function(j){this.pickId=j};function z(j,Z){if(!Z||!Z.length)return 1;for(var fe=0;fe<Z.length;++fe){if(Z.length<2)return 1;if(Z[fe][0]===j)return Z[fe][1];if(Z[fe][0]>j&&fe>0){var re=(Z[fe][0]-j)/(Z[fe][0]-Z[fe-1][0]);return Z[fe][1]*(1-re)+re*Z[fe-1][1]}}return 1}var H=[0,0,0],X={showSurface:!1,showContour:!1,projections:[b.slice(),b.slice(),b.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function $(j,Z){var fe,re,ce,xe=Z.axes&&Z.axes.lastCubeProps.axis||H,Te=Z.showSurface,we=Z.showContour;for(fe=0;fe<3;++fe)for(Te=Te||Z.surfaceProject[fe],re=0;re<3;++re)we=we||Z.contourProject[fe][re];for(fe=0;fe<3;++fe){var _e=X.projections[fe];for(re=0;re<16;++re)_e[re]=0;for(re=0;re<4;++re)_e[5*re]=1;_e[5*fe]=0,_e[12+fe]=Z.axesBounds[+(xe[fe]>0)][fe],a(_e,j.model,_e);var ke=X.clipBounds[fe];for(ce=0;ce<2;++ce)for(re=0;re<3;++re)ke[ce][re]=j.clipBounds[ce][re];ke[0][fe]=-1e8,ke[1][fe]=1e8}return X.showSurface=Te,X.showContour=we,X}var ne={model:b,view:b,projection:b,inverseModel:b.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},q=b.slice(),ue=[1,0,0,0,1,0,0,0,1];function te(j,Z){j=j||{};var fe=this.gl;fe.disable(fe.CULL_FACE),this._colorMap.bind(0);var re=ne;re.model=j.model||b,re.view=j.view||b,re.projection=j.projection||b,re.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],re.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],re.objectOffset=this.objectOffset,re.contourColor=this.contourColor[0],re.inverseModel=p(re.inverseModel,re.model);for(var ce=0;ce<2;++ce)for(var xe=re.clipBounds[ce],Te=0;Te<3;++Te)xe[Te]=Math.min(Math.max(this.clipBounds[ce][Te],-1e8),1e8);re.kambient=this.ambientLight,re.kdiffuse=this.diffuseLight,re.kspecular=this.specularLight,re.roughness=this.roughness,re.fresnel=this.fresnel,re.opacity=this.opacity,re.height=0,re.permutation=ue,re.vertexColor=this.vertexColor;var we=q;for(a(we,re.view,re.model),a(we,re.projection,we),p(we,we),ce=0;ce<3;++ce)re.eyePosition[ce]=we[12+ce]/we[15];var _e=we[15];for(ce=0;ce<3;++ce)_e+=this.lightPosition[ce]*we[4*ce+3];for(ce=0;ce<3;++ce){var ke=we[12+ce];for(Te=0;Te<3;++Te)ke+=we[4*Te+ce]*this.lightPosition[Te];re.lightPosition[ce]=ke/_e}var Ne=$(re,this);if(Ne.showSurface){for(this._shader.bind(),this._shader.uniforms=re,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(fe.TRIANGLES,this._vertexCount),ce=0;ce<3;++ce)!this.surfaceProject[ce]||!this.vertexCount||(this._shader.uniforms.model=Ne.projections[ce],this._shader.uniforms.clipBounds=Ne.clipBounds[ce],this._vao.draw(fe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(Ne.showContour){var Ee=this._contourShader;re.kambient=1,re.kdiffuse=0,re.kspecular=0,re.opacity=1,Ee.bind(),Ee.uniforms=re;var ze=this._contourVAO;for(ze.bind(),ce=0;ce<3;++ce)for(Ee.uniforms.permutation=D[ce],fe.lineWidth(this.contourWidth[ce]*this.pixelRatio),Te=0;Te<this.contourLevels[ce].length;++Te)Te===this.highlightLevel[ce]?(Ee.uniforms.contourColor=this.highlightColor[ce],Ee.uniforms.contourTint=this.highlightTint[ce]):(Te===0||Te-1===this.highlightLevel[ce])&&(Ee.uniforms.contourColor=this.contourColor[ce],Ee.uniforms.contourTint=this.contourTint[ce]),this._contourCounts[ce][Te]&&(Ee.uniforms.height=this.contourLevels[ce][Te],ze.draw(fe.LINES,this._contourCounts[ce][Te],this._contourOffsets[ce][Te]));for(ce=0;ce<3;++ce)for(Ee.uniforms.model=Ne.projections[ce],Ee.uniforms.clipBounds=Ne.clipBounds[ce],Te=0;Te<3;++Te)if(this.contourProject[ce][Te]){Ee.uniforms.permutation=D[Te],fe.lineWidth(this.contourWidth[Te]*this.pixelRatio);for(var Ce=0;Ce<this.contourLevels[Te].length;++Ce)Ce===this.highlightLevel[Te]?(Ee.uniforms.contourColor=this.highlightColor[Te],Ee.uniforms.contourTint=this.highlightTint[Te]):(Ce===0||Ce-1===this.highlightLevel[Te])&&(Ee.uniforms.contourColor=this.contourColor[Te],Ee.uniforms.contourTint=this.contourTint[Te]),this._contourCounts[Te][Ce]&&(Ee.uniforms.height=this.contourLevels[Te][Ce],ze.draw(fe.LINES,this._contourCounts[Te][Ce],this._contourOffsets[Te][Ce]))}for(ze.unbind(),ze=this._dynamicVAO,ze.bind(),ce=0;ce<3;++ce)if(this._dynamicCounts[ce]!==0)for(Ee.uniforms.model=re.model,Ee.uniforms.clipBounds=re.clipBounds,Ee.uniforms.permutation=D[ce],fe.lineWidth(this.dynamicWidth[ce]*this.pixelRatio),Ee.uniforms.contourColor=this.dynamicColor[ce],Ee.uniforms.contourTint=this.dynamicTint[ce],Ee.uniforms.height=this.dynamicLevel[ce],ze.draw(fe.LINES,this._dynamicCounts[ce],this._dynamicOffsets[ce]),Te=0;Te<3;++Te)this.contourProject[Te][ce]&&(Ee.uniforms.model=Ne.projections[Te],Ee.uniforms.clipBounds=Ne.clipBounds[Te],ze.draw(fe.LINES,this._dynamicCounts[ce],this._dynamicOffsets[ce]));ze.unbind()}}B.draw=function(j){return te.call(this,j,!1)},B.drawTransparent=function(j){return te.call(this,j,!0)};var J={model:b,view:b,projection:b,inverseModel:b,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};B.drawPick=function(j){j=j||{};var Z=this.gl;Z.disable(Z.CULL_FACE);var fe=J;fe.model=j.model||b,fe.view=j.view||b,fe.projection=j.projection||b,fe.shape=this._field[2].shape,fe.pickId=this.pickId/255,fe.lowerBound=this.bounds[0],fe.upperBound=this.bounds[1],fe.objectOffset=this.objectOffset,fe.permutation=ue;for(var re=0;re<2;++re)for(var ce=fe.clipBounds[re],xe=0;xe<3;++xe)ce[xe]=Math.min(Math.max(this.clipBounds[re][xe],-1e8),1e8);var Te=$(fe,this);if(Te.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=fe,this._vao.bind(),this._vao.draw(Z.TRIANGLES,this._vertexCount),re=0;re<3;++re)this.surfaceProject[re]&&(this._pickShader.uniforms.model=Te.projections[re],this._pickShader.uniforms.clipBounds=Te.clipBounds[re],this._vao.draw(Z.TRIANGLES,this._vertexCount));this._vao.unbind()}if(Te.showContour){var we=this._contourPickShader;we.bind(),we.uniforms=fe;var _e=this._contourVAO;for(_e.bind(),xe=0;xe<3;++xe)for(Z.lineWidth(this.contourWidth[xe]*this.pixelRatio),we.uniforms.permutation=D[xe],re=0;re<this.contourLevels[xe].length;++re)this._contourCounts[xe][re]&&(we.uniforms.height=this.contourLevels[xe][re],_e.draw(Z.LINES,this._contourCounts[xe][re],this._contourOffsets[xe][re]));for(re=0;re<3;++re)for(we.uniforms.model=Te.projections[re],we.uniforms.clipBounds=Te.clipBounds[re],xe=0;xe<3;++xe)if(this.contourProject[re][xe]){we.uniforms.permutation=D[xe],Z.lineWidth(this.contourWidth[xe]*this.pixelRatio);for(var ke=0;ke<this.contourLevels[xe].length;++ke)this._contourCounts[xe][ke]&&(we.uniforms.height=this.contourLevels[xe][ke],_e.draw(Z.LINES,this._contourCounts[xe][ke],this._contourOffsets[xe][ke]))}_e.unbind()}},B.pick=function(j){if(!j||j.id!==this.pickId)return null;var Z=this._field[2].shape,fe=this._pickResult,re=Z[0]*(j.value[0]+(j.value[2]>>4)/16)/255,ce=Math.floor(re),xe=re-ce,Te=Z[1]*(j.value[1]+(j.value[2]&15)/16)/255,we=Math.floor(Te),_e=Te-we;ce+=1,we+=1;var ke=fe.position;ke[0]=ke[1]=ke[2]=0;for(var Ne=0;Ne<2;++Ne)for(var Ee=Ne?xe:1-xe,ze=0;ze<2;++ze)for(var Ce=ze?_e:1-_e,Oe=ce+Ne,Le=we+ze,Ge=Ee*Ce,rt=0;rt<3;++rt)ke[rt]+=this._field[rt].get(Oe,Le)*Ge;for(var ot=this._pickResult.level,$e=0;$e<3;++$e)if(ot[$e]=x.le(this.contourLevels[$e],ke[$e]),ot[$e]<0)this.contourLevels[$e].length>0&&(ot[$e]=0);else if(ot[$e]<this.contourLevels[$e].length-1){var qe=this.contourLevels[$e][ot[$e]],ht=this.contourLevels[$e][ot[$e]+1];Math.abs(qe-ke[$e])>Math.abs(ht-ke[$e])&&(ot[$e]+=1)}for(fe.index[0]=xe<.5?ce:ce+1,fe.index[1]=_e<.5?we:we+1,fe.uv[0]=re/Z[0],fe.uv[1]=Te/Z[1],rt=0;rt<3;++rt)fe.dataCoordinate[rt]=this._field[rt].get(fe.index[0],fe.index[1]);return fe},B.padField=function(j,Z){var fe=Z.shape.slice(),re=j.shape.slice();m.assign(j.lo(1,1).hi(fe[0],fe[1]),Z),m.assign(j.lo(1).hi(fe[0],1),Z.hi(fe[0],1)),m.assign(j.lo(1,re[1]-1).hi(fe[0],1),Z.lo(0,fe[1]-1).hi(fe[0],1)),m.assign(j.lo(0,1).hi(1,fe[1]),Z.hi(1)),m.assign(j.lo(re[0]-1,1).hi(1,fe[1]),Z.lo(fe[0]-1)),j.set(0,0,Z.get(0,0)),j.set(0,re[1]-1,Z.get(0,fe[1]-1)),j.set(re[0]-1,0,Z.get(fe[0]-1,0)),j.set(re[0]-1,re[1]-1,Z.get(fe[0]-1,fe[1]-1))};function ie(j,Z){return Array.isArray(j)?[Z(j[0]),Z(j[1]),Z(j[2])]:[Z(j),Z(j),Z(j)]}function K(j){return Array.isArray(j)?j.length===3?[j[0],j[1],j[2],1]:[j[0],j[1],j[2],j[3]]:[0,0,0,1]}function ee(j){if(Array.isArray(j)){if(Array.isArray(j))return[K(j[0]),K(j[1]),K(j[2])];var Z=K(j);return[Z.slice(),Z.slice(),Z.slice()]}}B.update=function(j){j=j||{},this.objectOffset=j.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in j&&(this.contourWidth=ie(j.contourWidth,Number)),"showContour"in j&&(this.showContour=ie(j.showContour,Boolean)),"showSurface"in j&&(this.showSurface=!!j.showSurface),"contourTint"in j&&(this.contourTint=ie(j.contourTint,Boolean)),"contourColor"in j&&(this.contourColor=ee(j.contourColor)),"contourProject"in j&&(this.contourProject=ie(j.contourProject,function(Rt){return ie(Rt,Boolean)})),"surfaceProject"in j&&(this.surfaceProject=j.surfaceProject),"dynamicColor"in j&&(this.dynamicColor=ee(j.dynamicColor)),"dynamicTint"in j&&(this.dynamicTint=ie(j.dynamicTint,Number)),"dynamicWidth"in j&&(this.dynamicWidth=ie(j.dynamicWidth,Number)),"opacity"in j&&(this.opacity=j.opacity),"opacityscale"in j&&(this.opacityscale=j.opacityscale),"colorBounds"in j&&(this.colorBounds=j.colorBounds),"vertexColor"in j&&(this.vertexColor=j.vertexColor?1:0),"colormap"in j&&this._colorMap.setPixels(this.genColormap(j.colormap,this.opacityscale));var Z=j.field||j.coords&&j.coords[2]||null,fe=!1;if(Z||(this._field[2].shape[0]||this._field[2].shape[2]?Z=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):Z=this._field[2].hi(0,0)),"field"in j||"coords"in j){var re=(Z.shape[0]+2)*(Z.shape[1]+2);re>this._field[2].data.length&&(u.freeFloat(this._field[2].data),this._field[2].data=u.mallocFloat(t.nextPow2(re))),this._field[2]=w(this._field[2].data,[Z.shape[0]+2,Z.shape[1]+2]),this.padField(this._field[2],Z),this.shape=Z.shape.slice();for(var ce=this.shape,xe=0;xe<2;++xe)this._field[2].size>this._field[xe].data.length&&(u.freeFloat(this._field[xe].data),this._field[xe].data=u.mallocFloat(this._field[2].size)),this._field[xe]=w(this._field[xe].data,[ce[0]+2,ce[1]+2]);if(j.coords){var Te=j.coords;if(!Array.isArray(Te)||Te.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(xe=0;xe<2;++xe){var we=Te[xe];for(ze=0;ze<2;++ze)if(we.shape[ze]!==ce[ze])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[xe],we)}}else if(j.ticks){var _e=j.ticks;if(!Array.isArray(_e)||_e.length!==2)throw new Error("gl-surface: invalid ticks");for(xe=0;xe<2;++xe){var ke=_e[xe];if((Array.isArray(ke)||ke.length)&&(ke=w(ke)),ke.shape[0]!==ce[xe])throw new Error("gl-surface: invalid tick length");var Ne=w(ke.data,ce);Ne.stride[xe]=ke.stride[0],Ne.stride[xe^1]=0,this.padField(this._field[xe],Ne)}}else{for(xe=0;xe<2;++xe){var Ee=[0,0];Ee[xe]=1,this._field[xe]=w(this._field[xe].data,[ce[0]+2,ce[1]+2],Ee,0)}this._field[0].set(0,0,0);for(var ze=0;ze<ce[0];++ze)this._field[0].set(ze+1,0,ze);for(this._field[0].set(ce[0]+1,0,ce[0]-1),this._field[1].set(0,0,0),ze=0;ze<ce[1];++ze)this._field[1].set(0,ze+1,ze);this._field[1].set(0,ce[1]+1,ce[1]-1)}var Ce=this._field,Oe=w(u.mallocFloat(Ce[2].size*3*2),[3,ce[0]+2,ce[1]+2,2]);for(xe=0;xe<3;++xe)A(Oe.pick(xe),Ce[xe],"mirror");var Le=w(u.mallocFloat(Ce[2].size*3),[ce[0]+2,ce[1]+2,3]);for(xe=0;xe<ce[0]+2;++xe)for(ze=0;ze<ce[1]+2;++ze){var Ge=Oe.get(0,xe,ze,0),rt=Oe.get(0,xe,ze,1),ot=Oe.get(1,xe,ze,0),$e=Oe.get(1,xe,ze,1),qe=Oe.get(2,xe,ze,0),ht=Oe.get(2,xe,ze,1),vt=ot*ht-$e*qe,pt=qe*rt-ht*Ge,wt=Ge*$e-rt*ot,Et=Math.sqrt(vt*vt+pt*pt+wt*wt);Et<1e-8?(Et=Math.max(Math.abs(vt),Math.abs(pt),Math.abs(wt)),Et<1e-8?(wt=1,pt=vt=0,Et=1):Et=1/Et):Et=1/Math.sqrt(Et),Le.set(xe,ze,0,vt*Et),Le.set(xe,ze,1,pt*Et),Le.set(xe,ze,2,wt*Et)}u.free(Oe.data);var nt=[1/0,1/0,1/0],Fe=[-1/0,-1/0,-1/0],We=1/0,Ze=-1/0,Ye=(ce[0]-1)*(ce[1]-1)*6,Ie=u.mallocFloat(t.nextPow2(10*Ye)),De=0,je=0;for(xe=0;xe<ce[0]-1;++xe)e:for(ze=0;ze<ce[1]-1;++ze){for(var Re=0;Re<2;++Re)for(var pe=0;pe<2;++pe)for(var be=0;be<3;++be){var Ue=this._field[be].get(1+xe+Re,1+ze+pe);if(isNaN(Ue)||!isFinite(Ue))continue e}for(be=0;be<6;++be){var et=xe+k[be][0],st=ze+k[be][1],lt=this._field[0].get(et+1,st+1),Gt=this._field[1].get(et+1,st+1);Ue=this._field[2].get(et+1,st+1),vt=Le.get(et+1,st+1,0),pt=Le.get(et+1,st+1,1),wt=Le.get(et+1,st+1,2),j.intensity&&(Zt=j.intensity.get(et,st));var Zt=j.intensity?j.intensity.get(et,st):Ue+this.objectOffset[2];Ie[De++]=et,Ie[De++]=st,Ie[De++]=lt,Ie[De++]=Gt,Ie[De++]=Ue,Ie[De++]=0,Ie[De++]=Zt,Ie[De++]=vt,Ie[De++]=pt,Ie[De++]=wt,nt[0]=Math.min(nt[0],lt+this.objectOffset[0]),nt[1]=Math.min(nt[1],Gt+this.objectOffset[1]),nt[2]=Math.min(nt[2],Ue+this.objectOffset[2]),We=Math.min(We,Zt),Fe[0]=Math.max(Fe[0],lt+this.objectOffset[0]),Fe[1]=Math.max(Fe[1],Gt+this.objectOffset[1]),Fe[2]=Math.max(Fe[2],Ue+this.objectOffset[2]),Ze=Math.max(Ze,Zt),je+=1}}for(j.intensityBounds&&(We=+j.intensityBounds[0],Ze=+j.intensityBounds[1]),xe=6;xe<De;xe+=10)Ie[xe]=(Ie[xe]-We)/(Ze-We);this._vertexCount=je,this._coordinateBuffer.update(Ie.subarray(0,De)),u.freeFloat(Ie),u.free(Le.data),this.bounds=[nt,Fe],this.intensity=j.intensity||this._field[2],(this.intensityBounds[0]!==We||this.intensityBounds[1]!==Ze)&&(fe=!0),this.intensityBounds=[We,Ze]}if("levels"in j){var Tt=j.levels;for(Array.isArray(Tt[0])?Tt=Tt.slice():Tt=[[],[],Tt],xe=0;xe<3;++xe)Tt[xe]=Tt[xe].slice(),Tt[xe].sort(function(Rt,Jt){return Rt-Jt});for(xe=0;xe<3;++xe)for(ze=0;ze<Tt[xe].length;++ze)Tt[xe][ze]-=this.objectOffset[xe];e:for(xe=0;xe<3;++xe){if(Tt[xe].length!==this.contourLevels[xe].length){fe=!0;break}for(ze=0;ze<Tt[xe].length;++ze)if(Tt[xe][ze]!==this.contourLevels[xe][ze]){fe=!0;break e}}this.contourLevels=Tt}if(fe){Ce=this._field,ce=this.shape;for(var It=[],Xt=0;Xt<3;++Xt){var gr=this.contourLevels[Xt],gt=[],jt=[],Qt=[0,0,0];for(xe=0;xe<gr.length;++xe){var mr=c(this._field[Xt],gr[xe]);gt.push(It.length/5|0),je=0;e:for(ze=0;ze<mr.cells.length;++ze){var or=mr.cells[ze];for(be=0;be<2;++be){var mt=mr.positions[or[be]],ut=mt[0],bt=Math.floor(ut)|0,St=ut-bt,Pt=mt[1],Ht=Math.floor(Pt)|0,Bt=Pt-Ht,Nt=!1;t:for(var Kt=0;Kt<3;++Kt){Qt[Kt]=0;var fr=(Xt+Kt+1)%3;for(Re=0;Re<2;++Re){var cr=Re?St:1-St;for(et=Math.min(Math.max(bt+Re,0),ce[0])|0,pe=0;pe<2;++pe){var dr=pe?Bt:1-Bt;if(st=Math.min(Math.max(Ht+pe,0),ce[1])|0,Kt<2?Ue=this._field[fr].get(et,st):Ue=(this.intensity.get(et,st)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ue)||isNaN(Ue)){Nt=!0;break t}var Xe=cr*dr;Qt[Kt]+=Xe*Ue}}}if(!Nt)It.push(Qt[0],Qt[1],mt[0],mt[1],Qt[2]),je+=1;else{if(be>0){for(var He=0;He<5;++He)It.pop();je-=1}continue e}}}jt.push(je)}this._contourOffsets[Xt]=gt,this._contourCounts[Xt]=jt}var zt=u.mallocFloat(It.length);for(xe=0;xe<It.length;++xe)zt[xe]=It[xe];this._contourBuffer.update(zt),u.freeFloat(zt)}},B.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var j=0;j<3;++j)u.freeFloat(this._field[j].data)},B.highlight=function(j){var Z;if(!j){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(Z=0;Z<3;++Z)this.enableHighlight[Z]?this.highlightLevel[Z]=j.level[Z]:this.highlightLevel[Z]=-1;var fe;for(this.snapToData?fe=j.dataCoordinate:fe=j.position,Z=0;Z<3;++Z)fe[Z]-=this.objectOffset[Z];if(!((!this.enableDynamic[0]||fe[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||fe[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||fe[2]===this.dynamicLevel[2]))){for(var re=0,ce=this.shape,xe=u.mallocFloat(12*ce[0]*ce[1]),Te=0;Te<3;++Te){if(!this.enableDynamic[Te]){this.dynamicLevel[Te]=NaN,this._dynamicCounts[Te]=0;continue}this.dynamicLevel[Te]=fe[Te];var we=(Te+1)%3,_e=(Te+2)%3,ke=this._field[Te],Ne=this._field[we],Ee=this._field[_e],ze=c(ke,fe[Te]),Ce=ze.cells,Oe=ze.positions;for(this._dynamicOffsets[Te]=re,Z=0;Z<Ce.length;++Z)for(var Le=Ce[Z],Ge=0;Ge<2;++Ge){var rt=Oe[Le[Ge]],ot=+rt[0],$e=ot|0,qe=Math.min($e+1,ce[0])|0,ht=ot-$e,vt=1-ht,pt=+rt[1],wt=pt|0,Et=Math.min(wt+1,ce[1])|0,nt=pt-wt,Fe=1-nt,We=vt*Fe,Ze=vt*nt,Ye=ht*Fe,Ie=ht*nt,De=We*Ne.get($e,wt)+Ze*Ne.get($e,Et)+Ye*Ne.get(qe,wt)+Ie*Ne.get(qe,Et),je=We*Ee.get($e,wt)+Ze*Ee.get($e,Et)+Ye*Ee.get(qe,wt)+Ie*Ee.get(qe,Et);if(isNaN(De)||isNaN(je)){Ge&&(re-=1);break}xe[2*re+0]=De,xe[2*re+1]=je,re+=1}this._dynamicCounts[Te]=re-this._dynamicOffsets[Te]}this._dynamicBuffer.update(xe.subarray(0,2*re)),u.freeFloat(xe)}};function le(j){var Z=j.gl,fe=y(Z),re=M(Z),ce=C(Z),xe=s(Z),Te=o(Z),we=i(Z,[{buffer:Te,size:4,stride:_,offset:0},{buffer:Te,size:3,stride:_,offset:16},{buffer:Te,size:3,stride:_,offset:28}]),_e=o(Z),ke=i(Z,[{buffer:_e,size:4,stride:20,offset:0},{buffer:_e,size:1,stride:20,offset:16}]),Ne=o(Z),Ee=i(Z,[{buffer:Ne,size:2,type:Z.FLOAT}]),ze=f(Z,1,O,Z.RGBA,Z.UNSIGNED_BYTE);ze.minFilter=Z.LINEAR,ze.magFilter=Z.LINEAR;var Ce=new N(Z,[0,0],[[0,0,0],[0,0,0]],fe,re,Te,we,ze,ce,xe,_e,ke,Ne,Ee,[0,0,0]),Oe={levels:[[],[],[]]};for(var Le in j)Oe[Le]=j[Le];return Oe.colormap=Oe.colormap||"jet",Ce.update(Oe),Ce}},7766:function(v,g,r){var t=r(9618),o=r(5298),i=r(1888);v.exports=s;var f=null,u=null,l=null;function m(_){f=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],u=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],l=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function h(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var w=function(_,b){o.muls(_,b,255)};function c(_,b,k){var D=_.gl,V=D.getParameter(D.MAX_TEXTURE_SIZE);if(b<0||b>V||k<0||k>V)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[b,k],_.bind(),D.texImage2D(D.TEXTURE_2D,0,_.format,b,k,0,_.format,_.type,null),_._mipLevels=[0],_}function a(_,b,k,D,V,O){this.gl=_,this.handle=b,this.format=V,this.type=O,this._shape=[k,D],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var N=this,B=[this._wrapS,this._wrapT];Object.defineProperties(B,[{get:function(){return N._wrapS},set:function(H){return N.wrapS=H}},{get:function(){return N._wrapT},set:function(H){return N.wrapT=H}}]),this._wrapVector=B;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return N._shape[0]},set:function(H){return N.width=H}},{get:function(){return N._shape[1]},set:function(H){return N.height=H}}]),this._shapeVector=z}var p=a.prototype;Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var b=this.gl;if(this.type===b.FLOAT&&f.indexOf(_)>=0&&(b.getExtension("OES_texture_float_linear")||(_=b.NEAREST)),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var b=this.gl;if(this.type===b.FLOAT&&f.indexOf(_)>=0&&(b.getExtension("OES_texture_float_linear")||(_=b.NEAREST)),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var b=this._anisoSamples;if(this._anisoSamples=Math.max(_,1)|0,b!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var b=0;b<2;++b)if(l.indexOf(_[b])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(!Array.isArray(_))_=[_|0,_|0];else if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return c(this,_[0]|0,_[1]|0),[_[0]|0,_[1]|0]}},width:{get:function(){return this._shape[0]},set:function(_){return _=_|0,c(this,_,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _=_|0,c(this,this._shape[0],_),_}}}),p.bind=function(_){var b=this.gl;return _!==void 0&&b.activeTexture(b.TEXTURE0+(_|0)),b.bindTexture(b.TEXTURE_2D,this.handle),_!==void 0?_|0:b.getParameter(b.ACTIVE_TEXTURE)-b.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),b=0;_>0;++b,_>>>=1)this._mipLevels.indexOf(b)<0&&this._mipLevels.push(b)},p.setPixels=function(_,b,k,D){var V=this.gl;this.bind(),Array.isArray(b)?(D=k,k=b[1]|0,b=b[0]|0):(b=b||0,k=k||0),D=D||0;var O=h(_)?_:_.raw;if(O){var N=this._mipLevels.indexOf(D)<0;N?(V.texImage2D(V.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(D)):V.texSubImage2D(V.TEXTURE_2D,D,b,k,this.format,this.type,O)}else if(_.shape&&_.stride&&_.data){if(_.shape.length<2||b+_.shape[1]>this._shape[1]>>>D||k+_.shape[0]>this._shape[0]>>>D||b<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");A(V,b,k,D,this.format,this.type,this._mipLevels,_)}else throw new Error("gl-texture2d: Unsupported data type")};function x(_,b){return _.length===3?b[2]===1&&b[1]===_[0]*_[2]&&b[0]===_[2]:b[0]===1&&b[1]===_[0]}function A(_,b,k,D,V,O,N,B){var z=B.dtype,H=B.shape.slice();if(H.length<2||H.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var X=0,$=0,ne=x(H,B.stride.slice());if(z==="float32"?X=_.FLOAT:z==="float64"?(X=_.FLOAT,ne=!1,z="float32"):z==="uint8"?X=_.UNSIGNED_BYTE:(X=_.UNSIGNED_BYTE,ne=!1,z="uint8"),H.length===2)$=_.LUMINANCE,H=[H[0],H[1],1],B=t(B.data,H,[B.stride[0],B.stride[1],1],B.offset);else if(H.length===3){if(H[2]===1)$=_.ALPHA;else if(H[2]===2)$=_.LUMINANCE_ALPHA;else if(H[2]===3)$=_.RGB;else if(H[2]===4)$=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");H[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if(($===_.LUMINANCE||$===_.ALPHA)&&(V===_.LUMINANCE||V===_.ALPHA)&&($=V),$!==V)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var q=B.size,ue=N.indexOf(D)<0;if(ue&&N.push(D),X===O&&ne)B.offset===0&&B.data.length===q?ue?_.texImage2D(_.TEXTURE_2D,D,V,H[0],H[1],0,V,O,B.data):_.texSubImage2D(_.TEXTURE_2D,D,b,k,H[0],H[1],V,O,B.data):ue?_.texImage2D(_.TEXTURE_2D,D,V,H[0],H[1],0,V,O,B.data.subarray(B.offset,B.offset+q)):_.texSubImage2D(_.TEXTURE_2D,D,b,k,H[0],H[1],V,O,B.data.subarray(B.offset,B.offset+q));else{var te;O===_.FLOAT?te=i.mallocFloat32(q):te=i.mallocUint8(q);var J=t(te,H,[H[2],H[2]*H[0],1]);X===_.FLOAT&&O===_.UNSIGNED_BYTE?w(J,B):o.assign(J,B),ue?_.texImage2D(_.TEXTURE_2D,D,V,H[0],H[1],0,V,O,te.subarray(0,q)):_.texSubImage2D(_.TEXTURE_2D,D,b,k,H[0],H[1],V,O,te.subarray(0,q)),O===_.FLOAT?i.freeFloat32(te):i.freeUint8(te)}}function P(_){var b=_.createTexture();return _.bindTexture(_.TEXTURE_2D,b),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),b}function y(_,b,k,D,V){var O=_.getParameter(_.MAX_TEXTURE_SIZE);if(b<0||b>O||k<0||k>O)throw new Error("gl-texture2d: Invalid texture shape");if(V===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var N=P(_);return _.texImage2D(_.TEXTURE_2D,0,D,b,k,0,D,V,null),new a(_,N,b,k,D,V)}function C(_,b,k,D,V,O){var N=P(_);return _.texImage2D(_.TEXTURE_2D,0,V,V,O,b),new a(_,N,k,D,V,O)}function M(_,b){var k=b.dtype,D=b.shape.slice(),V=_.getParameter(_.MAX_TEXTURE_SIZE);if(D[0]<0||D[0]>V||D[1]<0||D[1]>V)throw new Error("gl-texture2d: Invalid texture size");var O=x(D,b.stride.slice()),N=0;k==="float32"?N=_.FLOAT:k==="float64"?(N=_.FLOAT,O=!1,k="float32"):k==="uint8"?N=_.UNSIGNED_BYTE:(N=_.UNSIGNED_BYTE,O=!1,k="uint8");var B=0;if(D.length===2)B=_.LUMINANCE,D=[D[0],D[1],1],b=t(b.data,D,[b.stride[0],b.stride[1],1],b.offset);else if(D.length===3)if(D[2]===1)B=_.ALPHA;else if(D[2]===2)B=_.LUMINANCE_ALPHA;else if(D[2]===3)B=_.RGB;else if(D[2]===4)B=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");N===_.FLOAT&&!_.getExtension("OES_texture_float")&&(N=_.UNSIGNED_BYTE,O=!1);var z,H,X=b.size;if(O)b.offset===0&&b.data.length===X?z=b.data:z=b.data.subarray(b.offset,b.offset+X);else{var $=[D[2],D[2]*D[0],1];H=i.malloc(X,k);var ne=t(H,D,$,0);(k==="float32"||k==="float64")&&N===_.UNSIGNED_BYTE?w(ne,b):o.assign(ne,b),z=H.subarray(0,X)}var q=P(_);return _.texImage2D(_.TEXTURE_2D,0,B,D[0],D[1],0,B,N,z),O||i.free(H),new a(_,q,D[0],D[1],B,N)}function s(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(f||m(_),typeof arguments[1]=="number")return y(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(_,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var b=arguments[1],k=h(b)?b:b.raw;if(k)return C(_,k,b.width|0,b.height|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(b.shape&&b.data&&b.stride)return M(_,b)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},1433:function(v){function g(r,t,o){t?t.bind():r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null);var i=r.getParameter(r.MAX_VERTEX_ATTRIBS)|0;if(o){if(o.length>i)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<o.length;++f){var u=o[f];if(u.buffer){var l=u.buffer,m=u.size||4,h=u.type||r.FLOAT,w=!!u.normalized,c=u.stride||0,a=u.offset||0;l.bind(),r.enableVertexAttribArray(f),r.vertexAttribPointer(f,m,h,w,c,a)}else{if(typeof u=="number")r.vertexAttrib1f(f,u);else if(u.length===1)r.vertexAttrib1f(f,u[0]);else if(u.length===2)r.vertexAttrib2f(f,u[0],u[1]);else if(u.length===3)r.vertexAttrib3f(f,u[0],u[1],u[2]);else if(u.length===4)r.vertexAttrib4f(f,u[0],u[1],u[2],u[3]);else throw new Error("gl-vao: Invalid vertex attribute");r.disableVertexAttribArray(f)}}for(;f<i;++f)r.disableVertexAttribArray(f)}else{r.bindBuffer(r.ARRAY_BUFFER,null);for(var f=0;f<i;++f)r.disableVertexAttribArray(f)}}v.exports=g},870:function(v,g,r){var t=r(1433);function o(f){this.gl=f,this._elements=null,this._attributes=null,this._elementsType=f.UNSIGNED_SHORT}o.prototype.bind=function(){t(this.gl,this._elements,this._attributes)},o.prototype.update=function(f,u,l){this._elements=u,this._attributes=f,this._elementsType=l||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(f,u,l){l=l||0;var m=this.gl;this._elements?m.drawElements(f,u,this._elementsType,l):m.drawArrays(f,l,u)};function i(f){return new o(f)}v.exports=i},7518:function(v,g,r){var t=r(1433);function o(u,l,m,h,w,c){this.location=u,this.dimension=l,this.a=m,this.b=h,this.c=w,this.d=c}o.prototype.bind=function(u){switch(this.dimension){case 1:u.vertexAttrib1f(this.location,this.a);break;case 2:u.vertexAttrib2f(this.location,this.a,this.b);break;case 3:u.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:u.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(u,l,m){this.gl=u,this._ext=l,this.handle=m,this._attribs=[],this._useElements=!1,this._elementsType=u.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var u=0;u<this._attribs.length;++u)this._attribs[u].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(u,l,m){if(this.bind(),t(this.gl,l,u),this.unbind(),this._attribs.length=0,u)for(var h=0;h<u.length;++h){var w=u[h];typeof w=="number"?this._attribs.push(new o(h,1,w)):Array.isArray(w)&&this._attribs.push(new o(h,w.length,w[0],w[1],w[2],w[3]))}this._useElements=!!l,this._elementsType=m||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(u,l,m){m=m||0;var h=this.gl;this._useElements?h.drawElements(u,l,this._elementsType,m):h.drawArrays(u,m,l)};function f(u,l){return new i(u,l,l.createVertexArrayOES())}v.exports=f},8116:function(v,g,r){var t=r(7518),o=r(870);function i(u){this.bindVertexArrayOES=u.bindVertexArray.bind(u),this.createVertexArrayOES=u.createVertexArray.bind(u),this.deleteVertexArrayOES=u.deleteVertexArray.bind(u)}function f(u,l,m,h){var w=u.createVertexArray?new i(u):u.getExtension("OES_vertex_array_object"),c;return w?c=t(u,w):c=o(u),c.update(l,m,h),c}v.exports=f},5632:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]+o[0],r[1]=t[1]+o[1],r[2]=t[2]+o[2],r}},8192:function(v,g,r){v.exports=f;var t=r(2825),o=r(3536),i=r(244);function f(u,l){var m=t(u[0],u[1],u[2]),h=t(l[0],l[1],l[2]);o(m,m),o(h,h);var w=i(m,h);return w>1?0:Math.acos(w)}},9226:function(v){v.exports=g;function g(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r[2]=Math.ceil(t[2]),r}},3126:function(v){v.exports=g;function g(r){var t=new Float32Array(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}},3990:function(v){v.exports=g;function g(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}},1091:function(v){v.exports=g;function g(){var r=new Float32Array(3);return r[0]=0,r[1]=0,r[2]=0,r}},5911:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2],l=o[0],m=o[1],h=o[2];return r[0]=f*h-u*m,r[1]=u*l-i*h,r[2]=i*m-f*l,r}},5455:function(v,g,r){v.exports=r(7056)},7056:function(v){v.exports=g;function g(r,t){var o=t[0]-r[0],i=t[1]-r[1],f=t[2]-r[2];return Math.sqrt(o*o+i*i+f*f)}},4008:function(v,g,r){v.exports=r(6690)},6690:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]/o[0],r[1]=t[1]/o[1],r[2]=t[2]/o[2],r}},244:function(v){v.exports=g;function g(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}},2613:function(v){v.exports=1e-6},9922:function(v,g,r){v.exports=o;var t=r(2613);function o(i,f){var u=i[0],l=i[1],m=i[2],h=f[0],w=f[1],c=f[2];return Math.abs(u-h)<=t*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(l-w)<=t*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(m-c)<=t*Math.max(1,Math.abs(m),Math.abs(c))}},9265:function(v){v.exports=g;function g(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]}},2681:function(v){v.exports=g;function g(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r[2]=Math.floor(t[2]),r}},5137:function(v,g,r){v.exports=o;var t=r(1091)();function o(i,f,u,l,m,h){var w,c;for(f||(f=3),u||(u=0),l?c=Math.min(l*f+u,i.length):c=i.length,w=u;w<c;w+=f)t[0]=i[w],t[1]=i[w+1],t[2]=i[w+2],m(t,t,h),i[w]=t[0],i[w+1]=t[1],i[w+2]=t[2];return i}},2825:function(v){v.exports=g;function g(r,t,o){var i=new Float32Array(3);return i[0]=r,i[1]=t,i[2]=o,i}},2931:function(v,g,r){v.exports={EPSILON:r(2613),create:r(1091),clone:r(3126),angle:r(8192),fromValues:r(2825),copy:r(3990),set:r(1463),equals:r(9922),exactEquals:r(9265),add:r(5632),subtract:r(6843),sub:r(2229),multiply:r(5847),mul:r(4505),divide:r(6690),div:r(4008),min:r(8107),max:r(7417),floor:r(2681),ceil:r(9226),round:r(2447),scale:r(6621),scaleAndAdd:r(8489),distance:r(7056),dist:r(5455),squaredDistance:r(2953),sqrDist:r(6141),length:r(1387),len:r(868),squaredLength:r(3066),sqrLen:r(5486),negate:r(5093),inverse:r(811),normalize:r(3536),dot:r(244),cross:r(5911),lerp:r(6658),random:r(7636),transformMat4:r(5673),transformMat3:r(492),transformQuat:r(264),rotateX:r(6894),rotateY:r(109),rotateZ:r(8692),forEach:r(5137)}},811:function(v){v.exports=g;function g(r,t){return r[0]=1/t[0],r[1]=1/t[1],r[2]=1/t[2],r}},868:function(v,g,r){v.exports=r(1387)},1387:function(v){v.exports=g;function g(r){var t=r[0],o=r[1],i=r[2];return Math.sqrt(t*t+o*o+i*i)}},6658:function(v){v.exports=g;function g(r,t,o,i){var f=t[0],u=t[1],l=t[2];return r[0]=f+i*(o[0]-f),r[1]=u+i*(o[1]-u),r[2]=l+i*(o[2]-l),r}},7417:function(v){v.exports=g;function g(r,t,o){return r[0]=Math.max(t[0],o[0]),r[1]=Math.max(t[1],o[1]),r[2]=Math.max(t[2],o[2]),r}},8107:function(v){v.exports=g;function g(r,t,o){return r[0]=Math.min(t[0],o[0]),r[1]=Math.min(t[1],o[1]),r[2]=Math.min(t[2],o[2]),r}},4505:function(v,g,r){v.exports=r(5847)},5847:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]*o[0],r[1]=t[1]*o[1],r[2]=t[2]*o[2],r}},5093:function(v){v.exports=g;function g(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r}},3536:function(v){v.exports=g;function g(r,t){var o=t[0],i=t[1],f=t[2],u=o*o+i*i+f*f;return u>0&&(u=1/Math.sqrt(u),r[0]=t[0]*u,r[1]=t[1]*u,r[2]=t[2]*u),r}},7636:function(v){v.exports=g;function g(r,t){t=t||1;var o=Math.random()*2*Math.PI,i=Math.random()*2-1,f=Math.sqrt(1-i*i)*t;return r[0]=Math.cos(o)*f,r[1]=Math.sin(o)*f,r[2]=i*t,r}},6894:function(v){v.exports=g;function g(r,t,o,i){var f=o[1],u=o[2],l=t[1]-f,m=t[2]-u,h=Math.sin(i),w=Math.cos(i);return r[0]=t[0],r[1]=f+l*w-m*h,r[2]=u+l*h+m*w,r}},109:function(v){v.exports=g;function g(r,t,o,i){var f=o[0],u=o[2],l=t[0]-f,m=t[2]-u,h=Math.sin(i),w=Math.cos(i);return r[0]=f+m*h+l*w,r[1]=t[1],r[2]=u+m*w-l*h,r}},8692:function(v){v.exports=g;function g(r,t,o,i){var f=o[0],u=o[1],l=t[0]-f,m=t[1]-u,h=Math.sin(i),w=Math.cos(i);return r[0]=f+l*w-m*h,r[1]=u+l*h+m*w,r[2]=t[2],r}},2447:function(v){v.exports=g;function g(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r[2]=Math.round(t[2]),r}},6621:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r}},8489:function(v){v.exports=g;function g(r,t,o,i){return r[0]=t[0]+o[0]*i,r[1]=t[1]+o[1]*i,r[2]=t[2]+o[2]*i,r}},1463:function(v){v.exports=g;function g(r,t,o,i){return r[0]=t,r[1]=o,r[2]=i,r}},6141:function(v,g,r){v.exports=r(2953)},5486:function(v,g,r){v.exports=r(3066)},2953:function(v){v.exports=g;function g(r,t){var o=t[0]-r[0],i=t[1]-r[1],f=t[2]-r[2];return o*o+i*i+f*f}},3066:function(v){v.exports=g;function g(r){var t=r[0],o=r[1],i=r[2];return t*t+o*o+i*i}},2229:function(v,g,r){v.exports=r(6843)},6843:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]-o[0],r[1]=t[1]-o[1],r[2]=t[2]-o[2],r}},492:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2];return r[0]=i*o[0]+f*o[3]+u*o[6],r[1]=i*o[1]+f*o[4]+u*o[7],r[2]=i*o[2]+f*o[5]+u*o[8],r}},5673:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2],l=o[3]*i+o[7]*f+o[11]*u+o[15];return l=l||1,r[0]=(o[0]*i+o[4]*f+o[8]*u+o[12])/l,r[1]=(o[1]*i+o[5]*f+o[9]*u+o[13])/l,r[2]=(o[2]*i+o[6]*f+o[10]*u+o[14])/l,r}},264:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2],l=o[0],m=o[1],h=o[2],w=o[3],c=w*i+m*u-h*f,a=w*f+h*i-l*u,p=w*u+l*f-m*i,x=-l*i-m*f-h*u;return r[0]=c*w+x*-l+a*-h-p*-m,r[1]=a*w+x*-m+p*-l-c*-h,r[2]=p*w+x*-h+c*-m-a*-l,r}},4361:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]+o[0],r[1]=t[1]+o[1],r[2]=t[2]+o[2],r[3]=t[3]+o[3],r}},2335:function(v){v.exports=g;function g(r){var t=new Float32Array(4);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}},2933:function(v){v.exports=g;function g(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}},7536:function(v){v.exports=g;function g(){var r=new Float32Array(4);return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}},4691:function(v){v.exports=g;function g(r,t){var o=t[0]-r[0],i=t[1]-r[1],f=t[2]-r[2],u=t[3]-r[3];return Math.sqrt(o*o+i*i+f*f+u*u)}},1373:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]/o[0],r[1]=t[1]/o[1],r[2]=t[2]/o[2],r[3]=t[3]/o[3],r}},3750:function(v){v.exports=g;function g(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]}},3390:function(v){v.exports=g;function g(r,t,o,i){var f=new Float32Array(4);return f[0]=r,f[1]=t,f[2]=o,f[3]=i,f}},9970:function(v,g,r){v.exports={create:r(7536),clone:r(2335),fromValues:r(3390),copy:r(2933),set:r(4578),add:r(4361),subtract:r(6860),multiply:r(3576),divide:r(1373),min:r(2334),max:r(160),scale:r(9288),scaleAndAdd:r(4844),distance:r(4691),squaredDistance:r(7960),length:r(6808),squaredLength:r(483),negate:r(1498),inverse:r(4494),normalize:r(5177),dot:r(3750),lerp:r(2573),random:r(9131),transformMat4:r(5352),transformQuat:r(4041)}},4494:function(v){v.exports=g;function g(r,t){return r[0]=1/t[0],r[1]=1/t[1],r[2]=1/t[2],r[3]=1/t[3],r}},6808:function(v){v.exports=g;function g(r){var t=r[0],o=r[1],i=r[2],f=r[3];return Math.sqrt(t*t+o*o+i*i+f*f)}},2573:function(v){v.exports=g;function g(r,t,o,i){var f=t[0],u=t[1],l=t[2],m=t[3];return r[0]=f+i*(o[0]-f),r[1]=u+i*(o[1]-u),r[2]=l+i*(o[2]-l),r[3]=m+i*(o[3]-m),r}},160:function(v){v.exports=g;function g(r,t,o){return r[0]=Math.max(t[0],o[0]),r[1]=Math.max(t[1],o[1]),r[2]=Math.max(t[2],o[2]),r[3]=Math.max(t[3],o[3]),r}},2334:function(v){v.exports=g;function g(r,t,o){return r[0]=Math.min(t[0],o[0]),r[1]=Math.min(t[1],o[1]),r[2]=Math.min(t[2],o[2]),r[3]=Math.min(t[3],o[3]),r}},3576:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]*o[0],r[1]=t[1]*o[1],r[2]=t[2]*o[2],r[3]=t[3]*o[3],r}},1498:function(v){v.exports=g;function g(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=-t[3],r}},5177:function(v){v.exports=g;function g(r,t){var o=t[0],i=t[1],f=t[2],u=t[3],l=o*o+i*i+f*f+u*u;return l>0&&(l=1/Math.sqrt(l),r[0]=o*l,r[1]=i*l,r[2]=f*l,r[3]=u*l),r}},9131:function(v,g,r){var t=r(5177),o=r(9288);v.exports=i;function i(f,u){return u=u||1,f[0]=Math.random(),f[1]=Math.random(),f[2]=Math.random(),f[3]=Math.random(),t(f,f),o(f,f,u),f}},9288:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=t[3]*o,r}},4844:function(v){v.exports=g;function g(r,t,o,i){return r[0]=t[0]+o[0]*i,r[1]=t[1]+o[1]*i,r[2]=t[2]+o[2]*i,r[3]=t[3]+o[3]*i,r}},4578:function(v){v.exports=g;function g(r,t,o,i,f){return r[0]=t,r[1]=o,r[2]=i,r[3]=f,r}},7960:function(v){v.exports=g;function g(r,t){var o=t[0]-r[0],i=t[1]-r[1],f=t[2]-r[2],u=t[3]-r[3];return o*o+i*i+f*f+u*u}},483:function(v){v.exports=g;function g(r){var t=r[0],o=r[1],i=r[2],f=r[3];return t*t+o*o+i*i+f*f}},6860:function(v){v.exports=g;function g(r,t,o){return r[0]=t[0]-o[0],r[1]=t[1]-o[1],r[2]=t[2]-o[2],r[3]=t[3]-o[3],r}},5352:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2],l=t[3];return r[0]=o[0]*i+o[4]*f+o[8]*u+o[12]*l,r[1]=o[1]*i+o[5]*f+o[9]*u+o[13]*l,r[2]=o[2]*i+o[6]*f+o[10]*u+o[14]*l,r[3]=o[3]*i+o[7]*f+o[11]*u+o[15]*l,r}},4041:function(v){v.exports=g;function g(r,t,o){var i=t[0],f=t[1],u=t[2],l=o[0],m=o[1],h=o[2],w=o[3],c=w*i+m*u-h*f,a=w*f+h*i-l*u,p=w*u+l*f-m*i,x=-l*i-m*f-h*u;return r[0]=c*w+x*-l+a*-h-p*-m,r[1]=a*w+x*-m+p*-l-c*-h,r[2]=p*w+x*-h+c*-m-a*-l,r[3]=t[3],r}},1848:function(v,g,r){var t=r(4905),o=r(6468);v.exports=i;function i(f){for(var u=Array.isArray(f)?f:t(f),l=0;l<u.length;l++){var m=u[l];if(m.type==="preprocessor"){var h=m.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var w=h[1],c=h[2];return(w?o(c):c).trim()}}}}},5874:function(v,g,r){v.exports=b;var t=r(620),o=r(7827),i=r(6852),f=r(7932),u=r(3508),l=999,m=9999,h=0,w=1,c=2,a=3,p=4,x=5,A=6,P=7,y=8,C=9,M=10,s=11,_=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function b(k){var D=0,V=0,O=l,N,B,z=[],H=[],X=1,$=0,ne=0,q=!1,ue=!1,te="",J;k=k||{};var ie=i,K=t;k.version==="300 es"&&(ie=u,K=f);for(var ee={},le={},D=0;D<ie.length;D++)ee[ie[D]]=!0;for(var D=0;D<K.length;D++)le[K[D]]=!0;return function(Oe){return H=[],Oe!==null?Z(Oe):fe()};function j(Oe){Oe.length&&H.push({type:_[O],data:Oe,position:ne,line:X,column:$})}function Z(Oe){D=0,Oe.toString&&(Oe=Oe.toString()),te+=Oe.replace(/\r\n/g,`
`),J=te.length;for(var Le;N=te[D],D<J;){switch(Le=D,O){case h:D=we();break;case w:D=Te();break;case c:D=xe();break;case a:D=_e();break;case p:D=Ee();break;case s:D=Ne();break;case x:D=ze();break;case m:D=Ce();break;case C:D=ce();break;case l:D=re();break}if(Le!==D)switch(te[Le]){case`
`:$=0,++X;break;default:++$;break}}return V+=D,te=te.slice(D),H}function fe(Oe){return z.length&&j(z.join("")),O=M,j("(eof)"),H}function re(){return z=z.length?[]:z,B==="/"&&N==="*"?(ne=V+D-1,O=h,B=N,D+1):B==="/"&&N==="/"?(ne=V+D-1,O=w,B=N,D+1):N==="#"?(O=c,ne=V+D,D):/\s/.test(N)?(O=C,ne=V+D,D):(q=/\d/.test(N),ue=/[^\w_]/.test(N),ne=V+D,O=q?p:ue?a:m,D)}function ce(){return/[^\s]/g.test(N)?(j(z.join("")),O=l,D):(z.push(N),B=N,D+1)}function xe(){return(N==="\r"||N===`
`)&&B!=="\\"?(j(z.join("")),O=l,D):(z.push(N),B=N,D+1)}function Te(){return xe()}function we(){return N==="/"&&B==="*"?(z.push(N),j(z.join("")),O=l,D+1):(z.push(N),B=N,D+1)}function _e(){if(B==="."&&/\d/.test(N))return O=x,D;if(B==="/"&&N==="*")return O=h,D;if(B==="/"&&N==="/")return O=w,D;if(N==="."&&z.length){for(;ke(z););return O=x,D}if(N===";"||N===")"||N==="("){if(z.length)for(;ke(z););return j(N),O=l,D+1}var Oe=z.length===2&&N!=="=";if(/[\w_\d\s]/.test(N)||Oe){for(;ke(z););return O=l,D}return z.push(N),B=N,D+1}function ke(Oe){var Le=0,Ge,rt;do{if(Ge=o.indexOf(Oe.slice(0,Oe.length+Le).join("")),rt=o[Ge],Ge===-1){if(Le--+Oe.length>0)continue;rt=Oe.slice(0,1).join("")}return j(rt),ne+=rt.length,z=z.slice(rt.length),z.length}while(!0)}function Ne(){return/[^a-fA-F0-9]/.test(N)?(j(z.join("")),O=l,D):(z.push(N),B=N,D+1)}function Ee(){return N==="."||/[eE]/.test(N)?(z.push(N),O=x,B=N,D+1):N==="x"&&z.length===1&&z[0]==="0"?(O=s,z.push(N),B=N,D+1):/[^\d]/.test(N)?(j(z.join("")),O=l,D):(z.push(N),B=N,D+1)}function ze(){return N==="f"&&(z.push(N),B=N,D+=1),/[eE]/.test(N)||(N==="-"||N==="+")&&/[eE]/.test(B)?(z.push(N),B=N,D+1):/[^\d]/.test(N)?(j(z.join("")),O=l,D):(z.push(N),B=N,D+1)}function Ce(){if(/[^\d\w_]/.test(N)){var Oe=z.join("");return le[Oe]?O=y:ee[Oe]?O=P:O=A,j(z.join("")),O=l,D}return z.push(N),B=N,D+1}}},3508:function(v,g,r){var t=r(6852);t=t.slice().filter(function(o){return!/^(gl\_|texture)/.test(o)}),v.exports=t.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(v){v.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(v,g,r){var t=r(620);v.exports=t.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(v){v.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(v){v.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(v,g,r){var t=r(5874);v.exports=o;function o(i,f){var u=t(f),l=[];return l=l.concat(u(i)),l=l.concat(u(null)),l}},3236:function(v){v.exports=function(g){typeof g=="string"&&(g=[g]);for(var r=[].slice.call(arguments,1),t=[],o=0;o<g.length-1;o++)t.push(g[o],r[o]||"");return t.push(g[o]),t.join("")}},7520:function(v,g,r){var t=r(9507);function o(){var i=!1;try{var f=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,f),window.removeEventListener("test",null,f)}catch{i=!1}return i}v.exports=t&&o()},3778:function(v,g){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g.read=function(r,t,o,i,f){var u,l,m=f*8-i-1,h=(1<<m)-1,w=h>>1,c=-7,a=o?f-1:0,p=o?-1:1,x=r[t+a];for(a+=p,u=x&(1<<-c)-1,x>>=-c,c+=m;c>0;u=u*256+r[t+a],a+=p,c-=8);for(l=u&(1<<-c)-1,u>>=-c,c+=i;c>0;l=l*256+r[t+a],a+=p,c-=8);if(u===0)u=1-w;else{if(u===h)return l?NaN:(x?-1:1)*(1/0);l=l+Math.pow(2,i),u=u-w}return(x?-1:1)*l*Math.pow(2,u-i)},g.write=function(r,t,o,i,f,u){var l,m,h,w=u*8-f-1,c=(1<<w)-1,a=c>>1,p=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=i?0:u-1,A=i?1:-1,P=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(m=isNaN(t)?1:0,l=c):(l=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-l))<1&&(l--,h*=2),l+a>=1?t+=p/h:t+=p*Math.pow(2,1-a),t*h>=2&&(l++,h/=2),l+a>=c?(m=0,l=c):l+a>=1?(m=(t*h-1)*Math.pow(2,f),l=l+a):(m=t*Math.pow(2,a-1)*Math.pow(2,f),l=0));f>=8;r[o+x]=m&255,x+=A,m/=256,f-=8);for(l=l<<f|m,w+=f;w>0;r[o+x]=l&255,x+=A,l/=256,w-=8);r[o+x-A]|=P*128}},8954:function(v,g,r){v.exports=a;var t=r(3250),o=r(6803).Fw;function i(p,x,A){this.vertices=p,this.adjacent=x,this.boundary=A,this.lastVisited=-1}i.prototype.flip=function(){var p=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=p;var x=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=x};function f(p,x,A){this.vertices=p,this.cell=x,this.index=A}function u(p,x){return o(p.vertices,x.vertices)}function l(p){return function(){var x=this.tuple;return p.apply(this,x)}}function m(p){var x=t[p+1];return x||(x=t),l(x)}var h=[];function w(p,x,A){this.dimension=p,this.vertices=x,this.simplices=A,this.interior=A.filter(function(C){return!C.boundary}),this.tuple=new Array(p+1);for(var P=0;P<=p;++P)this.tuple[P]=this.vertices[P];var y=h[p];y||(y=h[p]=m(p)),this.orient=y}var c=w.prototype;c.handleBoundaryDegeneracy=function(p,x){var A=this.dimension,P=this.vertices.length-1,y=this.tuple,C=this.vertices,M=[p];for(p.lastVisited=-P;M.length>0;){p=M.pop();for(var s=p.adjacent,_=0;_<=A;++_){var b=s[_];if(!(!b.boundary||b.lastVisited<=-P)){for(var k=b.vertices,D=0;D<=A;++D){var V=k[D];V<0?y[D]=x:y[D]=C[V]}var O=this.orient();if(O>0)return b;b.lastVisited=-P,O===0&&M.push(b)}}}return null},c.walk=function(p,x){var A=this.vertices.length-1,P=this.dimension,y=this.vertices,C=this.tuple,M=x?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[M];e:for(;!s.boundary;){for(var _=s.vertices,b=s.adjacent,k=0;k<=P;++k)C[k]=y[_[k]];s.lastVisited=A;for(var k=0;k<=P;++k){var D=b[k];if(!(D.lastVisited>=A)){var V=C[k];C[k]=p;var O=this.orient();if(C[k]=V,O<0){s=D;continue e}else D.boundary?D.lastVisited=-A:D.lastVisited=A}}return}return s},c.addPeaks=function(p,x){var A=this.vertices.length-1,P=this.dimension,y=this.vertices,C=this.tuple,M=this.interior,s=this.simplices,_=[x];x.lastVisited=A,x.vertices[x.vertices.indexOf(-1)]=A,x.boundary=!1,M.push(x);for(var b=[];_.length>0;){var x=_.pop(),k=x.vertices,D=x.adjacent,V=k.indexOf(A);if(!(V<0)){for(var O=0;O<=P;++O)if(O!==V){var N=D[O];if(!(!N.boundary||N.lastVisited>=A)){var B=N.vertices;if(N.lastVisited!==-A){for(var z=0,H=0;H<=P;++H)B[H]<0?(z=H,C[H]=p):C[H]=y[B[H]];var X=this.orient();if(X>0){B[z]=A,N.boundary=!1,M.push(N),_.push(N),N.lastVisited=A;continue}else N.lastVisited=-A}var $=N.adjacent,ne=k.slice(),q=D.slice(),ue=new i(ne,q,!0);s.push(ue);var te=$.indexOf(x);if(!(te<0)){$[te]=ue,q[V]=N,ne[O]=-1,q[O]=x,D[O]=ue,ue.flip();for(var H=0;H<=P;++H){var J=ne[H];if(!(J<0||J===A)){for(var ie=new Array(P-1),K=0,ee=0;ee<=P;++ee){var le=ne[ee];le<0||ee===H||(ie[K++]=le)}b.push(new f(ie,ue,H))}}}}}}}b.sort(u);for(var O=0;O+1<b.length;O+=2){var j=b[O],Z=b[O+1],fe=j.index,re=Z.index;fe<0||re<0||(j.cell.adjacent[j.index]=Z.cell,Z.cell.adjacent[Z.index]=j.cell)}},c.insert=function(p,x){var A=this.vertices;A.push(p);var P=this.walk(p,x);if(P){for(var y=this.dimension,C=this.tuple,M=0;M<=y;++M){var s=P.vertices[M];s<0?C[M]=p:C[M]=A[s]}var _=this.orient(C);_<0||_===0&&(P=this.handleBoundaryDegeneracy(P,p),!P)||this.addPeaks(p,P)}},c.boundary=function(){for(var p=this.dimension,x=[],A=this.simplices,P=A.length,y=0;y<P;++y){var C=A[y];if(C.boundary){for(var M=new Array(p),s=C.vertices,_=0,b=0,k=0;k<=p;++k)s[k]>=0?M[_++]=s[k]:b=k&1;if(b===(p&1)){var D=M[0];M[0]=M[1],M[1]=D}x.push(M)}}return x};function a(p,x){var A=p.length;if(A===0)throw new Error("Must have at least d+1 points");var P=p[0].length;if(A<=P)throw new Error("Must input at least d+1 points");var y=p.slice(0,P+1),C=t.apply(void 0,y);if(C===0)throw new Error("Input not in general position");for(var M=new Array(P+1),s=0;s<=P;++s)M[s]=s;C<0&&(M[0]=1,M[1]=0);for(var _=new i(M,new Array(P+1),!1),b=_.adjacent,k=new Array(P+2),s=0;s<=P;++s){for(var D=M.slice(),V=0;V<=P;++V)V===s&&(D[V]=-1);var O=D[0];D[0]=D[1],D[1]=O;var N=new i(D,new Array(P+1),!0);b[s]=N,k[s]=N}k[P+1]=_;for(var s=0;s<=P;++s)for(var D=b[s].vertices,B=b[s].adjacent,V=0;V<=P;++V){var z=D[V];if(z<0){B[V]=_;continue}for(var H=0;H<=P;++H)b[H].vertices.indexOf(z)<0&&(B[V]=b[H])}for(var X=new w(P,y,k),$=!!x,s=P+1;s<A;++s)X.insert(p[s],$);return X.boundary()}},3352:function(v,g,r){var t=r(2478),o=0,i=1,f=2;v.exports=_;function u(b,k,D,V,O){this.mid=b,this.left=k,this.right=D,this.leftPoints=V,this.rightPoints=O,this.count=(k?k.count:0)+(D?D.count:0)+V.length}var l=u.prototype;function m(b,k){b.mid=k.mid,b.left=k.left,b.right=k.right,b.leftPoints=k.leftPoints,b.rightPoints=k.rightPoints,b.count=k.count}function h(b,k){var D=C(k);b.mid=D.mid,b.left=D.left,b.right=D.right,b.leftPoints=D.leftPoints,b.rightPoints=D.rightPoints,b.count=D.count}function w(b,k){var D=b.intervals([]);D.push(k),h(b,D)}function c(b,k){var D=b.intervals([]),V=D.indexOf(k);return V<0?o:(D.splice(V,1),h(b,D),i)}l.intervals=function(b){return b.push.apply(b,this.leftPoints),this.left&&this.left.intervals(b),this.right&&this.right.intervals(b),b},l.insert=function(b){var k=this.count-this.leftPoints.length;if(this.count+=1,b[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?w(this,b):this.left.insert(b):this.left=C([b]);else if(b[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?w(this,b):this.right.insert(b):this.right=C([b]);else{var D=t.ge(this.leftPoints,b,P),V=t.ge(this.rightPoints,b,y);this.leftPoints.splice(D,0,b),this.rightPoints.splice(V,0,b)}},l.remove=function(b){var k=this.count-this.leftPoints;if(b[1]<this.mid){if(!this.left)return o;var D=this.right?this.right.count:0;if(4*D>3*(k-1))return c(this,b);var V=this.left.remove(b);return V===f?(this.left=null,this.count-=1,i):(V===i&&(this.count-=1),V)}else if(b[0]>this.mid){if(!this.right)return o;var O=this.left?this.left.count:0;if(4*O>3*(k-1))return c(this,b);var V=this.right.remove(b);return V===f?(this.right=null,this.count-=1,i):(V===i&&(this.count-=1),V)}else{if(this.count===1)return this.leftPoints[0]===b?f:o;if(this.leftPoints.length===1&&this.leftPoints[0]===b){if(this.left&&this.right){for(var N=this,B=this.left;B.right;)N=B,B=B.right;if(N===this)B.right=this.right;else{var z=this.left,V=this.right;N.count-=B.count,N.right=B.left,B.left=z,B.right=V}m(this,B),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?m(this,this.left):m(this,this.right);return i}for(var z=t.ge(this.leftPoints,b,P);z<this.leftPoints.length&&this.leftPoints[z][0]===b[0];++z)if(this.leftPoints[z]===b){this.count-=1,this.leftPoints.splice(z,1);for(var V=t.ge(this.rightPoints,b,y);V<this.rightPoints.length&&this.rightPoints[V][1]===b[1];++V)if(this.rightPoints[V]===b)return this.rightPoints.splice(V,1),i}return o}};function a(b,k,D){for(var V=0;V<b.length&&b[V][0]<=k;++V){var O=D(b[V]);if(O)return O}}function p(b,k,D){for(var V=b.length-1;V>=0&&b[V][1]>=k;--V){var O=D(b[V]);if(O)return O}}function x(b,k){for(var D=0;D<b.length;++D){var V=k(b[D]);if(V)return V}}l.queryPoint=function(b,k){if(b<this.mid){if(this.left){var D=this.left.queryPoint(b,k);if(D)return D}return a(this.leftPoints,b,k)}else if(b>this.mid){if(this.right){var D=this.right.queryPoint(b,k);if(D)return D}return p(this.rightPoints,b,k)}else return x(this.leftPoints,k)},l.queryInterval=function(b,k,D){if(b<this.mid&&this.left){var V=this.left.queryInterval(b,k,D);if(V)return V}if(k>this.mid&&this.right){var V=this.right.queryInterval(b,k,D);if(V)return V}return k<this.mid?a(this.leftPoints,k,D):b>this.mid?p(this.rightPoints,b,D):x(this.leftPoints,D)};function A(b,k){return b-k}function P(b,k){var D=b[0]-k[0];return D||b[1]-k[1]}function y(b,k){var D=b[1]-k[1];return D||b[0]-k[0]}function C(b){if(b.length===0)return null;for(var k=[],D=0;D<b.length;++D)k.push(b[D][0],b[D][1]);k.sort(A);for(var V=k[k.length>>1],O=[],N=[],B=[],D=0;D<b.length;++D){var z=b[D];z[1]<V?O.push(z):V<z[0]?N.push(z):B.push(z)}var H=B,X=B.slice();return H.sort(P),X.sort(y),new u(V,C(O),C(N),H,X)}function M(b){this.root=b}var s=M.prototype;s.insert=function(b){this.root?this.root.insert(b):this.root=new u(b[0],null,null,[b],[b])},s.remove=function(b){if(this.root){var k=this.root.remove(b);return k===f&&(this.root=null),k!==o}return!1},s.queryPoint=function(b,k){if(this.root)return this.root.queryPoint(b,k)},s.queryInterval=function(b,k,D){if(b<=k&&this.root)return this.root.queryInterval(b,k,D)},Object.defineProperty(s,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(s,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function _(b){return!b||b.length===0?new M(null):new M(C(b))}},7762:function(v){function g(r){for(var t=new Array(r),o=0;o<r;++o)t[o]=o;return t}v.exports=g},9507:function(v){v.exports=!0},7163:function(v){/*!
* Determine if an object is a Buffer
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/v.exports=function(t){return t!=null&&(g(t)||r(t)||!!t._isBuffer)};function g(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function r(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&g(t.slice(0,0))}},5219:function(v){v.exports=function(g){for(var r=g.length,t,o=0;o<r;o++)if(t=g.charCodeAt(o),(t<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(v){function g(r,t,o){return r*(1-o)+t*o}v.exports=g},2652:function(v,g,r){var t=r(4335),o=r(6864),i=r(1903),f=r(9921),u=r(7608),l=r(5665),m={length:r(1387),normalize:r(3536),dot:r(244),cross:r(5911)},h=o(),w=o(),c=[0,0,0,0],a=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];v.exports=function(C,M,s,_,b,k){if(M||(M=[0,0,0]),s||(s=[0,0,0]),_||(_=[0,0,0]),b||(b=[0,0,0,1]),k||(k=[0,0,0,1]),!t(h,C)||(i(w,h),w[3]=0,w[7]=0,w[11]=0,w[15]=1,Math.abs(f(w)<1e-8)))return!1;var D=h[3],V=h[7],O=h[11],N=h[12],B=h[13],z=h[14],H=h[15];if(D!==0||V!==0||O!==0){c[0]=D,c[1]=V,c[2]=O,c[3]=H;var X=u(w,w);if(!X)return!1;l(w,w),x(b,c,w)}else b[0]=b[1]=b[2]=0,b[3]=1;if(M[0]=N,M[1]=B,M[2]=z,A(a,h),s[0]=m.length(a[0]),m.normalize(a[0],a[0]),_[0]=m.dot(a[0],a[1]),P(a[1],a[1],a[0],1,-_[0]),s[1]=m.length(a[1]),m.normalize(a[1],a[1]),_[0]/=s[1],_[1]=m.dot(a[0],a[2]),P(a[2],a[2],a[0],1,-_[1]),_[2]=m.dot(a[1],a[2]),P(a[2],a[2],a[1],1,-_[2]),s[2]=m.length(a[2]),m.normalize(a[2],a[2]),_[1]/=s[2],_[2]/=s[2],m.cross(p,a[1],a[2]),m.dot(a[0],p)<0)for(var $=0;$<3;$++)s[$]*=-1,a[$][0]*=-1,a[$][1]*=-1,a[$][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+a[0][0]-a[1][1]-a[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-a[0][0]+a[1][1]-a[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-a[0][0]-a[1][1]+a[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+a[0][0]+a[1][1]+a[2][2],0)),a[2][1]>a[1][2]&&(k[0]=-k[0]),a[0][2]>a[2][0]&&(k[1]=-k[1]),a[1][0]>a[0][1]&&(k[2]=-k[2]),!0};function x(y,C,M){var s=C[0],_=C[1],b=C[2],k=C[3];return y[0]=M[0]*s+M[4]*_+M[8]*b+M[12]*k,y[1]=M[1]*s+M[5]*_+M[9]*b+M[13]*k,y[2]=M[2]*s+M[6]*_+M[10]*b+M[14]*k,y[3]=M[3]*s+M[7]*_+M[11]*b+M[15]*k,y}function A(y,C){y[0][0]=C[0],y[0][1]=C[1],y[0][2]=C[2],y[1][0]=C[4],y[1][1]=C[5],y[1][2]=C[6],y[2][0]=C[8],y[2][1]=C[9],y[2][2]=C[10]}function P(y,C,M,s,_){y[0]=C[0]*s+M[0]*_,y[1]=C[1]*s+M[1]*_,y[2]=C[2]*s+M[2]*_}},4335:function(v){v.exports=function(r,t){var o=t[15];if(o===0)return!1;for(var i=1/o,f=0;f<16;f++)r[f]=t[f]*i;return!0}},7442:function(v,g,r){var t=r(6658),o=r(7182),i=r(2652),f=r(9921),u=r(8648),l=c(),m=c(),h=c();v.exports=w;function w(x,A,P,y){if(f(A)===0||f(P)===0)return!1;var C=i(A,l.translate,l.scale,l.skew,l.perspective,l.quaternion),M=i(P,m.translate,m.scale,m.skew,m.perspective,m.quaternion);return!C||!M?!1:(t(h.translate,l.translate,m.translate,y),t(h.skew,l.skew,m.skew,y),t(h.scale,l.scale,m.scale,y),t(h.perspective,l.perspective,m.perspective,y),u(h.quaternion,l.quaternion,m.quaternion,y),o(x,h.translate,h.scale,h.skew,h.perspective,h.quaternion),!0)}function c(){return{translate:a(),scale:a(1),skew:a(),perspective:p(),quaternion:p()}}function a(x){return[x||0,x||0,x||0]}function p(){return[0,0,0,1]}},7182:function(v,g,r){var t={identity:r(7894),translate:r(7656),multiply:r(6760),create:r(6864),scale:r(2504),fromRotationTranslation:r(6743)};t.create();var o=t.create();v.exports=function(f,u,l,m,h,w){return t.identity(f),t.fromRotationTranslation(f,w,u),f[3]=h[0],f[7]=h[1],f[11]=h[2],f[15]=h[3],t.identity(o),m[2]!==0&&(o[9]=m[2],t.multiply(f,f,o)),m[1]!==0&&(o[9]=0,o[8]=m[1],t.multiply(f,f,o)),m[0]!==0&&(o[8]=0,o[4]=m[0],t.multiply(f,f,o)),t.scale(f,f,l),f}},4192:function(v,g,r){var t=r(2478),o=r(7442),i=r(7608),f=r(5567),u=r(2408),l=r(7089),m=r(6582),h=r(7656);r(2504);var w=r(3536),c=[0,0,0];v.exports=A;function a(P){this._components=P.slice(),this._time=[0],this.prevMatrix=P.slice(),this.nextMatrix=P.slice(),this.computedMatrix=P.slice(),this.computedInverse=P.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var p=a.prototype;p.recalcMatrix=function(P){var y=this._time,C=t.le(y,P),M=this.computedMatrix;if(!(C<0)){var s=this._components;if(C===y.length-1)for(var _=16*C,b=0;b<16;++b)M[b]=s[_++];else{for(var k=y[C+1]-y[C],_=16*C,D=this.prevMatrix,V=!0,b=0;b<16;++b)D[b]=s[_++];for(var O=this.nextMatrix,b=0;b<16;++b)O[b]=s[_++],V=V&&D[b]===O[b];if(k<1e-6||V)for(var b=0;b<16;++b)M[b]=D[b];else o(M,D,O,(P-y[C])/k)}var N=this.computedUp;N[0]=M[1],N[1]=M[5],N[2]=M[9],w(N,N);var B=this.computedInverse;i(B,M);var z=this.computedEye,H=B[15];z[0]=B[12]/H,z[1]=B[13]/H,z[2]=B[14]/H;for(var X=this.computedCenter,$=Math.exp(this.computedRadius[0]),b=0;b<3;++b)X[b]=z[b]-M[2+4*b]*$}},p.idle=function(P){if(!(P<this.lastT())){for(var y=this._components,C=y.length-16,M=0;M<16;++M)y.push(y[C++]);this._time.push(P)}},p.flush=function(P){var y=t.gt(this._time,P)-2;y<0||(this._time.splice(0,y),this._components.splice(0,16*y))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(P,y,C,M){this.recalcMatrix(P),y=y||this.computedEye,C=C||c,M=M||this.computedUp,this.setMatrix(P,m(this.computedMatrix,y,C,M));for(var s=0,_=0;_<3;++_)s+=Math.pow(C[_]-y[_],2);s=Math.log(Math.sqrt(s)),this.computedRadius[0]=s},p.rotate=function(P,y,C,M){this.recalcMatrix(P);var s=this.computedInverse;y&&u(s,s,y),C&&f(s,s,C),M&&l(s,s,M),this.setMatrix(P,i(this.computedMatrix,s))};var x=[0,0,0];p.pan=function(P,y,C,M){x[0]=-(y||0),x[1]=-(C||0),x[2]=-(M||0),this.recalcMatrix(P);var s=this.computedInverse;h(s,s,x),this.setMatrix(P,i(s,s))},p.translate=function(P,y,C,M){x[0]=y||0,x[1]=C||0,x[2]=M||0,this.recalcMatrix(P);var s=this.computedMatrix;h(s,s,x),this.setMatrix(P,s)},p.setMatrix=function(P,y){if(!(P<this.lastT())){this._time.push(P);for(var C=0;C<16;++C)this._components.push(y[C])}},p.setDistance=function(P,y){this.computedRadius[0]=y},p.setDistanceLimits=function(P,y){var C=this._limits;C[0]=P,C[1]=y},p.getDistanceLimits=function(P){var y=this._limits;return P?(P[0]=y[0],P[1]=y[1],P):y};function A(P){P=P||{};var y=P.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new a(y)}},3090:function(v,g,r){v.exports=o;var t=r(3250)[3];function o(i){var f=i.length;if(f<3){for(var p=new Array(f),u=0;u<f;++u)p[u]=u;return f===2&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:p}for(var l=new Array(f),u=0;u<f;++u)l[u]=u;l.sort(function(y,C){var M=i[y][0]-i[C][0];return M||i[y][1]-i[C][1]});for(var m=[l[0],l[1]],h=[l[0],l[1]],u=2;u<f;++u){for(var w=l[u],c=i[w],a=m.length;a>1&&t(i[m[a-2]],i[m[a-1]],c)<=0;)a-=1,m.pop();for(m.push(w),a=h.length;a>1&&t(i[h[a-2]],i[h[a-1]],c)>=0;)a-=1,h.pop();h.push(w)}for(var p=new Array(h.length+m.length-2),x=0,u=0,A=m.length;u<A;++u)p[x++]=m[u];for(var P=h.length-2;P>0;--P)p[x++]=h[P];return p}},351:function(v,g,r){v.exports=o;var t=r(4687);function o(i,f){f||(f=i,i=window);var u=0,l=0,m=0,h={shift:!1,alt:!1,control:!1,meta:!1},w=!1;function c(b){var k=!1;return"altKey"in b&&(k=k||b.altKey!==h.alt,h.alt=!!b.altKey),"shiftKey"in b&&(k=k||b.shiftKey!==h.shift,h.shift=!!b.shiftKey),"ctrlKey"in b&&(k=k||b.ctrlKey!==h.control,h.control=!!b.ctrlKey),"metaKey"in b&&(k=k||b.metaKey!==h.meta,h.meta=!!b.metaKey),k}function a(b,k){var D=t.x(k),V=t.y(k);"buttons"in k&&(b=k.buttons|0),(b!==u||D!==l||V!==m||c(k))&&(u=b|0,l=D||0,m=V||0,f&&f(u,l,m,h))}function p(b){a(0,b)}function x(){(u||l||m||h.shift||h.alt||h.meta||h.control)&&(l=m=0,u=0,h.shift=h.alt=h.control=h.meta=!1,f&&f(0,0,0,h))}function A(b){c(b)&&f&&f(u,l,m,h)}function P(b){t.buttons(b)===0?a(0,b):a(u,b)}function y(b){a(u|t.buttons(b),b)}function C(b){a(u&~t.buttons(b),b)}function M(){w||(w=!0,i.addEventListener("mousemove",P),i.addEventListener("mousedown",y),i.addEventListener("mouseup",C),i.addEventListener("mouseleave",p),i.addEventListener("mouseenter",p),i.addEventListener("mouseout",p),i.addEventListener("mouseover",p),i.addEventListener("blur",x),i.addEventListener("keyup",A),i.addEventListener("keydown",A),i.addEventListener("keypress",A),i!==window&&(window.addEventListener("blur",x),window.addEventListener("keyup",A),window.addEventListener("keydown",A),window.addEventListener("keypress",A)))}function s(){w&&(w=!1,i.removeEventListener("mousemove",P),i.removeEventListener("mousedown",y),i.removeEventListener("mouseup",C),i.removeEventListener("mouseleave",p),i.removeEventListener("mouseenter",p),i.removeEventListener("mouseout",p),i.removeEventListener("mouseover",p),i.removeEventListener("blur",x),i.removeEventListener("keyup",A),i.removeEventListener("keydown",A),i.removeEventListener("keypress",A),i!==window&&(window.removeEventListener("blur",x),window.removeEventListener("keyup",A),window.removeEventListener("keydown",A),window.removeEventListener("keypress",A)))}M();var _={element:i};return Object.defineProperties(_,{enabled:{get:function(){return w},set:function(b){b?M():s()},enumerable:!0},buttons:{get:function(){return u},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return m},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),_}},24:function(v){var g={left:0,top:0};v.exports=r;function r(o,i,f){i=i||o.currentTarget||o.srcElement,Array.isArray(f)||(f=[0,0]);var u=o.clientX||0,l=o.clientY||0,m=t(i);return f[0]=u-m.left,f[1]=l-m.top,f}function t(o){return o===window||o===document||o===document.body?g:o.getBoundingClientRect()}},4687:function(v,g){function r(f){if(typeof f=="object"){if("buttons"in f)return f.buttons;if("which"in f){var u=f.which;if(u===2)return 4;if(u===3)return 2;if(u>0)return 1<<u-1}else if("button"in f){var u=f.button;if(u===1)return 4;if(u===2)return 2;if(u>=0)return 1<<u}}return 0}g.buttons=r;function t(f){return f.target||f.srcElement||window}g.element=t;function o(f){if(typeof f=="object"){if("offsetX"in f)return f.offsetX;var u=t(f),l=u.getBoundingClientRect();return f.clientX-l.left}return 0}g.x=o;function i(f){if(typeof f=="object"){if("offsetY"in f)return f.offsetY;var u=t(f),l=u.getBoundingClientRect();return f.clientY-l.top}return 0}g.y=i},8512:function(v,g,r){var t=r(665);v.exports=o;function o(i,f,u){typeof i=="function"&&(u=!!f,f=i,i=window);var l=t("ex",i),m=function(h){u&&h.preventDefault();var w=h.deltaX||0,c=h.deltaY||0,a=h.deltaZ||0,p=h.deltaMode,x=1;switch(p){case 1:x=l;break;case 2:x=window.innerHeight;break}if(w*=x,c*=x,a*=x,w||c||a)return f(w,c,a,h)};return i.addEventListener("wheel",m),m}},2640:function(v,g,r){var t=r(1888);v.exports=f;var o={"false,0,1":function(l,m,h,w,c){return function(p,x,A,P){var y=p.shape[0]|0,C=p.shape[1]|0,M=p.data,s=p.offset|0,_=p.stride[0]|0,b=p.stride[1]|0,k=s,D,V=-_|0,O=0,N=-b|0,B=0,z=-_-b|0,H=0,X=_|0,$=b-_*y|0,ne=0,q=0,ue=0,te=2*y|0,J=w(te),ie=w(te),K=0,ee=0,le=-1,j=-1,Z=0,fe=-y|0,re=y|0,ce=0,xe=-y-1|0,Te=y-1|0,we=0,_e=0,ke=0;for(ne=0;ne<y;++ne)J[K++]=h(M[k],x,A,P),k+=X;if(k+=$,C>0){if(q=1,J[K++]=h(M[k],x,A,P),k+=X,y>0)for(ne=1,D=M[k],ee=J[K]=h(D,x,A,P),Z=J[K+le],ce=J[K+fe],we=J[K+xe],(ee!==Z||ee!==ce||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,Z,ce,we,x,A,P),_e=ie[K]=ue++),K+=1,k+=X,ne=2;ne<y;++ne)D=M[k],ee=J[K]=h(D,x,A,P),Z=J[K+le],ce=J[K+fe],we=J[K+xe],(ee!==Z||ee!==ce||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,Z,ce,we,x,A,P),_e=ie[K]=ue++,we!==Z&&m(ie[K+le],_e,H,O,we,Z,x,A,P)),K+=1,k+=X;for(k+=$,K=0,ke=le,le=j,j=ke,ke=fe,fe=re,re=ke,ke=xe,xe=Te,Te=ke,q=2;q<C;++q){if(J[K++]=h(M[k],x,A,P),k+=X,y>0)for(ne=1,D=M[k],ee=J[K]=h(D,x,A,P),Z=J[K+le],ce=J[K+fe],we=J[K+xe],(ee!==Z||ee!==ce||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,Z,ce,we,x,A,P),_e=ie[K]=ue++,we!==ce&&m(ie[K+fe],_e,B,H,ce,we,x,A,P)),K+=1,k+=X,ne=2;ne<y;++ne)D=M[k],ee=J[K]=h(D,x,A,P),Z=J[K+le],ce=J[K+fe],we=J[K+xe],(ee!==Z||ee!==ce||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,Z,ce,we,x,A,P),_e=ie[K]=ue++,we!==ce&&m(ie[K+fe],_e,B,H,ce,we,x,A,P),we!==Z&&m(ie[K+le],_e,H,O,we,Z,x,A,P)),K+=1,k+=X;q&1&&(K=0),ke=le,le=j,j=ke,ke=fe,fe=re,re=ke,ke=xe,xe=Te,Te=ke,k+=$}}c(ie),c(J)}},"false,1,0":function(l,m,h,w,c){return function(p,x,A,P){var y=p.shape[0]|0,C=p.shape[1]|0,M=p.data,s=p.offset|0,_=p.stride[0]|0,b=p.stride[1]|0,k=s,D,V=-_|0,O=0,N=-b|0,B=0,z=-_-b|0,H=0,X=b|0,$=_-b*C|0,ne=0,q=0,ue=0,te=2*C|0,J=w(te),ie=w(te),K=0,ee=0,le=-1,j=-1,Z=0,fe=-C|0,re=C|0,ce=0,xe=-C-1|0,Te=C-1|0,we=0,_e=0,ke=0;for(q=0;q<C;++q)J[K++]=h(M[k],x,A,P),k+=X;if(k+=$,y>0){if(ne=1,J[K++]=h(M[k],x,A,P),k+=X,C>0)for(q=1,D=M[k],ee=J[K]=h(D,x,A,P),ce=J[K+fe],Z=J[K+le],we=J[K+xe],(ee!==ce||ee!==Z||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,ce,Z,we,x,A,P),_e=ie[K]=ue++),K+=1,k+=X,q=2;q<C;++q)D=M[k],ee=J[K]=h(D,x,A,P),ce=J[K+fe],Z=J[K+le],we=J[K+xe],(ee!==ce||ee!==Z||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,ce,Z,we,x,A,P),_e=ie[K]=ue++,we!==Z&&m(ie[K+le],_e,B,H,Z,we,x,A,P)),K+=1,k+=X;for(k+=$,K=0,ke=fe,fe=re,re=ke,ke=le,le=j,j=ke,ke=xe,xe=Te,Te=ke,ne=2;ne<y;++ne){if(J[K++]=h(M[k],x,A,P),k+=X,C>0)for(q=1,D=M[k],ee=J[K]=h(D,x,A,P),ce=J[K+fe],Z=J[K+le],we=J[K+xe],(ee!==ce||ee!==Z||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,ce,Z,we,x,A,P),_e=ie[K]=ue++,we!==ce&&m(ie[K+fe],_e,H,O,we,ce,x,A,P)),K+=1,k+=X,q=2;q<C;++q)D=M[k],ee=J[K]=h(D,x,A,P),ce=J[K+fe],Z=J[K+le],we=J[K+xe],(ee!==ce||ee!==Z||ee!==we)&&(O=M[k+V],B=M[k+N],H=M[k+z],l(ne,q,D,O,B,H,ee,ce,Z,we,x,A,P),_e=ie[K]=ue++,we!==Z&&m(ie[K+le],_e,B,H,Z,we,x,A,P),we!==ce&&m(ie[K+fe],_e,H,O,we,ce,x,A,P)),K+=1,k+=X;ne&1&&(K=0),ke=fe,fe=re,re=ke,ke=le,le=j,j=ke,ke=xe,xe=Te,Te=ke,k+=$}}c(ie),c(J)}}};function i(u,l,m,h,w,c){var a=[c,w].join(","),p=o[a];return p(u,l,m,t.mallocUint32,t.freeUint32)}function f(u){function l(x){throw new Error("ndarray-extract-contour: "+x)}typeof u!="object"&&l("Must specify arguments");var m=u.order;Array.isArray(m)||l("Must specify order");var h=u.arrayArguments||1;h<1&&l("Must have at least one array argument");var w=u.scalarArguments||0;w<0&&l("Scalar arg count must be > 0"),typeof u.vertex!="function"&&l("Must specify vertex creation function"),typeof u.cell!="function"&&l("Must specify cell creation function"),typeof u.phase!="function"&&l("Must specify phase function");for(var c=u.getters||[],a=new Array(h),p=0;p<h;++p)c.indexOf(p)>=0?a[p]=!0:a[p]=!1;return i(u.vertex,u.cell,u.phase,w,m,a)}},6199:function(v,g,r){var t=r(1338),o={zero:function(A,P,y,C){var M=A[0],s=y[0];C|=0;var _=0,b=s;for(_=0;_<M;++_)P[C]=0,C+=b},fdTemplate1:function(A,P,y,C,M,s,_){var b=A[0],k=y[0],D=s[0],V=-1*k,O=k;C|=0,_|=0;var N=0,B=k,z=D;for(N=0;N<b;++N)M[_]=.5*(P[C+V]-P[C+O]),C+=B,_+=z},fdTemplate2:function(A,P,y,C,M,s,_,b,k,D){var V=A[0],O=A[1],N=y[0],B=y[1],z=s[0],H=s[1],X=k[0],$=k[1],ne=-1*N,q=N,ue=-1*B,te=B;C|=0,_|=0,D|=0;var J=0,ie=0,K=B,ee=N-O*B,le=H,j=z-O*H,Z=$,fe=X-O*$;for(ie=0;ie<V;++ie){for(J=0;J<O;++J)M[_]=.5*(P[C+ne]-P[C+q]),b[D]=.5*(P[C+ue]-P[C+te]),C+=K,_+=le,D+=Z;C+=ee,_+=j,D+=fe}}},i={cdiff:function(A){var P={};return function(C,M,s){var _=C.dtype,b=C.order,k=M.dtype,D=M.order,V=s.dtype,O=s.order,N=[_,b.join(),k,D.join(),V,O.join()].join(),B=P[N];return B||(P[N]=B=A([_,b,k,D,V,O])),B(C.shape.slice(0),C.data,C.stride,C.offset|0,M.data,M.stride,M.offset|0,s.data,s.stride,s.offset|0)}},zero:function(A){var P={};return function(C){var M=C.dtype,s=C.order,_=[M,s.join()].join(),b=P[_];return b||(P[_]=b=A([M,s])),b(C.shape.slice(0),C.data,C.stride,C.offset|0)}},fdTemplate1:function(A){var P={};return function(C,M){var s=C.dtype,_=C.order,b=M.dtype,k=M.order,D=[s,_.join(),b,k.join()].join(),V=P[D];return V||(P[D]=V=A([s,_,b,k])),V(C.shape.slice(0),C.data,C.stride,C.offset|0,M.data,M.stride,M.offset|0)}},fdTemplate2:function(A){var P={};return function(C,M,s){var _=C.dtype,b=C.order,k=M.dtype,D=M.order,V=s.dtype,O=s.order,N=[_,b.join(),k,D.join(),V,O.join()].join(),B=P[N];return B||(P[N]=B=A([_,b,k,D,V,O])),B(C.shape.slice(0),C.data,C.stride,C.offset|0,M.data,M.stride,M.offset|0,s.data,s.stride,s.offset|0)}}};function f(A){var P=i[A.funcName];return P(u.bind(void 0,A))}function u(A){return o[A.funcName]}function l(A){return f({funcName:A.funcName})}var m={},h={},w=l({funcName:"cdiff"}),c=l({funcName:"zero"});function a(A){return A in m?m[A]:m[A]=l({funcName:"fdTemplate"+A})}function p(A,P,y,C){return function(M,s){var _=s.shape.slice();return _[0]>2&&_[1]>2&&C(s.pick(-1,-1).lo(1,1).hi(_[0]-2,_[1]-2),M.pick(-1,-1,0).lo(1,1).hi(_[0]-2,_[1]-2),M.pick(-1,-1,1).lo(1,1).hi(_[0]-2,_[1]-2)),_[1]>2&&(y(s.pick(0,-1).lo(1).hi(_[1]-2),M.pick(0,-1,1).lo(1).hi(_[1]-2)),P(M.pick(0,-1,0).lo(1).hi(_[1]-2))),_[1]>2&&(y(s.pick(_[0]-1,-1).lo(1).hi(_[1]-2),M.pick(_[0]-1,-1,1).lo(1).hi(_[1]-2)),P(M.pick(_[0]-1,-1,0).lo(1).hi(_[1]-2))),_[0]>2&&(y(s.pick(-1,0).lo(1).hi(_[0]-2),M.pick(-1,0,0).lo(1).hi(_[0]-2)),P(M.pick(-1,0,1).lo(1).hi(_[0]-2))),_[0]>2&&(y(s.pick(-1,_[1]-1).lo(1).hi(_[0]-2),M.pick(-1,_[1]-1,0).lo(1).hi(_[0]-2)),P(M.pick(-1,_[1]-1,1).lo(1).hi(_[0]-2))),M.set(0,0,0,0),M.set(0,0,1,0),M.set(_[0]-1,0,0,0),M.set(_[0]-1,0,1,0),M.set(0,_[1]-1,0,0),M.set(0,_[1]-1,1,0),M.set(_[0]-1,_[1]-1,0,0),M.set(_[0]-1,_[1]-1,1,0),M}}function x(A){var P=A.join(),_=h[P];if(_)return _;for(var y=A.length,C=[w,c],M=1;M<=y;++M)C.push(a(M));var s=p,_=s.apply(void 0,C);return h[P]=_,_}v.exports=function(P,y,C){if(Array.isArray(C)||(typeof C=="string"?C=t(y.dimension,C):C=t(y.dimension,"clamp")),y.size===0)return P;if(y.dimension===0)return P.set(0),P;var M=x(C);return M(P,y)}},4317:function(v){function g(f,u){var l=Math.floor(u),m=u-l,h=0<=l&&l<f.shape[0],w=0<=l+1&&l+1<f.shape[0],c=h?+f.get(l):0,a=w?+f.get(l+1):0;return(1-m)*c+m*a}function r(f,u,l){var m=Math.floor(u),h=u-m,w=0<=m&&m<f.shape[0],c=0<=m+1&&m+1<f.shape[0],a=Math.floor(l),p=l-a,x=0<=a&&a<f.shape[1],A=0<=a+1&&a+1<f.shape[1],P=w&&x?f.get(m,a):0,y=w&&A?f.get(m,a+1):0,C=c&&x?f.get(m+1,a):0,M=c&&A?f.get(m+1,a+1):0;return(1-p)*((1-h)*P+h*C)+p*((1-h)*y+h*M)}function t(f,u,l,m){var h=Math.floor(u),w=u-h,c=0<=h&&h<f.shape[0],a=0<=h+1&&h+1<f.shape[0],p=Math.floor(l),x=l-p,A=0<=p&&p<f.shape[1],P=0<=p+1&&p+1<f.shape[1],y=Math.floor(m),C=m-y,M=0<=y&&y<f.shape[2],s=0<=y+1&&y+1<f.shape[2],_=c&&A&&M?f.get(h,p,y):0,b=c&&P&&M?f.get(h,p+1,y):0,k=a&&A&&M?f.get(h+1,p,y):0,D=a&&P&&M?f.get(h+1,p+1,y):0,V=c&&A&&s?f.get(h,p,y+1):0,O=c&&P&&s?f.get(h,p+1,y+1):0,N=a&&A&&s?f.get(h+1,p,y+1):0,B=a&&P&&s?f.get(h+1,p+1,y+1):0;return(1-C)*((1-x)*((1-w)*_+w*k)+x*((1-w)*b+w*D))+C*((1-x)*((1-w)*V+w*N)+x*((1-w)*O+w*B))}function o(f){var u=f.shape.length|0,l=new Array(u),m=new Array(u),h=new Array(u),w=new Array(u),c,a;for(c=0;c<u;++c)a=+arguments[c+1],l[c]=Math.floor(a),m[c]=a-l[c],h[c]=0<=l[c]&&l[c]<f.shape[c],w[c]=0<=l[c]+1&&l[c]+1<f.shape[c];var p=0,x,A,P;e:for(c=0;c<1<<u;++c){for(A=1,P=f.offset,x=0;x<u;++x)if(c&1<<x){if(!w[x])continue e;A*=m[x],P+=f.stride[x]*(l[x]+1)}else{if(!h[x])continue e;A*=1-m[x],P+=f.stride[x]*l[x]}p+=A*f.data[P]}return p}function i(f,u,l,m){switch(f.shape.length){case 0:return 0;case 1:return g(f,u);case 2:return r(f,u,l);case 3:return t(f,u,l,m);default:return o.apply(void 0,arguments)}}v.exports=i,v.exports.d1=g,v.exports.d2=r,v.exports.d3=t},5298:function(v,g){var r={"float64,2,1,0":function(){return function(h,w,c,a,p){var x=h[0],A=h[1],P=h[2],y=c[0],C=c[1],M=c[2];a|=0;var s=0,_=0,b=0,k=M,D=C-P*M,V=y-A*C;for(b=0;b<x;++b){for(_=0;_<A;++_){for(s=0;s<P;++s)w[a]/=p,a+=k;a+=D}a+=V}}},"uint8,2,0,1,float64,2,1,0":function(){return function(h,w,c,a,p,x,A,P){var y=h[0],C=h[1],M=h[2],s=c[0],_=c[1],b=c[2],k=x[0],D=x[1],V=x[2];a|=0,A|=0;for(var O=a,N=A,B=h[0]|0;B>0;){B<64?(y=B,B=0):(y=64,B-=64);for(var z=h[1]|0;z>0;){z<64?(C=z,z=0):(C=64,z-=64),a=O+B*s+z*_,A=N+B*k+z*D;var H=0,X=0,$=0,ne=b,q=s-M*b,ue=_-y*s,te=V,J=k-M*V,ie=D-y*k;for($=0;$<C;++$){for(X=0;X<y;++X){for(H=0;H<M;++H)w[a]=p[A]*P,a+=ne,A+=te;a+=q,A+=J}a+=ue,A+=ie}}}}},"float32,1,0,float32,1,0":function(){return function(h,w,c,a,p,x,A){var P=h[0],y=h[1],C=c[0],M=c[1],s=x[0],_=x[1];a|=0,A|=0;var b=0,k=0,D=M,V=C-y*M,O=_,N=s-y*_;for(k=0;k<P;++k){for(b=0;b<y;++b)w[a]=p[A],a+=D,A+=O;a+=V,A+=N}}},"float32,1,0,float32,0,1":function(){return function(h,w,c,a,p,x,A){var P=h[0],y=h[1],C=c[0],M=c[1],s=x[0],_=x[1];a|=0,A|=0;for(var b=a,k=A,D=h[1]|0;D>0;){D<64?(y=D,D=0):(y=64,D-=64);for(var V=h[0]|0;V>0;){V<64?(P=V,V=0):(P=64,V-=64),a=b+D*M+V*C,A=k+D*_+V*s;var O=0,N=0,B=M,z=C-y*M,H=_,X=s-y*_;for(N=0;N<P;++N){for(O=0;O<y;++O)w[a]=p[A],a+=B,A+=H;a+=z,A+=X}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(h,w,c,a,p,x,A){var P=h[0],y=h[1],C=h[2],M=c[0],s=c[1],_=c[2],b=x[0],k=x[1],D=x[2];a|=0,A|=0;for(var V=a,O=A,N=h[2]|0;N>0;){N<64?(C=N,N=0):(C=64,N-=64);for(var B=h[0]|0;B>0;){B<64?(P=B,B=0):(P=64,B-=64);for(var z=h[1]|0;z>0;){z<64?(y=z,z=0):(y=64,z-=64),a=V+N*_+B*M+z*s,A=O+N*D+B*b+z*k;var H=0,X=0,$=0,ne=_,q=M-C*_,ue=s-P*M,te=D,J=b-C*D,ie=k-P*b;for($=0;$<y;++$){for(X=0;X<P;++X){for(H=0;H<C;++H)w[a]=p[A],a+=ne,A+=te;a+=q,A+=J}a+=ue,A+=ie}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(h,w,c,a,p,x,A){var P=h[0],y=h[1],C=h[2],M=c[0],s=c[1],_=c[2],b=x[0],k=x[1],D=x[2];a|=0,A|=0;var V=0,O=0,N=0,B=_,z=M-C*_,H=s-P*M,X=D,$=b-C*D,ne=k-P*b;for(N=0;N<y;++N){for(O=0;O<P;++O){for(V=0;V<C;++V)w[a]=p[A],a+=B,A+=X;a+=z,A+=$}a+=H,A+=ne}}}};function t(m,h){var w=h.join(","),c=r[w];return c()}var o=t,i={mul:function(m){var h={};return function(c,a,p){var x=c.dtype,A=c.order,P=a.dtype,y=a.order,C=p.dtype,M=p.order,s=[x,A.join(),P,y.join(),C,M.join()].join(),_=h[s];return _||(h[s]=_=m([x,A,P,y,C,M])),_(c.shape.slice(0),c.data,c.stride,c.offset|0,a.data,a.stride,a.offset|0,p.data,p.stride,p.offset|0)}},muls:function(m){var h={};return function(c,a,p){var x=c.dtype,A=c.order,P=a.dtype,y=a.order,C=[x,A.join(),P,y.join()].join(),M=h[C];return M||(h[C]=M=m([x,A,P,y])),M(c.shape.slice(0),c.data,c.stride,c.offset|0,a.data,a.stride,a.offset|0,p)}},mulseq:function(m){var h={};return function(c,a){var p=c.dtype,x=c.order,A=[p,x.join()].join(),P=h[A];return P||(h[A]=P=m([p,x])),P(c.shape.slice(0),c.data,c.stride,c.offset|0,a)}},div:function(m){var h={};return function(c,a,p){var x=c.dtype,A=c.order,P=a.dtype,y=a.order,C=p.dtype,M=p.order,s=[x,A.join(),P,y.join(),C,M.join()].join(),_=h[s];return _||(h[s]=_=m([x,A,P,y,C,M])),_(c.shape.slice(0),c.data,c.stride,c.offset|0,a.data,a.stride,a.offset|0,p.data,p.stride,p.offset|0)}},divs:function(m){var h={};return function(c,a,p){var x=c.dtype,A=c.order,P=a.dtype,y=a.order,C=[x,A.join(),P,y.join()].join(),M=h[C];return M||(h[C]=M=m([x,A,P,y])),M(c.shape.slice(0),c.data,c.stride,c.offset|0,a.data,a.stride,a.offset|0,p)}},divseq:function(m){var h={};return function(c,a){var p=c.dtype,x=c.order,A=[p,x.join()].join(),P=h[A];return P||(h[A]=P=m([p,x])),P(c.shape.slice(0),c.data,c.stride,c.offset|0,a)}},assign:function(m){var h={};return function(c,a){var p=c.dtype,x=c.order,A=a.dtype,P=a.order,y=[p,x.join(),A,P.join()].join(),C=h[y];return C||(h[y]=C=m([p,x,A,P])),C(c.shape.slice(0),c.data,c.stride,c.offset|0,a.data,a.stride,a.offset|0)}}};function f(m){var h=i[m.funcName];return h(o.bind(void 0,m))}function u(m){return f({funcName:m.funcName})}var l={mul:"*",div:"/"};(function(){for(var m in l)g[m]=u({funcName:m}),g[m+"s"]=u({funcName:m+"s"}),g[m+"seq"]=u({funcName:m+"seq"})})(),g.assign=u({funcName:"assign"})},9994:function(v,g,r){var t=r(9618),o=r(8277);v.exports=function(f,u){for(var l=[],m=f,h=1;Array.isArray(m);)l.push(m.length),h*=m.length,m=m[0];return l.length===0?t():(u||(u=t(new Float64Array(h),l)),o(u,f),u)}},8277:function(v){function g(){return function(u,l,m,h,w){var c=u[0],a=u[1],p=u[2],x=m[0],A=m[1],P=m[2],y=[0,0,0];h|=0;var C=0,M=0,s=0,_=P,b=A-p*P,k=x-a*A;for(s=0;s<c;++s){for(M=0;M<a;++M){for(C=0;C<p;++C){{var D=w,V;for(V=0;V<y.length-1;++V)D=D[y[V]];l[h]=D[y[y.length-1]]}h+=_,++y[2]}h+=b,y[2]-=p,++y[1]}h+=k,y[1]-=a,++y[0]}}}function r(){return g()}var t=r;function o(u){var l={};return function(h,w){var c=h.dtype,a=h.order,p=[c,a.join()].join(),x=l[p];return x||(l[p]=x=u([c,a])),x(h.shape.slice(0),h.data,h.stride,h.offset|0,w)}}function i(u){return o(t.bind(void 0,u))}function f(u){return i({funcName:u.funcName})}v.exports=f({funcName:"convert"})},7640:function(v,g,r){var t=r(1888);function o(w){switch(w){case"uint32":return[t.mallocUint32,t.freeUint32];default:return null}}var i={"uint32,1,0":function(w,c){return function(p,x,A,P,y,C,M,s,_,b,k){var D,V,O,N=p*y+P,B,z=w(s),H,X,$,ne;for(D=p+1;D<=x;++D){for(V=D,N+=y,O=N,H=0,X=N,B=0;B<s;++B)z[H++]=A[X],X+=_;e:for(;V-- >p;){H=0,X=O-y;t:for(B=0;B<s;++B){if($=A[X],ne=z[H],$<ne)break e;if($>ne)break t;X+=b,H+=k}for(H=O,X=O-y,B=0;B<s;++B)A[H]=A[X],H+=_,X+=_;O-=y}for(H=O,X=0,B=0;B<s;++B)A[H]=z[X++],H+=_}c(z)}}};function f(w,c){var a=o(c),p=[c,w].join(","),x=i[p];return a?x(a[0],a[1]):x()}var u={"uint32,1,0":function(w,c,a){return function p(x,A,P,y,C,M,s,_,b,k,D){var V=(A-x+1)/6|0,O=x+V,N=A-V,B=x+A>>1,z=B-V,H=B+V,X=O,$=z,ne=B,q=H,ue=N,te=x+1,J=A-1,ie=!0,K,ee,le,j,Z,fe,re,ce,xe,Te=0,we=0,_e=0,ke,Ne,Ee,ze,Ce,Oe,Le,Ge,rt,ot,$e,qe,ht,vt,pt,wt,Et=_,nt=c(Et),Fe=c(Et);Ne=C*X,Ee=C*$,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=X,X=$,$=ee;break e}if(_e<0)break e;wt+=k}Ne=C*q,Ee=C*ue,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=q,q=ue,ue=ee;break e}if(_e<0)break e;wt+=k}Ne=C*X,Ee=C*ne,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=X,X=ne,ne=ee;break e}if(_e<0)break e;wt+=k}Ne=C*$,Ee=C*ne,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=$,$=ne,ne=ee;break e}if(_e<0)break e;wt+=k}Ne=C*X,Ee=C*q,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=X,X=q,q=ee;break e}if(_e<0)break e;wt+=k}Ne=C*ne,Ee=C*q,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=ne,ne=q,q=ee;break e}if(_e<0)break e;wt+=k}Ne=C*$,Ee=C*ue,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=$,$=ue,ue=ee;break e}if(_e<0)break e;wt+=k}Ne=C*$,Ee=C*ne,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=$,$=ne,ne=ee;break e}if(_e<0)break e;wt+=k}Ne=C*q,Ee=C*ue,wt=y;e:for(ke=0;ke<_;++ke){if(re=Ne+wt,ce=Ee+wt,_e=P[re]-P[ce],_e>0){ee=q,q=ue,ue=ee;break e}if(_e<0)break e;wt+=k}for(Ne=C*X,Ee=C*$,ze=C*ne,Ce=C*q,Oe=C*ue,Le=C*O,Ge=C*B,rt=C*N,pt=0,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,xe=ze+wt,ot=Ce+wt,$e=Oe+wt,qe=Le+wt,ht=Ge+wt,vt=rt+wt,nt[pt]=P[ce],Fe[pt]=P[ot],ie=ie&&nt[pt]===Fe[pt],le=P[re],j=P[xe],Z=P[$e],P[qe]=le,P[ht]=j,P[vt]=Z,++pt,wt+=b;for(Ne=C*z,Ee=C*x,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,P[re]=P[ce],wt+=b;for(Ne=C*H,Ee=C*A,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,P[re]=P[ce],wt+=b;if(ie)for(fe=te;fe<=J;++fe){re=y+fe*C,pt=0;e:for(ke=0;ke<_;++ke){if(_e=P[re]-nt[pt],_e!==0)break e;pt+=D,re+=k}if(_e!==0)if(_e<0){if(fe!==te)for(Ne=C*fe,Ee=C*te,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,K=P[re],P[re]=P[ce],P[ce]=K,wt+=b;++te}else for(;;){re=y+J*C,pt=0;e:for(ke=0;ke<_;++ke){if(_e=P[re]-nt[pt],_e!==0)break e;pt+=D,re+=k}if(_e>0)J--;else if(_e<0){for(Ne=C*fe,Ee=C*te,ze=C*J,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,xe=ze+wt,K=P[re],P[re]=P[ce],P[ce]=P[xe],P[xe]=K,wt+=b;++te,--J;break}else{for(Ne=C*fe,Ee=C*J,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,K=P[re],P[re]=P[ce],P[ce]=K,wt+=b;--J;break}}}else for(fe=te;fe<=J;++fe){re=y+fe*C,pt=0;e:for(ke=0;ke<_;++ke){if(Te=P[re]-nt[pt],Te!==0)break e;pt+=D,re+=k}if(Te<0){if(fe!==te)for(Ne=C*fe,Ee=C*te,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,K=P[re],P[re]=P[ce],P[ce]=K,wt+=b;++te}else{re=y+fe*C,pt=0;e:for(ke=0;ke<_;++ke){if(we=P[re]-Fe[pt],we!==0)break e;pt+=D,re+=k}if(we>0)for(;;){re=y+J*C,pt=0;e:for(ke=0;ke<_;++ke){if(_e=P[re]-Fe[pt],_e!==0)break e;pt+=D,re+=k}if(_e>0){if(--J<fe)break;continue}else{re=y+J*C,pt=0;e:for(ke=0;ke<_;++ke){if(_e=P[re]-nt[pt],_e!==0)break e;pt+=D,re+=k}if(_e<0){for(Ne=C*fe,Ee=C*te,ze=C*J,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,xe=ze+wt,K=P[re],P[re]=P[ce],P[ce]=P[xe],P[xe]=K,wt+=b;++te,--J}else{for(Ne=C*fe,Ee=C*J,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,K=P[re],P[re]=P[ce],P[ce]=K,wt+=b;--J}break}}}}for(Ne=C*x,Ee=C*(te-1),pt=0,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,P[re]=P[ce],P[ce]=nt[pt],++pt,wt+=b;for(Ne=C*A,Ee=C*(J+1),pt=0,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,P[re]=P[ce],P[ce]=Fe[pt],++pt,wt+=b;if(te-2-x<=32?w(x,te-2,P,y,C,M,s,_,b,k,D):p(x,te-2,P,y,C,M,s,_,b,k,D),A-(J+2)<=32?w(J+2,A,P,y,C,M,s,_,b,k,D):p(J+2,A,P,y,C,M,s,_,b,k,D),ie){a(nt),a(Fe);return}if(te<O&&J>N){e:for(;;){for(re=y+te*C,pt=0,wt=y,ke=0;ke<_;++ke){if(P[re]!==nt[pt])break e;++pt,re+=b}++te}e:for(;;){for(re=y+J*C,pt=0,wt=y,ke=0;ke<_;++ke){if(P[re]!==Fe[pt])break e;++pt,re+=b}--J}for(fe=te;fe<=J;++fe){re=y+fe*C,pt=0;e:for(ke=0;ke<_;++ke){if(Te=P[re]-nt[pt],Te!==0)break e;pt+=D,re+=k}if(Te===0){if(fe!==te)for(Ne=C*fe,Ee=C*te,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,K=P[re],P[re]=P[ce],P[ce]=K,wt+=b;++te}else{re=y+fe*C,pt=0;e:for(ke=0;ke<_;++ke){if(we=P[re]-Fe[pt],we!==0)break e;pt+=D,re+=k}if(we===0)for(;;){re=y+J*C,pt=0;e:for(ke=0;ke<_;++ke){if(_e=P[re]-Fe[pt],_e!==0)break e;pt+=D,re+=k}if(_e===0){if(--J<fe)break;continue}else{re=y+J*C,pt=0;e:for(ke=0;ke<_;++ke){if(_e=P[re]-nt[pt],_e!==0)break e;pt+=D,re+=k}if(_e<0){for(Ne=C*fe,Ee=C*te,ze=C*J,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,xe=ze+wt,K=P[re],P[re]=P[ce],P[ce]=P[xe],P[xe]=K,wt+=b;++te,--J}else{for(Ne=C*fe,Ee=C*J,wt=y,ke=0;ke<_;++ke)re=Ne+wt,ce=Ee+wt,K=P[re],P[re]=P[ce],P[ce]=K,wt+=b;--J}break}}}}}a(nt),a(Fe),J-te<=32?w(te,J,P,y,C,M,s,_,b,k,D):p(te,J,P,y,C,M,s,_,b,k,D)}}};function l(w,c,a){var p=o(c),x=[c,w].join(","),A=u[x];return w.length>1&&p?A(a,p[0],p[1]):A(a)}var m={"uint32,1,0":function(w,c){return function(a){var p=a.data,x=a.offset|0,A=a.shape,P=a.stride,y=P[0]|0,C=A[0]|0,M=P[1]|0,s=A[1]|0,_=M,b=M,k=1;C<=32?w(0,C-1,p,x,y,M,C,s,_,b,k):c(0,C-1,p,x,y,M,C,s,_,b,k)}}};function h(w,c){var a=[c,w].join(","),p=m[a],x=f(w,c),A=l(w,c,x);return p(x,A)}v.exports=h},446:function(v,g,r){var t=r(7640),o={};function i(f){var u=f.order,l=f.dtype,m=[u,l],h=m.join(":"),w=o[h];return w||(o[h]=w=t(u,l)),w(f),f}v.exports=i},9618:function(v,g,r){var t=r(7163),o=typeof Float64Array<"u";function i(c,a){return c[0]-a[0]}function f(){var c=this.stride,a=new Array(c.length),p;for(p=0;p<a.length;++p)a[p]=[Math.abs(c[p]),p];a.sort(i);var x=new Array(a.length);for(p=0;p<x.length;++p)x[p]=a[p][1];return x}var u={T:function(c){function a(x){this.data=x}var p=a.prototype;return p.dtype=c,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new a(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(A){return new a(A)}},0:function(c,a){function p(A,P){this.data=A,this.offset=P}var x=p.prototype;return x.dtype=c,x.index=function(){return this.offset},x.dimension=0,x.size=1,x.shape=x.stride=x.order=[],x.lo=x.hi=x.transpose=x.step=function(){return new p(this.data,this.offset)},x.pick=function(){return a(this.data)},x.valueOf=x.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},x.set=function(P){return c==="generic"?this.data.set(this.offset,P):this.data[this.offset]=P},function(P,y,C,M){return new p(P,M)}},1:function(c,a,p){function x(P,y,C,M){this.data=P,this.shape=[y],this.stride=[C],this.offset=M|0}var A=x.prototype;return A.dtype=c,A.dimension=1,Object.defineProperty(A,"size",{get:function(){return this.shape[0]}}),A.order=[0],A.set=function(y,C){return c==="generic"?this.data.set(this.offset+this.stride[0]*y,C):this.data[this.offset+this.stride[0]*y]=C},A.get=function(y){return c==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},A.index=function(y){return this.offset+this.stride[0]*y},A.hi=function(y){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,this.stride[0],this.offset)},A.lo=function(y){var C=this.offset,M=0,s=this.shape[0],_=this.stride[0];return typeof y=="number"&&y>=0&&(M=y|0,C+=_*M,s-=M),new x(this.data,s,_,C)},A.step=function(y){var C=this.shape[0],M=this.stride[0],s=this.offset,_=0,b=Math.ceil;return typeof y=="number"&&(_=y|0,_<0?(s+=M*(C-1),C=b(-C/_)):C=b(C/_),M*=_),new x(this.data,C,M,s)},A.transpose=function(y){y=y===void 0?0:y|0;var C=this.shape,M=this.stride;return new x(this.data,C[y],M[y],this.offset)},A.pick=function(y){var C=[],M=[],s=this.offset;typeof y=="number"&&y>=0?s=s+this.stride[0]*y|0:(C.push(this.shape[0]),M.push(this.stride[0]));var _=a[C.length+1];return _(this.data,C,M,s)},function(y,C,M,s){return new x(y,C[0],M[0],s)}},2:function(c,a,p){function x(P,y,C,M,s,_){this.data=P,this.shape=[y,C],this.stride=[M,s],this.offset=_|0}var A=x.prototype;return A.dtype=c,A.dimension=2,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(A,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),A.set=function(y,C,M){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*C,M):this.data[this.offset+this.stride[0]*y+this.stride[1]*C]=M},A.get=function(y,C){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*C):this.data[this.offset+this.stride[0]*y+this.stride[1]*C]},A.index=function(y,C){return this.offset+this.stride[0]*y+this.stride[1]*C},A.hi=function(y,C){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof C!="number"||C<0?this.shape[1]:C|0,this.stride[0],this.stride[1],this.offset)},A.lo=function(y,C){var M=this.offset,s=0,_=this.shape[0],b=this.shape[1],k=this.stride[0],D=this.stride[1];return typeof y=="number"&&y>=0&&(s=y|0,M+=k*s,_-=s),typeof C=="number"&&C>=0&&(s=C|0,M+=D*s,b-=s),new x(this.data,_,b,k,D,M)},A.step=function(y,C){var M=this.shape[0],s=this.shape[1],_=this.stride[0],b=this.stride[1],k=this.offset,D=0,V=Math.ceil;return typeof y=="number"&&(D=y|0,D<0?(k+=_*(M-1),M=V(-M/D)):M=V(M/D),_*=D),typeof C=="number"&&(D=C|0,D<0?(k+=b*(s-1),s=V(-s/D)):s=V(s/D),b*=D),new x(this.data,M,s,_,b,k)},A.transpose=function(y,C){y=y===void 0?0:y|0,C=C===void 0?1:C|0;var M=this.shape,s=this.stride;return new x(this.data,M[y],M[C],s[y],s[C],this.offset)},A.pick=function(y,C){var M=[],s=[],_=this.offset;typeof y=="number"&&y>=0?_=_+this.stride[0]*y|0:(M.push(this.shape[0]),s.push(this.stride[0])),typeof C=="number"&&C>=0?_=_+this.stride[1]*C|0:(M.push(this.shape[1]),s.push(this.stride[1]));var b=a[M.length+1];return b(this.data,M,s,_)},function(y,C,M,s){return new x(y,C[0],C[1],M[0],M[1],s)}},3:function(c,a,p){function x(P,y,C,M,s,_,b,k){this.data=P,this.shape=[y,C,M],this.stride=[s,_,b],this.offset=k|0}var A=x.prototype;return A.dtype=c,A.dimension=3,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(A,"order",{get:function(){var y=Math.abs(this.stride[0]),C=Math.abs(this.stride[1]),M=Math.abs(this.stride[2]);return y>C?C>M?[2,1,0]:y>M?[1,2,0]:[1,0,2]:y>M?[2,0,1]:M>C?[0,1,2]:[0,2,1]}}),A.set=function(y,C,M,s){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M,s):this.data[this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M]=s},A.get=function(y,C,M){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M):this.data[this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M]},A.index=function(y,C,M){return this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M},A.hi=function(y,C,M){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof C!="number"||C<0?this.shape[1]:C|0,typeof M!="number"||M<0?this.shape[2]:M|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},A.lo=function(y,C,M){var s=this.offset,_=0,b=this.shape[0],k=this.shape[1],D=this.shape[2],V=this.stride[0],O=this.stride[1],N=this.stride[2];return typeof y=="number"&&y>=0&&(_=y|0,s+=V*_,b-=_),typeof C=="number"&&C>=0&&(_=C|0,s+=O*_,k-=_),typeof M=="number"&&M>=0&&(_=M|0,s+=N*_,D-=_),new x(this.data,b,k,D,V,O,N,s)},A.step=function(y,C,M){var s=this.shape[0],_=this.shape[1],b=this.shape[2],k=this.stride[0],D=this.stride[1],V=this.stride[2],O=this.offset,N=0,B=Math.ceil;return typeof y=="number"&&(N=y|0,N<0?(O+=k*(s-1),s=B(-s/N)):s=B(s/N),k*=N),typeof C=="number"&&(N=C|0,N<0?(O+=D*(_-1),_=B(-_/N)):_=B(_/N),D*=N),typeof M=="number"&&(N=M|0,N<0?(O+=V*(b-1),b=B(-b/N)):b=B(b/N),V*=N),new x(this.data,s,_,b,k,D,V,O)},A.transpose=function(y,C,M){y=y===void 0?0:y|0,C=C===void 0?1:C|0,M=M===void 0?2:M|0;var s=this.shape,_=this.stride;return new x(this.data,s[y],s[C],s[M],_[y],_[C],_[M],this.offset)},A.pick=function(y,C,M){var s=[],_=[],b=this.offset;typeof y=="number"&&y>=0?b=b+this.stride[0]*y|0:(s.push(this.shape[0]),_.push(this.stride[0])),typeof C=="number"&&C>=0?b=b+this.stride[1]*C|0:(s.push(this.shape[1]),_.push(this.stride[1])),typeof M=="number"&&M>=0?b=b+this.stride[2]*M|0:(s.push(this.shape[2]),_.push(this.stride[2]));var k=a[s.length+1];return k(this.data,s,_,b)},function(y,C,M,s){return new x(y,C[0],C[1],C[2],M[0],M[1],M[2],s)}},4:function(c,a,p){function x(P,y,C,M,s,_,b,k,D,V){this.data=P,this.shape=[y,C,M,s],this.stride=[_,b,k,D],this.offset=V|0}var A=x.prototype;return A.dtype=c,A.dimension=4,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(A,"order",{get:p}),A.set=function(y,C,M,s,_){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M+this.stride[3]*s,_):this.data[this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M+this.stride[3]*s]=_},A.get=function(y,C,M,s){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M+this.stride[3]*s):this.data[this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M+this.stride[3]*s]},A.index=function(y,C,M,s){return this.offset+this.stride[0]*y+this.stride[1]*C+this.stride[2]*M+this.stride[3]*s},A.hi=function(y,C,M,s){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof C!="number"||C<0?this.shape[1]:C|0,typeof M!="number"||M<0?this.shape[2]:M|0,typeof s!="number"||s<0?this.shape[3]:s|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},A.lo=function(y,C,M,s){var _=this.offset,b=0,k=this.shape[0],D=this.shape[1],V=this.shape[2],O=this.shape[3],N=this.stride[0],B=this.stride[1],z=this.stride[2],H=this.stride[3];return typeof y=="number"&&y>=0&&(b=y|0,_+=N*b,k-=b),typeof C=="number"&&C>=0&&(b=C|0,_+=B*b,D-=b),typeof M=="number"&&M>=0&&(b=M|0,_+=z*b,V-=b),typeof s=="number"&&s>=0&&(b=s|0,_+=H*b,O-=b),new x(this.data,k,D,V,O,N,B,z,H,_)},A.step=function(y,C,M,s){var _=this.shape[0],b=this.shape[1],k=this.shape[2],D=this.shape[3],V=this.stride[0],O=this.stride[1],N=this.stride[2],B=this.stride[3],z=this.offset,H=0,X=Math.ceil;return typeof y=="number"&&(H=y|0,H<0?(z+=V*(_-1),_=X(-_/H)):_=X(_/H),V*=H),typeof C=="number"&&(H=C|0,H<0?(z+=O*(b-1),b=X(-b/H)):b=X(b/H),O*=H),typeof M=="number"&&(H=M|0,H<0?(z+=N*(k-1),k=X(-k/H)):k=X(k/H),N*=H),typeof s=="number"&&(H=s|0,H<0?(z+=B*(D-1),D=X(-D/H)):D=X(D/H),B*=H),new x(this.data,_,b,k,D,V,O,N,B,z)},A.transpose=function(y,C,M,s){y=y===void 0?0:y|0,C=C===void 0?1:C|0,M=M===void 0?2:M|0,s=s===void 0?3:s|0;var _=this.shape,b=this.stride;return new x(this.data,_[y],_[C],_[M],_[s],b[y],b[C],b[M],b[s],this.offset)},A.pick=function(y,C,M,s){var _=[],b=[],k=this.offset;typeof y=="number"&&y>=0?k=k+this.stride[0]*y|0:(_.push(this.shape[0]),b.push(this.stride[0])),typeof C=="number"&&C>=0?k=k+this.stride[1]*C|0:(_.push(this.shape[1]),b.push(this.stride[1])),typeof M=="number"&&M>=0?k=k+this.stride[2]*M|0:(_.push(this.shape[2]),b.push(this.stride[2])),typeof s=="number"&&s>=0?k=k+this.stride[3]*s|0:(_.push(this.shape[3]),b.push(this.stride[3]));var D=a[_.length+1];return D(this.data,_,b,k)},function(y,C,M,s){return new x(y,C[0],C[1],C[2],C[3],M[0],M[1],M[2],M[3],s)}},5:function(a,p,x){function A(y,C,M,s,_,b,k,D,V,O,N,B){this.data=y,this.shape=[C,M,s,_,b],this.stride=[k,D,V,O,N],this.offset=B|0}var P=A.prototype;return P.dtype=a,P.dimension=5,Object.defineProperty(P,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(P,"order",{get:x}),P.set=function(C,M,s,_,b,k){return a==="generic"?this.data.set(this.offset+this.stride[0]*C+this.stride[1]*M+this.stride[2]*s+this.stride[3]*_+this.stride[4]*b,k):this.data[this.offset+this.stride[0]*C+this.stride[1]*M+this.stride[2]*s+this.stride[3]*_+this.stride[4]*b]=k},P.get=function(C,M,s,_,b){return a==="generic"?this.data.get(this.offset+this.stride[0]*C+this.stride[1]*M+this.stride[2]*s+this.stride[3]*_+this.stride[4]*b):this.data[this.offset+this.stride[0]*C+this.stride[1]*M+this.stride[2]*s+this.stride[3]*_+this.stride[4]*b]},P.index=function(C,M,s,_,b){return this.offset+this.stride[0]*C+this.stride[1]*M+this.stride[2]*s+this.stride[3]*_+this.stride[4]*b},P.hi=function(C,M,s,_,b){return new A(this.data,typeof C!="number"||C<0?this.shape[0]:C|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof s!="number"||s<0?this.shape[2]:s|0,typeof _!="number"||_<0?this.shape[3]:_|0,typeof b!="number"||b<0?this.shape[4]:b|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},P.lo=function(C,M,s,_,b){var k=this.offset,D=0,V=this.shape[0],O=this.shape[1],N=this.shape[2],B=this.shape[3],z=this.shape[4],H=this.stride[0],X=this.stride[1],$=this.stride[2],ne=this.stride[3],q=this.stride[4];return typeof C=="number"&&C>=0&&(D=C|0,k+=H*D,V-=D),typeof M=="number"&&M>=0&&(D=M|0,k+=X*D,O-=D),typeof s=="number"&&s>=0&&(D=s|0,k+=$*D,N-=D),typeof _=="number"&&_>=0&&(D=_|0,k+=ne*D,B-=D),typeof b=="number"&&b>=0&&(D=b|0,k+=q*D,z-=D),new A(this.data,V,O,N,B,z,H,X,$,ne,q,k)},P.step=function(C,M,s,_,b){var k=this.shape[0],D=this.shape[1],V=this.shape[2],O=this.shape[3],N=this.shape[4],B=this.stride[0],z=this.stride[1],H=this.stride[2],X=this.stride[3],$=this.stride[4],ne=this.offset,q=0,ue=Math.ceil;return typeof C=="number"&&(q=C|0,q<0?(ne+=B*(k-1),k=ue(-k/q)):k=ue(k/q),B*=q),typeof M=="number"&&(q=M|0,q<0?(ne+=z*(D-1),D=ue(-D/q)):D=ue(D/q),z*=q),typeof s=="number"&&(q=s|0,q<0?(ne+=H*(V-1),V=ue(-V/q)):V=ue(V/q),H*=q),typeof _=="number"&&(q=_|0,q<0?(ne+=X*(O-1),O=ue(-O/q)):O=ue(O/q),X*=q),typeof b=="number"&&(q=b|0,q<0?(ne+=$*(N-1),N=ue(-N/q)):N=ue(N/q),$*=q),new A(this.data,k,D,V,O,N,B,z,H,X,$,ne)},P.transpose=function(C,M,s,_,b){C=C===void 0?0:C|0,M=M===void 0?1:M|0,s=s===void 0?2:s|0,_=_===void 0?3:_|0,b=b===void 0?4:b|0;var k=this.shape,D=this.stride;return new A(this.data,k[C],k[M],k[s],k[_],k[b],D[C],D[M],D[s],D[_],D[b],this.offset)},P.pick=function(C,M,s,_,b){var k=[],D=[],V=this.offset;typeof C=="number"&&C>=0?V=V+this.stride[0]*C|0:(k.push(this.shape[0]),D.push(this.stride[0])),typeof M=="number"&&M>=0?V=V+this.stride[1]*M|0:(k.push(this.shape[1]),D.push(this.stride[1])),typeof s=="number"&&s>=0?V=V+this.stride[2]*s|0:(k.push(this.shape[2]),D.push(this.stride[2])),typeof _=="number"&&_>=0?V=V+this.stride[3]*_|0:(k.push(this.shape[3]),D.push(this.stride[3])),typeof b=="number"&&b>=0?V=V+this.stride[4]*b|0:(k.push(this.shape[4]),D.push(this.stride[4]));var O=p[k.length+1];return O(this.data,k,D,V)},function(C,M,s,_){return new A(C,M[0],M[1],M[2],M[3],M[4],s[0],s[1],s[2],s[3],s[4],_)}}};function l(c,a){var p=a===-1?"T":String(a),x=u[p];return a===-1?x(c):a===0?x(c,h[c][0]):x(c,h[c],f)}function m(c){if(t(c))return"buffer";if(o)switch(Object.prototype.toString.call(c)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(c)?"array":"generic"}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function w(c,a,p,x){if(c===void 0){var s=h.array[0];return s([])}else typeof c=="number"&&(c=[c]);a===void 0&&(a=[c.length]);var A=a.length;if(p===void 0){p=new Array(A);for(var P=A-1,y=1;P>=0;--P)p[P]=y,y*=a[P]}if(x===void 0){x=0;for(var P=0;P<A;++P)p[P]<0&&(x-=(a[P]-1)*p[P])}for(var C=m(c),M=h[C];M.length<=A+1;)M.push(l(C,M.length-1));var s=M[A+1];return s(c,a,p,x)}v.exports=w},1278:function(v,g,r){var t=r(2361),o=Math.pow(2,-1074),i=-1>>>0;v.exports=f;function f(u,l){if(isNaN(u)||isNaN(l))return NaN;if(u===l)return u;if(u===0)return l<0?-o:o;var m=t.hi(u),h=t.lo(u);return l>u==u>0?h===i?(m+=1,h=0):h+=1:h===0?(h=i,m-=1):h-=1,t.pack(h,m)}},8406:function(v,g){var r=1e-6,t=1e-6;g.vertexNormals=function(o,i,f){for(var u=i.length,l=new Array(u),m=f===void 0?r:f,h=0;h<u;++h)l[h]=[0,0,0];for(var h=0;h<o.length;++h)for(var w=o[h],c=0,a=w[w.length-1],p=w[0],x=0;x<w.length;++x){c=a,a=p,p=w[(x+1)%w.length];for(var A=i[c],P=i[a],y=i[p],C=new Array(3),M=0,s=new Array(3),_=0,b=0;b<3;++b)C[b]=A[b]-P[b],M+=C[b]*C[b],s[b]=y[b]-P[b],_+=s[b]*s[b];if(M*_>m)for(var k=l[a],D=1/Math.sqrt(M*_),b=0;b<3;++b){var V=(b+1)%3,O=(b+2)%3;k[b]+=D*(s[V]*C[O]-s[O]*C[V])}}for(var h=0;h<u;++h){for(var k=l[h],N=0,b=0;b<3;++b)N+=k[b]*k[b];if(N>m)for(var D=1/Math.sqrt(N),b=0;b<3;++b)k[b]*=D;else for(var b=0;b<3;++b)k[b]=0}return l},g.faceNormals=function(o,i,f){for(var u=o.length,l=new Array(u),m=f===void 0?t:f,h=0;h<u;++h){for(var w=o[h],c=new Array(3),a=0;a<3;++a)c[a]=i[w[a]];for(var p=new Array(3),x=new Array(3),a=0;a<3;++a)p[a]=c[1][a]-c[0][a],x[a]=c[2][a]-c[0][a];for(var A=new Array(3),P=0,a=0;a<3;++a){var y=(a+1)%3,C=(a+2)%3;A[a]=p[y]*x[C]-p[C]*x[y],P+=A[a]*A[a]}P>m?P=1/Math.sqrt(P):P=0;for(var a=0;a<3;++a)A[a]*=P;l[h]=A}return l}},4081:function(v){v.exports=g;function g(r,t,o,i,f,u,l,m,h,w){var c=t+u+w;if(a>0){var a=Math.sqrt(c+1);r[0]=.5*(l-h)/a,r[1]=.5*(m-i)/a,r[2]=.5*(o-u)/a,r[3]=.5*a}else{var p=Math.max(t,u,w),a=Math.sqrt(2*p-c+1);t>=p?(r[0]=.5*a,r[1]=.5*(f+o)/a,r[2]=.5*(m+i)/a,r[3]=.5*(l-h)/a):u>=p?(r[0]=.5*(o+f)/a,r[1]=.5*a,r[2]=.5*(h+l)/a,r[3]=.5*(m-i)/a):(r[0]=.5*(i+m)/a,r[1]=.5*(l+h)/a,r[2]=.5*a,r[3]=.5*(o-f)/a)}return r}},9977:function(v,g,r){v.exports=a;var t=r(9215),o=r(6582),i=r(7399),f=r(7608),u=r(4081);function l(p,x,A){return Math.sqrt(Math.pow(p,2)+Math.pow(x,2)+Math.pow(A,2))}function m(p,x,A,P){return Math.sqrt(Math.pow(p,2)+Math.pow(x,2)+Math.pow(A,2)+Math.pow(P,2))}function h(p,x){var A=x[0],P=x[1],y=x[2],C=x[3],M=m(A,P,y,C);M>1e-6?(p[0]=A/M,p[1]=P/M,p[2]=y/M,p[3]=C/M):(p[0]=p[1]=p[2]=0,p[3]=1)}function w(p,x,A){this.radius=t([A]),this.center=t(x),this.rotation=t(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=w.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var x=this.computedRotation;h(x,x);var A=this.computedMatrix;i(A,x);var P=this.computedCenter,y=this.computedEye,C=this.computedUp,M=Math.exp(this.computedRadius[0]);y[0]=P[0]+M*A[2],y[1]=P[1]+M*A[6],y[2]=P[2]+M*A[10],C[0]=A[1],C[1]=A[5],C[2]=A[9];for(var s=0;s<3;++s){for(var _=0,b=0;b<3;++b)_+=A[s+4*b]*y[b];A[12+s]=-_}},c.getMatrix=function(p,x){this.recalcMatrix(p);var A=this.computedMatrix;if(x){for(var P=0;P<16;++P)x[P]=A[P];return x}return A},c.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},c.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},c.pan=function(p,x,A,P){x=x||0,A=A||0,P=P||0,this.recalcMatrix(p);var y=this.computedMatrix,C=y[1],M=y[5],s=y[9],_=l(C,M,s);C/=_,M/=_,s/=_;var b=y[0],k=y[4],D=y[8],V=b*C+k*M+D*s;b-=C*V,k-=M*V,D-=s*V;var O=l(b,k,D);b/=O,k/=O,D/=O,y[2],y[6],y[10];var N=b*x+C*A,B=k*x+M*A,z=D*x+s*A;this.center.move(p,N,B,z);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+P),this.radius.set(p,Math.log(H))},c.rotate=function(p,x,A,P){this.recalcMatrix(p),x=x||0,A=A||0;var y=this.computedMatrix,C=y[0],M=y[4],s=y[8],_=y[1],b=y[5],k=y[9],D=y[2],V=y[6],O=y[10],N=x*C+A*_,B=x*M+A*b,z=x*s+A*k,H=-(V*z-O*B),X=-(O*N-D*z),$=-(D*B-V*N),ne=Math.sqrt(Math.max(0,1-Math.pow(H,2)-Math.pow(X,2)-Math.pow($,2))),q=m(H,X,$,ne);q>1e-6?(H/=q,X/=q,$/=q,ne/=q):(H=X=$=0,ne=1);var ue=this.computedRotation,te=ue[0],J=ue[1],ie=ue[2],K=ue[3],ee=te*ne+K*H+J*$-ie*X,le=J*ne+K*X+ie*H-te*$,j=ie*ne+K*$+te*X-J*H,Z=K*ne-te*H-J*X-ie*$;if(P){H=D,X=V,$=O;var fe=Math.sin(P)/l(H,X,$);H*=fe,X*=fe,$*=fe,ne=Math.cos(x),ee=ee*ne+Z*H+le*$-j*X,le=le*ne+Z*X+j*H-ee*$,j=j*ne+Z*$+ee*X-le*H,Z=Z*ne-ee*H-le*X-j*$}var re=m(ee,le,j,Z);re>1e-6?(ee/=re,le/=re,j/=re,Z/=re):(ee=le=j=0,Z=1),this.rotation.set(p,ee,le,j,Z)},c.lookAt=function(p,x,A,P){this.recalcMatrix(p),A=A||this.computedCenter,x=x||this.computedEye,P=P||this.computedUp;var y=this.computedMatrix;o(y,x,A,P);var C=this.computedRotation;u(C,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),h(C,C),this.rotation.set(p,C[0],C[1],C[2],C[3]);for(var M=0,s=0;s<3;++s)M+=Math.pow(A[s]-x[s],2);this.radius.set(p,.5*Math.log(Math.max(M,1e-6))),this.center.set(p,A[0],A[1],A[2])},c.translate=function(p,x,A,P){this.center.move(p,x||0,A||0,P||0)},c.setMatrix=function(p,x){var A=this.computedRotation;u(A,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),h(A,A),this.rotation.set(p,A[0],A[1],A[2],A[3]);var P=this.computedMatrix;f(P,x);var y=P[15];if(Math.abs(y)>1e-6){var C=P[12]/y,M=P[13]/y,s=P[14]/y;this.recalcMatrix(p);var _=Math.exp(this.computedRadius[0]);this.center.set(p,C-P[2]*_,M-P[6]*_,s-P[10]*_),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},c.setDistance=function(p,x){x>0&&this.radius.set(p,Math.log(x))},c.setDistanceLimits=function(p,x){p>0?p=Math.log(p):p=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=x},c.getDistanceLimits=function(p){var x=this.radius.bounds;return p?(p[0]=Math.exp(x[0][0]),p[1]=Math.exp(x[1][0]),p):[Math.exp(x[0][0]),Math.exp(x[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(p){var x=this.lastT(),A=p.center;A&&this.center.set(x,A[0],A[1],A[2]);var P=p.rotation;P&&this.rotation.set(x,P[0],P[1],P[2],P[3]);var y=p.distance;y&&y>0&&this.radius.set(x,Math.log(y)),this.setDistanceLimits(p.zoomMin,p.zoomMax)};function a(p){p=p||{};var x=p.center||[0,0,0],A=p.rotation||[0,0,0,1],P=p.radius||1;x=[].slice.call(x,0,3),A=[].slice.call(A,0,4),h(A,A);var y=new w(A,x,Math.log(P));return y.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&y.lookAt(0,p.eye,p.center,p.up),y}},1371:function(v,g,r){/*!
* pad-left <https://github.com/jonschlinkert/pad-left>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT license.
*/var t=r(3233);v.exports=function(i,f,u){return u=typeof u<"u"?u+"":" ",t(u,f)+i}},3202:function(v){v.exports=function(r,t){t||(t=[0,""]),r=String(r);var o=parseFloat(r,10);return t[0]=o,t[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(v,g,r){v.exports=o;var t=r(3140);function o(i,f){for(var u=f.length|0,l=i.length,m=[new Array(u),new Array(u)],h=0;h<u;++h)m[0][h]=[],m[1][h]=[];for(var h=0;h<l;++h){var w=i[h];m[0][w[0]].push(w),m[1][w[1]].push(w)}for(var c=[],h=0;h<u;++h)m[0][h].length+m[1][h].length===0&&c.push([h]);function a(M,s){var _=m[s][M[s]];_.splice(_.indexOf(M),1)}function p(M,s,_){for(var b,k,D,V=0;V<2;++V)if(m[V][s].length>0){b=m[V][s][0],D=V;break}k=b[D^1];for(var O=0;O<2;++O)for(var N=m[O][s],B=0;B<N.length;++B){var z=N[B],H=z[O^1],X=t(f[M],f[s],f[k],f[H]);X>0&&(b=z,k=H,D=O)}return _||b&&a(b,D),k}function x(M,s){var _=m[s][M][0],b=[M];a(_,s);for(var k=_[s^1];;){for(;k!==M;)b.push(k),k=p(b[b.length-2],k,!1);if(m[0][M].length+m[1][M].length===0)break;var D=b[b.length-1],V=M,O=b[1],N=p(D,V,!0);if(t(f[D],f[V],f[O],f[N])<0)break;b.push(M),k=p(D,V)}return b}function A(M,s){return s[1]===s[s.length-1]}for(var h=0;h<u;++h)for(var P=0;P<2;++P){for(var y=[];m[P][h].length>0;){m[0][h].length;var C=x(h,P);A(y,C)?y.push.apply(y,C):(y.length>0&&c.push(y),y=C)}y.length>0&&c.push(y)}return c}},5609:function(v,g,r){v.exports=o;var t=r(3134);function o(i,f){for(var u=t(i,f.length),l=new Array(f.length),m=new Array(f.length),h=[],w=0;w<f.length;++w){var c=u[w].length;m[w]=c,l[w]=!0,c<=1&&h.push(w)}for(;h.length>0;){var a=h.pop();l[a]=!1;for(var p=u[a],w=0;w<p.length;++w){var x=p[w];--m[x]===0&&h.push(x)}}for(var A=new Array(f.length),P=[],w=0;w<f.length;++w)if(l[w]){var a=P.length;A[w]=a,P.push(f[w])}else A[w]=-1;for(var y=[],w=0;w<i.length;++w){var C=i[w];l[C[0]]&&l[C[1]]&&y.push([A[C[0]],A[C[1]]])}return[y,P]}},2095:function(v,g,r){v.exports=c;var t=r(3134),o=r(3088),i=r(5085),f=r(5250),u=r(8210),l=r(1682),m=r(5609);function h(a,p){for(var x=new Array(a),A=0;A<a;++A)x[A]=p;return x}function w(a){for(var p=new Array(a),x=0;x<a;++x)p[x]=[];return p}function c(a,p){var Z=m(a,p);a=Z[0],p=Z[1];var x=p.length;a.length;for(var A=t(a,p.length),P=0;P<x;++P)if(A[P].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var y=o(a,p);function C(_e){for(var ke=_e.length,Ne=[0],Ee=0;Ee<ke;++Ee){var ze=p[_e[Ee]],Ce=p[_e[(Ee+1)%ke]],Oe=f(-ze[0],ze[1]),Le=f(-ze[0],Ce[1]),Ge=f(Ce[0],ze[1]),rt=f(Ce[0],Ce[1]);Ne=u(Ne,u(u(Oe,Le),u(Ge,rt)))}return Ne[Ne.length-1]>0}y=y.filter(C);for(var M=y.length,s=new Array(M),_=new Array(M),P=0;P<M;++P){s[P]=P;var b=new Array(M),k=y[P].map(function(ke){return p[ke]}),D=i([k]),V=0;e:for(var O=0;O<M;++O)if(b[O]=0,P!==O){for(var N=y[O],B=N.length,z=0;z<B;++z){var H=D(p[N[z]]);if(H!==0){H<0&&(b[O]=1,V+=1);continue e}}b[O]=1,V+=1}_[P]=[V,P,b]}_.sort(function(_e,ke){return ke[0]-_e[0]});for(var P=0;P<M;++P)for(var b=_[P],X=b[1],$=b[2],O=0;O<M;++O)$[O]&&(s[O]=X);for(var ne=w(M),P=0;P<M;++P)ne[P].push(s[P]),ne[s[P]].push(P);for(var q={},ue=h(x,!1),P=0;P<M;++P)for(var N=y[P],B=N.length,O=0;O<B;++O){var te=N[O],J=N[(O+1)%B],ie=Math.min(te,J)+":"+Math.max(te,J);if(ie in q){var K=q[ie];ne[K].push(P),ne[P].push(K),ue[te]=ue[J]=!0}else q[ie]=P}function ee(_e){for(var ke=_e.length,Ne=0;Ne<ke;++Ne)if(!ue[_e[Ne]])return!1;return!0}for(var le=[],j=h(M,-1),P=0;P<M;++P)s[P]===P&&!ee(y[P])?(le.push(P),j[P]=0):j[P]=-1;for(var Z=[];le.length>0;){var fe=le.pop(),re=ne[fe];l(re,function(_e,ke){return _e-ke});var ce=re.length,xe=j[fe],Te;if(xe===0){var N=y[fe];Te=[N]}for(var P=0;P<ce;++P){var we=re[P];if(!(j[we]>=0)&&(j[we]=xe^1,le.push(we),xe===0)){var N=y[we];ee(N)||(N.reverse(),Te.push(N))}}xe===0&&Z.push(Te)}return Z}},5085:function(v,g,r){v.exports=p;var t=r(3250)[3],o=r(4209),i=r(3352),f=r(2478);function u(){return!0}function l(x){return function(A,P){var y=x[A];return y?!!y.queryPoint(P,u):!1}}function m(x){for(var A={},P=0;P<x.length;++P){var y=x[P],C=y[0][0],M=y[0][1],s=y[1][1],_=[Math.min(M,s),Math.max(M,s)];C in A?A[C].push(_):A[C]=[_]}for(var b={},k=Object.keys(A),P=0;P<k.length;++P){var D=A[k[P]];b[k[P]]=i(D)}return l(b)}function h(x,A){return function(P){var y=f.le(A,P[0]);if(y<0)return 1;var C=x[y];if(!C)if(y>0&&A[y]===P[0])C=x[y-1];else return 1;for(var M=1;C;){var s=C.key,_=t(P,s[0],s[1]);if(s[0][0]<s[1][0])if(_<0)C=C.left;else if(_>0)M=-1,C=C.right;else return 0;else if(_>0)C=C.left;else if(_<0)M=1,C=C.right;else return 0}return M}}function w(x){return 1}function c(x){return function(P){return x(P[0],P[1])?0:1}}function a(x,A){return function(y){return x(y[0],y[1])?0:A(y)}}function p(x){for(var A=x.length,P=[],y=[],C=0;C<A;++C)for(var M=x[C],s=M.length,_=s-1,b=0;b<s;_=b++){var k=M[_],D=M[b];k[0]===D[0]?y.push([k,D]):P.push([k,D])}if(P.length===0)return y.length===0?w:c(m(y));var V=o(P),O=h(V.slabs,V.coordinates);return y.length===0?O:a(m(y),O)}},9346:function(v){var g=new Float64Array(4),r=new Float64Array(4),t=new Float64Array(4);function o(i,f,u,l,m){g.length<l.length&&(g=new Float64Array(l.length),r=new Float64Array(l.length),t=new Float64Array(l.length));for(var h=0;h<l.length;++h)g[h]=i[h]-l[h],r[h]=f[h]-i[h],t[h]=u[h]-i[h];for(var w=0,c=0,a=0,p=0,x=0,A=0,h=0;h<l.length;++h){var P=r[h],y=t[h],C=g[h];w+=P*P,c+=P*y,a+=y*y,p+=C*P,x+=C*y,A+=C*C}var M=Math.abs(w*a-c*c),s=c*x-a*p,_=c*p-w*x,b;if(s+_<=M)if(s<0)_<0&&p<0?(_=0,-p>=w?(s=1,b=w+2*p+A):(s=-p/w,b=p*s+A)):(s=0,x>=0?(_=0,b=A):-x>=a?(_=1,b=a+2*x+A):(_=-x/a,b=x*_+A));else if(_<0)_=0,p>=0?(s=0,b=A):-p>=w?(s=1,b=w+2*p+A):(s=-p/w,b=p*s+A);else{var k=1/M;s*=k,_*=k,b=s*(w*s+c*_+2*p)+_*(c*s+a*_+2*x)+A}else{var D,V,O,N;s<0?(D=c+p,V=a+x,V>D?(O=V-D,N=w-2*c+a,O>=N?(s=1,_=0,b=w+2*p+A):(s=O/N,_=1-s,b=s*(w*s+c*_+2*p)+_*(c*s+a*_+2*x)+A)):(s=0,V<=0?(_=1,b=a+2*x+A):x>=0?(_=0,b=A):(_=-x/a,b=x*_+A))):_<0?(D=c+x,V=w+p,V>D?(O=V-D,N=w-2*c+a,O>=N?(_=1,s=0,b=a+2*x+A):(_=O/N,s=1-_,b=s*(w*s+c*_+2*p)+_*(c*s+a*_+2*x)+A)):(_=0,V<=0?(s=1,b=w+2*p+A):p>=0?(s=0,b=A):(s=-p/w,b=p*s+A))):(O=a+x-c-p,O<=0?(s=0,_=1,b=a+2*x+A):(N=w-2*c+a,O>=N?(s=1,_=0,b=w+2*p+A):(s=O/N,_=1-s,b=s*(w*s+c*_+2*p)+_*(c*s+a*_+2*x)+A)))}for(var B=1-s-_,h=0;h<l.length;++h)m[h]=B*i[h]+s*f[h]+_*u[h];return b<0?0:b}v.exports=o},8648:function(v,g,r){v.exports=r(783)},2653:function(v,g,r){var t=r(3865);v.exports=o;function o(i,f){for(var u=i.length,l=new Array(u),m=0;m<u;++m)l[m]=t(i[m],f[m]);return l}},5838:function(v,g,r){v.exports=o;var t=r(7842);function o(i){for(var f=new Array(i.length),u=0;u<i.length;++u)f[u]=t(i[u]);return f}},8987:function(v,g,r){var t=r(7842),o=r(6504);v.exports=i;function i(f,u){for(var l=t(u),m=f.length,h=new Array(m),w=0;w<m;++w)h[w]=o(f[w],l);return h}},544:function(v,g,r){var t=r(5572);v.exports=o;function o(i,f){for(var u=i.length,l=new Array(u),m=0;m<u;++m)l[m]=t(i[m],f[m]);return l}},5771:function(v,g,r){var t=r(8507),o=r(3788),i=r(2419);v.exports=f;function f(u){u.sort(o);for(var l=u.length,m=0,h=0;h<l;++h){var w=u[h],c=i(w);if(c!==0){if(m>0){var a=u[m-1];if(t(w,a)===0&&i(a)!==c){m-=1;continue}}u[m++]=w}}return u.length=m,u}},3233:function(v){/*!
* repeat-string <https://github.com/jonschlinkert/repeat-string>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var g="",r;v.exports=t;function t(o,i){if(typeof o!="string")throw new TypeError("expected a string");if(i===1)return o;if(i===2)return o+o;var f=o.length*i;if(r!==o||typeof r>"u")r=o,g="";else if(g.length>=f)return g.substr(0,f);for(;f>g.length&&i>1;)i&1&&(g+=o),i>>=1,o+=o;return g+=o,g=g.substr(0,f),g}},3025:function(v,g,r){v.exports=r.g.performance&&r.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(v){v.exports=g;function g(r){for(var t=r.length,o=r[r.length-1],i=t,f=t-2;f>=0;--f){var u=o,l=r[f];o=u+l;var m=o-u,h=l-m;h&&(r[--i]=o,o=h)}for(var w=0,f=i;f<t;++f){var u=r[f],l=o;o=u+l;var m=o-u,h=l-m;h&&(r[w++]=h)}return r[w++]=o,r.length=w,r}},2962:function(v,g,r){var t=r(5250),o=r(8210),i=r(3012),f=r(7004),u=6;function l(A,P,y,C){return function(s){return C(A(y(s[0][0],s[1][1]),y(-s[0][1],s[1][0])))}}function m(A,P,y,C){return function(s){return C(A(P(A(y(s[1][1],s[2][2]),y(-s[1][2],s[2][1])),s[0][0]),A(P(A(y(s[1][0],s[2][2]),y(-s[1][2],s[2][0])),-s[0][1]),P(A(y(s[1][0],s[2][1]),y(-s[1][1],s[2][0])),s[0][2]))))}}function h(A,P,y,C){return function(s){return C(A(A(P(A(P(A(y(s[2][2],s[3][3]),y(-s[2][3],s[3][2])),s[1][1]),A(P(A(y(s[2][1],s[3][3]),y(-s[2][3],s[3][1])),-s[1][2]),P(A(y(s[2][1],s[3][2]),y(-s[2][2],s[3][1])),s[1][3]))),s[0][0]),P(A(P(A(y(s[2][2],s[3][3]),y(-s[2][3],s[3][2])),s[1][0]),A(P(A(y(s[2][0],s[3][3]),y(-s[2][3],s[3][0])),-s[1][2]),P(A(y(s[2][0],s[3][2]),y(-s[2][2],s[3][0])),s[1][3]))),-s[0][1])),A(P(A(P(A(y(s[2][1],s[3][3]),y(-s[2][3],s[3][1])),s[1][0]),A(P(A(y(s[2][0],s[3][3]),y(-s[2][3],s[3][0])),-s[1][1]),P(A(y(s[2][0],s[3][1]),y(-s[2][1],s[3][0])),s[1][3]))),s[0][2]),P(A(P(A(y(s[2][1],s[3][2]),y(-s[2][2],s[3][1])),s[1][0]),A(P(A(y(s[2][0],s[3][2]),y(-s[2][2],s[3][0])),-s[1][1]),P(A(y(s[2][0],s[3][1]),y(-s[2][1],s[3][0])),s[1][2]))),-s[0][3]))))}}function w(A,P,y,C){return function(s){return C(A(A(P(A(A(P(A(P(A(y(s[3][3],s[4][4]),y(-s[3][4],s[4][3])),s[2][2]),A(P(A(y(s[3][2],s[4][4]),y(-s[3][4],s[4][2])),-s[2][3]),P(A(y(s[3][2],s[4][3]),y(-s[3][3],s[4][2])),s[2][4]))),s[1][1]),P(A(P(A(y(s[3][3],s[4][4]),y(-s[3][4],s[4][3])),s[2][1]),A(P(A(y(s[3][1],s[4][4]),y(-s[3][4],s[4][1])),-s[2][3]),P(A(y(s[3][1],s[4][3]),y(-s[3][3],s[4][1])),s[2][4]))),-s[1][2])),A(P(A(P(A(y(s[3][2],s[4][4]),y(-s[3][4],s[4][2])),s[2][1]),A(P(A(y(s[3][1],s[4][4]),y(-s[3][4],s[4][1])),-s[2][2]),P(A(y(s[3][1],s[4][2]),y(-s[3][2],s[4][1])),s[2][4]))),s[1][3]),P(A(P(A(y(s[3][2],s[4][3]),y(-s[3][3],s[4][2])),s[2][1]),A(P(A(y(s[3][1],s[4][3]),y(-s[3][3],s[4][1])),-s[2][2]),P(A(y(s[3][1],s[4][2]),y(-s[3][2],s[4][1])),s[2][3]))),-s[1][4]))),s[0][0]),P(A(A(P(A(P(A(y(s[3][3],s[4][4]),y(-s[3][4],s[4][3])),s[2][2]),A(P(A(y(s[3][2],s[4][4]),y(-s[3][4],s[4][2])),-s[2][3]),P(A(y(s[3][2],s[4][3]),y(-s[3][3],s[4][2])),s[2][4]))),s[1][0]),P(A(P(A(y(s[3][3],s[4][4]),y(-s[3][4],s[4][3])),s[2][0]),A(P(A(y(s[3][0],s[4][4]),y(-s[3][4],s[4][0])),-s[2][3]),P(A(y(s[3][0],s[4][3]),y(-s[3][3],s[4][0])),s[2][4]))),-s[1][2])),A(P(A(P(A(y(s[3][2],s[4][4]),y(-s[3][4],s[4][2])),s[2][0]),A(P(A(y(s[3][0],s[4][4]),y(-s[3][4],s[4][0])),-s[2][2]),P(A(y(s[3][0],s[4][2]),y(-s[3][2],s[4][0])),s[2][4]))),s[1][3]),P(A(P(A(y(s[3][2],s[4][3]),y(-s[3][3],s[4][2])),s[2][0]),A(P(A(y(s[3][0],s[4][3]),y(-s[3][3],s[4][0])),-s[2][2]),P(A(y(s[3][0],s[4][2]),y(-s[3][2],s[4][0])),s[2][3]))),-s[1][4]))),-s[0][1])),A(P(A(A(P(A(P(A(y(s[3][3],s[4][4]),y(-s[3][4],s[4][3])),s[2][1]),A(P(A(y(s[3][1],s[4][4]),y(-s[3][4],s[4][1])),-s[2][3]),P(A(y(s[3][1],s[4][3]),y(-s[3][3],s[4][1])),s[2][4]))),s[1][0]),P(A(P(A(y(s[3][3],s[4][4]),y(-s[3][4],s[4][3])),s[2][0]),A(P(A(y(s[3][0],s[4][4]),y(-s[3][4],s[4][0])),-s[2][3]),P(A(y(s[3][0],s[4][3]),y(-s[3][3],s[4][0])),s[2][4]))),-s[1][1])),A(P(A(P(A(y(s[3][1],s[4][4]),y(-s[3][4],s[4][1])),s[2][0]),A(P(A(y(s[3][0],s[4][4]),y(-s[3][4],s[4][0])),-s[2][1]),P(A(y(s[3][0],s[4][1]),y(-s[3][1],s[4][0])),s[2][4]))),s[1][3]),P(A(P(A(y(s[3][1],s[4][3]),y(-s[3][3],s[4][1])),s[2][0]),A(P(A(y(s[3][0],s[4][3]),y(-s[3][3],s[4][0])),-s[2][1]),P(A(y(s[3][0],s[4][1]),y(-s[3][1],s[4][0])),s[2][3]))),-s[1][4]))),s[0][2]),A(P(A(A(P(A(P(A(y(s[3][2],s[4][4]),y(-s[3][4],s[4][2])),s[2][1]),A(P(A(y(s[3][1],s[4][4]),y(-s[3][4],s[4][1])),-s[2][2]),P(A(y(s[3][1],s[4][2]),y(-s[3][2],s[4][1])),s[2][4]))),s[1][0]),P(A(P(A(y(s[3][2],s[4][4]),y(-s[3][4],s[4][2])),s[2][0]),A(P(A(y(s[3][0],s[4][4]),y(-s[3][4],s[4][0])),-s[2][2]),P(A(y(s[3][0],s[4][2]),y(-s[3][2],s[4][0])),s[2][4]))),-s[1][1])),A(P(A(P(A(y(s[3][1],s[4][4]),y(-s[3][4],s[4][1])),s[2][0]),A(P(A(y(s[3][0],s[4][4]),y(-s[3][4],s[4][0])),-s[2][1]),P(A(y(s[3][0],s[4][1]),y(-s[3][1],s[4][0])),s[2][4]))),s[1][2]),P(A(P(A(y(s[3][1],s[4][2]),y(-s[3][2],s[4][1])),s[2][0]),A(P(A(y(s[3][0],s[4][2]),y(-s[3][2],s[4][0])),-s[2][1]),P(A(y(s[3][0],s[4][1]),y(-s[3][1],s[4][0])),s[2][2]))),-s[1][4]))),-s[0][3]),P(A(A(P(A(P(A(y(s[3][2],s[4][3]),y(-s[3][3],s[4][2])),s[2][1]),A(P(A(y(s[3][1],s[4][3]),y(-s[3][3],s[4][1])),-s[2][2]),P(A(y(s[3][1],s[4][2]),y(-s[3][2],s[4][1])),s[2][3]))),s[1][0]),P(A(P(A(y(s[3][2],s[4][3]),y(-s[3][3],s[4][2])),s[2][0]),A(P(A(y(s[3][0],s[4][3]),y(-s[3][3],s[4][0])),-s[2][2]),P(A(y(s[3][0],s[4][2]),y(-s[3][2],s[4][0])),s[2][3]))),-s[1][1])),A(P(A(P(A(y(s[3][1],s[4][3]),y(-s[3][3],s[4][1])),s[2][0]),A(P(A(y(s[3][0],s[4][3]),y(-s[3][3],s[4][0])),-s[2][1]),P(A(y(s[3][0],s[4][1]),y(-s[3][1],s[4][0])),s[2][3]))),s[1][2]),P(A(P(A(y(s[3][1],s[4][2]),y(-s[3][2],s[4][1])),s[2][0]),A(P(A(y(s[3][0],s[4][2]),y(-s[3][2],s[4][0])),-s[2][1]),P(A(y(s[3][0],s[4][1]),y(-s[3][1],s[4][0])),s[2][2]))),-s[1][3]))),s[0][4])))))}}function c(A){var P=A===2?l:A===3?m:A===4?h:A===5?w:void 0;return P(o,i,t,f)}var a=[function(){return[0]},function(P){return[P[0][0]]}];function p(A,P,y,C,M,s,_,b){return function(D){switch(D.length){case 0:return A(D);case 1:return P(D);case 2:return y(D);case 3:return C(D);case 4:return M(D);case 5:return s(D)}var V=_[D.length];return V||(V=_[D.length]=b(D.length)),V(D)}}function x(){for(;a.length<u;)a.push(c(a.length));v.exports=p.apply(void 0,a.concat([a,c]));for(var A=0;A<a.length;++A)v.exports[A]=a[A]}x()},1944:function(v,g,r){var t=r(5250),o=r(8210);v.exports=i;function i(f,u){for(var l=t(f[0],u[0]),m=1;m<f.length;++m)l=o(l,t(f[m],u[m]));return l}},2646:function(v,g,r){var t=r(5250),o=r(8210),i=r(8545),f=r(3012),u=6;function l(M){var s=M===3?c:M===4?a:M===5?p:x;return s(o,i,t,f)}function m(){return 0}function h(){return 0}function w(){return 0}function c(M,s,_,b){function k(D,V,O){var N=_(D[0],D[0]),B=b(N,V[0]),z=b(N,O[0]),H=_(V[0],V[0]),X=b(H,D[0]),$=b(H,O[0]),ne=_(O[0],O[0]),q=b(ne,D[0]),ue=b(ne,V[0]),te=M(s(ue,$),s(X,B)),J=s(q,z),ie=s(te,J);return ie[ie.length-1]}return k}function a(M,s,_,b){function k(D,V,O,N){var B=M(_(D[0],D[0]),_(D[1],D[1])),z=b(B,V[0]),H=b(B,O[0]),X=b(B,N[0]),$=M(_(V[0],V[0]),_(V[1],V[1])),ne=b($,D[0]),q=b($,O[0]),ue=b($,N[0]),te=M(_(O[0],O[0]),_(O[1],O[1])),J=b(te,D[0]),ie=b(te,V[0]),K=b(te,N[0]),ee=M(_(N[0],N[0]),_(N[1],N[1])),le=b(ee,D[0]),j=b(ee,V[0]),Z=b(ee,O[0]),fe=M(M(b(s(Z,K),V[1]),M(b(s(j,ue),-O[1]),b(s(ie,q),N[1]))),M(b(s(j,ue),D[1]),M(b(s(le,X),-V[1]),b(s(ne,z),N[1])))),re=M(M(b(s(Z,K),D[1]),M(b(s(le,X),-O[1]),b(s(J,H),N[1]))),M(b(s(ie,q),D[1]),M(b(s(J,H),-V[1]),b(s(ne,z),O[1])))),ce=s(fe,re);return ce[ce.length-1]}return k}function p(M,s,_,b){function k(D,V,O,N,B){var z=M(_(D[0],D[0]),M(_(D[1],D[1]),_(D[2],D[2]))),H=b(z,V[0]),X=b(z,O[0]),$=b(z,N[0]),ne=b(z,B[0]),q=M(_(V[0],V[0]),M(_(V[1],V[1]),_(V[2],V[2]))),ue=b(q,D[0]),te=b(q,O[0]),J=b(q,N[0]),ie=b(q,B[0]),K=M(_(O[0],O[0]),M(_(O[1],O[1]),_(O[2],O[2]))),ee=b(K,D[0]),le=b(K,V[0]),j=b(K,N[0]),Z=b(K,B[0]),fe=M(_(N[0],N[0]),M(_(N[1],N[1]),_(N[2],N[2]))),re=b(fe,D[0]),ce=b(fe,V[0]),xe=b(fe,O[0]),Te=b(fe,B[0]),we=M(_(B[0],B[0]),M(_(B[1],B[1]),_(B[2],B[2]))),_e=b(we,D[0]),ke=b(we,V[0]),Ne=b(we,O[0]),Ee=b(we,N[0]),ze=M(M(M(b(M(b(s(Ee,Te),O[1]),M(b(s(Ne,Z),-N[1]),b(s(xe,j),B[1]))),V[2]),M(b(M(b(s(Ee,Te),V[1]),M(b(s(ke,ie),-N[1]),b(s(ce,J),B[1]))),-O[2]),b(M(b(s(Ne,Z),V[1]),M(b(s(ke,ie),-O[1]),b(s(le,te),B[1]))),N[2]))),M(b(M(b(s(xe,j),V[1]),M(b(s(ce,J),-O[1]),b(s(le,te),N[1]))),-B[2]),M(b(M(b(s(Ee,Te),V[1]),M(b(s(ke,ie),-N[1]),b(s(ce,J),B[1]))),D[2]),b(M(b(s(Ee,Te),D[1]),M(b(s(_e,ne),-N[1]),b(s(re,$),B[1]))),-V[2])))),M(M(b(M(b(s(ke,ie),D[1]),M(b(s(_e,ne),-V[1]),b(s(ue,H),B[1]))),N[2]),M(b(M(b(s(ce,J),D[1]),M(b(s(re,$),-V[1]),b(s(ue,H),N[1]))),-B[2]),b(M(b(s(xe,j),V[1]),M(b(s(ce,J),-O[1]),b(s(le,te),N[1]))),D[2]))),M(b(M(b(s(xe,j),D[1]),M(b(s(re,$),-O[1]),b(s(ee,X),N[1]))),-V[2]),M(b(M(b(s(ce,J),D[1]),M(b(s(re,$),-V[1]),b(s(ue,H),N[1]))),O[2]),b(M(b(s(le,te),D[1]),M(b(s(ee,X),-V[1]),b(s(ue,H),O[1]))),-N[2]))))),Ce=M(M(M(b(M(b(s(Ee,Te),O[1]),M(b(s(Ne,Z),-N[1]),b(s(xe,j),B[1]))),D[2]),b(M(b(s(Ee,Te),D[1]),M(b(s(_e,ne),-N[1]),b(s(re,$),B[1]))),-O[2])),M(b(M(b(s(Ne,Z),D[1]),M(b(s(_e,ne),-O[1]),b(s(ee,X),B[1]))),N[2]),b(M(b(s(xe,j),D[1]),M(b(s(re,$),-O[1]),b(s(ee,X),N[1]))),-B[2]))),M(M(b(M(b(s(Ne,Z),V[1]),M(b(s(ke,ie),-O[1]),b(s(le,te),B[1]))),D[2]),b(M(b(s(Ne,Z),D[1]),M(b(s(_e,ne),-O[1]),b(s(ee,X),B[1]))),-V[2])),M(b(M(b(s(ke,ie),D[1]),M(b(s(_e,ne),-V[1]),b(s(ue,H),B[1]))),O[2]),b(M(b(s(le,te),D[1]),M(b(s(ee,X),-V[1]),b(s(ue,H),O[1]))),-B[2])))),Oe=s(ze,Ce);return Oe[Oe.length-1]}return k}function x(M,s,_,b){function k(D,V,O,N,B,z){var H=M(M(_(D[0],D[0]),_(D[1],D[1])),M(_(D[2],D[2]),_(D[3],D[3]))),X=b(H,V[0]),$=b(H,O[0]),ne=b(H,N[0]),q=b(H,B[0]),ue=b(H,z[0]),te=M(M(_(V[0],V[0]),_(V[1],V[1])),M(_(V[2],V[2]),_(V[3],V[3]))),J=b(te,D[0]),ie=b(te,O[0]),K=b(te,N[0]),ee=b(te,B[0]),le=b(te,z[0]),j=M(M(_(O[0],O[0]),_(O[1],O[1])),M(_(O[2],O[2]),_(O[3],O[3]))),Z=b(j,D[0]),fe=b(j,V[0]),re=b(j,N[0]),ce=b(j,B[0]),xe=b(j,z[0]),Te=M(M(_(N[0],N[0]),_(N[1],N[1])),M(_(N[2],N[2]),_(N[3],N[3]))),we=b(Te,D[0]),_e=b(Te,V[0]),ke=b(Te,O[0]),Ne=b(Te,B[0]),Ee=b(Te,z[0]),ze=M(M(_(B[0],B[0]),_(B[1],B[1])),M(_(B[2],B[2]),_(B[3],B[3]))),Ce=b(ze,D[0]),Oe=b(ze,V[0]),Le=b(ze,O[0]),Ge=b(ze,N[0]),rt=b(ze,z[0]),ot=M(M(_(z[0],z[0]),_(z[1],z[1])),M(_(z[2],z[2]),_(z[3],z[3]))),$e=b(ot,D[0]),qe=b(ot,V[0]),ht=b(ot,O[0]),vt=b(ot,N[0]),pt=b(ot,B[0]),wt=M(M(M(b(M(M(b(M(b(s(pt,rt),N[1]),M(b(s(vt,Ee),-B[1]),b(s(Ge,Ne),z[1]))),O[2]),b(M(b(s(pt,rt),O[1]),M(b(s(ht,xe),-B[1]),b(s(Le,ce),z[1]))),-N[2])),M(b(M(b(s(vt,Ee),O[1]),M(b(s(ht,xe),-N[1]),b(s(ke,re),z[1]))),B[2]),b(M(b(s(Ge,Ne),O[1]),M(b(s(Le,ce),-N[1]),b(s(ke,re),B[1]))),-z[2]))),V[3]),M(b(M(M(b(M(b(s(pt,rt),N[1]),M(b(s(vt,Ee),-B[1]),b(s(Ge,Ne),z[1]))),V[2]),b(M(b(s(pt,rt),V[1]),M(b(s(qe,le),-B[1]),b(s(Oe,ee),z[1]))),-N[2])),M(b(M(b(s(vt,Ee),V[1]),M(b(s(qe,le),-N[1]),b(s(_e,K),z[1]))),B[2]),b(M(b(s(Ge,Ne),V[1]),M(b(s(Oe,ee),-N[1]),b(s(_e,K),B[1]))),-z[2]))),-O[3]),b(M(M(b(M(b(s(pt,rt),O[1]),M(b(s(ht,xe),-B[1]),b(s(Le,ce),z[1]))),V[2]),b(M(b(s(pt,rt),V[1]),M(b(s(qe,le),-B[1]),b(s(Oe,ee),z[1]))),-O[2])),M(b(M(b(s(ht,xe),V[1]),M(b(s(qe,le),-O[1]),b(s(fe,ie),z[1]))),B[2]),b(M(b(s(Le,ce),V[1]),M(b(s(Oe,ee),-O[1]),b(s(fe,ie),B[1]))),-z[2]))),N[3]))),M(M(b(M(M(b(M(b(s(vt,Ee),O[1]),M(b(s(ht,xe),-N[1]),b(s(ke,re),z[1]))),V[2]),b(M(b(s(vt,Ee),V[1]),M(b(s(qe,le),-N[1]),b(s(_e,K),z[1]))),-O[2])),M(b(M(b(s(ht,xe),V[1]),M(b(s(qe,le),-O[1]),b(s(fe,ie),z[1]))),N[2]),b(M(b(s(ke,re),V[1]),M(b(s(_e,K),-O[1]),b(s(fe,ie),N[1]))),-z[2]))),-B[3]),b(M(M(b(M(b(s(Ge,Ne),O[1]),M(b(s(Le,ce),-N[1]),b(s(ke,re),B[1]))),V[2]),b(M(b(s(Ge,Ne),V[1]),M(b(s(Oe,ee),-N[1]),b(s(_e,K),B[1]))),-O[2])),M(b(M(b(s(Le,ce),V[1]),M(b(s(Oe,ee),-O[1]),b(s(fe,ie),B[1]))),N[2]),b(M(b(s(ke,re),V[1]),M(b(s(_e,K),-O[1]),b(s(fe,ie),N[1]))),-B[2]))),z[3])),M(b(M(M(b(M(b(s(pt,rt),N[1]),M(b(s(vt,Ee),-B[1]),b(s(Ge,Ne),z[1]))),V[2]),b(M(b(s(pt,rt),V[1]),M(b(s(qe,le),-B[1]),b(s(Oe,ee),z[1]))),-N[2])),M(b(M(b(s(vt,Ee),V[1]),M(b(s(qe,le),-N[1]),b(s(_e,K),z[1]))),B[2]),b(M(b(s(Ge,Ne),V[1]),M(b(s(Oe,ee),-N[1]),b(s(_e,K),B[1]))),-z[2]))),D[3]),b(M(M(b(M(b(s(pt,rt),N[1]),M(b(s(vt,Ee),-B[1]),b(s(Ge,Ne),z[1]))),D[2]),b(M(b(s(pt,rt),D[1]),M(b(s($e,ue),-B[1]),b(s(Ce,q),z[1]))),-N[2])),M(b(M(b(s(vt,Ee),D[1]),M(b(s($e,ue),-N[1]),b(s(we,ne),z[1]))),B[2]),b(M(b(s(Ge,Ne),D[1]),M(b(s(Ce,q),-N[1]),b(s(we,ne),B[1]))),-z[2]))),-V[3])))),M(M(M(b(M(M(b(M(b(s(pt,rt),V[1]),M(b(s(qe,le),-B[1]),b(s(Oe,ee),z[1]))),D[2]),b(M(b(s(pt,rt),D[1]),M(b(s($e,ue),-B[1]),b(s(Ce,q),z[1]))),-V[2])),M(b(M(b(s(qe,le),D[1]),M(b(s($e,ue),-V[1]),b(s(J,X),z[1]))),B[2]),b(M(b(s(Oe,ee),D[1]),M(b(s(Ce,q),-V[1]),b(s(J,X),B[1]))),-z[2]))),N[3]),b(M(M(b(M(b(s(vt,Ee),V[1]),M(b(s(qe,le),-N[1]),b(s(_e,K),z[1]))),D[2]),b(M(b(s(vt,Ee),D[1]),M(b(s($e,ue),-N[1]),b(s(we,ne),z[1]))),-V[2])),M(b(M(b(s(qe,le),D[1]),M(b(s($e,ue),-V[1]),b(s(J,X),z[1]))),N[2]),b(M(b(s(_e,K),D[1]),M(b(s(we,ne),-V[1]),b(s(J,X),N[1]))),-z[2]))),-B[3])),M(b(M(M(b(M(b(s(Ge,Ne),V[1]),M(b(s(Oe,ee),-N[1]),b(s(_e,K),B[1]))),D[2]),b(M(b(s(Ge,Ne),D[1]),M(b(s(Ce,q),-N[1]),b(s(we,ne),B[1]))),-V[2])),M(b(M(b(s(Oe,ee),D[1]),M(b(s(Ce,q),-V[1]),b(s(J,X),B[1]))),N[2]),b(M(b(s(_e,K),D[1]),M(b(s(we,ne),-V[1]),b(s(J,X),N[1]))),-B[2]))),z[3]),b(M(M(b(M(b(s(vt,Ee),O[1]),M(b(s(ht,xe),-N[1]),b(s(ke,re),z[1]))),V[2]),b(M(b(s(vt,Ee),V[1]),M(b(s(qe,le),-N[1]),b(s(_e,K),z[1]))),-O[2])),M(b(M(b(s(ht,xe),V[1]),M(b(s(qe,le),-O[1]),b(s(fe,ie),z[1]))),N[2]),b(M(b(s(ke,re),V[1]),M(b(s(_e,K),-O[1]),b(s(fe,ie),N[1]))),-z[2]))),D[3]))),M(M(b(M(M(b(M(b(s(vt,Ee),O[1]),M(b(s(ht,xe),-N[1]),b(s(ke,re),z[1]))),D[2]),b(M(b(s(vt,Ee),D[1]),M(b(s($e,ue),-N[1]),b(s(we,ne),z[1]))),-O[2])),M(b(M(b(s(ht,xe),D[1]),M(b(s($e,ue),-O[1]),b(s(Z,$),z[1]))),N[2]),b(M(b(s(ke,re),D[1]),M(b(s(we,ne),-O[1]),b(s(Z,$),N[1]))),-z[2]))),-V[3]),b(M(M(b(M(b(s(vt,Ee),V[1]),M(b(s(qe,le),-N[1]),b(s(_e,K),z[1]))),D[2]),b(M(b(s(vt,Ee),D[1]),M(b(s($e,ue),-N[1]),b(s(we,ne),z[1]))),-V[2])),M(b(M(b(s(qe,le),D[1]),M(b(s($e,ue),-V[1]),b(s(J,X),z[1]))),N[2]),b(M(b(s(_e,K),D[1]),M(b(s(we,ne),-V[1]),b(s(J,X),N[1]))),-z[2]))),O[3])),M(b(M(M(b(M(b(s(ht,xe),V[1]),M(b(s(qe,le),-O[1]),b(s(fe,ie),z[1]))),D[2]),b(M(b(s(ht,xe),D[1]),M(b(s($e,ue),-O[1]),b(s(Z,$),z[1]))),-V[2])),M(b(M(b(s(qe,le),D[1]),M(b(s($e,ue),-V[1]),b(s(J,X),z[1]))),O[2]),b(M(b(s(fe,ie),D[1]),M(b(s(Z,$),-V[1]),b(s(J,X),O[1]))),-z[2]))),-N[3]),b(M(M(b(M(b(s(ke,re),V[1]),M(b(s(_e,K),-O[1]),b(s(fe,ie),N[1]))),D[2]),b(M(b(s(ke,re),D[1]),M(b(s(we,ne),-O[1]),b(s(Z,$),N[1]))),-V[2])),M(b(M(b(s(_e,K),D[1]),M(b(s(we,ne),-V[1]),b(s(J,X),N[1]))),O[2]),b(M(b(s(fe,ie),D[1]),M(b(s(Z,$),-V[1]),b(s(J,X),O[1]))),-N[2]))),z[3]))))),Et=M(M(M(b(M(M(b(M(b(s(pt,rt),N[1]),M(b(s(vt,Ee),-B[1]),b(s(Ge,Ne),z[1]))),O[2]),b(M(b(s(pt,rt),O[1]),M(b(s(ht,xe),-B[1]),b(s(Le,ce),z[1]))),-N[2])),M(b(M(b(s(vt,Ee),O[1]),M(b(s(ht,xe),-N[1]),b(s(ke,re),z[1]))),B[2]),b(M(b(s(Ge,Ne),O[1]),M(b(s(Le,ce),-N[1]),b(s(ke,re),B[1]))),-z[2]))),D[3]),M(b(M(M(b(M(b(s(pt,rt),N[1]),M(b(s(vt,Ee),-B[1]),b(s(Ge,Ne),z[1]))),D[2]),b(M(b(s(pt,rt),D[1]),M(b(s($e,ue),-B[1]),b(s(Ce,q),z[1]))),-N[2])),M(b(M(b(s(vt,Ee),D[1]),M(b(s($e,ue),-N[1]),b(s(we,ne),z[1]))),B[2]),b(M(b(s(Ge,Ne),D[1]),M(b(s(Ce,q),-N[1]),b(s(we,ne),B[1]))),-z[2]))),-O[3]),b(M(M(b(M(b(s(pt,rt),O[1]),M(b(s(ht,xe),-B[1]),b(s(Le,ce),z[1]))),D[2]),b(M(b(s(pt,rt),D[1]),M(b(s($e,ue),-B[1]),b(s(Ce,q),z[1]))),-O[2])),M(b(M(b(s(ht,xe),D[1]),M(b(s($e,ue),-O[1]),b(s(Z,$),z[1]))),B[2]),b(M(b(s(Le,ce),D[1]),M(b(s(Ce,q),-O[1]),b(s(Z,$),B[1]))),-z[2]))),N[3]))),M(M(b(M(M(b(M(b(s(vt,Ee),O[1]),M(b(s(ht,xe),-N[1]),b(s(ke,re),z[1]))),D[2]),b(M(b(s(vt,Ee),D[1]),M(b(s($e,ue),-N[1]),b(s(we,ne),z[1]))),-O[2])),M(b(M(b(s(ht,xe),D[1]),M(b(s($e,ue),-O[1]),b(s(Z,$),z[1]))),N[2]),b(M(b(s(ke,re),D[1]),M(b(s(we,ne),-O[1]),b(s(Z,$),N[1]))),-z[2]))),-B[3]),b(M(M(b(M(b(s(Ge,Ne),O[1]),M(b(s(Le,ce),-N[1]),b(s(ke,re),B[1]))),D[2]),b(M(b(s(Ge,Ne),D[1]),M(b(s(Ce,q),-N[1]),b(s(we,ne),B[1]))),-O[2])),M(b(M(b(s(Le,ce),D[1]),M(b(s(Ce,q),-O[1]),b(s(Z,$),B[1]))),N[2]),b(M(b(s(ke,re),D[1]),M(b(s(we,ne),-O[1]),b(s(Z,$),N[1]))),-B[2]))),z[3])),M(b(M(M(b(M(b(s(pt,rt),O[1]),M(b(s(ht,xe),-B[1]),b(s(Le,ce),z[1]))),V[2]),b(M(b(s(pt,rt),V[1]),M(b(s(qe,le),-B[1]),b(s(Oe,ee),z[1]))),-O[2])),M(b(M(b(s(ht,xe),V[1]),M(b(s(qe,le),-O[1]),b(s(fe,ie),z[1]))),B[2]),b(M(b(s(Le,ce),V[1]),M(b(s(Oe,ee),-O[1]),b(s(fe,ie),B[1]))),-z[2]))),D[3]),b(M(M(b(M(b(s(pt,rt),O[1]),M(b(s(ht,xe),-B[1]),b(s(Le,ce),z[1]))),D[2]),b(M(b(s(pt,rt),D[1]),M(b(s($e,ue),-B[1]),b(s(Ce,q),z[1]))),-O[2])),M(b(M(b(s(ht,xe),D[1]),M(b(s($e,ue),-O[1]),b(s(Z,$),z[1]))),B[2]),b(M(b(s(Le,ce),D[1]),M(b(s(Ce,q),-O[1]),b(s(Z,$),B[1]))),-z[2]))),-V[3])))),M(M(M(b(M(M(b(M(b(s(pt,rt),V[1]),M(b(s(qe,le),-B[1]),b(s(Oe,ee),z[1]))),D[2]),b(M(b(s(pt,rt),D[1]),M(b(s($e,ue),-B[1]),b(s(Ce,q),z[1]))),-V[2])),M(b(M(b(s(qe,le),D[1]),M(b(s($e,ue),-V[1]),b(s(J,X),z[1]))),B[2]),b(M(b(s(Oe,ee),D[1]),M(b(s(Ce,q),-V[1]),b(s(J,X),B[1]))),-z[2]))),O[3]),b(M(M(b(M(b(s(ht,xe),V[1]),M(b(s(qe,le),-O[1]),b(s(fe,ie),z[1]))),D[2]),b(M(b(s(ht,xe),D[1]),M(b(s($e,ue),-O[1]),b(s(Z,$),z[1]))),-V[2])),M(b(M(b(s(qe,le),D[1]),M(b(s($e,ue),-V[1]),b(s(J,X),z[1]))),O[2]),b(M(b(s(fe,ie),D[1]),M(b(s(Z,$),-V[1]),b(s(J,X),O[1]))),-z[2]))),-B[3])),M(b(M(M(b(M(b(s(Le,ce),V[1]),M(b(s(Oe,ee),-O[1]),b(s(fe,ie),B[1]))),D[2]),b(M(b(s(Le,ce),D[1]),M(b(s(Ce,q),-O[1]),b(s(Z,$),B[1]))),-V[2])),M(b(M(b(s(Oe,ee),D[1]),M(b(s(Ce,q),-V[1]),b(s(J,X),B[1]))),O[2]),b(M(b(s(fe,ie),D[1]),M(b(s(Z,$),-V[1]),b(s(J,X),O[1]))),-B[2]))),z[3]),b(M(M(b(M(b(s(Ge,Ne),O[1]),M(b(s(Le,ce),-N[1]),b(s(ke,re),B[1]))),V[2]),b(M(b(s(Ge,Ne),V[1]),M(b(s(Oe,ee),-N[1]),b(s(_e,K),B[1]))),-O[2])),M(b(M(b(s(Le,ce),V[1]),M(b(s(Oe,ee),-O[1]),b(s(fe,ie),B[1]))),N[2]),b(M(b(s(ke,re),V[1]),M(b(s(_e,K),-O[1]),b(s(fe,ie),N[1]))),-B[2]))),D[3]))),M(M(b(M(M(b(M(b(s(Ge,Ne),O[1]),M(b(s(Le,ce),-N[1]),b(s(ke,re),B[1]))),D[2]),b(M(b(s(Ge,Ne),D[1]),M(b(s(Ce,q),-N[1]),b(s(we,ne),B[1]))),-O[2])),M(b(M(b(s(Le,ce),D[1]),M(b(s(Ce,q),-O[1]),b(s(Z,$),B[1]))),N[2]),b(M(b(s(ke,re),D[1]),M(b(s(we,ne),-O[1]),b(s(Z,$),N[1]))),-B[2]))),-V[3]),b(M(M(b(M(b(s(Ge,Ne),V[1]),M(b(s(Oe,ee),-N[1]),b(s(_e,K),B[1]))),D[2]),b(M(b(s(Ge,Ne),D[1]),M(b(s(Ce,q),-N[1]),b(s(we,ne),B[1]))),-V[2])),M(b(M(b(s(Oe,ee),D[1]),M(b(s(Ce,q),-V[1]),b(s(J,X),B[1]))),N[2]),b(M(b(s(_e,K),D[1]),M(b(s(we,ne),-V[1]),b(s(J,X),N[1]))),-B[2]))),O[3])),M(b(M(M(b(M(b(s(Le,ce),V[1]),M(b(s(Oe,ee),-O[1]),b(s(fe,ie),B[1]))),D[2]),b(M(b(s(Le,ce),D[1]),M(b(s(Ce,q),-O[1]),b(s(Z,$),B[1]))),-V[2])),M(b(M(b(s(Oe,ee),D[1]),M(b(s(Ce,q),-V[1]),b(s(J,X),B[1]))),O[2]),b(M(b(s(fe,ie),D[1]),M(b(s(Z,$),-V[1]),b(s(J,X),O[1]))),-B[2]))),-N[3]),b(M(M(b(M(b(s(ke,re),V[1]),M(b(s(_e,K),-O[1]),b(s(fe,ie),N[1]))),D[2]),b(M(b(s(ke,re),D[1]),M(b(s(we,ne),-O[1]),b(s(Z,$),N[1]))),-V[2])),M(b(M(b(s(_e,K),D[1]),M(b(s(we,ne),-V[1]),b(s(J,X),N[1]))),O[2]),b(M(b(s(fe,ie),D[1]),M(b(s(Z,$),-V[1]),b(s(J,X),O[1]))),-N[2]))),B[3]))))),nt=s(wt,Et);return nt[nt.length-1]}return k}var A=[m,h,w];function P(M){var s=A[M.length];return s||(s=A[M.length]=l(M.length)),s.apply(void 0,M)}function y(M,s,_,b,k,D,V,O){function N(B,z,H,X,$,ne){switch(arguments.length){case 0:case 1:return 0;case 2:return b(B,z);case 3:return k(B,z,H);case 4:return D(B,z,H,X);case 5:return V(B,z,H,X,$);case 6:return O(B,z,H,X,$,ne)}for(var q=new Array(arguments.length),ue=0;ue<arguments.length;++ue)q[ue]=arguments[ue];return M(q)}return N}function C(){for(;A.length<=u;)A.push(l(A.length));v.exports=y.apply(void 0,[P].concat(A));for(var M=0;M<=u;++M)v.exports[M]=A[M]}C()},727:function(v,g,r){var t=r(2962),o=6;function i(A){var P=A===2?l:A===3?m:A===4?h:A===5?w:c;return A<6?P(t[A]):P(t)}function f(){return[[0]]}function u(A,P){return[[P[0]],[A[0][0]]]}function l(A){return function(y,C){return[A([[+C[0],+y[0][1]],[+C[1],+y[1][1]]]),A([[+y[0][0],+C[0]],[+y[1][0],+C[1]]]),A(y)]}}function m(A){return function(y,C){return[A([[+C[0],+y[0][1],+y[0][2]],[+C[1],+y[1][1],+y[1][2]],[+C[2],+y[2][1],+y[2][2]]]),A([[+y[0][0],+C[0],+y[0][2]],[+y[1][0],+C[1],+y[1][2]],[+y[2][0],+C[2],+y[2][2]]]),A([[+y[0][0],+y[0][1],+C[0]],[+y[1][0],+y[1][1],+C[1]],[+y[2][0],+y[2][1],+C[2]]]),A(y)]}}function h(A){return function(y,C){return[A([[+C[0],+y[0][1],+y[0][2],+y[0][3]],[+C[1],+y[1][1],+y[1][2],+y[1][3]],[+C[2],+y[2][1],+y[2][2],+y[2][3]],[+C[3],+y[3][1],+y[3][2],+y[3][3]]]),A([[+y[0][0],+C[0],+y[0][2],+y[0][3]],[+y[1][0],+C[1],+y[1][2],+y[1][3]],[+y[2][0],+C[2],+y[2][2],+y[2][3]],[+y[3][0],+C[3],+y[3][2],+y[3][3]]]),A([[+y[0][0],+y[0][1],+C[0],+y[0][3]],[+y[1][0],+y[1][1],+C[1],+y[1][3]],[+y[2][0],+y[2][1],+C[2],+y[2][3]],[+y[3][0],+y[3][1],+C[3],+y[3][3]]]),A([[+y[0][0],+y[0][1],+y[0][2],+C[0]],[+y[1][0],+y[1][1],+y[1][2],+C[1]],[+y[2][0],+y[2][1],+y[2][2],+C[2]],[+y[3][0],+y[3][1],+y[3][2],+C[3]]]),A(y)]}}function w(A){return function(y,C){return[A([[+C[0],+y[0][1],+y[0][2],+y[0][3],+y[0][4]],[+C[1],+y[1][1],+y[1][2],+y[1][3],+y[1][4]],[+C[2],+y[2][1],+y[2][2],+y[2][3],+y[2][4]],[+C[3],+y[3][1],+y[3][2],+y[3][3],+y[3][4]],[+C[4],+y[4][1],+y[4][2],+y[4][3],+y[4][4]]]),A([[+y[0][0],+C[0],+y[0][2],+y[0][3],+y[0][4]],[+y[1][0],+C[1],+y[1][2],+y[1][3],+y[1][4]],[+y[2][0],+C[2],+y[2][2],+y[2][3],+y[2][4]],[+y[3][0],+C[3],+y[3][2],+y[3][3],+y[3][4]],[+y[4][0],+C[4],+y[4][2],+y[4][3],+y[4][4]]]),A([[+y[0][0],+y[0][1],+C[0],+y[0][3],+y[0][4]],[+y[1][0],+y[1][1],+C[1],+y[1][3],+y[1][4]],[+y[2][0],+y[2][1],+C[2],+y[2][3],+y[2][4]],[+y[3][0],+y[3][1],+C[3],+y[3][3],+y[3][4]],[+y[4][0],+y[4][1],+C[4],+y[4][3],+y[4][4]]]),A([[+y[0][0],+y[0][1],+y[0][2],+C[0],+y[0][4]],[+y[1][0],+y[1][1],+y[1][2],+C[1],+y[1][4]],[+y[2][0],+y[2][1],+y[2][2],+C[2],+y[2][4]],[+y[3][0],+y[3][1],+y[3][2],+C[3],+y[3][4]],[+y[4][0],+y[4][1],+y[4][2],+C[4],+y[4][4]]]),A([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+C[0]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+C[1]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+C[2]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+C[3]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+C[4]]]),A(y)]}}function c(A){return function(y,C){return[A([[+C[0],+y[0][1],+y[0][2],+y[0][3],+y[0][4],+y[0][5]],[+C[1],+y[1][1],+y[1][2],+y[1][3],+y[1][4],+y[1][5]],[+C[2],+y[2][1],+y[2][2],+y[2][3],+y[2][4],+y[2][5]],[+C[3],+y[3][1],+y[3][2],+y[3][3],+y[3][4],+y[3][5]],[+C[4],+y[4][1],+y[4][2],+y[4][3],+y[4][4],+y[4][5]],[+C[5],+y[5][1],+y[5][2],+y[5][3],+y[5][4],+y[5][5]]]),A([[+y[0][0],+C[0],+y[0][2],+y[0][3],+y[0][4],+y[0][5]],[+y[1][0],+C[1],+y[1][2],+y[1][3],+y[1][4],+y[1][5]],[+y[2][0],+C[2],+y[2][2],+y[2][3],+y[2][4],+y[2][5]],[+y[3][0],+C[3],+y[3][2],+y[3][3],+y[3][4],+y[3][5]],[+y[4][0],+C[4],+y[4][2],+y[4][3],+y[4][4],+y[4][5]],[+y[5][0],+C[5],+y[5][2],+y[5][3],+y[5][4],+y[5][5]]]),A([[+y[0][0],+y[0][1],+C[0],+y[0][3],+y[0][4],+y[0][5]],[+y[1][0],+y[1][1],+C[1],+y[1][3],+y[1][4],+y[1][5]],[+y[2][0],+y[2][1],+C[2],+y[2][3],+y[2][4],+y[2][5]],[+y[3][0],+y[3][1],+C[3],+y[3][3],+y[3][4],+y[3][5]],[+y[4][0],+y[4][1],+C[4],+y[4][3],+y[4][4],+y[4][5]],[+y[5][0],+y[5][1],+C[5],+y[5][3],+y[5][4],+y[5][5]]]),A([[+y[0][0],+y[0][1],+y[0][2],+C[0],+y[0][4],+y[0][5]],[+y[1][0],+y[1][1],+y[1][2],+C[1],+y[1][4],+y[1][5]],[+y[2][0],+y[2][1],+y[2][2],+C[2],+y[2][4],+y[2][5]],[+y[3][0],+y[3][1],+y[3][2],+C[3],+y[3][4],+y[3][5]],[+y[4][0],+y[4][1],+y[4][2],+C[4],+y[4][4],+y[4][5]],[+y[5][0],+y[5][1],+y[5][2],+C[5],+y[5][4],+y[5][5]]]),A([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+C[0],+y[0][5]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+C[1],+y[1][5]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+C[2],+y[2][5]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+C[3],+y[3][5]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+C[4],+y[4][5]],[+y[5][0],+y[5][1],+y[5][2],+y[5][3],+C[5],+y[5][5]]]),A([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+y[0][4],+C[0]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+y[1][4],+C[1]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+y[2][4],+C[2]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+y[3][4],+C[3]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+y[4][4],+C[4]],[+y[5][0],+y[5][1],+y[5][2],+y[5][3],+y[5][4],+C[5]]]),A(y)]}}var a=[f,u];function p(A,P,y,C,M,s,_,b){return function(D,V){switch(D.length){case 0:return A(D,V);case 1:return P(D,V);case 2:return y(D,V);case 3:return C(D,V);case 4:return M(D,V);case 5:return s(D,V)}var O=_[D.length];return O||(O=_[D.length]=b(D.length)),O(D,V)}}function x(){for(;a.length<o;)a.push(i(a.length));v.exports=p.apply(void 0,a.concat([a,i]));for(var A=0;A<o;++A)v.exports[A]=a[A]}x()},3250:function(v,g,r){var t=r(5250),o=r(8210),i=r(3012),f=r(8545),u=5,l=11102230246251565e-32,m=(3+16*l)*l,h=(7+56*l)*l;function w(s,_,b,k){return function(V,O,N){var B=s(s(_(O[1],N[0]),_(-N[1],O[0])),s(_(V[1],O[0]),_(-O[1],V[0]))),z=s(_(V[1],N[0]),_(-N[1],V[0])),H=k(B,z);return H[H.length-1]}}function c(s,_,b,k){return function(V,O,N,B){var z=s(s(b(s(_(N[1],B[0]),_(-B[1],N[0])),O[2]),s(b(s(_(O[1],B[0]),_(-B[1],O[0])),-N[2]),b(s(_(O[1],N[0]),_(-N[1],O[0])),B[2]))),s(b(s(_(O[1],B[0]),_(-B[1],O[0])),V[2]),s(b(s(_(V[1],B[0]),_(-B[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),B[2])))),H=s(s(b(s(_(N[1],B[0]),_(-B[1],N[0])),V[2]),s(b(s(_(V[1],B[0]),_(-B[1],V[0])),-N[2]),b(s(_(V[1],N[0]),_(-N[1],V[0])),B[2]))),s(b(s(_(O[1],N[0]),_(-N[1],O[0])),V[2]),s(b(s(_(V[1],N[0]),_(-N[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),N[2])))),X=k(z,H);return X[X.length-1]}}function a(s,_,b,k){return function(V,O,N,B,z){var H=s(s(s(b(s(b(s(_(B[1],z[0]),_(-z[1],B[0])),N[2]),s(b(s(_(N[1],z[0]),_(-z[1],N[0])),-B[2]),b(s(_(N[1],B[0]),_(-B[1],N[0])),z[2]))),O[3]),s(b(s(b(s(_(B[1],z[0]),_(-z[1],B[0])),O[2]),s(b(s(_(O[1],z[0]),_(-z[1],O[0])),-B[2]),b(s(_(O[1],B[0]),_(-B[1],O[0])),z[2]))),-N[3]),b(s(b(s(_(N[1],z[0]),_(-z[1],N[0])),O[2]),s(b(s(_(O[1],z[0]),_(-z[1],O[0])),-N[2]),b(s(_(O[1],N[0]),_(-N[1],O[0])),z[2]))),B[3]))),s(b(s(b(s(_(N[1],B[0]),_(-B[1],N[0])),O[2]),s(b(s(_(O[1],B[0]),_(-B[1],O[0])),-N[2]),b(s(_(O[1],N[0]),_(-N[1],O[0])),B[2]))),-z[3]),s(b(s(b(s(_(B[1],z[0]),_(-z[1],B[0])),O[2]),s(b(s(_(O[1],z[0]),_(-z[1],O[0])),-B[2]),b(s(_(O[1],B[0]),_(-B[1],O[0])),z[2]))),V[3]),b(s(b(s(_(B[1],z[0]),_(-z[1],B[0])),V[2]),s(b(s(_(V[1],z[0]),_(-z[1],V[0])),-B[2]),b(s(_(V[1],B[0]),_(-B[1],V[0])),z[2]))),-O[3])))),s(s(b(s(b(s(_(O[1],z[0]),_(-z[1],O[0])),V[2]),s(b(s(_(V[1],z[0]),_(-z[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),z[2]))),B[3]),s(b(s(b(s(_(O[1],B[0]),_(-B[1],O[0])),V[2]),s(b(s(_(V[1],B[0]),_(-B[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),B[2]))),-z[3]),b(s(b(s(_(N[1],B[0]),_(-B[1],N[0])),O[2]),s(b(s(_(O[1],B[0]),_(-B[1],O[0])),-N[2]),b(s(_(O[1],N[0]),_(-N[1],O[0])),B[2]))),V[3]))),s(b(s(b(s(_(N[1],B[0]),_(-B[1],N[0])),V[2]),s(b(s(_(V[1],B[0]),_(-B[1],V[0])),-N[2]),b(s(_(V[1],N[0]),_(-N[1],V[0])),B[2]))),-O[3]),s(b(s(b(s(_(O[1],B[0]),_(-B[1],O[0])),V[2]),s(b(s(_(V[1],B[0]),_(-B[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),B[2]))),N[3]),b(s(b(s(_(O[1],N[0]),_(-N[1],O[0])),V[2]),s(b(s(_(V[1],N[0]),_(-N[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),N[2]))),-B[3]))))),X=s(s(s(b(s(b(s(_(B[1],z[0]),_(-z[1],B[0])),N[2]),s(b(s(_(N[1],z[0]),_(-z[1],N[0])),-B[2]),b(s(_(N[1],B[0]),_(-B[1],N[0])),z[2]))),V[3]),b(s(b(s(_(B[1],z[0]),_(-z[1],B[0])),V[2]),s(b(s(_(V[1],z[0]),_(-z[1],V[0])),-B[2]),b(s(_(V[1],B[0]),_(-B[1],V[0])),z[2]))),-N[3])),s(b(s(b(s(_(N[1],z[0]),_(-z[1],N[0])),V[2]),s(b(s(_(V[1],z[0]),_(-z[1],V[0])),-N[2]),b(s(_(V[1],N[0]),_(-N[1],V[0])),z[2]))),B[3]),b(s(b(s(_(N[1],B[0]),_(-B[1],N[0])),V[2]),s(b(s(_(V[1],B[0]),_(-B[1],V[0])),-N[2]),b(s(_(V[1],N[0]),_(-N[1],V[0])),B[2]))),-z[3]))),s(s(b(s(b(s(_(N[1],z[0]),_(-z[1],N[0])),O[2]),s(b(s(_(O[1],z[0]),_(-z[1],O[0])),-N[2]),b(s(_(O[1],N[0]),_(-N[1],O[0])),z[2]))),V[3]),b(s(b(s(_(N[1],z[0]),_(-z[1],N[0])),V[2]),s(b(s(_(V[1],z[0]),_(-z[1],V[0])),-N[2]),b(s(_(V[1],N[0]),_(-N[1],V[0])),z[2]))),-O[3])),s(b(s(b(s(_(O[1],z[0]),_(-z[1],O[0])),V[2]),s(b(s(_(V[1],z[0]),_(-z[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),z[2]))),N[3]),b(s(b(s(_(O[1],N[0]),_(-N[1],O[0])),V[2]),s(b(s(_(V[1],N[0]),_(-N[1],V[0])),-O[2]),b(s(_(V[1],O[0]),_(-O[1],V[0])),N[2]))),-z[3])))),$=k(H,X);return $[$.length-1]}}function p(s){var _=s===3?w:s===4?c:a;return _(o,t,i,f)}var x=p(3),A=p(4),P=[function(){return 0},function(){return 0},function(_,b){return b[0]-_[0]},function(_,b,k){var D=(_[1]-k[1])*(b[0]-k[0]),V=(_[0]-k[0])*(b[1]-k[1]),O=D-V,N;if(D>0){if(V<=0)return O;N=D+V}else if(D<0){if(V>=0)return O;N=-(D+V)}else return O;var B=m*N;return O>=B||O<=-B?O:x(_,b,k)},function(_,b,k,D){var V=_[0]-D[0],O=b[0]-D[0],N=k[0]-D[0],B=_[1]-D[1],z=b[1]-D[1],H=k[1]-D[1],X=_[2]-D[2],$=b[2]-D[2],ne=k[2]-D[2],q=O*H,ue=N*z,te=N*B,J=V*H,ie=V*z,K=O*B,ee=X*(q-ue)+$*(te-J)+ne*(ie-K),le=(Math.abs(q)+Math.abs(ue))*Math.abs(X)+(Math.abs(te)+Math.abs(J))*Math.abs($)+(Math.abs(ie)+Math.abs(K))*Math.abs(ne),j=h*le;return ee>j||-ee>j?ee:A(_,b,k,D)}];function y(s){var _=P[s.length];return _||(_=P[s.length]=p(s.length)),_.apply(void 0,s)}function C(s,_,b,k,D,V,O){return function(B,z,H,X,$){switch(arguments.length){case 0:case 1:return 0;case 2:return k(B,z);case 3:return D(B,z,H);case 4:return V(B,z,H,X);case 5:return O(B,z,H,X,$)}for(var ne=new Array(arguments.length),q=0;q<arguments.length;++q)ne[q]=arguments[q];return s(ne)}}function M(){for(;P.length<=u;)P.push(p(P.length));v.exports=C.apply(void 0,[y].concat(P));for(var s=0;s<=u;++s)v.exports[s]=P[s]}M()},5382:function(v,g,r){var t=r(8210),o=r(3012);v.exports=i;function i(f,u){if(f.length===1)return o(u,f[0]);if(u.length===1)return o(f,u[0]);if(f.length===0||u.length===0)return[0];var l=[0];if(f.length<u.length)for(var m=0;m<f.length;++m)l=t(l,o(u,f[m]));else for(var m=0;m<u.length;++m)l=t(l,o(f,u[m]));return l}},3012:function(v,g,r){var t=r(5250),o=r(9362);v.exports=i;function i(f,u){var l=f.length;if(l===1){var m=t(f[0],u);return m[0]?m:[m[1]]}var h=new Array(2*l),w=[.1,.1],c=[.1,.1],a=0;t(f[0],u,w),w[0]&&(h[a++]=w[0]);for(var p=1;p<l;++p){t(f[p],u,c);var x=w[1];o(x,c[0],w),w[0]&&(h[a++]=w[0]);var A=c[1],P=w[1],y=A+P,C=y-A,M=P-C;w[1]=y,M&&(h[a++]=M)}return w[1]&&(h[a++]=w[1]),a===0&&(h[a++]=0),h.length=a,h}},1125:function(v,g,r){v.exports=i;var t=r(3250)[3];function o(f,u,l,m){for(var h=0;h<2;++h){var w=f[h],c=u[h],a=Math.min(w,c),p=Math.max(w,c),x=l[h],A=m[h],P=Math.min(x,A),y=Math.max(x,A);if(y<a||p<P)return!1}return!0}function i(f,u,l,m){var h=t(f,l,m),w=t(u,l,m);if(h>0&&w>0||h<0&&w<0)return!1;var c=t(l,f,u),a=t(m,f,u);return c>0&&a>0||c<0&&a<0?!1:h===0&&w===0&&c===0&&a===0?o(f,u,l,m):!0}},8545:function(v){v.exports=r;function g(t,o){var i=t+o,f=i-t,u=i-f,l=o-f,m=t-u,h=m+l;return h?[h,i]:[i]}function r(t,o){var i=t.length|0,f=o.length|0;if(i===1&&f===1)return g(t[0],-o[0]);var u=i+f,l=new Array(u),m=0,h=0,w=0,c=Math.abs,a=t[h],p=c(a),x=-o[w],A=c(x),P,y;p<A?(y=a,h+=1,h<i&&(a=t[h],p=c(a))):(y=x,w+=1,w<f&&(x=-o[w],A=c(x))),h<i&&p<A||w>=f?(P=a,h+=1,h<i&&(a=t[h],p=c(a))):(P=x,w+=1,w<f&&(x=-o[w],A=c(x)));for(var C=P+y,M=C-P,s=y-M,_=s,b=C,k,D,V,O,N;h<i&&w<f;)p<A?(P=a,h+=1,h<i&&(a=t[h],p=c(a))):(P=x,w+=1,w<f&&(x=-o[w],A=c(x))),y=_,C=P+y,M=C-P,s=y-M,s&&(l[m++]=s),k=b+C,D=k-b,V=k-D,O=C-D,N=b-V,_=N+O,b=k;for(;h<i;)P=a,y=_,C=P+y,M=C-P,s=y-M,s&&(l[m++]=s),k=b+C,D=k-b,V=k-D,O=C-D,N=b-V,_=N+O,b=k,h+=1,h<i&&(a=t[h]);for(;w<f;)P=x,y=_,C=P+y,M=C-P,s=y-M,s&&(l[m++]=s),k=b+C,D=k-b,V=k-D,O=C-D,N=b-V,_=N+O,b=k,w+=1,w<f&&(x=-o[w]);return _&&(l[m++]=_),b&&(l[m++]=b),m||(l[m++]=0),l.length=m,l}},8210:function(v){v.exports=r;function g(t,o){var i=t+o,f=i-t,u=i-f,l=o-f,m=t-u,h=m+l;return h?[h,i]:[i]}function r(t,o){var i=t.length|0,f=o.length|0;if(i===1&&f===1)return g(t[0],o[0]);var u=i+f,l=new Array(u),m=0,h=0,w=0,c=Math.abs,a=t[h],p=c(a),x=o[w],A=c(x),P,y;p<A?(y=a,h+=1,h<i&&(a=t[h],p=c(a))):(y=x,w+=1,w<f&&(x=o[w],A=c(x))),h<i&&p<A||w>=f?(P=a,h+=1,h<i&&(a=t[h],p=c(a))):(P=x,w+=1,w<f&&(x=o[w],A=c(x)));for(var C=P+y,M=C-P,s=y-M,_=s,b=C,k,D,V,O,N;h<i&&w<f;)p<A?(P=a,h+=1,h<i&&(a=t[h],p=c(a))):(P=x,w+=1,w<f&&(x=o[w],A=c(x))),y=_,C=P+y,M=C-P,s=y-M,s&&(l[m++]=s),k=b+C,D=k-b,V=k-D,O=C-D,N=b-V,_=N+O,b=k;for(;h<i;)P=a,y=_,C=P+y,M=C-P,s=y-M,s&&(l[m++]=s),k=b+C,D=k-b,V=k-D,O=C-D,N=b-V,_=N+O,b=k,h+=1,h<i&&(a=t[h]);for(;w<f;)P=x,y=_,C=P+y,M=C-P,s=y-M,s&&(l[m++]=s),k=b+C,D=k-b,V=k-D,O=C-D,N=b-V,_=N+O,b=k,w+=1,w<f&&(x=o[w]);return _&&(l[m++]=_),b&&(l[m++]=b),m||(l[m++]=0),l.length=m,l}},9127:function(v,g,r){v.exports=i;var t=r(6204),o=r(5771);function i(f){return o(t(f))}},7765:function(v,g,r){v.exports=a;var t=r(9618),o=r(1888),i=r(446),f=r(1570);function u(p){for(var x=p.length,A=0,P=0;P<x;++P)A=Math.max(A,p[P].length)|0;return A-1}function l(p,x){for(var A=p.length,P=o.mallocUint8(A),y=0;y<A;++y)P[y]=p[y]<x|0;return P}function m(p,x){for(var A=p.length,P=x*(x+1)/2*A|0,y=o.mallocUint32(P*2),C=0,M=0;M<A;++M)for(var s=p[M],x=s.length,_=0;_<x;++_)for(var b=0;b<_;++b){var k=s[b],D=s[_];y[C++]=Math.min(k,D)|0,y[C++]=Math.max(k,D)|0}var V=C/2|0;i(t(y,[V,2]));for(var O=2,M=2;M<C;M+=2)y[M-2]===y[M]&&y[M-1]===y[M+1]||(y[O++]=y[M],y[O++]=y[M+1]);return t(y,[O/2|0,2])}function h(p,x,A,P){for(var y=p.data,C=p.shape[0],M=o.mallocDouble(C),s=0,_=0;_<C;++_){var b=y[2*_],k=y[2*_+1];if(A[b]!==A[k]){var D=x[b],V=x[k];y[2*s]=b,y[2*s+1]=k,M[s++]=(V-P)/(V-D)}}return p.shape[0]=s,t(M,[s])}function w(p,x){var A=o.mallocInt32(x*2),P=p.shape[0],y=p.data;A[0]=0;for(var C=0,M=0;M<P;++M){var s=y[2*M];if(s!==C){for(A[2*C+1]=M;++C<s;)A[2*C]=M,A[2*C+1]=M;A[2*C]=M}}for(A[2*C+1]=P;++C<x;)A[2*C]=A[2*C+1]=P;return A}function c(p){for(var x=p.shape[0]|0,A=p.data,P=new Array(x),y=0;y<x;++y)P[y]=[A[2*y],A[2*y+1]];return P}function a(p,x,A,P){A=A||0,typeof P>"u"&&(P=u(p));var y=p.length;if(y===0||P<1)return{cells:[],vertexIds:[],vertexWeights:[]};var C=l(x,+A),M=m(p,P),s=h(M,x,C,+A),_=w(M,x.length|0),b=f(P)(p,M.data,_,C),k=c(M),D=[].slice.call(s.data,0,s.shape[0]);return o.free(C),o.free(M.data),o.free(s.data),o.free(_),{cells:b,vertexIds:k,vertexWeights:D}}},1570:function(v){v.exports=r;var g=[function(){function o(i,f,u,l){for(var m=i.length,h=[],w=0;w<m;++w){var c=i[w];c.length}return h}return o},function(){function o(f,u,l,m){for(var h=Math.min(l,m)|0,w=Math.max(l,m)|0,c=f[2*h],a=f[2*h+1];c<a;){var p=c+a>>1,x=u[2*p+1];if(x===w)return p;w<x?a=p:c=p+1}return c}function i(f,u,l,m){for(var h=f.length,w=[],c=0;c<h;++c){var a=f[c],p=a.length;if(p===2){var x=(m[a[0]]<<0)+(m[a[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:w.push([o(l,u,a[0],a[1])]);break;case 2:w.push([o(l,u,a[1],a[0])]);break}}}return w}return i},function(){function o(f,u,l,m){for(var h=Math.min(l,m)|0,w=Math.max(l,m)|0,c=f[2*h],a=f[2*h+1];c<a;){var p=c+a>>1,x=u[2*p+1];if(x===w)return p;w<x?a=p:c=p+1}return c}function i(f,u,l,m){for(var h=f.length,w=[],c=0;c<h;++c){var a=f[c],p=a.length;if(p===3){var x=(m[a[0]]<<0)+(m[a[1]]<<1)+(m[a[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:w.push([o(l,u,a[0],a[2]),o(l,u,a[0],a[1])]);break;case 2:w.push([o(l,u,a[1],a[0]),o(l,u,a[1],a[2])]);break;case 3:w.push([o(l,u,a[0],a[2]),o(l,u,a[1],a[2])]);break;case 4:w.push([o(l,u,a[2],a[1]),o(l,u,a[2],a[0])]);break;case 5:w.push([o(l,u,a[2],a[1]),o(l,u,a[0],a[1])]);break;case 6:w.push([o(l,u,a[1],a[0]),o(l,u,a[2],a[0])]);break}}else if(p===2){var x=(m[a[0]]<<0)+(m[a[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:w.push([o(l,u,a[0],a[1])]);break;case 2:w.push([o(l,u,a[1],a[0])]);break}}}return w}return i},function(){function o(f,u,l,m){for(var h=Math.min(l,m)|0,w=Math.max(l,m)|0,c=f[2*h],a=f[2*h+1];c<a;){var p=c+a>>1,x=u[2*p+1];if(x===w)return p;w<x?a=p:c=p+1}return c}function i(f,u,l,m){for(var h=f.length,w=[],c=0;c<h;++c){var a=f[c],p=a.length;if(p===4){var x=(m[a[0]]<<0)+(m[a[1]]<<1)+(m[a[2]]<<2)+(m[a[3]]<<3);if(x===0||x===15)continue;switch(x){case 0:break;case 1:w.push([o(l,u,a[0],a[1]),o(l,u,a[0],a[2]),o(l,u,a[0],a[3])]);break;case 2:w.push([o(l,u,a[1],a[2]),o(l,u,a[1],a[0]),o(l,u,a[1],a[3])]);break;case 3:w.push([o(l,u,a[1],a[2]),o(l,u,a[0],a[2]),o(l,u,a[0],a[3])],[o(l,u,a[1],a[3]),o(l,u,a[1],a[2]),o(l,u,a[0],a[3])]);break;case 4:w.push([o(l,u,a[2],a[0]),o(l,u,a[2],a[1]),o(l,u,a[2],a[3])]);break;case 5:w.push([o(l,u,a[0],a[1]),o(l,u,a[2],a[1]),o(l,u,a[0],a[3])],[o(l,u,a[2],a[1]),o(l,u,a[2],a[3]),o(l,u,a[0],a[3])]);break;case 6:w.push([o(l,u,a[2],a[0]),o(l,u,a[1],a[0]),o(l,u,a[1],a[3])],[o(l,u,a[2],a[3]),o(l,u,a[2],a[0]),o(l,u,a[1],a[3])]);break;case 7:w.push([o(l,u,a[0],a[3]),o(l,u,a[1],a[3]),o(l,u,a[2],a[3])]);break;case 8:w.push([o(l,u,a[3],a[1]),o(l,u,a[3],a[0]),o(l,u,a[3],a[2])]);break;case 9:w.push([o(l,u,a[3],a[1]),o(l,u,a[0],a[1]),o(l,u,a[0],a[2])],[o(l,u,a[3],a[2]),o(l,u,a[3],a[1]),o(l,u,a[0],a[2])]);break;case 10:w.push([o(l,u,a[1],a[0]),o(l,u,a[3],a[0]),o(l,u,a[1],a[2])],[o(l,u,a[3],a[0]),o(l,u,a[3],a[2]),o(l,u,a[1],a[2])]);break;case 11:w.push([o(l,u,a[1],a[2]),o(l,u,a[0],a[2]),o(l,u,a[3],a[2])]);break;case 12:w.push([o(l,u,a[3],a[0]),o(l,u,a[2],a[0]),o(l,u,a[2],a[1])],[o(l,u,a[3],a[1]),o(l,u,a[3],a[0]),o(l,u,a[2],a[1])]);break;case 13:w.push([o(l,u,a[0],a[1]),o(l,u,a[2],a[1]),o(l,u,a[3],a[1])]);break;case 14:w.push([o(l,u,a[2],a[0]),o(l,u,a[1],a[0]),o(l,u,a[3],a[0])]);break}}else if(p===3){var x=(m[a[0]]<<0)+(m[a[1]]<<1)+(m[a[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:w.push([o(l,u,a[0],a[2]),o(l,u,a[0],a[1])]);break;case 2:w.push([o(l,u,a[1],a[0]),o(l,u,a[1],a[2])]);break;case 3:w.push([o(l,u,a[0],a[2]),o(l,u,a[1],a[2])]);break;case 4:w.push([o(l,u,a[2],a[1]),o(l,u,a[2],a[0])]);break;case 5:w.push([o(l,u,a[2],a[1]),o(l,u,a[0],a[1])]);break;case 6:w.push([o(l,u,a[1],a[0]),o(l,u,a[2],a[0])]);break}}else if(p===2){var x=(m[a[0]]<<0)+(m[a[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:w.push([o(l,u,a[0],a[1])]);break;case 2:w.push([o(l,u,a[1],a[0])]);break}}}return w}return i}];function r(t){return g[t]()}},6803:function(v,g,r){r(8828),r(1755);function t(o,i){var f=o.length,u=o.length-i.length,l=Math.min;if(u)return u;switch(f){case 0:return 0;case 1:return o[0]-i[0];case 2:var a=o[0]+o[1]-i[0]-i[1];return a||l(o[0],o[1])-l(i[0],i[1]);case 3:var m=o[0]+o[1],h=i[0]+i[1];if(a=m+o[2]-(h+i[2]),a)return a;var w=l(o[0],o[1]),c=l(i[0],i[1]),a=l(w,o[2])-l(c,i[2]);return a||l(w+o[2],m)-l(c+i[2],h);default:var p=o.slice(0);p.sort();var x=i.slice(0);x.sort();for(var A=0;A<f;++A)if(u=p[A]-x[A],u)return u;return 0}}g.Fw=t},3105:function(v,g){"use restrict";var r=32;g.INT_BITS=r,g.INT_MAX=2147483647,g.INT_MIN=-1<<r-1,g.sign=function(i){return(i>0)-(i<0)},g.abs=function(i){var f=i>>r-1;return(i^f)-f},g.min=function(i,f){return f^(i^f)&-(i<f)},g.max=function(i,f){return i^(i^f)&-(i<f)},g.isPow2=function(i){return!(i&i-1)&&!!i},g.log2=function(i){var f,u;return f=(i>65535)<<4,i>>>=f,u=(i>255)<<3,i>>>=u,f|=u,u=(i>15)<<2,i>>>=u,f|=u,u=(i>3)<<1,i>>>=u,f|=u,f|i>>1},g.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},g.popCount=function(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),(i+(i>>>4)&252645135)*16843009>>>24};function t(i){var f=32;return i&=-i,i&&f--,i&65535&&(f-=16),i&16711935&&(f-=8),i&252645135&&(f-=4),i&858993459&&(f-=2),i&1431655765&&(f-=1),f}g.countTrailingZeros=t,g.nextPow2=function(i){return i+=i===0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1},g.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i-(i>>>1)},g.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,i&=15,27030>>>i&1};var o=new Array(256);(function(i){for(var f=0;f<256;++f){var u=f,l=f,m=7;for(u>>>=1;u;u>>>=1)l<<=1,l|=u&1,--m;i[f]=l<<m&255}})(o),g.reverse=function(i){return o[i&255]<<24|o[i>>>8&255]<<16|o[i>>>16&255]<<8|o[i>>>24&255]},g.interleave2=function(i,f){return i&=65535,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,i|f<<1},g.deinterleave2=function(i,f){return i=i>>>f&1431655765,i=(i|i>>>1)&858993459,i=(i|i>>>2)&252645135,i=(i|i>>>4)&16711935,i=(i|i>>>16)&65535,i<<16>>16},g.interleave3=function(i,f,u){return i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,i|=f<<1,u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,i|u<<2},g.deinterleave3=function(i,f){return i=i>>>f&1227133513,i=(i|i>>>2)&3272356035,i=(i|i>>>4)&251719695,i=(i|i>>>8)&4278190335,i=(i|i>>>16)&1023,i<<22>>22},g.nextCombination=function(i){var f=i|i-1;return f+1|(~f&-~f)-1>>>t(i)+1}},2014:function(v,g,r){"use restrict";var t=r(3105),o=r(4623);function i(s){for(var _=0,b=Math.max,k=0,D=s.length;k<D;++k)_=b(_,s[k].length);return _-1}g.dimension=i;function f(s){for(var _=-1,b=Math.max,k=0,D=s.length;k<D;++k)for(var V=s[k],O=0,N=V.length;O<N;++O)_=b(_,V[O]);return _+1}g.countVertices=f;function u(s){for(var _=new Array(s.length),b=0,k=s.length;b<k;++b)_[b]=s[b].slice(0);return _}g.cloneCells=u;function l(s,_){var b=s.length,k=s.length-_.length,D=Math.min;if(k)return k;switch(b){case 0:return 0;case 1:return s[0]-_[0];case 2:var z=s[0]+s[1]-_[0]-_[1];return z||D(s[0],s[1])-D(_[0],_[1]);case 3:var V=s[0]+s[1],O=_[0]+_[1];if(z=V+s[2]-(O+_[2]),z)return z;var N=D(s[0],s[1]),B=D(_[0],_[1]),z=D(N,s[2])-D(B,_[2]);return z||D(N+s[2],V)-D(B+_[2],O);default:var H=s.slice(0);H.sort();var X=_.slice(0);X.sort();for(var $=0;$<b;++$)if(k=H[$]-X[$],k)return k;return 0}}g.compareCells=l;function m(s,_){return l(s[0],_[0])}function h(s,_){if(_){for(var b=s.length,k=new Array(b),D=0;D<b;++D)k[D]=[s[D],_[D]];k.sort(m);for(var D=0;D<b;++D)s[D]=k[D][0],_[D]=k[D][1];return s}else return s.sort(l),s}g.normalize=h;function w(s){if(s.length===0)return[];for(var _=1,b=s.length,k=1;k<b;++k){var D=s[k];if(l(D,s[k-1])){if(k===_){_++;continue}s[_++]=D}}return s.length=_,s}g.unique=w;function c(s,_){for(var b=0,k=s.length-1,D=-1;b<=k;){var V=b+k>>1,O=l(s[V],_);O<=0?(O===0&&(D=V),b=V+1):O>0&&(k=V-1)}return D}g.findCell=c;function a(s,_){for(var b=new Array(s.length),k=0,D=b.length;k<D;++k)b[k]=[];for(var V=[],k=0,O=_.length;k<O;++k)for(var N=_[k],B=N.length,z=1,H=1<<B;z<H;++z){V.length=t.popCount(z);for(var X=0,$=0;$<B;++$)z&1<<$&&(V[X++]=N[$]);var ne=c(s,V);if(!(ne<0))for(;b[ne++].push(k),!(ne>=s.length||l(s[ne],V)!==0););}return b}g.incidence=a;function p(s,_){if(!_)return a(w(A(s,0)),s);for(var b=new Array(_),k=0;k<_;++k)b[k]=[];for(var k=0,D=s.length;k<D;++k)for(var V=s[k],O=0,N=V.length;O<N;++O)b[V[O]].push(k);return b}g.dual=p;function x(s){for(var _=[],b=0,k=s.length;b<k;++b)for(var D=s[b],V=D.length|0,O=1,N=1<<V;O<N;++O){for(var B=[],z=0;z<V;++z)O>>>z&1&&B.push(D[z]);_.push(B)}return h(_)}g.explode=x;function A(s,_){if(_<0)return[];for(var b=[],k=(1<<_+1)-1,D=0;D<s.length;++D)for(var V=s[D],O=k;O<1<<V.length;O=t.nextCombination(O)){for(var N=new Array(_+1),B=0,z=0;z<V.length;++z)O&1<<z&&(N[B++]=V[z]);b.push(N)}return h(b)}g.skeleton=A;function P(s){for(var _=[],b=0,k=s.length;b<k;++b)for(var D=s[b],V=0,O=D.length;V<O;++V){for(var N=new Array(D.length-1),B=0,z=0;B<O;++B)B!==V&&(N[z++]=D[B]);_.push(N)}return h(_)}g.boundary=P;function y(s,_){for(var b=new o(_),k=0;k<s.length;++k)for(var D=s[k],V=0;V<D.length;++V)for(var O=V+1;O<D.length;++O)b.link(D[V],D[O]);for(var N=[],B=b.ranks,k=0;k<B.length;++k)B[k]=-1;for(var k=0;k<s.length;++k){var z=b.find(s[k][0]);B[z]<0?(B[z]=N.length,N.push([s[k].slice(0)])):N[B[z]].push(s[k].slice(0))}return N}function C(s){for(var _=w(h(A(s,0))),b=new o(_.length),k=0;k<s.length;++k)for(var D=s[k],V=0;V<D.length;++V)for(var O=c(_,[D[V]]),N=V+1;N<D.length;++N)b.link(O,c(_,[D[N]]));for(var B=[],z=b.ranks,k=0;k<z.length;++k)z[k]=-1;for(var k=0;k<s.length;++k){var H=b.find(c(_,[s[k][0]]));z[H]<0?(z[H]=B.length,B.push([s[k].slice(0)])):B[z[H]].push(s[k].slice(0))}return B}function M(s,_){return _?y(s,_):C(s)}g.connectedComponents=M},4623:function(v){"use restrict";v.exports=g;function g(r){this.roots=new Array(r),this.ranks=new Array(r);for(var t=0;t<r;++t)this.roots[t]=t,this.ranks[t]=0}g.prototype.length=function(){return this.roots.length},g.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},g.prototype.find=function(r){for(var t=this.roots;t[r]!==r;){var o=t[r];t[r]=t[o],r=o}return r},g.prototype.link=function(r,t){var o=this.find(r),i=this.find(t);if(o!==i){var f=this.ranks,u=this.roots,l=f[o],m=f[i];l<m?u[o]=i:m<l?u[i]=o:(u[i]=o,++f[o])}}},5878:function(v,g,r){v.exports=f;var t=r(3250),o=r(2014);function i(u,l,m){var h=Math.abs(t(u,l,m)),w=Math.sqrt(Math.pow(l[0]-m[0],2)+Math.pow(l[1]-m[1],2));return h/w}function f(u,l,m){for(var h=l.length,w=u.length,c=new Array(h),a=new Array(h),p=new Array(h),x=new Array(h),A=0;A<h;++A)c[A]=a[A]=-1,p[A]=1/0,x[A]=!1;for(var A=0;A<w;++A){var P=u[A];if(P.length!==2)throw new Error("Input must be a graph");var y=P[1],C=P[0];a[C]!==-1?a[C]=-2:a[C]=y,c[y]!==-1?c[y]=-2:c[y]=C}function M(te){if(x[te])return 1/0;var J=c[te],ie=a[te];return J<0||ie<0?1/0:i(l[te],l[J],l[ie])}function s(te,J){var ie=B[te],K=B[J];B[te]=K,B[J]=ie,z[ie]=J,z[K]=te}function _(te){return p[B[te]]}function b(te){return te&1?te-1>>1:(te>>1)-1}function k(te){for(var J=_(te);;){var ie=J,K=2*te+1,ee=2*(te+1),le=te;if(K<X){var j=_(K);j<ie&&(le=K,ie=j)}if(ee<X){var Z=_(ee);Z<ie&&(le=ee)}if(le===te)return te;s(te,le),te=le}}function D(te){for(var J=_(te);te>0;){var ie=b(te);if(ie>=0){var K=_(ie);if(J<K){s(te,ie),te=ie;continue}}return te}}function V(){if(X>0){var te=B[0];return s(0,X-1),X-=1,k(0),te}return-1}function O(te,J){var ie=B[te];return p[ie]===J?te:(p[ie]=-1/0,D(te),V(),p[ie]=J,X+=1,D(X-1))}function N(te){if(!x[te]){x[te]=!0;var J=c[te],ie=a[te];c[ie]>=0&&(c[ie]=J),a[J]>=0&&(a[J]=ie),z[J]>=0&&O(z[J],M(J)),z[ie]>=0&&O(z[ie],M(ie))}}for(var B=[],z=new Array(h),A=0;A<h;++A){var H=p[A]=M(A);H<1/0?(z[A]=B.length,B.push(A)):z[A]=-1}for(var X=B.length,A=X>>1;A>=0;--A)k(A);for(;;){var $=V();if($<0||p[$]>m)break;N($)}for(var ne=[],A=0;A<h;++A)x[A]||(z[A]=ne.length,ne.push(l[A].slice()));ne.length;function q(te,J){if(te[J]<0)return J;var ie=J,K=J;do{var ee=te[K];if(!x[K]||ee<0||ee===K||(K=ee,ee=te[K],!x[K]||ee<0||ee===K))break;K=ee,ie=te[ie]}while(ie!==K);for(var le=J;le!==K;le=te[le])te[le]=K;return K}var ue=[];return u.forEach(function(te){var J=q(c,te[0]),ie=q(a,te[1]);if(J>=0&&ie>=0&&J!==ie){var K=z[J],ee=z[ie];K!==ee&&ue.push([K,ee])}}),o.unique(o.normalize(ue)),{positions:ne,edges:ue}}},1303:function(v,g,r){v.exports=i;var t=r(3250);function o(f,u){var l,m;if(u[0][0]<u[1][0])l=u[0],m=u[1];else if(u[0][0]>u[1][0])l=u[1],m=u[0];else{var h=Math.min(f[0][1],f[1][1]),w=Math.max(f[0][1],f[1][1]),c=Math.min(u[0][1],u[1][1]),a=Math.max(u[0][1],u[1][1]);return w<c?w-c:h>a?h-a:w-a}var p,x;f[0][1]<f[1][1]?(p=f[0],x=f[1]):(p=f[1],x=f[0]);var A=t(m,l,p);return A||(A=t(m,l,x),A)?A:x-m}function i(f,u){var l,m;if(u[0][0]<u[1][0])l=u[0],m=u[1];else if(u[0][0]>u[1][0])l=u[1],m=u[0];else return o(u,f);var h,w;if(f[0][0]<f[1][0])h=f[0],w=f[1];else if(f[0][0]>f[1][0])h=f[1],w=f[0];else return-o(f,u);var c=t(l,m,w),a=t(l,m,h);if(c<0){if(a<=0)return c}else if(c>0){if(a>=0)return c}else if(a)return a;if(c=t(w,h,m),a=t(w,h,l),c<0){if(a<=0)return c}else if(c>0){if(a>=0)return c}else if(a)return a;return m[0]-w[0]}},4209:function(v,g,r){v.exports=a;var t=r(2478),o=r(3840),i=r(3250),f=r(1303);function u(p,x,A){this.slabs=p,this.coordinates=x,this.horizontal=A}var l=u.prototype;function m(p,x){return p.y-x}function h(p,x){for(var A=null;p;){var P=p.key,y,C;P[0][0]<P[1][0]?(y=P[0],C=P[1]):(y=P[1],C=P[0]);var M=i(y,C,x);if(M<0)p=p.left;else if(M>0)if(x[0]!==P[1][0])A=p,p=p.right;else{var s=h(p.right,x);if(s)return s;p=p.left}else{if(x[0]!==P[1][0])return p;var s=h(p.right,x);if(s)return s;p=p.left}}return A}l.castUp=function(p){var x=t.le(this.coordinates,p[0]);if(x<0)return-1;this.slabs[x];var A=h(this.slabs[x],p),P=-1;if(A&&(P=A.value),this.coordinates[x]===p[0]){var y=null;if(A&&(y=A.key),x>0){var C=h(this.slabs[x-1],p);C&&(y?f(C.key,y)>0&&(y=C.key,P=C.value):(P=C.value,y=C.key))}var M=this.horizontal[x];if(M.length>0){var s=t.ge(M,p[1],m);if(s<M.length){var _=M[s];if(p[1]===_.y){if(_.closed)return _.index;for(;s<M.length-1&&M[s+1].y===p[1];)if(s=s+1,_=M[s],_.closed)return _.index;if(_.y===p[1]&&!_.start){if(s=s+1,s>=M.length)return P;_=M[s]}}if(_.start)if(y){var b=i(y[0],y[1],[p[0],_.y]);y[0][0]>y[1][0]&&(b=-b),b>0&&(P=_.index)}else P=_.index;else _.y!==p[1]&&(P=_.index)}}}return P};function w(p,x,A,P){this.y=p,this.index=x,this.start=A,this.closed=P}function c(p,x,A,P){this.x=p,this.segment=x,this.create=A,this.index=P}function a(p){for(var x=p.length,A=2*x,P=new Array(A),y=0;y<x;++y){var C=p[y],M=C[0][0]<C[1][0];P[2*y]=new c(C[0][0],C,M,y),P[2*y+1]=new c(C[1][0],C,!M,y)}P.sort(function(N,B){var z=N.x-B.x;return z||(z=N.create-B.create,z)?z:Math.min(N.segment[0][1],N.segment[1][1])-Math.min(B.segment[0][1],B.segment[1][1])});for(var s=o(f),_=[],b=[],k=[],y=0;y<A;){for(var D=P[y].x,V=[];y<A;){var O=P[y];if(O.x!==D)break;y+=1,O.segment[0][0]===O.x&&O.segment[1][0]===O.x?O.create&&(O.segment[0][1]<O.segment[1][1]?(V.push(new w(O.segment[0][1],O.index,!0,!0)),V.push(new w(O.segment[1][1],O.index,!1,!1))):(V.push(new w(O.segment[1][1],O.index,!0,!1)),V.push(new w(O.segment[0][1],O.index,!1,!0)))):O.create?s=s.insert(O.segment,O.index):s=s.remove(O.segment)}_.push(s.root),b.push(D),k.push(V)}return new u(_,b,k)}},5202:function(v,g,r){var t=r(1944),o=r(8210);v.exports=u,v.exports.positive=l,v.exports.negative=m;function i(h,w){var c=o(t(h,w),[w[w.length-1]]);return c[c.length-1]}function f(h,w,c,a){var p=a-w,x=-w/p;x<0?x=0:x>1&&(x=1);for(var A=1-x,P=h.length,y=new Array(P),C=0;C<P;++C)y[C]=x*h[C]+A*c[C];return y}function u(h,w){for(var c=[],a=[],p=i(h[h.length-1],w),x=h[h.length-1],A=h[0],P=0;P<h.length;++P,x=A){A=h[P];var y=i(A,w);if(p<0&&y>0||p>0&&y<0){var C=f(x,y,A,p);c.push(C),a.push(C.slice())}y<0?a.push(A.slice()):y>0?c.push(A.slice()):(c.push(A.slice()),a.push(A.slice())),p=y}return{positive:c,negative:a}}function l(h,w){for(var c=[],a=i(h[h.length-1],w),p=h[h.length-1],x=h[0],A=0;A<h.length;++A,p=x){x=h[A];var P=i(x,w);(a<0&&P>0||a>0&&P<0)&&c.push(f(p,P,x,a)),P>=0&&c.push(x.slice()),a=P}return c}function m(h,w){for(var c=[],a=i(h[h.length-1],w),p=h[h.length-1],x=h[0],A=0;A<h.length;++A,p=x){x=h[A];var P=i(x,w);(a<0&&P>0||a>0&&P<0)&&c.push(f(p,P,x,a)),P<=0&&c.push(x.slice()),a=P}return c}},3387:function(v,g,r){var t;(function(){var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(h){return u(m(h),arguments)}function f(h,w){return i.apply(null,[h].concat(w||[]))}function u(h,w){var c=1,a=h.length,p,x="",A,P,y,C,M,s,_,b;for(A=0;A<a;A++)if(typeof h[A]=="string")x+=h[A];else if(typeof h[A]=="object"){if(y=h[A],y.keys)for(p=w[c],P=0;P<y.keys.length;P++){if(p==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[P],y.keys[P-1]));p=p[y.keys[P]]}else y.param_no?p=w[y.param_no]:p=w[c++];if(o.not_type.test(y.type)&&o.not_primitive.test(y.type)&&p instanceof Function&&(p=p()),o.numeric_arg.test(y.type)&&typeof p!="number"&&isNaN(p))throw new TypeError(i("[sprintf] expecting number but found %T",p));switch(o.number.test(y.type)&&(_=p>=0),y.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,y.width?parseInt(y.width):0);break;case"e":p=y.precision?parseFloat(p).toExponential(y.precision):parseFloat(p).toExponential();break;case"f":p=y.precision?parseFloat(p).toFixed(y.precision):parseFloat(p);break;case"g":p=y.precision?String(Number(p.toPrecision(y.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=y.precision?p.substring(0,y.precision):p;break;case"t":p=String(!!p),p=y.precision?p.substring(0,y.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=y.precision?p.substring(0,y.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=y.precision?p.substring(0,y.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase();break}o.json.test(y.type)?x+=p:(o.number.test(y.type)&&(!_||y.sign)?(b=_?"+":"-",p=p.toString().replace(o.sign,"")):b="",M=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",s=y.width-(b+p).length,C=y.width&&s>0?M.repeat(s):"",x+=y.align?b+p+C:M==="0"?b+C+p:C+b+p)}return x}var l=Object.create(null);function m(h){if(l[h])return l[h];for(var w=h,c,a=[],p=0;w;){if((c=o.text.exec(w))!==null)a.push(c[0]);else if((c=o.modulo.exec(w))!==null)a.push("%");else if((c=o.placeholder.exec(w))!==null){if(c[2]){p|=1;var x=[],A=c[2],P=[];if((P=o.key.exec(A))!==null)for(x.push(P[1]);(A=A.substring(P[0].length))!=="";)if((P=o.key_access.exec(A))!==null)x.push(P[1]);else if((P=o.index_access.exec(A))!==null)x.push(P[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=x}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");w=w.substring(c[0].length)}return l[h]=a}g.sprintf=i,g.vsprintf=f,typeof window<"u"&&(window.sprintf=i,window.vsprintf=f,t=(function(){return{sprintf:i,vsprintf:f}}).call(g,r,g,v),t!==void 0&&(v.exports=t))})()},3711:function(v,g,r){v.exports=m;var t=r(2640),o=r(781),i={"2d":function(h,w,c){var a=h({order:w,scalarArguments:3,getters:c==="generic"?[0]:void 0,phase:function(x,A,P,y){return x>y|0},vertex:function(x,A,P,y,C,M,s,_,b,k,D,V,O){var N=(s<<0)+(_<<1)+(b<<2)+(k<<3)|0;if(!(N===0||N===15))switch(N){case 0:D.push([x-.5,A-.5]);break;case 1:D.push([x-.25-.25*(y+P-2*O)/(P-y),A-.25-.25*(C+P-2*O)/(P-C)]);break;case 2:D.push([x-.75-.25*(-y-P+2*O)/(y-P),A-.25-.25*(M+y-2*O)/(y-M)]);break;case 3:D.push([x-.5,A-.5-.5*(C+P+M+y-4*O)/(P-C+y-M)]);break;case 4:D.push([x-.25-.25*(M+C-2*O)/(C-M),A-.75-.25*(-C-P+2*O)/(C-P)]);break;case 5:D.push([x-.5-.5*(y+P+M+C-4*O)/(P-y+C-M),A-.5]);break;case 6:D.push([x-.5-.25*(-y-P+M+C)/(y-P+C-M),A-.5-.25*(-C-P+M+y)/(C-P+y-M)]);break;case 7:D.push([x-.75-.25*(M+C-2*O)/(C-M),A-.75-.25*(M+y-2*O)/(y-M)]);break;case 8:D.push([x-.75-.25*(-M-C+2*O)/(M-C),A-.75-.25*(-M-y+2*O)/(M-y)]);break;case 9:D.push([x-.5-.25*(y+P+-M-C)/(P-y+M-C),A-.5-.25*(C+P+-M-y)/(P-C+M-y)]);break;case 10:D.push([x-.5-.5*(-y-P+-M-C+4*O)/(y-P+M-C),A-.5]);break;case 11:D.push([x-.25-.25*(-M-C+2*O)/(M-C),A-.75-.25*(C+P-2*O)/(P-C)]);break;case 12:D.push([x-.5,A-.5-.5*(-C-P+-M-y+4*O)/(C-P+M-y)]);break;case 13:D.push([x-.75-.25*(y+P-2*O)/(P-y),A-.25-.25*(-M-y+2*O)/(M-y)]);break;case 14:D.push([x-.25-.25*(-y-P+2*O)/(y-P),A-.25-.25*(-C-P+2*O)/(C-P)]);break;case 15:D.push([x-.5,A-.5]);break}},cell:function(x,A,P,y,C,M,s,_,b){C?_.push([x,A]):_.push([A,x])}});return function(p,x){var A=[],P=[];return a(p,A,P,x),{positions:A,cells:P}}}};function f(h,w){var c=h.length+"d",a=i[c];if(a)return a(t,h,w)}function u(h,w){for(var c=o(h,w),a=c.length,p=new Array(a),x=new Array(a),A=0;A<a;++A)p[A]=[c[A]],x[A]=[A];return{positions:p,cells:x}}var l={};function m(h,p){if(h.dimension<=0)return{positions:[],cells:[]};if(h.dimension===1)return u(h,p);var c=h.order.join()+"-"+h.dtype,a=l[c],p=+p||0;return a||(a=l[c]=f(h.order,h.dtype)),a(h,p)}},529:function(v,g,r){v.exports=u;var t=r(4359),o=window||d.global||{},i=o.__TEXT_CACHE||{};o.__TEXT_CACHE={};function f(l){for(var m=l.cells,h=l.positions,w=new Float32Array(m.length*6),c=0,a=0,p=0;p<m.length;++p)for(var x=m[p],A=0;A<3;++A){var P=h[x[A]];w[c++]=P[0],w[c++]=P[1]+1.4,a=Math.max(P[0],a)}return{data:w,shape:a}}function u(l,m,w){var w=w||{},c=w.fontStyle||"normal",a=w.fontWeight||"normal",p=w.fontVariant||"normal",x=[c,a,p,l].join("_"),A=i[x];A||(A=i[x]={" ":{data:new Float32Array(0),shape:.2}});var P=A[m];if(!P)if(m.length<=1||!/\d/.test(m))P=A[m]=f(t(m,{triangles:!0,font:l,fontStyle:c,fontWeight:a,fontVariant:p,textAlign:w.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=m.split(/(\d|\s)/),C=new Array(y.length),M=0,s=0,_=0;_<y.length;++_)C[_]=u(l,y[_]),M+=C[_].data.length,s+=C[_].shape,_>0&&(s+=.02);for(var b=new Float32Array(M),k=0,D=-.5*s,_=0;_<C.length;++_){for(var V=C[_].data,O=0;O<V.length;O+=2)b[k++]=V[O]+D,b[k++]=V[O+1];D+=C[_].shape+.02}P=A[m]={data:b,shape:s}}return P}},665:function(v,g,r){var t=r(3202);v.exports=u;var o=96;function i(l,m){var h=t(getComputedStyle(l).getPropertyValue(m));return h[0]*u(h[1],l)}function f(l,m){var h=document.createElement("div");h.style["font-size"]="128"+l,m.appendChild(h);var w=i(h,"font-size")/128;return m.removeChild(h),w}function u(l,m){switch(m=m||document.body,l=(l||"px").trim().toLowerCase(),(m===window||m===document)&&(m=document.body),l){case"%":return m.clientHeight/100;case"ch":case"ex":return f(l,m);case"em":return i(m,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return o;case"cm":return o/2.54;case"mm":return o/25.4;case"pt":return o/72;case"pc":return o/6}return 1}},7261:function(v,g,r){v.exports=x;var t=r(9215),o=r(7608),i=r(6079),f=r(5911),u=r(3536),l=r(244);function m(A,P,y){return Math.sqrt(Math.pow(A,2)+Math.pow(P,2)+Math.pow(y,2))}function h(A){return Math.min(1,Math.max(-1,A))}function w(A){var P=Math.abs(A[0]),y=Math.abs(A[1]),C=Math.abs(A[2]),M=[0,0,0];P>Math.max(y,C)?M[2]=1:y>Math.max(P,C)?M[0]=1:M[1]=1;for(var s=0,_=0,b=0;b<3;++b)s+=A[b]*A[b],_+=M[b]*A[b];for(var b=0;b<3;++b)M[b]-=_/s*A[b];return u(M,M),M}function c(A,P,y,C,M,s,_,b){this.center=t(y),this.up=t(C),this.right=t(M),this.radius=t([s]),this.angle=t([_,b]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(A,P),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var k=0;k<16;++k)this.computedMatrix[k]=.5;this.recalcMatrix(0)}var a=c.prototype;a.setDistanceLimits=function(A,P){A>0?A=Math.log(A):A=-1/0,P>0?P=Math.log(P):P=1/0,P=Math.max(P,A),this.radius.bounds[0][0]=A,this.radius.bounds[1][0]=P},a.getDistanceLimits=function(A){var P=this.radius.bounds[0];return A?(A[0]=Math.exp(P[0][0]),A[1]=Math.exp(P[1][0]),A):[Math.exp(P[0][0]),Math.exp(P[1][0])]},a.recalcMatrix=function(A){this.center.curve(A),this.up.curve(A),this.right.curve(A),this.radius.curve(A),this.angle.curve(A);for(var P=this.computedUp,y=this.computedRight,C=0,M=0,s=0;s<3;++s)M+=P[s]*y[s],C+=P[s]*P[s];for(var _=Math.sqrt(C),b=0,s=0;s<3;++s)y[s]-=P[s]*M/C,b+=y[s]*y[s],P[s]/=_;for(var k=Math.sqrt(b),s=0;s<3;++s)y[s]/=k;var D=this.computedToward;f(D,P,y),u(D,D);for(var V=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],N=this.computedAngle[1],B=Math.cos(O),z=Math.sin(O),H=Math.cos(N),X=Math.sin(N),$=this.computedCenter,ne=B*H,q=z*H,ue=X,te=-B*X,J=-z*X,ie=H,K=this.computedEye,ee=this.computedMatrix,s=0;s<3;++s){var le=ne*y[s]+q*D[s]+ue*P[s];ee[4*s+1]=te*y[s]+J*D[s]+ie*P[s],ee[4*s+2]=le,ee[4*s+3]=0}var j=ee[1],Z=ee[5],fe=ee[9],re=ee[2],ce=ee[6],xe=ee[10],Te=Z*xe-fe*ce,we=fe*re-j*xe,_e=j*ce-Z*re,ke=m(Te,we,_e);Te/=ke,we/=ke,_e/=ke,ee[0]=Te,ee[4]=we,ee[8]=_e;for(var s=0;s<3;++s)K[s]=$[s]+ee[2+4*s]*V;for(var s=0;s<3;++s){for(var b=0,Ne=0;Ne<3;++Ne)b+=ee[s+4*Ne]*K[Ne];ee[12+s]=-b}ee[15]=1},a.getMatrix=function(A,P){this.recalcMatrix(A);var y=this.computedMatrix;if(P){for(var C=0;C<16;++C)P[C]=y[C];return P}return y};var p=[0,0,0];a.rotate=function(A,P,y,C){if(this.angle.move(A,P,y),C){this.recalcMatrix(A);var M=this.computedMatrix;p[0]=M[2],p[1]=M[6],p[2]=M[10];for(var s=this.computedUp,_=this.computedRight,b=this.computedToward,k=0;k<3;++k)M[4*k]=s[k],M[4*k+1]=_[k],M[4*k+2]=b[k];i(M,M,C,p);for(var k=0;k<3;++k)s[k]=M[4*k],_[k]=M[4*k+1];this.up.set(A,s[0],s[1],s[2]),this.right.set(A,_[0],_[1],_[2])}},a.pan=function(A,P,y,C){P=P||0,y=y||0,C=C||0,this.recalcMatrix(A);var M=this.computedMatrix;Math.exp(this.computedRadius[0]);var s=M[1],_=M[5],b=M[9],k=m(s,_,b);s/=k,_/=k,b/=k;var D=M[0],V=M[4],O=M[8],N=D*s+V*_+O*b;D-=s*N,V-=_*N,O-=b*N;var B=m(D,V,O);D/=B,V/=B,O/=B;var z=D*P+s*y,H=V*P+_*y,X=O*P+b*y;this.center.move(A,z,H,X);var $=Math.exp(this.computedRadius[0]);$=Math.max(1e-4,$+C),this.radius.set(A,Math.log($))},a.translate=function(A,P,y,C){this.center.move(A,P||0,y||0,C||0)},a.setMatrix=function(A,P,y,C){var M=1;typeof y=="number"&&(M=y|0),(M<0||M>3)&&(M=1);var s=(M+2)%3;P||(this.recalcMatrix(A),P=this.computedMatrix);var _=P[M],b=P[M+4],k=P[M+8];if(C){var V=Math.abs(_),O=Math.abs(b),N=Math.abs(k),B=Math.max(V,O,N);V===B?(_=_<0?-1:1,b=k=0):N===B?(k=k<0?-1:1,_=b=0):(b=b<0?-1:1,_=k=0)}else{var D=m(_,b,k);_/=D,b/=D,k/=D}var z=P[s],H=P[s+4],X=P[s+8],$=z*_+H*b+X*k;z-=_*$,H-=b*$,X-=k*$;var ne=m(z,H,X);z/=ne,H/=ne,X/=ne;var q=b*X-k*H,ue=k*z-_*X,te=_*H-b*z,J=m(q,ue,te);q/=J,ue/=J,te/=J,this.center.jump(A,Oe,Le,Ge),this.radius.idle(A),this.up.jump(A,_,b,k),this.right.jump(A,z,H,X);var ie,K;if(M===2){var ee=P[1],le=P[5],j=P[9],Z=ee*z+le*H+j*X,fe=ee*q+le*ue+j*te;Te<0?ie=-Math.PI/2:ie=Math.PI/2,K=Math.atan2(fe,Z)}else{var re=P[2],ce=P[6],xe=P[10],Te=re*_+ce*b+xe*k,we=re*z+ce*H+xe*X,_e=re*q+ce*ue+xe*te;ie=Math.asin(h(Te)),K=Math.atan2(_e,we)}this.angle.jump(A,K,ie),this.recalcMatrix(A);var ke=P[2],Ne=P[6],Ee=P[10],ze=this.computedMatrix;o(ze,P);var Ce=ze[15],Oe=ze[12]/Ce,Le=ze[13]/Ce,Ge=ze[14]/Ce,rt=Math.exp(this.computedRadius[0]);this.center.jump(A,Oe-ke*rt,Le-Ne*rt,Ge-Ee*rt)},a.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},a.idle=function(A){this.center.idle(A),this.up.idle(A),this.right.idle(A),this.radius.idle(A),this.angle.idle(A)},a.flush=function(A){this.center.flush(A),this.up.flush(A),this.right.flush(A),this.radius.flush(A),this.angle.flush(A)},a.setDistance=function(A,P){P>0&&this.radius.set(A,Math.log(P))},a.lookAt=function(A,P,y,C){this.recalcMatrix(A),P=P||this.computedEye,y=y||this.computedCenter,C=C||this.computedUp;var M=C[0],s=C[1],_=C[2],b=m(M,s,_);if(!(b<1e-6)){M/=b,s/=b,_/=b;var k=P[0]-y[0],D=P[1]-y[1],V=P[2]-y[2],O=m(k,D,V);if(!(O<1e-6)){k/=O,D/=O,V/=O;var N=this.computedRight,B=N[0],z=N[1],H=N[2],X=M*B+s*z+_*H;B-=X*M,z-=X*s,H-=X*_;var $=m(B,z,H);if(!($<.01&&(B=s*V-_*D,z=_*k-M*V,H=M*D-s*k,$=m(B,z,H),$<1e-6))){B/=$,z/=$,H/=$,this.up.set(A,M,s,_),this.right.set(A,B,z,H),this.center.set(A,y[0],y[1],y[2]),this.radius.set(A,Math.log(O));var ne=s*H-_*z,q=_*B-M*H,ue=M*z-s*B,te=m(ne,q,ue);ne/=te,q/=te,ue/=te;var J=M*k+s*D+_*V,ie=B*k+z*D+H*V,K=ne*k+q*D+ue*V,ee=Math.asin(h(J)),le=Math.atan2(K,ie),j=this.angle._state,Z=j[j.length-1],fe=j[j.length-2];Z=Z%(2*Math.PI);var re=Math.abs(Z+2*Math.PI-le),ce=Math.abs(Z-le),xe=Math.abs(Z-2*Math.PI-le);re<ce&&(Z+=2*Math.PI),xe<ce&&(Z-=2*Math.PI),this.angle.jump(this.angle.lastT(),Z,fe),this.angle.set(A,le,ee)}}}};function x(A){A=A||{};var P=A.center||[0,0,0],y=A.up||[0,1,0],C=A.right||w(y),M=A.radius||1,s=A.theta||0,_=A.phi||0;if(P=[].slice.call(P,0,3),y=[].slice.call(y,0,3),u(y,y),C=[].slice.call(C,0,3),u(C,C),"eye"in A){var b=A.eye,k=[b[0]-P[0],b[1]-P[1],b[2]-P[2]];f(C,k,y),m(C[0],C[1],C[2])<1e-6?C=w(y):u(C,C),M=m(k[0],k[1],k[2]);var D=l(y,k)/M,V=l(C,k)/M;_=Math.acos(D),s=Math.acos(V)}return M=Math.log(M),new c(A.zoomMin,A.zoomMax,P,y,C,M,s,_)}},5250:function(v){v.exports=r;var g=+(Math.pow(2,27)+1);function r(t,o,i){var f=t*o,u=g*t,l=u-t,m=u-l,h=t-m,w=g*o,c=w-o,a=w-c,p=o-a,x=f-m*a,A=x-h*a,P=A-m*p,y=h*p-P;return i?(i[0]=y,i[1]=f,i):[y,f]}},9362:function(v){v.exports=g;function g(r,t,o){var i=r+t,f=i-r,u=i-f,l=t-f,m=r-u;return o?(o[0]=m+l,o[1]=i,o):[m+l,i]}},1888:function(v,g,r){var t=r(8828),o=r(1338),i=r(4793).hp;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var f=typeof Uint8ClampedArray<"u",u=typeof BigUint64Array<"u",l=typeof BigInt64Array<"u",m=r.g.__TYPEDARRAY_POOL;m.UINT8C||(m.UINT8C=o([32,0])),m.BIGUINT64||(m.BIGUINT64=o([32,0])),m.BIGINT64||(m.BIGINT64=o([32,0])),m.BUFFER||(m.BUFFER=o([32,0]));var h=m.DATA,w=m.BUFFER;g.free=function(B){if(i.isBuffer(B))w[t.log2(B.length)].push(B);else{if(Object.prototype.toString.call(B)!=="[object ArrayBuffer]"&&(B=B.buffer),!B)return;var z=B.length||B.byteLength,H=t.log2(z)|0;h[H].push(B)}};function c(N){if(N){var B=N.length||N.byteLength,z=t.log2(B);h[z].push(N)}}function a(N){c(N.buffer)}g.freeUint8=g.freeUint16=g.freeUint32=g.freeBigUint64=g.freeInt8=g.freeInt16=g.freeInt32=g.freeBigInt64=g.freeFloat32=g.freeFloat=g.freeFloat64=g.freeDouble=g.freeUint8Clamped=g.freeDataView=a,g.freeArrayBuffer=c,g.freeBuffer=function(B){w[t.log2(B.length)].push(B)},g.malloc=function(B,z){if(z===void 0||z==="arraybuffer")return p(B);switch(z){case"uint8":return x(B);case"uint16":return A(B);case"uint32":return P(B);case"int8":return y(B);case"int16":return C(B);case"int32":return M(B);case"float":case"float32":return s(B);case"double":case"float64":return _(B);case"uint8_clamped":return b(B);case"bigint64":return D(B);case"biguint64":return k(B);case"buffer":return O(B);case"data":case"dataview":return V(B);default:return null}return null};function p(B){var B=t.nextPow2(B),z=t.log2(B),H=h[z];return H.length>0?H.pop():new ArrayBuffer(B)}g.mallocArrayBuffer=p;function x(N){return new Uint8Array(p(N),0,N)}g.mallocUint8=x;function A(N){return new Uint16Array(p(2*N),0,N)}g.mallocUint16=A;function P(N){return new Uint32Array(p(4*N),0,N)}g.mallocUint32=P;function y(N){return new Int8Array(p(N),0,N)}g.mallocInt8=y;function C(N){return new Int16Array(p(2*N),0,N)}g.mallocInt16=C;function M(N){return new Int32Array(p(4*N),0,N)}g.mallocInt32=M;function s(N){return new Float32Array(p(4*N),0,N)}g.mallocFloat32=g.mallocFloat=s;function _(N){return new Float64Array(p(8*N),0,N)}g.mallocFloat64=g.mallocDouble=_;function b(N){return f?new Uint8ClampedArray(p(N),0,N):x(N)}g.mallocUint8Clamped=b;function k(N){return u?new BigUint64Array(p(8*N),0,N):null}g.mallocBigUint64=k;function D(N){return l?new BigInt64Array(p(8*N),0,N):null}g.mallocBigInt64=D;function V(N){return new DataView(p(N),0,N)}g.mallocDataView=V;function O(N){N=t.nextPow2(N);var B=t.log2(N),z=w[B];return z.length>0?z.pop():new i(N)}g.mallocBuffer=O,g.clearCache=function(){for(var B=0;B<32;++B)m.UINT8[B].length=0,m.UINT16[B].length=0,m.UINT32[B].length=0,m.INT8[B].length=0,m.INT16[B].length=0,m.INT32[B].length=0,m.FLOAT[B].length=0,m.DOUBLE[B].length=0,m.BIGUINT64[B].length=0,m.BIGINT64[B].length=0,m.UINT8C[B].length=0,h[B].length=0,w[B].length=0}},1755:function(v){"use restrict";v.exports=g;function g(t){this.roots=new Array(t),this.ranks=new Array(t);for(var o=0;o<t;++o)this.roots[o]=o,this.ranks[o]=0}var r=g.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var o=t,i=this.roots;i[t]!==t;)t=i[t];for(;i[o]!==t;){var f=i[o];i[o]=t,o=f}return t},r.link=function(t,o){var i=this.find(t),f=this.find(o);if(i!==f){var u=this.ranks,l=this.roots,m=u[i],h=u[f];m<h?l[i]=f:h<m?l[f]=i:(l[f]=i,++u[i])}}},1682:function(v){function g(o,i){for(var f=1,u=o.length,l=o[0],m=o[0],h=1;h<u;++h)if(m=l,l=o[h],i(l,m)){if(h===f){f++;continue}o[f++]=l}return o.length=f,o}function r(o){for(var i=1,f=o.length,u=o[0],l=o[0],m=1;m<f;++m,l=u)if(l=u,u=o[m],u!==l){if(m===i){i++;continue}o[i++]=u}return o.length=i,o}function t(o,i,f){return o.length===0?o:i?(f||o.sort(i),g(o,i)):(f||o.sort(),r(o))}v.exports=t},4359:function(v,g,r){v.exports=f;var t=r(7718),o=null,i=null;typeof document<"u"&&(o=document.createElement("canvas"),o.width=8192,o.height=1024,i=o.getContext("2d"));function f(u,l){return(typeof l!="object"||l===null)&&(l={}),t(u,l.canvas||o,l.context||i,l)}},7718:function(v,g,r){v.exports=D,v.exports.processPixels=k;var t=r(3711),o=r(9618),i=r(5878),f=r(332),u=r(2538),l=r(2095),m="b",h="b|",w="i",c="i|",a="sup",p="+",x="+1",A="sub",P="-",y="-1";function C(V,O,N,B){for(var z="<"+V+">",H="</"+V+">",X=z.length,$=H.length,ne=O[0]===p||O[0]===P,q=0,ue=-$;q>-1&&(q=N.indexOf(z,q),!(q===-1||(ue=N.indexOf(H,q+X),ue===-1)||ue<=q));){for(var te=q;te<ue+$;++te)if(te<q+X||te>=ue)B[te]=null,N=N.substr(0,te)+" "+N.substr(te+1);else if(B[te]!==null){var J=B[te].indexOf(O[0]);J===-1?B[te]+=O:ne&&(B[te]=B[te].substr(0,J+1)+(1+parseInt(B[te][J+1]))+B[te].substr(J+2))}var ie=q+X,K=N.substr(ie,ue-ie),ee=K.indexOf(z);ee!==-1?q=ee:q=ue+$}return B}function M(V,O,N){for(var B=O.textAlign||"start",z=O.textBaseline||"alphabetic",H=[1<<30,1<<30],X=[0,0],$=V.length,ne=0;ne<$;++ne)for(var q=V[ne],ue=0;ue<2;++ue)H[ue]=Math.min(H[ue],q[ue])|0,X[ue]=Math.max(X[ue],q[ue])|0;var te=0;switch(B){case"center":te=-.5*(H[0]+X[0]);break;case"right":case"end":te=-X[0];break;case"left":case"start":te=-H[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+B+"'")}var J=0;switch(z){case"hanging":case"top":J=-H[1];break;case"middle":J=-.5*(H[1]+X[1]);break;case"alphabetic":case"ideographic":J=-3*N;break;case"bottom":J=-X[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+z+"'")}var ie=1/N;return"lineHeight"in O?ie*=+O.lineHeight:"width"in O?ie=O.width/(X[0]-H[0]):"height"in O&&(ie=O.height/(X[1]-H[1])),V.map(function(K){return[ie*(K[0]+te),ie*(K[1]+J)]})}function s(V,O,N,B,z,H){N=N.replace(/\n/g,""),H.breaklines===!0?N=N.replace(/\<br\>/g,`
`):N=N.replace(/\<br\>/g," ");var X="",$=[];for(Z=0;Z<N.length;++Z)$[Z]=X;H.bolds===!0&&($=C(m,h,N,$)),H.italics===!0&&($=C(w,c,N,$)),H.superscripts===!0&&($=C(a,x,N,$)),H.subscripts===!0&&($=C(A,y,N,$));var ne=[],q="";for(Z=0;Z<N.length;++Z)$[Z]!==null&&(q+=N[Z],ne.push($[Z]));var ue=q.split(`
`),te=ue.length,J=Math.round(z*B),ie=B,K=B*2,ee=0,le=te*J+K;V.height<le&&(V.height=le),O.fillStyle="#000",O.fillRect(0,0,V.width,V.height),O.fillStyle="#fff";var j,Z,fe,re,ce,xe=0,Te="";function we(){if(Te!==""){var Ge=O.measureText(Te).width;O.fillText(Te,ie+fe,K+re),fe+=Ge}}function _e(){return""+Math.round(ce)+"px "}function ke(Ge,rt){var ot=""+O.font;if(H.subscripts===!0){var $e=Ge.indexOf(P),qe=rt.indexOf(P),ht=$e>-1?parseInt(Ge[1+$e]):0,vt=qe>-1?parseInt(rt[1+qe]):0;ht!==vt&&(ot=ot.replace(_e(),"?px "),ce*=Math.pow(.75,vt-ht),ot=ot.replace("?px ",_e())),re+=.25*J*(vt-ht)}if(H.superscripts===!0){var pt=Ge.indexOf(p),wt=rt.indexOf(p),Et=pt>-1?parseInt(Ge[1+pt]):0,nt=wt>-1?parseInt(rt[1+wt]):0;Et!==nt&&(ot=ot.replace(_e(),"?px "),ce*=Math.pow(.75,nt-Et),ot=ot.replace("?px ",_e())),re-=.25*J*(nt-Et)}if(H.bolds===!0){var Fe=Ge.indexOf(h)>-1,We=rt.indexOf(h)>-1;!Fe&&We&&(Ze?ot=ot.replace("italic ","italic bold "):ot="bold "+ot),Fe&&!We&&(ot=ot.replace("bold ",""))}if(H.italics===!0){var Ze=Ge.indexOf(c)>-1,Ye=rt.indexOf(c)>-1;!Ze&&Ye&&(ot="italic "+ot),Ze&&!Ye&&(ot=ot.replace("italic ",""))}O.font=ot}for(j=0;j<te;++j){var Ne=ue[j]+`
`;for(fe=0,re=j*J,ce=B,Te="",Z=0;Z<Ne.length;++Z){var Ee=Z+xe<ne.length?ne[Z+xe]:ne[ne.length-1];X===Ee?Te+=Ne[Z]:(we(),Te=Ne[Z],Ee!==void 0&&(ke(X,Ee),X=Ee))}we(),xe+=Ne.length;var ze=Math.round(fe+2*ie)|0;ee<ze&&(ee=ze)}var Ce=ee,Oe=K+J*te,Le=o(O.getImageData(0,0,Ce,Oe).data,[Oe,Ce,4]);return Le.pick(-1,-1,0).transpose(1,0)}function _(V,O){var N=t(V,128);return O?i(N.cells,N.positions,.25):{edges:N.cells,positions:N.positions}}function b(V,O,N,B){var z=_(V,B),H=M(z.positions,O,N),X=z.edges,$=O.orientation==="ccw";if(f(H,X),O.polygons||O.polygon||O.polyline){for(var ne=l(X,H),q=new Array(ne.length),ue=0;ue<ne.length;++ue){for(var te=ne[ue],J=new Array(te.length),ie=0;ie<te.length;++ie){for(var K=te[ie],ee=new Array(K.length),le=0;le<K.length;++le)ee[le]=H[K[le]].slice();$&&ee.reverse(),J[ie]=ee}q[ue]=J}return q}else return O.triangles||O.triangulate||O.triangle?{cells:u(H,X,{delaunay:!1,exterior:!1,interior:!0}),positions:H}:{edges:X,positions:H}}function k(V,O,N){try{return b(V,O,N,!0)}catch{}try{return b(V,O,N,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function D(V,O,N,B){var z=64,H=1.25,X={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};B&&(B.size&&B.size>0&&(z=B.size),B.lineSpacing&&B.lineSpacing>0&&(H=B.lineSpacing),B.styletags&&B.styletags.breaklines&&(X.breaklines=!!B.styletags.breaklines),B.styletags&&B.styletags.bolds&&(X.bolds=!!B.styletags.bolds),B.styletags&&B.styletags.italics&&(X.italics=!!B.styletags.italics),B.styletags&&B.styletags.subscripts&&(X.subscripts=!!B.styletags.subscripts),B.styletags&&B.styletags.superscripts&&(X.superscripts=!!B.styletags.superscripts)),N.font=[B.fontStyle,B.fontVariant,B.fontWeight,z+"px",B.font].filter(function(ne){return ne}).join(" "),N.textAlign="start",N.textBaseline="alphabetic",N.direction="ltr";var $=s(O,N,V,z,H,X);return k($,B,z)}},1538:function(v){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function r(_){_.permitHostObjects___&&_.permitHostObjects___(r)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=r);var t=!1;if(typeof WeakMap=="function"){var o=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new o,f=Object.freeze({});if(i.set(f,1),i.get(f)!==1)t=!0;else{v.exports=WeakMap;return}}}var u=Object.getOwnPropertyNames,l=Object.defineProperty,m=Object.isExtensible,h="weakmap:",w=h+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),a=new Uint8Array(c);crypto.getRandomValues(a),w=h+"rand:"+Array.prototype.map.call(a,function(_){return(_%36).toString(36)}).join("")+"___"}function p(_){return!(_.substr(0,h.length)==h&&_.substr(_.length-3)==="___")}if(l(Object,"getOwnPropertyNames",{value:function(b){return u(b).filter(p)}}),"getPropertyNames"in Object){var x=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(b){return x(b).filter(p)}})}function A(_){if(_!==Object(_))throw new TypeError("Not an object: "+_);var b=_[w];if(b&&b.key===_)return b;if(m(_)){b={key:_};try{return l(_,w,{value:b,writable:!1,enumerable:!1,configurable:!1}),b}catch{return}}}(function(){var _=Object.freeze;l(Object,"freeze",{value:function(V){return A(V),_(V)}});var b=Object.seal;l(Object,"seal",{value:function(V){return A(V),b(V)}});var k=Object.preventExtensions;l(Object,"preventExtensions",{value:function(V){return A(V),k(V)}})})();function P(_){return _.prototype=null,Object.freeze(_)}var y=!1;function C(){!y&&typeof console<"u"&&(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var M=0,s=function(){this instanceof s||C();var _=[],b=[],k=M++;function D(B,z){var H,X=A(B);return X?k in X?X[k]:z:(H=_.indexOf(B),H>=0?b[H]:z)}function V(B){var z=A(B);return z?k in z:_.indexOf(B)>=0}function O(B,z){var H,X=A(B);return X?X[k]=z:(H=_.indexOf(B),H>=0?b[H]=z:(H=_.length,b[H]=z,_[H]=B)),this}function N(B){var z=A(B),H,X;return z?k in z&&delete z[k]:(H=_.indexOf(B),H<0?!1:(X=_.length-1,_[H]=void 0,b[H]=b[X],_[H]=_[X],_.length=X,b.length=X,!0))}return Object.create(s.prototype,{get___:{value:P(D)},has___:{value:P(V)},set___:{value:P(O)},delete___:{value:P(N)}})};s.prototype=Object.create(Object.prototype,{get:{value:function(b,k){return this.get___(b,k)},writable:!0,configurable:!0},has:{value:function(b){return this.has___(b)},writable:!0,configurable:!0},set:{value:function(b,k){return this.set___(b,k)},writable:!0,configurable:!0},delete:{value:function(b){return this.delete___(b)},writable:!0,configurable:!0}}),typeof o=="function"?function(){t&&typeof Proxy<"u"&&(Proxy=void 0);function _(){this instanceof s||C();var b=new o,k=void 0,D=!1;function V(z,H){return k?b.has(z)?b.get(z):k.get___(z,H):b.get(z,H)}function O(z){return b.has(z)||(k?k.has___(z):!1)}var N;t?N=function(z,H){return b.set(z,H),b.has(z)||(k||(k=new s),k.set(z,H)),this}:N=function(z,H){if(D)try{b.set(z,H)}catch{k||(k=new s),k.set___(z,H)}else b.set(z,H);return this};function B(z){var H=!!b.delete(z);return k&&k.delete___(z)||H}return Object.create(s.prototype,{get___:{value:P(V)},has___:{value:P(O)},set___:{value:P(N)},delete___:{value:P(B)},permitHostObjects___:{value:P(function(z){if(z===r)D=!0;else throw new Error("bogus call to permitHostObjects___")})}})}_.prototype=s.prototype,v.exports=_,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),v.exports=s)})()},236:function(v,g,r){var t=r(8284);v.exports=o;function o(){var i={};return function(f){if((typeof f!="object"||f===null)&&typeof f!="function")throw new Error("Weakmap-shim: Key must be object");var u=f.valueOf(i);return u&&u.identity===i?u:t(f,i)}}},8284:function(v){v.exports=g;function g(r,t){var o={identity:t},i=r.valueOf;return Object.defineProperty(r,"valueOf",{value:function(f){return f!==t?i.apply(this,arguments):o},writable:!0}),o}},606:function(v,g,r){var t=r(236);v.exports=o;function o(){var i=t();return{get:function(f,u){var l=i(f);return l.hasOwnProperty("value")?l.value:u},set:function(f,u){return i(f).value=u,this},has:function(f){return"value"in i(f)},delete:function(f){return delete i(f).value}}}},3349:function(v){function g(){return function(u,l,m,h,w,c){var a=u[0],p=m[0],x=[0],A=p;h|=0;var P=0,y=p;for(P=0;P<a;++P){{var C=l[h]-c,M=l[h+A]-c;C>=0!=M>=0&&w.push(x[0]+.5+.5*(C+M)/(C-M))}h+=y,++x[0]}}}function r(){return g()}var t=r;function o(u){var l={};return function(h,w,c){var a=h.dtype,p=h.order,x=[a,p.join()].join(),A=l[x];return A||(l[x]=A=u([a,p])),A(h.shape.slice(0),h.data,h.stride,h.offset|0,w,c)}}function i(u){return o(t.bind(void 0,u))}function f(u){return i({funcName:u.funcName})}v.exports=f({funcName:"zeroCrossings"})},781:function(v,g,r){v.exports=o;var t=r(3349);function o(i,f){var u=[];return f=+f||0,t(i.hi(i.shape[0]-1),u,f),u}},7790:function(){}},n={};function E(v){var g=n[v];if(g!==void 0)return g.exports;var r=n[v]={id:v,loaded:!1,exports:{}};return S[v].call(r.exports,r,r.exports,E),r.loaded=!0,r.exports}(function(){E.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){E.nmd=function(v){return v.paths=[],v.children||(v.children=[]),v}}();var T=E(1964);U.exports=T})()},33576:function(U,F,e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function d(nt,Fe){if(!(nt instanceof Fe))throw new TypeError("Cannot call a class as a function")}function S(nt,Fe){for(var We=0;We<Fe.length;We++){var Ze=Fe[We];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(nt,E(Ze.key),Ze)}}function n(nt,Fe,We){return Fe&&S(nt.prototype,Fe),Object.defineProperty(nt,"prototype",{writable:!1}),nt}function E(nt){var Fe=T(nt,"string");return f(Fe)==="symbol"?Fe:String(Fe)}function T(nt,Fe){if(f(nt)!=="object"||nt===null)return nt;var We=nt[Symbol.toPrimitive];if(We!==void 0){var Ze=We.call(nt,Fe);if(f(Ze)!=="object")return Ze;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(nt)}function v(nt,Fe,We){function Ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}return Fe=r(Fe),g(nt,Ze()?Reflect.construct(Fe,[],r(nt).constructor):Fe.apply(nt,We))}function g(nt,Fe){if(Fe&&(f(Fe)==="object"||typeof Fe=="function"))return Fe;if(Fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(nt)}function r(nt){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(We){return We.__proto__||Object.getPrototypeOf(We)},r(nt)}function t(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function o(nt,Fe){if(typeof Fe!="function"&&Fe!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(Fe&&Fe.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),Fe&&i(nt,Fe)}function i(nt,Fe){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ze,Ye){return Ze.__proto__=Ye,Ze},i(nt,Fe)}function f(nt){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Fe){return typeof Fe}:function(Fe){return Fe&&typeof Symbol=="function"&&Fe.constructor===Symbol&&Fe!==Symbol.prototype?"symbol":typeof Fe},f(nt)}var u=e(59968),l=e(35984),m=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;F.Buffer=a,F.SlowBuffer=k,F.INSPECT_MAX_BYTES=50;var h=2147483647;F.kMaxLength=h,a.TYPED_ARRAY_SUPPORT=w(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var nt=new Uint8Array(1),Fe={foo:function(){return 42}};return Object.setPrototypeOf(Fe,Uint8Array.prototype),Object.setPrototypeOf(nt,Fe),nt.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function c(nt){if(nt>h)throw new RangeError('The value "'+nt+'" is invalid for option "size"');var Fe=new Uint8Array(nt);return Object.setPrototypeOf(Fe,a.prototype),Fe}function a(nt,Fe,We){if(typeof nt=="number"){if(typeof Fe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return P(nt)}return p(nt,Fe,We)}a.poolSize=8192;function p(nt,Fe,We){if(typeof nt=="string")return y(nt,Fe);if(ArrayBuffer.isView(nt))return M(nt);if(nt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+f(nt));if(ht(nt,ArrayBuffer)||nt&&ht(nt.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ht(nt,SharedArrayBuffer)||nt&&ht(nt.buffer,SharedArrayBuffer)))return s(nt,Fe,We);if(typeof nt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ze=nt.valueOf&&nt.valueOf();if(Ze!=null&&Ze!==nt)return a.from(Ze,Fe,We);var Ye=_(nt);if(Ye)return Ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof nt[Symbol.toPrimitive]=="function")return a.from(nt[Symbol.toPrimitive]("string"),Fe,We);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+f(nt))}a.from=function(nt,Fe,We){return p(nt,Fe,We)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function x(nt){if(typeof nt!="number")throw new TypeError('"size" argument must be of type number');if(nt<0)throw new RangeError('The value "'+nt+'" is invalid for option "size"')}function A(nt,Fe,We){return x(nt),nt<=0?c(nt):Fe!==void 0?typeof We=="string"?c(nt).fill(Fe,We):c(nt).fill(Fe):c(nt)}a.alloc=function(nt,Fe,We){return A(nt,Fe,We)};function P(nt){return x(nt),c(nt<0?0:b(nt)|0)}a.allocUnsafe=function(nt){return P(nt)},a.allocUnsafeSlow=function(nt){return P(nt)};function y(nt,Fe){if((typeof Fe!="string"||Fe==="")&&(Fe="utf8"),!a.isEncoding(Fe))throw new TypeError("Unknown encoding: "+Fe);var We=D(nt,Fe)|0,Ze=c(We),Ye=Ze.write(nt,Fe);return Ye!==We&&(Ze=Ze.slice(0,Ye)),Ze}function C(nt){for(var Fe=nt.length<0?0:b(nt.length)|0,We=c(Fe),Ze=0;Ze<Fe;Ze+=1)We[Ze]=nt[Ze]&255;return We}function M(nt){if(ht(nt,Uint8Array)){var Fe=new Uint8Array(nt);return s(Fe.buffer,Fe.byteOffset,Fe.byteLength)}return C(nt)}function s(nt,Fe,We){if(Fe<0||nt.byteLength<Fe)throw new RangeError('"offset" is outside of buffer bounds');if(nt.byteLength<Fe+(We||0))throw new RangeError('"length" is outside of buffer bounds');var Ze;return Fe===void 0&&We===void 0?Ze=new Uint8Array(nt):We===void 0?Ze=new Uint8Array(nt,Fe):Ze=new Uint8Array(nt,Fe,We),Object.setPrototypeOf(Ze,a.prototype),Ze}function _(nt){if(a.isBuffer(nt)){var Fe=b(nt.length)|0,We=c(Fe);return We.length===0||nt.copy(We,0,0,Fe),We}if(nt.length!==void 0)return typeof nt.length!="number"||vt(nt.length)?c(0):C(nt);if(nt.type==="Buffer"&&Array.isArray(nt.data))return C(nt.data)}function b(nt){if(nt>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return nt|0}function k(nt){return+nt!=nt&&(nt=0),a.alloc(+nt)}a.isBuffer=function(Fe){return Fe!=null&&Fe._isBuffer===!0&&Fe!==a.prototype},a.compare=function(Fe,We){if(ht(Fe,Uint8Array)&&(Fe=a.from(Fe,Fe.offset,Fe.byteLength)),ht(We,Uint8Array)&&(We=a.from(We,We.offset,We.byteLength)),!a.isBuffer(Fe)||!a.isBuffer(We))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Fe===We)return 0;for(var Ze=Fe.length,Ye=We.length,Ie=0,De=Math.min(Ze,Ye);Ie<De;++Ie)if(Fe[Ie]!==We[Ie]){Ze=Fe[Ie],Ye=We[Ie];break}return Ze<Ye?-1:Ye<Ze?1:0},a.isEncoding=function(Fe){switch(String(Fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(Fe,We){if(!Array.isArray(Fe))throw new TypeError('"list" argument must be an Array of Buffers');if(Fe.length===0)return a.alloc(0);var Ze;if(We===void 0)for(We=0,Ze=0;Ze<Fe.length;++Ze)We+=Fe[Ze].length;var Ye=a.allocUnsafe(We),Ie=0;for(Ze=0;Ze<Fe.length;++Ze){var De=Fe[Ze];if(ht(De,Uint8Array))Ie+De.length>Ye.length?(a.isBuffer(De)||(De=a.from(De)),De.copy(Ye,Ie)):Uint8Array.prototype.set.call(Ye,De,Ie);else if(a.isBuffer(De))De.copy(Ye,Ie);else throw new TypeError('"list" argument must be an Array of Buffers');Ie+=De.length}return Ye};function D(nt,Fe){if(a.isBuffer(nt))return nt.length;if(ArrayBuffer.isView(nt)||ht(nt,ArrayBuffer))return nt.byteLength;if(typeof nt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+f(nt));var We=nt.length,Ze=arguments.length>2&&arguments[2]===!0;if(!Ze&&We===0)return 0;for(var Ye=!1;;)switch(Fe){case"ascii":case"latin1":case"binary":return We;case"utf8":case"utf-8":return Ge(nt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We*2;case"hex":return We>>>1;case"base64":return $e(nt).length;default:if(Ye)return Ze?-1:Ge(nt).length;Fe=(""+Fe).toLowerCase(),Ye=!0}}a.byteLength=D;function V(nt,Fe,We){var Ze=!1;if((Fe===void 0||Fe<0)&&(Fe=0),Fe>this.length||((We===void 0||We>this.length)&&(We=this.length),We<=0)||(We>>>=0,Fe>>>=0,We<=Fe))return"";for(nt||(nt="utf8");;)switch(nt){case"hex":return ee(this,Fe,We);case"utf8":case"utf-8":return ue(this,Fe,We);case"ascii":return ie(this,Fe,We);case"latin1":case"binary":return K(this,Fe,We);case"base64":return q(this,Fe,We);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,Fe,We);default:if(Ze)throw new TypeError("Unknown encoding: "+nt);nt=(nt+"").toLowerCase(),Ze=!0}}a.prototype._isBuffer=!0;function O(nt,Fe,We){var Ze=nt[Fe];nt[Fe]=nt[We],nt[We]=Ze}a.prototype.swap16=function(){var Fe=this.length;if(Fe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var We=0;We<Fe;We+=2)O(this,We,We+1);return this},a.prototype.swap32=function(){var Fe=this.length;if(Fe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var We=0;We<Fe;We+=4)O(this,We,We+3),O(this,We+1,We+2);return this},a.prototype.swap64=function(){var Fe=this.length;if(Fe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var We=0;We<Fe;We+=8)O(this,We,We+7),O(this,We+1,We+6),O(this,We+2,We+5),O(this,We+3,We+4);return this},a.prototype.toString=function(){var Fe=this.length;return Fe===0?"":arguments.length===0?ue(this,0,Fe):V.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(Fe){if(!a.isBuffer(Fe))throw new TypeError("Argument must be a Buffer");return this===Fe?!0:a.compare(this,Fe)===0},a.prototype.inspect=function(){var Fe="",We=F.INSPECT_MAX_BYTES;return Fe=this.toString("hex",0,We).replace(/(.{2})/g,"$1 ").trim(),this.length>We&&(Fe+=" ... "),"<Buffer "+Fe+">"},m&&(a.prototype[m]=a.prototype.inspect),a.prototype.compare=function(Fe,We,Ze,Ye,Ie){if(ht(Fe,Uint8Array)&&(Fe=a.from(Fe,Fe.offset,Fe.byteLength)),!a.isBuffer(Fe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+f(Fe));if(We===void 0&&(We=0),Ze===void 0&&(Ze=Fe?Fe.length:0),Ye===void 0&&(Ye=0),Ie===void 0&&(Ie=this.length),We<0||Ze>Fe.length||Ye<0||Ie>this.length)throw new RangeError("out of range index");if(Ye>=Ie&&We>=Ze)return 0;if(Ye>=Ie)return-1;if(We>=Ze)return 1;if(We>>>=0,Ze>>>=0,Ye>>>=0,Ie>>>=0,this===Fe)return 0;for(var De=Ie-Ye,je=Ze-We,Re=Math.min(De,je),pe=this.slice(Ye,Ie),be=Fe.slice(We,Ze),Ue=0;Ue<Re;++Ue)if(pe[Ue]!==be[Ue]){De=pe[Ue],je=be[Ue];break}return De<je?-1:je<De?1:0};function N(nt,Fe,We,Ze,Ye){if(nt.length===0)return-1;if(typeof We=="string"?(Ze=We,We=0):We>2147483647?We=2147483647:We<-2147483648&&(We=-2147483648),We=+We,vt(We)&&(We=Ye?0:nt.length-1),We<0&&(We=nt.length+We),We>=nt.length){if(Ye)return-1;We=nt.length-1}else if(We<0)if(Ye)We=0;else return-1;if(typeof Fe=="string"&&(Fe=a.from(Fe,Ze)),a.isBuffer(Fe))return Fe.length===0?-1:B(nt,Fe,We,Ze,Ye);if(typeof Fe=="number")return Fe=Fe&255,typeof Uint8Array.prototype.indexOf=="function"?Ye?Uint8Array.prototype.indexOf.call(nt,Fe,We):Uint8Array.prototype.lastIndexOf.call(nt,Fe,We):B(nt,[Fe],We,Ze,Ye);throw new TypeError("val must be string, number or Buffer")}function B(nt,Fe,We,Ze,Ye){var Ie=1,De=nt.length,je=Fe.length;if(Ze!==void 0&&(Ze=String(Ze).toLowerCase(),Ze==="ucs2"||Ze==="ucs-2"||Ze==="utf16le"||Ze==="utf-16le")){if(nt.length<2||Fe.length<2)return-1;Ie=2,De/=2,je/=2,We/=2}function Re(st,lt){return Ie===1?st[lt]:st.readUInt16BE(lt*Ie)}var pe;if(Ye){var be=-1;for(pe=We;pe<De;pe++)if(Re(nt,pe)===Re(Fe,be===-1?0:pe-be)){if(be===-1&&(be=pe),pe-be+1===je)return be*Ie}else be!==-1&&(pe-=pe-be),be=-1}else for(We+je>De&&(We=De-je),pe=We;pe>=0;pe--){for(var Ue=!0,et=0;et<je;et++)if(Re(nt,pe+et)!==Re(Fe,et)){Ue=!1;break}if(Ue)return pe}return-1}a.prototype.includes=function(Fe,We,Ze){return this.indexOf(Fe,We,Ze)!==-1},a.prototype.indexOf=function(Fe,We,Ze){return N(this,Fe,We,Ze,!0)},a.prototype.lastIndexOf=function(Fe,We,Ze){return N(this,Fe,We,Ze,!1)};function z(nt,Fe,We,Ze){We=Number(We)||0;var Ye=nt.length-We;Ze?(Ze=Number(Ze),Ze>Ye&&(Ze=Ye)):Ze=Ye;var Ie=Fe.length;Ze>Ie/2&&(Ze=Ie/2);var De;for(De=0;De<Ze;++De){var je=parseInt(Fe.substr(De*2,2),16);if(vt(je))return De;nt[We+De]=je}return De}function H(nt,Fe,We,Ze){return qe(Ge(Fe,nt.length-We),nt,We,Ze)}function X(nt,Fe,We,Ze){return qe(rt(Fe),nt,We,Ze)}function $(nt,Fe,We,Ze){return qe($e(Fe),nt,We,Ze)}function ne(nt,Fe,We,Ze){return qe(ot(Fe,nt.length-We),nt,We,Ze)}a.prototype.write=function(Fe,We,Ze,Ye){if(We===void 0)Ye="utf8",Ze=this.length,We=0;else if(Ze===void 0&&typeof We=="string")Ye=We,Ze=this.length,We=0;else if(isFinite(We))We=We>>>0,isFinite(Ze)?(Ze=Ze>>>0,Ye===void 0&&(Ye="utf8")):(Ye=Ze,Ze=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ie=this.length-We;if((Ze===void 0||Ze>Ie)&&(Ze=Ie),Fe.length>0&&(Ze<0||We<0)||We>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ye||(Ye="utf8");for(var De=!1;;)switch(Ye){case"hex":return z(this,Fe,We,Ze);case"utf8":case"utf-8":return H(this,Fe,We,Ze);case"ascii":case"latin1":case"binary":return X(this,Fe,We,Ze);case"base64":return $(this,Fe,We,Ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,Fe,We,Ze);default:if(De)throw new TypeError("Unknown encoding: "+Ye);Ye=(""+Ye).toLowerCase(),De=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(nt,Fe,We){return Fe===0&&We===nt.length?u.fromByteArray(nt):u.fromByteArray(nt.slice(Fe,We))}function ue(nt,Fe,We){We=Math.min(nt.length,We);for(var Ze=[],Ye=Fe;Ye<We;){var Ie=nt[Ye],De=null,je=Ie>239?4:Ie>223?3:Ie>191?2:1;if(Ye+je<=We){var Re=void 0,pe=void 0,be=void 0,Ue=void 0;switch(je){case 1:Ie<128&&(De=Ie);break;case 2:Re=nt[Ye+1],(Re&192)===128&&(Ue=(Ie&31)<<6|Re&63,Ue>127&&(De=Ue));break;case 3:Re=nt[Ye+1],pe=nt[Ye+2],(Re&192)===128&&(pe&192)===128&&(Ue=(Ie&15)<<12|(Re&63)<<6|pe&63,Ue>2047&&(Ue<55296||Ue>57343)&&(De=Ue));break;case 4:Re=nt[Ye+1],pe=nt[Ye+2],be=nt[Ye+3],(Re&192)===128&&(pe&192)===128&&(be&192)===128&&(Ue=(Ie&15)<<18|(Re&63)<<12|(pe&63)<<6|be&63,Ue>65535&&Ue<1114112&&(De=Ue))}}De===null?(De=65533,je=1):De>65535&&(De-=65536,Ze.push(De>>>10&1023|55296),De=56320|De&1023),Ze.push(De),Ye+=je}return J(Ze)}var te=4096;function J(nt){var Fe=nt.length;if(Fe<=te)return String.fromCharCode.apply(String,nt);for(var We="",Ze=0;Ze<Fe;)We+=String.fromCharCode.apply(String,nt.slice(Ze,Ze+=te));return We}function ie(nt,Fe,We){var Ze="";We=Math.min(nt.length,We);for(var Ye=Fe;Ye<We;++Ye)Ze+=String.fromCharCode(nt[Ye]&127);return Ze}function K(nt,Fe,We){var Ze="";We=Math.min(nt.length,We);for(var Ye=Fe;Ye<We;++Ye)Ze+=String.fromCharCode(nt[Ye]);return Ze}function ee(nt,Fe,We){var Ze=nt.length;(!Fe||Fe<0)&&(Fe=0),(!We||We<0||We>Ze)&&(We=Ze);for(var Ye="",Ie=Fe;Ie<We;++Ie)Ye+=pt[nt[Ie]];return Ye}function le(nt,Fe,We){for(var Ze=nt.slice(Fe,We),Ye="",Ie=0;Ie<Ze.length-1;Ie+=2)Ye+=String.fromCharCode(Ze[Ie]+Ze[Ie+1]*256);return Ye}a.prototype.slice=function(Fe,We){var Ze=this.length;Fe=~~Fe,We=We===void 0?Ze:~~We,Fe<0?(Fe+=Ze,Fe<0&&(Fe=0)):Fe>Ze&&(Fe=Ze),We<0?(We+=Ze,We<0&&(We=0)):We>Ze&&(We=Ze),We<Fe&&(We=Fe);var Ye=this.subarray(Fe,We);return Object.setPrototypeOf(Ye,a.prototype),Ye};function j(nt,Fe,We){if(nt%1!==0||nt<0)throw new RangeError("offset is not uint");if(nt+Fe>We)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(Fe,We,Ze){Fe=Fe>>>0,We=We>>>0,Ze||j(Fe,We,this.length);for(var Ye=this[Fe],Ie=1,De=0;++De<We&&(Ie*=256);)Ye+=this[Fe+De]*Ie;return Ye},a.prototype.readUintBE=a.prototype.readUIntBE=function(Fe,We,Ze){Fe=Fe>>>0,We=We>>>0,Ze||j(Fe,We,this.length);for(var Ye=this[Fe+--We],Ie=1;We>0&&(Ie*=256);)Ye+=this[Fe+--We]*Ie;return Ye},a.prototype.readUint8=a.prototype.readUInt8=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,1,this.length),this[Fe]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,2,this.length),this[Fe]|this[Fe+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,2,this.length),this[Fe]<<8|this[Fe+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,4,this.length),(this[Fe]|this[Fe+1]<<8|this[Fe+2]<<16)+this[Fe+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,4,this.length),this[Fe]*16777216+(this[Fe+1]<<16|this[Fe+2]<<8|this[Fe+3])},a.prototype.readBigUInt64LE=wt(function(Fe){Fe=Fe>>>0,ze(Fe,"offset");var We=this[Fe],Ze=this[Fe+7];(We===void 0||Ze===void 0)&&Ce(Fe,this.length-8);var Ye=We+this[++Fe]*Math.pow(2,8)+this[++Fe]*Math.pow(2,16)+this[++Fe]*Math.pow(2,24),Ie=this[++Fe]+this[++Fe]*Math.pow(2,8)+this[++Fe]*Math.pow(2,16)+Ze*Math.pow(2,24);return BigInt(Ye)+(BigInt(Ie)<<BigInt(32))}),a.prototype.readBigUInt64BE=wt(function(Fe){Fe=Fe>>>0,ze(Fe,"offset");var We=this[Fe],Ze=this[Fe+7];(We===void 0||Ze===void 0)&&Ce(Fe,this.length-8);var Ye=We*Math.pow(2,24)+this[++Fe]*Math.pow(2,16)+this[++Fe]*Math.pow(2,8)+this[++Fe],Ie=this[++Fe]*Math.pow(2,24)+this[++Fe]*Math.pow(2,16)+this[++Fe]*Math.pow(2,8)+Ze;return(BigInt(Ye)<<BigInt(32))+BigInt(Ie)}),a.prototype.readIntLE=function(Fe,We,Ze){Fe=Fe>>>0,We=We>>>0,Ze||j(Fe,We,this.length);for(var Ye=this[Fe],Ie=1,De=0;++De<We&&(Ie*=256);)Ye+=this[Fe+De]*Ie;return Ie*=128,Ye>=Ie&&(Ye-=Math.pow(2,8*We)),Ye},a.prototype.readIntBE=function(Fe,We,Ze){Fe=Fe>>>0,We=We>>>0,Ze||j(Fe,We,this.length);for(var Ye=We,Ie=1,De=this[Fe+--Ye];Ye>0&&(Ie*=256);)De+=this[Fe+--Ye]*Ie;return Ie*=128,De>=Ie&&(De-=Math.pow(2,8*We)),De},a.prototype.readInt8=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,1,this.length),this[Fe]&128?(255-this[Fe]+1)*-1:this[Fe]},a.prototype.readInt16LE=function(Fe,We){Fe=Fe>>>0,We||j(Fe,2,this.length);var Ze=this[Fe]|this[Fe+1]<<8;return Ze&32768?Ze|4294901760:Ze},a.prototype.readInt16BE=function(Fe,We){Fe=Fe>>>0,We||j(Fe,2,this.length);var Ze=this[Fe+1]|this[Fe]<<8;return Ze&32768?Ze|4294901760:Ze},a.prototype.readInt32LE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,4,this.length),this[Fe]|this[Fe+1]<<8|this[Fe+2]<<16|this[Fe+3]<<24},a.prototype.readInt32BE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,4,this.length),this[Fe]<<24|this[Fe+1]<<16|this[Fe+2]<<8|this[Fe+3]},a.prototype.readBigInt64LE=wt(function(Fe){Fe=Fe>>>0,ze(Fe,"offset");var We=this[Fe],Ze=this[Fe+7];(We===void 0||Ze===void 0)&&Ce(Fe,this.length-8);var Ye=this[Fe+4]+this[Fe+5]*Math.pow(2,8)+this[Fe+6]*Math.pow(2,16)+(Ze<<24);return(BigInt(Ye)<<BigInt(32))+BigInt(We+this[++Fe]*Math.pow(2,8)+this[++Fe]*Math.pow(2,16)+this[++Fe]*Math.pow(2,24))}),a.prototype.readBigInt64BE=wt(function(Fe){Fe=Fe>>>0,ze(Fe,"offset");var We=this[Fe],Ze=this[Fe+7];(We===void 0||Ze===void 0)&&Ce(Fe,this.length-8);var Ye=(We<<24)+this[++Fe]*Math.pow(2,16)+this[++Fe]*Math.pow(2,8)+this[++Fe];return(BigInt(Ye)<<BigInt(32))+BigInt(this[++Fe]*Math.pow(2,24)+this[++Fe]*Math.pow(2,16)+this[++Fe]*Math.pow(2,8)+Ze)}),a.prototype.readFloatLE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,4,this.length),l.read(this,Fe,!0,23,4)},a.prototype.readFloatBE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,4,this.length),l.read(this,Fe,!1,23,4)},a.prototype.readDoubleLE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,8,this.length),l.read(this,Fe,!0,52,8)},a.prototype.readDoubleBE=function(Fe,We){return Fe=Fe>>>0,We||j(Fe,8,this.length),l.read(this,Fe,!1,52,8)};function Z(nt,Fe,We,Ze,Ye,Ie){if(!a.isBuffer(nt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Fe>Ye||Fe<Ie)throw new RangeError('"value" argument is out of bounds');if(We+Ze>nt.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(Fe,We,Ze,Ye){if(Fe=+Fe,We=We>>>0,Ze=Ze>>>0,!Ye){var Ie=Math.pow(2,8*Ze)-1;Z(this,Fe,We,Ze,Ie,0)}var De=1,je=0;for(this[We]=Fe&255;++je<Ze&&(De*=256);)this[We+je]=Fe/De&255;return We+Ze},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(Fe,We,Ze,Ye){if(Fe=+Fe,We=We>>>0,Ze=Ze>>>0,!Ye){var Ie=Math.pow(2,8*Ze)-1;Z(this,Fe,We,Ze,Ie,0)}var De=Ze-1,je=1;for(this[We+De]=Fe&255;--De>=0&&(je*=256);)this[We+De]=Fe/je&255;return We+Ze},a.prototype.writeUint8=a.prototype.writeUInt8=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,1,255,0),this[We]=Fe&255,We+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,2,65535,0),this[We]=Fe&255,this[We+1]=Fe>>>8,We+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,2,65535,0),this[We]=Fe>>>8,this[We+1]=Fe&255,We+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,4,4294967295,0),this[We+3]=Fe>>>24,this[We+2]=Fe>>>16,this[We+1]=Fe>>>8,this[We]=Fe&255,We+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,4,4294967295,0),this[We]=Fe>>>24,this[We+1]=Fe>>>16,this[We+2]=Fe>>>8,this[We+3]=Fe&255,We+4};function fe(nt,Fe,We,Ze,Ye){Ee(Fe,Ze,Ye,nt,We,7);var Ie=Number(Fe&BigInt(4294967295));nt[We++]=Ie,Ie=Ie>>8,nt[We++]=Ie,Ie=Ie>>8,nt[We++]=Ie,Ie=Ie>>8,nt[We++]=Ie;var De=Number(Fe>>BigInt(32)&BigInt(4294967295));return nt[We++]=De,De=De>>8,nt[We++]=De,De=De>>8,nt[We++]=De,De=De>>8,nt[We++]=De,We}function re(nt,Fe,We,Ze,Ye){Ee(Fe,Ze,Ye,nt,We,7);var Ie=Number(Fe&BigInt(4294967295));nt[We+7]=Ie,Ie=Ie>>8,nt[We+6]=Ie,Ie=Ie>>8,nt[We+5]=Ie,Ie=Ie>>8,nt[We+4]=Ie;var De=Number(Fe>>BigInt(32)&BigInt(4294967295));return nt[We+3]=De,De=De>>8,nt[We+2]=De,De=De>>8,nt[We+1]=De,De=De>>8,nt[We]=De,We+8}a.prototype.writeBigUInt64LE=wt(function(Fe){var We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return fe(this,Fe,We,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=wt(function(Fe){var We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return re(this,Fe,We,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(Fe,We,Ze,Ye){if(Fe=+Fe,We=We>>>0,!Ye){var Ie=Math.pow(2,8*Ze-1);Z(this,Fe,We,Ze,Ie-1,-Ie)}var De=0,je=1,Re=0;for(this[We]=Fe&255;++De<Ze&&(je*=256);)Fe<0&&Re===0&&this[We+De-1]!==0&&(Re=1),this[We+De]=(Fe/je>>0)-Re&255;return We+Ze},a.prototype.writeIntBE=function(Fe,We,Ze,Ye){if(Fe=+Fe,We=We>>>0,!Ye){var Ie=Math.pow(2,8*Ze-1);Z(this,Fe,We,Ze,Ie-1,-Ie)}var De=Ze-1,je=1,Re=0;for(this[We+De]=Fe&255;--De>=0&&(je*=256);)Fe<0&&Re===0&&this[We+De+1]!==0&&(Re=1),this[We+De]=(Fe/je>>0)-Re&255;return We+Ze},a.prototype.writeInt8=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,1,127,-128),Fe<0&&(Fe=255+Fe+1),this[We]=Fe&255,We+1},a.prototype.writeInt16LE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,2,32767,-32768),this[We]=Fe&255,this[We+1]=Fe>>>8,We+2},a.prototype.writeInt16BE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,2,32767,-32768),this[We]=Fe>>>8,this[We+1]=Fe&255,We+2},a.prototype.writeInt32LE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,4,2147483647,-2147483648),this[We]=Fe&255,this[We+1]=Fe>>>8,this[We+2]=Fe>>>16,this[We+3]=Fe>>>24,We+4},a.prototype.writeInt32BE=function(Fe,We,Ze){return Fe=+Fe,We=We>>>0,Ze||Z(this,Fe,We,4,2147483647,-2147483648),Fe<0&&(Fe=4294967295+Fe+1),this[We]=Fe>>>24,this[We+1]=Fe>>>16,this[We+2]=Fe>>>8,this[We+3]=Fe&255,We+4},a.prototype.writeBigInt64LE=wt(function(Fe){var We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return fe(this,Fe,We,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=wt(function(Fe){var We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return re(this,Fe,We,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(nt,Fe,We,Ze,Ye,Ie){if(We+Ze>nt.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("Index out of range")}function xe(nt,Fe,We,Ze,Ye){return Fe=+Fe,We=We>>>0,Ye||ce(nt,Fe,We,4),l.write(nt,Fe,We,Ze,23,4),We+4}a.prototype.writeFloatLE=function(Fe,We,Ze){return xe(this,Fe,We,!0,Ze)},a.prototype.writeFloatBE=function(Fe,We,Ze){return xe(this,Fe,We,!1,Ze)};function Te(nt,Fe,We,Ze,Ye){return Fe=+Fe,We=We>>>0,Ye||ce(nt,Fe,We,8),l.write(nt,Fe,We,Ze,52,8),We+8}a.prototype.writeDoubleLE=function(Fe,We,Ze){return Te(this,Fe,We,!0,Ze)},a.prototype.writeDoubleBE=function(Fe,We,Ze){return Te(this,Fe,We,!1,Ze)},a.prototype.copy=function(Fe,We,Ze,Ye){if(!a.isBuffer(Fe))throw new TypeError("argument should be a Buffer");if(Ze||(Ze=0),!Ye&&Ye!==0&&(Ye=this.length),We>=Fe.length&&(We=Fe.length),We||(We=0),Ye>0&&Ye<Ze&&(Ye=Ze),Ye===Ze||Fe.length===0||this.length===0)return 0;if(We<0)throw new RangeError("targetStart out of bounds");if(Ze<0||Ze>=this.length)throw new RangeError("Index out of range");if(Ye<0)throw new RangeError("sourceEnd out of bounds");Ye>this.length&&(Ye=this.length),Fe.length-We<Ye-Ze&&(Ye=Fe.length-We+Ze);var Ie=Ye-Ze;return this===Fe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(We,Ze,Ye):Uint8Array.prototype.set.call(Fe,this.subarray(Ze,Ye),We),Ie},a.prototype.fill=function(Fe,We,Ze,Ye){if(typeof Fe=="string"){if(typeof We=="string"?(Ye=We,We=0,Ze=this.length):typeof Ze=="string"&&(Ye=Ze,Ze=this.length),Ye!==void 0&&typeof Ye!="string")throw new TypeError("encoding must be a string");if(typeof Ye=="string"&&!a.isEncoding(Ye))throw new TypeError("Unknown encoding: "+Ye);if(Fe.length===1){var Ie=Fe.charCodeAt(0);(Ye==="utf8"&&Ie<128||Ye==="latin1")&&(Fe=Ie)}}else typeof Fe=="number"?Fe=Fe&255:typeof Fe=="boolean"&&(Fe=Number(Fe));if(We<0||this.length<We||this.length<Ze)throw new RangeError("Out of range index");if(Ze<=We)return this;We=We>>>0,Ze=Ze===void 0?this.length:Ze>>>0,Fe||(Fe=0);var De;if(typeof Fe=="number")for(De=We;De<Ze;++De)this[De]=Fe;else{var je=a.isBuffer(Fe)?Fe:a.from(Fe,Ye),Re=je.length;if(Re===0)throw new TypeError('The value "'+Fe+'" is invalid for argument "value"');for(De=0;De<Ze-We;++De)this[De+We]=je[De%Re]}return this};var we={};function _e(nt,Fe,We){we[nt]=function(Ze){o(Ye,Ze);function Ye(){var Ie;return d(this,Ye),Ie=v(this,Ye),Object.defineProperty(t(Ie),"message",{value:Fe.apply(t(Ie),arguments),writable:!0,configurable:!0}),Ie.name="".concat(Ie.name," [").concat(nt,"]"),Ie.stack,delete Ie.name,Ie}return n(Ye,[{key:"code",get:function(){return nt},set:function(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(nt,"]: ").concat(this.message)}}]),Ye}(We)}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(nt){return nt?"".concat(nt," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(nt,Fe){return'The "'.concat(nt,'" argument must be of type number. Received type ').concat(f(Fe))},TypeError),_e("ERR_OUT_OF_RANGE",function(nt,Fe,We){var Ze='The value of "'.concat(nt,'" is out of range.'),Ye=We;return Number.isInteger(We)&&Math.abs(We)>Math.pow(2,32)?Ye=ke(String(We)):typeof We=="bigint"&&(Ye=String(We),(We>Math.pow(BigInt(2),BigInt(32))||We<-Math.pow(BigInt(2),BigInt(32)))&&(Ye=ke(Ye)),Ye+="n"),Ze+=" It must be ".concat(Fe,". Received ").concat(Ye),Ze},RangeError);function ke(nt){for(var Fe="",We=nt.length,Ze=nt[0]==="-"?1:0;We>=Ze+4;We-=3)Fe="_".concat(nt.slice(We-3,We)).concat(Fe);return"".concat(nt.slice(0,We)).concat(Fe)}function Ne(nt,Fe,We){ze(Fe,"offset"),(nt[Fe]===void 0||nt[Fe+We]===void 0)&&Ce(Fe,nt.length-(We+1))}function Ee(nt,Fe,We,Ze,Ye,Ie){if(nt>We||nt<Fe){var De=typeof Fe=="bigint"?"n":"",je;throw Fe===0||Fe===BigInt(0)?je=">= 0".concat(De," and < 2").concat(De," ** ").concat((Ie+1)*8).concat(De):je=">= -(2".concat(De," ** ").concat((Ie+1)*8-1).concat(De,") and < 2 ** ")+"".concat((Ie+1)*8-1).concat(De),new we.ERR_OUT_OF_RANGE("value",je,nt)}Ne(Ze,Ye,Ie)}function ze(nt,Fe){if(typeof nt!="number")throw new we.ERR_INVALID_ARG_TYPE(Fe,"number",nt)}function Ce(nt,Fe,We){throw Math.floor(nt)!==nt?(ze(nt,We),new we.ERR_OUT_OF_RANGE("offset","an integer",nt)):Fe<0?new we.ERR_BUFFER_OUT_OF_BOUNDS:new we.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(Fe),nt)}var Oe=/[^+/0-9A-Za-z-_]/g;function Le(nt){if(nt=nt.split("=")[0],nt=nt.trim().replace(Oe,""),nt.length<2)return"";for(;nt.length%4!==0;)nt=nt+"=";return nt}function Ge(nt,Fe){Fe=Fe||1/0;for(var We,Ze=nt.length,Ye=null,Ie=[],De=0;De<Ze;++De){if(We=nt.charCodeAt(De),We>55295&&We<57344){if(!Ye){if(We>56319){(Fe-=3)>-1&&Ie.push(239,191,189);continue}else if(De+1===Ze){(Fe-=3)>-1&&Ie.push(239,191,189);continue}Ye=We;continue}if(We<56320){(Fe-=3)>-1&&Ie.push(239,191,189),Ye=We;continue}We=(Ye-55296<<10|We-56320)+65536}else Ye&&(Fe-=3)>-1&&Ie.push(239,191,189);if(Ye=null,We<128){if((Fe-=1)<0)break;Ie.push(We)}else if(We<2048){if((Fe-=2)<0)break;Ie.push(We>>6|192,We&63|128)}else if(We<65536){if((Fe-=3)<0)break;Ie.push(We>>12|224,We>>6&63|128,We&63|128)}else if(We<1114112){if((Fe-=4)<0)break;Ie.push(We>>18|240,We>>12&63|128,We>>6&63|128,We&63|128)}else throw new Error("Invalid code point")}return Ie}function rt(nt){for(var Fe=[],We=0;We<nt.length;++We)Fe.push(nt.charCodeAt(We)&255);return Fe}function ot(nt,Fe){for(var We,Ze,Ye,Ie=[],De=0;De<nt.length&&!((Fe-=2)<0);++De)We=nt.charCodeAt(De),Ze=We>>8,Ye=We%256,Ie.push(Ye),Ie.push(Ze);return Ie}function $e(nt){return u.toByteArray(Le(nt))}function qe(nt,Fe,We,Ze){var Ye;for(Ye=0;Ye<Ze&&!(Ye+We>=Fe.length||Ye>=nt.length);++Ye)Fe[Ye+We]=nt[Ye];return Ye}function ht(nt,Fe){return nt instanceof Fe||nt!=null&&nt.constructor!=null&&nt.constructor.name!=null&&nt.constructor.name===Fe.name}function vt(nt){return nt!==nt}var pt=function(){for(var nt="0123456789abcdef",Fe=new Array(256),We=0;We<16;++We)for(var Ze=We*16,Ye=0;Ye<16;++Ye)Fe[Ze+Ye]=nt[We]+nt[Ye];return Fe}();function wt(nt){return typeof BigInt>"u"?Et:nt}function Et(){throw new Error("BigInt not supported")}},25928:function(U){U.exports=S,U.exports.isMobile=S,U.exports.default=S;var F=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,d=/android|ipad|playbook|silk/i;function S(n){n||(n={});var E=n.ua;if(!E&&typeof navigator<"u"&&(E=navigator.userAgent),E&&E.headers&&typeof E.headers["user-agent"]=="string"&&(E=E.headers["user-agent"]),typeof E!="string")return!1;var T=F.test(E)&&!e.test(E)||!!n.tablet&&d.test(E);return!T&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&E.indexOf("Macintosh")!==-1&&E.indexOf("Safari")!==-1&&(T=!0),T}},48932:function(U,F,e){e.r(F),e.d(F,{sankeyCenter:function(){return o},sankeyCircular:function(){return _},sankeyJustify:function(){return t},sankeyLeft:function(){return g},sankeyRight:function(){return r}});var d=e(84706),S=e(34712),n=e(10132),E=e(6688),T=e.n(E);function v(we){return we.target.depth}function g(we){return we.depth}function r(we,_e){return _e-1-we.height}function t(we,_e){return we.sourceLinks.length?we.depth:_e-1}function o(we){return we.targetLinks.length?we.depth:we.sourceLinks.length?(0,d.SY)(we.sourceLinks,v)-1:0}function i(we){return function(){return we}}var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we};function u(we,_e){return m(we.source,_e.source)||we.index-_e.index}function l(we,_e){return m(we.target,_e.target)||we.index-_e.index}function m(we,_e){return we.partOfCycle===_e.partOfCycle?we.y0-_e.y0:we.circularLinkType==="top"||_e.circularLinkType==="bottom"?-1:1}function h(we){return we.value}function w(we){return(we.y0+we.y1)/2}function c(we){return w(we.source)}function a(we){return w(we.target)}function p(we){return we.index}function x(we){return we.nodes}function A(we){return we.links}function P(we,_e){var ke=we.get(_e);if(!ke)throw new Error("missing: "+_e);return ke}function y(we,_e){return _e(we)}var C=25,M=10,s=.3;function _(){var we=0,_e=0,ke=1,Ne=1,Ee=24,ze,Ce=p,Oe=t,Le=x,Ge=A,rt=32,ot=2,$e,qe=null;function ht(){var Ze={nodes:Le.apply(null,arguments),links:Ge.apply(null,arguments)};vt(Ze),b(Ze,Ce,qe),pt(Ze),nt(Ze),k(Ze,Ce),Fe(Ze,rt,Ce),We(Ze);for(var Ye=4,Ie=0;Ie<Ye;Ie++)Z(Ze,Ne,Ce),fe(Ze,Ne,Ce),ee(Ze,_e,Ne,Ce),Z(Ze,Ne,Ce),fe(Ze,Ne,Ce);return Te(Ze,_e,Ne),z(Ze,ot,Ne,Ce),Ze}ht.nodeId=function(Ze){return arguments.length?(Ce=typeof Ze=="function"?Ze:i(Ze),ht):Ce},ht.nodeAlign=function(Ze){return arguments.length?(Oe=typeof Ze=="function"?Ze:i(Ze),ht):Oe},ht.nodeWidth=function(Ze){return arguments.length?(Ee=+Ze,ht):Ee},ht.nodePadding=function(Ze){return arguments.length?(ze=+Ze,ht):ze},ht.nodes=function(Ze){return arguments.length?(Le=typeof Ze=="function"?Ze:i(Ze),ht):Le},ht.links=function(Ze){return arguments.length?(Ge=typeof Ze=="function"?Ze:i(Ze),ht):Ge},ht.size=function(Ze){return arguments.length?(we=_e=0,ke=+Ze[0],Ne=+Ze[1],ht):[ke-we,Ne-_e]},ht.extent=function(Ze){return arguments.length?(we=+Ze[0][0],ke=+Ze[1][0],_e=+Ze[0][1],Ne=+Ze[1][1],ht):[[we,_e],[ke,Ne]]},ht.iterations=function(Ze){return arguments.length?(rt=+Ze,ht):rt},ht.circularLinkGap=function(Ze){return arguments.length?(ot=+Ze,ht):ot},ht.nodePaddingRatio=function(Ze){return arguments.length?($e=+Ze,ht):$e},ht.sortNodes=function(Ze){return arguments.length?(qe=Ze,ht):qe},ht.update=function(Ze){return k(Ze,Ce),We(Ze),Ze.links.forEach(function(Ye){Ye.circular&&(Ye.circularLinkType=Ye.y0+Ye.y1<Ne?"top":"bottom",Ye.source.circularLinkType=Ye.circularLinkType,Ye.target.circularLinkType=Ye.circularLinkType)}),Z(Ze,Ne,Ce,!1),fe(Ze,Ne,Ce),z(Ze,ot,Ne,Ce),Ze};function vt(Ze){Ze.nodes.forEach(function(Ie,De){Ie.index=De,Ie.sourceLinks=[],Ie.targetLinks=[]});var Ye=(0,S.kH)(Ze.nodes,Ce);return Ze.links.forEach(function(Ie,De){Ie.index=De;var je=Ie.source,Re=Ie.target;(typeof je>"u"?"undefined":f(je))!=="object"&&(je=Ie.source=P(Ye,je)),(typeof Re>"u"?"undefined":f(Re))!=="object"&&(Re=Ie.target=P(Ye,Re)),je.sourceLinks.push(Ie),Re.targetLinks.push(Ie)}),Ze}function pt(Ze){Ze.nodes.forEach(function(Ye){Ye.partOfCycle=!1,Ye.value=Math.max((0,d.oh)(Ye.sourceLinks,h),(0,d.oh)(Ye.targetLinks,h)),Ye.sourceLinks.forEach(function(Ie){Ie.circular&&(Ye.partOfCycle=!0,Ye.circularLinkType=Ie.circularLinkType)}),Ye.targetLinks.forEach(function(Ie){Ie.circular&&(Ye.partOfCycle=!0,Ye.circularLinkType=Ie.circularLinkType)})})}function wt(Ze){var Ye=0,Ie=0,De=0,je=0,Re=(0,d.kv)(Ze.nodes,function(pe){return pe.column});return Ze.links.forEach(function(pe){pe.circular&&(pe.circularLinkType=="top"?Ye=Ye+pe.width:Ie=Ie+pe.width,pe.target.column==0&&(je=je+pe.width),pe.source.column==Re&&(De=De+pe.width))}),Ye=Ye>0?Ye+C+M:Ye,Ie=Ie>0?Ie+C+M:Ie,De=De>0?De+C+M:De,je=je>0?je+C+M:je,{top:Ye,bottom:Ie,left:je,right:De}}function Et(Ze,Ye){var Ie=(0,d.kv)(Ze.nodes,function(et){return et.column}),De=ke-we,je=Ne-_e,Re=De+Ye.right+Ye.left,pe=je+Ye.top+Ye.bottom,be=De/Re,Ue=je/pe;return we=we*be+Ye.left,ke=Ye.right==0?ke:ke*be,_e=_e*Ue+Ye.top,Ne=Ne*Ue,Ze.nodes.forEach(function(et){et.x0=we+et.column*((ke-we-Ee)/Ie),et.x1=et.x0+Ee}),Ue}function nt(Ze){var Ye,Ie,De;for(Ye=Ze.nodes,Ie=[],De=0;Ye.length;++De,Ye=Ie,Ie=[])Ye.forEach(function(je){je.depth=De,je.sourceLinks.forEach(function(Re){Ie.indexOf(Re.target)<0&&!Re.circular&&Ie.push(Re.target)})});for(Ye=Ze.nodes,Ie=[],De=0;Ye.length;++De,Ye=Ie,Ie=[])Ye.forEach(function(je){je.height=De,je.targetLinks.forEach(function(Re){Ie.indexOf(Re.source)<0&&!Re.circular&&Ie.push(Re.source)})});Ze.nodes.forEach(function(je){je.column=Math.floor(Oe.call(null,je,De))})}function Fe(Ze,Ye,Ie){var De=(0,S.UJ)().key(function(et){return et.column}).sortKeys(d.XE).entries(Ze.nodes).map(function(et){return et.values});pe(Ie),Ue();for(var je=1,Re=Ye;Re>0;--Re)be(je*=.99,Ie),Ue();function pe(et){if($e){var st=1/0;De.forEach(function(Tt){var It=Ne*$e/(Tt.length+1);st=It<st?It:st}),ze=st}var lt=(0,d.SY)(De,function(Tt){return(Ne-_e-(Tt.length-1)*ze)/(0,d.oh)(Tt,h)});lt=lt*s,Ze.links.forEach(function(Tt){Tt.width=Tt.value*lt});var Gt=wt(Ze),Zt=Et(Ze,Gt);lt=lt*Zt,Ze.links.forEach(function(Tt){Tt.width=Tt.value*lt}),De.forEach(function(Tt){var It=Tt.length;Tt.forEach(function(Xt,gr){Xt.depth==De.length-1&&It==1||Xt.depth==0&&It==1?(Xt.y0=Ne/2-Xt.value*lt,Xt.y1=Xt.y0+Xt.value*lt):Xt.partOfCycle?O(Xt,et)==0?(Xt.y0=Ne/2+gr,Xt.y1=Xt.y0+Xt.value*lt):Xt.circularLinkType=="top"?(Xt.y0=_e+gr,Xt.y1=Xt.y0+Xt.value*lt):(Xt.y0=Ne-Xt.value*lt-gr,Xt.y1=Xt.y0+Xt.value*lt):Gt.top==0||Gt.bottom==0?(Xt.y0=(Ne-_e)/It*gr,Xt.y1=Xt.y0+Xt.value*lt):(Xt.y0=(Ne-_e)/2-It/2+gr,Xt.y1=Xt.y0+Xt.value*lt)})})}function be(et,st){var lt=De.length;De.forEach(function(Gt){var Zt=Gt.length,Tt=Gt[0].depth;Gt.forEach(function(It){var Xt;if((It.sourceLinks.length||It.targetLinks.length)&&!(It.partOfCycle&&O(It,st)>0))if(Tt==0&&Zt==1)Xt=It.y1-It.y0,It.y0=Ne/2-Xt/2,It.y1=Ne/2+Xt/2;else if(Tt==lt-1&&Zt==1)Xt=It.y1-It.y0,It.y0=Ne/2-Xt/2,It.y1=Ne/2+Xt/2;else{var gr=0,gt=(0,d.mo)(It.sourceLinks,a),jt=(0,d.mo)(It.targetLinks,c);gt&&jt?gr=(gt+jt)/2:gr=gt||jt;var Qt=(gr-w(It))*et;It.y0+=Qt,It.y1+=Qt}})})}function Ue(){De.forEach(function(et){var st,lt,Gt=_e,Zt=et.length,Tt;for(et.sort(m),Tt=0;Tt<Zt;++Tt)st=et[Tt],lt=Gt-st.y0,lt>0&&(st.y0+=lt,st.y1+=lt),Gt=st.y1+ze;if(lt=Gt-ze-Ne,lt>0)for(Gt=st.y0-=lt,st.y1-=lt,Tt=Zt-2;Tt>=0;--Tt)st=et[Tt],lt=st.y1+ze-Gt,lt>0&&(st.y0-=lt,st.y1-=lt),Gt=st.y0})}}function We(Ze){Ze.nodes.forEach(function(Ye){Ye.sourceLinks.sort(l),Ye.targetLinks.sort(u)}),Ze.nodes.forEach(function(Ye){var Ie=Ye.y0,De=Ie,je=Ye.y1,Re=je;Ye.sourceLinks.forEach(function(pe){pe.circular?(pe.y0=je-pe.width/2,je=je-pe.width):(pe.y0=Ie+pe.width/2,Ie+=pe.width)}),Ye.targetLinks.forEach(function(pe){pe.circular?(pe.y1=Re-pe.width/2,Re=Re-pe.width):(pe.y1=De+pe.width/2,De+=pe.width)})})}return ht}function b(we,_e,ke){var Ne=0;if(ke===null){for(var Ee=[],ze=0;ze<we.links.length;ze++){var Ce=we.links[ze],Oe=Ce.source.index,Le=Ce.target.index;Ee[Oe]||(Ee[Oe]=[]),Ee[Le]||(Ee[Le]=[]),Ee[Oe].indexOf(Le)===-1&&Ee[Oe].push(Le)}var Ge=T()(Ee);Ge.sort(function(qe,ht){return qe.length-ht.length});var rt={};for(ze=0;ze<Ge.length;ze++){var ot=Ge[ze],$e=ot.slice(-2);rt[$e[0]]||(rt[$e[0]]={}),rt[$e[0]][$e[1]]=!0}we.links.forEach(function(qe){var ht=qe.target.index,vt=qe.source.index;ht===vt||rt[vt]&&rt[vt][ht]?(qe.circular=!0,qe.circularLinkID=Ne,Ne=Ne+1):qe.circular=!1})}else we.links.forEach(function(qe){qe.source[ke]<qe.target[ke]?qe.circular=!1:(qe.circular=!0,qe.circularLinkID=Ne,Ne=Ne+1)})}function k(we,_e){var ke=0,Ne=0;we.links.forEach(function(Ee){Ee.circular&&(Ee.source.circularLinkType||Ee.target.circularLinkType?Ee.circularLinkType=Ee.source.circularLinkType?Ee.source.circularLinkType:Ee.target.circularLinkType:Ee.circularLinkType=ke<Ne?"top":"bottom",Ee.circularLinkType=="top"?ke=ke+1:Ne=Ne+1,we.nodes.forEach(function(ze){(y(ze,_e)==y(Ee.source,_e)||y(ze,_e)==y(Ee.target,_e))&&(ze.circularLinkType=Ee.circularLinkType)}))}),we.links.forEach(function(Ee){Ee.circular&&(Ee.source.circularLinkType==Ee.target.circularLinkType&&(Ee.circularLinkType=Ee.source.circularLinkType),xe(Ee,_e)&&(Ee.circularLinkType=Ee.source.circularLinkType))})}function D(we){var _e=Math.abs(we.y1-we.y0),ke=Math.abs(we.target.x0-we.source.x1);return Math.atan(ke/_e)}function V(we,_e){return we.source.column<_e.target.column?!1:!(we.target.column>_e.source.column)}function O(we,_e){var ke=0;we.sourceLinks.forEach(function(Ee){ke=Ee.circular&&!xe(Ee,_e)?ke+1:ke});var Ne=0;return we.targetLinks.forEach(function(Ee){Ne=Ee.circular&&!xe(Ee,_e)?Ne+1:Ne}),ke+Ne}function N(we){var _e=we.source.sourceLinks,ke=0;_e.forEach(function(ze){ke=ze.circular?ke+1:ke});var Ne=we.target.targetLinks,Ee=0;return Ne.forEach(function(ze){Ee=ze.circular?Ee+1:Ee}),!(ke>1||Ee>1)}function B(we,_e,ke){return we.sort(X),we.forEach(function(Ne,Ee){var ze=0;if(xe(Ne,ke)&&N(Ne))Ne.circularPathData.verticalBuffer=ze+Ne.width/2;else{var Ce=0;for(Ce;Ce<Ee;Ce++)if(V(we[Ee],we[Ce])){var Oe=we[Ce].circularPathData.verticalBuffer+we[Ce].width/2+_e;ze=Oe>ze?Oe:ze}Ne.circularPathData.verticalBuffer=ze+Ne.width/2}}),we}function z(we,_e,ke,Ne){var Ee=5,ze=(0,d.SY)(we.links,function(Le){return Le.source.y0});we.links.forEach(function(Le){Le.circular&&(Le.circularPathData={})});var Ce=we.links.filter(function(Le){return Le.circularLinkType=="top"});B(Ce,_e,Ne);var Oe=we.links.filter(function(Le){return Le.circularLinkType=="bottom"});B(Oe,_e,Ne),we.links.forEach(function(Le){if(Le.circular){if(Le.circularPathData.arcRadius=Le.width+M,Le.circularPathData.leftNodeBuffer=Ee,Le.circularPathData.rightNodeBuffer=Ee,Le.circularPathData.sourceWidth=Le.source.x1-Le.source.x0,Le.circularPathData.sourceX=Le.source.x0+Le.circularPathData.sourceWidth,Le.circularPathData.targetX=Le.target.x0,Le.circularPathData.sourceY=Le.y0,Le.circularPathData.targetY=Le.y1,xe(Le,Ne)&&N(Le))Le.circularPathData.leftSmallArcRadius=M+Le.width/2,Le.circularPathData.leftLargeArcRadius=M+Le.width/2,Le.circularPathData.rightSmallArcRadius=M+Le.width/2,Le.circularPathData.rightLargeArcRadius=M+Le.width/2,Le.circularLinkType=="bottom"?(Le.circularPathData.verticalFullExtent=Le.source.y1+C+Le.circularPathData.verticalBuffer,Le.circularPathData.verticalLeftInnerExtent=Le.circularPathData.verticalFullExtent-Le.circularPathData.leftLargeArcRadius,Le.circularPathData.verticalRightInnerExtent=Le.circularPathData.verticalFullExtent-Le.circularPathData.rightLargeArcRadius):(Le.circularPathData.verticalFullExtent=Le.source.y0-C-Le.circularPathData.verticalBuffer,Le.circularPathData.verticalLeftInnerExtent=Le.circularPathData.verticalFullExtent+Le.circularPathData.leftLargeArcRadius,Le.circularPathData.verticalRightInnerExtent=Le.circularPathData.verticalFullExtent+Le.circularPathData.rightLargeArcRadius);else{var Ge=Le.source.column,rt=Le.circularLinkType,ot=we.links.filter(function(ht){return ht.source.column==Ge&&ht.circularLinkType==rt});Le.circularLinkType=="bottom"?ot.sort(ne):ot.sort($);var $e=0;ot.forEach(function(ht,vt){ht.circularLinkID==Le.circularLinkID&&(Le.circularPathData.leftSmallArcRadius=M+Le.width/2+$e,Le.circularPathData.leftLargeArcRadius=M+Le.width/2+vt*_e+$e),$e=$e+ht.width}),Ge=Le.target.column,ot=we.links.filter(function(ht){return ht.target.column==Ge&&ht.circularLinkType==rt}),Le.circularLinkType=="bottom"?ot.sort(ue):ot.sort(q),$e=0,ot.forEach(function(ht,vt){ht.circularLinkID==Le.circularLinkID&&(Le.circularPathData.rightSmallArcRadius=M+Le.width/2+$e,Le.circularPathData.rightLargeArcRadius=M+Le.width/2+vt*_e+$e),$e=$e+ht.width}),Le.circularLinkType=="bottom"?(Le.circularPathData.verticalFullExtent=Math.max(ke,Le.source.y1,Le.target.y1)+C+Le.circularPathData.verticalBuffer,Le.circularPathData.verticalLeftInnerExtent=Le.circularPathData.verticalFullExtent-Le.circularPathData.leftLargeArcRadius,Le.circularPathData.verticalRightInnerExtent=Le.circularPathData.verticalFullExtent-Le.circularPathData.rightLargeArcRadius):(Le.circularPathData.verticalFullExtent=ze-C-Le.circularPathData.verticalBuffer,Le.circularPathData.verticalLeftInnerExtent=Le.circularPathData.verticalFullExtent+Le.circularPathData.leftLargeArcRadius,Le.circularPathData.verticalRightInnerExtent=Le.circularPathData.verticalFullExtent+Le.circularPathData.rightLargeArcRadius)}Le.circularPathData.leftInnerExtent=Le.circularPathData.sourceX+Le.circularPathData.leftNodeBuffer,Le.circularPathData.rightInnerExtent=Le.circularPathData.targetX-Le.circularPathData.rightNodeBuffer,Le.circularPathData.leftFullExtent=Le.circularPathData.sourceX+Le.circularPathData.leftLargeArcRadius+Le.circularPathData.leftNodeBuffer,Le.circularPathData.rightFullExtent=Le.circularPathData.targetX-Le.circularPathData.rightLargeArcRadius-Le.circularPathData.rightNodeBuffer}if(Le.circular)Le.path=H(Le);else{var qe=(0,n.ak)().source(function(ht){var vt=ht.source.x0+(ht.source.x1-ht.source.x0),pt=ht.y0;return[vt,pt]}).target(function(ht){var vt=ht.target.x0,pt=ht.y1;return[vt,pt]});Le.path=qe(Le)}})}function H(we){var _e="";return we.circularLinkType=="top"?_e="M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 0 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY-we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 0 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 0 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY-we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 0 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY:_e="M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 1 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY+we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 1 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 1 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY+we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 1 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY,_e}function X(we,_e){return te(we)==te(_e)?we.circularLinkType=="bottom"?ne(we,_e):$(we,_e):te(_e)-te(we)}function $(we,_e){return we.y0-_e.y0}function ne(we,_e){return _e.y0-we.y0}function q(we,_e){return we.y1-_e.y1}function ue(we,_e){return _e.y1-we.y1}function te(we){return we.target.column-we.source.column}function J(we){return we.target.x0-we.source.x1}function ie(we,_e){var ke=D(we),Ne=J(_e)/Math.tan(ke),Ee=ce(we)=="up"?we.y1+Ne:we.y1-Ne;return Ee}function K(we,_e){var ke=D(we),Ne=J(_e)/Math.tan(ke),Ee=ce(we)=="up"?we.y1-Ne:we.y1+Ne;return Ee}function ee(we,_e,ke,Ne){we.links.forEach(function(Ee){if(!Ee.circular&&Ee.target.column-Ee.source.column>1){var ze=Ee.source.column+1,Ce=Ee.target.column-1,Oe=1,Le=Ce-ze+1;for(Oe=1;ze<=Ce;ze++,Oe++)we.nodes.forEach(function(Ge){if(Ge.column==ze){var rt=Oe/(Le+1),ot=Math.pow(1-rt,3),$e=3*rt*Math.pow(1-rt,2),qe=3*Math.pow(rt,2)*(1-rt),ht=Math.pow(rt,3),vt=ot*Ee.y0+$e*Ee.y0+qe*Ee.y1+ht*Ee.y1,pt=vt-Ee.width/2,wt=vt+Ee.width/2,Et;pt>Ge.y0&&pt<Ge.y1?(Et=Ge.y1-pt+10,Et=Ge.circularLinkType=="bottom"?Et:-Et,Ge=j(Ge,Et,_e,ke),we.nodes.forEach(function(nt){y(nt,Ne)==y(Ge,Ne)||nt.column!=Ge.column||le(Ge,nt)&&j(nt,Et,_e,ke)})):wt>Ge.y0&&wt<Ge.y1?(Et=wt-Ge.y0+10,Ge=j(Ge,Et,_e,ke),we.nodes.forEach(function(nt){y(nt,Ne)==y(Ge,Ne)||nt.column!=Ge.column||nt.y0<Ge.y1&&nt.y1>Ge.y1&&j(nt,Et,_e,ke)})):pt<Ge.y0&&wt>Ge.y1&&(Et=wt-Ge.y0+10,Ge=j(Ge,Et,_e,ke),we.nodes.forEach(function(nt){y(nt,Ne)==y(Ge,Ne)||nt.column!=Ge.column||nt.y0<Ge.y1&&nt.y1>Ge.y1&&j(nt,Et,_e,ke)}))}})}})}function le(we,_e){return we.y0>_e.y0&&we.y0<_e.y1||we.y1>_e.y0&&we.y1<_e.y1?!0:we.y0<_e.y0&&we.y1>_e.y1}function j(we,_e,ke,Ne){return we.y0+_e>=ke&&we.y1+_e<=Ne&&(we.y0=we.y0+_e,we.y1=we.y1+_e,we.targetLinks.forEach(function(Ee){Ee.y1=Ee.y1+_e}),we.sourceLinks.forEach(function(Ee){Ee.y0=Ee.y0+_e})),we}function Z(we,_e,ke,Ne){we.nodes.forEach(function(Ee){Ne&&Ee.y+(Ee.y1-Ee.y0)>_e&&(Ee.y=Ee.y-(Ee.y+(Ee.y1-Ee.y0)-_e));var ze=we.links.filter(function(Le){return y(Le.source,ke)==y(Ee,ke)}),Ce=ze.length;Ce>1&&ze.sort(function(Le,Ge){if(!Le.circular&&!Ge.circular){if(Le.target.column==Ge.target.column)return Le.y1-Ge.y1;if(re(Le,Ge)){if(Le.target.column>Ge.target.column){var rt=K(Ge,Le);return Le.y1-rt}if(Ge.target.column>Le.target.column){var ot=K(Le,Ge);return ot-Ge.y1}}else return Le.y1-Ge.y1}if(Le.circular&&!Ge.circular)return Le.circularLinkType=="top"?-1:1;if(Ge.circular&&!Le.circular)return Ge.circularLinkType=="top"?1:-1;if(Le.circular&&Ge.circular)return Le.circularLinkType===Ge.circularLinkType&&Le.circularLinkType=="top"?Le.target.column===Ge.target.column?Le.target.y1-Ge.target.y1:Ge.target.column-Le.target.column:Le.circularLinkType===Ge.circularLinkType&&Le.circularLinkType=="bottom"?Le.target.column===Ge.target.column?Ge.target.y1-Le.target.y1:Le.target.column-Ge.target.column:Le.circularLinkType=="top"?-1:1});var Oe=Ee.y0;ze.forEach(function(Le){Le.y0=Oe+Le.width/2,Oe=Oe+Le.width}),ze.forEach(function(Le,Ge){if(Le.circularLinkType=="bottom"){var rt=Ge+1,ot=0;for(rt;rt<Ce;rt++)ot=ot+ze[rt].width;Le.y0=Ee.y1-ot-Le.width/2}})})}function fe(we,_e,ke){we.nodes.forEach(function(Ne){var Ee=we.links.filter(function(Oe){return y(Oe.target,ke)==y(Ne,ke)}),ze=Ee.length;ze>1&&Ee.sort(function(Oe,Le){if(!Oe.circular&&!Le.circular){if(Oe.source.column==Le.source.column)return Oe.y0-Le.y0;if(re(Oe,Le)){if(Le.source.column<Oe.source.column){var Ge=ie(Le,Oe);return Oe.y0-Ge}if(Oe.source.column<Le.source.column){var rt=ie(Oe,Le);return rt-Le.y0}}else return Oe.y0-Le.y0}if(Oe.circular&&!Le.circular)return Oe.circularLinkType=="top"?-1:1;if(Le.circular&&!Oe.circular)return Le.circularLinkType=="top"?1:-1;if(Oe.circular&&Le.circular)return Oe.circularLinkType===Le.circularLinkType&&Oe.circularLinkType=="top"?Oe.source.column===Le.source.column?Oe.source.y1-Le.source.y1:Oe.source.column-Le.source.column:Oe.circularLinkType===Le.circularLinkType&&Oe.circularLinkType=="bottom"?Oe.source.column===Le.source.column?Oe.source.y1-Le.source.y1:Le.source.column-Oe.source.column:Oe.circularLinkType=="top"?-1:1});var Ce=Ne.y0;Ee.forEach(function(Oe){Oe.y1=Ce+Oe.width/2,Ce=Ce+Oe.width}),Ee.forEach(function(Oe,Le){if(Oe.circularLinkType=="bottom"){var Ge=Le+1,rt=0;for(Ge;Ge<ze;Ge++)rt=rt+Ee[Ge].width;Oe.y1=Ne.y1-rt-Oe.width/2}})})}function re(we,_e){return ce(we)==ce(_e)}function ce(we){return we.y0-we.y1>0?"up":"down"}function xe(we,_e){return y(we.source,_e)==y(we.target,_e)}function Te(we,_e,ke){var Ne=we.nodes,Ee=we.links,ze=!1,Ce=!1;if(Ee.forEach(function($e){$e.circularLinkType=="top"?ze=!0:$e.circularLinkType=="bottom"&&(Ce=!0)}),ze==!1||Ce==!1){var Oe=(0,d.SY)(Ne,function($e){return $e.y0}),Le=(0,d.kv)(Ne,function($e){return $e.y1}),Ge=Le-Oe,rt=ke-_e,ot=rt/Ge;Ne.forEach(function($e){var qe=($e.y1-$e.y0)*ot;$e.y0=($e.y0-Oe)*ot,$e.y1=$e.y0+qe}),Ee.forEach(function($e){$e.y0=($e.y0-Oe)*ot,$e.y1=($e.y1-Oe)*ot,$e.width=$e.width*ot})}}},26800:function(U,F,e){e.r(F),e.d(F,{sankey:function(){return p},sankeyCenter:function(){return g},sankeyJustify:function(){return v},sankeyLeft:function(){return E},sankeyLinkHorizontal:function(){return y},sankeyRight:function(){return T}});var d=e(84706),S=e(34712);function n(C){return C.target.depth}function E(C){return C.depth}function T(C,M){return M-1-C.height}function v(C,M){return C.sourceLinks.length?C.depth:M-1}function g(C){return C.targetLinks.length?C.depth:C.sourceLinks.length?(0,d.SY)(C.sourceLinks,n)-1:0}function r(C){return function(){return C}}function t(C,M){return i(C.source,M.source)||C.index-M.index}function o(C,M){return i(C.target,M.target)||C.index-M.index}function i(C,M){return C.y0-M.y0}function f(C){return C.value}function u(C){return(C.y0+C.y1)/2}function l(C){return u(C.source)*C.value}function m(C){return u(C.target)*C.value}function h(C){return C.index}function w(C){return C.nodes}function c(C){return C.links}function a(C,M){var s=C.get(M);if(!s)throw new Error("missing: "+M);return s}function p(){var C=0,M=0,s=1,_=1,b=24,k=8,D=h,V=v,O=w,N=c,B=32,z=2/3;function H(){var te={nodes:O.apply(null,arguments),links:N.apply(null,arguments)};return X(te),$(te),ne(te),q(te),ue(te),te}H.update=function(te){return ue(te),te},H.nodeId=function(te){return arguments.length?(D=typeof te=="function"?te:r(te),H):D},H.nodeAlign=function(te){return arguments.length?(V=typeof te=="function"?te:r(te),H):V},H.nodeWidth=function(te){return arguments.length?(b=+te,H):b},H.nodePadding=function(te){return arguments.length?(k=+te,H):k},H.nodes=function(te){return arguments.length?(O=typeof te=="function"?te:r(te),H):O},H.links=function(te){return arguments.length?(N=typeof te=="function"?te:r(te),H):N},H.size=function(te){return arguments.length?(C=M=0,s=+te[0],_=+te[1],H):[s-C,_-M]},H.extent=function(te){return arguments.length?(C=+te[0][0],s=+te[1][0],M=+te[0][1],_=+te[1][1],H):[[C,M],[s,_]]},H.iterations=function(te){return arguments.length?(B=+te,H):B};function X(te){te.nodes.forEach(function(ie,K){ie.index=K,ie.sourceLinks=[],ie.targetLinks=[]});var J=(0,S.kH)(te.nodes,D);te.links.forEach(function(ie,K){ie.index=K;var ee=ie.source,le=ie.target;typeof ee!="object"&&(ee=ie.source=a(J,ee)),typeof le!="object"&&(le=ie.target=a(J,le)),ee.sourceLinks.push(ie),le.targetLinks.push(ie)})}function $(te){te.nodes.forEach(function(J){J.value=Math.max((0,d.oh)(J.sourceLinks,f),(0,d.oh)(J.targetLinks,f))})}function ne(te){var J,ie,K;for(J=te.nodes,ie=[],K=0;J.length;++K,J=ie,ie=[])J.forEach(function(le){le.depth=K,le.sourceLinks.forEach(function(j){ie.indexOf(j.target)<0&&ie.push(j.target)})});for(J=te.nodes,ie=[],K=0;J.length;++K,J=ie,ie=[])J.forEach(function(le){le.height=K,le.targetLinks.forEach(function(j){ie.indexOf(j.source)<0&&ie.push(j.source)})});var ee=(s-C-b)/(K-1);te.nodes.forEach(function(le){le.x1=(le.x0=C+Math.max(0,Math.min(K-1,Math.floor(V.call(null,le,K))))*ee)+b})}function q(te){var J=(0,S.UJ)().key(function(fe){return fe.x0}).sortKeys(d.XE).entries(te.nodes).map(function(fe){return fe.values});ee(),Z();for(var ie=1,K=B;K>0;--K)j(ie*=.99),Z(),le(ie),Z();function ee(){var fe=(0,d.kv)(J,function(xe){return xe.length}),re=z*(_-M)/(fe-1);k>re&&(k=re);var ce=(0,d.SY)(J,function(xe){return(_-M-(xe.length-1)*k)/(0,d.oh)(xe,f)});J.forEach(function(xe){xe.forEach(function(Te,we){Te.y1=(Te.y0=we)+Te.value*ce})}),te.links.forEach(function(xe){xe.width=xe.value*ce})}function le(fe){J.forEach(function(re){re.forEach(function(ce){if(ce.targetLinks.length){var xe=((0,d.oh)(ce.targetLinks,l)/(0,d.oh)(ce.targetLinks,f)-u(ce))*fe;ce.y0+=xe,ce.y1+=xe}})})}function j(fe){J.slice().reverse().forEach(function(re){re.forEach(function(ce){if(ce.sourceLinks.length){var xe=((0,d.oh)(ce.sourceLinks,m)/(0,d.oh)(ce.sourceLinks,f)-u(ce))*fe;ce.y0+=xe,ce.y1+=xe}})})}function Z(){J.forEach(function(fe){var re,ce,xe=M,Te=fe.length,we;for(fe.sort(i),we=0;we<Te;++we)re=fe[we],ce=xe-re.y0,ce>0&&(re.y0+=ce,re.y1+=ce),xe=re.y1+k;if(ce=xe-k-_,ce>0)for(xe=re.y0-=ce,re.y1-=ce,we=Te-2;we>=0;--we)re=fe[we],ce=re.y1+k-xe,ce>0&&(re.y0-=ce,re.y1-=ce),xe=re.y0})}}function ue(te){te.nodes.forEach(function(J){J.sourceLinks.sort(o),J.targetLinks.sort(t)}),te.nodes.forEach(function(J){var ie=J.y0,K=ie;J.sourceLinks.forEach(function(ee){ee.y0=ie+ee.width/2,ie+=ee.width}),J.targetLinks.forEach(function(ee){ee.y1=K+ee.width/2,K+=ee.width})})}return H}var x=e(10132);function A(C){return[C.source.x1,C.y0]}function P(C){return[C.target.x0,C.y1]}function y(){return(0,x.ak)().source(A).target(P)}},33428:function(U,F,e){var d,S;(function(){var n={version:"3.8.2"},E=[].slice,T=function(ve){return E.call(ve)},v=self.document;function g(ve){return ve&&(ve.ownerDocument||ve.document||ve).documentElement}function r(ve){return ve&&(ve.ownerDocument&&ve.ownerDocument.defaultView||ve.document&&ve||ve.defaultView)}if(v)try{T(v.documentElement.childNodes)[0].nodeType}catch{T=function(Se){for(var Ve=Se.length,tt=new Array(Ve);Ve--;)tt[Ve]=Se[Ve];return tt}}if(Date.now||(Date.now=function(){return+new Date}),v)try{v.createElement("DIV").style.setProperty("opacity",0,"")}catch{var t=this.Element.prototype,o=t.setAttribute,i=t.setAttributeNS,f=this.CSSStyleDeclaration.prototype,u=f.setProperty;t.setAttribute=function(Se,Ve){o.call(this,Se,Ve+"")},t.setAttributeNS=function(Se,Ve,tt){i.call(this,Se,Ve,tt+"")},f.setProperty=function(Se,Ve,tt){u.call(this,Se,Ve+"",tt)}}n.ascending=l;function l(ve,Se){return ve<Se?-1:ve>Se?1:ve>=Se?0:NaN}n.descending=function(ve,Se){return Se<ve?-1:Se>ve?1:Se>=ve?0:NaN},n.min=function(ve,Se){var Ve=-1,tt=ve.length,it,ct;if(arguments.length===1){for(;++Ve<tt;)if((ct=ve[Ve])!=null&&ct>=ct){it=ct;break}for(;++Ve<tt;)(ct=ve[Ve])!=null&&it>ct&&(it=ct)}else{for(;++Ve<tt;)if((ct=Se.call(ve,ve[Ve],Ve))!=null&&ct>=ct){it=ct;break}for(;++Ve<tt;)(ct=Se.call(ve,ve[Ve],Ve))!=null&&it>ct&&(it=ct)}return it},n.max=function(ve,Se){var Ve=-1,tt=ve.length,it,ct;if(arguments.length===1){for(;++Ve<tt;)if((ct=ve[Ve])!=null&&ct>=ct){it=ct;break}for(;++Ve<tt;)(ct=ve[Ve])!=null&&ct>it&&(it=ct)}else{for(;++Ve<tt;)if((ct=Se.call(ve,ve[Ve],Ve))!=null&&ct>=ct){it=ct;break}for(;++Ve<tt;)(ct=Se.call(ve,ve[Ve],Ve))!=null&&ct>it&&(it=ct)}return it},n.extent=function(ve,Se){var Ve=-1,tt=ve.length,it,ct,Lt;if(arguments.length===1){for(;++Ve<tt;)if((ct=ve[Ve])!=null&&ct>=ct){it=Lt=ct;break}for(;++Ve<tt;)(ct=ve[Ve])!=null&&(it>ct&&(it=ct),Lt<ct&&(Lt=ct))}else{for(;++Ve<tt;)if((ct=Se.call(ve,ve[Ve],Ve))!=null&&ct>=ct){it=Lt=ct;break}for(;++Ve<tt;)(ct=Se.call(ve,ve[Ve],Ve))!=null&&(it>ct&&(it=ct),Lt<ct&&(Lt=ct))}return[it,Lt]};function m(ve){return ve===null?NaN:+ve}function h(ve){return!isNaN(ve)}n.sum=function(ve,Se){var Ve=0,tt=ve.length,it,ct=-1;if(arguments.length===1)for(;++ct<tt;)h(it=+ve[ct])&&(Ve+=it);else for(;++ct<tt;)h(it=+Se.call(ve,ve[ct],ct))&&(Ve+=it);return Ve},n.mean=function(ve,Se){var Ve=0,tt=ve.length,it,ct=-1,Lt=tt;if(arguments.length===1)for(;++ct<tt;)h(it=m(ve[ct]))?Ve+=it:--Lt;else for(;++ct<tt;)h(it=m(Se.call(ve,ve[ct],ct)))?Ve+=it:--Lt;if(Lt)return Ve/Lt},n.quantile=function(ve,Se){var Ve=(ve.length-1)*Se+1,tt=Math.floor(Ve),it=+ve[tt-1],ct=Ve-tt;return ct?it+ct*(ve[tt]-it):it},n.median=function(ve,Se){var Ve=[],tt=ve.length,it,ct=-1;if(arguments.length===1)for(;++ct<tt;)h(it=m(ve[ct]))&&Ve.push(it);else for(;++ct<tt;)h(it=m(Se.call(ve,ve[ct],ct)))&&Ve.push(it);if(Ve.length)return n.quantile(Ve.sort(l),.5)},n.variance=function(ve,Se){var Ve=ve.length,tt=0,it,ct,Lt=0,At=-1,Vt=0;if(arguments.length===1)for(;++At<Ve;)h(it=m(ve[At]))&&(ct=it-tt,tt+=ct/++Vt,Lt+=ct*(it-tt));else for(;++At<Ve;)h(it=m(Se.call(ve,ve[At],At)))&&(ct=it-tt,tt+=ct/++Vt,Lt+=ct*(it-tt));if(Vt>1)return Lt/(Vt-1)},n.deviation=function(){var ve=n.variance.apply(this,arguments);return ve&&Math.sqrt(ve)};function w(ve){return{left:function(Se,Ve,tt,it){for(arguments.length<3&&(tt=0),arguments.length<4&&(it=Se.length);tt<it;){var ct=tt+it>>>1;ve(Se[ct],Ve)<0?tt=ct+1:it=ct}return tt},right:function(Se,Ve,tt,it){for(arguments.length<3&&(tt=0),arguments.length<4&&(it=Se.length);tt<it;){var ct=tt+it>>>1;ve(Se[ct],Ve)>0?it=ct:tt=ct+1}return tt}}}var c=w(l);n.bisectLeft=c.left,n.bisect=n.bisectRight=c.right,n.bisector=function(ve){return w(ve.length===1?function(Se,Ve){return l(ve(Se),Ve)}:ve)},n.shuffle=function(ve,Se,Ve){(tt=arguments.length)<3&&(Ve=ve.length,tt<2&&(Se=0));for(var tt=Ve-Se,it,ct;tt;)ct=Math.random()*tt--|0,it=ve[tt+Se],ve[tt+Se]=ve[ct+Se],ve[ct+Se]=it;return ve},n.permute=function(ve,Se){for(var Ve=Se.length,tt=new Array(Ve);Ve--;)tt[Ve]=ve[Se[Ve]];return tt},n.pairs=function(ve){for(var Se=0,Ve=ve.length-1,tt=ve[0],it=new Array(Ve<0?0:Ve);Se<Ve;)it[Se]=[tt,tt=ve[++Se]];return it},n.transpose=function(ve){if(!(ct=ve.length))return[];for(var Se=-1,Ve=n.min(ve,a),tt=new Array(Ve);++Se<Ve;)for(var it=-1,ct,Lt=tt[Se]=new Array(ct);++it<ct;)Lt[it]=ve[it][Se];return tt};function a(ve){return ve.length}n.zip=function(){return n.transpose(arguments)},n.keys=function(ve){var Se=[];for(var Ve in ve)Se.push(Ve);return Se},n.values=function(ve){var Se=[];for(var Ve in ve)Se.push(ve[Ve]);return Se},n.entries=function(ve){var Se=[];for(var Ve in ve)Se.push({key:Ve,value:ve[Ve]});return Se},n.merge=function(ve){for(var Se=ve.length,Ve,tt=-1,it=0,ct,Lt;++tt<Se;)it+=ve[tt].length;for(ct=new Array(it);--Se>=0;)for(Lt=ve[Se],Ve=Lt.length;--Ve>=0;)ct[--it]=Lt[Ve];return ct};var p=Math.abs;n.range=function(ve,Se,Ve){if(arguments.length<3&&(Ve=1,arguments.length<2&&(Se=ve,ve=0)),(Se-ve)/Ve===1/0)throw new Error("infinite range");var tt=[],it=x(p(Ve)),ct=-1,Lt;if(ve*=it,Se*=it,Ve*=it,Ve<0)for(;(Lt=ve+Ve*++ct)>Se;)tt.push(Lt/it);else for(;(Lt=ve+Ve*++ct)<Se;)tt.push(Lt/it);return tt};function x(ve){for(var Se=1;ve*Se%1;)Se*=10;return Se}function A(ve,Se){for(var Ve in Se)Object.defineProperty(ve.prototype,Ve,{value:Se[Ve],enumerable:!1})}n.map=function(ve,Se){var Ve=new P;if(ve instanceof P)ve.forEach(function(At,Vt){Ve.set(At,Vt)});else if(Array.isArray(ve)){var tt=-1,it=ve.length,ct;if(arguments.length===1)for(;++tt<it;)Ve.set(tt,ve[tt]);else for(;++tt<it;)Ve.set(Se.call(ve,ct=ve[tt],tt),ct)}else for(var Lt in ve)Ve.set(Lt,ve[Lt]);return Ve};function P(){this._=Object.create(null)}var y="__proto__",C="\0";A(P,{has:_,get:function(ve){return this._[M(ve)]},set:function(ve,Se){return this._[M(ve)]=Se},remove:b,keys:k,values:function(){var ve=[];for(var Se in this._)ve.push(this._[Se]);return ve},entries:function(){var ve=[];for(var Se in this._)ve.push({key:s(Se),value:this._[Se]});return ve},size:D,empty:V,forEach:function(ve){for(var Se in this._)ve.call(this,s(Se),this._[Se])}});function M(ve){return(ve+="")===y||ve[0]===C?C+ve:ve}function s(ve){return(ve+="")[0]===C?ve.slice(1):ve}function _(ve){return M(ve)in this._}function b(ve){return(ve=M(ve))in this._&&delete this._[ve]}function k(){var ve=[];for(var Se in this._)ve.push(s(Se));return ve}function D(){var ve=0;for(var Se in this._)++ve;return ve}function V(){for(var ve in this._)return!1;return!0}n.nest=function(){var ve={},Se=[],Ve=[],tt,it;function ct(At,Vt,Wt){if(Wt>=Se.length)return it?it.call(ve,Vt):tt?Vt.sort(tt):Vt;for(var tr=-1,Cr=Vt.length,Lr=Se[Wt++],Qr,on,Pr,Ur=new P,jr;++tr<Cr;)(jr=Ur.get(Qr=Lr(on=Vt[tr])))?jr.push(on):Ur.set(Qr,[on]);return At?(on=At(),Pr=function(cn,dn){on.set(cn,ct(At,dn,Wt))}):(on={},Pr=function(cn,dn){on[cn]=ct(At,dn,Wt)}),Ur.forEach(Pr),on}function Lt(At,Vt){if(Vt>=Se.length)return At;var Wt=[],tr=Ve[Vt++];return At.forEach(function(Cr,Lr){Wt.push({key:Cr,values:Lt(Lr,Vt)})}),tr?Wt.sort(function(Cr,Lr){return tr(Cr.key,Lr.key)}):Wt}return ve.map=function(At,Vt){return ct(Vt,At,0)},ve.entries=function(At){return Lt(ct(n.map,At,0),0)},ve.key=function(At){return Se.push(At),ve},ve.sortKeys=function(At){return Ve[Se.length-1]=At,ve},ve.sortValues=function(At){return tt=At,ve},ve.rollup=function(At){return it=At,ve},ve},n.set=function(ve){var Se=new O;if(ve)for(var Ve=0,tt=ve.length;Ve<tt;++Ve)Se.add(ve[Ve]);return Se};function O(){this._=Object.create(null)}A(O,{has:_,add:function(ve){return this._[M(ve+="")]=!0,ve},remove:b,values:k,size:D,empty:V,forEach:function(ve){for(var Se in this._)ve.call(this,s(Se))}}),n.behavior={};function N(ve){return ve}n.rebind=function(ve,Se){for(var Ve=1,tt=arguments.length,it;++Ve<tt;)ve[it=arguments[Ve]]=B(ve,Se,Se[it]);return ve};function B(ve,Se,Ve){return function(){var tt=Ve.apply(Se,arguments);return tt===Se?ve:tt}}function z(ve,Se){if(Se in ve)return Se;Se=Se.charAt(0).toUpperCase()+Se.slice(1);for(var Ve=0,tt=H.length;Ve<tt;++Ve){var it=H[Ve]+Se;if(it in ve)return it}}var H=["webkit","ms","moz","Moz","o","O"];function X(){}n.dispatch=function(){for(var ve=new $,Se=-1,Ve=arguments.length;++Se<Ve;)ve[arguments[Se]]=ne(ve);return ve};function $(){}$.prototype.on=function(ve,Se){var Ve=ve.indexOf("."),tt="";if(Ve>=0&&(tt=ve.slice(Ve+1),ve=ve.slice(0,Ve)),ve)return arguments.length<2?this[ve].on(tt):this[ve].on(tt,Se);if(arguments.length===2){if(Se==null)for(ve in this)this.hasOwnProperty(ve)&&this[ve].on(tt,null);return this}};function ne(ve){var Se=[],Ve=new P;function tt(){for(var it=Se,ct=-1,Lt=it.length,At;++ct<Lt;)(At=it[ct].on)&&At.apply(this,arguments);return ve}return tt.on=function(it,ct){var Lt=Ve.get(it),At;return arguments.length<2?Lt&&Lt.on:(Lt&&(Lt.on=null,Se=Se.slice(0,At=Se.indexOf(Lt)).concat(Se.slice(At+1)),Ve.remove(it)),ct&&Se.push(Ve.set(it,{on:ct})),ve)},tt}n.event=null;function q(){n.event.preventDefault()}function ue(){for(var ve=n.event,Se;Se=ve.sourceEvent;)ve=Se;return ve}function te(ve){for(var Se=new $,Ve=0,tt=arguments.length;++Ve<tt;)Se[arguments[Ve]]=ne(Se);return Se.of=function(it,ct){return function(Lt){try{var At=Lt.sourceEvent=n.event;Lt.target=ve,n.event=Lt,Se[Lt.type].apply(it,ct)}finally{n.event=At}}},Se}n.requote=function(ve){return ve.replace(J,"\\$&")};var J=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie={}.__proto__?function(ve,Se){ve.__proto__=Se}:function(ve,Se){for(var Ve in Se)ve[Ve]=Se[Ve]};function K(ve){return ie(ve,Z),ve}var ee=function(ve,Se){return Se.querySelector(ve)},le=function(ve,Se){return Se.querySelectorAll(ve)},j=function(ve,Se){var Ve=ve.matches||ve[z(ve,"matchesSelector")];return j=function(tt,it){return Ve.call(tt,it)},j(ve,Se)};typeof Sizzle=="function"&&(ee=function(ve,Se){return Sizzle(ve,Se)[0]||null},le=Sizzle,j=Sizzle.matchesSelector),n.selection=function(){return n.select(v.documentElement)};var Z=n.selection.prototype=[];Z.select=function(ve){var Se=[],Ve,tt,it,ct;ve=fe(ve);for(var Lt=-1,At=this.length;++Lt<At;){Se.push(Ve=[]),Ve.parentNode=(it=this[Lt]).parentNode;for(var Vt=-1,Wt=it.length;++Vt<Wt;)(ct=it[Vt])?(Ve.push(tt=ve.call(ct,ct.__data__,Vt,Lt)),tt&&"__data__"in ct&&(tt.__data__=ct.__data__)):Ve.push(null)}return K(Se)};function fe(ve){return typeof ve=="function"?ve:function(){return ee(ve,this)}}Z.selectAll=function(ve){var Se=[],Ve,tt;ve=re(ve);for(var it=-1,ct=this.length;++it<ct;)for(var Lt=this[it],At=-1,Vt=Lt.length;++At<Vt;)(tt=Lt[At])&&(Se.push(Ve=T(ve.call(tt,tt.__data__,At,it))),Ve.parentNode=tt);return K(Se)};function re(ve){return typeof ve=="function"?ve:function(){return le(ve,this)}}var ce="http://www.w3.org/1999/xhtml",xe={svg:"http://www.w3.org/2000/svg",xhtml:ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:xe,qualify:function(ve){var Se=ve.indexOf(":"),Ve=ve;return Se>=0&&(Ve=ve.slice(0,Se))!=="xmlns"&&(ve=ve.slice(Se+1)),xe.hasOwnProperty(Ve)?{space:xe[Ve],local:ve}:ve}},Z.attr=function(ve,Se){if(arguments.length<2){if(typeof ve=="string"){var Ve=this.node();return ve=n.ns.qualify(ve),ve.local?Ve.getAttributeNS(ve.space,ve.local):Ve.getAttribute(ve)}for(Se in ve)this.each(Te(Se,ve[Se]));return this}return this.each(Te(ve,Se))};function Te(ve,Se){ve=n.ns.qualify(ve);function Ve(){this.removeAttribute(ve)}function tt(){this.removeAttributeNS(ve.space,ve.local)}function it(){this.setAttribute(ve,Se)}function ct(){this.setAttributeNS(ve.space,ve.local,Se)}function Lt(){var Vt=Se.apply(this,arguments);Vt==null?this.removeAttribute(ve):this.setAttribute(ve,Vt)}function At(){var Vt=Se.apply(this,arguments);Vt==null?this.removeAttributeNS(ve.space,ve.local):this.setAttributeNS(ve.space,ve.local,Vt)}return Se==null?ve.local?tt:Ve:typeof Se=="function"?ve.local?At:Lt:ve.local?ct:it}function we(ve){return ve.trim().replace(/\s+/g," ")}Z.classed=function(ve,Se){if(arguments.length<2){if(typeof ve=="string"){var Ve=this.node(),tt=(ve=ke(ve)).length,it=-1;if(Se=Ve.classList){for(;++it<tt;)if(!Se.contains(ve[it]))return!1}else for(Se=Ve.getAttribute("class");++it<tt;)if(!_e(ve[it]).test(Se))return!1;return!0}for(Se in ve)this.each(Ne(Se,ve[Se]));return this}return this.each(Ne(ve,Se))};function _e(ve){return new RegExp("(?:^|\\s+)"+n.requote(ve)+"(?:\\s+|$)","g")}function ke(ve){return(ve+"").trim().split(/^|\s+/)}function Ne(ve,Se){ve=ke(ve).map(Ee);var Ve=ve.length;function tt(){for(var ct=-1;++ct<Ve;)ve[ct](this,Se)}function it(){for(var ct=-1,Lt=Se.apply(this,arguments);++ct<Ve;)ve[ct](this,Lt)}return typeof Se=="function"?it:tt}function Ee(ve){var Se=_e(ve);return function(Ve,tt){if(it=Ve.classList)return tt?it.add(ve):it.remove(ve);var it=Ve.getAttribute("class")||"";tt?(Se.lastIndex=0,Se.test(it)||Ve.setAttribute("class",we(it+" "+ve))):Ve.setAttribute("class",we(it.replace(Se," ")))}}Z.style=function(ve,Se,Ve){var tt=arguments.length;if(tt<3){if(typeof ve!="string"){tt<2&&(Se="");for(Ve in ve)this.each(ze(Ve,ve[Ve],Se));return this}if(tt<2){var it=this.node();return r(it).getComputedStyle(it,null).getPropertyValue(ve)}Ve=""}return this.each(ze(ve,Se,Ve))};function ze(ve,Se,Ve){function tt(){this.style.removeProperty(ve)}function it(){this.style.setProperty(ve,Se,Ve)}function ct(){var Lt=Se.apply(this,arguments);Lt==null?this.style.removeProperty(ve):this.style.setProperty(ve,Lt,Ve)}return Se==null?tt:typeof Se=="function"?ct:it}Z.property=function(ve,Se){if(arguments.length<2){if(typeof ve=="string")return this.node()[ve];for(Se in ve)this.each(Ce(Se,ve[Se]));return this}return this.each(Ce(ve,Se))};function Ce(ve,Se){function Ve(){delete this[ve]}function tt(){this[ve]=Se}function it(){var ct=Se.apply(this,arguments);ct==null?delete this[ve]:this[ve]=ct}return Se==null?Ve:typeof Se=="function"?it:tt}Z.text=function(ve){return arguments.length?this.each(typeof ve=="function"?function(){var Se=ve.apply(this,arguments);this.textContent=Se??""}:ve==null?function(){this.textContent=""}:function(){this.textContent=ve}):this.node().textContent},Z.html=function(ve){return arguments.length?this.each(typeof ve=="function"?function(){var Se=ve.apply(this,arguments);this.innerHTML=Se??""}:ve==null?function(){this.innerHTML=""}:function(){this.innerHTML=ve}):this.node().innerHTML},Z.append=function(ve){return ve=Oe(ve),this.select(function(){return this.appendChild(ve.apply(this,arguments))})};function Oe(ve){function Se(){var tt=this.ownerDocument,it=this.namespaceURI;return it===ce&&tt.documentElement.namespaceURI===ce?tt.createElement(ve):tt.createElementNS(it,ve)}function Ve(){return this.ownerDocument.createElementNS(ve.space,ve.local)}return typeof ve=="function"?ve:(ve=n.ns.qualify(ve)).local?Ve:Se}Z.insert=function(ve,Se){return ve=Oe(ve),Se=fe(Se),this.select(function(){return this.insertBefore(ve.apply(this,arguments),Se.apply(this,arguments)||null)})},Z.remove=function(){return this.each(Le)};function Le(){var ve=this.parentNode;ve&&ve.removeChild(this)}Z.data=function(ve,Se){var Ve=-1,tt=this.length,it,ct;if(!arguments.length){for(ve=new Array(tt=(it=this[0]).length);++Ve<tt;)(ct=it[Ve])&&(ve[Ve]=ct.__data__);return ve}function Lt(tr,Cr){var Lr,Qr=tr.length,on=Cr.length,Pr=Math.min(Qr,on),Ur=new Array(on),jr=new Array(on),cn=new Array(Qr),dn,tn;if(Se){var Vn=new P,ti=new Array(Qr),fi;for(Lr=-1;++Lr<Qr;)(dn=tr[Lr])&&(Vn.has(fi=Se.call(dn,dn.__data__,Lr))?cn[Lr]=dn:Vn.set(fi,dn),ti[Lr]=fi);for(Lr=-1;++Lr<on;)(dn=Vn.get(fi=Se.call(Cr,tn=Cr[Lr],Lr)))?dn!==!0&&(Ur[Lr]=dn,dn.__data__=tn):jr[Lr]=Ge(tn),Vn.set(fi,!0);for(Lr=-1;++Lr<Qr;)Lr in ti&&Vn.get(ti[Lr])!==!0&&(cn[Lr]=tr[Lr])}else{for(Lr=-1;++Lr<Pr;)dn=tr[Lr],tn=Cr[Lr],dn?(dn.__data__=tn,Ur[Lr]=dn):jr[Lr]=Ge(tn);for(;Lr<on;++Lr)jr[Lr]=Ge(Cr[Lr]);for(;Lr<Qr;++Lr)cn[Lr]=tr[Lr]}jr.update=Ur,jr.parentNode=Ur.parentNode=cn.parentNode=tr.parentNode,At.push(jr),Vt.push(Ur),Wt.push(cn)}var At=qe([]),Vt=K([]),Wt=K([]);if(typeof ve=="function")for(;++Ve<tt;)Lt(it=this[Ve],ve.call(it,it.parentNode.__data__,Ve));else for(;++Ve<tt;)Lt(it=this[Ve],ve);return Vt.enter=function(){return At},Vt.exit=function(){return Wt},Vt};function Ge(ve){return{__data__:ve}}Z.datum=function(ve){return arguments.length?this.property("__data__",ve):this.property("__data__")},Z.filter=function(ve){var Se=[],Ve,tt,it;typeof ve!="function"&&(ve=rt(ve));for(var ct=0,Lt=this.length;ct<Lt;ct++){Se.push(Ve=[]),Ve.parentNode=(tt=this[ct]).parentNode;for(var At=0,Vt=tt.length;At<Vt;At++)(it=tt[At])&&ve.call(it,it.__data__,At,ct)&&Ve.push(it)}return K(Se)};function rt(ve){return function(){return j(this,ve)}}Z.order=function(){for(var ve=-1,Se=this.length;++ve<Se;)for(var Ve=this[ve],tt=Ve.length-1,it=Ve[tt],ct;--tt>=0;)(ct=Ve[tt])&&(it&&it!==ct.nextSibling&&it.parentNode.insertBefore(ct,it),it=ct);return this},Z.sort=function(ve){ve=ot.apply(this,arguments);for(var Se=-1,Ve=this.length;++Se<Ve;)this[Se].sort(ve);return this.order()};function ot(ve){return arguments.length||(ve=l),function(Se,Ve){return Se&&Ve?ve(Se.__data__,Ve.__data__):!Se-!Ve}}Z.each=function(ve){return $e(this,function(Se,Ve,tt){ve.call(Se,Se.__data__,Ve,tt)})};function $e(ve,Se){for(var Ve=0,tt=ve.length;Ve<tt;Ve++)for(var it=ve[Ve],ct=0,Lt=it.length,At;ct<Lt;ct++)(At=it[ct])&&Se(At,ct,Ve);return ve}Z.call=function(ve){var Se=T(arguments);return ve.apply(Se[0]=this,Se),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var ve=0,Se=this.length;ve<Se;ve++)for(var Ve=this[ve],tt=0,it=Ve.length;tt<it;tt++){var ct=Ve[tt];if(ct)return ct}return null},Z.size=function(){var ve=0;return $e(this,function(){++ve}),ve};function qe(ve){return ie(ve,ht),ve}var ht=[];n.selection.enter=qe,n.selection.enter.prototype=ht,ht.append=Z.append,ht.empty=Z.empty,ht.node=Z.node,ht.call=Z.call,ht.size=Z.size,ht.select=function(ve){for(var Se=[],Ve,tt,it,ct,Lt,At=-1,Vt=this.length;++At<Vt;){it=(ct=this[At]).update,Se.push(Ve=[]),Ve.parentNode=ct.parentNode;for(var Wt=-1,tr=ct.length;++Wt<tr;)(Lt=ct[Wt])?(Ve.push(it[Wt]=tt=ve.call(ct.parentNode,Lt.__data__,Wt,At)),tt.__data__=Lt.__data__):Ve.push(null)}return K(Se)},ht.insert=function(ve,Se){return arguments.length<2&&(Se=vt(this)),Z.insert.call(this,ve,Se)};function vt(ve){var Se,Ve;return function(tt,it,ct){var Lt=ve[ct].update,At=Lt.length,Vt;for(ct!=Ve&&(Ve=ct,Se=0),it>=Se&&(Se=it+1);!(Vt=Lt[Se])&&++Se<At;);return Vt}}n.select=function(ve){var Se;return typeof ve=="string"?(Se=[ee(ve,v)],Se.parentNode=v.documentElement):(Se=[ve],Se.parentNode=g(ve)),K([Se])},n.selectAll=function(ve){var Se;return typeof ve=="string"?(Se=T(le(ve,v)),Se.parentNode=v.documentElement):(Se=T(ve),Se.parentNode=null),K([Se])},Z.on=function(ve,Se,Ve){var tt=arguments.length;if(tt<3){if(typeof ve!="string"){tt<2&&(Se=!1);for(Ve in ve)this.each(pt(Ve,ve[Ve],Se));return this}if(tt<2)return(tt=this.node()["__on"+ve])&&tt._;Ve=!1}return this.each(pt(ve,Se,Ve))};function pt(ve,Se,Ve){var tt="__on"+ve,it=ve.indexOf("."),ct=Et;it>0&&(ve=ve.slice(0,it));var Lt=wt.get(ve);Lt&&(ve=Lt,ct=nt);function At(){var tr=this[tt];tr&&(this.removeEventListener(ve,tr,tr.$),delete this[tt])}function Vt(){var tr=ct(Se,T(arguments));At.call(this),this.addEventListener(ve,this[tt]=tr,tr.$=Ve),tr._=Se}function Wt(){var tr=new RegExp("^__on([^.]+)"+n.requote(ve)+"$"),Cr;for(var Lr in this)if(Cr=Lr.match(tr)){var Qr=this[Lr];this.removeEventListener(Cr[1],Qr,Qr.$),delete this[Lr]}}return it?Se?Vt:At:Se?X:Wt}var wt=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});v&&wt.forEach(function(ve){"on"+ve in v&&wt.remove(ve)});function Et(ve,Se){return function(Ve){var tt=n.event;n.event=Ve,Se[0]=this.__data__;try{ve.apply(this,Se)}finally{n.event=tt}}}function nt(ve,Se){var Ve=Et(ve,Se);return function(tt){var it=this,ct=tt.relatedTarget;(!ct||ct!==it&&!(ct.compareDocumentPosition(it)&8))&&Ve.call(it,tt)}}var Fe,We=0;function Ze(ve){var Se=".dragsuppress-"+ ++We,Ve="click"+Se,tt=n.select(r(ve)).on("touchmove"+Se,q).on("dragstart"+Se,q).on("selectstart"+Se,q);if(Fe==null&&(Fe="onselectstart"in ve?!1:z(ve.style,"userSelect")),Fe){var it=g(ve).style,ct=it[Fe];it[Fe]="none"}return function(Lt){if(tt.on(Se,null),Fe&&(it[Fe]=ct),Lt){var At=function(){tt.on(Ve,null)};tt.on(Ve,function(){q(),At()},!0),setTimeout(At,0)}}}n.mouse=function(ve){return Ie(ve,ue())};var Ye=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ie(ve,Se){Se.changedTouches&&(Se=Se.changedTouches[0]);var Ve=ve.ownerSVGElement||ve;if(Ve.createSVGPoint){var tt=Ve.createSVGPoint();if(Ye<0){var it=r(ve);if(it.scrollX||it.scrollY){Ve=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ct=Ve[0][0].getScreenCTM();Ye=!(ct.f||ct.e),Ve.remove()}}return Ye?(tt.x=Se.pageX,tt.y=Se.pageY):(tt.x=Se.clientX,tt.y=Se.clientY),tt=tt.matrixTransform(ve.getScreenCTM().inverse()),[tt.x,tt.y]}var Lt=ve.getBoundingClientRect();return[Se.clientX-Lt.left-ve.clientLeft,Se.clientY-Lt.top-ve.clientTop]}n.touch=function(ve,Se,Ve){if(arguments.length<3&&(Ve=Se,Se=ue().changedTouches),Se){for(var tt=0,it=Se.length,ct;tt<it;++tt)if((ct=Se[tt]).identifier===Ve)return Ie(ve,ct)}},n.behavior.drag=function(){var ve=te(it,"drag","dragstart","dragend"),Se=null,Ve=ct(X,n.mouse,r,"mousemove","mouseup"),tt=ct(De,n.touch,N,"touchmove","touchend");function it(){this.on("mousedown.drag",Ve).on("touchstart.drag",tt)}function ct(Lt,At,Vt,Wt,tr){return function(){var Cr=this,Lr=n.event.target.correspondingElement||n.event.target,Qr=Cr.parentNode,on=ve.of(Cr,arguments),Pr=0,Ur=Lt(),jr=".drag"+(Ur==null?"":"-"+Ur),cn,dn=n.select(Vt(Lr)).on(Wt+jr,ti).on(tr+jr,fi),tn=Ze(Lr),Vn=At(Qr,Ur);Se?(cn=Se.apply(Cr,arguments),cn=[cn.x-Vn[0],cn.y-Vn[1]]):cn=[0,0],on({type:"dragstart"});function ti(){var qn=At(Qr,Ur),oi,ci;qn&&(oi=qn[0]-Vn[0],ci=qn[1]-Vn[1],Pr|=oi|ci,Vn=qn,on({type:"drag",x:qn[0]+cn[0],y:qn[1]+cn[1],dx:oi,dy:ci}))}function fi(){At(Qr,Ur)&&(dn.on(Wt+jr,null).on(tr+jr,null),tn(Pr),on({type:"dragend"}))}}}return it.origin=function(Lt){return arguments.length?(Se=Lt,it):Se},n.rebind(it,ve,"on")};function De(){return n.event.changedTouches[0].identifier}n.touches=function(ve,Se){return arguments.length<2&&(Se=ue().touches),Se?T(Se).map(function(Ve){var tt=Ie(ve,Ve);return tt.identifier=Ve.identifier,tt}):[]};var je=1e-6,Re=je*je,pe=Math.PI,be=2*pe,Ue=be-je,et=pe/2,st=pe/180,lt=180/pe;function Gt(ve,Se,Ve){return(Se[0]-ve[0])*(Ve[1]-ve[1])-(Se[1]-ve[1])*(Ve[0]-ve[0])}function Zt(ve){return ve>1?et:ve<-1?-et:Math.asin(ve)}function Tt(ve){return((ve=Math.exp(ve))-1/ve)/2}function It(ve){return((ve=Math.exp(ve))+1/ve)/2}function Xt(ve){return((ve=Math.exp(2*ve))-1)/(ve+1)}var gr=Math.SQRT2,gt=2,jt=4;n.interpolateZoom=function(ve,Se){var Ve=ve[0],tt=ve[1],it=ve[2],ct=Se[0],Lt=Se[1],At=Se[2],Vt=ct-Ve,Wt=Lt-tt,tr=Vt*Vt+Wt*Wt,Cr,Lr;if(tr<Re)Lr=Math.log(At/it)/gr,Cr=function(cn){return[Ve+cn*Vt,tt+cn*Wt,it*Math.exp(gr*cn*Lr)]};else{var Qr=Math.sqrt(tr),on=(At*At-it*it+jt*tr)/(2*it*gt*Qr),Pr=(At*At-it*it-jt*tr)/(2*At*gt*Qr),Ur=Math.log(Math.sqrt(on*on+1)-on),jr=Math.log(Math.sqrt(Pr*Pr+1)-Pr);Lr=(jr-Ur)/gr,Cr=function(cn){var dn=cn*Lr,tn=It(Ur),Vn=it/(gt*Qr)*(tn*Xt(gr*dn+Ur)-Tt(Ur));return[Ve+Vn*Vt,tt+Vn*Wt,it*tn/It(gr*dn+Ur)]}}return Cr.duration=Lr*1e3,Cr},n.behavior.zoom=function(){var ve={x:0,y:0,k:1},Se,Ve,tt,it=[960,500],ct=Qt,Lt=250,At=0,Vt="mousedown.zoom",Wt="mousemove.zoom",tr="mouseup.zoom",Cr,Lr="touchstart.zoom",Qr,on=te(dn,"zoomstart","zoom","zoomend"),Pr,Ur,jr,cn;or||(or="onwheel"in v?(mr=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in v?(mr=function(){return n.event.wheelDelta},"mousewheel"):(mr=function(){return-n.event.detail},"MozMousePixelScroll"));function dn(Qn){Qn.on(Vt,Di).on(or+".zoom",Ka).on("dblclick.zoom",ha).on(Lr,aa)}dn.event=function(Qn){Qn.each(function(){var Ni=on.of(this,arguments),Ai=ve;Ir?n.select(this).transition().each("start.zoom",function(){ve=this.__chart__||{x:0,y:0,k:1},ci(Ni)}).tween("zoom:zoom",function(){var ji=it[0],Ma=it[1],oa=Ve?Ve[0]:ji/2,uo=Ve?Ve[1]:Ma/2,fo=n.interpolateZoom([(oa-ve.x)/ve.k,(uo-ve.y)/ve.k,ji/ve.k],[(oa-Ai.x)/Ai.k,(uo-Ai.y)/Ai.k,ji/Ai.k]);return function(go){var Ea=fo(go),Mo=ji/Ea[2];this.__chart__=ve={x:oa-Ea[0]*Mo,y:uo-Ea[1]*Mo,k:Mo},Fi(Ni)}}).each("interrupt.zoom",function(){Ei(Ni)}).each("end.zoom",function(){Ei(Ni)}):(this.__chart__=ve,ci(Ni),Fi(Ni),Ei(Ni))})},dn.translate=function(Qn){return arguments.length?(ve={x:+Qn[0],y:+Qn[1],k:ve.k},oi(),dn):[ve.x,ve.y]},dn.scale=function(Qn){return arguments.length?(ve={x:ve.x,y:ve.y,k:null},ti(+Qn),oi(),dn):ve.k},dn.scaleExtent=function(Qn){return arguments.length?(ct=Qn==null?Qt:[+Qn[0],+Qn[1]],dn):ct},dn.center=function(Qn){return arguments.length?(tt=Qn&&[+Qn[0],+Qn[1]],dn):tt},dn.size=function(Qn){return arguments.length?(it=Qn&&[+Qn[0],+Qn[1]],dn):it},dn.duration=function(Qn){return arguments.length?(Lt=+Qn,dn):Lt},dn.x=function(Qn){return arguments.length?(Ur=Qn,Pr=Qn.copy(),ve={x:0,y:0,k:1},dn):Ur},dn.y=function(Qn){return arguments.length?(cn=Qn,jr=Qn.copy(),ve={x:0,y:0,k:1},dn):cn};function tn(Qn){return[(Qn[0]-ve.x)/ve.k,(Qn[1]-ve.y)/ve.k]}function Vn(Qn){return[Qn[0]*ve.k+ve.x,Qn[1]*ve.k+ve.y]}function ti(Qn){ve.k=Math.max(ct[0],Math.min(ct[1],Qn))}function fi(Qn,Ni){Ni=Vn(Ni),ve.x+=Qn[0]-Ni[0],ve.y+=Qn[1]-Ni[1]}function qn(Qn,Ni,Ai,ji){Qn.__chart__={x:ve.x,y:ve.y,k:ve.k},ti(Math.pow(2,ji)),fi(Ve=Ni,Ai),Qn=n.select(Qn),Lt>0&&(Qn=Qn.transition().duration(Lt)),Qn.call(dn.event)}function oi(){Ur&&Ur.domain(Pr.range().map(function(Qn){return(Qn-ve.x)/ve.k}).map(Pr.invert)),cn&&cn.domain(jr.range().map(function(Qn){return(Qn-ve.y)/ve.k}).map(jr.invert))}function ci(Qn){At++||Qn({type:"zoomstart"})}function Fi(Qn){oi(),Qn({type:"zoom",scale:ve.k,translate:[ve.x,ve.y]})}function Ei(Qn){--At||(Qn({type:"zoomend"}),Ve=null)}function Di(){var Qn=this,Ni=on.of(Qn,arguments),Ai=0,ji=n.select(r(Qn)).on(Wt,uo).on(tr,fo),Ma=tn(n.mouse(Qn)),oa=Ze(Qn);Ot.call(Qn),ci(Ni);function uo(){Ai=1,fi(n.mouse(Qn),Ma),Fi(Ni)}function fo(){ji.on(Wt,null).on(tr,null),oa(Ai),Ei(Ni)}}function aa(){var Qn=this,Ni=on.of(Qn,arguments),Ai={},ji=0,Ma,oa=".zoom-"+n.event.changedTouches[0].identifier,uo="touchmove"+oa,fo="touchend"+oa,go=[],Ea=n.select(Qn),Mo=Ze(Qn);Ci(),ci(Ni),Ea.on(Vt,null).on(Lr,Ci);function li(){var yo=n.touches(Qn);return Ma=ve.k,yo.forEach(function(pa){pa.identifier in Ai&&(Ai[pa.identifier]=tn(pa))}),yo}function Ci(){var yo=n.event.target;n.select(yo).on(uo,Vo).on(fo,Zo),go.push(yo);for(var pa=n.event.changedTouches,to=0,Ja=pa.length;to<Ja;++to)Ai[pa[to].identifier]=null;var Ls=li(),Ys=Date.now();if(Ls.length===1){if(Ys-Qr<500){var za=Ls[0];qn(Qn,za,Ai[za.identifier],Math.floor(Math.log(ve.k)/Math.LN2)+1),q()}Qr=Ys}else if(Ls.length>1){var za=Ls[0],eu=Ls[1],Ki=za[0]-eu[0],Oa=za[1]-eu[1];ji=Ki*Ki+Oa*Oa}}function Vo(){var yo=n.touches(Qn),pa,to,Ja,Ls;Ot.call(Qn);for(var Ys=0,za=yo.length;Ys<za;++Ys,Ls=null)if(Ja=yo[Ys],Ls=Ai[Ja.identifier]){if(to)break;pa=Ja,to=Ls}if(Ls){var eu=(eu=Ja[0]-pa[0])*eu+(eu=Ja[1]-pa[1])*eu,Ki=ji&&Math.sqrt(eu/ji);pa=[(pa[0]+Ja[0])/2,(pa[1]+Ja[1])/2],to=[(to[0]+Ls[0])/2,(to[1]+Ls[1])/2],ti(Ki*Ma)}Qr=null,fi(pa,to),Fi(Ni)}function Zo(){if(n.event.touches.length){for(var yo=n.event.changedTouches,pa=0,to=yo.length;pa<to;++pa)delete Ai[yo[pa].identifier];for(var Ja in Ai)return void li()}n.selectAll(go).on(oa,null),Ea.on(Vt,Di).on(Lr,aa),Mo(),Ei(Ni)}}function Ka(){var Qn=on.of(this,arguments);Cr?clearTimeout(Cr):(Ot.call(this),Se=tn(Ve=tt||n.mouse(this)),ci(Qn)),Cr=setTimeout(function(){Cr=null,Ei(Qn)},50),q(),ti(Math.pow(2,mr()*.002)*ve.k),fi(Ve,Se),Fi(Qn)}function ha(){var Qn=n.mouse(this),Ni=Math.log(ve.k)/Math.LN2;qn(this,Qn,tn(Qn),n.event.shiftKey?Math.ceil(Ni)-1:Math.floor(Ni)+1)}return n.rebind(dn,on,"on")};var Qt=[0,1/0],mr,or;n.color=mt;function mt(){}mt.prototype.toString=function(){return this.rgb()+""},n.hsl=ut;function ut(ve,Se,Ve){return this instanceof ut?(this.h=+ve,this.s=+Se,void(this.l=+Ve)):arguments.length<2?ve instanceof ut?new ut(ve.h,ve.s,ve.l):xr(""+ve,vr,ut):new ut(ve,Se,Ve)}var bt=ut.prototype=new mt;bt.brighter=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new ut(this.h,this.s,this.l/ve)},bt.darker=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new ut(this.h,this.s,ve*this.l)},bt.rgb=function(){return St(this.h,this.s,this.l)};function St(ve,Se,Ve){var tt,it;ve=isNaN(ve)?0:(ve%=360)<0?ve+360:ve,Se=isNaN(Se)||Se<0?0:Se>1?1:Se,Ve=Ve<0?0:Ve>1?1:Ve,it=Ve<=.5?Ve*(1+Se):Ve+Se-Ve*Se,tt=2*Ve-it;function ct(At){return At>360?At-=360:At<0&&(At+=360),At<60?tt+(it-tt)*At/60:At<180?it:At<240?tt+(it-tt)*(240-At)/60:tt}function Lt(At){return Math.round(ct(At)*255)}return new ur(Lt(ve+120),Lt(ve),Lt(ve-120))}n.hcl=Pt;function Pt(ve,Se,Ve){return this instanceof Pt?(this.h=+ve,this.c=+Se,void(this.l=+Ve)):arguments.length<2?ve instanceof Pt?new Pt(ve.h,ve.c,ve.l):ve instanceof Nt?zt(ve.l,ve.a,ve.b):zt((ve=Vr((ve=n.rgb(ve)).r,ve.g,ve.b)).l,ve.a,ve.b):new Pt(ve,Se,Ve)}var Ht=Pt.prototype=new mt;Ht.brighter=function(ve){return new Pt(this.h,this.c,Math.min(100,this.l+Kt*(arguments.length?ve:1)))},Ht.darker=function(ve){return new Pt(this.h,this.c,Math.max(0,this.l-Kt*(arguments.length?ve:1)))},Ht.rgb=function(){return Bt(this.h,this.c,this.l).rgb()};function Bt(ve,Se,Ve){return isNaN(ve)&&(ve=0),isNaN(Se)&&(Se=0),new Nt(Ve,Math.cos(ve*=st)*Se,Math.sin(ve)*Se)}n.lab=Nt;function Nt(ve,Se,Ve){return this instanceof Nt?(this.l=+ve,this.a=+Se,void(this.b=+Ve)):arguments.length<2?ve instanceof Nt?new Nt(ve.l,ve.a,ve.b):ve instanceof Pt?Bt(ve.h,ve.c,ve.l):Vr((ve=ur(ve)).r,ve.g,ve.b):new Nt(ve,Se,Ve)}var Kt=18,fr=.95047,cr=1,dr=1.08883,Xe=Nt.prototype=new mt;Xe.brighter=function(ve){return new Nt(Math.min(100,this.l+Kt*(arguments.length?ve:1)),this.a,this.b)},Xe.darker=function(ve){return new Nt(Math.max(0,this.l-Kt*(arguments.length?ve:1)),this.a,this.b)},Xe.rgb=function(){return He(this.l,this.a,this.b)};function He(ve,Se,Ve){var tt=(ve+16)/116,it=tt+Se/500,ct=tt-Ve/200;return it=Rt(it)*fr,tt=Rt(tt)*cr,ct=Rt(ct)*dr,new ur(sr(3.2404542*it-1.5371385*tt-.4985314*ct),sr(-.969266*it+1.8760108*tt+.041556*ct),sr(.0556434*it-.2040259*tt+1.0572252*ct))}function zt(ve,Se,Ve){return ve>0?new Pt(Math.atan2(Ve,Se)*lt,Math.sqrt(Se*Se+Ve*Ve),ve):new Pt(NaN,NaN,ve)}function Rt(ve){return ve>.206893034?ve*ve*ve:(ve-.13793103448275862)/7.787037}function Jt(ve){return ve>.008856?Math.pow(ve,.3333333333333333):7.787037*ve+.13793103448275862}function sr(ve){return Math.round(255*(ve<=.00304?12.92*ve:1.055*Math.pow(ve,.4166666666666667)-.055))}n.rgb=ur;function ur(ve,Se,Ve){return this instanceof ur?(this.r=~~ve,this.g=~~Se,void(this.b=~~Ve)):arguments.length<2?ve instanceof ur?new ur(ve.r,ve.g,ve.b):xr(""+ve,ur,St):new ur(ve,Se,Ve)}function er(ve){return new ur(ve>>16,ve>>8&255,ve&255)}function Ft(ve){return er(ve)+""}var ir=ur.prototype=new mt;ir.brighter=function(ve){ve=Math.pow(.7,arguments.length?ve:1);var Se=this.r,Ve=this.g,tt=this.b,it=30;return!Se&&!Ve&&!tt?new ur(it,it,it):(Se&&Se<it&&(Se=it),Ve&&Ve<it&&(Ve=it),tt&&tt<it&&(tt=it),new ur(Math.min(255,Se/ve),Math.min(255,Ve/ve),Math.min(255,tt/ve)))},ir.darker=function(ve){return ve=Math.pow(.7,arguments.length?ve:1),new ur(ve*this.r,ve*this.g,ve*this.b)},ir.hsl=function(){return vr(this.r,this.g,this.b)},ir.toString=function(){return"#"+hr(this.r)+hr(this.g)+hr(this.b)};function hr(ve){return ve<16?"0"+Math.max(0,ve).toString(16):Math.min(255,ve).toString(16)}function xr(ve,Se,Ve){var tt=0,it=0,ct=0,Lt,At,Vt;if(Lt=/([a-z]+)\((.*)\)/.exec(ve=ve.toLowerCase()),Lt)switch(At=Lt[2].split(","),Lt[1]){case"hsl":return Ve(parseFloat(At[0]),parseFloat(At[1])/100,parseFloat(At[2])/100);case"rgb":return Se(Rr(At[0]),Rr(At[1]),Rr(At[2]))}return(Vt=nn.get(ve))?Se(Vt.r,Vt.g,Vt.b):(ve!=null&&ve.charAt(0)==="#"&&!isNaN(Vt=parseInt(ve.slice(1),16))&&(ve.length===4?(tt=(Vt&3840)>>4,tt=tt>>4|tt,it=Vt&240,it=it>>4|it,ct=Vt&15,ct=ct<<4|ct):ve.length===7&&(tt=(Vt&16711680)>>16,it=(Vt&65280)>>8,ct=Vt&255)),Se(tt,it,ct))}function vr(ve,Se,Ve){var tt=Math.min(ve/=255,Se/=255,Ve/=255),it=Math.max(ve,Se,Ve),ct=it-tt,Lt,At,Vt=(it+tt)/2;return ct?(At=Vt<.5?ct/(it+tt):ct/(2-it-tt),ve==it?Lt=(Se-Ve)/ct+(Se<Ve?6:0):Se==it?Lt=(Ve-ve)/ct+2:Lt=(ve-Se)/ct+4,Lt*=60):(Lt=NaN,At=Vt>0&&Vt<1?0:Lt),new ut(Lt,At,Vt)}function Vr(ve,Se,Ve){ve=_r(ve),Se=_r(Se),Ve=_r(Ve);var tt=Jt((.4124564*ve+.3575761*Se+.1804375*Ve)/fr),it=Jt((.2126729*ve+.7151522*Se+.072175*Ve)/cr),ct=Jt((.0193339*ve+.119192*Se+.9503041*Ve)/dr);return Nt(116*it-16,500*(tt-it),200*(it-ct))}function _r(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function Rr(ve){var Se=parseFloat(ve);return ve.charAt(ve.length-1)==="%"?Math.round(Se*2.55):Se}var nn=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});nn.forEach(function(ve,Se){nn.set(ve,er(Se))});function en(ve){return typeof ve=="function"?ve:function(){return ve}}n.functor=en,n.xhr=An(N);function An(ve){return function(Se,Ve,tt){return arguments.length===2&&typeof Ve=="function"&&(tt=Ve,Ve=null),wn(Se,Ve,ve,tt)}}function wn(ve,Se,Ve,tt){var it={},ct=n.dispatch("beforesend","progress","load","error"),Lt={},At=new XMLHttpRequest,Vt=null;self.XDomainRequest&&!("withCredentials"in At)&&/^(http(s)?:)?\/\//.test(ve)&&(At=new XDomainRequest),"onload"in At?At.onload=At.onerror=Wt:At.onreadystatechange=function(){At.readyState>3&&Wt()};function Wt(){var tr=At.status,Cr;if(!tr&&kr(At)||tr>=200&&tr<300||tr===304){try{Cr=Ve.call(it,At)}catch(Lr){ct.error.call(it,Lr);return}ct.load.call(it,Cr)}else ct.error.call(it,At)}return At.onprogress=function(tr){var Cr=n.event;n.event=tr;try{ct.progress.call(it,At)}finally{n.event=Cr}},it.header=function(tr,Cr){return tr=(tr+"").toLowerCase(),arguments.length<2?Lt[tr]:(Cr==null?delete Lt[tr]:Lt[tr]=Cr+"",it)},it.mimeType=function(tr){return arguments.length?(Se=tr==null?null:tr+"",it):Se},it.responseType=function(tr){return arguments.length?(Vt=tr,it):Vt},it.response=function(tr){return Ve=tr,it},["get","post"].forEach(function(tr){it[tr]=function(){return it.send.apply(it,[tr].concat(T(arguments)))}}),it.send=function(tr,Cr,Lr){if(arguments.length===2&&typeof Cr=="function"&&(Lr=Cr,Cr=null),At.open(tr,ve,!0),Se!=null&&!("accept"in Lt)&&(Lt.accept=Se+",*/*"),At.setRequestHeader)for(var Qr in Lt)At.setRequestHeader(Qr,Lt[Qr]);return Se!=null&&At.overrideMimeType&&At.overrideMimeType(Se),Vt!=null&&(At.responseType=Vt),Lr!=null&&it.on("error",Lr).on("load",function(on){Lr(null,on)}),ct.beforesend.call(it,At),At.send(Cr??null),it},it.abort=function(){return At.abort(),it},n.rebind(it,ct,"on"),tt==null?it:it.get(Tr(tt))}function Tr(ve){return ve.length===1?function(Se,Ve){ve(Se==null?Ve:null)}:ve}function kr(ve){var Se=ve.responseType;return Se&&Se!=="text"?ve.response:ve.responseText}n.dsv=function(ve,Se){var Ve=new RegExp('["'+ve+`
]`),tt=ve.charCodeAt(0);function it(Wt,tr,Cr){arguments.length<3&&(Cr=tr,tr=null);var Lr=wn(Wt,Se,tr==null?ct:Lt(tr),Cr);return Lr.row=function(Qr){return arguments.length?Lr.response((tr=Qr)==null?ct:Lt(Qr)):tr},Lr}function ct(Wt){return it.parse(Wt.responseText)}function Lt(Wt){return function(tr){return it.parse(tr.responseText,Wt)}}it.parse=function(Wt,tr){var Cr;return it.parseRows(Wt,function(Lr,Qr){if(Cr)return Cr(Lr,Qr-1);var on=function(Pr){for(var Ur={},jr=Lr.length,cn=0;cn<jr;++cn)Ur[Lr[cn]]=Pr[cn];return Ur};Cr=tr?function(Pr,Ur){return tr(on(Pr),Ur)}:on})},it.parseRows=function(Wt,tr){var Cr={},Lr={},Qr=[],on=Wt.length,Pr=0,Ur=0,jr,cn;function dn(){if(Pr>=on)return Lr;if(cn)return cn=!1,Cr;var Vn=Pr;if(Wt.charCodeAt(Vn)===34){for(var ti=Vn;ti++<on;)if(Wt.charCodeAt(ti)===34){if(Wt.charCodeAt(ti+1)!==34)break;++ti}Pr=ti+2;var fi=Wt.charCodeAt(ti+1);return fi===13?(cn=!0,Wt.charCodeAt(ti+2)===10&&++Pr):fi===10&&(cn=!0),Wt.slice(Vn+1,ti).replace(/""/g,'"')}for(;Pr<on;){var fi=Wt.charCodeAt(Pr++),qn=1;if(fi===10)cn=!0;else if(fi===13)cn=!0,Wt.charCodeAt(Pr)===10&&(++Pr,++qn);else if(fi!==tt)continue;return Wt.slice(Vn,Pr-qn)}return Wt.slice(Vn)}for(;(jr=dn())!==Lr;){for(var tn=[];jr!==Cr&&jr!==Lr;)tn.push(jr),jr=dn();tr&&(tn=tr(tn,Ur++))==null||Qr.push(tn)}return Qr},it.format=function(Wt){if(Array.isArray(Wt[0]))return it.formatRows(Wt);var tr=new O,Cr=[];return Wt.forEach(function(Lr){for(var Qr in Lr)tr.has(Qr)||Cr.push(tr.add(Qr))}),[Cr.map(Vt).join(ve)].concat(Wt.map(function(Lr){return Cr.map(function(Qr){return Vt(Lr[Qr])}).join(ve)})).join(`
`)},it.formatRows=function(Wt){return Wt.map(At).join(`
`)};function At(Wt){return Wt.map(Vt).join(ve)}function Vt(Wt){return Ve.test(Wt)?'"'+Wt.replace(/\"/g,'""')+'"':Wt}return it},n.csv=n.dsv(",","text/csv"),n.tsv=n.dsv("	","text/tab-separated-values");var Wr,zr,sn,un,Mn=this[z(this,"requestAnimationFrame")]||function(ve){setTimeout(ve,17)};n.timer=function(){Ln.apply(this,arguments)};function Ln(ve,Se,Ve){var tt=arguments.length;tt<2&&(Se=0),tt<3&&(Ve=Date.now());var it=Ve+Se,ct={c:ve,t:it,n:null};return zr?zr.n=ct:Wr=ct,zr=ct,sn||(un=clearTimeout(un),sn=1,Mn(Un)),ct}function Un(){var ve=ai(),Se=yi()-ve;Se>24?(isFinite(Se)&&(clearTimeout(un),un=setTimeout(Un,Se)),sn=0):(sn=1,Mn(Un))}n.timer.flush=function(){ai(),yi()};function ai(){for(var ve=Date.now(),Se=Wr;Se;)ve>=Se.t&&Se.c(ve-Se.t)&&(Se.c=null),Se=Se.n;return ve}function yi(){for(var ve,Se=Wr,Ve=1/0;Se;)Se.c?(Se.t<Ve&&(Ve=Se.t),Se=(ve=Se).n):Se=ve?ve.n=Se.n:Wr=Se.n;return zr=ve,Ve}n.round=function(ve,Se){return Se?Math.round(ve*(Se=Math.pow(10,Se)))/Se:Math.round(ve)},n.geom={};function bi(ve){return ve[0]}function Hn(ve){return ve[1]}n.geom.hull=function(ve){var Se=bi,Ve=Hn;if(arguments.length)return tt(ve);function tt(it){if(it.length<3)return[];var ct=en(Se),Lt=en(Ve),At,Vt=it.length,Wt=[],tr=[];for(At=0;At<Vt;At++)Wt.push([+ct.call(this,it[At],At),+Lt.call(this,it[At],At),At]);for(Wt.sort(yr),At=0;At<Vt;At++)tr.push([Wt[At][0],-Wt[At][1]]);var Cr=Kn(Wt),Lr=Kn(tr),Qr=Lr[0]===Cr[0],on=Lr[Lr.length-1]===Cr[Cr.length-1],Pr=[];for(At=Cr.length-1;At>=0;--At)Pr.push(it[Wt[Cr[At]][2]]);for(At=+Qr;At<Lr.length-on;++At)Pr.push(it[Wt[Lr[At]][2]]);return Pr}return tt.x=function(it){return arguments.length?(Se=it,tt):Se},tt.y=function(it){return arguments.length?(Ve=it,tt):Ve},tt};function Kn(ve){for(var Se=ve.length,Ve=[0,1],tt=2,it=2;it<Se;it++){for(;tt>1&&Gt(ve[Ve[tt-2]],ve[Ve[tt-1]],ve[it])<=0;)--tt;Ve[tt++]=it}return Ve.slice(0,tt)}function yr(ve,Se){return ve[0]-Se[0]||ve[1]-Se[1]}n.geom.polygon=function(ve){return ie(ve,qr),ve};var qr=n.geom.polygon.prototype=[];qr.area=function(){for(var ve=-1,Se=this.length,Ve,tt=this[Se-1],it=0;++ve<Se;)Ve=tt,tt=this[ve],it+=Ve[1]*tt[0]-Ve[0]*tt[1];return it*.5},qr.centroid=function(ve){var Se=-1,Ve=this.length,tt=0,it=0,ct,Lt=this[Ve-1],At;for(arguments.length||(ve=-1/(6*this.area()));++Se<Ve;)ct=Lt,Lt=this[Se],At=ct[0]*Lt[1]-Lt[0]*ct[1],tt+=(ct[0]+Lt[0])*At,it+=(ct[1]+Lt[1])*At;return[tt*ve,it*ve]},qr.clip=function(ve){for(var Se,Ve=zn(ve),tt=-1,it=this.length-zn(this),ct,Lt,At=this[it-1],Vt,Wt,tr;++tt<it;){for(Se=ve.slice(),ve.length=0,Vt=this[tt],Wt=Se[(Lt=Se.length-Ve)-1],ct=-1;++ct<Lt;)tr=Se[ct],Kr(tr,At,Vt)?(Kr(Wt,At,Vt)||ve.push(hn(Wt,tr,At,Vt)),ve.push(tr)):Kr(Wt,At,Vt)&&ve.push(hn(Wt,tr,At,Vt)),Wt=tr;Ve&&ve.push(ve[0]),At=Vt}return ve};function Kr(ve,Se,Ve){return(Ve[0]-Se[0])*(ve[1]-Se[1])<(Ve[1]-Se[1])*(ve[0]-Se[0])}function hn(ve,Se,Ve,tt){var it=ve[0],ct=Ve[0],Lt=Se[0]-it,At=tt[0]-ct,Vt=ve[1],Wt=Ve[1],tr=Se[1]-Vt,Cr=tt[1]-Wt,Lr=(At*(Vt-Wt)-Cr*(it-ct))/(Cr*Lt-At*tr);return[it+Lr*Lt,Vt+Lr*tr]}function zn(ve){var Se=ve[0],Ve=ve[ve.length-1];return!(Se[0]-Ve[0]||Se[1]-Ve[1])}var xn,Tn,On,Jn=[],hi,Ri,Er=[];function Or(){Wo(this),this.edge=this.site=this.circle=null}function Ar(ve){var Se=Jn.pop()||new Or;return Se.site=ve,Se}function Fr(ve){kn(ve),On.remove(ve),Jn.push(ve),Wo(ve)}function yn(ve){var Se=ve.circle,Ve=Se.x,tt=Se.cy,it={x:Ve,y:tt},ct=ve.P,Lt=ve.N,At=[ve];Fr(ve);for(var Vt=ct;Vt.circle&&p(Ve-Vt.circle.x)<je&&p(tt-Vt.circle.cy)<je;)ct=Vt.P,At.unshift(Vt),Fr(Vt),Vt=ct;At.unshift(Vt),kn(Vt);for(var Wt=Lt;Wt.circle&&p(Ve-Wt.circle.x)<je&&p(tt-Wt.circle.cy)<je;)Lt=Wt.N,At.push(Wt),Fr(Wt),Wt=Lt;At.push(Wt),kn(Wt);var tr=At.length,Cr;for(Cr=1;Cr<tr;++Cr)Wt=At[Cr],Vt=At[Cr-1],Li(Wt.edge,Vt.site,Wt.site,it);Vt=At[0],Wt=At[tr-1],Wt.edge=si(Vt.site,Wt.site,null,it),bn(Vt),bn(Wt)}function Pn(ve){for(var Se=ve.x,Ve=ve.y,tt,it,ct,Lt,At=On._;At;)if(ct=pn(At,Ve)-Se,ct>je)At=At.L;else if(Lt=Se-ln(At,Ve),Lt>je){if(!At.R){tt=At;break}At=At.R}else{ct>-je?(tt=At.P,it=At):Lt>-je?(tt=At,it=At.N):tt=it=At;break}var Vt=Ar(ve);if(On.insert(tt,Vt),!(!tt&&!it)){if(tt===it){kn(tt),it=Ar(tt.site),On.insert(Vt,it),Vt.edge=it.edge=si(tt.site,Vt.site),bn(tt),bn(it);return}if(!it){Vt.edge=si(tt.site,Vt.site);return}kn(tt),kn(it);var Wt=tt.site,tr=Wt.x,Cr=Wt.y,Lr=ve.x-tr,Qr=ve.y-Cr,on=it.site,Pr=on.x-tr,Ur=on.y-Cr,jr=2*(Lr*Ur-Qr*Pr),cn=Lr*Lr+Qr*Qr,dn=Pr*Pr+Ur*Ur,tn={x:(Ur*cn-Qr*dn)/jr+tr,y:(Lr*dn-Pr*cn)/jr+Cr};Li(it.edge,Wt,on,tn),Vt.edge=si(Wt,ve,null,tn),it.edge=si(ve,on,null,tn),bn(tt),bn(it)}}function pn(ve,Se){var Ve=ve.site,tt=Ve.x,it=Ve.y,ct=it-Se;if(!ct)return tt;var Lt=ve.P;if(!Lt)return-1/0;Ve=Lt.site;var At=Ve.x,Vt=Ve.y,Wt=Vt-Se;if(!Wt)return At;var tr=At-tt,Cr=1/ct-1/Wt,Lr=tr/Wt;return Cr?(-Lr+Math.sqrt(Lr*Lr-2*Cr*(tr*tr/(-2*Wt)-Vt+Wt/2+it-ct/2)))/Cr+tt:(tt+At)/2}function ln(ve,Se){var Ve=ve.N;if(Ve)return pn(Ve,Se);var tt=ve.site;return tt.y===Se?tt.x:1/0}function Sr(ve){this.site=ve,this.edges=[]}Sr.prototype.prepare=function(){for(var ve=this.edges,Se=ve.length,Ve;Se--;)Ve=ve[Se].edge,(!Ve.b||!Ve.a)&&ve.splice(Se,1);return ve.sort(Hr),ve.length};function Zr(ve){for(var Se=ve[0][0],Ve=ve[1][0],tt=ve[0][1],it=ve[1][1],ct,Lt,At,Vt,Wt=Tn,tr=Wt.length,Cr,Lr,Qr,on,Pr,Ur;tr--;)if(Cr=Wt[tr],!(!Cr||!Cr.prepare()))for(Qr=Cr.edges,on=Qr.length,Lr=0;Lr<on;)Ur=Qr[Lr].end(),At=Ur.x,Vt=Ur.y,Pr=Qr[++Lr%on].start(),ct=Pr.x,Lt=Pr.y,(p(At-ct)>je||p(Vt-Lt)>je)&&(Qr.splice(Lr,0,new ma(gi(Cr.site,Ur,p(At-Se)<je&&it-Vt>je?{x:Se,y:p(ct-Se)<je?Lt:it}:p(Vt-it)<je&&Ve-At>je?{x:p(Lt-it)<je?ct:Ve,y:it}:p(At-Ve)<je&&Vt-tt>je?{x:Ve,y:p(ct-Ve)<je?Lt:tt}:p(Vt-tt)<je&&At-Se>je?{x:p(Lt-tt)<je?ct:Se,y:tt}:null),Cr.site,null)),++on)}function Hr(ve,Se){return Se.angle-ve.angle}function $r(){Wo(this),this.x=this.y=this.arc=this.site=this.cy=null}function bn(ve){var Se=ve.P,Ve=ve.N;if(!(!Se||!Ve)){var tt=Se.site,it=ve.site,ct=Ve.site;if(tt!==ct){var Lt=it.x,At=it.y,Vt=tt.x-Lt,Wt=tt.y-At,tr=ct.x-Lt,Ur=ct.y-At,Cr=2*(Vt*Ur-Wt*tr);if(!(Cr>=-Re)){var Lr=Vt*Vt+Wt*Wt,Qr=tr*tr+Ur*Ur,on=(Ur*Lr-Wt*Qr)/Cr,Pr=(Vt*Qr-tr*Lr)/Cr,Ur=Pr+At,jr=Er.pop()||new $r;jr.arc=ve,jr.site=it,jr.x=on+Lt,jr.y=Ur+Math.sqrt(on*on+Pr*Pr),jr.cy=Ur,ve.circle=jr;for(var cn=null,dn=Ri._;dn;)if(jr.y<dn.y||jr.y===dn.y&&jr.x<=dn.x)if(dn.L)dn=dn.L;else{cn=dn.P;break}else if(dn.R)dn=dn.R;else{cn=dn;break}Ri.insert(cn,jr),cn||(hi=jr)}}}}function kn(ve){var Se=ve.circle;Se&&(Se.P||(hi=Se.N),Ri.remove(Se),Er.push(Se),Wo(Se),ve.circle=null)}function En(ve,Se,Ve,tt){return function(it){var ct=it.a,Lt=it.b,At=ct.x,Vt=ct.y,Wt=Lt.x,tr=Lt.y,Cr=0,Lr=1,Qr=Wt-At,on=tr-Vt,Pr;if(Pr=ve-At,!(!Qr&&Pr>0)){if(Pr/=Qr,Qr<0){if(Pr<Cr)return;Pr<Lr&&(Lr=Pr)}else if(Qr>0){if(Pr>Lr)return;Pr>Cr&&(Cr=Pr)}if(Pr=Ve-At,!(!Qr&&Pr<0)){if(Pr/=Qr,Qr<0){if(Pr>Lr)return;Pr>Cr&&(Cr=Pr)}else if(Qr>0){if(Pr<Cr)return;Pr<Lr&&(Lr=Pr)}if(Pr=Se-Vt,!(!on&&Pr>0)){if(Pr/=on,on<0){if(Pr<Cr)return;Pr<Lr&&(Lr=Pr)}else if(on>0){if(Pr>Lr)return;Pr>Cr&&(Cr=Pr)}if(Pr=tt-Vt,!(!on&&Pr<0)){if(Pr/=on,on<0){if(Pr>Lr)return;Pr>Cr&&(Cr=Pr)}else if(on>0){if(Pr<Cr)return;Pr<Lr&&(Lr=Pr)}return Cr>0&&(it.a={x:At+Cr*Qr,y:Vt+Cr*on}),Lr<1&&(it.b={x:At+Lr*Qr,y:Vt+Lr*on}),it}}}}}}function Nn(ve){for(var Se=xn,Ve=En(ve[0][0],ve[0][1],ve[1][0],ve[1][1]),tt=Se.length,it;tt--;)it=Se[tt],(!Fn(it,ve)||!Ve(it)||p(it.a.x-it.b.x)<je&&p(it.a.y-it.b.y)<je)&&(it.a=it.b=null,Se.splice(tt,1))}function Fn(ve,Se){var Ve=ve.b;if(Ve)return!0;var tt=ve.a,it=Se[0][0],ct=Se[1][0],Lt=Se[0][1],At=Se[1][1],Vt=ve.l,Wt=ve.r,tr=Vt.x,Cr=Vt.y,Lr=Wt.x,Qr=Wt.y,on=(tr+Lr)/2,Pr=(Cr+Qr)/2,Ur,jr;if(Qr===Cr){if(on<it||on>=ct)return;if(tr>Lr){if(!tt)tt={x:on,y:Lt};else if(tt.y>=At)return;Ve={x:on,y:At}}else{if(!tt)tt={x:on,y:At};else if(tt.y<Lt)return;Ve={x:on,y:Lt}}}else if(Ur=(tr-Lr)/(Qr-Cr),jr=Pr-Ur*on,Ur<-1||Ur>1)if(tr>Lr){if(!tt)tt={x:(Lt-jr)/Ur,y:Lt};else if(tt.y>=At)return;Ve={x:(At-jr)/Ur,y:At}}else{if(!tt)tt={x:(At-jr)/Ur,y:At};else if(tt.y<Lt)return;Ve={x:(Lt-jr)/Ur,y:Lt}}else if(Cr<Qr){if(!tt)tt={x:it,y:Ur*it+jr};else if(tt.x>=ct)return;Ve={x:ct,y:Ur*ct+jr}}else{if(!tt)tt={x:ct,y:Ur*ct+jr};else if(tt.x<it)return;Ve={x:it,y:Ur*it+jr}}return ve.a=tt,ve.b=Ve,!0}function vi(ve,Se){this.l=ve,this.r=Se,this.a=this.b=null}function si(ve,Se,Ve,tt){var it=new vi(ve,Se);return xn.push(it),Ve&&Li(it,ve,Se,Ve),tt&&Li(it,Se,ve,tt),Tn[ve.i].edges.push(new ma(it,ve,Se)),Tn[Se.i].edges.push(new ma(it,Se,ve)),it}function gi(ve,Se,Ve){var tt=new vi(ve,null);return tt.a=Se,tt.b=Ve,xn.push(tt),tt}function Li(ve,Se,Ve,tt){!ve.a&&!ve.b?(ve.a=tt,ve.l=Se,ve.r=Ve):ve.l===Ve?ve.b=tt:ve.a=tt}function ma(ve,Se,Ve){var tt=ve.a,it=ve.b;this.edge=ve,this.site=Se,this.angle=Ve?Math.atan2(Ve.y-Se.y,Ve.x-Se.x):ve.l===Se?Math.atan2(it.x-tt.x,tt.y-it.y):Math.atan2(tt.x-it.x,it.y-tt.y)}ma.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ia(){this._=null}function Wo(ve){ve.U=ve.C=ve.L=ve.R=ve.P=ve.N=null}ia.prototype={insert:function(ve,Se){var Ve,tt,it;if(ve){if(Se.P=ve,Se.N=ve.N,ve.N&&(ve.N.P=Se),ve.N=Se,ve.R){for(ve=ve.R;ve.L;)ve=ve.L;ve.L=Se}else ve.R=Se;Ve=ve}else this._?(ve=zl(this._),Se.P=null,Se.N=ve,ve.P=ve.L=Se,Ve=ve):(Se.P=Se.N=null,this._=Se,Ve=null);for(Se.L=Se.R=null,Se.U=Ve,Se.C=!0,ve=Se;Ve&&Ve.C;)tt=Ve.U,Ve===tt.L?(it=tt.R,it&&it.C?(Ve.C=it.C=!1,tt.C=!0,ve=tt):(ve===Ve.R&&(Fo(this,Ve),ve=Ve,Ve=ve.U),Ve.C=!1,tt.C=!0,ho(this,tt))):(it=tt.L,it&&it.C?(Ve.C=it.C=!1,tt.C=!0,ve=tt):(ve===Ve.L&&(ho(this,Ve),ve=Ve,Ve=ve.U),Ve.C=!1,tt.C=!0,Fo(this,tt))),Ve=ve.U;this._.C=!1},remove:function(ve){ve.N&&(ve.N.P=ve.P),ve.P&&(ve.P.N=ve.N),ve.N=ve.P=null;var Se=ve.U,Ve,tt=ve.L,it=ve.R,ct,Lt;if(tt?it?ct=zl(it):ct=tt:ct=it,Se?Se.L===ve?Se.L=ct:Se.R=ct:this._=ct,tt&&it?(Lt=ct.C,ct.C=ve.C,ct.L=tt,tt.U=ct,ct!==it?(Se=ct.U,ct.U=ve.U,ve=ct.R,Se.L=ve,ct.R=it,it.U=ct):(ct.U=Se,Se=ct,ve=ct.R)):(Lt=ve.C,ve=ct),ve&&(ve.U=Se),!Lt){if(ve&&ve.C){ve.C=!1;return}do{if(ve===this._)break;if(ve===Se.L){if(Ve=Se.R,Ve.C&&(Ve.C=!1,Se.C=!0,Fo(this,Se),Ve=Se.R),Ve.L&&Ve.L.C||Ve.R&&Ve.R.C){(!Ve.R||!Ve.R.C)&&(Ve.L.C=!1,Ve.C=!0,ho(this,Ve),Ve=Se.R),Ve.C=Se.C,Se.C=Ve.R.C=!1,Fo(this,Se),ve=this._;break}}else if(Ve=Se.L,Ve.C&&(Ve.C=!1,Se.C=!0,ho(this,Se),Ve=Se.L),Ve.L&&Ve.L.C||Ve.R&&Ve.R.C){(!Ve.L||!Ve.L.C)&&(Ve.R.C=!1,Ve.C=!0,Fo(this,Ve),Ve=Se.L),Ve.C=Se.C,Se.C=Ve.L.C=!1,ho(this,Se),ve=this._;break}Ve.C=!0,ve=Se,Se=Se.U}while(!ve.C);ve&&(ve.C=!1)}}};function Fo(ve,Se){var Ve=Se,tt=Se.R,it=Ve.U;it?it.L===Ve?it.L=tt:it.R=tt:ve._=tt,tt.U=it,Ve.U=tt,Ve.R=tt.L,Ve.R&&(Ve.R.U=Ve),tt.L=Ve}function ho(ve,Se){var Ve=Se,tt=Se.L,it=Ve.U;it?it.L===Ve?it.L=tt:it.R=tt:ve._=tt,tt.U=it,Ve.U=tt,Ve.L=tt.R,Ve.L&&(Ve.L.U=Ve),tt.R=Ve}function zl(ve){for(;ve.L;)ve=ve.L;return ve}function Mf(ve,Se){var Ve=ve.sort(lc).pop(),tt,it,ct;for(xn=[],Tn=new Array(ve.length),On=new ia,Ri=new ia;;)if(ct=hi,Ve&&(!ct||Ve.y<ct.y||Ve.y===ct.y&&Ve.x<ct.x))(Ve.x!==tt||Ve.y!==it)&&(Tn[Ve.i]=new Sr(Ve),Pn(Ve),tt=Ve.x,it=Ve.y),Ve=ve.pop();else if(ct)yn(ct.arc);else break;Se&&(Nn(Se),Zr(Se));var Lt={cells:Tn,edges:xn};return On=Ri=xn=Tn=null,Lt}function lc(ve,Se){return Se.y-ve.y||Se.x-ve.x}n.geom.voronoi=function(ve){var Se=bi,Ve=Hn,tt=Se,it=Ve,ct=ta;if(ve)return Lt(ve);function Lt(Vt){var Wt=new Array(Vt.length),tr=ct[0][0],Cr=ct[0][1],Lr=ct[1][0],Qr=ct[1][1];return Mf(At(Vt),ct).cells.forEach(function(on,Pr){var Ur=on.edges,jr=on.site,cn=Wt[Pr]=Ur.length?Ur.map(function(dn){var tn=dn.start();return[tn.x,tn.y]}):jr.x>=tr&&jr.x<=Lr&&jr.y>=Cr&&jr.y<=Qr?[[tr,Qr],[Lr,Qr],[Lr,Cr],[tr,Cr]]:[];cn.point=Vt[Pr]}),Wt}function At(Vt){return Vt.map(function(Wt,tr){return{x:Math.round(tt(Wt,tr)/je)*je,y:Math.round(it(Wt,tr)/je)*je,i:tr}})}return Lt.links=function(Vt){return Mf(At(Vt)).edges.filter(function(Wt){return Wt.l&&Wt.r}).map(function(Wt){return{source:Vt[Wt.l.i],target:Vt[Wt.r.i]}})},Lt.triangles=function(Vt){var Wt=[];return Mf(At(Vt)).cells.forEach(function(tr,Cr){for(var Lr=tr.site,Qr=tr.edges.sort(Hr),on=-1,Pr=Qr.length,Ur,jr=Qr[Pr-1].edge,cn=jr.l===Lr?jr.r:jr.l;++on<Pr;)Ur=cn,jr=Qr[on].edge,cn=jr.l===Lr?jr.r:jr.l,Cr<Ur.i&&Cr<cn.i&&pu(Lr,Ur,cn)<0&&Wt.push([Vt[Cr],Vt[Ur.i],Vt[cn.i]])}),Wt},Lt.x=function(Vt){return arguments.length?(tt=en(Se=Vt),Lt):Se},Lt.y=function(Vt){return arguments.length?(it=en(Ve=Vt),Lt):Ve},Lt.clipExtent=function(Vt){return arguments.length?(ct=Vt??ta,Lt):ct===ta?null:ct},Lt.size=function(Vt){return arguments.length?Lt.clipExtent(Vt&&[[0,0],Vt]):ct===ta?null:ct&&ct[1]},Lt};var ta=[[-1e6,-1e6],[1e6,1e6]];function pu(ve,Se,Ve){return(ve.x-Ve.x)*(Se.y-ve.y)-(ve.x-Se.x)*(Ve.y-ve.y)}n.geom.delaunay=function(ve){return n.geom.voronoi().triangles(ve)},n.geom.quadtree=function(ve,Se,Ve,tt,it){var ct=bi,Lt=Hn,At;if(At=arguments.length)return ct=Ef,Lt=oo,At===3&&(it=Ve,tt=Se,Ve=Se=0),Vt(ve);function Vt(Wt){var tr,Cr=en(ct),Lr=en(Lt),Qr,on,Pr,Ur,jr,cn,dn,tn;if(Se!=null)jr=Se,cn=Ve,dn=tt,tn=it;else if(dn=tn=-(jr=cn=1/0),Qr=[],on=[],Ur=Wt.length,At)for(Pr=0;Pr<Ur;++Pr)tr=Wt[Pr],tr.x<jr&&(jr=tr.x),tr.y<cn&&(cn=tr.y),tr.x>dn&&(dn=tr.x),tr.y>tn&&(tn=tr.y),Qr.push(tr.x),on.push(tr.y);else for(Pr=0;Pr<Ur;++Pr){var Vn=+Cr(tr=Wt[Pr],Pr),ti=+Lr(tr,Pr);Vn<jr&&(jr=Vn),ti<cn&&(cn=ti),Vn>dn&&(dn=Vn),ti>tn&&(tn=ti),Qr.push(Vn),on.push(ti)}var fi=dn-jr,qn=tn-cn;fi>qn?tn=cn+fi:dn=jr+qn;function oi(Ei,Di,aa,Ka,ha,Qn,Ni,Ai){if(!(isNaN(aa)||isNaN(Ka)))if(Ei.leaf){var ji=Ei.x,Ma=Ei.y;if(ji!=null)if(p(ji-aa)+p(Ma-Ka)<.01)ci(Ei,Di,aa,Ka,ha,Qn,Ni,Ai);else{var oa=Ei.point;Ei.x=Ei.y=Ei.point=null,ci(Ei,oa,ji,Ma,ha,Qn,Ni,Ai),ci(Ei,Di,aa,Ka,ha,Qn,Ni,Ai)}else Ei.x=aa,Ei.y=Ka,Ei.point=Di}else ci(Ei,Di,aa,Ka,ha,Qn,Ni,Ai)}function ci(Ei,Di,aa,Ka,ha,Qn,Ni,Ai){var ji=(ha+Ni)*.5,Ma=(Qn+Ai)*.5,oa=aa>=ji,uo=Ka>=Ma,fo=uo<<1|oa;Ei.leaf=!1,Ei=Ei.nodes[fo]||(Ei.nodes[fo]=Po()),oa?ha=ji:Ni=ji,uo?Qn=Ma:Ai=Ma,oi(Ei,Di,aa,Ka,ha,Qn,Ni,Ai)}var Fi=Po();if(Fi.add=function(Ei){oi(Fi,Ei,+Cr(Ei,++Pr),+Lr(Ei,Pr),jr,cn,dn,tn)},Fi.visit=function(Ei){Ol(Ei,Fi,jr,cn,dn,tn)},Fi.find=function(Ei){return ju(Fi,Ei[0],Ei[1],jr,cn,dn,tn)},Pr=-1,Se==null){for(;++Pr<Ur;)oi(Fi,Wt[Pr],Qr[Pr],on[Pr],jr,cn,dn,tn);--Pr}else Wt.forEach(Fi.add);return Qr=on=Wt=tr=null,Fi}return Vt.x=function(Wt){return arguments.length?(ct=Wt,Vt):ct},Vt.y=function(Wt){return arguments.length?(Lt=Wt,Vt):Lt},Vt.extent=function(Wt){return arguments.length?(Wt==null?Se=Ve=tt=it=null:(Se=+Wt[0][0],Ve=+Wt[0][1],tt=+Wt[1][0],it=+Wt[1][1]),Vt):Se==null?null:[[Se,Ve],[tt,it]]},Vt.size=function(Wt){return arguments.length?(Wt==null?Se=Ve=tt=it=null:(Se=Ve=0,tt=+Wt[0],it=+Wt[1]),Vt):Se==null?null:[tt-Se,it-Ve]},Vt};function Ef(ve){return ve.x}function oo(ve){return ve.y}function Po(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ol(ve,Se,Ve,tt,it,ct){if(!ve(Se,Ve,tt,it,ct)){var Lt=(Ve+it)*.5,At=(tt+ct)*.5,Vt=Se.nodes;Vt[0]&&Ol(ve,Vt[0],Ve,tt,Lt,At),Vt[1]&&Ol(ve,Vt[1],Lt,tt,it,At),Vt[2]&&Ol(ve,Vt[2],Ve,At,Lt,ct),Vt[3]&&Ol(ve,Vt[3],Lt,At,it,ct)}}function ju(ve,Se,Ve,tt,it,ct,Lt){var At=1/0,Vt;return function Wt(tr,Cr,Lr,Qr,on){if(!(Cr>ct||Lr>Lt||Qr<tt||on<it)){if(Pr=tr.point){var Pr,Ur=Se-tr.x,jr=Ve-tr.y,cn=Ur*Ur+jr*jr;if(cn<At){var dn=Math.sqrt(At=cn);tt=Se-dn,it=Ve-dn,ct=Se+dn,Lt=Ve+dn,Vt=Pr}}for(var tn=tr.nodes,Vn=(Cr+Qr)*.5,ti=(Lr+on)*.5,fi=Se>=Vn,qn=Ve>=ti,oi=qn<<1|fi,ci=oi+4;oi<ci;++oi)if(tr=tn[oi&3])switch(oi&3){case 0:Wt(tr,Cr,Lr,Vn,ti);break;case 1:Wt(tr,Vn,Lr,Qr,ti);break;case 2:Wt(tr,Cr,ti,Vn,on);break;case 3:Wt(tr,Vn,ti,Qr,on);break}}}(ve,tt,it,ct,Lt),Vt}n.interpolateRgb=Ya;function Ya(ve,Se){ve=n.rgb(ve),Se=n.rgb(Se);var Ve=ve.r,tt=ve.g,it=ve.b,ct=Se.r-Ve,Lt=Se.g-tt,At=Se.b-it;return function(Vt){return"#"+hr(Math.round(Ve+ct*Vt))+hr(Math.round(tt+Lt*Vt))+hr(Math.round(it+At*Vt))}}n.interpolateObject=Fl;function Fl(ve,Se){var Ve={},tt={},it;for(it in ve)it in Se?Ve[it]=po(ve[it],Se[it]):tt[it]=ve[it];for(it in Se)it in ve||(tt[it]=Se[it]);return function(ct){for(it in Ve)tt[it]=Ve[it](ct);return tt}}n.interpolateNumber=ja;function ja(ve,Se){return ve=+ve,Se=+Se,function(Ve){return ve*(1-Ve)+Se*Ve}}n.interpolateString=qa;function qa(ve,Se){var Ve=Bl.lastIndex=vo.lastIndex=0,tt,it,ct,Lt=-1,At=[],Vt=[];for(ve=ve+"",Se=Se+"";(tt=Bl.exec(ve))&&(it=vo.exec(Se));)(ct=it.index)>Ve&&(ct=Se.slice(Ve,ct),At[Lt]?At[Lt]+=ct:At[++Lt]=ct),(tt=tt[0])===(it=it[0])?At[Lt]?At[Lt]+=it:At[++Lt]=it:(At[++Lt]=null,Vt.push({i:Lt,x:ja(tt,it)})),Ve=vo.lastIndex;return Ve<Se.length&&(ct=Se.slice(Ve),At[Lt]?At[Lt]+=ct:At[++Lt]=ct),At.length<2?Vt[0]?(Se=Vt[0].x,function(Wt){return Se(Wt)+""}):function(){return Se}:(Se=Vt.length,function(Wt){for(var tr=0,Cr;tr<Se;++tr)At[(Cr=Vt[tr]).i]=Cr.x(Wt);return At.join("")})}var Bl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vo=new RegExp(Bl.source,"g");n.interpolate=po;function po(ve,Se){for(var Ve=n.interpolators.length,tt;--Ve>=0&&!(tt=n.interpolators[Ve](ve,Se)););return tt}n.interpolators=[function(ve,Se){var Ve=typeof Se;return(Ve==="string"?nn.has(Se.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Se)?Ya:qa:Se instanceof mt?Ya:Array.isArray(Se)?Yo:Ve==="object"&&isNaN(Se)?Fl:ja)(ve,Se)}],n.interpolateArray=Yo;function Yo(ve,Se){var Ve=[],tt=[],it=ve.length,ct=Se.length,Lt=Math.min(ve.length,Se.length),At;for(At=0;At<Lt;++At)Ve.push(po(ve[At],Se[At]));for(;At<it;++At)tt[At]=ve[At];for(;At<ct;++At)tt[At]=Se[At];return function(Vt){for(At=0;At<Lt;++At)tt[At]=Ve[At](Vt);return tt}}var uc=function(){return N},Bo=n.map({linear:uc,poly:fc,quad:function(){return Js},cubic:function(){return Es},sin:function(){return gh},exp:function(){return Ku},circle:function(){return yh},elastic:mh,back:xh,bounce:function(){return Lf}}),ph=n.map({in:N,out:so,"in-out":Sf,"out-in":function(ve){return Sf(so(ve))}});n.ease=function(ve){var Se=ve.indexOf("-"),Ve=Se>=0?ve.slice(0,Se):ve,tt=Se>=0?ve.slice(Se+1):"in";return Ve=Bo.get(Ve)||uc,tt=ph.get(tt)||N,Ms(tt(Ve.apply(null,E.call(arguments,1))))};function Ms(ve){return function(Se){return Se<=0?0:Se>=1?1:ve(Se)}}function so(ve){return function(Se){return 1-ve(1-Se)}}function Sf(ve){return function(Se){return .5*(Se<.5?ve(2*Se):2-ve(2-2*Se))}}function Js(ve){return ve*ve}function Es(ve){return ve*ve*ve}function Cf(ve){if(ve<=0)return 0;if(ve>=1)return 1;var Se=ve*ve,Ve=Se*ve;return 4*(ve<.5?Ve:3*(ve-Se)+Ve-.75)}function fc(ve){return function(Se){return Math.pow(Se,ve)}}function gh(ve){return 1-Math.cos(ve*et)}function Ku(ve){return Math.pow(2,10*(ve-1))}function yh(ve){return 1-Math.sqrt(1-ve*ve)}function mh(ve,Se){var Ve;return arguments.length<2&&(Se=.45),arguments.length?Ve=Se/be*Math.asin(1/ve):(ve=1,Ve=Se/4),function(tt){return 1+ve*Math.pow(2,-10*tt)*Math.sin((tt-Ve)*be/Se)}}function xh(ve){return ve||(ve=1.70158),function(Se){return Se*Se*((ve+1)*Se-ve)}}function Lf(ve){return ve<.36363636363636365?7.5625*ve*ve:ve<.7272727272727273?7.5625*(ve-=.5454545454545454)*ve+.75:ve<.9090909090909091?7.5625*(ve-=.8181818181818182)*ve+.9375:7.5625*(ve-=.9545454545454546)*ve+.984375}n.interpolateHcl=bh;function bh(ve,Se){ve=n.hcl(ve),Se=n.hcl(Se);var Ve=ve.h,tt=ve.c,it=ve.l,ct=Se.h-Ve,Lt=Se.c-tt,At=Se.l-it;return isNaN(Lt)&&(Lt=0,tt=isNaN(tt)?Se.c:tt),isNaN(ct)?(ct=0,Ve=isNaN(Ve)?Se.h:Ve):ct>180?ct-=360:ct<-180&&(ct+=360),function(Vt){return Bt(Ve+ct*Vt,tt+Lt*Vt,it+At*Vt)+""}}n.interpolateHsl=wh;function wh(ve,Se){ve=n.hsl(ve),Se=n.hsl(Se);var Ve=ve.h,tt=ve.s,it=ve.l,ct=Se.h-Ve,Lt=Se.s-tt,At=Se.l-it;return isNaN(Lt)&&(Lt=0,tt=isNaN(tt)?Se.s:tt),isNaN(ct)?(ct=0,Ve=isNaN(Ve)?Se.h:Ve):ct>180?ct-=360:ct<-180&&(ct+=360),function(Vt){return St(Ve+ct*Vt,tt+Lt*Vt,it+At*Vt)+""}}n.interpolateLab=cc;function cc(ve,Se){ve=n.lab(ve),Se=n.lab(Se);var Ve=ve.l,tt=ve.a,it=ve.b,ct=Se.l-Ve,Lt=Se.a-tt,At=Se.b-it;return function(Vt){return He(Ve+ct*Vt,tt+Lt*Vt,it+At*Vt)+""}}n.interpolateRound=hc;function hc(ve,Se){return Se-=ve,function(Ve){return Math.round(ve+Se*Ve)}}n.transform=function(ve){var Se=v.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(Ve){if(Ve!=null){Se.setAttribute("transform",Ve);var tt=Se.transform.baseVal.consolidate()}return new yl(tt?tt.matrix:vc)})(ve)};function yl(ve){var Se=[ve.a,ve.b],Ve=[ve.c,ve.d],tt=gu(Se),it=Nl(Se,Ve),ct=gu(yu(Ve,Se,-it))||0;Se[0]*Ve[1]<Ve[0]*Se[1]&&(Se[0]*=-1,Se[1]*=-1,tt*=-1,it*=-1),this.rotate=(tt?Math.atan2(Se[1],Se[0]):Math.atan2(-Ve[0],Ve[1]))*lt,this.translate=[ve.e,ve.f],this.scale=[tt,ct],this.skew=ct?Math.atan2(it,ct)*lt:0}yl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Nl(ve,Se){return ve[0]*Se[0]+ve[1]*Se[1]}function gu(ve){var Se=Math.sqrt(Nl(ve,ve));return Se&&(ve[0]/=Se,ve[1]/=Se),Se}function yu(ve,Se,Ve){return ve[0]+=Ve*Se[0],ve[1]+=Ve*Se[1],ve}var vc={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateTransform=Qu;function Bs(ve){return ve.length?ve.pop()+",":""}function Th(ve,Se,Ve,tt){if(ve[0]!==Se[0]||ve[1]!==Se[1]){var it=Ve.push("translate(",null,",",null,")");tt.push({i:it-4,x:ja(ve[0],Se[0])},{i:it-2,x:ja(ve[1],Se[1])})}else(Se[0]||Se[1])&&Ve.push("translate("+Se+")")}function Ju(ve,Se,Ve,tt){ve!==Se?(ve-Se>180?Se+=360:Se-ve>180&&(ve+=360),tt.push({i:Ve.push(Bs(Ve)+"rotate(",null,")")-2,x:ja(ve,Se)})):Se&&Ve.push(Bs(Ve)+"rotate("+Se+")")}function dc(ve,Se,Ve,tt){ve!==Se?tt.push({i:Ve.push(Bs(Ve)+"skewX(",null,")")-2,x:ja(ve,Se)}):Se&&Ve.push(Bs(Ve)+"skewX("+Se+")")}function pc(ve,Se,Ve,tt){if(ve[0]!==Se[0]||ve[1]!==Se[1]){var it=Ve.push(Bs(Ve)+"scale(",null,",",null,")");tt.push({i:it-4,x:ja(ve[0],Se[0])},{i:it-2,x:ja(ve[1],Se[1])})}else(Se[0]!==1||Se[1]!==1)&&Ve.push(Bs(Ve)+"scale("+Se+")")}function Qu(ve,Se){var Ve=[],tt=[];return ve=n.transform(ve),Se=n.transform(Se),Th(ve.translate,Se.translate,Ve,tt),Ju(ve.rotate,Se.rotate,Ve,tt),dc(ve.skew,Se.skew,Ve,tt),pc(ve.scale,Se.scale,Ve,tt),ve=Se=null,function(it){for(var ct=-1,Lt=tt.length,At;++ct<Lt;)Ve[(At=tt[ct]).i]=At.x(it);return Ve.join("")}}function os(ve,Se){return Se=(Se-=ve=+ve)||1/Se,function(Ve){return(Ve-ve)/Se}}function Ul(ve,Se){return Se=(Se-=ve=+ve)||1/Se,function(Ve){return Math.max(0,Math.min(1,(Ve-ve)/Se))}}n.layout={},n.layout.bundle=function(){return function(ve){for(var Se=[],Ve=-1,tt=ve.length;++Ve<tt;)Se.push(ml(ve[Ve]));return Se}};function ml(ve){for(var Se=ve.source,Ve=ve.target,tt=Qs(Se,Ve),it=[Se];Se!==tt;)Se=Se.parent,it.push(Se);for(var ct=it.length;Ve!==tt;)it.splice(ct,0,Ve),Ve=Ve.parent;return it}function mu(ve){for(var Se=[],Ve=ve.parent;Ve!=null;)Se.push(ve),ve=Ve,Ve=Ve.parent;return Se.push(ve),Se}function Qs(ve,Se){if(ve===Se)return ve;for(var Ve=mu(ve),tt=mu(Se),it=Ve.pop(),ct=tt.pop(),Lt=null;it===ct;)Lt=it,it=Ve.pop(),ct=tt.pop();return Lt}n.layout.chord=function(){var ve={},Se,Ve,tt,it,ct=0,Lt,At,Vt;function Wt(){var Cr={},Lr=[],Qr=n.range(it),on=[],Pr,Ur,jr,cn,dn;for(Se=[],Ve=[],Pr=0,cn=-1;++cn<it;){for(Ur=0,dn=-1;++dn<it;)Ur+=tt[cn][dn];Lr.push(Ur),on.push(n.range(it)),Pr+=Ur}for(Lt&&Qr.sort(function(Fi,Ei){return Lt(Lr[Fi],Lr[Ei])}),At&&on.forEach(function(Fi,Ei){Fi.sort(function(Di,aa){return At(tt[Ei][Di],tt[Ei][aa])})}),Pr=(be-ct*it)/Pr,Ur=0,cn=-1;++cn<it;){for(jr=Ur,dn=-1;++dn<it;){var tn=Qr[cn],Vn=on[tn][dn],ti=tt[tn][Vn],fi=Ur,qn=Ur+=ti*Pr;Cr[tn+"-"+Vn]={index:tn,subindex:Vn,startAngle:fi,endAngle:qn,value:ti}}Ve[tn]={index:tn,startAngle:jr,endAngle:Ur,value:Lr[tn]},Ur+=ct}for(cn=-1;++cn<it;)for(dn=cn-1;++dn<it;){var oi=Cr[cn+"-"+dn],ci=Cr[dn+"-"+cn];(oi.value||ci.value)&&Se.push(oi.value<ci.value?{source:ci,target:oi}:{source:oi,target:ci})}Vt&&tr()}function tr(){Se.sort(function(Cr,Lr){return Vt((Cr.source.value+Cr.target.value)/2,(Lr.source.value+Lr.target.value)/2)})}return ve.matrix=function(Cr){return arguments.length?(it=(tt=Cr)&&tt.length,Se=Ve=null,ve):tt},ve.padding=function(Cr){return arguments.length?(ct=Cr,Se=Ve=null,ve):ct},ve.sortGroups=function(Cr){return arguments.length?(Lt=Cr,Se=Ve=null,ve):Lt},ve.sortSubgroups=function(Cr){return arguments.length?(At=Cr,Se=null,ve):At},ve.sortChords=function(Cr){return arguments.length?(Vt=Cr,Se&&tr(),ve):Vt},ve.chords=function(){return Se||Wt(),Se},ve.groups=function(){return Ve||Wt(),Ve},ve},n.layout.force=function(){var ve={},Se=n.dispatch("start","tick","end"),Ve,tt=[1,1],it,ct,Lt=.9,At=Pf,Vt=Ah,Wt=-30,tr=$u,Cr=.1,Lr=.64,Qr=[],on=[],Pr,Ur,jr;function cn(tn){return function(Vn,ti,fi,qn){if(Vn.point!==tn){var oi=Vn.cx-tn.x,ci=Vn.cy-tn.y,Fi=qn-ti,Ei=oi*oi+ci*ci;if(Fi*Fi/Lr<Ei){if(Ei<tr){var Di=Vn.charge/Ei;tn.px-=oi*Di,tn.py-=ci*Di}return!0}if(Vn.point&&Ei&&Ei<tr){var Di=Vn.pointCharge/Ei;tn.px-=oi*Di,tn.py-=ci*Di}}return!Vn.charge}}ve.tick=function(){if((ct*=.99)<.005)return Ve=null,Se.end({type:"end",alpha:ct=0}),!0;var tn=Qr.length,Vn=on.length,ti,fi,qn,oi,ci,Fi,Ei,Di,aa;for(fi=0;fi<Vn;++fi)qn=on[fi],oi=qn.source,ci=qn.target,Di=ci.x-oi.x,aa=ci.y-oi.y,(Fi=Di*Di+aa*aa)&&(Fi=ct*Ur[fi]*((Fi=Math.sqrt(Fi))-Pr[fi])/Fi,Di*=Fi,aa*=Fi,ci.x-=Di*(Ei=oi.weight+ci.weight?oi.weight/(oi.weight+ci.weight):.5),ci.y-=aa*Ei,oi.x+=Di*(Ei=1-Ei),oi.y+=aa*Ei);if((Ei=ct*Cr)&&(Di=tt[0]/2,aa=tt[1]/2,fi=-1,Ei))for(;++fi<tn;)qn=Qr[fi],qn.x+=(Di-qn.x)*Ei,qn.y+=(aa-qn.y)*Ei;if(Wt)for(Ba(ti=n.geom.quadtree(Qr),ct,jr),fi=-1;++fi<tn;)(qn=Qr[fi]).fixed||ti.visit(cn(qn));for(fi=-1;++fi<tn;)qn=Qr[fi],qn.fixed?(qn.x=qn.px,qn.y=qn.py):(qn.x-=(qn.px-(qn.px=qn.x))*Lt,qn.y-=(qn.py-(qn.py=qn.y))*Lt);Se.tick({type:"tick",alpha:ct})},ve.nodes=function(tn){return arguments.length?(Qr=tn,ve):Qr},ve.links=function(tn){return arguments.length?(on=tn,ve):on},ve.size=function(tn){return arguments.length?(tt=tn,ve):tt},ve.linkDistance=function(tn){return arguments.length?(At=typeof tn=="function"?tn:+tn,ve):At},ve.distance=ve.linkDistance,ve.linkStrength=function(tn){return arguments.length?(Vt=typeof tn=="function"?tn:+tn,ve):Vt},ve.friction=function(tn){return arguments.length?(Lt=+tn,ve):Lt},ve.charge=function(tn){return arguments.length?(Wt=typeof tn=="function"?tn:+tn,ve):Wt},ve.chargeDistance=function(tn){return arguments.length?(tr=tn*tn,ve):Math.sqrt(tr)},ve.gravity=function(tn){return arguments.length?(Cr=+tn,ve):Cr},ve.theta=function(tn){return arguments.length?(Lr=tn*tn,ve):Math.sqrt(Lr)},ve.alpha=function(tn){return arguments.length?(tn=+tn,ct?tn>0?ct=tn:(Ve.c=null,Ve.t=NaN,Ve=null,Se.end({type:"end",alpha:ct=0})):tn>0&&(Se.start({type:"start",alpha:ct=tn}),Ve=Ln(ve.tick)),ve):ct},ve.start=function(){var tn,Vn=Qr.length,ti=on.length,fi=tt[0],qn=tt[1],oi,ci;for(tn=0;tn<Vn;++tn)(ci=Qr[tn]).index=tn,ci.weight=0;for(tn=0;tn<ti;++tn)ci=on[tn],typeof ci.source=="number"&&(ci.source=Qr[ci.source]),typeof ci.target=="number"&&(ci.target=Qr[ci.target]),++ci.source.weight,++ci.target.weight;for(tn=0;tn<Vn;++tn)ci=Qr[tn],isNaN(ci.x)&&(ci.x=Fi("x",fi)),isNaN(ci.y)&&(ci.y=Fi("y",qn)),isNaN(ci.px)&&(ci.px=ci.x),isNaN(ci.py)&&(ci.py=ci.y);if(Pr=[],typeof At=="function")for(tn=0;tn<ti;++tn)Pr[tn]=+At.call(this,on[tn],tn);else for(tn=0;tn<ti;++tn)Pr[tn]=At;if(Ur=[],typeof Vt=="function")for(tn=0;tn<ti;++tn)Ur[tn]=+Vt.call(this,on[tn],tn);else for(tn=0;tn<ti;++tn)Ur[tn]=Vt;if(jr=[],typeof Wt=="function")for(tn=0;tn<Vn;++tn)jr[tn]=+Wt.call(this,Qr[tn],tn);else for(tn=0;tn<Vn;++tn)jr[tn]=Wt;function Fi(Ei,Di){if(!oi){for(oi=new Array(Vn),ha=0;ha<Vn;++ha)oi[ha]=[];for(ha=0;ha<ti;++ha){var aa=on[ha];oi[aa.source.index].push(aa.target),oi[aa.target.index].push(aa.source)}}for(var Ka=oi[tn],ha=-1,Qn=Ka.length,Ni;++ha<Qn;)if(!isNaN(Ni=Ka[ha][Ei]))return Ni;return Math.random()*Di}return ve.resume()},ve.resume=function(){return ve.alpha(.1)},ve.stop=function(){return ve.alpha(0)},ve.drag=function(){if(it||(it=n.behavior.drag().origin(N).on("dragstart.force",Ss).on("drag.force",dn).on("dragend.force",_f)),!arguments.length)return it;this.on("mouseover.force",Vl).on("mouseout.force",ss).call(it)};function dn(tn){tn.px=n.event.x,tn.py=n.event.y,ve.resume()}return n.rebind(ve,Se,"on")};function Ss(ve){ve.fixed|=2}function _f(ve){ve.fixed&=-7}function Vl(ve){ve.fixed|=4,ve.px=ve.x,ve.py=ve.y}function ss(ve){ve.fixed&=-5}function Ba(ve,Se,Ve){var tt=0,it=0;if(ve.charge=0,!ve.leaf)for(var ct=ve.nodes,Lt=ct.length,At=-1,Vt;++At<Lt;)Vt=ct[At],Vt!=null&&(Ba(Vt,Se,Ve),ve.charge+=Vt.charge,tt+=Vt.charge*Vt.cx,it+=Vt.charge*Vt.cy);if(ve.point){ve.leaf||(ve.point.x+=Math.random()-.5,ve.point.y+=Math.random()-.5);var Wt=Se*Ve[ve.point.index];ve.charge+=ve.pointCharge=Wt,tt+=Wt*ve.point.x,it+=Wt*ve.point.y}ve.cx=tt/ve.charge,ve.cy=it/ve.charge}var Pf=20,Ah=1,$u=1/0;n.layout.hierarchy=function(){var ve=ef,Se=qu,Ve=Wl;function tt(it){var ct=[it],Lt=[],At;for(it.depth=0;(At=ct.pop())!=null;)if(Lt.push(At),(Wt=Se.call(tt,At,At.depth))&&(Vt=Wt.length)){for(var Vt,Wt,tr;--Vt>=0;)ct.push(tr=Wt[Vt]),tr.parent=At,tr.depth=At.depth+1;Ve&&(At.value=0),At.children=Wt}else Ve&&(At.value=+Ve.call(tt,At,At.depth)||0),delete At.children;return No(it,function(Cr){var Lr,Qr;ve&&(Lr=Cr.children)&&Lr.sort(ve),Ve&&(Qr=Cr.parent)&&(Qr.value+=Cr.value)}),Lt}return tt.sort=function(it){return arguments.length?(ve=it,tt):ve},tt.children=function(it){return arguments.length?(Se=it,tt):Se},tt.value=function(it){return arguments.length?(Ve=it,tt):Ve},tt.revalue=function(it){return Ve&&(Gl(it,function(ct){ct.children&&(ct.value=0)}),No(it,function(ct){var Lt;ct.children||(ct.value=+Ve.call(tt,ct,ct.depth)||0),(Lt=ct.parent)&&(Lt.value+=ct.value)})),it},tt};function Hl(ve,Se){return n.rebind(ve,Se,"sort","children","value"),ve.nodes=ve,ve.links=Mh,ve}function Gl(ve,Se){for(var Ve=[ve];(ve=Ve.pop())!=null;)if(Se(ve),(it=ve.children)&&(tt=it.length))for(var tt,it;--tt>=0;)Ve.push(it[tt])}function No(ve,Se){for(var Ve=[ve],tt=[];(ve=Ve.pop())!=null;)if(tt.push(ve),(Lt=ve.children)&&(ct=Lt.length))for(var it=-1,ct,Lt;++it<ct;)Ve.push(Lt[it]);for(;(ve=tt.pop())!=null;)Se(ve)}function qu(ve){return ve.children}function Wl(ve){return ve.value}function ef(ve,Se){return Se.value-ve.value}function Mh(ve){return n.merge(ve.map(function(Se){return(Se.children||[]).map(function(Ve){return{source:Se,target:Ve}})}))}n.layout.partition=function(){var ve=n.layout.hierarchy(),Se=[1,1];function Ve(ct,Lt,At,Vt){var Wt=ct.children;if(ct.x=Lt,ct.y=ct.depth*Vt,ct.dx=At,ct.dy=Vt,Wt&&(Cr=Wt.length)){var tr=-1,Cr,Lr,Qr;for(At=ct.value?At/ct.value:0;++tr<Cr;)Ve(Lr=Wt[tr],Lt,Qr=Lr.value*At,Vt),Lt+=Qr}}function tt(ct){var Lt=ct.children,At=0;if(Lt&&(Wt=Lt.length))for(var Vt=-1,Wt;++Vt<Wt;)At=Math.max(At,tt(Lt[Vt]));return 1+At}function it(ct,Lt){var At=ve.call(this,ct,Lt);return Ve(At[0],0,Se[0],Se[1]/tt(At[0])),At}return it.size=function(ct){return arguments.length?(Se=ct,it):Se},Hl(it,ve)},n.layout.pie=function(){var ve=Number,Se=gc,Ve=0,tt=be,it=0;function ct(Lt){var At=Lt.length,Vt=Lt.map(function(cn,dn){return+ve.call(ct,cn,dn)}),Wt=+(typeof Ve=="function"?Ve.apply(this,arguments):Ve),tr=(typeof tt=="function"?tt.apply(this,arguments):tt)-Wt,Cr=Math.min(Math.abs(tr)/At,+(typeof it=="function"?it.apply(this,arguments):it)),Lr=Cr*(tr<0?-1:1),Qr=n.sum(Vt),on=Qr?(tr-At*Lr)/Qr:0,Pr=n.range(At),Ur=[],jr;return Se!=null&&Pr.sort(Se===gc?function(cn,dn){return Vt[dn]-Vt[cn]}:function(cn,dn){return Se(Lt[cn],Lt[dn])}),Pr.forEach(function(cn){Ur[cn]={data:Lt[cn],value:jr=Vt[cn],startAngle:Wt,endAngle:Wt+=jr*on+Lr,padAngle:Cr}}),Ur}return ct.value=function(Lt){return arguments.length?(ve=Lt,ct):ve},ct.sort=function(Lt){return arguments.length?(Se=Lt,ct):Se},ct.startAngle=function(Lt){return arguments.length?(Ve=Lt,ct):Ve},ct.endAngle=function(Lt){return arguments.length?(tt=Lt,ct):tt},ct.padAngle=function(Lt){return arguments.length?(it=Lt,ct):it},ct};var gc={};n.layout.stack=function(){var ve=N,Se=xu,Ve=rf,tt=Df,it=Rf,ct=If;function Lt(At,Vt){if(!(on=At.length))return At;var Wt=At.map(function(cn,dn){return ve.call(Lt,cn,dn)}),tr=Wt.map(function(cn){return cn.map(function(dn,tn){return[it.call(Lt,dn,tn),ct.call(Lt,dn,tn)]})}),Cr=Se.call(Lt,tr,Vt);Wt=n.permute(Wt,Cr),tr=n.permute(tr,Cr);var Lr=Ve.call(Lt,tr,Vt),Qr=Wt[0].length,on,Pr,Ur,jr;for(Ur=0;Ur<Qr;++Ur)for(tt.call(Lt,Wt[0][Ur],jr=Lr[Ur],tr[0][Ur][1]),Pr=1;Pr<on;++Pr)tt.call(Lt,Wt[Pr][Ur],jr+=tr[Pr-1][Ur][1],tr[Pr][Ur][1]);return At}return Lt.values=function(At){return arguments.length?(ve=At,Lt):ve},Lt.order=function(At){return arguments.length?(Se=typeof At=="function"?At:Yl.get(At)||xu,Lt):Se},Lt.offset=function(At){return arguments.length?(Ve=typeof At=="function"?At:tf.get(At)||rf,Lt):Ve},Lt.x=function(At){return arguments.length?(it=At,Lt):it},Lt.y=function(At){return arguments.length?(ct=At,Lt):ct},Lt.out=function(At){return arguments.length?(tt=At,Lt):tt},Lt};function Rf(ve){return ve.x}function If(ve){return ve.y}function Df(ve,Se,Ve){ve.y0=Se,ve.y=Ve}var Yl=n.map({"inside-out":function(ve){var Se=ve.length,Ve,tt,it=ve.map(xa),ct=ve.map(yc),Lt=n.range(Se).sort(function(Cr,Lr){return it[Cr]-it[Lr]}),At=0,Vt=0,Wt=[],tr=[];for(Ve=0;Ve<Se;++Ve)tt=Lt[Ve],At<Vt?(At+=ct[tt],Wt.push(tt)):(Vt+=ct[tt],tr.push(tt));return tr.reverse().concat(Wt)},reverse:function(ve){return n.range(ve.length).reverse()},default:xu}),tf=n.map({silhouette:function(ve){var Se=ve.length,Ve=ve[0].length,tt=[],it=0,ct,Lt,At,Vt=[];for(Lt=0;Lt<Ve;++Lt){for(ct=0,At=0;ct<Se;ct++)At+=ve[ct][Lt][1];At>it&&(it=At),tt.push(At)}for(Lt=0;Lt<Ve;++Lt)Vt[Lt]=(it-tt[Lt])/2;return Vt},wiggle:function(ve){var Se=ve.length,Ve=ve[0],tt=Ve.length,it,ct,Lt,At,Vt,Wt,tr,Cr,Lr,Qr=[];for(Qr[0]=Cr=Lr=0,ct=1;ct<tt;++ct){for(it=0,At=0;it<Se;++it)At+=ve[it][ct][1];for(it=0,Vt=0,tr=Ve[ct][0]-Ve[ct-1][0];it<Se;++it){for(Lt=0,Wt=(ve[it][ct][1]-ve[it][ct-1][1])/(2*tr);Lt<it;++Lt)Wt+=(ve[Lt][ct][1]-ve[Lt][ct-1][1])/tr;Vt+=Wt*ve[it][ct][1]}Qr[ct]=Cr-=At?Vt/At*tr:0,Cr<Lr&&(Lr=Cr)}for(ct=0;ct<tt;++ct)Qr[ct]-=Lr;return Qr},expand:function(ve){var Se=ve.length,Ve=ve[0].length,tt=1/Se,it,ct,Lt,At=[];for(ct=0;ct<Ve;++ct){for(it=0,Lt=0;it<Se;it++)Lt+=ve[it][ct][1];if(Lt)for(it=0;it<Se;it++)ve[it][ct][1]/=Lt;else for(it=0;it<Se;it++)ve[it][ct][1]=tt}for(ct=0;ct<Ve;++ct)At[ct]=0;return At},zero:rf});function xu(ve){return n.range(ve.length)}function rf(ve){for(var Se=-1,Ve=ve[0].length,tt=[];++Se<Ve;)tt[Se]=0;return tt}function xa(ve){for(var Se=1,Ve=0,tt=ve[0][1],it,ct=ve.length;Se<ct;++Se)(it=ve[Se][1])>tt&&(Ve=Se,tt=it);return Ve}function yc(ve){return ve.reduce(ls,0)}function ls(ve,Se){return ve+Se[1]}n.layout.histogram=function(){var ve=!0,Se=Number,Ve=xl,tt=mc;function it(ct,Lr){for(var At=[],Vt=ct.map(Se,this),Wt=Ve.call(this,Vt,Lr),tr=tt.call(this,Wt,Vt,Lr),Cr,Lr=-1,Qr=Vt.length,on=tr.length-1,Pr=ve?1:1/Qr,Ur;++Lr<on;)Cr=At[Lr]=[],Cr.dx=tr[Lr+1]-(Cr.x=tr[Lr]),Cr.y=0;if(on>0)for(Lr=-1;++Lr<Qr;)Ur=Vt[Lr],Ur>=Wt[0]&&Ur<=Wt[1]&&(Cr=At[n.bisect(tr,Ur,1,on)-1],Cr.y+=Pr,Cr.push(ct[Lr]));return At}return it.value=function(ct){return arguments.length?(Se=ct,it):Se},it.range=function(ct){return arguments.length?(Ve=en(ct),it):Ve},it.bins=function(ct){return arguments.length?(tt=typeof ct=="number"?function(Lt){return kf(Lt,ct)}:en(ct),it):tt},it.frequency=function(ct){return arguments.length?(ve=!!ct,it):ve},it};function mc(ve,Se){return kf(ve,Math.ceil(Math.log(Se.length)/Math.LN2+1))}function kf(ve,Se){for(var Ve=-1,tt=+ve[0],it=(ve[1]-tt)/Se,ct=[];++Ve<=Se;)ct[Ve]=it*Ve+tt;return ct}function xl(ve){return[n.min(ve),n.max(ve)]}n.layout.pack=function(){var ve=n.layout.hierarchy().sort($s),Se=0,Ve=[1,1],tt;function it(ct,Lt){var At=ve.call(this,ct,Lt),Vt=At[0],Wt=Ve[0],tr=Ve[1],Cr=tt==null?Math.sqrt:typeof tt=="function"?tt:function(){return tt};if(Vt.x=Vt.y=0,No(Vt,function(Qr){Qr.r=+Cr(Qr.value)}),No(Vt,us),Se){var Lr=Se*(tt?1:Math.max(2*Vt.r/Wt,2*Vt.r/tr))/2;No(Vt,function(Qr){Qr.r+=Lr}),No(Vt,us),No(Vt,function(Qr){Qr.r-=Lr})}return qs(Vt,Wt/2,tr/2,tt?1:1/Math.max(2*Vt.r/Wt,2*Vt.r/tr)),At}return it.size=function(ct){return arguments.length?(Ve=ct,it):Ve},it.radius=function(ct){return arguments.length?(tt=ct==null||typeof ct=="function"?ct:+ct,it):tt},it.padding=function(ct){return arguments.length?(Se=+ct,it):Se},Hl(it,ve)};function $s(ve,Se){return ve.value-Se.value}function nf(ve,Se){var Ve=ve._pack_next;ve._pack_next=Se,Se._pack_prev=ve,Se._pack_next=Ve,Ve._pack_prev=Se}function Xa(ve,Se){ve._pack_next=Se,Se._pack_prev=ve}function bu(ve,Se){var Ve=Se.x-ve.x,tt=Se.y-ve.y,it=ve.r+Se.r;return .999*it*it>Ve*Ve+tt*tt}function us(ve){if(!(Se=ve.children)||!(Lr=Se.length))return;var Se,Ve=1/0,tt=-1/0,it=1/0,ct=-1/0,Lt,At,Vt,Wt,tr,Cr,Lr;function Qr(tn){Ve=Math.min(tn.x-tn.r,Ve),tt=Math.max(tn.x+tn.r,tt),it=Math.min(tn.y-tn.r,it),ct=Math.max(tn.y+tn.r,ct)}if(Se.forEach(Ns),Lt=Se[0],Lt.x=-Lt.r,Lt.y=0,Qr(Lt),Lr>1&&(At=Se[1],At.x=At.r,At.y=0,Qr(At),Lr>2))for(Vt=Se[2],fs(Lt,At,Vt),Qr(Vt),nf(Lt,Vt),Lt._pack_prev=Vt,nf(Vt,At),At=Lt._pack_next,Wt=3;Wt<Lr;Wt++){fs(Lt,At,Vt=Se[Wt]);var on=0,Pr=1,Ur=1;for(tr=At._pack_next;tr!==At;tr=tr._pack_next,Pr++)if(bu(tr,Vt)){on=1;break}if(on==1)for(Cr=Lt._pack_prev;Cr!==tr._pack_prev&&!bu(Cr,Vt);Cr=Cr._pack_prev,Ur++);on?(Pr<Ur||Pr==Ur&&At.r<Lt.r?Xa(Lt,At=tr):Xa(Lt=Cr,At),Wt--):(nf(Lt,Vt),At=Vt,Qr(Vt))}var jr=(Ve+tt)/2,cn=(it+ct)/2,dn=0;for(Wt=0;Wt<Lr;Wt++)Vt=Se[Wt],Vt.x-=jr,Vt.y-=cn,dn=Math.max(dn,Vt.r+Math.sqrt(Vt.x*Vt.x+Vt.y*Vt.y));ve.r=dn,Se.forEach(bl)}function Ns(ve){ve._pack_next=ve._pack_prev=ve}function bl(ve){delete ve._pack_next,delete ve._pack_prev}function qs(ve,Se,Ve,tt){var it=ve.children;if(ve.x=Se+=tt*ve.x,ve.y=Ve+=tt*ve.y,ve.r*=tt,it)for(var ct=-1,Lt=it.length;++ct<Lt;)qs(it[ct],Se,Ve,tt)}function fs(ve,Se,Ve){var tt=ve.r+Ve.r,it=Se.x-ve.x,ct=Se.y-ve.y;if(tt&&(it||ct)){var Lt=Se.r+Ve.r,At=it*it+ct*ct;Lt*=Lt,tt*=tt;var Vt=.5+(tt-Lt)/(2*At),Wt=Math.sqrt(Math.max(0,2*Lt*(tt+At)-(tt-=At)*tt-Lt*Lt))/(2*At);Ve.x=ve.x+Vt*it+Wt*ct,Ve.y=ve.y+Vt*ct-Wt*it}else Ve.x=ve.x+tt,Ve.y=ve.y}n.layout.tree=function(){var ve=n.layout.hierarchy().sort(null).value(null),Se=Us,Ve=[1,1],tt=null;function it(tr,Cr){var Lr=ve.call(this,tr,Cr),Qr=Lr[0],on=ct(Qr);if(No(on,Lt),on.parent.m=-on.z,Gl(on,At),tt)Gl(Qr,Wt);else{var Pr=Qr,Ur=Qr,jr=Qr;Gl(Qr,function(Vn){Vn.x<Pr.x&&(Pr=Vn),Vn.x>Ur.x&&(Ur=Vn),Vn.depth>jr.depth&&(jr=Vn)});var cn=Se(Pr,Ur)/2-Pr.x,dn=Ve[0]/(Ur.x+Se(Ur,Pr)/2+cn),tn=Ve[1]/(jr.depth||1);Gl(Qr,function(Vn){Vn.x=(Vn.x+cn)*dn,Vn.y=Vn.depth*tn})}return Lr}function ct(tr){for(var Cr={A:null,children:[tr]},Lr=[Cr],Qr;(Qr=Lr.pop())!=null;)for(var on=Qr.children,Pr,Ur=0,jr=on.length;Ur<jr;++Ur)Lr.push((on[Ur]=Pr={_:on[Ur],parent:Qr,children:(Pr=on[Ur].children)&&Pr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ur}).a=Pr);return Cr.children[0]}function Lt(tr){var Cr=tr.children,Lr=tr.parent.children,Qr=tr.i?Lr[tr.i-1]:null;if(Cr.length){Eh(tr);var on=(Cr[0].z+Cr[Cr.length-1].z)/2;Qr?(tr.z=Qr.z+Se(tr._,Qr._),tr.m=tr.z-on):tr.z=on}else Qr&&(tr.z=Qr.z+Se(tr._,Qr._));tr.parent.A=Vt(tr,Qr,tr.parent.A||Lr[0])}function At(tr){tr._.x=tr.z+tr.parent.m,tr.m+=tr.parent.m}function Vt(tr,Cr,Lr){if(Cr){for(var Qr=tr,on=tr,Pr=Cr,Ur=Qr.parent.children[0],jr=Qr.m,cn=on.m,dn=Pr.m,tn=Ur.m,Vn;Pr=Jo(Pr),Qr=cs(Qr),Pr&&Qr;)Ur=cs(Ur),on=Jo(on),on.a=tr,Vn=Pr.z+dn-Qr.z-jr+Se(Pr._,Qr._),Vn>0&&(wu(Sh(Pr,tr,Lr),tr,Vn),jr+=Vn,cn+=Vn),dn+=Pr.m,jr+=Qr.m,tn+=Ur.m,cn+=on.m;Pr&&!Jo(on)&&(on.t=Pr,on.m+=dn-cn),Qr&&!cs(Ur)&&(Ur.t=Qr,Ur.m+=jr-tn,Lr=tr)}return Lr}function Wt(tr){tr.x*=Ve[0],tr.y=tr.depth*Ve[1]}return it.separation=function(tr){return arguments.length?(Se=tr,it):Se},it.size=function(tr){return arguments.length?(tt=(Ve=tr)==null?Wt:null,it):tt?null:Ve},it.nodeSize=function(tr){return arguments.length?(tt=(Ve=tr)==null?null:Wt,it):tt?Ve:null},Hl(it,ve)};function Us(ve,Se){return ve.parent==Se.parent?1:2}function cs(ve){var Se=ve.children;return Se.length?Se[0]:ve.t}function Jo(ve){var Se=ve.children,Ve;return(Ve=Se.length)?Se[Ve-1]:ve.t}function wu(ve,Se,Ve){var tt=Ve/(Se.i-ve.i);Se.c-=tt,Se.s+=Ve,ve.c+=tt,Se.z+=Ve,Se.m+=Ve}function Eh(ve){for(var Se=0,Ve=0,tt=ve.children,it=tt.length,ct;--it>=0;)ct=tt[it],ct.z+=Se,ct.m+=Se,Se+=ct.s+(Ve+=ct.c)}function Sh(ve,Se,Ve){return ve.a.parent===Se.parent?ve.a:Ve}n.layout.cluster=function(){var ve=n.layout.hierarchy().sort(null).value(null),Se=Us,Ve=[1,1],tt=!1;function it(ct,Lt){var At=ve.call(this,ct,Lt),Vt=At[0],Wt,tr=0;No(Vt,function(Pr){var Ur=Pr.children;Ur&&Ur.length?(Pr.x=Lh(Ur),Pr.y=Ch(Ur)):(Pr.x=Wt?tr+=Se(Pr,Wt):0,Pr.y=0,Wt=Pr)});var Cr=zf(Vt),Lr=xc(Vt),Qr=Cr.x-Se(Cr,Lr)/2,on=Lr.x+Se(Lr,Cr)/2;return No(Vt,tt?function(Pr){Pr.x=(Pr.x-Vt.x)*Ve[0],Pr.y=(Vt.y-Pr.y)*Ve[1]}:function(Pr){Pr.x=(Pr.x-Qr)/(on-Qr)*Ve[0],Pr.y=(1-(Vt.y?Pr.y/Vt.y:1))*Ve[1]}),At}return it.separation=function(ct){return arguments.length?(Se=ct,it):Se},it.size=function(ct){return arguments.length?(tt=(Ve=ct)==null,it):tt?null:Ve},it.nodeSize=function(ct){return arguments.length?(tt=(Ve=ct)!=null,it):tt?Ve:null},Hl(it,ve)};function Ch(ve){return 1+n.max(ve,function(Se){return Se.y})}function Lh(ve){return ve.reduce(function(Se,Ve){return Se+Ve.x},0)/ve.length}function zf(ve){var Se=ve.children;return Se&&Se.length?zf(Se[0]):ve}function xc(ve){var Se=ve.children,Ve;return Se&&(Ve=Se.length)?xc(Se[Ve-1]):ve}n.layout.treemap=function(){var ve=n.layout.hierarchy(),Se=Math.round,Ve=[1,1],tt=null,it=Xl,ct=!1,Lt,At="squarify",Vt=.5*(1+Math.sqrt(5));function Wt(Pr,Ur){for(var jr=-1,cn=Pr.length,dn,tn;++jr<cn;)tn=(dn=Pr[jr]).value*(Ur<0?0:Ur),dn.area=isNaN(tn)||tn<=0?0:tn}function tr(Pr){var Ur=Pr.children;if(Ur&&Ur.length){var jr=it(Pr),cn=[],dn=Ur.slice(),tn,Vn=1/0,ti,fi=At==="slice"?jr.dx:At==="dice"?jr.dy:At==="slice-dice"?Pr.depth&1?jr.dy:jr.dx:Math.min(jr.dx,jr.dy),qn;for(Wt(dn,jr.dx*jr.dy/Pr.value),cn.area=0;(qn=dn.length)>0;)cn.push(tn=dn[qn-1]),cn.area+=tn.area,At!=="squarify"||(ti=Lr(cn,fi))<=Vn?(dn.pop(),Vn=ti):(cn.area-=cn.pop().area,Qr(cn,fi,jr,!1),fi=Math.min(jr.dx,jr.dy),cn.length=cn.area=0,Vn=1/0);cn.length&&(Qr(cn,fi,jr,!0),cn.length=cn.area=0),Ur.forEach(tr)}}function Cr(Pr){var Ur=Pr.children;if(Ur&&Ur.length){var jr=it(Pr),cn=Ur.slice(),dn,tn=[];for(Wt(cn,jr.dx*jr.dy/Pr.value),tn.area=0;dn=cn.pop();)tn.push(dn),tn.area+=dn.area,dn.z!=null&&(Qr(tn,dn.z?jr.dx:jr.dy,jr,!cn.length),tn.length=tn.area=0);Ur.forEach(Cr)}}function Lr(Pr,Ur){for(var jr=Pr.area,cn,dn=0,tn=1/0,Vn=-1,ti=Pr.length;++Vn<ti;)(cn=Pr[Vn].area)&&(cn<tn&&(tn=cn),cn>dn&&(dn=cn));return jr*=jr,Ur*=Ur,jr?Math.max(Ur*dn*Vt/jr,jr/(Ur*tn*Vt)):1/0}function Qr(Pr,Ur,jr,cn){var dn=-1,tn=Pr.length,Vn=jr.x,ti=jr.y,fi=Ur?Se(Pr.area/Ur):0,qn;if(Ur==jr.dx){for((cn||fi>jr.dy)&&(fi=jr.dy);++dn<tn;)qn=Pr[dn],qn.x=Vn,qn.y=ti,qn.dy=fi,Vn+=qn.dx=Math.min(jr.x+jr.dx-Vn,fi?Se(qn.area/fi):0);qn.z=!0,qn.dx+=jr.x+jr.dx-Vn,jr.y+=fi,jr.dy-=fi}else{for((cn||fi>jr.dx)&&(fi=jr.dx);++dn<tn;)qn=Pr[dn],qn.x=Vn,qn.y=ti,qn.dx=fi,ti+=qn.dy=Math.min(jr.y+jr.dy-ti,fi?Se(qn.area/fi):0);qn.z=!1,qn.dy+=jr.y+jr.dy-ti,jr.x+=fi,jr.dx-=fi}}function on(Pr){var Ur=Lt||ve(Pr),jr=Ur[0];return jr.x=jr.y=0,jr.value?(jr.dx=Ve[0],jr.dy=Ve[1]):jr.dx=jr.dy=0,Lt&&ve.revalue(jr),Wt([jr],jr.dx*jr.dy/jr.value),(Lt?Cr:tr)(jr),ct&&(Lt=Ur),Ur}return on.size=function(Pr){return arguments.length?(Ve=Pr,on):Ve},on.padding=function(Pr){if(!arguments.length)return tt;function Ur(dn){var tn=Pr.call(on,dn,dn.depth);return tn==null?Xl(dn):lo(dn,typeof tn=="number"?[tn,tn,tn,tn]:tn)}function jr(dn){return lo(dn,Pr)}var cn;return it=(tt=Pr)==null?Xl:(cn=typeof Pr)=="function"?Ur:(cn==="number"&&(Pr=[Pr,Pr,Pr,Pr]),jr),on},on.round=function(Pr){return arguments.length?(Se=Pr?Math.round:Number,on):Se!=Number},on.sticky=function(Pr){return arguments.length?(ct=Pr,Lt=null,on):ct},on.ratio=function(Pr){return arguments.length?(Vt=Pr,on):Vt},on.mode=function(Pr){return arguments.length?(At=Pr+"",on):At},Hl(on,ve)};function Xl(ve){return{x:ve.x,y:ve.y,dx:ve.dx,dy:ve.dy}}function lo(ve,Se){var Ve=ve.x+Se[3],tt=ve.y+Se[0],it=ve.dx-Se[1]-Se[3],ct=ve.dy-Se[0]-Se[2];return it<0&&(Ve+=it/2,it=0),ct<0&&(tt+=ct/2,ct=0),{x:Ve,y:tt,dx:it,dy:ct}}n.random={normal:function(ve,Se){var Ve=arguments.length;return Ve<2&&(Se=1),Ve<1&&(ve=0),function(){var tt,it,ct;do tt=Math.random()*2-1,it=Math.random()*2-1,ct=tt*tt+it*it;while(!ct||ct>1);return ve+Se*tt*Math.sqrt(-2*Math.log(ct)/ct)}},logNormal:function(){var ve=n.random.normal.apply(n,arguments);return function(){return Math.exp(ve())}},bates:function(ve){var Se=n.random.irwinHall(ve);return function(){return Se()/ve}},irwinHall:function(ve){return function(){for(var Se=0,Ve=0;Ve<ve;Ve++)Se+=Math.random();return Se}}},n.scale={};function Xo(ve){var Se=ve[0],Ve=ve[ve.length-1];return Se<Ve?[Se,Ve]:[Ve,Se]}function Zl(ve){return ve.rangeExtent?ve.rangeExtent():Xo(ve.range())}function bc(ve,Se,Ve,tt){var it=Ve(ve[0],ve[1]),ct=tt(Se[0],Se[1]);return function(Lt){return ct(it(Lt))}}function Tu(ve,Se){var Ve=0,tt=ve.length-1,it=ve[Ve],ct=ve[tt],Lt;return ct<it&&(Lt=Ve,Ve=tt,tt=Lt,Lt=it,it=ct,ct=Lt),ve[Ve]=Se.floor(it),ve[tt]=Se.ceil(ct),ve}function Vs(ve){return ve?{floor:function(Se){return Math.floor(Se/ve)*ve},ceil:function(Se){return Math.ceil(Se/ve)*ve}}:_h}var _h={floor:N,ceil:N};function wc(ve,Se,Ve,tt){var it=[],ct=[],Lt=0,At=Math.min(ve.length,Se.length)-1;for(ve[At]<ve[0]&&(ve=ve.slice().reverse(),Se=Se.slice().reverse());++Lt<=At;)it.push(Ve(ve[Lt-1],ve[Lt])),ct.push(tt(Se[Lt-1],Se[Lt]));return function(Vt){var Wt=n.bisect(ve,Vt,1,At)-1;return ct[Wt](it[Wt](Vt))}}n.scale.linear=function(){return Tc([0,1],[0,1],po,!1)};function Tc(ve,Se,Ve,tt){var it,ct;function Lt(){var Vt=Math.min(ve.length,Se.length)>2?wc:bc,Wt=tt?Ul:os;return it=Vt(ve,Se,Wt,Ve),ct=Vt(Se,ve,Wt,po),At}function At(Vt){return it(Vt)}return At.invert=function(Vt){return ct(Vt)},At.domain=function(Vt){return arguments.length?(ve=Vt.map(Number),Lt()):ve},At.range=function(Vt){return arguments.length?(Se=Vt,Lt()):Se},At.rangeRound=function(Vt){return At.range(Vt).interpolate(hc)},At.clamp=function(Vt){return arguments.length?(tt=Vt,Lt()):tt},At.interpolate=function(Vt){return arguments.length?(Ve=Vt,Lt()):Ve},At.ticks=function(Vt){return hs(ve,Vt)},At.tickFormat=function(Vt,Wt){return d3_scale_linearTickFormat(ve,Vt,Wt)},At.nice=function(Vt){return Ac(ve,Vt),Lt()},At.copy=function(){return Tc(ve,Se,Ve,tt)},Lt()}function Of(ve,Se){return n.rebind(ve,Se,"range","rangeRound","interpolate","clamp")}function Ac(ve,Se){return Tu(ve,Vs(Ro(ve,Se)[2])),Tu(ve,Vs(Ro(ve,Se)[2])),ve}function Ro(ve,Se){Se==null&&(Se=10);var Ve=Xo(ve),tt=Ve[1]-Ve[0],it=Math.pow(10,Math.floor(Math.log(tt/Se)/Math.LN10)),ct=Se/tt*it;return ct<=.15?it*=10:ct<=.35?it*=5:ct<=.75&&(it*=2),Ve[0]=Math.ceil(Ve[0]/it)*it,Ve[1]=Math.floor(Ve[1]/it)*it+it*.5,Ve[2]=it,Ve}function hs(ve,Se){return n.range.apply(n,Ro(ve,Se))}n.scale.log=function(){return el(n.scale.linear().domain([0,1]),10,!0,[1,10])};function el(ve,Se,Ve,tt){function it(At){return(Ve?Math.log(At<0?0:At):-Math.log(At>0?0:-At))/Math.log(Se)}function ct(At){return Ve?Math.pow(Se,At):-Math.pow(Se,-At)}function Lt(At){return ve(it(At))}return Lt.invert=function(At){return ct(ve.invert(At))},Lt.domain=function(At){return arguments.length?(Ve=At[0]>=0,ve.domain((tt=At.map(Number)).map(it)),Lt):tt},Lt.base=function(At){return arguments.length?(Se=+At,ve.domain(tt.map(it)),Lt):Se},Lt.nice=function(){var At=Tu(tt.map(it),Ve?Math:jl);return ve.domain(At),tt=At.map(ct),Lt},Lt.ticks=function(){var At=Xo(tt),Vt=[],Wt=At[0],tr=At[1],Cr=Math.floor(it(Wt)),Lr=Math.ceil(it(tr)),Qr=Se%1?2:Se;if(isFinite(Lr-Cr)){if(Ve){for(;Cr<Lr;Cr++)for(var on=1;on<Qr;on++)Vt.push(ct(Cr)*on);Vt.push(ct(Cr))}else for(Vt.push(ct(Cr));Cr++<Lr;)for(var on=Qr-1;on>0;on--)Vt.push(ct(Cr)*on);for(Cr=0;Vt[Cr]<Wt;Cr++);for(Lr=Vt.length;Vt[Lr-1]>tr;Lr--);Vt=Vt.slice(Cr,Lr)}return Vt},Lt.copy=function(){return el(ve.copy(),Se,Ve,tt)},Of(Lt,ve)}var jl={floor:function(ve){return-Math.ceil(-ve)},ceil:function(ve){return-Math.floor(-ve)}};n.scale.pow=function(){return af(n.scale.linear(),1,[0,1])};function af(ve,Se,Ve){var tt=wl(Se),it=wl(1/Se);function ct(Lt){return ve(tt(Lt))}return ct.invert=function(Lt){return it(ve.invert(Lt))},ct.domain=function(Lt){return arguments.length?(ve.domain((Ve=Lt.map(Number)).map(tt)),ct):Ve},ct.ticks=function(Lt){return hs(Ve,Lt)},ct.tickFormat=function(Lt,At){return d3_scale_linearTickFormat(Ve,Lt,At)},ct.nice=function(Lt){return ct.domain(Ac(Ve,Lt))},ct.exponent=function(Lt){return arguments.length?(tt=wl(Se=Lt),it=wl(1/Se),ve.domain(Ve.map(tt)),ct):Se},ct.copy=function(){return af(ve.copy(),Se,Ve)},Of(ct,ve)}function wl(ve){return function(Se){return Se<0?-Math.pow(-Se,ve):Math.pow(Se,ve)}}n.scale.sqrt=function(){return n.scale.pow().exponent(.5)},n.scale.ordinal=function(){return Tl([],{t:"range",a:[[]]})};function Tl(ve,Se){var Ve,tt,it;function ct(At){return tt[((Ve.get(At)||(Se.t==="range"?Ve.set(At,ve.push(At)):NaN))-1)%tt.length]}function Lt(At,Vt){return n.range(ve.length).map(function(Wt){return At+Vt*Wt})}return ct.domain=function(At){if(!arguments.length)return ve;ve=[],Ve=new P;for(var Vt=-1,Wt=At.length,tr;++Vt<Wt;)Ve.has(tr=At[Vt])||Ve.set(tr,ve.push(tr));return ct[Se.t].apply(ct,Se.a)},ct.range=function(At){return arguments.length?(tt=At,it=0,Se={t:"range",a:arguments},ct):tt},ct.rangePoints=function(At,Vt){arguments.length<2&&(Vt=0);var Wt=At[0],tr=At[1],Cr=ve.length<2?(Wt=(Wt+tr)/2,0):(tr-Wt)/(ve.length-1+Vt);return tt=Lt(Wt+Cr*Vt/2,Cr),it=0,Se={t:"rangePoints",a:arguments},ct},ct.rangeRoundPoints=function(At,Vt){arguments.length<2&&(Vt=0);var Wt=At[0],tr=At[1],Cr=ve.length<2?(Wt=tr=Math.round((Wt+tr)/2),0):(tr-Wt)/(ve.length-1+Vt)|0;return tt=Lt(Wt+Math.round(Cr*Vt/2+(tr-Wt-(ve.length-1+Vt)*Cr)/2),Cr),it=0,Se={t:"rangeRoundPoints",a:arguments},ct},ct.rangeBands=function(At,Vt,Wt){arguments.length<2&&(Vt=0),arguments.length<3&&(Wt=Vt);var tr=At[1]<At[0],Cr=At[tr-0],Lr=At[1-tr],Qr=(Lr-Cr)/(ve.length-Vt+2*Wt);return tt=Lt(Cr+Qr*Wt,Qr),tr&&tt.reverse(),it=Qr*(1-Vt),Se={t:"rangeBands",a:arguments},ct},ct.rangeRoundBands=function(At,Vt,Wt){arguments.length<2&&(Vt=0),arguments.length<3&&(Wt=Vt);var tr=At[1]<At[0],Cr=At[tr-0],Lr=At[1-tr],Qr=Math.floor((Lr-Cr)/(ve.length-Vt+2*Wt));return tt=Lt(Cr+Math.round((Lr-Cr-(ve.length-Vt)*Qr)/2),Qr),tr&&tt.reverse(),it=Math.round(Qr*(1-Vt)),Se={t:"rangeRoundBands",a:arguments},ct},ct.rangeBand=function(){return it},ct.rangeExtent=function(){return Xo(Se.a[0])},ct.copy=function(){return Tl(ve,Se)},ct.domain(ve)}n.scale.category10=function(){return n.scale.ordinal().range(Mc)},n.scale.category20=function(){return n.scale.ordinal().range(Hs)},n.scale.category20b=function(){return n.scale.ordinal().range(Kl)},n.scale.category20c=function(){return n.scale.ordinal().range(tl)};var Mc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ft),Hs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ft),Kl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ft),tl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ft);n.scale.quantile=function(){return Gs([],[])};function Gs(ve,Se){var Ve;function tt(){var ct=0,Lt=Se.length;for(Ve=[];++ct<Lt;)Ve[ct-1]=n.quantile(ve,ct/Lt);return it}function it(ct){if(!isNaN(ct=+ct))return Se[n.bisect(Ve,ct)]}return it.domain=function(ct){return arguments.length?(ve=ct.map(m).filter(h).sort(l),tt()):ve},it.range=function(ct){return arguments.length?(Se=ct,tt()):Se},it.quantiles=function(){return Ve},it.invertExtent=function(ct){return ct=Se.indexOf(ct),ct<0?[NaN,NaN]:[ct>0?Ve[ct-1]:ve[0],ct<Ve.length?Ve[ct]:ve[ve.length-1]]},it.copy=function(){return Gs(ve,Se)},tt()}n.scale.quantize=function(){return Au(0,1,[0,1])};function Au(ve,Se,Ve){var tt,it;function ct(At){return Ve[Math.max(0,Math.min(it,Math.floor(tt*(At-ve))))]}function Lt(){return tt=Ve.length/(Se-ve),it=Ve.length-1,ct}return ct.domain=function(At){return arguments.length?(ve=+At[0],Se=+At[At.length-1],Lt()):[ve,Se]},ct.range=function(At){return arguments.length?(Ve=At,Lt()):Ve},ct.invertExtent=function(At){return At=Ve.indexOf(At),At=At<0?NaN:At/tt+ve,[At,At+1/tt]},ct.copy=function(){return Au(ve,Se,Ve)},Lt()}n.scale.threshold=function(){return Jl([.5],[0,1])};function Jl(ve,Se){function Ve(tt){if(tt<=tt)return Se[n.bisect(ve,tt)]}return Ve.domain=function(tt){return arguments.length?(ve=tt,Ve):ve},Ve.range=function(tt){return arguments.length?(Se=tt,Ve):Se},Ve.invertExtent=function(tt){return tt=Se.indexOf(tt),[ve[tt-1],ve[tt]]},Ve.copy=function(){return Jl(ve,Se)},Ve}n.scale.identity=function(){return ga([0,1])};function ga(ve){function Se(Ve){return+Ve}return Se.invert=Se,Se.domain=Se.range=function(Ve){return arguments.length?(ve=Ve.map(Se),Se):ve},Se.ticks=function(Ve){return hs(ve,Ve)},Se.tickFormat=function(Ve,tt){return d3_scale_linearTickFormat(ve,Ve,tt)},Se.copy=function(){return ga(ve)},Se}n.svg={};function Ql(){return 0}n.svg.arc=function(){var ve=Ec,Se=$l,Ve=Ql,tt=of,it=Mu,ct=sf,Lt=Ff;function At(){var Wt=Math.max(0,+ve.apply(this,arguments)),tr=Math.max(0,+Se.apply(this,arguments)),Cr=it.apply(this,arguments)-et,Lr=ct.apply(this,arguments)-et,Qr=Math.abs(Lr-Cr),on=Cr>Lr?0:1;if(tr<Wt&&(Pr=tr,tr=Wt,Wt=Pr),Qr>=Ue)return Vt(tr,on)+(Wt?Vt(Wt,1-on):"")+"Z";var Pr,Ur,jr,cn,dn=0,tn=0,Vn,ti,fi,qn,oi,ci,Fi,Ei,Di=[];if((cn=(+Lt.apply(this,arguments)||0)/2)&&(jr=tt===of?Math.sqrt(Wt*Wt+tr*tr):+tt.apply(this,arguments),on||(tn*=-1),tr&&(tn=Zt(jr/tr*Math.sin(cn))),Wt&&(dn=Zt(jr/Wt*Math.sin(cn)))),tr){Vn=tr*Math.cos(Cr+tn),ti=tr*Math.sin(Cr+tn),fi=tr*Math.cos(Lr-tn),qn=tr*Math.sin(Lr-tn);var aa=Math.abs(Lr-Cr-2*tn)<=pe?0:1;if(tn&&Eu(Vn,ti,fi,qn)===on^aa){var Ka=(Cr+Lr)/2;Vn=tr*Math.cos(Ka),ti=tr*Math.sin(Ka),fi=qn=null}}else Vn=ti=0;if(Wt){oi=Wt*Math.cos(Lr-dn),ci=Wt*Math.sin(Lr-dn),Fi=Wt*Math.cos(Cr+dn),Ei=Wt*Math.sin(Cr+dn);var ha=Math.abs(Cr-Lr+2*dn)<=pe?0:1;if(dn&&Eu(oi,ci,Fi,Ei)===1-on^ha){var Qn=(Cr+Lr)/2;oi=Wt*Math.cos(Qn),ci=Wt*Math.sin(Qn),Fi=Ei=null}}else oi=ci=0;if(Qr>je&&(Pr=Math.min(Math.abs(tr-Wt)/2,+Ve.apply(this,arguments)))>.001){Ur=Wt<tr^on?0:1;var Ni=Pr,Ai=Pr;if(Qr<pe){var ji=Fi==null?[oi,ci]:fi==null?[Vn,ti]:hn([Vn,ti],[Fi,Ei],[fi,qn],[oi,ci]),Ma=Vn-ji[0],oa=ti-ji[1],uo=fi-ji[0],fo=qn-ji[1],go=1/Math.sin(Math.acos((Ma*uo+oa*fo)/(Math.sqrt(Ma*Ma+oa*oa)*Math.sqrt(uo*uo+fo*fo)))/2),Ea=Math.sqrt(ji[0]*ji[0]+ji[1]*ji[1]);Ai=Math.min(Pr,(Wt-Ea)/(go-1)),Ni=Math.min(Pr,(tr-Ea)/(go+1))}if(fi!=null){var Mo=Su(Fi==null?[oi,ci]:[Fi,Ei],[Vn,ti],tr,Ni,on),li=Su([fi,qn],[oi,ci],tr,Ni,on);Pr===Ni?Di.push("M",Mo[0],"A",Ni,",",Ni," 0 0,",Ur," ",Mo[1],"A",tr,",",tr," 0 ",1-on^Eu(Mo[1][0],Mo[1][1],li[1][0],li[1][1]),",",on," ",li[1],"A",Ni,",",Ni," 0 0,",Ur," ",li[0]):Di.push("M",Mo[0],"A",Ni,",",Ni," 0 1,",Ur," ",li[0])}else Di.push("M",Vn,",",ti);if(Fi!=null){var Ci=Su([Vn,ti],[Fi,Ei],Wt,-Ai,on),Vo=Su([oi,ci],fi==null?[Vn,ti]:[fi,qn],Wt,-Ai,on);Pr===Ai?Di.push("L",Vo[0],"A",Ai,",",Ai," 0 0,",Ur," ",Vo[1],"A",Wt,",",Wt," 0 ",on^Eu(Vo[1][0],Vo[1][1],Ci[1][0],Ci[1][1]),",",1-on," ",Ci[1],"A",Ai,",",Ai," 0 0,",Ur," ",Ci[0]):Di.push("L",Vo[0],"A",Ai,",",Ai," 0 0,",Ur," ",Ci[0])}else Di.push("L",oi,",",ci)}else Di.push("M",Vn,",",ti),fi!=null&&Di.push("A",tr,",",tr," 0 ",aa,",",on," ",fi,",",qn),Di.push("L",oi,",",ci),Fi!=null&&Di.push("A",Wt,",",Wt," 0 ",ha,",",1-on," ",Fi,",",Ei);return Di.push("Z"),Di.join("")}function Vt(Wt,tr){return"M0,"+Wt+"A"+Wt+","+Wt+" 0 1,"+tr+" 0,"+-Wt+"A"+Wt+","+Wt+" 0 1,"+tr+" 0,"+Wt}return At.innerRadius=function(Wt){return arguments.length?(ve=en(Wt),At):ve},At.outerRadius=function(Wt){return arguments.length?(Se=en(Wt),At):Se},At.cornerRadius=function(Wt){return arguments.length?(Ve=en(Wt),At):Ve},At.padRadius=function(Wt){return arguments.length?(tt=Wt==of?of:en(Wt),At):tt},At.startAngle=function(Wt){return arguments.length?(it=en(Wt),At):it},At.endAngle=function(Wt){return arguments.length?(ct=en(Wt),At):ct},At.padAngle=function(Wt){return arguments.length?(Lt=en(Wt),At):Lt},At.centroid=function(){var Wt=(+ve.apply(this,arguments)+ +Se.apply(this,arguments))/2,tr=(+it.apply(this,arguments)+ +ct.apply(this,arguments))/2-et;return[Math.cos(tr)*Wt,Math.sin(tr)*Wt]},At};var of="auto";function Ec(ve){return ve.innerRadius}function $l(ve){return ve.outerRadius}function Mu(ve){return ve.startAngle}function sf(ve){return ve.endAngle}function Ff(ve){return ve&&ve.padAngle}function Eu(ve,Se,Ve,tt){return(ve-Ve)*Se-(Se-tt)*ve>0?0:1}function Su(ve,Se,Ve,tt,it){var ct=ve[0]-Se[0],Lt=ve[1]-Se[1],At=(it?tt:-tt)/Math.sqrt(ct*ct+Lt*Lt),Vt=At*Lt,Wt=-At*ct,tr=ve[0]+Vt,Cr=ve[1]+Wt,Lr=Se[0]+Vt,Qr=Se[1]+Wt,on=(tr+Lr)/2,Pr=(Cr+Qr)/2,Ur=Lr-tr,jr=Qr-Cr,cn=Ur*Ur+jr*jr,dn=Ve-tt,tn=tr*Qr-Lr*Cr,Vn=(jr<0?-1:1)*Math.sqrt(Math.max(0,dn*dn*cn-tn*tn)),ti=(tn*jr-Ur*Vn)/cn,fi=(-tn*Ur-jr*Vn)/cn,qn=(tn*jr+Ur*Vn)/cn,oi=(-tn*Ur+jr*Vn)/cn,ci=ti-on,Fi=fi-Pr,Ei=qn-on,Di=oi-Pr;return ci*ci+Fi*Fi>Ei*Ei+Di*Di&&(ti=qn,fi=oi),[[ti-Vt,fi-Wt],[ti*Ve/dn,fi*Ve/dn]]}function rl(){return!0}function Cu(ve){var Se=bi,Ve=Hn,tt=rl,it=eo,ct=it.key,Lt=.7;function At(Vt){var Wt=[],tr=[],Cr=-1,Lr=Vt.length,Qr,on=en(Se),Pr=en(Ve);function Ur(){Wt.push("M",it(ve(tr),Lt))}for(;++Cr<Lr;)tt.call(this,Qr=Vt[Cr],Cr)?tr.push([+on.call(this,Qr,Cr),+Pr.call(this,Qr,Cr)]):tr.length&&(Ur(),tr=[]);return tr.length&&Ur(),Wt.length?Wt.join(""):null}return At.x=function(Vt){return arguments.length?(Se=Vt,At):Se},At.y=function(Vt){return arguments.length?(Ve=Vt,At):Ve},At.defined=function(Vt){return arguments.length?(tt=Vt,At):tt},At.interpolate=function(Vt){return arguments.length?(typeof Vt=="function"?ct=it=Vt:ct=(it=nl.get(Vt)||eo).key,At):ct},At.tension=function(Vt){return arguments.length?(Lt=Vt,At):Lt},At}n.svg.line=function(){return Cu(N)};var nl=n.map({linear:eo,"linear-closed":Cs,step:Bf,"step-before":Al,"step-after":lf,basis:ql,"basis-open":Cc,"basis-closed":il,bundle:Rh,cardinal:Sc,"cardinal-open":Lu,"cardinal-closed":Ph,monotone:ff});nl.forEach(function(ve,Se){Se.key=ve,Se.closed=/-closed$/.test(ve)});function eo(ve){return ve.length>1?ve.join("L"):ve+"Z"}function Cs(ve){return ve.join("L")+"Z"}function Bf(ve){for(var Se=0,Ve=ve.length,tt=ve[0],it=[tt[0],",",tt[1]];++Se<Ve;)it.push("H",(tt[0]+(tt=ve[Se])[0])/2,"V",tt[1]);return Ve>1&&it.push("H",tt[0]),it.join("")}function Al(ve){for(var Se=0,Ve=ve.length,tt=ve[0],it=[tt[0],",",tt[1]];++Se<Ve;)it.push("V",(tt=ve[Se])[1],"H",tt[0]);return it.join("")}function lf(ve){for(var Se=0,Ve=ve.length,tt=ve[0],it=[tt[0],",",tt[1]];++Se<Ve;)it.push("H",(tt=ve[Se])[0],"V",tt[1]);return it.join("")}function Lu(ve,Se){return ve.length<4?eo(ve):ve[1]+Ao(ve.slice(1,-1),_u(ve,Se))}function Ph(ve,Se){return ve.length<3?Cs(ve):ve[0]+Ao((ve.push(ve[0]),ve),_u([ve[ve.length-2]].concat(ve,[ve[1]]),Se))}function Sc(ve,Se){return ve.length<3?eo(ve):ve[0]+Ao(ve,_u(ve,Se))}function Ao(ve,Se){if(Se.length<1||ve.length!=Se.length&&ve.length!=Se.length+2)return eo(ve);var Ve=ve.length!=Se.length,tt="",it=ve[0],ct=ve[1],Lt=Se[0],At=Lt,Vt=1;if(Ve&&(tt+="Q"+(ct[0]-Lt[0]*2/3)+","+(ct[1]-Lt[1]*2/3)+","+ct[0]+","+ct[1],it=ve[1],Vt=2),Se.length>1){At=Se[1],ct=ve[Vt],Vt++,tt+="C"+(it[0]+Lt[0])+","+(it[1]+Lt[1])+","+(ct[0]-At[0])+","+(ct[1]-At[1])+","+ct[0]+","+ct[1];for(var Wt=2;Wt<Se.length;Wt++,Vt++)ct=ve[Vt],At=Se[Wt],tt+="S"+(ct[0]-At[0])+","+(ct[1]-At[1])+","+ct[0]+","+ct[1]}if(Ve){var tr=ve[Vt];tt+="Q"+(ct[0]+At[0]*2/3)+","+(ct[1]+At[1]*2/3)+","+tr[0]+","+tr[1]}return tt}function _u(ve,Se){for(var Ve=[],tt=(1-Se)/2,it,ct=ve[0],Lt=ve[1],At=1,Vt=ve.length;++At<Vt;)it=ct,ct=Lt,Lt=ve[At],Ve.push([tt*(Lt[0]-it[0]),tt*(Lt[1]-it[1])]);return Ve}function ql(ve){if(ve.length<3)return eo(ve);var Se=1,Ve=ve.length,tt=ve[0],it=tt[0],ct=tt[1],Lt=[it,it,it,(tt=ve[1])[0]],At=[ct,ct,ct,tt[1]],Vt=[it,",",ct,"L",Uo(Ws,Lt),",",Uo(Ws,At)];for(ve.push(ve[Ve-1]);++Se<=Ve;)tt=ve[Se],Lt.shift(),Lt.push(tt[0]),At.shift(),At.push(tt[1]),al(Vt,Lt,At);return ve.pop(),Vt.push("L",tt),Vt.join("")}function Cc(ve){if(ve.length<4)return eo(ve);for(var Se=[],Ve=-1,tt=ve.length,it,ct=[0],Lt=[0];++Ve<3;)it=ve[Ve],ct.push(it[0]),Lt.push(it[1]);for(Se.push(Uo(Ws,ct)+","+Uo(Ws,Lt)),--Ve;++Ve<tt;)it=ve[Ve],ct.shift(),ct.push(it[0]),Lt.shift(),Lt.push(it[1]),al(Se,ct,Lt);return Se.join("")}function il(ve){for(var Se,Ve=-1,tt=ve.length,it=tt+4,ct,Lt=[],At=[];++Ve<4;)ct=ve[Ve%tt],Lt.push(ct[0]),At.push(ct[1]);for(Se=[Uo(Ws,Lt),",",Uo(Ws,At)],--Ve;++Ve<it;)ct=ve[Ve%tt],Lt.shift(),Lt.push(ct[0]),At.shift(),At.push(ct[1]),al(Se,Lt,At);return Se.join("")}function Rh(ve,Se){var Ve=ve.length-1;if(Ve)for(var tt=ve[0][0],it=ve[0][1],ct=ve[Ve][0]-tt,Lt=ve[Ve][1]-it,At=-1,Vt,Wt;++At<=Ve;)Vt=ve[At],Wt=At/Ve,Vt[0]=Se*Vt[0]+(1-Se)*(tt+Wt*ct),Vt[1]=Se*Vt[1]+(1-Se)*(it+Wt*Lt);return ql(ve)}function Uo(ve,Se){return ve[0]*Se[0]+ve[1]*Se[1]+ve[2]*Se[2]+ve[3]*Se[3]}var Pu=[0,2/3,1/3,0],uf=[0,1/3,2/3,0],Ws=[0,1/6,2/3,1/6];function al(ve,Se,Ve){ve.push("C",Uo(Pu,Se),",",Uo(Pu,Ve),",",Uo(uf,Se),",",Uo(uf,Ve),",",Uo(Ws,Se),",",Uo(Ws,Ve))}function Nf(ve,Se){return(Se[1]-ve[1])/(Se[0]-ve[0])}function Ru(ve){for(var Se=0,Ve=ve.length-1,tt=[],it=ve[0],ct=ve[1],Lt=tt[0]=Nf(it,ct);++Se<Ve;)tt[Se]=(Lt+(Lt=Nf(it=ct,ct=ve[Se+1])))/2;return tt[Se]=Lt,tt}function Iu(ve){for(var Se=[],Ve,tt,it,ct,Lt=Ru(ve),At=-1,Vt=ve.length-1;++At<Vt;)Ve=Nf(ve[At],ve[At+1]),p(Ve)<je?Lt[At]=Lt[At+1]=0:(tt=Lt[At]/Ve,it=Lt[At+1]/Ve,ct=tt*tt+it*it,ct>9&&(ct=Ve*3/Math.sqrt(ct),Lt[At]=ct*tt,Lt[At+1]=ct*it));for(At=-1;++At<=Vt;)ct=(ve[Math.min(Vt,At+1)][0]-ve[Math.max(0,At-1)][0])/(6*(1+Lt[At]*Lt[At])),Se.push([ct||0,Lt[At]*ct||0]);return Se}function ff(ve){return ve.length<3?eo(ve):ve[0]+Ao(ve,Iu(ve))}n.svg.line.radial=function(){var ve=Cu(Lc);return ve.radius=ve.x,delete ve.x,ve.angle=ve.y,delete ve.y,ve};function Lc(ve){for(var Se,Ve=-1,tt=ve.length,it,ct;++Ve<tt;)Se=ve[Ve],it=Se[0],ct=Se[1]-et,Se[0]=it*Math.cos(ct),Se[1]=it*Math.sin(ct);return ve}function Du(ve){var Se=bi,Ve=bi,tt=0,it=Hn,ct=rl,Lt=eo,At=Lt.key,Vt=Lt,Wt="L",tr=.7;function Cr(Lr){var Qr=[],on=[],Pr=[],Ur=-1,jr=Lr.length,cn,dn=en(Se),tn=en(tt),Vn=Se===Ve?function(){return fi}:en(Ve),ti=tt===it?function(){return qn}:en(it),fi,qn;function oi(){Qr.push("M",Lt(ve(Pr),tr),Wt,Vt(ve(on.reverse()),tr),"Z")}for(;++Ur<jr;)ct.call(this,cn=Lr[Ur],Ur)?(on.push([fi=+dn.call(this,cn,Ur),qn=+tn.call(this,cn,Ur)]),Pr.push([+Vn.call(this,cn,Ur),+ti.call(this,cn,Ur)])):on.length&&(oi(),on=[],Pr=[]);return on.length&&oi(),Qr.length?Qr.join(""):null}return Cr.x=function(Lr){return arguments.length?(Se=Ve=Lr,Cr):Ve},Cr.x0=function(Lr){return arguments.length?(Se=Lr,Cr):Se},Cr.x1=function(Lr){return arguments.length?(Ve=Lr,Cr):Ve},Cr.y=function(Lr){return arguments.length?(tt=it=Lr,Cr):it},Cr.y0=function(Lr){return arguments.length?(tt=Lr,Cr):tt},Cr.y1=function(Lr){return arguments.length?(it=Lr,Cr):it},Cr.defined=function(Lr){return arguments.length?(ct=Lr,Cr):ct},Cr.interpolate=function(Lr){return arguments.length?(typeof Lr=="function"?At=Lt=Lr:At=(Lt=nl.get(Lr)||eo).key,Vt=Lt.reverse||Lt,Wt=Lt.closed?"M":"L",Cr):At},Cr.tension=function(Lr){return arguments.length?(tr=Lr,Cr):tr},Cr}Al.reverse=lf,lf.reverse=Al,n.svg.area=function(){return Du(N)},n.svg.area.radial=function(){var ve=Du(Lc);return ve.radius=ve.x,delete ve.x,ve.innerRadius=ve.x0,delete ve.x0,ve.outerRadius=ve.x1,delete ve.x1,ve.angle=ve.y,delete ve.y,ve.startAngle=ve.y0,delete ve.y0,ve.endAngle=ve.y1,delete ve.y1,ve};function Uf(ve){return ve.source}function Ml(ve){return ve.target}n.svg.chord=function(){var ve=Uf,Se=Ml,Ve=Vf,tt=Mu,it=sf;function ct(tr,Cr){var Lr=Lt(this,ve,tr,Cr),Qr=Lt(this,Se,tr,Cr);return"M"+Lr.p0+Vt(Lr.r,Lr.p1,Lr.a1-Lr.a0)+(At(Lr,Qr)?Wt(Lr.r,Lr.p1,Lr.r,Lr.p0):Wt(Lr.r,Lr.p1,Qr.r,Qr.p0)+Vt(Qr.r,Qr.p1,Qr.a1-Qr.a0)+Wt(Qr.r,Qr.p1,Lr.r,Lr.p0))+"Z"}function Lt(tr,Cr,Lr,Qr){var on=Cr.call(tr,Lr,Qr),Pr=Ve.call(tr,on,Qr),Ur=tt.call(tr,on,Qr)-et,jr=it.call(tr,on,Qr)-et;return{r:Pr,a0:Ur,a1:jr,p0:[Pr*Math.cos(Ur),Pr*Math.sin(Ur)],p1:[Pr*Math.cos(jr),Pr*Math.sin(jr)]}}function At(tr,Cr){return tr.a0==Cr.a0&&tr.a1==Cr.a1}function Vt(tr,Cr,Lr){return"A"+tr+","+tr+" 0 "+ +(Lr>pe)+",1 "+Cr}function Wt(tr,Cr,Lr,Qr){return"Q 0,0 "+Qr}return ct.radius=function(tr){return arguments.length?(Ve=en(tr),ct):Ve},ct.source=function(tr){return arguments.length?(ve=en(tr),ct):ve},ct.target=function(tr){return arguments.length?(Se=en(tr),ct):Se},ct.startAngle=function(tr){return arguments.length?(tt=en(tr),ct):tt},ct.endAngle=function(tr){return arguments.length?(it=en(tr),ct):it},ct};function Vf(ve){return ve.radius}n.svg.diagonal=function(){var ve=Uf,Se=Ml,Ve=ku;function tt(it,ct){var Lt=ve.call(this,it,ct),At=Se.call(this,it,ct),Vt=(Lt.y+At.y)/2,Wt=[Lt,{x:Lt.x,y:Vt},{x:At.x,y:Vt},At];return Wt=Wt.map(Ve),"M"+Wt[0]+"C"+Wt[1]+" "+Wt[2]+" "+Wt[3]}return tt.source=function(it){return arguments.length?(ve=en(it),tt):ve},tt.target=function(it){return arguments.length?(Se=en(it),tt):Se},tt.projection=function(it){return arguments.length?(Ve=it,tt):Ve},tt};function ku(ve){return[ve.x,ve.y]}n.svg.diagonal.radial=function(){var ve=n.svg.diagonal(),Se=ku,Ve=ve.projection;return ve.projection=function(tt){return arguments.length?Ve(_c(Se=tt)):Se},ve};function _c(ve){return function(){var Se=ve.apply(this,arguments),Ve=Se[0],tt=Se[1]-et;return[Ve*Math.cos(tt),Ve*Math.sin(tt)]}}n.svg.symbol=function(){var ve=at,Se=Je;function Ve(tt,it){return(xt.get(ve.call(this,tt,it))||yt)(Se.call(this,tt,it))}return Ve.type=function(tt){return arguments.length?(ve=en(tt),Ve):ve},Ve.size=function(tt){return arguments.length?(Se=en(tt),Ve):Se},Ve};function Je(){return 64}function at(){return"circle"}function yt(ve){var Se=Math.sqrt(ve/pe);return"M0,"+Se+"A"+Se+","+Se+" 0 1,1 0,"+-Se+"A"+Se+","+Se+" 0 1,1 0,"+Se+"Z"}var xt=n.map({circle:yt,cross:function(ve){var Se=Math.sqrt(ve/5)/2;return"M"+-3*Se+","+-Se+"H"+-Se+"V"+-3*Se+"H"+Se+"V"+-Se+"H"+3*Se+"V"+Se+"H"+Se+"V"+3*Se+"H"+-Se+"V"+Se+"H"+-3*Se+"Z"},diamond:function(ve){var Se=Math.sqrt(ve/(2*Dt)),Ve=Se*Dt;return"M0,"+-Se+"L"+Ve+",0 0,"+Se+" "+-Ve+",0Z"},square:function(ve){var Se=Math.sqrt(ve)/2;return"M"+-Se+","+-Se+"L"+Se+","+-Se+" "+Se+","+Se+" "+-Se+","+Se+"Z"},"triangle-down":function(ve){var Se=Math.sqrt(ve/kt),Ve=Se*kt/2;return"M0,"+Ve+"L"+Se+","+-Ve+" "+-Se+","+-Ve+"Z"},"triangle-up":function(ve){var Se=Math.sqrt(ve/kt),Ve=Se*kt/2;return"M0,"+-Ve+"L"+Se+","+Ve+" "+-Se+","+Ve+"Z"}});n.svg.symbolTypes=xt.keys();var kt=Math.sqrt(3),Dt=Math.tan(30*st);Z.transition=function(ve){for(var Se=Ir||++Mr,Ve=_n(ve),tt=[],it,ct,Lt=Nr||{time:Date.now(),ease:Cf,delay:0,duration:250},At=-1,Vt=this.length;++At<Vt;){tt.push(it=[]);for(var Wt=this[At],tr=-1,Cr=Wt.length;++tr<Cr;)(ct=Wt[tr])&&Rn(ct,tr,Ve,Se,Lt),it.push(ct)}return wr(tt,Ve,Se)},Z.interrupt=function(ve){return this.each(ve==null?Ot:pr(_n(ve)))};var Ot=pr(_n());function pr(ve){return function(){var Se,Ve,tt;(Se=this[ve])&&(tt=Se[Ve=Se.active])&&(tt.timer.c=null,tt.timer.t=NaN,--Se.count?delete Se[Ve]:delete this[ve],Se.active+=.5,tt.event&&tt.event.interrupt.call(this,this.__data__,tt.index))}}function wr(ve,Se,Ve){return ie(ve,nr),ve.namespace=Se,ve.id=Ve,ve}var nr=[],Mr=0,Ir,Nr;nr.call=Z.call,nr.empty=Z.empty,nr.node=Z.node,nr.size=Z.size,n.transition=function(ve,Se){return ve&&ve.transition?Ir?ve.transition(Se):ve:n.selection().transition(ve)},n.transition.prototype=nr,nr.select=function(ve){var Se=this.id,Ve=this.namespace,tt=[],it,ct,Lt;ve=fe(ve);for(var At=-1,Vt=this.length;++At<Vt;){tt.push(it=[]);for(var Wt=this[At],tr=-1,Cr=Wt.length;++tr<Cr;)(Lt=Wt[tr])&&(ct=ve.call(Lt,Lt.__data__,tr,At))?("__data__"in Lt&&(ct.__data__=Lt.__data__),Rn(ct,tr,Ve,Se,Lt[Ve][Se]),it.push(ct)):it.push(null)}return wr(tt,Ve,Se)},nr.selectAll=function(ve){var Se=this.id,Ve=this.namespace,tt=[],it,ct,Lt,At,Vt;ve=re(ve);for(var Wt=-1,tr=this.length;++Wt<tr;)for(var Cr=this[Wt],Lr=-1,Qr=Cr.length;++Lr<Qr;)if(Lt=Cr[Lr]){Vt=Lt[Ve][Se],ct=ve.call(Lt,Lt.__data__,Lr,Wt),tt.push(it=[]);for(var on=-1,Pr=ct.length;++on<Pr;)(At=ct[on])&&Rn(At,on,Ve,Se,Vt),it.push(At)}return wr(tt,Ve,Se)},nr.filter=function(ve){var Se=[],Ve,tt,it;typeof ve!="function"&&(ve=rt(ve));for(var ct=0,Lt=this.length;ct<Lt;ct++){Se.push(Ve=[]);for(var tt=this[ct],At=0,Vt=tt.length;At<Vt;At++)(it=tt[At])&&ve.call(it,it.__data__,At,ct)&&Ve.push(it)}return wr(Se,this.namespace,this.id)},nr.tween=function(ve,Se){var Ve=this.id,tt=this.namespace;return arguments.length<2?this.node()[tt][Ve].tween.get(ve):$e(this,Se==null?function(it){it[tt][Ve].tween.remove(ve)}:function(it){it[tt][Ve].tween.set(ve,Se)})};function an(ve,Se,Ve,tt){var it=ve.id,ct=ve.namespace;return $e(ve,typeof Ve=="function"?function(Lt,At,Vt){Lt[ct][it].tween.set(Se,tt(Ve.call(Lt,Lt.__data__,At,Vt)))}:(Ve=tt(Ve),function(Lt){Lt[ct][it].tween.set(Se,Ve)}))}nr.attr=function(ve,Se){if(arguments.length<2){for(Se in ve)this.attr(Se,ve[Se]);return this}var Ve=ve=="transform"?Qu:po,tt=n.ns.qualify(ve);function it(){this.removeAttribute(tt)}function ct(){this.removeAttributeNS(tt.space,tt.local)}function Lt(Vt){return Vt==null?it:(Vt+="",function(){var Wt=this.getAttribute(tt),tr;return Wt!==Vt&&(tr=Ve(Wt,Vt),function(Cr){this.setAttribute(tt,tr(Cr))})})}function At(Vt){return Vt==null?ct:(Vt+="",function(){var Wt=this.getAttributeNS(tt.space,tt.local),tr;return Wt!==Vt&&(tr=Ve(Wt,Vt),function(Cr){this.setAttributeNS(tt.space,tt.local,tr(Cr))})})}return an(this,"attr."+ve,Se,tt.local?At:Lt)},nr.attrTween=function(ve,Se){var Ve=n.ns.qualify(ve);function tt(ct,Lt){var At=Se.call(this,ct,Lt,this.getAttribute(Ve));return At&&function(Vt){this.setAttribute(Ve,At(Vt))}}function it(ct,Lt){var At=Se.call(this,ct,Lt,this.getAttributeNS(Ve.space,Ve.local));return At&&function(Vt){this.setAttributeNS(Ve.space,Ve.local,At(Vt))}}return this.tween("attr."+ve,Ve.local?it:tt)},nr.style=function(ve,Se,Ve){var tt=arguments.length;if(tt<3){if(typeof ve!="string"){tt<2&&(Se="");for(Ve in ve)this.style(Ve,ve[Ve],Se);return this}Ve=""}function it(){this.style.removeProperty(ve)}function ct(Lt){return Lt==null?it:(Lt+="",function(){var At=r(this).getComputedStyle(this,null).getPropertyValue(ve),Vt;return At!==Lt&&(Vt=po(At,Lt),function(Wt){this.style.setProperty(ve,Vt(Wt),Ve)})})}return an(this,"style."+ve,Se,ct)},nr.styleTween=function(ve,Se,Ve){arguments.length<3&&(Ve="");function tt(it,ct){var Lt=Se.call(this,it,ct,r(this).getComputedStyle(this,null).getPropertyValue(ve));return Lt&&function(At){this.style.setProperty(ve,Lt(At),Ve)}}return this.tween("style."+ve,tt)},nr.text=function(ve){return an(this,"text",ve,mn)};function mn(ve){return ve==null&&(ve=""),function(){this.textContent=ve}}nr.remove=function(){var ve=this.namespace;return this.each("end.transition",function(){var Se;this[ve].count<2&&(Se=this.parentNode)&&Se.removeChild(this)})},nr.ease=function(ve){var Se=this.id,Ve=this.namespace;return arguments.length<1?this.node()[Ve][Se].ease:(typeof ve!="function"&&(ve=n.ease.apply(n,arguments)),$e(this,function(tt){tt[Ve][Se].ease=ve}))},nr.delay=function(ve){var Se=this.id,Ve=this.namespace;return arguments.length<1?this.node()[Ve][Se].delay:$e(this,typeof ve=="function"?function(tt,it,ct){tt[Ve][Se].delay=+ve.call(tt,tt.__data__,it,ct)}:(ve=+ve,function(tt){tt[Ve][Se].delay=ve}))},nr.duration=function(ve){var Se=this.id,Ve=this.namespace;return arguments.length<1?this.node()[Ve][Se].duration:$e(this,typeof ve=="function"?function(tt,it,ct){tt[Ve][Se].duration=Math.max(1,ve.call(tt,tt.__data__,it,ct))}:(ve=Math.max(1,ve),function(tt){tt[Ve][Se].duration=ve}))},nr.each=function(ve,Se){var Ve=this.id,tt=this.namespace;if(arguments.length<2){var it=Nr,ct=Ir;try{Ir=Ve,$e(this,function(Lt,At,Vt){Nr=Lt[tt][Ve],ve.call(Lt,Lt.__data__,At,Vt)})}finally{Nr=it,Ir=ct}}else $e(this,function(Lt){var At=Lt[tt][Ve];(At.event||(At.event=n.dispatch("start","end","interrupt"))).on(ve,Se)});return this},nr.transition=function(){for(var ve=this.id,Se=++Mr,Ve=this.namespace,tt=[],it,ct,Lt,At,Vt=0,Wt=this.length;Vt<Wt;Vt++){tt.push(it=[]);for(var ct=this[Vt],tr=0,Cr=ct.length;tr<Cr;tr++)(Lt=ct[tr])&&(At=Lt[Ve][ve],Rn(Lt,tr,Ve,Se,{time:At.time,ease:At.ease,delay:At.delay+At.duration,duration:At.duration})),it.push(Lt)}return wr(tt,Ve,Se)};function _n(ve){return ve==null?"__transition__":"__transition_"+ve+"__"}function Rn(ve,Se,Ve,tt,it){var ct=ve[Ve]||(ve[Ve]={active:0,count:0}),Lt=ct[tt],At,Vt,Wt,tr,Cr;function Lr(Pr){var Ur=Lt.delay;if(Vt.t=Ur+At,Ur<=Pr)return Qr(Pr-Ur);Vt.c=Qr}function Qr(Pr){var Ur=ct.active,jr=ct[Ur];jr&&(jr.timer.c=null,jr.timer.t=NaN,--ct.count,delete ct[Ur],jr.event&&jr.event.interrupt.call(ve,ve.__data__,jr.index));for(var cn in ct)if(+cn<tt){var dn=ct[cn];dn.timer.c=null,dn.timer.t=NaN,--ct.count,delete ct[cn]}Vt.c=on,Ln(function(){return Vt.c&&on(Pr||1)&&(Vt.c=null,Vt.t=NaN),1},0,At),ct.active=tt,Lt.event&&Lt.event.start.call(ve,ve.__data__,Se),Cr=[],Lt.tween.forEach(function(tn,Vn){(Vn=Vn.call(ve,ve.__data__,Se))&&Cr.push(Vn)}),tr=Lt.ease,Wt=Lt.duration}function on(Pr){for(var Ur=Pr/Wt,jr=tr(Ur),cn=Cr.length;cn>0;)Cr[--cn].call(ve,jr);if(Ur>=1)return Lt.event&&Lt.event.end.call(ve,ve.__data__,Se),--ct.count?delete ct[tt]:delete ve[Ve],1}Lt||(At=it.time,Vt=Ln(Lr,0,At),Lt=ct[tt]={tween:new P,time:At,timer:Vt,delay:it.delay,duration:it.duration,ease:it.ease,index:Se},it=null,++ct.count)}n.svg.axis=function(){var ve=n.scale.linear(),Se=Zn,Ve=6,tt=6,it=3,ct=[10],Lt=null,At;function Vt(Wt){Wt.each(function(){var tr=n.select(this),Cr=this.__chart__||ve,Lr=this.__chart__=ve.copy(),Qr=Lt??(Lr.ticks?Lr.ticks.apply(Lr,ct):Lr.domain()),on=At??(Lr.tickFormat?Lr.tickFormat.apply(Lr,ct):N),Pr=tr.selectAll(".tick").data(Qr,Lr),Ur=Pr.enter().insert("g",".domain").attr("class","tick").style("opacity",je),jr=n.transition(Pr.exit()).style("opacity",je).remove(),cn=n.transition(Pr.order()).style("opacity",1),dn=Math.max(Ve,0)+it,tn,Vn=Zl(Lr),ti=tr.selectAll(".domain").data([0]),fi=(ti.enter().append("path").attr("class","domain"),n.transition(ti));Ur.append("line"),Ur.append("text");var qn=Ur.select("line"),oi=cn.select("line"),ci=Pr.select("text").text(on),Fi=Ur.select("text"),Ei=cn.select("text"),Di=Se==="top"||Se==="left"?-1:1,aa,Ka,ha,Qn;if(Se==="bottom"||Se==="top"?(tn=Pi,aa="x",ha="y",Ka="x2",Qn="y2",ci.attr("dy",Di<0?"0em":".71em").style("text-anchor","middle"),fi.attr("d","M"+Vn[0]+","+Di*tt+"V0H"+Vn[1]+"V"+Di*tt)):(tn=Ii,aa="y",ha="x",Ka="y2",Qn="x2",ci.attr("dy",".32em").style("text-anchor",Di<0?"end":"start"),fi.attr("d","M"+Di*tt+","+Vn[0]+"H0V"+Vn[1]+"H"+Di*tt)),qn.attr(Qn,Di*Ve),Fi.attr(ha,Di*dn),oi.attr(Ka,0).attr(Qn,Di*Ve),Ei.attr(aa,0).attr(ha,Di*dn),Lr.rangeBand){var Ni=Lr,Ai=Ni.rangeBand()/2;Cr=Lr=function(ji){return Ni(ji)+Ai}}else Cr.rangeBand?Cr=Lr:jr.call(tn,Lr,Cr);Ur.call(tn,Cr,Lr),cn.call(tn,Lr,Lr)})}return Vt.scale=function(Wt){return arguments.length?(ve=Wt,Vt):ve},Vt.orient=function(Wt){return arguments.length?(Se=Wt in _i?Wt+"":Zn,Vt):Se},Vt.ticks=function(){return arguments.length?(ct=T(arguments),Vt):ct},Vt.tickValues=function(Wt){return arguments.length?(Lt=Wt,Vt):Lt},Vt.tickFormat=function(Wt){return arguments.length?(At=Wt,Vt):At},Vt.tickSize=function(Wt){var tr=arguments.length;return tr?(Ve=+Wt,tt=+arguments[tr-1],Vt):Ve},Vt.innerTickSize=function(Wt){return arguments.length?(Ve=+Wt,Vt):Ve},Vt.outerTickSize=function(Wt){return arguments.length?(tt=+Wt,Vt):tt},Vt.tickPadding=function(Wt){return arguments.length?(it=+Wt,Vt):it},Vt.tickSubdivide=function(){return arguments.length&&Vt},Vt};var Zn="bottom",_i={top:1,right:1,bottom:1,left:1};function Pi(ve,Se,Ve){ve.attr("transform",function(tt){var it=Se(tt);return"translate("+(isFinite(it)?it:Ve(tt))+",0)"})}function Ii(ve,Se,Ve){ve.attr("transform",function(tt){var it=Se(tt);return"translate(0,"+(isFinite(it)?it:Ve(tt))+")"})}n.svg.brush=function(){var ve=te(tr,"brushstart","brush","brushend"),Se=null,Ve=null,tt=[0,0],it=[0,0],ct,Lt,At=!0,Vt=!0,Wt=Zi[0];function tr(Pr){Pr.each(function(){var Ur=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",on).on("touchstart.brush",on),jr=Ur.selectAll(".background").data([0]);jr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ur.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var cn=Ur.selectAll(".resize").data(Wt,N);cn.exit().remove(),cn.enter().append("g").attr("class",function(ti){return"resize "+ti}).style("cursor",function(ti){return zi[ti]}).append("rect").attr("x",function(ti){return/[ew]$/.test(ti)?-3:null}).attr("y",function(ti){return/^[ns]/.test(ti)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),cn.style("display",tr.empty()?"none":null);var dn=n.transition(Ur),tn=n.transition(jr),Vn;Se&&(Vn=Zl(Se),tn.attr("x",Vn[0]).attr("width",Vn[1]-Vn[0]),Lr(dn)),Ve&&(Vn=Zl(Ve),tn.attr("y",Vn[0]).attr("height",Vn[1]-Vn[0]),Qr(dn)),Cr(dn)})}tr.event=function(Pr){Pr.each(function(){var Ur=ve.of(this,arguments),jr={x:tt,y:it,i:ct,j:Lt},cn=this.__chart__||jr;this.__chart__=jr,Ir?n.select(this).transition().each("start.brush",function(){ct=cn.i,Lt=cn.j,tt=cn.x,it=cn.y,Ur({type:"brushstart"})}).tween("brush:brush",function(){var dn=Yo(tt,jr.x),tn=Yo(it,jr.y);return ct=Lt=null,function(Vn){tt=jr.x=dn(Vn),it=jr.y=tn(Vn),Ur({type:"brush",mode:"resize"})}}).each("end.brush",function(){ct=jr.i,Lt=jr.j,Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"})}):(Ur({type:"brushstart"}),Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"}))})};function Cr(Pr){Pr.selectAll(".resize").attr("transform",function(Ur){return"translate("+tt[+/e$/.test(Ur)]+","+it[+/^s/.test(Ur)]+")"})}function Lr(Pr){Pr.select(".extent").attr("x",tt[0]),Pr.selectAll(".extent,.n>rect,.s>rect").attr("width",tt[1]-tt[0])}function Qr(Pr){Pr.select(".extent").attr("y",it[0]),Pr.selectAll(".extent,.e>rect,.w>rect").attr("height",it[1]-it[0])}function on(){var Pr=this,Ur=n.select(n.event.target),jr=ve.of(Pr,arguments),cn=n.select(Pr),dn=Ur.datum(),tn=!/^(n|s)$/.test(dn)&&Se,Vn=!/^(e|w)$/.test(dn)&&Ve,ti=Ur.classed("extent"),fi=Ze(Pr),qn,oi=n.mouse(Pr),ci,Fi=n.select(r(Pr)).on("keydown.brush",aa).on("keyup.brush",Ka);if(n.event.changedTouches?Fi.on("touchmove.brush",ha).on("touchend.brush",Ni):Fi.on("mousemove.brush",ha).on("mouseup.brush",Ni),cn.interrupt().selectAll("*").interrupt(),ti)oi[0]=tt[0]-oi[0],oi[1]=it[0]-oi[1];else if(dn){var Ei=+/w$/.test(dn),Di=+/^n/.test(dn);ci=[tt[1-Ei]-oi[0],it[1-Di]-oi[1]],oi[0]=tt[Ei],oi[1]=it[Di]}else n.event.altKey&&(qn=oi.slice());cn.style("pointer-events","none").selectAll(".resize").style("display",null),n.select("body").style("cursor",Ur.style("cursor")),jr({type:"brushstart"}),ha();function aa(){n.event.keyCode==32&&(ti||(qn=null,oi[0]-=tt[1],oi[1]-=it[1],ti=2),q())}function Ka(){n.event.keyCode==32&&ti==2&&(oi[0]+=tt[1],oi[1]+=it[1],ti=0,q())}function ha(){var Ai=n.mouse(Pr),ji=!1;ci&&(Ai[0]+=ci[0],Ai[1]+=ci[1]),ti||(n.event.altKey?(qn||(qn=[(tt[0]+tt[1])/2,(it[0]+it[1])/2]),oi[0]=tt[+(Ai[0]<qn[0])],oi[1]=it[+(Ai[1]<qn[1])]):qn=null),tn&&Qn(Ai,Se,0)&&(Lr(cn),ji=!0),Vn&&Qn(Ai,Ve,1)&&(Qr(cn),ji=!0),ji&&(Cr(cn),jr({type:"brush",mode:ti?"move":"resize"}))}function Qn(Ai,ji,Ma){var oa=Zl(ji),uo=oa[0],fo=oa[1],go=oi[Ma],Ea=Ma?it:tt,Mo=Ea[1]-Ea[0],li,Ci;if(ti&&(uo-=go,fo-=Mo+go),li=(Ma?Vt:At)?Math.max(uo,Math.min(fo,Ai[Ma])):Ai[Ma],ti?Ci=(li+=go)+Mo:(qn&&(go=Math.max(uo,Math.min(fo,2*qn[Ma]-li))),go<li?(Ci=li,li=go):Ci=go),Ea[0]!=li||Ea[1]!=Ci)return Ma?Lt=null:ct=null,Ea[0]=li,Ea[1]=Ci,!0}function Ni(){ha(),cn.style("pointer-events","all").selectAll(".resize").style("display",tr.empty()?"none":null),n.select("body").style("cursor",null),Fi.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),fi(),jr({type:"brushend"})}}return tr.x=function(Pr){return arguments.length?(Se=Pr,Wt=Zi[!Se<<1|!Ve],tr):Se},tr.y=function(Pr){return arguments.length?(Ve=Pr,Wt=Zi[!Se<<1|!Ve],tr):Ve},tr.clamp=function(Pr){return arguments.length?(Se&&Ve?(At=!!Pr[0],Vt=!!Pr[1]):Se?At=!!Pr:Ve&&(Vt=!!Pr),tr):Se&&Ve?[At,Vt]:Se?At:Ve?Vt:null},tr.extent=function(Pr){var Ur,jr,cn,dn,tn;return arguments.length?(Se&&(Ur=Pr[0],jr=Pr[1],Ve&&(Ur=Ur[0],jr=jr[0]),ct=[Ur,jr],Se.invert&&(Ur=Se(Ur),jr=Se(jr)),jr<Ur&&(tn=Ur,Ur=jr,jr=tn),(Ur!=tt[0]||jr!=tt[1])&&(tt=[Ur,jr])),Ve&&(cn=Pr[0],dn=Pr[1],Se&&(cn=cn[1],dn=dn[1]),Lt=[cn,dn],Ve.invert&&(cn=Ve(cn),dn=Ve(dn)),dn<cn&&(tn=cn,cn=dn,dn=tn),(cn!=it[0]||dn!=it[1])&&(it=[cn,dn])),tr):(Se&&(ct?(Ur=ct[0],jr=ct[1]):(Ur=tt[0],jr=tt[1],Se.invert&&(Ur=Se.invert(Ur),jr=Se.invert(jr)),jr<Ur&&(tn=Ur,Ur=jr,jr=tn))),Ve&&(Lt?(cn=Lt[0],dn=Lt[1]):(cn=it[0],dn=it[1],Ve.invert&&(cn=Ve.invert(cn),dn=Ve.invert(dn)),dn<cn&&(tn=cn,cn=dn,dn=tn))),Se&&Ve?[[Ur,cn],[jr,dn]]:Se?[Ur,jr]:Ve&&[cn,dn])},tr.clear=function(){return tr.empty()||(tt=[0,0],it=[0,0],ct=Lt=null),tr},tr.empty=function(){return!!Se&&tt[0]==tt[1]||!!Ve&&it[0]==it[1]},n.rebind(tr,ve,"on")};var zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];n.text=An(function(ve){return ve.responseText}),n.json=function(ve,Se){return wn(ve,"application/json",ya,Se)};function ya(ve){return JSON.parse(ve.responseText)}n.html=function(ve,Se){return wn(ve,"text/html",Za,Se)};function Za(ve){var Se=v.createRange();return Se.selectNode(v.body),Se.createContextualFragment(ve.responseText)}n.xml=An(function(ve){return ve.responseXML}),d=n,S=typeof d=="function"?d.call(F,e,F,U):d,S!==void 0&&(U.exports=S)}).apply(self)},3480:function(U){(function(F,e){U.exports=e()})(this,function(){var F,e,d;function S(n,E){if(!F)F=E;else if(!e)e=E;else{var T="var sharedChunk = {}; ("+F+")(sharedChunk); ("+e+")(sharedChunk);",v={};F(v),d=E(v),typeof window<"u"&&(d.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}return S(["exports"],function(n){function E(R,I){return I={exports:{}},R(I,I.exports),I.exports}var T="1.13.4",v=g;function g(R,I,W,se){this.cx=3*R,this.bx=3*(W-R)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(se-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=R,this.p1y=se,this.p2x=W,this.p2y=se}g.prototype.sampleCurveX=function(R){return((this.ax*R+this.bx)*R+this.cx)*R},g.prototype.sampleCurveY=function(R){return((this.ay*R+this.by)*R+this.cy)*R},g.prototype.sampleCurveDerivativeX=function(R){return(3*this.ax*R+2*this.bx)*R+this.cx},g.prototype.solveCurveX=function(R,I){typeof I>"u"&&(I=1e-6);var W,se,ge,Me,Pe;for(ge=R,Pe=0;Pe<8;Pe++){if(Me=this.sampleCurveX(ge)-R,Math.abs(Me)<I)return ge;var Qe=this.sampleCurveDerivativeX(ge);if(Math.abs(Qe)<1e-6)break;ge=ge-Me/Qe}if(W=0,se=1,ge=R,ge<W)return W;if(ge>se)return se;for(;W<se;){if(Me=this.sampleCurveX(ge),Math.abs(Me-R)<I)return ge;R>Me?W=ge:se=ge,ge=(se-W)*.5+W}return ge},g.prototype.solve=function(R,I){return this.sampleCurveY(this.solveCurveX(R,I))};var r=t;function t(R,I){this.x=R,this.y=I}t.prototype={clone:function(){return new t(this.x,this.y)},add:function(R){return this.clone()._add(R)},sub:function(R){return this.clone()._sub(R)},multByPoint:function(R){return this.clone()._multByPoint(R)},divByPoint:function(R){return this.clone()._divByPoint(R)},mult:function(R){return this.clone()._mult(R)},div:function(R){return this.clone()._div(R)},rotate:function(R){return this.clone()._rotate(R)},rotateAround:function(R,I){return this.clone()._rotateAround(R,I)},matMult:function(R){return this.clone()._matMult(R)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(R){return this.x===R.x&&this.y===R.y},dist:function(R){return Math.sqrt(this.distSqr(R))},distSqr:function(R){var I=R.x-this.x,W=R.y-this.y;return I*I+W*W},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(R){return Math.atan2(this.y-R.y,this.x-R.x)},angleWith:function(R){return this.angleWithSep(R.x,R.y)},angleWithSep:function(R,I){return Math.atan2(this.x*I-this.y*R,this.x*R+this.y*I)},_matMult:function(R){var I=R[0]*this.x+R[1]*this.y,W=R[2]*this.x+R[3]*this.y;return this.x=I,this.y=W,this},_add:function(R){return this.x+=R.x,this.y+=R.y,this},_sub:function(R){return this.x-=R.x,this.y-=R.y,this},_mult:function(R){return this.x*=R,this.y*=R,this},_div:function(R){return this.x/=R,this.y/=R,this},_multByPoint:function(R){return this.x*=R.x,this.y*=R.y,this},_divByPoint:function(R){return this.x/=R.x,this.y/=R.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var R=this.y;return this.y=this.x,this.x=-R,this},_rotate:function(R){var I=Math.cos(R),W=Math.sin(R),se=I*this.x-W*this.y,ge=W*this.x+I*this.y;return this.x=se,this.y=ge,this},_rotateAround:function(R,I){var W=Math.cos(R),se=Math.sin(R),ge=I.x+W*(this.x-I.x)-se*(this.y-I.y),Me=I.y+se*(this.x-I.x)+W*(this.y-I.y);return this.x=ge,this.y=Me,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(R){return R instanceof t?R:Array.isArray(R)?new t(R[0],R[1]):R};var o=typeof self<"u"?self:{};function i(R,I){if(Array.isArray(R)){if(!Array.isArray(I)||R.length!==I.length)return!1;for(var W=0;W<R.length;W++)if(!i(R[W],I[W]))return!1;return!0}if(typeof R=="object"&&R!==null&&I!==null){if(typeof I!="object")return!1;var se=Object.keys(R);if(se.length!==Object.keys(I).length)return!1;for(var ge in R)if(!i(R[ge],I[ge]))return!1;return!0}return R===I}var f=Math.pow(2,53)-1;function u(R){if(R<=0)return 0;if(R>=1)return 1;var I=R*R,W=I*R;return 4*(R<.5?W:3*(R-I)+W-.75)}function l(R,I,W,se){var ge=new v(R,I,W,se);return function(Me){return ge.solve(Me)}}var m=l(.25,.1,.25,1);function h(R,I,W){return Math.min(W,Math.max(I,R))}function w(R,I,W){var se=W-I,ge=((R-I)%se+se)%se+I;return ge===I?W:ge}function c(R,I,W){if(!R.length)return W(null,[]);var se=R.length,ge=new Array(R.length),Me=null;R.forEach(function(Pe,Qe){I(Pe,function(dt,Mt){dt&&(Me=dt),ge[Qe]=Mt,--se===0&&W(Me,ge)})})}function a(R){var I=[];for(var W in R)I.push(R[W]);return I}function p(R,I){var W=[];for(var se in R)se in I||W.push(se);return W}function x(R){for(var I=[],W=arguments.length-1;W-- >0;)I[W]=arguments[W+1];for(var se=0,ge=I;se<ge.length;se+=1){var Me=ge[se];for(var Pe in Me)R[Pe]=Me[Pe]}return R}function A(R,I){for(var W={},se=0;se<I.length;se++){var ge=I[se];ge in R&&(W[ge]=R[ge])}return W}var P=1;function y(){return P++}function C(){function R(I){return I?(I^Math.random()*16>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,R)}return R()}function M(R){return R<=1?1:Math.pow(2,Math.ceil(Math.log(R)/Math.LN2))}function s(R){return R?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(R):!1}function _(R,I){R.forEach(function(W){I[W]&&(I[W]=I[W].bind(I))})}function b(R,I){return R.indexOf(I,R.length-I.length)!==-1}function k(R,I,W){var se={};for(var ge in R)se[ge]=I.call(W||this,R[ge],ge,R);return se}function D(R,I,W){var se={};for(var ge in R)I.call(W||this,R[ge],ge,R)&&(se[ge]=R[ge]);return se}function V(R){return Array.isArray(R)?R.map(V):typeof R=="object"&&R?k(R,V):R}function O(R,I){for(var W=0;W<R.length;W++)if(I.indexOf(R[W])>=0)return!0;return!1}var N={};function B(R){N[R]||(typeof console<"u"&&console.warn(R),N[R]=!0)}function z(R,I,W){return(W.y-R.y)*(I.x-R.x)>(I.y-R.y)*(W.x-R.x)}function H(R){for(var I=0,W=0,se=R.length,ge=se-1,Me=void 0,Pe=void 0;W<se;ge=W++)Me=R[W],Pe=R[ge],I+=(Pe.x-Me.x)*(Me.y+Pe.y);return I}function X(R){var I=R[0],W=R[1],se=R[2];return W+=90,W*=Math.PI/180,se*=Math.PI/180,{x:I*Math.cos(W)*Math.sin(se),y:I*Math.sin(W)*Math.sin(se),z:I*Math.cos(se)}}function $(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ne(R){var I=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,W={};if(R.replace(I,function(ge,Me,Pe,Qe){var dt=Pe||Qe;return W[Me]=dt?dt.toLowerCase():!0,""}),W["max-age"]){var se=parseInt(W["max-age"],10);isNaN(se)?delete W["max-age"]:W["max-age"]=se}return W}var q=null;function ue(R){if(q==null){var I=R.navigator?R.navigator.userAgent:null;q=!!R.safari||!!(I&&(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return q}function te(R){try{var I=o[R];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch{return!1}}function J(R){return o.btoa(encodeURIComponent(R).replace(/%([0-9A-F]{2})/g,function(I,W){return String.fromCharCode(+("0x"+W))}))}function ie(R){return decodeURIComponent(o.atob(R).split("").map(function(I){return"%"+("00"+I.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var K=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now.bind(Date),ee=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,le=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame,j,Z,fe={now:K,frame:function(I){var W=ee(I);return{cancel:function(){return le(W)}}},getImageData:function(I,W){W===void 0&&(W=0);var se=o.document.createElement("canvas"),ge=se.getContext("2d");if(!ge)throw new Error("failed to create canvas 2d context");return se.width=I.width,se.height=I.height,ge.drawImage(I,0,0,I.width,I.height),ge.getImageData(-W,-W,I.width+2*W,I.height+2*W)},resolveURL:function(I){return j||(j=o.document.createElement("a")),j.href=I,j.href},hardwareConcurrency:o.navigator&&o.navigator.hardwareConcurrency||4,get devicePixelRatio(){return o.devicePixelRatio},get prefersReducedMotion(){return o.matchMedia?(Z==null&&(Z=o.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches):!1}},re={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ce={supported:!1,testSupport:ke},xe,Te=!1,we,_e=!1;o.document&&(we=o.document.createElement("img"),we.onload=function(){xe&&Ne(xe),xe=null,_e=!0},we.onerror=function(){Te=!0,xe=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ke(R){Te||!we||(_e?Ne(R):xe=R)}function Ne(R){var I=R.createTexture();R.bindTexture(R.TEXTURE_2D,I);try{if(R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,we),R.isContextLost())return;ce.supported=!0}catch{}R.deleteTexture(I),Te=!0}var Ee="01";function ze(){for(var R="1",I="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",W="",se=0;se<10;se++)W+=I[Math.floor(Math.random()*62)];var ge=12*60*60*1e3,Me=[R,Ee,W].join(""),Pe=Date.now()+ge;return{token:Me,tokenExpiresAt:Pe}}var Ce=function(I,W){this._transformRequestFn=I,this._customAccessToken=W,this._createSkuToken()};Ce.prototype._createSkuToken=function(){var I=ze();this._skuToken=I.token,this._skuTokenExpiresAt=I.tokenExpiresAt},Ce.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ce.prototype.transformRequest=function(I,W){return this._transformRequestFn?this._transformRequestFn(I,W)||{url:I}:{url:I}},Ce.prototype.normalizeStyleURL=function(I,W){if(!Oe(I))return I;var se=qe(I);return se.path="/styles/v1"+se.path,this._makeAPIURL(se,this._customAccessToken||W)},Ce.prototype.normalizeGlyphsURL=function(I,W){if(!Oe(I))return I;var se=qe(I);return se.path="/fonts/v1"+se.path,this._makeAPIURL(se,this._customAccessToken||W)},Ce.prototype.normalizeSourceURL=function(I,W){if(!Oe(I))return I;var se=qe(I);return se.path="/v4/"+se.authority+".json",se.params.push("secure"),this._makeAPIURL(se,this._customAccessToken||W)},Ce.prototype.normalizeSpriteURL=function(I,W,se,ge){var Me=qe(I);return Oe(I)?(Me.path="/styles/v1"+Me.path+"/sprite"+W+se,this._makeAPIURL(Me,this._customAccessToken||ge)):(Me.path+=""+W+se,ht(Me))},Ce.prototype.normalizeTileURL=function(I,W){if(this._isSkuTokenExpired()&&this._createSkuToken(),I&&!Oe(I))return I;var se=qe(I),ge=/(\.(png|jpg)\d*)(?=$)/,Me=/^.+\/v4\//,Pe=fe.devicePixelRatio>=2||W===512?"@2x":"",Qe=ce.supported?".webp":"$1";se.path=se.path.replace(ge,""+Pe+Qe),se.path=se.path.replace(Me,"/"),se.path="/v4"+se.path;var dt=this._customAccessToken||ot(se.params)||re.ACCESS_TOKEN;return re.REQUIRE_ACCESS_TOKEN&&dt&&this._skuToken&&se.params.push("sku="+this._skuToken),this._makeAPIURL(se,dt)},Ce.prototype.canonicalizeTileURL=function(I,W){var se="/v4/",ge=/\.[\w]+$/,Me=qe(I);if(!Me.path.match(/(^\/v4\/)/)||!Me.path.match(ge))return I;var Pe="mapbox://tiles/";Pe+=Me.path.replace(se,"");var Qe=Me.params;return W&&(Qe=Qe.filter(function(dt){return!dt.match(/^access_token=/)})),Qe.length&&(Pe+="?"+Qe.join("&")),Pe},Ce.prototype.canonicalizeTileset=function(I,W){for(var se=W?Oe(W):!1,ge=[],Me=0,Pe=I.tiles||[];Me<Pe.length;Me+=1){var Qe=Pe[Me];Ge(Qe)?ge.push(this.canonicalizeTileURL(Qe,se)):ge.push(Qe)}return ge},Ce.prototype._makeAPIURL=function(I,W){var se="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ge=qe(re.API_URL);if(I.protocol=ge.protocol,I.authority=ge.authority,I.protocol==="http"){var Me=I.params.indexOf("secure");Me>=0&&I.params.splice(Me,1)}if(ge.path!=="/"&&(I.path=""+ge.path+I.path),!re.REQUIRE_ACCESS_TOKEN)return ht(I);if(W=W||re.ACCESS_TOKEN,!W)throw new Error("An API access token is required to use Mapbox GL. "+se);if(W[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+se);return I.params=I.params.filter(function(Pe){return Pe.indexOf("access_token")===-1}),I.params.push("access_token="+W),ht(I)};function Oe(R){return R.indexOf("mapbox:")===0}var Le=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ge(R){return Le.test(R)}function rt(R){return R.indexOf("sku=")>0&&Ge(R)}function ot(R){for(var I=0,W=R;I<W.length;I+=1){var se=W[I],ge=se.match(/^access_token=(.*)$/);if(ge)return ge[1]}return null}var $e=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function qe(R){var I=R.match($e);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function ht(R){var I=R.params.length?"?"+R.params.join("&"):"";return R.protocol+"://"+R.authority+R.path+I}var vt="mapbox.eventData";function pt(R){if(!R)return null;var I=R.split(".");if(!I||I.length!==3)return null;try{var W=JSON.parse(ie(I[1]));return W}catch{return null}}var wt=function(I){this.type=I,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};wt.prototype.getStorageKey=function(I){var W=pt(re.ACCESS_TOKEN),se="";return W&&W.u?se=J(W.u):se=re.ACCESS_TOKEN||"",I?vt+"."+I+":"+se:vt+":"+se},wt.prototype.fetchEventData=function(){var I=te("localStorage"),W=this.getStorageKey(),se=this.getStorageKey("uuid");if(I)try{var ge=o.localStorage.getItem(W);ge&&(this.eventData=JSON.parse(ge));var Me=o.localStorage.getItem(se);Me&&(this.anonId=Me)}catch{B("Unable to read from LocalStorage")}},wt.prototype.saveEventData=function(){var I=te("localStorage"),W=this.getStorageKey(),se=this.getStorageKey("uuid");if(I)try{o.localStorage.setItem(se,this.anonId),Object.keys(this.eventData).length>=1&&o.localStorage.setItem(W,JSON.stringify(this.eventData))}catch{B("Unable to write to LocalStorage")}},wt.prototype.processRequests=function(I){},wt.prototype.postEvent=function(I,W,se,ge){var Me=this;if(re.EVENTS_URL){var Pe=qe(re.EVENTS_URL);Pe.params.push("access_token="+(ge||re.ACCESS_TOKEN||""));var Qe={event:this.type,created:new Date(I).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:T,skuId:Ee,userId:this.anonId},dt=W?x(Qe,W):Qe,Mt={url:ht(Pe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([dt])};this.pendingRequest=Nt(Mt,function(_t){Me.pendingRequest=null,se(_t),Me.saveEventData(),Me.processRequests(ge)})}},wt.prototype.queueRequest=function(I,W){this.queue.push(I),this.processRequests(W)};var Et=function(R){function I(){R.call(this,"map.load"),this.success={},this.skuToken=""}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.postMapLoadEvent=function(se,ge,Me,Pe){this.skuToken=Me,(re.EVENTS_URL&&Pe||re.ACCESS_TOKEN&&Array.isArray(se)&&se.some(function(Qe){return Oe(Qe)||Ge(Qe)}))&&this.queueRequest({id:ge,timestamp:Date.now()},Pe)},I.prototype.processRequests=function(se){var ge=this;if(!(this.pendingRequest||this.queue.length===0)){var Me=this.queue.shift(),Pe=Me.id,Qe=Me.timestamp;Pe&&this.success[Pe]||(this.anonId||this.fetchEventData(),s(this.anonId)||(this.anonId=C()),this.postEvent(Qe,{skuToken:this.skuToken},function(dt){dt||Pe&&(ge.success[Pe]=!0)},se))}},I}(wt),nt=function(R){function I(W){R.call(this,"appUserTurnstile"),this._customAccessToken=W}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.postTurnstileEvent=function(se,ge){re.EVENTS_URL&&re.ACCESS_TOKEN&&Array.isArray(se)&&se.some(function(Me){return Oe(Me)||Ge(Me)})&&this.queueRequest(Date.now(),ge)},I.prototype.processRequests=function(se){var ge=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var Me=pt(re.ACCESS_TOKEN),Pe=Me?Me.u:re.ACCESS_TOKEN,Qe=Pe!==this.eventData.tokenU;s(this.anonId)||(this.anonId=C(),Qe=!0);var dt=this.queue.shift();if(this.eventData.lastSuccess){var Mt=new Date(this.eventData.lastSuccess),_t=new Date(dt),Yt=(dt-this.eventData.lastSuccess)/(24*60*60*1e3);Qe=Qe||Yt>=1||Yt<-1||Mt.getDate()!==_t.getDate()}else Qe=!0;if(!Qe)return this.processRequests();this.postEvent(dt,{"enabled.telemetry":!1},function(rr){rr||(ge.eventData.lastSuccess=dt,ge.eventData.tokenU=Pe)},se)}},I}(wt),Fe=new nt,We=Fe.postTurnstileEvent.bind(Fe),Ze=new Et,Ye=Ze.postMapLoadEvent.bind(Ze),Ie="mapbox-tiles",De=500,je=50,Re=1e3*60*7,pe;function be(){o.caches&&!pe&&(pe=o.caches.open(Ie))}var Ue;function et(R,I){if(Ue===void 0)try{new Response(new ReadableStream),Ue=!0}catch{Ue=!1}Ue?I(R.body):R.blob().then(I)}function st(R,I,W){if(be(),!!pe){var se={status:I.status,statusText:I.statusText,headers:new o.Headers};I.headers.forEach(function(Pe,Qe){return se.headers.set(Qe,Pe)});var ge=ne(I.headers.get("Cache-Control")||"");if(!ge["no-store"]){ge["max-age"]&&se.headers.set("Expires",new Date(W+ge["max-age"]*1e3).toUTCString());var Me=new Date(se.headers.get("Expires")).getTime()-W;Me<Re||et(I,function(Pe){var Qe=new o.Response(Pe,se);be(),pe&&pe.then(function(dt){return dt.put(lt(R.url),Qe)}).catch(function(dt){return B(dt.message)})})}}}function lt(R){var I=R.indexOf("?");return I<0?R:R.slice(0,I)}function Gt(R,I){if(be(),!pe)return I(null);var W=lt(R.url);pe.then(function(se){se.match(W).then(function(ge){var Me=Zt(ge);se.delete(W),Me&&se.put(W,ge.clone()),I(null,ge,Me)}).catch(I)}).catch(I)}function Zt(R){if(!R)return!1;var I=new Date(R.headers.get("Expires")||0),W=ne(R.headers.get("Cache-Control")||"");return I>Date.now()&&!W["no-cache"]}var Tt=1/0;function It(R){Tt++,Tt>je&&(R.getActor().send("enforceCacheSizeLimit",De),Tt=0)}function Xt(R){be(),pe&&pe.then(function(I){I.keys().then(function(W){for(var se=0;se<W.length-R;se++)I.delete(W[se])})})}function gr(R){var I=o.caches.delete(Ie);R&&I.catch(R).then(function(){return R()})}function gt(R,I){De=R,je=I}var jt;function Qt(){return jt==null&&(jt=o.OffscreenCanvas&&new o.OffscreenCanvas(1,1).getContext("2d")&&typeof o.createImageBitmap=="function"),jt}var mr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(mr);var or=function(R){function I(W,se,ge){se===401&&Ge(ge)&&(W+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),R.call(this,W),this.status=se,this.url=ge,this.name=this.constructor.name,this.message=W}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),mt=$()?function(){return self.worker&&self.worker.referrer}:function(){return(o.location.protocol==="blob:"?o.parent:o).location.href},ut=function(R){return/^file:/.test(R)||/^file:/.test(mt())&&!/^\w+:/.test(R)};function bt(R,I){var W=new o.AbortController,se=new o.Request(R.url,{method:R.method||"GET",body:R.body,credentials:R.credentials,headers:R.headers,referrer:mt(),signal:W.signal}),ge=!1,Me=!1,Pe=rt(se.url);R.type==="json"&&se.headers.set("Accept","application/json");var Qe=function(Mt,_t,Yt){if(!Me){if(Mt&&Mt.message!=="SecurityError"&&B(Mt),_t&&Yt)return dt(_t);var rr=Date.now();o.fetch(se).then(function(qt){if(qt.ok){var br=Pe?qt.clone():null;return dt(qt,br,rr)}else return I(new or(qt.statusText,qt.status,R.url))}).catch(function(qt){qt.code!==20&&I(new Error(qt.message))})}},dt=function(Mt,_t,Yt){(R.type==="arrayBuffer"?Mt.arrayBuffer():R.type==="json"?Mt.json():Mt.text()).then(function(rr){Me||(_t&&Yt&&st(se,_t,Yt),ge=!0,I(null,rr,Mt.headers.get("Cache-Control"),Mt.headers.get("Expires")))}).catch(function(rr){Me||I(new Error(rr.message))})};return Pe?Gt(se,Qe):Qe(null,null),{cancel:function(){Me=!0,ge||W.abort()}}}function St(R,I){var W=new o.XMLHttpRequest;W.open(R.method||"GET",R.url,!0),R.type==="arrayBuffer"&&(W.responseType="arraybuffer");for(var se in R.headers)W.setRequestHeader(se,R.headers[se]);return R.type==="json"&&(W.responseType="text",W.setRequestHeader("Accept","application/json")),W.withCredentials=R.credentials==="include",W.onerror=function(){I(new Error(W.statusText))},W.onload=function(){if((W.status>=200&&W.status<300||W.status===0)&&W.response!==null){var ge=W.response;if(R.type==="json")try{ge=JSON.parse(W.response)}catch(Me){return I(Me)}I(null,ge,W.getResponseHeader("Cache-Control"),W.getResponseHeader("Expires"))}else I(new or(W.statusText,W.status,R.url))},W.send(R.body),{cancel:function(){return W.abort()}}}var Pt=function(R,I){if(!ut(R.url)){if(o.fetch&&o.Request&&o.AbortController&&o.Request.prototype.hasOwnProperty("signal"))return bt(R,I);if($()&&self.worker&&self.worker.actor){var W=!0;return self.worker.actor.send("getResource",R,I,void 0,W)}}return St(R,I)},Ht=function(R,I){return Pt(x(R,{type:"json"}),I)},Bt=function(R,I){return Pt(x(R,{type:"arrayBuffer"}),I)},Nt=function(R,I){return Pt(x(R,{method:"POST"}),I)};function Kt(R){var I=o.document.createElement("a");return I.href=R,I.protocol===o.document.location.protocol&&I.host===o.document.location.host}var fr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function cr(R,I,W,se){var ge=new o.Image,Me=o.URL;ge.onload=function(){I(null,ge),Me.revokeObjectURL(ge.src),ge.onload=null,o.requestAnimationFrame(function(){ge.src=fr})},ge.onerror=function(){return I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Pe=new o.Blob([new Uint8Array(R)],{type:"image/png"});ge.cacheControl=W,ge.expires=se,ge.src=R.byteLength?Me.createObjectURL(Pe):fr}function dr(R,I){var W=new o.Blob([new Uint8Array(R)],{type:"image/png"});o.createImageBitmap(W).then(function(se){I(null,se)}).catch(function(se){I(new Error("Could not load image because of "+se.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var Xe,He,zt=function(){Xe=[],He=0};zt();var Rt=function(R,I){if(ce.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),He>=re.MAX_PARALLEL_IMAGE_REQUESTS){var W={requestParameters:R,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return Xe.push(W),W}He++;var se=!1,ge=function(){if(!se)for(se=!0,He--;Xe.length&&He<re.MAX_PARALLEL_IMAGE_REQUESTS;){var Pe=Xe.shift(),Qe=Pe.requestParameters,dt=Pe.callback,Mt=Pe.cancelled;Mt||(Pe.cancel=Rt(Qe,dt).cancel)}},Me=Bt(R,function(Pe,Qe,dt,Mt){ge(),Pe?I(Pe):Qe&&(Qt()?dr(Qe,I):cr(Qe,I,dt,Mt))});return{cancel:function(){Me.cancel(),ge()}}},Jt=function(R,I){var W=o.document.createElement("video");W.muted=!0,W.onloadstart=function(){I(null,W)};for(var se=0;se<R.length;se++){var ge=o.document.createElement("source");Kt(R[se])||(W.crossOrigin="Anonymous"),ge.src=R[se],W.appendChild(ge)}return{cancel:function(){}}};function sr(R,I,W){var se=W[R]&&W[R].indexOf(I)!==-1;se||(W[R]=W[R]||[],W[R].push(I))}function ur(R,I,W){if(W&&W[R]){var se=W[R].indexOf(I);se!==-1&&W[R].splice(se,1)}}var er=function(I,W){W===void 0&&(W={}),x(this,W),this.type=I},Ft=function(R){function I(W,se){se===void 0&&(se={}),R.call(this,"error",x({error:W},se))}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I}(er),ir=function(){};ir.prototype.on=function(I,W){return this._listeners=this._listeners||{},sr(I,W,this._listeners),this},ir.prototype.off=function(I,W){return ur(I,W,this._listeners),ur(I,W,this._oneTimeListeners),this},ir.prototype.once=function(I,W){return this._oneTimeListeners=this._oneTimeListeners||{},sr(I,W,this._oneTimeListeners),this},ir.prototype.fire=function(I,W){typeof I=="string"&&(I=new er(I,W||{}));var se=I.type;if(this.listens(se)){I.target=this;for(var ge=this._listeners&&this._listeners[se]?this._listeners[se].slice():[],Me=0,Pe=ge;Me<Pe.length;Me+=1){var Qe=Pe[Me];Qe.call(this,I)}for(var dt=this._oneTimeListeners&&this._oneTimeListeners[se]?this._oneTimeListeners[se].slice():[],Mt=0,_t=dt;Mt<_t.length;Mt+=1){var Yt=_t[Mt];ur(se,Yt,this._oneTimeListeners),Yt.call(this,I)}var rr=this._eventedParent;rr&&(x(I,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),rr.fire(I))}else I instanceof Ft&&console.error(I.error);return this},ir.prototype.listens=function(I){return this._listeners&&this._listeners[I]&&this._listeners[I].length>0||this._oneTimeListeners&&this._oneTimeListeners[I]&&this._oneTimeListeners[I].length>0||this._eventedParent&&this._eventedParent.listens(I)},ir.prototype.setEventedParent=function(I,W){return this._eventedParent=I,this._eventedParentData=W,this};var hr=8,xr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},vr={"*":{type:"source"}},Vr=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],_r={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Rr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},nn={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},en={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},An={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},wn={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Tr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},kr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Wr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},zr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sn={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},un={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Mn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ln={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Un={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ai={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yi={type:"array",value:"*"},bi={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Hn={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Kn={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},yr={type:"array",value:"*",minimum:1},qr={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Kr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],hn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},zn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},xn={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Tn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},On={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Jn={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},hi={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ri={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Er={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Or={"*":{type:"string"}},Ar={$version:hr,$root:xr,sources:vr,source:Vr,source_vector:_r,source_raster:Rr,source_raster_dem:nn,source_geojson:en,source_video:An,source_image:wn,layer:Tr,layout:kr,layout_background:Wr,layout_fill:zr,layout_circle:sn,layout_heatmap:un,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Mn,layout_symbol:Ln,layout_raster:Un,layout_hillshade:ai,filter:yi,filter_operator:bi,geometry_type:Hn,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Kn,expression:yr,light:qr,paint:Kr,paint_fill:hn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:zn,paint_circle:xn,paint_heatmap:Tn,paint_symbol:On,paint_raster:Jn,paint_hillshade:hi,paint_background:Ri,transition:Er,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Or},Fr=function(I,W,se,ge){this.message=(I?I+": ":"")+se,ge&&(this.identifier=ge),W!=null&&W.__line__&&(this.line=W.__line__)};function yn(R){var I=R.key,W=R.value;return W?[new Fr(I,W,"constants have been deprecated as of v8")]:[]}function Pn(R){for(var I=[],W=arguments.length-1;W-- >0;)I[W]=arguments[W+1];for(var se=0,ge=I;se<ge.length;se+=1){var Me=ge[se];for(var Pe in Me)R[Pe]=Me[Pe]}return R}function pn(R){return R instanceof Number||R instanceof String||R instanceof Boolean?R.valueOf():R}function ln(R){if(Array.isArray(R))return R.map(ln);if(R instanceof Object&&!(R instanceof Number||R instanceof String||R instanceof Boolean)){var I={};for(var W in R)I[W]=ln(R[W]);return I}return pn(R)}var Sr=function(R){function I(W,se){R.call(this,se),this.message=se,this.key=W}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I}(Error),Zr=function(I,W){W===void 0&&(W=[]),this.parent=I,this.bindings={};for(var se=0,ge=W;se<ge.length;se+=1){var Me=ge[se],Pe=Me[0],Qe=Me[1];this.bindings[Pe]=Qe}};Zr.prototype.concat=function(I){return new Zr(this,I)},Zr.prototype.get=function(I){if(this.bindings[I])return this.bindings[I];if(this.parent)return this.parent.get(I);throw new Error(I+" not found in scope.")},Zr.prototype.has=function(I){return this.bindings[I]?!0:this.parent?this.parent.has(I):!1};var Hr={kind:"null"},$r={kind:"number"},bn={kind:"string"},kn={kind:"boolean"},En={kind:"color"},Nn={kind:"object"},Fn={kind:"value"},vi={kind:"error"},si={kind:"collator"},gi={kind:"formatted"},Li={kind:"resolvedImage"};function ma(R,I){return{kind:"array",itemType:R,N:I}}function ia(R){if(R.kind==="array"){var I=ia(R.itemType);return typeof R.N=="number"?"array<"+I+", "+R.N+">":R.itemType.kind==="value"?"array":"array<"+I+">"}else return R.kind}var Wo=[Hr,$r,bn,kn,En,gi,Nn,ma(Fn),Li];function Fo(R,I){if(I.kind==="error")return null;if(R.kind==="array"){if(I.kind==="array"&&(I.N===0&&I.itemType.kind==="value"||!Fo(R.itemType,I.itemType))&&(typeof R.N!="number"||R.N===I.N))return null}else{if(R.kind===I.kind)return null;if(R.kind==="value")for(var W=0,se=Wo;W<se.length;W+=1){var ge=se[W];if(!Fo(ge,I))return null}}return"Expected "+ia(R)+" but found "+ia(I)+" instead."}function ho(R,I){return I.some(function(W){return W.kind===R.kind})}function zl(R,I){return I.some(function(W){return W==="null"?R===null:W==="array"?Array.isArray(R):W==="object"?R&&!Array.isArray(R)&&typeof R=="object":W===typeof R})}var Mf=E(function(R,I){var W={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function se(Mt){return Mt=Math.round(Mt),Mt<0?0:Mt>255?255:Mt}function ge(Mt){return Mt<0?0:Mt>1?1:Mt}function Me(Mt){return Mt[Mt.length-1]==="%"?se(parseFloat(Mt)/100*255):se(parseInt(Mt))}function Pe(Mt){return Mt[Mt.length-1]==="%"?ge(parseFloat(Mt)/100):ge(parseFloat(Mt))}function Qe(Mt,_t,Yt){return Yt<0?Yt+=1:Yt>1&&(Yt-=1),Yt*6<1?Mt+(_t-Mt)*Yt*6:Yt*2<1?_t:Yt*3<2?Mt+(_t-Mt)*(2/3-Yt)*6:Mt}function dt(Mt){var _t=Mt.replace(/ /g,"").toLowerCase();if(_t in W)return W[_t].slice();if(_t[0]==="#"){if(_t.length===4){var Yt=parseInt(_t.substr(1),16);return Yt>=0&&Yt<=4095?[(Yt&3840)>>4|(Yt&3840)>>8,Yt&240|(Yt&240)>>4,Yt&15|(Yt&15)<<4,1]:null}else if(_t.length===7){var Yt=parseInt(_t.substr(1),16);return Yt>=0&&Yt<=16777215?[(Yt&16711680)>>16,(Yt&65280)>>8,Yt&255,1]:null}return null}var rr=_t.indexOf("("),qt=_t.indexOf(")");if(rr!==-1&&qt+1===_t.length){var br=_t.substr(0,rr),Br=_t.substr(rr+1,qt-(rr+1)).split(","),fn=1;switch(br){case"rgba":if(Br.length!==4)return null;fn=Pe(Br.pop());case"rgb":return Br.length!==3?null:[Me(Br[0]),Me(Br[1]),Me(Br[2]),fn];case"hsla":if(Br.length!==4)return null;fn=Pe(Br.pop());case"hsl":if(Br.length!==3)return null;var rn=(parseFloat(Br[0])%360+360)%360/360,Cn=Pe(Br[1]),gn=Pe(Br[2]),Sn=gn<=.5?gn*(Cn+1):gn+Cn-gn*Cn,Dn=gn*2-Sn;return[se(Qe(Dn,Sn,rn+1/3)*255),se(Qe(Dn,Sn,rn)*255),se(Qe(Dn,Sn,rn-1/3)*255),fn];default:return null}}return null}try{I.parseCSSColor=dt}catch{}}),lc=Mf.parseCSSColor,ta=function(I,W,se,ge){ge===void 0&&(ge=1),this.r=I,this.g=W,this.b=se,this.a=ge};ta.parse=function(I){if(I){if(I instanceof ta)return I;if(typeof I=="string"){var W=lc(I);if(W)return new ta(W[0]/255*W[3],W[1]/255*W[3],W[2]/255*W[3],W[3])}}},ta.prototype.toString=function(){var I=this.toArray(),W=I[0],se=I[1],ge=I[2],Me=I[3];return"rgba("+Math.round(W)+","+Math.round(se)+","+Math.round(ge)+","+Me+")"},ta.prototype.toArray=function(){var I=this,W=I.r,se=I.g,ge=I.b,Me=I.a;return Me===0?[0,0,0,0]:[W*255/Me,se*255/Me,ge*255/Me,Me]},ta.black=new ta(0,0,0,1),ta.white=new ta(1,1,1,1),ta.transparent=new ta(0,0,0,0),ta.red=new ta(1,0,0,1);var pu=function(I,W,se){I?this.sensitivity=W?"variant":"case":this.sensitivity=W?"accent":"base",this.locale=se,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};pu.prototype.compare=function(I,W){return this.collator.compare(I,W)},pu.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ef=function(I,W,se,ge,Me){this.text=I,this.image=W,this.scale=se,this.fontStack=ge,this.textColor=Me},oo=function(I){this.sections=I};oo.fromString=function(I){return new oo([new Ef(I,null,null,null,null)])},oo.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(I){return I.text.length!==0||I.image&&I.image.name.length!==0})},oo.factory=function(I){return I instanceof oo?I:oo.fromString(I)},oo.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(I){return I.text}).join("")},oo.prototype.serialize=function(){for(var I=["format"],W=0,se=this.sections;W<se.length;W+=1){var ge=se[W];if(ge.image){I.push(["image",ge.image.name]);continue}I.push(ge.text);var Me={};ge.fontStack&&(Me["text-font"]=["literal",ge.fontStack.split(",")]),ge.scale&&(Me["font-scale"]=ge.scale),ge.textColor&&(Me["text-color"]=["rgba"].concat(ge.textColor.toArray())),I.push(Me)}return I};var Po=function(I){this.name=I.name,this.available=I.available};Po.prototype.toString=function(){return this.name},Po.fromString=function(I){return I?new Po({name:I,available:!1}):null},Po.prototype.serialize=function(){return["image",this.name]};function Ol(R,I,W,se){if(!(typeof R=="number"&&R>=0&&R<=255&&typeof I=="number"&&I>=0&&I<=255&&typeof W=="number"&&W>=0&&W<=255)){var ge=typeof se=="number"?[R,I,W,se]:[R,I,W];return"Invalid rgba value ["+ge.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof se>"u"||typeof se=="number"&&se>=0&&se<=1?null:"Invalid rgba value ["+[R,I,W,se].join(", ")+"]: 'a' must be between 0 and 1."}function ju(R){if(R===null)return!0;if(typeof R=="string")return!0;if(typeof R=="boolean")return!0;if(typeof R=="number")return!0;if(R instanceof ta)return!0;if(R instanceof pu)return!0;if(R instanceof oo)return!0;if(R instanceof Po)return!0;if(Array.isArray(R)){for(var I=0,W=R;I<W.length;I+=1){var se=W[I];if(!ju(se))return!1}return!0}else if(typeof R=="object"){for(var ge in R)if(!ju(R[ge]))return!1;return!0}else return!1}function Ya(R){if(R===null)return Hr;if(typeof R=="string")return bn;if(typeof R=="boolean")return kn;if(typeof R=="number")return $r;if(R instanceof ta)return En;if(R instanceof pu)return si;if(R instanceof oo)return gi;if(R instanceof Po)return Li;if(Array.isArray(R)){for(var I=R.length,W,se=0,ge=R;se<ge.length;se+=1){var Me=ge[se],Pe=Ya(Me);if(!W)W=Pe;else{if(W===Pe)continue;W=Fn;break}}return ma(W||Fn,I)}else return Nn}function Fl(R){var I=typeof R;return R===null?"":I==="string"||I==="number"||I==="boolean"?String(R):R instanceof ta||R instanceof oo||R instanceof Po?R.toString():JSON.stringify(R)}var ja=function(I,W){this.type=I,this.value=W};ja.parse=function(I,W){if(I.length!==2)return W.error("'literal' expression requires exactly one argument, but found "+(I.length-1)+" instead.");if(!ju(I[1]))return W.error("invalid value");var se=I[1],ge=Ya(se),Me=W.expectedType;return ge.kind==="array"&&ge.N===0&&Me&&Me.kind==="array"&&(typeof Me.N!="number"||Me.N===0)&&(ge=Me),new ja(ge,se)},ja.prototype.evaluate=function(){return this.value},ja.prototype.eachChild=function(){},ja.prototype.outputDefined=function(){return!0},ja.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ta?["rgba"].concat(this.value.toArray()):this.value instanceof oo?this.value.serialize():this.value};var qa=function(I){this.name="ExpressionEvaluationError",this.message=I};qa.prototype.toJSON=function(){return this.message};var Bl={string:bn,number:$r,boolean:kn,object:Nn},vo=function(I,W){this.type=I,this.args=W};vo.parse=function(I,W){if(I.length<2)return W.error("Expected at least one argument.");var se=1,ge,Me=I[0];if(Me==="array"){var Pe;if(I.length>2){var Qe=I[1];if(typeof Qe!="string"||!(Qe in Bl)||Qe==="object")return W.error('The item type argument of "array" must be one of string, number, boolean',1);Pe=Bl[Qe],se++}else Pe=Fn;var dt;if(I.length>3){if(I[2]!==null&&(typeof I[2]!="number"||I[2]<0||I[2]!==Math.floor(I[2])))return W.error('The length argument to "array" must be a positive integer literal',2);dt=I[2],se++}ge=ma(Pe,dt)}else ge=Bl[Me];for(var Mt=[];se<I.length;se++){var _t=W.parse(I[se],se,Fn);if(!_t)return null;Mt.push(_t)}return new vo(ge,Mt)},vo.prototype.evaluate=function(I){for(var W=0;W<this.args.length;W++){var se=this.args[W].evaluate(I),ge=Fo(this.type,Ya(se));if(ge){if(W===this.args.length-1)throw new qa("Expected value to be of type "+ia(this.type)+", but found "+ia(Ya(se))+" instead.")}else return se}return null},vo.prototype.eachChild=function(I){this.args.forEach(I)},vo.prototype.outputDefined=function(){return this.args.every(function(I){return I.outputDefined()})},vo.prototype.serialize=function(){var I=this.type,W=[I.kind];if(I.kind==="array"){var se=I.itemType;if(se.kind==="string"||se.kind==="number"||se.kind==="boolean"){W.push(se.kind);var ge=I.N;(typeof ge=="number"||this.args.length>1)&&W.push(ge)}}return W.concat(this.args.map(function(Me){return Me.serialize()}))};var po=function(I){this.type=gi,this.sections=I};po.parse=function(I,W){if(I.length<2)return W.error("Expected at least one argument.");var se=I[1];if(!Array.isArray(se)&&typeof se=="object")return W.error("First argument must be an image or text section.");for(var ge=[],Me=!1,Pe=1;Pe<=I.length-1;++Pe){var Qe=I[Pe];if(Me&&typeof Qe=="object"&&!Array.isArray(Qe)){Me=!1;var dt=null;if(Qe["font-scale"]&&(dt=W.parse(Qe["font-scale"],1,$r),!dt))return null;var Mt=null;if(Qe["text-font"]&&(Mt=W.parse(Qe["text-font"],1,ma(bn)),!Mt))return null;var _t=null;if(Qe["text-color"]&&(_t=W.parse(Qe["text-color"],1,En),!_t))return null;var Yt=ge[ge.length-1];Yt.scale=dt,Yt.font=Mt,Yt.textColor=_t}else{var rr=W.parse(I[Pe],1,Fn);if(!rr)return null;var qt=rr.type.kind;if(qt!=="string"&&qt!=="value"&&qt!=="null"&&qt!=="resolvedImage")return W.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Me=!0,ge.push({content:rr,scale:null,font:null,textColor:null})}}return new po(ge)},po.prototype.evaluate=function(I){var W=function(se){var ge=se.content.evaluate(I);return Ya(ge)===Li?new Ef("",ge,null,null,null):new Ef(Fl(ge),null,se.scale?se.scale.evaluate(I):null,se.font?se.font.evaluate(I).join(","):null,se.textColor?se.textColor.evaluate(I):null)};return new oo(this.sections.map(W))},po.prototype.eachChild=function(I){for(var W=0,se=this.sections;W<se.length;W+=1){var ge=se[W];I(ge.content),ge.scale&&I(ge.scale),ge.font&&I(ge.font),ge.textColor&&I(ge.textColor)}},po.prototype.outputDefined=function(){return!1},po.prototype.serialize=function(){for(var I=["format"],W=0,se=this.sections;W<se.length;W+=1){var ge=se[W];I.push(ge.content.serialize());var Me={};ge.scale&&(Me["font-scale"]=ge.scale.serialize()),ge.font&&(Me["text-font"]=ge.font.serialize()),ge.textColor&&(Me["text-color"]=ge.textColor.serialize()),I.push(Me)}return I};var Yo=function(I){this.type=Li,this.input=I};Yo.parse=function(I,W){if(I.length!==2)return W.error("Expected two arguments.");var se=W.parse(I[1],1,bn);return se?new Yo(se):W.error("No image name provided.")},Yo.prototype.evaluate=function(I){var W=this.input.evaluate(I),se=Po.fromString(W);return se&&I.availableImages&&(se.available=I.availableImages.indexOf(W)>-1),se},Yo.prototype.eachChild=function(I){I(this.input)},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){return["image",this.input.serialize()]};var uc={"to-boolean":kn,"to-color":En,"to-number":$r,"to-string":bn},Bo=function(I,W){this.type=I,this.args=W};Bo.parse=function(I,W){if(I.length<2)return W.error("Expected at least one argument.");var se=I[0];if((se==="to-boolean"||se==="to-string")&&I.length!==2)return W.error("Expected one argument.");for(var ge=uc[se],Me=[],Pe=1;Pe<I.length;Pe++){var Qe=W.parse(I[Pe],Pe,Fn);if(!Qe)return null;Me.push(Qe)}return new Bo(ge,Me)},Bo.prototype.evaluate=function(I){if(this.type.kind==="boolean")return!!this.args[0].evaluate(I);if(this.type.kind==="color"){for(var W,se,ge=0,Me=this.args;ge<Me.length;ge+=1){var Pe=Me[ge];if(W=Pe.evaluate(I),se=null,W instanceof ta)return W;if(typeof W=="string"){var Qe=I.parseColor(W);if(Qe)return Qe}else if(Array.isArray(W)&&(W.length<3||W.length>4?se="Invalid rbga value "+JSON.stringify(W)+": expected an array containing either three or four numeric values.":se=Ol(W[0],W[1],W[2],W[3]),!se))return new ta(W[0]/255,W[1]/255,W[2]/255,W[3])}throw new qa(se||"Could not parse color from value '"+(typeof W=="string"?W:String(JSON.stringify(W)))+"'")}else if(this.type.kind==="number"){for(var dt=null,Mt=0,_t=this.args;Mt<_t.length;Mt+=1){var Yt=_t[Mt];if(dt=Yt.evaluate(I),dt===null)return 0;var rr=Number(dt);if(!isNaN(rr))return rr}throw new qa("Could not convert "+JSON.stringify(dt)+" to number.")}else return this.type.kind==="formatted"?oo.fromString(Fl(this.args[0].evaluate(I))):this.type.kind==="resolvedImage"?Po.fromString(Fl(this.args[0].evaluate(I))):Fl(this.args[0].evaluate(I))},Bo.prototype.eachChild=function(I){this.args.forEach(I)},Bo.prototype.outputDefined=function(){return this.args.every(function(I){return I.outputDefined()})},Bo.prototype.serialize=function(){if(this.type.kind==="formatted")return new po([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Yo(this.args[0]).serialize();var I=["to-"+this.type.kind];return this.eachChild(function(W){I.push(W.serialize())}),I};var ph=["Unknown","Point","LineString","Polygon"],Ms=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ms.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ms.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ph[this.feature.type]:this.feature.type:null},Ms.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ms.prototype.canonicalID=function(){return this.canonical},Ms.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ms.prototype.parseColor=function(I){var W=this._parseColorCache[I];return W||(W=this._parseColorCache[I]=ta.parse(I)),W};var so=function(I,W,se,ge){this.name=I,this.type=W,this._evaluate=se,this.args=ge};so.prototype.evaluate=function(I){return this._evaluate(I,this.args)},so.prototype.eachChild=function(I){this.args.forEach(I)},so.prototype.outputDefined=function(){return!1},so.prototype.serialize=function(){return[this.name].concat(this.args.map(function(I){return I.serialize()}))},so.parse=function(I,W){var se,ge=I[0],Me=so.definitions[ge];if(!Me)return W.error('Unknown expression "'+ge+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Pe=Array.isArray(Me)?Me[0]:Me.type,Qe=Array.isArray(Me)?[[Me[1],Me[2]]]:Me.overloads,dt=Qe.filter(function(Ti){var Si=Ti[0];return!Array.isArray(Si)||Si.length===I.length-1}),Mt=null,_t=0,Yt=dt;_t<Yt.length;_t+=1){var rr=Yt[_t],qt=rr[0],br=rr[1];Mt=new Ss(W.registry,W.path,null,W.scope);for(var Br=[],fn=!1,rn=1;rn<I.length;rn++){var Cn=I[rn],gn=Array.isArray(qt)?qt[rn-1]:qt.type,Sn=Mt.parse(Cn,1+Br.length,gn);if(!Sn){fn=!0;break}Br.push(Sn)}if(!fn){if(Array.isArray(qt)&&qt.length!==Br.length){Mt.error("Expected "+qt.length+" arguments, but found "+Br.length+" instead.");continue}for(var Dn=0;Dn<Br.length;Dn++){var Wn=Array.isArray(qt)?qt[Dn]:qt.type,ni=Br[Dn];Mt.concat(Dn+1).checkSubtype(Wn,ni.type)}if(Mt.errors.length===0)return new so(ge,Pe,br,Br)}}if(dt.length===1)(se=W.errors).push.apply(se,Mt.errors);else{for(var ei=dt.length?dt:Qe,wi=ei.map(function(Ti){var Si=Ti[0];return Sf(Si)}).join(" | "),pi=[],xi=1;xi<I.length;xi++){var Bi=W.parse(I[xi],1+pi.length);if(!Bi)return null;pi.push(ia(Bi.type))}W.error("Expected arguments of type "+wi+", but found ("+pi.join(", ")+") instead.")}return null},so.register=function(I,W){so.definitions=W;for(var se in W)I[se]=so};function Sf(R){return Array.isArray(R)?"("+R.map(ia).join(", ")+")":"("+ia(R.type)+"...)"}var Js=function(I,W,se){this.type=si,this.locale=se,this.caseSensitive=I,this.diacriticSensitive=W};Js.parse=function(I,W){if(I.length!==2)return W.error("Expected one argument.");var se=I[1];if(typeof se!="object"||Array.isArray(se))return W.error("Collator options argument must be an object.");var ge=W.parse(se["case-sensitive"]===void 0?!1:se["case-sensitive"],1,kn);if(!ge)return null;var Me=W.parse(se["diacritic-sensitive"]===void 0?!1:se["diacritic-sensitive"],1,kn);if(!Me)return null;var Pe=null;return se.locale&&(Pe=W.parse(se.locale,1,bn),!Pe)?null:new Js(ge,Me,Pe)},Js.prototype.evaluate=function(I){return new pu(this.caseSensitive.evaluate(I),this.diacriticSensitive.evaluate(I),this.locale?this.locale.evaluate(I):null)},Js.prototype.eachChild=function(I){I(this.caseSensitive),I(this.diacriticSensitive),this.locale&&I(this.locale)},Js.prototype.outputDefined=function(){return!1},Js.prototype.serialize=function(){var I={};return I["case-sensitive"]=this.caseSensitive.serialize(),I["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(I.locale=this.locale.serialize()),["collator",I]};var Es=8192;function Cf(R,I){R[0]=Math.min(R[0],I[0]),R[1]=Math.min(R[1],I[1]),R[2]=Math.max(R[2],I[0]),R[3]=Math.max(R[3],I[1])}function fc(R){return(180+R)/360}function gh(R){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+R*Math.PI/360)))/360}function Ku(R,I){return!(R[0]<=I[0]||R[2]>=I[2]||R[1]<=I[1]||R[3]>=I[3])}function yh(R,I){var W=fc(R[0]),se=gh(R[1]),ge=Math.pow(2,I.z);return[Math.round(W*ge*Es),Math.round(se*ge*Es)]}function mh(R,I,W){var se=R[0]-I[0],ge=R[1]-I[1],Me=R[0]-W[0],Pe=R[1]-W[1];return se*Pe-Me*ge===0&&se*Me<=0&&ge*Pe<=0}function xh(R,I,W){return I[1]>R[1]!=W[1]>R[1]&&R[0]<(W[0]-I[0])*(R[1]-I[1])/(W[1]-I[1])+I[0]}function Lf(R,I){for(var W=!1,se=0,ge=I.length;se<ge;se++)for(var Me=I[se],Pe=0,Qe=Me.length;Pe<Qe-1;Pe++){if(mh(R,Me[Pe],Me[Pe+1]))return!1;xh(R,Me[Pe],Me[Pe+1])&&(W=!W)}return W}function bh(R,I){for(var W=0;W<I.length;W++)if(Lf(R,I[W]))return!0;return!1}function wh(R,I){return R[0]*I[1]-R[1]*I[0]}function cc(R,I,W,se){var ge=R[0]-W[0],Me=R[1]-W[1],Pe=I[0]-W[0],Qe=I[1]-W[1],dt=se[0]-W[0],Mt=se[1]-W[1],_t=ge*Mt-dt*Me,Yt=Pe*Mt-dt*Qe;return _t>0&&Yt<0||_t<0&&Yt>0}function hc(R,I,W,se){var ge=[I[0]-R[0],I[1]-R[1]],Me=[se[0]-W[0],se[1]-W[1]];return wh(Me,ge)===0?!1:!!(cc(R,I,W,se)&&cc(W,se,R,I))}function yl(R,I,W){for(var se=0,ge=W;se<ge.length;se+=1)for(var Me=ge[se],Pe=0;Pe<Me.length-1;++Pe)if(hc(R,I,Me[Pe],Me[Pe+1]))return!0;return!1}function Nl(R,I){for(var W=0;W<R.length;++W)if(!Lf(R[W],I))return!1;for(var se=0;se<R.length-1;++se)if(yl(R[se],R[se+1],I))return!1;return!0}function gu(R,I){for(var W=0;W<I.length;W++)if(Nl(R,I[W]))return!0;return!1}function yu(R,I,W){for(var se=[],ge=0;ge<R.length;ge++){for(var Me=[],Pe=0;Pe<R[ge].length;Pe++){var Qe=yh(R[ge][Pe],W);Cf(I,Qe),Me.push(Qe)}se.push(Me)}return se}function vc(R,I,W){for(var se=[],ge=0;ge<R.length;ge++){var Me=yu(R[ge],I,W);se.push(Me)}return se}function Bs(R,I,W,se){if(R[0]<W[0]||R[0]>W[2]){var ge=se*.5,Me=R[0]-W[0]>ge?-se:W[0]-R[0]>ge?se:0;Me===0&&(Me=R[0]-W[2]>ge?-se:W[2]-R[0]>ge?se:0),R[0]+=Me}Cf(I,R)}function Th(R){R[0]=R[1]=1/0,R[2]=R[3]=-1/0}function Ju(R,I,W,se){for(var ge=Math.pow(2,se.z)*Es,Me=[se.x*Es,se.y*Es],Pe=[],Qe=0,dt=R;Qe<dt.length;Qe+=1)for(var Mt=dt[Qe],_t=0,Yt=Mt;_t<Yt.length;_t+=1){var rr=Yt[_t],qt=[rr.x+Me[0],rr.y+Me[1]];Bs(qt,I,W,ge),Pe.push(qt)}return Pe}function dc(R,I,W,se){for(var ge=Math.pow(2,se.z)*Es,Me=[se.x*Es,se.y*Es],Pe=[],Qe=0,dt=R;Qe<dt.length;Qe+=1){for(var Mt=dt[Qe],_t=[],Yt=0,rr=Mt;Yt<rr.length;Yt+=1){var qt=rr[Yt],br=[qt.x+Me[0],qt.y+Me[1]];Cf(I,br),_t.push(br)}Pe.push(_t)}if(I[2]-I[0]<=ge/2){Th(I);for(var Br=0,fn=Pe;Br<fn.length;Br+=1)for(var rn=fn[Br],Cn=0,gn=rn;Cn<gn.length;Cn+=1){var Sn=gn[Cn];Bs(Sn,I,W,ge)}}return Pe}function pc(R,I){var W=[1/0,1/0,-1/0,-1/0],se=[1/0,1/0,-1/0,-1/0],ge=R.canonicalID();if(I.type==="Polygon"){var Me=yu(I.coordinates,se,ge),Pe=Ju(R.geometry(),W,se,ge);if(!Ku(W,se))return!1;for(var Qe=0,dt=Pe;Qe<dt.length;Qe+=1){var Mt=dt[Qe];if(!Lf(Mt,Me))return!1}}if(I.type==="MultiPolygon"){var _t=vc(I.coordinates,se,ge),Yt=Ju(R.geometry(),W,se,ge);if(!Ku(W,se))return!1;for(var rr=0,qt=Yt;rr<qt.length;rr+=1){var br=qt[rr];if(!bh(br,_t))return!1}}return!0}function Qu(R,I){var W=[1/0,1/0,-1/0,-1/0],se=[1/0,1/0,-1/0,-1/0],ge=R.canonicalID();if(I.type==="Polygon"){var Me=yu(I.coordinates,se,ge),Pe=dc(R.geometry(),W,se,ge);if(!Ku(W,se))return!1;for(var Qe=0,dt=Pe;Qe<dt.length;Qe+=1){var Mt=dt[Qe];if(!Nl(Mt,Me))return!1}}if(I.type==="MultiPolygon"){var _t=vc(I.coordinates,se,ge),Yt=dc(R.geometry(),W,se,ge);if(!Ku(W,se))return!1;for(var rr=0,qt=Yt;rr<qt.length;rr+=1){var br=qt[rr];if(!gu(br,_t))return!1}}return!0}var os=function(I,W){this.type=kn,this.geojson=I,this.geometries=W};os.parse=function(I,W){if(I.length!==2)return W.error("'within' expression requires exactly one argument, but found "+(I.length-1)+" instead.");if(ju(I[1])){var se=I[1];if(se.type==="FeatureCollection")for(var ge=0;ge<se.features.length;++ge){var Me=se.features[ge].geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new os(se,se.features[ge].geometry)}else if(se.type==="Feature"){var Pe=se.geometry.type;if(Pe==="Polygon"||Pe==="MultiPolygon")return new os(se,se.geometry)}else if(se.type==="Polygon"||se.type==="MultiPolygon")return new os(se,se)}return W.error("'within' expression requires valid geojson object that contains polygon geometry type.")},os.prototype.evaluate=function(I){if(I.geometry()!=null&&I.canonicalID()!=null){if(I.geometryType()==="Point")return pc(I,this.geometries);if(I.geometryType()==="LineString")return Qu(I,this.geometries)}return!1},os.prototype.eachChild=function(){},os.prototype.outputDefined=function(){return!0},os.prototype.serialize=function(){return["within",this.geojson]};function Ul(R){if(R instanceof so){if(R.name==="get"&&R.args.length===1)return!1;if(R.name==="feature-state")return!1;if(R.name==="has"&&R.args.length===1)return!1;if(R.name==="properties"||R.name==="geometry-type"||R.name==="id")return!1;if(/^filter-/.test(R.name))return!1}if(R instanceof os)return!1;var I=!0;return R.eachChild(function(W){I&&!Ul(W)&&(I=!1)}),I}function ml(R){if(R instanceof so&&R.name==="feature-state")return!1;var I=!0;return R.eachChild(function(W){I&&!ml(W)&&(I=!1)}),I}function mu(R,I){if(R instanceof so&&I.indexOf(R.name)>=0)return!1;var W=!0;return R.eachChild(function(se){W&&!mu(se,I)&&(W=!1)}),W}var Qs=function(I,W){this.type=W.type,this.name=I,this.boundExpression=W};Qs.parse=function(I,W){if(I.length!==2||typeof I[1]!="string")return W.error("'var' expression requires exactly one string literal argument.");var se=I[1];return W.scope.has(se)?new Qs(se,W.scope.get(se)):W.error('Unknown variable "'+se+'". Make sure "'+se+'" has been bound in an enclosing "let" expression before using it.',1)},Qs.prototype.evaluate=function(I){return this.boundExpression.evaluate(I)},Qs.prototype.eachChild=function(){},Qs.prototype.outputDefined=function(){return!1},Qs.prototype.serialize=function(){return["var",this.name]};var Ss=function(I,W,se,ge,Me){W===void 0&&(W=[]),ge===void 0&&(ge=new Zr),Me===void 0&&(Me=[]),this.registry=I,this.path=W,this.key=W.map(function(Pe){return"["+Pe+"]"}).join(""),this.scope=ge,this.errors=Me,this.expectedType=se};Ss.prototype.parse=function(I,W,se,ge,Me){return Me===void 0&&(Me={}),W?this.concat(W,se,ge)._parse(I,Me):this._parse(I,Me)},Ss.prototype._parse=function(I,W){(I===null||typeof I=="string"||typeof I=="boolean"||typeof I=="number")&&(I=["literal",I]);function se(_t,Yt,rr){return rr==="assert"?new vo(Yt,[_t]):rr==="coerce"?new Bo(Yt,[_t]):_t}if(Array.isArray(I)){if(I.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ge=I[0];if(typeof ge!="string")return this.error("Expression name must be a string, but found "+typeof ge+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Me=this.registry[ge];if(Me){var Pe=Me.parse(I,this);if(!Pe)return null;if(this.expectedType){var Qe=this.expectedType,dt=Pe.type;if((Qe.kind==="string"||Qe.kind==="number"||Qe.kind==="boolean"||Qe.kind==="object"||Qe.kind==="array")&&dt.kind==="value")Pe=se(Pe,Qe,W.typeAnnotation||"assert");else if((Qe.kind==="color"||Qe.kind==="formatted"||Qe.kind==="resolvedImage")&&(dt.kind==="value"||dt.kind==="string"))Pe=se(Pe,Qe,W.typeAnnotation||"coerce");else if(this.checkSubtype(Qe,dt))return null}if(!(Pe instanceof ja)&&Pe.type.kind!=="resolvedImage"&&_f(Pe)){var Mt=new Ms;try{Pe=new ja(Pe.type,Pe.evaluate(Mt))}catch(_t){return this.error(_t.message),null}}return Pe}return this.error('Unknown expression "'+ge+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof I>"u"?this.error("'undefined' value invalid. Use null instead."):typeof I=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof I+" instead.")},Ss.prototype.concat=function(I,W,se){var ge=typeof I=="number"?this.path.concat(I):this.path,Me=se?this.scope.concat(se):this.scope;return new Ss(this.registry,ge,W||null,Me,this.errors)},Ss.prototype.error=function(I){for(var W=[],se=arguments.length-1;se-- >0;)W[se]=arguments[se+1];var ge=""+this.key+W.map(function(Me){return"["+Me+"]"}).join("");this.errors.push(new Sr(ge,I))},Ss.prototype.checkSubtype=function(I,W){var se=Fo(I,W);return se&&this.error(se),se};function _f(R){if(R instanceof Qs)return _f(R.boundExpression);if(R instanceof so&&R.name==="error")return!1;if(R instanceof Js)return!1;if(R instanceof os)return!1;var I=R instanceof Bo||R instanceof vo,W=!0;return R.eachChild(function(se){I?W=W&&_f(se):W=W&&se instanceof ja}),W?Ul(R)&&mu(R,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Vl(R,I){for(var W=R.length-1,se=0,ge=W,Me=0,Pe,Qe;se<=ge;)if(Me=Math.floor((se+ge)/2),Pe=R[Me],Qe=R[Me+1],Pe<=I){if(Me===W||I<Qe)return Me;se=Me+1}else if(Pe>I)ge=Me-1;else throw new qa("Input is not a number.");return 0}var ss=function(I,W,se){this.type=I,this.input=W,this.labels=[],this.outputs=[];for(var ge=0,Me=se;ge<Me.length;ge+=1){var Pe=Me[ge],Qe=Pe[0],dt=Pe[1];this.labels.push(Qe),this.outputs.push(dt)}};ss.parse=function(I,W){if(I.length-1<4)return W.error("Expected at least 4 arguments, but found only "+(I.length-1)+".");if((I.length-1)%2!==0)return W.error("Expected an even number of arguments.");var se=W.parse(I[1],1,$r);if(!se)return null;var ge=[],Me=null;W.expectedType&&W.expectedType.kind!=="value"&&(Me=W.expectedType);for(var Pe=1;Pe<I.length;Pe+=2){var Qe=Pe===1?-1/0:I[Pe],dt=I[Pe+1],Mt=Pe,_t=Pe+1;if(typeof Qe!="number")return W.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Mt);if(ge.length&&ge[ge.length-1][0]>=Qe)return W.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Mt);var Yt=W.parse(dt,_t,Me);if(!Yt)return null;Me=Me||Yt.type,ge.push([Qe,Yt])}return new ss(Me,se,ge)},ss.prototype.evaluate=function(I){var W=this.labels,se=this.outputs;if(W.length===1)return se[0].evaluate(I);var ge=this.input.evaluate(I);if(ge<=W[0])return se[0].evaluate(I);var Me=W.length;if(ge>=W[Me-1])return se[Me-1].evaluate(I);var Pe=Vl(W,ge);return se[Pe].evaluate(I)},ss.prototype.eachChild=function(I){I(this.input);for(var W=0,se=this.outputs;W<se.length;W+=1){var ge=se[W];I(ge)}},ss.prototype.outputDefined=function(){return this.outputs.every(function(I){return I.outputDefined()})},ss.prototype.serialize=function(){for(var I=["step",this.input.serialize()],W=0;W<this.labels.length;W++)W>0&&I.push(this.labels[W]),I.push(this.outputs[W].serialize());return I};function Ba(R,I,W){return R*(1-W)+I*W}function Pf(R,I,W){return new ta(Ba(R.r,I.r,W),Ba(R.g,I.g,W),Ba(R.b,I.b,W),Ba(R.a,I.a,W))}function Ah(R,I,W){return R.map(function(se,ge){return Ba(se,I[ge],W)})}var $u=Object.freeze({__proto__:null,number:Ba,color:Pf,array:Ah}),Hl=.95047,Gl=1,No=1.08883,qu=4/29,Wl=6/29,ef=3*Wl*Wl,Mh=Wl*Wl*Wl,gc=Math.PI/180,Rf=180/Math.PI;function If(R){return R>Mh?Math.pow(R,.3333333333333333):R/ef+qu}function Df(R){return R>Wl?R*R*R:ef*(R-qu)}function Yl(R){return 255*(R<=.0031308?12.92*R:1.055*Math.pow(R,.4166666666666667)-.055)}function tf(R){return R/=255,R<=.04045?R/12.92:Math.pow((R+.055)/1.055,2.4)}function xu(R){var I=tf(R.r),W=tf(R.g),se=tf(R.b),ge=If((.4124564*I+.3575761*W+.1804375*se)/Hl),Me=If((.2126729*I+.7151522*W+.072175*se)/Gl),Pe=If((.0193339*I+.119192*W+.9503041*se)/No);return{l:116*Me-16,a:500*(ge-Me),b:200*(Me-Pe),alpha:R.a}}function rf(R){var I=(R.l+16)/116,W=isNaN(R.a)?I:I+R.a/500,se=isNaN(R.b)?I:I-R.b/200;return I=Gl*Df(I),W=Hl*Df(W),se=No*Df(se),new ta(Yl(3.2404542*W-1.5371385*I-.4985314*se),Yl(-.969266*W+1.8760108*I+.041556*se),Yl(.0556434*W-.2040259*I+1.0572252*se),R.alpha)}function xa(R,I,W){return{l:Ba(R.l,I.l,W),a:Ba(R.a,I.a,W),b:Ba(R.b,I.b,W),alpha:Ba(R.alpha,I.alpha,W)}}function yc(R){var I=xu(R),W=I.l,se=I.a,ge=I.b,Me=Math.atan2(ge,se)*Rf;return{h:Me<0?Me+360:Me,c:Math.sqrt(se*se+ge*ge),l:W,alpha:R.a}}function ls(R){var I=R.h*gc,W=R.c,se=R.l;return rf({l:se,a:Math.cos(I)*W,b:Math.sin(I)*W,alpha:R.alpha})}function mc(R,I,W){var se=I-R;return R+W*(se>180||se<-180?se-360*Math.round(se/360):se)}function kf(R,I,W){return{h:mc(R.h,I.h,W),c:Ba(R.c,I.c,W),l:Ba(R.l,I.l,W),alpha:Ba(R.alpha,I.alpha,W)}}var xl={forward:xu,reverse:rf,interpolate:xa},$s={forward:yc,reverse:ls,interpolate:kf},nf=Object.freeze({__proto__:null,lab:xl,hcl:$s}),Xa=function(I,W,se,ge,Me){this.type=I,this.operator=W,this.interpolation=se,this.input=ge,this.labels=[],this.outputs=[];for(var Pe=0,Qe=Me;Pe<Qe.length;Pe+=1){var dt=Qe[Pe],Mt=dt[0],_t=dt[1];this.labels.push(Mt),this.outputs.push(_t)}};Xa.interpolationFactor=function(I,W,se,ge){var Me=0;if(I.name==="exponential")Me=bu(W,I.base,se,ge);else if(I.name==="linear")Me=bu(W,1,se,ge);else if(I.name==="cubic-bezier"){var Pe=I.controlPoints,Qe=new v(Pe[0],Pe[1],Pe[2],Pe[3]);Me=Qe.solve(bu(W,1,se,ge))}return Me},Xa.parse=function(I,W){var se=I[0],ge=I[1],Me=I[2],Pe=I.slice(3);if(!Array.isArray(ge)||ge.length===0)return W.error("Expected an interpolation type expression.",1);if(ge[0]==="linear")ge={name:"linear"};else if(ge[0]==="exponential"){var Qe=ge[1];if(typeof Qe!="number")return W.error("Exponential interpolation requires a numeric base.",1,1);ge={name:"exponential",base:Qe}}else if(ge[0]==="cubic-bezier"){var dt=ge.slice(1);if(dt.length!==4||dt.some(function(rn){return typeof rn!="number"||rn<0||rn>1}))return W.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ge={name:"cubic-bezier",controlPoints:dt}}else return W.error("Unknown interpolation type "+String(ge[0]),1,0);if(I.length-1<4)return W.error("Expected at least 4 arguments, but found only "+(I.length-1)+".");if((I.length-1)%2!==0)return W.error("Expected an even number of arguments.");if(Me=W.parse(Me,2,$r),!Me)return null;var Mt=[],_t=null;se==="interpolate-hcl"||se==="interpolate-lab"?_t=En:W.expectedType&&W.expectedType.kind!=="value"&&(_t=W.expectedType);for(var Yt=0;Yt<Pe.length;Yt+=2){var rr=Pe[Yt],qt=Pe[Yt+1],br=Yt+3,Br=Yt+4;if(typeof rr!="number")return W.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',br);if(Mt.length&&Mt[Mt.length-1][0]>=rr)return W.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',br);var fn=W.parse(qt,Br,_t);if(!fn)return null;_t=_t||fn.type,Mt.push([rr,fn])}return _t.kind!=="number"&&_t.kind!=="color"&&!(_t.kind==="array"&&_t.itemType.kind==="number"&&typeof _t.N=="number")?W.error("Type "+ia(_t)+" is not interpolatable."):new Xa(_t,se,ge,Me,Mt)},Xa.prototype.evaluate=function(I){var W=this.labels,se=this.outputs;if(W.length===1)return se[0].evaluate(I);var ge=this.input.evaluate(I);if(ge<=W[0])return se[0].evaluate(I);var Me=W.length;if(ge>=W[Me-1])return se[Me-1].evaluate(I);var Pe=Vl(W,ge),Qe=W[Pe],dt=W[Pe+1],Mt=Xa.interpolationFactor(this.interpolation,ge,Qe,dt),_t=se[Pe].evaluate(I),Yt=se[Pe+1].evaluate(I);return this.operator==="interpolate"?$u[this.type.kind.toLowerCase()](_t,Yt,Mt):this.operator==="interpolate-hcl"?$s.reverse($s.interpolate($s.forward(_t),$s.forward(Yt),Mt)):xl.reverse(xl.interpolate(xl.forward(_t),xl.forward(Yt),Mt))},Xa.prototype.eachChild=function(I){I(this.input);for(var W=0,se=this.outputs;W<se.length;W+=1){var ge=se[W];I(ge)}},Xa.prototype.outputDefined=function(){return this.outputs.every(function(I){return I.outputDefined()})},Xa.prototype.serialize=function(){var I;this.interpolation.name==="linear"?I=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?I=["linear"]:I=["exponential",this.interpolation.base]:I=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var W=[this.operator,I,this.input.serialize()],se=0;se<this.labels.length;se++)W.push(this.labels[se],this.outputs[se].serialize());return W};function bu(R,I,W,se){var ge=se-W,Me=R-W;return ge===0?0:I===1?Me/ge:(Math.pow(I,Me)-1)/(Math.pow(I,ge)-1)}var us=function(I,W){this.type=I,this.args=W};us.parse=function(I,W){if(I.length<2)return W.error("Expectected at least one argument.");var se=null,ge=W.expectedType;ge&&ge.kind!=="value"&&(se=ge);for(var Me=[],Pe=0,Qe=I.slice(1);Pe<Qe.length;Pe+=1){var dt=Qe[Pe],Mt=W.parse(dt,1+Me.length,se,void 0,{typeAnnotation:"omit"});if(!Mt)return null;se=se||Mt.type,Me.push(Mt)}var _t=ge&&Me.some(function(Yt){return Fo(ge,Yt.type)});return _t?new us(Fn,Me):new us(se,Me)},us.prototype.evaluate=function(I){for(var W=null,se=0,ge,Me=0,Pe=this.args;Me<Pe.length;Me+=1){var Qe=Pe[Me];if(se++,W=Qe.evaluate(I),W&&W instanceof Po&&!W.available&&(ge||(ge=W.name),W=null,se===this.args.length&&(W=ge)),W!==null)break}return W},us.prototype.eachChild=function(I){this.args.forEach(I)},us.prototype.outputDefined=function(){return this.args.every(function(I){return I.outputDefined()})},us.prototype.serialize=function(){var I=["coalesce"];return this.eachChild(function(W){I.push(W.serialize())}),I};var Ns=function(I,W){this.type=W.type,this.bindings=[].concat(I),this.result=W};Ns.prototype.evaluate=function(I){return this.result.evaluate(I)},Ns.prototype.eachChild=function(I){for(var W=0,se=this.bindings;W<se.length;W+=1){var ge=se[W];I(ge[1])}I(this.result)},Ns.parse=function(I,W){if(I.length<4)return W.error("Expected at least 3 arguments, but found "+(I.length-1)+" instead.");for(var se=[],ge=1;ge<I.length-1;ge+=2){var Me=I[ge];if(typeof Me!="string")return W.error("Expected string, but found "+typeof Me+" instead.",ge);if(/[^a-zA-Z0-9_]/.test(Me))return W.error("Variable names must contain only alphanumeric characters or '_'.",ge);var Pe=W.parse(I[ge+1],ge+1);if(!Pe)return null;se.push([Me,Pe])}var Qe=W.parse(I[I.length-1],I.length-1,W.expectedType,se);return Qe?new Ns(se,Qe):null},Ns.prototype.outputDefined=function(){return this.result.outputDefined()},Ns.prototype.serialize=function(){for(var I=["let"],W=0,se=this.bindings;W<se.length;W+=1){var ge=se[W],Me=ge[0],Pe=ge[1];I.push(Me,Pe.serialize())}return I.push(this.result.serialize()),I};var bl=function(I,W,se){this.type=I,this.index=W,this.input=se};bl.parse=function(I,W){if(I.length!==3)return W.error("Expected 2 arguments, but found "+(I.length-1)+" instead.");var se=W.parse(I[1],1,$r),ge=W.parse(I[2],2,ma(W.expectedType||Fn));if(!se||!ge)return null;var Me=ge.type;return new bl(Me.itemType,se,ge)},bl.prototype.evaluate=function(I){var W=this.index.evaluate(I),se=this.input.evaluate(I);if(W<0)throw new qa("Array index out of bounds: "+W+" < 0.");if(W>=se.length)throw new qa("Array index out of bounds: "+W+" > "+(se.length-1)+".");if(W!==Math.floor(W))throw new qa("Array index must be an integer, but found "+W+" instead.");return se[W]},bl.prototype.eachChild=function(I){I(this.index),I(this.input)},bl.prototype.outputDefined=function(){return!1},bl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qs=function(I,W){this.type=kn,this.needle=I,this.haystack=W};qs.parse=function(I,W){if(I.length!==3)return W.error("Expected 2 arguments, but found "+(I.length-1)+" instead.");var se=W.parse(I[1],1,Fn),ge=W.parse(I[2],2,Fn);return!se||!ge?null:ho(se.type,[kn,bn,$r,Hr,Fn])?new qs(se,ge):W.error("Expected first argument to be of type boolean, string, number or null, but found "+ia(se.type)+" instead")},qs.prototype.evaluate=function(I){var W=this.needle.evaluate(I),se=this.haystack.evaluate(I);if(!se)return!1;if(!zl(W,["boolean","string","number","null"]))throw new qa("Expected first argument to be of type boolean, string, number or null, but found "+ia(Ya(W))+" instead.");if(!zl(se,["string","array"]))throw new qa("Expected second argument to be of type array or string, but found "+ia(Ya(se))+" instead.");return se.indexOf(W)>=0},qs.prototype.eachChild=function(I){I(this.needle),I(this.haystack)},qs.prototype.outputDefined=function(){return!0},qs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var fs=function(I,W,se){this.type=$r,this.needle=I,this.haystack=W,this.fromIndex=se};fs.parse=function(I,W){if(I.length<=2||I.length>=5)return W.error("Expected 3 or 4 arguments, but found "+(I.length-1)+" instead.");var se=W.parse(I[1],1,Fn),ge=W.parse(I[2],2,Fn);if(!se||!ge)return null;if(!ho(se.type,[kn,bn,$r,Hr,Fn]))return W.error("Expected first argument to be of type boolean, string, number or null, but found "+ia(se.type)+" instead");if(I.length===4){var Me=W.parse(I[3],3,$r);return Me?new fs(se,ge,Me):null}else return new fs(se,ge)},fs.prototype.evaluate=function(I){var W=this.needle.evaluate(I),se=this.haystack.evaluate(I);if(!zl(W,["boolean","string","number","null"]))throw new qa("Expected first argument to be of type boolean, string, number or null, but found "+ia(Ya(W))+" instead.");if(!zl(se,["string","array"]))throw new qa("Expected second argument to be of type array or string, but found "+ia(Ya(se))+" instead.");if(this.fromIndex){var ge=this.fromIndex.evaluate(I);return se.indexOf(W,ge)}return se.indexOf(W)},fs.prototype.eachChild=function(I){I(this.needle),I(this.haystack),this.fromIndex&&I(this.fromIndex)},fs.prototype.outputDefined=function(){return!1},fs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var I=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),I]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Us=function(I,W,se,ge,Me,Pe){this.inputType=I,this.type=W,this.input=se,this.cases=ge,this.outputs=Me,this.otherwise=Pe};Us.parse=function(I,W){if(I.length<5)return W.error("Expected at least 4 arguments, but found only "+(I.length-1)+".");if(I.length%2!==1)return W.error("Expected an even number of arguments.");var se,ge;W.expectedType&&W.expectedType.kind!=="value"&&(ge=W.expectedType);for(var Me={},Pe=[],Qe=2;Qe<I.length-1;Qe+=2){var dt=I[Qe],Mt=I[Qe+1];Array.isArray(dt)||(dt=[dt]);var _t=W.concat(Qe);if(dt.length===0)return _t.error("Expected at least one branch label.");for(var Yt=0,rr=dt;Yt<rr.length;Yt+=1){var qt=rr[Yt];if(typeof qt!="number"&&typeof qt!="string")return _t.error("Branch labels must be numbers or strings.");if(typeof qt=="number"&&Math.abs(qt)>Number.MAX_SAFE_INTEGER)return _t.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof qt=="number"&&Math.floor(qt)!==qt)return _t.error("Numeric branch labels must be integer values.");if(!se)se=Ya(qt);else if(_t.checkSubtype(se,Ya(qt)))return null;if(typeof Me[String(qt)]<"u")return _t.error("Branch labels must be unique.");Me[String(qt)]=Pe.length}var br=W.parse(Mt,Qe,ge);if(!br)return null;ge=ge||br.type,Pe.push(br)}var Br=W.parse(I[1],1,Fn);if(!Br)return null;var fn=W.parse(I[I.length-1],I.length-1,ge);return!fn||Br.type.kind!=="value"&&W.concat(1).checkSubtype(se,Br.type)?null:new Us(se,ge,Br,Me,Pe,fn)},Us.prototype.evaluate=function(I){var W=this.input.evaluate(I),se=Ya(W)===this.inputType&&this.outputs[this.cases[W]]||this.otherwise;return se.evaluate(I)},Us.prototype.eachChild=function(I){I(this.input),this.outputs.forEach(I),I(this.otherwise)},Us.prototype.outputDefined=function(){return this.outputs.every(function(I){return I.outputDefined()})&&this.otherwise.outputDefined()},Us.prototype.serialize=function(){for(var I=this,W=["match",this.input.serialize()],se=Object.keys(this.cases).sort(),ge=[],Me={},Pe=0,Qe=se;Pe<Qe.length;Pe+=1){var dt=Qe[Pe],Mt=Me[this.cases[dt]];Mt===void 0?(Me[this.cases[dt]]=ge.length,ge.push([this.cases[dt],[dt]])):ge[Mt][1].push(dt)}for(var _t=function(Br){return I.inputType.kind==="number"?Number(Br):Br},Yt=0,rr=ge;Yt<rr.length;Yt+=1){var qt=rr[Yt],Mt=qt[0],br=qt[1];br.length===1?W.push(_t(br[0])):W.push(br.map(_t)),W.push(this.outputs[outputIndex$1].serialize())}return W.push(this.otherwise.serialize()),W};var cs=function(I,W,se){this.type=I,this.branches=W,this.otherwise=se};cs.parse=function(I,W){if(I.length<4)return W.error("Expected at least 3 arguments, but found only "+(I.length-1)+".");if(I.length%2!==0)return W.error("Expected an odd number of arguments.");var se;W.expectedType&&W.expectedType.kind!=="value"&&(se=W.expectedType);for(var ge=[],Me=1;Me<I.length-1;Me+=2){var Pe=W.parse(I[Me],Me,kn);if(!Pe)return null;var Qe=W.parse(I[Me+1],Me+1,se);if(!Qe)return null;ge.push([Pe,Qe]),se=se||Qe.type}var dt=W.parse(I[I.length-1],I.length-1,se);return dt?new cs(se,ge,dt):null},cs.prototype.evaluate=function(I){for(var W=0,se=this.branches;W<se.length;W+=1){var ge=se[W],Me=ge[0],Pe=ge[1];if(Me.evaluate(I))return Pe.evaluate(I)}return this.otherwise.evaluate(I)},cs.prototype.eachChild=function(I){for(var W=0,se=this.branches;W<se.length;W+=1){var ge=se[W],Me=ge[0],Pe=ge[1];I(Me),I(Pe)}I(this.otherwise)},cs.prototype.outputDefined=function(){return this.branches.every(function(I){I[0];var W=I[1];return W.outputDefined()})&&this.otherwise.outputDefined()},cs.prototype.serialize=function(){var I=["case"];return this.eachChild(function(W){I.push(W.serialize())}),I};var Jo=function(I,W,se,ge){this.type=I,this.input=W,this.beginIndex=se,this.endIndex=ge};Jo.parse=function(I,W){if(I.length<=2||I.length>=5)return W.error("Expected 3 or 4 arguments, but found "+(I.length-1)+" instead.");var se=W.parse(I[1],1,Fn),ge=W.parse(I[2],2,$r);if(!se||!ge)return null;if(!ho(se.type,[ma(Fn),bn,Fn]))return W.error("Expected first argument to be of type array or string, but found "+ia(se.type)+" instead");if(I.length===4){var Me=W.parse(I[3],3,$r);return Me?new Jo(se.type,se,ge,Me):null}else return new Jo(se.type,se,ge)},Jo.prototype.evaluate=function(I){var W=this.input.evaluate(I),se=this.beginIndex.evaluate(I);if(!zl(W,["string","array"]))throw new qa("Expected first argument to be of type array or string, but found "+ia(Ya(W))+" instead.");if(this.endIndex){var ge=this.endIndex.evaluate(I);return W.slice(se,ge)}return W.slice(se)},Jo.prototype.eachChild=function(I){I(this.input),I(this.beginIndex),this.endIndex&&I(this.endIndex)},Jo.prototype.outputDefined=function(){return!1},Jo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var I=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),I]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function wu(R,I){return R==="=="||R==="!="?I.kind==="boolean"||I.kind==="string"||I.kind==="number"||I.kind==="null"||I.kind==="value":I.kind==="string"||I.kind==="number"||I.kind==="value"}function Eh(R,I,W){return I===W}function Sh(R,I,W){return I!==W}function Ch(R,I,W){return I<W}function Lh(R,I,W){return I>W}function zf(R,I,W){return I<=W}function xc(R,I,W){return I>=W}function Xl(R,I,W,se){return se.compare(I,W)===0}function lo(R,I,W,se){return!Xl(R,I,W,se)}function Xo(R,I,W,se){return se.compare(I,W)<0}function Zl(R,I,W,se){return se.compare(I,W)>0}function bc(R,I,W,se){return se.compare(I,W)<=0}function Tu(R,I,W,se){return se.compare(I,W)>=0}function Vs(R,I,W){var se=R!=="=="&&R!=="!=";return function(){function ge(Me,Pe,Qe){this.type=kn,this.lhs=Me,this.rhs=Pe,this.collator=Qe,this.hasUntypedArgument=Me.type.kind==="value"||Pe.type.kind==="value"}return ge.parse=function(Pe,Qe){if(Pe.length!==3&&Pe.length!==4)return Qe.error("Expected two or three arguments.");var dt=Pe[0],Mt=Qe.parse(Pe[1],1,Fn);if(!Mt)return null;if(!wu(dt,Mt.type))return Qe.concat(1).error('"'+dt+`" comparisons are not supported for type '`+ia(Mt.type)+"'.");var _t=Qe.parse(Pe[2],2,Fn);if(!_t)return null;if(!wu(dt,_t.type))return Qe.concat(2).error('"'+dt+`" comparisons are not supported for type '`+ia(_t.type)+"'.");if(Mt.type.kind!==_t.type.kind&&Mt.type.kind!=="value"&&_t.type.kind!=="value")return Qe.error("Cannot compare types '"+ia(Mt.type)+"' and '"+ia(_t.type)+"'.");se&&(Mt.type.kind==="value"&&_t.type.kind!=="value"?Mt=new vo(_t.type,[Mt]):Mt.type.kind!=="value"&&_t.type.kind==="value"&&(_t=new vo(Mt.type,[_t])));var Yt=null;if(Pe.length===4){if(Mt.type.kind!=="string"&&_t.type.kind!=="string"&&Mt.type.kind!=="value"&&_t.type.kind!=="value")return Qe.error("Cannot use collator to compare non-string types.");if(Yt=Qe.parse(Pe[3],3,si),!Yt)return null}return new ge(Mt,_t,Yt)},ge.prototype.evaluate=function(Pe){var Qe=this.lhs.evaluate(Pe),dt=this.rhs.evaluate(Pe);if(se&&this.hasUntypedArgument){var Mt=Ya(Qe),_t=Ya(dt);if(Mt.kind!==_t.kind||!(Mt.kind==="string"||Mt.kind==="number"))throw new qa('Expected arguments for "'+R+'" to be (string, string) or (number, number), but found ('+Mt.kind+", "+_t.kind+") instead.")}if(this.collator&&!se&&this.hasUntypedArgument){var Yt=Ya(Qe),rr=Ya(dt);if(Yt.kind!=="string"||rr.kind!=="string")return I(Pe,Qe,dt)}return this.collator?W(Pe,Qe,dt,this.collator.evaluate(Pe)):I(Pe,Qe,dt)},ge.prototype.eachChild=function(Pe){Pe(this.lhs),Pe(this.rhs),this.collator&&Pe(this.collator)},ge.prototype.outputDefined=function(){return!0},ge.prototype.serialize=function(){var Pe=[R];return this.eachChild(function(Qe){Pe.push(Qe.serialize())}),Pe},ge}()}var _h=Vs("==",Eh,Xl),wc=Vs("!=",Sh,lo),Tc=Vs("<",Ch,Xo),Of=Vs(">",Lh,Zl),Ac=Vs("<=",zf,bc),Ro=Vs(">=",xc,Tu),hs=function(I,W,se,ge,Me){this.type=bn,this.number=I,this.locale=W,this.currency=se,this.minFractionDigits=ge,this.maxFractionDigits=Me};hs.parse=function(I,W){if(I.length!==3)return W.error("Expected two arguments.");var se=W.parse(I[1],1,$r);if(!se)return null;var ge=I[2];if(typeof ge!="object"||Array.isArray(ge))return W.error("NumberFormat options argument must be an object.");var Me=null;if(ge.locale&&(Me=W.parse(ge.locale,1,bn),!Me))return null;var Pe=null;if(ge.currency&&(Pe=W.parse(ge.currency,1,bn),!Pe))return null;var Qe=null;if(ge["min-fraction-digits"]&&(Qe=W.parse(ge["min-fraction-digits"],1,$r),!Qe))return null;var dt=null;return ge["max-fraction-digits"]&&(dt=W.parse(ge["max-fraction-digits"],1,$r),!dt)?null:new hs(se,Me,Pe,Qe,dt)},hs.prototype.evaluate=function(I){return new Intl.NumberFormat(this.locale?this.locale.evaluate(I):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(I):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(I):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(I):void 0}).format(this.number.evaluate(I))},hs.prototype.eachChild=function(I){I(this.number),this.locale&&I(this.locale),this.currency&&I(this.currency),this.minFractionDigits&&I(this.minFractionDigits),this.maxFractionDigits&&I(this.maxFractionDigits)},hs.prototype.outputDefined=function(){return!1},hs.prototype.serialize=function(){var I={};return this.locale&&(I.locale=this.locale.serialize()),this.currency&&(I.currency=this.currency.serialize()),this.minFractionDigits&&(I["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(I["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),I]};var el=function(I){this.type=$r,this.input=I};el.parse=function(I,W){if(I.length!==2)return W.error("Expected 1 argument, but found "+(I.length-1)+" instead.");var se=W.parse(I[1],1);return se?se.type.kind!=="array"&&se.type.kind!=="string"&&se.type.kind!=="value"?W.error("Expected argument of type string or array, but found "+ia(se.type)+" instead."):new el(se):null},el.prototype.evaluate=function(I){var W=this.input.evaluate(I);if(typeof W=="string")return W.length;if(Array.isArray(W))return W.length;throw new qa("Expected value to be of type string or array, but found "+ia(Ya(W))+" instead.")},el.prototype.eachChild=function(I){I(this.input)},el.prototype.outputDefined=function(){return!1},el.prototype.serialize=function(){var I=["length"];return this.eachChild(function(W){I.push(W.serialize())}),I};var jl={"==":_h,"!=":wc,">":Of,"<":Tc,">=":Ro,"<=":Ac,array:vo,at:bl,boolean:vo,case:cs,coalesce:us,collator:Js,format:po,image:Yo,in:qs,"index-of":fs,interpolate:Xa,"interpolate-hcl":Xa,"interpolate-lab":Xa,length:el,let:Ns,literal:ja,match:Us,number:vo,"number-format":hs,object:vo,slice:Jo,step:ss,string:vo,"to-boolean":Bo,"to-color":Bo,"to-number":Bo,"to-string":Bo,var:Qs,within:os};function af(R,I){var W=I[0],se=I[1],ge=I[2],Me=I[3];W=W.evaluate(R),se=se.evaluate(R),ge=ge.evaluate(R);var Pe=Me?Me.evaluate(R):1,Qe=Ol(W,se,ge,Pe);if(Qe)throw new qa(Qe);return new ta(W/255*Pe,se/255*Pe,ge/255*Pe,Pe)}function wl(R,I){return R in I}function Tl(R,I){var W=I[R];return typeof W>"u"?null:W}function Mc(R,I,W,se){for(;W<=se;){var ge=W+se>>1;if(I[ge]===R)return!0;I[ge]>R?se=ge-1:W=ge+1}return!1}function Hs(R){return{type:R}}so.register(jl,{error:[vi,[bn],function(R,I){var W=I[0];throw new qa(W.evaluate(R))}],typeof:[bn,[Fn],function(R,I){var W=I[0];return ia(Ya(W.evaluate(R)))}],"to-rgba":[ma($r,4),[En],function(R,I){var W=I[0];return W.evaluate(R).toArray()}],rgb:[En,[$r,$r,$r],af],rgba:[En,[$r,$r,$r,$r],af],has:{type:kn,overloads:[[[bn],function(R,I){var W=I[0];return wl(W.evaluate(R),R.properties())}],[[bn,Nn],function(R,I){var W=I[0],se=I[1];return wl(W.evaluate(R),se.evaluate(R))}]]},get:{type:Fn,overloads:[[[bn],function(R,I){var W=I[0];return Tl(W.evaluate(R),R.properties())}],[[bn,Nn],function(R,I){var W=I[0],se=I[1];return Tl(W.evaluate(R),se.evaluate(R))}]]},"feature-state":[Fn,[bn],function(R,I){var W=I[0];return Tl(W.evaluate(R),R.featureState||{})}],properties:[Nn,[],function(R){return R.properties()}],"geometry-type":[bn,[],function(R){return R.geometryType()}],id:[Fn,[],function(R){return R.id()}],zoom:[$r,[],function(R){return R.globals.zoom}],"heatmap-density":[$r,[],function(R){return R.globals.heatmapDensity||0}],"line-progress":[$r,[],function(R){return R.globals.lineProgress||0}],accumulated:[Fn,[],function(R){return R.globals.accumulated===void 0?null:R.globals.accumulated}],"+":[$r,Hs($r),function(R,I){for(var W=0,se=0,ge=I;se<ge.length;se+=1){var Me=ge[se];W+=Me.evaluate(R)}return W}],"*":[$r,Hs($r),function(R,I){for(var W=1,se=0,ge=I;se<ge.length;se+=1){var Me=ge[se];W*=Me.evaluate(R)}return W}],"-":{type:$r,overloads:[[[$r,$r],function(R,I){var W=I[0],se=I[1];return W.evaluate(R)-se.evaluate(R)}],[[$r],function(R,I){var W=I[0];return-W.evaluate(R)}]]},"/":[$r,[$r,$r],function(R,I){var W=I[0],se=I[1];return W.evaluate(R)/se.evaluate(R)}],"%":[$r,[$r,$r],function(R,I){var W=I[0],se=I[1];return W.evaluate(R)%se.evaluate(R)}],ln2:[$r,[],function(){return Math.LN2}],pi:[$r,[],function(){return Math.PI}],e:[$r,[],function(){return Math.E}],"^":[$r,[$r,$r],function(R,I){var W=I[0],se=I[1];return Math.pow(W.evaluate(R),se.evaluate(R))}],sqrt:[$r,[$r],function(R,I){var W=I[0];return Math.sqrt(W.evaluate(R))}],log10:[$r,[$r],function(R,I){var W=I[0];return Math.log(W.evaluate(R))/Math.LN10}],ln:[$r,[$r],function(R,I){var W=I[0];return Math.log(W.evaluate(R))}],log2:[$r,[$r],function(R,I){var W=I[0];return Math.log(W.evaluate(R))/Math.LN2}],sin:[$r,[$r],function(R,I){var W=I[0];return Math.sin(W.evaluate(R))}],cos:[$r,[$r],function(R,I){var W=I[0];return Math.cos(W.evaluate(R))}],tan:[$r,[$r],function(R,I){var W=I[0];return Math.tan(W.evaluate(R))}],asin:[$r,[$r],function(R,I){var W=I[0];return Math.asin(W.evaluate(R))}],acos:[$r,[$r],function(R,I){var W=I[0];return Math.acos(W.evaluate(R))}],atan:[$r,[$r],function(R,I){var W=I[0];return Math.atan(W.evaluate(R))}],min:[$r,Hs($r),function(R,I){return Math.min.apply(Math,I.map(function(W){return W.evaluate(R)}))}],max:[$r,Hs($r),function(R,I){return Math.max.apply(Math,I.map(function(W){return W.evaluate(R)}))}],abs:[$r,[$r],function(R,I){var W=I[0];return Math.abs(W.evaluate(R))}],round:[$r,[$r],function(R,I){var W=I[0],se=W.evaluate(R);return se<0?-Math.round(-se):Math.round(se)}],floor:[$r,[$r],function(R,I){var W=I[0];return Math.floor(W.evaluate(R))}],ceil:[$r,[$r],function(R,I){var W=I[0];return Math.ceil(W.evaluate(R))}],"filter-==":[kn,[bn,Fn],function(R,I){var W=I[0],se=I[1];return R.properties()[W.value]===se.value}],"filter-id-==":[kn,[Fn],function(R,I){var W=I[0];return R.id()===W.value}],"filter-type-==":[kn,[bn],function(R,I){var W=I[0];return R.geometryType()===W.value}],"filter-<":[kn,[bn,Fn],function(R,I){var W=I[0],se=I[1],ge=R.properties()[W.value],Me=se.value;return typeof ge==typeof Me&&ge<Me}],"filter-id-<":[kn,[Fn],function(R,I){var W=I[0],se=R.id(),ge=W.value;return typeof se==typeof ge&&se<ge}],"filter->":[kn,[bn,Fn],function(R,I){var W=I[0],se=I[1],ge=R.properties()[W.value],Me=se.value;return typeof ge==typeof Me&&ge>Me}],"filter-id->":[kn,[Fn],function(R,I){var W=I[0],se=R.id(),ge=W.value;return typeof se==typeof ge&&se>ge}],"filter-<=":[kn,[bn,Fn],function(R,I){var W=I[0],se=I[1],ge=R.properties()[W.value],Me=se.value;return typeof ge==typeof Me&&ge<=Me}],"filter-id-<=":[kn,[Fn],function(R,I){var W=I[0],se=R.id(),ge=W.value;return typeof se==typeof ge&&se<=ge}],"filter->=":[kn,[bn,Fn],function(R,I){var W=I[0],se=I[1],ge=R.properties()[W.value],Me=se.value;return typeof ge==typeof Me&&ge>=Me}],"filter-id->=":[kn,[Fn],function(R,I){var W=I[0],se=R.id(),ge=W.value;return typeof se==typeof ge&&se>=ge}],"filter-has":[kn,[Fn],function(R,I){var W=I[0];return W.value in R.properties()}],"filter-has-id":[kn,[],function(R){return R.id()!==null&&R.id()!==void 0}],"filter-type-in":[kn,[ma(bn)],function(R,I){var W=I[0];return W.value.indexOf(R.geometryType())>=0}],"filter-id-in":[kn,[ma(Fn)],function(R,I){var W=I[0];return W.value.indexOf(R.id())>=0}],"filter-in-small":[kn,[bn,ma(Fn)],function(R,I){var W=I[0],se=I[1];return se.value.indexOf(R.properties()[W.value])>=0}],"filter-in-large":[kn,[bn,ma(Fn)],function(R,I){var W=I[0],se=I[1];return Mc(R.properties()[W.value],se.value,0,se.value.length-1)}],all:{type:kn,overloads:[[[kn,kn],function(R,I){var W=I[0],se=I[1];return W.evaluate(R)&&se.evaluate(R)}],[Hs(kn),function(R,I){for(var W=0,se=I;W<se.length;W+=1){var ge=se[W];if(!ge.evaluate(R))return!1}return!0}]]},any:{type:kn,overloads:[[[kn,kn],function(R,I){var W=I[0],se=I[1];return W.evaluate(R)||se.evaluate(R)}],[Hs(kn),function(R,I){for(var W=0,se=I;W<se.length;W+=1){var ge=se[W];if(ge.evaluate(R))return!0}return!1}]]},"!":[kn,[kn],function(R,I){var W=I[0];return!W.evaluate(R)}],"is-supported-script":[kn,[bn],function(R,I){var W=I[0],se=R.globals&&R.globals.isSupportedScript;return se?se(W.evaluate(R)):!0}],upcase:[bn,[bn],function(R,I){var W=I[0];return W.evaluate(R).toUpperCase()}],downcase:[bn,[bn],function(R,I){var W=I[0];return W.evaluate(R).toLowerCase()}],concat:[bn,Hs(Fn),function(R,I){return I.map(function(W){return Fl(W.evaluate(R))}).join("")}],"resolved-locale":[bn,[si],function(R,I){var W=I[0];return W.evaluate(R).resolvedLocale()}]});function Kl(R){return{result:"success",value:R}}function tl(R){return{result:"error",value:R}}function Gs(R){return R["property-type"]==="data-driven"||R["property-type"]==="cross-faded-data-driven"}function Au(R){return!!R.expression&&R.expression.parameters.indexOf("zoom")>-1}function Jl(R){return!!R.expression&&R.expression.interpolated}function ga(R){return R instanceof Number?"number":R instanceof String?"string":R instanceof Boolean?"boolean":Array.isArray(R)?"array":R===null?"null":typeof R}function Ql(R){return typeof R=="object"&&R!==null&&!Array.isArray(R)}function of(R){return R}function Ec(R,I){var W=I.type==="color",se=R.stops&&typeof R.stops[0][0]=="object",ge=se||R.property!==void 0,Me=se||!ge,Pe=R.type||(Jl(I)?"exponential":"interval");if(W&&(R=Pn({},R),R.stops&&(R.stops=R.stops.map(function(ei){return[ei[0],ta.parse(ei[1])]})),R.default?R.default=ta.parse(R.default):R.default=ta.parse(I.default)),R.colorSpace&&R.colorSpace!=="rgb"&&!nf[R.colorSpace])throw new Error("Unknown color space: "+R.colorSpace);var Qe,dt,Mt;if(Pe==="exponential")Qe=Ff;else if(Pe==="interval")Qe=sf;else if(Pe==="categorical"){Qe=Mu,dt=Object.create(null);for(var _t=0,Yt=R.stops;_t<Yt.length;_t+=1){var rr=Yt[_t];dt[rr[0]]=rr[1]}Mt=typeof R.stops[0][0]}else if(Pe==="identity")Qe=Eu;else throw new Error('Unknown function type "'+Pe+'"');if(se){for(var qt={},br=[],Br=0;Br<R.stops.length;Br++){var fn=R.stops[Br],rn=fn[0].zoom;qt[rn]===void 0&&(qt[rn]={zoom:rn,type:R.type,property:R.property,default:R.default,stops:[]},br.push(rn)),qt[rn].stops.push([fn[0].value,fn[1]])}for(var Cn=[],gn=0,Sn=br;gn<Sn.length;gn+=1){var Dn=Sn[gn];Cn.push([qt[Dn].zoom,Ec(qt[Dn],I)])}var Wn={name:"linear"};return{kind:"composite",interpolationType:Wn,interpolationFactor:Xa.interpolationFactor.bind(void 0,Wn),zoomStops:Cn.map(function(ei){return ei[0]}),evaluate:function(wi,pi){var xi=wi.zoom;return Ff({stops:Cn,base:R.base},I,xi).evaluate(xi,pi)}}}else if(Me){var ni=Pe==="exponential"?{name:"exponential",base:R.base!==void 0?R.base:1}:null;return{kind:"camera",interpolationType:ni,interpolationFactor:Xa.interpolationFactor.bind(void 0,ni),zoomStops:R.stops.map(function(ei){return ei[0]}),evaluate:function(ei){var wi=ei.zoom;return Qe(R,I,wi,dt,Mt)}}}else return{kind:"source",evaluate:function(wi,pi){var xi=pi&&pi.properties?pi.properties[R.property]:void 0;return xi===void 0?$l(R.default,I.default):Qe(R,I,xi,dt,Mt)}}}function $l(R,I,W){if(R!==void 0)return R;if(I!==void 0)return I;if(W!==void 0)return W}function Mu(R,I,W,se,ge){var Me=typeof W===ge?se[W]:void 0;return $l(Me,R.default,I.default)}function sf(R,I,W){if(ga(W)!=="number")return $l(R.default,I.default);var se=R.stops.length;if(se===1||W<=R.stops[0][0])return R.stops[0][1];if(W>=R.stops[se-1][0])return R.stops[se-1][1];var ge=Vl(R.stops.map(function(Me){return Me[0]}),W);return R.stops[ge][1]}function Ff(R,I,W){var se=R.base!==void 0?R.base:1;if(ga(W)!=="number")return $l(R.default,I.default);var ge=R.stops.length;if(ge===1||W<=R.stops[0][0])return R.stops[0][1];if(W>=R.stops[ge-1][0])return R.stops[ge-1][1];var Me=Vl(R.stops.map(function(Yt){return Yt[0]}),W),Pe=Su(W,se,R.stops[Me][0],R.stops[Me+1][0]),Qe=R.stops[Me][1],dt=R.stops[Me+1][1],Mt=$u[I.type]||of;if(R.colorSpace&&R.colorSpace!=="rgb"){var _t=nf[R.colorSpace];Mt=function(Yt,rr){return _t.reverse(_t.interpolate(_t.forward(Yt),_t.forward(rr),Pe))}}return typeof Qe.evaluate=="function"?{evaluate:function(){for(var rr=[],qt=arguments.length;qt--;)rr[qt]=arguments[qt];var br=Qe.evaluate.apply(void 0,rr),Br=dt.evaluate.apply(void 0,rr);if(!(br===void 0||Br===void 0))return Mt(br,Br,Pe)}}:Mt(Qe,dt,Pe)}function Eu(R,I,W){return I.type==="color"?W=ta.parse(W):I.type==="formatted"?W=oo.fromString(W.toString()):I.type==="resolvedImage"?W=Po.fromString(W.toString()):ga(W)!==I.type&&(I.type!=="enum"||!I.values[W])&&(W=void 0),$l(W,R.default,I.default)}function Su(R,I,W,se){var ge=se-W,Me=R-W;return ge===0?0:I===1?Me/ge:(Math.pow(I,Me)-1)/(Math.pow(I,ge)-1)}var rl=function(I,W){this.expression=I,this._warningHistory={},this._evaluator=new Ms,this._defaultValue=W?Sc(W):null,this._enumValues=W&&W.type==="enum"?W.values:null};rl.prototype.evaluateWithoutErrorHandling=function(I,W,se,ge,Me,Pe){return this._evaluator.globals=I,this._evaluator.feature=W,this._evaluator.featureState=se,this._evaluator.canonical=ge,this._evaluator.availableImages=Me||null,this._evaluator.formattedSection=Pe,this.expression.evaluate(this._evaluator)},rl.prototype.evaluate=function(I,W,se,ge,Me,Pe){this._evaluator.globals=I,this._evaluator.feature=W||null,this._evaluator.featureState=se||null,this._evaluator.canonical=ge,this._evaluator.availableImages=Me||null,this._evaluator.formattedSection=Pe||null;try{var Qe=this.expression.evaluate(this._evaluator);if(Qe==null||typeof Qe=="number"&&Qe!==Qe)return this._defaultValue;if(this._enumValues&&!(Qe in this._enumValues))throw new qa("Expected value to be one of "+Object.keys(this._enumValues).map(function(dt){return JSON.stringify(dt)}).join(", ")+", but found "+JSON.stringify(Qe)+" instead.");return Qe}catch(dt){return this._warningHistory[dt.message]||(this._warningHistory[dt.message]=!0,typeof console<"u"&&console.warn(dt.message)),this._defaultValue}};function Cu(R){return Array.isArray(R)&&R.length>0&&typeof R[0]=="string"&&R[0]in jl}function nl(R,I){var W=new Ss(jl,[],I?Ph(I):void 0),se=W.parse(R,void 0,void 0,void 0,I&&I.type==="string"?{typeAnnotation:"coerce"}:void 0);return se?Kl(new rl(se,I)):tl(W.errors)}var eo=function(I,W){this.kind=I,this._styleExpression=W,this.isStateDependent=I!=="constant"&&!ml(W.expression)};eo.prototype.evaluateWithoutErrorHandling=function(I,W,se,ge,Me,Pe){return this._styleExpression.evaluateWithoutErrorHandling(I,W,se,ge,Me,Pe)},eo.prototype.evaluate=function(I,W,se,ge,Me,Pe){return this._styleExpression.evaluate(I,W,se,ge,Me,Pe)};var Cs=function(I,W,se,ge){this.kind=I,this.zoomStops=se,this._styleExpression=W,this.isStateDependent=I!=="camera"&&!ml(W.expression),this.interpolationType=ge};Cs.prototype.evaluateWithoutErrorHandling=function(I,W,se,ge,Me,Pe){return this._styleExpression.evaluateWithoutErrorHandling(I,W,se,ge,Me,Pe)},Cs.prototype.evaluate=function(I,W,se,ge,Me,Pe){return this._styleExpression.evaluate(I,W,se,ge,Me,Pe)},Cs.prototype.interpolationFactor=function(I,W,se){return this.interpolationType?Xa.interpolationFactor(this.interpolationType,I,W,se):0};function Bf(R,I){if(R=nl(R,I),R.result==="error")return R;var W=R.value.expression,se=Ul(W);if(!se&&!Gs(I))return tl([new Sr("","data expressions not supported")]);var ge=mu(W,["zoom"]);if(!ge&&!Au(I))return tl([new Sr("","zoom expressions not supported")]);var Me=Lu(W);if(!Me&&!ge)return tl([new Sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Me instanceof Sr)return tl([Me]);if(Me instanceof Xa&&!Jl(I))return tl([new Sr("",'"interpolate" expressions cannot be used with this property')]);if(!Me)return Kl(se?new eo("constant",R.value):new eo("source",R.value));var Pe=Me instanceof Xa?Me.interpolation:void 0;return Kl(se?new Cs("camera",R.value,Me.labels,Pe):new Cs("composite",R.value,Me.labels,Pe))}var Al=function(I,W){this._parameters=I,this._specification=W,Pn(this,Ec(this._parameters,this._specification))};Al.deserialize=function(I){return new Al(I._parameters,I._specification)},Al.serialize=function(I){return{_parameters:I._parameters,_specification:I._specification}};function lf(R,I){if(Ql(R))return new Al(R,I);if(Cu(R)){var W=Bf(R,I);if(W.result==="error")throw new Error(W.value.map(function(ge){return ge.key+": "+ge.message}).join(", "));return W.value}else{var se=R;return typeof R=="string"&&I.type==="color"&&(se=ta.parse(R)),{kind:"constant",evaluate:function(){return se}}}}function Lu(R){var I=null;if(R instanceof Ns)I=Lu(R.result);else if(R instanceof us)for(var W=0,se=R.args;W<se.length;W+=1){var ge=se[W];if(I=Lu(ge),I)break}else(R instanceof ss||R instanceof Xa)&&R.input instanceof so&&R.input.name==="zoom"&&(I=R);return I instanceof Sr||R.eachChild(function(Me){var Pe=Lu(Me);Pe instanceof Sr?I=Pe:!I&&Pe?I=new Sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):I&&Pe&&I!==Pe&&(I=new Sr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),I}function Ph(R){var I={color:En,string:bn,number:$r,enum:bn,boolean:kn,formatted:gi,resolvedImage:Li};return R.type==="array"?ma(I[R.value]||Fn,R.length):I[R.type]}function Sc(R){return R.type==="color"&&Ql(R.default)?new ta(0,0,0,0):R.type==="color"?ta.parse(R.default)||null:R.default===void 0?null:R.default}function Ao(R){var I=R.key,W=R.value,se=R.valueSpec||{},ge=R.objectElementValidators||{},Me=R.style,Pe=R.styleSpec,Qe=[],dt=ga(W);if(dt!=="object")return[new Fr(I,W,"object expected, "+dt+" found")];for(var Mt in W){var _t=Mt.split(".")[0],Yt=se[_t]||se["*"],rr=void 0;if(ge[_t])rr=ge[_t];else if(se[_t])rr=Ir;else if(ge["*"])rr=ge["*"];else if(se["*"])rr=Ir;else{Qe.push(new Fr(I,W[Mt],'unknown property "'+Mt+'"'));continue}Qe=Qe.concat(rr({key:(I&&I+".")+Mt,value:W[Mt],valueSpec:Yt,style:Me,styleSpec:Pe,object:W,objectKey:Mt},W))}for(var qt in se)ge[qt]||se[qt].required&&se[qt].default===void 0&&W[qt]===void 0&&Qe.push(new Fr(I,W,'missing required property "'+qt+'"'));return Qe}function _u(R){var I=R.value,W=R.valueSpec,se=R.style,ge=R.styleSpec,Me=R.key,Pe=R.arrayElementValidator||Ir;if(ga(I)!=="array")return[new Fr(Me,I,"array expected, "+ga(I)+" found")];if(W.length&&I.length!==W.length)return[new Fr(Me,I,"array length "+W.length+" expected, length "+I.length+" found")];if(W["min-length"]&&I.length<W["min-length"])return[new Fr(Me,I,"array length at least "+W["min-length"]+" expected, length "+I.length+" found")];var Qe={type:W.value,values:W.values};ge.$version<7&&(Qe.function=W.function),ga(W.value)==="object"&&(Qe=W.value);for(var dt=[],Mt=0;Mt<I.length;Mt++)dt=dt.concat(Pe({array:I,arrayIndex:Mt,value:I[Mt],valueSpec:Qe,style:se,styleSpec:ge,key:Me+"["+Mt+"]"}));return dt}function ql(R){var I=R.key,W=R.value,se=R.valueSpec,ge=ga(W);return ge==="number"&&W!==W&&(ge="NaN"),ge!=="number"?[new Fr(I,W,"number expected, "+ge+" found")]:"minimum"in se&&W<se.minimum?[new Fr(I,W,W+" is less than the minimum value "+se.minimum)]:"maximum"in se&&W>se.maximum?[new Fr(I,W,W+" is greater than the maximum value "+se.maximum)]:[]}function Cc(R){var I=R.valueSpec,W=pn(R.value.type),se,ge={},Me,Pe,Qe=W!=="categorical"&&R.value.property===void 0,dt=!Qe,Mt=ga(R.value.stops)==="array"&&ga(R.value.stops[0])==="array"&&ga(R.value.stops[0][0])==="object",_t=Ao({key:R.key,value:R.value,valueSpec:R.styleSpec.function,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{stops:Yt,default:br}});return W==="identity"&&Qe&&_t.push(new Fr(R.key,R.value,'missing required property "property"')),W!=="identity"&&!R.value.stops&&_t.push(new Fr(R.key,R.value,'missing required property "stops"')),W==="exponential"&&R.valueSpec.expression&&!Jl(R.valueSpec)&&_t.push(new Fr(R.key,R.value,"exponential functions not supported")),R.styleSpec.$version>=8&&(dt&&!Gs(R.valueSpec)?_t.push(new Fr(R.key,R.value,"property functions not supported")):Qe&&!Au(R.valueSpec)&&_t.push(new Fr(R.key,R.value,"zoom functions not supported"))),(W==="categorical"||Mt)&&R.value.property===void 0&&_t.push(new Fr(R.key,R.value,'"property" property is required')),_t;function Yt(Br){if(W==="identity")return[new Fr(Br.key,Br.value,'identity function may not have a "stops" property')];var fn=[],rn=Br.value;return fn=fn.concat(_u({key:Br.key,value:rn,valueSpec:Br.valueSpec,style:Br.style,styleSpec:Br.styleSpec,arrayElementValidator:rr})),ga(rn)==="array"&&rn.length===0&&fn.push(new Fr(Br.key,rn,"array must have at least one stop")),fn}function rr(Br){var fn=[],rn=Br.value,Cn=Br.key;if(ga(rn)!=="array")return[new Fr(Cn,rn,"array expected, "+ga(rn)+" found")];if(rn.length!==2)return[new Fr(Cn,rn,"array length 2 expected, length "+rn.length+" found")];if(Mt){if(ga(rn[0])!=="object")return[new Fr(Cn,rn,"object expected, "+ga(rn[0])+" found")];if(rn[0].zoom===void 0)return[new Fr(Cn,rn,"object stop key must have zoom")];if(rn[0].value===void 0)return[new Fr(Cn,rn,"object stop key must have value")];if(Pe&&Pe>pn(rn[0].zoom))return[new Fr(Cn,rn[0].zoom,"stop zoom values must appear in ascending order")];pn(rn[0].zoom)!==Pe&&(Pe=pn(rn[0].zoom),Me=void 0,ge={}),fn=fn.concat(Ao({key:Cn+"[0]",value:rn[0],valueSpec:{zoom:{}},style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{zoom:ql,value:qt}}))}else fn=fn.concat(qt({key:Cn+"[0]",value:rn[0],valueSpec:{},style:Br.style,styleSpec:Br.styleSpec},rn));return Cu(ln(rn[1]))?fn.concat([new Fr(Cn+"[1]",rn[1],"expressions are not allowed in function stops.")]):fn.concat(Ir({key:Cn+"[1]",value:rn[1],valueSpec:I,style:Br.style,styleSpec:Br.styleSpec}))}function qt(Br,fn){var rn=ga(Br.value),Cn=pn(Br.value),gn=Br.value!==null?Br.value:fn;if(!se)se=rn;else if(rn!==se)return[new Fr(Br.key,gn,rn+" stop domain type must match previous stop domain type "+se)];if(rn!=="number"&&rn!=="string"&&rn!=="boolean")return[new Fr(Br.key,gn,"stop domain value must be a number, string, or boolean")];if(rn!=="number"&&W!=="categorical"){var Sn="number expected, "+rn+" found";return Gs(I)&&W===void 0&&(Sn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fr(Br.key,gn,Sn)]}return W==="categorical"&&rn==="number"&&(!isFinite(Cn)||Math.floor(Cn)!==Cn)?[new Fr(Br.key,gn,"integer expected, found "+Cn)]:W!=="categorical"&&rn==="number"&&Me!==void 0&&Cn<Me?[new Fr(Br.key,gn,"stop domain values must appear in ascending order")]:(Me=Cn,W==="categorical"&&Cn in ge?[new Fr(Br.key,gn,"stop domain values must be unique")]:(ge[Cn]=!0,[]))}function br(Br){return Ir({key:Br.key,value:Br.value,valueSpec:I,style:Br.style,styleSpec:Br.styleSpec})}}function il(R){var I=(R.expressionContext==="property"?Bf:nl)(ln(R.value),R.valueSpec);if(I.result==="error")return I.value.map(function(se){return new Fr(""+R.key+se.key,R.value,se.message)});var W=I.value.expression||I.value._styleExpression.expression;if(R.expressionContext==="property"&&R.propertyKey==="text-font"&&!W.outputDefined())return[new Fr(R.key,R.value,'Invalid data expression for "'+R.propertyKey+'". Output values must be contained as literals within the expression.')];if(R.expressionContext==="property"&&R.propertyType==="layout"&&!ml(W))return[new Fr(R.key,R.value,'"feature-state" data expressions are not supported with layout properties.')];if(R.expressionContext==="filter"&&!ml(W))return[new Fr(R.key,R.value,'"feature-state" data expressions are not supported with filters.')];if(R.expressionContext&&R.expressionContext.indexOf("cluster")===0){if(!mu(W,["zoom","feature-state"]))return[new Fr(R.key,R.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(R.expressionContext==="cluster-initial"&&!Ul(W))return[new Fr(R.key,R.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rh(R){var I=R.value,W=R.key,se=ga(I);return se!=="boolean"?[new Fr(W,I,"boolean expected, "+se+" found")]:[]}function Uo(R){var I=R.key,W=R.value,se=ga(W);return se!=="string"?[new Fr(I,W,"color expected, "+se+" found")]:lc(W)===null?[new Fr(I,W,'color expected, "'+W+'" found')]:[]}function Pu(R){var I=R.key,W=R.value,se=R.valueSpec,ge=[];return Array.isArray(se.values)?se.values.indexOf(pn(W))===-1&&ge.push(new Fr(I,W,"expected one of ["+se.values.join(", ")+"], "+JSON.stringify(W)+" found")):Object.keys(se.values).indexOf(pn(W))===-1&&ge.push(new Fr(I,W,"expected one of ["+Object.keys(se.values).join(", ")+"], "+JSON.stringify(W)+" found")),ge}function uf(R){if(R===!0||R===!1)return!0;if(!Array.isArray(R)||R.length===0)return!1;switch(R[0]){case"has":return R.length>=2&&R[1]!=="$id"&&R[1]!=="$type";case"in":return R.length>=3&&(typeof R[1]!="string"||Array.isArray(R[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return R.length!==3||Array.isArray(R[1])||Array.isArray(R[2]);case"any":case"all":for(var I=0,W=R.slice(1);I<W.length;I+=1){var se=W[I];if(!uf(se)&&typeof se!="boolean")return!1}return!0;default:return!0}}var Ws={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function al(R){if(R==null)return{filter:function(){return!0},needGeometry:!1};uf(R)||(R=Iu(R));var I=nl(R,Ws);if(I.result==="error")throw new Error(I.value.map(function(se){return se.key+": "+se.message}).join(", "));var W=Ru(R);return{filter:function(se,ge,Me){return I.value.evaluate(se,ge,{},Me)},needGeometry:W}}function Nf(R,I){return R<I?-1:R>I?1:0}function Ru(R){if(!Array.isArray(R))return!1;if(R[0]==="within")return!0;for(var I=1;I<R.length;I++)if(Ru(R[I]))return!0;return!1}function Iu(R){if(!R)return!0;var I=R[0];if(R.length<=1)return I!=="any";var W=I==="=="?ff(R[1],R[2],"=="):I==="!="?Ml(ff(R[1],R[2],"==")):I==="<"||I===">"||I==="<="||I===">="?ff(R[1],R[2],I):I==="any"?Lc(R.slice(1)):I==="all"?["all"].concat(R.slice(1).map(Iu)):I==="none"?["all"].concat(R.slice(1).map(Iu).map(Ml)):I==="in"?Du(R[1],R.slice(2)):I==="!in"?Ml(Du(R[1],R.slice(2))):I==="has"?Uf(R[1]):I==="!has"?Ml(Uf(R[1])):I==="within"?R:!0;return W}function ff(R,I,W){switch(R){case"$type":return["filter-type-"+W,I];case"$id":return["filter-id-"+W,I];default:return["filter-"+W,R,I]}}function Lc(R){return["any"].concat(R.map(Iu))}function Du(R,I){if(I.length===0)return!1;switch(R){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(W){return typeof W!=typeof I[0]})?["filter-in-large",R,["literal",I.sort(Nf)]]:["filter-in-small",R,["literal",I]]}}function Uf(R){switch(R){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",R]}}function Ml(R){return["!",R]}function Vf(R){return uf(ln(R.value))?il(Pn({},R,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ku(R)}function ku(R){var I=R.value,W=R.key;if(ga(I)!=="array")return[new Fr(W,I,"array expected, "+ga(I)+" found")];var se=R.styleSpec,ge,Me=[];if(I.length<1)return[new Fr(W,I,"filter array must have at least 1 element")];switch(Me=Me.concat(Pu({key:W+"[0]",value:I[0],valueSpec:se.filter_operator,style:R.style,styleSpec:R.styleSpec})),pn(I[0])){case"<":case"<=":case">":case">=":I.length>=2&&pn(I[1])==="$type"&&Me.push(new Fr(W,I,'"$type" cannot be use with operator "'+I[0]+'"'));case"==":case"!=":I.length!==3&&Me.push(new Fr(W,I,'filter array for operator "'+I[0]+'" must have 3 elements'));case"in":case"!in":I.length>=2&&(ge=ga(I[1]),ge!=="string"&&Me.push(new Fr(W+"[1]",I[1],"string expected, "+ge+" found")));for(var Pe=2;Pe<I.length;Pe++)ge=ga(I[Pe]),pn(I[1])==="$type"?Me=Me.concat(Pu({key:W+"["+Pe+"]",value:I[Pe],valueSpec:se.geometry_type,style:R.style,styleSpec:R.styleSpec})):ge!=="string"&&ge!=="number"&&ge!=="boolean"&&Me.push(new Fr(W+"["+Pe+"]",I[Pe],"string, number, or boolean expected, "+ge+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<I.length;Qe++)Me=Me.concat(ku({key:W+"["+Qe+"]",value:I[Qe],style:R.style,styleSpec:R.styleSpec}));break;case"has":case"!has":ge=ga(I[1]),I.length!==2?Me.push(new Fr(W,I,'filter array for "'+I[0]+'" operator must have 2 elements')):ge!=="string"&&Me.push(new Fr(W+"[1]",I[1],"string expected, "+ge+" found"));break;case"within":ge=ga(I[1]),I.length!==2?Me.push(new Fr(W,I,'filter array for "'+I[0]+'" operator must have 2 elements')):ge!=="object"&&Me.push(new Fr(W+"[1]",I[1],"object expected, "+ge+" found"));break}return Me}function _c(R,I){var W=R.key,se=R.style,ge=R.styleSpec,Me=R.value,Pe=R.objectKey,Qe=ge[I+"_"+R.layerType];if(!Qe)return[];var dt=Pe.match(/^(.*)-transition$/);if(I==="paint"&&dt&&Qe[dt[1]]&&Qe[dt[1]].transition)return Ir({key:W,value:Me,valueSpec:ge.transition,style:se,styleSpec:ge});var Mt=R.valueSpec||Qe[Pe];if(!Mt)return[new Fr(W,Me,'unknown property "'+Pe+'"')];var _t;if(ga(Me)==="string"&&Gs(Mt)&&!Mt.tokens&&(_t=/^{([^}]+)}$/.exec(Me)))return[new Fr(W,Me,'"'+Pe+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_t[1])+" }`.")];var Yt=[];return R.layerType==="symbol"&&(Pe==="text-field"&&se&&!se.glyphs&&Yt.push(new Fr(W,Me,'use of "text-field" requires a style "glyphs" property')),Pe==="text-font"&&Ql(ln(Me))&&pn(Me.type)==="identity"&&Yt.push(new Fr(W,Me,'"text-font" does not support identity functions'))),Yt.concat(Ir({key:R.key,value:Me,valueSpec:Mt,style:se,styleSpec:ge,expressionContext:"property",propertyType:I,propertyKey:Pe}))}function Je(R){return _c(R,"paint")}function at(R){return _c(R,"layout")}function yt(R){var I=[],W=R.value,se=R.key,ge=R.style,Me=R.styleSpec;!W.type&&!W.ref&&I.push(new Fr(se,W,'either "type" or "ref" is required'));var Pe=pn(W.type),Qe=pn(W.ref);if(W.id)for(var dt=pn(W.id),Mt=0;Mt<R.arrayIndex;Mt++){var _t=ge.layers[Mt];pn(_t.id)===dt&&I.push(new Fr(se,W.id,'duplicate layer id "'+W.id+'", previously used at line '+_t.id.__line__))}if("ref"in W){["type","source","source-layer","filter","layout"].forEach(function(br){br in W&&I.push(new Fr(se,W[br],'"'+br+'" is prohibited for ref layers'))});var Yt;ge.layers.forEach(function(br){pn(br.id)===Qe&&(Yt=br)}),Yt?Yt.ref?I.push(new Fr(se,W.ref,"ref cannot reference another ref layer")):Pe=pn(Yt.type):I.push(new Fr(se,W.ref,'ref layer "'+Qe+'" not found'))}else if(Pe!=="background")if(!W.source)I.push(new Fr(se,W,'missing required property "source"'));else{var rr=ge.sources&&ge.sources[W.source],qt=rr&&pn(rr.type);rr?qt==="vector"&&Pe==="raster"?I.push(new Fr(se,W.source,'layer "'+W.id+'" requires a raster source')):qt==="raster"&&Pe!=="raster"?I.push(new Fr(se,W.source,'layer "'+W.id+'" requires a vector source')):qt==="vector"&&!W["source-layer"]?I.push(new Fr(se,W,'layer "'+W.id+'" must specify a "source-layer"')):qt==="raster-dem"&&Pe!=="hillshade"?I.push(new Fr(se,W.source,"raster-dem source can only be used with layer type 'hillshade'.")):Pe==="line"&&W.paint&&W.paint["line-gradient"]&&(qt!=="geojson"||!rr.lineMetrics)&&I.push(new Fr(se,W,'layer "'+W.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new Fr(se,W.source,'source "'+W.source+'" not found'))}return I=I.concat(Ao({key:se,value:W,valueSpec:Me.layer,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ir({key:se+".type",value:W.type,valueSpec:Me.layer.type,style:R.style,styleSpec:R.styleSpec,object:W,objectKey:"type"})},filter:Vf,layout:function(Br){return Ao({layer:W,key:Br.key,value:Br.value,style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{"*":function(rn){return at(Pn({layerType:Pe},rn))}}})},paint:function(Br){return Ao({layer:W,key:Br.key,value:Br.value,style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{"*":function(rn){return Je(Pn({layerType:Pe},rn))}}})}}})),I}function xt(R){var I=R.value,W=R.key,se=ga(I);return se!=="string"?[new Fr(W,I,"string expected, "+se+" found")]:[]}var kt={promoteId:Ot};function Dt(R){var I=R.value,W=R.key,se=R.styleSpec,ge=R.style;if(!I.type)return[new Fr(W,I,'"type" is required')];var Me=pn(I.type),Pe;switch(Me){case"vector":case"raster":case"raster-dem":return Pe=Ao({key:W,value:I,valueSpec:se["source_"+Me.replace("-","_")],style:R.style,styleSpec:se,objectElementValidators:kt}),Pe;case"geojson":if(Pe=Ao({key:W,value:I,valueSpec:se.source_geojson,style:ge,styleSpec:se,objectElementValidators:kt}),I.cluster)for(var Qe in I.clusterProperties){var dt=I.clusterProperties[Qe],Mt=dt[0],_t=dt[1],Yt=typeof Mt=="string"?[Mt,["accumulated"],["get",Qe]]:Mt;Pe.push.apply(Pe,il({key:W+"."+Qe+".map",value:_t,expressionContext:"cluster-map"})),Pe.push.apply(Pe,il({key:W+"."+Qe+".reduce",value:Yt,expressionContext:"cluster-reduce"}))}return Pe;case"video":return Ao({key:W,value:I,valueSpec:se.source_video,style:ge,styleSpec:se});case"image":return Ao({key:W,value:I,valueSpec:se.source_image,style:ge,styleSpec:se});case"canvas":return[new Fr(W,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pu({key:W+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ge,styleSpec:se})}}function Ot(R){var I=R.key,W=R.value;if(ga(W)==="string")return xt({key:I,value:W});var se=[];for(var ge in W)se.push.apply(se,xt({key:I+"."+ge,value:W[ge]}));return se}function pr(R){var I=R.value,W=R.styleSpec,se=W.light,ge=R.style,Me=[],Pe=ga(I);if(I===void 0)return Me;if(Pe!=="object")return Me=Me.concat([new Fr("light",I,"object expected, "+Pe+" found")]),Me;for(var Qe in I){var dt=Qe.match(/^(.*)-transition$/);dt&&se[dt[1]]&&se[dt[1]].transition?Me=Me.concat(Ir({key:Qe,value:I[Qe],valueSpec:W.transition,style:ge,styleSpec:W})):se[Qe]?Me=Me.concat(Ir({key:Qe,value:I[Qe],valueSpec:se[Qe],style:ge,styleSpec:W})):Me=Me.concat([new Fr(Qe,I[Qe],'unknown property "'+Qe+'"')])}return Me}function wr(R){return xt(R).length===0?[]:il(R)}function nr(R){return xt(R).length===0?[]:il(R)}var Mr={"*":function(){return[]},array:_u,boolean:Rh,number:ql,color:Uo,constants:yn,enum:Pu,filter:Vf,function:Cc,layer:yt,object:Ao,source:Dt,light:pr,string:xt,formatted:wr,resolvedImage:nr};function Ir(R){var I=R.value,W=R.valueSpec,se=R.styleSpec;if(W.expression&&Ql(pn(I)))return Cc(R);if(W.expression&&Cu(ln(I)))return il(R);if(W.type&&Mr[W.type])return Mr[W.type](R);var ge=Ao(Pn({},R,{valueSpec:W.type?se[W.type]:W}));return ge}function Nr(R){var I=R.value,W=R.key,se=xt(R);return se.length||(I.indexOf("{fontstack}")===-1&&se.push(new Fr(W,I,'"glyphs" url must include a "{fontstack}" token')),I.indexOf("{range}")===-1&&se.push(new Fr(W,I,'"glyphs" url must include a "{range}" token'))),se}function an(R,I){I===void 0&&(I=Ar);var W=[];return W=W.concat(Ir({key:"",value:R,valueSpec:I.$root,styleSpec:I,style:R,objectElementValidators:{glyphs:Nr,"*":function(){return[]}}})),R.constants&&(W=W.concat(yn({key:"constants",value:R.constants,style:R,styleSpec:I}))),mn(W)}an.source=_n(Dt),an.light=_n(pr),an.layer=_n(yt),an.filter=_n(Vf),an.paintProperty=_n(Je),an.layoutProperty=_n(at);function mn(R){return[].concat(R).sort(function(I,W){return I.line-W.line})}function _n(R){return function(){for(var I=[],W=arguments.length;W--;)I[W]=arguments[W];return mn(R.apply(this,I))}}var Rn=an,Zn=Rn.light,_i=Rn.paintProperty,Pi=Rn.layoutProperty;function Ii(R,I){var W=!1;if(I&&I.length)for(var se=0,ge=I;se<ge.length;se+=1){var Me=ge[se];R.fire(new Ft(new Error(Me.message))),W=!0}return W}var zi=ya,Zi=3;function ya(R,I,W){var se=this.cells=[];if(R instanceof ArrayBuffer){this.arrayBuffer=R;var ge=new Int32Array(this.arrayBuffer);R=ge[0],I=ge[1],W=ge[2],this.d=I+2*W;for(var Me=0;Me<this.d*this.d;Me++){var Pe=ge[Zi+Me],Qe=ge[Zi+Me+1];se.push(Pe===Qe?null:ge.subarray(Pe,Qe))}var dt=ge[Zi+se.length],Mt=ge[Zi+se.length+1];this.keys=ge.subarray(dt,Mt),this.bboxes=ge.subarray(Mt),this.insert=this._insertReadonly}else{this.d=I+2*W;for(var _t=0;_t<this.d*this.d;_t++)se.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=R,this.padding=W,this.scale=I/R,this.uid=0;var Yt=W/I*R;this.min=-Yt,this.max=R+Yt}ya.prototype.insert=function(R,I,W,se,ge){this._forEachCell(I,W,se,ge,this._insertCell,this.uid++),this.keys.push(R),this.bboxes.push(I),this.bboxes.push(W),this.bboxes.push(se),this.bboxes.push(ge)},ya.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ya.prototype._insertCell=function(R,I,W,se,ge,Me){this.cells[ge].push(Me)},ya.prototype.query=function(R,I,W,se,ge){var Me=this.min,Pe=this.max;if(R<=Me&&I<=Me&&Pe<=W&&Pe<=se&&!ge)return Array.prototype.slice.call(this.keys);var Qe=[],dt={};return this._forEachCell(R,I,W,se,this._queryCell,Qe,dt,ge),Qe},ya.prototype._queryCell=function(R,I,W,se,ge,Me,Pe,Qe){var dt=this.cells[ge];if(dt!==null)for(var Mt=this.keys,_t=this.bboxes,Yt=0;Yt<dt.length;Yt++){var rr=dt[Yt];if(Pe[rr]===void 0){var qt=rr*4;(Qe?Qe(_t[qt+0],_t[qt+1],_t[qt+2],_t[qt+3]):R<=_t[qt+2]&&I<=_t[qt+3]&&W>=_t[qt+0]&&se>=_t[qt+1])?(Pe[rr]=!0,Me.push(Mt[rr])):Pe[rr]=!1}}},ya.prototype._forEachCell=function(R,I,W,se,ge,Me,Pe,Qe){for(var dt=this._convertToCellCoord(R),Mt=this._convertToCellCoord(I),_t=this._convertToCellCoord(W),Yt=this._convertToCellCoord(se),rr=dt;rr<=_t;rr++)for(var qt=Mt;qt<=Yt;qt++){var br=this.d*qt+rr;if(!(Qe&&!Qe(this._convertFromCellCoord(rr),this._convertFromCellCoord(qt),this._convertFromCellCoord(rr+1),this._convertFromCellCoord(qt+1)))&&ge.call(this,R,I,W,se,br,Me,Pe,Qe))return}},ya.prototype._convertFromCellCoord=function(R){return(R-this.padding)/this.scale},ya.prototype._convertToCellCoord=function(R){return Math.max(0,Math.min(this.d-1,Math.floor(R*this.scale)+this.padding))},ya.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var R=this.cells,I=Zi+this.cells.length+1+1,W=0,se=0;se<this.cells.length;se++)W+=this.cells[se].length;var ge=new Int32Array(I+W+this.keys.length+this.bboxes.length);ge[0]=this.extent,ge[1]=this.n,ge[2]=this.padding;for(var Me=I,Pe=0;Pe<R.length;Pe++){var Qe=R[Pe];ge[Zi+Pe]=Me,ge.set(Qe,Me),Me+=Qe.length}return ge[Zi+R.length]=Me,ge.set(this.keys,Me),Me+=this.keys.length,ge[Zi+R.length+1]=Me,ge.set(this.bboxes,Me),Me+=this.bboxes.length,ge.buffer};var Za=o.ImageData,ve=o.ImageBitmap,Se={};function Ve(R,I,W){W===void 0&&(W={}),Object.defineProperty(I,"_classRegistryKey",{value:R,writeable:!1}),Se[R]={klass:I,omit:W.omit||[],shallow:W.shallow||[]}}Ve("Object",Object),zi.serialize=function(I,W){var se=I.toArrayBuffer();return W&&W.push(se),{buffer:se}},zi.deserialize=function(I){return new zi(I.buffer)},Ve("Grid",zi),Ve("Color",ta),Ve("Error",Error),Ve("ResolvedImage",Po),Ve("StylePropertyFunction",Al),Ve("StyleExpression",rl,{omit:["_evaluator"]}),Ve("ZoomDependentExpression",Cs),Ve("ZoomConstantExpression",eo),Ve("CompoundExpression",so,{omit:["_evaluate"]});for(var tt in jl)jl[tt]._classRegistryKey||Ve("Expression_"+tt,jl[tt]);function it(R){return R&&typeof ArrayBuffer<"u"&&(R instanceof ArrayBuffer||R.constructor&&R.constructor.name==="ArrayBuffer")}function ct(R){return ve&&R instanceof ve}function Lt(R,I){if(R==null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||R instanceof Boolean||R instanceof Number||R instanceof String||R instanceof Date||R instanceof RegExp)return R;if(it(R)||ct(R))return I&&I.push(R),R;if(ArrayBuffer.isView(R)){var W=R;return I&&I.push(W.buffer),W}if(R instanceof Za)return I&&I.push(R.data.buffer),R;if(Array.isArray(R)){for(var se=[],ge=0,Me=R;ge<Me.length;ge+=1){var Pe=Me[ge];se.push(Lt(Pe,I))}return se}if(typeof R=="object"){var Qe=R.constructor,dt=Qe._classRegistryKey;if(!dt)throw new Error("can't serialize object of unregistered class");var Mt=Qe.serialize?Qe.serialize(R,I):{};if(!Qe.serialize){for(var _t in R)if(R.hasOwnProperty(_t)&&!(Se[dt].omit.indexOf(_t)>=0)){var Yt=R[_t];Mt[_t]=Se[dt].shallow.indexOf(_t)>=0?Yt:Lt(Yt,I)}R instanceof Error&&(Mt.message=R.message)}if(Mt.$name)throw new Error("$name property is reserved for worker serialization logic.");return dt!=="Object"&&(Mt.$name=dt),Mt}throw new Error("can't serialize object of type "+typeof R)}function At(R){if(R==null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||R instanceof Boolean||R instanceof Number||R instanceof String||R instanceof Date||R instanceof RegExp||it(R)||ct(R)||ArrayBuffer.isView(R)||R instanceof Za)return R;if(Array.isArray(R))return R.map(At);if(typeof R=="object"){var I=R.$name||"Object",W=Se[I],se=W.klass;if(!se)throw new Error("can't deserialize unregistered class "+I);if(se.deserialize)return se.deserialize(R);for(var ge=Object.create(se.prototype),Me=0,Pe=Object.keys(R);Me<Pe.length;Me+=1){var Qe=Pe[Me];if(Qe!=="$name"){var dt=R[Qe];ge[Qe]=Se[I].shallow.indexOf(Qe)>=0?dt:At(dt)}}return ge}throw new Error("can't deserialize object of type "+typeof R)}var Vt=function(){this.first=!0};Vt.prototype.update=function(I,W){var se=Math.floor(I);return this.first?(this.first=!1,this.lastIntegerZoom=se,this.lastIntegerZoomTime=0,this.lastZoom=I,this.lastFloorZoom=se,!0):(this.lastFloorZoom>se?(this.lastIntegerZoom=se+1,this.lastIntegerZoomTime=W):this.lastFloorZoom<se&&(this.lastIntegerZoom=se,this.lastIntegerZoomTime=W),I!==this.lastZoom?(this.lastZoom=I,this.lastFloorZoom=se,!0):!1)};var Wt={"Latin-1 Supplement":function(R){return R>=128&&R<=255},Arabic:function(R){return R>=1536&&R<=1791},"Arabic Supplement":function(R){return R>=1872&&R<=1919},"Arabic Extended-A":function(R){return R>=2208&&R<=2303},"Hangul Jamo":function(R){return R>=4352&&R<=4607},"Unified Canadian Aboriginal Syllabics":function(R){return R>=5120&&R<=5759},Khmer:function(R){return R>=6016&&R<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(R){return R>=6320&&R<=6399},"General Punctuation":function(R){return R>=8192&&R<=8303},"Letterlike Symbols":function(R){return R>=8448&&R<=8527},"Number Forms":function(R){return R>=8528&&R<=8591},"Miscellaneous Technical":function(R){return R>=8960&&R<=9215},"Control Pictures":function(R){return R>=9216&&R<=9279},"Optical Character Recognition":function(R){return R>=9280&&R<=9311},"Enclosed Alphanumerics":function(R){return R>=9312&&R<=9471},"Geometric Shapes":function(R){return R>=9632&&R<=9727},"Miscellaneous Symbols":function(R){return R>=9728&&R<=9983},"Miscellaneous Symbols and Arrows":function(R){return R>=11008&&R<=11263},"CJK Radicals Supplement":function(R){return R>=11904&&R<=12031},"Kangxi Radicals":function(R){return R>=12032&&R<=12255},"Ideographic Description Characters":function(R){return R>=12272&&R<=12287},"CJK Symbols and Punctuation":function(R){return R>=12288&&R<=12351},Hiragana:function(R){return R>=12352&&R<=12447},Katakana:function(R){return R>=12448&&R<=12543},Bopomofo:function(R){return R>=12544&&R<=12591},"Hangul Compatibility Jamo":function(R){return R>=12592&&R<=12687},Kanbun:function(R){return R>=12688&&R<=12703},"Bopomofo Extended":function(R){return R>=12704&&R<=12735},"CJK Strokes":function(R){return R>=12736&&R<=12783},"Katakana Phonetic Extensions":function(R){return R>=12784&&R<=12799},"Enclosed CJK Letters and Months":function(R){return R>=12800&&R<=13055},"CJK Compatibility":function(R){return R>=13056&&R<=13311},"CJK Unified Ideographs Extension A":function(R){return R>=13312&&R<=19903},"Yijing Hexagram Symbols":function(R){return R>=19904&&R<=19967},"CJK Unified Ideographs":function(R){return R>=19968&&R<=40959},"Yi Syllables":function(R){return R>=40960&&R<=42127},"Yi Radicals":function(R){return R>=42128&&R<=42191},"Hangul Jamo Extended-A":function(R){return R>=43360&&R<=43391},"Hangul Syllables":function(R){return R>=44032&&R<=55215},"Hangul Jamo Extended-B":function(R){return R>=55216&&R<=55295},"Private Use Area":function(R){return R>=57344&&R<=63743},"CJK Compatibility Ideographs":function(R){return R>=63744&&R<=64255},"Arabic Presentation Forms-A":function(R){return R>=64336&&R<=65023},"Vertical Forms":function(R){return R>=65040&&R<=65055},"CJK Compatibility Forms":function(R){return R>=65072&&R<=65103},"Small Form Variants":function(R){return R>=65104&&R<=65135},"Arabic Presentation Forms-B":function(R){return R>=65136&&R<=65279},"Halfwidth and Fullwidth Forms":function(R){return R>=65280&&R<=65519}};function tr(R){for(var I=0,W=R;I<W.length;I+=1){var se=W[I];if(on(se.charCodeAt(0)))return!0}return!1}function Cr(R){for(var I=0,W=R;I<W.length;I+=1){var se=W[I];if(!Lr(se.charCodeAt(0)))return!1}return!0}function Lr(R){return!(Wt.Arabic(R)||Wt["Arabic Supplement"](R)||Wt["Arabic Extended-A"](R)||Wt["Arabic Presentation Forms-A"](R)||Wt["Arabic Presentation Forms-B"](R))}function Qr(R){return R<11904?!1:!!(Wt["Bopomofo Extended"](R)||Wt.Bopomofo(R)||Wt["CJK Compatibility Forms"](R)||Wt["CJK Compatibility Ideographs"](R)||Wt["CJK Compatibility"](R)||Wt["CJK Radicals Supplement"](R)||Wt["CJK Strokes"](R)||Wt["CJK Symbols and Punctuation"](R)||Wt["CJK Unified Ideographs Extension A"](R)||Wt["CJK Unified Ideographs"](R)||Wt["Enclosed CJK Letters and Months"](R)||Wt["Halfwidth and Fullwidth Forms"](R)||Wt.Hiragana(R)||Wt["Ideographic Description Characters"](R)||Wt["Kangxi Radicals"](R)||Wt["Katakana Phonetic Extensions"](R)||Wt.Katakana(R)||Wt["Vertical Forms"](R)||Wt["Yi Radicals"](R)||Wt["Yi Syllables"](R))}function on(R){return R===746||R===747?!0:R<4352?!1:!!(Wt["Bopomofo Extended"](R)||Wt.Bopomofo(R)||Wt["CJK Compatibility Forms"](R)&&!(R>=65097&&R<=65103)||Wt["CJK Compatibility Ideographs"](R)||Wt["CJK Compatibility"](R)||Wt["CJK Radicals Supplement"](R)||Wt["CJK Strokes"](R)||Wt["CJK Symbols and Punctuation"](R)&&!(R>=12296&&R<=12305)&&!(R>=12308&&R<=12319)&&R!==12336||Wt["CJK Unified Ideographs Extension A"](R)||Wt["CJK Unified Ideographs"](R)||Wt["Enclosed CJK Letters and Months"](R)||Wt["Hangul Compatibility Jamo"](R)||Wt["Hangul Jamo Extended-A"](R)||Wt["Hangul Jamo Extended-B"](R)||Wt["Hangul Jamo"](R)||Wt["Hangul Syllables"](R)||Wt.Hiragana(R)||Wt["Ideographic Description Characters"](R)||Wt.Kanbun(R)||Wt["Kangxi Radicals"](R)||Wt["Katakana Phonetic Extensions"](R)||Wt.Katakana(R)&&R!==12540||Wt["Halfwidth and Fullwidth Forms"](R)&&R!==65288&&R!==65289&&R!==65293&&!(R>=65306&&R<=65310)&&R!==65339&&R!==65341&&R!==65343&&!(R>=65371&&R<=65503)&&R!==65507&&!(R>=65512&&R<=65519)||Wt["Small Form Variants"](R)&&!(R>=65112&&R<=65118)&&!(R>=65123&&R<=65126)||Wt["Unified Canadian Aboriginal Syllabics"](R)||Wt["Unified Canadian Aboriginal Syllabics Extended"](R)||Wt["Vertical Forms"](R)||Wt["Yijing Hexagram Symbols"](R)||Wt["Yi Syllables"](R)||Wt["Yi Radicals"](R))}function Pr(R){return!!(Wt["Latin-1 Supplement"](R)&&(R===167||R===169||R===174||R===177||R===188||R===189||R===190||R===215||R===247)||Wt["General Punctuation"](R)&&(R===8214||R===8224||R===8225||R===8240||R===8241||R===8251||R===8252||R===8258||R===8263||R===8264||R===8265||R===8273)||Wt["Letterlike Symbols"](R)||Wt["Number Forms"](R)||Wt["Miscellaneous Technical"](R)&&(R>=8960&&R<=8967||R>=8972&&R<=8991||R>=8996&&R<=9e3||R===9003||R>=9085&&R<=9114||R>=9150&&R<=9165||R===9167||R>=9169&&R<=9179||R>=9186&&R<=9215)||Wt["Control Pictures"](R)&&R!==9251||Wt["Optical Character Recognition"](R)||Wt["Enclosed Alphanumerics"](R)||Wt["Geometric Shapes"](R)||Wt["Miscellaneous Symbols"](R)&&!(R>=9754&&R<=9759)||Wt["Miscellaneous Symbols and Arrows"](R)&&(R>=11026&&R<=11055||R>=11088&&R<=11097||R>=11192&&R<=11243)||Wt["CJK Symbols and Punctuation"](R)||Wt.Katakana(R)||Wt["Private Use Area"](R)||Wt["CJK Compatibility Forms"](R)||Wt["Small Form Variants"](R)||Wt["Halfwidth and Fullwidth Forms"](R)||R===8734||R===8756||R===8757||R>=9984&&R<=10087||R>=10102&&R<=10131||R===65532||R===65533)}function Ur(R){return!(on(R)||Pr(R))}function jr(R){return Wt.Arabic(R)||Wt["Arabic Supplement"](R)||Wt["Arabic Extended-A"](R)||Wt["Arabic Presentation Forms-A"](R)||Wt["Arabic Presentation Forms-B"](R)}function cn(R){return R>=1424&&R<=2303||Wt["Arabic Presentation Forms-A"](R)||Wt["Arabic Presentation Forms-B"](R)}function dn(R,I){return!(!I&&cn(R)||R>=2304&&R<=3583||R>=3840&&R<=4255||Wt.Khmer(R))}function tn(R){for(var I=0,W=R;I<W.length;I+=1){var se=W[I];if(cn(se.charCodeAt(0)))return!0}return!1}function Vn(R,I){for(var W=0,se=R;W<se.length;W+=1){var ge=se[W];if(!dn(ge.charCodeAt(0),I))return!1}return!0}var ti={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},fi=null,qn=ti.unavailable,oi=null,ci=function(R){R&&typeof R=="string"&&R.indexOf("NetworkError")>-1&&(qn=ti.error),fi&&fi(R)};function Fi(){Ei.fire(new er("pluginStateChange",{pluginStatus:qn,pluginURL:oi}))}var Ei=new ir,Di=function(){return qn},aa=function(R){return R({pluginStatus:qn,pluginURL:oi}),Ei.on("pluginStateChange",R),R},Ka=function(R,I,W){if(W===void 0&&(W=!1),qn===ti.deferred||qn===ti.loading||qn===ti.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");oi=fe.resolveURL(R),qn=ti.deferred,fi=I,Fi(),W||ha()},ha=function(){if(qn!==ti.deferred||!oi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qn=ti.loading,Fi(),oi&&Bt({url:oi},function(R){R?ci(R):(qn=ti.loaded,Fi())})},Qn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return qn===ti.loaded||Qn.applyArabicShaping!=null},isLoading:function(){return qn===ti.loading},setState:function(I){qn=I.pluginStatus,oi=I.pluginURL},isParsed:function(){return Qn.applyArabicShaping!=null&&Qn.processBidirectionalText!=null&&Qn.processStyledBidirectionalText!=null},getPluginURL:function(){return oi}},Ni=function(){!Qn.isLoading()&&!Qn.isLoaded()&&Di()==="deferred"&&ha()},Ai=function(I,W){this.zoom=I,W?(this.now=W.now,this.fadeDuration=W.fadeDuration,this.zoomHistory=W.zoomHistory,this.transition=W.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vt,this.transition={})};Ai.prototype.isSupportedScript=function(I){return Vn(I,Qn.isLoaded())},Ai.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ai.prototype.getCrossfadeParameters=function(){var I=this.zoom,W=I-Math.floor(I),se=this.crossFadingFactor();return I>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:W+(1-W)*se}:{fromScale:.5,toScale:1,t:1-(1-se)*W}};var ji=function(I,W){this.property=I,this.value=W,this.expression=lf(W===void 0?I.specification.default:W,I.specification)};ji.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ji.prototype.possiblyEvaluate=function(I,W,se){return this.property.possiblyEvaluate(this,I,W,se)};var Ma=function(I){this.property=I,this.value=new ji(I,void 0)};Ma.prototype.transitioned=function(I,W){return new uo(this.property,this.value,W,x({},I.transition,this.transition),I.now)},Ma.prototype.untransitioned=function(){return new uo(this.property,this.value,null,{},0)};var oa=function(I){this._properties=I,this._values=Object.create(I.defaultTransitionablePropertyValues)};oa.prototype.getValue=function(I){return V(this._values[I].value.value)},oa.prototype.setValue=function(I,W){this._values.hasOwnProperty(I)||(this._values[I]=new Ma(this._values[I].property)),this._values[I].value=new ji(this._values[I].property,W===null?void 0:V(W))},oa.prototype.getTransition=function(I){return V(this._values[I].transition)},oa.prototype.setTransition=function(I,W){this._values.hasOwnProperty(I)||(this._values[I]=new Ma(this._values[I].property)),this._values[I].transition=V(W)||void 0},oa.prototype.serialize=function(){for(var I={},W=0,se=Object.keys(this._values);W<se.length;W+=1){var ge=se[W],Me=this.getValue(ge);Me!==void 0&&(I[ge]=Me);var Pe=this.getTransition(ge);Pe!==void 0&&(I[ge+"-transition"]=Pe)}return I},oa.prototype.transitioned=function(I,W){for(var se=new fo(this._properties),ge=0,Me=Object.keys(this._values);ge<Me.length;ge+=1){var Pe=Me[ge];se._values[Pe]=this._values[Pe].transitioned(I,W._values[Pe])}return se},oa.prototype.untransitioned=function(){for(var I=new fo(this._properties),W=0,se=Object.keys(this._values);W<se.length;W+=1){var ge=se[W];I._values[ge]=this._values[ge].untransitioned()}return I};var uo=function(I,W,se,ge,Me){this.property=I,this.value=W,this.begin=Me+ge.delay||0,this.end=this.begin+ge.duration||0,I.specification.transition&&(ge.delay||ge.duration)&&(this.prior=se)};uo.prototype.possiblyEvaluate=function(I,W,se){var ge=I.now||0,Me=this.value.possiblyEvaluate(I,W,se),Pe=this.prior;if(Pe){if(ge>this.end)return this.prior=null,Me;if(this.value.isDataDriven())return this.prior=null,Me;if(ge<this.begin)return Pe.possiblyEvaluate(I,W,se);var Qe=(ge-this.begin)/(this.end-this.begin);return this.property.interpolate(Pe.possiblyEvaluate(I,W,se),Me,u(Qe))}else return Me};var fo=function(I){this._properties=I,this._values=Object.create(I.defaultTransitioningPropertyValues)};fo.prototype.possiblyEvaluate=function(I,W,se){for(var ge=new Mo(this._properties),Me=0,Pe=Object.keys(this._values);Me<Pe.length;Me+=1){var Qe=Pe[Me];ge._values[Qe]=this._values[Qe].possiblyEvaluate(I,W,se)}return ge},fo.prototype.hasTransition=function(){for(var I=0,W=Object.keys(this._values);I<W.length;I+=1){var se=W[I];if(this._values[se].prior)return!0}return!1};var go=function(I){this._properties=I,this._values=Object.create(I.defaultPropertyValues)};go.prototype.getValue=function(I){return V(this._values[I].value)},go.prototype.setValue=function(I,W){this._values[I]=new ji(this._values[I].property,W===null?void 0:V(W))},go.prototype.serialize=function(){for(var I={},W=0,se=Object.keys(this._values);W<se.length;W+=1){var ge=se[W],Me=this.getValue(ge);Me!==void 0&&(I[ge]=Me)}return I},go.prototype.possiblyEvaluate=function(I,W,se){for(var ge=new Mo(this._properties),Me=0,Pe=Object.keys(this._values);Me<Pe.length;Me+=1){var Qe=Pe[Me];ge._values[Qe]=this._values[Qe].possiblyEvaluate(I,W,se)}return ge};var Ea=function(I,W,se){this.property=I,this.value=W,this.parameters=se};Ea.prototype.isConstant=function(){return this.value.kind==="constant"},Ea.prototype.constantOr=function(I){return this.value.kind==="constant"?this.value.value:I},Ea.prototype.evaluate=function(I,W,se,ge){return this.property.evaluate(this.value,this.parameters,I,W,se,ge)};var Mo=function(I){this._properties=I,this._values=Object.create(I.defaultPossiblyEvaluatedValues)};Mo.prototype.get=function(I){return this._values[I]};var li=function(I){this.specification=I};li.prototype.possiblyEvaluate=function(I,W){return I.expression.evaluate(W)},li.prototype.interpolate=function(I,W,se){var ge=$u[this.specification.type];return ge?ge(I,W,se):I};var Ci=function(I,W){this.specification=I,this.overrides=W};Ci.prototype.possiblyEvaluate=function(I,W,se,ge){return I.expression.kind==="constant"||I.expression.kind==="camera"?new Ea(this,{kind:"constant",value:I.expression.evaluate(W,null,{},se,ge)},W):new Ea(this,I.expression,W)},Ci.prototype.interpolate=function(I,W,se){if(I.value.kind!=="constant"||W.value.kind!=="constant")return I;if(I.value.value===void 0||W.value.value===void 0)return new Ea(this,{kind:"constant",value:void 0},I.parameters);var ge=$u[this.specification.type];return ge?new Ea(this,{kind:"constant",value:ge(I.value.value,W.value.value,se)},I.parameters):I},Ci.prototype.evaluate=function(I,W,se,ge,Me,Pe){return I.kind==="constant"?I.value:I.evaluate(W,se,ge,Me,Pe)};var Vo=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(se,ge,Me,Pe){if(se.value===void 0)return new Ea(this,{kind:"constant",value:void 0},ge);if(se.expression.kind==="constant"){var Qe=se.expression.evaluate(ge,null,{},Me,Pe),dt=se.property.specification.type==="resolvedImage",Mt=dt&&typeof Qe!="string"?Qe.name:Qe,_t=this._calculate(Mt,Mt,Mt,ge);return new Ea(this,{kind:"constant",value:_t},ge)}else if(se.expression.kind==="camera"){var Yt=this._calculate(se.expression.evaluate({zoom:ge.zoom-1}),se.expression.evaluate({zoom:ge.zoom}),se.expression.evaluate({zoom:ge.zoom+1}),ge);return new Ea(this,{kind:"constant",value:Yt},ge)}else return new Ea(this,se.expression,ge)},I.prototype.evaluate=function(se,ge,Me,Pe,Qe,dt){if(se.kind==="source"){var Mt=se.evaluate(ge,Me,Pe,Qe,dt);return this._calculate(Mt,Mt,Mt,ge)}else return se.kind==="composite"?this._calculate(se.evaluate({zoom:Math.floor(ge.zoom)-1},Me,Pe),se.evaluate({zoom:Math.floor(ge.zoom)},Me,Pe),se.evaluate({zoom:Math.floor(ge.zoom)+1},Me,Pe),ge):se.value},I.prototype._calculate=function(se,ge,Me,Pe){var Qe=Pe.zoom;return Qe>Pe.zoomHistory.lastIntegerZoom?{from:se,to:ge}:{from:Me,to:ge}},I.prototype.interpolate=function(se){return se},I}(Ci),Zo=function(I){this.specification=I};Zo.prototype.possiblyEvaluate=function(I,W,se,ge){if(I.value!==void 0)if(I.expression.kind==="constant"){var Me=I.expression.evaluate(W,null,{},se,ge);return this._calculate(Me,Me,Me,W)}else return this._calculate(I.expression.evaluate(new Ai(Math.floor(W.zoom-1),W)),I.expression.evaluate(new Ai(Math.floor(W.zoom),W)),I.expression.evaluate(new Ai(Math.floor(W.zoom+1),W)),W)},Zo.prototype._calculate=function(I,W,se,ge){var Me=ge.zoom;return Me>ge.zoomHistory.lastIntegerZoom?{from:I,to:W}:{from:se,to:W}},Zo.prototype.interpolate=function(I){return I};var yo=function(I){this.specification=I};yo.prototype.possiblyEvaluate=function(I,W,se,ge){return!!I.expression.evaluate(W,null,{},se,ge)},yo.prototype.interpolate=function(){return!1};var pa=function(I){this.properties=I,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var W in I){var se=I[W];se.specification.overridable&&this.overridableProperties.push(W);var ge=this.defaultPropertyValues[W]=new ji(se,void 0),Me=this.defaultTransitionablePropertyValues[W]=new Ma(se);this.defaultTransitioningPropertyValues[W]=Me.untransitioned(),this.defaultPossiblyEvaluatedValues[W]=ge.possiblyEvaluate({})}};Ve("DataDrivenProperty",Ci),Ve("DataConstantProperty",li),Ve("CrossFadedDataDrivenProperty",Vo),Ve("CrossFadedProperty",Zo),Ve("ColorRampProperty",yo);var to="-transition",Ja=function(R){function I(W,se){if(R.call(this),this.id=W.id,this.type=W.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},W.type!=="custom"&&(W=W,this.metadata=W.metadata,this.minzoom=W.minzoom,this.maxzoom=W.maxzoom,W.type!=="background"&&(this.source=W.source,this.sourceLayer=W["source-layer"],this.filter=W.filter),se.layout&&(this._unevaluatedLayout=new go(se.layout)),se.paint)){this._transitionablePaint=new oa(se.paint);for(var ge in W.paint)this.setPaintProperty(ge,W.paint[ge],{validate:!1});for(var Me in W.layout)this.setLayoutProperty(Me,W.layout[Me],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Mo(se.paint)}}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(se){return se==="visibility"?this.visibility:this._unevaluatedLayout.getValue(se)},I.prototype.setLayoutProperty=function(se,ge,Me){if(Me===void 0&&(Me={}),ge!=null){var Pe="layers."+this.id+".layout."+se;if(this._validate(Pi,Pe,se,ge,Me))return}if(se==="visibility"){this.visibility=ge;return}this._unevaluatedLayout.setValue(se,ge)},I.prototype.getPaintProperty=function(se){return b(se,to)?this._transitionablePaint.getTransition(se.slice(0,-to.length)):this._transitionablePaint.getValue(se)},I.prototype.setPaintProperty=function(se,ge,Me){if(Me===void 0&&(Me={}),ge!=null){var Pe="layers."+this.id+".paint."+se;if(this._validate(_i,Pe,se,ge,Me))return!1}if(b(se,to))return this._transitionablePaint.setTransition(se.slice(0,-to.length),ge||void 0),!1;var Qe=this._transitionablePaint._values[se],dt=Qe.property.specification["property-type"]==="cross-faded-data-driven",Mt=Qe.value.isDataDriven(),_t=Qe.value;this._transitionablePaint.setValue(se,ge),this._handleSpecialPaintPropertyUpdate(se);var Yt=this._transitionablePaint._values[se].value,rr=Yt.isDataDriven();return rr||Mt||dt||this._handleOverridablePaintPropertyUpdate(se,_t,Yt)},I.prototype._handleSpecialPaintPropertyUpdate=function(se){},I.prototype._handleOverridablePaintPropertyUpdate=function(se,ge,Me){return!1},I.prototype.isHidden=function(se){return this.minzoom&&se<this.minzoom||this.maxzoom&&se>=this.maxzoom?!0:this.visibility==="none"},I.prototype.updateTransitions=function(se){this._transitioningPaint=this._transitionablePaint.transitioned(se,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(se,ge){se.getCrossfadeParameters&&(this._crossfadeParameters=se.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(se,void 0,ge)),this.paint=this._transitioningPaint.possiblyEvaluate(se,void 0,ge)},I.prototype.serialize=function(){var se={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(se.layout=se.layout||{},se.layout.visibility=this.visibility),D(se,function(ge,Me){return ge!==void 0&&!(Me==="layout"&&!Object.keys(ge).length)&&!(Me==="paint"&&!Object.keys(ge).length)})},I.prototype._validate=function(se,ge,Me,Pe,Qe){return Qe===void 0&&(Qe={}),Qe&&Qe.validate===!1?!1:Ii(this,se.call(Rn,{key:ge,layerType:this.type,objectKey:Me,value:Pe,styleSpec:Ar,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var se in this.paint._values){var ge=this.paint.get(se);if(!(!(ge instanceof Ea)||!Gs(ge.property.specification))&&(ge.value.kind==="source"||ge.value.kind==="composite")&&ge.value.isStateDependent)return!0}return!1},I}(ir),Ls={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ys=function(I,W){this._structArray=I,this._pos1=W*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},za=128,eu=5,Ki=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ki.serialize=function(I,W){return I._trim(),W&&(I.isTransferred=!0,W.push(I.arrayBuffer)),{length:I.length,arrayBuffer:I.arrayBuffer}},Ki.deserialize=function(I){var W=Object.create(this.prototype);return W.arrayBuffer=I.arrayBuffer,W.length=I.length,W.capacity=I.arrayBuffer.byteLength/W.bytesPerElement,W._refreshViews(),W},Ki.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ki.prototype.clear=function(){this.length=0},Ki.prototype.resize=function(I){this.reserve(I),this.length=I},Ki.prototype.reserve=function(I){if(I>this.capacity){this.capacity=Math.max(I,Math.floor(this.capacity*eu),za),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var W=this.uint8;this._refreshViews(),W&&this.uint8.set(W)}},Ki.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Oa(R,I){I===void 0&&(I=1);var W=0,se=0,ge=R.map(function(Pe){var Qe=Ih(Pe.type),dt=W=Rp(W,Math.max(I,Qe)),Mt=Pe.components||1;return se=Math.max(se,Qe),W+=Qe*Mt,{name:Pe.name,type:Pe.type,components:Mt,offset:dt}}),Me=Rp(W,Math.max(se,I));return{members:ge,size:Me,alignment:I}}function Ih(R){return Ls[R].BYTES_PER_ELEMENT}function Rp(R,I){return Math.ceil(R/I)*I}var Hf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge){var Me=this.length;return this.resize(Me+1),this.emplace(Me,se,ge)},I.prototype.emplace=function(se,ge,Me){var Pe=se*2;return this.int16[Pe+0]=ge,this.int16[Pe+1]=Me,se},I}(Ki);Hf.prototype.bytesPerElement=4,Ve("StructArrayLayout2i4",Hf);var ld=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,se,ge,Me,Pe)},I.prototype.emplace=function(se,ge,Me,Pe,Qe){var dt=se*4;return this.int16[dt+0]=ge,this.int16[dt+1]=Me,this.int16[dt+2]=Pe,this.int16[dt+3]=Qe,se},I}(Ki);ld.prototype.bytesPerElement=8,Ve("StructArrayLayout4i8",ld);var cf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt){var Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,se,ge,Me,Pe,Qe,dt)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt){var _t=se*6;return this.int16[_t+0]=ge,this.int16[_t+1]=Me,this.int16[_t+2]=Pe,this.int16[_t+3]=Qe,this.int16[_t+4]=dt,this.int16[_t+5]=Mt,se},I}(Ki);cf.prototype.bytesPerElement=12,Ve("StructArrayLayout2i4i12",cf);var Pc=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt){var Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,se,ge,Me,Pe,Qe,dt)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt){var _t=se*4,Yt=se*8;return this.int16[_t+0]=ge,this.int16[_t+1]=Me,this.uint8[Yt+4]=Pe,this.uint8[Yt+5]=Qe,this.uint8[Yt+6]=dt,this.uint8[Yt+7]=Mt,se},I}(Ki);Pc.prototype.bytesPerElement=8,Ve("StructArrayLayout2i4ub8",Pc);var Rc=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge){var Me=this.length;return this.resize(Me+1),this.emplace(Me,se,ge)},I.prototype.emplace=function(se,ge,Me){var Pe=se*2;return this.float32[Pe+0]=ge,this.float32[Pe+1]=Me,se},I}(Ki);Rc.prototype.bytesPerElement=8,Ve("StructArrayLayout2f8",Rc);var vs=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr){var qt=this.length;return this.resize(qt+1),this.emplace(qt,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt){var br=se*10;return this.uint16[br+0]=ge,this.uint16[br+1]=Me,this.uint16[br+2]=Pe,this.uint16[br+3]=Qe,this.uint16[br+4]=dt,this.uint16[br+5]=Mt,this.uint16[br+6]=_t,this.uint16[br+7]=Yt,this.uint16[br+8]=rr,this.uint16[br+9]=qt,se},I}(Ki);vs.prototype.bytesPerElement=20,Ve("StructArrayLayout10ui20",vs);var hf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br){var Br=this.length;return this.resize(Br+1),this.emplace(Br,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br){var fn=se*12;return this.int16[fn+0]=ge,this.int16[fn+1]=Me,this.int16[fn+2]=Pe,this.int16[fn+3]=Qe,this.uint16[fn+4]=dt,this.uint16[fn+5]=Mt,this.uint16[fn+6]=_t,this.uint16[fn+7]=Yt,this.int16[fn+8]=rr,this.int16[fn+9]=qt,this.int16[fn+10]=br,this.int16[fn+11]=Br,se},I}(Ki);hf.prototype.bytesPerElement=24,Ve("StructArrayLayout4i4ui4i24",hf);var ud=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,se,ge,Me)},I.prototype.emplace=function(se,ge,Me,Pe){var Qe=se*3;return this.float32[Qe+0]=ge,this.float32[Qe+1]=Me,this.float32[Qe+2]=Pe,se},I}(Ki);ud.prototype.bytesPerElement=12,Ve("StructArrayLayout3f12",ud);var fd=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se){var ge=this.length;return this.resize(ge+1),this.emplace(ge,se)},I.prototype.emplace=function(se,ge){var Me=se*1;return this.uint32[Me+0]=ge,se},I}(Ki);fd.prototype.bytesPerElement=4,Ve("StructArrayLayout1ul4",fd);var Dh=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt){var rr=this.length;return this.resize(rr+1),this.emplace(rr,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr){var qt=se*10,br=se*5;return this.int16[qt+0]=ge,this.int16[qt+1]=Me,this.int16[qt+2]=Pe,this.int16[qt+3]=Qe,this.int16[qt+4]=dt,this.int16[qt+5]=Mt,this.uint32[br+3]=_t,this.uint16[qt+8]=Yt,this.uint16[qt+9]=rr,se},I}(Ki);Dh.prototype.bytesPerElement=20,Ve("StructArrayLayout6i1ul2ui20",Dh);var av=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt){var Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,se,ge,Me,Pe,Qe,dt)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt){var _t=se*6;return this.int16[_t+0]=ge,this.int16[_t+1]=Me,this.int16[_t+2]=Pe,this.int16[_t+3]=Qe,this.int16[_t+4]=dt,this.int16[_t+5]=Mt,se},I}(Ki);av.prototype.bytesPerElement=12,Ve("StructArrayLayout2i2i2i12",av);var zu=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe){var dt=this.length;return this.resize(dt+1),this.emplace(dt,se,ge,Me,Pe,Qe)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt){var Mt=se*4,_t=se*8;return this.float32[Mt+0]=ge,this.float32[Mt+1]=Me,this.float32[Mt+2]=Pe,this.int16[_t+6]=Qe,this.int16[_t+7]=dt,se},I}(Ki);zu.prototype.bytesPerElement=16,Ve("StructArrayLayout2f1f2i16",zu);var _s=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,se,ge,Me,Pe)},I.prototype.emplace=function(se,ge,Me,Pe,Qe){var dt=se*12,Mt=se*3;return this.uint8[dt+0]=ge,this.uint8[dt+1]=Me,this.float32[Mt+1]=Pe,this.float32[Mt+2]=Qe,se},I}(Ki);_s.prototype.bytesPerElement=12,Ve("StructArrayLayout2ub2f12",_s);var Ou=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,se,ge,Me)},I.prototype.emplace=function(se,ge,Me,Pe){var Qe=se*3;return this.uint16[Qe+0]=ge,this.uint16[Qe+1]=Me,this.uint16[Qe+2]=Pe,se},I}(Ki);Ou.prototype.bytesPerElement=6,Ve("StructArrayLayout3ui6",Ou);var kh=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn,Cn,gn){var Sn=this.length;return this.resize(Sn+1),this.emplace(Sn,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn,Cn,gn)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn,Cn,gn,Sn){var Dn=se*24,Wn=se*12,ni=se*48;return this.int16[Dn+0]=ge,this.int16[Dn+1]=Me,this.uint16[Dn+2]=Pe,this.uint16[Dn+3]=Qe,this.uint32[Wn+2]=dt,this.uint32[Wn+3]=Mt,this.uint32[Wn+4]=_t,this.uint16[Dn+10]=Yt,this.uint16[Dn+11]=rr,this.uint16[Dn+12]=qt,this.float32[Wn+7]=br,this.float32[Wn+8]=Br,this.uint8[ni+36]=fn,this.uint8[ni+37]=rn,this.uint8[ni+38]=Cn,this.uint32[Wn+10]=gn,this.int16[Dn+22]=Sn,se},I}(Ki);kh.prototype.bytesPerElement=48,Ve("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",kh);var ov=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn,Cn,gn,Sn,Dn,Wn,ni,ei,wi,pi,xi,Bi,Ti,Si){var Gi=this.length;return this.resize(Gi+1),this.emplace(Gi,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn,Cn,gn,Sn,Dn,Wn,ni,ei,wi,pi,xi,Bi,Ti,Si)},I.prototype.emplace=function(se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn,Cn,gn,Sn,Dn,Wn,ni,ei,wi,pi,xi,Bi,Ti,Si,Gi){var Oi=se*34,la=se*17;return this.int16[Oi+0]=ge,this.int16[Oi+1]=Me,this.int16[Oi+2]=Pe,this.int16[Oi+3]=Qe,this.int16[Oi+4]=dt,this.int16[Oi+5]=Mt,this.int16[Oi+6]=_t,this.int16[Oi+7]=Yt,this.uint16[Oi+8]=rr,this.uint16[Oi+9]=qt,this.uint16[Oi+10]=br,this.uint16[Oi+11]=Br,this.uint16[Oi+12]=fn,this.uint16[Oi+13]=rn,this.uint16[Oi+14]=Cn,this.uint16[Oi+15]=gn,this.uint16[Oi+16]=Sn,this.uint16[Oi+17]=Dn,this.uint16[Oi+18]=Wn,this.uint16[Oi+19]=ni,this.uint16[Oi+20]=ei,this.uint16[Oi+21]=wi,this.uint16[Oi+22]=pi,this.uint32[la+12]=xi,this.float32[la+13]=Bi,this.float32[la+14]=Ti,this.float32[la+15]=Si,this.float32[la+16]=Gi,se},I}(Ki);ov.prototype.bytesPerElement=68,Ve("StructArrayLayout8i15ui1ul4f68",ov);var Ic=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se){var ge=this.length;return this.resize(ge+1),this.emplace(ge,se)},I.prototype.emplace=function(se,ge){var Me=se*1;return this.float32[Me+0]=ge,se},I}(Ki);Ic.prototype.bytesPerElement=4,Ve("StructArrayLayout1f4",Ic);var cd=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,se,ge,Me)},I.prototype.emplace=function(se,ge,Me,Pe){var Qe=se*3;return this.int16[Qe+0]=ge,this.int16[Qe+1]=Me,this.int16[Qe+2]=Pe,se},I}(Ki);cd.prototype.bytesPerElement=6,Ve("StructArrayLayout3i6",cd);var vf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,se,ge,Me)},I.prototype.emplace=function(se,ge,Me,Pe){var Qe=se*2,dt=se*4;return this.uint32[Qe+0]=ge,this.uint16[dt+2]=Me,this.uint16[dt+3]=Pe,se},I}(Ki);vf.prototype.bytesPerElement=8,Ve("StructArrayLayout1ul2ui8",vf);var zh=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge){var Me=this.length;return this.resize(Me+1),this.emplace(Me,se,ge)},I.prototype.emplace=function(se,ge,Me){var Pe=se*2;return this.uint16[Pe+0]=ge,this.uint16[Pe+1]=Me,se},I}(Ki);zh.prototype.bytesPerElement=4,Ve("StructArrayLayout2ui4",zh);var Dc=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se){var ge=this.length;return this.resize(ge+1),this.emplace(ge,se)},I.prototype.emplace=function(se,ge){var Me=se*1;return this.uint16[Me+0]=ge,se},I}(Ki);Dc.prototype.bytesPerElement=2,Ve("StructArrayLayout1ui2",Dc);var Gf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(se,ge,Me,Pe){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,se,ge,Me,Pe)},I.prototype.emplace=function(se,ge,Me,Pe,Qe){var dt=se*4;return this.float32[dt+0]=ge,this.float32[dt+1]=Me,this.float32[dt+2]=Pe,this.float32[dt+3]=Qe,se},I}(Ki);Gf.prototype.bytesPerElement=16,Ve("StructArrayLayout4f16",Gf);var Ip=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I;var W={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return W.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},W.x1.get=function(){return this._structArray.int16[this._pos2+2]},W.y1.get=function(){return this._structArray.int16[this._pos2+3]},W.x2.get=function(){return this._structArray.int16[this._pos2+4]},W.y2.get=function(){return this._structArray.int16[this._pos2+5]},W.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},W.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},W.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},W.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,W),I}(Ys);Ip.prototype.size=20;var hd=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.get=function(se){return new Ip(this,se)},I}(Dh);Ve("CollisionBoxArray",hd);var Wf=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I;var W={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return W.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},W.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},W.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},W.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},W.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},W.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},W.segment.get=function(){return this._structArray.uint16[this._pos2+10]},W.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},W.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},W.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},W.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},W.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},W.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},W.placedOrientation.set=function(se){this._structArray.uint8[this._pos1+37]=se},W.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},W.hidden.set=function(se){this._structArray.uint8[this._pos1+38]=se},W.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},W.crossTileID.set=function(se){this._structArray.uint32[this._pos4+10]=se},W.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,W),I}(Ys);Wf.prototype.size=48;var vd=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.get=function(se){return new Wf(this,se)},I}(kh);Ve("PlacedSymbolArray",vd);var kc=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I;var W={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return W.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},W.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},W.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},W.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},W.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},W.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},W.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},W.key.get=function(){return this._structArray.uint16[this._pos2+8]},W.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},W.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},W.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},W.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},W.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},W.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},W.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},W.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},W.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},W.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},W.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},W.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},W.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},W.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},W.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},W.crossTileID.set=function(se){this._structArray.uint32[this._pos4+12]=se},W.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},W.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},W.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},W.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,W),I}(Ys);kc.prototype.size=68;var Dp=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.get=function(se){return new kc(this,se)},I}(ov);Ve("SymbolInstanceArray",Dp);var kp=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.getoffsetX=function(se){return this.float32[se*1+0]},I}(Ic);Ve("GlyphOffsetArray",kp);var El=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.getx=function(se){return this.int16[se*3+0]},I.prototype.gety=function(se){return this.int16[se*3+1]},I.prototype.gettileUnitDistanceFromAnchor=function(se){return this.int16[se*3+2]},I}(cd);Ve("SymbolLineVertexArray",El);var zp=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I;var W={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return W.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},W.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},W.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,W),I}(Ys);zp.prototype.size=8;var Op=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.get=function(se){return new zp(this,se)},I}(vf);Ve("FeatureIndexArray",Op);var Lg=Oa([{name:"a_pos",components:2,type:"Int16"}],4),Fp=Lg.members,mo=function(I){I===void 0&&(I=[]),this.segments=I};mo.prototype.prepareSegment=function(I,W,se,ge){var Me=this.segments[this.segments.length-1];return I>mo.MAX_VERTEX_ARRAY_LENGTH&&B("Max vertices per segment is "+mo.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+I),(!Me||Me.vertexLength+I>mo.MAX_VERTEX_ARRAY_LENGTH||Me.sortKey!==ge)&&(Me={vertexOffset:W.length,primitiveOffset:se.length,vertexLength:0,primitiveLength:0},ge!==void 0&&(Me.sortKey=ge),this.segments.push(Me)),Me},mo.prototype.get=function(){return this.segments},mo.prototype.destroy=function(){for(var I=0,W=this.segments;I<W.length;I+=1){var se=W[I];for(var ge in se.vaos)se.vaos[ge].destroy()}},mo.simpleSegment=function(I,W,se,ge){return new mo([{vertexOffset:I,primitiveOffset:W,vertexLength:se,primitiveLength:ge,vaos:{},sortKey:0}])},mo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ve("SegmentVector",mo);function de(R,I){return R=h(Math.floor(R),0,255),I=h(Math.floor(I),0,255),256*R+I}var Q=Oa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ye=E(function(R){function I(W,se){var ge,Me,Pe,Qe,dt,Mt,_t,Yt;for(ge=W.length&3,Me=W.length-ge,Pe=se,dt=3432918353,Mt=461845907,Yt=0;Yt<Me;)_t=W.charCodeAt(Yt)&255|(W.charCodeAt(++Yt)&255)<<8|(W.charCodeAt(++Yt)&255)<<16|(W.charCodeAt(++Yt)&255)<<24,++Yt,_t=(_t&65535)*dt+(((_t>>>16)*dt&65535)<<16)&4294967295,_t=_t<<15|_t>>>17,_t=(_t&65535)*Mt+(((_t>>>16)*Mt&65535)<<16)&4294967295,Pe^=_t,Pe=Pe<<13|Pe>>>19,Qe=(Pe&65535)*5+(((Pe>>>16)*5&65535)<<16)&4294967295,Pe=(Qe&65535)+27492+(((Qe>>>16)+58964&65535)<<16);switch(_t=0,ge){case 3:_t^=(W.charCodeAt(Yt+2)&255)<<16;case 2:_t^=(W.charCodeAt(Yt+1)&255)<<8;case 1:_t^=W.charCodeAt(Yt)&255,_t=(_t&65535)*dt+(((_t>>>16)*dt&65535)<<16)&4294967295,_t=_t<<15|_t>>>17,_t=(_t&65535)*Mt+(((_t>>>16)*Mt&65535)<<16)&4294967295,Pe^=_t}return Pe^=W.length,Pe^=Pe>>>16,Pe=(Pe&65535)*2246822507+(((Pe>>>16)*2246822507&65535)<<16)&4294967295,Pe^=Pe>>>13,Pe=(Pe&65535)*3266489909+(((Pe>>>16)*3266489909&65535)<<16)&4294967295,Pe^=Pe>>>16,Pe>>>0}R.exports=I}),ae=E(function(R){function I(W,se){for(var ge=W.length,Me=se^ge,Pe=0,Qe;ge>=4;)Qe=W.charCodeAt(Pe)&255|(W.charCodeAt(++Pe)&255)<<8|(W.charCodeAt(++Pe)&255)<<16|(W.charCodeAt(++Pe)&255)<<24,Qe=(Qe&65535)*1540483477+(((Qe>>>16)*1540483477&65535)<<16),Qe^=Qe>>>24,Qe=(Qe&65535)*1540483477+(((Qe>>>16)*1540483477&65535)<<16),Me=(Me&65535)*1540483477+(((Me>>>16)*1540483477&65535)<<16)^Qe,ge-=4,++Pe;switch(ge){case 3:Me^=(W.charCodeAt(Pe+2)&255)<<16;case 2:Me^=(W.charCodeAt(Pe+1)&255)<<8;case 1:Me^=W.charCodeAt(Pe)&255,Me=(Me&65535)*1540483477+(((Me>>>16)*1540483477&65535)<<16)}return Me^=Me>>>13,Me=(Me&65535)*1540483477+(((Me>>>16)*1540483477&65535)<<16),Me^=Me>>>15,Me>>>0}R.exports=I}),me=ye,Be=ye,Ke=ae;me.murmur3=Be,me.murmur2=Ke;var ft=function(){this.ids=[],this.positions=[],this.indexed=!1};ft.prototype.add=function(I,W,se,ge){this.ids.push(Ut(I)),this.positions.push(W,se,ge)},ft.prototype.getPositions=function(I){for(var W=Ut(I),se=0,ge=this.ids.length-1;se<ge;){var Me=se+ge>>1;this.ids[Me]>=W?ge=Me:se=Me+1}for(var Pe=[];this.ids[se]===W;){var Qe=this.positions[3*se],dt=this.positions[3*se+1],Mt=this.positions[3*se+2];Pe.push({index:Qe,start:dt,end:Mt}),se++}return Pe},ft.serialize=function(I,W){var se=new Float64Array(I.ids),ge=new Uint32Array(I.positions);return $t(se,ge,0,se.length-1),W&&W.push(se.buffer,ge.buffer),{ids:se,positions:ge}},ft.deserialize=function(I){var W=new ft;return W.ids=I.ids,W.positions=I.positions,W.indexed=!0,W};var Ct=Math.pow(2,53)-1;function Ut(R){var I=+R;return!isNaN(I)&&I<=Ct?I:me(String(R))}function $t(R,I,W,se){for(;W<se;){for(var ge=R[W+se>>1],Me=W-1,Pe=se+1;;){do Me++;while(R[Me]<ge);do Pe--;while(R[Pe]>ge);if(Me>=Pe)break;lr(R,Me,Pe),lr(I,3*Me,3*Pe),lr(I,3*Me+1,3*Pe+1),lr(I,3*Me+2,3*Pe+2)}Pe-W<se-Pe?($t(R,I,W,Pe),W=Pe+1):($t(R,I,Pe+1,se),se=Pe)}}function lr(R,I,W){var se=R[I];R[I]=R[W],R[W]=se}Ve("FeaturePositionMap",ft);var ar=function(I,W){this.gl=I.gl,this.location=W},Dr=function(R){function I(W,se){R.call(this,W,se),this.current=0}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.set=function(se){this.current!==se&&(this.current=se,this.gl.uniform1i(this.location,se))},I}(ar),Xr=function(R){function I(W,se){R.call(this,W,se),this.current=0}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.set=function(se){this.current!==se&&(this.current=se,this.gl.uniform1f(this.location,se))},I}(ar),Yr=function(R){function I(W,se){R.call(this,W,se),this.current=[0,0]}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.set=function(se){(se[0]!==this.current[0]||se[1]!==this.current[1])&&(this.current=se,this.gl.uniform2f(this.location,se[0],se[1]))},I}(ar),Gr=function(R){function I(W,se){R.call(this,W,se),this.current=[0,0,0]}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.set=function(se){(se[0]!==this.current[0]||se[1]!==this.current[1]||se[2]!==this.current[2])&&(this.current=se,this.gl.uniform3f(this.location,se[0],se[1],se[2]))},I}(ar),Jr=function(R){function I(W,se){R.call(this,W,se),this.current=[0,0,0,0]}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.set=function(se){(se[0]!==this.current[0]||se[1]!==this.current[1]||se[2]!==this.current[2]||se[3]!==this.current[3])&&(this.current=se,this.gl.uniform4f(this.location,se[0],se[1],se[2],se[3]))},I}(ar),vn=function(R){function I(W,se){R.call(this,W,se),this.current=ta.transparent}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.set=function(se){(se.r!==this.current.r||se.g!==this.current.g||se.b!==this.current.b||se.a!==this.current.a)&&(this.current=se,this.gl.uniform4f(this.location,se.r,se.g,se.b,se.a))},I}(ar),In=new Float32Array(16),Bn=function(R){function I(W,se){R.call(this,W,se),this.current=In}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.set=function(se){if(se[12]!==this.current[12]||se[0]!==this.current[0]){this.current=se,this.gl.uniformMatrix4fv(this.location,!1,se);return}for(var ge=1;ge<16;ge++)if(se[ge]!==this.current[ge]){this.current=se,this.gl.uniformMatrix4fv(this.location,!1,se);break}},I}(ar);function Yn(R){return[de(255*R.r,255*R.g),de(255*R.b,255*R.a)]}var Xn=function(I,W,se){this.value=I,this.uniformNames=W.map(function(ge){return"u_"+ge}),this.type=se};Xn.prototype.setUniform=function(I,W,se){I.set(se.constantOr(this.value))},Xn.prototype.getBinding=function(I,W,se){return this.type==="color"?new vn(I,W):new Xr(I,W)};var Gn=function(I,W){this.uniformNames=W.map(function(se){return"u_"+se}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Gn.prototype.setConstantPatternPositions=function(I,W){this.pixelRatioFrom=W.pixelRatio,this.pixelRatioTo=I.pixelRatio,this.patternFrom=W.tlbr,this.patternTo=I.tlbr},Gn.prototype.setUniform=function(I,W,se,ge){var Me=ge==="u_pattern_to"?this.patternTo:ge==="u_pattern_from"?this.patternFrom:ge==="u_pixel_ratio_to"?this.pixelRatioTo:ge==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Me&&I.set(Me)},Gn.prototype.getBinding=function(I,W,se){return se.substr(0,9)==="u_pattern"?new Jr(I,W):new Xr(I,W)};var jn=function(I,W,se,ge){this.expression=I,this.type=se,this.maxValue=0,this.paintVertexAttributes=W.map(function(Me){return{name:"a_"+Me,type:"Float32",components:se==="color"?2:1,offset:0}}),this.paintVertexArray=new ge};jn.prototype.populatePaintArray=function(I,W,se,ge,Me){var Pe=this.paintVertexArray.length,Qe=this.expression.evaluate(new Ai(0),W,{},ge,[],Me);this.paintVertexArray.resize(I),this._setPaintValue(Pe,I,Qe)},jn.prototype.updatePaintArray=function(I,W,se,ge){var Me=this.expression.evaluate({zoom:0},se,ge);this._setPaintValue(I,W,Me)},jn.prototype._setPaintValue=function(I,W,se){if(this.type==="color")for(var ge=Yn(se),Me=I;Me<W;Me++)this.paintVertexArray.emplace(Me,ge[0],ge[1]);else{for(var Pe=I;Pe<W;Pe++)this.paintVertexArray.emplace(Pe,se);this.maxValue=Math.max(this.maxValue,Math.abs(se))}},jn.prototype.upload=function(I){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=I.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ri=function(I,W,se,ge,Me,Pe){this.expression=I,this.uniformNames=W.map(function(Qe){return"u_"+Qe+"_t"}),this.type=se,this.useIntegerZoom=ge,this.zoom=Me,this.maxValue=0,this.paintVertexAttributes=W.map(function(Qe){return{name:"a_"+Qe,type:"Float32",components:se==="color"?4:2,offset:0}}),this.paintVertexArray=new Pe};ri.prototype.populatePaintArray=function(I,W,se,ge,Me){var Pe=this.expression.evaluate(new Ai(this.zoom),W,{},ge,[],Me),Qe=this.expression.evaluate(new Ai(this.zoom+1),W,{},ge,[],Me),dt=this.paintVertexArray.length;this.paintVertexArray.resize(I),this._setPaintValue(dt,I,Pe,Qe)},ri.prototype.updatePaintArray=function(I,W,se,ge){var Me=this.expression.evaluate({zoom:this.zoom},se,ge),Pe=this.expression.evaluate({zoom:this.zoom+1},se,ge);this._setPaintValue(I,W,Me,Pe)},ri.prototype._setPaintValue=function(I,W,se,ge){if(this.type==="color")for(var Me=Yn(se),Pe=Yn(ge),Qe=I;Qe<W;Qe++)this.paintVertexArray.emplace(Qe,Me[0],Me[1],Pe[0],Pe[1]);else{for(var dt=I;dt<W;dt++)this.paintVertexArray.emplace(dt,se,ge);this.maxValue=Math.max(this.maxValue,Math.abs(se),Math.abs(ge))}},ri.prototype.upload=function(I){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=I.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ri.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ri.prototype.setUniform=function(I,W){var se=this.useIntegerZoom?Math.floor(W.zoom):W.zoom,ge=h(this.expression.interpolationFactor(se,this.zoom,this.zoom+1),0,1);I.set(ge)},ri.prototype.getBinding=function(I,W,se){return new Xr(I,W)};var ui=function(I,W,se,ge,Me,Pe){this.expression=I,this.type=W,this.useIntegerZoom=se,this.zoom=ge,this.layerId=Pe,this.zoomInPaintVertexArray=new Me,this.zoomOutPaintVertexArray=new Me};ui.prototype.populatePaintArray=function(I,W,se){var ge=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(I),this.zoomOutPaintVertexArray.resize(I),this._setPaintValues(ge,I,W.patterns&&W.patterns[this.layerId],se)},ui.prototype.updatePaintArray=function(I,W,se,ge,Me){this._setPaintValues(I,W,se.patterns&&se.patterns[this.layerId],Me)},ui.prototype._setPaintValues=function(I,W,se,ge){if(!(!ge||!se)){var Me=se.min,Pe=se.mid,Qe=se.max,dt=ge[Me],Mt=ge[Pe],_t=ge[Qe];if(!(!dt||!Mt||!_t))for(var Yt=I;Yt<W;Yt++)this.zoomInPaintVertexArray.emplace(Yt,Mt.tl[0],Mt.tl[1],Mt.br[0],Mt.br[1],dt.tl[0],dt.tl[1],dt.br[0],dt.br[1],Mt.pixelRatio,dt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Yt,Mt.tl[0],Mt.tl[1],Mt.br[0],Mt.br[1],_t.tl[0],_t.tl[1],_t.br[0],_t.br[1],Mt.pixelRatio,_t.pixelRatio)}},ui.prototype.upload=function(I){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=I.createVertexBuffer(this.zoomInPaintVertexArray,Q.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=I.createVertexBuffer(this.zoomOutPaintVertexArray,Q.members,this.expression.isStateDependent))},ui.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var mi=function(I,W,se){this.binders={},this._buffers=[];var ge=[];for(var Me in I.paint._values)if(se(Me)){var Pe=I.paint.get(Me);if(!(!(Pe instanceof Ea)||!Gs(Pe.property.specification))){var Qe=ki(Me,I.type),dt=Pe.value,Mt=Pe.property.specification.type,_t=Pe.property.useIntegerZoom,Yt=Pe.property.specification["property-type"],rr=Yt==="cross-faded"||Yt==="cross-faded-data-driven";if(dt.kind==="constant")this.binders[Me]=rr?new Gn(dt.value,Qe):new Xn(dt.value,Qe,Mt),ge.push("/u_"+Me);else if(dt.kind==="source"||rr){var qt=Yi(Me,Mt,"source");this.binders[Me]=rr?new ui(dt,Mt,_t,W,qt,I.id):new jn(dt,Qe,Mt,qt),ge.push("/a_"+Me)}else{var br=Yi(Me,Mt,"composite");this.binders[Me]=new ri(dt,Qe,Mt,_t,W,br),ge.push("/z_"+Me)}}}this.cacheKey=ge.sort().join("")};mi.prototype.getMaxValue=function(I){var W=this.binders[I];return W instanceof jn||W instanceof ri?W.maxValue:0},mi.prototype.populatePaintArrays=function(I,W,se,ge,Me){for(var Pe in this.binders){var Qe=this.binders[Pe];(Qe instanceof jn||Qe instanceof ri||Qe instanceof ui)&&Qe.populatePaintArray(I,W,se,ge,Me)}},mi.prototype.setConstantPatternPositions=function(I,W){for(var se in this.binders){var ge=this.binders[se];ge instanceof Gn&&ge.setConstantPatternPositions(I,W)}},mi.prototype.updatePaintArrays=function(I,W,se,ge,Me){var Pe=!1;for(var Qe in I)for(var dt=W.getPositions(Qe),Mt=0,_t=dt;Mt<_t.length;Mt+=1){var Yt=_t[Mt],rr=se.feature(Yt.index);for(var qt in this.binders){var br=this.binders[qt];if((br instanceof jn||br instanceof ri||br instanceof ui)&&br.expression.isStateDependent===!0){var Br=ge.paint.get(qt);br.expression=Br.value,br.updatePaintArray(Yt.start,Yt.end,rr,I[Qe],Me),Pe=!0}}}return Pe},mi.prototype.defines=function(){var I=[];for(var W in this.binders){var se=this.binders[W];(se instanceof Xn||se instanceof Gn)&&I.push.apply(I,se.uniformNames.map(function(ge){return"#define HAS_UNIFORM_"+ge}))}return I},mi.prototype.getBinderAttributes=function(){var I=[];for(var W in this.binders){var se=this.binders[W];if(se instanceof jn||se instanceof ri)for(var ge=0;ge<se.paintVertexAttributes.length;ge++)I.push(se.paintVertexAttributes[ge].name);else if(se instanceof ui)for(var Me=0;Me<Q.members.length;Me++)I.push(Q.members[Me].name)}return I},mi.prototype.getBinderUniforms=function(){var I=[];for(var W in this.binders){var se=this.binders[W];if(se instanceof Xn||se instanceof Gn||se instanceof ri)for(var ge=0,Me=se.uniformNames;ge<Me.length;ge+=1){var Pe=Me[ge];I.push(Pe)}}return I},mi.prototype.getPaintVertexBuffers=function(){return this._buffers},mi.prototype.getUniforms=function(I,W){var se=[];for(var ge in this.binders){var Me=this.binders[ge];if(Me instanceof Xn||Me instanceof Gn||Me instanceof ri)for(var Pe=0,Qe=Me.uniformNames;Pe<Qe.length;Pe+=1){var dt=Qe[Pe];if(W[dt]){var Mt=Me.getBinding(I,W[dt],dt);se.push({name:dt,property:ge,binding:Mt})}}}return se},mi.prototype.setUniforms=function(I,W,se,ge){for(var Me=0,Pe=W;Me<Pe.length;Me+=1){var Qe=Pe[Me],dt=Qe.name,Mt=Qe.property,_t=Qe.binding;this.binders[Mt].setUniform(_t,ge,se.get(Mt),dt)}},mi.prototype.updatePaintBuffers=function(I){this._buffers=[];for(var W in this.binders){var se=this.binders[W];if(I&&se instanceof ui){var ge=I.fromScale===2?se.zoomInPaintVertexBuffer:se.zoomOutPaintVertexBuffer;ge&&this._buffers.push(ge)}else(se instanceof jn||se instanceof ri)&&se.paintVertexBuffer&&this._buffers.push(se.paintVertexBuffer)}},mi.prototype.upload=function(I){for(var W in this.binders){var se=this.binders[W];(se instanceof jn||se instanceof ri||se instanceof ui)&&se.upload(I)}this.updatePaintBuffers()},mi.prototype.destroy=function(){for(var I in this.binders){var W=this.binders[I];(W instanceof jn||W instanceof ri||W instanceof ui)&&W.destroy()}};var di=function(I,W,se){se===void 0&&(se=function(){return!0}),this.programConfigurations={};for(var ge=0,Me=I;ge<Me.length;ge+=1){var Pe=Me[ge];this.programConfigurations[Pe.id]=new mi(Pe,W,se)}this.needsUpload=!1,this._featureMap=new ft,this._bufferOffset=0};di.prototype.populatePaintArrays=function(I,W,se,ge,Me,Pe){for(var Qe in this.programConfigurations)this.programConfigurations[Qe].populatePaintArrays(I,W,ge,Me,Pe);W.id!==void 0&&this._featureMap.add(W.id,se,this._bufferOffset,I),this._bufferOffset=I,this.needsUpload=!0},di.prototype.updatePaintArrays=function(I,W,se,ge){for(var Me=0,Pe=se;Me<Pe.length;Me+=1){var Qe=Pe[Me];this.needsUpload=this.programConfigurations[Qe.id].updatePaintArrays(I,this._featureMap,W,Qe,ge)||this.needsUpload}},di.prototype.get=function(I){return this.programConfigurations[I]},di.prototype.upload=function(I){if(this.needsUpload){for(var W in this.programConfigurations)this.programConfigurations[W].upload(I);this.needsUpload=!1}},di.prototype.destroy=function(){for(var I in this.programConfigurations)this.programConfigurations[I].destroy()};function ki(R,I){var W={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return W[R]||[R.replace(I+"-","").replace(/-/g,"_")]}function qi(R){var I={"line-pattern":{source:vs,composite:vs},"fill-pattern":{source:vs,composite:vs},"fill-extrusion-pattern":{source:vs,composite:vs}};return I[R]}function Yi(R,I,W){var se={color:{source:Rc,composite:Gf},number:{source:Ic,composite:Rc}},ge=qi(R);return ge&&ge[W]||se[I][W]}Ve("ConstantBinder",Xn),Ve("CrossFadedConstantBinder",Gn),Ve("SourceExpressionBinder",jn),Ve("CrossFadedCompositeBinder",ui),Ve("CompositeExpressionBinder",ri),Ve("ProgramConfiguration",mi,{omit:["_buffers"]}),Ve("ProgramConfigurationSet",di);var Mi=8192,Xi=15,Ui=Math.pow(2,Xi-1)-1,sa=-Ui-1;function ra(R){for(var I=Mi/R.extent,W=R.loadGeometry(),se=0;se<W.length;se++)for(var ge=W[se],Me=0;Me<ge.length;Me++){var Pe=ge[Me],Qe=Math.round(Pe.x*I),dt=Math.round(Pe.y*I);Pe.x=h(Qe,sa,Ui),Pe.y=h(dt,sa,Ui),(Qe<Pe.x||Qe>Pe.x+1||dt<Pe.y||dt>Pe.y+1)&&B("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return W}function Pa(R,I){return{type:R.type,id:R.id,properties:R.properties,geometry:I?ra(R):[]}}function Qi(R,I,W,se,ge){R.emplaceBack(I*2+(se+1)/2,W*2+(ge+1)/2)}var ba=function(I){this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(W){return W.id}),this.index=I.index,this.hasPattern=!1,this.layoutVertexArray=new Hf,this.indexArray=new Ou,this.segments=new mo,this.programConfigurations=new di(I.layers,I.zoom),this.stateDependentLayerIds=this.layers.filter(function(W){return W.isStateDependent()}).map(function(W){return W.id})};ba.prototype.populate=function(I,W,se){var ge=this.layers[0],Me=[],Pe=null;ge.type==="circle"&&(Pe=ge.layout.get("circle-sort-key"));for(var Qe=0,dt=I;Qe<dt.length;Qe+=1){var Mt=dt[Qe],_t=Mt.feature,Yt=Mt.id,rr=Mt.index,qt=Mt.sourceLayerIndex,br=this.layers[0]._featureFilter.needGeometry,Br=Pa(_t,br);if(this.layers[0]._featureFilter.filter(new Ai(this.zoom),Br,se)){var fn=Pe?Pe.evaluate(Br,{},se):void 0,rn={id:Yt,properties:_t.properties,type:_t.type,sourceLayerIndex:qt,index:rr,geometry:br?Br.geometry:ra(_t),patterns:{},sortKey:fn};Me.push(rn)}}Pe&&Me.sort(function(pi,xi){return pi.sortKey-xi.sortKey});for(var Cn=0,gn=Me;Cn<gn.length;Cn+=1){var Sn=gn[Cn],Dn=Sn,Wn=Dn.geometry,ni=Dn.index,ei=Dn.sourceLayerIndex,wi=I[ni].feature;this.addFeature(Sn,Wn,ni,se),W.featureIndex.insert(wi,Wn,ni,ei,this.index)}},ba.prototype.update=function(I,W,se){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(I,W,this.stateDependentLayers,se)},ba.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ba.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ba.prototype.upload=function(I){this.uploaded||(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,Fp),this.indexBuffer=I.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(I),this.uploaded=!0},ba.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ba.prototype.addFeature=function(I,W,se,ge){for(var Me=0,Pe=W;Me<Pe.length;Me+=1)for(var Qe=Pe[Me],dt=0,Mt=Qe;dt<Mt.length;dt+=1){var _t=Mt[dt],Yt=_t.x,rr=_t.y;if(!(Yt<0||Yt>=Mi||rr<0||rr>=Mi)){var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,I.sortKey),br=qt.vertexLength;Qi(this.layoutVertexArray,Yt,rr,-1,-1),Qi(this.layoutVertexArray,Yt,rr,1,-1),Qi(this.layoutVertexArray,Yt,rr,1,1),Qi(this.layoutVertexArray,Yt,rr,-1,1),this.indexArray.emplaceBack(br,br+1,br+2),this.indexArray.emplaceBack(br,br+3,br+2),qt.vertexLength+=4,qt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,se,{},ge)},Ve("CircleBucket",ba,{omit:["layers"]});function Vi(R,I){for(var W=0;W<R.length;W++)if(ds(I,R[W]))return!0;for(var se=0;se<I.length;se++)if(ds(R,I[se]))return!0;return!!sl(R,I)}function ea(R,I,W){return!!(ds(R,I)||tu(I,R,W))}function Qa(R,I){if(R.length===1)return ru(I,R[0]);for(var W=0;W<I.length;W++)for(var se=I[W],ge=0;ge<se.length;ge++)if(ds(R,se[ge]))return!0;for(var Me=0;Me<R.length;Me++)if(ru(I,R[Me]))return!0;for(var Pe=0;Pe<I.length;Pe++)if(sl(R,I[Pe]))return!0;return!1}function Eo(R,I,W){for(var se=0;se<I.length;se++){var ge=I[se];if(R.length>=3){for(var Me=0;Me<ge.length;Me++)if(ds(R,ge[Me]))return!0}if(ol(R,ge,W))return!0}return!1}function ol(R,I,W){if(R.length>1){if(sl(R,I))return!0;for(var se=0;se<I.length;se++)if(tu(I[se],R,W))return!0}for(var ge=0;ge<R.length;ge++)if(tu(R[ge],I,W))return!0;return!1}function sl(R,I){if(R.length===0||I.length===0)return!1;for(var W=0;W<R.length-1;W++)for(var se=R[W],ge=R[W+1],Me=0;Me<I.length-1;Me++){var Pe=I[Me],Qe=I[Me+1];if(Sl(se,ge,Pe,Qe))return!0}return!1}function Sl(R,I,W,se){return z(R,W,se)!==z(I,W,se)&&z(R,I,W)!==z(R,I,se)}function tu(R,I,W){var se=W*W;if(I.length===1)return R.distSqr(I[0])<se;for(var ge=1;ge<I.length;ge++){var Me=I[ge-1],Pe=I[ge];if(Yf(R,Me,Pe)<se)return!0}return!1}function Yf(R,I,W){var se=I.distSqr(W);if(se===0)return R.distSqr(I);var ge=((R.x-I.x)*(W.x-I.x)+(R.y-I.y)*(W.y-I.y))/se;return ge<0?R.distSqr(I):ge>1?R.distSqr(W):R.distSqr(W.sub(I)._mult(ge)._add(I))}function ru(R,I){for(var W=!1,se,ge,Me,Pe=0;Pe<R.length;Pe++){se=R[Pe];for(var Qe=0,dt=se.length-1;Qe<se.length;dt=Qe++)ge=se[Qe],Me=se[dt],ge.y>I.y!=Me.y>I.y&&I.x<(Me.x-ge.x)*(I.y-ge.y)/(Me.y-ge.y)+ge.x&&(W=!W)}return W}function ds(R,I){for(var W=!1,se=0,ge=R.length-1;se<R.length;ge=se++){var Me=R[se],Pe=R[ge];Me.y>I.y!=Pe.y>I.y&&I.x<(Pe.x-Me.x)*(I.y-Me.y)/(Pe.y-Me.y)+Me.x&&(W=!W)}return W}function nu(R,I,W,se,ge){for(var Me=0,Pe=R;Me<Pe.length;Me+=1){var Qe=Pe[Me];if(I<=Qe.x&&W<=Qe.y&&se>=Qe.x&&ge>=Qe.y)return!0}var dt=[new r(I,W),new r(I,ge),new r(se,ge),new r(se,W)];if(R.length>2)for(var Mt=0,_t=dt;Mt<_t.length;Mt+=1){var Yt=_t[Mt];if(ds(R,Yt))return!0}for(var rr=0;rr<R.length-1;rr++){var qt=R[rr],br=R[rr+1];if(Ps(qt,br,dt))return!0}return!1}function Ps(R,I,W){var se=W[0],ge=W[2];if(R.x<se.x&&I.x<se.x||R.x>ge.x&&I.x>ge.x||R.y<se.y&&I.y<se.y||R.y>ge.y&&I.y>ge.y)return!1;var Me=z(R,I,W[0]);return Me!==z(R,I,W[1])||Me!==z(R,I,W[2])||Me!==z(R,I,W[3])}function ps(R,I,W){var se=I.paint.get(R).value;return se.kind==="constant"?se.value:W.programConfigurations.get(I.id).getMaxValue(R)}function Cl(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])}function Fu(R,I,W,se,ge){if(!I[0]&&!I[1])return R;var Me=r.convert(I)._mult(ge);W==="viewport"&&Me._rotate(-se);for(var Pe=[],Qe=0;Qe<R.length;Qe++){var dt=R[Qe];Pe.push(dt.sub(Me))}return Pe}var Ll=new pa({"circle-sort-key":new Ci(Ar.layout_circle["circle-sort-key"])}),sv=new pa({"circle-radius":new Ci(Ar.paint_circle["circle-radius"]),"circle-color":new Ci(Ar.paint_circle["circle-color"]),"circle-blur":new Ci(Ar.paint_circle["circle-blur"]),"circle-opacity":new Ci(Ar.paint_circle["circle-opacity"]),"circle-translate":new li(Ar.paint_circle["circle-translate"]),"circle-translate-anchor":new li(Ar.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new li(Ar.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new li(Ar.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ci(Ar.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ci(Ar.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ci(Ar.paint_circle["circle-stroke-opacity"])}),zc={paint:sv,layout:Ll},Io=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var R=arguments,I=0,W=arguments.length;W--;)I+=R[W]*R[W];return Math.sqrt(I)});function lv(){var R=new Io(4);return Io!=Float32Array&&(R[1]=0,R[2]=0),R[0]=1,R[3]=1,R}function Oh(R,I,W){var se=I[0],ge=I[1],Me=I[2],Pe=I[3],Qe=Math.sin(W),dt=Math.cos(W);return R[0]=se*dt+Me*Qe,R[1]=ge*dt+Pe*Qe,R[2]=se*-Qe+Me*dt,R[3]=ge*-Qe+Pe*dt,R}function Qo(){var R=new Io(9);return Io!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}function Oc(R,I){var W=Math.sin(I),se=Math.cos(I);return R[0]=se,R[1]=W,R[2]=0,R[3]=-W,R[4]=se,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function uv(){var R=new Io(16);return Io!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=0,R[12]=0,R[13]=0,R[14]=0),R[0]=1,R[5]=1,R[10]=1,R[15]=1,R}function fv(R){var I=new Io(16);return I[0]=R[0],I[1]=R[1],I[2]=R[2],I[3]=R[3],I[4]=R[4],I[5]=R[5],I[6]=R[6],I[7]=R[7],I[8]=R[8],I[9]=R[9],I[10]=R[10],I[11]=R[11],I[12]=R[12],I[13]=R[13],I[14]=R[14],I[15]=R[15],I}function cv(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Fc(R,I){var W=I[0],se=I[1],ge=I[2],Me=I[3],Pe=I[4],Qe=I[5],dt=I[6],Mt=I[7],_t=I[8],Yt=I[9],rr=I[10],qt=I[11],br=I[12],Br=I[13],fn=I[14],rn=I[15],Cn=W*Qe-se*Pe,gn=W*dt-ge*Pe,Sn=W*Mt-Me*Pe,Dn=se*dt-ge*Qe,Wn=se*Mt-Me*Qe,ni=ge*Mt-Me*dt,ei=_t*Br-Yt*br,wi=_t*fn-rr*br,pi=_t*rn-qt*br,xi=Yt*fn-rr*Br,Bi=Yt*rn-qt*Br,Ti=rr*rn-qt*fn,Si=Cn*Ti-gn*Bi+Sn*xi+Dn*pi-Wn*wi+ni*ei;return Si?(Si=1/Si,R[0]=(Qe*Ti-dt*Bi+Mt*xi)*Si,R[1]=(ge*Bi-se*Ti-Me*xi)*Si,R[2]=(Br*ni-fn*Wn+rn*Dn)*Si,R[3]=(rr*Wn-Yt*ni-qt*Dn)*Si,R[4]=(dt*pi-Pe*Ti-Mt*wi)*Si,R[5]=(W*Ti-ge*pi+Me*wi)*Si,R[6]=(fn*Sn-br*ni-rn*gn)*Si,R[7]=(_t*ni-rr*Sn+qt*gn)*Si,R[8]=(Pe*Bi-Qe*pi+Mt*ei)*Si,R[9]=(se*pi-W*Bi-Me*ei)*Si,R[10]=(br*Wn-Br*Sn+rn*Cn)*Si,R[11]=(Yt*Sn-_t*Wn-qt*Cn)*Si,R[12]=(Qe*wi-Pe*xi-dt*ei)*Si,R[13]=(W*xi-se*wi+ge*ei)*Si,R[14]=(Br*gn-br*Dn-fn*Cn)*Si,R[15]=(_t*Dn-Yt*gn+rr*Cn)*Si,R):null}function Bc(R,I,W){var se=I[0],ge=I[1],Me=I[2],Pe=I[3],Qe=I[4],dt=I[5],Mt=I[6],_t=I[7],Yt=I[8],rr=I[9],qt=I[10],br=I[11],Br=I[12],fn=I[13],rn=I[14],Cn=I[15],gn=W[0],Sn=W[1],Dn=W[2],Wn=W[3];return R[0]=gn*se+Sn*Qe+Dn*Yt+Wn*Br,R[1]=gn*ge+Sn*dt+Dn*rr+Wn*fn,R[2]=gn*Me+Sn*Mt+Dn*qt+Wn*rn,R[3]=gn*Pe+Sn*_t+Dn*br+Wn*Cn,gn=W[4],Sn=W[5],Dn=W[6],Wn=W[7],R[4]=gn*se+Sn*Qe+Dn*Yt+Wn*Br,R[5]=gn*ge+Sn*dt+Dn*rr+Wn*fn,R[6]=gn*Me+Sn*Mt+Dn*qt+Wn*rn,R[7]=gn*Pe+Sn*_t+Dn*br+Wn*Cn,gn=W[8],Sn=W[9],Dn=W[10],Wn=W[11],R[8]=gn*se+Sn*Qe+Dn*Yt+Wn*Br,R[9]=gn*ge+Sn*dt+Dn*rr+Wn*fn,R[10]=gn*Me+Sn*Mt+Dn*qt+Wn*rn,R[11]=gn*Pe+Sn*_t+Dn*br+Wn*Cn,gn=W[12],Sn=W[13],Dn=W[14],Wn=W[15],R[12]=gn*se+Sn*Qe+Dn*Yt+Wn*Br,R[13]=gn*ge+Sn*dt+Dn*rr+Wn*fn,R[14]=gn*Me+Sn*Mt+Dn*qt+Wn*rn,R[15]=gn*Pe+Sn*_t+Dn*br+Wn*Cn,R}function ro(R,I,W){var se=W[0],ge=W[1],Me=W[2],Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn;return I===R?(R[12]=I[0]*se+I[4]*ge+I[8]*Me+I[12],R[13]=I[1]*se+I[5]*ge+I[9]*Me+I[13],R[14]=I[2]*se+I[6]*ge+I[10]*Me+I[14],R[15]=I[3]*se+I[7]*ge+I[11]*Me+I[15]):(Pe=I[0],Qe=I[1],dt=I[2],Mt=I[3],_t=I[4],Yt=I[5],rr=I[6],qt=I[7],br=I[8],Br=I[9],fn=I[10],rn=I[11],R[0]=Pe,R[1]=Qe,R[2]=dt,R[3]=Mt,R[4]=_t,R[5]=Yt,R[6]=rr,R[7]=qt,R[8]=br,R[9]=Br,R[10]=fn,R[11]=rn,R[12]=Pe*se+_t*ge+br*Me+I[12],R[13]=Qe*se+Yt*ge+Br*Me+I[13],R[14]=dt*se+rr*ge+fn*Me+I[14],R[15]=Mt*se+qt*ge+rn*Me+I[15]),R}function Rs(R,I,W){var se=W[0],ge=W[1],Me=W[2];return R[0]=I[0]*se,R[1]=I[1]*se,R[2]=I[2]*se,R[3]=I[3]*se,R[4]=I[4]*ge,R[5]=I[5]*ge,R[6]=I[6]*ge,R[7]=I[7]*ge,R[8]=I[8]*Me,R[9]=I[9]*Me,R[10]=I[10]*Me,R[11]=I[11]*Me,R[12]=I[12],R[13]=I[13],R[14]=I[14],R[15]=I[15],R}function Is(R,I,W){var se=Math.sin(W),ge=Math.cos(W),Me=I[4],Pe=I[5],Qe=I[6],dt=I[7],Mt=I[8],_t=I[9],Yt=I[10],rr=I[11];return I!==R&&(R[0]=I[0],R[1]=I[1],R[2]=I[2],R[3]=I[3],R[12]=I[12],R[13]=I[13],R[14]=I[14],R[15]=I[15]),R[4]=Me*ge+Mt*se,R[5]=Pe*ge+_t*se,R[6]=Qe*ge+Yt*se,R[7]=dt*ge+rr*se,R[8]=Mt*ge-Me*se,R[9]=_t*ge-Pe*se,R[10]=Yt*ge-Qe*se,R[11]=rr*ge-dt*se,R}function hv(R,I,W){var se=Math.sin(W),ge=Math.cos(W),Me=I[0],Pe=I[1],Qe=I[2],dt=I[3],Mt=I[4],_t=I[5],Yt=I[6],rr=I[7];return I!==R&&(R[8]=I[8],R[9]=I[9],R[10]=I[10],R[11]=I[11],R[12]=I[12],R[13]=I[13],R[14]=I[14],R[15]=I[15]),R[0]=Me*ge+Mt*se,R[1]=Pe*ge+_t*se,R[2]=Qe*ge+Yt*se,R[3]=dt*ge+rr*se,R[4]=Mt*ge-Me*se,R[5]=_t*ge-Pe*se,R[6]=Yt*ge-Qe*se,R[7]=rr*ge-dt*se,R}function dd(R,I,W,se,ge){var Me=1/Math.tan(I/2),Pe;return R[0]=Me/W,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=Me,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=-1,R[12]=0,R[13]=0,R[15]=0,ge!=null&&ge!==1/0?(Pe=1/(se-ge),R[10]=(ge+se)*Pe,R[14]=2*ge*se*Pe):(R[10]=-1,R[14]=-2*se),R}function _g(R,I,W,se,ge,Me,Pe){var Qe=1/(I-W),dt=1/(se-ge),Mt=1/(Me-Pe);return R[0]=-2*Qe,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*dt,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*Mt,R[11]=0,R[12]=(I+W)*Qe,R[13]=(ge+se)*dt,R[14]=(Pe+Me)*Mt,R[15]=1,R}var Pg=Bc;function Fh(){var R=new Io(3);return Io!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R}function Rg(R){var I=new Io(3);return I[0]=R[0],I[1]=R[1],I[2]=R[2],I}function vv(R,I,W){return R[0]=I[0]+W[0],R[1]=I[1]+W[1],R[2]=I[2]+W[2],R}function Ig(R,I,W){return R[0]=I[0]-W[0],R[1]=I[1]-W[1],R[2]=I[2]-W[2],R}function Dg(R,I,W){return R[0]=I[0]*W,R[1]=I[1]*W,R[2]=I[2]*W,R}function pd(R,I){var W=I[0],se=I[1],ge=I[2],Me=W*W+se*se+ge*ge;return Me>0&&(Me=1/Math.sqrt(Me)),R[0]=I[0]*Me,R[1]=I[1]*Me,R[2]=I[2]*Me,R}function I2(R,I){return R[0]*I[0]+R[1]*I[1]+R[2]*I[2]}function D2(R,I,W){var se=I[0],ge=I[1],Me=I[2],Pe=W[0],Qe=W[1],dt=W[2];return R[0]=ge*dt-Me*Qe,R[1]=Me*Pe-se*dt,R[2]=se*Qe-ge*Pe,R}function k2(R,I,W){var se=I[0],ge=I[1],Me=I[2];return R[0]=se*W[0]+ge*W[3]+Me*W[6],R[1]=se*W[1]+ge*W[4]+Me*W[7],R[2]=se*W[2]+ge*W[5]+Me*W[8],R}var z2=Ig;(function(){var R=Fh();return function(I,W,se,ge,Me,Pe){var Qe,dt;for(W||(W=3),se||(se=0),ge?dt=Math.min(ge*W+se,I.length):dt=I.length,Qe=se;Qe<dt;Qe+=W)R[0]=I[Qe],R[1]=I[Qe+1],R[2]=I[Qe+2],Me(R,R,Pe),I[Qe]=R[0],I[Qe+1]=R[1],I[Qe+2]=R[2];return I}})();function O2(){var R=new Io(4);return Io!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0,R[3]=0),R}function F2(R,I,W){return R[0]=I[0]*W,R[1]=I[1]*W,R[2]=I[2]*W,R[3]=I[3]*W,R}function B2(R,I){return R[0]*I[0]+R[1]*I[1]+R[2]*I[2]+R[3]*I[3]}function Bp(R,I,W){var se=I[0],ge=I[1],Me=I[2],Pe=I[3];return R[0]=W[0]*se+W[4]*ge+W[8]*Me+W[12]*Pe,R[1]=W[1]*se+W[5]*ge+W[9]*Me+W[13]*Pe,R[2]=W[2]*se+W[6]*ge+W[10]*Me+W[14]*Pe,R[3]=W[3]*se+W[7]*ge+W[11]*Me+W[15]*Pe,R}(function(){var R=O2();return function(I,W,se,ge,Me,Pe){var Qe,dt;for(W||(W=4),se||(se=0),ge?dt=Math.min(ge*W+se,I.length):dt=I.length,Qe=se;Qe<dt;Qe+=W)R[0]=I[Qe],R[1]=I[Qe+1],R[2]=I[Qe+2],R[3]=I[Qe+3],Me(R,R,Pe),I[Qe]=R[0],I[Qe+1]=R[1],I[Qe+2]=R[2],I[Qe+3]=R[3];return I}})();function N2(){var R=new Io(2);return Io!=Float32Array&&(R[0]=0,R[1]=0),R}function U2(R){var I=R[0],W=R[1];return I*I+W*W}var V2=U2;(function(){var R=N2();return function(I,W,se,ge,Me,Pe){var Qe,dt;for(W||(W=2),se||(se=0),ge?dt=Math.min(ge*W+se,I.length):dt=I.length,Qe=se;Qe<dt;Qe+=W)R[0]=I[Qe],R[1]=I[Qe+1],Me(R,R,Pe),I[Qe]=R[0],I[Qe+1]=R[1];return I}})();var H2=function(R){function I(W){R.call(this,W,zc)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(se){return new ba(se)},I.prototype.queryRadius=function(se){var ge=se;return ps("circle-radius",this,ge)+ps("circle-stroke-width",this,ge)+Cl(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(se,ge,Me,Pe,Qe,dt,Mt,_t){for(var Yt=Fu(se,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),dt.angle,Mt),rr=this.paint.get("circle-radius").evaluate(ge,Me),qt=this.paint.get("circle-stroke-width").evaluate(ge,Me),br=rr+qt,Br=this.paint.get("circle-pitch-alignment")==="map",fn=Br?Yt:G2(Yt,_t),rn=Br?br*Mt:br,Cn=0,gn=Pe;Cn<gn.length;Cn+=1)for(var Sn=gn[Cn],Dn=0,Wn=Sn;Dn<Wn.length;Dn+=1){var ni=Wn[Dn],ei=Br?ni:s1(ni,_t),wi=rn,pi=Bp([],[ni.x,ni.y,0,1],_t);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?wi*=pi[3]/dt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(wi*=dt.cameraToCenterDistance/pi[3]),ea(fn,ei,wi))return!0}return!1},I}(Ja);function s1(R,I){var W=Bp([],[R.x,R.y,0,1],I);return new r(W[0]/W[3],W[1]/W[3])}function G2(R,I){return R.map(function(W){return s1(W,I)})}var l1=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I}(ba);Ve("HeatmapBucket",l1,{omit:["layers"]});function kg(R,I,W,se){var ge=I.width,Me=I.height;if(!se)se=new Uint8Array(ge*Me*W);else if(se instanceof Uint8ClampedArray)se=new Uint8Array(se.buffer);else if(se.length!==ge*Me*W)throw new RangeError("mismatched image size");return R.width=ge,R.height=Me,R.data=se,R}function u1(R,I,W){var se=I.width,ge=I.height;if(!(se===R.width&&ge===R.height)){var Me=kg({},{width:se,height:ge},W);zg(R,Me,{x:0,y:0},{x:0,y:0},{width:Math.min(R.width,se),height:Math.min(R.height,ge)},W),R.width=se,R.height=ge,R.data=Me.data}}function zg(R,I,W,se,ge,Me){if(ge.width===0||ge.height===0)return I;if(ge.width>R.width||ge.height>R.height||W.x>R.width-ge.width||W.y>R.height-ge.height)throw new RangeError("out of range source coordinates for image copy");if(ge.width>I.width||ge.height>I.height||se.x>I.width-ge.width||se.y>I.height-ge.height)throw new RangeError("out of range destination coordinates for image copy");for(var Pe=R.data,Qe=I.data,dt=0;dt<ge.height;dt++)for(var Mt=((W.y+dt)*R.width+W.x)*Me,_t=((se.y+dt)*I.width+se.x)*Me,Yt=0;Yt<ge.width*Me;Yt++)Qe[_t+Yt]=Pe[Mt+Yt];return I}var Bh=function(I,W){kg(this,I,1,W)};Bh.prototype.resize=function(I){u1(this,I,1)},Bh.prototype.clone=function(){return new Bh({width:this.width,height:this.height},new Uint8Array(this.data))},Bh.copy=function(I,W,se,ge,Me){zg(I,W,se,ge,Me,1)};var Ds=function(I,W){kg(this,I,4,W)};Ds.prototype.resize=function(I){u1(this,I,4)},Ds.prototype.replace=function(I,W){W?this.data.set(I):I instanceof Uint8ClampedArray?this.data=new Uint8Array(I.buffer):this.data=I},Ds.prototype.clone=function(){return new Ds({width:this.width,height:this.height},new Uint8Array(this.data))},Ds.copy=function(I,W,se,ge,Me){zg(I,W,se,ge,Me,4)},Ve("AlphaImage",Bh),Ve("RGBAImage",Ds);var W2=new pa({"heatmap-radius":new Ci(Ar.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ci(Ar.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new li(Ar.paint_heatmap["heatmap-intensity"]),"heatmap-color":new yo(Ar.paint_heatmap["heatmap-color"]),"heatmap-opacity":new li(Ar.paint_heatmap["heatmap-opacity"])}),Y2={paint:W2};function f1(R){var I={},W=R.resolution||256,se=R.clips?R.clips.length:1,ge=R.image||new Ds({width:W,height:se}),Me=function(Cn,gn,Sn){I[R.evaluationKey]=Sn;var Dn=R.expression.evaluate(I);ge.data[Cn+gn+0]=Math.floor(Dn.r*255/Dn.a),ge.data[Cn+gn+1]=Math.floor(Dn.g*255/Dn.a),ge.data[Cn+gn+2]=Math.floor(Dn.b*255/Dn.a),ge.data[Cn+gn+3]=Math.floor(Dn.a*255)};if(R.clips)for(var Mt=0,_t=0;Mt<se;++Mt,_t+=W*4)for(var Yt=0,rr=0;Yt<W;Yt++,rr+=4){var qt=Yt/(W-1),br=R.clips[Mt],Br=br.start,fn=br.end,rn=Br*(1-qt)+fn*qt;Me(_t,rr,rn)}else for(var Pe=0,Qe=0;Pe<W;Pe++,Qe+=4){var dt=Pe/(W-1);Me(0,Qe,dt)}return ge}var X2=function(R){function I(W){R.call(this,W,Y2),this._updateColorRamp()}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(se){return new l1(se)},I.prototype._handleSpecialPaintPropertyUpdate=function(se){se==="heatmap-color"&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){var se=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=f1({expression:se,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},I}(Ja),Z2=new pa({"hillshade-illumination-direction":new li(Ar.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new li(Ar.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new li(Ar.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new li(Ar.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new li(Ar.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new li(Ar.paint_hillshade["hillshade-accent-color"])}),j2={paint:Z2},K2=function(R){function I(W){R.call(this,W,j2)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},I}(Ja),J2=Oa([{name:"a_pos",components:2,type:"Int16"}],4),Q2=J2.members,Og=Np,$2=Np;function Np(R,I,W){W=W||2;var se=I&&I.length,ge=se?I[0]*W:R.length,Me=c1(R,0,ge,W,!0),Pe=[];if(!Me||Me.next===Me.prev)return Pe;var Qe,dt,Mt,_t,Yt,rr,qt;if(se&&(Me=nT(R,I,Me,W)),R.length>80*W){Qe=Mt=R[0],dt=_t=R[1];for(var br=W;br<ge;br+=W)Yt=R[br],rr=R[br+1],Yt<Qe&&(Qe=Yt),rr<dt&&(dt=rr),Yt>Mt&&(Mt=Yt),rr>_t&&(_t=rr);qt=Math.max(Mt-Qe,_t-dt),qt=qt!==0?1/qt:0}return gd(Me,Pe,W,Qe,dt,qt),Pe}function c1(R,I,W,se,ge){var Me,Pe;if(ge===Ng(R,I,W,se)>0)for(Me=I;Me<W;Me+=se)Pe=d1(Me,R[Me],R[Me+1],Pe);else for(Me=W-se;Me>=I;Me-=se)Pe=d1(Me,R[Me],R[Me+1],Pe);return Pe&&Up(Pe,Pe.next)&&(md(Pe),Pe=Pe.next),Pe}function Nc(R,I){if(!R)return R;I||(I=R);var W=R,se;do if(se=!1,!W.steiner&&(Up(W,W.next)||xo(W.prev,W,W.next)===0)){if(md(W),W=I=W.prev,W===W.next)break;se=!0}else W=W.next;while(se||W!==I);return I}function gd(R,I,W,se,ge,Me,Pe){if(R){!Pe&&Me&&lT(R,se,ge,Me);for(var Qe=R,dt,Mt;R.prev!==R.next;){if(dt=R.prev,Mt=R.next,Me?eT(R,se,ge,Me):q2(R)){I.push(dt.i/W),I.push(R.i/W),I.push(Mt.i/W),md(R),R=Mt.next,Qe=Mt.next;continue}if(R=Mt,R===Qe){Pe?Pe===1?(R=tT(Nc(R),I,W),gd(R,I,W,se,ge,Me,2)):Pe===2&&rT(R,I,W,se,ge,Me):gd(Nc(R),I,W,se,ge,Me,1);break}}}}function q2(R){var I=R.prev,W=R,se=R.next;if(xo(I,W,se)>=0)return!1;for(var ge=R.next.next;ge!==R.prev;){if(dv(I.x,I.y,W.x,W.y,se.x,se.y,ge.x,ge.y)&&xo(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function eT(R,I,W,se){var ge=R.prev,Me=R,Pe=R.next;if(xo(ge,Me,Pe)>=0)return!1;for(var Qe=ge.x<Me.x?ge.x<Pe.x?ge.x:Pe.x:Me.x<Pe.x?Me.x:Pe.x,dt=ge.y<Me.y?ge.y<Pe.y?ge.y:Pe.y:Me.y<Pe.y?Me.y:Pe.y,Mt=ge.x>Me.x?ge.x>Pe.x?ge.x:Pe.x:Me.x>Pe.x?Me.x:Pe.x,_t=ge.y>Me.y?ge.y>Pe.y?ge.y:Pe.y:Me.y>Pe.y?Me.y:Pe.y,Yt=Fg(Qe,dt,I,W,se),rr=Fg(Mt,_t,I,W,se),qt=R.prevZ,br=R.nextZ;qt&&qt.z>=Yt&&br&&br.z<=rr;){if(qt!==R.prev&&qt!==R.next&&dv(ge.x,ge.y,Me.x,Me.y,Pe.x,Pe.y,qt.x,qt.y)&&xo(qt.prev,qt,qt.next)>=0||(qt=qt.prevZ,br!==R.prev&&br!==R.next&&dv(ge.x,ge.y,Me.x,Me.y,Pe.x,Pe.y,br.x,br.y)&&xo(br.prev,br,br.next)>=0))return!1;br=br.nextZ}for(;qt&&qt.z>=Yt;){if(qt!==R.prev&&qt!==R.next&&dv(ge.x,ge.y,Me.x,Me.y,Pe.x,Pe.y,qt.x,qt.y)&&xo(qt.prev,qt,qt.next)>=0)return!1;qt=qt.prevZ}for(;br&&br.z<=rr;){if(br!==R.prev&&br!==R.next&&dv(ge.x,ge.y,Me.x,Me.y,Pe.x,Pe.y,br.x,br.y)&&xo(br.prev,br,br.next)>=0)return!1;br=br.nextZ}return!0}function tT(R,I,W){var se=R;do{var ge=se.prev,Me=se.next.next;!Up(ge,Me)&&h1(ge,se,se.next,Me)&&yd(ge,Me)&&yd(Me,ge)&&(I.push(ge.i/W),I.push(se.i/W),I.push(Me.i/W),md(se),md(se.next),se=R=Me),se=se.next}while(se!==R);return Nc(se)}function rT(R,I,W,se,ge,Me){var Pe=R;do{for(var Qe=Pe.next.next;Qe!==Pe.prev;){if(Pe.i!==Qe.i&&cT(Pe,Qe)){var dt=v1(Pe,Qe);Pe=Nc(Pe,Pe.next),dt=Nc(dt,dt.next),gd(Pe,I,W,se,ge,Me),gd(dt,I,W,se,ge,Me);return}Qe=Qe.next}Pe=Pe.next}while(Pe!==R)}function nT(R,I,W,se){var ge=[],Me,Pe,Qe,dt,Mt;for(Me=0,Pe=I.length;Me<Pe;Me++)Qe=I[Me]*se,dt=Me<Pe-1?I[Me+1]*se:R.length,Mt=c1(R,Qe,dt,se,!1),Mt===Mt.next&&(Mt.steiner=!0),ge.push(fT(Mt));for(ge.sort(iT),Me=0;Me<ge.length;Me++)aT(ge[Me],W),W=Nc(W,W.next);return W}function iT(R,I){return R.x-I.x}function aT(R,I){if(I=oT(R,I),I){var W=v1(I,R);Nc(I,I.next),Nc(W,W.next)}}function oT(R,I){var W=I,se=R.x,ge=R.y,Me=-1/0,Pe;do{if(ge<=W.y&&ge>=W.next.y&&W.next.y!==W.y){var Qe=W.x+(ge-W.y)*(W.next.x-W.x)/(W.next.y-W.y);if(Qe<=se&&Qe>Me){if(Me=Qe,Qe===se){if(ge===W.y)return W;if(ge===W.next.y)return W.next}Pe=W.x<W.next.x?W:W.next}}W=W.next}while(W!==I);if(!Pe)return null;if(se===Me)return Pe;var dt=Pe,Mt=Pe.x,_t=Pe.y,Yt=1/0,rr;W=Pe;do se>=W.x&&W.x>=Mt&&se!==W.x&&dv(ge<_t?se:Me,ge,Mt,_t,ge<_t?Me:se,ge,W.x,W.y)&&(rr=Math.abs(ge-W.y)/(se-W.x),yd(W,R)&&(rr<Yt||rr===Yt&&(W.x>Pe.x||W.x===Pe.x&&sT(Pe,W)))&&(Pe=W,Yt=rr)),W=W.next;while(W!==dt);return Pe}function sT(R,I){return xo(R.prev,R,I.prev)<0&&xo(I.next,R,R.next)<0}function lT(R,I,W,se){var ge=R;do ge.z===null&&(ge.z=Fg(ge.x,ge.y,I,W,se)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==R);ge.prevZ.nextZ=null,ge.prevZ=null,uT(ge)}function uT(R){var I,W,se,ge,Me,Pe,Qe,dt,Mt=1;do{for(W=R,R=null,Me=null,Pe=0;W;){for(Pe++,se=W,Qe=0,I=0;I<Mt&&(Qe++,se=se.nextZ,!!se);I++);for(dt=Mt;Qe>0||dt>0&&se;)Qe!==0&&(dt===0||!se||W.z<=se.z)?(ge=W,W=W.nextZ,Qe--):(ge=se,se=se.nextZ,dt--),Me?Me.nextZ=ge:R=ge,ge.prevZ=Me,Me=ge;W=se}Me.nextZ=null,Mt*=2}while(Pe>1);return R}function Fg(R,I,W,se,ge){return R=32767*(R-W)*ge,I=32767*(I-se)*ge,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,R|I<<1}function fT(R){var I=R,W=R;do(I.x<W.x||I.x===W.x&&I.y<W.y)&&(W=I),I=I.next;while(I!==R);return W}function dv(R,I,W,se,ge,Me,Pe,Qe){return(ge-Pe)*(I-Qe)-(R-Pe)*(Me-Qe)>=0&&(R-Pe)*(se-Qe)-(W-Pe)*(I-Qe)>=0&&(W-Pe)*(Me-Qe)-(ge-Pe)*(se-Qe)>=0}function cT(R,I){return R.next.i!==I.i&&R.prev.i!==I.i&&!hT(R,I)&&(yd(R,I)&&yd(I,R)&&vT(R,I)&&(xo(R.prev,R,I.prev)||xo(R,I.prev,I))||Up(R,I)&&xo(R.prev,R,R.next)>0&&xo(I.prev,I,I.next)>0)}function xo(R,I,W){return(I.y-R.y)*(W.x-I.x)-(I.x-R.x)*(W.y-I.y)}function Up(R,I){return R.x===I.x&&R.y===I.y}function h1(R,I,W,se){var ge=Hp(xo(R,I,W)),Me=Hp(xo(R,I,se)),Pe=Hp(xo(W,se,R)),Qe=Hp(xo(W,se,I));return!!(ge!==Me&&Pe!==Qe||ge===0&&Vp(R,W,I)||Me===0&&Vp(R,se,I)||Pe===0&&Vp(W,R,se)||Qe===0&&Vp(W,I,se))}function Vp(R,I,W){return I.x<=Math.max(R.x,W.x)&&I.x>=Math.min(R.x,W.x)&&I.y<=Math.max(R.y,W.y)&&I.y>=Math.min(R.y,W.y)}function Hp(R){return R>0?1:R<0?-1:0}function hT(R,I){var W=R;do{if(W.i!==R.i&&W.next.i!==R.i&&W.i!==I.i&&W.next.i!==I.i&&h1(W,W.next,R,I))return!0;W=W.next}while(W!==R);return!1}function yd(R,I){return xo(R.prev,R,R.next)<0?xo(R,I,R.next)>=0&&xo(R,R.prev,I)>=0:xo(R,I,R.prev)<0||xo(R,R.next,I)<0}function vT(R,I){var W=R,se=!1,ge=(R.x+I.x)/2,Me=(R.y+I.y)/2;do W.y>Me!=W.next.y>Me&&W.next.y!==W.y&&ge<(W.next.x-W.x)*(Me-W.y)/(W.next.y-W.y)+W.x&&(se=!se),W=W.next;while(W!==R);return se}function v1(R,I){var W=new Bg(R.i,R.x,R.y),se=new Bg(I.i,I.x,I.y),ge=R.next,Me=I.prev;return R.next=I,I.prev=R,W.next=ge,ge.prev=W,se.next=W,W.prev=se,Me.next=se,se.prev=Me,se}function d1(R,I,W,se){var ge=new Bg(R,I,W);return se?(ge.next=se.next,ge.prev=se,se.next.prev=ge,se.next=ge):(ge.prev=ge,ge.next=ge),ge}function md(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function Bg(R,I,W){this.i=R,this.x=I,this.y=W,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Np.deviation=function(R,I,W,se){var ge=I&&I.length,Me=ge?I[0]*W:R.length,Pe=Math.abs(Ng(R,0,Me,W));if(ge)for(var Qe=0,dt=I.length;Qe<dt;Qe++){var Mt=I[Qe]*W,_t=Qe<dt-1?I[Qe+1]*W:R.length;Pe-=Math.abs(Ng(R,Mt,_t,W))}var Yt=0;for(Qe=0;Qe<se.length;Qe+=3){var rr=se[Qe]*W,qt=se[Qe+1]*W,br=se[Qe+2]*W;Yt+=Math.abs((R[rr]-R[br])*(R[qt+1]-R[rr+1])-(R[rr]-R[qt])*(R[br+1]-R[rr+1]))}return Pe===0&&Yt===0?0:Math.abs((Yt-Pe)/Pe)};function Ng(R,I,W,se){for(var ge=0,Me=I,Pe=W-se;Me<W;Me+=se)ge+=(R[Pe]-R[Me])*(R[Me+1]+R[Pe+1]),Pe=Me;return ge}Np.flatten=function(R){for(var I=R[0][0].length,W={vertices:[],holes:[],dimensions:I},se=0,ge=0;ge<R.length;ge++){for(var Me=0;Me<R[ge].length;Me++)for(var Pe=0;Pe<I;Pe++)W.vertices.push(R[ge][Me][Pe]);ge>0&&(se+=R[ge-1].length,W.holes.push(se))}return W},Og.default=$2;function dT(R,I,W,se,ge){p1(R,I,W,se||R.length-1,ge||pT)}function p1(R,I,W,se,ge){for(;se>W;){if(se-W>600){var Me=se-W+1,Pe=I-W+1,Qe=Math.log(Me),dt=.5*Math.exp(2*Qe/3),Mt=.5*Math.sqrt(Qe*dt*(Me-dt)/Me)*(Pe-Me/2<0?-1:1),_t=Math.max(W,Math.floor(I-Pe*dt/Me+Mt)),Yt=Math.min(se,Math.floor(I+(Me-Pe)*dt/Me+Mt));p1(R,I,_t,Yt,ge)}var rr=R[I],qt=W,br=se;for(xd(R,W,I),ge(R[se],rr)>0&&xd(R,W,se);qt<br;){for(xd(R,qt,br),qt++,br--;ge(R[qt],rr)<0;)qt++;for(;ge(R[br],rr)>0;)br--}ge(R[W],rr)===0?xd(R,W,br):(br++,xd(R,br,se)),br<=I&&(W=br+1),I<=br&&(se=br-1)}}function xd(R,I,W){var se=R[I];R[I]=R[W],R[W]=se}function pT(R,I){return R<I?-1:R>I?1:0}function Ug(R,I){var W=R.length;if(W<=1)return[R];for(var se=[],ge,Me,Pe=0;Pe<W;Pe++){var Qe=H(R[Pe]);Qe!==0&&(R[Pe].area=Math.abs(Qe),Me===void 0&&(Me=Qe<0),Me===Qe<0?(ge&&se.push(ge),ge=[R[Pe]]):ge.push(R[Pe]))}if(ge&&se.push(ge),I>1)for(var dt=0;dt<se.length;dt++)se[dt].length<=I||(dT(se[dt],I,1,se[dt].length-1,gT),se[dt]=se[dt].slice(0,I));return se}function gT(R,I){return I.area-R.area}function Vg(R,I,W){for(var se=W.patternDependencies,ge=!1,Me=0,Pe=I;Me<Pe.length;Me+=1){var Qe=Pe[Me],dt=Qe.paint.get(R+"-pattern");dt.isConstant()||(ge=!0);var Mt=dt.constantOr(null);Mt&&(ge=!0,se[Mt.to]=!0,se[Mt.from]=!0)}return ge}function Hg(R,I,W,se,ge){for(var Me=ge.patternDependencies,Pe=0,Qe=I;Pe<Qe.length;Pe+=1){var dt=Qe[Pe],Mt=dt.paint.get(R+"-pattern"),_t=Mt.value;if(_t.kind!=="constant"){var Yt=_t.evaluate({zoom:se-1},W,{},ge.availableImages),rr=_t.evaluate({zoom:se},W,{},ge.availableImages),qt=_t.evaluate({zoom:se+1},W,{},ge.availableImages);Yt=Yt&&Yt.name?Yt.name:Yt,rr=rr&&rr.name?rr.name:rr,qt=qt&&qt.name?qt.name:qt,Me[Yt]=!0,Me[rr]=!0,Me[qt]=!0,W.patterns[dt.id]={min:Yt,mid:rr,max:qt}}}return W}var yT=500,Bu=function(I){this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(W){return W.id}),this.index=I.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Hf,this.indexArray=new Ou,this.indexArray2=new zh,this.programConfigurations=new di(I.layers,I.zoom),this.segments=new mo,this.segments2=new mo,this.stateDependentLayerIds=this.layers.filter(function(W){return W.isStateDependent()}).map(function(W){return W.id})};Bu.prototype.populate=function(I,W,se){this.hasPattern=Vg("fill",this.layers,W);for(var ge=this.layers[0].layout.get("fill-sort-key"),Me=[],Pe=0,Qe=I;Pe<Qe.length;Pe+=1){var dt=Qe[Pe],Mt=dt.feature,_t=dt.id,Yt=dt.index,rr=dt.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,br=Pa(Mt,qt);if(this.layers[0]._featureFilter.filter(new Ai(this.zoom),br,se)){var Br=ge?ge.evaluate(br,{},se,W.availableImages):void 0,fn={id:_t,properties:Mt.properties,type:Mt.type,sourceLayerIndex:rr,index:Yt,geometry:qt?br.geometry:ra(Mt),patterns:{},sortKey:Br};Me.push(fn)}}ge&&Me.sort(function(pi,xi){return pi.sortKey-xi.sortKey});for(var rn=0,Cn=Me;rn<Cn.length;rn+=1){var gn=Cn[rn],Sn=gn,Dn=Sn.geometry,Wn=Sn.index,ni=Sn.sourceLayerIndex;if(this.hasPattern){var ei=Hg("fill",this.layers,gn,this.zoom,W);this.patternFeatures.push(ei)}else this.addFeature(gn,Dn,Wn,se,{});var wi=I[Wn].feature;W.featureIndex.insert(wi,Dn,Wn,ni,this.index)}},Bu.prototype.update=function(I,W,se){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(I,W,this.stateDependentLayers,se)},Bu.prototype.addFeatures=function(I,W,se){for(var ge=0,Me=this.patternFeatures;ge<Me.length;ge+=1){var Pe=Me[ge];this.addFeature(Pe,Pe.geometry,Pe.index,W,se)}},Bu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Bu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bu.prototype.upload=function(I){this.uploaded||(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,Q2),this.indexBuffer=I.createIndexBuffer(this.indexArray),this.indexBuffer2=I.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(I),this.uploaded=!0},Bu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Bu.prototype.addFeature=function(I,W,se,ge,Me){for(var Pe=0,Qe=Ug(W,yT);Pe<Qe.length;Pe+=1){for(var dt=Qe[Pe],Mt=0,_t=0,Yt=dt;_t<Yt.length;_t+=1){var rr=Yt[_t];Mt+=rr.length}for(var qt=this.segments.prepareSegment(Mt,this.layoutVertexArray,this.indexArray),br=qt.vertexLength,Br=[],fn=[],rn=0,Cn=dt;rn<Cn.length;rn+=1){var gn=Cn[rn];if(gn.length!==0){gn!==dt[0]&&fn.push(Br.length/2);var Sn=this.segments2.prepareSegment(gn.length,this.layoutVertexArray,this.indexArray2),Dn=Sn.vertexLength;this.layoutVertexArray.emplaceBack(gn[0].x,gn[0].y),this.indexArray2.emplaceBack(Dn+gn.length-1,Dn),Br.push(gn[0].x),Br.push(gn[0].y);for(var Wn=1;Wn<gn.length;Wn++)this.layoutVertexArray.emplaceBack(gn[Wn].x,gn[Wn].y),this.indexArray2.emplaceBack(Dn+Wn-1,Dn+Wn),Br.push(gn[Wn].x),Br.push(gn[Wn].y);Sn.vertexLength+=gn.length,Sn.primitiveLength+=gn.length}}for(var ni=Og(Br,fn),ei=0;ei<ni.length;ei+=3)this.indexArray.emplaceBack(br+ni[ei],br+ni[ei+1],br+ni[ei+2]);qt.vertexLength+=Mt,qt.primitiveLength+=ni.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,se,Me,ge)},Ve("FillBucket",Bu,{omit:["layers","patternFeatures"]});var mT=new pa({"fill-sort-key":new Ci(Ar.layout_fill["fill-sort-key"])}),xT=new pa({"fill-antialias":new li(Ar.paint_fill["fill-antialias"]),"fill-opacity":new Ci(Ar.paint_fill["fill-opacity"]),"fill-color":new Ci(Ar.paint_fill["fill-color"]),"fill-outline-color":new Ci(Ar.paint_fill["fill-outline-color"]),"fill-translate":new li(Ar.paint_fill["fill-translate"]),"fill-translate-anchor":new li(Ar.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vo(Ar.paint_fill["fill-pattern"])}),bT={paint:xT,layout:mT},wT=function(R){function I(W){R.call(this,W,bT)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(se,ge){R.prototype.recalculate.call(this,se,ge);var Me=this.paint._values["fill-outline-color"];Me.value.kind==="constant"&&Me.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(se){return new Bu(se)},I.prototype.queryRadius=function(){return Cl(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(se,ge,Me,Pe,Qe,dt,Mt){var _t=Fu(se,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),dt.angle,Mt);return Qa(_t,Pe)},I.prototype.isTileClipped=function(){return!0},I}(Ja),TT=Oa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),AT=TT.members,g1=pv;function pv(R,I,W,se,ge){this.properties={},this.extent=W,this.type=0,this._pbf=R,this._geometry=-1,this._keys=se,this._values=ge,R.readFields(MT,this,I)}function MT(R,I,W){R==1?I.id=W.readVarint():R==2?ET(W,I):R==3?I.type=W.readVarint():R==4&&(I._geometry=W.pos)}function ET(R,I){for(var W=R.readVarint()+R.pos;R.pos<W;){var se=I._keys[R.readVarint()],ge=I._values[R.readVarint()];I.properties[se]=ge}}pv.types=["Unknown","Point","LineString","Polygon"],pv.prototype.loadGeometry=function(){var R=this._pbf;R.pos=this._geometry;for(var I=R.readVarint()+R.pos,W=1,se=0,ge=0,Me=0,Pe=[],Qe;R.pos<I;){if(se<=0){var dt=R.readVarint();W=dt&7,se=dt>>3}if(se--,W===1||W===2)ge+=R.readSVarint(),Me+=R.readSVarint(),W===1&&(Qe&&Pe.push(Qe),Qe=[]),Qe.push(new r(ge,Me));else if(W===7)Qe&&Qe.push(Qe[0].clone());else throw new Error("unknown command "+W)}return Qe&&Pe.push(Qe),Pe},pv.prototype.bbox=function(){var R=this._pbf;R.pos=this._geometry;for(var I=R.readVarint()+R.pos,W=1,se=0,ge=0,Me=0,Pe=1/0,Qe=-1/0,dt=1/0,Mt=-1/0;R.pos<I;){if(se<=0){var _t=R.readVarint();W=_t&7,se=_t>>3}if(se--,W===1||W===2)ge+=R.readSVarint(),Me+=R.readSVarint(),ge<Pe&&(Pe=ge),ge>Qe&&(Qe=ge),Me<dt&&(dt=Me),Me>Mt&&(Mt=Me);else if(W!==7)throw new Error("unknown command "+W)}return[Pe,dt,Qe,Mt]},pv.prototype.toGeoJSON=function(R,I,W){var se=this.extent*Math.pow(2,W),ge=this.extent*R,Me=this.extent*I,Pe=this.loadGeometry(),Qe=pv.types[this.type],dt,Mt;function _t(qt){for(var br=0;br<qt.length;br++){var Br=qt[br],fn=180-(Br.y+Me)*360/se;qt[br]=[(Br.x+ge)*360/se-180,360/Math.PI*Math.atan(Math.exp(fn*Math.PI/180))-90]}}switch(this.type){case 1:var Yt=[];for(dt=0;dt<Pe.length;dt++)Yt[dt]=Pe[dt][0];Pe=Yt,_t(Pe);break;case 2:for(dt=0;dt<Pe.length;dt++)_t(Pe[dt]);break;case 3:for(Pe=ST(Pe),dt=0;dt<Pe.length;dt++)for(Mt=0;Mt<Pe[dt].length;Mt++)_t(Pe[dt][Mt]);break}Pe.length===1?Pe=Pe[0]:Qe="Multi"+Qe;var rr={type:"Feature",geometry:{type:Qe,coordinates:Pe},properties:this.properties};return"id"in this&&(rr.id=this.id),rr};function ST(R){var I=R.length;if(I<=1)return[R];for(var W=[],se,ge,Me=0;Me<I;Me++){var Pe=CT(R[Me]);Pe!==0&&(ge===void 0&&(ge=Pe<0),ge===Pe<0?(se&&W.push(se),se=[R[Me]]):se.push(R[Me]))}return se&&W.push(se),W}function CT(R){for(var I=0,W=0,se=R.length,ge=se-1,Me,Pe;W<se;ge=W++)Me=R[W],Pe=R[ge],I+=(Pe.x-Me.x)*(Me.y+Pe.y);return I}var y1=m1;function m1(R,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=R,this._keys=[],this._values=[],this._features=[],R.readFields(LT,this,I),this.length=this._features.length}function LT(R,I,W){R===15?I.version=W.readVarint():R===1?I.name=W.readString():R===5?I.extent=W.readVarint():R===2?I._features.push(W.pos):R===3?I._keys.push(W.readString()):R===4&&I._values.push(_T(W))}function _T(R){for(var I=null,W=R.readVarint()+R.pos;R.pos<W;){var se=R.readVarint()>>3;I=se===1?R.readString():se===2?R.readFloat():se===3?R.readDouble():se===4?R.readVarint64():se===5?R.readVarint():se===6?R.readSVarint():se===7?R.readBoolean():null}return I}m1.prototype.feature=function(R){if(R<0||R>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[R];var I=this._pbf.readVarint()+this._pbf.pos;return new g1(this._pbf,I,this.extent,this._keys,this._values)};var PT=RT;function RT(R,I){this.layers=R.readFields(IT,{},I)}function IT(R,I,W){if(R===3){var se=new y1(W,W.readVarint()+W.pos);se.length&&(I[se.name]=se)}}var DT=PT,kT=g1,zT=y1,gv={VectorTile:DT,VectorTileFeature:kT,VectorTileLayer:zT},OT=gv.VectorTileFeature.types,FT=500,Gg=Math.pow(2,13);function bd(R,I,W,se,ge,Me,Pe,Qe){R.emplaceBack(I,W,Math.floor(se*Gg)*2+Pe,ge*Gg*2,Me*Gg*2,Math.round(Qe))}var Nu=function(I){this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(W){return W.id}),this.index=I.index,this.hasPattern=!1,this.layoutVertexArray=new cf,this.indexArray=new Ou,this.programConfigurations=new di(I.layers,I.zoom),this.segments=new mo,this.stateDependentLayerIds=this.layers.filter(function(W){return W.isStateDependent()}).map(function(W){return W.id})};Nu.prototype.populate=function(I,W,se){this.features=[],this.hasPattern=Vg("fill-extrusion",this.layers,W);for(var ge=0,Me=I;ge<Me.length;ge+=1){var Pe=Me[ge],Qe=Pe.feature,dt=Pe.id,Mt=Pe.index,_t=Pe.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,rr=Pa(Qe,Yt);if(this.layers[0]._featureFilter.filter(new Ai(this.zoom),rr,se)){var qt={id:dt,sourceLayerIndex:_t,index:Mt,geometry:Yt?rr.geometry:ra(Qe),properties:Qe.properties,type:Qe.type,patterns:{}};this.hasPattern?this.features.push(Hg("fill-extrusion",this.layers,qt,this.zoom,W)):this.addFeature(qt,qt.geometry,Mt,se,{}),W.featureIndex.insert(Qe,qt.geometry,Mt,_t,this.index,!0)}}},Nu.prototype.addFeatures=function(I,W,se){for(var ge=0,Me=this.features;ge<Me.length;ge+=1){var Pe=Me[ge],Qe=Pe.geometry;this.addFeature(Pe,Qe,Pe.index,W,se)}},Nu.prototype.update=function(I,W,se){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(I,W,this.stateDependentLayers,se)},Nu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Nu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nu.prototype.upload=function(I){this.uploaded||(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,AT),this.indexBuffer=I.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(I),this.uploaded=!0},Nu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nu.prototype.addFeature=function(I,W,se,ge,Me){for(var Pe=0,Qe=Ug(W,FT);Pe<Qe.length;Pe+=1){for(var dt=Qe[Pe],Mt=0,_t=0,Yt=dt;_t<Yt.length;_t+=1){var rr=Yt[_t];Mt+=rr.length}for(var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),br=0,Br=dt;br<Br.length;br+=1){var fn=Br[br];if(fn.length!==0&&!NT(fn))for(var rn=0,Cn=0;Cn<fn.length;Cn++){var gn=fn[Cn];if(Cn>=1){var Sn=fn[Cn-1];if(!BT(gn,Sn)){qt.vertexLength+4>mo.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Dn=gn.sub(Sn)._perp()._unit(),Wn=Sn.dist(gn);rn+Wn>32768&&(rn=0),bd(this.layoutVertexArray,gn.x,gn.y,Dn.x,Dn.y,0,0,rn),bd(this.layoutVertexArray,gn.x,gn.y,Dn.x,Dn.y,0,1,rn),rn+=Wn,bd(this.layoutVertexArray,Sn.x,Sn.y,Dn.x,Dn.y,0,0,rn),bd(this.layoutVertexArray,Sn.x,Sn.y,Dn.x,Dn.y,0,1,rn);var ni=qt.vertexLength;this.indexArray.emplaceBack(ni,ni+2,ni+1),this.indexArray.emplaceBack(ni+1,ni+2,ni+3),qt.vertexLength+=4,qt.primitiveLength+=2}}}}if(qt.vertexLength+Mt>mo.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(Mt,this.layoutVertexArray,this.indexArray)),OT[I.type]==="Polygon"){for(var ei=[],wi=[],pi=qt.vertexLength,xi=0,Bi=dt;xi<Bi.length;xi+=1){var Ti=Bi[xi];if(Ti.length!==0){Ti!==dt[0]&&wi.push(ei.length/2);for(var Si=0;Si<Ti.length;Si++){var Gi=Ti[Si];bd(this.layoutVertexArray,Gi.x,Gi.y,0,0,1,1,0),ei.push(Gi.x),ei.push(Gi.y)}}}for(var Oi=Og(ei,wi),la=0;la<Oi.length;la+=3)this.indexArray.emplaceBack(pi+Oi[la],pi+Oi[la+2],pi+Oi[la+1]);qt.primitiveLength+=Oi.length/3,qt.vertexLength+=Mt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,se,Me,ge)},Ve("FillExtrusionBucket",Nu,{omit:["layers","features"]});function BT(R,I){return R.x===I.x&&(R.x<0||R.x>Mi)||R.y===I.y&&(R.y<0||R.y>Mi)}function NT(R){return R.every(function(I){return I.x<0})||R.every(function(I){return I.x>Mi})||R.every(function(I){return I.y<0})||R.every(function(I){return I.y>Mi})}var UT=new pa({"fill-extrusion-opacity":new li(Ar["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ci(Ar["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new li(Ar["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new li(Ar["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vo(Ar["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ci(Ar["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ci(Ar["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new li(Ar["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),VT={paint:UT},HT=function(R){function I(W){R.call(this,W,VT)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(se){return new Nu(se)},I.prototype.queryRadius=function(){return Cl(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(se,ge,Me,Pe,Qe,dt,Mt,_t){var Yt=Fu(se,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),dt.angle,Mt),rr=this.paint.get("fill-extrusion-height").evaluate(ge,Me),qt=this.paint.get("fill-extrusion-base").evaluate(ge,Me),br=YT(Yt,_t,dt,0),Br=WT(Pe,qt,rr,_t),fn=Br[0],rn=Br[1];return GT(fn,rn,br)},I}(Ja);function wd(R,I){return R.x*I.x+R.y*I.y}function x1(R,I){if(R.length===1){for(var W=0,se=I[W++],ge;!ge||se.equals(ge);)if(ge=I[W++],!ge)return 1/0;for(;W<I.length;W++){var Me=I[W],Pe=R[0],Qe=ge.sub(se),dt=Me.sub(se),Mt=Pe.sub(se),_t=wd(Qe,Qe),Yt=wd(Qe,dt),rr=wd(dt,dt),qt=wd(Mt,Qe),br=wd(Mt,dt),Br=_t*rr-Yt*Yt,fn=(rr*qt-Yt*br)/Br,rn=(_t*br-Yt*qt)/Br,Cn=1-fn-rn,gn=se.z*Cn+ge.z*fn+Me.z*rn;if(isFinite(gn))return gn}return 1/0}else{for(var Sn=1/0,Dn=0,Wn=I;Dn<Wn.length;Dn+=1){var ni=Wn[Dn];Sn=Math.min(Sn,ni.z)}return Sn}}function GT(R,I,W){var se=1/0;Qa(W,I)&&(se=x1(W,I[0]));for(var ge=0;ge<I.length;ge++)for(var Me=I[ge],Pe=R[ge],Qe=0;Qe<Me.length-1;Qe++){var dt=Me[Qe],Mt=Me[Qe+1],_t=Pe[Qe],Yt=Pe[Qe+1],rr=[dt,Mt,Yt,_t,dt];Vi(W,rr)&&(se=Math.min(se,x1(W,rr)))}return se===1/0?!1:se}function WT(R,I,W,se){for(var ge=[],Me=[],Pe=se[8]*I,Qe=se[9]*I,dt=se[10]*I,Mt=se[11]*I,_t=se[8]*W,Yt=se[9]*W,rr=se[10]*W,qt=se[11]*W,br=0,Br=R;br<Br.length;br+=1){for(var fn=Br[br],rn=[],Cn=[],gn=0,Sn=fn;gn<Sn.length;gn+=1){var Dn=Sn[gn],Wn=Dn.x,ni=Dn.y,ei=se[0]*Wn+se[4]*ni+se[12],wi=se[1]*Wn+se[5]*ni+se[13],pi=se[2]*Wn+se[6]*ni+se[14],xi=se[3]*Wn+se[7]*ni+se[15],Bi=ei+Pe,Ti=wi+Qe,Si=pi+dt,Gi=xi+Mt,Oi=ei+_t,la=wi+Yt,Ta=pi+rr,ua=xi+qt,fa=new r(Bi/Gi,Ti/Gi);fa.z=Si/Gi,rn.push(fa);var na=new r(Oi/ua,la/ua);na.z=Ta/ua,Cn.push(na)}ge.push(rn),Me.push(Cn)}return[ge,Me]}function YT(R,I,W,se){for(var ge=[],Me=0,Pe=R;Me<Pe.length;Me+=1){var Qe=Pe[Me],dt=[Qe.x,Qe.y,se,1];Bp(dt,dt,I),ge.push(new r(dt[0]/dt[3],dt[1]/dt[3]))}return ge}var XT=Oa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),ZT=XT.members,jT=Oa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),KT=jT.members,JT=gv.VectorTileFeature.types,b1=63,QT=Math.cos(75/2*(Math.PI/180)),$T=15,qT=20,e4=15,w1=1/2,T1=Math.pow(2,e4-1)/w1,gs=function(I){var W=this;this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(se){return se.id}),this.index=I.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(se){W.gradients[se.id]={}}),this.layoutVertexArray=new Pc,this.layoutVertexArray2=new Rc,this.indexArray=new Ou,this.programConfigurations=new di(I.layers,I.zoom),this.segments=new mo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(se){return se.isStateDependent()}).map(function(se){return se.id})};gs.prototype.populate=function(I,W,se){this.hasPattern=Vg("line",this.layers,W);for(var ge=this.layers[0].layout.get("line-sort-key"),Me=[],Pe=0,Qe=I;Pe<Qe.length;Pe+=1){var dt=Qe[Pe],Mt=dt.feature,_t=dt.id,Yt=dt.index,rr=dt.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,br=Pa(Mt,qt);if(this.layers[0]._featureFilter.filter(new Ai(this.zoom),br,se)){var Br=ge?ge.evaluate(br,{},se):void 0,fn={id:_t,properties:Mt.properties,type:Mt.type,sourceLayerIndex:rr,index:Yt,geometry:qt?br.geometry:ra(Mt),patterns:{},sortKey:Br};Me.push(fn)}}ge&&Me.sort(function(pi,xi){return pi.sortKey-xi.sortKey});for(var rn=0,Cn=Me;rn<Cn.length;rn+=1){var gn=Cn[rn],Sn=gn,Dn=Sn.geometry,Wn=Sn.index,ni=Sn.sourceLayerIndex;if(this.hasPattern){var ei=Hg("line",this.layers,gn,this.zoom,W);this.patternFeatures.push(ei)}else this.addFeature(gn,Dn,Wn,se,{});var wi=I[Wn].feature;W.featureIndex.insert(wi,Dn,Wn,ni,this.index)}},gs.prototype.update=function(I,W,se){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(I,W,this.stateDependentLayers,se)},gs.prototype.addFeatures=function(I,W,se){for(var ge=0,Me=this.patternFeatures;ge<Me.length;ge+=1){var Pe=Me[ge];this.addFeature(Pe,Pe.geometry,Pe.index,W,se)}},gs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},gs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},gs.prototype.upload=function(I){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=I.createVertexBuffer(this.layoutVertexArray2,KT)),this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,ZT),this.indexBuffer=I.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(I),this.uploaded=!0},gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},gs.prototype.lineFeatureClips=function(I){if(I.properties&&I.properties.hasOwnProperty("mapbox_clip_start")&&I.properties.hasOwnProperty("mapbox_clip_end")){var W=+I.properties.mapbox_clip_start,se=+I.properties.mapbox_clip_end;return{start:W,end:se}}},gs.prototype.addFeature=function(I,W,se,ge,Me){var Pe=this.layers[0].layout,Qe=Pe.get("line-join").evaluate(I,{}),dt=Pe.get("line-cap"),Mt=Pe.get("line-miter-limit"),_t=Pe.get("line-round-limit");this.lineClips=this.lineFeatureClips(I);for(var Yt=0,rr=W;Yt<rr.length;Yt+=1){var qt=rr[Yt];this.addLine(qt,I,Qe,dt,Mt,_t)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,se,Me,ge)},gs.prototype.addLine=function(I,W,se,ge,Me,Pe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Qe=0;Qe<I.length-1;Qe++)this.totalDistance+=I[Qe].dist(I[Qe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var dt=JT[W.type]==="Polygon",Mt=I.length;Mt>=2&&I[Mt-1].equals(I[Mt-2]);)Mt--;for(var _t=0;_t<Mt-1&&I[_t].equals(I[_t+1]);)_t++;if(!(Mt<(dt?3:2))){se==="bevel"&&(Me=1.05);var Yt=this.overscaling<=16?$T*Mi/(512*this.overscaling):0,rr=this.segments.prepareSegment(Mt*10,this.layoutVertexArray,this.indexArray),qt,br=void 0,Br=void 0,fn=void 0,rn=void 0;this.e1=this.e2=-1,dt&&(qt=I[Mt-2],rn=I[_t].sub(qt)._unit()._perp());for(var Cn=_t;Cn<Mt;Cn++)if(Br=Cn===Mt-1?dt?I[_t+1]:void 0:I[Cn+1],!(Br&&I[Cn].equals(Br))){rn&&(fn=rn),qt&&(br=qt),qt=I[Cn],rn=Br?Br.sub(qt)._unit()._perp():fn,fn=fn||rn;var gn=fn.add(rn);(gn.x!==0||gn.y!==0)&&gn._unit();var Sn=fn.x*rn.x+fn.y*rn.y,Dn=gn.x*rn.x+gn.y*rn.y,Wn=Dn!==0?1/Dn:1/0,ni=2*Math.sqrt(2-2*Dn),ei=Dn<QT&&br&&Br,wi=fn.x*rn.y-fn.y*rn.x>0;if(ei&&Cn>_t){var pi=qt.dist(br);if(pi>2*Yt){var xi=qt.sub(qt.sub(br)._mult(Yt/pi)._round());this.updateDistance(br,xi),this.addCurrentVertex(xi,fn,0,0,rr),br=xi}}var Bi=br&&Br,Ti=Bi?se:dt?"butt":ge;if(Bi&&Ti==="round"&&(Wn<Pe?Ti="miter":Wn<=2&&(Ti="fakeround")),Ti==="miter"&&Wn>Me&&(Ti="bevel"),Ti==="bevel"&&(Wn>2&&(Ti="flipbevel"),Wn<Me&&(Ti="miter")),br&&this.updateDistance(br,qt),Ti==="miter")gn._mult(Wn),this.addCurrentVertex(qt,gn,0,0,rr);else if(Ti==="flipbevel"){if(Wn>100)gn=rn.mult(-1);else{var Si=Wn*fn.add(rn).mag()/fn.sub(rn).mag();gn._perp()._mult(Si*(wi?-1:1))}this.addCurrentVertex(qt,gn,0,0,rr),this.addCurrentVertex(qt,gn.mult(-1),0,0,rr)}else if(Ti==="bevel"||Ti==="fakeround"){var Gi=-Math.sqrt(Wn*Wn-1),Oi=wi?Gi:0,la=wi?0:Gi;if(br&&this.addCurrentVertex(qt,fn,Oi,la,rr),Ti==="fakeround")for(var Ta=Math.round(ni*180/Math.PI/qT),ua=1;ua<Ta;ua++){var fa=ua/Ta;if(fa!==.5){var na=fa-.5,Ra=1.0904+Sn*(-3.2452+Sn*(3.55645-Sn*1.43519)),ka=.848013+Sn*(-1.06021+Sn*.215638);fa=fa+fa*na*(fa-1)*(Ra*na*na+ka)}var $a=rn.sub(fn)._mult(fa)._add(fn)._unit()._mult(wi?-1:1);this.addHalfVertex(qt,$a.x,$a.y,!1,wi,0,rr)}Br&&this.addCurrentVertex(qt,rn,-Oi,-la,rr)}else if(Ti==="butt")this.addCurrentVertex(qt,gn,0,0,rr);else if(Ti==="square"){var no=br?1:-1;this.addCurrentVertex(qt,gn,no,no,rr)}else Ti==="round"&&(br&&(this.addCurrentVertex(qt,fn,0,0,rr),this.addCurrentVertex(qt,fn,1,1,rr,!0)),Br&&(this.addCurrentVertex(qt,rn,-1,-1,rr,!0),this.addCurrentVertex(qt,rn,0,0,rr)));if(ei&&Cn<Mt-1){var ko=qt.dist(Br);if(ko>2*Yt){var To=qt.add(Br.sub(qt)._mult(Yt/ko)._round());this.updateDistance(qt,To),this.addCurrentVertex(To,rn,0,0,rr),qt=To}}}}},gs.prototype.addCurrentVertex=function(I,W,se,ge,Me,Pe){Pe===void 0&&(Pe=!1);var Qe=W.x+W.y*se,dt=W.y-W.x*se,Mt=-W.x+W.y*ge,_t=-W.y-W.x*ge;this.addHalfVertex(I,Qe,dt,Pe,!1,se,Me),this.addHalfVertex(I,Mt,_t,Pe,!0,-ge,Me),this.distance>T1/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(I,W,se,ge,Me,Pe))},gs.prototype.addHalfVertex=function(I,W,se,ge,Me,Pe,Qe){var dt=I.x,Mt=I.y,_t=this.lineClips?this.scaledDistance*(T1-1):this.scaledDistance,Yt=_t*w1;if(this.layoutVertexArray.emplaceBack((dt<<1)+(ge?1:0),(Mt<<1)+(Me?1:0),Math.round(b1*W)+128,Math.round(b1*se)+128,(Pe===0?0:Pe<0?-1:1)+1|(Yt&63)<<2,Yt>>6),this.lineClips){var rr=this.scaledDistance-this.lineClips.start,qt=this.lineClips.end-this.lineClips.start,br=rr/qt;this.layoutVertexArray2.emplaceBack(br,this.lineClipsArray.length)}var Br=Qe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Br),Qe.primitiveLength++),Me?this.e2=Br:this.e1=Br},gs.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},gs.prototype.updateDistance=function(I,W){this.distance+=I.dist(W),this.updateScaledDistance()},Ve("LineBucket",gs,{omit:["layers","patternFeatures"]});var t4=new pa({"line-cap":new li(Ar.layout_line["line-cap"]),"line-join":new Ci(Ar.layout_line["line-join"]),"line-miter-limit":new li(Ar.layout_line["line-miter-limit"]),"line-round-limit":new li(Ar.layout_line["line-round-limit"]),"line-sort-key":new Ci(Ar.layout_line["line-sort-key"])}),r4=new pa({"line-opacity":new Ci(Ar.paint_line["line-opacity"]),"line-color":new Ci(Ar.paint_line["line-color"]),"line-translate":new li(Ar.paint_line["line-translate"]),"line-translate-anchor":new li(Ar.paint_line["line-translate-anchor"]),"line-width":new Ci(Ar.paint_line["line-width"]),"line-gap-width":new Ci(Ar.paint_line["line-gap-width"]),"line-offset":new Ci(Ar.paint_line["line-offset"]),"line-blur":new Ci(Ar.paint_line["line-blur"]),"line-dasharray":new Zo(Ar.paint_line["line-dasharray"]),"line-pattern":new Vo(Ar.paint_line["line-pattern"]),"line-gradient":new yo(Ar.paint_line["line-gradient"])}),A1={paint:r4,layout:t4},n4=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(se,ge){return ge=new Ai(Math.floor(ge.zoom),{now:ge.now,fadeDuration:ge.fadeDuration,zoomHistory:ge.zoomHistory,transition:ge.transition}),R.prototype.possiblyEvaluate.call(this,se,ge)},I.prototype.evaluate=function(se,ge,Me,Pe){return ge=x({},ge,{zoom:Math.floor(ge.zoom)}),R.prototype.evaluate.call(this,se,ge,Me,Pe)},I}(Ci),M1=new n4(A1.paint.properties["line-width"].specification);M1.useIntegerZoom=!0;var i4=function(R){function I(W){R.call(this,W,A1),this.gradientVersion=0}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(se){if(se==="line-gradient"){var ge=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=ge._styleExpression.expression instanceof ss,this.gradientVersion=(this.gradientVersion+1)%f}},I.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},I.prototype.recalculate=function(se,ge){R.prototype.recalculate.call(this,se,ge),this.paint._values["line-floorwidth"]=M1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,se)},I.prototype.createBucket=function(se){return new gs(se)},I.prototype.queryRadius=function(se){var ge=se,Me=E1(ps("line-width",this,ge),ps("line-gap-width",this,ge)),Pe=ps("line-offset",this,ge);return Me/2+Math.abs(Pe)+Cl(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(se,ge,Me,Pe,Qe,dt,Mt){var _t=Fu(se,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),dt.angle,Mt),Yt=Mt/2*E1(this.paint.get("line-width").evaluate(ge,Me),this.paint.get("line-gap-width").evaluate(ge,Me)),rr=this.paint.get("line-offset").evaluate(ge,Me);return rr&&(Pe=a4(Pe,rr*Mt)),Eo(_t,Pe,Yt)},I.prototype.isTileClipped=function(){return!0},I}(Ja);function E1(R,I){return I>0?I+2*R:R}function a4(R,I){for(var W=[],se=new r(0,0),ge=0;ge<R.length;ge++){for(var Me=R[ge],Pe=[],Qe=0;Qe<Me.length;Qe++){var dt=Me[Qe-1],Mt=Me[Qe],_t=Me[Qe+1],Yt=Qe===0?se:Mt.sub(dt)._unit()._perp(),rr=Qe===Me.length-1?se:_t.sub(Mt)._unit()._perp(),qt=Yt._add(rr)._unit(),br=qt.x*rr.x+qt.y*rr.y;qt._mult(1/br),Pe.push(qt._mult(I)._add(Mt))}W.push(Pe)}return W}var o4=Oa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),s4=Oa([{name:"a_projected_pos",components:3,type:"Float32"}],4);Oa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var l4=Oa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Oa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var S1=Oa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),u4=Oa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Oa([{name:"triangle",components:3,type:"Uint16"}]),Oa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Oa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Oa([{type:"Float32",name:"offsetX"}]),Oa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function f4(R,I,W){var se=I.layout.get("text-transform").evaluate(W,{});return se==="uppercase"?R=R.toLocaleUpperCase():se==="lowercase"&&(R=R.toLocaleLowerCase()),Qn.applyArabicShaping&&(R=Qn.applyArabicShaping(R)),R}function c4(R,I,W){return R.sections.forEach(function(se){se.text=f4(se.text,I,W)}),R}function h4(R){var I={},W={},se=[],ge=0;function Me(rn){se.push(R[rn]),ge++}function Pe(rn,Cn,gn){var Sn=W[rn];return delete W[rn],W[Cn]=Sn,se[Sn].geometry[0].pop(),se[Sn].geometry[0]=se[Sn].geometry[0].concat(gn[0]),Sn}function Qe(rn,Cn,gn){var Sn=I[Cn];return delete I[Cn],I[rn]=Sn,se[Sn].geometry[0].shift(),se[Sn].geometry[0]=gn[0].concat(se[Sn].geometry[0]),Sn}function dt(rn,Cn,gn){var Sn=gn?Cn[0][Cn[0].length-1]:Cn[0][0];return rn+":"+Sn.x+":"+Sn.y}for(var Mt=0;Mt<R.length;Mt++){var _t=R[Mt],Yt=_t.geometry,rr=_t.text?_t.text.toString():null;if(!rr){Me(Mt);continue}var qt=dt(rr,Yt),br=dt(rr,Yt,!0);if(qt in W&&br in I&&W[qt]!==I[br]){var Br=Qe(qt,br,Yt),fn=Pe(qt,br,se[Br].geometry);delete I[qt],delete W[br],W[dt(rr,se[fn].geometry,!0)]=fn,se[Br].geometry=null}else qt in W?Pe(qt,br,Yt):br in I?Qe(qt,br,Yt):(Me(Mt),I[qt]=ge-1,W[br]=ge-1)}return se.filter(function(rn){return rn.geometry})}var Td={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function v4(R){for(var I="",W=0;W<R.length;W++){var se=R.charCodeAt(W+1)||null,ge=R.charCodeAt(W-1)||null,Me=(!se||!Ur(se)||Td[R[W+1]])&&(!ge||!Ur(ge)||Td[R[W-1]]);Me&&Td[R[W]]?I+=Td[R[W]]:I+=R[W]}return I}var Ho=24,d4=function(R,I,W,se,ge){var Me,Pe,Qe=ge*8-se-1,dt=(1<<Qe)-1,Mt=dt>>1,_t=-7,Yt=W?ge-1:0,rr=W?-1:1,qt=R[I+Yt];for(Yt+=rr,Me=qt&(1<<-_t)-1,qt>>=-_t,_t+=Qe;_t>0;Me=Me*256+R[I+Yt],Yt+=rr,_t-=8);for(Pe=Me&(1<<-_t)-1,Me>>=-_t,_t+=se;_t>0;Pe=Pe*256+R[I+Yt],Yt+=rr,_t-=8);if(Me===0)Me=1-Mt;else{if(Me===dt)return Pe?NaN:(qt?-1:1)*(1/0);Pe=Pe+Math.pow(2,se),Me=Me-Mt}return(qt?-1:1)*Pe*Math.pow(2,Me-se)},p4=function(R,I,W,se,ge,Me){var Pe,Qe,dt,Mt=Me*8-ge-1,_t=(1<<Mt)-1,Yt=_t>>1,rr=ge===23?Math.pow(2,-24)-Math.pow(2,-77):0,qt=se?0:Me-1,br=se?1:-1,Br=I<0||I===0&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(Qe=isNaN(I)?1:0,Pe=_t):(Pe=Math.floor(Math.log(I)/Math.LN2),I*(dt=Math.pow(2,-Pe))<1&&(Pe--,dt*=2),Pe+Yt>=1?I+=rr/dt:I+=rr*Math.pow(2,1-Yt),I*dt>=2&&(Pe++,dt/=2),Pe+Yt>=_t?(Qe=0,Pe=_t):Pe+Yt>=1?(Qe=(I*dt-1)*Math.pow(2,ge),Pe=Pe+Yt):(Qe=I*Math.pow(2,Yt-1)*Math.pow(2,ge),Pe=0));ge>=8;R[W+qt]=Qe&255,qt+=br,Qe/=256,ge-=8);for(Pe=Pe<<ge|Qe,Mt+=ge;Mt>0;R[W+qt]=Pe&255,qt+=br,Pe/=256,Mt-=8);R[W+qt-br]|=Br*128},Gp={read:d4,write:p4},Wp=Da;function Da(R){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(R)?R:new Uint8Array(R||0),this.pos=0,this.type=0,this.length=this.buf.length}Da.Varint=0,Da.Fixed64=1,Da.Bytes=2,Da.Fixed32=5;var Wg=65536*65536,C1=1/Wg,g4=12,L1=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Da.prototype={destroy:function(){this.buf=null},readFields:function(R,I,W){for(W=W||this.length;this.pos<W;){var se=this.readVarint(),ge=se>>3,Me=this.pos;this.type=se&7,R(ge,I,this),this.pos===Me&&this.skip(se)}return I},readMessage:function(R,I){return this.readFields(R,I,this.readVarint()+this.pos)},readFixed32:function(){var R=Yp(this.buf,this.pos);return this.pos+=4,R},readSFixed32:function(){var R=P1(this.buf,this.pos);return this.pos+=4,R},readFixed64:function(){var R=Yp(this.buf,this.pos)+Yp(this.buf,this.pos+4)*Wg;return this.pos+=8,R},readSFixed64:function(){var R=Yp(this.buf,this.pos)+P1(this.buf,this.pos+4)*Wg;return this.pos+=8,R},readFloat:function(){var R=Gp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,R},readDouble:function(){var R=Gp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,R},readVarint:function(R){var I=this.buf,W,se;return se=I[this.pos++],W=se&127,se<128||(se=I[this.pos++],W|=(se&127)<<7,se<128)||(se=I[this.pos++],W|=(se&127)<<14,se<128)||(se=I[this.pos++],W|=(se&127)<<21,se<128)?W:(se=I[this.pos],W|=(se&15)<<28,y4(W,R,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var R=this.readVarint();return R%2===1?(R+1)/-2:R/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var R=this.readVarint()+this.pos,I=this.pos;return this.pos=R,R-I>=g4&&L1?R4(this.buf,I,R):P4(this.buf,I,R)},readBytes:function(){var R=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,R);return this.pos=R,I},readPackedVarint:function(R,I){if(this.type!==Da.Bytes)return R.push(this.readVarint(I));var W=Xf(this);for(R=R||[];this.pos<W;)R.push(this.readVarint(I));return R},readPackedSVarint:function(R){if(this.type!==Da.Bytes)return R.push(this.readSVarint());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readSVarint());return R},readPackedBoolean:function(R){if(this.type!==Da.Bytes)return R.push(this.readBoolean());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readBoolean());return R},readPackedFloat:function(R){if(this.type!==Da.Bytes)return R.push(this.readFloat());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readFloat());return R},readPackedDouble:function(R){if(this.type!==Da.Bytes)return R.push(this.readDouble());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readDouble());return R},readPackedFixed32:function(R){if(this.type!==Da.Bytes)return R.push(this.readFixed32());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readFixed32());return R},readPackedSFixed32:function(R){if(this.type!==Da.Bytes)return R.push(this.readSFixed32());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readSFixed32());return R},readPackedFixed64:function(R){if(this.type!==Da.Bytes)return R.push(this.readFixed64());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readFixed64());return R},readPackedSFixed64:function(R){if(this.type!==Da.Bytes)return R.push(this.readSFixed64());var I=Xf(this);for(R=R||[];this.pos<I;)R.push(this.readSFixed64());return R},skip:function(R){var I=R&7;if(I===Da.Varint)for(;this.buf[this.pos++]>127;);else if(I===Da.Bytes)this.pos=this.readVarint()+this.pos;else if(I===Da.Fixed32)this.pos+=4;else if(I===Da.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+I)},writeTag:function(R,I){this.writeVarint(R<<3|I)},realloc:function(R){for(var I=this.length||16;I<this.pos+R;)I*=2;if(I!==this.length){var W=new Uint8Array(I);W.set(this.buf),this.buf=W,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(R){this.realloc(4),mv(this.buf,R,this.pos),this.pos+=4},writeSFixed32:function(R){this.realloc(4),mv(this.buf,R,this.pos),this.pos+=4},writeFixed64:function(R){this.realloc(8),mv(this.buf,R&-1,this.pos),mv(this.buf,Math.floor(R*C1),this.pos+4),this.pos+=8},writeSFixed64:function(R){this.realloc(8),mv(this.buf,R&-1,this.pos),mv(this.buf,Math.floor(R*C1),this.pos+4),this.pos+=8},writeVarint:function(R){if(R=+R||0,R>268435455||R<0){m4(R,this);return}this.realloc(4),this.buf[this.pos++]=R&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=(R>>>=7)&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=(R>>>=7)&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=R>>>7&127)))},writeSVarint:function(R){this.writeVarint(R<0?-R*2-1:R*2)},writeBoolean:function(R){this.writeVarint(!!R)},writeString:function(R){R=String(R),this.realloc(R.length*4),this.pos++;var I=this.pos;this.pos=I4(this.buf,R,this.pos);var W=this.pos-I;W>=128&&_1(I,W,this),this.pos=I-1,this.writeVarint(W),this.pos+=W},writeFloat:function(R){this.realloc(4),Gp.write(this.buf,R,this.pos,!0,23,4),this.pos+=4},writeDouble:function(R){this.realloc(8),Gp.write(this.buf,R,this.pos,!0,52,8),this.pos+=8},writeBytes:function(R){var I=R.length;this.writeVarint(I),this.realloc(I);for(var W=0;W<I;W++)this.buf[this.pos++]=R[W]},writeRawMessage:function(R,I){this.pos++;var W=this.pos;R(I,this);var se=this.pos-W;se>=128&&_1(W,se,this),this.pos=W-1,this.writeVarint(se),this.pos+=se},writeMessage:function(R,I,W){this.writeTag(R,Da.Bytes),this.writeRawMessage(I,W)},writePackedVarint:function(R,I){I.length&&this.writeMessage(R,w4,I)},writePackedSVarint:function(R,I){I.length&&this.writeMessage(R,T4,I)},writePackedBoolean:function(R,I){I.length&&this.writeMessage(R,E4,I)},writePackedFloat:function(R,I){I.length&&this.writeMessage(R,A4,I)},writePackedDouble:function(R,I){I.length&&this.writeMessage(R,M4,I)},writePackedFixed32:function(R,I){I.length&&this.writeMessage(R,S4,I)},writePackedSFixed32:function(R,I){I.length&&this.writeMessage(R,C4,I)},writePackedFixed64:function(R,I){I.length&&this.writeMessage(R,L4,I)},writePackedSFixed64:function(R,I){I.length&&this.writeMessage(R,_4,I)},writeBytesField:function(R,I){this.writeTag(R,Da.Bytes),this.writeBytes(I)},writeFixed32Field:function(R,I){this.writeTag(R,Da.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(R,I){this.writeTag(R,Da.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(R,I){this.writeTag(R,Da.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(R,I){this.writeTag(R,Da.Fixed64),this.writeSFixed64(I)},writeVarintField:function(R,I){this.writeTag(R,Da.Varint),this.writeVarint(I)},writeSVarintField:function(R,I){this.writeTag(R,Da.Varint),this.writeSVarint(I)},writeStringField:function(R,I){this.writeTag(R,Da.Bytes),this.writeString(I)},writeFloatField:function(R,I){this.writeTag(R,Da.Fixed32),this.writeFloat(I)},writeDoubleField:function(R,I){this.writeTag(R,Da.Fixed64),this.writeDouble(I)},writeBooleanField:function(R,I){this.writeVarintField(R,!!I)}};function y4(R,I,W){var se=W.buf,ge,Me;if(Me=se[W.pos++],ge=(Me&112)>>4,Me<128||(Me=se[W.pos++],ge|=(Me&127)<<3,Me<128)||(Me=se[W.pos++],ge|=(Me&127)<<10,Me<128)||(Me=se[W.pos++],ge|=(Me&127)<<17,Me<128)||(Me=se[W.pos++],ge|=(Me&127)<<24,Me<128)||(Me=se[W.pos++],ge|=(Me&1)<<31,Me<128))return yv(R,ge,I);throw new Error("Expected varint not more than 10 bytes")}function Xf(R){return R.type===Da.Bytes?R.readVarint()+R.pos:R.pos+1}function yv(R,I,W){return W?I*4294967296+(R>>>0):(I>>>0)*4294967296+(R>>>0)}function m4(R,I){var W,se;if(R>=0?(W=R%4294967296|0,se=R/4294967296|0):(W=~(-R%4294967296),se=~(-R/4294967296),W^4294967295?W=W+1|0:(W=0,se=se+1|0)),R>=18446744073709552e3||R<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");I.realloc(10),x4(W,se,I),b4(se,I)}function x4(R,I,W){W.buf[W.pos++]=R&127|128,R>>>=7,W.buf[W.pos++]=R&127|128,R>>>=7,W.buf[W.pos++]=R&127|128,R>>>=7,W.buf[W.pos++]=R&127|128,R>>>=7,W.buf[W.pos]=R&127}function b4(R,I){var W=(R&7)<<4;I.buf[I.pos++]|=W|((R>>>=3)?128:0),R&&(I.buf[I.pos++]=R&127|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=R&127|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=R&127|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=R&127|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=R&127)))))}function _1(R,I,W){var se=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(Math.LN2*7));W.realloc(se);for(var ge=W.pos-1;ge>=R;ge--)W.buf[ge+se]=W.buf[ge]}function w4(R,I){for(var W=0;W<R.length;W++)I.writeVarint(R[W])}function T4(R,I){for(var W=0;W<R.length;W++)I.writeSVarint(R[W])}function A4(R,I){for(var W=0;W<R.length;W++)I.writeFloat(R[W])}function M4(R,I){for(var W=0;W<R.length;W++)I.writeDouble(R[W])}function E4(R,I){for(var W=0;W<R.length;W++)I.writeBoolean(R[W])}function S4(R,I){for(var W=0;W<R.length;W++)I.writeFixed32(R[W])}function C4(R,I){for(var W=0;W<R.length;W++)I.writeSFixed32(R[W])}function L4(R,I){for(var W=0;W<R.length;W++)I.writeFixed64(R[W])}function _4(R,I){for(var W=0;W<R.length;W++)I.writeSFixed64(R[W])}function Yp(R,I){return(R[I]|R[I+1]<<8|R[I+2]<<16)+R[I+3]*16777216}function mv(R,I,W){R[W]=I,R[W+1]=I>>>8,R[W+2]=I>>>16,R[W+3]=I>>>24}function P1(R,I){return(R[I]|R[I+1]<<8|R[I+2]<<16)+(R[I+3]<<24)}function P4(R,I,W){for(var se="",ge=I;ge<W;){var Me=R[ge],Pe=null,Qe=Me>239?4:Me>223?3:Me>191?2:1;if(ge+Qe>W)break;var dt,Mt,_t;Qe===1?Me<128&&(Pe=Me):Qe===2?(dt=R[ge+1],(dt&192)===128&&(Pe=(Me&31)<<6|dt&63,Pe<=127&&(Pe=null))):Qe===3?(dt=R[ge+1],Mt=R[ge+2],(dt&192)===128&&(Mt&192)===128&&(Pe=(Me&15)<<12|(dt&63)<<6|Mt&63,(Pe<=2047||Pe>=55296&&Pe<=57343)&&(Pe=null))):Qe===4&&(dt=R[ge+1],Mt=R[ge+2],_t=R[ge+3],(dt&192)===128&&(Mt&192)===128&&(_t&192)===128&&(Pe=(Me&15)<<18|(dt&63)<<12|(Mt&63)<<6|_t&63,(Pe<=65535||Pe>=1114112)&&(Pe=null))),Pe===null?(Pe=65533,Qe=1):Pe>65535&&(Pe-=65536,se+=String.fromCharCode(Pe>>>10&1023|55296),Pe=56320|Pe&1023),se+=String.fromCharCode(Pe),ge+=Qe}return se}function R4(R,I,W){return L1.decode(R.subarray(I,W))}function I4(R,I,W){for(var se=0,ge,Me;se<I.length;se++){if(ge=I.charCodeAt(se),ge>55295&&ge<57344)if(Me)if(ge<56320){R[W++]=239,R[W++]=191,R[W++]=189,Me=ge;continue}else ge=Me-55296<<10|ge-56320|65536,Me=null;else{ge>56319||se+1===I.length?(R[W++]=239,R[W++]=191,R[W++]=189):Me=ge;continue}else Me&&(R[W++]=239,R[W++]=191,R[W++]=189,Me=null);ge<128?R[W++]=ge:(ge<2048?R[W++]=ge>>6|192:(ge<65536?R[W++]=ge>>12|224:(R[W++]=ge>>18|240,R[W++]=ge>>12&63|128),R[W++]=ge>>6&63|128),R[W++]=ge&63|128)}return W}var Yg=3;function D4(R,I,W){R===1&&W.readMessage(k4,I)}function k4(R,I,W){if(R===3){var se=W.readMessage(z4,{}),ge=se.id,Me=se.bitmap,Pe=se.width,Qe=se.height,dt=se.left,Mt=se.top,_t=se.advance;I.push({id:ge,bitmap:new Bh({width:Pe+2*Yg,height:Qe+2*Yg},Me),metrics:{width:Pe,height:Qe,left:dt,top:Mt,advance:_t}})}}function z4(R,I,W){R===1?I.id=W.readVarint():R===2?I.bitmap=W.readBytes():R===3?I.width=W.readVarint():R===4?I.height=W.readVarint():R===5?I.left=W.readSVarint():R===6?I.top=W.readSVarint():R===7&&(I.advance=W.readVarint())}function O4(R){return new Wp(R).readFields(D4,[])}var R1=Yg;function I1(R){for(var I=0,W=0,se=0,ge=R;se<ge.length;se+=1){var Me=ge[se];I+=Me.w*Me.h,W=Math.max(W,Me.w)}R.sort(function(fn,rn){return rn.h-fn.h});for(var Pe=Math.max(Math.ceil(Math.sqrt(I/.95)),W),Qe=[{x:0,y:0,w:Pe,h:1/0}],dt=0,Mt=0,_t=0,Yt=R;_t<Yt.length;_t+=1)for(var rr=Yt[_t],qt=Qe.length-1;qt>=0;qt--){var br=Qe[qt];if(!(rr.w>br.w||rr.h>br.h)){if(rr.x=br.x,rr.y=br.y,Mt=Math.max(Mt,rr.y+rr.h),dt=Math.max(dt,rr.x+rr.w),rr.w===br.w&&rr.h===br.h){var Br=Qe.pop();qt<Qe.length&&(Qe[qt]=Br)}else rr.h===br.h?(br.x+=rr.w,br.w-=rr.w):rr.w===br.w?(br.y+=rr.h,br.h-=rr.h):(Qe.push({x:br.x+rr.w,y:br.y,w:br.w-rr.w,h:rr.h}),br.y+=rr.h,br.h-=rr.h);break}}return{w:dt,h:Mt,fill:I/(dt*Mt)||0}}var Xs=1,Xp=function(I,W){var se=W.pixelRatio,ge=W.version,Me=W.stretchX,Pe=W.stretchY,Qe=W.content;this.paddedRect=I,this.pixelRatio=se,this.stretchX=Me,this.stretchY=Pe,this.content=Qe,this.version=ge},Ad={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ad.tl.get=function(){return[this.paddedRect.x+Xs,this.paddedRect.y+Xs]},Ad.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Xs,this.paddedRect.y+this.paddedRect.h-Xs]},Ad.tlbr.get=function(){return this.tl.concat(this.br)},Ad.displaySize.get=function(){return[(this.paddedRect.w-Xs*2)/this.pixelRatio,(this.paddedRect.h-Xs*2)/this.pixelRatio]},Object.defineProperties(Xp.prototype,Ad);var Md=function(I,W){var se={},ge={};this.haveRenderCallbacks=[];var Me=[];this.addImages(I,se,Me),this.addImages(W,ge,Me);var Pe=I1(Me),Qe=Pe.w,dt=Pe.h,Mt=new Ds({width:Qe||1,height:dt||1});for(var _t in I){var Yt=I[_t],rr=se[_t].paddedRect;Ds.copy(Yt.data,Mt,{x:0,y:0},{x:rr.x+Xs,y:rr.y+Xs},Yt.data)}for(var qt in W){var br=W[qt],Br=ge[qt].paddedRect,fn=Br.x+Xs,rn=Br.y+Xs,Cn=br.data.width,gn=br.data.height;Ds.copy(br.data,Mt,{x:0,y:0},{x:fn,y:rn},br.data),Ds.copy(br.data,Mt,{x:0,y:gn-1},{x:fn,y:rn-1},{width:Cn,height:1}),Ds.copy(br.data,Mt,{x:0,y:0},{x:fn,y:rn+gn},{width:Cn,height:1}),Ds.copy(br.data,Mt,{x:Cn-1,y:0},{x:fn-1,y:rn},{width:1,height:gn}),Ds.copy(br.data,Mt,{x:0,y:0},{x:fn+Cn,y:rn},{width:1,height:gn})}this.image=Mt,this.iconPositions=se,this.patternPositions=ge};Md.prototype.addImages=function(I,W,se){for(var ge in I){var Me=I[ge],Pe={x:0,y:0,w:Me.data.width+2*Xs,h:Me.data.height+2*Xs};se.push(Pe),W[ge]=new Xp(Pe,Me),Me.hasRenderCallback&&this.haveRenderCallbacks.push(ge)}},Md.prototype.patchUpdatedImages=function(I,W){I.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var se in I.updatedImages)this.patchUpdatedImage(this.iconPositions[se],I.getImage(se),W),this.patchUpdatedImage(this.patternPositions[se],I.getImage(se),W)},Md.prototype.patchUpdatedImage=function(I,W,se){if(!(!I||!W)&&I.version!==W.version){I.version=W.version;var ge=I.tl,Me=ge[0],Pe=ge[1];se.update(W.data,void 0,{x:Me,y:Pe})}},Ve("ImagePosition",Xp),Ve("ImageAtlas",Md);var ll={horizontal:1,vertical:2,horizontalOnly:3},Ed=-17;function F4(R){for(var I=0,W=R;I<W.length;I+=1){var se=W[I];if(se.positionedGlyphs.length!==0)return!1}return!0}var D1=57344,k1=63743,xv=function(){this.scale=1,this.fontStack="",this.imageName=null};xv.forText=function(I,W){var se=new xv;return se.scale=I||1,se.fontStack=W,se},xv.forImage=function(I){var W=new xv;return W.imageName=I,W};var $o=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};$o.fromFeature=function(I,W){for(var se=new $o,ge=0;ge<I.sections.length;ge++){var Me=I.sections[ge];Me.image?se.addImageSection(Me):se.addTextSection(Me,W)}return se},$o.prototype.length=function(){return this.text.length},$o.prototype.getSection=function(I){return this.sections[this.sectionIndex[I]]},$o.prototype.getSectionIndex=function(I){return this.sectionIndex[I]},$o.prototype.getCharCode=function(I){return this.text.charCodeAt(I)},$o.prototype.verticalizePunctuation=function(){this.text=v4(this.text)},$o.prototype.trim=function(){for(var I=0,W=0;W<this.text.length&&df[this.text.charCodeAt(W)];W++)I++;for(var se=this.text.length,ge=this.text.length-1;ge>=0&&ge>=I&&df[this.text.charCodeAt(ge)];ge--)se--;this.text=this.text.substring(I,se),this.sectionIndex=this.sectionIndex.slice(I,se)},$o.prototype.substring=function(I,W){var se=new $o;return se.text=this.text.substring(I,W),se.sectionIndex=this.sectionIndex.slice(I,W),se.sections=this.sections,se},$o.prototype.toString=function(){return this.text},$o.prototype.getMaxScale=function(){var I=this;return this.sectionIndex.reduce(function(W,se){return Math.max(W,I.sections[se].scale)},0)},$o.prototype.addTextSection=function(I,W){this.text+=I.text,this.sections.push(xv.forText(I.scale,I.fontStack||W));for(var se=this.sections.length-1,ge=0;ge<I.text.length;++ge)this.sectionIndex.push(se)},$o.prototype.addImageSection=function(I){var W=I.image?I.image.name:"";if(W.length===0){B("Can't add FormattedSection with an empty image.");return}var se=this.getNextImageSectionCharCode();if(!se){B("Reached maximum number of images "+(k1-D1+2));return}this.text+=String.fromCharCode(se),this.sections.push(xv.forImage(W)),this.sectionIndex.push(this.sections.length-1)},$o.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=k1?null:++this.imageSectionID:(this.imageSectionID=D1,this.imageSectionID)};function B4(R,I){for(var W=[],se=R.text,ge=0,Me=0,Pe=I;Me<Pe.length;Me+=1){var Qe=Pe[Me];W.push(R.substring(ge,Qe)),ge=Qe}return ge<se.length&&W.push(R.substring(ge,se.length)),W}function Zp(R,I,W,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br){var fn=$o.fromFeature(R,ge);Yt===ll.vertical&&fn.verticalizePunctuation();var rn,Cn=Qn.processBidirectionalText,gn=Qn.processStyledBidirectionalText;if(Cn&&fn.sections.length===1){rn=[];for(var Sn=Cn(fn.toString(),Xg(fn,Mt,Me,I,se,qt,br)),Dn=0,Wn=Sn;Dn<Wn.length;Dn+=1){var ni=Wn[Dn],ei=new $o;ei.text=ni,ei.sections=fn.sections;for(var wi=0;wi<ni.length;wi++)ei.sectionIndex.push(0);rn.push(ei)}}else if(gn){rn=[];for(var pi=gn(fn.text,fn.sectionIndex,Xg(fn,Mt,Me,I,se,qt,br)),xi=0,Bi=pi;xi<Bi.length;xi+=1){var Ti=Bi[xi],Si=new $o;Si.text=Ti[0],Si.sectionIndex=Ti[1],Si.sections=fn.sections,rn.push(Si)}}else rn=B4(fn,Xg(fn,Mt,Me,I,se,qt,br));var Gi=[],Oi={positionedLines:Gi,text:fn.toString(),top:_t[1],bottom:_t[1],left:_t[0],right:_t[0],writingMode:Yt,iconsInText:!1,verticalizable:!1};return V4(Oi,I,W,se,rn,Pe,Qe,dt,Yt,Mt,rr,Br),F4(Gi)?!1:Oi}var df={};df[9]=!0,df[10]=!0,df[11]=!0,df[12]=!0,df[13]=!0,df[32]=!0;var Zs={};Zs[10]=!0,Zs[32]=!0,Zs[38]=!0,Zs[40]=!0,Zs[41]=!0,Zs[43]=!0,Zs[45]=!0,Zs[47]=!0,Zs[173]=!0,Zs[183]=!0,Zs[8203]=!0,Zs[8208]=!0,Zs[8211]=!0,Zs[8231]=!0;function z1(R,I,W,se,ge,Me){if(I.imageName){var dt=se[I.imageName];return dt?dt.displaySize[0]*I.scale*Ho/Me+ge:0}else{var Pe=W[I.fontStack],Qe=Pe&&Pe[R];return Qe?Qe.metrics.advance*I.scale+ge:0}}function N4(R,I,W,se,ge,Me){for(var Pe=0,Qe=0;Qe<R.length();Qe++){var dt=R.getSection(Qe);Pe+=z1(R.getCharCode(Qe),dt,se,ge,I,Me)}var Mt=Math.max(1,Math.ceil(Pe/W));return Pe/Mt}function O1(R,I,W,se){var ge=Math.pow(R-I,2);return se?R<I?ge/2:ge*2:ge+Math.abs(W)*W}function U4(R,I,W){var se=0;return R===10&&(se-=1e4),W&&(se+=150),(R===40||R===65288)&&(se+=50),(I===41||I===65289)&&(se+=50),se}function F1(R,I,W,se,ge,Me){for(var Pe=null,Qe=O1(I,W,ge,Me),dt=0,Mt=se;dt<Mt.length;dt+=1){var _t=Mt[dt],Yt=I-_t.x,rr=O1(Yt,W,ge,Me)+_t.badness;rr<=Qe&&(Pe=_t,Qe=rr)}return{index:R,x:I,priorBreak:Pe,badness:Qe}}function B1(R){return R?B1(R.priorBreak).concat(R.index):[]}function Xg(R,I,W,se,ge,Me,Pe){if(Me!=="point")return[];if(!R)return[];for(var Qe=[],dt=N4(R,I,W,se,ge,Pe),Mt=R.text.indexOf("")>=0,_t=0,Yt=0;Yt<R.length();Yt++){var rr=R.getSection(Yt),qt=R.getCharCode(Yt);if(df[qt]||(_t+=z1(qt,rr,se,ge,I,Pe)),Yt<R.length()-1){var br=Qr(qt);(Zs[qt]||br||rr.imageName)&&Qe.push(F1(Yt+1,_t,dt,Qe,U4(qt,R.getCharCode(Yt+1),br&&Mt),!1))}}return B1(F1(R.length(),_t,dt,Qe,0,!0))}function Zg(R){var I=.5,W=.5;switch(R){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0;break}switch(R){case"bottom":case"bottom-right":case"bottom-left":W=1;break;case"top":case"top-right":case"top-left":W=0;break}return{horizontalAlign:I,verticalAlign:W}}function V4(R,I,W,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt){for(var rr=0,qt=Ed,br=0,Br=0,fn=Qe==="right"?1:Qe==="left"?0:.5,rn=0,Cn=0,gn=ge;Cn<gn.length;Cn+=1){var Sn=gn[Cn];Sn.trim();var Dn=Sn.getMaxScale(),Wn=(Dn-1)*Ho,ni={positionedGlyphs:[],lineOffset:0};R.positionedLines[rn]=ni;var ei=ni.positionedGlyphs,wi=0;if(!Sn.length()){qt+=Me,++rn;continue}for(var pi=0;pi<Sn.length();pi++){var xi=Sn.getSection(pi),Bi=Sn.getSectionIndex(pi),Ti=Sn.getCharCode(pi),Si=0,Gi=null,Oi=null,la=null,Ta=Ho,ua=!(dt===ll.horizontal||!_t&&!on(Ti)||_t&&(df[Ti]||jr(Ti)));if(xi.imageName){var $a=se[xi.imageName];if(!$a)continue;la=xi.imageName,R.iconsInText=R.iconsInText||!0,Oi=$a.paddedRect;var no=$a.displaySize;xi.scale=xi.scale*Ho/Yt,Gi={width:no[0],height:no[1],left:Xs,top:-R1,advance:ua?no[1]:no[0]};var ko=Ho-no[1]*xi.scale;Si=Wn+ko,Ta=Gi.advance;var To=ua?no[0]*xi.scale-Ho*Dn:no[1]*xi.scale-Ho*Dn;To>0&&To>wi&&(wi=To)}else{var fa=W[xi.fontStack],na=fa&&fa[Ti];if(na&&na.rect)Oi=na.rect,Gi=na.metrics;else{var Ra=I[xi.fontStack],ka=Ra&&Ra[Ti];if(!ka)continue;Gi=ka.metrics}Si=(Dn-xi.scale)*Ho}ua?(R.verticalizable=!0,ei.push({glyph:Ti,imageName:la,x:rr,y:qt+Si,vertical:ua,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:Bi,metrics:Gi,rect:Oi}),rr+=Ta*xi.scale+Mt):(ei.push({glyph:Ti,imageName:la,x:rr,y:qt+Si,vertical:ua,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:Bi,metrics:Gi,rect:Oi}),rr+=Gi.advance*xi.scale+Mt)}if(ei.length!==0){var qo=rr-Mt;br=Math.max(qo,br),H4(ei,0,ei.length-1,fn,wi)}rr=0;var es=Me*Dn+wi;ni.lineOffset=Math.max(wi,Wn),qt+=es,Br=Math.max(es,Br),++rn}var zo=qt-Ed,ys=Zg(Pe),ms=ys.horizontalAlign,So=ys.verticalAlign;G4(R.positionedLines,fn,ms,So,br,Br,Me,zo,ge.length),R.top+=-So*zo,R.bottom=R.top+zo,R.left+=-ms*br,R.right=R.left+br}function H4(R,I,W,se,ge){if(!(!se&&!ge))for(var Me=R[W],Pe=Me.metrics.advance*Me.scale,Qe=(R[W].x+Pe)*se,dt=I;dt<=W;dt++)R[dt].x-=Qe,R[dt].y+=ge}function G4(R,I,W,se,ge,Me,Pe,Qe,dt){var Mt=(I-W)*ge,_t=0;Me!==Pe?_t=-Qe*se-Ed:_t=(-se*dt+.5)*Pe;for(var Yt=0,rr=R;Yt<rr.length;Yt+=1)for(var qt=rr[Yt],br=0,Br=qt.positionedGlyphs;br<Br.length;br+=1){var fn=Br[br];fn.x+=Mt,fn.y+=_t}}function W4(R,I,W){var se=Zg(W),ge=se.horizontalAlign,Me=se.verticalAlign,Pe=I[0],Qe=I[1],dt=Pe-R.displaySize[0]*ge,Mt=dt+R.displaySize[0],_t=Qe-R.displaySize[1]*Me,Yt=_t+R.displaySize[1];return{image:R,top:_t,bottom:Yt,left:dt,right:Mt}}function N1(R,I,W,se,ge,Me){var Pe=R.image,Qe;if(Pe.content){var dt=Pe.content,Mt=Pe.pixelRatio||1;Qe=[dt[0]/Mt,dt[1]/Mt,Pe.displaySize[0]-dt[2]/Mt,Pe.displaySize[1]-dt[3]/Mt]}var _t=I.left*Me,Yt=I.right*Me,rr,qt,br,Br;W==="width"||W==="both"?(Br=ge[0]+_t-se[3],qt=ge[0]+Yt+se[1]):(Br=ge[0]+(_t+Yt-Pe.displaySize[0])/2,qt=Br+Pe.displaySize[0]);var fn=I.top*Me,rn=I.bottom*Me;return W==="height"||W==="both"?(rr=ge[1]+fn-se[0],br=ge[1]+rn+se[2]):(rr=ge[1]+(fn+rn-Pe.displaySize[1])/2,br=rr+Pe.displaySize[1]),{image:Pe,top:rr,right:qt,bottom:br,left:Br,collisionPadding:Qe}}var bv=function(R){function I(W,se,ge,Me){R.call(this,W,se),this.angle=ge,Me!==void 0&&(this.segment=Me)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(r);Ve("Anchor",bv);var Uu=128;function jg(R,I){var W=I.expression;if(W.kind==="constant"){var se=W.evaluate(new Ai(R+1));return{kind:"constant",layoutSize:se}}else{if(W.kind==="source")return{kind:"source"};for(var ge=W.zoomStops,Me=W.interpolationType,Pe=0;Pe<ge.length&&ge[Pe]<=R;)Pe++;Pe=Math.max(0,Pe-1);for(var Qe=Pe;Qe<ge.length&&ge[Qe]<R+1;)Qe++;Qe=Math.min(ge.length-1,Qe);var dt=ge[Pe],Mt=ge[Qe];if(W.kind==="composite")return{kind:"composite",minZoom:dt,maxZoom:Mt,interpolationType:Me};var _t=W.evaluate(new Ai(dt)),Yt=W.evaluate(new Ai(Mt));return{kind:"camera",minZoom:dt,maxZoom:Mt,minSize:_t,maxSize:Yt,interpolationType:Me}}}function U1(R,I,W){var se=I.uSize,ge=I.uSizeT,Me=W.lowerSize,Pe=W.upperSize;return R.kind==="source"?Me/Uu:R.kind==="composite"?Ba(Me/Uu,Pe/Uu,ge):se}function V1(R,I){var W=0,se=0;if(R.kind==="constant")se=R.layoutSize;else if(R.kind!=="source"){var ge=R.interpolationType,Me=R.minZoom,Pe=R.maxZoom,Qe=ge?h(Xa.interpolationFactor(ge,I,Me,Pe),0,1):0;R.kind==="camera"?se=Ba(R.minSize,R.maxSize,Qe):W=Qe}return{uSizeT:W,uSize:se}}var Y4=Object.freeze({__proto__:null,getSizeData:jg,evaluateSizeForFeature:U1,evaluateSizeForZoom:V1,SIZE_PACK_FACTOR:Uu});function H1(R,I,W,se,ge){if(I.segment===void 0)return!0;for(var Me=I,Pe=I.segment+1,Qe=0;Qe>-W/2;){if(Pe--,Pe<0)return!1;Qe-=R[Pe].dist(Me),Me=R[Pe]}Qe+=R[Pe].dist(R[Pe+1]),Pe++;for(var dt=[],Mt=0;Qe<W/2;){var _t=R[Pe-1],Yt=R[Pe],rr=R[Pe+1];if(!rr)return!1;var qt=_t.angleTo(Yt)-Yt.angleTo(rr);for(qt=Math.abs((qt+3*Math.PI)%(Math.PI*2)-Math.PI),dt.push({distance:Qe,angleDelta:qt}),Mt+=qt;Qe-dt[0].distance>se;)Mt-=dt.shift().angleDelta;if(Mt>ge)return!1;Pe++,Qe+=Yt.dist(rr)}return!0}function G1(R){for(var I=0,W=0;W<R.length-1;W++)I+=R[W].dist(R[W+1]);return I}function W1(R,I,W){return R?.6*I*W:0}function Y1(R,I){return Math.max(R?R.right-R.left:0,I?I.right-I.left:0)}function X4(R,I,W,se,ge,Me){for(var Pe=W1(W,ge,Me),Qe=Y1(W,se)*Me,dt=0,Mt=G1(R)/2,_t=0;_t<R.length-1;_t++){var Yt=R[_t],rr=R[_t+1],qt=Yt.dist(rr);if(dt+qt>Mt){var br=(Mt-dt)/qt,Br=Ba(Yt.x,rr.x,br),fn=Ba(Yt.y,rr.y,br),rn=new bv(Br,fn,rr.angleTo(Yt),_t);return rn._round(),!Pe||H1(R,rn,Qe,Pe,I)?rn:void 0}dt+=qt}}function Z4(R,I,W,se,ge,Me,Pe,Qe,dt){var Mt=W1(se,Me,Pe),_t=Y1(se,ge),Yt=_t*Pe,rr=R[0].x===0||R[0].x===dt||R[0].y===0||R[0].y===dt;I-Yt<I/4&&(I=Yt+I/4);var qt=Me*2,br=rr?I/2*Qe%I:(_t/2+qt)*Pe*Qe%I;return X1(R,br,I,Mt,W,Yt,rr,!1,dt)}function X1(R,I,W,se,ge,Me,Pe,Qe,dt){for(var Mt=Me/2,_t=G1(R),Yt=0,rr=I-W,qt=[],br=0;br<R.length-1;br++){for(var Br=R[br],fn=R[br+1],rn=Br.dist(fn),Cn=fn.angleTo(Br);rr+W<Yt+rn;){rr+=W;var gn=(rr-Yt)/rn,Sn=Ba(Br.x,fn.x,gn),Dn=Ba(Br.y,fn.y,gn);if(Sn>=0&&Sn<dt&&Dn>=0&&Dn<dt&&rr-Mt>=0&&rr+Mt<=_t){var Wn=new bv(Sn,Dn,Cn,br);Wn._round(),(!se||H1(R,Wn,Me,se,ge))&&qt.push(Wn)}}Yt+=rn}return!Qe&&!qt.length&&!Pe&&(qt=X1(R,Yt/2,W,se,ge,Me,Pe,!0,dt)),qt}function Z1(R,I,W,se,ge){for(var Me=[],Pe=0;Pe<R.length;Pe++)for(var Qe=R[Pe],dt=void 0,Mt=0;Mt<Qe.length-1;Mt++){var _t=Qe[Mt],Yt=Qe[Mt+1];_t.x<I&&Yt.x<I||(_t.x<I?_t=new r(I,_t.y+(Yt.y-_t.y)*((I-_t.x)/(Yt.x-_t.x)))._round():Yt.x<I&&(Yt=new r(I,_t.y+(Yt.y-_t.y)*((I-_t.x)/(Yt.x-_t.x)))._round()),!(_t.y<W&&Yt.y<W)&&(_t.y<W?_t=new r(_t.x+(Yt.x-_t.x)*((W-_t.y)/(Yt.y-_t.y)),W)._round():Yt.y<W&&(Yt=new r(_t.x+(Yt.x-_t.x)*((W-_t.y)/(Yt.y-_t.y)),W)._round()),!(_t.x>=se&&Yt.x>=se)&&(_t.x>=se?_t=new r(se,_t.y+(Yt.y-_t.y)*((se-_t.x)/(Yt.x-_t.x)))._round():Yt.x>=se&&(Yt=new r(se,_t.y+(Yt.y-_t.y)*((se-_t.x)/(Yt.x-_t.x)))._round()),!(_t.y>=ge&&Yt.y>=ge)&&(_t.y>=ge?_t=new r(_t.x+(Yt.x-_t.x)*((ge-_t.y)/(Yt.y-_t.y)),ge)._round():Yt.y>=ge&&(Yt=new r(_t.x+(Yt.x-_t.x)*((ge-_t.y)/(Yt.y-_t.y)),ge)._round()),(!dt||!_t.equals(dt[dt.length-1]))&&(dt=[_t],Me.push(dt)),dt.push(Yt)))))}return Me}var wv=Xs;function j1(R,I,W,se){var ge=[],Me=R.image,Pe=Me.pixelRatio,Qe=Me.paddedRect.w-2*wv,dt=Me.paddedRect.h-2*wv,Mt=R.right-R.left,_t=R.bottom-R.top,Yt=Me.stretchX||[[0,Qe]],rr=Me.stretchY||[[0,dt]],qt=function(fa,na){return fa+na[1]-na[0]},br=Yt.reduce(qt,0),Br=rr.reduce(qt,0),fn=Qe-br,rn=dt-Br,Cn=0,gn=br,Sn=0,Dn=Br,Wn=0,ni=fn,ei=0,wi=rn;if(Me.content&&se){var pi=Me.content;Cn=jp(Yt,0,pi[0]),Sn=jp(rr,0,pi[1]),gn=jp(Yt,pi[0],pi[2]),Dn=jp(rr,pi[1],pi[3]),Wn=pi[0]-Cn,ei=pi[1]-Sn,ni=pi[2]-pi[0]-gn,wi=pi[3]-pi[1]-Dn}var xi=function(fa,na,Ra,ka){var $a=Kp(fa.stretch-Cn,gn,Mt,R.left),no=Jp(fa.fixed-Wn,ni,fa.stretch,br),ko=Kp(na.stretch-Sn,Dn,_t,R.top),To=Jp(na.fixed-ei,wi,na.stretch,Br),qo=Kp(Ra.stretch-Cn,gn,Mt,R.left),es=Jp(Ra.fixed-Wn,ni,Ra.stretch,br),zo=Kp(ka.stretch-Sn,Dn,_t,R.top),ys=Jp(ka.fixed-ei,wi,ka.stretch,Br),ms=new r($a,ko),So=new r(qo,ko),xs=new r(qo,zo),ul=new r($a,zo),Kf=new r(no/Pe,To/Pe),Hc=new r(es/Pe,ys/Pe),Gc=I*Math.PI/180;if(Gc){var Wc=Math.sin(Gc),_v=Math.cos(Gc),iu=[_v,-Wc,Wc,_v];ms._matMult(iu),So._matMult(iu),ul._matMult(iu),xs._matMult(iu)}var r0=fa.stretch+fa.fixed,ry=Ra.stretch+Ra.fixed,n0=na.stretch+na.fixed,ny=ka.stretch+ka.fixed,_l={x:Me.paddedRect.x+wv+r0,y:Me.paddedRect.y+wv+n0,w:ry-r0,h:ny-n0},Pv=ni/Pe/Mt,i0=wi/Pe/_t;return{tl:ms,tr:So,bl:ul,br:xs,tex:_l,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kf,pixelOffsetBR:Hc,minFontScaleX:Pv,minFontScaleY:i0,isSDF:W}};if(!se||!Me.stretchX&&!Me.stretchY)ge.push(xi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Qe+1},{fixed:0,stretch:dt+1}));else for(var Bi=K1(Yt,fn,br),Ti=K1(rr,rn,Br),Si=0;Si<Bi.length-1;Si++)for(var Gi=Bi[Si],Oi=Bi[Si+1],la=0;la<Ti.length-1;la++){var Ta=Ti[la],ua=Ti[la+1];ge.push(xi(Gi,Ta,Oi,ua))}return ge}function jp(R,I,W){for(var se=0,ge=0,Me=R;ge<Me.length;ge+=1){var Pe=Me[ge];se+=Math.max(I,Math.min(W,Pe[1]))-Math.max(I,Math.min(W,Pe[0]))}return se}function K1(R,I,W){for(var se=[{fixed:-wv,stretch:0}],ge=0,Me=R;ge<Me.length;ge+=1){var Pe=Me[ge],Qe=Pe[0],dt=Pe[1],Mt=se[se.length-1];se.push({fixed:Qe-Mt.stretch,stretch:Mt.stretch}),se.push({fixed:Qe-Mt.stretch,stretch:Mt.stretch+(dt-Qe)})}return se.push({fixed:I+wv,stretch:W}),se}function Kp(R,I,W,se){return R/I*W+se}function Jp(R,I,W,se){return R-I*W/se}function j4(R,I,W,se,ge,Me,Pe,Qe){for(var dt=se.layout.get("text-rotate").evaluate(Me,{})*Math.PI/180,Mt=[],_t=0,Yt=I.positionedLines;_t<Yt.length;_t+=1)for(var rr=Yt[_t],qt=0,br=rr.positionedGlyphs;qt<br.length;qt+=1){var Br=br[qt];if(Br.rect){var fn=Br.rect||{},rn=1,Cn=R1+rn,gn=!0,Sn=1,Dn=0,Wn=(ge||Qe)&&Br.vertical,ni=Br.metrics.advance*Br.scale/2;if(Qe&&I.verticalizable){var ei=(Br.scale-1)*Ho,wi=(Ho-Br.metrics.width*Br.scale)/2;Dn=rr.lineOffset/2-(Br.imageName?-wi:ei)}if(Br.imageName){var pi=Pe[Br.imageName];gn=pi.sdf,Sn=pi.pixelRatio,Cn=Xs/Sn}var xi=ge?[Br.x+ni,Br.y]:[0,0],Bi=ge?[0,0]:[Br.x+ni+W[0],Br.y+W[1]-Dn],Ti=[0,0];Wn&&(Ti=Bi,Bi=[0,0]);var Si=(Br.metrics.left-Cn)*Br.scale-ni+Bi[0],Gi=(-Br.metrics.top-Cn)*Br.scale+Bi[1],Oi=Si+fn.w*Br.scale/Sn,la=Gi+fn.h*Br.scale/Sn,Ta=new r(Si,Gi),ua=new r(Oi,Gi),fa=new r(Si,la),na=new r(Oi,la);if(Wn){var Ra=new r(-ni,ni-Ed),ka=-Math.PI/2,$a=Ho/2-ni,no=Br.imageName?$a:0,ko=new r(5-Ed-$a,-no),To=new(Function.prototype.bind.apply(r,[null].concat(Ti)));Ta._rotateAround(ka,Ra)._add(ko)._add(To),ua._rotateAround(ka,Ra)._add(ko)._add(To),fa._rotateAround(ka,Ra)._add(ko)._add(To),na._rotateAround(ka,Ra)._add(ko)._add(To)}if(dt){var qo=Math.sin(dt),es=Math.cos(dt),zo=[es,-qo,qo,es];Ta._matMult(zo),ua._matMult(zo),fa._matMult(zo),na._matMult(zo)}var ys=new r(0,0),ms=new r(0,0),So=0,xs=0;Mt.push({tl:Ta,tr:ua,bl:fa,br:na,tex:fn,writingMode:I.writingMode,glyphOffset:xi,sectionIndex:Br.sectionIndex,isSDF:gn,pixelOffsetTL:ys,pixelOffsetBR:ms,minFontScaleX:So,minFontScaleY:xs})}}return Mt}var Qp=function(I,W,se,ge,Me,Pe,Qe,dt,Mt,_t){if(this.boxStartIndex=I.length,Mt){var Yt=Pe.top,rr=Pe.bottom,qt=Pe.collisionPadding;qt&&(Yt-=qt[1],rr+=qt[3]);var br=rr-Yt;br>0&&(br=Math.max(10,br),this.circleDiameter=br)}else{var Br=Pe.top*Qe-dt,fn=Pe.bottom*Qe+dt,rn=Pe.left*Qe-dt,Cn=Pe.right*Qe+dt,gn=Pe.collisionPadding;if(gn&&(rn-=gn[0]*Qe,Br-=gn[1]*Qe,Cn+=gn[2]*Qe,fn+=gn[3]*Qe),_t){var Sn=new r(rn,Br),Dn=new r(Cn,Br),Wn=new r(rn,fn),ni=new r(Cn,fn),ei=_t*Math.PI/180;Sn._rotate(ei),Dn._rotate(ei),Wn._rotate(ei),ni._rotate(ei),rn=Math.min(Sn.x,Dn.x,Wn.x,ni.x),Cn=Math.max(Sn.x,Dn.x,Wn.x,ni.x),Br=Math.min(Sn.y,Dn.y,Wn.y,ni.y),fn=Math.max(Sn.y,Dn.y,Wn.y,ni.y)}I.emplaceBack(W.x,W.y,rn,Br,Cn,fn,se,ge,Me)}this.boxEndIndex=I.length},Tv=function(I,W){if(I===void 0&&(I=[]),W===void 0&&(W=K4),this.data=I,this.length=this.data.length,this.compare=W,this.length>0)for(var se=(this.length>>1)-1;se>=0;se--)this._down(se)};Tv.prototype.push=function(I){this.data.push(I),this.length++,this._up(this.length-1)},Tv.prototype.pop=function(){if(this.length!==0){var I=this.data[0],W=this.data.pop();return this.length--,this.length>0&&(this.data[0]=W,this._down(0)),I}},Tv.prototype.peek=function(){return this.data[0]},Tv.prototype._up=function(I){for(var W=this,se=W.data,ge=W.compare,Me=se[I];I>0;){var Pe=I-1>>1,Qe=se[Pe];if(ge(Me,Qe)>=0)break;se[I]=Qe,I=Pe}se[I]=Me},Tv.prototype._down=function(I){for(var W=this,se=W.data,ge=W.compare,Me=this.length>>1,Pe=se[I];I<Me;){var Qe=(I<<1)+1,dt=se[Qe],Mt=Qe+1;if(Mt<this.length&&ge(se[Mt],dt)<0&&(Qe=Mt,dt=se[Mt]),ge(dt,Pe)>=0)break;se[I]=dt,I=Qe}se[I]=Pe};function K4(R,I){return R<I?-1:R>I?1:0}function J4(R,I,W){W===void 0&&(W=!1);for(var se=1/0,ge=1/0,Me=-1/0,Pe=-1/0,Qe=R[0],dt=0;dt<Qe.length;dt++){var Mt=Qe[dt];(!dt||Mt.x<se)&&(se=Mt.x),(!dt||Mt.y<ge)&&(ge=Mt.y),(!dt||Mt.x>Me)&&(Me=Mt.x),(!dt||Mt.y>Pe)&&(Pe=Mt.y)}var _t=Me-se,Yt=Pe-ge,rr=Math.min(_t,Yt),qt=rr/2,br=new Tv([],Q4);if(rr===0)return new r(se,ge);for(var Br=se;Br<Me;Br+=rr)for(var fn=ge;fn<Pe;fn+=rr)br.push(new Av(Br+qt,fn+qt,qt,R));for(var rn=q4(R),Cn=br.length;br.length;){var gn=br.pop();(gn.d>rn.d||!rn.d)&&(rn=gn,W&&console.log("found best %d after %d probes",Math.round(1e4*gn.d)/1e4,Cn)),!(gn.max-rn.d<=I)&&(qt=gn.h/2,br.push(new Av(gn.p.x-qt,gn.p.y-qt,qt,R)),br.push(new Av(gn.p.x+qt,gn.p.y-qt,qt,R)),br.push(new Av(gn.p.x-qt,gn.p.y+qt,qt,R)),br.push(new Av(gn.p.x+qt,gn.p.y+qt,qt,R)),Cn+=4)}return W&&(console.log("num probes: "+Cn),console.log("best distance: "+rn.d)),rn.p}function Q4(R,I){return I.max-R.max}function Av(R,I,W,se){this.p=new r(R,I),this.h=W,this.d=$4(this.p,se),this.max=this.d+this.h*Math.SQRT2}function $4(R,I){for(var W=!1,se=1/0,ge=0;ge<I.length;ge++)for(var Me=I[ge],Pe=0,Qe=Me.length,dt=Qe-1;Pe<Qe;dt=Pe++){var Mt=Me[Pe],_t=Me[dt];Mt.y>R.y!=_t.y>R.y&&R.x<(_t.x-Mt.x)*(R.y-Mt.y)/(_t.y-Mt.y)+Mt.x&&(W=!W),se=Math.min(se,Yf(R,Mt,_t))}return(W?1:-1)*Math.sqrt(se)}function q4(R){for(var I=0,W=0,se=0,ge=R[0],Me=0,Pe=ge.length,Qe=Pe-1;Me<Pe;Qe=Me++){var dt=ge[Me],Mt=ge[Qe],_t=dt.x*Mt.y-Mt.x*dt.y;W+=(dt.x+Mt.x)*_t,se+=(dt.y+Mt.y)*_t,I+=_t*3}return new Av(W/I,se/I,0,R)}var Mv=7,Kg=Number.POSITIVE_INFINITY;function J1(R,I){function W(ge,Me){var Pe=0,Qe=0;Me<0&&(Me=0);var dt=Me/Math.sqrt(2);switch(ge){case"top-right":case"top-left":Qe=dt-Mv;break;case"bottom-right":case"bottom-left":Qe=-dt+Mv;break;case"bottom":Qe=-Me+Mv;break;case"top":Qe=Me-Mv;break}switch(ge){case"top-right":case"bottom-right":Pe=-dt;break;case"top-left":case"bottom-left":Pe=dt;break;case"left":Pe=Me;break;case"right":Pe=-Me;break}return[Pe,Qe]}function se(ge,Me,Pe){var Qe=0,dt=0;switch(Me=Math.abs(Me),Pe=Math.abs(Pe),ge){case"top-right":case"top-left":case"top":dt=Pe-Mv;break;case"bottom-right":case"bottom-left":case"bottom":dt=-Pe+Mv;break}switch(ge){case"top-right":case"bottom-right":case"right":Qe=-Me;break;case"top-left":case"bottom-left":case"left":Qe=Me;break}return[Qe,dt]}return I[1]!==Kg?se(R,I[0],I[1]):W(R,I[0])}function e5(R,I,W,se,ge,Me,Pe){R.createArrays();var Qe=512*R.overscaling;R.tilePixelRatio=Mi/Qe,R.compareText={},R.iconsNeedLinear=!1;var dt=R.layers[0].layout,Mt=R.layers[0]._unevaluatedLayout._values,_t={};if(R.textSizeData.kind==="composite"){var Yt=R.textSizeData,rr=Yt.minZoom,qt=Yt.maxZoom;_t.compositeTextSizes=[Mt["text-size"].possiblyEvaluate(new Ai(rr),Pe),Mt["text-size"].possiblyEvaluate(new Ai(qt),Pe)]}if(R.iconSizeData.kind==="composite"){var br=R.iconSizeData,Br=br.minZoom,fn=br.maxZoom;_t.compositeIconSizes=[Mt["icon-size"].possiblyEvaluate(new Ai(Br),Pe),Mt["icon-size"].possiblyEvaluate(new Ai(fn),Pe)]}_t.layoutTextSize=Mt["text-size"].possiblyEvaluate(new Ai(R.zoom+1),Pe),_t.layoutIconSize=Mt["icon-size"].possiblyEvaluate(new Ai(R.zoom+1),Pe),_t.textMaxSize=Mt["text-size"].possiblyEvaluate(new Ai(18));for(var rn=dt.get("text-line-height")*Ho,Cn=dt.get("text-rotation-alignment")==="map"&&dt.get("symbol-placement")!=="point",gn=dt.get("text-keep-upright"),Sn=dt.get("text-size"),Dn=function(){var ei=ni[Wn],wi=dt.get("text-font").evaluate(ei,{},Pe).join(","),pi=Sn.evaluate(ei,{},Pe),xi=_t.layoutTextSize.evaluate(ei,{},Pe),Bi=_t.layoutIconSize.evaluate(ei,{},Pe),Ti={horizontal:{},vertical:void 0},Si=ei.text,Gi=[0,0];if(Si){var Oi=Si.toString(),la=dt.get("text-letter-spacing").evaluate(ei,{},Pe)*Ho,Ta=Cr(Oi)?la:0,ua=dt.get("text-anchor").evaluate(ei,{},Pe),fa=dt.get("text-variable-anchor");if(!fa){var na=dt.get("text-radial-offset").evaluate(ei,{},Pe);na?Gi=J1(ua,[na*Ho,Kg]):Gi=dt.get("text-offset").evaluate(ei,{},Pe).map(function(Kf){return Kf*Ho})}var Ra=Cn?"center":dt.get("text-justify").evaluate(ei,{},Pe),ka=dt.get("symbol-placement"),$a=ka==="point"?dt.get("text-max-width").evaluate(ei,{},Pe)*Ho:0,no=function(){R.allowVerticalPlacement&&tr(Oi)&&(Ti.vertical=Zp(Si,I,W,ge,wi,$a,rn,ua,"left",Ta,Gi,ll.vertical,!0,ka,xi,pi))};if(!Cn&&fa){for(var ko=Ra==="auto"?fa.map(function(Kf){return Jg(Kf)}):[Ra],To=!1,qo=0;qo<ko.length;qo++){var es=ko[qo];if(!Ti.horizontal[es])if(To)Ti.horizontal[es]=Ti.horizontal[0];else{var zo=Zp(Si,I,W,ge,wi,$a,rn,"center",es,Ta,Gi,ll.horizontal,!1,ka,xi,pi);zo&&(Ti.horizontal[es]=zo,To=zo.positionedLines.length===1)}}no()}else{Ra==="auto"&&(Ra=Jg(ua));var ys=Zp(Si,I,W,ge,wi,$a,rn,ua,Ra,Ta,Gi,ll.horizontal,!1,ka,xi,pi);ys&&(Ti.horizontal[Ra]=ys),no(),tr(Oi)&&Cn&&gn&&(Ti.vertical=Zp(Si,I,W,ge,wi,$a,rn,ua,Ra,Ta,Gi,ll.vertical,!1,ka,xi,pi))}}var ms=void 0,So=!1;if(ei.icon&&ei.icon.name){var xs=se[ei.icon.name];xs&&(ms=W4(ge[ei.icon.name],dt.get("icon-offset").evaluate(ei,{},Pe),dt.get("icon-anchor").evaluate(ei,{},Pe)),So=xs.sdf,R.sdfIcons===void 0?R.sdfIcons=xs.sdf:R.sdfIcons!==xs.sdf&&B("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xs.pixelRatio!==R.pixelRatio||dt.get("icon-rotate").constantOr(1)!==0)&&(R.iconsNeedLinear=!0))}var ul=$1(Ti.horizontal)||Ti.vertical;R.iconsInText=ul?ul.iconsInText:!1,(ul||ms)&&t5(R,ei,Ti,ms,se,_t,xi,Bi,Gi,So,Pe)},Wn=0,ni=R.features;Wn<ni.length;Wn+=1)Dn();Me&&R.generateCollisionDebugBuffers()}function Jg(R){switch(R){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function t5(R,I,W,se,ge,Me,Pe,Qe,dt,Mt,_t){var Yt=Me.textMaxSize.evaluate(I,{});Yt===void 0&&(Yt=Pe);var rr=R.layers[0].layout,qt=rr.get("icon-offset").evaluate(I,{},_t),br=$1(W.horizontal),Br=24,fn=Pe/Br,rn=R.tilePixelRatio*fn,Cn=R.tilePixelRatio*Yt/Br,gn=R.tilePixelRatio*Qe,Sn=R.tilePixelRatio*rr.get("symbol-spacing"),Dn=rr.get("text-padding")*R.tilePixelRatio,Wn=rr.get("icon-padding")*R.tilePixelRatio,ni=rr.get("text-max-angle")/180*Math.PI,ei=rr.get("text-rotation-alignment")==="map"&&rr.get("symbol-placement")!=="point",wi=rr.get("icon-rotation-alignment")==="map"&&rr.get("symbol-placement")!=="point",pi=rr.get("symbol-placement"),xi=Sn/2,Bi=rr.get("icon-text-fit"),Ti;se&&Bi!=="none"&&(R.allowVerticalPlacement&&W.vertical&&(Ti=N1(se,W.vertical,Bi,rr.get("icon-text-fit-padding"),qt,fn)),br&&(se=N1(se,br,Bi,rr.get("icon-text-fit-padding"),qt,fn)));var Si=function(_v,iu){iu.x<0||iu.x>=Mi||iu.y<0||iu.y>=Mi||r5(R,iu,_v,W,se,ge,Ti,R.layers[0],R.collisionBoxArray,I.index,I.sourceLayerIndex,R.index,rn,Dn,ei,dt,gn,Wn,wi,qt,I,Me,Mt,_t,Pe)};if(pi==="line")for(var Gi=0,Oi=Z1(I.geometry,0,0,Mi,Mi);Gi<Oi.length;Gi+=1)for(var la=Oi[Gi],Ta=Z4(la,Sn,ni,W.vertical||br,se,Br,Cn,R.overscaling,Mi),ua=0,fa=Ta;ua<fa.length;ua+=1){var na=fa[ua],Ra=br;(!Ra||!n5(R,Ra.text,xi,na))&&Si(la,na)}else if(pi==="line-center")for(var ka=0,$a=I.geometry;ka<$a.length;ka+=1){var no=$a[ka];if(no.length>1){var ko=X4(no,ni,W.vertical||br,se,Br,Cn);ko&&Si(no,ko)}}else if(I.type==="Polygon")for(var To=0,qo=Ug(I.geometry,0);To<qo.length;To+=1){var es=qo[To],zo=J4(es,16);Si(es[0],new bv(zo.x,zo.y,0))}else if(I.type==="LineString")for(var ys=0,ms=I.geometry;ys<ms.length;ys+=1){var So=ms[ys];Si(So,new bv(So[0].x,So[0].y,0))}else if(I.type==="Point")for(var xs=0,ul=I.geometry;xs<ul.length;xs+=1)for(var Kf=ul[xs],Hc=0,Gc=Kf;Hc<Gc.length;Hc+=1){var Wc=Gc[Hc];Si([Wc],new bv(Wc.x,Wc.y,0))}}var Sd=255,Uc=Sd*Uu;function Q1(R,I,W,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br){var Br=j4(I,W,Qe,ge,Me,Pe,se,R.allowVerticalPlacement),fn=R.textSizeData,rn=null;fn.kind==="source"?(rn=[Uu*ge.layout.get("text-size").evaluate(Pe,{})],rn[0]>Uc&&B(R.layerIds[0]+': Value for "text-size" is >= '+Sd+'. Reduce your "text-size".')):fn.kind==="composite"&&(rn=[Uu*qt.compositeTextSizes[0].evaluate(Pe,{},br),Uu*qt.compositeTextSizes[1].evaluate(Pe,{},br)],(rn[0]>Uc||rn[1]>Uc)&&B(R.layerIds[0]+': Value for "text-size" is >= '+Sd+'. Reduce your "text-size".')),R.addSymbols(R.text,Br,rn,Qe,Me,Pe,Mt,I,dt.lineStartIndex,dt.lineLength,rr,br);for(var Cn=0,gn=_t;Cn<gn.length;Cn+=1){var Sn=gn[Cn];Yt[Sn]=R.text.placedSymbolArray.length-1}return Br.length*4}function $1(R){for(var I in R)return R[I];return null}function r5(R,I,W,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr,qt,br,Br,fn,rn,Cn,gn,Sn,Dn,Wn,ni,ei){var wi,pi=R.addToLineVertexArray(I,W),xi,Bi,Ti,Si,Gi=0,Oi=0,la=0,Ta=0,ua=-1,fa=-1,na={},Ra=me(""),ka=0,$a=0;if(Qe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(wi=Qe.layout.get("text-offset").evaluate(Sn,{},ni).map(function(_d){return _d*Ho}),ka=wi[0],$a=wi[1]):(ka=Qe.layout.get("text-radial-offset").evaluate(Sn,{},ni)*Ho,$a=Kg),R.allowVerticalPlacement&&se.vertical){var no=Qe.layout.get("text-rotate").evaluate(Sn,{},ni),ko=no+90,To=se.vertical;Ti=new Qp(dt,I,Mt,_t,Yt,To,rr,qt,br,ko),Pe&&(Si=new Qp(dt,I,Mt,_t,Yt,Pe,fn,rn,br,ko))}if(ge){var qo=Qe.layout.get("icon-rotate").evaluate(Sn,{}),es=Qe.layout.get("icon-text-fit")!=="none",zo=j1(ge,qo,Wn,es),ys=Pe?j1(Pe,qo,Wn,es):void 0;Bi=new Qp(dt,I,Mt,_t,Yt,ge,fn,rn,!1,qo),Gi=zo.length*4;var ms=R.iconSizeData,So=null;ms.kind==="source"?(So=[Uu*Qe.layout.get("icon-size").evaluate(Sn,{})],So[0]>Uc&&B(R.layerIds[0]+': Value for "icon-size" is >= '+Sd+'. Reduce your "icon-size".')):ms.kind==="composite"&&(So=[Uu*Dn.compositeIconSizes[0].evaluate(Sn,{},ni),Uu*Dn.compositeIconSizes[1].evaluate(Sn,{},ni)],(So[0]>Uc||So[1]>Uc)&&B(R.layerIds[0]+': Value for "icon-size" is >= '+Sd+'. Reduce your "icon-size".')),R.addSymbols(R.icon,zo,So,gn,Cn,Sn,!1,I,pi.lineStartIndex,pi.lineLength,-1,ni),ua=R.icon.placedSymbolArray.length-1,ys&&(Oi=ys.length*4,R.addSymbols(R.icon,ys,So,gn,Cn,Sn,ll.vertical,I,pi.lineStartIndex,pi.lineLength,-1,ni),fa=R.icon.placedSymbolArray.length-1)}for(var xs in se.horizontal){var ul=se.horizontal[xs];if(!xi){Ra=me(ul.text);var Kf=Qe.layout.get("text-rotate").evaluate(Sn,{},ni);xi=new Qp(dt,I,Mt,_t,Yt,ul,rr,qt,br,Kf)}var Hc=ul.positionedLines.length===1;if(la+=Q1(R,I,ul,Me,Qe,br,Sn,Br,pi,se.vertical?ll.horizontal:ll.horizontalOnly,Hc?Object.keys(se.horizontal):[xs],na,ua,Dn,ni),Hc)break}se.vertical&&(Ta+=Q1(R,I,se.vertical,Me,Qe,br,Sn,Br,pi,ll.vertical,["vertical"],na,fa,Dn,ni));var Gc=xi?xi.boxStartIndex:R.collisionBoxArray.length,Wc=xi?xi.boxEndIndex:R.collisionBoxArray.length,_v=Ti?Ti.boxStartIndex:R.collisionBoxArray.length,iu=Ti?Ti.boxEndIndex:R.collisionBoxArray.length,r0=Bi?Bi.boxStartIndex:R.collisionBoxArray.length,ry=Bi?Bi.boxEndIndex:R.collisionBoxArray.length,n0=Si?Si.boxStartIndex:R.collisionBoxArray.length,ny=Si?Si.boxEndIndex:R.collisionBoxArray.length,_l=-1,Pv=function(_d,dx){return _d&&_d.circleDiameter?Math.max(_d.circleDiameter,dx):dx};_l=Pv(xi,_l),_l=Pv(Ti,_l),_l=Pv(Bi,_l),_l=Pv(Si,_l);var i0=_l>-1?1:0;i0&&(_l*=ei/Ho),R.glyphOffsetArray.length>=wa.MAX_GLYPHS&&B("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Sn.sortKey!==void 0&&R.addToSortKeyRanges(R.symbolInstances.length,Sn.sortKey),R.symbolInstances.emplaceBack(I.x,I.y,na.right>=0?na.right:-1,na.center>=0?na.center:-1,na.left>=0?na.left:-1,na.vertical||-1,ua,fa,Ra,Gc,Wc,_v,iu,r0,ry,n0,ny,Mt,la,Ta,Gi,Oi,i0,0,rr,ka,$a,_l)}function n5(R,I,W,se){var ge=R.compareText;if(!(I in ge))ge[I]=[];else for(var Me=ge[I],Pe=Me.length-1;Pe>=0;Pe--)if(se.dist(Me[Pe])<W)return!0;return ge[I].push(se),!1}var i5=gv.VectorTileFeature.types,a5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $p(R,I,W,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr){var qt=Qe?Math.min(Uc,Math.round(Qe[0])):0,br=Qe?Math.min(Uc,Math.round(Qe[1])):0;R.emplaceBack(I,W,Math.round(se*32),Math.round(ge*32),Me,Pe,(qt<<1)+(dt?1:0),br,Mt*16,_t*16,Yt*256,rr*256)}function Qg(R,I,W){R.emplaceBack(I.x,I.y,W),R.emplaceBack(I.x,I.y,W),R.emplaceBack(I.x,I.y,W),R.emplaceBack(I.x,I.y,W)}function o5(R){for(var I=0,W=R.sections;I<W.length;I+=1){var se=W[I];if(tn(se.text))return!0}return!1}var Ev=function(I){this.layoutVertexArray=new hf,this.indexArray=new Ou,this.programConfigurations=I,this.segments=new mo,this.dynamicLayoutVertexArray=new ud,this.opacityVertexArray=new fd,this.placedSymbolArray=new vd};Ev.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ev.prototype.upload=function(I,W,se,ge){this.isEmpty()||(se&&(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,o4.members),this.indexBuffer=I.createIndexBuffer(this.indexArray,W),this.dynamicLayoutVertexBuffer=I.createVertexBuffer(this.dynamicLayoutVertexArray,s4.members,!0),this.opacityVertexBuffer=I.createVertexBuffer(this.opacityVertexArray,a5,!0),this.opacityVertexBuffer.itemSize=1),(se||ge)&&this.programConfigurations.upload(I))},Ev.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ve("SymbolBuffers",Ev);var Cd=function(I,W,se){this.layoutVertexArray=new I,this.layoutAttributes=W,this.indexArray=new se,this.segments=new mo,this.collisionVertexArray=new _s};Cd.prototype.upload=function(I){this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=I.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=I.createVertexBuffer(this.collisionVertexArray,l4.members,!0)},Cd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ve("CollisionBuffers",Cd);var wa=function(I){this.collisionBoxArray=I.collisionBoxArray,this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(dt){return dt.id}),this.index=I.index,this.pixelRatio=I.pixelRatio,this.sourceLayerIndex=I.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cv([]),this.placementViewportMatrix=cv([]);var W=this.layers[0],se=W._unevaluatedLayout._values;this.textSizeData=jg(this.zoom,se["text-size"]),this.iconSizeData=jg(this.zoom,se["icon-size"]);var ge=this.layers[0].layout,Me=ge.get("symbol-sort-key"),Pe=ge.get("symbol-z-order");this.canOverlap=ge.get("text-allow-overlap")||ge.get("icon-allow-overlap")||ge.get("text-ignore-placement")||ge.get("icon-ignore-placement"),this.sortFeaturesByKey=Pe!=="viewport-y"&&Me.constantOr(1)!==void 0;var Qe=Pe==="viewport-y"||Pe==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Qe&&this.canOverlap,ge.get("symbol-placement")==="point"&&(this.writingModes=ge.get("text-writing-mode").map(function(dt){return ll[dt]})),this.stateDependentLayerIds=this.layers.filter(function(dt){return dt.isStateDependent()}).map(function(dt){return dt.id}),this.sourceID=I.sourceID};wa.prototype.createArrays=function(){this.text=new Ev(new di(this.layers,this.zoom,function(I){return/^text/.test(I)})),this.icon=new Ev(new di(this.layers,this.zoom,function(I){return/^icon/.test(I)})),this.glyphOffsetArray=new kp,this.lineVertexArray=new El,this.symbolInstances=new Dp},wa.prototype.calculateGlyphDependencies=function(I,W,se,ge,Me){for(var Pe=0;Pe<I.length;Pe++)if(W[I.charCodeAt(Pe)]=!0,(se||ge)&&Me){var Qe=Td[I.charAt(Pe)];Qe&&(W[Qe.charCodeAt(0)]=!0)}},wa.prototype.populate=function(I,W,se){var ge=this.layers[0],Me=ge.layout,Pe=Me.get("text-font"),Qe=Me.get("text-field"),dt=Me.get("icon-image"),Mt=(Qe.value.kind!=="constant"||Qe.value.value instanceof oo&&!Qe.value.value.isEmpty()||Qe.value.value.toString().length>0)&&(Pe.value.kind!=="constant"||Pe.value.value.length>0),_t=dt.value.kind!=="constant"||!!dt.value.value||Object.keys(dt.parameters).length>0,Yt=Me.get("symbol-sort-key");if(this.features=[],!(!Mt&&!_t)){for(var rr=W.iconDependencies,qt=W.glyphDependencies,br=W.availableImages,Br=new Ai(this.zoom),fn=0,rn=I;fn<rn.length;fn+=1){var Cn=rn[fn],gn=Cn.feature,Sn=Cn.id,Dn=Cn.index,Wn=Cn.sourceLayerIndex,ni=ge._featureFilter.needGeometry,ei=Pa(gn,ni);if(ge._featureFilter.filter(Br,ei,se)){ni||(ei.geometry=ra(gn));var wi=void 0;if(Mt){var pi=ge.getValueAndResolveTokens("text-field",ei,se,br),xi=oo.factory(pi);o5(xi)&&(this.hasRTLText=!0),(!this.hasRTLText||Di()==="unavailable"||this.hasRTLText&&Qn.isParsed())&&(wi=c4(xi,ge,ei))}var Bi=void 0;if(_t){var Ti=ge.getValueAndResolveTokens("icon-image",ei,se,br);Ti instanceof Po?Bi=Ti:Bi=Po.fromString(Ti)}if(!(!wi&&!Bi)){var Si=this.sortFeaturesByKey?Yt.evaluate(ei,{},se):void 0,Gi={id:Sn,text:wi,icon:Bi,index:Dn,sourceLayerIndex:Wn,geometry:ei.geometry,properties:gn.properties,type:i5[gn.type],sortKey:Si};if(this.features.push(Gi),Bi&&(rr[Bi.name]=!0),wi){var Oi=Pe.evaluate(ei,{},se).join(","),la=Me.get("text-rotation-alignment")==="map"&&Me.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ll.vertical)>=0;for(var Ta=0,ua=wi.sections;Ta<ua.length;Ta+=1){var fa=ua[Ta];if(fa.image)rr[fa.image.name]=!0;else{var na=tr(wi.toString()),Ra=fa.fontStack||Oi,ka=qt[Ra]=qt[Ra]||{};this.calculateGlyphDependencies(fa.text,ka,la,this.allowVerticalPlacement,na)}}}}}}Me.get("symbol-placement")==="line"&&(this.features=h4(this.features)),this.sortFeaturesByKey&&this.features.sort(function($a,no){return $a.sortKey-no.sortKey})}},wa.prototype.update=function(I,W,se){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(I,W,this.layers,se),this.icon.programConfigurations.updatePaintArrays(I,W,this.layers,se))},wa.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},wa.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},wa.prototype.upload=function(I){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(I),this.iconCollisionBox.upload(I)),this.text.upload(I,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(I,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},wa.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},wa.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},wa.prototype.addToLineVertexArray=function(I,W){var se=this.lineVertexArray.length;if(I.segment!==void 0){for(var ge=I.dist(W[I.segment+1]),Me=I.dist(W[I.segment]),Pe={},Qe=I.segment+1;Qe<W.length;Qe++)Pe[Qe]={x:W[Qe].x,y:W[Qe].y,tileUnitDistanceFromAnchor:ge},Qe<W.length-1&&(ge+=W[Qe+1].dist(W[Qe]));for(var dt=I.segment||0;dt>=0;dt--)Pe[dt]={x:W[dt].x,y:W[dt].y,tileUnitDistanceFromAnchor:Me},dt>0&&(Me+=W[dt-1].dist(W[dt]));for(var Mt=0;Mt<W.length;Mt++){var _t=Pe[Mt];this.lineVertexArray.emplaceBack(_t.x,_t.y,_t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:se,lineLength:this.lineVertexArray.length-se}},wa.prototype.addSymbols=function(I,W,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt,rr){for(var qt=I.indexArray,br=I.layoutVertexArray,Br=I.segments.prepareSegment(4*W.length,br,qt,this.canOverlap?Pe.sortKey:void 0),fn=this.glyphOffsetArray.length,rn=Br.vertexLength,Cn=this.allowVerticalPlacement&&Qe===ll.vertical?Math.PI/2:0,gn=Pe.text&&Pe.text.sections,Sn=0;Sn<W.length;Sn++){var Dn=W[Sn],Wn=Dn.tl,ni=Dn.tr,ei=Dn.bl,wi=Dn.br,pi=Dn.tex,xi=Dn.pixelOffsetTL,Bi=Dn.pixelOffsetBR,Ti=Dn.minFontScaleX,Si=Dn.minFontScaleY,Gi=Dn.glyphOffset,Oi=Dn.isSDF,la=Dn.sectionIndex,Ta=Br.vertexLength,ua=Gi[1];$p(br,dt.x,dt.y,Wn.x,ua+Wn.y,pi.x,pi.y,se,Oi,xi.x,xi.y,Ti,Si),$p(br,dt.x,dt.y,ni.x,ua+ni.y,pi.x+pi.w,pi.y,se,Oi,Bi.x,xi.y,Ti,Si),$p(br,dt.x,dt.y,ei.x,ua+ei.y,pi.x,pi.y+pi.h,se,Oi,xi.x,Bi.y,Ti,Si),$p(br,dt.x,dt.y,wi.x,ua+wi.y,pi.x+pi.w,pi.y+pi.h,se,Oi,Bi.x,Bi.y,Ti,Si),Qg(I.dynamicLayoutVertexArray,dt,Cn),qt.emplaceBack(Ta,Ta+1,Ta+2),qt.emplaceBack(Ta+1,Ta+2,Ta+3),Br.vertexLength+=4,Br.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Gi[0]),(Sn===W.length-1||la!==W[Sn+1].sectionIndex)&&I.programConfigurations.populatePaintArrays(br.length,Pe,Pe.index,{},rr,gn&&gn[la])}I.placedSymbolArray.emplaceBack(dt.x,dt.y,fn,this.glyphOffsetArray.length-fn,rn,Mt,_t,dt.segment,se?se[0]:0,se?se[1]:0,ge[0],ge[1],Qe,0,!1,0,Yt)},wa.prototype._addCollisionDebugVertex=function(I,W,se,ge,Me,Pe){return W.emplaceBack(0,0),I.emplaceBack(se.x,se.y,ge,Me,Math.round(Pe.x),Math.round(Pe.y))},wa.prototype.addCollisionDebugVertices=function(I,W,se,ge,Me,Pe,Qe){var dt=Me.segments.prepareSegment(4,Me.layoutVertexArray,Me.indexArray),Mt=dt.vertexLength,_t=Me.layoutVertexArray,Yt=Me.collisionVertexArray,rr=Qe.anchorX,qt=Qe.anchorY;this._addCollisionDebugVertex(_t,Yt,Pe,rr,qt,new r(I,W)),this._addCollisionDebugVertex(_t,Yt,Pe,rr,qt,new r(se,W)),this._addCollisionDebugVertex(_t,Yt,Pe,rr,qt,new r(se,ge)),this._addCollisionDebugVertex(_t,Yt,Pe,rr,qt,new r(I,ge)),dt.vertexLength+=4;var br=Me.indexArray;br.emplaceBack(Mt,Mt+1),br.emplaceBack(Mt+1,Mt+2),br.emplaceBack(Mt+2,Mt+3),br.emplaceBack(Mt+3,Mt),dt.primitiveLength+=4},wa.prototype.addDebugCollisionBoxes=function(I,W,se,ge){for(var Me=I;Me<W;Me++){var Pe=this.collisionBoxArray.get(Me),Qe=Pe.x1,dt=Pe.y1,Mt=Pe.x2,_t=Pe.y2;this.addCollisionDebugVertices(Qe,dt,Mt,_t,ge?this.textCollisionBox:this.iconCollisionBox,Pe.anchorPoint,se)}},wa.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cd(av,S1.members,zh),this.iconCollisionBox=new Cd(av,S1.members,zh);for(var I=0;I<this.symbolInstances.length;I++){var W=this.symbolInstances.get(I);this.addDebugCollisionBoxes(W.textBoxStartIndex,W.textBoxEndIndex,W,!0),this.addDebugCollisionBoxes(W.verticalTextBoxStartIndex,W.verticalTextBoxEndIndex,W,!0),this.addDebugCollisionBoxes(W.iconBoxStartIndex,W.iconBoxEndIndex,W,!1),this.addDebugCollisionBoxes(W.verticalIconBoxStartIndex,W.verticalIconBoxEndIndex,W,!1)}},wa.prototype._deserializeCollisionBoxesForSymbol=function(I,W,se,ge,Me,Pe,Qe,dt,Mt){for(var _t={},Yt=W;Yt<se;Yt++){var rr=I.get(Yt);_t.textBox={x1:rr.x1,y1:rr.y1,x2:rr.x2,y2:rr.y2,anchorPointX:rr.anchorPointX,anchorPointY:rr.anchorPointY},_t.textFeatureIndex=rr.featureIndex;break}for(var qt=ge;qt<Me;qt++){var br=I.get(qt);_t.verticalTextBox={x1:br.x1,y1:br.y1,x2:br.x2,y2:br.y2,anchorPointX:br.anchorPointX,anchorPointY:br.anchorPointY},_t.verticalTextFeatureIndex=br.featureIndex;break}for(var Br=Pe;Br<Qe;Br++){var fn=I.get(Br);_t.iconBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,anchorPointX:fn.anchorPointX,anchorPointY:fn.anchorPointY},_t.iconFeatureIndex=fn.featureIndex;break}for(var rn=dt;rn<Mt;rn++){var Cn=I.get(rn);_t.verticalIconBox={x1:Cn.x1,y1:Cn.y1,x2:Cn.x2,y2:Cn.y2,anchorPointX:Cn.anchorPointX,anchorPointY:Cn.anchorPointY},_t.verticalIconFeatureIndex=Cn.featureIndex;break}return _t},wa.prototype.deserializeCollisionBoxes=function(I){this.collisionArrays=[];for(var W=0;W<this.symbolInstances.length;W++){var se=this.symbolInstances.get(W);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(I,se.textBoxStartIndex,se.textBoxEndIndex,se.verticalTextBoxStartIndex,se.verticalTextBoxEndIndex,se.iconBoxStartIndex,se.iconBoxEndIndex,se.verticalIconBoxStartIndex,se.verticalIconBoxEndIndex))}},wa.prototype.hasTextData=function(){return this.text.segments.get().length>0},wa.prototype.hasIconData=function(){return this.icon.segments.get().length>0},wa.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},wa.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},wa.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},wa.prototype.addIndicesForPlacedSymbol=function(I,W){for(var se=I.placedSymbolArray.get(W),ge=se.vertexStartIndex+se.numGlyphs*4,Me=se.vertexStartIndex;Me<ge;Me+=4)I.indexArray.emplaceBack(Me,Me+1,Me+2),I.indexArray.emplaceBack(Me+1,Me+2,Me+3)},wa.prototype.getSortedSymbolIndexes=function(I){if(this.sortedAngle===I&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var W=Math.sin(I),se=Math.cos(I),ge=[],Me=[],Pe=[],Qe=0;Qe<this.symbolInstances.length;++Qe){Pe.push(Qe);var dt=this.symbolInstances.get(Qe);ge.push(Math.round(W*dt.anchorX+se*dt.anchorY)|0),Me.push(dt.featureIndex)}return Pe.sort(function(Mt,_t){return ge[Mt]-ge[_t]||Me[_t]-Me[Mt]}),Pe},wa.prototype.addToSortKeyRanges=function(I,W){var se=this.sortKeyRanges[this.sortKeyRanges.length-1];se&&se.sortKey===W?se.symbolInstanceEnd=I+1:this.sortKeyRanges.push({sortKey:W,symbolInstanceStart:I,symbolInstanceEnd:I+1})},wa.prototype.sortFeatures=function(I){var W=this;if(this.sortFeaturesByY&&this.sortedAngle!==I&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(I),this.sortedAngle=I,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var se=0,ge=this.symbolInstanceIndexes;se<ge.length;se+=1){var Me=ge[se],Pe=this.symbolInstances.get(Me);this.featureSortOrder.push(Pe.featureIndex),[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach(function(Qe,dt,Mt){Qe>=0&&Mt.indexOf(Qe)===dt&&W.addIndicesForPlacedSymbol(W.text,Qe)}),Pe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Pe.verticalPlacedTextSymbolIndex),Pe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.placedIconSymbolIndex),Pe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ve("SymbolBucket",wa,{omit:["layers","collisionBoxArray","features","compareText"]}),wa.MAX_GLYPHS=65535,wa.addDynamicAttributes=Qg;function s5(R,I){return I.replace(/{([^{}]+)}/g,function(W,se){return se in R?String(R[se]):""})}var l5=new pa({"symbol-placement":new li(Ar.layout_symbol["symbol-placement"]),"symbol-spacing":new li(Ar.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new li(Ar.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ci(Ar.layout_symbol["symbol-sort-key"]),"symbol-z-order":new li(Ar.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new li(Ar.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new li(Ar.layout_symbol["icon-ignore-placement"]),"icon-optional":new li(Ar.layout_symbol["icon-optional"]),"icon-rotation-alignment":new li(Ar.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ci(Ar.layout_symbol["icon-size"]),"icon-text-fit":new li(Ar.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new li(Ar.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ci(Ar.layout_symbol["icon-image"]),"icon-rotate":new Ci(Ar.layout_symbol["icon-rotate"]),"icon-padding":new li(Ar.layout_symbol["icon-padding"]),"icon-keep-upright":new li(Ar.layout_symbol["icon-keep-upright"]),"icon-offset":new Ci(Ar.layout_symbol["icon-offset"]),"icon-anchor":new Ci(Ar.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new li(Ar.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new li(Ar.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new li(Ar.layout_symbol["text-rotation-alignment"]),"text-field":new Ci(Ar.layout_symbol["text-field"]),"text-font":new Ci(Ar.layout_symbol["text-font"]),"text-size":new Ci(Ar.layout_symbol["text-size"]),"text-max-width":new Ci(Ar.layout_symbol["text-max-width"]),"text-line-height":new li(Ar.layout_symbol["text-line-height"]),"text-letter-spacing":new Ci(Ar.layout_symbol["text-letter-spacing"]),"text-justify":new Ci(Ar.layout_symbol["text-justify"]),"text-radial-offset":new Ci(Ar.layout_symbol["text-radial-offset"]),"text-variable-anchor":new li(Ar.layout_symbol["text-variable-anchor"]),"text-anchor":new Ci(Ar.layout_symbol["text-anchor"]),"text-max-angle":new li(Ar.layout_symbol["text-max-angle"]),"text-writing-mode":new li(Ar.layout_symbol["text-writing-mode"]),"text-rotate":new Ci(Ar.layout_symbol["text-rotate"]),"text-padding":new li(Ar.layout_symbol["text-padding"]),"text-keep-upright":new li(Ar.layout_symbol["text-keep-upright"]),"text-transform":new Ci(Ar.layout_symbol["text-transform"]),"text-offset":new Ci(Ar.layout_symbol["text-offset"]),"text-allow-overlap":new li(Ar.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new li(Ar.layout_symbol["text-ignore-placement"]),"text-optional":new li(Ar.layout_symbol["text-optional"])}),u5=new pa({"icon-opacity":new Ci(Ar.paint_symbol["icon-opacity"]),"icon-color":new Ci(Ar.paint_symbol["icon-color"]),"icon-halo-color":new Ci(Ar.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ci(Ar.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ci(Ar.paint_symbol["icon-halo-blur"]),"icon-translate":new li(Ar.paint_symbol["icon-translate"]),"icon-translate-anchor":new li(Ar.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ci(Ar.paint_symbol["text-opacity"]),"text-color":new Ci(Ar.paint_symbol["text-color"],{runtimeType:En,getOverride:function(R){return R.textColor},hasOverride:function(R){return!!R.textColor}}),"text-halo-color":new Ci(Ar.paint_symbol["text-halo-color"]),"text-halo-width":new Ci(Ar.paint_symbol["text-halo-width"]),"text-halo-blur":new Ci(Ar.paint_symbol["text-halo-blur"]),"text-translate":new li(Ar.paint_symbol["text-translate"]),"text-translate-anchor":new li(Ar.paint_symbol["text-translate-anchor"])}),$g={paint:u5,layout:l5},Sv=function(I){this.type=I.property.overrides?I.property.overrides.runtimeType:Hr,this.defaultValue=I};Sv.prototype.evaluate=function(I){if(I.formattedSection){var W=this.defaultValue.property.overrides;if(W&&W.hasOverride(I.formattedSection))return W.getOverride(I.formattedSection)}return I.feature&&I.featureState?this.defaultValue.evaluate(I.feature,I.featureState):this.defaultValue.property.specification.default},Sv.prototype.eachChild=function(I){if(!this.defaultValue.isConstant()){var W=this.defaultValue.value;I(W._styleExpression.expression)}},Sv.prototype.outputDefined=function(){return!1},Sv.prototype.serialize=function(){return null},Ve("FormatSectionOverride",Sv,{omit:["defaultValue"]});var f5=function(R){function I(W){R.call(this,W,$g)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(se,ge){if(R.prototype.recalculate.call(this,se,ge),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Me=this.layout.get("text-writing-mode");if(Me){for(var Pe=[],Qe=0,dt=Me;Qe<dt.length;Qe+=1){var Mt=dt[Qe];Pe.indexOf(Mt)<0&&Pe.push(Mt)}this.layout._values["text-writing-mode"]=Pe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(se,ge,Me,Pe){var Qe=this.layout.get(se).evaluate(ge,{},Me,Pe),dt=this._unevaluatedLayout._values[se];return!dt.isDataDriven()&&!Cu(dt.value)&&Qe?s5(ge.properties,Qe):Qe},I.prototype.createBucket=function(se){return new wa(se)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var se=0,ge=$g.paint.overridableProperties;se<ge.length;se+=1){var Me=ge[se];if(I.hasPaintOverride(this.layout,Me)){var Pe=this.paint.get(Me),Qe=new Sv(Pe),dt=new rl(Qe,Pe.property.specification),Mt=null;Pe.value.kind==="constant"||Pe.value.kind==="source"?Mt=new eo("source",dt):Mt=new Cs("composite",dt,Pe.value.zoomStops,Pe.value._interpolationType),this.paint._values[Me]=new Ea(Pe.property,Mt,Pe.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(se,ge,Me){return!this.layout||ge.isDataDriven()||Me.isDataDriven()?!1:I.hasPaintOverride(this.layout,se)},I.hasPaintOverride=function(se,ge){var Me=se.get("text-field"),Pe=$g.paint.properties[ge],Qe=!1,dt=function(Yt){for(var rr=0,qt=Yt;rr<qt.length;rr+=1){var br=qt[rr];if(Pe.overrides&&Pe.overrides.hasOverride(br)){Qe=!0;return}}};if(Me.value.kind==="constant"&&Me.value.value instanceof oo)dt(Me.value.value.sections);else if(Me.value.kind==="source"){var Mt=function(Yt){if(!Qe)if(Yt instanceof ja&&Ya(Yt.value)===gi){var rr=Yt.value;dt(rr.sections)}else Yt instanceof po?dt(Yt.sections):Yt.eachChild(Mt)},_t=Me.value;_t._styleExpression&&Mt(_t._styleExpression.expression)}return Qe},I}(Ja),c5=new pa({"background-color":new li(Ar.paint_background["background-color"]),"background-pattern":new Zo(Ar.paint_background["background-pattern"]),"background-opacity":new li(Ar.paint_background["background-opacity"])}),h5={paint:c5},v5=function(R){function I(W){R.call(this,W,h5)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I}(Ja),d5=new pa({"raster-opacity":new li(Ar.paint_raster["raster-opacity"]),"raster-hue-rotate":new li(Ar.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new li(Ar.paint_raster["raster-brightness-min"]),"raster-brightness-max":new li(Ar.paint_raster["raster-brightness-max"]),"raster-saturation":new li(Ar.paint_raster["raster-saturation"]),"raster-contrast":new li(Ar.paint_raster["raster-contrast"]),"raster-resampling":new li(Ar.paint_raster["raster-resampling"]),"raster-fade-duration":new li(Ar.paint_raster["raster-fade-duration"])}),p5={paint:d5},g5=function(R){function I(W){R.call(this,W,p5)}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I}(Ja);function y5(R){var I=[],W=R.id;return W===void 0&&I.push({message:"layers."+W+': missing required property "id"'}),R.render===void 0&&I.push({message:"layers."+W+': missing required method "render"'}),R.renderingMode&&R.renderingMode!=="2d"&&R.renderingMode!=="3d"&&I.push({message:"layers."+W+': property "renderingMode" must be either "2d" or "3d"'}),I}var m5=function(R){function I(W){R.call(this,W,{}),this.implementation=W}return R&&(I.__proto__=R),I.prototype=Object.create(R&&R.prototype),I.prototype.constructor=I,I.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},I.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(se){this.implementation.onAdd&&this.implementation.onAdd(se,se.painter.context.gl)},I.prototype.onRemove=function(se){this.implementation.onRemove&&this.implementation.onRemove(se,se.painter.context.gl)},I}(Ja),x5={circle:H2,heatmap:X2,hillshade:K2,fill:wT,"fill-extrusion":HT,line:i4,symbol:f5,background:v5,raster:g5};function b5(R){return R.type==="custom"?new m5(R):new x5[R.type](R)}var q1=o.HTMLImageElement,ex=o.HTMLCanvasElement,tx=o.HTMLVideoElement,rx=o.ImageData,qp=o.ImageBitmap,Nh=function(I,W,se,ge){this.context=I,this.format=se,this.texture=I.gl.createTexture(),this.update(W,ge)};Nh.prototype.update=function(I,W,se){var ge=I.width,Me=I.height,Pe=(!this.size||this.size[0]!==ge||this.size[1]!==Me)&&!se,Qe=this,dt=Qe.context,Mt=dt.gl;if(this.useMipmap=!!(W&&W.useMipmap),Mt.bindTexture(Mt.TEXTURE_2D,this.texture),dt.pixelStoreUnpackFlipY.set(!1),dt.pixelStoreUnpack.set(1),dt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Mt.RGBA&&(!W||W.premultiply!==!1)),Pe)this.size=[ge,Me],I instanceof q1||I instanceof ex||I instanceof tx||I instanceof rx||qp&&I instanceof qp?Mt.texImage2D(Mt.TEXTURE_2D,0,this.format,this.format,Mt.UNSIGNED_BYTE,I):Mt.texImage2D(Mt.TEXTURE_2D,0,this.format,ge,Me,0,this.format,Mt.UNSIGNED_BYTE,I.data);else{var _t=se||{x:0,y:0},Yt=_t.x,rr=_t.y;I instanceof q1||I instanceof ex||I instanceof tx||I instanceof rx||qp&&I instanceof qp?Mt.texSubImage2D(Mt.TEXTURE_2D,0,Yt,rr,Mt.RGBA,Mt.UNSIGNED_BYTE,I):Mt.texSubImage2D(Mt.TEXTURE_2D,0,Yt,rr,ge,Me,Mt.RGBA,Mt.UNSIGNED_BYTE,I.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Mt.generateMipmap(Mt.TEXTURE_2D)},Nh.prototype.bind=function(I,W,se){var ge=this,Me=ge.context,Pe=Me.gl;Pe.bindTexture(Pe.TEXTURE_2D,this.texture),se===Pe.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(se=Pe.LINEAR),I!==this.filter&&(Pe.texParameteri(Pe.TEXTURE_2D,Pe.TEXTURE_MAG_FILTER,I),Pe.texParameteri(Pe.TEXTURE_2D,Pe.TEXTURE_MIN_FILTER,se||I),this.filter=I),W!==this.wrap&&(Pe.texParameteri(Pe.TEXTURE_2D,Pe.TEXTURE_WRAP_S,W),Pe.texParameteri(Pe.TEXTURE_2D,Pe.TEXTURE_WRAP_T,W),this.wrap=W)},Nh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Nh.prototype.destroy=function(){var I=this.context,W=I.gl;W.deleteTexture(this.texture),this.texture=null};var qg=function(I){var W=this;this._callback=I,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){W._triggered=!1,W._callback()})};qg.prototype.trigger=function(){var I=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){I._triggered=!1,I._callback()},0))},qg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Cv=function(I,W,se){this.target=I,this.parent=W,this.mapId=se,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},_(["receive","process"],this),this.invoker=new qg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=$()?I:o};Cv.prototype.send=function(I,W,se,ge,Me){var Pe=this;Me===void 0&&(Me=!1);var Qe=Math.round(Math.random()*1e18).toString(36).substring(0,10);se&&(this.callbacks[Qe]=se);var dt=ue(this.globalScope)?void 0:[];return this.target.postMessage({id:Qe,type:I,hasCallback:!!se,targetMapId:ge,mustQueue:Me,sourceMapId:this.mapId,data:Lt(W,dt)},dt),{cancel:function(){se&&delete Pe.callbacks[Qe],Pe.target.postMessage({id:Qe,type:"<cancel>",targetMapId:ge,sourceMapId:Pe.mapId})}}},Cv.prototype.receive=function(I){var W=I.data,se=W.id;if(se&&!(W.targetMapId&&this.mapId!==W.targetMapId))if(W.type==="<cancel>"){delete this.tasks[se];var ge=this.cancelCallbacks[se];delete this.cancelCallbacks[se],ge&&ge()}else $()||W.mustQueue?(this.tasks[se]=W,this.taskQueue.push(se),this.invoker.trigger()):this.processTask(se,W)},Cv.prototype.process=function(){if(this.taskQueue.length){var I=this.taskQueue.shift(),W=this.tasks[I];delete this.tasks[I],this.taskQueue.length&&this.invoker.trigger(),W&&this.processTask(I,W)}},Cv.prototype.processTask=function(I,W){var se=this;if(W.type==="<response>"){var ge=this.callbacks[I];delete this.callbacks[I],ge&&(W.error?ge(At(W.error)):ge(null,At(W.data)))}else{var Me=!1,Pe=ue(this.globalScope)?void 0:[],Qe=W.hasCallback?function(rr,qt){Me=!0,delete se.cancelCallbacks[I],se.target.postMessage({id:I,type:"<response>",sourceMapId:se.mapId,error:rr?Lt(rr):null,data:Lt(qt,Pe)},Pe)}:function(rr){Me=!0},dt=null,Mt=At(W.data);if(this.parent[W.type])dt=this.parent[W.type](W.sourceMapId,Mt,Qe);else if(this.parent.getWorkerSource){var _t=W.type.split("."),Yt=this.parent.getWorkerSource(W.sourceMapId,_t[0],Mt.source);dt=Yt[_t[1]](Mt,Qe)}else Qe(new Error("Could not find function "+W.type));!Me&&dt&&dt.cancel&&(this.cancelCallbacks[I]=dt.cancel)}},Cv.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function w5(R,I,W){I=Math.pow(2,W)-I-1;var se=nx(R*256,I*256,W),ge=nx((R+1)*256,(I+1)*256,W);return se[0]+","+se[1]+","+ge[0]+","+ge[1]}function nx(R,I,W){var se=2*Math.PI*6378137/256/Math.pow(2,W),ge=R*se-2*Math.PI*6378137/2,Me=I*se-2*Math.PI*6378137/2;return[ge,Me]}var bo=function(I,W){I&&(W?this.setSouthWest(I).setNorthEast(W):I.length===4?this.setSouthWest([I[0],I[1]]).setNorthEast([I[2],I[3]]):this.setSouthWest(I[0]).setNorthEast(I[1]))};bo.prototype.setNorthEast=function(I){return this._ne=I instanceof Na?new Na(I.lng,I.lat):Na.convert(I),this},bo.prototype.setSouthWest=function(I){return this._sw=I instanceof Na?new Na(I.lng,I.lat):Na.convert(I),this},bo.prototype.extend=function(I){var W=this._sw,se=this._ne,ge,Me;if(I instanceof Na)ge=I,Me=I;else if(I instanceof bo){if(ge=I._sw,Me=I._ne,!ge||!Me)return this}else{if(Array.isArray(I))if(I.length===4||I.every(Array.isArray)){var Pe=I;return this.extend(bo.convert(Pe))}else{var Qe=I;return this.extend(Na.convert(Qe))}return this}return!W&&!se?(this._sw=new Na(ge.lng,ge.lat),this._ne=new Na(Me.lng,Me.lat)):(W.lng=Math.min(ge.lng,W.lng),W.lat=Math.min(ge.lat,W.lat),se.lng=Math.max(Me.lng,se.lng),se.lat=Math.max(Me.lat,se.lat)),this},bo.prototype.getCenter=function(){return new Na((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},bo.prototype.getSouthWest=function(){return this._sw},bo.prototype.getNorthEast=function(){return this._ne},bo.prototype.getNorthWest=function(){return new Na(this.getWest(),this.getNorth())},bo.prototype.getSouthEast=function(){return new Na(this.getEast(),this.getSouth())},bo.prototype.getWest=function(){return this._sw.lng},bo.prototype.getSouth=function(){return this._sw.lat},bo.prototype.getEast=function(){return this._ne.lng},bo.prototype.getNorth=function(){return this._ne.lat},bo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},bo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},bo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},bo.prototype.contains=function(I){var W=Na.convert(I),se=W.lng,ge=W.lat,Me=this._sw.lat<=ge&&ge<=this._ne.lat,Pe=this._sw.lng<=se&&se<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Pe=this._sw.lng>=se&&se>=this._ne.lng),Me&&Pe},bo.convert=function(I){return!I||I instanceof bo?I:new bo(I)};var ix=63710088e-1,Na=function(I,W){if(isNaN(I)||isNaN(W))throw new Error("Invalid LngLat object: ("+I+", "+W+")");if(this.lng=+I,this.lat=+W,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Na.prototype.wrap=function(){return new Na(w(this.lng,-180,180),this.lat)},Na.prototype.toArray=function(){return[this.lng,this.lat]},Na.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Na.prototype.distanceTo=function(I){var W=Math.PI/180,se=this.lat*W,ge=I.lat*W,Me=Math.sin(se)*Math.sin(ge)+Math.cos(se)*Math.cos(ge)*Math.cos((I.lng-this.lng)*W),Pe=ix*Math.acos(Math.min(Me,1));return Pe},Na.prototype.toBounds=function(I){I===void 0&&(I=0);var W=40075017,se=360*I/W,ge=se/Math.cos(Math.PI/180*this.lat);return new bo(new Na(this.lng-ge,this.lat-se),new Na(this.lng+ge,this.lat+se))},Na.convert=function(I){if(I instanceof Na)return I;if(Array.isArray(I)&&(I.length===2||I.length===3))return new Na(Number(I[0]),Number(I[1]));if(!Array.isArray(I)&&typeof I=="object"&&I!==null)return new Na(Number("lng"in I?I.lng:I.lon),Number(I.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ax=2*Math.PI*ix;function ox(R){return ax*Math.cos(R*Math.PI/180)}function sx(R){return(180+R)/360}function lx(R){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+R*Math.PI/360)))/360}function ux(R,I){return R/ox(I)}function T5(R){return R*360-180}function ey(R){var I=180-R*360;return 360/Math.PI*Math.atan(Math.exp(I*Math.PI/180))-90}function A5(R,I){return R*ox(ey(I))}function M5(R){return 1/Math.cos(R*Math.PI/180)}var Uh=function(I,W,se){se===void 0&&(se=0),this.x=+I,this.y=+W,this.z=+se};Uh.fromLngLat=function(I,W){W===void 0&&(W=0);var se=Na.convert(I);return new Uh(sx(se.lng),lx(se.lat),ux(W,se.lat))},Uh.prototype.toLngLat=function(){return new Na(T5(this.x),ey(this.y))},Uh.prototype.toAltitude=function(){return A5(this.z,this.y)},Uh.prototype.meterInMercatorCoordinateUnits=function(){return 1/ax*M5(ey(this.y))};var Vh=function(I,W,se){this.z=I,this.x=W,this.y=se,this.key=Ld(0,I,I,W,se)};Vh.prototype.equals=function(I){return this.z===I.z&&this.x===I.x&&this.y===I.y},Vh.prototype.url=function(I,W){var se=w5(this.x,this.y,this.z),ge=E5(this.z,this.x,this.y);return I[(this.x+this.y)%I.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(W==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ge).replace("{bbox-epsg-3857}",se)},Vh.prototype.getTilePoint=function(I){var W=Math.pow(2,this.z);return new r((I.x*W-this.x)*Mi,(I.y*W-this.y)*Mi)},Vh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var fx=function(I,W){this.wrap=I,this.canonical=W,this.key=Ld(I,W.z,W.z,W.x,W.y)},wo=function(I,W,se,ge,Me){this.overscaledZ=I,this.wrap=W,this.canonical=new Vh(se,+ge,+Me),this.key=Ld(W,I,se,ge,Me)};wo.prototype.equals=function(I){return this.overscaledZ===I.overscaledZ&&this.wrap===I.wrap&&this.canonical.equals(I.canonical)},wo.prototype.scaledTo=function(I){var W=this.canonical.z-I;return I>this.canonical.z?new wo(I,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wo(I,this.wrap,I,this.canonical.x>>W,this.canonical.y>>W)},wo.prototype.calculateScaledKey=function(I,W){var se=this.canonical.z-I;return I>this.canonical.z?Ld(this.wrap*+W,I,this.canonical.z,this.canonical.x,this.canonical.y):Ld(this.wrap*+W,I,I,this.canonical.x>>se,this.canonical.y>>se)},wo.prototype.isChildOf=function(I){if(I.wrap!==this.wrap)return!1;var W=this.canonical.z-I.canonical.z;return I.overscaledZ===0||I.overscaledZ<this.overscaledZ&&I.canonical.x===this.canonical.x>>W&&I.canonical.y===this.canonical.y>>W},wo.prototype.children=function(I){if(this.overscaledZ>=I)return[new wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var W=this.canonical.z+1,se=this.canonical.x*2,ge=this.canonical.y*2;return[new wo(W,this.wrap,W,se,ge),new wo(W,this.wrap,W,se+1,ge),new wo(W,this.wrap,W,se,ge+1),new wo(W,this.wrap,W,se+1,ge+1)]},wo.prototype.isLessThan=function(I){return this.wrap<I.wrap?!0:this.wrap>I.wrap?!1:this.overscaledZ<I.overscaledZ?!0:this.overscaledZ>I.overscaledZ?!1:this.canonical.x<I.canonical.x?!0:this.canonical.x>I.canonical.x?!1:this.canonical.y<I.canonical.y},wo.prototype.wrapped=function(){return new wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.unwrapTo=function(I){return new wo(this.overscaledZ,I,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},wo.prototype.toUnwrapped=function(){return new fx(this.wrap,this.canonical)},wo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},wo.prototype.getTilePoint=function(I){return this.canonical.getTilePoint(new Uh(I.x-this.wrap,I.y))};function Ld(R,I,W,se,ge){R*=2,R<0&&(R=R*-1-1);var Me=1<<W;return(Me*Me*R+Me*ge+se).toString(36)+W.toString(36)+I.toString(36)}function E5(R,I,W){for(var se="",ge,Me=R;Me>0;Me--)ge=1<<Me-1,se+=(I&ge?1:0)+(W&ge?2:0);return se}Ve("CanonicalTileID",Vh),Ve("OverscaledTileID",wo,{omit:["posMatrix"]});var Zf=function(I,W,se){if(this.uid=I,W.height!==W.width)throw new RangeError("DEM tiles must be square");if(se&&se!=="mapbox"&&se!=="terrarium")return B('"'+se+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=W.height;var ge=this.dim=W.height-2;this.data=new Uint32Array(W.data.buffer),this.encoding=se||"mapbox";for(var Me=0;Me<ge;Me++)this.data[this._idx(-1,Me)]=this.data[this._idx(0,Me)],this.data[this._idx(ge,Me)]=this.data[this._idx(ge-1,Me)],this.data[this._idx(Me,-1)]=this.data[this._idx(Me,0)],this.data[this._idx(Me,ge)]=this.data[this._idx(Me,ge-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ge,-1)]=this.data[this._idx(ge-1,0)],this.data[this._idx(-1,ge)]=this.data[this._idx(0,ge-1)],this.data[this._idx(ge,ge)]=this.data[this._idx(ge-1,ge-1)]};Zf.prototype.get=function(I,W){var se=new Uint8Array(this.data.buffer),ge=this._idx(I,W)*4,Me=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return Me(se[ge],se[ge+1],se[ge+2])},Zf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},Zf.prototype._idx=function(I,W){if(I<-1||I>=this.dim+1||W<-1||W>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(W+1)*this.stride+(I+1)},Zf.prototype._unpackMapbox=function(I,W,se){return(I*256*256+W*256+se)/10-1e4},Zf.prototype._unpackTerrarium=function(I,W,se){return I*256+W+se/256-32768},Zf.prototype.getPixels=function(){return new Ds({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Zf.prototype.backfillBorder=function(I,W,se){if(this.dim!==I.dim)throw new Error("dem dimension mismatch");var ge=W*this.dim,Me=W*this.dim+this.dim,Pe=se*this.dim,Qe=se*this.dim+this.dim;switch(W){case-1:ge=Me-1;break;case 1:Me=ge+1;break}switch(se){case-1:Pe=Qe-1;break;case 1:Qe=Pe+1;break}for(var dt=-W*this.dim,Mt=-se*this.dim,_t=Pe;_t<Qe;_t++)for(var Yt=ge;Yt<Me;Yt++)this.data[this._idx(Yt,_t)]=I.data[this._idx(Yt+dt,_t+Mt)]},Ve("DEMData",Zf);function S5(R,I){var W={};if(!I)return W;for(var se=function(){var Pe=Me[ge],Qe=Pe.layerIds.map(function(Yt){return I.getLayer(Yt)}).filter(Boolean);if(Qe.length!==0){Pe.layers=Qe,Pe.stateDependentLayerIds&&(Pe.stateDependentLayers=Pe.stateDependentLayerIds.map(function(Yt){return Qe.filter(function(rr){return rr.id===Yt})[0]}));for(var dt=0,Mt=Qe;dt<Mt.length;dt+=1){var _t=Mt[dt];W[_t.id]=Pe}}},ge=0,Me=R;ge<Me.length;ge+=1)se();return W}var e0=function(I){this._stringToNumber={},this._numberToString=[];for(var W=0;W<I.length;W++){var se=I[W];this._stringToNumber[se]=W,this._numberToString[W]=se}};e0.prototype.encode=function(I){return this._stringToNumber[I]},e0.prototype.decode=function(I){return this._numberToString[I]};var t0=function(I,W,se,ge,Me){this.type="Feature",this._vectorTileFeature=I,I._z=W,I._x=se,I._y=ge,this.properties=I.properties,this.id=Me},ty={geometry:{configurable:!0}};ty.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ty.geometry.set=function(R){this._geometry=R},t0.prototype.toJSON=function(){var I={geometry:this.geometry};for(var W in this)W==="_geometry"||W==="_vectorTileFeature"||(I[W]=this[W]);return I},Object.defineProperties(t0.prototype,ty);var Lv=function(){this.state={},this.stateChanges={},this.deletedStates={}};Lv.prototype.updateState=function(I,W,se){var ge=String(W);if(this.stateChanges[I]=this.stateChanges[I]||{},this.stateChanges[I][ge]=this.stateChanges[I][ge]||{},x(this.stateChanges[I][ge],se),this.deletedStates[I]===null){this.deletedStates[I]={};for(var Me in this.state[I])Me!==ge&&(this.deletedStates[I][Me]=null)}else{var Pe=this.deletedStates[I]&&this.deletedStates[I][ge]===null;if(Pe){this.deletedStates[I][ge]={};for(var Qe in this.state[I][ge])se[Qe]||(this.deletedStates[I][ge][Qe]=null)}else for(var dt in se){var Mt=this.deletedStates[I]&&this.deletedStates[I][ge]&&this.deletedStates[I][ge][dt]===null;Mt&&delete this.deletedStates[I][ge][dt]}}},Lv.prototype.removeFeatureState=function(I,W,se){var ge=this.deletedStates[I]===null;if(!ge){var Me=String(W);if(this.deletedStates[I]=this.deletedStates[I]||{},se&&W!==void 0)this.deletedStates[I][Me]!==null&&(this.deletedStates[I][Me]=this.deletedStates[I][Me]||{},this.deletedStates[I][Me][se]=null);else if(W!==void 0){var Pe=this.stateChanges[I]&&this.stateChanges[I][Me];if(Pe){this.deletedStates[I][Me]={};for(se in this.stateChanges[I][Me])this.deletedStates[I][Me][se]=null}else this.deletedStates[I][Me]=null}else this.deletedStates[I]=null}},Lv.prototype.getState=function(I,W){var se=String(W),ge=this.state[I]||{},Me=this.stateChanges[I]||{},Pe=x({},ge[se],Me[se]);if(this.deletedStates[I]===null)return{};if(this.deletedStates[I]){var Qe=this.deletedStates[I][W];if(Qe===null)return{};for(var dt in Qe)delete Pe[dt]}return Pe},Lv.prototype.initializeTileState=function(I,W){I.setFeatureState(this.state,W)},Lv.prototype.coalesceChanges=function(I,W){var se={};for(var ge in this.stateChanges){this.state[ge]=this.state[ge]||{};var Me={};for(var Pe in this.stateChanges[ge])this.state[ge][Pe]||(this.state[ge][Pe]={}),x(this.state[ge][Pe],this.stateChanges[ge][Pe]),Me[Pe]=this.state[ge][Pe];se[ge]=Me}for(var Qe in this.deletedStates){this.state[Qe]=this.state[Qe]||{};var dt={};if(this.deletedStates[Qe]===null)for(var Mt in this.state[Qe])dt[Mt]={},this.state[Qe][Mt]={};else for(var _t in this.deletedStates[Qe]){var Yt=this.deletedStates[Qe][_t]===null;if(Yt)this.state[Qe][_t]={};else for(var rr=0,qt=Object.keys(this.deletedStates[Qe][_t]);rr<qt.length;rr+=1){var br=qt[rr];delete this.state[Qe][_t][br]}dt[_t]=this.state[Qe][_t]}se[Qe]=se[Qe]||{},x(se[Qe],dt)}if(this.stateChanges={},this.deletedStates={},Object.keys(se).length!==0)for(var Br in I){var fn=I[Br];fn.setFeatureState(se,W)}};var jf=function(I,W){this.tileID=I,this.x=I.canonical.x,this.y=I.canonical.y,this.z=I.canonical.z,this.grid=new zi(Mi,16,0),this.grid3D=new zi(Mi,16,0),this.featureIndexArray=new Op,this.promoteId=W};jf.prototype.insert=function(I,W,se,ge,Me,Pe){var Qe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(se,ge,Me);for(var dt=Pe?this.grid3D:this.grid,Mt=0;Mt<W.length;Mt++){for(var _t=W[Mt],Yt=[1/0,1/0,-1/0,-1/0],rr=0;rr<_t.length;rr++){var qt=_t[rr];Yt[0]=Math.min(Yt[0],qt.x),Yt[1]=Math.min(Yt[1],qt.y),Yt[2]=Math.max(Yt[2],qt.x),Yt[3]=Math.max(Yt[3],qt.y)}Yt[0]<Mi&&Yt[1]<Mi&&Yt[2]>=0&&Yt[3]>=0&&dt.insert(Qe,Yt[0],Yt[1],Yt[2],Yt[3])}},jf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new gv.VectorTile(new Wp(this.rawTileData)).layers,this.sourceLayerCoder=new e0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},jf.prototype.query=function(I,W,se,ge){var Me=this;this.loadVTLayers();for(var Pe=I.params||{},Qe=Mi/I.tileSize/I.scale,dt=al(Pe.filter),Mt=I.queryGeometry,_t=I.queryPadding*Qe,Yt=hx(Mt),rr=this.grid.query(Yt.minX-_t,Yt.minY-_t,Yt.maxX+_t,Yt.maxY+_t),qt=hx(I.cameraQueryGeometry),br=this.grid3D.query(qt.minX-_t,qt.minY-_t,qt.maxX+_t,qt.maxY+_t,function(Wn,ni,ei,wi){return nu(I.cameraQueryGeometry,Wn-_t,ni-_t,ei+_t,wi+_t)}),Br=0,fn=br;Br<fn.length;Br+=1){var rn=fn[Br];rr.push(rn)}rr.sort(C5);for(var Cn={},gn,Sn=function(Wn){var ni=rr[Wn];if(ni!==gn){gn=ni;var ei=Me.featureIndexArray.get(ni),wi=null;Me.loadMatchingFeature(Cn,ei.bucketIndex,ei.sourceLayerIndex,ei.featureIndex,dt,Pe.layers,Pe.availableImages,W,se,ge,function(pi,xi,Bi){return wi||(wi=ra(pi)),xi.queryIntersectsFeature(Mt,pi,Bi,wi,Me.z,I.transform,Qe,I.pixelPosMatrix)})}},Dn=0;Dn<rr.length;Dn++)Sn(Dn);return Cn},jf.prototype.loadMatchingFeature=function(I,W,se,ge,Me,Pe,Qe,dt,Mt,_t,Yt){var rr=this.bucketLayerIDs[W];if(!(Pe&&!O(Pe,rr))){var qt=this.sourceLayerCoder.decode(se),br=this.vtLayers[qt],Br=br.feature(ge);if(Me.needGeometry){var fn=Pa(Br,!0);if(!Me.filter(new Ai(this.tileID.overscaledZ),fn,this.tileID.canonical))return}else if(!Me.filter(new Ai(this.tileID.overscaledZ),Br))return;for(var rn=this.getId(Br,qt),Cn=0;Cn<rr.length;Cn++){var gn=rr[Cn];if(!(Pe&&Pe.indexOf(gn)<0)){var Sn=dt[gn];if(Sn){var Dn={};rn!==void 0&&_t&&(Dn=_t.getState(Sn.sourceLayer||"_geojsonTileLayer",rn));var Wn=x({},Mt[gn]);Wn.paint=cx(Wn.paint,Sn.paint,Br,Dn,Qe),Wn.layout=cx(Wn.layout,Sn.layout,Br,Dn,Qe);var ni=!Yt||Yt(Br,Sn,Dn);if(ni){var ei=new t0(Br,this.z,this.x,this.y,rn);ei.layer=Wn;var wi=I[gn];wi===void 0&&(wi=I[gn]=[]),wi.push({featureIndex:ge,feature:ei,intersectionZ:ni})}}}}}},jf.prototype.lookupSymbolFeatures=function(I,W,se,ge,Me,Pe,Qe,dt){var Mt={};this.loadVTLayers();for(var _t=al(Me),Yt=0,rr=I;Yt<rr.length;Yt+=1){var qt=rr[Yt];this.loadMatchingFeature(Mt,se,ge,qt,_t,Pe,Qe,dt,W)}return Mt},jf.prototype.hasLayer=function(I){for(var W=0,se=this.bucketLayerIDs;W<se.length;W+=1)for(var ge=se[W],Me=0,Pe=ge;Me<Pe.length;Me+=1){var Qe=Pe[Me];if(I===Qe)return!0}return!1},jf.prototype.getId=function(I,W){var se=I.id;if(this.promoteId){var ge=typeof this.promoteId=="string"?this.promoteId:this.promoteId[W];se=I.properties[ge],typeof se=="boolean"&&(se=Number(se))}return se},Ve("FeatureIndex",jf,{omit:["rawTileData","sourceLayerCoder"]});function cx(R,I,W,se,ge){return k(R,function(Me,Pe){var Qe=I instanceof Mo?I.get(Pe):null;return Qe&&Qe.evaluate?Qe.evaluate(W,se,ge):Qe})}function hx(R){for(var I=1/0,W=1/0,se=-1/0,ge=-1/0,Me=0,Pe=R;Me<Pe.length;Me+=1){var Qe=Pe[Me];I=Math.min(I,Qe.x),W=Math.min(W,Qe.y),se=Math.max(se,Qe.x),ge=Math.max(ge,Qe.y)}return{minX:I,minY:W,maxX:se,maxY:ge}}function C5(R,I){return I-R}var L5=3e4,Do=function(I,W){this.tileID=I,this.uid=y(),this.uses=0,this.tileSize=W,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Do.prototype.registerFadeDuration=function(I){var W=I+this.timeAdded;W<fe.now()||this.fadeEndTime&&W<this.fadeEndTime||(this.fadeEndTime=W)},Do.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Do.prototype.loadVectorData=function(I,W,se){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!I){this.collisionBoxArray=new hd;return}I.featureIndex&&(this.latestFeatureIndex=I.featureIndex,I.rawTileData?(this.latestRawTileData=I.rawTileData,this.latestFeatureIndex.rawTileData=I.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=I.collisionBoxArray,this.buckets=S5(I.buckets,W.style),this.hasSymbolBuckets=!1;for(var ge in this.buckets){var Me=this.buckets[ge];if(Me instanceof wa)if(this.hasSymbolBuckets=!0,se)Me.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Pe in this.buckets){var Qe=this.buckets[Pe];if(Qe instanceof wa&&Qe.hasRTLText){this.hasRTLText=!0,Ni();break}}this.queryPadding=0;for(var dt in this.buckets){var Mt=this.buckets[dt];this.queryPadding=Math.max(this.queryPadding,W.style.getLayer(dt).queryRadius(Mt))}I.imageAtlas&&(this.imageAtlas=I.imageAtlas),I.glyphAtlasImage&&(this.glyphAtlasImage=I.glyphAtlasImage)},Do.prototype.unloadVectorData=function(){for(var I in this.buckets)this.buckets[I].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Do.prototype.getBucket=function(I){return this.buckets[I.id]},Do.prototype.upload=function(I){for(var W in this.buckets){var se=this.buckets[W];se.uploadPending()&&se.upload(I)}var ge=I.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Nh(I,this.imageAtlas.image,ge.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Nh(I,this.glyphAtlasImage,ge.ALPHA),this.glyphAtlasImage=null)},Do.prototype.prepare=function(I){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(I,this.imageAtlasTexture)},Do.prototype.queryRenderedFeatures=function(I,W,se,ge,Me,Pe,Qe,dt,Mt,_t){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:ge,cameraQueryGeometry:Me,scale:Pe,tileSize:this.tileSize,pixelPosMatrix:_t,transform:dt,params:Qe,queryPadding:this.queryPadding*Mt},I,W,se)},Do.prototype.querySourceFeatures=function(I,W){var se=this.latestFeatureIndex;if(!(!se||!se.rawTileData)){var ge=se.loadVTLayers(),Me=W?W.sourceLayer:"",Pe=ge._geojsonTileLayer||ge[Me];if(Pe)for(var Qe=al(W&&W.filter),dt=this.tileID.canonical,Mt=dt.z,_t=dt.x,Yt=dt.y,rr={z:Mt,x:_t,y:Yt},qt=0;qt<Pe.length;qt++){var br=Pe.feature(qt);if(Qe.needGeometry){var Br=Pa(br,!0);if(!Qe.filter(new Ai(this.tileID.overscaledZ),Br,this.tileID.canonical))continue}else if(!Qe.filter(new Ai(this.tileID.overscaledZ),br))continue;var fn=se.getId(br,Me),rn=new t0(br,Mt,_t,Yt,fn);rn.tile=rr,I.push(rn)}}},Do.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Do.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Do.prototype.setExpiryData=function(I){var W=this.expirationTime;if(I.cacheControl){var se=ne(I.cacheControl);se["max-age"]&&(this.expirationTime=Date.now()+se["max-age"]*1e3)}else I.expires&&(this.expirationTime=new Date(I.expires).getTime());if(this.expirationTime){var ge=Date.now(),Me=!1;if(this.expirationTime>ge)Me=!1;else if(!W)Me=!0;else if(this.expirationTime<W)Me=!0;else{var Pe=this.expirationTime-W;Pe?this.expirationTime=ge+Math.max(Pe,L5):Me=!0}Me?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Do.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Do.prototype.setFeatureState=function(I,W){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(I).length===0)){var se=this.latestFeatureIndex.loadVTLayers();for(var ge in this.buckets)if(W.style.hasLayer(ge)){var Me=this.buckets[ge],Pe=Me.layers[0].sourceLayer||"_geojsonTileLayer",Qe=se[Pe],dt=I[Pe];if(!(!Qe||!dt||Object.keys(dt).length===0)){Me.update(dt,Qe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Mt=W&&W.style&&W.style.getLayer(ge);Mt&&(this.queryPadding=Math.max(this.queryPadding,Mt.queryRadius(Me)))}}}},Do.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Do.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<fe.now()},Do.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Do.prototype.setHoldDuration=function(I){this.symbolFadeHoldUntil=fe.now()+I},Do.prototype.setDependencies=function(I,W){for(var se={},ge=0,Me=W;ge<Me.length;ge+=1){var Pe=Me[ge];se[Pe]=!0}this.dependencies[I]=se},Do.prototype.hasDependency=function(I,W){for(var se=0,ge=I;se<ge.length;se+=1){var Me=ge[se],Pe=this.dependencies[Me];if(Pe)for(var Qe=0,dt=W;Qe<dt.length;Qe+=1){var Mt=dt[Qe];if(Pe[Mt])return!0}}return!1};var _5=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Vc=o.performance,vx=function(I){this._marks={start:[I.url,"start"].join("#"),end:[I.url,"end"].join("#"),measure:I.url.toString()},Vc.mark(this._marks.start)};vx.prototype.finish=function(){Vc.mark(this._marks.end);var I=Vc.getEntriesByName(this._marks.measure);return I.length===0&&(Vc.measure(this._marks.measure,this._marks.start,this._marks.end),I=Vc.getEntriesByName(this._marks.measure),Vc.clearMarks(this._marks.start),Vc.clearMarks(this._marks.end),Vc.clearMeasures(this._marks.measure)),I},n.Actor=Cv,n.AlphaImage=Bh,n.CanonicalTileID=Vh,n.CollisionBoxArray=hd,n.Color=ta,n.DEMData=Zf,n.DataConstantProperty=li,n.DictionaryCoder=e0,n.EXTENT=Mi,n.ErrorEvent=Ft,n.EvaluationParameters=Ai,n.Event=er,n.Evented=ir,n.FeatureIndex=jf,n.FillBucket=Bu,n.FillExtrusionBucket=Nu,n.ImageAtlas=Md,n.ImagePosition=Xp,n.LineBucket=gs,n.LngLat=Na,n.LngLatBounds=bo,n.MercatorCoordinate=Uh,n.ONE_EM=Ho,n.OverscaledTileID=wo,n.Point=r,n.Point$1=r,n.Properties=pa,n.Protobuf=Wp,n.RGBAImage=Ds,n.RequestManager=Ce,n.RequestPerformance=vx,n.ResourceType=mr,n.SegmentVector=mo,n.SourceFeatureState=Lv,n.StructArrayLayout1ui2=Dc,n.StructArrayLayout2f1f2i16=zu,n.StructArrayLayout2i4=Hf,n.StructArrayLayout3ui6=Ou,n.StructArrayLayout4i8=ld,n.SymbolBucket=wa,n.Texture=Nh,n.Tile=Do,n.Transitionable=oa,n.Uniform1f=Xr,n.Uniform1i=Dr,n.Uniform2f=Yr,n.Uniform3f=Gr,n.Uniform4f=Jr,n.UniformColor=vn,n.UniformMatrix4f=Bn,n.UnwrappedTileID=fx,n.ValidationError=Fr,n.WritingMode=ll,n.ZoomHistory=Vt,n.add=vv,n.addDynamicAttributes=Qg,n.asyncAll=c,n.bezier=l,n.bindAll=_,n.browser=fe,n.cacheEntryPossiblyAdded=It,n.clamp=h,n.clearTileCache=gr,n.clipLine=Z1,n.clone=fv,n.clone$1=V,n.clone$2=Rg,n.collisionCircleLayout=u4,n.config=re,n.create=uv,n.create$1=Qo,n.create$2=lv,n.createCommonjsModule=E,n.createExpression=nl,n.createLayout=Oa,n.createStyleLayer=b5,n.cross=D2,n.deepEqual=i,n.dot=I2,n.dot$1=B2,n.ease=m,n.emitValidationErrors=Ii,n.endsWith=b,n.enforceCacheSizeLimit=Xt,n.evaluateSizeForFeature=U1,n.evaluateSizeForZoom=V1,n.evaluateVariableOffset=J1,n.evented=Ei,n.extend=x,n.featureFilter=al,n.filterObject=D,n.fromRotation=Oc,n.getAnchorAlignment=Zg,n.getAnchorJustification=Jg,n.getArrayBuffer=Bt,n.getImage=Rt,n.getJSON=Ht,n.getRTLTextPluginStatus=Di,n.getReferrer=mt,n.getVideo=Jt,n.identity=cv,n.invert=Fc,n.isChar=Wt,n.isMapboxURL=Oe,n.keysDifference=p,n.makeRequest=Pt,n.mapObject=k,n.mercatorXfromLng=sx,n.mercatorYfromLat=lx,n.mercatorZfromAltitude=ux,n.mul=Pg,n.multiply=Bc,n.mvt=gv,n.nextPowerOfTwo=M,n.normalize=pd,n.number=Ba,n.offscreenCanvasSupported=Qt,n.ortho=_g,n.parseGlyphPBF=O4,n.pbf=Wp,n.performSymbolLayout=e5,n.perspective=dd,n.pick=A,n.plugin=Qn,n.polygonIntersectsPolygon=Vi,n.postMapLoadEvent=Ye,n.postTurnstileEvent=We,n.potpack=I1,n.refProperties=_5,n.register=Ve,n.registerForPluginStateChange=aa,n.renderColorRamp=f1,n.rotate=Oh,n.rotateX=Is,n.rotateZ=hv,n.scale=Rs,n.scale$1=F2,n.scale$2=Dg,n.setCacheLimits=gt,n.setRTLTextPlugin=Ka,n.sphericalToCartesian=X,n.sqrLen=V2,n.styleSpec=Ar,n.sub=z2,n.symbolSize=Y4,n.transformMat3=k2,n.transformMat4=Bp,n.translate=ro,n.triggerPluginCompletionEvent=ci,n.uniqueId=y,n.validateCustomStyleLayer=y5,n.validateLight=Zn,n.validateStyle=Rn,n.values=a,n.vectorTile=gv,n.version=T,n.warnOnce=B,n.webpSupported=ce,n.window=o,n.wrap=w}),S(["./shared"],function(n){function E(mt){var ut=typeof mt;if(ut==="number"||ut==="boolean"||ut==="string"||mt===void 0||mt===null)return JSON.stringify(mt);if(Array.isArray(mt)){for(var bt="[",St=0,Pt=mt;St<Pt.length;St+=1){var Ht=Pt[St];bt+=E(Ht)+","}return bt+"]"}for(var Bt=Object.keys(mt).sort(),Nt="{",Kt=0;Kt<Bt.length;Kt++)Nt+=JSON.stringify(Bt[Kt])+":"+E(mt[Bt[Kt]])+",";return Nt+"}"}function T(mt){for(var ut="",bt=0,St=n.refProperties;bt<St.length;bt+=1){var Pt=St[bt];ut+="/"+E(mt[Pt])}return ut}function v(mt,ut){for(var bt={},St=0;St<mt.length;St++){var Pt=ut&&ut[mt[St].id]||T(mt[St]);ut&&(ut[mt[St].id]=Pt);var Ht=bt[Pt];Ht||(Ht=bt[Pt]=[]),Ht.push(mt[St])}var Bt=[];for(var Nt in bt)Bt.push(bt[Nt]);return Bt}var g=function(ut){this.keyCache={},ut&&this.replace(ut)};g.prototype.replace=function(ut){this._layerConfigs={},this._layers={},this.update(ut,[])},g.prototype.update=function(ut,bt){for(var St=this,Pt=0,Ht=ut;Pt<Ht.length;Pt+=1){var Bt=Ht[Pt];this._layerConfigs[Bt.id]=Bt;var Nt=this._layers[Bt.id]=n.createStyleLayer(Bt);Nt._featureFilter=n.featureFilter(Nt.filter),this.keyCache[Bt.id]&&delete this.keyCache[Bt.id]}for(var Kt=0,fr=bt;Kt<fr.length;Kt+=1){var cr=fr[Kt];delete this.keyCache[cr],delete this._layerConfigs[cr],delete this._layers[cr]}this.familiesBySource={};for(var dr=v(n.values(this._layerConfigs),this.keyCache),Xe=0,He=dr;Xe<He.length;Xe+=1){var zt=He[Xe],Rt=zt.map(function(ir){return St._layers[ir.id]}),Jt=Rt[0];if(Jt.visibility!=="none"){var sr=Jt.source||"",ur=this.familiesBySource[sr];ur||(ur=this.familiesBySource[sr]={});var er=Jt.sourceLayer||"_geojsonTileLayer",Ft=ur[er];Ft||(Ft=ur[er]=[]),Ft.push(Rt)}}};var r=1,t=function(ut){var bt={},St=[];for(var Pt in ut){var Ht=ut[Pt],Bt=bt[Pt]={};for(var Nt in Ht){var Kt=Ht[+Nt];if(!(!Kt||Kt.bitmap.width===0||Kt.bitmap.height===0)){var fr={x:0,y:0,w:Kt.bitmap.width+2*r,h:Kt.bitmap.height+2*r};St.push(fr),Bt[Nt]={rect:fr,metrics:Kt.metrics}}}}var cr=n.potpack(St),dr=cr.w,Xe=cr.h,He=new n.AlphaImage({width:dr||1,height:Xe||1});for(var zt in ut){var Rt=ut[zt];for(var Jt in Rt){var sr=Rt[+Jt];if(!(!sr||sr.bitmap.width===0||sr.bitmap.height===0)){var ur=bt[zt][Jt].rect;n.AlphaImage.copy(sr.bitmap,He,{x:0,y:0},{x:ur.x+r,y:ur.y+r},sr.bitmap)}}}this.image=He,this.positions=bt};n.register("GlyphAtlas",t);var o=function(ut){this.tileID=new n.OverscaledTileID(ut.tileID.overscaledZ,ut.tileID.wrap,ut.tileID.canonical.z,ut.tileID.canonical.x,ut.tileID.canonical.y),this.uid=ut.uid,this.zoom=ut.zoom,this.pixelRatio=ut.pixelRatio,this.tileSize=ut.tileSize,this.source=ut.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ut.showCollisionBoxes,this.collectResourceTiming=!!ut.collectResourceTiming,this.returnDependencies=!!ut.returnDependencies,this.promoteId=ut.promoteId};o.prototype.parse=function(ut,bt,St,Pt,Ht){var Bt=this;this.status="parsing",this.data=ut,this.collisionBoxArray=new n.CollisionBoxArray;var Nt=new n.DictionaryCoder(Object.keys(ut.layers).sort()),Kt=new n.FeatureIndex(this.tileID,this.promoteId);Kt.bucketLayerIDs=[];var fr={},cr={featureIndex:Kt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:St},dr=bt.familiesBySource[this.source];for(var Xe in dr){var He=ut.layers[Xe];if(He){He.version===1&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+Xe+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var zt=Nt.encode(Xe),Rt=[],Jt=0;Jt<He.length;Jt++){var sr=He.feature(Jt),ur=Kt.getId(sr,Xe);Rt.push({feature:sr,id:ur,index:Jt,sourceLayerIndex:zt})}for(var er=0,Ft=dr[Xe];er<Ft.length;er+=1){var ir=Ft[er],hr=ir[0];if(!(hr.minzoom&&this.zoom<Math.floor(hr.minzoom))&&!(hr.maxzoom&&this.zoom>=hr.maxzoom)&&hr.visibility!=="none"){i(ir,this.zoom,St);var xr=fr[hr.id]=hr.createBucket({index:Kt.bucketLayerIDs.length,layers:ir,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zt,sourceID:this.source});xr.populate(Rt,cr,this.tileID.canonical),Kt.bucketLayerIDs.push(ir.map(function(Tr){return Tr.id}))}}}}var vr,Vr,_r,Rr,nn=n.mapObject(cr.glyphDependencies,function(Tr){return Object.keys(Tr).map(Number)});Object.keys(nn).length?Pt.send("getGlyphs",{uid:this.uid,stacks:nn},function(Tr,kr){vr||(vr=Tr,Vr=kr,wn.call(Bt))}):Vr={};var en=Object.keys(cr.iconDependencies);en.length?Pt.send("getImages",{icons:en,source:this.source,tileID:this.tileID,type:"icons"},function(Tr,kr){vr||(vr=Tr,_r=kr,wn.call(Bt))}):_r={};var An=Object.keys(cr.patternDependencies);An.length?Pt.send("getImages",{icons:An,source:this.source,tileID:this.tileID,type:"patterns"},function(Tr,kr){vr||(vr=Tr,Rr=kr,wn.call(Bt))}):Rr={},wn.call(this);function wn(){if(vr)return Ht(vr);if(Vr&&_r&&Rr){var Tr=new t(Vr),kr=new n.ImageAtlas(_r,Rr);for(var Wr in fr){var zr=fr[Wr];zr instanceof n.SymbolBucket?(i(zr.layers,this.zoom,St),n.performSymbolLayout(zr,Vr,Tr.positions,_r,kr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):zr.hasPattern&&(zr instanceof n.LineBucket||zr instanceof n.FillBucket||zr instanceof n.FillExtrusionBucket)&&(i(zr.layers,this.zoom,St),zr.addFeatures(cr,this.tileID.canonical,kr.patternPositions))}this.status="done",Ht(null,{buckets:n.values(fr).filter(function(sn){return!sn.isEmpty()}),featureIndex:Kt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Tr.image,imageAtlas:kr,glyphMap:this.returnDependencies?Vr:null,iconMap:this.returnDependencies?_r:null,glyphPositions:this.returnDependencies?Tr.positions:null})}}};function i(mt,ut,bt){for(var St=new n.EvaluationParameters(ut),Pt=0,Ht=mt;Pt<Ht.length;Pt+=1){var Bt=Ht[Pt];Bt.recalculate(St,bt)}}function f(mt,ut){var bt=n.getArrayBuffer(mt.request,function(St,Pt,Ht,Bt){St?ut(St):Pt&&ut(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(Pt)),rawData:Pt,cacheControl:Ht,expires:Bt})});return function(){bt.cancel(),ut()}}var u=function(ut,bt,St,Pt){this.actor=ut,this.layerIndex=bt,this.availableImages=St,this.loadVectorData=Pt||f,this.loading={},this.loaded={}};u.prototype.loadTile=function(ut,bt){var St=this,Pt=ut.uid;this.loading||(this.loading={});var Ht=ut&&ut.request&&ut.request.collectResourceTiming?new n.RequestPerformance(ut.request):!1,Bt=this.loading[Pt]=new o(ut);Bt.abort=this.loadVectorData(ut,function(Nt,Kt){if(delete St.loading[Pt],Nt||!Kt)return Bt.status="done",St.loaded[Pt]=Bt,bt(Nt);var fr=Kt.rawData,cr={};Kt.expires&&(cr.expires=Kt.expires),Kt.cacheControl&&(cr.cacheControl=Kt.cacheControl);var dr={};if(Ht){var Xe=Ht.finish();Xe&&(dr.resourceTiming=JSON.parse(JSON.stringify(Xe)))}Bt.vectorTile=Kt.vectorTile,Bt.parse(Kt.vectorTile,St.layerIndex,St.availableImages,St.actor,function(He,zt){if(He||!zt)return bt(He);bt(null,n.extend({rawTileData:fr.slice(0)},zt,cr,dr))}),St.loaded=St.loaded||{},St.loaded[Pt]=Bt})},u.prototype.reloadTile=function(ut,bt){var St=this,Pt=this.loaded,Ht=ut.uid,Bt=this;if(Pt&&Pt[Ht]){var Nt=Pt[Ht];Nt.showCollisionBoxes=ut.showCollisionBoxes;var Kt=function(fr,cr){var dr=Nt.reloadCallback;dr&&(delete Nt.reloadCallback,Nt.parse(Nt.vectorTile,Bt.layerIndex,St.availableImages,Bt.actor,dr)),bt(fr,cr)};Nt.status==="parsing"?Nt.reloadCallback=Kt:Nt.status==="done"&&(Nt.vectorTile?Nt.parse(Nt.vectorTile,this.layerIndex,this.availableImages,this.actor,Kt):Kt())}},u.prototype.abortTile=function(ut,bt){var St=this.loading,Pt=ut.uid;St&&St[Pt]&&St[Pt].abort&&(St[Pt].abort(),delete St[Pt]),bt()},u.prototype.removeTile=function(ut,bt){var St=this.loaded,Pt=ut.uid;St&&St[Pt]&&delete St[Pt],bt()};var l=n.window.ImageBitmap,m=function(){this.loaded={}};m.prototype.loadTile=function(ut,bt){var St=ut.uid,Pt=ut.encoding,Ht=ut.rawImageData,Bt=l&&Ht instanceof l?this.getImageData(Ht):Ht,Nt=new n.DEMData(St,Bt,Pt);this.loaded=this.loaded||{},this.loaded[St]=Nt,bt(null,Nt)},m.prototype.getImageData=function(ut){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(ut.width,ut.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ut.width,this.offscreenCanvas.height=ut.height,this.offscreenCanvasContext.drawImage(ut,0,0,ut.width,ut.height);var bt=this.offscreenCanvasContext.getImageData(-1,-1,ut.width+2,ut.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:bt.width,height:bt.height},bt.data)},m.prototype.removeTile=function(ut){var bt=this.loaded,St=ut.uid;bt&&bt[St]&&delete bt[St]};var h=w;function w(mt,ut){var bt=mt&&mt.type,St;if(bt==="FeatureCollection")for(St=0;St<mt.features.length;St++)w(mt.features[St],ut);else if(bt==="GeometryCollection")for(St=0;St<mt.geometries.length;St++)w(mt.geometries[St],ut);else if(bt==="Feature")w(mt.geometry,ut);else if(bt==="Polygon")c(mt.coordinates,ut);else if(bt==="MultiPolygon")for(St=0;St<mt.coordinates.length;St++)c(mt.coordinates[St],ut);return mt}function c(mt,ut){if(mt.length!==0){a(mt[0],ut);for(var bt=1;bt<mt.length;bt++)a(mt[bt],!ut)}}function a(mt,ut){for(var bt=0,St=0,Pt=mt.length,Ht=Pt-1;St<Pt;Ht=St++)bt+=(mt[St][0]-mt[Ht][0])*(mt[Ht][1]+mt[St][1]);bt>=0!=!!ut&&mt.reverse()}var p=n.vectorTile.VectorTileFeature.prototype.toGeoJSON,x=function(ut){this._feature=ut,this.extent=n.EXTENT,this.type=ut.type,this.properties=ut.tags,"id"in ut&&!isNaN(ut.id)&&(this.id=parseInt(ut.id,10))};x.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ut=[],bt=0,St=this._feature.geometry;bt<St.length;bt+=1){var Pt=St[bt];ut.push([new n.Point$1(Pt[0],Pt[1])])}return ut}else{for(var Ht=[],Bt=0,Nt=this._feature.geometry;Bt<Nt.length;Bt+=1){for(var Kt=Nt[Bt],fr=[],cr=0,dr=Kt;cr<dr.length;cr+=1){var Xe=dr[cr];fr.push(new n.Point$1(Xe[0],Xe[1]))}Ht.push(fr)}return Ht}},x.prototype.toGeoJSON=function(ut,bt,St){return p.call(this,ut,bt,St)};var A=function(ut){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=ut.length,this._features=ut};A.prototype.feature=function(ut){return new x(this._features[ut])};var P=n.vectorTile.VectorTileFeature,y=C;function C(mt,ut){this.options=ut||{},this.features=mt,this.length=mt.length}C.prototype.feature=function(mt){return new M(this.features[mt],this.options.extent)};function M(mt,ut){this.id=typeof mt.id=="number"?mt.id:void 0,this.type=mt.type,this.rawGeometry=mt.type===1?[mt.geometry]:mt.geometry,this.properties=mt.tags,this.extent=ut||4096}M.prototype.loadGeometry=function(){var mt=this.rawGeometry;this.geometry=[];for(var ut=0;ut<mt.length;ut++){for(var bt=mt[ut],St=[],Pt=0;Pt<bt.length;Pt++)St.push(new n.Point$1(bt[Pt][0],bt[Pt][1]));this.geometry.push(St)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var mt=this.geometry,ut=1/0,bt=-1/0,St=1/0,Pt=-1/0,Ht=0;Ht<mt.length;Ht++)for(var Bt=mt[Ht],Nt=0;Nt<Bt.length;Nt++){var Kt=Bt[Nt];ut=Math.min(ut,Kt.x),bt=Math.max(bt,Kt.x),St=Math.min(St,Kt.y),Pt=Math.max(Pt,Kt.y)}return[ut,St,bt,Pt]},M.prototype.toGeoJSON=P.prototype.toGeoJSON;var s=D,_=D,b=V,k=y;function D(mt){var ut=new n.pbf;return O(mt,ut),ut.finish()}function V(mt,ut){ut=ut||{};var bt={};for(var St in mt)bt[St]=new y(mt[St].features,ut),bt[St].name=St,bt[St].version=ut.version,bt[St].extent=ut.extent;return D({layers:bt})}function O(mt,ut){for(var bt in mt.layers)ut.writeMessage(3,N,mt.layers[bt])}function N(mt,ut){ut.writeVarintField(15,mt.version||1),ut.writeStringField(1,mt.name||""),ut.writeVarintField(5,mt.extent||4096);var bt,St={keys:[],values:[],keycache:{},valuecache:{}};for(bt=0;bt<mt.length;bt++)St.feature=mt.feature(bt),ut.writeMessage(2,B,St);var Pt=St.keys;for(bt=0;bt<Pt.length;bt++)ut.writeStringField(3,Pt[bt]);var Ht=St.values;for(bt=0;bt<Ht.length;bt++)ut.writeMessage(4,ne,Ht[bt])}function B(mt,ut){var bt=mt.feature;bt.id!==void 0&&ut.writeVarintField(1,bt.id),ut.writeMessage(2,z,mt),ut.writeVarintField(3,bt.type),ut.writeMessage(4,$,bt)}function z(mt,ut){var bt=mt.feature,St=mt.keys,Pt=mt.values,Ht=mt.keycache,Bt=mt.valuecache;for(var Nt in bt.properties){var Kt=Ht[Nt];typeof Kt>"u"&&(St.push(Nt),Kt=St.length-1,Ht[Nt]=Kt),ut.writeVarint(Kt);var fr=bt.properties[Nt],cr=typeof fr;cr!=="string"&&cr!=="boolean"&&cr!=="number"&&(fr=JSON.stringify(fr));var dr=cr+":"+fr,Xe=Bt[dr];typeof Xe>"u"&&(Pt.push(fr),Xe=Pt.length-1,Bt[dr]=Xe),ut.writeVarint(Xe)}}function H(mt,ut){return(ut<<3)+(mt&7)}function X(mt){return mt<<1^mt>>31}function $(mt,ut){for(var bt=mt.loadGeometry(),St=mt.type,Pt=0,Ht=0,Bt=bt.length,Nt=0;Nt<Bt;Nt++){var Kt=bt[Nt],fr=1;St===1&&(fr=Kt.length),ut.writeVarint(H(1,fr));for(var cr=St===3?Kt.length-1:Kt.length,dr=0;dr<cr;dr++){dr===1&&St!==1&&ut.writeVarint(H(2,cr-1));var Xe=Kt[dr].x-Pt,He=Kt[dr].y-Ht;ut.writeVarint(X(Xe)),ut.writeVarint(X(He)),Pt+=Xe,Ht+=He}St===3&&ut.writeVarint(H(7,1))}}function ne(mt,ut){var bt=typeof mt;bt==="string"?ut.writeStringField(1,mt):bt==="boolean"?ut.writeBooleanField(7,mt):bt==="number"&&(mt%1!==0?ut.writeDoubleField(3,mt):mt<0?ut.writeSVarintField(6,mt):ut.writeVarintField(5,mt))}s.fromVectorTileJs=_,s.fromGeojsonVt=b,s.GeoJSONWrapper=k;function q(mt,ut,bt,St,Pt,Ht){if(!(Pt-St<=bt)){var Bt=St+Pt>>1;ue(mt,ut,Bt,St,Pt,Ht%2),q(mt,ut,bt,St,Bt-1,Ht+1),q(mt,ut,bt,Bt+1,Pt,Ht+1)}}function ue(mt,ut,bt,St,Pt,Ht){for(;Pt>St;){if(Pt-St>600){var Bt=Pt-St+1,Nt=bt-St+1,Kt=Math.log(Bt),fr=.5*Math.exp(2*Kt/3),cr=.5*Math.sqrt(Kt*fr*(Bt-fr)/Bt)*(Nt-Bt/2<0?-1:1),dr=Math.max(St,Math.floor(bt-Nt*fr/Bt+cr)),Xe=Math.min(Pt,Math.floor(bt+(Bt-Nt)*fr/Bt+cr));ue(mt,ut,bt,dr,Xe,Ht)}var He=ut[2*bt+Ht],zt=St,Rt=Pt;for(te(mt,ut,St,bt),ut[2*Pt+Ht]>He&&te(mt,ut,St,Pt);zt<Rt;){for(te(mt,ut,zt,Rt),zt++,Rt--;ut[2*zt+Ht]<He;)zt++;for(;ut[2*Rt+Ht]>He;)Rt--}ut[2*St+Ht]===He?te(mt,ut,St,Rt):(Rt++,te(mt,ut,Rt,Pt)),Rt<=bt&&(St=Rt+1),bt<=Rt&&(Pt=Rt-1)}}function te(mt,ut,bt,St){J(mt,bt,St),J(ut,2*bt,2*St),J(ut,2*bt+1,2*St+1)}function J(mt,ut,bt){var St=mt[ut];mt[ut]=mt[bt],mt[bt]=St}function ie(mt,ut,bt,St,Pt,Ht,Bt){for(var Nt=[0,mt.length-1,0],Kt=[],fr,cr;Nt.length;){var dr=Nt.pop(),Xe=Nt.pop(),He=Nt.pop();if(Xe-He<=Bt){for(var zt=He;zt<=Xe;zt++)fr=ut[2*zt],cr=ut[2*zt+1],fr>=bt&&fr<=Pt&&cr>=St&&cr<=Ht&&Kt.push(mt[zt]);continue}var Rt=Math.floor((He+Xe)/2);fr=ut[2*Rt],cr=ut[2*Rt+1],fr>=bt&&fr<=Pt&&cr>=St&&cr<=Ht&&Kt.push(mt[Rt]);var Jt=(dr+1)%2;(dr===0?bt<=fr:St<=cr)&&(Nt.push(He),Nt.push(Rt-1),Nt.push(Jt)),(dr===0?Pt>=fr:Ht>=cr)&&(Nt.push(Rt+1),Nt.push(Xe),Nt.push(Jt))}return Kt}function K(mt,ut,bt,St,Pt,Ht){for(var Bt=[0,mt.length-1,0],Nt=[],Kt=Pt*Pt;Bt.length;){var fr=Bt.pop(),cr=Bt.pop(),dr=Bt.pop();if(cr-dr<=Ht){for(var Xe=dr;Xe<=cr;Xe++)ee(ut[2*Xe],ut[2*Xe+1],bt,St)<=Kt&&Nt.push(mt[Xe]);continue}var He=Math.floor((dr+cr)/2),zt=ut[2*He],Rt=ut[2*He+1];ee(zt,Rt,bt,St)<=Kt&&Nt.push(mt[He]);var Jt=(fr+1)%2;(fr===0?bt-Pt<=zt:St-Pt<=Rt)&&(Bt.push(dr),Bt.push(He-1),Bt.push(Jt)),(fr===0?bt+Pt>=zt:St+Pt>=Rt)&&(Bt.push(He+1),Bt.push(cr),Bt.push(Jt))}return Nt}function ee(mt,ut,bt,St){var Pt=mt-bt,Ht=ut-St;return Pt*Pt+Ht*Ht}var le=function(mt){return mt[0]},j=function(mt){return mt[1]},Z=function(ut,bt,St,Pt,Ht){bt===void 0&&(bt=le),St===void 0&&(St=j),Pt===void 0&&(Pt=64),Ht===void 0&&(Ht=Float64Array),this.nodeSize=Pt,this.points=ut;for(var Bt=ut.length<65536?Uint16Array:Uint32Array,Nt=this.ids=new Bt(ut.length),Kt=this.coords=new Ht(ut.length*2),fr=0;fr<ut.length;fr++)Nt[fr]=fr,Kt[2*fr]=bt(ut[fr]),Kt[2*fr+1]=St(ut[fr]);q(Nt,Kt,Pt,0,Nt.length-1,0)};Z.prototype.range=function(ut,bt,St,Pt){return ie(this.ids,this.coords,ut,bt,St,Pt,this.nodeSize)},Z.prototype.within=function(ut,bt,St){return K(this.ids,this.coords,ut,bt,St,this.nodeSize)};var fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(mt){return mt}},re=function(ut){this.options=ze(Object.create(fe),ut),this.trees=new Array(this.options.maxZoom+1)};re.prototype.load=function(ut){var bt=this.options,St=bt.log,Pt=bt.minZoom,Ht=bt.maxZoom,Bt=bt.nodeSize;St&&console.time("total time");var Nt="prepare "+ut.length+" points";St&&console.time(Nt),this.points=ut;for(var Kt=[],fr=0;fr<ut.length;fr++)ut[fr].geometry&&Kt.push(xe(ut[fr],fr));this.trees[Ht+1]=new Z(Kt,Ce,Oe,Bt,Float32Array),St&&console.timeEnd(Nt);for(var cr=Ht;cr>=Pt;cr--){var dr=+Date.now();Kt=this._cluster(Kt,cr),this.trees[cr]=new Z(Kt,Ce,Oe,Bt,Float32Array),St&&console.log("z%d: %d clusters in %dms",cr,Kt.length,+Date.now()-dr)}return St&&console.timeEnd("total time"),this},re.prototype.getClusters=function(ut,bt){var St=((ut[0]+180)%360+360)%360-180,Pt=Math.max(-90,Math.min(90,ut[1])),Ht=ut[2]===180?180:((ut[2]+180)%360+360)%360-180,Bt=Math.max(-90,Math.min(90,ut[3]));if(ut[2]-ut[0]>=360)St=-180,Ht=180;else if(St>Ht){var Nt=this.getClusters([St,Pt,180,Bt],bt),Kt=this.getClusters([-180,Pt,Ht,Bt],bt);return Nt.concat(Kt)}for(var fr=this.trees[this._limitZoom(bt)],cr=fr.range(_e(St),ke(Bt),_e(Ht),ke(Pt)),dr=[],Xe=0,He=cr;Xe<He.length;Xe+=1){var zt=He[Xe],Rt=fr.points[zt];dr.push(Rt.numPoints?Te(Rt):this.points[Rt.index])}return dr},re.prototype.getChildren=function(ut){var bt=this._getOriginId(ut),St=this._getOriginZoom(ut),Pt="No cluster with the specified id.",Ht=this.trees[St];if(!Ht)throw new Error(Pt);var Bt=Ht.points[bt];if(!Bt)throw new Error(Pt);for(var Nt=this.options.radius/(this.options.extent*Math.pow(2,St-1)),Kt=Ht.within(Bt.x,Bt.y,Nt),fr=[],cr=0,dr=Kt;cr<dr.length;cr+=1){var Xe=dr[cr],He=Ht.points[Xe];He.parentId===ut&&fr.push(He.numPoints?Te(He):this.points[He.index])}if(fr.length===0)throw new Error(Pt);return fr},re.prototype.getLeaves=function(ut,bt,St){bt=bt||10,St=St||0;var Pt=[];return this._appendLeaves(Pt,ut,bt,St,0),Pt},re.prototype.getTile=function(ut,bt,St){var Pt=this.trees[this._limitZoom(ut)],Ht=Math.pow(2,ut),Bt=this.options,Nt=Bt.extent,Kt=Bt.radius,fr=Kt/Nt,cr=(St-fr)/Ht,dr=(St+1+fr)/Ht,Xe={features:[]};return this._addTileFeatures(Pt.range((bt-fr)/Ht,cr,(bt+1+fr)/Ht,dr),Pt.points,bt,St,Ht,Xe),bt===0&&this._addTileFeatures(Pt.range(1-fr/Ht,cr,1,dr),Pt.points,Ht,St,Ht,Xe),bt===Ht-1&&this._addTileFeatures(Pt.range(0,cr,fr/Ht,dr),Pt.points,-1,St,Ht,Xe),Xe.features.length?Xe:null},re.prototype.getClusterExpansionZoom=function(ut){for(var bt=this._getOriginZoom(ut)-1;bt<=this.options.maxZoom;){var St=this.getChildren(ut);if(bt++,St.length!==1)break;ut=St[0].properties.cluster_id}return bt},re.prototype._appendLeaves=function(ut,bt,St,Pt,Ht){for(var Bt=this.getChildren(bt),Nt=0,Kt=Bt;Nt<Kt.length;Nt+=1){var fr=Kt[Nt],cr=fr.properties;if(cr&&cr.cluster?Ht+cr.point_count<=Pt?Ht+=cr.point_count:Ht=this._appendLeaves(ut,cr.cluster_id,St,Pt,Ht):Ht<Pt?Ht++:ut.push(fr),ut.length===St)break}return Ht},re.prototype._addTileFeatures=function(ut,bt,St,Pt,Ht,Bt){for(var Nt=0,Kt=ut;Nt<Kt.length;Nt+=1){var fr=Kt[Nt],cr=bt[fr],dr=cr.numPoints,Xe={type:1,geometry:[[Math.round(this.options.extent*(cr.x*Ht-St)),Math.round(this.options.extent*(cr.y*Ht-Pt))]],tags:dr?we(cr):this.points[cr.index].properties},He=void 0;dr?He=cr.id:this.options.generateId?He=cr.index:this.points[cr.index].id&&(He=this.points[cr.index].id),He!==void 0&&(Xe.id=He),Bt.features.push(Xe)}},re.prototype._limitZoom=function(ut){return Math.max(this.options.minZoom,Math.min(+ut,this.options.maxZoom+1))},re.prototype._cluster=function(ut,bt){for(var St=[],Pt=this.options,Ht=Pt.radius,Bt=Pt.extent,Nt=Pt.reduce,Kt=Pt.minPoints,fr=Ht/(Bt*Math.pow(2,bt)),cr=0;cr<ut.length;cr++){var dr=ut[cr];if(!(dr.zoom<=bt)){dr.zoom=bt;for(var Xe=this.trees[bt+1],He=Xe.within(dr.x,dr.y,fr),zt=dr.numPoints||1,Rt=zt,Jt=0,sr=He;Jt<sr.length;Jt+=1){var ur=sr[Jt],er=Xe.points[ur];er.zoom>bt&&(Rt+=er.numPoints||1)}if(Rt>=Kt){for(var Ft=dr.x*zt,ir=dr.y*zt,hr=Nt&&zt>1?this._map(dr,!0):null,xr=(cr<<5)+(bt+1)+this.points.length,vr=0,Vr=He;vr<Vr.length;vr+=1){var _r=Vr[vr],Rr=Xe.points[_r];if(!(Rr.zoom<=bt)){Rr.zoom=bt;var nn=Rr.numPoints||1;Ft+=Rr.x*nn,ir+=Rr.y*nn,Rr.parentId=xr,Nt&&(hr||(hr=this._map(dr,!0)),Nt(hr,this._map(Rr)))}}dr.parentId=xr,St.push(ce(Ft/Rt,ir/Rt,xr,Rt,hr))}else if(St.push(dr),Rt>1)for(var en=0,An=He;en<An.length;en+=1){var wn=An[en],Tr=Xe.points[wn];Tr.zoom<=bt||(Tr.zoom=bt,St.push(Tr))}}}return St},re.prototype._getOriginId=function(ut){return ut-this.points.length>>5},re.prototype._getOriginZoom=function(ut){return(ut-this.points.length)%32},re.prototype._map=function(ut,bt){if(ut.numPoints)return bt?ze({},ut.properties):ut.properties;var St=this.points[ut.index].properties,Pt=this.options.map(St);return bt&&Pt===St?ze({},Pt):Pt};function ce(mt,ut,bt,St,Pt){return{x:mt,y:ut,zoom:1/0,id:bt,parentId:-1,numPoints:St,properties:Pt}}function xe(mt,ut){var bt=mt.geometry.coordinates,St=bt[0],Pt=bt[1];return{x:_e(St),y:ke(Pt),zoom:1/0,index:ut,parentId:-1}}function Te(mt){return{type:"Feature",id:mt.id,properties:we(mt),geometry:{type:"Point",coordinates:[Ne(mt.x),Ee(mt.y)]}}}function we(mt){var ut=mt.numPoints,bt=ut>=1e4?Math.round(ut/1e3)+"k":ut>=1e3?Math.round(ut/100)/10+"k":ut;return ze(ze({},mt.properties),{cluster:!0,cluster_id:mt.id,point_count:ut,point_count_abbreviated:bt})}function _e(mt){return mt/360+.5}function ke(mt){var ut=Math.sin(mt*Math.PI/180),bt=.5-.25*Math.log((1+ut)/(1-ut))/Math.PI;return bt<0?0:bt>1?1:bt}function Ne(mt){return(mt-.5)*360}function Ee(mt){var ut=(180-mt*360)*Math.PI/180;return 360*Math.atan(Math.exp(ut))/Math.PI-90}function ze(mt,ut){for(var bt in ut)mt[bt]=ut[bt];return mt}function Ce(mt){return mt.x}function Oe(mt){return mt.y}function Le(mt,ut,bt,St){for(var Pt=St,Ht=bt-ut>>1,Bt=bt-ut,Nt,Kt=mt[ut],fr=mt[ut+1],cr=mt[bt],dr=mt[bt+1],Xe=ut+3;Xe<bt;Xe+=3){var He=Ge(mt[Xe],mt[Xe+1],Kt,fr,cr,dr);if(He>Pt)Nt=Xe,Pt=He;else if(He===Pt){var zt=Math.abs(Xe-Ht);zt<Bt&&(Nt=Xe,Bt=zt)}}Pt>St&&(Nt-ut>3&&Le(mt,ut,Nt,St),mt[Nt+2]=Pt,bt-Nt>3&&Le(mt,Nt,bt,St))}function Ge(mt,ut,bt,St,Pt,Ht){var Bt=Pt-bt,Nt=Ht-St;if(Bt!==0||Nt!==0){var Kt=((mt-bt)*Bt+(ut-St)*Nt)/(Bt*Bt+Nt*Nt);Kt>1?(bt=Pt,St=Ht):Kt>0&&(bt+=Bt*Kt,St+=Nt*Kt)}return Bt=mt-bt,Nt=ut-St,Bt*Bt+Nt*Nt}function rt(mt,ut,bt,St){var Pt={id:typeof mt>"u"?null:mt,type:ut,geometry:bt,tags:St,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return ot(Pt),Pt}function ot(mt){var ut=mt.geometry,bt=mt.type;if(bt==="Point"||bt==="MultiPoint"||bt==="LineString")$e(mt,ut);else if(bt==="Polygon"||bt==="MultiLineString")for(var St=0;St<ut.length;St++)$e(mt,ut[St]);else if(bt==="MultiPolygon")for(St=0;St<ut.length;St++)for(var Pt=0;Pt<ut[St].length;Pt++)$e(mt,ut[St][Pt])}function $e(mt,ut){for(var bt=0;bt<ut.length;bt+=3)mt.minX=Math.min(mt.minX,ut[bt]),mt.minY=Math.min(mt.minY,ut[bt+1]),mt.maxX=Math.max(mt.maxX,ut[bt]),mt.maxY=Math.max(mt.maxY,ut[bt+1])}function qe(mt,ut){var bt=[];if(mt.type==="FeatureCollection")for(var St=0;St<mt.features.length;St++)ht(bt,mt.features[St],ut,St);else mt.type==="Feature"?ht(bt,mt,ut):ht(bt,{geometry:mt},ut);return bt}function ht(mt,ut,bt,St){if(ut.geometry){var Pt=ut.geometry.coordinates,Ht=ut.geometry.type,Bt=Math.pow(bt.tolerance/((1<<bt.maxZoom)*bt.extent),2),Nt=[],Kt=ut.id;if(bt.promoteId?Kt=ut.properties[bt.promoteId]:bt.generateId&&(Kt=St||0),Ht==="Point")vt(Pt,Nt);else if(Ht==="MultiPoint")for(var fr=0;fr<Pt.length;fr++)vt(Pt[fr],Nt);else if(Ht==="LineString")pt(Pt,Nt,Bt,!1);else if(Ht==="MultiLineString")if(bt.lineMetrics){for(fr=0;fr<Pt.length;fr++)Nt=[],pt(Pt[fr],Nt,Bt,!1),mt.push(rt(Kt,"LineString",Nt,ut.properties));return}else wt(Pt,Nt,Bt,!1);else if(Ht==="Polygon")wt(Pt,Nt,Bt,!0);else if(Ht==="MultiPolygon")for(fr=0;fr<Pt.length;fr++){var cr=[];wt(Pt[fr],cr,Bt,!0),Nt.push(cr)}else if(Ht==="GeometryCollection"){for(fr=0;fr<ut.geometry.geometries.length;fr++)ht(mt,{id:Kt,geometry:ut.geometry.geometries[fr],properties:ut.properties},bt,St);return}else throw new Error("Input data is not a valid GeoJSON object.");mt.push(rt(Kt,Ht,Nt,ut.properties))}}function vt(mt,ut){ut.push(Et(mt[0])),ut.push(nt(mt[1])),ut.push(0)}function pt(mt,ut,bt,St){for(var Pt,Ht,Bt=0,Nt=0;Nt<mt.length;Nt++){var Kt=Et(mt[Nt][0]),fr=nt(mt[Nt][1]);ut.push(Kt),ut.push(fr),ut.push(0),Nt>0&&(St?Bt+=(Pt*fr-Kt*Ht)/2:Bt+=Math.sqrt(Math.pow(Kt-Pt,2)+Math.pow(fr-Ht,2))),Pt=Kt,Ht=fr}var cr=ut.length-3;ut[2]=1,Le(ut,0,cr,bt),ut[cr+2]=1,ut.size=Math.abs(Bt),ut.start=0,ut.end=ut.size}function wt(mt,ut,bt,St){for(var Pt=0;Pt<mt.length;Pt++){var Ht=[];pt(mt[Pt],Ht,bt,St),ut.push(Ht)}}function Et(mt){return mt/360+.5}function nt(mt){var ut=Math.sin(mt*Math.PI/180),bt=.5-.25*Math.log((1+ut)/(1-ut))/Math.PI;return bt<0?0:bt>1?1:bt}function Fe(mt,ut,bt,St,Pt,Ht,Bt,Nt){if(bt/=ut,St/=ut,Ht>=bt&&Bt<St)return mt;if(Bt<bt||Ht>=St)return null;for(var Kt=[],fr=0;fr<mt.length;fr++){var cr=mt[fr],dr=cr.geometry,Xe=cr.type,He=Pt===0?cr.minX:cr.minY,zt=Pt===0?cr.maxX:cr.maxY;if(He>=bt&&zt<St){Kt.push(cr);continue}else if(zt<bt||He>=St)continue;var Rt=[];if(Xe==="Point"||Xe==="MultiPoint")We(dr,Rt,bt,St,Pt);else if(Xe==="LineString")Ze(dr,Rt,bt,St,Pt,!1,Nt.lineMetrics);else if(Xe==="MultiLineString")Ie(dr,Rt,bt,St,Pt,!1);else if(Xe==="Polygon")Ie(dr,Rt,bt,St,Pt,!0);else if(Xe==="MultiPolygon")for(var Jt=0;Jt<dr.length;Jt++){var sr=[];Ie(dr[Jt],sr,bt,St,Pt,!0),sr.length&&Rt.push(sr)}if(Rt.length){if(Nt.lineMetrics&&Xe==="LineString"){for(Jt=0;Jt<Rt.length;Jt++)Kt.push(rt(cr.id,Xe,Rt[Jt],cr.tags));continue}(Xe==="LineString"||Xe==="MultiLineString")&&(Rt.length===1?(Xe="LineString",Rt=Rt[0]):Xe="MultiLineString"),(Xe==="Point"||Xe==="MultiPoint")&&(Xe=Rt.length===3?"Point":"MultiPoint"),Kt.push(rt(cr.id,Xe,Rt,cr.tags))}}return Kt.length?Kt:null}function We(mt,ut,bt,St,Pt){for(var Ht=0;Ht<mt.length;Ht+=3){var Bt=mt[Ht+Pt];Bt>=bt&&Bt<=St&&(ut.push(mt[Ht]),ut.push(mt[Ht+1]),ut.push(mt[Ht+2]))}}function Ze(mt,ut,bt,St,Pt,Ht,Bt){for(var Nt=Ye(mt),Kt=Pt===0?je:Re,fr=mt.start,cr,dr,Xe=0;Xe<mt.length-3;Xe+=3){var He=mt[Xe],zt=mt[Xe+1],Rt=mt[Xe+2],Jt=mt[Xe+3],sr=mt[Xe+4],ur=Pt===0?He:zt,er=Pt===0?Jt:sr,Ft=!1;Bt&&(cr=Math.sqrt(Math.pow(He-Jt,2)+Math.pow(zt-sr,2))),ur<bt?er>bt&&(dr=Kt(Nt,He,zt,Jt,sr,bt),Bt&&(Nt.start=fr+cr*dr)):ur>St?er<St&&(dr=Kt(Nt,He,zt,Jt,sr,St),Bt&&(Nt.start=fr+cr*dr)):De(Nt,He,zt,Rt),er<bt&&ur>=bt&&(dr=Kt(Nt,He,zt,Jt,sr,bt),Ft=!0),er>St&&ur<=St&&(dr=Kt(Nt,He,zt,Jt,sr,St),Ft=!0),!Ht&&Ft&&(Bt&&(Nt.end=fr+cr*dr),ut.push(Nt),Nt=Ye(mt)),Bt&&(fr+=cr)}var ir=mt.length-3;He=mt[ir],zt=mt[ir+1],Rt=mt[ir+2],ur=Pt===0?He:zt,ur>=bt&&ur<=St&&De(Nt,He,zt,Rt),ir=Nt.length-3,Ht&&ir>=3&&(Nt[ir]!==Nt[0]||Nt[ir+1]!==Nt[1])&&De(Nt,Nt[0],Nt[1],Nt[2]),Nt.length&&ut.push(Nt)}function Ye(mt){var ut=[];return ut.size=mt.size,ut.start=mt.start,ut.end=mt.end,ut}function Ie(mt,ut,bt,St,Pt,Ht){for(var Bt=0;Bt<mt.length;Bt++)Ze(mt[Bt],ut,bt,St,Pt,Ht,!1)}function De(mt,ut,bt,St){mt.push(ut),mt.push(bt),mt.push(St)}function je(mt,ut,bt,St,Pt,Ht){var Bt=(Ht-ut)/(St-ut);return mt.push(Ht),mt.push(bt+(Pt-bt)*Bt),mt.push(1),Bt}function Re(mt,ut,bt,St,Pt,Ht){var Bt=(Ht-bt)/(Pt-bt);return mt.push(ut+(St-ut)*Bt),mt.push(Ht),mt.push(1),Bt}function pe(mt,ut){var bt=ut.buffer/ut.extent,St=mt,Pt=Fe(mt,1,-1-bt,bt,0,-1,2,ut),Ht=Fe(mt,1,1-bt,2+bt,0,-1,2,ut);return(Pt||Ht)&&(St=Fe(mt,1,-bt,1+bt,0,-1,2,ut)||[],Pt&&(St=be(Pt,1).concat(St)),Ht&&(St=St.concat(be(Ht,-1)))),St}function be(mt,ut){for(var bt=[],St=0;St<mt.length;St++){var Pt=mt[St],Ht=Pt.type,Bt;if(Ht==="Point"||Ht==="MultiPoint"||Ht==="LineString")Bt=Ue(Pt.geometry,ut);else if(Ht==="MultiLineString"||Ht==="Polygon"){Bt=[];for(var Nt=0;Nt<Pt.geometry.length;Nt++)Bt.push(Ue(Pt.geometry[Nt],ut))}else if(Ht==="MultiPolygon")for(Bt=[],Nt=0;Nt<Pt.geometry.length;Nt++){for(var Kt=[],fr=0;fr<Pt.geometry[Nt].length;fr++)Kt.push(Ue(Pt.geometry[Nt][fr],ut));Bt.push(Kt)}bt.push(rt(Pt.id,Ht,Bt,Pt.tags))}return bt}function Ue(mt,ut){var bt=[];bt.size=mt.size,mt.start!==void 0&&(bt.start=mt.start,bt.end=mt.end);for(var St=0;St<mt.length;St+=3)bt.push(mt[St]+ut,mt[St+1],mt[St+2]);return bt}function et(mt,ut){if(mt.transformed)return mt;var bt=1<<mt.z,St=mt.x,Pt=mt.y,Ht,Bt,Nt;for(Ht=0;Ht<mt.features.length;Ht++){var Kt=mt.features[Ht],fr=Kt.geometry,cr=Kt.type;if(Kt.geometry=[],cr===1)for(Bt=0;Bt<fr.length;Bt+=2)Kt.geometry.push(st(fr[Bt],fr[Bt+1],ut,bt,St,Pt));else for(Bt=0;Bt<fr.length;Bt++){var dr=[];for(Nt=0;Nt<fr[Bt].length;Nt+=2)dr.push(st(fr[Bt][Nt],fr[Bt][Nt+1],ut,bt,St,Pt));Kt.geometry.push(dr)}}return mt.transformed=!0,mt}function st(mt,ut,bt,St,Pt,Ht){return[Math.round(bt*(mt*St-Pt)),Math.round(bt*(ut*St-Ht))]}function lt(mt,ut,bt,St,Pt){for(var Ht=ut===Pt.maxZoom?0:Pt.tolerance/((1<<ut)*Pt.extent),Bt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:bt,y:St,z:ut,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Nt=0;Nt<mt.length;Nt++){Bt.numFeatures++,Gt(Bt,mt[Nt],Ht,Pt);var Kt=mt[Nt].minX,fr=mt[Nt].minY,cr=mt[Nt].maxX,dr=mt[Nt].maxY;Kt<Bt.minX&&(Bt.minX=Kt),fr<Bt.minY&&(Bt.minY=fr),cr>Bt.maxX&&(Bt.maxX=cr),dr>Bt.maxY&&(Bt.maxY=dr)}return Bt}function Gt(mt,ut,bt,St){var Pt=ut.geometry,Ht=ut.type,Bt=[];if(Ht==="Point"||Ht==="MultiPoint")for(var Nt=0;Nt<Pt.length;Nt+=3)Bt.push(Pt[Nt]),Bt.push(Pt[Nt+1]),mt.numPoints++,mt.numSimplified++;else if(Ht==="LineString")Zt(Bt,Pt,mt,bt,!1,!1);else if(Ht==="MultiLineString"||Ht==="Polygon")for(Nt=0;Nt<Pt.length;Nt++)Zt(Bt,Pt[Nt],mt,bt,Ht==="Polygon",Nt===0);else if(Ht==="MultiPolygon")for(var Kt=0;Kt<Pt.length;Kt++){var fr=Pt[Kt];for(Nt=0;Nt<fr.length;Nt++)Zt(Bt,fr[Nt],mt,bt,!0,Nt===0)}if(Bt.length){var cr=ut.tags||null;if(Ht==="LineString"&&St.lineMetrics){cr={};for(var dr in ut.tags)cr[dr]=ut.tags[dr];cr.mapbox_clip_start=Pt.start/Pt.size,cr.mapbox_clip_end=Pt.end/Pt.size}var Xe={geometry:Bt,type:Ht==="Polygon"||Ht==="MultiPolygon"?3:Ht==="LineString"||Ht==="MultiLineString"?2:1,tags:cr};ut.id!==null&&(Xe.id=ut.id),mt.features.push(Xe)}}function Zt(mt,ut,bt,St,Pt,Ht){var Bt=St*St;if(St>0&&ut.size<(Pt?Bt:St)){bt.numPoints+=ut.length/3;return}for(var Nt=[],Kt=0;Kt<ut.length;Kt+=3)(St===0||ut[Kt+2]>Bt)&&(bt.numSimplified++,Nt.push(ut[Kt]),Nt.push(ut[Kt+1])),bt.numPoints++;Pt&&Tt(Nt,Ht),mt.push(Nt)}function Tt(mt,ut){for(var bt=0,St=0,Pt=mt.length,Ht=Pt-2;St<Pt;Ht=St,St+=2)bt+=(mt[St]-mt[Ht])*(mt[St+1]+mt[Ht+1]);if(bt>0===ut)for(St=0,Pt=mt.length;St<Pt/2;St+=2){var Bt=mt[St],Nt=mt[St+1];mt[St]=mt[Pt-2-St],mt[St+1]=mt[Pt-1-St],mt[Pt-2-St]=Bt,mt[Pt-1-St]=Nt}}function It(mt,ut){return new Xt(mt,ut)}function Xt(mt,ut){ut=this.options=gt(Object.create(this.options),ut);var bt=ut.debug;if(bt&&console.time("preprocess data"),ut.maxZoom<0||ut.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ut.promoteId&&ut.generateId)throw new Error("promoteId and generateId cannot be used together.");var St=qe(mt,ut);this.tiles={},this.tileCoords=[],bt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ut.indexMaxZoom,ut.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),St=pe(St,ut),St.length&&this.splitTile(St,0,0,0),bt&&(St.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Xt.prototype.splitTile=function(mt,ut,bt,St,Pt,Ht,Bt){for(var Nt=[mt,ut,bt,St],Kt=this.options,fr=Kt.debug;Nt.length;){St=Nt.pop(),bt=Nt.pop(),ut=Nt.pop(),mt=Nt.pop();var cr=1<<ut,dr=gr(ut,bt,St),Xe=this.tiles[dr];if(!Xe&&(fr>1&&console.time("creation"),Xe=this.tiles[dr]=lt(mt,ut,bt,St,Kt),this.tileCoords.push({z:ut,x:bt,y:St}),fr)){fr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ut,bt,St,Xe.numFeatures,Xe.numPoints,Xe.numSimplified),console.timeEnd("creation"));var He="z"+ut;this.stats[He]=(this.stats[He]||0)+1,this.total++}if(Xe.source=mt,Pt){if(ut===Kt.maxZoom||ut===Pt)continue;var zt=1<<Pt-ut;if(bt!==Math.floor(Ht/zt)||St!==Math.floor(Bt/zt))continue}else if(ut===Kt.indexMaxZoom||Xe.numPoints<=Kt.indexMaxPoints)continue;if(Xe.source=null,mt.length!==0){fr>1&&console.time("clipping");var Rt=.5*Kt.buffer/Kt.extent,Jt=.5-Rt,sr=.5+Rt,ur=1+Rt,er,Ft,ir,hr,xr,vr;er=Ft=ir=hr=null,xr=Fe(mt,cr,bt-Rt,bt+sr,0,Xe.minX,Xe.maxX,Kt),vr=Fe(mt,cr,bt+Jt,bt+ur,0,Xe.minX,Xe.maxX,Kt),mt=null,xr&&(er=Fe(xr,cr,St-Rt,St+sr,1,Xe.minY,Xe.maxY,Kt),Ft=Fe(xr,cr,St+Jt,St+ur,1,Xe.minY,Xe.maxY,Kt),xr=null),vr&&(ir=Fe(vr,cr,St-Rt,St+sr,1,Xe.minY,Xe.maxY,Kt),hr=Fe(vr,cr,St+Jt,St+ur,1,Xe.minY,Xe.maxY,Kt),vr=null),fr>1&&console.timeEnd("clipping"),Nt.push(er||[],ut+1,bt*2,St*2),Nt.push(Ft||[],ut+1,bt*2,St*2+1),Nt.push(ir||[],ut+1,bt*2+1,St*2),Nt.push(hr||[],ut+1,bt*2+1,St*2+1)}}},Xt.prototype.getTile=function(mt,ut,bt){var St=this.options,Pt=St.extent,Ht=St.debug;if(mt<0||mt>24)return null;var Bt=1<<mt;ut=(ut%Bt+Bt)%Bt;var Nt=gr(mt,ut,bt);if(this.tiles[Nt])return et(this.tiles[Nt],Pt);Ht>1&&console.log("drilling down to z%d-%d-%d",mt,ut,bt);for(var Kt=mt,fr=ut,cr=bt,dr;!dr&&Kt>0;)Kt--,fr=Math.floor(fr/2),cr=Math.floor(cr/2),dr=this.tiles[gr(Kt,fr,cr)];return!dr||!dr.source?null:(Ht>1&&console.log("found parent tile z%d-%d-%d",Kt,fr,cr),Ht>1&&console.time("drilling down"),this.splitTile(dr.source,Kt,fr,cr,mt,ut,bt),Ht>1&&console.timeEnd("drilling down"),this.tiles[Nt]?et(this.tiles[Nt],Pt):null)};function gr(mt,ut,bt){return((1<<mt)*bt+ut)*32+mt}function gt(mt,ut){for(var bt in ut)mt[bt]=ut[bt];return mt}function jt(mt,ut){var bt=mt.tileID.canonical;if(!this._geoJSONIndex)return ut(null,null);var St=this._geoJSONIndex.getTile(bt.z,bt.x,bt.y);if(!St)return ut(null,null);var Pt=new A(St.features),Ht=s(Pt);(Ht.byteOffset!==0||Ht.byteLength!==Ht.buffer.byteLength)&&(Ht=new Uint8Array(Ht)),ut(null,{vectorTile:Pt,rawData:Ht.buffer})}var Qt=function(mt){function ut(bt,St,Pt,Ht){mt.call(this,bt,St,Pt,jt),Ht&&(this.loadGeoJSON=Ht)}return mt&&(ut.__proto__=mt),ut.prototype=Object.create(mt&&mt.prototype),ut.prototype.constructor=ut,ut.prototype.loadData=function(St,Pt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Pt,this._pendingLoadDataParams=St,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ut.prototype._loadData=function(){var St=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Pt=this._pendingCallback,Ht=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Bt=Ht&&Ht.request&&Ht.request.collectResourceTiming?new n.RequestPerformance(Ht.request):!1;this.loadGeoJSON(Ht,function(Nt,Kt){if(Nt||!Kt)return Pt(Nt);if(typeof Kt!="object")return Pt(new Error("Input data given to '"+Ht.source+"' is not a valid GeoJSON object."));h(Kt,!0);try{if(Ht.filter){var fr=n.createExpression(Ht.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(fr.result==="error")throw new Error(fr.value.map(function(He){return He.key+": "+He.message}).join(", "));var cr=Kt.features.filter(function(He){return fr.value.evaluate({zoom:0},He)});Kt={type:"FeatureCollection",features:cr}}St._geoJSONIndex=Ht.cluster?new re(mr(Ht)).load(Kt.features):It(Kt,Ht.geojsonVtOptions)}catch(He){return Pt(He)}St.loaded={};var dr={};if(Bt){var Xe=Bt.finish();Xe&&(dr.resourceTiming={},dr.resourceTiming[Ht.source]=JSON.parse(JSON.stringify(Xe)))}Pt(null,dr)})}},ut.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ut.prototype.reloadTile=function(St,Pt){var Ht=this.loaded,Bt=St.uid;return Ht&&Ht[Bt]?mt.prototype.reloadTile.call(this,St,Pt):this.loadTile(St,Pt)},ut.prototype.loadGeoJSON=function(St,Pt){if(St.request)n.getJSON(St.request,Pt);else if(typeof St.data=="string")try{return Pt(null,JSON.parse(St.data))}catch{return Pt(new Error("Input data given to '"+St.source+"' is not a valid GeoJSON object."))}else return Pt(new Error("Input data given to '"+St.source+"' is not a valid GeoJSON object."))},ut.prototype.removeSource=function(St,Pt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Pt()},ut.prototype.getClusterExpansionZoom=function(St,Pt){try{Pt(null,this._geoJSONIndex.getClusterExpansionZoom(St.clusterId))}catch(Ht){Pt(Ht)}},ut.prototype.getClusterChildren=function(St,Pt){try{Pt(null,this._geoJSONIndex.getChildren(St.clusterId))}catch(Ht){Pt(Ht)}},ut.prototype.getClusterLeaves=function(St,Pt){try{Pt(null,this._geoJSONIndex.getLeaves(St.clusterId,St.limit,St.offset))}catch(Ht){Pt(Ht)}},ut}(u);function mr(mt){var ut=mt.superclusterOptions,bt=mt.clusterProperties;if(!bt||!ut)return ut;for(var St={},Pt={},Ht={accumulated:null,zoom:0},Bt={properties:null},Nt=Object.keys(bt),Kt=0,fr=Nt;Kt<fr.length;Kt+=1){var cr=fr[Kt],dr=bt[cr],Xe=dr[0],He=dr[1],zt=n.createExpression(He),Rt=n.createExpression(typeof Xe=="string"?[Xe,["accumulated"],["get",cr]]:Xe);St[cr]=zt.value,Pt[cr]=Rt.value}return ut.map=function(Jt){Bt.properties=Jt;for(var sr={},ur=0,er=Nt;ur<er.length;ur+=1){var Ft=er[ur];sr[Ft]=St[Ft].evaluate(Ht,Bt)}return sr},ut.reduce=function(Jt,sr){Bt.properties=sr;for(var ur=0,er=Nt;ur<er.length;ur+=1){var Ft=er[ur];Ht.accumulated=Jt[Ft],Jt[Ft]=Pt[Ft].evaluate(Ht,Bt)}},ut}var or=function(ut){var bt=this;this.self=ut,this.actor=new n.Actor(ut,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:Qt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(St,Pt){if(bt.workerSourceTypes[St])throw new Error('Worker source with name "'+St+'" already registered.');bt.workerSourceTypes[St]=Pt},this.self.registerRTLTextPlugin=function(St){if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=St.applyArabicShaping,n.plugin.processBidirectionalText=St.processBidirectionalText,n.plugin.processStyledBidirectionalText=St.processStyledBidirectionalText}};return or.prototype.setReferrer=function(ut,bt){this.referrer=bt},or.prototype.setImages=function(ut,bt,St){this.availableImages[ut]=bt;for(var Pt in this.workerSources[ut]){var Ht=this.workerSources[ut][Pt];for(var Bt in Ht)Ht[Bt].availableImages=bt}St()},or.prototype.setLayers=function(ut,bt,St){this.getLayerIndex(ut).replace(bt),St()},or.prototype.updateLayers=function(ut,bt,St){this.getLayerIndex(ut).update(bt.layers,bt.removedIds),St()},or.prototype.loadTile=function(ut,bt,St){this.getWorkerSource(ut,bt.type,bt.source).loadTile(bt,St)},or.prototype.loadDEMTile=function(ut,bt,St){this.getDEMWorkerSource(ut,bt.source).loadTile(bt,St)},or.prototype.reloadTile=function(ut,bt,St){this.getWorkerSource(ut,bt.type,bt.source).reloadTile(bt,St)},or.prototype.abortTile=function(ut,bt,St){this.getWorkerSource(ut,bt.type,bt.source).abortTile(bt,St)},or.prototype.removeTile=function(ut,bt,St){this.getWorkerSource(ut,bt.type,bt.source).removeTile(bt,St)},or.prototype.removeDEMTile=function(ut,bt){this.getDEMWorkerSource(ut,bt.source).removeTile(bt)},or.prototype.removeSource=function(ut,bt,St){if(!(!this.workerSources[ut]||!this.workerSources[ut][bt.type]||!this.workerSources[ut][bt.type][bt.source])){var Pt=this.workerSources[ut][bt.type][bt.source];delete this.workerSources[ut][bt.type][bt.source],Pt.removeSource!==void 0?Pt.removeSource(bt,St):St()}},or.prototype.loadWorkerSource=function(ut,bt,St){try{this.self.importScripts(bt.url),St()}catch(Pt){St(Pt.toString())}},or.prototype.syncRTLPluginState=function(ut,bt,St){try{n.plugin.setState(bt);var Pt=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&Pt!=null){this.self.importScripts(Pt);var Ht=n.plugin.isParsed(),Bt=Ht?void 0:new Error("RTL Text Plugin failed to import scripts from "+Pt);St(Bt,Ht)}}catch(Nt){St(Nt.toString())}},or.prototype.getAvailableImages=function(ut){var bt=this.availableImages[ut];return bt||(bt=[]),bt},or.prototype.getLayerIndex=function(ut){var bt=this.layerIndexes[ut];return bt||(bt=this.layerIndexes[ut]=new g),bt},or.prototype.getWorkerSource=function(ut,bt,St){var Pt=this;if(this.workerSources[ut]||(this.workerSources[ut]={}),this.workerSources[ut][bt]||(this.workerSources[ut][bt]={}),!this.workerSources[ut][bt][St]){var Ht={send:function(Bt,Nt,Kt){Pt.actor.send(Bt,Nt,Kt,ut)}};this.workerSources[ut][bt][St]=new this.workerSourceTypes[bt](Ht,this.getLayerIndex(ut),this.getAvailableImages(ut))}return this.workerSources[ut][bt][St]},or.prototype.getDEMWorkerSource=function(ut,bt){return this.demWorkerSources[ut]||(this.demWorkerSources[ut]={}),this.demWorkerSources[ut][bt]||(this.demWorkerSources[ut][bt]=new m),this.demWorkerSources[ut][bt]},or.prototype.enforceCacheSizeLimit=function(ut,bt){n.enforceCacheSizeLimit(bt)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new or(self)),or}),S(["./shared"],function(n){var E=n.createCommonjsModule(function(de){de.exports?de.exports=Q:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Q,window.mapboxgl.notSupportedReason=ye);function Q(Gr){return!ye(Gr)}function ye(Gr){if(!ae())return"not a browser";if(!me())return"insufficent Array support";if(!Be())return"insufficient Function support";if(!Ke())return"insufficient Object support";if(!ft())return"insufficient JSON support";if(!Ct())return"insufficient worker support";if(!Ut())return"insufficient Uint8ClampedArray support";if(!$t())return"insufficient ArrayBuffer support";if(!lr())return"insufficient Canvas/getImageData support";if(!Dr(Gr&&Gr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function ae(){return typeof window<"u"&&typeof document<"u"}function me(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Be(){return Function.prototype&&Function.prototype.bind}function Ke(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function ft(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function Ct(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Gr=new Blob([""],{type:"text/javascript"}),Jr=URL.createObjectURL(Gr),vn,In;try{In=new Worker(Jr),vn=!0}catch{vn=!1}return In&&In.terminate(),URL.revokeObjectURL(Jr),vn}function Ut(){return"Uint8ClampedArray"in window}function $t(){return ArrayBuffer.isView}function lr(){var Gr=document.createElement("canvas");Gr.width=Gr.height=1;var Jr=Gr.getContext("2d");if(!Jr)return!1;var vn=Jr.getImageData(0,0,1,1);return vn&&vn.width===Gr.width}var ar={};function Dr(Gr){return ar[Gr]===void 0&&(ar[Gr]=Yr(Gr)),ar[Gr]}Q.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Xr(Gr){var Jr=document.createElement("canvas"),vn=Object.create(Q.webGLContextAttributes);return vn.failIfMajorPerformanceCaveat=Gr,Jr.probablySupportsContext?Jr.probablySupportsContext("webgl",vn)||Jr.probablySupportsContext("experimental-webgl",vn):Jr.supportsContext?Jr.supportsContext("webgl",vn)||Jr.supportsContext("experimental-webgl",vn):Jr.getContext("webgl",vn)||Jr.getContext("experimental-webgl",vn)}function Yr(Gr){var Jr=Xr(Gr);if(!Jr)return!1;var vn=Jr.createShader(Jr.VERTEX_SHADER);return!vn||Jr.isContextLost()?!1:(Jr.shaderSource(vn,"void main() {}"),Jr.compileShader(vn),Jr.getShaderParameter(vn,Jr.COMPILE_STATUS)===!0)}}),T={};T.create=function(de,Q,ye){var ae=n.window.document.createElement(de);return Q!==void 0&&(ae.className=Q),ye&&ye.appendChild(ae),ae},T.createNS=function(de,Q){var ye=n.window.document.createElementNS(de,Q);return ye};var v=n.window.document&&n.window.document.documentElement.style;function g(de){if(!v)return de[0];for(var Q=0;Q<de.length;Q++)if(de[Q]in v)return de[Q];return de[0]}var r=g(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),t;T.disableDrag=function(){v&&r&&(t=v[r],v[r]="none")},T.enableDrag=function(){v&&r&&(v[r]=t)};var o=g(["transform","WebkitTransform"]);T.setTransform=function(de,Q){de.style[o]=Q};var i=!1;try{var f=Object.defineProperty({},"passive",{get:function(){i=!0}});n.window.addEventListener("test",f,f),n.window.removeEventListener("test",f,f)}catch{i=!1}T.addEventListener=function(de,Q,ye,ae){ae===void 0&&(ae={}),"passive"in ae&&i?de.addEventListener(Q,ye,ae):de.addEventListener(Q,ye,ae.capture)},T.removeEventListener=function(de,Q,ye,ae){ae===void 0&&(ae={}),"passive"in ae&&i?de.removeEventListener(Q,ye,ae):de.removeEventListener(Q,ye,ae.capture)};var u=function(de){de.preventDefault(),de.stopPropagation(),n.window.removeEventListener("click",u,!0)};T.suppressClick=function(){n.window.addEventListener("click",u,!0),n.window.setTimeout(function(){n.window.removeEventListener("click",u,!0)},0)},T.mousePos=function(de,Q){var ye=de.getBoundingClientRect();return new n.Point(Q.clientX-ye.left-de.clientLeft,Q.clientY-ye.top-de.clientTop)},T.touchPos=function(de,Q){for(var ye=de.getBoundingClientRect(),ae=[],me=0;me<Q.length;me++)ae.push(new n.Point(Q[me].clientX-ye.left-de.clientLeft,Q[me].clientY-ye.top-de.clientTop));return ae},T.mouseButton=function(de){return typeof n.window.InstallTrigger<"u"&&de.button===2&&de.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:de.button},T.remove=function(de){de.parentNode&&de.parentNode.removeChild(de)};function l(de,Q,ye){var ae,me,Be,Ke=n.browser.devicePixelRatio>1?"@2x":"",ft=n.getJSON(Q.transformRequest(Q.normalizeSpriteURL(de,Ke,".json"),n.ResourceType.SpriteJSON),function($t,lr){ft=null,Be||(Be=$t,ae=lr,Ut())}),Ct=n.getImage(Q.transformRequest(Q.normalizeSpriteURL(de,Ke,".png"),n.ResourceType.SpriteImage),function($t,lr){Ct=null,Be||(Be=$t,me=lr,Ut())});function Ut(){if(Be)ye(Be);else if(ae&&me){var $t=n.browser.getImageData(me),lr={};for(var ar in ae){var Dr=ae[ar],Xr=Dr.width,Yr=Dr.height,Gr=Dr.x,Jr=Dr.y,vn=Dr.sdf,In=Dr.pixelRatio,Bn=Dr.stretchX,Yn=Dr.stretchY,Xn=Dr.content,Gn=new n.RGBAImage({width:Xr,height:Yr});n.RGBAImage.copy($t,Gn,{x:Gr,y:Jr},{x:0,y:0},{width:Xr,height:Yr}),lr[ar]={data:Gn,pixelRatio:In,sdf:vn,stretchX:Bn,stretchY:Yn,content:Xn}}ye(null,lr)}}return{cancel:function(){ft&&(ft.cancel(),ft=null),Ct&&(Ct.cancel(),Ct=null)}}}function m(de){var Q=de.userImage;if(Q&&Q.render){var ye=Q.render();if(ye)return de.data.replace(new Uint8Array(Q.data.buffer)),!0}return!1}var h=1,w=function(de){function Q(){de.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.isLoaded=function(){return this.loaded},Q.prototype.setLoaded=function(ae){if(this.loaded!==ae&&(this.loaded=ae,ae)){for(var me=0,Be=this.requestors;me<Be.length;me+=1){var Ke=Be[me],ft=Ke.ids,Ct=Ke.callback;this._notify(ft,Ct)}this.requestors=[]}},Q.prototype.getImage=function(ae){return this.images[ae]},Q.prototype.addImage=function(ae,me){this._validate(ae,me)&&(this.images[ae]=me)},Q.prototype._validate=function(ae,me){var Be=!0;return this._validateStretch(me.stretchX,me.data&&me.data.width)||(this.fire(new n.ErrorEvent(new Error('Image "'+ae+'" has invalid "stretchX" value'))),Be=!1),this._validateStretch(me.stretchY,me.data&&me.data.height)||(this.fire(new n.ErrorEvent(new Error('Image "'+ae+'" has invalid "stretchY" value'))),Be=!1),this._validateContent(me.content,me)||(this.fire(new n.ErrorEvent(new Error('Image "'+ae+'" has invalid "content" value'))),Be=!1),Be},Q.prototype._validateStretch=function(ae,me){if(!ae)return!0;for(var Be=0,Ke=0,ft=ae;Ke<ft.length;Ke+=1){var Ct=ft[Ke];if(Ct[0]<Be||Ct[1]<Ct[0]||me<Ct[1])return!1;Be=Ct[1]}return!0},Q.prototype._validateContent=function(ae,me){return ae?!(ae.length!==4||ae[0]<0||me.data.width<ae[0]||ae[1]<0||me.data.height<ae[1]||ae[2]<0||me.data.width<ae[2]||ae[3]<0||me.data.height<ae[3]||ae[2]<ae[0]||ae[3]<ae[1]):!0},Q.prototype.updateImage=function(ae,me){var Be=this.images[ae];me.version=Be.version+1,this.images[ae]=me,this.updatedImages[ae]=!0},Q.prototype.removeImage=function(ae){var me=this.images[ae];delete this.images[ae],delete this.patterns[ae],me.userImage&&me.userImage.onRemove&&me.userImage.onRemove()},Q.prototype.listImages=function(){return Object.keys(this.images)},Q.prototype.getImages=function(ae,me){var Be=!0;if(!this.isLoaded())for(var Ke=0,ft=ae;Ke<ft.length;Ke+=1){var Ct=ft[Ke];this.images[Ct]||(Be=!1)}this.isLoaded()||Be?this._notify(ae,me):this.requestors.push({ids:ae,callback:me})},Q.prototype._notify=function(ae,me){for(var Be={},Ke=0,ft=ae;Ke<ft.length;Ke+=1){var Ct=ft[Ke];this.images[Ct]||this.fire(new n.Event("styleimagemissing",{id:Ct}));var Ut=this.images[Ct];Ut?Be[Ct]={data:Ut.data.clone(),pixelRatio:Ut.pixelRatio,sdf:Ut.sdf,version:Ut.version,stretchX:Ut.stretchX,stretchY:Ut.stretchY,content:Ut.content,hasRenderCallback:!!(Ut.userImage&&Ut.userImage.render)}:n.warnOnce('Image "'+Ct+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}me(null,Be)},Q.prototype.getPixelSize=function(){var ae=this.atlasImage,me=ae.width,Be=ae.height;return{width:me,height:Be}},Q.prototype.getPattern=function(ae){var me=this.patterns[ae],Be=this.getImage(ae);if(!Be)return null;if(me&&me.position.version===Be.version)return me.position;if(me)me.position.version=Be.version;else{var Ke=Be.data.width+h*2,ft=Be.data.height+h*2,Ct={w:Ke,h:ft,x:0,y:0},Ut=new n.ImagePosition(Ct,Be);this.patterns[ae]={bin:Ct,position:Ut}}return this._updatePatternAtlas(),this.patterns[ae].position},Q.prototype.bind=function(ae){var me=ae.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(ae,this.atlasImage,me.RGBA),this.atlasTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE)},Q.prototype._updatePatternAtlas=function(){var ae=[];for(var me in this.patterns)ae.push(this.patterns[me].bin);var Be=n.potpack(ae),Ke=Be.w,ft=Be.h,Ct=this.atlasImage;Ct.resize({width:Ke||1,height:ft||1});for(var Ut in this.patterns){var $t=this.patterns[Ut],lr=$t.bin,ar=lr.x+h,Dr=lr.y+h,Xr=this.images[Ut].data,Yr=Xr.width,Gr=Xr.height;n.RGBAImage.copy(Xr,Ct,{x:0,y:0},{x:ar,y:Dr},{width:Yr,height:Gr}),n.RGBAImage.copy(Xr,Ct,{x:0,y:Gr-1},{x:ar,y:Dr-1},{width:Yr,height:1}),n.RGBAImage.copy(Xr,Ct,{x:0,y:0},{x:ar,y:Dr+Gr},{width:Yr,height:1}),n.RGBAImage.copy(Xr,Ct,{x:Yr-1,y:0},{x:ar-1,y:Dr},{width:1,height:Gr}),n.RGBAImage.copy(Xr,Ct,{x:0,y:0},{x:ar+Yr,y:Dr},{width:1,height:Gr})}this.dirty=!0},Q.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Q.prototype.dispatchRenderCallbacks=function(ae){for(var me=0,Be=ae;me<Be.length;me+=1){var Ke=Be[me];if(!this.callbackDispatchedThisFrame[Ke]){this.callbackDispatchedThisFrame[Ke]=!0;var ft=this.images[Ke],Ct=m(ft);Ct&&this.updateImage(Ke,ft)}}},Q}(n.Evented);function c(de,Q,ye,ae,me){var Be=Q*256,Ke=Be+255,ft=ae.transformRequest(ae.normalizeGlyphsURL(ye).replace("{fontstack}",de).replace("{range}",Be+"-"+Ke),n.ResourceType.Glyphs);n.getArrayBuffer(ft,function(Ct,Ut){if(Ct)me(Ct);else if(Ut){for(var $t={},lr=0,ar=n.parseGlyphPBF(Ut);lr<ar.length;lr+=1){var Dr=ar[lr];$t[Dr.id]=Dr}me(null,$t)}})}var a=A,p=A,x=1e20;function A(de,Q,ye,ae,me,Be){this.fontSize=de||24,this.buffer=Q===void 0?3:Q,this.cutoff=ae||.25,this.fontFamily=me||"sans-serif",this.fontWeight=Be||"normal",this.radius=ye||8;var Ke=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ke,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ke*Ke),this.gridInner=new Float64Array(Ke*Ke),this.f=new Float64Array(Ke),this.d=new Float64Array(Ke),this.z=new Float64Array(Ke+1),this.v=new Int16Array(Ke),this.middle=Math.round(Ke/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}A.prototype.draw=function(de){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(de,this.buffer,this.middle);for(var Q=this.ctx.getImageData(0,0,this.size,this.size),ye=new Uint8ClampedArray(this.size*this.size),ae=0;ae<this.size*this.size;ae++){var me=Q.data[ae*4+3]/255;this.gridOuter[ae]=me===1?0:me===0?x:Math.pow(Math.max(0,.5-me),2),this.gridInner[ae]=me===1?x:me===0?0:Math.pow(Math.max(0,me-.5),2)}for(P(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),P(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),ae=0;ae<this.size*this.size;ae++){var Be=this.gridOuter[ae]-this.gridInner[ae];ye[ae]=Math.max(0,Math.min(255,Math.round(255-255*(Be/this.radius+this.cutoff))))}return ye};function P(de,Q,ye,ae,me,Be,Ke){for(var ft=0;ft<Q;ft++){for(var Ct=0;Ct<ye;Ct++)ae[Ct]=de[Ct*Q+ft];for(y(ae,me,Be,Ke,ye),Ct=0;Ct<ye;Ct++)de[Ct*Q+ft]=me[Ct]}for(Ct=0;Ct<ye;Ct++){for(ft=0;ft<Q;ft++)ae[ft]=de[Ct*Q+ft];for(y(ae,me,Be,Ke,Q),ft=0;ft<Q;ft++)de[Ct*Q+ft]=Math.sqrt(me[ft])}}function y(de,Q,ye,ae,me){ye[0]=0,ae[0]=-x,ae[1]=+x;for(var Be=1,Ke=0;Be<me;Be++){for(var ft=(de[Be]+Be*Be-(de[ye[Ke]]+ye[Ke]*ye[Ke]))/(2*Be-2*ye[Ke]);ft<=ae[Ke];)Ke--,ft=(de[Be]+Be*Be-(de[ye[Ke]]+ye[Ke]*ye[Ke]))/(2*Be-2*ye[Ke]);Ke++,ye[Ke]=Be,ae[Ke]=ft,ae[Ke+1]=+x}for(Be=0,Ke=0;Be<me;Be++){for(;ae[Ke+1]<Be;)Ke++;Q[Be]=(Be-ye[Ke])*(Be-ye[Ke])+de[ye[Ke]]}}a.default=p;var C=function(Q,ye){this.requestManager=Q,this.localIdeographFontFamily=ye,this.entries={}};C.prototype.setURL=function(Q){this.url=Q},C.prototype.getGlyphs=function(Q,ye){var ae=this,me=[];for(var Be in Q)for(var Ke=0,ft=Q[Be];Ke<ft.length;Ke+=1){var Ct=ft[Ke];me.push({stack:Be,id:Ct})}n.asyncAll(me,function(Ut,$t){var lr=Ut.stack,ar=Ut.id,Dr=ae.entries[lr];Dr||(Dr=ae.entries[lr]={glyphs:{},requests:{},ranges:{}});var Xr=Dr.glyphs[ar];if(Xr!==void 0){$t(null,{stack:lr,id:ar,glyph:Xr});return}if(Xr=ae._tinySDF(Dr,lr,ar),Xr){Dr.glyphs[ar]=Xr,$t(null,{stack:lr,id:ar,glyph:Xr});return}var Yr=Math.floor(ar/256);if(Yr*256>65535){$t(new Error("glyphs > 65535 not supported"));return}if(Dr.ranges[Yr]){$t(null,{stack:lr,id:ar,glyph:Xr});return}var Gr=Dr.requests[Yr];Gr||(Gr=Dr.requests[Yr]=[],C.loadGlyphRange(lr,Yr,ae.url,ae.requestManager,function(Jr,vn){if(vn){for(var In in vn)ae._doesCharSupportLocalGlyph(+In)||(Dr.glyphs[+In]=vn[+In]);Dr.ranges[Yr]=!0}for(var Bn=0,Yn=Gr;Bn<Yn.length;Bn+=1){var Xn=Yn[Bn];Xn(Jr,vn)}delete Dr.requests[Yr]})),Gr.push(function(Jr,vn){Jr?$t(Jr):vn&&$t(null,{stack:lr,id:ar,glyph:vn[ar]||null})})},function(Ut,$t){if(Ut)ye(Ut);else if($t){for(var lr={},ar=0,Dr=$t;ar<Dr.length;ar+=1){var Xr=Dr[ar],Yr=Xr.stack,Gr=Xr.id,Jr=Xr.glyph;(lr[Yr]||(lr[Yr]={}))[Gr]=Jr&&{id:Jr.id,bitmap:Jr.bitmap.clone(),metrics:Jr.metrics}}ye(null,lr)}})},C.prototype._doesCharSupportLocalGlyph=function(Q){return!!this.localIdeographFontFamily&&(n.isChar["CJK Unified Ideographs"](Q)||n.isChar["Hangul Syllables"](Q)||n.isChar.Hiragana(Q)||n.isChar.Katakana(Q))},C.prototype._tinySDF=function(Q,ye,ae){var me=this.localIdeographFontFamily;if(me&&this._doesCharSupportLocalGlyph(ae)){var Be=Q.tinySDF;if(!Be){var Ke="400";/bold/i.test(ye)?Ke="900":/medium/i.test(ye)?Ke="500":/light/i.test(ye)&&(Ke="200"),Be=Q.tinySDF=new C.TinySDF(24,3,8,.25,me,Ke)}return{id:ae,bitmap:new n.AlphaImage({width:30,height:30},Be.draw(String.fromCharCode(ae))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},C.loadGlyphRange=c,C.TinySDF=a;var M=function(){this.specification=n.styleSpec.light.position};M.prototype.possiblyEvaluate=function(Q,ye){return n.sphericalToCartesian(Q.expression.evaluate(ye))},M.prototype.interpolate=function(Q,ye,ae){return{x:n.number(Q.x,ye.x,ae),y:n.number(Q.y,ye.y,ae),z:n.number(Q.z,ye.z,ae)}};var s=new n.Properties({anchor:new n.DataConstantProperty(n.styleSpec.light.anchor),position:new M,color:new n.DataConstantProperty(n.styleSpec.light.color),intensity:new n.DataConstantProperty(n.styleSpec.light.intensity)}),_="-transition",b=function(de){function Q(ye){de.call(this),this._transitionable=new n.Transitionable(s),this.setLight(ye),this._transitioning=this._transitionable.untransitioned()}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getLight=function(){return this._transitionable.serialize()},Q.prototype.setLight=function(ae,me){if(me===void 0&&(me={}),!this._validate(n.validateLight,ae,me))for(var Be in ae){var Ke=ae[Be];n.endsWith(Be,_)?this._transitionable.setTransition(Be.slice(0,-_.length),Ke):this._transitionable.setValue(Be,Ke)}},Q.prototype.updateTransitions=function(ae){this._transitioning=this._transitionable.transitioned(ae,this._transitioning)},Q.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Q.prototype.recalculate=function(ae){this.properties=this._transitioning.possiblyEvaluate(ae)},Q.prototype._validate=function(ae,me,Be){return Be&&Be.validate===!1?!1:n.emitValidationErrors(this,ae.call(n.validateStyle,n.extend({value:me,style:{glyphs:!0,sprite:!0},styleSpec:n.styleSpec})))},Q}(n.Evented),k=function(Q,ye){this.width=Q,this.height=ye,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};k.prototype.getDash=function(Q,ye){var ae=Q.join(",")+String(ye);return this.dashEntry[ae]||(this.dashEntry[ae]=this.addDash(Q,ye)),this.dashEntry[ae]},k.prototype.getDashRanges=function(Q,ye,ae){var me=Q.length%2===1,Be=[],Ke=me?-Q[Q.length-1]*ae:0,ft=Q[0]*ae,Ct=!0;Be.push({left:Ke,right:ft,isDash:Ct,zeroLength:Q[0]===0});for(var Ut=Q[0],$t=1;$t<Q.length;$t++){Ct=!Ct;var lr=Q[$t];Ke=Ut*ae,Ut+=lr,ft=Ut*ae,Be.push({left:Ke,right:ft,isDash:Ct,zeroLength:lr===0})}return Be},k.prototype.addRoundDash=function(Q,ye,ae){for(var me=ye/2,Be=-ae;Be<=ae;Be++)for(var Ke=this.nextRow+ae+Be,ft=this.width*Ke,Ct=0,Ut=Q[Ct],$t=0;$t<this.width;$t++){$t/Ut.right>1&&(Ut=Q[++Ct]);var lr=Math.abs($t-Ut.left),ar=Math.abs($t-Ut.right),Dr=Math.min(lr,ar),Xr=void 0,Yr=Be/ae*(me+1);if(Ut.isDash){var Gr=me-Math.abs(Yr);Xr=Math.sqrt(Dr*Dr+Gr*Gr)}else Xr=me-Math.sqrt(Dr*Dr+Yr*Yr);this.data[ft+$t]=Math.max(0,Math.min(255,Xr+128))}},k.prototype.addRegularDash=function(Q){for(var ye=Q.length-1;ye>=0;--ye){var ae=Q[ye],me=Q[ye+1];ae.zeroLength?Q.splice(ye,1):me&&me.isDash===ae.isDash&&(me.left=ae.left,Q.splice(ye,1))}var Be=Q[0],Ke=Q[Q.length-1];Be.isDash===Ke.isDash&&(Be.left=Ke.left-this.width,Ke.right=Be.right+this.width);for(var ft=this.width*this.nextRow,Ct=0,Ut=Q[Ct],$t=0;$t<this.width;$t++){$t/Ut.right>1&&(Ut=Q[++Ct]);var lr=Math.abs($t-Ut.left),ar=Math.abs($t-Ut.right),Dr=Math.min(lr,ar),Xr=Ut.isDash?Dr:-Dr;this.data[ft+$t]=Math.max(0,Math.min(255,Xr+128))}},k.prototype.addDash=function(Q,ye){var ae=ye?7:0,me=2*ae+1;if(this.nextRow+me>this.height)return n.warnOnce("LineAtlas out of space"),null;for(var Be=0,Ke=0;Ke<Q.length;Ke++)Be+=Q[Ke];if(Be!==0){var ft=this.width/Be,Ct=this.getDashRanges(Q,this.width,ft);ye?this.addRoundDash(Ct,ft,ae):this.addRegularDash(Ct)}var Ut={y:(this.nextRow+ae+.5)/this.height,height:2*ae/this.height,width:Be};return this.nextRow+=me,this.dirty=!0,Ut},k.prototype.bind=function(Q){var ye=Q.gl;this.texture?(ye.bindTexture(ye.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ye.texSubImage2D(ye.TEXTURE_2D,0,0,0,this.width,this.height,ye.ALPHA,ye.UNSIGNED_BYTE,this.data))):(this.texture=ye.createTexture(),ye.bindTexture(ye.TEXTURE_2D,this.texture),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_S,ye.REPEAT),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_T,ye.REPEAT),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MIN_FILTER,ye.LINEAR),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MAG_FILTER,ye.LINEAR),ye.texImage2D(ye.TEXTURE_2D,0,ye.ALPHA,this.width,this.height,0,ye.ALPHA,ye.UNSIGNED_BYTE,this.data))};var D=function de(Q,ye){this.workerPool=Q,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var ae=this.workerPool.acquire(this.id),me=0;me<ae.length;me++){var Be=ae[me],Ke=new de.Actor(Be,ye,this.id);Ke.name="Worker "+me,this.actors.push(Ke)}};D.prototype.broadcast=function(Q,ye,ae){ae=ae||function(){},n.asyncAll(this.actors,function(me,Be){me.send(Q,ye,Be)},ae)},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(Q){Q.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=n.Actor;function V(de,Q,ye){var ae=function(me,Be){if(me)return ye(me);if(Be){var Ke=n.pick(n.extend(Be,de),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Be.vector_layers&&(Ke.vectorLayers=Be.vector_layers,Ke.vectorLayerIds=Ke.vectorLayers.map(function(ft){return ft.id})),Ke.tiles=Q.canonicalizeTileset(Ke,de.url),ye(null,Ke)}};return de.url?n.getJSON(Q.transformRequest(Q.normalizeSourceURL(de.url),n.ResourceType.Source),ae):n.browser.frame(function(){return ae(null,de)})}var O=function(Q,ye,ae){this.bounds=n.LngLatBounds.convert(this.validateBounds(Q)),this.minzoom=ye||0,this.maxzoom=ae||24};O.prototype.validateBounds=function(Q){return!Array.isArray(Q)||Q.length!==4?[-180,-90,180,90]:[Math.max(-180,Q[0]),Math.max(-90,Q[1]),Math.min(180,Q[2]),Math.min(90,Q[3])]},O.prototype.contains=function(Q){var ye=Math.pow(2,Q.z),ae={minX:Math.floor(n.mercatorXfromLng(this.bounds.getWest())*ye),minY:Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*ye),maxX:Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*ye),maxY:Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*ye)},me=Q.x>=ae.minX&&Q.x<ae.maxX&&Q.y>=ae.minY&&Q.y<ae.maxY;return me};var N=function(de){function Q(ye,ae,me,Be){if(de.call(this),this.id=ye,this.dispatcher=me,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(ae,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},ae),this._collectResourceTiming=ae.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Be)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.load=function(){var ae=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,function(me,Be){ae._tileJSONRequest=null,ae._loaded=!0,me?ae.fire(new n.ErrorEvent(me)):Be&&(n.extend(ae,Be),Be.bounds&&(ae.tileBounds=new O(Be.bounds,ae.minzoom,ae.maxzoom)),n.postTurnstileEvent(Be.tiles,ae.map._requestManager._customAccessToken),n.postMapLoadEvent(Be.tiles,ae.map._getMapId(),ae.map._requestManager._skuToken,ae.map._requestManager._customAccessToken),ae.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),ae.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},Q.prototype.loaded=function(){return this._loaded},Q.prototype.hasTile=function(ae){return!this.tileBounds||this.tileBounds.contains(ae.canonical)},Q.prototype.onAdd=function(ae){this.map=ae,this.load()},Q.prototype.setSourceProperty=function(ae){this._tileJSONRequest&&this._tileJSONRequest.cancel(),ae();var me=this.map.style.sourceCaches[this.id];me.clearTiles(),this.load()},Q.prototype.setTiles=function(ae){var me=this;return this.setSourceProperty(function(){me._options.tiles=ae}),this},Q.prototype.setUrl=function(ae){var me=this;return this.setSourceProperty(function(){me.url=ae,me._options.url=ae}),this},Q.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Q.prototype.serialize=function(){return n.extend({},this._options)},Q.prototype.loadTile=function(ae,me){var Be=this.map._requestManager.normalizeTileURL(ae.tileID.canonical.url(this.tiles,this.scheme)),Ke={request:this.map._requestManager.transformRequest(Be,n.ResourceType.Tile),uid:ae.uid,tileID:ae.tileID,zoom:ae.tileID.overscaledZ,tileSize:this.tileSize*ae.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ke.request.collectResourceTiming=this._collectResourceTiming,!ae.actor||ae.state==="expired"?(ae.actor=this.dispatcher.getActor(),ae.request=ae.actor.send("loadTile",Ke,ft.bind(this))):ae.state==="loading"?ae.reloadCallback=me:ae.request=ae.actor.send("reloadTile",Ke,ft.bind(this));function ft(Ct,Ut){if(delete ae.request,ae.aborted)return me(null);if(Ct&&Ct.status!==404)return me(Ct);Ut&&Ut.resourceTiming&&(ae.resourceTiming=Ut.resourceTiming),this.map._refreshExpiredTiles&&Ut&&ae.setExpiryData(Ut),ae.loadVectorData(Ut,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),me(null),ae.reloadCallback&&(this.loadTile(ae,ae.reloadCallback),ae.reloadCallback=null)}},Q.prototype.abortTile=function(ae){ae.request&&(ae.request.cancel(),delete ae.request),ae.actor&&ae.actor.send("abortTile",{uid:ae.uid,type:this.type,source:this.id},void 0)},Q.prototype.unloadTile=function(ae){ae.unloadVectorData(),ae.actor&&ae.actor.send("removeTile",{uid:ae.uid,type:this.type,source:this.id},void 0)},Q.prototype.hasTransition=function(){return!1},Q}(n.Evented),B=function(de){function Q(ye,ae,me,Be){de.call(this),this.id=ye,this.dispatcher=me,this.setEventedParent(Be),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},ae),n.extend(this,n.pick(ae,["url","scheme","tileSize"]))}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.load=function(){var ae=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,function(me,Be){ae._tileJSONRequest=null,ae._loaded=!0,me?ae.fire(new n.ErrorEvent(me)):Be&&(n.extend(ae,Be),Be.bounds&&(ae.tileBounds=new O(Be.bounds,ae.minzoom,ae.maxzoom)),n.postTurnstileEvent(Be.tiles),n.postMapLoadEvent(Be.tiles,ae.map._getMapId(),ae.map._requestManager._skuToken),ae.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),ae.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},Q.prototype.loaded=function(){return this._loaded},Q.prototype.onAdd=function(ae){this.map=ae,this.load()},Q.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Q.prototype.serialize=function(){return n.extend({},this._options)},Q.prototype.hasTile=function(ae){return!this.tileBounds||this.tileBounds.contains(ae.canonical)},Q.prototype.loadTile=function(ae,me){var Be=this,Ke=this.map._requestManager.normalizeTileURL(ae.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);ae.request=n.getImage(this.map._requestManager.transformRequest(Ke,n.ResourceType.Tile),function(ft,Ct){if(delete ae.request,ae.aborted)ae.state="unloaded",me(null);else if(ft)ae.state="errored",me(ft);else if(Ct){Be.map._refreshExpiredTiles&&ae.setExpiryData(Ct),delete Ct.cacheControl,delete Ct.expires;var Ut=Be.map.painter.context,$t=Ut.gl;ae.texture=Be.map.painter.getTileTexture(Ct.width),ae.texture?ae.texture.update(Ct,{useMipmap:!0}):(ae.texture=new n.Texture(Ut,Ct,$t.RGBA,{useMipmap:!0}),ae.texture.bind($t.LINEAR,$t.CLAMP_TO_EDGE,$t.LINEAR_MIPMAP_NEAREST),Ut.extTextureFilterAnisotropic&&$t.texParameterf($t.TEXTURE_2D,Ut.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ut.extTextureFilterAnisotropicMax)),ae.state="loaded",n.cacheEntryPossiblyAdded(Be.dispatcher),me(null)}})},Q.prototype.abortTile=function(ae,me){ae.request&&(ae.request.cancel(),delete ae.request),me()},Q.prototype.unloadTile=function(ae,me){ae.texture&&this.map.painter.saveTileTexture(ae.texture),me()},Q.prototype.hasTransition=function(){return!1},Q}(n.Evented),z=function(de){function Q(ye,ae,me,Be){de.call(this,ye,ae,me,Be),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},ae),this.encoding=ae.encoding||"mapbox"}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Q.prototype.loadTile=function(ae,me){var Be=this.map._requestManager.normalizeTileURL(ae.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);ae.request=n.getImage(this.map._requestManager.transformRequest(Be,n.ResourceType.Tile),Ke.bind(this)),ae.neighboringTiles=this._getNeighboringTiles(ae.tileID);function Ke(Ct,Ut){if(delete ae.request,ae.aborted)ae.state="unloaded",me(null);else if(Ct)ae.state="errored",me(Ct);else if(Ut){this.map._refreshExpiredTiles&&ae.setExpiryData(Ut),delete Ut.cacheControl,delete Ut.expires;var $t=n.window.ImageBitmap&&Ut instanceof n.window.ImageBitmap&&n.offscreenCanvasSupported(),lr=$t?Ut:n.browser.getImageData(Ut,1),ar={uid:ae.uid,coord:ae.tileID,source:this.id,rawImageData:lr,encoding:this.encoding};(!ae.actor||ae.state==="expired")&&(ae.actor=this.dispatcher.getActor(),ae.actor.send("loadDEMTile",ar,ft.bind(this)))}}function ft(Ct,Ut){Ct&&(ae.state="errored",me(Ct)),Ut&&(ae.dem=Ut,ae.needsHillshadePrepare=!0,ae.state="loaded",me(null))}},Q.prototype._getNeighboringTiles=function(ae){var me=ae.canonical,Be=Math.pow(2,me.z),Ke=(me.x-1+Be)%Be,ft=me.x===0?ae.wrap-1:ae.wrap,Ct=(me.x+1+Be)%Be,Ut=me.x+1===Be?ae.wrap+1:ae.wrap,$t={};return $t[new n.OverscaledTileID(ae.overscaledZ,ft,me.z,Ke,me.y).key]={backfilled:!1},$t[new n.OverscaledTileID(ae.overscaledZ,Ut,me.z,Ct,me.y).key]={backfilled:!1},me.y>0&&($t[new n.OverscaledTileID(ae.overscaledZ,ft,me.z,Ke,me.y-1).key]={backfilled:!1},$t[new n.OverscaledTileID(ae.overscaledZ,ae.wrap,me.z,me.x,me.y-1).key]={backfilled:!1},$t[new n.OverscaledTileID(ae.overscaledZ,Ut,me.z,Ct,me.y-1).key]={backfilled:!1}),me.y+1<Be&&($t[new n.OverscaledTileID(ae.overscaledZ,ft,me.z,Ke,me.y+1).key]={backfilled:!1},$t[new n.OverscaledTileID(ae.overscaledZ,ae.wrap,me.z,me.x,me.y+1).key]={backfilled:!1},$t[new n.OverscaledTileID(ae.overscaledZ,Ut,me.z,Ct,me.y+1).key]={backfilled:!1}),$t},Q.prototype.unloadTile=function(ae){ae.demTexture&&this.map.painter.saveTileTexture(ae.demTexture),ae.fbo&&(ae.fbo.destroy(),delete ae.fbo),ae.dem&&delete ae.dem,delete ae.neighboringTiles,ae.state="unloaded",ae.actor&&ae.actor.send("removeDEMTile",{uid:ae.uid,source:this.id})},Q}(B),H=function(de){function Q(ye,ae,me,Be){de.call(this),this.id=ye,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=me.getActor(),this.setEventedParent(Be),this._data=ae.data,this._options=n.extend({},ae),this._collectResourceTiming=ae.collectResourceTiming,this._resourceTiming=[],ae.maxzoom!==void 0&&(this.maxzoom=ae.maxzoom),ae.type&&(this.type=ae.type),ae.attribution&&(this.attribution=ae.attribution),this.promoteId=ae.promoteId;var Ke=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:ae.cluster||!1,geojsonVtOptions:{buffer:(ae.buffer!==void 0?ae.buffer:128)*Ke,tolerance:(ae.tolerance!==void 0?ae.tolerance:.375)*Ke,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:ae.lineMetrics||!1,generateId:ae.generateId||!1},superclusterOptions:{maxZoom:ae.clusterMaxZoom!==void 0?Math.min(ae.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,ae.clusterMinPoints||2),extent:n.EXTENT,radius:(ae.clusterRadius||50)*Ke,log:!1,generateId:ae.generateId||!1},clusterProperties:ae.clusterProperties,filter:ae.filter},ae.workerOptions)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.load=function(){var ae=this;this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(me){if(me){ae.fire(new n.ErrorEvent(me));return}var Be={dataType:"source",sourceDataType:"metadata"};ae._collectResourceTiming&&ae._resourceTiming&&ae._resourceTiming.length>0&&(Be.resourceTiming=ae._resourceTiming,ae._resourceTiming=[]),ae.fire(new n.Event("data",Be))})},Q.prototype.onAdd=function(ae){this.map=ae,this.load()},Q.prototype.setData=function(ae){var me=this;return this._data=ae,this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Be){if(Be){me.fire(new n.ErrorEvent(Be));return}var Ke={dataType:"source",sourceDataType:"content"};me._collectResourceTiming&&me._resourceTiming&&me._resourceTiming.length>0&&(Ke.resourceTiming=me._resourceTiming,me._resourceTiming=[]),me.fire(new n.Event("data",Ke))}),this},Q.prototype.getClusterExpansionZoom=function(ae,me){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:ae,source:this.id},me),this},Q.prototype.getClusterChildren=function(ae,me){return this.actor.send("geojson.getClusterChildren",{clusterId:ae,source:this.id},me),this},Q.prototype.getClusterLeaves=function(ae,me,Be,Ke){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:ae,limit:me,offset:Be},Ke),this},Q.prototype._updateWorkerData=function(ae){var me=this;this._loaded=!1;var Be=n.extend({},this.workerOptions),Ke=this._data;typeof Ke=="string"?(Be.request=this.map._requestManager.transformRequest(n.browser.resolveURL(Ke),n.ResourceType.Source),Be.request.collectResourceTiming=this._collectResourceTiming):Be.data=JSON.stringify(Ke),this.actor.send(this.type+".loadData",Be,function(ft,Ct){me._removed||Ct&&Ct.abandoned||(me._loaded=!0,Ct&&Ct.resourceTiming&&Ct.resourceTiming[me.id]&&(me._resourceTiming=Ct.resourceTiming[me.id].slice(0)),me.actor.send(me.type+".coalesce",{source:Be.source},null),ae(ft))})},Q.prototype.loaded=function(){return this._loaded},Q.prototype.loadTile=function(ae,me){var Be=this,Ke=ae.actor?"reloadTile":"loadTile";ae.actor=this.actor;var ft={type:this.type,uid:ae.uid,tileID:ae.tileID,zoom:ae.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};ae.request=this.actor.send(Ke,ft,function(Ct,Ut){return delete ae.request,ae.unloadVectorData(),ae.aborted?me(null):Ct?me(Ct):(ae.loadVectorData(Ut,Be.map.painter,Ke==="reloadTile"),me(null))})},Q.prototype.abortTile=function(ae){ae.request&&(ae.request.cancel(),delete ae.request),ae.aborted=!0},Q.prototype.unloadTile=function(ae){ae.unloadVectorData(),this.actor.send("removeTile",{uid:ae.uid,type:this.type,source:this.id})},Q.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Q.prototype.serialize=function(){return n.extend({},this._options,{type:this.type,data:this._data})},Q.prototype.hasTransition=function(){return!1},Q}(n.Evented),X=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),$=function(de){function Q(ye,ae,me,Be){de.call(this),this.id=ye,this.dispatcher=me,this.coordinates=ae.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Be),this.options=ae}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.load=function(ae,me){var Be=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),function(Ke,ft){Be._loaded=!0,Ke?Be.fire(new n.ErrorEvent(Ke)):ft&&(Be.image=ft,ae&&(Be.coordinates=ae),me&&me(),Be._finishLoading())})},Q.prototype.loaded=function(){return this._loaded},Q.prototype.updateImage=function(ae){var me=this;return!this.image||!ae.url?this:(this.options.url=ae.url,this.load(ae.coordinates,function(){me.texture=null}),this)},Q.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Q.prototype.onAdd=function(ae){this.map=ae,this.load()},Q.prototype.setCoordinates=function(ae){var me=this;this.coordinates=ae;var Be=ae.map(n.MercatorCoordinate.fromLngLat);this.tileID=ne(Be),this.minzoom=this.maxzoom=this.tileID.z;var Ke=Be.map(function(ft){return me.tileID.getTilePoint(ft)._round()});return this._boundsArray=new n.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ke[0].x,Ke[0].y,0,0),this._boundsArray.emplaceBack(Ke[1].x,Ke[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(Ke[3].x,Ke[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(Ke[2].x,Ke[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this},Q.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var ae=this.map.painter.context,me=ae.gl;this.boundsBuffer||(this.boundsBuffer=ae.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new n.Texture(ae,this.image,me.RGBA),this.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE));for(var Be in this.tiles){var Ke=this.tiles[Be];Ke.state!=="loaded"&&(Ke.state="loaded",Ke.texture=this.texture)}}},Q.prototype.loadTile=function(ae,me){this.tileID&&this.tileID.equals(ae.tileID.canonical)?(this.tiles[String(ae.tileID.wrap)]=ae,ae.buckets={},me(null)):(ae.state="errored",me(null))},Q.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Q.prototype.hasTransition=function(){return!1},Q}(n.Evented);function ne(de){for(var Q=1/0,ye=1/0,ae=-1/0,me=-1/0,Be=0,Ke=de;Be<Ke.length;Be+=1){var ft=Ke[Be];Q=Math.min(Q,ft.x),ye=Math.min(ye,ft.y),ae=Math.max(ae,ft.x),me=Math.max(me,ft.y)}var Ct=ae-Q,Ut=me-ye,$t=Math.max(Ct,Ut),lr=Math.max(0,Math.floor(-Math.log($t)/Math.LN2)),ar=Math.pow(2,lr);return new n.CanonicalTileID(lr,Math.floor((Q+ae)/2*ar),Math.floor((ye+me)/2*ar))}var q=function(de){function Q(ye,ae,me,Be){de.call(this,ye,ae,me,Be),this.roundZoom=!0,this.type="video",this.options=ae}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.load=function(){var ae=this;this._loaded=!1;var me=this.options;this.urls=[];for(var Be=0,Ke=me.urls;Be<Ke.length;Be+=1){var ft=Ke[Be];this.urls.push(this.map._requestManager.transformRequest(ft,n.ResourceType.Source).url)}n.getVideo(this.urls,function(Ct,Ut){ae._loaded=!0,Ct?ae.fire(new n.ErrorEvent(Ct)):Ut&&(ae.video=Ut,ae.video.loop=!0,ae.video.addEventListener("playing",function(){ae.map.triggerRepaint()}),ae.map&&ae.video.play(),ae._finishLoading())})},Q.prototype.pause=function(){this.video&&this.video.pause()},Q.prototype.play=function(){this.video&&this.video.play()},Q.prototype.seek=function(ae){if(this.video){var me=this.video.seekable;ae<me.start(0)||ae>me.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+me.start(0)+" and "+me.end(0)+"-second mark."))):this.video.currentTime=ae}},Q.prototype.getVideo=function(){return this.video},Q.prototype.onAdd=function(ae){this.map||(this.map=ae,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Q.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var ae=this.map.painter.context,me=ae.gl;this.boundsBuffer||(this.boundsBuffer=ae.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE),me.texSubImage2D(me.TEXTURE_2D,0,0,0,me.RGBA,me.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(ae,this.video,me.RGBA),this.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE));for(var Be in this.tiles){var Ke=this.tiles[Be];Ke.state!=="loaded"&&(Ke.state="loaded",Ke.texture=this.texture)}}},Q.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Q.prototype.hasTransition=function(){return this.video&&!this.video.paused},Q}($),ue=function(de){function Q(ye,ae,me,Be){de.call(this,ye,ae,me,Be),ae.coordinates?(!Array.isArray(ae.coordinates)||ae.coordinates.length!==4||ae.coordinates.some(function(Ke){return!Array.isArray(Ke)||Ke.length!==2||Ke.some(function(ft){return typeof ft!="number"})}))&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+ye,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+ye,null,'missing required property "coordinates"'))),ae.animate&&typeof ae.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+ye,null,'optional "animate" property must be a boolean value'))),ae.canvas?typeof ae.canvas!="string"&&!(ae.canvas instanceof n.window.HTMLCanvasElement)&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+ye,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+ye,null,'missing required property "canvas"'))),this.options=ae,this.animate=ae.animate!==void 0?ae.animate:!0}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},Q.prototype.getCanvas=function(){return this.canvas},Q.prototype.onAdd=function(ae){this.map=ae,this.load(),this.canvas&&this.animate&&this.play()},Q.prototype.onRemove=function(){this.pause()},Q.prototype.prepare=function(){var ae=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,ae=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,ae=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var me=this.map.painter.context,Be=me.gl;this.boundsBuffer||(this.boundsBuffer=me.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(ae||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(me,this.canvas,Be.RGBA,{premultiply:!0});for(var Ke in this.tiles){var ft=this.tiles[Ke];ft.state!=="loaded"&&(ft.state="loaded",ft.texture=this.texture)}}},Q.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Q.prototype.hasTransition=function(){return this._playing},Q.prototype._hasInvalidDimensions=function(){for(var ae=0,me=[this.canvas.width,this.canvas.height];ae<me.length;ae+=1){var Be=me[ae];if(isNaN(Be)||Be<=0)return!0}return!1},Q}($),te={vector:N,raster:B,"raster-dem":z,geojson:H,video:q,image:$,canvas:ue},J=function(de,Q,ye,ae){var me=new te[Q.type](de,Q,ye,ae);if(me.id!==de)throw new Error("Expected Source id to be "+de+" instead of "+me.id);return n.bindAll(["load","abort","unload","serialize","prepare"],me),me},ie=function(de){return te[de]},K=function(de,Q){te[de]=Q};function ee(de,Q){var ye=n.identity([]);return n.translate(ye,ye,[1,1,0]),n.scale(ye,ye,[de.width*.5,de.height*.5,1]),n.multiply(ye,ye,de.calculatePosMatrix(Q.toUnwrapped()))}function le(de,Q,ye){if(de)for(var ae=0,me=de;ae<me.length;ae+=1){var Be=me[ae],Ke=Q[Be];if(Ke&&Ke.source===ye&&Ke.type==="fill-extrusion")return!0}else for(var ft in Q){var Ct=Q[ft];if(Ct.source===ye&&Ct.type==="fill-extrusion")return!0}return!1}function j(de,Q,ye,ae,me,Be){var Ke=le(me&&me.layers,Q,de.id),ft=Be.maxPitchScaleFactor(),Ct=de.tilesIn(ae,ft,Ke);Ct.sort(re);for(var Ut=[],$t=0,lr=Ct;$t<lr.length;$t+=1){var ar=lr[$t];Ut.push({wrappedTileID:ar.tileID.wrapped().key,queryResults:ar.tile.queryRenderedFeatures(Q,ye,de._state,ar.queryGeometry,ar.cameraQueryGeometry,ar.scale,me,Be,ft,ee(de.transform,ar.tileID))})}var Dr=ce(Ut);for(var Xr in Dr)Dr[Xr].forEach(function(Yr){var Gr=Yr.feature,Jr=de.getFeatureState(Gr.layer["source-layer"],Gr.id);Gr.source=Gr.layer.source,Gr.layer["source-layer"]&&(Gr.sourceLayer=Gr.layer["source-layer"]),Gr.state=Jr});return Dr}function Z(de,Q,ye,ae,me,Be,Ke){for(var ft={},Ct=Be.queryRenderedSymbols(ae),Ut=[],$t=0,lr=Object.keys(Ct).map(Number);$t<lr.length;$t+=1){var ar=lr[$t];Ut.push(Ke[ar])}Ut.sort(re);for(var Dr=function(){var vn=Yr[Xr],In=vn.featureIndex.lookupSymbolFeatures(Ct[vn.bucketInstanceId],Q,vn.bucketIndex,vn.sourceLayerIndex,me.filter,me.layers,me.availableImages,de);for(var Bn in In){var Yn=ft[Bn]=ft[Bn]||[],Xn=In[Bn];Xn.sort(function(ui,mi){var di=vn.featureSortOrder;if(di){var ki=di.indexOf(ui.featureIndex),qi=di.indexOf(mi.featureIndex);return qi-ki}else return mi.featureIndex-ui.featureIndex});for(var Gn=0,jn=Xn;Gn<jn.length;Gn+=1){var ri=jn[Gn];Yn.push(ri)}}},Xr=0,Yr=Ut;Xr<Yr.length;Xr+=1)Dr();var Gr=function(vn){ft[vn].forEach(function(In){var Bn=In.feature,Yn=de[vn],Xn=ye[Yn.source],Gn=Xn.getFeatureState(Bn.layer["source-layer"],Bn.id);Bn.source=Bn.layer.source,Bn.layer["source-layer"]&&(Bn.sourceLayer=Bn.layer["source-layer"]),Bn.state=Gn})};for(var Jr in ft)Gr(Jr);return ft}function fe(de,Q){for(var ye=de.getRenderableIds().map(function(Ct){return de.getTileByID(Ct)}),ae=[],me={},Be=0;Be<ye.length;Be++){var Ke=ye[Be],ft=Ke.tileID.canonical.key;me[ft]||(me[ft]=!0,Ke.querySourceFeatures(ae,Q))}return ae}function re(de,Q){var ye=de.tileID,ae=Q.tileID;return ye.overscaledZ-ae.overscaledZ||ye.canonical.y-ae.canonical.y||ye.wrap-ae.wrap||ye.canonical.x-ae.canonical.x}function ce(de){for(var Q={},ye={},ae=0,me=de;ae<me.length;ae+=1){var Be=me[ae],Ke=Be.queryResults,ft=Be.wrappedTileID,Ct=ye[ft]=ye[ft]||{};for(var Ut in Ke)for(var $t=Ke[Ut],lr=Ct[Ut]=Ct[Ut]||{},ar=Q[Ut]=Q[Ut]||[],Dr=0,Xr=$t;Dr<Xr.length;Dr+=1){var Yr=Xr[Dr];lr[Yr.featureIndex]||(lr[Yr.featureIndex]=!0,ar.push(Yr))}}return Q}var xe=function(Q,ye){this.max=Q,this.onRemove=ye,this.reset()};xe.prototype.reset=function(){for(var Q in this.data)for(var ye=0,ae=this.data[Q];ye<ae.length;ye+=1){var me=ae[ye];me.timeout&&clearTimeout(me.timeout),this.onRemove(me.value)}return this.data={},this.order=[],this},xe.prototype.add=function(Q,ye,ae){var me=this,Be=Q.wrapped().key;this.data[Be]===void 0&&(this.data[Be]=[]);var Ke={value:ye,timeout:void 0};if(ae!==void 0&&(Ke.timeout=setTimeout(function(){me.remove(Q,Ke)},ae)),this.data[Be].push(Ke),this.order.push(Be),this.order.length>this.max){var ft=this._getAndRemoveByKey(this.order[0]);ft&&this.onRemove(ft)}return this},xe.prototype.has=function(Q){return Q.wrapped().key in this.data},xe.prototype.getAndRemove=function(Q){return this.has(Q)?this._getAndRemoveByKey(Q.wrapped().key):null},xe.prototype._getAndRemoveByKey=function(Q){var ye=this.data[Q].shift();return ye.timeout&&clearTimeout(ye.timeout),this.data[Q].length===0&&delete this.data[Q],this.order.splice(this.order.indexOf(Q),1),ye.value},xe.prototype.getByKey=function(Q){var ye=this.data[Q];return ye?ye[0].value:null},xe.prototype.get=function(Q){if(!this.has(Q))return null;var ye=this.data[Q.wrapped().key][0];return ye.value},xe.prototype.remove=function(Q,ye){if(!this.has(Q))return this;var ae=Q.wrapped().key,me=ye===void 0?0:this.data[ae].indexOf(ye),Be=this.data[ae][me];return this.data[ae].splice(me,1),Be.timeout&&clearTimeout(Be.timeout),this.data[ae].length===0&&delete this.data[ae],this.onRemove(Be.value),this.order.splice(this.order.indexOf(ae),1),this},xe.prototype.setMaxSize=function(Q){for(this.max=Q;this.order.length>this.max;){var ye=this._getAndRemoveByKey(this.order[0]);ye&&this.onRemove(ye)}return this},xe.prototype.filter=function(Q){var ye=[];for(var ae in this.data)for(var me=0,Be=this.data[ae];me<Be.length;me+=1){var Ke=Be[me];Q(Ke.value)||ye.push(Ke)}for(var ft=0,Ct=ye;ft<Ct.length;ft+=1){var Ut=Ct[ft];this.remove(Ut.value.tileID,Ut)}};var Te=function(Q,ye,ae){this.context=Q;var me=Q.gl;this.buffer=me.createBuffer(),this.dynamicDraw=!!ae,this.context.unbindVAO(),Q.bindElementBuffer.set(this.buffer),me.bufferData(me.ELEMENT_ARRAY_BUFFER,ye.arrayBuffer,this.dynamicDraw?me.DYNAMIC_DRAW:me.STATIC_DRAW),this.dynamicDraw||delete ye.arrayBuffer};Te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Te.prototype.updateData=function(Q){var ye=this.context.gl;this.context.unbindVAO(),this.bind(),ye.bufferSubData(ye.ELEMENT_ARRAY_BUFFER,0,Q.arrayBuffer)},Te.prototype.destroy=function(){var Q=this.context.gl;this.buffer&&(Q.deleteBuffer(this.buffer),delete this.buffer)};var we={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},_e=function(Q,ye,ae,me){this.length=ye.length,this.attributes=ae,this.itemSize=ye.bytesPerElement,this.dynamicDraw=me,this.context=Q;var Be=Q.gl;this.buffer=Be.createBuffer(),Q.bindVertexBuffer.set(this.buffer),Be.bufferData(Be.ARRAY_BUFFER,ye.arrayBuffer,this.dynamicDraw?Be.DYNAMIC_DRAW:Be.STATIC_DRAW),this.dynamicDraw||delete ye.arrayBuffer};_e.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},_e.prototype.updateData=function(Q){var ye=this.context.gl;this.bind(),ye.bufferSubData(ye.ARRAY_BUFFER,0,Q.arrayBuffer)},_e.prototype.enableAttributes=function(Q,ye){for(var ae=0;ae<this.attributes.length;ae++){var me=this.attributes[ae],Be=ye.attributes[me.name];Be!==void 0&&Q.enableVertexAttribArray(Be)}},_e.prototype.setVertexAttribPointers=function(Q,ye,ae){for(var me=0;me<this.attributes.length;me++){var Be=this.attributes[me],Ke=ye.attributes[Be.name];Ke!==void 0&&Q.vertexAttribPointer(Ke,Be.components,Q[we[Be.type]],!1,this.itemSize,Be.offset+this.itemSize*(ae||0))}},_e.prototype.destroy=function(){var Q=this.context.gl;this.buffer&&(Q.deleteBuffer(this.buffer),delete this.buffer)};var ke=function(Q){this.gl=Q.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ke.prototype.get=function(){return this.current},ke.prototype.set=function(Q){},ke.prototype.getDefault=function(){return this.default},ke.prototype.setDefault=function(){this.set(this.default)};var Ne=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return n.Color.transparent},Q.prototype.set=function(ae){var me=this.current;ae.r===me.r&&ae.g===me.g&&ae.b===me.b&&ae.a===me.a&&!this.dirty||(this.gl.clearColor(ae.r,ae.g,ae.b,ae.a),this.current=ae,this.dirty=!1)},Q}(ke),Ee=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return 1},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.clearDepth(ae),this.current=ae,this.dirty=!1)},Q}(ke),ze=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return 0},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.clearStencil(ae),this.current=ae,this.dirty=!1)},Q}(ke),Ce=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return[!0,!0,!0,!0]},Q.prototype.set=function(ae){var me=this.current;ae[0]===me[0]&&ae[1]===me[1]&&ae[2]===me[2]&&ae[3]===me[3]&&!this.dirty||(this.gl.colorMask(ae[0],ae[1],ae[2],ae[3]),this.current=ae,this.dirty=!1)},Q}(ke),Oe=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return!0},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.depthMask(ae),this.current=ae,this.dirty=!1)},Q}(ke),Le=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return 255},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.stencilMask(ae),this.current=ae,this.dirty=!1)},Q}(ke),Ge=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Q.prototype.set=function(ae){var me=this.current;ae.func===me.func&&ae.ref===me.ref&&ae.mask===me.mask&&!this.dirty||(this.gl.stencilFunc(ae.func,ae.ref,ae.mask),this.current=ae,this.dirty=!1)},Q}(ke),rt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){var ae=this.gl;return[ae.KEEP,ae.KEEP,ae.KEEP]},Q.prototype.set=function(ae){var me=this.current;ae[0]===me[0]&&ae[1]===me[1]&&ae[2]===me[2]&&!this.dirty||(this.gl.stencilOp(ae[0],ae[1],ae[2]),this.current=ae,this.dirty=!1)},Q}(ke),ot=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return!1},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;ae?me.enable(me.STENCIL_TEST):me.disable(me.STENCIL_TEST),this.current=ae,this.dirty=!1}},Q}(ke),$e=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return[0,1]},Q.prototype.set=function(ae){var me=this.current;ae[0]===me[0]&&ae[1]===me[1]&&!this.dirty||(this.gl.depthRange(ae[0],ae[1]),this.current=ae,this.dirty=!1)},Q}(ke),qe=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return!1},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;ae?me.enable(me.DEPTH_TEST):me.disable(me.DEPTH_TEST),this.current=ae,this.dirty=!1}},Q}(ke),ht=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return this.gl.LESS},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.depthFunc(ae),this.current=ae,this.dirty=!1)},Q}(ke),vt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return!1},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;ae?me.enable(me.BLEND):me.disable(me.BLEND),this.current=ae,this.dirty=!1}},Q}(ke),pt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){var ae=this.gl;return[ae.ONE,ae.ZERO]},Q.prototype.set=function(ae){var me=this.current;ae[0]===me[0]&&ae[1]===me[1]&&!this.dirty||(this.gl.blendFunc(ae[0],ae[1]),this.current=ae,this.dirty=!1)},Q}(ke),wt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return n.Color.transparent},Q.prototype.set=function(ae){var me=this.current;ae.r===me.r&&ae.g===me.g&&ae.b===me.b&&ae.a===me.a&&!this.dirty||(this.gl.blendColor(ae.r,ae.g,ae.b,ae.a),this.current=ae,this.dirty=!1)},Q}(ke),Et=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return this.gl.FUNC_ADD},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.blendEquation(ae),this.current=ae,this.dirty=!1)},Q}(ke),nt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return!1},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;ae?me.enable(me.CULL_FACE):me.disable(me.CULL_FACE),this.current=ae,this.dirty=!1}},Q}(ke),Fe=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return this.gl.BACK},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.cullFace(ae),this.current=ae,this.dirty=!1)},Q}(ke),We=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return this.gl.CCW},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.frontFace(ae),this.current=ae,this.dirty=!1)},Q}(ke),Ze=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.useProgram(ae),this.current=ae,this.dirty=!1)},Q}(ke),Ye=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return this.gl.TEXTURE0},Q.prototype.set=function(ae){ae===this.current&&!this.dirty||(this.gl.activeTexture(ae),this.current=ae,this.dirty=!1)},Q}(ke),Ie=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){var ae=this.gl;return[0,0,ae.drawingBufferWidth,ae.drawingBufferHeight]},Q.prototype.set=function(ae){var me=this.current;ae[0]===me[0]&&ae[1]===me[1]&&ae[2]===me[2]&&ae[3]===me[3]&&!this.dirty||(this.gl.viewport(ae[0],ae[1],ae[2],ae[3]),this.current=ae,this.dirty=!1)},Q}(ke),De=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;me.bindFramebuffer(me.FRAMEBUFFER,ae),this.current=ae,this.dirty=!1}},Q}(ke),je=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;me.bindRenderbuffer(me.RENDERBUFFER,ae),this.current=ae,this.dirty=!1}},Q}(ke),Re=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;me.bindTexture(me.TEXTURE_2D,ae),this.current=ae,this.dirty=!1}},Q}(ke),pe=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;me.bindBuffer(me.ARRAY_BUFFER,ae),this.current=ae,this.dirty=!1}},Q}(ke),be=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q.prototype.set=function(ae){var me=this.gl;me.bindBuffer(me.ELEMENT_ARRAY_BUFFER,ae),this.current=ae,this.dirty=!1},Q}(ke),Ue=function(de){function Q(ye){de.call(this,ye),this.vao=ye.extVertexArrayObject}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q.prototype.set=function(ae){!this.vao||ae===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(ae),this.current=ae,this.dirty=!1)},Q}(ke),et=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return 4},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;me.pixelStorei(me.UNPACK_ALIGNMENT,ae),this.current=ae,this.dirty=!1}},Q}(ke),st=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return!1},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;me.pixelStorei(me.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae),this.current=ae,this.dirty=!1}},Q}(ke),lt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return!1},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){var me=this.gl;me.pixelStorei(me.UNPACK_FLIP_Y_WEBGL,ae),this.current=ae,this.dirty=!1}},Q}(ke),Gt=function(de){function Q(ye,ae){de.call(this,ye),this.context=ye,this.parent=ae}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getDefault=function(){return null},Q}(ke),Zt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.setDirty=function(){this.dirty=!0},Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var me=this.gl;me.framebufferTexture2D(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_2D,ae,0),this.current=ae,this.dirty=!1}},Q}(Gt),Tt=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.set=function(ae){if(!(ae===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var me=this.gl;me.framebufferRenderbuffer(me.FRAMEBUFFER,me.DEPTH_ATTACHMENT,me.RENDERBUFFER,ae),this.current=ae,this.dirty=!1}},Q}(Gt),It=function(Q,ye,ae,me){this.context=Q,this.width=ye,this.height=ae;var Be=Q.gl,Ke=this.framebuffer=Be.createFramebuffer();this.colorAttachment=new Zt(Q,Ke),me&&(this.depthAttachment=new Tt(Q,Ke))};It.prototype.destroy=function(){var Q=this.context.gl,ye=this.colorAttachment.get();if(ye&&Q.deleteTexture(ye),this.depthAttachment){var ae=this.depthAttachment.get();ae&&Q.deleteRenderbuffer(ae)}Q.deleteFramebuffer(this.framebuffer)};var Xt=519,gr=function(Q,ye,ae){this.func=Q,this.mask=ye,this.range=ae};gr.ReadOnly=!1,gr.ReadWrite=!0,gr.disabled=new gr(Xt,gr.ReadOnly,[0,1]);var gt=519,jt=7680,Qt=function(Q,ye,ae,me,Be,Ke){this.test=Q,this.ref=ye,this.mask=ae,this.fail=me,this.depthFail=Be,this.pass=Ke};Qt.disabled=new Qt({func:gt,mask:0},0,0,jt,jt,jt);var mr=0,or=1,mt=771,ut=function(Q,ye,ae){this.blendFunction=Q,this.blendColor=ye,this.mask=ae};ut.Replace=[or,mr],ut.disabled=new ut(ut.Replace,n.Color.transparent,[!1,!1,!1,!1]),ut.unblended=new ut(ut.Replace,n.Color.transparent,[!0,!0,!0,!0]),ut.alphaBlended=new ut([or,mt],n.Color.transparent,[!0,!0,!0,!0]);var bt=1029,St=2305,Pt=function(Q,ye,ae){this.enable=Q,this.mode=ye,this.frontFace=ae};Pt.disabled=new Pt(!1,bt,St),Pt.backCCW=new Pt(!0,bt,St);var Ht=function(Q){this.gl=Q,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ne(this),this.clearDepth=new Ee(this),this.clearStencil=new ze(this),this.colorMask=new Ce(this),this.depthMask=new Oe(this),this.stencilMask=new Le(this),this.stencilFunc=new Ge(this),this.stencilOp=new rt(this),this.stencilTest=new ot(this),this.depthRange=new $e(this),this.depthTest=new qe(this),this.depthFunc=new ht(this),this.blend=new vt(this),this.blendFunc=new pt(this),this.blendColor=new wt(this),this.blendEquation=new Et(this),this.cullFace=new nt(this),this.cullFaceSide=new Fe(this),this.frontFace=new We(this),this.program=new Ze(this),this.activeTexture=new Ye(this),this.viewport=new Ie(this),this.bindFramebuffer=new De(this),this.bindRenderbuffer=new je(this),this.bindTexture=new Re(this),this.bindVertexBuffer=new pe(this),this.bindElementBuffer=new be(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ue(this),this.pixelStoreUnpack=new et(this),this.pixelStoreUnpackPremultiplyAlpha=new st(this),this.pixelStoreUnpackFlipY=new lt(this),this.extTextureFilterAnisotropic=Q.getExtension("EXT_texture_filter_anisotropic")||Q.getExtension("MOZ_EXT_texture_filter_anisotropic")||Q.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Q.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Q.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Q.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Q.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Q.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=Q.getParameter(Q.MAX_TEXTURE_SIZE)};Ht.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ht.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ht.prototype.createIndexBuffer=function(Q,ye){return new Te(this,Q,ye)},Ht.prototype.createVertexBuffer=function(Q,ye,ae){return new _e(this,Q,ye,ae)},Ht.prototype.createRenderbuffer=function(Q,ye,ae){var me=this.gl,Be=me.createRenderbuffer();return this.bindRenderbuffer.set(Be),me.renderbufferStorage(me.RENDERBUFFER,Q,ye,ae),this.bindRenderbuffer.set(null),Be},Ht.prototype.createFramebuffer=function(Q,ye,ae){return new It(this,Q,ye,ae)},Ht.prototype.clear=function(Q){var ye=Q.color,ae=Q.depth,me=this.gl,Be=0;ye&&(Be|=me.COLOR_BUFFER_BIT,this.clearColor.set(ye),this.colorMask.set([!0,!0,!0,!0])),typeof ae<"u"&&(Be|=me.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(ae),this.depthMask.set(!0)),me.clear(Be)},Ht.prototype.setCullFace=function(Q){Q.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Q.mode),this.frontFace.set(Q.frontFace))},Ht.prototype.setDepthMode=function(Q){Q.func===this.gl.ALWAYS&&!Q.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(Q.func),this.depthMask.set(Q.mask),this.depthRange.set(Q.range))},Ht.prototype.setStencilMode=function(Q){Q.test.func===this.gl.ALWAYS&&!Q.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(Q.mask),this.stencilOp.set([Q.fail,Q.depthFail,Q.pass]),this.stencilFunc.set({func:Q.test.func,ref:Q.ref,mask:Q.test.mask}))},Ht.prototype.setColorMode=function(Q){n.deepEqual(Q.blendFunction,ut.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Q.blendFunction),this.blendColor.set(Q.blendColor)),this.colorMask.set(Q.mask)},Ht.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Bt=function(de){function Q(ye,ae,me){var Be=this;de.call(this),this.id=ye,this.dispatcher=me,this.on("data",function(Ke){Ke.dataType==="source"&&Ke.sourceDataType==="metadata"&&(Be._sourceLoaded=!0),Be._sourceLoaded&&!Be._paused&&Ke.dataType==="source"&&Ke.sourceDataType==="content"&&(Be.reload(),Be.transform&&Be.update(Be.transform))}),this.on("error",function(){Be._sourceErrored=!0}),this._source=J(ye,ae,me,this),this._tiles={},this._cache=new xe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new n.SourceFeatureState}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.onAdd=function(ae){this.map=ae,this._maxTileCacheSize=ae?ae._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(ae)},Q.prototype.onRemove=function(ae){this._source&&this._source.onRemove&&this._source.onRemove(ae)},Q.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var ae in this._tiles){var me=this._tiles[ae];if(me.state!=="loaded"&&me.state!=="errored")return!1}return!0},Q.prototype.getSource=function(){return this._source},Q.prototype.pause=function(){this._paused=!0},Q.prototype.resume=function(){if(this._paused){var ae=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,ae&&this.reload(),this.transform&&this.update(this.transform)}},Q.prototype._loadTile=function(ae,me){return this._source.loadTile(ae,me)},Q.prototype._unloadTile=function(ae){if(this._source.unloadTile)return this._source.unloadTile(ae,function(){})},Q.prototype._abortTile=function(ae){if(this._source.abortTile)return this._source.abortTile(ae,function(){})},Q.prototype.serialize=function(){return this._source.serialize()},Q.prototype.prepare=function(ae){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var me in this._tiles){var Be=this._tiles[me];Be.upload(ae),Be.prepare(this.map.style.imageManager)}},Q.prototype.getIds=function(){return n.values(this._tiles).map(function(ae){return ae.tileID}).sort(Nt).map(function(ae){return ae.key})},Q.prototype.getRenderableIds=function(ae){var me=this,Be=[];for(var Ke in this._tiles)this._isIdRenderable(Ke,ae)&&Be.push(this._tiles[Ke]);return ae?Be.sort(function(ft,Ct){var Ut=ft.tileID,$t=Ct.tileID,lr=new n.Point(Ut.canonical.x,Ut.canonical.y)._rotate(me.transform.angle),ar=new n.Point($t.canonical.x,$t.canonical.y)._rotate(me.transform.angle);return Ut.overscaledZ-$t.overscaledZ||ar.y-lr.y||ar.x-lr.x}).map(function(ft){return ft.tileID.key}):Be.map(function(ft){return ft.tileID}).sort(Nt).map(function(ft){return ft.key})},Q.prototype.hasRenderableParent=function(ae){var me=this.findLoadedParent(ae,0);return me?this._isIdRenderable(me.tileID.key):!1},Q.prototype._isIdRenderable=function(ae,me){return this._tiles[ae]&&this._tiles[ae].hasData()&&!this._coveredTiles[ae]&&(me||!this._tiles[ae].holdingForFade())},Q.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var ae in this._tiles)this._tiles[ae].state!=="errored"&&this._reloadTile(ae,"reloading")},Q.prototype._reloadTile=function(ae,me){var Be=this._tiles[ae];Be&&(Be.state!=="loading"&&(Be.state=me),this._loadTile(Be,this._tileLoaded.bind(this,Be,ae,me)))},Q.prototype._tileLoaded=function(ae,me,Be,Ke){if(Ke){ae.state="errored",Ke.status!==404?this._source.fire(new n.ErrorEvent(Ke,{tile:ae})):this.update(this.transform);return}ae.timeAdded=n.browser.now(),Be==="expired"&&(ae.refreshedUponExpiration=!0),this._setTileReloadTimer(me,ae),this.getSource().type==="raster-dem"&&ae.dem&&this._backfillDEM(ae),this._state.initializeTileState(ae,this.map?this.map.painter:null),this._source.fire(new n.Event("data",{dataType:"source",tile:ae,coord:ae.tileID}))},Q.prototype._backfillDEM=function(ae){for(var me=this.getRenderableIds(),Be=0;Be<me.length;Be++){var Ke=me[Be];if(ae.neighboringTiles&&ae.neighboringTiles[Ke]){var ft=this.getTileByID(Ke);Ct(ae,ft),Ct(ft,ae)}}function Ct(Ut,$t){Ut.needsHillshadePrepare=!0;var lr=$t.tileID.canonical.x-Ut.tileID.canonical.x,ar=$t.tileID.canonical.y-Ut.tileID.canonical.y,Dr=Math.pow(2,Ut.tileID.canonical.z),Xr=$t.tileID.key;lr===0&&ar===0||Math.abs(ar)>1||(Math.abs(lr)>1&&(Math.abs(lr+Dr)===1?lr+=Dr:Math.abs(lr-Dr)===1&&(lr-=Dr)),!(!$t.dem||!Ut.dem)&&(Ut.dem.backfillBorder($t.dem,lr,ar),Ut.neighboringTiles&&Ut.neighboringTiles[Xr]&&(Ut.neighboringTiles[Xr].backfilled=!0)))}},Q.prototype.getTile=function(ae){return this.getTileByID(ae.key)},Q.prototype.getTileByID=function(ae){return this._tiles[ae]},Q.prototype._retainLoadedChildren=function(ae,me,Be,Ke){for(var ft in this._tiles){var Ct=this._tiles[ft];if(!(Ke[ft]||!Ct.hasData()||Ct.tileID.overscaledZ<=me||Ct.tileID.overscaledZ>Be)){for(var Ut=Ct.tileID;Ct&&Ct.tileID.overscaledZ>me+1;){var $t=Ct.tileID.scaledTo(Ct.tileID.overscaledZ-1);Ct=this._tiles[$t.key],Ct&&Ct.hasData()&&(Ut=$t)}for(var lr=Ut;lr.overscaledZ>me;)if(lr=lr.scaledTo(lr.overscaledZ-1),ae[lr.key]){Ke[Ut.key]=Ut;break}}}},Q.prototype.findLoadedParent=function(ae,me){if(ae.key in this._loadedParentTiles){var Be=this._loadedParentTiles[ae.key];return Be&&Be.tileID.overscaledZ>=me?Be:null}for(var Ke=ae.overscaledZ-1;Ke>=me;Ke--){var ft=ae.scaledTo(Ke),Ct=this._getLoadedTile(ft);if(Ct)return Ct}},Q.prototype._getLoadedTile=function(ae){var me=this._tiles[ae.key];if(me&&me.hasData())return me;var Be=this._cache.getByKey(ae.wrapped().key);return Be},Q.prototype.updateCacheSize=function(ae){var me=Math.ceil(ae.width/this._source.tileSize)+1,Be=Math.ceil(ae.height/this._source.tileSize)+1,Ke=me*Be,ft=5,Ct=Math.floor(Ke*ft),Ut=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Ct):Ct;this._cache.setMaxSize(Ut)},Q.prototype.handleWrapJump=function(ae){var me=this._prevLng===void 0?ae:this._prevLng,Be=ae-me,Ke=Be/360,ft=Math.round(Ke);if(this._prevLng=ae,ft){var Ct={};for(var Ut in this._tiles){var $t=this._tiles[Ut];$t.tileID=$t.tileID.unwrapTo($t.tileID.wrap+ft),Ct[$t.tileID.key]=$t}this._tiles=Ct;for(var lr in this._timers)clearTimeout(this._timers[lr]),delete this._timers[lr];for(var ar in this._tiles){var Dr=this._tiles[ar];this._setTileReloadTimer(ar,Dr)}}},Q.prototype.update=function(ae){var me=this;if(this.transform=ae,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(ae),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Be;this.used?this._source.tileID?Be=ae.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ui){return new n.OverscaledTileID(ui.canonical.z,ui.wrap,ui.canonical.z,ui.canonical.x,ui.canonical.y)}):(Be=ae.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Be=Be.filter(function(ui){return me._source.hasTile(ui)}))):Be=[];var Ke=ae.coveringZoomLevel(this._source),ft=Math.max(Ke-Q.maxOverzooming,this._source.minzoom),Ct=Math.max(Ke+Q.maxUnderzooming,this._source.minzoom),Ut=this._updateRetainedTiles(Be,Ke);if(Kt(this._source.type)){for(var $t={},lr={},ar=Object.keys(Ut),Dr=0,Xr=ar;Dr<Xr.length;Dr+=1){var Yr=Xr[Dr],Gr=Ut[Yr],Jr=this._tiles[Yr];if(!(!Jr||Jr.fadeEndTime&&Jr.fadeEndTime<=n.browser.now())){var vn=this.findLoadedParent(Gr,ft);vn&&(this._addTile(vn.tileID),$t[vn.tileID.key]=vn.tileID),lr[Yr]=Gr}}this._retainLoadedChildren(lr,Ke,Ct,Ut);for(var In in $t)Ut[In]||(this._coveredTiles[In]=!0,Ut[In]=$t[In])}for(var Bn in Ut)this._tiles[Bn].clearFadeHold();for(var Yn=n.keysDifference(this._tiles,Ut),Xn=0,Gn=Yn;Xn<Gn.length;Xn+=1){var jn=Gn[Xn],ri=this._tiles[jn];ri.hasSymbolBuckets&&!ri.holdingForFade()?ri.setHoldDuration(this.map._fadeDuration):(!ri.hasSymbolBuckets||ri.symbolFadeFinished())&&this._removeTile(jn)}this._updateLoadedParentTileCache()}},Q.prototype.releaseSymbolFadeTiles=function(){for(var ae in this._tiles)this._tiles[ae].holdingForFade()&&this._removeTile(ae)},Q.prototype._updateRetainedTiles=function(ae,me){for(var Be={},Ke={},ft=Math.max(me-Q.maxOverzooming,this._source.minzoom),Ct=Math.max(me+Q.maxUnderzooming,this._source.minzoom),Ut={},$t=0,lr=ae;$t<lr.length;$t+=1){var ar=lr[$t],Dr=this._addTile(ar);Be[ar.key]=ar,!Dr.hasData()&&me<this._source.maxzoom&&(Ut[ar.key]=ar)}this._retainLoadedChildren(Ut,me,Ct,Be);for(var Xr=0,Yr=ae;Xr<Yr.length;Xr+=1){var Gr=Yr[Xr],Jr=this._tiles[Gr.key];if(!Jr.hasData()){if(me+1>this._source.maxzoom){var vn=Gr.children(this._source.maxzoom)[0],In=this.getTile(vn);if(In&&In.hasData()){Be[vn.key]=vn;continue}}else{var Bn=Gr.children(this._source.maxzoom);if(Be[Bn[0].key]&&Be[Bn[1].key]&&Be[Bn[2].key]&&Be[Bn[3].key])continue}for(var Yn=Jr.wasRequested(),Xn=Gr.overscaledZ-1;Xn>=ft;--Xn){var Gn=Gr.scaledTo(Xn);if(Ke[Gn.key]||(Ke[Gn.key]=!0,Jr=this.getTile(Gn),!Jr&&Yn&&(Jr=this._addTile(Gn)),Jr&&(Be[Gn.key]=Gn,Yn=Jr.wasRequested(),Jr.hasData())))break}}}return Be},Q.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var ae in this._tiles){for(var me=[],Be=void 0,Ke=this._tiles[ae].tileID;Ke.overscaledZ>0;){if(Ke.key in this._loadedParentTiles){Be=this._loadedParentTiles[Ke.key];break}me.push(Ke.key);var ft=Ke.scaledTo(Ke.overscaledZ-1);if(Be=this._getLoadedTile(ft),Be)break;Ke=ft}for(var Ct=0,Ut=me;Ct<Ut.length;Ct+=1){var $t=Ut[Ct];this._loadedParentTiles[$t]=Be}}},Q.prototype._addTile=function(ae){var me=this._tiles[ae.key];if(me)return me;me=this._cache.getAndRemove(ae),me&&(this._setTileReloadTimer(ae.key,me),me.tileID=ae,this._state.initializeTileState(me,this.map?this.map.painter:null),this._cacheTimers[ae.key]&&(clearTimeout(this._cacheTimers[ae.key]),delete this._cacheTimers[ae.key],this._setTileReloadTimer(ae.key,me)));var Be=!!me;return Be||(me=new n.Tile(ae,this._source.tileSize*ae.overscaleFactor()),this._loadTile(me,this._tileLoaded.bind(this,me,ae.key,me.state))),me?(me.uses++,this._tiles[ae.key]=me,Be||this._source.fire(new n.Event("dataloading",{tile:me,coord:me.tileID,dataType:"source"})),me):null},Q.prototype._setTileReloadTimer=function(ae,me){var Be=this;ae in this._timers&&(clearTimeout(this._timers[ae]),delete this._timers[ae]);var Ke=me.getExpiryTimeout();Ke&&(this._timers[ae]=setTimeout(function(){Be._reloadTile(ae,"expired"),delete Be._timers[ae]},Ke))},Q.prototype._removeTile=function(ae){var me=this._tiles[ae];me&&(me.uses--,delete this._tiles[ae],this._timers[ae]&&(clearTimeout(this._timers[ae]),delete this._timers[ae]),!(me.uses>0)&&(me.hasData()&&me.state!=="reloading"?this._cache.add(me.tileID,me,me.getExpiryTimeout()):(me.aborted=!0,this._abortTile(me),this._unloadTile(me))))},Q.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var ae in this._tiles)this._removeTile(ae);this._cache.reset()},Q.prototype.tilesIn=function(ae,me,Be){var Ke=this,ft=[],Ct=this.transform;if(!Ct)return ft;for(var Ut=Be?Ct.getCameraQueryGeometry(ae):ae,$t=ae.map(function(Xn){return Ct.pointCoordinate(Xn)}),lr=Ut.map(function(Xn){return Ct.pointCoordinate(Xn)}),ar=this.getIds(),Dr=1/0,Xr=1/0,Yr=-1/0,Gr=-1/0,Jr=0,vn=lr;Jr<vn.length;Jr+=1){var In=vn[Jr];Dr=Math.min(Dr,In.x),Xr=Math.min(Xr,In.y),Yr=Math.max(Yr,In.x),Gr=Math.max(Gr,In.y)}for(var Bn=function(Xn){var Gn=Ke._tiles[ar[Xn]];if(!Gn.holdingForFade()){var jn=Gn.tileID,ri=Math.pow(2,Ct.zoom-Gn.tileID.overscaledZ),ui=me*Gn.queryPadding*n.EXTENT/Gn.tileSize/ri,mi=[jn.getTilePoint(new n.MercatorCoordinate(Dr,Xr)),jn.getTilePoint(new n.MercatorCoordinate(Yr,Gr))];if(mi[0].x-ui<n.EXTENT&&mi[0].y-ui<n.EXTENT&&mi[1].x+ui>=0&&mi[1].y+ui>=0){var di=$t.map(function(qi){return jn.getTilePoint(qi)}),ki=lr.map(function(qi){return jn.getTilePoint(qi)});ft.push({tile:Gn,tileID:jn,queryGeometry:di,cameraQueryGeometry:ki,scale:ri})}}},Yn=0;Yn<ar.length;Yn++)Bn(Yn);return ft},Q.prototype.getVisibleCoordinates=function(ae){for(var me=this,Be=this.getRenderableIds(ae).map(function(Ut){return me._tiles[Ut].tileID}),Ke=0,ft=Be;Ke<ft.length;Ke+=1){var Ct=ft[Ke];Ct.posMatrix=this.transform.calculatePosMatrix(Ct.toUnwrapped())}return Be},Q.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Kt(this._source.type))for(var ae in this._tiles){var me=this._tiles[ae];if(me.fadeEndTime!==void 0&&me.fadeEndTime>=n.browser.now())return!0}return!1},Q.prototype.setFeatureState=function(ae,me,Be){ae=ae||"_geojsonTileLayer",this._state.updateState(ae,me,Be)},Q.prototype.removeFeatureState=function(ae,me,Be){ae=ae||"_geojsonTileLayer",this._state.removeFeatureState(ae,me,Be)},Q.prototype.getFeatureState=function(ae,me){return ae=ae||"_geojsonTileLayer",this._state.getState(ae,me)},Q.prototype.setDependencies=function(ae,me,Be){var Ke=this._tiles[ae];Ke&&Ke.setDependencies(me,Be)},Q.prototype.reloadTilesForDependencies=function(ae,me){for(var Be in this._tiles){var Ke=this._tiles[Be];Ke.hasDependency(ae,me)&&this._reloadTile(Be,"reloading")}this._cache.filter(function(ft){return!ft.hasDependency(ae,me)})},Q}(n.Evented);Bt.maxOverzooming=10,Bt.maxUnderzooming=3;function Nt(de,Q){var ye=Math.abs(de.wrap*2)-+(de.wrap<0),ae=Math.abs(Q.wrap*2)-+(Q.wrap<0);return de.overscaledZ-Q.overscaledZ||ae-ye||Q.canonical.y-de.canonical.y||Q.canonical.x-de.canonical.x}function Kt(de){return de==="raster"||de==="image"||de==="video"}function fr(){return new n.window.Worker(mo.workerUrl)}var cr="mapboxgl_preloaded_worker_pool",dr=function(){this.active={}};dr.prototype.acquire=function(Q){if(!this.workers)for(this.workers=[];this.workers.length<dr.workerCount;)this.workers.push(new fr);return this.active[Q]=!0,this.workers.slice()},dr.prototype.release=function(Q){delete this.active[Q],this.numActive()===0&&(this.workers.forEach(function(ye){ye.terminate()}),this.workers=null)},dr.prototype.isPreloaded=function(){return!!this.active[cr]},dr.prototype.numActive=function(){return Object.keys(this.active).length};var Xe=Math.floor(n.browser.hardwareConcurrency/2);dr.workerCount=Math.max(Math.min(Xe,6),1);var He;function zt(){return He||(He=new dr),He}function Rt(){var de=zt();de.acquire(cr)}function Jt(){var de=He;de&&(de.isPreloaded()&&de.numActive()===1?(de.release(cr),He=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function sr(de,Q){var ye={};for(var ae in de)ae!=="ref"&&(ye[ae]=de[ae]);return n.refProperties.forEach(function(me){me in Q&&(ye[me]=Q[me])}),ye}function ur(de){de=de.slice();for(var Q=Object.create(null),ye=0;ye<de.length;ye++)Q[de[ye].id]=de[ye];for(var ae=0;ae<de.length;ae++)"ref"in de[ae]&&(de[ae]=sr(de[ae],Q[de[ae].ref]));return de}function er(){var de={},Q=n.styleSpec.$version;for(var ye in n.styleSpec.$root){var ae=n.styleSpec.$root[ye];if(ae.required){var me=null;ye==="version"?me=Q:ae.type==="array"?me=[]:me={},me!=null&&(de[ye]=me)}}return de}var Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ir(de,Q,ye){ye.push({command:Ft.addSource,args:[de,Q[de]]})}function hr(de,Q,ye){Q.push({command:Ft.removeSource,args:[de]}),ye[de]=!0}function xr(de,Q,ye,ae){hr(de,ye,ae),ir(de,Q,ye)}function vr(de,Q,ye){var ae;for(ae in de[ye])if(de[ye].hasOwnProperty(ae)&&ae!=="data"&&!n.deepEqual(de[ye][ae],Q[ye][ae]))return!1;for(ae in Q[ye])if(Q[ye].hasOwnProperty(ae)&&ae!=="data"&&!n.deepEqual(de[ye][ae],Q[ye][ae]))return!1;return!0}function Vr(de,Q,ye,ae){de=de||{},Q=Q||{};var me;for(me in de)de.hasOwnProperty(me)&&(Q.hasOwnProperty(me)||hr(me,ye,ae));for(me in Q)Q.hasOwnProperty(me)&&(de.hasOwnProperty(me)?n.deepEqual(de[me],Q[me])||(de[me].type==="geojson"&&Q[me].type==="geojson"&&vr(de,Q,me)?ye.push({command:Ft.setGeoJSONSourceData,args:[me,Q[me].data]}):xr(me,Q,ye,ae)):ir(me,Q,ye))}function _r(de,Q,ye,ae,me,Be){de=de||{},Q=Q||{};var Ke;for(Ke in de)de.hasOwnProperty(Ke)&&(n.deepEqual(de[Ke],Q[Ke])||ye.push({command:Be,args:[ae,Ke,Q[Ke],me]}));for(Ke in Q)!Q.hasOwnProperty(Ke)||de.hasOwnProperty(Ke)||n.deepEqual(de[Ke],Q[Ke])||ye.push({command:Be,args:[ae,Ke,Q[Ke],me]})}function Rr(de){return de.id}function nn(de,Q){return de[Q.id]=Q,de}function en(de,Q,ye){de=de||[],Q=Q||[];var ae=de.map(Rr),me=Q.map(Rr),Be=de.reduce(nn,{}),Ke=Q.reduce(nn,{}),ft=ae.slice(),Ct=Object.create(null),Ut,$t,lr,ar,Dr,Xr,Yr;for(Ut=0,$t=0;Ut<ae.length;Ut++)lr=ae[Ut],Ke.hasOwnProperty(lr)?$t++:(ye.push({command:Ft.removeLayer,args:[lr]}),ft.splice(ft.indexOf(lr,$t),1));for(Ut=0,$t=0;Ut<me.length;Ut++)lr=me[me.length-1-Ut],ft[ft.length-1-Ut]!==lr&&(Be.hasOwnProperty(lr)?(ye.push({command:Ft.removeLayer,args:[lr]}),ft.splice(ft.lastIndexOf(lr,ft.length-$t),1)):$t++,Xr=ft[ft.length-Ut],ye.push({command:Ft.addLayer,args:[Ke[lr],Xr]}),ft.splice(ft.length-Ut,0,lr),Ct[lr]=!0);for(Ut=0;Ut<me.length;Ut++)if(lr=me[Ut],ar=Be[lr],Dr=Ke[lr],!(Ct[lr]||n.deepEqual(ar,Dr))){if(!n.deepEqual(ar.source,Dr.source)||!n.deepEqual(ar["source-layer"],Dr["source-layer"])||!n.deepEqual(ar.type,Dr.type)){ye.push({command:Ft.removeLayer,args:[lr]}),Xr=ft[ft.lastIndexOf(lr)+1],ye.push({command:Ft.addLayer,args:[Dr,Xr]});continue}_r(ar.layout,Dr.layout,ye,lr,null,Ft.setLayoutProperty),_r(ar.paint,Dr.paint,ye,lr,null,Ft.setPaintProperty),n.deepEqual(ar.filter,Dr.filter)||ye.push({command:Ft.setFilter,args:[lr,Dr.filter]}),(!n.deepEqual(ar.minzoom,Dr.minzoom)||!n.deepEqual(ar.maxzoom,Dr.maxzoom))&&ye.push({command:Ft.setLayerZoomRange,args:[lr,Dr.minzoom,Dr.maxzoom]});for(Yr in ar)ar.hasOwnProperty(Yr)&&(Yr==="layout"||Yr==="paint"||Yr==="filter"||Yr==="metadata"||Yr==="minzoom"||Yr==="maxzoom"||(Yr.indexOf("paint.")===0?_r(ar[Yr],Dr[Yr],ye,lr,Yr.slice(6),Ft.setPaintProperty):n.deepEqual(ar[Yr],Dr[Yr])||ye.push({command:Ft.setLayerProperty,args:[lr,Yr,Dr[Yr]]})));for(Yr in Dr)!Dr.hasOwnProperty(Yr)||ar.hasOwnProperty(Yr)||Yr==="layout"||Yr==="paint"||Yr==="filter"||Yr==="metadata"||Yr==="minzoom"||Yr==="maxzoom"||(Yr.indexOf("paint.")===0?_r(ar[Yr],Dr[Yr],ye,lr,Yr.slice(6),Ft.setPaintProperty):n.deepEqual(ar[Yr],Dr[Yr])||ye.push({command:Ft.setLayerProperty,args:[lr,Yr,Dr[Yr]]}))}}function An(de,Q){if(!de)return[{command:Ft.setStyle,args:[Q]}];var ye=[];try{if(!n.deepEqual(de.version,Q.version))return[{command:Ft.setStyle,args:[Q]}];n.deepEqual(de.center,Q.center)||ye.push({command:Ft.setCenter,args:[Q.center]}),n.deepEqual(de.zoom,Q.zoom)||ye.push({command:Ft.setZoom,args:[Q.zoom]}),n.deepEqual(de.bearing,Q.bearing)||ye.push({command:Ft.setBearing,args:[Q.bearing]}),n.deepEqual(de.pitch,Q.pitch)||ye.push({command:Ft.setPitch,args:[Q.pitch]}),n.deepEqual(de.sprite,Q.sprite)||ye.push({command:Ft.setSprite,args:[Q.sprite]}),n.deepEqual(de.glyphs,Q.glyphs)||ye.push({command:Ft.setGlyphs,args:[Q.glyphs]}),n.deepEqual(de.transition,Q.transition)||ye.push({command:Ft.setTransition,args:[Q.transition]}),n.deepEqual(de.light,Q.light)||ye.push({command:Ft.setLight,args:[Q.light]});var ae={},me=[];Vr(de.sources,Q.sources,me,ae);var Be=[];de.layers&&de.layers.forEach(function(Ke){ae[Ke.source]?ye.push({command:Ft.removeLayer,args:[Ke.id]}):Be.push(Ke)}),ye=ye.concat(me),en(Be,Q.layers,ye)}catch(Ke){console.warn("Unable to compute style diff:",Ke),ye=[{command:Ft.setStyle,args:[Q]}]}return ye}var wn=function(Q,ye){this.reset(Q,ye)};wn.prototype.reset=function(Q,ye){this.points=Q||[],this._distances=[0];for(var ae=1;ae<this.points.length;ae++)this._distances[ae]=this._distances[ae-1]+this.points[ae].dist(this.points[ae-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ye||0,this.length*.5),this.paddedLength=this.length-this.padding*2},wn.prototype.lerp=function(Q){if(this.points.length===1)return this.points[0];Q=n.clamp(Q,0,1);for(var ye=1,ae=this._distances[ye],me=Q*this.paddedLength+this.padding;ae<me&&ye<this._distances.length;)ae=this._distances[++ye];var Be=ye-1,Ke=this._distances[Be],ft=ae-Ke,Ct=ft>0?(me-Ke)/ft:0;return this.points[Be].mult(1-Ct).add(this.points[ye].mult(Ct))};var Tr=function(Q,ye,ae){var me=this.boxCells=[],Be=this.circleCells=[];this.xCellCount=Math.ceil(Q/ae),this.yCellCount=Math.ceil(ye/ae);for(var Ke=0;Ke<this.xCellCount*this.yCellCount;Ke++)me.push([]),Be.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Q,this.height=ye,this.xScale=this.xCellCount/Q,this.yScale=this.yCellCount/ye,this.boxUid=0,this.circleUid=0};Tr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Tr.prototype.insert=function(Q,ye,ae,me,Be){this._forEachCell(ye,ae,me,Be,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Q),this.bboxes.push(ye),this.bboxes.push(ae),this.bboxes.push(me),this.bboxes.push(Be)},Tr.prototype.insertCircle=function(Q,ye,ae,me){this._forEachCell(ye-me,ae-me,ye+me,ae+me,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Q),this.circles.push(ye),this.circles.push(ae),this.circles.push(me)},Tr.prototype._insertBoxCell=function(Q,ye,ae,me,Be,Ke){this.boxCells[Be].push(Ke)},Tr.prototype._insertCircleCell=function(Q,ye,ae,me,Be,Ke){this.circleCells[Be].push(Ke)},Tr.prototype._query=function(Q,ye,ae,me,Be,Ke){if(ae<0||Q>this.width||me<0||ye>this.height)return Be?!1:[];var ft=[];if(Q<=0&&ye<=0&&this.width<=ae&&this.height<=me){if(Be)return!0;for(var Ct=0;Ct<this.boxKeys.length;Ct++)ft.push({key:this.boxKeys[Ct],x1:this.bboxes[Ct*4],y1:this.bboxes[Ct*4+1],x2:this.bboxes[Ct*4+2],y2:this.bboxes[Ct*4+3]});for(var Ut=0;Ut<this.circleKeys.length;Ut++){var $t=this.circles[Ut*3],lr=this.circles[Ut*3+1],ar=this.circles[Ut*3+2];ft.push({key:this.circleKeys[Ut],x1:$t-ar,y1:lr-ar,x2:$t+ar,y2:lr+ar})}return Ke?ft.filter(Ke):ft}else{var Dr={hitTest:Be,seenUids:{box:{},circle:{}}};return this._forEachCell(Q,ye,ae,me,this._queryCell,ft,Dr,Ke),Be?ft.length>0:ft}},Tr.prototype._queryCircle=function(Q,ye,ae,me,Be){var Ke=Q-ae,ft=Q+ae,Ct=ye-ae,Ut=ye+ae;if(ft<0||Ke>this.width||Ut<0||Ct>this.height)return me?!1:[];var $t=[],lr={hitTest:me,circle:{x:Q,y:ye,radius:ae},seenUids:{box:{},circle:{}}};return this._forEachCell(Ke,Ct,ft,Ut,this._queryCellCircle,$t,lr,Be),me?$t.length>0:$t},Tr.prototype.query=function(Q,ye,ae,me,Be){return this._query(Q,ye,ae,me,!1,Be)},Tr.prototype.hitTest=function(Q,ye,ae,me,Be){return this._query(Q,ye,ae,me,!0,Be)},Tr.prototype.hitTestCircle=function(Q,ye,ae,me){return this._queryCircle(Q,ye,ae,!0,me)},Tr.prototype._queryCell=function(Q,ye,ae,me,Be,Ke,ft,Ct){var Ut=ft.seenUids,$t=this.boxCells[Be];if($t!==null)for(var lr=this.bboxes,ar=0,Dr=$t;ar<Dr.length;ar+=1){var Xr=Dr[ar];if(!Ut.box[Xr]){Ut.box[Xr]=!0;var Yr=Xr*4;if(Q<=lr[Yr+2]&&ye<=lr[Yr+3]&&ae>=lr[Yr+0]&&me>=lr[Yr+1]&&(!Ct||Ct(this.boxKeys[Xr]))){if(ft.hitTest)return Ke.push(!0),!0;Ke.push({key:this.boxKeys[Xr],x1:lr[Yr],y1:lr[Yr+1],x2:lr[Yr+2],y2:lr[Yr+3]})}}}var Gr=this.circleCells[Be];if(Gr!==null)for(var Jr=this.circles,vn=0,In=Gr;vn<In.length;vn+=1){var Bn=In[vn];if(!Ut.circle[Bn]){Ut.circle[Bn]=!0;var Yn=Bn*3;if(this._circleAndRectCollide(Jr[Yn],Jr[Yn+1],Jr[Yn+2],Q,ye,ae,me)&&(!Ct||Ct(this.circleKeys[Bn]))){if(ft.hitTest)return Ke.push(!0),!0;var Xn=Jr[Yn],Gn=Jr[Yn+1],jn=Jr[Yn+2];Ke.push({key:this.circleKeys[Bn],x1:Xn-jn,y1:Gn-jn,x2:Xn+jn,y2:Gn+jn})}}}},Tr.prototype._queryCellCircle=function(Q,ye,ae,me,Be,Ke,ft,Ct){var Ut=ft.circle,$t=ft.seenUids,lr=this.boxCells[Be];if(lr!==null)for(var ar=this.bboxes,Dr=0,Xr=lr;Dr<Xr.length;Dr+=1){var Yr=Xr[Dr];if(!$t.box[Yr]){$t.box[Yr]=!0;var Gr=Yr*4;if(this._circleAndRectCollide(Ut.x,Ut.y,Ut.radius,ar[Gr+0],ar[Gr+1],ar[Gr+2],ar[Gr+3])&&(!Ct||Ct(this.boxKeys[Yr])))return Ke.push(!0),!0}}var Jr=this.circleCells[Be];if(Jr!==null)for(var vn=this.circles,In=0,Bn=Jr;In<Bn.length;In+=1){var Yn=Bn[In];if(!$t.circle[Yn]){$t.circle[Yn]=!0;var Xn=Yn*3;if(this._circlesCollide(vn[Xn],vn[Xn+1],vn[Xn+2],Ut.x,Ut.y,Ut.radius)&&(!Ct||Ct(this.circleKeys[Yn])))return Ke.push(!0),!0}}},Tr.prototype._forEachCell=function(Q,ye,ae,me,Be,Ke,ft,Ct){for(var Ut=this._convertToXCellCoord(Q),$t=this._convertToYCellCoord(ye),lr=this._convertToXCellCoord(ae),ar=this._convertToYCellCoord(me),Dr=Ut;Dr<=lr;Dr++)for(var Xr=$t;Xr<=ar;Xr++){var Yr=this.xCellCount*Xr+Dr;if(Be.call(this,Q,ye,ae,me,Yr,Ke,ft,Ct))return}},Tr.prototype._convertToXCellCoord=function(Q){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Q*this.xScale)))},Tr.prototype._convertToYCellCoord=function(Q){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Q*this.yScale)))},Tr.prototype._circlesCollide=function(Q,ye,ae,me,Be,Ke){var ft=me-Q,Ct=Be-ye,Ut=ae+Ke;return Ut*Ut>ft*ft+Ct*Ct},Tr.prototype._circleAndRectCollide=function(Q,ye,ae,me,Be,Ke,ft){var Ct=(Ke-me)/2,Ut=Math.abs(Q-(me+Ct));if(Ut>Ct+ae)return!1;var $t=(ft-Be)/2,lr=Math.abs(ye-(Be+$t));if(lr>$t+ae)return!1;if(Ut<=Ct||lr<=$t)return!0;var ar=Ut-Ct,Dr=lr-$t;return ar*ar+Dr*Dr<=ae*ae};function kr(de,Q,ye,ae,me){var Be=n.create();return Q?(n.scale(Be,Be,[1/me,1/me,1]),ye||n.rotateZ(Be,Be,ae.angle)):n.multiply(Be,ae.labelPlaneMatrix,de),Be}function Wr(de,Q,ye,ae,me){if(Q){var Be=n.clone(de);return n.scale(Be,Be,[me,me,1]),ye||n.rotateZ(Be,Be,-ae.angle),Be}else return ae.glCoordMatrix}function zr(de,Q){var ye=[de.x,de.y,0,1];yr(ye,ye,Q);var ae=ye[3];return{point:new n.Point(ye[0]/ae,ye[1]/ae),signedDistanceFromCamera:ae}}function sn(de,Q){return .5+.5*(de/Q)}function un(de,Q){var ye=de[0]/de[3],ae=de[1]/de[3],me=ye>=-Q[0]&&ye<=Q[0]&&ae>=-Q[1]&&ae<=Q[1];return me}function Mn(de,Q,ye,ae,me,Be,Ke,ft){var Ct=ae?de.textSizeData:de.iconSizeData,Ut=n.evaluateSizeForZoom(Ct,ye.transform.zoom),$t=[256/ye.width*2+1,256/ye.height*2+1],lr=ae?de.text.dynamicLayoutVertexArray:de.icon.dynamicLayoutVertexArray;lr.clear();for(var ar=de.lineVertexArray,Dr=ae?de.text.placedSymbolArray:de.icon.placedSymbolArray,Xr=ye.transform.width/ye.transform.height,Yr=!1,Gr=0;Gr<Dr.length;Gr++){var Jr=Dr.get(Gr);if(Jr.hidden||Jr.writingMode===n.WritingMode.vertical&&!Yr){Kn(Jr.numGlyphs,lr);continue}Yr=!1;var vn=[Jr.anchorX,Jr.anchorY,0,1];if(n.transformMat4(vn,vn,Q),!un(vn,$t)){Kn(Jr.numGlyphs,lr);continue}var In=vn[3],Bn=sn(ye.transform.cameraToCenterDistance,In),Yn=n.evaluateSizeForFeature(Ct,Ut,Jr),Xn=Ke?Yn/Bn:Yn*Bn,Gn=new n.Point(Jr.anchorX,Jr.anchorY),jn=zr(Gn,me).point,ri={},ui=ai(Jr,Xn,!1,ft,Q,me,Be,de.glyphOffsetArray,ar,lr,jn,Gn,ri,Xr);Yr=ui.useVertical,(ui.notEnoughRoom||Yr||ui.needsFlipping&&ai(Jr,Xn,!0,ft,Q,me,Be,de.glyphOffsetArray,ar,lr,jn,Gn,ri,Xr).notEnoughRoom)&&Kn(Jr.numGlyphs,lr)}ae?de.text.dynamicLayoutVertexBuffer.updateData(lr):de.icon.dynamicLayoutVertexBuffer.updateData(lr)}function Ln(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t){var lr=ft.glyphStartIndex+ft.numGlyphs,ar=ft.lineStartIndex,Dr=ft.lineStartIndex+ft.lineLength,Xr=Q.getoffsetX(ft.glyphStartIndex),Yr=Q.getoffsetX(lr-1),Gr=bi(de*Xr,ye,ae,me,Be,Ke,ft.segment,ar,Dr,Ct,Ut,$t);if(!Gr)return null;var Jr=bi(de*Yr,ye,ae,me,Be,Ke,ft.segment,ar,Dr,Ct,Ut,$t);return Jr?{first:Gr,last:Jr}:null}function Un(de,Q,ye,ae){if(de===n.WritingMode.horizontal){var me=Math.abs(ye.y-Q.y),Be=Math.abs(ye.x-Q.x)*ae;if(me>Be)return{useVertical:!0}}return(de===n.WritingMode.vertical?Q.y<ye.y:Q.x>ye.x)?{needsFlipping:!0}:null}function ai(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t,lr,ar,Dr){var Xr=Q/24,Yr=de.lineOffsetX*Xr,Gr=de.lineOffsetY*Xr,Jr;if(de.numGlyphs>1){var vn=de.glyphStartIndex+de.numGlyphs,In=de.lineStartIndex,Bn=de.lineStartIndex+de.lineLength,Yn=Ln(Xr,ft,Yr,Gr,ye,$t,lr,de,Ct,Be,ar);if(!Yn)return{notEnoughRoom:!0};var Xn=zr(Yn.first.point,Ke).point,Gn=zr(Yn.last.point,Ke).point;if(ae&&!ye){var jn=Un(de.writingMode,Xn,Gn,Dr);if(jn)return jn}Jr=[Yn.first];for(var ri=de.glyphStartIndex+1;ri<vn-1;ri++)Jr.push(bi(Xr*ft.getoffsetX(ri),Yr,Gr,ye,$t,lr,de.segment,In,Bn,Ct,Be,ar));Jr.push(Yn.last)}else{if(ae&&!ye){var ui=zr(lr,me).point,mi=de.lineStartIndex+de.segment+1,di=new n.Point(Ct.getx(mi),Ct.gety(mi)),ki=zr(di,me),qi=ki.signedDistanceFromCamera>0?ki.point:yi(lr,di,ui,1,me),Yi=Un(de.writingMode,ui,qi,Dr);if(Yi)return Yi}var Mi=bi(Xr*ft.getoffsetX(de.glyphStartIndex),Yr,Gr,ye,$t,lr,de.segment,de.lineStartIndex,de.lineStartIndex+de.lineLength,Ct,Be,ar);if(!Mi)return{notEnoughRoom:!0};Jr=[Mi]}for(var Xi=0,Ui=Jr;Xi<Ui.length;Xi+=1){var sa=Ui[Xi];n.addDynamicAttributes(Ut,sa.point,sa.angle)}return{}}function yi(de,Q,ye,ae,me){var Be=zr(de.add(de.sub(Q)._unit()),me).point,Ke=ye.sub(Be);return ye.add(Ke._mult(ae/Ke.mag()))}function bi(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t,lr){var ar=ae?de-Q:de+Q,Dr=ar>0?1:-1,Xr=0;ae&&(Dr*=-1,Xr=Math.PI),Dr<0&&(Xr+=Math.PI);for(var Yr=Dr>0?ft+Ke:ft+Ke+1,Gr=me,Jr=me,vn=0,In=0,Bn=Math.abs(ar),Yn=[];vn+In<=Bn;){if(Yr+=Dr,Yr<ft||Yr>=Ct)return null;if(Jr=Gr,Yn.push(Gr),Gr=lr[Yr],Gr===void 0){var Xn=new n.Point(Ut.getx(Yr),Ut.gety(Yr)),Gn=zr(Xn,$t);if(Gn.signedDistanceFromCamera>0)Gr=lr[Yr]=Gn.point;else{var jn=Yr-Dr,ri=vn===0?Be:new n.Point(Ut.getx(jn),Ut.gety(jn));Gr=yi(ri,Xn,Jr,Bn-vn+1,$t)}}vn+=In,In=Jr.dist(Gr)}var ui=(Bn-vn)/In,mi=Gr.sub(Jr),di=mi.mult(ui)._add(Jr);di._add(mi._unit()._perp()._mult(ye*Dr));var ki=Xr+Math.atan2(Gr.y-Jr.y,Gr.x-Jr.x);return Yn.push(di),{point:di,angle:ki,path:Yn}}var Hn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Kn(de,Q){for(var ye=0;ye<de;ye++){var ae=Q.length;Q.resize(ae+4),Q.float32.set(Hn,ae*3)}}function yr(de,Q,ye){var ae=Q[0],me=Q[1];return de[0]=ye[0]*ae+ye[4]*me+ye[12],de[1]=ye[1]*ae+ye[5]*me+ye[13],de[3]=ye[3]*ae+ye[7]*me+ye[15],de}var qr=100,Kr=function(Q,ye,ae){ye===void 0&&(ye=new Tr(Q.width+2*qr,Q.height+2*qr,25)),ae===void 0&&(ae=new Tr(Q.width+2*qr,Q.height+2*qr,25)),this.transform=Q,this.grid=ye,this.ignoredGrid=ae,this.pitchfactor=Math.cos(Q._pitch)*Q.cameraToCenterDistance,this.screenRightBoundary=Q.width+qr,this.screenBottomBoundary=Q.height+qr,this.gridRightBoundary=Q.width+2*qr,this.gridBottomBoundary=Q.height+2*qr};Kr.prototype.placeCollisionBox=function(Q,ye,ae,me,Be){var Ke=this.projectAndGetPerspectiveRatio(me,Q.anchorPointX,Q.anchorPointY),ft=ae*Ke.perspectiveRatio,Ct=Q.x1*ft+Ke.point.x,Ut=Q.y1*ft+Ke.point.y,$t=Q.x2*ft+Ke.point.x,lr=Q.y2*ft+Ke.point.y;return!this.isInsideGrid(Ct,Ut,$t,lr)||!ye&&this.grid.hitTest(Ct,Ut,$t,lr,Be)?{box:[],offscreen:!1}:{box:[Ct,Ut,$t,lr],offscreen:this.isOffscreen(Ct,Ut,$t,lr)}},Kr.prototype.placeCollisionCircles=function(Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t,lr,ar,Dr){var Xr=[],Yr=new n.Point(ye.anchorX,ye.anchorY),Gr=zr(Yr,Ke),Jr=sn(this.transform.cameraToCenterDistance,Gr.signedDistanceFromCamera),vn=$t?Be/Jr:Be*Jr,In=vn/n.ONE_EM,Bn=zr(Yr,ft).point,Yn={},Xn=ye.lineOffsetX*In,Gn=ye.lineOffsetY*In,jn=Ln(In,me,Xn,Gn,!1,Bn,Yr,ye,ae,ft,Yn),ri=!1,ui=!1,mi=!0;if(jn){for(var di=ar*.5*Jr+Dr,ki=new n.Point(-qr,-qr),qi=new n.Point(this.screenRightBoundary,this.screenBottomBoundary),Yi=new wn,Mi=jn.first,Xi=jn.last,Ui=[],sa=Mi.path.length-1;sa>=1;sa--)Ui.push(Mi.path[sa]);for(var ra=1;ra<Xi.path.length;ra++)Ui.push(Xi.path[ra]);var Pa=di*2.5;if(Ct){var Qi=Ui.map(function(Ll){return zr(Ll,Ct)});Qi.some(function(Ll){return Ll.signedDistanceFromCamera<=0})?Ui=[]:Ui=Qi.map(function(Ll){return Ll.point})}var ba=[];if(Ui.length>0){for(var Vi=Ui[0].clone(),ea=Ui[0].clone(),Qa=1;Qa<Ui.length;Qa++)Vi.x=Math.min(Vi.x,Ui[Qa].x),Vi.y=Math.min(Vi.y,Ui[Qa].y),ea.x=Math.max(ea.x,Ui[Qa].x),ea.y=Math.max(ea.y,Ui[Qa].y);Vi.x>=ki.x&&ea.x<=qi.x&&Vi.y>=ki.y&&ea.y<=qi.y?ba=[Ui]:ea.x<ki.x||Vi.x>qi.x||ea.y<ki.y||Vi.y>qi.y?ba=[]:ba=n.clipLine([Ui],ki.x,ki.y,qi.x,qi.y)}for(var Eo=0,ol=ba;Eo<ol.length;Eo+=1){var sl=ol[Eo];Yi.reset(sl,di*.25);var Sl=0;Yi.length<=.5*di?Sl=1:Sl=Math.ceil(Yi.paddedLength/Pa)+1;for(var tu=0;tu<Sl;tu++){var Yf=tu/Math.max(Sl-1,1),ru=Yi.lerp(Yf),ds=ru.x+qr,nu=ru.y+qr;Xr.push(ds,nu,di,0);var Ps=ds-di,ps=nu-di,Cl=ds+di,Fu=nu+di;if(mi=mi&&this.isOffscreen(Ps,ps,Cl,Fu),ui=ui||this.isInsideGrid(Ps,ps,Cl,Fu),!Q&&this.grid.hitTestCircle(ds,nu,di,lr)&&(ri=!0,!Ut))return{circles:[],offscreen:!1,collisionDetected:ri}}}}return{circles:!Ut&&ri||!ui?[]:Xr,offscreen:mi,collisionDetected:ri}},Kr.prototype.queryRenderedSymbols=function(Q){if(Q.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ye=[],ae=1/0,me=1/0,Be=-1/0,Ke=-1/0,ft=0,Ct=Q;ft<Ct.length;ft+=1){var Ut=Ct[ft],$t=new n.Point(Ut.x+qr,Ut.y+qr);ae=Math.min(ae,$t.x),me=Math.min(me,$t.y),Be=Math.max(Be,$t.x),Ke=Math.max(Ke,$t.y),ye.push($t)}for(var lr=this.grid.query(ae,me,Be,Ke).concat(this.ignoredGrid.query(ae,me,Be,Ke)),ar={},Dr={},Xr=0,Yr=lr;Xr<Yr.length;Xr+=1){var Gr=Yr[Xr],Jr=Gr.key;if(ar[Jr.bucketInstanceId]===void 0&&(ar[Jr.bucketInstanceId]={}),!ar[Jr.bucketInstanceId][Jr.featureIndex]){var vn=[new n.Point(Gr.x1,Gr.y1),new n.Point(Gr.x2,Gr.y1),new n.Point(Gr.x2,Gr.y2),new n.Point(Gr.x1,Gr.y2)];n.polygonIntersectsPolygon(ye,vn)&&(ar[Jr.bucketInstanceId][Jr.featureIndex]=!0,Dr[Jr.bucketInstanceId]===void 0&&(Dr[Jr.bucketInstanceId]=[]),Dr[Jr.bucketInstanceId].push(Jr.featureIndex))}}return Dr},Kr.prototype.insertCollisionBox=function(Q,ye,ae,me,Be){var Ke=ye?this.ignoredGrid:this.grid,ft={bucketInstanceId:ae,featureIndex:me,collisionGroupID:Be};Ke.insert(ft,Q[0],Q[1],Q[2],Q[3])},Kr.prototype.insertCollisionCircles=function(Q,ye,ae,me,Be){for(var Ke=ye?this.ignoredGrid:this.grid,ft={bucketInstanceId:ae,featureIndex:me,collisionGroupID:Be},Ct=0;Ct<Q.length;Ct+=4)Ke.insertCircle(ft,Q[Ct],Q[Ct+1],Q[Ct+2])},Kr.prototype.projectAndGetPerspectiveRatio=function(Q,ye,ae){var me=[ye,ae,0,1];yr(me,me,Q);var Be=new n.Point((me[0]/me[3]+1)/2*this.transform.width+qr,(-me[1]/me[3]+1)/2*this.transform.height+qr);return{point:Be,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/me[3])}},Kr.prototype.isOffscreen=function(Q,ye,ae,me){return ae<qr||Q>=this.screenRightBoundary||me<qr||ye>this.screenBottomBoundary},Kr.prototype.isInsideGrid=function(Q,ye,ae,me){return ae>=0&&Q<this.gridRightBoundary&&me>=0&&ye<this.gridBottomBoundary},Kr.prototype.getViewportMatrix=function(){var Q=n.identity([]);return n.translate(Q,Q,[-qr,-qr,0]),Q};function hn(de,Q,ye){return Q*(n.EXTENT/(de.tileSize*Math.pow(2,ye-de.tileID.overscaledZ)))}var zn=function(Q,ye,ae,me){Q?this.opacity=Math.max(0,Math.min(1,Q.opacity+(Q.placed?ye:-ye))):this.opacity=me&&ae?1:0,this.placed=ae};zn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var xn=function(Q,ye,ae,me,Be){this.text=new zn(Q?Q.text:null,ye,ae,Be),this.icon=new zn(Q?Q.icon:null,ye,me,Be)};xn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Tn=function(Q,ye,ae){this.text=Q,this.icon=ye,this.skipFade=ae},On=function(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]},Jn=function(Q,ye,ae,me,Be){this.bucketInstanceId=Q,this.featureIndex=ye,this.sourceLayerIndex=ae,this.bucketIndex=me,this.tileID=Be},hi=function(Q){this.crossSourceCollisions=Q,this.maxGroupID=0,this.collisionGroups={}};hi.prototype.get=function(Q){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Q]){var ye=++this.maxGroupID;this.collisionGroups[Q]={ID:ye,predicate:function(ae){return ae.collisionGroupID===ye}}}return this.collisionGroups[Q]};function Ri(de,Q,ye,ae,me){var Be=n.getAnchorAlignment(de),Ke=Be.horizontalAlign,ft=Be.verticalAlign,Ct=-(Ke-.5)*Q,Ut=-(ft-.5)*ye,$t=n.evaluateVariableOffset(de,ae);return new n.Point(Ct+$t[0]*me,Ut+$t[1]*me)}function Er(de,Q,ye,ae,me,Be){var Ke=de.x1,ft=de.x2,Ct=de.y1,Ut=de.y2,$t=de.anchorPointX,lr=de.anchorPointY,ar=new n.Point(Q,ye);return ae&&ar._rotate(me?Be:-Be),{x1:Ke+ar.x,y1:Ct+ar.y,x2:ft+ar.x,y2:Ut+ar.y,anchorPointX:$t,anchorPointY:lr}}var Or=function(Q,ye,ae,me){this.transform=Q.clone(),this.collisionIndex=new Kr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ye,this.retainedQueryData={},this.collisionGroups=new hi(ae),this.collisionCircleArrays={},this.prevPlacement=me,me&&(me.prevPlacement=void 0),this.placedOrientations={}};Or.prototype.getBucketParts=function(Q,ye,ae,me){var Be=ae.getBucket(ye),Ke=ae.latestFeatureIndex;if(!(!Be||!Ke||ye.id!==Be.layerIds[0])){var ft=ae.collisionBoxArray,Ct=Be.layers[0].layout,Ut=Math.pow(2,this.transform.zoom-ae.tileID.overscaledZ),$t=ae.tileSize/n.EXTENT,lr=this.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),ar=Ct.get("text-pitch-alignment")==="map",Dr=Ct.get("text-rotation-alignment")==="map",Xr=hn(ae,1,this.transform.zoom),Yr=kr(lr,ar,Dr,this.transform,Xr),Gr=null;if(ar){var Jr=Wr(lr,ar,Dr,this.transform,Xr);Gr=n.multiply([],this.transform.labelPlaneMatrix,Jr)}this.retainedQueryData[Be.bucketInstanceId]=new Jn(Be.bucketInstanceId,Ke,Be.sourceLayerIndex,Be.index,ae.tileID);var vn={bucket:Be,layout:Ct,posMatrix:lr,textLabelPlaneMatrix:Yr,labelToScreenMatrix:Gr,scale:Ut,textPixelRatio:$t,holdingForFade:ae.holdingForFade(),collisionBoxArray:ft,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(Be.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Be.sourceID)};if(me)for(var In=0,Bn=Be.sortKeyRanges;In<Bn.length;In+=1){var Yn=Bn[In],Xn=Yn.sortKey,Gn=Yn.symbolInstanceStart,jn=Yn.symbolInstanceEnd;Q.push({sortKey:Xn,symbolInstanceStart:Gn,symbolInstanceEnd:jn,parameters:vn})}else Q.push({symbolInstanceStart:0,symbolInstanceEnd:Be.symbolInstances.length,parameters:vn})}},Or.prototype.attemptAnchorPlacement=function(Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t,lr,ar,Dr,Xr,Yr){var Gr=[ar.textOffset0,ar.textOffset1],Jr=Ri(Q,ae,me,Gr,Be),vn=this.collisionIndex.placeCollisionBox(Er(ye,Jr.x,Jr.y,Ke,ft,this.transform.angle),lr,Ct,Ut,$t.predicate);if(Yr){var In=this.collisionIndex.placeCollisionBox(Er(Yr,Jr.x,Jr.y,Ke,ft,this.transform.angle),lr,Ct,Ut,$t.predicate);if(In.box.length===0)return}if(vn.box.length>0){var Bn;return this.prevPlacement&&this.prevPlacement.variableOffsets[ar.crossTileID]&&this.prevPlacement.placements[ar.crossTileID]&&this.prevPlacement.placements[ar.crossTileID].text&&(Bn=this.prevPlacement.variableOffsets[ar.crossTileID].anchor),this.variableOffsets[ar.crossTileID]={textOffset:Gr,width:ae,height:me,anchor:Q,textBoxScale:Be,prevAnchor:Bn},this.markUsedJustification(Dr,Q,ar,Xr),Dr.allowVerticalPlacement&&(this.markUsedOrientation(Dr,Xr,ar),this.placedOrientations[ar.crossTileID]=Xr),{shift:Jr,placedGlyphBoxes:vn}}},Or.prototype.placeLayerBucketPart=function(Q,ye,ae){var me=this,Be=Q.parameters,Ke=Be.bucket,ft=Be.layout,Ct=Be.posMatrix,Ut=Be.textLabelPlaneMatrix,$t=Be.labelToScreenMatrix,lr=Be.textPixelRatio,ar=Be.holdingForFade,Dr=Be.collisionBoxArray,Xr=Be.partiallyEvaluatedTextSize,Yr=Be.collisionGroup,Gr=ft.get("text-optional"),Jr=ft.get("icon-optional"),vn=ft.get("text-allow-overlap"),In=ft.get("icon-allow-overlap"),Bn=ft.get("text-rotation-alignment")==="map",Yn=ft.get("text-pitch-alignment")==="map",Xn=ft.get("icon-text-fit")!=="none",Gn=ft.get("symbol-z-order")==="viewport-y",jn=vn&&(In||!Ke.hasIconData()||Jr),ri=In&&(vn||!Ke.hasTextData()||Gr);!Ke.collisionArrays&&Dr&&Ke.deserializeCollisionBoxes(Dr);var ui=function(Mi,Xi){if(!ye[Mi.crossTileID]){if(ar){me.placements[Mi.crossTileID]=new Tn(!1,!1,!1);return}var Ui=!1,sa=!1,ra=!0,Pa=null,Qi={box:null,offscreen:null},ba={box:null,offscreen:null},Vi=null,ea=null,Qa=null,Eo=0,ol=0,sl=0;Xi.textFeatureIndex?Eo=Xi.textFeatureIndex:Mi.useRuntimeCollisionCircles&&(Eo=Mi.featureIndex),Xi.verticalTextFeatureIndex&&(ol=Xi.verticalTextFeatureIndex);var Sl=Xi.textBox;if(Sl){var tu=function(ro){var Rs=n.WritingMode.horizontal;if(Ke.allowVerticalPlacement&&!ro&&me.prevPlacement){var Is=me.prevPlacement.placedOrientations[Mi.crossTileID];Is&&(me.placedOrientations[Mi.crossTileID]=Is,Rs=Is,me.markUsedOrientation(Ke,Rs,Mi))}return Rs},Yf=function(ro,Rs){if(Ke.allowVerticalPlacement&&Mi.numVerticalGlyphVertices>0&&Xi.verticalTextBox)for(var Is=0,hv=Ke.writingModes;Is<hv.length;Is+=1){var dd=hv[Is];if(dd===n.WritingMode.vertical?(Qi=Rs(),ba=Qi):Qi=ro(),Qi&&Qi.box&&Qi.box.length)break}else Qi=ro()};if(ft.get("text-variable-anchor")){var Ps=ft.get("text-variable-anchor");if(me.prevPlacement&&me.prevPlacement.variableOffsets[Mi.crossTileID]){var ps=me.prevPlacement.variableOffsets[Mi.crossTileID];Ps.indexOf(ps.anchor)>0&&(Ps=Ps.filter(function(ro){return ro!==ps.anchor}),Ps.unshift(ps.anchor))}var Cl=function(ro,Rs,Is){for(var hv=ro.x2-ro.x1,dd=ro.y2-ro.y1,_g=Mi.textBoxScale,Pg=Xn&&!In?Rs:null,Fh={box:[],offscreen:!1},Rg=vn?Ps.length*2:Ps.length,vv=0;vv<Rg;++vv){var Ig=Ps[vv%Ps.length],Dg=vv>=Ps.length,pd=me.attemptAnchorPlacement(Ig,ro,hv,dd,_g,Bn,Yn,lr,Ct,Yr,Dg,Mi,Ke,Is,Pg);if(pd&&(Fh=pd.placedGlyphBoxes,Fh&&Fh.box&&Fh.box.length)){Ui=!0,Pa=pd.shift;break}}return Fh},Fu=function(){return Cl(Sl,Xi.iconBox,n.WritingMode.horizontal)},Ll=function(){var ro=Xi.verticalTextBox,Rs=Qi&&Qi.box&&Qi.box.length;return Ke.allowVerticalPlacement&&!Rs&&Mi.numVerticalGlyphVertices>0&&ro?Cl(ro,Xi.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}};Yf(Fu,Ll),Qi&&(Ui=Qi.box,ra=Qi.offscreen);var sv=tu(Qi&&Qi.box);if(!Ui&&me.prevPlacement){var zc=me.prevPlacement.variableOffsets[Mi.crossTileID];zc&&(me.variableOffsets[Mi.crossTileID]=zc,me.markUsedJustification(Ke,zc.anchor,Mi,sv))}}else{var ru=function(ro,Rs){var Is=me.collisionIndex.placeCollisionBox(ro,vn,lr,Ct,Yr.predicate);return Is&&Is.box&&Is.box.length&&(me.markUsedOrientation(Ke,Rs,Mi),me.placedOrientations[Mi.crossTileID]=Rs),Is},ds=function(){return ru(Sl,n.WritingMode.horizontal)},nu=function(){var ro=Xi.verticalTextBox;return Ke.allowVerticalPlacement&&Mi.numVerticalGlyphVertices>0&&ro?ru(ro,n.WritingMode.vertical):{box:null,offscreen:null}};Yf(ds,nu),tu(Qi&&Qi.box&&Qi.box.length)}}if(Vi=Qi,Ui=Vi&&Vi.box&&Vi.box.length>0,ra=Vi&&Vi.offscreen,Mi.useRuntimeCollisionCircles){var Io=Ke.text.placedSymbolArray.get(Mi.centerJustifiedTextSymbolIndex),lv=n.evaluateSizeForFeature(Ke.textSizeData,Xr,Io),Oh=ft.get("text-padding"),Qo=Mi.collisionCircleDiameter;ea=me.collisionIndex.placeCollisionCircles(vn,Io,Ke.lineVertexArray,Ke.glyphOffsetArray,lv,Ct,Ut,$t,ae,Yn,Yr.predicate,Qo,Oh),Ui=vn||ea.circles.length>0&&!ea.collisionDetected,ra=ra&&ea.offscreen}if(Xi.iconFeatureIndex&&(sl=Xi.iconFeatureIndex),Xi.iconBox){var Oc=function(ro){var Rs=Xn&&Pa?Er(ro,Pa.x,Pa.y,Bn,Yn,me.transform.angle):ro;return me.collisionIndex.placeCollisionBox(Rs,In,lr,Ct,Yr.predicate)};ba&&ba.box&&ba.box.length&&Xi.verticalIconBox?(Qa=Oc(Xi.verticalIconBox),sa=Qa.box.length>0):(Qa=Oc(Xi.iconBox),sa=Qa.box.length>0),ra=ra&&Qa.offscreen}var uv=Gr||Mi.numHorizontalGlyphVertices===0&&Mi.numVerticalGlyphVertices===0,fv=Jr||Mi.numIconVertices===0;if(!uv&&!fv?sa=Ui=sa&&Ui:fv?uv||(sa=sa&&Ui):Ui=sa&&Ui,Ui&&Vi&&Vi.box&&(ba&&ba.box&&ol?me.collisionIndex.insertCollisionBox(Vi.box,ft.get("text-ignore-placement"),Ke.bucketInstanceId,ol,Yr.ID):me.collisionIndex.insertCollisionBox(Vi.box,ft.get("text-ignore-placement"),Ke.bucketInstanceId,Eo,Yr.ID)),sa&&Qa&&me.collisionIndex.insertCollisionBox(Qa.box,ft.get("icon-ignore-placement"),Ke.bucketInstanceId,sl,Yr.ID),ea&&(Ui&&me.collisionIndex.insertCollisionCircles(ea.circles,ft.get("text-ignore-placement"),Ke.bucketInstanceId,Eo,Yr.ID),ae)){var cv=Ke.bucketInstanceId,Fc=me.collisionCircleArrays[cv];Fc===void 0&&(Fc=me.collisionCircleArrays[cv]=new On);for(var Bc=0;Bc<ea.circles.length;Bc+=4)Fc.circles.push(ea.circles[Bc+0]),Fc.circles.push(ea.circles[Bc+1]),Fc.circles.push(ea.circles[Bc+2]),Fc.circles.push(ea.collisionDetected?1:0)}me.placements[Mi.crossTileID]=new Tn(Ui||jn,sa||ri,ra||Ke.justReloaded),ye[Mi.crossTileID]=!0}};if(Gn)for(var mi=Ke.getSortedSymbolIndexes(this.transform.angle),di=mi.length-1;di>=0;--di){var ki=mi[di];ui(Ke.symbolInstances.get(ki),Ke.collisionArrays[ki])}else for(var qi=Q.symbolInstanceStart;qi<Q.symbolInstanceEnd;qi++)ui(Ke.symbolInstances.get(qi),Ke.collisionArrays[qi]);if(ae&&Ke.bucketInstanceId in this.collisionCircleArrays){var Yi=this.collisionCircleArrays[Ke.bucketInstanceId];n.invert(Yi.invProjMatrix,Ct),Yi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ke.justReloaded=!1},Or.prototype.markUsedJustification=function(Q,ye,ae,me){var Be={left:ae.leftJustifiedTextSymbolIndex,center:ae.centerJustifiedTextSymbolIndex,right:ae.rightJustifiedTextSymbolIndex},Ke;me===n.WritingMode.vertical?Ke=ae.verticalPlacedTextSymbolIndex:Ke=Be[n.getAnchorJustification(ye)];for(var ft=[ae.leftJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.rightJustifiedTextSymbolIndex,ae.verticalPlacedTextSymbolIndex],Ct=0,Ut=ft;Ct<Ut.length;Ct+=1){var $t=Ut[Ct];$t>=0&&(Ke>=0&&$t!==Ke?Q.text.placedSymbolArray.get($t).crossTileID=0:Q.text.placedSymbolArray.get($t).crossTileID=ae.crossTileID)}},Or.prototype.markUsedOrientation=function(Q,ye,ae){for(var me=ye===n.WritingMode.horizontal||ye===n.WritingMode.horizontalOnly?ye:0,Be=ye===n.WritingMode.vertical?ye:0,Ke=[ae.leftJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.rightJustifiedTextSymbolIndex],ft=0,Ct=Ke;ft<Ct.length;ft+=1){var Ut=Ct[ft];Q.text.placedSymbolArray.get(Ut).placedOrientation=me}ae.verticalPlacedTextSymbolIndex&&(Q.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).placedOrientation=Be)},Or.prototype.commit=function(Q){this.commitTime=Q,this.zoomAtLastRecencyCheck=this.transform.zoom;var ye=this.prevPlacement,ae=!1;this.prevZoomAdjustment=ye?ye.zoomAdjustment(this.transform.zoom):0;var me=ye?ye.symbolFadeChange(Q):1,Be=ye?ye.opacities:{},Ke=ye?ye.variableOffsets:{},ft=ye?ye.placedOrientations:{};for(var Ct in this.placements){var Ut=this.placements[Ct],$t=Be[Ct];$t?(this.opacities[Ct]=new xn($t,me,Ut.text,Ut.icon),ae=ae||Ut.text!==$t.text.placed||Ut.icon!==$t.icon.placed):(this.opacities[Ct]=new xn(null,me,Ut.text,Ut.icon,Ut.skipFade),ae=ae||Ut.text||Ut.icon)}for(var lr in Be){var ar=Be[lr];if(!this.opacities[lr]){var Dr=new xn(ar,me,!1,!1);Dr.isHidden()||(this.opacities[lr]=Dr,ae=ae||ar.text.placed||ar.icon.placed)}}for(var Xr in Ke)!this.variableOffsets[Xr]&&this.opacities[Xr]&&!this.opacities[Xr].isHidden()&&(this.variableOffsets[Xr]=Ke[Xr]);for(var Yr in ft)!this.placedOrientations[Yr]&&this.opacities[Yr]&&!this.opacities[Yr].isHidden()&&(this.placedOrientations[Yr]=ft[Yr]);ae?this.lastPlacementChangeTime=Q:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ye?ye.lastPlacementChangeTime:Q)},Or.prototype.updateLayerOpacities=function(Q,ye){for(var ae={},me=0,Be=ye;me<Be.length;me+=1){var Ke=Be[me],ft=Ke.getBucket(Q);ft&&Ke.latestFeatureIndex&&Q.id===ft.layerIds[0]&&this.updateBucketOpacities(ft,ae,Ke.collisionBoxArray)}},Or.prototype.updateBucketOpacities=function(Q,ye,ae){var me=this;Q.hasTextData()&&Q.text.opacityVertexArray.clear(),Q.hasIconData()&&Q.icon.opacityVertexArray.clear(),Q.hasIconCollisionBoxData()&&Q.iconCollisionBox.collisionVertexArray.clear(),Q.hasTextCollisionBoxData()&&Q.textCollisionBox.collisionVertexArray.clear();var Be=Q.layers[0].layout,Ke=new xn(null,0,!1,!1,!0),ft=Be.get("text-allow-overlap"),Ct=Be.get("icon-allow-overlap"),Ut=Be.get("text-variable-anchor"),$t=Be.get("text-rotation-alignment")==="map",lr=Be.get("text-pitch-alignment")==="map",ar=Be.get("icon-text-fit")!=="none",Dr=new xn(null,0,ft&&(Ct||!Q.hasIconData()||Be.get("icon-optional")),Ct&&(ft||!Q.hasTextData()||Be.get("text-optional")),!0);!Q.collisionArrays&&ae&&(Q.hasIconCollisionBoxData()||Q.hasTextCollisionBoxData())&&Q.deserializeCollisionBoxes(ae);for(var Xr=function(vn,In,Bn){for(var Yn=0;Yn<In/4;Yn++)vn.opacityVertexArray.emplaceBack(Bn)},Yr=function(vn){var In=Q.symbolInstances.get(vn),Bn=In.numHorizontalGlyphVertices,Yn=In.numVerticalGlyphVertices,Xn=In.crossTileID,Gn=ye[Xn],jn=me.opacities[Xn];Gn?jn=Ke:jn||(jn=Dr,me.opacities[Xn]=jn),ye[Xn]=!0;var ri=Bn>0||Yn>0,ui=In.numIconVertices>0,mi=me.placedOrientations[In.crossTileID],di=mi===n.WritingMode.vertical,ki=mi===n.WritingMode.horizontal||mi===n.WritingMode.horizontalOnly;if(ri){var qi=Hr(jn.text),Yi=di?$r:qi;Xr(Q.text,Bn,Yi);var Mi=ki?$r:qi;Xr(Q.text,Yn,Mi);var Xi=jn.text.isHidden();[In.rightJustifiedTextSymbolIndex,In.centerJustifiedTextSymbolIndex,In.leftJustifiedTextSymbolIndex].forEach(function(sl){sl>=0&&(Q.text.placedSymbolArray.get(sl).hidden=Xi||di?1:0)}),In.verticalPlacedTextSymbolIndex>=0&&(Q.text.placedSymbolArray.get(In.verticalPlacedTextSymbolIndex).hidden=Xi||ki?1:0);var Ui=me.variableOffsets[In.crossTileID];Ui&&me.markUsedJustification(Q,Ui.anchor,In,mi);var sa=me.placedOrientations[In.crossTileID];sa&&(me.markUsedJustification(Q,"left",In,sa),me.markUsedOrientation(Q,sa,In))}if(ui){var ra=Hr(jn.icon),Pa=!(ar&&In.verticalPlacedIconSymbolIndex&&di);if(In.placedIconSymbolIndex>=0){var Qi=Pa?ra:$r;Xr(Q.icon,In.numIconVertices,Qi),Q.icon.placedSymbolArray.get(In.placedIconSymbolIndex).hidden=jn.icon.isHidden()}if(In.verticalPlacedIconSymbolIndex>=0){var ba=Pa?$r:ra;Xr(Q.icon,In.numVerticalIconVertices,ba),Q.icon.placedSymbolArray.get(In.verticalPlacedIconSymbolIndex).hidden=jn.icon.isHidden()}}if(Q.hasIconCollisionBoxData()||Q.hasTextCollisionBoxData()){var Vi=Q.collisionArrays[vn];if(Vi){var ea=new n.Point(0,0);if(Vi.textBox||Vi.verticalTextBox){var Qa=!0;if(Ut){var Eo=me.variableOffsets[Xn];Eo?(ea=Ri(Eo.anchor,Eo.width,Eo.height,Eo.textOffset,Eo.textBoxScale),$t&&ea._rotate(lr?me.transform.angle:-me.transform.angle)):Qa=!1}Vi.textBox&&Ar(Q.textCollisionBox.collisionVertexArray,jn.text.placed,!Qa||di,ea.x,ea.y),Vi.verticalTextBox&&Ar(Q.textCollisionBox.collisionVertexArray,jn.text.placed,!Qa||ki,ea.x,ea.y)}var ol=!!(!ki&&Vi.verticalIconBox);Vi.iconBox&&Ar(Q.iconCollisionBox.collisionVertexArray,jn.icon.placed,ol,ar?ea.x:0,ar?ea.y:0),Vi.verticalIconBox&&Ar(Q.iconCollisionBox.collisionVertexArray,jn.icon.placed,!ol,ar?ea.x:0,ar?ea.y:0)}}},Gr=0;Gr<Q.symbolInstances.length;Gr++)Yr(Gr);if(Q.sortFeatures(this.transform.angle),this.retainedQueryData[Q.bucketInstanceId]&&(this.retainedQueryData[Q.bucketInstanceId].featureSortOrder=Q.featureSortOrder),Q.hasTextData()&&Q.text.opacityVertexBuffer&&Q.text.opacityVertexBuffer.updateData(Q.text.opacityVertexArray),Q.hasIconData()&&Q.icon.opacityVertexBuffer&&Q.icon.opacityVertexBuffer.updateData(Q.icon.opacityVertexArray),Q.hasIconCollisionBoxData()&&Q.iconCollisionBox.collisionVertexBuffer&&Q.iconCollisionBox.collisionVertexBuffer.updateData(Q.iconCollisionBox.collisionVertexArray),Q.hasTextCollisionBoxData()&&Q.textCollisionBox.collisionVertexBuffer&&Q.textCollisionBox.collisionVertexBuffer.updateData(Q.textCollisionBox.collisionVertexArray),Q.bucketInstanceId in this.collisionCircleArrays){var Jr=this.collisionCircleArrays[Q.bucketInstanceId];Q.placementInvProjMatrix=Jr.invProjMatrix,Q.placementViewportMatrix=Jr.viewportMatrix,Q.collisionCircleArray=Jr.circles,delete this.collisionCircleArrays[Q.bucketInstanceId]}},Or.prototype.symbolFadeChange=function(Q){return this.fadeDuration===0?1:(Q-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Or.prototype.zoomAdjustment=function(Q){return Math.max(0,(this.transform.zoom-Q)/1.5)},Or.prototype.hasTransitions=function(Q){return this.stale||Q-this.lastPlacementChangeTime<this.fadeDuration},Or.prototype.stillRecent=function(Q,ye){var ae=this.zoomAtLastRecencyCheck===ye?1-this.zoomAdjustment(ye):1;return this.zoomAtLastRecencyCheck=ye,this.commitTime+this.fadeDuration*ae>Q},Or.prototype.setStale=function(){this.stale=!0};function Ar(de,Q,ye,ae,me){de.emplaceBack(Q?1:0,ye?1:0,ae||0,me||0),de.emplaceBack(Q?1:0,ye?1:0,ae||0,me||0),de.emplaceBack(Q?1:0,ye?1:0,ae||0,me||0),de.emplaceBack(Q?1:0,ye?1:0,ae||0,me||0)}var Fr=Math.pow(2,25),yn=Math.pow(2,24),Pn=Math.pow(2,17),pn=Math.pow(2,16),ln=Math.pow(2,9),Sr=Math.pow(2,8),Zr=Math.pow(2,1);function Hr(de){if(de.opacity===0&&!de.placed)return 0;if(de.opacity===1&&de.placed)return 4294967295;var Q=de.placed?1:0,ye=Math.floor(de.opacity*127);return ye*Fr+Q*yn+ye*Pn+Q*pn+ye*ln+Q*Sr+ye*Zr+Q}var $r=0,bn=function(Q){this._sortAcrossTiles=Q.layout.get("symbol-z-order")!=="viewport-y"&&Q.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};bn.prototype.continuePlacement=function(Q,ye,ae,me,Be){for(var Ke=this._bucketParts;this._currentTileIndex<Q.length;){var ft=Q[this._currentTileIndex];if(ye.getBucketParts(Ke,me,ft,this._sortAcrossTiles),this._currentTileIndex++,Be())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ke.sort(function(Ut,$t){return Ut.sortKey-$t.sortKey}));this._currentPartIndex<Ke.length;){var Ct=Ke[this._currentPartIndex];if(ye.placeLayerBucketPart(Ct,this._seenCrossTileIDs,ae),this._currentPartIndex++,Be())return!0}return!1};var kn=function(Q,ye,ae,me,Be,Ke,ft){this.placement=new Or(Q,Be,Ke,ft),this._currentPlacementIndex=ye.length-1,this._forceFullPlacement=ae,this._showCollisionBoxes=me,this._done=!1};kn.prototype.isDone=function(){return this._done},kn.prototype.continuePlacement=function(Q,ye,ae){for(var me=this,Be=n.browser.now(),Ke=function(){var lr=n.browser.now()-Be;return me._forceFullPlacement?!1:lr>2};this._currentPlacementIndex>=0;){var ft=Q[this._currentPlacementIndex],Ct=ye[ft],Ut=this.placement.collisionIndex.transform.zoom;if(Ct.type==="symbol"&&(!Ct.minzoom||Ct.minzoom<=Ut)&&(!Ct.maxzoom||Ct.maxzoom>Ut)){this._inProgressLayer||(this._inProgressLayer=new bn(Ct));var $t=this._inProgressLayer.continuePlacement(ae[Ct.source],this.placement,this._showCollisionBoxes,Ct,Ke);if($t)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},kn.prototype.commit=function(Q){return this.placement.commit(Q),this.placement};var En=512/n.EXTENT/2,Nn=function(Q,ye,ae){this.tileID=Q,this.indexedSymbolInstances={},this.bucketInstanceId=ae;for(var me=0;me<ye.length;me++){var Be=ye.get(me),Ke=Be.key;this.indexedSymbolInstances[Ke]||(this.indexedSymbolInstances[Ke]=[]),this.indexedSymbolInstances[Ke].push({crossTileID:Be.crossTileID,coord:this.getScaledCoordinates(Be,Q)})}};Nn.prototype.getScaledCoordinates=function(Q,ye){var ae=ye.canonical.z-this.tileID.canonical.z,me=En/Math.pow(2,ae);return{x:Math.floor((ye.canonical.x*n.EXTENT+Q.anchorX)*me),y:Math.floor((ye.canonical.y*n.EXTENT+Q.anchorY)*me)}},Nn.prototype.findMatches=function(Q,ye,ae){for(var me=this.tileID.canonical.z<ye.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ye.canonical.z),Be=0;Be<Q.length;Be++){var Ke=Q.get(Be);if(!Ke.crossTileID){var ft=this.indexedSymbolInstances[Ke.key];if(ft)for(var Ct=this.getScaledCoordinates(Ke,ye),Ut=0,$t=ft;Ut<$t.length;Ut+=1){var lr=$t[Ut];if(Math.abs(lr.coord.x-Ct.x)<=me&&Math.abs(lr.coord.y-Ct.y)<=me&&!ae[lr.crossTileID]){ae[lr.crossTileID]=!0,Ke.crossTileID=lr.crossTileID;break}}}}};var Fn=function(){this.maxCrossTileID=0};Fn.prototype.generate=function(){return++this.maxCrossTileID};var vi=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};vi.prototype.handleWrapJump=function(Q){var ye=Math.round((Q-this.lng)/360);if(ye!==0)for(var ae in this.indexes){var me=this.indexes[ae],Be={};for(var Ke in me){var ft=me[Ke];ft.tileID=ft.tileID.unwrapTo(ft.tileID.wrap+ye),Be[ft.tileID.key]=ft}this.indexes[ae]=Be}this.lng=Q},vi.prototype.addBucket=function(Q,ye,ae){if(this.indexes[Q.overscaledZ]&&this.indexes[Q.overscaledZ][Q.key]){if(this.indexes[Q.overscaledZ][Q.key].bucketInstanceId===ye.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Q.overscaledZ,this.indexes[Q.overscaledZ][Q.key])}for(var me=0;me<ye.symbolInstances.length;me++){var Be=ye.symbolInstances.get(me);Be.crossTileID=0}this.usedCrossTileIDs[Q.overscaledZ]||(this.usedCrossTileIDs[Q.overscaledZ]={});var Ke=this.usedCrossTileIDs[Q.overscaledZ];for(var ft in this.indexes){var Ct=this.indexes[ft];if(Number(ft)>Q.overscaledZ)for(var Ut in Ct){var $t=Ct[Ut];$t.tileID.isChildOf(Q)&&$t.findMatches(ye.symbolInstances,Q,Ke)}else{var lr=Q.scaledTo(Number(ft)),ar=Ct[lr.key];ar&&ar.findMatches(ye.symbolInstances,Q,Ke)}}for(var Dr=0;Dr<ye.symbolInstances.length;Dr++){var Xr=ye.symbolInstances.get(Dr);Xr.crossTileID||(Xr.crossTileID=ae.generate(),Ke[Xr.crossTileID]=!0)}return this.indexes[Q.overscaledZ]===void 0&&(this.indexes[Q.overscaledZ]={}),this.indexes[Q.overscaledZ][Q.key]=new Nn(Q,ye.symbolInstances,ye.bucketInstanceId),!0},vi.prototype.removeBucketCrossTileIDs=function(Q,ye){for(var ae in ye.indexedSymbolInstances)for(var me=0,Be=ye.indexedSymbolInstances[ae];me<Be.length;me+=1){var Ke=Be[me];delete this.usedCrossTileIDs[Q][Ke.crossTileID]}},vi.prototype.removeStaleBuckets=function(Q){var ye=!1;for(var ae in this.indexes){var me=this.indexes[ae];for(var Be in me)Q[me[Be].bucketInstanceId]||(this.removeBucketCrossTileIDs(ae,me[Be]),delete me[Be],ye=!0)}return ye};var si=function(){this.layerIndexes={},this.crossTileIDs=new Fn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};si.prototype.addLayer=function(Q,ye,ae){var me=this.layerIndexes[Q.id];me===void 0&&(me=this.layerIndexes[Q.id]=new vi);var Be=!1,Ke={};me.handleWrapJump(ae);for(var ft=0,Ct=ye;ft<Ct.length;ft+=1){var Ut=Ct[ft],$t=Ut.getBucket(Q);!$t||Q.id!==$t.layerIds[0]||($t.bucketInstanceId||($t.bucketInstanceId=++this.maxBucketInstanceId),me.addBucket(Ut.tileID,$t,this.crossTileIDs)&&(Be=!0),Ke[$t.bucketInstanceId]=!0)}return me.removeStaleBuckets(Ke)&&(Be=!0),Be},si.prototype.pruneUnusedLayers=function(Q){var ye={};Q.forEach(function(me){ye[me]=!0});for(var ae in this.layerIndexes)ye[ae]||delete this.layerIndexes[ae]};var gi=function(de,Q){return n.emitValidationErrors(de,Q&&Q.filter(function(ye){return ye.identifier!=="source.canvas"}))},Li=n.pick(Ft,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ma=n.pick(Ft,["setCenter","setZoom","setBearing","setPitch"]),ia=er(),Wo=function(de){function Q(ye,ae){var me=this;ae===void 0&&(ae={}),de.call(this),this.map=ye,this.dispatcher=new D(zt(),this),this.imageManager=new w,this.imageManager.setEventedParent(this),this.glyphManager=new C(ye._requestManager,ae.localIdeographFontFamily),this.lineAtlas=new k(256,512),this.crossTileSymbolIndex=new si,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());var Be=this;this._rtlTextPluginCallback=Q.registerForPluginStateChange(function(Ke){var ft={pluginStatus:Ke.pluginStatus,pluginURL:Ke.pluginURL};Be.dispatcher.broadcast("syncRTLPluginState",ft,function(Ct,Ut){if(n.triggerPluginCompletionEvent(Ct),Ut){var $t=Ut.every(function(ar){return ar});if($t)for(var lr in Be.sourceCaches)Be.sourceCaches[lr].reload()}})}),this.on("data",function(Ke){if(!(Ke.dataType!=="source"||Ke.sourceDataType!=="metadata")){var ft=me.sourceCaches[Ke.sourceId];if(ft){var Ct=ft.getSource();if(!(!Ct||!Ct.vectorLayerIds))for(var Ut in me._layers){var $t=me._layers[Ut];$t.source===Ct.id&&me._validateLayer($t)}}}})}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.loadURL=function(ae,me){var Be=this;me===void 0&&(me={}),this.fire(new n.Event("dataloading",{dataType:"style"}));var Ke=typeof me.validate=="boolean"?me.validate:!n.isMapboxURL(ae);ae=this.map._requestManager.normalizeStyleURL(ae,me.accessToken);var ft=this.map._requestManager.transformRequest(ae,n.ResourceType.Style);this._request=n.getJSON(ft,function(Ct,Ut){Be._request=null,Ct?Be.fire(new n.ErrorEvent(Ct)):Ut&&Be._load(Ut,Ke)})},Q.prototype.loadJSON=function(ae,me){var Be=this;me===void 0&&(me={}),this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.browser.frame(function(){Be._request=null,Be._load(ae,me.validate!==!1)})},Q.prototype.loadEmpty=function(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(ia,!1)},Q.prototype._load=function(ae,me){if(!(me&&gi(this,n.validateStyle(ae)))){this._loaded=!0,this.stylesheet=ae;for(var Be in ae.sources)this.addSource(Be,ae.sources[Be],{validate:!1});ae.sprite?this._loadSprite(ae.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(ae.glyphs);var Ke=ur(this.stylesheet.layers);this._order=Ke.map(function($t){return $t.id}),this._layers={},this._serializedLayers={};for(var ft=0,Ct=Ke;ft<Ct.length;ft+=1){var Ut=Ct[ft];Ut=n.createStyleLayer(Ut),Ut.setEventedParent(this,{layer:{id:Ut.id}}),this._layers[Ut.id]=Ut,this._serializedLayers[Ut.id]=Ut.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}},Q.prototype._loadSprite=function(ae){var me=this;this._spriteRequest=l(ae,this.map._requestManager,function(Be,Ke){if(me._spriteRequest=null,Be)me.fire(new n.ErrorEvent(Be));else if(Ke)for(var ft in Ke)me.imageManager.addImage(ft,Ke[ft]);me.imageManager.setLoaded(!0),me._availableImages=me.imageManager.listImages(),me.dispatcher.broadcast("setImages",me._availableImages),me.fire(new n.Event("data",{dataType:"style"}))})},Q.prototype._validateLayer=function(ae){var me=this.sourceCaches[ae.source];if(me){var Be=ae.sourceLayer;if(Be){var Ke=me.getSource();(Ke.type==="geojson"||Ke.vectorLayerIds&&Ke.vectorLayerIds.indexOf(Be)===-1)&&this.fire(new n.ErrorEvent(new Error('Source layer "'+Be+'" does not exist on source "'+Ke.id+'" as specified by style layer "'+ae.id+'"')))}}},Q.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var ae in this.sourceCaches)if(!this.sourceCaches[ae].loaded())return!1;return!!this.imageManager.isLoaded()},Q.prototype._serializeLayers=function(ae){for(var me=[],Be=0,Ke=ae;Be<Ke.length;Be+=1){var ft=Ke[Be],Ct=this._layers[ft];Ct.type!=="custom"&&me.push(Ct.serialize())}return me},Q.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var ae in this.sourceCaches)if(this.sourceCaches[ae].hasTransition())return!0;for(var me in this._layers)if(this._layers[me].hasTransition())return!0;return!1},Q.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Q.prototype.update=function(ae){if(this._loaded){var me=this._changed;if(this._changed){var Be=Object.keys(this._updatedLayers),Ke=Object.keys(this._removedLayers);(Be.length||Ke.length)&&this._updateWorkerLayers(Be,Ke);for(var ft in this._updatedSources){var Ct=this._updatedSources[ft];Ct==="reload"?this._reloadSource(ft):Ct==="clear"&&this._clearSource(ft)}this._updateTilesForChangedImages();for(var Ut in this._updatedPaintProps)this._layers[Ut].updateTransitions(ae);this.light.updateTransitions(ae),this._resetUpdates()}var $t={};for(var lr in this.sourceCaches){var ar=this.sourceCaches[lr];$t[lr]=ar.used,ar.used=!1}for(var Dr=0,Xr=this._order;Dr<Xr.length;Dr+=1){var Yr=Xr[Dr],Gr=this._layers[Yr];Gr.recalculate(ae,this._availableImages),!Gr.isHidden(ae.zoom)&&Gr.source&&(this.sourceCaches[Gr.source].used=!0)}for(var Jr in $t){var vn=this.sourceCaches[Jr];$t[Jr]!==vn.used&&vn.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Jr}))}this.light.recalculate(ae),this.z=ae.zoom,me&&this.fire(new n.Event("data",{dataType:"style"}))}},Q.prototype._updateTilesForChangedImages=function(){var ae=Object.keys(this._changedImages);if(ae.length){for(var me in this.sourceCaches)this.sourceCaches[me].reloadTilesForDependencies(["icons","patterns"],ae);this._changedImages={}}},Q.prototype._updateWorkerLayers=function(ae,me){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(ae),removedIds:me})},Q.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Q.prototype.setState=function(ae){var me=this;if(this._checkLoaded(),gi(this,n.validateStyle(ae)))return!1;ae=n.clone$1(ae),ae.layers=ur(ae.layers);var Be=An(this.serialize(),ae).filter(function(ft){return!(ft.command in ma)});if(Be.length===0)return!1;var Ke=Be.filter(function(ft){return!(ft.command in Li)});if(Ke.length>0)throw new Error("Unimplemented: "+Ke.map(function(ft){return ft.command}).join(", ")+".");return Be.forEach(function(ft){ft.command!=="setTransition"&&me[ft.command].apply(me,ft.args)}),this.stylesheet=ae,!0},Q.prototype.addImage=function(ae,me){if(this.getImage(ae))return this.fire(new n.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(ae,me),this._afterImageUpdated(ae)},Q.prototype.updateImage=function(ae,me){this.imageManager.updateImage(ae,me)},Q.prototype.getImage=function(ae){return this.imageManager.getImage(ae)},Q.prototype.removeImage=function(ae){if(!this.getImage(ae))return this.fire(new n.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(ae),this._afterImageUpdated(ae)},Q.prototype._afterImageUpdated=function(ae){this._availableImages=this.imageManager.listImages(),this._changedImages[ae]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))},Q.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Q.prototype.addSource=function(ae,me,Be){var Ke=this;if(Be===void 0&&(Be={}),this._checkLoaded(),this.sourceCaches[ae]!==void 0)throw new Error("There is already a source with this ID");if(!me.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(me).join(", ")+".");var ft=["vector","raster","geojson","video","image"],Ct=ft.indexOf(me.type)>=0;if(!(Ct&&this._validate(n.validateStyle.source,"sources."+ae,me,null,Be))){this.map&&this.map._collectResourceTiming&&(me.collectResourceTiming=!0);var Ut=this.sourceCaches[ae]=new Bt(ae,me,this.dispatcher);Ut.style=this,Ut.setEventedParent(this,function(){return{isSourceLoaded:Ke.loaded(),source:Ut.serialize(),sourceId:ae}}),Ut.onAdd(this.map),this._changed=!0}},Q.prototype.removeSource=function(ae){if(this._checkLoaded(),this.sourceCaches[ae]===void 0)throw new Error("There is no source with this ID");for(var me in this._layers)if(this._layers[me].source===ae)return this.fire(new n.ErrorEvent(new Error('Source "'+ae+'" cannot be removed while layer "'+me+'" is using it.')));var Be=this.sourceCaches[ae];delete this.sourceCaches[ae],delete this._updatedSources[ae],Be.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:ae})),Be.setEventedParent(null),Be.clearTiles(),Be.onRemove&&Be.onRemove(this.map),this._changed=!0},Q.prototype.setGeoJSONSourceData=function(ae,me){this._checkLoaded();var Be=this.sourceCaches[ae].getSource();Be.setData(me),this._changed=!0},Q.prototype.getSource=function(ae){return this.sourceCaches[ae]&&this.sourceCaches[ae].getSource()},Q.prototype.addLayer=function(ae,me,Be){Be===void 0&&(Be={}),this._checkLoaded();var Ke=ae.id;if(this.getLayer(Ke)){this.fire(new n.ErrorEvent(new Error('Layer with id "'+Ke+'" already exists on this map')));return}var ft;if(ae.type==="custom"){if(gi(this,n.validateCustomStyleLayer(ae)))return;ft=n.createStyleLayer(ae)}else{if(typeof ae.source=="object"&&(this.addSource(Ke,ae.source),ae=n.clone$1(ae),ae=n.extend(ae,{source:Ke})),this._validate(n.validateStyle.layer,"layers."+Ke,ae,{arrayIndex:-1},Be))return;ft=n.createStyleLayer(ae),this._validateLayer(ft),ft.setEventedParent(this,{layer:{id:Ke}}),this._serializedLayers[ft.id]=ft.serialize()}var Ct=me?this._order.indexOf(me):this._order.length;if(me&&Ct===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+me+'" does not exist on this map.')));return}if(this._order.splice(Ct,0,Ke),this._layerOrderChanged=!0,this._layers[Ke]=ft,this._removedLayers[Ke]&&ft.source&&ft.type!=="custom"){var Ut=this._removedLayers[Ke];delete this._removedLayers[Ke],Ut.type!==ft.type?this._updatedSources[ft.source]="clear":(this._updatedSources[ft.source]="reload",this.sourceCaches[ft.source].pause())}this._updateLayer(ft),ft.onAdd&&ft.onAdd(this.map)},Q.prototype.moveLayer=function(ae,me){this._checkLoaded(),this._changed=!0;var Be=this._layers[ae];if(!Be){this.fire(new n.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style and cannot be moved.")));return}if(ae!==me){var Ke=this._order.indexOf(ae);this._order.splice(Ke,1);var ft=me?this._order.indexOf(me):this._order.length;if(me&&ft===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+me+'" does not exist on this map.')));return}this._order.splice(ft,0,ae),this._layerOrderChanged=!0}},Q.prototype.removeLayer=function(ae){this._checkLoaded();var me=this._layers[ae];if(!me){this.fire(new n.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style and cannot be removed.")));return}me.setEventedParent(null);var Be=this._order.indexOf(ae);this._order.splice(Be,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[ae]=me,delete this._layers[ae],delete this._serializedLayers[ae],delete this._updatedLayers[ae],delete this._updatedPaintProps[ae],me.onRemove&&me.onRemove(this.map)},Q.prototype.getLayer=function(ae){return this._layers[ae]},Q.prototype.hasLayer=function(ae){return ae in this._layers},Q.prototype.setLayerZoomRange=function(ae,me,Be){this._checkLoaded();var Ke=this.getLayer(ae);if(!Ke){this.fire(new n.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style and cannot have zoom extent.")));return}Ke.minzoom===me&&Ke.maxzoom===Be||(me!=null&&(Ke.minzoom=me),Be!=null&&(Ke.maxzoom=Be),this._updateLayer(Ke))},Q.prototype.setFilter=function(ae,me,Be){Be===void 0&&(Be={}),this._checkLoaded();var Ke=this.getLayer(ae);if(!Ke){this.fire(new n.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style and cannot be filtered.")));return}if(!n.deepEqual(Ke.filter,me)){if(me==null){Ke.filter=void 0,this._updateLayer(Ke);return}this._validate(n.validateStyle.filter,"layers."+Ke.id+".filter",me,null,Be)||(Ke.filter=n.clone$1(me),this._updateLayer(Ke))}},Q.prototype.getFilter=function(ae){return n.clone$1(this.getLayer(ae).filter)},Q.prototype.setLayoutProperty=function(ae,me,Be,Ke){Ke===void 0&&(Ke={}),this._checkLoaded();var ft=this.getLayer(ae);if(!ft){this.fire(new n.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style and cannot be styled.")));return}n.deepEqual(ft.getLayoutProperty(me),Be)||(ft.setLayoutProperty(me,Be,Ke),this._updateLayer(ft))},Q.prototype.getLayoutProperty=function(ae,me){var Be=this.getLayer(ae);if(!Be){this.fire(new n.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style.")));return}return Be.getLayoutProperty(me)},Q.prototype.setPaintProperty=function(ae,me,Be,Ke){Ke===void 0&&(Ke={}),this._checkLoaded();var ft=this.getLayer(ae);if(!ft){this.fire(new n.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style and cannot be styled.")));return}if(!n.deepEqual(ft.getPaintProperty(me),Be)){var Ct=ft.setPaintProperty(me,Be,Ke);Ct&&this._updateLayer(ft),this._changed=!0,this._updatedPaintProps[ae]=!0}},Q.prototype.getPaintProperty=function(ae,me){return this.getLayer(ae).getPaintProperty(me)},Q.prototype.setFeatureState=function(ae,me){this._checkLoaded();var Be=ae.source,Ke=ae.sourceLayer,ft=this.sourceCaches[Be];if(ft===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+Be+"' does not exist in the map's style.")));return}var Ct=ft.getSource().type;if(Ct==="geojson"&&Ke){this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(Ct==="vector"&&!Ke){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}ae.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),ft.setFeatureState(Ke,ae.id,me)},Q.prototype.removeFeatureState=function(ae,me){this._checkLoaded();var Be=ae.source,Ke=this.sourceCaches[Be];if(Ke===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+Be+"' does not exist in the map's style.")));return}var ft=Ke.getSource().type,Ct=ft==="vector"?ae.sourceLayer:void 0;if(ft==="vector"&&!Ct){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(me&&typeof ae.id!="string"&&typeof ae.id!="number"){this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}Ke.removeFeatureState(Ct,ae.id,me)},Q.prototype.getFeatureState=function(ae){this._checkLoaded();var me=ae.source,Be=ae.sourceLayer,Ke=this.sourceCaches[me];if(Ke===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+me+"' does not exist in the map's style.")));return}var ft=Ke.getSource().type;if(ft==="vector"&&!Be){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return ae.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),Ke.getFeatureState(Be,ae.id)},Q.prototype.getTransition=function(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Q.prototype.serialize=function(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,function(ae){return ae.serialize()}),layers:this._serializeLayers(this._order)},function(ae){return ae!==void 0})},Q.prototype._updateLayer=function(ae){this._updatedLayers[ae.id]=!0,ae.source&&!this._updatedSources[ae.source]&&this.sourceCaches[ae.source].getSource().type!=="raster"&&(this._updatedSources[ae.source]="reload",this.sourceCaches[ae.source].pause()),this._changed=!0},Q.prototype._flattenAndSortRenderedFeatures=function(ae){for(var me=this,Be=function(ki){return me._layers[ki].type==="fill-extrusion"},Ke={},ft=[],Ct=this._order.length-1;Ct>=0;Ct--){var Ut=this._order[Ct];if(Be(Ut)){Ke[Ut]=Ct;for(var $t=0,lr=ae;$t<lr.length;$t+=1){var ar=lr[$t],Dr=ar[Ut];if(Dr)for(var Xr=0,Yr=Dr;Xr<Yr.length;Xr+=1){var Gr=Yr[Xr];ft.push(Gr)}}}}ft.sort(function(ki,qi){return qi.intersectionZ-ki.intersectionZ});for(var Jr=[],vn=this._order.length-1;vn>=0;vn--){var In=this._order[vn];if(Be(In))for(var Bn=ft.length-1;Bn>=0;Bn--){var Yn=ft[Bn].feature;if(Ke[Yn.layer.id]<vn)break;Jr.push(Yn),ft.pop()}else for(var Xn=0,Gn=ae;Xn<Gn.length;Xn+=1){var jn=Gn[Xn],ri=jn[In];if(ri)for(var ui=0,mi=ri;ui<mi.length;ui+=1){var di=mi[ui];Jr.push(di.feature)}}}return Jr},Q.prototype.queryRenderedFeatures=function(ae,me,Be){me&&me.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",me.filter,null,me);var Ke={};if(me&&me.layers){if(!Array.isArray(me.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ft=0,Ct=me.layers;ft<Ct.length;ft+=1){var Ut=Ct[ft],$t=this._layers[Ut];if(!$t)return this.fire(new n.ErrorEvent(new Error("The layer '"+Ut+"' does not exist in the map's style and cannot be queried for features."))),[];Ke[$t.source]=!0}}var lr=[];me.availableImages=this._availableImages;for(var ar in this.sourceCaches)me.layers&&!Ke[ar]||lr.push(j(this.sourceCaches[ar],this._layers,this._serializedLayers,ae,me,Be));return this.placement&&lr.push(Z(this._layers,this._serializedLayers,this.sourceCaches,ae,me,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(lr)},Q.prototype.querySourceFeatures=function(ae,me){me&&me.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",me.filter,null,me);var Be=this.sourceCaches[ae];return Be?fe(Be,me):[]},Q.prototype.addSourceType=function(ae,me,Be){if(Q.getSourceType(ae))return Be(new Error('A source type called "'+ae+'" already exists.'));if(Q.setSourceType(ae,me),!me.workerSourceURL)return Be(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:ae,url:me.workerSourceURL},Be)},Q.prototype.getLight=function(){return this.light.getLight()},Q.prototype.setLight=function(ae,me){me===void 0&&(me={}),this._checkLoaded();var Be=this.light.getLight(),Ke=!1;for(var ft in ae)if(!n.deepEqual(ae[ft],Be[ft])){Ke=!0;break}if(Ke){var Ct={now:n.browser.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(ae,me),this.light.updateTransitions(Ct)}},Q.prototype._validate=function(ae,me,Be,Ke,ft){return ft===void 0&&(ft={}),ft&&ft.validate===!1?!1:gi(this,ae.call(n.validateStyle,n.extend({key:me,style:this.serialize(),value:Be,styleSpec:n.styleSpec},Ke)))},Q.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var ae in this._layers){var me=this._layers[ae];me.setEventedParent(null)}for(var Be in this.sourceCaches)this.sourceCaches[Be].clearTiles(),this.sourceCaches[Be].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Q.prototype._clearSource=function(ae){this.sourceCaches[ae].clearTiles()},Q.prototype._reloadSource=function(ae){this.sourceCaches[ae].resume(),this.sourceCaches[ae].reload()},Q.prototype._updateSources=function(ae){for(var me in this.sourceCaches)this.sourceCaches[me].update(ae)},Q.prototype._generateCollisionBoxes=function(){for(var ae in this.sourceCaches)this._reloadSource(ae)},Q.prototype._updatePlacement=function(ae,me,Be,Ke,ft){ft===void 0&&(ft=!1);for(var Ct=!1,Ut=!1,$t={},lr=0,ar=this._order;lr<ar.length;lr+=1){var Dr=ar[lr],Xr=this._layers[Dr];if(Xr.type==="symbol"){if(!$t[Xr.source]){var Yr=this.sourceCaches[Xr.source];$t[Xr.source]=Yr.getRenderableIds(!0).map(function(Xn){return Yr.getTileByID(Xn)}).sort(function(Xn,Gn){return Gn.tileID.overscaledZ-Xn.tileID.overscaledZ||(Xn.tileID.isLessThan(Gn.tileID)?-1:1)})}var Gr=this.crossTileSymbolIndex.addLayer(Xr,$t[Xr.source],ae.center.lng);Ct=Ct||Gr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),ft=ft||this._layerOrderChanged||Be===0,(ft||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.browser.now(),ae.zoom))&&(this.pauseablePlacement=new kn(ae,this._order,ft,me,Be,Ke,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$t),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.browser.now()),Ut=!0),Ct&&this.pauseablePlacement.placement.setStale()),Ut||Ct)for(var Jr=0,vn=this._order;Jr<vn.length;Jr+=1){var In=vn[Jr],Bn=this._layers[In];Bn.type==="symbol"&&this.placement.updateLayerOpacities(Bn,$t[Bn.source])}var Yn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.browser.now());return Yn},Q.prototype._releaseSymbolFadeTiles=function(){for(var ae in this.sourceCaches)this.sourceCaches[ae].releaseSymbolFadeTiles()},Q.prototype.getImages=function(ae,me,Be){this.imageManager.getImages(me.icons,Be),this._updateTilesForChangedImages();var Ke=this.sourceCaches[me.source];Ke&&Ke.setDependencies(me.tileID.key,me.type,me.icons)},Q.prototype.getGlyphs=function(ae,me,Be){this.glyphManager.getGlyphs(me.stacks,Be)},Q.prototype.getResource=function(ae,me,Be){return n.makeRequest(me,Be)},Q}(n.Evented);Wo.getSourceType=ie,Wo.setSourceType=K,Wo.registerForPluginStateChange=n.registerForPluginStateChange;var Fo=n.createLayout([{name:"a_pos",type:"Int16",components:2}]),ho=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,zl=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Mf=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ta=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,pu="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Ef=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,oo=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Po="void main() {gl_FragColor=vec4(1.0);}",Ol="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ju=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ya=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Fl=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,ja="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",qa="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Bl="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",vo="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",po="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",Yo="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",uc="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Bo=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ph=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Ms=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,so=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Sf=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Js=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Es=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,fc=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,gh=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Ku=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yh=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,mh=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xh="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Lf=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bh="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",wh=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cc=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,hc=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yl=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Nl=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,gu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,yu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vc=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Bs=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Th="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Ju=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,pc=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,os=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ul=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,ml=xa(ho,zl),mu=xa(Mf,lc),Qs=xa(ta,pu),Ss=xa(Ef,oo),_f=xa(Po,Ol),Vl=xa(ju,Ya),ss=xa(Fl,ja),Ba=xa(qa,Bl),Pf=xa(vo,po),Ah=xa(Yo,uc),$u=xa(Bo,ph),Hl=xa(Ms,so),Gl=xa(Sf,Js),No=xa(Es,Cf),qu=xa(fc,gh),Wl=xa(Ku,yh),ef=xa(mh,xh),Mh=xa(Lf,bh),gc=xa(wh,cc),Rf=xa(hc,yl),If=xa(Nl,gu),Df=xa(yu,vc),Yl=xa(Bs,Th),tf=xa(Ju,dc),xu=xa(pc,Qu),rf=xa(os,Ul);function xa(de,Q){var ye=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ae=Q.match(/attribute ([\w]+) ([\w]+)/g),me=de.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Be=Q.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Ke=Be?Be.concat(me):me,ft={};return de=de.replace(ye,function(Ct,Ut,$t,lr,ar){return ft[ar]=!0,Ut==="define"?`
#ifndef HAS_UNIFORM_u_`+ar+`
varying `+$t+" "+lr+" "+ar+`;
#else
uniform `+$t+" "+lr+" u_"+ar+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ar+`
    `+$t+" "+lr+" "+ar+" = u_"+ar+`;
#endif
`}),Q=Q.replace(ye,function(Ct,Ut,$t,lr,ar){var Dr=lr==="float"?"vec2":"vec4",Xr=ar.match(/color/)?"color":Dr;return ft[ar]?Ut==="define"?`
#ifndef HAS_UNIFORM_u_`+ar+`
uniform lowp float u_`+ar+`_t;
attribute `+$t+" "+Dr+" a_"+ar+`;
varying `+$t+" "+lr+" "+ar+`;
#else
uniform `+$t+" "+lr+" u_"+ar+`;
#endif
`:Xr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ar+`
    `+ar+" = a_"+ar+`;
#else
    `+$t+" "+lr+" "+ar+" = u_"+ar+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ar+`
    `+ar+" = unpack_mix_"+Xr+"(a_"+ar+", u_"+ar+`_t);
#else
    `+$t+" "+lr+" "+ar+" = u_"+ar+`;
#endif
`:Ut==="define"?`
#ifndef HAS_UNIFORM_u_`+ar+`
uniform lowp float u_`+ar+`_t;
attribute `+$t+" "+Dr+" a_"+ar+`;
#else
uniform `+$t+" "+lr+" u_"+ar+`;
#endif
`:Xr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ar+`
    `+$t+" "+lr+" "+ar+" = a_"+ar+`;
#else
    `+$t+" "+lr+" "+ar+" = u_"+ar+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ar+`
    `+$t+" "+lr+" "+ar+" = unpack_mix_"+Xr+"(a_"+ar+", u_"+ar+`_t);
#else
    `+$t+" "+lr+" "+ar+" = u_"+ar+`;
#endif
`}),{fragmentSource:de,vertexSource:Q,staticAttributes:ae,staticUniforms:Ke}}var yc=Object.freeze({__proto__:null,prelude:ml,background:mu,backgroundPattern:Qs,circle:Ss,clippingMask:_f,heatmap:Vl,heatmapTexture:ss,collisionBox:Ba,collisionCircle:Pf,debug:Ah,fill:$u,fillOutline:Hl,fillOutlinePattern:Gl,fillPattern:No,fillExtrusion:qu,fillExtrusionPattern:Wl,hillshadePrepare:ef,hillshade:Mh,line:gc,lineGradient:Rf,linePattern:If,lineSDF:Df,raster:Yl,symbolIcon:tf,symbolSDF:xu,symbolTextAndIcon:rf}),ls=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ls.prototype.bind=function(Q,ye,ae,me,Be,Ke,ft,Ct){this.context=Q;for(var Ut=this.boundPaintVertexBuffers.length!==me.length,$t=0;!Ut&&$t<me.length;$t++)this.boundPaintVertexBuffers[$t]!==me[$t]&&(Ut=!0);var lr=!this.vao||this.boundProgram!==ye||this.boundLayoutVertexBuffer!==ae||Ut||this.boundIndexBuffer!==Be||this.boundVertexOffset!==Ke||this.boundDynamicVertexBuffer!==ft||this.boundDynamicVertexBuffer2!==Ct;!Q.extVertexArrayObject||lr?this.freshBind(ye,ae,me,Be,Ke,ft,Ct):(Q.bindVertexArrayOES.set(this.vao),ft&&ft.bind(),Be&&Be.dynamicDraw&&Be.bind(),Ct&&Ct.bind())},ls.prototype.freshBind=function(Q,ye,ae,me,Be,Ke,ft){var Ct,Ut=Q.numAttributes,$t=this.context,lr=$t.gl;if($t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$t.extVertexArrayObject.createVertexArrayOES(),$t.bindVertexArrayOES.set(this.vao),Ct=0,this.boundProgram=Q,this.boundLayoutVertexBuffer=ye,this.boundPaintVertexBuffers=ae,this.boundIndexBuffer=me,this.boundVertexOffset=Be,this.boundDynamicVertexBuffer=Ke,this.boundDynamicVertexBuffer2=ft;else{Ct=$t.currentNumAttributes||0;for(var ar=Ut;ar<Ct;ar++)lr.disableVertexAttribArray(ar)}ye.enableAttributes(lr,Q);for(var Dr=0,Xr=ae;Dr<Xr.length;Dr+=1){var Yr=Xr[Dr];Yr.enableAttributes(lr,Q)}Ke&&Ke.enableAttributes(lr,Q),ft&&ft.enableAttributes(lr,Q),ye.bind(),ye.setVertexAttribPointers(lr,Q,Be);for(var Gr=0,Jr=ae;Gr<Jr.length;Gr+=1){var vn=Jr[Gr];vn.bind(),vn.setVertexAttribPointers(lr,Q,Be)}Ke&&(Ke.bind(),Ke.setVertexAttribPointers(lr,Q,Be)),me&&me.bind(),ft&&(ft.bind(),ft.setVertexAttribPointers(lr,Q,Be)),$t.currentNumAttributes=Ut},ls.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function mc(de){for(var Q=[],ye=0;ye<de.length;ye++)if(de[ye]!==null){var ae=de[ye].split(" ");Q.push(ae.pop())}return Q}var kf=function(Q,ye,ae,me,Be,Ke){var ft=Q.gl;this.program=ft.createProgram();for(var Ct=mc(ae.staticAttributes),Ut=me?me.getBinderAttributes():[],$t=Ct.concat(Ut),lr=ae.staticUniforms?mc(ae.staticUniforms):[],ar=me?me.getBinderUniforms():[],Dr=lr.concat(ar),Xr=[],Yr=0,Gr=Dr;Yr<Gr.length;Yr+=1){var Jr=Gr[Yr];Xr.indexOf(Jr)<0&&Xr.push(Jr)}var vn=me?me.defines():[];Ke&&vn.push("#define OVERDRAW_INSPECTOR;");var In=vn.concat(ml.fragmentSource,ae.fragmentSource).join(`
`),Bn=vn.concat(ml.vertexSource,ae.vertexSource).join(`
`),Yn=ft.createShader(ft.FRAGMENT_SHADER);if(ft.isContextLost()){this.failedToCreate=!0;return}ft.shaderSource(Yn,In),ft.compileShader(Yn),ft.attachShader(this.program,Yn);var Xn=ft.createShader(ft.VERTEX_SHADER);if(ft.isContextLost()){this.failedToCreate=!0;return}ft.shaderSource(Xn,Bn),ft.compileShader(Xn),ft.attachShader(this.program,Xn),this.attributes={};var Gn={};this.numAttributes=$t.length;for(var jn=0;jn<this.numAttributes;jn++)$t[jn]&&(ft.bindAttribLocation(this.program,jn,$t[jn]),this.attributes[$t[jn]]=jn);ft.linkProgram(this.program),ft.deleteShader(Xn),ft.deleteShader(Yn);for(var ri=0;ri<Xr.length;ri++){var ui=Xr[ri];if(ui&&!Gn[ui]){var mi=ft.getUniformLocation(this.program,ui);mi&&(Gn[ui]=mi)}}this.fixedUniforms=Be(Q,Gn),this.binderUniforms=me?me.getUniforms(Q,Gn):[]};kf.prototype.draw=function(Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t,lr,ar,Dr,Xr,Yr,Gr){var Jr,vn=Q.gl;if(!this.failedToCreate){Q.program.set(this.program),Q.setDepthMode(ae),Q.setStencilMode(me),Q.setColorMode(Be),Q.setCullFace(Ke);for(var In in this.fixedUniforms)this.fixedUniforms[In].set(ft[In]);Xr&&Xr.setUniforms(Q,this.binderUniforms,ar,{zoom:Dr});for(var Bn=(Jr={},Jr[vn.LINES]=2,Jr[vn.TRIANGLES]=3,Jr[vn.LINE_STRIP]=1,Jr)[ye],Yn=0,Xn=lr.get();Yn<Xn.length;Yn+=1){var Gn=Xn[Yn],jn=Gn.vaos||(Gn.vaos={}),ri=jn[Ct]||(jn[Ct]=new ls);ri.bind(Q,this,Ut,Xr?Xr.getPaintVertexBuffers():[],$t,Gn.vertexOffset,Yr,Gr),vn.drawElements(ye,Gn.primitiveLength*Bn,vn.UNSIGNED_SHORT,Gn.primitiveOffset*Bn*2)}}};function xl(de,Q,ye){var ae=1/hn(ye,1,Q.transform.tileZoom),me=Math.pow(2,ye.tileID.overscaledZ),Be=ye.tileSize*Math.pow(2,Q.transform.tileZoom)/me,Ke=Be*(ye.tileID.canonical.x+ye.tileID.wrap*me),ft=Be*ye.tileID.canonical.y;return{u_image:0,u_texsize:ye.imageAtlasTexture.size,u_scale:[ae,de.fromScale,de.toScale],u_fade:de.t,u_pixel_coord_upper:[Ke>>16,ft>>16],u_pixel_coord_lower:[Ke&65535,ft&65535]}}function $s(de,Q,ye,ae){var me=ye.imageManager.getPattern(de.from.toString()),Be=ye.imageManager.getPattern(de.to.toString()),Ke=ye.imageManager.getPixelSize(),ft=Ke.width,Ct=Ke.height,Ut=Math.pow(2,ae.tileID.overscaledZ),$t=ae.tileSize*Math.pow(2,ye.transform.tileZoom)/Ut,lr=$t*(ae.tileID.canonical.x+ae.tileID.wrap*Ut),ar=$t*ae.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:me.tl,u_pattern_br_a:me.br,u_pattern_tl_b:Be.tl,u_pattern_br_b:Be.br,u_texsize:[ft,Ct],u_mix:Q.t,u_pattern_size_a:me.displaySize,u_pattern_size_b:Be.displaySize,u_scale_a:Q.fromScale,u_scale_b:Q.toScale,u_tile_units_to_pixels:1/hn(ae,1,ye.transform.tileZoom),u_pixel_coord_upper:[lr>>16,ar>>16],u_pixel_coord_lower:[lr&65535,ar&65535]}}var nf=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_lightpos:new n.Uniform3f(de,Q.u_lightpos),u_lightintensity:new n.Uniform1f(de,Q.u_lightintensity),u_lightcolor:new n.Uniform3f(de,Q.u_lightcolor),u_vertical_gradient:new n.Uniform1f(de,Q.u_vertical_gradient),u_opacity:new n.Uniform1f(de,Q.u_opacity)}},Xa=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_lightpos:new n.Uniform3f(de,Q.u_lightpos),u_lightintensity:new n.Uniform1f(de,Q.u_lightintensity),u_lightcolor:new n.Uniform3f(de,Q.u_lightcolor),u_vertical_gradient:new n.Uniform1f(de,Q.u_vertical_gradient),u_height_factor:new n.Uniform1f(de,Q.u_height_factor),u_image:new n.Uniform1i(de,Q.u_image),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_pixel_coord_upper:new n.Uniform2f(de,Q.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(de,Q.u_pixel_coord_lower),u_scale:new n.Uniform3f(de,Q.u_scale),u_fade:new n.Uniform1f(de,Q.u_fade),u_opacity:new n.Uniform1f(de,Q.u_opacity)}},bu=function(de,Q,ye,ae){var me=Q.style.light,Be=me.properties.get("position"),Ke=[Be.x,Be.y,Be.z],ft=n.create$1();me.properties.get("anchor")==="viewport"&&n.fromRotation(ft,-Q.transform.angle),n.transformMat3(Ke,Ke,ft);var Ct=me.properties.get("color");return{u_matrix:de,u_lightpos:Ke,u_lightintensity:me.properties.get("intensity"),u_lightcolor:[Ct.r,Ct.g,Ct.b],u_vertical_gradient:+ye,u_opacity:ae}},us=function(de,Q,ye,ae,me,Be,Ke){return n.extend(bu(de,Q,ye,ae),xl(Be,Q,Ke),{u_height_factor:-Math.pow(2,me.overscaledZ)/Ke.tileSize/8})},Ns=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix)}},bl=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_image:new n.Uniform1i(de,Q.u_image),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_pixel_coord_upper:new n.Uniform2f(de,Q.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(de,Q.u_pixel_coord_lower),u_scale:new n.Uniform3f(de,Q.u_scale),u_fade:new n.Uniform1f(de,Q.u_fade)}},qs=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_world:new n.Uniform2f(de,Q.u_world)}},fs=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_world:new n.Uniform2f(de,Q.u_world),u_image:new n.Uniform1i(de,Q.u_image),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_pixel_coord_upper:new n.Uniform2f(de,Q.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(de,Q.u_pixel_coord_lower),u_scale:new n.Uniform3f(de,Q.u_scale),u_fade:new n.Uniform1f(de,Q.u_fade)}},Us=function(de){return{u_matrix:de}},cs=function(de,Q,ye,ae){return n.extend(Us(de),xl(ye,Q,ae))},Jo=function(de,Q){return{u_matrix:de,u_world:Q}},wu=function(de,Q,ye,ae,me){return n.extend(cs(de,Q,ye,ae),{u_world:me})},Eh=function(de,Q){return{u_camera_to_center_distance:new n.Uniform1f(de,Q.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(de,Q.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(de,Q.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(de,Q.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(de,Q.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(de,Q.u_matrix)}},Sh=function(de,Q,ye,ae){var me=de.transform,Be,Ke;if(ae.paint.get("circle-pitch-alignment")==="map"){var ft=hn(ye,1,me.zoom);Be=!0,Ke=[ft,ft]}else Be=!1,Ke=me.pixelsToGLUnits;return{u_camera_to_center_distance:me.cameraToCenterDistance,u_scale_with_map:+(ae.paint.get("circle-pitch-scale")==="map"),u_matrix:de.translatePosMatrix(Q.posMatrix,ye,ae.paint.get("circle-translate"),ae.paint.get("circle-translate-anchor")),u_pitch_with_map:+Be,u_device_pixel_ratio:n.browser.devicePixelRatio,u_extrude_scale:Ke}},Ch=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_camera_to_center_distance:new n.Uniform1f(de,Q.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(de,Q.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(de,Q.u_extrude_scale),u_overscale_factor:new n.Uniform1f(de,Q.u_overscale_factor)}},Lh=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_inv_matrix:new n.UniformMatrix4f(de,Q.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(de,Q.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(de,Q.u_viewport_size)}},zf=function(de,Q,ye){var ae=hn(ye,1,Q.zoom),me=Math.pow(2,Q.zoom-ye.tileID.overscaledZ),Be=ye.tileID.overscaleFactor();return{u_matrix:de,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pixels_to_tile_units:ae,u_extrude_scale:[Q.pixelsToGLUnits[0]/(ae*me),Q.pixelsToGLUnits[1]/(ae*me)],u_overscale_factor:Be}},xc=function(de,Q,ye){return{u_matrix:de,u_inv_matrix:Q,u_camera_to_center_distance:ye.cameraToCenterDistance,u_viewport_size:[ye.width,ye.height]}},Xl=function(de,Q){return{u_color:new n.UniformColor(de,Q.u_color),u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_overlay:new n.Uniform1i(de,Q.u_overlay),u_overlay_scale:new n.Uniform1f(de,Q.u_overlay_scale)}},lo=function(de,Q,ye){return ye===void 0&&(ye=1),{u_matrix:de,u_color:Q,u_overlay:0,u_overlay_scale:ye}},Xo=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix)}},Zl=function(de){return{u_matrix:de}},bc=function(de,Q){return{u_extrude_scale:new n.Uniform1f(de,Q.u_extrude_scale),u_intensity:new n.Uniform1f(de,Q.u_intensity),u_matrix:new n.UniformMatrix4f(de,Q.u_matrix)}},Tu=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_world:new n.Uniform2f(de,Q.u_world),u_image:new n.Uniform1i(de,Q.u_image),u_color_ramp:new n.Uniform1i(de,Q.u_color_ramp),u_opacity:new n.Uniform1f(de,Q.u_opacity)}},Vs=function(de,Q,ye,ae){return{u_matrix:de,u_extrude_scale:hn(Q,1,ye),u_intensity:ae}},_h=function(de,Q,ye,ae){var me=n.create();n.ortho(me,0,de.width,de.height,0,0,1);var Be=de.context.gl;return{u_matrix:me,u_world:[Be.drawingBufferWidth,Be.drawingBufferHeight],u_image:ye,u_color_ramp:ae,u_opacity:Q.paint.get("heatmap-opacity")}},wc=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_image:new n.Uniform1i(de,Q.u_image),u_latrange:new n.Uniform2f(de,Q.u_latrange),u_light:new n.Uniform2f(de,Q.u_light),u_shadow:new n.UniformColor(de,Q.u_shadow),u_highlight:new n.UniformColor(de,Q.u_highlight),u_accent:new n.UniformColor(de,Q.u_accent)}},Tc=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_image:new n.Uniform1i(de,Q.u_image),u_dimension:new n.Uniform2f(de,Q.u_dimension),u_zoom:new n.Uniform1f(de,Q.u_zoom),u_unpack:new n.Uniform4f(de,Q.u_unpack)}},Of=function(de,Q,ye){var ae=ye.paint.get("hillshade-shadow-color"),me=ye.paint.get("hillshade-highlight-color"),Be=ye.paint.get("hillshade-accent-color"),Ke=ye.paint.get("hillshade-illumination-direction")*(Math.PI/180);ye.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ke-=de.transform.angle);var ft=!de.options.moving;return{u_matrix:de.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),ft),u_image:0,u_latrange:Ro(de,Q.tileID),u_light:[ye.paint.get("hillshade-exaggeration"),Ke],u_shadow:ae,u_highlight:me,u_accent:Be}},Ac=function(de,Q){var ye=Q.stride,ae=n.create();return n.ortho(ae,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(ae,ae,[0,-n.EXTENT,0]),{u_matrix:ae,u_image:1,u_dimension:[ye,ye],u_zoom:de.overscaledZ,u_unpack:Q.getUnpackVector()}};function Ro(de,Q){var ye=Math.pow(2,Q.canonical.z),ae=Q.canonical.y;return[new n.MercatorCoordinate(0,ae/ye).toLngLat().lat,new n.MercatorCoordinate(0,(ae+1)/ye).toLngLat().lat]}var hs=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_ratio:new n.Uniform1f(de,Q.u_ratio),u_device_pixel_ratio:new n.Uniform1f(de,Q.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(de,Q.u_units_to_pixels)}},el=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_ratio:new n.Uniform1f(de,Q.u_ratio),u_device_pixel_ratio:new n.Uniform1f(de,Q.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(de,Q.u_units_to_pixels),u_image:new n.Uniform1i(de,Q.u_image),u_image_height:new n.Uniform1f(de,Q.u_image_height)}},jl=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_ratio:new n.Uniform1f(de,Q.u_ratio),u_device_pixel_ratio:new n.Uniform1f(de,Q.u_device_pixel_ratio),u_image:new n.Uniform1i(de,Q.u_image),u_units_to_pixels:new n.Uniform2f(de,Q.u_units_to_pixels),u_scale:new n.Uniform3f(de,Q.u_scale),u_fade:new n.Uniform1f(de,Q.u_fade)}},af=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_ratio:new n.Uniform1f(de,Q.u_ratio),u_device_pixel_ratio:new n.Uniform1f(de,Q.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(de,Q.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(de,Q.u_patternscale_a),u_patternscale_b:new n.Uniform2f(de,Q.u_patternscale_b),u_sdfgamma:new n.Uniform1f(de,Q.u_sdfgamma),u_image:new n.Uniform1i(de,Q.u_image),u_tex_y_a:new n.Uniform1f(de,Q.u_tex_y_a),u_tex_y_b:new n.Uniform1f(de,Q.u_tex_y_b),u_mix:new n.Uniform1f(de,Q.u_mix)}},wl=function(de,Q,ye){var ae=de.transform;return{u_matrix:tl(de,Q,ye),u_ratio:1/hn(Q,1,ae.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_units_to_pixels:[1/ae.pixelsToGLUnits[0],1/ae.pixelsToGLUnits[1]]}},Tl=function(de,Q,ye,ae){return n.extend(wl(de,Q,ye),{u_image:0,u_image_height:ae})},Mc=function(de,Q,ye,ae){var me=de.transform,Be=Kl(Q,me);return{u_matrix:tl(de,Q,ye),u_texsize:Q.imageAtlasTexture.size,u_ratio:1/hn(Q,1,me.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_image:0,u_scale:[Be,ae.fromScale,ae.toScale],u_fade:ae.t,u_units_to_pixels:[1/me.pixelsToGLUnits[0],1/me.pixelsToGLUnits[1]]}},Hs=function(de,Q,ye,ae,me){var Be=de.transform,Ke=de.lineAtlas,ft=Kl(Q,Be),Ct=ye.layout.get("line-cap")==="round",Ut=Ke.getDash(ae.from,Ct),$t=Ke.getDash(ae.to,Ct),lr=Ut.width*me.fromScale,ar=$t.width*me.toScale;return n.extend(wl(de,Q,ye),{u_patternscale_a:[ft/lr,-Ut.height/2],u_patternscale_b:[ft/ar,-$t.height/2],u_sdfgamma:Ke.width/(Math.min(lr,ar)*256*n.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ut.y,u_tex_y_b:$t.y,u_mix:me.t})};function Kl(de,Q){return 1/hn(de,1,Q.tileZoom)}function tl(de,Q,ye){return de.translatePosMatrix(Q.tileID.posMatrix,Q,ye.paint.get("line-translate"),ye.paint.get("line-translate-anchor"))}var Gs=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_tl_parent:new n.Uniform2f(de,Q.u_tl_parent),u_scale_parent:new n.Uniform1f(de,Q.u_scale_parent),u_buffer_scale:new n.Uniform1f(de,Q.u_buffer_scale),u_fade_t:new n.Uniform1f(de,Q.u_fade_t),u_opacity:new n.Uniform1f(de,Q.u_opacity),u_image0:new n.Uniform1i(de,Q.u_image0),u_image1:new n.Uniform1i(de,Q.u_image1),u_brightness_low:new n.Uniform1f(de,Q.u_brightness_low),u_brightness_high:new n.Uniform1f(de,Q.u_brightness_high),u_saturation_factor:new n.Uniform1f(de,Q.u_saturation_factor),u_contrast_factor:new n.Uniform1f(de,Q.u_contrast_factor),u_spin_weights:new n.Uniform3f(de,Q.u_spin_weights)}},Au=function(de,Q,ye,ae,me){return{u_matrix:de,u_tl_parent:Q,u_scale_parent:ye,u_buffer_scale:1,u_fade_t:ae.mix,u_opacity:ae.opacity*me.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:me.paint.get("raster-brightness-min"),u_brightness_high:me.paint.get("raster-brightness-max"),u_saturation_factor:Ql(me.paint.get("raster-saturation")),u_contrast_factor:ga(me.paint.get("raster-contrast")),u_spin_weights:Jl(me.paint.get("raster-hue-rotate"))}};function Jl(de){de*=Math.PI/180;var Q=Math.sin(de),ye=Math.cos(de);return[(2*ye+1)/3,(-Math.sqrt(3)*Q-ye+1)/3,(Math.sqrt(3)*Q-ye+1)/3]}function ga(de){return de>0?1/(1-de):1+de}function Ql(de){return de>0?1-1/(1.001-de):-de}var of=function(de,Q){return{u_is_size_zoom_constant:new n.Uniform1i(de,Q.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(de,Q.u_is_size_feature_constant),u_size_t:new n.Uniform1f(de,Q.u_size_t),u_size:new n.Uniform1f(de,Q.u_size),u_camera_to_center_distance:new n.Uniform1f(de,Q.u_camera_to_center_distance),u_pitch:new n.Uniform1f(de,Q.u_pitch),u_rotate_symbol:new n.Uniform1i(de,Q.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(de,Q.u_aspect_ratio),u_fade_change:new n.Uniform1f(de,Q.u_fade_change),u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(de,Q.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(de,Q.u_coord_matrix),u_is_text:new n.Uniform1i(de,Q.u_is_text),u_pitch_with_map:new n.Uniform1i(de,Q.u_pitch_with_map),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_texture:new n.Uniform1i(de,Q.u_texture)}},Ec=function(de,Q){return{u_is_size_zoom_constant:new n.Uniform1i(de,Q.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(de,Q.u_is_size_feature_constant),u_size_t:new n.Uniform1f(de,Q.u_size_t),u_size:new n.Uniform1f(de,Q.u_size),u_camera_to_center_distance:new n.Uniform1f(de,Q.u_camera_to_center_distance),u_pitch:new n.Uniform1f(de,Q.u_pitch),u_rotate_symbol:new n.Uniform1i(de,Q.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(de,Q.u_aspect_ratio),u_fade_change:new n.Uniform1f(de,Q.u_fade_change),u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(de,Q.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(de,Q.u_coord_matrix),u_is_text:new n.Uniform1i(de,Q.u_is_text),u_pitch_with_map:new n.Uniform1i(de,Q.u_pitch_with_map),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_texture:new n.Uniform1i(de,Q.u_texture),u_gamma_scale:new n.Uniform1f(de,Q.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(de,Q.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(de,Q.u_is_halo)}},$l=function(de,Q){return{u_is_size_zoom_constant:new n.Uniform1i(de,Q.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(de,Q.u_is_size_feature_constant),u_size_t:new n.Uniform1f(de,Q.u_size_t),u_size:new n.Uniform1f(de,Q.u_size),u_camera_to_center_distance:new n.Uniform1f(de,Q.u_camera_to_center_distance),u_pitch:new n.Uniform1f(de,Q.u_pitch),u_rotate_symbol:new n.Uniform1i(de,Q.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(de,Q.u_aspect_ratio),u_fade_change:new n.Uniform1f(de,Q.u_fade_change),u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(de,Q.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(de,Q.u_coord_matrix),u_is_text:new n.Uniform1i(de,Q.u_is_text),u_pitch_with_map:new n.Uniform1i(de,Q.u_pitch_with_map),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_texsize_icon:new n.Uniform2f(de,Q.u_texsize_icon),u_texture:new n.Uniform1i(de,Q.u_texture),u_texture_icon:new n.Uniform1i(de,Q.u_texture_icon),u_gamma_scale:new n.Uniform1f(de,Q.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(de,Q.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(de,Q.u_is_halo)}},Mu=function(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut){var $t=me.transform;return{u_is_size_zoom_constant:+(de==="constant"||de==="source"),u_is_size_feature_constant:+(de==="constant"||de==="camera"),u_size_t:Q?Q.uSizeT:0,u_size:Q?Q.uSize:0,u_camera_to_center_distance:$t.cameraToCenterDistance,u_pitch:$t.pitch/360*2*Math.PI,u_rotate_symbol:+ye,u_aspect_ratio:$t.width/$t.height,u_fade_change:me.options.fadeDuration?me.symbolFadeChange:1,u_matrix:Be,u_label_plane_matrix:Ke,u_coord_matrix:ft,u_is_text:+Ct,u_pitch_with_map:+ae,u_texsize:Ut,u_texture:0}},sf=function(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t){var lr=me.transform;return n.extend(Mu(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut),{u_gamma_scale:ae?Math.cos(lr._pitch)*lr.cameraToCenterDistance:1,u_device_pixel_ratio:n.browser.devicePixelRatio,u_is_halo:+$t})},Ff=function(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut){return n.extend(sf(de,Q,ye,ae,me,Be,Ke,ft,!0,Ct,!0),{u_texsize_icon:Ut,u_texture_icon:1})},Eu=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_opacity:new n.Uniform1f(de,Q.u_opacity),u_color:new n.UniformColor(de,Q.u_color)}},Su=function(de,Q){return{u_matrix:new n.UniformMatrix4f(de,Q.u_matrix),u_opacity:new n.Uniform1f(de,Q.u_opacity),u_image:new n.Uniform1i(de,Q.u_image),u_pattern_tl_a:new n.Uniform2f(de,Q.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(de,Q.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(de,Q.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(de,Q.u_pattern_br_b),u_texsize:new n.Uniform2f(de,Q.u_texsize),u_mix:new n.Uniform1f(de,Q.u_mix),u_pattern_size_a:new n.Uniform2f(de,Q.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(de,Q.u_pattern_size_b),u_scale_a:new n.Uniform1f(de,Q.u_scale_a),u_scale_b:new n.Uniform1f(de,Q.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(de,Q.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(de,Q.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(de,Q.u_tile_units_to_pixels)}},rl=function(de,Q,ye){return{u_matrix:de,u_opacity:Q,u_color:ye}},Cu=function(de,Q,ye,ae,me,Be){return n.extend($s(ae,Be,ye,me),{u_matrix:de,u_opacity:Q})},nl={fillExtrusion:nf,fillExtrusionPattern:Xa,fill:Ns,fillPattern:bl,fillOutline:qs,fillOutlinePattern:fs,circle:Eh,collisionBox:Ch,collisionCircle:Lh,debug:Xl,clippingMask:Xo,heatmap:bc,heatmapTexture:Tu,hillshade:wc,hillshadePrepare:Tc,line:hs,lineGradient:el,linePattern:jl,lineSDF:af,raster:Gs,symbolIcon:of,symbolSDF:Ec,symbolTextAndIcon:$l,background:Eu,backgroundPattern:Su},eo;function Cs(de,Q,ye,ae,me,Be,Ke){for(var ft=de.context,Ct=ft.gl,Ut=de.useProgram("collisionBox"),$t=[],lr=0,ar=0,Dr=0;Dr<ae.length;Dr++){var Xr=ae[Dr],Yr=Q.getTile(Xr),Gr=Yr.getBucket(ye);if(Gr){var Jr=Xr.posMatrix;(me[0]!==0||me[1]!==0)&&(Jr=de.translatePosMatrix(Xr.posMatrix,Yr,me,Be));var vn=Ke?Gr.textCollisionBox:Gr.iconCollisionBox,In=Gr.collisionCircleArray;if(In.length>0){var Bn=n.create(),Yn=Jr;n.mul(Bn,Gr.placementInvProjMatrix,de.transform.glCoordMatrix),n.mul(Bn,Bn,Gr.placementViewportMatrix),$t.push({circleArray:In,circleOffset:ar,transform:Yn,invTransform:Bn}),lr+=In.length/4,ar=lr}vn&&Ut.draw(ft,Ct.LINES,gr.disabled,Qt.disabled,de.colorModeForRenderPass(),Pt.disabled,zf(Jr,de.transform,Yr),ye.id,vn.layoutVertexBuffer,vn.indexBuffer,vn.segments,null,de.transform.zoom,null,null,vn.collisionVertexBuffer)}}if(!(!Ke||!$t.length)){var Xn=de.useProgram("collisionCircle"),Gn=new n.StructArrayLayout2f1f2i16;Gn.resize(lr*4),Gn._trim();for(var jn=0,ri=0,ui=$t;ri<ui.length;ri+=1)for(var mi=ui[ri],di=0;di<mi.circleArray.length/4;di++){var ki=di*4,qi=mi.circleArray[ki+0],Yi=mi.circleArray[ki+1],Mi=mi.circleArray[ki+2],Xi=mi.circleArray[ki+3];Gn.emplace(jn++,qi,Yi,Mi,Xi,0),Gn.emplace(jn++,qi,Yi,Mi,Xi,1),Gn.emplace(jn++,qi,Yi,Mi,Xi,2),Gn.emplace(jn++,qi,Yi,Mi,Xi,3)}(!eo||eo.length<lr*2)&&(eo=Bf(lr));for(var Ui=ft.createIndexBuffer(eo,!0),sa=ft.createVertexBuffer(Gn,n.collisionCircleLayout.members,!0),ra=0,Pa=$t;ra<Pa.length;ra+=1){var Qi=Pa[ra],ba=xc(Qi.transform,Qi.invTransform,de.transform);Xn.draw(ft,Ct.TRIANGLES,gr.disabled,Qt.disabled,de.colorModeForRenderPass(),Pt.disabled,ba,ye.id,sa,Ui,n.SegmentVector.simpleSegment(0,Qi.circleOffset*2,Qi.circleArray.length,Qi.circleArray.length/2),null,de.transform.zoom,null,null,null)}sa.destroy(),Ui.destroy()}}function Bf(de){var Q=de*2,ye=new n.StructArrayLayout3ui6;ye.resize(Q),ye._trim();for(var ae=0;ae<Q;ae++){var me=ae*6;ye.uint16[me+0]=ae*4+0,ye.uint16[me+1]=ae*4+1,ye.uint16[me+2]=ae*4+2,ye.uint16[me+3]=ae*4+2,ye.uint16[me+4]=ae*4+3,ye.uint16[me+5]=ae*4+0}return ye}var Al=n.identity(new Float32Array(16));function lf(de,Q,ye,ae,me){if(de.renderPass==="translucent"){var Be=Qt.disabled,Ke=de.colorModeForRenderPass(),ft=ye.layout.get("text-variable-anchor");ft&&Ph(ae,de,ye,Q,ye.layout.get("text-rotation-alignment"),ye.layout.get("text-pitch-alignment"),me),ye.paint.get("icon-opacity").constantOr(1)!==0&&_u(de,Q,ye,ae,!1,ye.paint.get("icon-translate"),ye.paint.get("icon-translate-anchor"),ye.layout.get("icon-rotation-alignment"),ye.layout.get("icon-pitch-alignment"),ye.layout.get("icon-keep-upright"),Be,Ke),ye.paint.get("text-opacity").constantOr(1)!==0&&_u(de,Q,ye,ae,!0,ye.paint.get("text-translate"),ye.paint.get("text-translate-anchor"),ye.layout.get("text-rotation-alignment"),ye.layout.get("text-pitch-alignment"),ye.layout.get("text-keep-upright"),Be,Ke),Q.map.showCollisionBoxes&&(Cs(de,Q,ye,ae,ye.paint.get("text-translate"),ye.paint.get("text-translate-anchor"),!0),Cs(de,Q,ye,ae,ye.paint.get("icon-translate"),ye.paint.get("icon-translate-anchor"),!1))}}function Lu(de,Q,ye,ae,me,Be){var Ke=n.getAnchorAlignment(de),ft=Ke.horizontalAlign,Ct=Ke.verticalAlign,Ut=-(ft-.5)*Q,$t=-(Ct-.5)*ye,lr=n.evaluateVariableOffset(de,ae);return new n.Point((Ut/me+lr[0])*Be,($t/me+lr[1])*Be)}function Ph(de,Q,ye,ae,me,Be,Ke){for(var ft=Q.transform,Ct=me==="map",Ut=Be==="map",$t=0,lr=de;$t<lr.length;$t+=1){var ar=lr[$t],Dr=ae.getTile(ar),Xr=Dr.getBucket(ye);if(!(!Xr||!Xr.text||!Xr.text.segments.get().length)){var Yr=Xr.textSizeData,Gr=n.evaluateSizeForZoom(Yr,ft.zoom),Jr=hn(Dr,1,Q.transform.zoom),vn=kr(ar.posMatrix,Ut,Ct,Q.transform,Jr),In=ye.layout.get("icon-text-fit")!=="none"&&Xr.hasIconData();if(Gr){var Bn=Math.pow(2,ft.zoom-Dr.tileID.overscaledZ);Sc(Xr,Ct,Ut,Ke,n.symbolSize,ft,vn,ar.posMatrix,Bn,Gr,In)}}}}function Sc(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t){var lr=de.text.placedSymbolArray,ar=de.text.dynamicLayoutVertexArray,Dr=de.icon.dynamicLayoutVertexArray,Xr={};ar.clear();for(var Yr=0;Yr<lr.length;Yr++){var Gr=lr.get(Yr),Jr=de.allowVerticalPlacement&&!Gr.placedOrientation,vn=!Gr.hidden&&Gr.crossTileID&&!Jr?ae[Gr.crossTileID]:null;if(!vn)Kn(Gr.numGlyphs,ar);else{var In=new n.Point(Gr.anchorX,Gr.anchorY),Bn=zr(In,ye?ft:Ke),Yn=sn(Be.cameraToCenterDistance,Bn.signedDistanceFromCamera),Xn=me.evaluateSizeForFeature(de.textSizeData,Ut,Gr)*Yn/n.ONE_EM;ye&&(Xn*=de.tilePixelRatio/Ct);for(var Gn=vn.width,jn=vn.height,ri=vn.anchor,ui=vn.textOffset,mi=vn.textBoxScale,di=Lu(ri,Gn,jn,ui,mi,Xn),ki=ye?zr(In.add(di),Ke).point:Bn.point.add(Q?di.rotate(-Be.angle):di),qi=de.allowVerticalPlacement&&Gr.placedOrientation===n.WritingMode.vertical?Math.PI/2:0,Yi=0;Yi<Gr.numGlyphs;Yi++)n.addDynamicAttributes(ar,ki,qi);$t&&Gr.associatedIconIndex>=0&&(Xr[Gr.associatedIconIndex]={shiftedAnchor:ki,angle:qi})}}if($t){Dr.clear();for(var Mi=de.icon.placedSymbolArray,Xi=0;Xi<Mi.length;Xi++){var Ui=Mi.get(Xi);if(Ui.hidden)Kn(Ui.numGlyphs,Dr);else{var sa=Xr[Xi];if(!sa)Kn(Ui.numGlyphs,Dr);else for(var ra=0;ra<Ui.numGlyphs;ra++)n.addDynamicAttributes(Dr,sa.shiftedAnchor,sa.angle)}}de.icon.dynamicLayoutVertexBuffer.updateData(Dr)}de.text.dynamicLayoutVertexBuffer.updateData(ar)}function Ao(de,Q,ye){return ye.iconsInText&&Q?"symbolTextAndIcon":de?"symbolSDF":"symbolIcon"}function _u(de,Q,ye,ae,me,Be,Ke,ft,Ct,Ut,$t,lr){for(var ar=de.context,Dr=ar.gl,Xr=de.transform,Yr=ft==="map",Gr=Ct==="map",Jr=Yr&&ye.layout.get("symbol-placement")!=="point",vn=Yr&&!Gr&&!Jr,In=ye.layout.get("symbol-sort-key").constantOr(1)!==void 0,Bn=!1,Yn=de.depthModeForSublayer(0,gr.ReadOnly),Xn=ye.layout.get("text-variable-anchor"),Gn=[],jn=0,ri=ae;jn<ri.length;jn+=1){var ui=ri[jn],mi=Q.getTile(ui),di=mi.getBucket(ye);if(di){var ki=me?di.text:di.icon;if(!(!ki||!ki.segments.get().length)){var qi=ki.programConfigurations.get(ye.id),Yi=me||di.sdfIcons,Mi=me?di.textSizeData:di.iconSizeData,Xi=Gr||Xr.pitch!==0,Ui=de.useProgram(Ao(Yi,me,di),qi),sa=n.evaluateSizeForZoom(Mi,Xr.zoom),ra=void 0,Pa=[0,0],Qi=void 0,ba=void 0,Vi=null,ea=void 0;if(me){if(Qi=mi.glyphAtlasTexture,ba=Dr.LINEAR,ra=mi.glyphAtlasTexture.size,di.iconsInText){Pa=mi.imageAtlasTexture.size,Vi=mi.imageAtlasTexture;var Qa=Mi.kind==="composite"||Mi.kind==="camera";ea=Xi||de.options.rotating||de.options.zooming||Qa?Dr.LINEAR:Dr.NEAREST}}else{var Eo=ye.layout.get("icon-size").constantOr(0)!==1||di.iconsNeedLinear;Qi=mi.imageAtlasTexture,ba=Yi||de.options.rotating||de.options.zooming||Eo||Xi?Dr.LINEAR:Dr.NEAREST,ra=mi.imageAtlasTexture.size}var ol=hn(mi,1,de.transform.zoom),sl=kr(ui.posMatrix,Gr,Yr,de.transform,ol),Sl=Wr(ui.posMatrix,Gr,Yr,de.transform,ol),tu=Xn&&di.hasTextData(),Yf=ye.layout.get("icon-text-fit")!=="none"&&tu&&di.hasIconData();Jr&&Mn(di,ui.posMatrix,de,me,sl,Sl,Gr,Ut);var ru=de.translatePosMatrix(ui.posMatrix,mi,Be,Ke),ds=Jr||me&&Xn||Yf?Al:sl,nu=de.translatePosMatrix(Sl,mi,Be,Ke,!0),Ps=Yi&&ye.paint.get(me?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ps=void 0;Yi?di.iconsInText?ps=Ff(Mi.kind,sa,vn,Gr,de,ru,ds,nu,ra,Pa):ps=sf(Mi.kind,sa,vn,Gr,de,ru,ds,nu,me,ra,!0):ps=Mu(Mi.kind,sa,vn,Gr,de,ru,ds,nu,me,ra);var Cl={program:Ui,buffers:ki,uniformValues:ps,atlasTexture:Qi,atlasTextureIcon:Vi,atlasInterpolation:ba,atlasInterpolationIcon:ea,isSDF:Yi,hasHalo:Ps};if(In&&di.canOverlap){Bn=!0;for(var Fu=ki.segments.get(),Ll=0,sv=Fu;Ll<sv.length;Ll+=1){var zc=sv[Ll];Gn.push({segments:new n.SegmentVector([zc]),sortKey:zc.sortKey,state:Cl})}}else Gn.push({segments:ki.segments,sortKey:0,state:Cl})}}}Bn&&Gn.sort(function(uv,fv){return uv.sortKey-fv.sortKey});for(var Io=0,lv=Gn;Io<lv.length;Io+=1){var Oh=lv[Io],Qo=Oh.state;if(ar.activeTexture.set(Dr.TEXTURE0),Qo.atlasTexture.bind(Qo.atlasInterpolation,Dr.CLAMP_TO_EDGE),Qo.atlasTextureIcon&&(ar.activeTexture.set(Dr.TEXTURE1),Qo.atlasTextureIcon&&Qo.atlasTextureIcon.bind(Qo.atlasInterpolationIcon,Dr.CLAMP_TO_EDGE)),Qo.isSDF){var Oc=Qo.uniformValues;Qo.hasHalo&&(Oc.u_is_halo=1,ql(Qo.buffers,Oh.segments,ye,de,Qo.program,Yn,$t,lr,Oc)),Oc.u_is_halo=0}ql(Qo.buffers,Oh.segments,ye,de,Qo.program,Yn,$t,lr,Qo.uniformValues)}}function ql(de,Q,ye,ae,me,Be,Ke,ft,Ct){var Ut=ae.context,$t=Ut.gl;me.draw(Ut,$t.TRIANGLES,Be,Ke,ft,Pt.disabled,Ct,ye.id,de.layoutVertexBuffer,de.indexBuffer,Q,ye.paint,ae.transform.zoom,de.programConfigurations.get(ye.id),de.dynamicLayoutVertexBuffer,de.opacityVertexBuffer)}function Cc(de,Q,ye,ae){if(de.renderPass==="translucent"){var me=ye.paint.get("circle-opacity"),Be=ye.paint.get("circle-stroke-width"),Ke=ye.paint.get("circle-stroke-opacity"),ft=ye.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(me.constantOr(1)===0&&(Be.constantOr(1)===0||Ke.constantOr(1)===0))){for(var Ct=de.context,Ut=Ct.gl,$t=de.depthModeForSublayer(0,gr.ReadOnly),lr=Qt.disabled,ar=de.colorModeForRenderPass(),Dr=[],Xr=0;Xr<ae.length;Xr++){var Yr=ae[Xr],Gr=Q.getTile(Yr),Jr=Gr.getBucket(ye);if(Jr){var vn=Jr.programConfigurations.get(ye.id),In=de.useProgram("circle",vn),Bn=Jr.layoutVertexBuffer,Yn=Jr.indexBuffer,Xn=Sh(de,Yr,Gr,ye),Gn={programConfiguration:vn,program:In,layoutVertexBuffer:Bn,indexBuffer:Yn,uniformValues:Xn};if(ft)for(var jn=Jr.segments.get(),ri=0,ui=jn;ri<ui.length;ri+=1){var mi=ui[ri];Dr.push({segments:new n.SegmentVector([mi]),sortKey:mi.sortKey,state:Gn})}else Dr.push({segments:Jr.segments,sortKey:0,state:Gn})}}ft&&Dr.sort(function(Qi,ba){return Qi.sortKey-ba.sortKey});for(var di=0,ki=Dr;di<ki.length;di+=1){var qi=ki[di],Yi=qi.state,Mi=Yi.programConfiguration,Xi=Yi.program,Ui=Yi.layoutVertexBuffer,sa=Yi.indexBuffer,ra=Yi.uniformValues,Pa=qi.segments;Xi.draw(Ct,Ut.TRIANGLES,$t,lr,ar,Pt.disabled,ra,ye.id,Ui,sa,Pa,ye.paint,de.transform.zoom,Mi)}}}}function il(de,Q,ye,ae){if(ye.paint.get("heatmap-opacity")!==0)if(de.renderPass==="offscreen"){var me=de.context,Be=me.gl,Ke=Qt.disabled,ft=new ut([Be.ONE,Be.ONE],n.Color.transparent,[!0,!0,!0,!0]);Rh(me,de,ye),me.clear({color:n.Color.transparent});for(var Ct=0;Ct<ae.length;Ct++){var Ut=ae[Ct];if(!Q.hasRenderableParent(Ut)){var $t=Q.getTile(Ut),lr=$t.getBucket(ye);if(lr){var ar=lr.programConfigurations.get(ye.id),Dr=de.useProgram("heatmap",ar),Xr=de.transform,Yr=Xr.zoom;Dr.draw(me,Be.TRIANGLES,gr.disabled,Ke,ft,Pt.disabled,Vs(Ut.posMatrix,$t,Yr,ye.paint.get("heatmap-intensity")),ye.id,lr.layoutVertexBuffer,lr.indexBuffer,lr.segments,ye.paint,de.transform.zoom,ar)}}}me.viewport.set([0,0,de.width,de.height])}else de.renderPass==="translucent"&&(de.context.setColorMode(de.colorModeForRenderPass()),Pu(de,ye))}function Rh(de,Q,ye){var ae=de.gl;de.activeTexture.set(ae.TEXTURE1),de.viewport.set([0,0,Q.width/4,Q.height/4]);var me=ye.heatmapFbo;if(me)ae.bindTexture(ae.TEXTURE_2D,me.colorAttachment.get()),de.bindFramebuffer.set(me.framebuffer);else{var Be=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Be),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),me=ye.heatmapFbo=de.createFramebuffer(Q.width/4,Q.height/4,!1),Uo(de,Q,Be,me)}}function Uo(de,Q,ye,ae){var me=de.gl,Be=de.extRenderToTextureHalfFloat?de.extTextureHalfFloat.HALF_FLOAT_OES:me.UNSIGNED_BYTE;me.texImage2D(me.TEXTURE_2D,0,me.RGBA,Q.width/4,Q.height/4,0,me.RGBA,Be,null),ae.colorAttachment.set(ye)}function Pu(de,Q){var ye=de.context,ae=ye.gl,me=Q.heatmapFbo;if(me){ye.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,me.colorAttachment.get()),ye.activeTexture.set(ae.TEXTURE1);var Be=Q.colorRampTexture;Be||(Be=Q.colorRampTexture=new n.Texture(ye,Q.colorRamp,ae.RGBA)),Be.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),de.useProgram("heatmapTexture").draw(ye,ae.TRIANGLES,gr.disabled,Qt.disabled,de.colorModeForRenderPass(),Pt.disabled,_h(de,Q,0,1),Q.id,de.viewportBuffer,de.quadTriangleIndexBuffer,de.viewportSegments,Q.paint,de.transform.zoom)}}function uf(de,Q,ye,ae){if(de.renderPass==="translucent"){var me=ye.paint.get("line-opacity"),Be=ye.paint.get("line-width");if(!(me.constantOr(1)===0||Be.constantOr(1)===0))for(var Ke=de.depthModeForSublayer(0,gr.ReadOnly),ft=de.colorModeForRenderPass(),Ct=ye.paint.get("line-dasharray"),Ut=ye.paint.get("line-pattern"),$t=Ut.constantOr(1),lr=ye.paint.get("line-gradient"),ar=ye.getCrossfadeParameters(),Dr=$t?"linePattern":Ct?"lineSDF":lr?"lineGradient":"line",Xr=de.context,Yr=Xr.gl,Gr=!0,Jr=0,vn=ae;Jr<vn.length;Jr+=1){var In=vn[Jr],Bn=Q.getTile(In);if(!($t&&!Bn.patternsLoaded())){var Yn=Bn.getBucket(ye);if(Yn){var Xn=Yn.programConfigurations.get(ye.id),Gn=de.context.program.get(),jn=de.useProgram(Dr,Xn),ri=Gr||jn.program!==Gn,ui=Ut.constantOr(null);if(ui&&Bn.imageAtlas){var mi=Bn.imageAtlas,di=mi.patternPositions[ui.to.toString()],ki=mi.patternPositions[ui.from.toString()];di&&ki&&Xn.setConstantPatternPositions(di,ki)}var qi=$t?Mc(de,Bn,ye,ar):Ct?Hs(de,Bn,ye,Ct,ar):lr?Tl(de,Bn,ye,Yn.lineClipsArray.length):wl(de,Bn,ye);if($t)Xr.activeTexture.set(Yr.TEXTURE0),Bn.imageAtlasTexture.bind(Yr.LINEAR,Yr.CLAMP_TO_EDGE),Xn.updatePaintBuffers(ar);else if(Ct&&(ri||de.lineAtlas.dirty))Xr.activeTexture.set(Yr.TEXTURE0),de.lineAtlas.bind(Xr);else if(lr){var Yi=Yn.gradients[ye.id],Mi=Yi.texture;if(ye.gradientVersion!==Yi.version){var Xi=256;if(ye.stepInterpolant){var Ui=Q.getSource().maxzoom,sa=In.canonical.z===Ui?Math.ceil(1<<de.transform.maxZoom-In.canonical.z):1,ra=Yn.maxLineLength/n.EXTENT,Pa=1024,Qi=ra*Pa*sa;Xi=n.clamp(n.nextPowerOfTwo(Qi),256,Xr.maxTextureSize)}Yi.gradient=n.renderColorRamp({expression:ye.gradientExpression(),evaluationKey:"lineProgress",resolution:Xi,image:Yi.gradient||void 0,clips:Yn.lineClipsArray}),Yi.texture?Yi.texture.update(Yi.gradient):Yi.texture=new n.Texture(Xr,Yi.gradient,Yr.RGBA),Yi.version=ye.gradientVersion,Mi=Yi.texture}Xr.activeTexture.set(Yr.TEXTURE0),Mi.bind(ye.stepInterpolant?Yr.NEAREST:Yr.LINEAR,Yr.CLAMP_TO_EDGE)}jn.draw(Xr,Yr.TRIANGLES,Ke,de.stencilModeForClipping(In),ft,Pt.disabled,qi,ye.id,Yn.layoutVertexBuffer,Yn.indexBuffer,Yn.segments,ye.paint,de.transform.zoom,Xn,Yn.layoutVertexBuffer2),Gr=!1}}}}}function Ws(de,Q,ye,ae){var me=ye.paint.get("fill-color"),Be=ye.paint.get("fill-opacity");if(Be.constantOr(1)!==0){var Ke=de.colorModeForRenderPass(),ft=ye.paint.get("fill-pattern"),Ct=de.opaquePassEnabledForLayer()&&!ft.constantOr(1)&&me.constantOr(n.Color.transparent).a===1&&Be.constantOr(0)===1?"opaque":"translucent";if(de.renderPass===Ct){var Ut=de.depthModeForSublayer(1,de.renderPass==="opaque"?gr.ReadWrite:gr.ReadOnly);al(de,Q,ye,ae,Ut,Ke,!1)}if(de.renderPass==="translucent"&&ye.paint.get("fill-antialias")){var $t=de.depthModeForSublayer(ye.getPaintProperty("fill-outline-color")?2:0,gr.ReadOnly);al(de,Q,ye,ae,$t,Ke,!0)}}}function al(de,Q,ye,ae,me,Be,Ke){var ft=de.context.gl,Ct=ye.paint.get("fill-pattern"),Ut=Ct&&Ct.constantOr(1),$t=ye.getCrossfadeParameters(),lr,ar,Dr,Xr,Yr;Ke?(ar=Ut&&!ye.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",lr=ft.LINES):(ar=Ut?"fillPattern":"fill",lr=ft.TRIANGLES);for(var Gr=0,Jr=ae;Gr<Jr.length;Gr+=1){var vn=Jr[Gr],In=Q.getTile(vn);if(!(Ut&&!In.patternsLoaded())){var Bn=In.getBucket(ye);if(Bn){var Yn=Bn.programConfigurations.get(ye.id),Xn=de.useProgram(ar,Yn);Ut&&(de.context.activeTexture.set(ft.TEXTURE0),In.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Yn.updatePaintBuffers($t));var Gn=Ct.constantOr(null);if(Gn&&In.imageAtlas){var jn=In.imageAtlas,ri=jn.patternPositions[Gn.to.toString()],ui=jn.patternPositions[Gn.from.toString()];ri&&ui&&Yn.setConstantPatternPositions(ri,ui)}var mi=de.translatePosMatrix(vn.posMatrix,In,ye.paint.get("fill-translate"),ye.paint.get("fill-translate-anchor"));if(!Ke)Xr=Bn.indexBuffer,Yr=Bn.segments,Dr=Ut?cs(mi,de,$t,In):Us(mi);else{Xr=Bn.indexBuffer2,Yr=Bn.segments2;var di=[ft.drawingBufferWidth,ft.drawingBufferHeight];Dr=ar==="fillOutlinePattern"&&Ut?wu(mi,de,$t,In,di):Jo(mi,di)}Xn.draw(de.context,lr,me,de.stencilModeForClipping(vn),Be,Pt.disabled,Dr,ye.id,Bn.layoutVertexBuffer,Xr,Yr,ye.paint,de.transform.zoom,Yn)}}}}function Nf(de,Q,ye,ae){var me=ye.paint.get("fill-extrusion-opacity");if(me!==0&&de.renderPass==="translucent"){var Be=new gr(de.context.gl.LEQUAL,gr.ReadWrite,de.depthRangeFor3D);if(me===1&&!ye.paint.get("fill-extrusion-pattern").constantOr(1)){var Ke=de.colorModeForRenderPass();Ru(de,Q,ye,ae,Be,Qt.disabled,Ke)}else Ru(de,Q,ye,ae,Be,Qt.disabled,ut.disabled),Ru(de,Q,ye,ae,Be,de.stencilModeFor3D(),de.colorModeForRenderPass())}}function Ru(de,Q,ye,ae,me,Be,Ke){for(var ft=de.context,Ct=ft.gl,Ut=ye.paint.get("fill-extrusion-pattern"),$t=Ut.constantOr(1),lr=ye.getCrossfadeParameters(),ar=ye.paint.get("fill-extrusion-opacity"),Dr=0,Xr=ae;Dr<Xr.length;Dr+=1){var Yr=Xr[Dr],Gr=Q.getTile(Yr),Jr=Gr.getBucket(ye);if(Jr){var vn=Jr.programConfigurations.get(ye.id),In=de.useProgram($t?"fillExtrusionPattern":"fillExtrusion",vn);$t&&(de.context.activeTexture.set(Ct.TEXTURE0),Gr.imageAtlasTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE),vn.updatePaintBuffers(lr));var Bn=Ut.constantOr(null);if(Bn&&Gr.imageAtlas){var Yn=Gr.imageAtlas,Xn=Yn.patternPositions[Bn.to.toString()],Gn=Yn.patternPositions[Bn.from.toString()];Xn&&Gn&&vn.setConstantPatternPositions(Xn,Gn)}var jn=de.translatePosMatrix(Yr.posMatrix,Gr,ye.paint.get("fill-extrusion-translate"),ye.paint.get("fill-extrusion-translate-anchor")),ri=ye.paint.get("fill-extrusion-vertical-gradient"),ui=$t?us(jn,de,ri,ar,Yr,lr,Gr):bu(jn,de,ri,ar);In.draw(ft,ft.gl.TRIANGLES,me,Be,Ke,Pt.backCCW,ui,ye.id,Jr.layoutVertexBuffer,Jr.indexBuffer,Jr.segments,ye.paint,de.transform.zoom,vn)}}}function Iu(de,Q,ye,ae){if(!(de.renderPass!=="offscreen"&&de.renderPass!=="translucent")){for(var me=de.context,Be=de.depthModeForSublayer(0,gr.ReadOnly),Ke=de.colorModeForRenderPass(),ft=de.renderPass==="translucent"?de.stencilConfigForOverlap(ae):[{},ae],Ct=ft[0],Ut=ft[1],$t=0,lr=Ut;$t<lr.length;$t+=1){var ar=lr[$t],Dr=Q.getTile(ar);Dr.needsHillshadePrepare&&de.renderPass==="offscreen"?Lc(de,Dr,ye,Be,Qt.disabled,Ke):de.renderPass==="translucent"&&ff(de,Dr,ye,Be,Ct[ar.overscaledZ],Ke)}me.viewport.set([0,0,de.width,de.height])}}function ff(de,Q,ye,ae,me,Be){var Ke=de.context,ft=Ke.gl,Ct=Q.fbo;if(Ct){var Ut=de.useProgram("hillshade");Ke.activeTexture.set(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_2D,Ct.colorAttachment.get());var $t=Of(de,Q,ye);Ut.draw(Ke,ft.TRIANGLES,ae,me,Be,Pt.disabled,$t,ye.id,de.rasterBoundsBuffer,de.quadTriangleIndexBuffer,de.rasterBoundsSegments)}}function Lc(de,Q,ye,ae,me,Be){var Ke=de.context,ft=Ke.gl,Ct=Q.dem;if(Ct&&Ct.data){var Ut=Ct.dim,$t=Ct.stride,lr=Ct.getPixels();if(Ke.activeTexture.set(ft.TEXTURE1),Ke.pixelStoreUnpackPremultiplyAlpha.set(!1),Q.demTexture=Q.demTexture||de.getTileTexture($t),Q.demTexture){var ar=Q.demTexture;ar.update(lr,{premultiply:!1}),ar.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else Q.demTexture=new n.Texture(Ke,lr,ft.RGBA,{premultiply:!1}),Q.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Ke.activeTexture.set(ft.TEXTURE0);var Dr=Q.fbo;if(!Dr){var Xr=new n.Texture(Ke,{width:Ut,height:Ut,data:null},ft.RGBA);Xr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Dr=Q.fbo=Ke.createFramebuffer(Ut,Ut,!0),Dr.colorAttachment.set(Xr.texture)}Ke.bindFramebuffer.set(Dr.framebuffer),Ke.viewport.set([0,0,Ut,Ut]),de.useProgram("hillshadePrepare").draw(Ke,ft.TRIANGLES,ae,me,Be,Pt.disabled,Ac(Q.tileID,Ct),ye.id,de.rasterBoundsBuffer,de.quadTriangleIndexBuffer,de.rasterBoundsSegments),Q.needsHillshadePrepare=!1}}function Du(de,Q,ye,ae){if(de.renderPass==="translucent"&&ye.paint.get("raster-opacity")!==0&&ae.length)for(var me=de.context,Be=me.gl,Ke=Q.getSource(),ft=de.useProgram("raster"),Ct=de.colorModeForRenderPass(),Ut=Ke instanceof $?[{},ae]:de.stencilConfigForOverlap(ae),$t=Ut[0],lr=Ut[1],ar=lr[lr.length-1].overscaledZ,Dr=!de.options.moving,Xr=0,Yr=lr;Xr<Yr.length;Xr+=1){var Gr=Yr[Xr],Jr=de.depthModeForSublayer(Gr.overscaledZ-ar,ye.paint.get("raster-opacity")===1?gr.ReadWrite:gr.ReadOnly,Be.LESS),vn=Q.getTile(Gr),In=de.transform.calculatePosMatrix(Gr.toUnwrapped(),Dr);vn.registerFadeDuration(ye.paint.get("raster-fade-duration"));var Bn=Q.findLoadedParent(Gr,0),Yn=Uf(vn,Bn,Q,ye,de.transform),Xn=void 0,Gn=void 0,jn=ye.paint.get("raster-resampling")==="nearest"?Be.NEAREST:Be.LINEAR;me.activeTexture.set(Be.TEXTURE0),vn.texture.bind(jn,Be.CLAMP_TO_EDGE,Be.LINEAR_MIPMAP_NEAREST),me.activeTexture.set(Be.TEXTURE1),Bn?(Bn.texture.bind(jn,Be.CLAMP_TO_EDGE,Be.LINEAR_MIPMAP_NEAREST),Xn=Math.pow(2,Bn.tileID.overscaledZ-vn.tileID.overscaledZ),Gn=[vn.tileID.canonical.x*Xn%1,vn.tileID.canonical.y*Xn%1]):vn.texture.bind(jn,Be.CLAMP_TO_EDGE,Be.LINEAR_MIPMAP_NEAREST);var ri=Au(In,Gn||[0,0],Xn||1,Yn,ye);Ke instanceof $?ft.draw(me,Be.TRIANGLES,Jr,Qt.disabled,Ct,Pt.disabled,ri,ye.id,Ke.boundsBuffer,de.quadTriangleIndexBuffer,Ke.boundsSegments):ft.draw(me,Be.TRIANGLES,Jr,$t[Gr.overscaledZ],Ct,Pt.disabled,ri,ye.id,de.rasterBoundsBuffer,de.quadTriangleIndexBuffer,de.rasterBoundsSegments)}}function Uf(de,Q,ye,ae,me){var Be=ae.paint.get("raster-fade-duration");if(Be>0){var Ke=n.browser.now(),ft=(Ke-de.timeAdded)/Be,Ct=Q?(Ke-Q.timeAdded)/Be:-1,Ut=ye.getSource(),$t=me.coveringZoomLevel({tileSize:Ut.tileSize,roundZoom:Ut.roundZoom}),lr=!Q||Math.abs(Q.tileID.overscaledZ-$t)>Math.abs(de.tileID.overscaledZ-$t),ar=lr&&de.refreshedUponExpiration?1:n.clamp(lr?ft:1-Ct,0,1);return de.refreshedUponExpiration&&ft>=1&&(de.refreshedUponExpiration=!1),Q?{opacity:1,mix:1-ar}:{opacity:ar,mix:0}}else return{opacity:1,mix:0}}function Ml(de,Q,ye){var ae=ye.paint.get("background-color"),me=ye.paint.get("background-opacity");if(me!==0){var Be=de.context,Ke=Be.gl,ft=de.transform,Ct=ft.tileSize,Ut=ye.paint.get("background-pattern");if(!de.isPatternMissing(Ut)){var $t=!Ut&&ae.a===1&&me===1&&de.opaquePassEnabledForLayer()?"opaque":"translucent";if(de.renderPass===$t){var lr=Qt.disabled,ar=de.depthModeForSublayer(0,$t==="opaque"?gr.ReadWrite:gr.ReadOnly),Dr=de.colorModeForRenderPass(),Xr=de.useProgram(Ut?"backgroundPattern":"background"),Yr=ft.coveringTiles({tileSize:Ct});Ut&&(Be.activeTexture.set(Ke.TEXTURE0),de.imageManager.bind(de.context));for(var Gr=ye.getCrossfadeParameters(),Jr=0,vn=Yr;Jr<vn.length;Jr+=1){var In=vn[Jr],Bn=de.transform.calculatePosMatrix(In.toUnwrapped()),Yn=Ut?Cu(Bn,me,de,Ut,{tileID:In,tileSize:Ct},Gr):rl(Bn,me,ae);Xr.draw(Be,Ke.TRIANGLES,ar,lr,Dr,Pt.disabled,Yn,ye.id,de.tileExtentBuffer,de.quadTriangleIndexBuffer,de.tileExtentSegments)}}}}}var Vf=new n.Color(1,0,0,1),ku=new n.Color(0,1,0,1),_c=new n.Color(0,0,1,1),Je=new n.Color(1,0,1,1),at=new n.Color(0,1,1,1);function yt(de){var Q=de.transform.padding,ye=3;kt(de,de.transform.height-(Q.top||0),ye,Vf),kt(de,Q.bottom||0,ye,ku),Dt(de,Q.left||0,ye,_c),Dt(de,de.transform.width-(Q.right||0),ye,Je);var ae=de.transform.centerPoint;xt(de,ae.x,de.transform.height-ae.y,at)}function xt(de,Q,ye,ae){var me=20,Be=2;Ot(de,Q-Be/2,ye-me/2,Be,me,ae),Ot(de,Q-me/2,ye-Be/2,me,Be,ae)}function kt(de,Q,ye,ae){Ot(de,0,Q+ye/2,de.transform.width,ye,ae)}function Dt(de,Q,ye,ae){Ot(de,Q-ye/2,0,ye,de.transform.height,ae)}function Ot(de,Q,ye,ae,me,Be){var Ke=de.context,ft=Ke.gl;ft.enable(ft.SCISSOR_TEST),ft.scissor(Q*n.browser.devicePixelRatio,ye*n.browser.devicePixelRatio,ae*n.browser.devicePixelRatio,me*n.browser.devicePixelRatio),Ke.clear({color:Be}),ft.disable(ft.SCISSOR_TEST)}function pr(de,Q,ye){for(var ae=0;ae<ye.length;ae++)wr(de,Q,ye[ae])}function wr(de,Q,ye){var ae=de.context,me=ae.gl,Be=ye.posMatrix,Ke=de.useProgram("debug"),ft=gr.disabled,Ct=Qt.disabled,Ut=de.colorModeForRenderPass(),$t="$debug";ae.activeTexture.set(me.TEXTURE0),de.emptyTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE),Ke.draw(ae,me.LINE_STRIP,ft,Ct,Ut,Pt.disabled,lo(Be,n.Color.red),$t,de.debugBuffer,de.tileBorderIndexBuffer,de.debugSegments);var lr=Q.getTileByID(ye.key).latestRawTileData,ar=lr&&lr.byteLength||0,Dr=Math.floor(ar/1024),Xr=Q.getTile(ye).tileSize,Yr=512/Math.min(Xr,512)*(ye.overscaledZ/de.transform.zoom)*.5,Gr=ye.canonical.toString();ye.overscaledZ!==ye.canonical.z&&(Gr+=" => "+ye.overscaledZ);var Jr=Gr+" "+Dr+"kb";nr(de,Jr),Ke.draw(ae,me.TRIANGLES,ft,Ct,ut.alphaBlended,Pt.disabled,lo(Be,n.Color.transparent,Yr),$t,de.debugBuffer,de.quadTriangleIndexBuffer,de.debugSegments)}function nr(de,Q){de.initDebugOverlayCanvas();var ye=de.debugOverlayCanvas,ae=de.context.gl,me=de.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,ye.width,ye.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(Q,5,5),me.strokeText(Q,5,5),de.debugOverlayTexture.update(ye),de.debugOverlayTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE)}function Mr(de,Q,ye){var ae=de.context,me=ye.implementation;if(de.renderPass==="offscreen"){var Be=me.prerender;Be&&(de.setCustomLayerDefaults(),ae.setColorMode(de.colorModeForRenderPass()),Be.call(me,ae.gl,de.transform.customLayerMatrix()),ae.setDirty(),de.setBaseState())}else if(de.renderPass==="translucent"){de.setCustomLayerDefaults(),ae.setColorMode(de.colorModeForRenderPass()),ae.setStencilMode(Qt.disabled);var Ke=me.renderingMode==="3d"?new gr(de.context.gl.LEQUAL,gr.ReadWrite,de.depthRangeFor3D):de.depthModeForSublayer(0,gr.ReadOnly);ae.setDepthMode(Ke),me.render(ae.gl,de.transform.customLayerMatrix()),ae.setDirty(),de.setBaseState(),ae.bindFramebuffer.set(null)}}var Ir={symbol:lf,circle:Cc,heatmap:il,line:uf,fill:Ws,"fill-extrusion":Nf,hillshade:Iu,raster:Du,background:Ml,debug:pr,custom:Mr},Nr=function(Q,ye){this.context=new Ht(Q),this.transform=ye,this._tileTextures={},this.setup(),this.numSublayers=Bt.maxUnderzooming+Bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new si,this.gpuTimers={}};Nr.prototype.resize=function(Q,ye){if(this.width=Q*n.browser.devicePixelRatio,this.height=ye*n.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var ae=0,me=this.style._order;ae<me.length;ae+=1){var Be=me[ae];this.style._layers[Be].resize()}},Nr.prototype.setup=function(){var Q=this.context,ye=new n.StructArrayLayout2i4;ye.emplaceBack(0,0),ye.emplaceBack(n.EXTENT,0),ye.emplaceBack(0,n.EXTENT),ye.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=Q.createVertexBuffer(ye,Fo.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);var ae=new n.StructArrayLayout2i4;ae.emplaceBack(0,0),ae.emplaceBack(n.EXTENT,0),ae.emplaceBack(0,n.EXTENT),ae.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=Q.createVertexBuffer(ae,Fo.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);var me=new n.StructArrayLayout4i8;me.emplaceBack(0,0,0,0),me.emplaceBack(n.EXTENT,0,n.EXTENT,0),me.emplaceBack(0,n.EXTENT,0,n.EXTENT),me.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=Q.createVertexBuffer(me,X.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);var Be=new n.StructArrayLayout2i4;Be.emplaceBack(0,0),Be.emplaceBack(1,0),Be.emplaceBack(0,1),Be.emplaceBack(1,1),this.viewportBuffer=Q.createVertexBuffer(Be,Fo.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);var Ke=new n.StructArrayLayout1ui2;Ke.emplaceBack(0),Ke.emplaceBack(1),Ke.emplaceBack(3),Ke.emplaceBack(2),Ke.emplaceBack(0),this.tileBorderIndexBuffer=Q.createIndexBuffer(Ke);var ft=new n.StructArrayLayout3ui6;ft.emplaceBack(0,1,2),ft.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Q.createIndexBuffer(ft),this.emptyTexture=new n.Texture(Q,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Q.gl.RGBA);var Ct=this.context.gl;this.stencilClearMode=new Qt({func:Ct.ALWAYS,mask:0},0,255,Ct.ZERO,Ct.ZERO,Ct.ZERO)},Nr.prototype.clearStencil=function(){var Q=this.context,ye=Q.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var ae=n.create();n.ortho(ae,0,this.width,this.height,0,0,1),n.scale(ae,ae,[ye.drawingBufferWidth,ye.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Q,ye.TRIANGLES,gr.disabled,this.stencilClearMode,ut.disabled,Pt.disabled,Zl(ae),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Nr.prototype._renderTileClippingMasks=function(Q,ye){if(!(this.currentStencilSource===Q.source||!Q.isTileClipped()||!ye||!ye.length)){this.currentStencilSource=Q.source;var ae=this.context,me=ae.gl;this.nextStencilID+ye.length>256&&this.clearStencil(),ae.setColorMode(ut.disabled),ae.setDepthMode(gr.disabled);var Be=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ke=0,ft=ye;Ke<ft.length;Ke+=1){var Ct=ft[Ke],Ut=this._tileClippingMaskIDs[Ct.key]=this.nextStencilID++;Be.draw(ae,me.TRIANGLES,gr.disabled,new Qt({func:me.ALWAYS,mask:0},Ut,255,me.KEEP,me.KEEP,me.REPLACE),ut.disabled,Pt.disabled,Zl(Ct.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Nr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Q=this.nextStencilID++,ye=this.context.gl;return new Qt({func:ye.NOTEQUAL,mask:255},Q,255,ye.KEEP,ye.KEEP,ye.REPLACE)},Nr.prototype.stencilModeForClipping=function(Q){var ye=this.context.gl;return new Qt({func:ye.EQUAL,mask:255},this._tileClippingMaskIDs[Q.key],0,ye.KEEP,ye.KEEP,ye.REPLACE)},Nr.prototype.stencilConfigForOverlap=function(Q){var ye,ae=this.context.gl,me=Q.sort(function(Ut,$t){return $t.overscaledZ-Ut.overscaledZ}),Be=me[me.length-1].overscaledZ,Ke=me[0].overscaledZ-Be+1;if(Ke>1){this.currentStencilSource=void 0,this.nextStencilID+Ke>256&&this.clearStencil();for(var ft={},Ct=0;Ct<Ke;Ct++)ft[Ct+Be]=new Qt({func:ae.GEQUAL,mask:255},Ct+this.nextStencilID,255,ae.KEEP,ae.KEEP,ae.REPLACE);return this.nextStencilID+=Ke,[ft,me]}return[(ye={},ye[Be]=Qt.disabled,ye),me]},Nr.prototype.colorModeForRenderPass=function(){var Q=this.context.gl;if(this._showOverdrawInspector){var ye=8,ae=1/ye;return new ut([Q.CONSTANT_COLOR,Q.ONE],new n.Color(ae,ae,ae,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?ut.unblended:ut.alphaBlended},Nr.prototype.depthModeForSublayer=function(Q,ye,ae){if(!this.opaquePassEnabledForLayer())return gr.disabled;var me=1-((1+this.currentLayer)*this.numSublayers+Q)*this.depthEpsilon;return new gr(ae||this.context.gl.LEQUAL,ye,[me,me])},Nr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Nr.prototype.render=function(Q,ye){var ae=this;this.style=Q,this.options=ye,this.lineAtlas=Q.lineAtlas,this.imageManager=Q.imageManager,this.glyphManager=Q.glyphManager,this.symbolFadeChange=Q.placement.symbolFadeChange(n.browser.now()),this.imageManager.beginFrame();var me=this.style._order,Be=this.style.sourceCaches;for(var Ke in Be){var ft=Be[Ke];ft.used&&ft.prepare(this.context)}var Ct={},Ut={},$t={};for(var lr in Be){var ar=Be[lr];Ct[lr]=ar.getVisibleCoordinates(),Ut[lr]=Ct[lr].slice().reverse(),$t[lr]=ar.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Dr=0;Dr<me.length;Dr++){var Xr=me[Dr];if(this.style._layers[Xr].is3D()){this.opaquePassCutoff=Dr;break}}this.renderPass="offscreen";for(var Yr=0,Gr=me;Yr<Gr.length;Yr+=1){var Jr=Gr[Yr],vn=this.style._layers[Jr];if(!(!vn.hasOffscreenPass()||vn.isHidden(this.transform.zoom))){var In=Ut[vn.source];vn.type!=="custom"&&!In.length||this.renderLayer(this,Be[vn.source],vn,In)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ye.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ye.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Q._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=me.length-1;this.currentLayer>=0;this.currentLayer--){var Bn=this.style._layers[me[this.currentLayer]],Yn=Be[Bn.source],Xn=Ct[Bn.source];this._renderTileClippingMasks(Bn,Xn),this.renderLayer(this,Yn,Bn,Xn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<me.length;this.currentLayer++){var Gn=this.style._layers[me[this.currentLayer]],jn=Be[Gn.source],ri=(Gn.type==="symbol"?$t:Ut)[Gn.source];this._renderTileClippingMasks(Gn,Ct[Gn.source]),this.renderLayer(this,jn,Gn,ri)}if(this.options.showTileBoundaries){var ui,mi,di=n.values(this.style._layers);di.forEach(function(ki){ki.source&&!ki.isHidden(ae.transform.zoom)&&(ki.source!==(mi&&mi.id)&&(mi=ae.style.sourceCaches[ki.source]),(!ui||ui.getSource().maxzoom<mi.getSource().maxzoom)&&(ui=mi))}),ui&&Ir.debug(this,ui,ui.getVisibleCoordinates())}this.options.showPadding&&yt(this),this.context.setDefault()},Nr.prototype.renderLayer=function(Q,ye,ae,me){ae.isHidden(this.transform.zoom)||ae.type!=="background"&&ae.type!=="custom"&&!me.length||(this.id=ae.id,this.gpuTimingStart(ae),Ir[ae.type](Q,ye,ae,me,this.style.placement.variableOffsets),this.gpuTimingEnd())},Nr.prototype.gpuTimingStart=function(Q){if(this.options.gpuTiming){var ye=this.context.extTimerQuery,ae=this.gpuTimers[Q.id];ae||(ae=this.gpuTimers[Q.id]={calls:0,cpuTime:0,query:ye.createQueryEXT()}),ae.calls++,ye.beginQueryEXT(ye.TIME_ELAPSED_EXT,ae.query)}},Nr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var Q=this.context.extTimerQuery;Q.endQueryEXT(Q.TIME_ELAPSED_EXT)}},Nr.prototype.collectGpuTimers=function(){var Q=this.gpuTimers;return this.gpuTimers={},Q},Nr.prototype.queryGpuTimers=function(Q){var ye={};for(var ae in Q){var me=Q[ae],Be=this.context.extTimerQuery,Ke=Be.getQueryObjectEXT(me.query,Be.QUERY_RESULT_EXT)/(1e3*1e3);Be.deleteQueryEXT(me.query),ye[ae]=Ke}return ye},Nr.prototype.translatePosMatrix=function(Q,ye,ae,me,Be){if(!ae[0]&&!ae[1])return Q;var Ke=Be?me==="map"?this.transform.angle:0:me==="viewport"?-this.transform.angle:0;if(Ke){var ft=Math.sin(Ke),Ct=Math.cos(Ke);ae=[ae[0]*Ct-ae[1]*ft,ae[0]*ft+ae[1]*Ct]}var Ut=[Be?ae[0]:hn(ye,ae[0],this.transform.zoom),Be?ae[1]:hn(ye,ae[1],this.transform.zoom),0],$t=new Float32Array(16);return n.translate($t,Q,Ut),$t},Nr.prototype.saveTileTexture=function(Q){var ye=this._tileTextures[Q.size[0]];ye?ye.push(Q):this._tileTextures[Q.size[0]]=[Q]},Nr.prototype.getTileTexture=function(Q){var ye=this._tileTextures[Q];return ye&&ye.length>0?ye.pop():null},Nr.prototype.isPatternMissing=function(Q){if(!Q)return!1;if(!Q.from||!Q.to)return!0;var ye=this.imageManager.getPattern(Q.from.toString()),ae=this.imageManager.getPattern(Q.to.toString());return!ye||!ae},Nr.prototype.useProgram=function(Q,ye){this.cache=this.cache||{};var ae=""+Q+(ye?ye.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[ae]||(this.cache[ae]=new kf(this.context,Q,yc[Q],ye,nl[Q],this._showOverdrawInspector)),this.cache[ae]},Nr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Nr.prototype.setBaseState=function(){var Q=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Q.FUNC_ADD)},Nr.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var Q=this.context.gl;this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,Q.RGBA)}},Nr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var an=function(Q,ye){this.points=Q,this.planes=ye};an.fromInvProjectionMatrix=function(Q,ye,ae){var me=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Be=Math.pow(2,ae),Ke=me.map(function(Ut){return n.transformMat4([],Ut,Q)}).map(function(Ut){return n.scale$1([],Ut,1/Ut[3]/ye*Be)}),ft=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Ct=ft.map(function(Ut){var $t=n.sub([],Ke[Ut[0]],Ke[Ut[1]]),lr=n.sub([],Ke[Ut[2]],Ke[Ut[1]]),ar=n.normalize([],n.cross([],$t,lr)),Dr=-n.dot(ar,Ke[Ut[1]]);return ar.concat(Dr)});return new an(Ke,Ct)};var mn=function(Q,ye){this.min=Q,this.max=ye,this.center=n.scale$2([],n.add([],this.min,this.max),.5)};mn.prototype.quadrant=function(Q){for(var ye=[Q%2===0,Q<2],ae=n.clone$2(this.min),me=n.clone$2(this.max),Be=0;Be<ye.length;Be++)ae[Be]=ye[Be]?this.min[Be]:this.center[Be],me[Be]=ye[Be]?this.center[Be]:this.max[Be];return me[2]=this.max[2],new mn(ae,me)},mn.prototype.distanceX=function(Q){var ye=Math.max(Math.min(this.max[0],Q[0]),this.min[0]);return ye-Q[0]},mn.prototype.distanceY=function(Q){var ye=Math.max(Math.min(this.max[1],Q[1]),this.min[1]);return ye-Q[1]},mn.prototype.intersects=function(Q){for(var ye=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],ae=!0,me=0;me<Q.planes.length;me++){for(var Be=Q.planes[me],Ke=0,ft=0;ft<ye.length;ft++)Ke+=n.dot$1(Be,ye[ft])>=0;if(Ke===0)return 0;Ke!==ye.length&&(ae=!1)}if(ae)return 2;for(var Ct=0;Ct<3;Ct++){for(var Ut=Number.MAX_VALUE,$t=-Number.MAX_VALUE,lr=0;lr<Q.points.length;lr++){var ar=Q.points[lr][Ct]-this.min[Ct];Ut=Math.min(Ut,ar),$t=Math.max($t,ar)}if($t<0||Ut>this.max[Ct]-this.min[Ct])return 0}return 1};var _n=function(Q,ye,ae,me){if(Q===void 0&&(Q=0),ye===void 0&&(ye=0),ae===void 0&&(ae=0),me===void 0&&(me=0),isNaN(Q)||Q<0||isNaN(ye)||ye<0||isNaN(ae)||ae<0||isNaN(me)||me<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Q,this.bottom=ye,this.left=ae,this.right=me};_n.prototype.interpolate=function(Q,ye,ae){return ye.top!=null&&Q.top!=null&&(this.top=n.number(Q.top,ye.top,ae)),ye.bottom!=null&&Q.bottom!=null&&(this.bottom=n.number(Q.bottom,ye.bottom,ae)),ye.left!=null&&Q.left!=null&&(this.left=n.number(Q.left,ye.left,ae)),ye.right!=null&&Q.right!=null&&(this.right=n.number(Q.right,ye.right,ae)),this},_n.prototype.getCenter=function(Q,ye){var ae=n.clamp((this.left+Q-this.right)/2,0,Q),me=n.clamp((this.top+ye-this.bottom)/2,0,ye);return new n.Point(ae,me)},_n.prototype.equals=function(Q){return this.top===Q.top&&this.bottom===Q.bottom&&this.left===Q.left&&this.right===Q.right},_n.prototype.clone=function(){return new _n(this.top,this.bottom,this.left,this.right)},_n.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Rn=function(Q,ye,ae,me,Be){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Be===void 0?!0:Be,this._minZoom=Q||0,this._maxZoom=ye||22,this._minPitch=ae??0,this._maxPitch=me??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _n,this._posMatrixCache={},this._alignedPosMatrixCache={}},Zn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Rn.prototype.clone=function(){var Q=new Rn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Q.tileSize=this.tileSize,Q.latRange=this.latRange,Q.width=this.width,Q.height=this.height,Q._center=this._center,Q.zoom=this.zoom,Q.angle=this.angle,Q._fov=this._fov,Q._pitch=this._pitch,Q._unmodified=this._unmodified,Q._edgeInsets=this._edgeInsets.clone(),Q._calcMatrices(),Q},Zn.minZoom.get=function(){return this._minZoom},Zn.minZoom.set=function(de){this._minZoom!==de&&(this._minZoom=de,this.zoom=Math.max(this.zoom,de))},Zn.maxZoom.get=function(){return this._maxZoom},Zn.maxZoom.set=function(de){this._maxZoom!==de&&(this._maxZoom=de,this.zoom=Math.min(this.zoom,de))},Zn.minPitch.get=function(){return this._minPitch},Zn.minPitch.set=function(de){this._minPitch!==de&&(this._minPitch=de,this.pitch=Math.max(this.pitch,de))},Zn.maxPitch.get=function(){return this._maxPitch},Zn.maxPitch.set=function(de){this._maxPitch!==de&&(this._maxPitch=de,this.pitch=Math.min(this.pitch,de))},Zn.renderWorldCopies.get=function(){return this._renderWorldCopies},Zn.renderWorldCopies.set=function(de){de===void 0?de=!0:de===null&&(de=!1),this._renderWorldCopies=de},Zn.worldSize.get=function(){return this.tileSize*this.scale},Zn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Zn.size.get=function(){return new n.Point(this.width,this.height)},Zn.bearing.get=function(){return-this.angle/Math.PI*180},Zn.bearing.set=function(de){var Q=-n.wrap(de,-180,180)*Math.PI/180;this.angle!==Q&&(this._unmodified=!1,this.angle=Q,this._calcMatrices(),this.rotationMatrix=n.create$2(),n.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Zn.pitch.get=function(){return this._pitch/Math.PI*180},Zn.pitch.set=function(de){var Q=n.clamp(de,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Q&&(this._unmodified=!1,this._pitch=Q,this._calcMatrices())},Zn.fov.get=function(){return this._fov/Math.PI*180},Zn.fov.set=function(de){de=Math.max(.01,Math.min(60,de)),this._fov!==de&&(this._unmodified=!1,this._fov=de/180*Math.PI,this._calcMatrices())},Zn.zoom.get=function(){return this._zoom},Zn.zoom.set=function(de){var Q=Math.min(Math.max(de,this.minZoom),this.maxZoom);this._zoom!==Q&&(this._unmodified=!1,this._zoom=Q,this.scale=this.zoomScale(Q),this.tileZoom=Math.floor(Q),this.zoomFraction=Q-this.tileZoom,this._constrain(),this._calcMatrices())},Zn.center.get=function(){return this._center},Zn.center.set=function(de){de.lat===this._center.lat&&de.lng===this._center.lng||(this._unmodified=!1,this._center=de,this._constrain(),this._calcMatrices())},Zn.padding.get=function(){return this._edgeInsets.toJSON()},Zn.padding.set=function(de){this._edgeInsets.equals(de)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,de,1),this._calcMatrices())},Zn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Rn.prototype.isPaddingEqual=function(Q){return this._edgeInsets.equals(Q)},Rn.prototype.interpolatePadding=function(Q,ye,ae){this._unmodified=!1,this._edgeInsets.interpolate(Q,ye,ae),this._constrain(),this._calcMatrices()},Rn.prototype.coveringZoomLevel=function(Q){var ye=(Q.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Q.tileSize));return Math.max(0,ye)},Rn.prototype.getVisibleUnwrappedCoordinates=function(Q){var ye=[new n.UnwrappedTileID(0,Q)];if(this._renderWorldCopies)for(var ae=this.pointCoordinate(new n.Point(0,0)),me=this.pointCoordinate(new n.Point(this.width,0)),Be=this.pointCoordinate(new n.Point(this.width,this.height)),Ke=this.pointCoordinate(new n.Point(0,this.height)),ft=Math.floor(Math.min(ae.x,me.x,Be.x,Ke.x)),Ct=Math.floor(Math.max(ae.x,me.x,Be.x,Ke.x)),Ut=1,$t=ft-Ut;$t<=Ct+Ut;$t++)$t!==0&&ye.push(new n.UnwrappedTileID($t,Q));return ye},Rn.prototype.coveringTiles=function(Q){var ye=this.coveringZoomLevel(Q),ae=ye;if(Q.minzoom!==void 0&&ye<Q.minzoom)return[];Q.maxzoom!==void 0&&ye>Q.maxzoom&&(ye=Q.maxzoom);var me=n.MercatorCoordinate.fromLngLat(this.center),Be=Math.pow(2,ye),Ke=[Be*me.x,Be*me.y,0],ft=an.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ye),Ct=Q.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ct=ye);var Ut=3,$t=function(di){return{aabb:new mn([di*Be,0,0],[(di+1)*Be,Be,0]),zoom:0,x:0,y:0,wrap:di,fullyVisible:!1}},lr=[],ar=[],Dr=ye,Xr=Q.reparseOverscaled?ae:ye;if(this._renderWorldCopies)for(var Yr=1;Yr<=3;Yr++)lr.push($t(-Yr)),lr.push($t(Yr));for(lr.push($t(0));lr.length>0;){var Gr=lr.pop(),Jr=Gr.x,vn=Gr.y,In=Gr.fullyVisible;if(!In){var Bn=Gr.aabb.intersects(ft);if(Bn===0)continue;In=Bn===2}var Yn=Gr.aabb.distanceX(Ke),Xn=Gr.aabb.distanceY(Ke),Gn=Math.max(Math.abs(Yn),Math.abs(Xn)),jn=Ut+(1<<Dr-Gr.zoom)-2;if(Gr.zoom===Dr||Gn>jn&&Gr.zoom>=Ct){ar.push({tileID:new n.OverscaledTileID(Gr.zoom===Dr?Xr:Gr.zoom,Gr.wrap,Gr.zoom,Jr,vn),distanceSq:n.sqrLen([Ke[0]-.5-Jr,Ke[1]-.5-vn])});continue}for(var ri=0;ri<4;ri++){var ui=(Jr<<1)+ri%2,mi=(vn<<1)+(ri>>1);lr.push({aabb:Gr.aabb.quadrant(ri),zoom:Gr.zoom+1,x:ui,y:mi,wrap:Gr.wrap,fullyVisible:In})}}return ar.sort(function(di,ki){return di.distanceSq-ki.distanceSq}).map(function(di){return di.tileID})},Rn.prototype.resize=function(Q,ye){this.width=Q,this.height=ye,this.pixelsToGLUnits=[2/Q,-2/ye],this._constrain(),this._calcMatrices()},Zn.unmodified.get=function(){return this._unmodified},Rn.prototype.zoomScale=function(Q){return Math.pow(2,Q)},Rn.prototype.scaleZoom=function(Q){return Math.log(Q)/Math.LN2},Rn.prototype.project=function(Q){var ye=n.clamp(Q.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.Point(n.mercatorXfromLng(Q.lng)*this.worldSize,n.mercatorYfromLat(ye)*this.worldSize)},Rn.prototype.unproject=function(Q){return new n.MercatorCoordinate(Q.x/this.worldSize,Q.y/this.worldSize).toLngLat()},Zn.point.get=function(){return this.project(this.center)},Rn.prototype.setLocationAtPoint=function(Q,ye){var ae=this.pointCoordinate(ye),me=this.pointCoordinate(this.centerPoint),Be=this.locationCoordinate(Q),Ke=new n.MercatorCoordinate(Be.x-(ae.x-me.x),Be.y-(ae.y-me.y));this.center=this.coordinateLocation(Ke),this._renderWorldCopies&&(this.center=this.center.wrap())},Rn.prototype.locationPoint=function(Q){return this.coordinatePoint(this.locationCoordinate(Q))},Rn.prototype.pointLocation=function(Q){return this.coordinateLocation(this.pointCoordinate(Q))},Rn.prototype.locationCoordinate=function(Q){return n.MercatorCoordinate.fromLngLat(Q)},Rn.prototype.coordinateLocation=function(Q){return Q.toLngLat()},Rn.prototype.pointCoordinate=function(Q){var ye=0,ae=[Q.x,Q.y,0,1],me=[Q.x,Q.y,1,1];n.transformMat4(ae,ae,this.pixelMatrixInverse),n.transformMat4(me,me,this.pixelMatrixInverse);var Be=ae[3],Ke=me[3],ft=ae[0]/Be,Ct=me[0]/Ke,Ut=ae[1]/Be,$t=me[1]/Ke,lr=ae[2]/Be,ar=me[2]/Ke,Dr=lr===ar?0:(ye-lr)/(ar-lr);return new n.MercatorCoordinate(n.number(ft,Ct,Dr)/this.worldSize,n.number(Ut,$t,Dr)/this.worldSize)},Rn.prototype.coordinatePoint=function(Q){var ye=[Q.x*this.worldSize,Q.y*this.worldSize,0,1];return n.transformMat4(ye,ye,this.pixelMatrix),new n.Point(ye[0]/ye[3],ye[1]/ye[3])},Rn.prototype.getBounds=function(){return new n.LngLatBounds().extend(this.pointLocation(new n.Point(0,0))).extend(this.pointLocation(new n.Point(this.width,0))).extend(this.pointLocation(new n.Point(this.width,this.height))).extend(this.pointLocation(new n.Point(0,this.height)))},Rn.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Rn.prototype.setMaxBounds=function(Q){Q?(this.lngRange=[Q.getWest(),Q.getEast()],this.latRange=[Q.getSouth(),Q.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Rn.prototype.calculatePosMatrix=function(Q,ye){ye===void 0&&(ye=!1);var ae=Q.key,me=ye?this._alignedPosMatrixCache:this._posMatrixCache;if(me[ae])return me[ae];var Be=Q.canonical,Ke=this.worldSize/this.zoomScale(Be.z),ft=Be.x+Math.pow(2,Be.z)*Q.wrap,Ct=n.identity(new Float64Array(16));return n.translate(Ct,Ct,[ft*Ke,Be.y*Ke,0]),n.scale(Ct,Ct,[Ke/n.EXTENT,Ke/n.EXTENT,1]),n.multiply(Ct,ye?this.alignedProjMatrix:this.projMatrix,Ct),me[ae]=new Float32Array(Ct),me[ae]},Rn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Rn.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var Q=-90,ye=90,ae=-180,me=180,Be,Ke,ft,Ct,Ut=this.size,$t=this._unmodified;if(this.latRange){var lr=this.latRange;Q=n.mercatorYfromLat(lr[1])*this.worldSize,ye=n.mercatorYfromLat(lr[0])*this.worldSize,Be=ye-Q<Ut.y?Ut.y/(ye-Q):0}if(this.lngRange){var ar=this.lngRange;ae=n.mercatorXfromLng(ar[0])*this.worldSize,me=n.mercatorXfromLng(ar[1])*this.worldSize,Ke=me-ae<Ut.x?Ut.x/(me-ae):0}var Dr=this.point,Xr=Math.max(Ke||0,Be||0);if(Xr){this.center=this.unproject(new n.Point(Ke?(me+ae)/2:Dr.x,Be?(ye+Q)/2:Dr.y)),this.zoom+=this.scaleZoom(Xr),this._unmodified=$t,this._constraining=!1;return}if(this.latRange){var Yr=Dr.y,Gr=Ut.y/2;Yr-Gr<Q&&(Ct=Q+Gr),Yr+Gr>ye&&(Ct=ye-Gr)}if(this.lngRange){var Jr=Dr.x,vn=Ut.x/2;Jr-vn<ae&&(ft=ae+vn),Jr+vn>me&&(ft=me-vn)}(ft!==void 0||Ct!==void 0)&&(this.center=this.unproject(new n.Point(ft!==void 0?ft:Dr.x,Ct!==void 0?Ct:Dr.y))),this._unmodified=$t,this._constraining=!1}},Rn.prototype._calcMatrices=function(){if(this.height){var Q=this._fov/2,ye=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(Q)*this.height;var ae=Math.PI/2+this._pitch,me=this._fov*(.5+ye.y/this.height),Be=Math.sin(me)*this.cameraToCenterDistance/Math.sin(n.clamp(Math.PI-ae-me,.01,Math.PI-.01)),Ke=this.point,ft=Ke.x,Ct=Ke.y,Ut=Math.cos(Math.PI/2-this._pitch)*Be+this.cameraToCenterDistance,$t=Ut*1.01,lr=this.height/50,ar=new Float64Array(16);n.perspective(ar,this._fov,this.width/this.height,lr,$t),ar[8]=-ye.x*2/this.width,ar[9]=ye.y*2/this.height,n.scale(ar,ar,[1,-1,1]),n.translate(ar,ar,[0,0,-this.cameraToCenterDistance]),n.rotateX(ar,ar,this._pitch),n.rotateZ(ar,ar,this.angle),n.translate(ar,ar,[-ft,-Ct,0]),this.mercatorMatrix=n.scale([],ar,[this.worldSize,this.worldSize,this.worldSize]),n.scale(ar,ar,[1,1,n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ar,this.invProjMatrix=n.invert([],this.projMatrix);var Dr=this.width%2/2,Xr=this.height%2/2,Yr=Math.cos(this.angle),Gr=Math.sin(this.angle),Jr=ft-Math.round(ft)+Yr*Dr+Gr*Xr,vn=Ct-Math.round(Ct)+Yr*Xr+Gr*Dr,In=new Float64Array(ar);if(n.translate(In,In,[Jr>.5?Jr-1:Jr,vn>.5?vn-1:vn,0]),this.alignedProjMatrix=In,ar=n.create(),n.scale(ar,ar,[this.width/2,-this.height/2,1]),n.translate(ar,ar,[1,-1,0]),this.labelPlaneMatrix=ar,ar=n.create(),n.scale(ar,ar,[1,-1,1]),n.translate(ar,ar,[-1,-1,0]),n.scale(ar,ar,[2/this.width,2/this.height,1]),this.glCoordMatrix=ar,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ar=n.invert(new Float64Array(16),this.pixelMatrix),!ar)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ar,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Rn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Q=this.pointCoordinate(new n.Point(0,0)),ye=[Q.x*this.worldSize,Q.y*this.worldSize,0,1],ae=n.transformMat4(ye,ye,this.pixelMatrix);return ae[3]/this.cameraToCenterDistance},Rn.prototype.getCameraPoint=function(){var Q=this._pitch,ye=Math.tan(Q)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.Point(0,ye))},Rn.prototype.getCameraQueryGeometry=function(Q){var ye=this.getCameraPoint();if(Q.length===1)return[Q[0],ye];for(var ae=ye.x,me=ye.y,Be=ye.x,Ke=ye.y,ft=0,Ct=Q;ft<Ct.length;ft+=1){var Ut=Ct[ft];ae=Math.min(ae,Ut.x),me=Math.min(me,Ut.y),Be=Math.max(Be,Ut.x),Ke=Math.max(Ke,Ut.y)}return[new n.Point(ae,me),new n.Point(Be,me),new n.Point(Be,Ke),new n.Point(ae,Ke),new n.Point(ae,me)]},Object.defineProperties(Rn.prototype,Zn);function _i(de,Q){var ye=!1,ae=null,me=function(){ae=null,ye&&(de(),ae=setTimeout(me,Q),ye=!1)};return function(){return ye=!0,ae||me(),ae}}var Pi=function(Q){this._hashName=Q&&encodeURIComponent(Q),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=_i(this._updateHashUnthrottled.bind(this),30*1e3/100)};Pi.prototype.addTo=function(Q){return this._map=Q,n.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Pi.prototype.remove=function(){return n.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Pi.prototype.getHashString=function(Q){var ye=this._map.getCenter(),ae=Math.round(this._map.getZoom()*100)/100,me=Math.ceil((ae*Math.LN2+Math.log(512/360/.5))/Math.LN10),Be=Math.pow(10,me),Ke=Math.round(ye.lng*Be)/Be,ft=Math.round(ye.lat*Be)/Be,Ct=this._map.getBearing(),Ut=this._map.getPitch(),$t="";if(Q?$t+="/"+Ke+"/"+ft+"/"+ae:$t+=ae+"/"+ft+"/"+Ke,(Ct||Ut)&&($t+="/"+Math.round(Ct*10)/10),Ut&&($t+="/"+Math.round(Ut)),this._hashName){var lr=this._hashName,ar=!1,Dr=n.window.location.hash.slice(1).split("&").map(function(Xr){var Yr=Xr.split("=")[0];return Yr===lr?(ar=!0,Yr+"="+$t):Xr}).filter(function(Xr){return Xr});return ar||Dr.push(lr+"="+$t),"#"+Dr.join("&")}return"#"+$t},Pi.prototype._getCurrentHash=function(){var Q=this,ye=n.window.location.hash.replace("#","");if(this._hashName){var ae;return ye.split("&").map(function(me){return me.split("=")}).forEach(function(me){me[0]===Q._hashName&&(ae=me)}),(ae&&ae[1]||"").split("/")}return ye.split("/")},Pi.prototype._onHashChange=function(){var Q=this._getCurrentHash();if(Q.length>=3&&!Q.some(function(ae){return isNaN(ae)})){var ye=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Q[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Q[2],+Q[1]],zoom:+Q[0],bearing:ye,pitch:+(Q[4]||0)}),!0}return!1},Pi.prototype._updateHashUnthrottled=function(){var Q=n.window.location.href.replace(/(#.+)?$/,this.getHashString());try{n.window.history.replaceState(n.window.history.state,null,Q)}catch{}};var Ii={linearity:.3,easing:n.bezier(0,0,.3,1)},zi=n.extend({deceleration:2500,maxSpeed:1400},Ii),Zi=n.extend({deceleration:20,maxSpeed:1400},Ii),ya=n.extend({deceleration:1e3,maxSpeed:360},Ii),Za=n.extend({deceleration:1e3,maxSpeed:90},Ii),ve=function(Q){this._map=Q,this.clear()};ve.prototype.clear=function(){this._inertiaBuffer=[]},ve.prototype.record=function(Q){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.browser.now(),settings:Q})},ve.prototype._drainInertiaBuffer=function(){for(var Q=this._inertiaBuffer,ye=n.browser.now(),ae=160;Q.length>0&&ye-Q[0].time>ae;)Q.shift()},ve.prototype._onMoveEnd=function(Q){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ye={zoom:0,bearing:0,pitch:0,pan:new n.Point(0,0),pinchAround:void 0,around:void 0},ae=0,me=this._inertiaBuffer;ae<me.length;ae+=1){var Be=me[ae],Ke=Be.settings;ye.zoom+=Ke.zoomDelta||0,ye.bearing+=Ke.bearingDelta||0,ye.pitch+=Ke.pitchDelta||0,Ke.panDelta&&ye.pan._add(Ke.panDelta),Ke.around&&(ye.around=Ke.around),Ke.pinchAround&&(ye.pinchAround=Ke.pinchAround)}var ft=this._inertiaBuffer[this._inertiaBuffer.length-1],Ct=ft.time-this._inertiaBuffer[0].time,Ut={};if(ye.pan.mag()){var $t=Ve(ye.pan.mag(),Ct,n.extend({},zi,Q||{}));Ut.offset=ye.pan.mult($t.amount/ye.pan.mag()),Ut.center=this._map.transform.center,Se(Ut,$t)}if(ye.zoom){var lr=Ve(ye.zoom,Ct,Zi);Ut.zoom=this._map.transform.zoom+lr.amount,Se(Ut,lr)}if(ye.bearing){var ar=Ve(ye.bearing,Ct,ya);Ut.bearing=this._map.transform.bearing+n.clamp(ar.amount,-179,179),Se(Ut,ar)}if(ye.pitch){var Dr=Ve(ye.pitch,Ct,Za);Ut.pitch=this._map.transform.pitch+Dr.amount,Se(Ut,Dr)}if(Ut.zoom||Ut.bearing){var Xr=ye.pinchAround===void 0?ye.around:ye.pinchAround;Ut.around=Xr?this._map.unproject(Xr):this._map.getCenter()}return this.clear(),n.extend(Ut,{noMoveStart:!0})}};function Se(de,Q){(!de.duration||de.duration<Q.duration)&&(de.duration=Q.duration,de.easing=Q.easing)}function Ve(de,Q,ye){var ae=ye.maxSpeed,me=ye.linearity,Be=ye.deceleration,Ke=n.clamp(de*me/(Q/1e3),-ae,ae),ft=Math.abs(Ke)/(Be*me);return{easing:ye.easing,duration:ft*1e3,amount:Ke*(ft/2)}}var tt=function(de){function Q(ae,me,Be,Ke){Ke===void 0&&(Ke={});var ft=T.mousePos(me.getCanvasContainer(),Be),Ct=me.unproject(ft);de.call(this,ae,n.extend({point:ft,lngLat:Ct,originalEvent:Be},Ke)),this._defaultPrevented=!1,this.target=me}de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q;var ye={defaultPrevented:{configurable:!0}};return Q.prototype.preventDefault=function(){this._defaultPrevented=!0},ye.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Q.prototype,ye),Q}(n.Event),it=function(de){function Q(ae,me,Be){var Ke=ae==="touchend"?Be.changedTouches:Be.touches,ft=T.touchPos(me.getCanvasContainer(),Ke),Ct=ft.map(function(lr){return me.unproject(lr)}),Ut=ft.reduce(function(lr,ar,Dr,Xr){return lr.add(ar.div(Xr.length))},new n.Point(0,0)),$t=me.unproject(Ut);de.call(this,ae,{points:ft,point:Ut,lngLats:Ct,lngLat:$t,originalEvent:Be}),this._defaultPrevented=!1}de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q;var ye={defaultPrevented:{configurable:!0}};return Q.prototype.preventDefault=function(){this._defaultPrevented=!0},ye.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Q.prototype,ye),Q}(n.Event),ct=function(de){function Q(ae,me,Be){de.call(this,ae,{originalEvent:Be}),this._defaultPrevented=!1}de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q;var ye={defaultPrevented:{configurable:!0}};return Q.prototype.preventDefault=function(){this._defaultPrevented=!0},ye.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Q.prototype,ye),Q}(n.Event),Lt=function(Q,ye){this._map=Q,this._clickTolerance=ye.clickTolerance};Lt.prototype.reset=function(){delete this._mousedownPos},Lt.prototype.wheel=function(Q){return this._firePreventable(new ct(Q.type,this._map,Q))},Lt.prototype.mousedown=function(Q,ye){return this._mousedownPos=ye,this._firePreventable(new tt(Q.type,this._map,Q))},Lt.prototype.mouseup=function(Q){this._map.fire(new tt(Q.type,this._map,Q))},Lt.prototype.click=function(Q,ye){this._mousedownPos&&this._mousedownPos.dist(ye)>=this._clickTolerance||this._map.fire(new tt(Q.type,this._map,Q))},Lt.prototype.dblclick=function(Q){return this._firePreventable(new tt(Q.type,this._map,Q))},Lt.prototype.mouseover=function(Q){this._map.fire(new tt(Q.type,this._map,Q))},Lt.prototype.mouseout=function(Q){this._map.fire(new tt(Q.type,this._map,Q))},Lt.prototype.touchstart=function(Q){return this._firePreventable(new it(Q.type,this._map,Q))},Lt.prototype.touchmove=function(Q){this._map.fire(new it(Q.type,this._map,Q))},Lt.prototype.touchend=function(Q){this._map.fire(new it(Q.type,this._map,Q))},Lt.prototype.touchcancel=function(Q){this._map.fire(new it(Q.type,this._map,Q))},Lt.prototype._firePreventable=function(Q){if(this._map.fire(Q),Q.defaultPrevented)return{}},Lt.prototype.isEnabled=function(){return!0},Lt.prototype.isActive=function(){return!1},Lt.prototype.enable=function(){},Lt.prototype.disable=function(){};var At=function(Q){this._map=Q};At.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},At.prototype.mousemove=function(Q){this._map.fire(new tt(Q.type,this._map,Q))},At.prototype.mousedown=function(){this._delayContextMenu=!0},At.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new tt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},At.prototype.contextmenu=function(Q){this._delayContextMenu?this._contextMenuEvent=Q:this._map.fire(new tt(Q.type,this._map,Q)),this._map.listens("contextmenu")&&Q.preventDefault()},At.prototype.isEnabled=function(){return!0},At.prototype.isActive=function(){return!1},At.prototype.enable=function(){},At.prototype.disable=function(){};var Vt=function(Q,ye){this._map=Q,this._el=Q.getCanvasContainer(),this._container=Q.getContainer(),this._clickTolerance=ye.clickTolerance||1};Vt.prototype.isEnabled=function(){return!!this._enabled},Vt.prototype.isActive=function(){return!!this._active},Vt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vt.prototype.mousedown=function(Q,ye){this.isEnabled()&&Q.shiftKey&&Q.button===0&&(T.disableDrag(),this._startPos=this._lastPos=ye,this._active=!0)},Vt.prototype.mousemoveWindow=function(Q,ye){if(this._active){var ae=ye;if(!(this._lastPos.equals(ae)||!this._box&&ae.dist(this._startPos)<this._clickTolerance)){var me=this._startPos;this._lastPos=ae,this._box||(this._box=T.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Q));var Be=Math.min(me.x,ae.x),Ke=Math.max(me.x,ae.x),ft=Math.min(me.y,ae.y),Ct=Math.max(me.y,ae.y);T.setTransform(this._box,"translate("+Be+"px,"+ft+"px)"),this._box.style.width=Ke-Be+"px",this._box.style.height=Ct-ft+"px"}}},Vt.prototype.mouseupWindow=function(Q,ye){var ae=this;if(this._active&&Q.button===0){var me=this._startPos,Be=ye;if(this.reset(),T.suppressClick(),me.x===Be.x&&me.y===Be.y)this._fireEvent("boxzoomcancel",Q);else return this._map.fire(new n.Event("boxzoomend",{originalEvent:Q})),{cameraAnimation:function(Ke){return Ke.fitScreenCoordinates(me,Be,ae._map.getBearing(),{linear:!0})}}}},Vt.prototype.keydown=function(Q){this._active&&Q.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",Q))},Vt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos},Vt.prototype._fireEvent=function(Q,ye){return this._map.fire(new n.Event(Q,{originalEvent:ye}))};function Wt(de,Q){for(var ye={},ae=0;ae<de.length;ae++)ye[de[ae].identifier]=Q[ae];return ye}function tr(de){for(var Q=new n.Point(0,0),ye=0,ae=de;ye<ae.length;ye+=1){var me=ae[ye];Q._add(me)}return Q.div(de.length)}var Cr=500,Lr=500,Qr=30,on=function(Q){this.reset(),this.numTouches=Q.numTouches};on.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},on.prototype.touchstart=function(Q,ye,ae){(this.centroid||ae.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=Q.timeStamp),ae.length===this.numTouches&&(this.centroid=tr(ye),this.touches=Wt(ae,ye)))},on.prototype.touchmove=function(Q,ye,ae){if(!(this.aborted||!this.centroid)){var me=Wt(ae,ye);for(var Be in this.touches){var Ke=this.touches[Be],ft=me[Be];(!ft||ft.dist(Ke)>Qr)&&(this.aborted=!0)}}},on.prototype.touchend=function(Q,ye,ae){if((!this.centroid||Q.timeStamp-this.startTime>Lr)&&(this.aborted=!0),ae.length===0){var me=!this.aborted&&this.centroid;if(this.reset(),me)return me}};var Pr=function(Q){this.singleTap=new on(Q),this.numTaps=Q.numTaps,this.reset()};Pr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Pr.prototype.touchstart=function(Q,ye,ae){this.singleTap.touchstart(Q,ye,ae)},Pr.prototype.touchmove=function(Q,ye,ae){this.singleTap.touchmove(Q,ye,ae)},Pr.prototype.touchend=function(Q,ye,ae){var me=this.singleTap.touchend(Q,ye,ae);if(me){var Be=Q.timeStamp-this.lastTime<Cr,Ke=!this.lastTap||this.lastTap.dist(me)<Qr;if((!Be||!Ke)&&this.reset(),this.count++,this.lastTime=Q.timeStamp,this.lastTap=me,this.count===this.numTaps)return this.reset(),me}};var Ur=function(){this._zoomIn=new Pr({numTouches:1,numTaps:2}),this._zoomOut=new Pr({numTouches:2,numTaps:1}),this.reset()};Ur.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ur.prototype.touchstart=function(Q,ye,ae){this._zoomIn.touchstart(Q,ye,ae),this._zoomOut.touchstart(Q,ye,ae)},Ur.prototype.touchmove=function(Q,ye,ae){this._zoomIn.touchmove(Q,ye,ae),this._zoomOut.touchmove(Q,ye,ae)},Ur.prototype.touchend=function(Q,ye,ae){var me=this,Be=this._zoomIn.touchend(Q,ye,ae),Ke=this._zoomOut.touchend(Q,ye,ae);if(Be)return this._active=!0,Q.preventDefault(),setTimeout(function(){return me.reset()},0),{cameraAnimation:function(ft){return ft.easeTo({duration:300,zoom:ft.getZoom()+1,around:ft.unproject(Be)},{originalEvent:Q})}};if(Ke)return this._active=!0,Q.preventDefault(),setTimeout(function(){return me.reset()},0),{cameraAnimation:function(ft){return ft.easeTo({duration:300,zoom:ft.getZoom()-1,around:ft.unproject(Ke)},{originalEvent:Q})}}},Ur.prototype.touchcancel=function(){this.reset()},Ur.prototype.enable=function(){this._enabled=!0},Ur.prototype.disable=function(){this._enabled=!1,this.reset()},Ur.prototype.isEnabled=function(){return this._enabled},Ur.prototype.isActive=function(){return this._active};var jr=0,cn=2,dn={};dn[jr]=1,dn[cn]=2;function tn(de,Q){var ye=dn[Q];return de.buttons===void 0||(de.buttons&ye)!==ye}var Vn=function(Q){this.reset(),this._clickTolerance=Q.clickTolerance||1};Vn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Vn.prototype._correctButton=function(Q,ye){return!1},Vn.prototype._move=function(Q,ye){return{}},Vn.prototype.mousedown=function(Q,ye){if(!this._lastPoint){var ae=T.mouseButton(Q);this._correctButton(Q,ae)&&(this._lastPoint=ye,this._eventButton=ae)}},Vn.prototype.mousemoveWindow=function(Q,ye){var ae=this._lastPoint;if(ae){if(Q.preventDefault(),tn(Q,this._eventButton)){this.reset();return}if(!(!this._moved&&ye.dist(ae)<this._clickTolerance))return this._moved=!0,this._lastPoint=ye,this._move(ae,ye)}},Vn.prototype.mouseupWindow=function(Q){if(this._lastPoint){var ye=T.mouseButton(Q);ye===this._eventButton&&(this._moved&&T.suppressClick(),this.reset())}},Vn.prototype.enable=function(){this._enabled=!0},Vn.prototype.disable=function(){this._enabled=!1,this.reset()},Vn.prototype.isEnabled=function(){return this._enabled},Vn.prototype.isActive=function(){return this._active};var ti=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.mousedown=function(ae,me){de.prototype.mousedown.call(this,ae,me),this._lastPoint&&(this._active=!0)},Q.prototype._correctButton=function(ae,me){return me===jr&&!ae.ctrlKey},Q.prototype._move=function(ae,me){return{around:me,panDelta:me.sub(ae)}},Q}(Vn),fi=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype._correctButton=function(ae,me){return me===jr&&ae.ctrlKey||me===cn},Q.prototype._move=function(ae,me){var Be=.8,Ke=(me.x-ae.x)*Be;if(Ke)return this._active=!0,{bearingDelta:Ke}},Q.prototype.contextmenu=function(ae){ae.preventDefault()},Q}(Vn),qn=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype._correctButton=function(ae,me){return me===jr&&ae.ctrlKey||me===cn},Q.prototype._move=function(ae,me){var Be=-.5,Ke=(me.y-ae.y)*Be;if(Ke)return this._active=!0,{pitchDelta:Ke}},Q.prototype.contextmenu=function(ae){ae.preventDefault()},Q}(Vn),oi=function(Q){this._minTouches=1,this._clickTolerance=Q.clickTolerance||1,this.reset()};oi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n.Point(0,0)},oi.prototype.touchstart=function(Q,ye,ae){return this._calculateTransform(Q,ye,ae)},oi.prototype.touchmove=function(Q,ye,ae){if(!(!this._active||ae.length<this._minTouches))return Q.preventDefault(),this._calculateTransform(Q,ye,ae)},oi.prototype.touchend=function(Q,ye,ae){this._calculateTransform(Q,ye,ae),this._active&&ae.length<this._minTouches&&this.reset()},oi.prototype.touchcancel=function(){this.reset()},oi.prototype._calculateTransform=function(Q,ye,ae){ae.length>0&&(this._active=!0);var me=Wt(ae,ye),Be=new n.Point(0,0),Ke=new n.Point(0,0),ft=0;for(var Ct in me){var Ut=me[Ct],$t=this._touches[Ct];$t&&(Be._add(Ut),Ke._add(Ut.sub($t)),ft++,me[Ct]=Ut)}if(this._touches=me,!(ft<this._minTouches||!Ke.mag())){var lr=Ke.div(ft);if(this._sum._add(lr),!(this._sum.mag()<this._clickTolerance)){var ar=Be.div(ft);return{around:ar,panDelta:lr}}}},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var ci=function(){this.reset()};ci.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ci.prototype._start=function(Q){},ci.prototype._move=function(Q,ye,ae){return{}},ci.prototype.touchstart=function(Q,ye,ae){this._firstTwoTouches||ae.length<2||(this._firstTwoTouches=[ae[0].identifier,ae[1].identifier],this._start([ye[0],ye[1]]))},ci.prototype.touchmove=function(Q,ye,ae){if(this._firstTwoTouches){Q.preventDefault();var me=this._firstTwoTouches,Be=me[0],Ke=me[1],ft=Fi(ae,ye,Be),Ct=Fi(ae,ye,Ke);if(!(!ft||!Ct)){var Ut=this._aroundCenter?null:ft.add(Ct).div(2);return this._move([ft,Ct],Ut,Q)}}},ci.prototype.touchend=function(Q,ye,ae){if(this._firstTwoTouches){var me=this._firstTwoTouches,Be=me[0],Ke=me[1],ft=Fi(ae,ye,Be),Ct=Fi(ae,ye,Ke);ft&&Ct||(this._active&&T.suppressClick(),this.reset())}},ci.prototype.touchcancel=function(){this.reset()},ci.prototype.enable=function(Q){this._enabled=!0,this._aroundCenter=!!Q&&Q.around==="center"},ci.prototype.disable=function(){this._enabled=!1,this.reset()},ci.prototype.isEnabled=function(){return this._enabled},ci.prototype.isActive=function(){return this._active};function Fi(de,Q,ye){for(var ae=0;ae<de.length;ae++)if(de[ae].identifier===ye)return Q[ae]}var Ei=.1;function Di(de,Q){return Math.log(de/Q)/Math.LN2}var aa=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.reset=function(){de.prototype.reset.call(this),delete this._distance,delete this._startDistance},Q.prototype._start=function(ae){this._startDistance=this._distance=ae[0].dist(ae[1])},Q.prototype._move=function(ae,me){var Be=this._distance;if(this._distance=ae[0].dist(ae[1]),!(!this._active&&Math.abs(Di(this._distance,this._startDistance))<Ei))return this._active=!0,{zoomDelta:Di(this._distance,Be),pinchAround:me}},Q}(ci),Ka=25;function ha(de,Q){return de.angleWith(Q)*180/Math.PI}var Qn=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.reset=function(){de.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Q.prototype._start=function(ae){this._startVector=this._vector=ae[0].sub(ae[1]),this._minDiameter=ae[0].dist(ae[1])},Q.prototype._move=function(ae,me){var Be=this._vector;if(this._vector=ae[0].sub(ae[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ha(this._vector,Be),pinchAround:me}},Q.prototype._isBelowThreshold=function(ae){this._minDiameter=Math.min(this._minDiameter,ae.mag());var me=Math.PI*this._minDiameter,Be=Ka/me*360,Ke=ha(ae,this._startVector);return Math.abs(Ke)<Be},Q}(ci);function Ni(de){return Math.abs(de.y)>Math.abs(de.x)}var Ai=100,ji=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.reset=function(){de.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Q.prototype._start=function(ae){this._lastPoints=ae,Ni(ae[0].sub(ae[1]))&&(this._valid=!1)},Q.prototype._move=function(ae,me,Be){var Ke=ae[0].sub(this._lastPoints[0]),ft=ae[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ke,ft,Be.timeStamp),!!this._valid){this._lastPoints=ae,this._active=!0;var Ct=(Ke.y+ft.y)/2,Ut=-.5;return{pitchDelta:Ct*Ut}}},Q.prototype.gestureBeginsVertically=function(ae,me,Be){if(this._valid!==void 0)return this._valid;var Ke=2,ft=ae.mag()>=Ke,Ct=me.mag()>=Ke;if(!(!ft&&!Ct)){if(!ft||!Ct)return this._firstMove===void 0&&(this._firstMove=Be),Be-this._firstMove<Ai?void 0:!1;var Ut=ae.y>0==me.y>0;return Ni(ae)&&Ni(me)&&Ut}},Q}(ci),Ma={panStep:100,bearingStep:15,pitchStep:10},oa=function(){var Q=Ma;this._panStep=Q.panStep,this._bearingStep=Q.bearingStep,this._pitchStep=Q.pitchStep,this._rotationDisabled=!1};oa.prototype.reset=function(){this._active=!1},oa.prototype.keydown=function(Q){var ye=this;if(!(Q.altKey||Q.ctrlKey||Q.metaKey)){var ae=0,me=0,Be=0,Ke=0,ft=0;switch(Q.keyCode){case 61:case 107:case 171:case 187:ae=1;break;case 189:case 109:case 173:ae=-1;break;case 37:Q.shiftKey?me=-1:(Q.preventDefault(),Ke=-1);break;case 39:Q.shiftKey?me=1:(Q.preventDefault(),Ke=1);break;case 38:Q.shiftKey?Be=1:(Q.preventDefault(),ft=-1);break;case 40:Q.shiftKey?Be=-1:(Q.preventDefault(),ft=1);break;default:return}return this._rotationDisabled&&(me=0,Be=0),{cameraAnimation:function(Ct){var Ut=Ct.getZoom();Ct.easeTo({duration:300,easeId:"keyboardHandler",easing:uo,zoom:ae?Math.round(Ut)+ae*(Q.shiftKey?2:1):Ut,bearing:Ct.getBearing()+me*ye._bearingStep,pitch:Ct.getPitch()+Be*ye._pitchStep,offset:[-Ke*ye._panStep,-ft*ye._panStep],center:Ct.getCenter()},{originalEvent:Q})}}}},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active},oa.prototype.disableRotation=function(){this._rotationDisabled=!0},oa.prototype.enableRotation=function(){this._rotationDisabled=!1};function uo(de){return de*(2-de)}var fo=4.000244140625,go=1/100,Ea=1/450,Mo=2,li=function(Q,ye){this._map=Q,this._el=Q.getCanvasContainer(),this._handler=ye,this._delta=0,this._defaultZoomRate=go,this._wheelZoomRate=Ea,n.bindAll(["_onTimeout"],this)};li.prototype.setZoomRate=function(Q){this._defaultZoomRate=Q},li.prototype.setWheelZoomRate=function(Q){this._wheelZoomRate=Q},li.prototype.isEnabled=function(){return!!this._enabled},li.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},li.prototype.isZooming=function(){return!!this._zooming},li.prototype.enable=function(Q){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Q&&Q.around==="center")},li.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},li.prototype.wheel=function(Q){if(this.isEnabled()){var ye=Q.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?Q.deltaY*40:Q.deltaY,ae=n.browser.now(),me=ae-(this._lastWheelEventTime||0);this._lastWheelEventTime=ae,ye!==0&&ye%fo===0?this._type="wheel":ye!==0&&Math.abs(ye)<4?this._type="trackpad":me>400?(this._type=null,this._lastValue=ye,this._timeout=setTimeout(this._onTimeout,40,Q)):this._type||(this._type=Math.abs(me*ye)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ye+=this._lastValue)),Q.shiftKey&&ye&&(ye=ye/4),this._type&&(this._lastWheelEvent=Q,this._delta-=ye,this._active||this._start(Q)),Q.preventDefault()}},li.prototype._onTimeout=function(Q){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Q)},li.prototype._start=function(Q){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ye=T.mousePos(this._el,Q);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ye)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},li.prototype.renderFrame=function(){var Q=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var ye=this._map.transform;if(this._delta!==0){var ae=this._type==="wheel"&&Math.abs(this._delta)>fo?this._wheelZoomRate:this._defaultZoomRate,me=Mo/(1+Math.exp(-Math.abs(this._delta*ae)));this._delta<0&&me!==0&&(me=1/me);var Be=typeof this._targetZoom=="number"?ye.zoomScale(this._targetZoom):ye.scale;this._targetZoom=Math.min(ye.maxZoom,Math.max(ye.minZoom,ye.scaleZoom(Be*me))),this._type==="wheel"&&(this._startZoom=ye.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ke=typeof this._targetZoom=="number"?this._targetZoom:ye.zoom,ft=this._startZoom,Ct=this._easing,Ut=!1,$t;if(this._type==="wheel"&&ft&&Ct){var lr=Math.min((n.browser.now()-this._lastWheelEventTime)/200,1),ar=Ct(lr);$t=n.number(ft,Ke,ar),lr<1?this._frameId||(this._frameId=!0):Ut=!0}else $t=Ke,Ut=!0;return this._active=!0,Ut&&(this._active=!1,this._finishTimeout=setTimeout(function(){Q._zooming=!1,Q._handler._triggerRenderFrame(),delete Q._targetZoom,delete Q._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ut,zoomDelta:$t-ye.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},li.prototype._smoothOutEasing=function(Q){var ye=n.ease;if(this._prevEase){var ae=this._prevEase,me=(n.browser.now()-ae.start)/ae.duration,Be=ae.easing(me+.01)-ae.easing(me),Ke=.27/Math.sqrt(Be*Be+1e-4)*.01,ft=Math.sqrt(.27*.27-Ke*Ke);ye=n.bezier(Ke,ft,.25,1)}return this._prevEase={start:n.browser.now(),duration:Q,easing:ye},ye},li.prototype.reset=function(){this._active=!1};var Ci=function(Q,ye){this._clickZoom=Q,this._tapZoom=ye};Ci.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ci.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ci.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ci.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Vo=function(){this.reset()};Vo.prototype.reset=function(){this._active=!1},Vo.prototype.dblclick=function(Q,ye){return Q.preventDefault(),{cameraAnimation:function(ae){ae.easeTo({duration:300,zoom:ae.getZoom()+(Q.shiftKey?-1:1),around:ae.unproject(ye)},{originalEvent:Q})}}},Vo.prototype.enable=function(){this._enabled=!0},Vo.prototype.disable=function(){this._enabled=!1,this.reset()},Vo.prototype.isEnabled=function(){return this._enabled},Vo.prototype.isActive=function(){return this._active};var Zo=function(){this._tap=new Pr({numTouches:1,numTaps:1}),this.reset()};Zo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Zo.prototype.touchstart=function(Q,ye,ae){this._swipePoint||(this._tapTime&&Q.timeStamp-this._tapTime>Cr&&this.reset(),this._tapTime?ae.length>0&&(this._swipePoint=ye[0],this._swipeTouch=ae[0].identifier):this._tap.touchstart(Q,ye,ae))},Zo.prototype.touchmove=function(Q,ye,ae){if(!this._tapTime)this._tap.touchmove(Q,ye,ae);else if(this._swipePoint){if(ae[0].identifier!==this._swipeTouch)return;var me=ye[0],Be=me.y-this._swipePoint.y;return this._swipePoint=me,Q.preventDefault(),this._active=!0,{zoomDelta:Be/128}}},Zo.prototype.touchend=function(Q,ye,ae){if(this._tapTime)this._swipePoint&&ae.length===0&&this.reset();else{var me=this._tap.touchend(Q,ye,ae);me&&(this._tapTime=Q.timeStamp)}},Zo.prototype.touchcancel=function(){this.reset()},Zo.prototype.enable=function(){this._enabled=!0},Zo.prototype.disable=function(){this._enabled=!1,this.reset()},Zo.prototype.isEnabled=function(){return this._enabled},Zo.prototype.isActive=function(){return this._active};var yo=function(Q,ye,ae){this._el=Q,this._mousePan=ye,this._touchPan=ae};yo.prototype.enable=function(Q){this._inertiaOptions=Q||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},yo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},yo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},yo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pa=function(Q,ye,ae){this._pitchWithRotate=Q.pitchWithRotate,this._mouseRotate=ye,this._mousePitch=ae};pa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var to=function(Q,ye,ae,me){this._el=Q,this._touchZoom=ye,this._touchRotate=ae,this._tapDragZoom=me,this._rotationDisabled=!1,this._enabled=!0};to.prototype.enable=function(Q){this._touchZoom.enable(Q),this._rotationDisabled||this._touchRotate.enable(Q),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},to.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},to.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},to.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},to.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},to.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ja=function(de){return de.zoom||de.drag||de.pitch||de.rotate},Ls=function(de){function Q(){de.apply(this,arguments)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q}(n.Event);function Ys(de){return de.panDelta&&de.panDelta.mag()||de.zoomDelta||de.bearingDelta||de.pitchDelta}var za=function(Q,ye){this._map=Q,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ve(Q),this._bearingSnap=ye.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ye),n.bindAll(["handleEvent","handleWindowEvent"],this);var ae=this._el;this._listeners=[[ae,"touchstart",{passive:!0}],[ae,"touchmove",{passive:!1}],[ae,"touchend",void 0],[ae,"touchcancel",void 0],[ae,"mousedown",void 0],[ae,"mousemove",void 0],[ae,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[ae,"mouseover",void 0],[ae,"mouseout",void 0],[ae,"dblclick",void 0],[ae,"click",void 0],[ae,"keydown",{capture:!1}],[ae,"keyup",void 0],[ae,"wheel",{passive:!1}],[ae,"contextmenu",void 0],[n.window,"blur",void 0]];for(var me=0,Be=this._listeners;me<Be.length;me+=1){var Ke=Be[me],ft=Ke[0],Ct=Ke[1],Ut=Ke[2];T.addEventListener(ft,Ct,ft===n.window.document?this.handleWindowEvent:this.handleEvent,Ut)}};za.prototype.destroy=function(){for(var Q=0,ye=this._listeners;Q<ye.length;Q+=1){var ae=ye[Q],me=ae[0],Be=ae[1],Ke=ae[2];T.removeEventListener(me,Be,me===n.window.document?this.handleWindowEvent:this.handleEvent,Ke)}},za.prototype._addDefaultHandlers=function(Q){var ye=this._map,ae=ye.getCanvasContainer();this._add("mapEvent",new Lt(ye,Q));var me=ye.boxZoom=new Vt(ye,Q);this._add("boxZoom",me);var Be=new Ur,Ke=new Vo;ye.doubleClickZoom=new Ci(Ke,Be),this._add("tapZoom",Be),this._add("clickZoom",Ke);var ft=new Zo;this._add("tapDragZoom",ft);var Ct=ye.touchPitch=new ji;this._add("touchPitch",Ct);var Ut=new fi(Q),$t=new qn(Q);ye.dragRotate=new pa(Q,Ut,$t),this._add("mouseRotate",Ut,["mousePitch"]),this._add("mousePitch",$t,["mouseRotate"]);var lr=new ti(Q),ar=new oi(Q);ye.dragPan=new yo(ae,lr,ar),this._add("mousePan",lr),this._add("touchPan",ar,["touchZoom","touchRotate"]);var Dr=new Qn,Xr=new aa;ye.touchZoomRotate=new to(ae,Xr,Dr,ft),this._add("touchRotate",Dr,["touchPan","touchZoom"]),this._add("touchZoom",Xr,["touchPan","touchRotate"]);var Yr=ye.scrollZoom=new li(ye,this);this._add("scrollZoom",Yr,["mousePan"]);var Gr=ye.keyboard=new oa;this._add("keyboard",Gr),this._add("blockableMapEvent",new At(ye));for(var Jr=0,vn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jr<vn.length;Jr+=1){var In=vn[Jr];Q.interactive&&Q[In]&&ye[In].enable(Q[In])}},za.prototype._add=function(Q,ye,ae){this._handlers.push({handlerName:Q,handler:ye,allowed:ae}),this._handlersById[Q]=ye},za.prototype.stop=function(Q){if(!this._updatingCamera){for(var ye=0,ae=this._handlers;ye<ae.length;ye+=1){var me=ae[ye],Be=me.handler;Be.reset()}this._inertia.clear(),this._fireEvents({},{},Q),this._changes=[]}},za.prototype.isActive=function(){for(var Q=0,ye=this._handlers;Q<ye.length;Q+=1){var ae=ye[Q],me=ae.handler;if(me.isActive())return!0}return!1},za.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},za.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},za.prototype.isMoving=function(){return!!Ja(this._eventsInProgress)||this.isZooming()},za.prototype._blockedByActive=function(Q,ye,ae){for(var me in Q)if(me!==ae&&(!ye||ye.indexOf(me)<0))return!0;return!1},za.prototype.handleWindowEvent=function(Q){this.handleEvent(Q,Q.type+"Window")},za.prototype._getMapTouches=function(Q){for(var ye=[],ae=0,me=Q;ae<me.length;ae+=1){var Be=me[ae],Ke=Be.target;this._el.contains(Ke)&&ye.push(Be)}return ye},za.prototype.handleEvent=function(Q,ye){if(Q.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var ae=Q.type==="renderFrame"?void 0:Q,me={needsRenderFrame:!1},Be={},Ke={},ft=Q.touches?this._getMapTouches(Q.touches):void 0,Ct=ft?T.touchPos(this._el,ft):T.mousePos(this._el,Q),Ut=0,$t=this._handlers;Ut<$t.length;Ut+=1){var lr=$t[Ut],ar=lr.handlerName,Dr=lr.handler,Xr=lr.allowed;if(Dr.isEnabled()){var Yr=void 0;this._blockedByActive(Ke,Xr,ar)?Dr.reset():Dr[ye||Q.type]&&(Yr=Dr[ye||Q.type](Q,Ct,ft),this.mergeHandlerResult(me,Be,Yr,ar,ae),Yr&&Yr.needsRenderFrame&&this._triggerRenderFrame()),(Yr||Dr.isActive())&&(Ke[ar]=Dr)}}var Gr={};for(var Jr in this._previousActiveHandlers)Ke[Jr]||(Gr[Jr]=ae);this._previousActiveHandlers=Ke,(Object.keys(Gr).length||Ys(me))&&(this._changes.push([me,Be,Gr]),this._triggerRenderFrame()),(Object.keys(Ke).length||Ys(me))&&this._map._stop(!0),this._updatingCamera=!1;var vn=me.cameraAnimation;vn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],vn(this._map))},za.prototype.mergeHandlerResult=function(Q,ye,ae,me,Be){if(ae){n.extend(Q,ae);var Ke={handlerName:me,originalEvent:ae.originalEvent||Be};ae.zoomDelta!==void 0&&(ye.zoom=Ke),ae.panDelta!==void 0&&(ye.drag=Ke),ae.pitchDelta!==void 0&&(ye.pitch=Ke),ae.bearingDelta!==void 0&&(ye.rotate=Ke)}},za.prototype._applyChanges=function(){for(var Q={},ye={},ae={},me=0,Be=this._changes;me<Be.length;me+=1){var Ke=Be[me],ft=Ke[0],Ct=Ke[1],Ut=Ke[2];ft.panDelta&&(Q.panDelta=(Q.panDelta||new n.Point(0,0))._add(ft.panDelta)),ft.zoomDelta&&(Q.zoomDelta=(Q.zoomDelta||0)+ft.zoomDelta),ft.bearingDelta&&(Q.bearingDelta=(Q.bearingDelta||0)+ft.bearingDelta),ft.pitchDelta&&(Q.pitchDelta=(Q.pitchDelta||0)+ft.pitchDelta),ft.around!==void 0&&(Q.around=ft.around),ft.pinchAround!==void 0&&(Q.pinchAround=ft.pinchAround),ft.noInertia&&(Q.noInertia=ft.noInertia),n.extend(ye,Ct),n.extend(ae,Ut)}this._updateMapTransform(Q,ye,ae),this._changes=[]},za.prototype._updateMapTransform=function(Q,ye,ae){var me=this._map,Be=me.transform;if(!Ys(Q))return this._fireEvents(ye,ae,!0);var Ke=Q.panDelta,ft=Q.zoomDelta,Ct=Q.bearingDelta,Ut=Q.pitchDelta,$t=Q.around,lr=Q.pinchAround;lr!==void 0&&($t=lr),me._stop(!0),$t=$t||me.transform.centerPoint;var ar=Be.pointLocation(Ke?$t.sub(Ke):$t);Ct&&(Be.bearing+=Ct),Ut&&(Be.pitch+=Ut),ft&&(Be.zoom+=ft),Be.setLocationAtPoint(ar,$t),this._map._update(),Q.noInertia||this._inertia.record(Q),this._fireEvents(ye,ae,!0)},za.prototype._fireEvents=function(Q,ye,ae){var me=this,Be=Ja(this._eventsInProgress),Ke=Ja(Q),ft={};for(var Ct in Q){var Ut=Q[Ct],$t=Ut.originalEvent;this._eventsInProgress[Ct]||(ft[Ct+"start"]=$t),this._eventsInProgress[Ct]=Q[Ct]}!Be&&Ke&&this._fireEvent("movestart",Ke.originalEvent);for(var lr in ft)this._fireEvent(lr,ft[lr]);Ke&&this._fireEvent("move",Ke.originalEvent);for(var ar in Q){var Dr=Q[ar],Xr=Dr.originalEvent;this._fireEvent(ar,Xr)}var Yr={},Gr;for(var Jr in this._eventsInProgress){var vn=this._eventsInProgress[Jr],In=vn.handlerName,Bn=vn.originalEvent;this._handlersById[In].isActive()||(delete this._eventsInProgress[Jr],Gr=ye[In]||Bn,Yr[Jr+"end"]=Gr)}for(var Yn in Yr)this._fireEvent(Yn,Yr[Yn]);var Xn=Ja(this._eventsInProgress);if(ae&&(Be||Ke)&&!Xn){this._updatingCamera=!0;var Gn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),jn=function(ri){return ri!==0&&-me._bearingSnap<ri&&ri<me._bearingSnap};Gn?(jn(Gn.bearing||this._map.getBearing())&&(Gn.bearing=0),this._map.easeTo(Gn,{originalEvent:Gr})):(this._map.fire(new n.Event("moveend",{originalEvent:Gr})),jn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},za.prototype._fireEvent=function(Q,ye){this._map.fire(new n.Event(Q,ye?{originalEvent:ye}:{}))},za.prototype._requestFrame=function(){var Q=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(ye){delete Q._frameId,Q.handleEvent(new Ls("renderFrame",{timeStamp:ye})),Q._applyChanges()})},za.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var eu=function(de){function Q(ye,ae){de.call(this),this._moving=!1,this._zooming=!1,this.transform=ye,this._bearingSnap=ae.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.getCenter=function(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)},Q.prototype.setCenter=function(ae,me){return this.jumpTo({center:ae},me)},Q.prototype.panBy=function(ae,me,Be){return ae=n.Point.convert(ae).mult(-1),this.panTo(this.transform.center,n.extend({offset:ae},me),Be)},Q.prototype.panTo=function(ae,me,Be){return this.easeTo(n.extend({center:ae},me),Be)},Q.prototype.getZoom=function(){return this.transform.zoom},Q.prototype.setZoom=function(ae,me){return this.jumpTo({zoom:ae},me),this},Q.prototype.zoomTo=function(ae,me,Be){return this.easeTo(n.extend({zoom:ae},me),Be)},Q.prototype.zoomIn=function(ae,me){return this.zoomTo(this.getZoom()+1,ae,me),this},Q.prototype.zoomOut=function(ae,me){return this.zoomTo(this.getZoom()-1,ae,me),this},Q.prototype.getBearing=function(){return this.transform.bearing},Q.prototype.setBearing=function(ae,me){return this.jumpTo({bearing:ae},me),this},Q.prototype.getPadding=function(){return this.transform.padding},Q.prototype.setPadding=function(ae,me){return this.jumpTo({padding:ae},me),this},Q.prototype.rotateTo=function(ae,me,Be){return this.easeTo(n.extend({bearing:ae},me),Be)},Q.prototype.resetNorth=function(ae,me){return this.rotateTo(0,n.extend({duration:1e3},ae),me),this},Q.prototype.resetNorthPitch=function(ae,me){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},ae),me),this},Q.prototype.snapToNorth=function(ae,me){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(ae,me):this},Q.prototype.getPitch=function(){return this.transform.pitch},Q.prototype.setPitch=function(ae,me){return this.jumpTo({pitch:ae},me),this},Q.prototype.cameraForBounds=function(ae,me){ae=n.LngLatBounds.convert(ae);var Be=me&&me.bearing||0;return this._cameraForBoxAndBearing(ae.getNorthWest(),ae.getSouthEast(),Be,me)},Q.prototype._cameraForBoxAndBearing=function(ae,me,Be,Ke){var ft={top:0,bottom:0,right:0,left:0};if(Ke=n.extend({padding:ft,offset:[0,0],maxZoom:this.transform.maxZoom},Ke),typeof Ke.padding=="number"){var Ct=Ke.padding;Ke.padding={top:Ct,bottom:Ct,right:Ct,left:Ct}}Ke.padding=n.extend(ft,Ke.padding);var Ut=this.transform,$t=Ut.padding,lr=Ut.project(n.LngLat.convert(ae)),ar=Ut.project(n.LngLat.convert(me)),Dr=lr.rotate(-Be*Math.PI/180),Xr=ar.rotate(-Be*Math.PI/180),Yr=new n.Point(Math.max(Dr.x,Xr.x),Math.max(Dr.y,Xr.y)),Gr=new n.Point(Math.min(Dr.x,Xr.x),Math.min(Dr.y,Xr.y)),Jr=Yr.sub(Gr),vn=(Ut.width-($t.left+$t.right+Ke.padding.left+Ke.padding.right))/Jr.x,In=(Ut.height-($t.top+$t.bottom+Ke.padding.top+Ke.padding.bottom))/Jr.y;if(In<0||vn<0){n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Bn=Math.min(Ut.scaleZoom(Ut.scale*Math.min(vn,In)),Ke.maxZoom),Yn=typeof Ke.offset.x=="number"?new n.Point(Ke.offset.x,Ke.offset.y):n.Point.convert(Ke.offset),Xn=(Ke.padding.left-Ke.padding.right)/2,Gn=(Ke.padding.top-Ke.padding.bottom)/2,jn=new n.Point(Xn,Gn),ri=jn.rotate(Be*Math.PI/180),ui=Yn.add(ri),mi=ui.mult(Ut.scale/Ut.zoomScale(Bn)),di=Ut.unproject(lr.add(ar).div(2).sub(mi));return{center:di,zoom:Bn,bearing:Be}},Q.prototype.fitBounds=function(ae,me,Be){return this._fitInternal(this.cameraForBounds(ae,me),me,Be)},Q.prototype.fitScreenCoordinates=function(ae,me,Be,Ke,ft){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.Point.convert(ae)),this.transform.pointLocation(n.Point.convert(me)),Be,Ke),Ke,ft)},Q.prototype._fitInternal=function(ae,me,Be){return ae?(me=n.extend(ae,me),delete me.padding,me.linear?this.easeTo(me,Be):this.flyTo(me,Be)):this},Q.prototype.jumpTo=function(ae,me){this.stop();var Be=this.transform,Ke=!1,ft=!1,Ct=!1;return"zoom"in ae&&Be.zoom!==+ae.zoom&&(Ke=!0,Be.zoom=+ae.zoom),ae.center!==void 0&&(Be.center=n.LngLat.convert(ae.center)),"bearing"in ae&&Be.bearing!==+ae.bearing&&(ft=!0,Be.bearing=+ae.bearing),"pitch"in ae&&Be.pitch!==+ae.pitch&&(Ct=!0,Be.pitch=+ae.pitch),ae.padding!=null&&!Be.isPaddingEqual(ae.padding)&&(Be.padding=ae.padding),this.fire(new n.Event("movestart",me)).fire(new n.Event("move",me)),Ke&&this.fire(new n.Event("zoomstart",me)).fire(new n.Event("zoom",me)).fire(new n.Event("zoomend",me)),ft&&this.fire(new n.Event("rotatestart",me)).fire(new n.Event("rotate",me)).fire(new n.Event("rotateend",me)),Ct&&this.fire(new n.Event("pitchstart",me)).fire(new n.Event("pitch",me)).fire(new n.Event("pitchend",me)),this.fire(new n.Event("moveend",me))},Q.prototype.easeTo=function(ae,me){var Be=this;this._stop(!1,ae.easeId),ae=n.extend({offset:[0,0],duration:500,easing:n.ease},ae),(ae.animate===!1||!ae.essential&&n.browser.prefersReducedMotion)&&(ae.duration=0);var Ke=this.transform,ft=this.getZoom(),Ct=this.getBearing(),Ut=this.getPitch(),$t=this.getPadding(),lr="zoom"in ae?+ae.zoom:ft,ar="bearing"in ae?this._normalizeBearing(ae.bearing,Ct):Ct,Dr="pitch"in ae?+ae.pitch:Ut,Xr="padding"in ae?ae.padding:Ke.padding,Yr=n.Point.convert(ae.offset),Gr=Ke.centerPoint.add(Yr),Jr=Ke.pointLocation(Gr),vn=n.LngLat.convert(ae.center||Jr);this._normalizeCenter(vn);var In=Ke.project(Jr),Bn=Ke.project(vn).sub(In),Yn=Ke.zoomScale(lr-ft),Xn,Gn;ae.around&&(Xn=n.LngLat.convert(ae.around),Gn=Ke.locationPoint(Xn));var jn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||lr!==ft,this._rotating=this._rotating||Ct!==ar,this._pitching=this._pitching||Dr!==Ut,this._padding=!Ke.isPaddingEqual(Xr),this._easeId=ae.easeId,this._prepareEase(me,ae.noMoveStart,jn),this._ease(function(ri){if(Be._zooming&&(Ke.zoom=n.number(ft,lr,ri)),Be._rotating&&(Ke.bearing=n.number(Ct,ar,ri)),Be._pitching&&(Ke.pitch=n.number(Ut,Dr,ri)),Be._padding&&(Ke.interpolatePadding($t,Xr,ri),Gr=Ke.centerPoint.add(Yr)),Xn)Ke.setLocationAtPoint(Xn,Gn);else{var ui=Ke.zoomScale(Ke.zoom-ft),mi=lr>ft?Math.min(2,Yn):Math.max(.5,Yn),di=Math.pow(mi,1-ri),ki=Ke.unproject(In.add(Bn.mult(ri*di)).mult(ui));Ke.setLocationAtPoint(Ke.renderWorldCopies?ki.wrap():ki,Gr)}Be._fireMoveEvents(me)},function(ri){Be._afterEase(me,ri)},ae),this},Q.prototype._prepareEase=function(ae,me,Be){Be===void 0&&(Be={}),this._moving=!0,!me&&!Be.moving&&this.fire(new n.Event("movestart",ae)),this._zooming&&!Be.zooming&&this.fire(new n.Event("zoomstart",ae)),this._rotating&&!Be.rotating&&this.fire(new n.Event("rotatestart",ae)),this._pitching&&!Be.pitching&&this.fire(new n.Event("pitchstart",ae))},Q.prototype._fireMoveEvents=function(ae){this.fire(new n.Event("move",ae)),this._zooming&&this.fire(new n.Event("zoom",ae)),this._rotating&&this.fire(new n.Event("rotate",ae)),this._pitching&&this.fire(new n.Event("pitch",ae))},Q.prototype._afterEase=function(ae,me){if(!(this._easeId&&me&&this._easeId===me)){delete this._easeId;var Be=this._zooming,Ke=this._rotating,ft=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Be&&this.fire(new n.Event("zoomend",ae)),Ke&&this.fire(new n.Event("rotateend",ae)),ft&&this.fire(new n.Event("pitchend",ae)),this.fire(new n.Event("moveend",ae))}},Q.prototype.flyTo=function(ae,me){var Be=this;if(!ae.essential&&n.browser.prefersReducedMotion){var Ke=n.pick(ae,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ke,me)}this.stop(),ae=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},ae);var ft=this.transform,Ct=this.getZoom(),Ut=this.getBearing(),$t=this.getPitch(),lr=this.getPadding(),ar="zoom"in ae?n.clamp(+ae.zoom,ft.minZoom,ft.maxZoom):Ct,Dr="bearing"in ae?this._normalizeBearing(ae.bearing,Ut):Ut,Xr="pitch"in ae?+ae.pitch:$t,Yr="padding"in ae?ae.padding:ft.padding,Gr=ft.zoomScale(ar-Ct),Jr=n.Point.convert(ae.offset),vn=ft.centerPoint.add(Jr),In=ft.pointLocation(vn),Bn=n.LngLat.convert(ae.center||In);this._normalizeCenter(Bn);var Yn=ft.project(In),Xn=ft.project(Bn).sub(Yn),Gn=ae.curve,jn=Math.max(ft.width,ft.height),ri=jn/Gr,ui=Xn.mag();if("minZoom"in ae){var mi=n.clamp(Math.min(ae.minZoom,Ct,ar),ft.minZoom,ft.maxZoom),di=jn/ft.zoomScale(mi-Ct);Gn=Math.sqrt(di/ui*2)}var ki=Gn*Gn;function qi(Vi){var ea=(ri*ri-jn*jn+(Vi?-1:1)*ki*ki*ui*ui)/(2*(Vi?ri:jn)*ki*ui);return Math.log(Math.sqrt(ea*ea+1)-ea)}function Yi(Vi){return(Math.exp(Vi)-Math.exp(-Vi))/2}function Mi(Vi){return(Math.exp(Vi)+Math.exp(-Vi))/2}function Xi(Vi){return Yi(Vi)/Mi(Vi)}var Ui=qi(0),sa=function(Vi){return Mi(Ui)/Mi(Ui+Gn*Vi)},ra=function(Vi){return jn*((Mi(Ui)*Xi(Ui+Gn*Vi)-Yi(Ui))/ki)/ui},Pa=(qi(1)-Ui)/Gn;if(Math.abs(ui)<1e-6||!isFinite(Pa)){if(Math.abs(jn-ri)<1e-6)return this.easeTo(ae,me);var Qi=ri<jn?-1:1;Pa=Math.abs(Math.log(ri/jn))/Gn,ra=function(){return 0},sa=function(Vi){return Math.exp(Qi*Gn*Vi)}}if("duration"in ae)ae.duration=+ae.duration;else{var ba="screenSpeed"in ae?+ae.screenSpeed/Gn:+ae.speed;ae.duration=1e3*Pa/ba}return ae.maxDuration&&ae.duration>ae.maxDuration&&(ae.duration=0),this._zooming=!0,this._rotating=Ut!==Dr,this._pitching=Xr!==$t,this._padding=!ft.isPaddingEqual(Yr),this._prepareEase(me,!1),this._ease(function(Vi){var ea=Vi*Pa,Qa=1/sa(ea);ft.zoom=Vi===1?ar:Ct+ft.scaleZoom(Qa),Be._rotating&&(ft.bearing=n.number(Ut,Dr,Vi)),Be._pitching&&(ft.pitch=n.number($t,Xr,Vi)),Be._padding&&(ft.interpolatePadding(lr,Yr,Vi),vn=ft.centerPoint.add(Jr));var Eo=Vi===1?Bn:ft.unproject(Yn.add(Xn.mult(ra(ea))).mult(Qa));ft.setLocationAtPoint(ft.renderWorldCopies?Eo.wrap():Eo,vn),Be._fireMoveEvents(me)},function(){return Be._afterEase(me)},ae),this},Q.prototype.isEasing=function(){return!!this._easeFrameId},Q.prototype.stop=function(){return this._stop()},Q.prototype._stop=function(ae,me){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Be=this._onEaseEnd;delete this._onEaseEnd,Be.call(this,me)}if(!ae){var Ke=this.handlers;Ke&&Ke.stop(!1)}return this},Q.prototype._ease=function(ae,me,Be){Be.animate===!1||Be.duration===0?(ae(1),me()):(this._easeStart=n.browser.now(),this._easeOptions=Be,this._onEaseFrame=ae,this._onEaseEnd=me,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Q.prototype._renderFrameCallback=function(){var ae=Math.min((n.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(ae)),ae<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Q.prototype._normalizeBearing=function(ae,me){ae=n.wrap(ae,-180,180);var Be=Math.abs(ae-me);return Math.abs(ae-360-me)<Be&&(ae-=360),Math.abs(ae+360-me)<Be&&(ae+=360),ae},Q.prototype._normalizeCenter=function(ae){var me=this.transform;if(!(!me.renderWorldCopies||me.lngRange)){var Be=ae.lng-me.center.lng;ae.lng+=Be>180?-360:Be<-180?360:0}},Q}(n.Evented),Ki=function(Q){Q===void 0&&(Q={}),this.options=Q,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ki.prototype.getDefaultPosition=function(){return"bottom-right"},Ki.prototype.onAdd=function(Q){var ye=this.options&&this.options.compact;return this._map=Q,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=T.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),ye&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ye===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ki.prototype.onRemove=function(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ki.prototype._setElementTitle=function(Q,ye){var ae=this._map._getUIString("AttributionControl."+ye);Q.title=ae,Q.setAttribute("aria-label",ae)},Ki.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ki.prototype._updateEditLink=function(){var Q=this._editLink;Q||(Q=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ye=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(Q){var ae=ye.reduce(function(me,Be,Ke){return Be.value&&(me+=Be.key+"="+Be.value+(Ke<ye.length-1?"&":"")),me},"?");Q.href=n.config.FEEDBACK_URL+"/"+ae+(this._map._hash?this._map._hash.getHashString(!0):""),Q.rel="noopener nofollow",this._setElementTitle(Q,"MapFeedback")}},Ki.prototype._updateData=function(Q){Q&&(Q.sourceDataType==="metadata"||Q.sourceDataType==="visibility"||Q.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Ki.prototype._updateAttributions=function(){if(this._map.style){var Q=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Q=Q.concat(this.options.customAttribution.map(function(Ct){return typeof Ct!="string"?"":Ct})):typeof this.options.customAttribution=="string"&&Q.push(this.options.customAttribution)),this._map.style.stylesheet){var ye=this._map.style.stylesheet;this.styleOwner=ye.owner,this.styleId=ye.id}var ae=this._map.style.sourceCaches;for(var me in ae){var Be=ae[me];if(Be.used){var Ke=Be.getSource();Ke.attribution&&Q.indexOf(Ke.attribution)<0&&Q.push(Ke.attribution)}}Q.sort(function(Ct,Ut){return Ct.length-Ut.length}),Q=Q.filter(function(Ct,Ut){for(var $t=Ut+1;$t<Q.length;$t++)if(Q[$t].indexOf(Ct)>=0)return!1;return!0});var ft=Q.join(" | ");ft!==this._attribHTML&&(this._attribHTML=ft,Q.length?(this._innerContainer.innerHTML=ft,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ki.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Oa=function(){n.bindAll(["_updateLogo"],this),n.bindAll(["_updateCompact"],this)};Oa.prototype.onAdd=function(Q){this._map=Q,this._container=T.create("div","mapboxgl-ctrl");var ye=T.create("a","mapboxgl-ctrl-logo");return ye.target="_blank",ye.rel="noopener nofollow",ye.href="https://www.mapbox.com/",ye.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ye.setAttribute("rel","noopener nofollow"),this._container.appendChild(ye),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Oa.prototype.onRemove=function(){T.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Oa.prototype.getDefaultPosition=function(){return"bottom-left"},Oa.prototype._updateLogo=function(Q){(!Q||Q.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Oa.prototype._logoRequired=function(){if(this._map.style){var Q=this._map.style.sourceCaches;for(var ye in Q){var ae=Q[ye].getSource();if(ae.mapbox_logo)return!0}return!1}},Oa.prototype._updateCompact=function(){var Q=this._container.children;if(Q.length){var ye=Q[0];this._map.getCanvasContainer().offsetWidth<250?ye.classList.add("mapboxgl-compact"):ye.classList.remove("mapboxgl-compact")}};var Ih=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ih.prototype.add=function(Q){var ye=++this._id,ae=this._queue;return ae.push({callback:Q,id:ye,cancelled:!1}),ye},Ih.prototype.remove=function(Q){for(var ye=this._currentlyRunning,ae=ye?this._queue.concat(ye):this._queue,me=0,Be=ae;me<Be.length;me+=1){var Ke=Be[me];if(Ke.id===Q){Ke.cancelled=!0;return}}},Ih.prototype.run=function(Q){Q===void 0&&(Q=0);var ye=this._currentlyRunning=this._queue;this._queue=[];for(var ae=0,me=ye;ae<me.length;ae+=1){var Be=me[ae];if(!Be.cancelled&&(Be.callback(Q),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ih.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Rp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Hf=n.window.HTMLImageElement,ld=n.window.HTMLElement,cf=n.window.ImageBitmap,Pc=-2,Rc=22,vs=0,hf=60,ud={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Pc,maxZoom:Rc,minPitch:vs,maxPitch:hf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},fd=function(de){function Q(ae){var me=this;if(ae=n.extend({},ud,ae),ae.minZoom!=null&&ae.maxZoom!=null&&ae.minZoom>ae.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ae.minPitch!=null&&ae.maxPitch!=null&&ae.minPitch>ae.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ae.minPitch!=null&&ae.minPitch<vs)throw new Error("minPitch must be greater than or equal to "+vs);if(ae.maxPitch!=null&&ae.maxPitch>hf)throw new Error("maxPitch must be less than or equal to "+hf);var Be=new Rn(ae.minZoom,ae.maxZoom,ae.minPitch,ae.maxPitch,ae.renderWorldCopies);if(de.call(this,Be,ae),this._interactive=ae.interactive,this._maxTileCacheSize=ae.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ae.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ae.preserveDrawingBuffer,this._antialias=ae.antialias,this._trackResize=ae.trackResize,this._bearingSnap=ae.bearingSnap,this._refreshExpiredTiles=ae.refreshExpiredTiles,this._fadeDuration=ae.fadeDuration,this._crossSourceCollisions=ae.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ae.collectResourceTiming,this._renderTaskQueue=new Ih,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},Rp,ae.locale),this._clickTolerance=ae.clickTolerance,this._requestManager=new n.RequestManager(ae.transformRequest,ae.accessToken),typeof ae.container=="string"){if(this._container=n.window.document.getElementById(ae.container),!this._container)throw new Error("Container '"+ae.container+"' not found.")}else if(ae.container instanceof ld)this._container=ae.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(ae.maxBounds&&this.setMaxBounds(ae.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return me._update(!1)}),this.on("moveend",function(){return me._update(!1)}),this.on("zoom",function(){return me._update(!0)}),typeof n.window<"u"&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new za(this,ae);var Ke=typeof ae.hash=="string"&&ae.hash||void 0;this._hash=ae.hash&&new Pi(Ke).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:ae.center,zoom:ae.zoom,bearing:ae.bearing,pitch:ae.pitch}),ae.bounds&&(this.resize(),this.fitBounds(ae.bounds,n.extend({},ae.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ae.localIdeographFontFamily,ae.style&&this.setStyle(ae.style,{localIdeographFontFamily:ae.localIdeographFontFamily}),ae.attributionControl&&this.addControl(new Ki({customAttribution:ae.customAttribution})),this.addControl(new Oa,ae.logoPosition),this.on("style.load",function(){me.transform.unmodified&&me.jumpTo(me.style.stylesheet)}),this.on("data",function(ft){me._update(ft.dataType==="style"),me.fire(new n.Event(ft.dataType+"data",ft))}),this.on("dataloading",function(ft){me.fire(new n.Event(ft.dataType+"dataloading",ft))})}de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q;var ye={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Q.prototype._getMapId=function(){return this._mapId},Q.prototype.addControl=function(me,Be){if(Be===void 0&&(me.getDefaultPosition?Be=me.getDefaultPosition():Be="top-right"),!me||!me.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ke=me.onAdd(this);this._controls.push(me);var ft=this._controlPositions[Be];return Be.indexOf("bottom")!==-1?ft.insertBefore(Ke,ft.firstChild):ft.appendChild(Ke),this},Q.prototype.removeControl=function(me){if(!me||!me.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Be=this._controls.indexOf(me);return Be>-1&&this._controls.splice(Be,1),me.onRemove(this),this},Q.prototype.hasControl=function(me){return this._controls.indexOf(me)>-1},Q.prototype.resize=function(me){var Be=this._containerDimensions(),Ke=Be[0],ft=Be[1];this._resizeCanvas(Ke,ft),this.transform.resize(Ke,ft),this.painter.resize(Ke,ft);var Ct=!this._moving;return Ct&&(this.stop(),this.fire(new n.Event("movestart",me)).fire(new n.Event("move",me))),this.fire(new n.Event("resize",me)),Ct&&this.fire(new n.Event("moveend",me)),this},Q.prototype.getBounds=function(){return this.transform.getBounds()},Q.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Q.prototype.setMaxBounds=function(me){return this.transform.setMaxBounds(n.LngLatBounds.convert(me)),this._update()},Q.prototype.setMinZoom=function(me){if(me=me??Pc,me>=Pc&&me<=this.transform.maxZoom)return this.transform.minZoom=me,this._update(),this.getZoom()<me&&this.setZoom(me),this;throw new Error("minZoom must be between "+Pc+" and the current maxZoom, inclusive")},Q.prototype.getMinZoom=function(){return this.transform.minZoom},Q.prototype.setMaxZoom=function(me){if(me=me??Rc,me>=this.transform.minZoom)return this.transform.maxZoom=me,this._update(),this.getZoom()>me&&this.setZoom(me),this;throw new Error("maxZoom must be greater than the current minZoom")},Q.prototype.getMaxZoom=function(){return this.transform.maxZoom},Q.prototype.setMinPitch=function(me){if(me=me??vs,me<vs)throw new Error("minPitch must be greater than or equal to "+vs);if(me>=vs&&me<=this.transform.maxPitch)return this.transform.minPitch=me,this._update(),this.getPitch()<me&&this.setPitch(me),this;throw new Error("minPitch must be between "+vs+" and the current maxPitch, inclusive")},Q.prototype.getMinPitch=function(){return this.transform.minPitch},Q.prototype.setMaxPitch=function(me){if(me=me??hf,me>hf)throw new Error("maxPitch must be less than or equal to "+hf);if(me>=this.transform.minPitch)return this.transform.maxPitch=me,this._update(),this.getPitch()>me&&this.setPitch(me),this;throw new Error("maxPitch must be greater than the current minPitch")},Q.prototype.getMaxPitch=function(){return this.transform.maxPitch},Q.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Q.prototype.setRenderWorldCopies=function(me){return this.transform.renderWorldCopies=me,this._update()},Q.prototype.project=function(me){return this.transform.locationPoint(n.LngLat.convert(me))},Q.prototype.unproject=function(me){return this.transform.pointLocation(n.Point.convert(me))},Q.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Q.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Q.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Q.prototype._createDelegatedListener=function(me,Be,Ke){var ft=this,Ct;if(me==="mouseenter"||me==="mouseover"){var Ut=!1,$t=function(Gr){var Jr=ft.getLayer(Be)?ft.queryRenderedFeatures(Gr.point,{layers:[Be]}):[];Jr.length?Ut||(Ut=!0,Ke.call(ft,new tt(me,ft,Gr.originalEvent,{features:Jr}))):Ut=!1},lr=function(){Ut=!1};return{layer:Be,listener:Ke,delegates:{mousemove:$t,mouseout:lr}}}else if(me==="mouseleave"||me==="mouseout"){var ar=!1,Dr=function(Gr){var Jr=ft.getLayer(Be)?ft.queryRenderedFeatures(Gr.point,{layers:[Be]}):[];Jr.length?ar=!0:ar&&(ar=!1,Ke.call(ft,new tt(me,ft,Gr.originalEvent)))},Xr=function(Gr){ar&&(ar=!1,Ke.call(ft,new tt(me,ft,Gr.originalEvent)))};return{layer:Be,listener:Ke,delegates:{mousemove:Dr,mouseout:Xr}}}else{var Yr=function(Gr){var Jr=ft.getLayer(Be)?ft.queryRenderedFeatures(Gr.point,{layers:[Be]}):[];Jr.length&&(Gr.features=Jr,Ke.call(ft,Gr),delete Gr.features)};return{layer:Be,listener:Ke,delegates:(Ct={},Ct[me]=Yr,Ct)}}},Q.prototype.on=function(me,Be,Ke){if(Ke===void 0)return de.prototype.on.call(this,me,Be);var ft=this._createDelegatedListener(me,Be,Ke);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[me]=this._delegatedListeners[me]||[],this._delegatedListeners[me].push(ft);for(var Ct in ft.delegates)this.on(Ct,ft.delegates[Ct]);return this},Q.prototype.once=function(me,Be,Ke){if(Ke===void 0)return de.prototype.once.call(this,me,Be);var ft=this._createDelegatedListener(me,Be,Ke);for(var Ct in ft.delegates)this.once(Ct,ft.delegates[Ct]);return this},Q.prototype.off=function(me,Be,Ke){var ft=this;if(Ke===void 0)return de.prototype.off.call(this,me,Be);var Ct=function(Ut){for(var $t=Ut[me],lr=0;lr<$t.length;lr++){var ar=$t[lr];if(ar.layer===Be&&ar.listener===Ke){for(var Dr in ar.delegates)ft.off(Dr,ar.delegates[Dr]);return $t.splice(lr,1),ft}}};return this._delegatedListeners&&this._delegatedListeners[me]&&Ct(this._delegatedListeners),this},Q.prototype.queryRenderedFeatures=function(me,Be){if(!this.style)return[];Be===void 0&&me!==void 0&&!(me instanceof n.Point)&&!Array.isArray(me)&&(Be=me,me=void 0),Be=Be||{},me=me||[[0,0],[this.transform.width,this.transform.height]];var Ke;if(me instanceof n.Point||typeof me[0]=="number")Ke=[n.Point.convert(me)];else{var ft=n.Point.convert(me[0]),Ct=n.Point.convert(me[1]);Ke=[ft,new n.Point(Ct.x,ft.y),Ct,new n.Point(ft.x,Ct.y),ft]}return this.style.queryRenderedFeatures(Ke,Be,this.transform)},Q.prototype.querySourceFeatures=function(me,Be){return this.style.querySourceFeatures(me,Be)},Q.prototype.setStyle=function(me,Be){return Be=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Be),Be.diff!==!1&&Be.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&me?(this._diffStyle(me,Be),this):(this._localIdeographFontFamily=Be.localIdeographFontFamily,this._updateStyle(me,Be))},Q.prototype._getUIString=function(me){var Be=this._locale[me];if(Be==null)throw new Error("Missing UI string '"+me+"'");return Be},Q.prototype._updateStyle=function(me,Be){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),me)this.style=new Wo(this,Be||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof me=="string"?this.style.loadURL(me):this.style.loadJSON(me),this},Q.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Wo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Q.prototype._diffStyle=function(me,Be){var Ke=this;if(typeof me=="string"){var ft=this._requestManager.normalizeStyleURL(me),Ct=this._requestManager.transformRequest(ft,n.ResourceType.Style);n.getJSON(Ct,function(Ut,$t){Ut?Ke.fire(new n.ErrorEvent(Ut)):$t&&Ke._updateDiff($t,Be)})}else typeof me=="object"&&this._updateDiff(me,Be)},Q.prototype._updateDiff=function(me,Be){try{this.style.setState(me)&&this._update(!0)}catch(Ke){n.warnOnce("Unable to perform style diff: "+(Ke.message||Ke.error||Ke)+".  Rebuilding the style from scratch."),this._updateStyle(me,Be)}},Q.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Q.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")},Q.prototype.addSource=function(me,Be){return this._lazyInitEmptyStyle(),this.style.addSource(me,Be),this._update(!0)},Q.prototype.isSourceLoaded=function(me){var Be=this.style&&this.style.sourceCaches[me];if(Be===void 0){this.fire(new n.ErrorEvent(new Error("There is no source with ID '"+me+"'")));return}return Be.loaded()},Q.prototype.areTilesLoaded=function(){var me=this.style&&this.style.sourceCaches;for(var Be in me){var Ke=me[Be],ft=Ke._tiles;for(var Ct in ft){var Ut=ft[Ct];if(!(Ut.state==="loaded"||Ut.state==="errored"))return!1}}return!0},Q.prototype.addSourceType=function(me,Be,Ke){return this._lazyInitEmptyStyle(),this.style.addSourceType(me,Be,Ke)},Q.prototype.removeSource=function(me){return this.style.removeSource(me),this._update(!0)},Q.prototype.getSource=function(me){return this.style.getSource(me)},Q.prototype.addImage=function(me,Be,Ke){Ke===void 0&&(Ke={});var ft=Ke.pixelRatio;ft===void 0&&(ft=1);var Ct=Ke.sdf;Ct===void 0&&(Ct=!1);var Ut=Ke.stretchX,$t=Ke.stretchY,lr=Ke.content;this._lazyInitEmptyStyle();var ar=0;if(Be instanceof Hf||cf&&Be instanceof cf){var Dr=n.browser.getImageData(Be),Xr=Dr.width,Yr=Dr.height,Gr=Dr.data;this.style.addImage(me,{data:new n.RGBAImage({width:Xr,height:Yr},Gr),pixelRatio:ft,stretchX:Ut,stretchY:$t,content:lr,sdf:Ct,version:ar})}else{if(Be.width===void 0||Be.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Jr=Be.width,vn=Be.height,In=Be.data,Bn=Be;this.style.addImage(me,{data:new n.RGBAImage({width:Jr,height:vn},new Uint8Array(In)),pixelRatio:ft,stretchX:Ut,stretchY:$t,content:lr,sdf:Ct,version:ar,userImage:Bn}),Bn.onAdd&&Bn.onAdd(this,me)}},Q.prototype.updateImage=function(me,Be){var Ke=this.style.getImage(me);if(!Ke)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ft=Be instanceof Hf||cf&&Be instanceof cf?n.browser.getImageData(Be):Be,Ct=ft.width,Ut=ft.height,$t=ft.data;if(Ct===void 0||Ut===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Ct!==Ke.data.width||Ut!==Ke.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var lr=!(Be instanceof Hf||cf&&Be instanceof cf);Ke.data.replace($t,lr),this.style.updateImage(me,Ke)},Q.prototype.hasImage=function(me){return me?!!this.style.getImage(me):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)},Q.prototype.removeImage=function(me){this.style.removeImage(me)},Q.prototype.loadImage=function(me,Be){n.getImage(this._requestManager.transformRequest(me,n.ResourceType.Image),Be)},Q.prototype.listImages=function(){return this.style.listImages()},Q.prototype.addLayer=function(me,Be){return this._lazyInitEmptyStyle(),this.style.addLayer(me,Be),this._update(!0)},Q.prototype.moveLayer=function(me,Be){return this.style.moveLayer(me,Be),this._update(!0)},Q.prototype.removeLayer=function(me){return this.style.removeLayer(me),this._update(!0)},Q.prototype.getLayer=function(me){return this.style.getLayer(me)},Q.prototype.setLayerZoomRange=function(me,Be,Ke){return this.style.setLayerZoomRange(me,Be,Ke),this._update(!0)},Q.prototype.setFilter=function(me,Be,Ke){return Ke===void 0&&(Ke={}),this.style.setFilter(me,Be,Ke),this._update(!0)},Q.prototype.getFilter=function(me){return this.style.getFilter(me)},Q.prototype.setPaintProperty=function(me,Be,Ke,ft){return ft===void 0&&(ft={}),this.style.setPaintProperty(me,Be,Ke,ft),this._update(!0)},Q.prototype.getPaintProperty=function(me,Be){return this.style.getPaintProperty(me,Be)},Q.prototype.setLayoutProperty=function(me,Be,Ke,ft){return ft===void 0&&(ft={}),this.style.setLayoutProperty(me,Be,Ke,ft),this._update(!0)},Q.prototype.getLayoutProperty=function(me,Be){return this.style.getLayoutProperty(me,Be)},Q.prototype.setLight=function(me,Be){return Be===void 0&&(Be={}),this._lazyInitEmptyStyle(),this.style.setLight(me,Be),this._update(!0)},Q.prototype.getLight=function(){return this.style.getLight()},Q.prototype.setFeatureState=function(me,Be){return this.style.setFeatureState(me,Be),this._update()},Q.prototype.removeFeatureState=function(me,Be){return this.style.removeFeatureState(me,Be),this._update()},Q.prototype.getFeatureState=function(me){return this.style.getFeatureState(me)},Q.prototype.getContainer=function(){return this._container},Q.prototype.getCanvasContainer=function(){return this._canvasContainer},Q.prototype.getCanvas=function(){return this._canvas},Q.prototype._containerDimensions=function(){var me=0,Be=0;return this._container&&(me=this._container.clientWidth||400,Be=this._container.clientHeight||300),[me,Be]},Q.prototype._detectMissingCSS=function(){var me=n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");me!=="rgb(250, 128, 114)"&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Q.prototype._setupContainer=function(){var me=this._container;me.classList.add("mapboxgl-map");var Be=this._missingCSSCanary=T.create("div","mapboxgl-canary",me);Be.style.visibility="hidden",this._detectMissingCSS();var Ke=this._canvasContainer=T.create("div","mapboxgl-canvas-container",me);this._interactive&&Ke.classList.add("mapboxgl-interactive"),this._canvas=T.create("canvas","mapboxgl-canvas",Ke),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ft=this._containerDimensions();this._resizeCanvas(ft[0],ft[1]);var Ct=this._controlContainer=T.create("div","mapboxgl-control-container",me),Ut=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function($t){Ut[$t]=T.create("div","mapboxgl-ctrl-"+$t,Ct)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},Q.prototype._resizeCanvas=function(me,Be){var Ke=n.browser.devicePixelRatio||1;this._canvas.width=Ke*me,this._canvas.height=Ke*Be,this._canvas.style.width=me+"px",this._canvas.style.height=Be+"px"},Q.prototype._setupPainter=function(){var me=n.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Be=this._canvas.getContext("webgl",me)||this._canvas.getContext("experimental-webgl",me);if(!Be){this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new Nr(Be,this.transform),n.webpSupported.testSupport(Be)},Q.prototype._contextLost=function(me){me.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:me}))},Q.prototype._contextRestored=function(me){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:me}))},Q.prototype._onMapScroll=function(me){if(me.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},Q.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Q.prototype._update=function(me){return this.style?(this._styleDirty=this._styleDirty||me,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Q.prototype._requestRenderFrame=function(me){return this._update(),this._renderTaskQueue.add(me)},Q.prototype._cancelRenderFrame=function(me){this._renderTaskQueue.remove(me)},Q.prototype._render=function(me){var Be=this,Ke,ft=0,Ct=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Ke=Ct.createQueryEXT(),Ct.beginQueryEXT(Ct.TIME_ELAPSED_EXT,Ke),ft=n.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(me),!this._removed){var Ut=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $t=this.transform.zoom,lr=n.browser.now();this.style.zoomHistory.update($t,lr);var ar=new n.EvaluationParameters($t,{now:lr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Dr=ar.crossFadingFactor();(Dr!==1||Dr!==this._crossFadingFactor)&&(Ut=!0,this._crossFadingFactor=Dr),this.style.update(ar)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||Ut)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Xr=n.browser.now()-ft;Ct.endQueryEXT(Ct.TIME_ELAPSED_EXT,Ke),setTimeout(function(){var Jr=Ct.getQueryObjectEXT(Ke,Ct.QUERY_RESULT_EXT)/1e6;Ct.deleteQueryEXT(Ke),Be.fire(new n.Event("gpu-timing-frame",{cpuTime:Xr,gpuTime:Jr}))},50)}if(this.listens("gpu-timing-layer")){var Yr=this.painter.collectGpuTimers();setTimeout(function(){var Jr=Be.painter.queryGpuTimers(Yr);Be.fire(new n.Event("gpu-timing-layer",{layerTimes:Jr}))},50)}var Gr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Gr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),this._loaded&&!this._fullyLoaded&&!Gr&&(this._fullyLoaded=!0),this}},Q.prototype.remove=function(){this._hash&&this._hash.remove();for(var me=0,Be=this._controls;me<Be.length;me+=1){var Ke=Be[me];Ke.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof n.window<"u"&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1));var ft=this.painter.context.gl.getExtension("WEBGL_lose_context");ft&&ft.loseContext&&ft.loseContext(),Dh(this._canvasContainer),Dh(this._controlContainer),Dh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new n.Event("remove"))},Q.prototype.triggerRepaint=function(){var me=this;this.style&&!this._frame&&(this._frame=n.browser.frame(function(Be){me._frame=null,me._render(Be)}))},Q.prototype._onWindowOnline=function(){this._update()},Q.prototype._onWindowResize=function(me){this._trackResize&&this.resize({originalEvent:me})._update()},ye.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ye.showTileBoundaries.set=function(ae){this._showTileBoundaries!==ae&&(this._showTileBoundaries=ae,this._update())},ye.showPadding.get=function(){return!!this._showPadding},ye.showPadding.set=function(ae){this._showPadding!==ae&&(this._showPadding=ae,this._update())},ye.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ye.showCollisionBoxes.set=function(ae){this._showCollisionBoxes!==ae&&(this._showCollisionBoxes=ae,ae?this.style._generateCollisionBoxes():this._update())},ye.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ye.showOverdrawInspector.set=function(ae){this._showOverdrawInspector!==ae&&(this._showOverdrawInspector=ae,this._update())},ye.repaint.get=function(){return!!this._repaint},ye.repaint.set=function(ae){this._repaint!==ae&&(this._repaint=ae,this.triggerRepaint())},ye.vertices.get=function(){return!!this._vertices},ye.vertices.set=function(ae){this._vertices=ae,this._update()},Q.prototype._setCacheLimits=function(me,Be){n.setCacheLimits(me,Be)},ye.version.get=function(){return n.version},Object.defineProperties(Q.prototype,ye),Q}(eu);function Dh(de){de.parentNode&&de.parentNode.removeChild(de)}var av={showCompass:!0,showZoom:!0,visualizePitch:!1},zu=function(Q){var ye=this;this.options=n.extend({},av,Q),this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(ae){return ae.preventDefault()}),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(ae){return ye._map.zoomIn({},{originalEvent:ae})}),T.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(ae){return ye._map.zoomOut({},{originalEvent:ae})}),T.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(ae){ye.options.visualizePitch?ye._map.resetNorthPitch({},{originalEvent:ae}):ye._map.resetNorth({},{originalEvent:ae})}),this._compassIcon=T.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};zu.prototype._updateZoomButtons=function(){var Q=this._map.getZoom(),ye=Q===this._map.getMaxZoom(),ae=Q===this._map.getMinZoom();this._zoomInButton.disabled=ye,this._zoomOutButton.disabled=ae,this._zoomInButton.setAttribute("aria-disabled",ye.toString()),this._zoomOutButton.setAttribute("aria-disabled",ae.toString())},zu.prototype._rotateCompassArrow=function(){var Q=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Q},zu.prototype.onAdd=function(Q){return this._map=Q,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _s(this._map,this._compass,this.options.visualizePitch)),this._container},zu.prototype.onRemove=function(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},zu.prototype._createButton=function(Q,ye){var ae=T.create("button",Q,this._container);return ae.type="button",ae.addEventListener("click",ye),ae},zu.prototype._setButtonTitle=function(Q,ye){var ae=this._map._getUIString("NavigationControl."+ye);Q.title=ae,Q.setAttribute("aria-label",ae)};var _s=function(Q,ye,ae){ae===void 0&&(ae=!1),this._clickTolerance=10,this.element=ye,this.mouseRotate=new fi({clickTolerance:Q.dragRotate._mouseRotate._clickTolerance}),this.map=Q,ae&&(this.mousePitch=new qn({clickTolerance:Q.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),T.addEventListener(ye,"mousedown",this.mousedown),T.addEventListener(ye,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(ye,"touchmove",this.touchmove),T.addEventListener(ye,"touchend",this.touchend),T.addEventListener(ye,"touchcancel",this.reset)};_s.prototype.down=function(Q,ye){this.mouseRotate.mousedown(Q,ye),this.mousePitch&&this.mousePitch.mousedown(Q,ye),T.disableDrag()},_s.prototype.move=function(Q,ye){var ae=this.map,me=this.mouseRotate.mousemoveWindow(Q,ye);if(me&&me.bearingDelta&&ae.setBearing(ae.getBearing()+me.bearingDelta),this.mousePitch){var Be=this.mousePitch.mousemoveWindow(Q,ye);Be&&Be.pitchDelta&&ae.setPitch(ae.getPitch()+Be.pitchDelta)}},_s.prototype.off=function(){var Q=this.element;T.removeEventListener(Q,"mousedown",this.mousedown),T.removeEventListener(Q,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(Q,"touchmove",this.touchmove),T.removeEventListener(Q,"touchend",this.touchend),T.removeEventListener(Q,"touchcancel",this.reset),this.offTemp()},_s.prototype.offTemp=function(){T.enableDrag(),T.removeEventListener(n.window,"mousemove",this.mousemove),T.removeEventListener(n.window,"mouseup",this.mouseup)},_s.prototype.mousedown=function(Q){this.down(n.extend({},Q,{ctrlKey:!0,preventDefault:function(){return Q.preventDefault()}}),T.mousePos(this.element,Q)),T.addEventListener(n.window,"mousemove",this.mousemove),T.addEventListener(n.window,"mouseup",this.mouseup)},_s.prototype.mousemove=function(Q){this.move(Q,T.mousePos(this.element,Q))},_s.prototype.mouseup=function(Q){this.mouseRotate.mouseupWindow(Q),this.mousePitch&&this.mousePitch.mouseupWindow(Q),this.offTemp()},_s.prototype.touchstart=function(Q){Q.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,Q.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Q.preventDefault()}},this._startPos))},_s.prototype.touchmove=function(Q){Q.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,Q.targetTouches)[0],this.move({preventDefault:function(){return Q.preventDefault()}},this._lastPos))},_s.prototype.touchend=function(Q){Q.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},_s.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Ou(de,Q,ye){if(de=new n.LngLat(de.lng,de.lat),Q){var ae=new n.LngLat(de.lng-360,de.lat),me=new n.LngLat(de.lng+360,de.lat),Be=ye.locationPoint(de).distSqr(Q);ye.locationPoint(ae).distSqr(Q)<Be?de=ae:ye.locationPoint(me).distSqr(Q)<Be&&(de=me)}for(;Math.abs(de.lng-ye.center.lng)>180;){var Ke=ye.locationPoint(de);if(Ke.x>=0&&Ke.y>=0&&Ke.x<=ye.width&&Ke.y<=ye.height)break;de.lng>ye.center.lng?de.lng-=360:de.lng+=360}return de}var kh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ov(de,Q,ye){var ae=de.classList;for(var me in kh)ae.remove("mapboxgl-"+ye+"-anchor-"+me);ae.add("mapboxgl-"+ye+"-anchor-"+Q)}var Ic=function(de){function Q(ye,ae){if(de.call(this),(ye instanceof n.window.HTMLElement||ae)&&(ye=n.extend({element:ye},ae)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ye&&ye.anchor||"center",this._color=ye&&ye.color||"#3FB1CE",this._scale=ye&&ye.scale||1,this._draggable=ye&&ye.draggable||!1,this._clickTolerance=ye&&ye.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=ye&&ye.rotation||0,this._rotationAlignment=ye&&ye.rotationAlignment||"auto",this._pitchAlignment=ye&&ye.pitchAlignment&&ye.pitchAlignment!=="auto"?ye.pitchAlignment:this._rotationAlignment,!ye||!ye.element){this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");var me=T.createNS("http://www.w3.org/2000/svg","svg"),Be=41,Ke=27;me.setAttributeNS(null,"display","block"),me.setAttributeNS(null,"height",Be+"px"),me.setAttributeNS(null,"width",Ke+"px"),me.setAttributeNS(null,"viewBox","0 0 "+Ke+" "+Be);var ft=T.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"stroke","none"),ft.setAttributeNS(null,"stroke-width","1"),ft.setAttributeNS(null,"fill","none"),ft.setAttributeNS(null,"fill-rule","evenodd");var Ct=T.createNS("http://www.w3.org/2000/svg","g");Ct.setAttributeNS(null,"fill-rule","nonzero");var Ut=T.createNS("http://www.w3.org/2000/svg","g");Ut.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ut.setAttributeNS(null,"fill","#000000");for(var $t=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],lr=0,ar=$t;lr<ar.length;lr+=1){var Dr=ar[lr],Xr=T.createNS("http://www.w3.org/2000/svg","ellipse");Xr.setAttributeNS(null,"opacity","0.04"),Xr.setAttributeNS(null,"cx","10.5"),Xr.setAttributeNS(null,"cy","5.80029008"),Xr.setAttributeNS(null,"rx",Dr.rx),Xr.setAttributeNS(null,"ry",Dr.ry),Ut.appendChild(Xr)}var Yr=T.createNS("http://www.w3.org/2000/svg","g");Yr.setAttributeNS(null,"fill",this._color);var Gr=T.createNS("http://www.w3.org/2000/svg","path");Gr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Yr.appendChild(Gr);var Jr=T.createNS("http://www.w3.org/2000/svg","g");Jr.setAttributeNS(null,"opacity","0.25"),Jr.setAttributeNS(null,"fill","#000000");var vn=T.createNS("http://www.w3.org/2000/svg","path");vn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Jr.appendChild(vn);var In=T.createNS("http://www.w3.org/2000/svg","g");In.setAttributeNS(null,"transform","translate(6.0, 7.0)"),In.setAttributeNS(null,"fill","#FFFFFF");var Bn=T.createNS("http://www.w3.org/2000/svg","g");Bn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Yn=T.createNS("http://www.w3.org/2000/svg","circle");Yn.setAttributeNS(null,"fill","#000000"),Yn.setAttributeNS(null,"opacity","0.25"),Yn.setAttributeNS(null,"cx","5.5"),Yn.setAttributeNS(null,"cy","5.5"),Yn.setAttributeNS(null,"r","5.4999962");var Xn=T.createNS("http://www.w3.org/2000/svg","circle");Xn.setAttributeNS(null,"fill","#FFFFFF"),Xn.setAttributeNS(null,"cx","5.5"),Xn.setAttributeNS(null,"cy","5.5"),Xn.setAttributeNS(null,"r","5.4999962"),Bn.appendChild(Yn),Bn.appendChild(Xn),Ct.appendChild(Ut),Ct.appendChild(Yr),Ct.appendChild(Jr),Ct.appendChild(In),Ct.appendChild(Bn),me.appendChild(Ct),me.setAttributeNS(null,"height",Be*this._scale+"px"),me.setAttributeNS(null,"width",Ke*this._scale+"px"),this._element.appendChild(me),this._offset=n.Point.convert(ye&&ye.offset||[0,-14])}else this._element=ye.element,this._offset=n.Point.convert(ye&&ye.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Gn){Gn.preventDefault()}),this._element.addEventListener("mousedown",function(Gn){Gn.preventDefault()}),ov(this._element,this._anchor,"marker"),this._popup=null}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.addTo=function(ae){return this.remove(),this._map=ae,ae.getCanvasContainer().appendChild(this._element),ae.on("move",this._update),ae.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Q.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this},Q.prototype.getLngLat=function(){return this._lngLat},Q.prototype.setLngLat=function(ae){return this._lngLat=n.LngLat.convert(ae),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Q.prototype.getElement=function(){return this._element},Q.prototype.setPopup=function(ae){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),ae){if(!("offset"in ae.options)){var me=38.1,Be=13.5,Ke=Math.sqrt(Math.pow(Be,2)/2);ae.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-me],"bottom-left":[Ke,(me-Be+Ke)*-1],"bottom-right":[-Ke,(me-Be+Ke)*-1],left:[Be,(me-Be)*-1],right:[-Be,(me-Be)*-1]}:this._offset}this._popup=ae,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Q.prototype._onKeyPress=function(ae){var me=ae.code,Be=ae.charCode||ae.keyCode;(me==="Space"||me==="Enter"||Be===32||Be===13)&&this.togglePopup()},Q.prototype._onMapClick=function(ae){var me=ae.originalEvent.target,Be=this._element;this._popup&&(me===Be||Be.contains(me))&&this.togglePopup()},Q.prototype.getPopup=function(){return this._popup},Q.prototype.togglePopup=function(){var ae=this._popup;if(ae)ae.isOpen()?ae.remove():ae.addTo(this._map);else return this;return this},Q.prototype._update=function(ae){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ou(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var me="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?me="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(me="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Be="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Be="rotateX(0deg)":this._pitchAlignment==="map"&&(Be="rotateX("+this._map.getPitch()+"deg)"),(!ae||ae.type==="moveend")&&(this._pos=this._pos.round()),T.setTransform(this._element,kh[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Be+" "+me)}},Q.prototype.getOffset=function(){return this._offset},Q.prototype.setOffset=function(ae){return this._offset=n.Point.convert(ae),this._update(),this},Q.prototype._onMove=function(ae){if(!this._isDragging){var me=this._clickTolerance||this._map._clickTolerance;this._isDragging=ae.point.dist(this._pointerdownPos)>=me}this._isDragging&&(this._pos=ae.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))},Q.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"},Q.prototype._addDragHandler=function(ae){this._element.contains(ae.originalEvent.target)&&(ae.preventDefault(),this._positionDelta=ae.point.sub(this._pos).add(this._offset),this._pointerdownPos=ae.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Q.prototype.setDraggable=function(ae){return this._draggable=!!ae,this._map&&(ae?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Q.prototype.isDraggable=function(){return this._draggable},Q.prototype.setRotation=function(ae){return this._rotation=ae||0,this._update(),this},Q.prototype.getRotation=function(){return this._rotation},Q.prototype.setRotationAlignment=function(ae){return this._rotationAlignment=ae||"auto",this._update(),this},Q.prototype.getRotationAlignment=function(){return this._rotationAlignment},Q.prototype.setPitchAlignment=function(ae){return this._pitchAlignment=ae&&ae!=="auto"?ae:this._rotationAlignment,this._update(),this},Q.prototype.getPitchAlignment=function(){return this._pitchAlignment},Q}(n.Evented),cd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},vf;function zh(de){vf!==void 0?de(vf):n.window.navigator.permissions!==void 0?n.window.navigator.permissions.query({name:"geolocation"}).then(function(Q){vf=Q.state!=="denied",de(vf)}):(vf=!!n.window.navigator.geolocation,de(vf))}var Dc=0,Gf=!1,Ip=function(de){function Q(ye){de.call(this),this.options=n.extend({},cd,ye),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.onAdd=function(ae){return this._map=ae,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),zh(this._setupUI),this._container},Q.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Dc=0,Gf=!1},Q.prototype._isOutOfMapMaxBounds=function(ae){var me=this._map.getMaxBounds(),Be=ae.coords;return me&&(Be.longitude<me.getWest()||Be.longitude>me.getEast()||Be.latitude<me.getSouth()||Be.latitude>me.getNorth())},Q.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},Q.prototype._onSuccess=function(ae){if(this._map){if(this._isOutOfMapMaxBounds(ae)){this._setErrorState(),this.fire(new n.Event("outofmaxbounds",ae)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=ae,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(ae),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(ae),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",ae)),this._finish()}},Q.prototype._updateCamera=function(ae){var me=new n.LngLat(ae.coords.longitude,ae.coords.latitude),Be=ae.coords.accuracy,Ke=this._map.getBearing(),ft=n.extend({bearing:Ke},this.options.fitBoundsOptions);this._map.fitBounds(me.toBounds(Be),ft,{geolocateSource:!0})},Q.prototype._updateMarker=function(ae){if(ae){var me=new n.LngLat(ae.coords.longitude,ae.coords.latitude);this._accuracyCircleMarker.setLngLat(me).addTo(this._map),this._userLocationDotMarker.setLngLat(me).addTo(this._map),this._accuracy=ae.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Q.prototype._updateCircleRadius=function(){var ae=this._map._container.clientHeight/2,me=this._map.unproject([0,ae]),Be=this._map.unproject([1,ae]),Ke=me.distanceTo(Be),ft=Math.ceil(2*this._accuracy/Ke);this._circleElement.style.width=ft+"px",this._circleElement.style.height=ft+"px"},Q.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Q.prototype._onError=function(ae){if(this._map){if(this.options.trackUserLocation)if(ae.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var me=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=me,this._geolocateButton.setAttribute("aria-label",me),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(ae.code===3&&Gf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",ae)),this._finish()}},Q.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Q.prototype._setupUI=function(ae){var me=this;if(this._container.addEventListener("contextmenu",function(ft){return ft.preventDefault()}),this._geolocateButton=T.create("button","mapboxgl-ctrl-geolocate",this._container),T.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",ae===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Be=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Be,this._geolocateButton.setAttribute("aria-label",Be)}else{var Ke=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ke,this._geolocateButton.setAttribute("aria-label",Ke)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ic(this._dotElement),this._circleElement=T.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ic({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ft){var Ct=ft.originalEvent&&ft.originalEvent.type==="resize";!ft.geolocateSource&&me._watchState==="ACTIVE_LOCK"&&!Ct&&(me._watchState="BACKGROUND",me._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),me._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),me.fire(new n.Event("trackuserlocationend")))})},Q.prototype.trigger=function(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Dc--,Gf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Dc++;var ae;Dc>1?(ae={maximumAge:6e5,timeout:0},Gf=!0):(ae=this.options.positionOptions,Gf=!1),this._geolocationWatchID=n.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,ae)}}else n.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Q.prototype._clearWatch=function(){n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Q}(n.Evented),hd={maxWidth:100,unit:"metric"},Wf=function(Q){this.options=n.extend({},hd,Q),n.bindAll(["_onMove","setUnit"],this)};Wf.prototype.getDefaultPosition=function(){return"bottom-left"},Wf.prototype._onMove=function(){vd(this._map,this._container,this.options)},Wf.prototype.onAdd=function(Q){return this._map=Q,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Q.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Wf.prototype.onRemove=function(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Wf.prototype.setUnit=function(Q){this.options.unit=Q,vd(this._map,this._container,this.options)};function vd(de,Q,ye){var ae=ye&&ye.maxWidth||100,me=de._container.clientHeight/2,Be=de.unproject([0,me]),Ke=de.unproject([ae,me]),ft=Be.distanceTo(Ke);if(ye&&ye.unit==="imperial"){var Ct=3.2808*ft;if(Ct>5280){var Ut=Ct/5280;kc(Q,ae,Ut,de._getUIString("ScaleControl.Miles"))}else kc(Q,ae,Ct,de._getUIString("ScaleControl.Feet"))}else if(ye&&ye.unit==="nautical"){var $t=ft/1852;kc(Q,ae,$t,de._getUIString("ScaleControl.NauticalMiles"))}else ft>=1e3?kc(Q,ae,ft/1e3,de._getUIString("ScaleControl.Kilometers")):kc(Q,ae,ft,de._getUIString("ScaleControl.Meters"))}function kc(de,Q,ye,ae){var me=kp(ye),Be=me/ye;de.style.width=Q*Be+"px",de.innerHTML=me+"&nbsp;"+ae}function Dp(de){var Q=Math.pow(10,Math.ceil(-Math.log(de)/Math.LN10));return Math.round(de*Q)/Q}function kp(de){var Q=Math.pow(10,(""+Math.floor(de)).length-1),ye=de/Q;return ye=ye>=10?10:ye>=5?5:ye>=3?3:ye>=2?2:ye>=1?1:Dp(ye),Q*ye}var El=function(Q){this._fullscreen=!1,Q&&Q.container&&(Q.container instanceof n.window.HTMLElement?this._container=Q.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in n.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in n.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in n.window.document&&(this._fullscreenchange="MSFullscreenChange")};El.prototype.onAdd=function(Q){return this._map=Q,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},El.prototype.onRemove=function(){T.remove(this._controlContainer),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},El.prototype._checkFullscreenSupport=function(){return!!(n.window.document.fullscreenEnabled||n.window.document.mozFullScreenEnabled||n.window.document.msFullscreenEnabled||n.window.document.webkitFullscreenEnabled)},El.prototype._setupUI=function(){var Q=this._fullscreenButton=T.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);T.create("span","mapboxgl-ctrl-icon",Q).setAttribute("aria-hidden",!0),Q.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},El.prototype._updateTitle=function(){var Q=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Q),this._fullscreenButton.title=Q},El.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},El.prototype._isFullscreen=function(){return this._fullscreen},El.prototype._changeIcon=function(){var Q=n.window.document.fullscreenElement||n.window.document.mozFullScreenElement||n.window.document.webkitFullscreenElement||n.window.document.msFullscreenElement;Q===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},El.prototype._onClickFullscreen=function(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.mozCancelFullScreen?n.window.document.mozCancelFullScreen():n.window.document.msExitFullscreen?n.window.document.msExitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var zp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Op=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Lg=function(de){function Q(ye){de.call(this),this.options=n.extend(Object.create(zp),ye),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return de&&(Q.__proto__=de),Q.prototype=Object.create(de&&de.prototype),Q.prototype.constructor=Q,Q.prototype.addTo=function(ae){return this._map&&this.remove(),this._map=ae,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this},Q.prototype.isOpen=function(){return!!this._map},Q.prototype.remove=function(){return this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this},Q.prototype.getLngLat=function(){return this._lngLat},Q.prototype.setLngLat=function(ae){return this._lngLat=n.LngLat.convert(ae),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Q.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Q.prototype.getElement=function(){return this._container},Q.prototype.setText=function(ae){return this.setDOMContent(n.window.document.createTextNode(ae))},Q.prototype.setHTML=function(ae){var me=n.window.document.createDocumentFragment(),Be=n.window.document.createElement("body"),Ke;for(Be.innerHTML=ae;Ke=Be.firstChild,!!Ke;)me.appendChild(Ke);return this.setDOMContent(me)},Q.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Q.prototype.setMaxWidth=function(ae){return this.options.maxWidth=ae,this._update(),this},Q.prototype.setDOMContent=function(ae){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(ae),this._createCloseButton(),this._update(),this._focusFirstElement(),this},Q.prototype.addClassName=function(ae){this._container&&this._container.classList.add(ae)},Q.prototype.removeClassName=function(ae){this._container&&this._container.classList.remove(ae)},Q.prototype.setOffset=function(ae){return this.options.offset=ae,this._update(),this},Q.prototype.toggleClassName=function(ae){if(this._container)return this._container.classList.toggle(ae)},Q.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=T.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Q.prototype._onMouseUp=function(ae){this._update(ae.point)},Q.prototype._onMouseMove=function(ae){this._update(ae.point)},Q.prototype._onDrag=function(ae){this._update(ae.point)},Q.prototype._update=function(ae){var me=this,Be=this._lngLat||this._trackPointer;if(!(!this._map||!Be||!this._content)&&(this._container||(this._container=T.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=T.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Dr){return me._container.classList.add(Dr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ou(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!ae))){var Ke=this._pos=this._trackPointer&&ae?ae:this._map.project(this._lngLat),ft=this.options.anchor,Ct=Fp(this.options.offset);if(!ft){var Ut=this._container.offsetWidth,$t=this._container.offsetHeight,lr;Ke.y+Ct.bottom.y<$t?lr=["top"]:Ke.y>this._map.transform.height-$t?lr=["bottom"]:lr=[],Ke.x<Ut/2?lr.push("left"):Ke.x>this._map.transform.width-Ut/2&&lr.push("right"),lr.length===0?ft="bottom":ft=lr.join("-")}var ar=Ke.add(Ct[ft]).round();T.setTransform(this._container,kh[ft]+" translate("+ar.x+"px,"+ar.y+"px)"),ov(this._container,ft,"popup")}},Q.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var ae=this._container.querySelector(Op);ae&&ae.focus()}},Q.prototype._onClose=function(){this.remove()},Q}(n.Evented);function Fp(de){if(de)if(typeof de=="number"){var Q=Math.round(Math.sqrt(.5*Math.pow(de,2)));return{center:new n.Point(0,0),top:new n.Point(0,de),"top-left":new n.Point(Q,Q),"top-right":new n.Point(-Q,Q),bottom:new n.Point(0,-de),"bottom-left":new n.Point(Q,-Q),"bottom-right":new n.Point(-Q,-Q),left:new n.Point(de,0),right:new n.Point(-de,0)}}else if(de instanceof n.Point||Array.isArray(de)){var ye=n.Point.convert(de);return{center:ye,top:ye,"top-left":ye,"top-right":ye,bottom:ye,"bottom-left":ye,"bottom-right":ye,left:ye,right:ye}}else return{center:n.Point.convert(de.center||[0,0]),top:n.Point.convert(de.top||[0,0]),"top-left":n.Point.convert(de["top-left"]||[0,0]),"top-right":n.Point.convert(de["top-right"]||[0,0]),bottom:n.Point.convert(de.bottom||[0,0]),"bottom-left":n.Point.convert(de["bottom-left"]||[0,0]),"bottom-right":n.Point.convert(de["bottom-right"]||[0,0]),left:n.Point.convert(de.left||[0,0]),right:n.Point.convert(de.right||[0,0])};else return Fp(new n.Point(0,0))}var mo={version:n.version,supported:E,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:fd,NavigationControl:zu,GeolocateControl:Ip,AttributionControl:Ki,ScaleControl:Wf,FullscreenControl:El,Popup:Lg,Marker:Ic,Style:Wo,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.Point,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,config:n.config,prewarm:Rt,clearPrewarmedResources:Jt,get accessToken(){return n.config.ACCESS_TOKEN},set accessToken(de){n.config.ACCESS_TOKEN=de},get baseApiUrl(){return n.config.API_URL},set baseApiUrl(de){n.config.API_URL=de},get workerCount(){return dr.workerCount},set workerCount(de){dr.workerCount=de},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(de){n.config.MAX_PARALLEL_IMAGE_REQUESTS=de},clearStorage:function(Q){n.clearTileCache(Q)},workerUrl:""};return mo}),d})},3108:function(U,F,e){U.exports=e(26099)},26099:function(U,F,e){var d=e(64928),S=e(32420),n=e(51160),E=e(76752),T=e(55616),v=e(31264),g=e(47520),r=e(18400),t=e(72512),o=e(76244),i=1073741824;U.exports=function(l,m){m||(m={}),l=g(l,"float64"),m=T(m,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var h=v(m.maxDepth,255),w=v(m.bounds,E(l,2));w[0]===w[2]&&w[2]++,w[1]===w[3]&&w[3]++;var c=f(l,w),a=l.length>>>1,p;m.dtype||(m.dtype="array"),typeof m.dtype=="string"?p=new(t(m.dtype))(a):m.dtype&&(p=m.dtype,Array.isArray(p)&&(p.length=a));for(var x=0;x<a;++x)p[x]=x;var A=[],P=[],y=[],C=[];V(0,0,1,p,0,1);for(var M=0,s=0;s<A.length;s++){var _=A[s];if(p.set)p.set(_,M);else for(var b=0,k=_.length;b<k;b++)p[b+M]=_[b];var D=M+A[s].length;C[s]=[M,D],M=D}return p.range=O,p;function V(z,H,X,$,ne,q){if(!$.length)return null;var ue=A[ne]||(A[ne]=[]),te=y[ne]||(y[ne]=[]),J=P[ne]||(P[ne]=[]),ie=ue.length;if(ne++,ne>h||q>i){for(var K=0;K<$.length;K++)ue.push($[K]),te.push(q),J.push(null,null,null,null);return ie}if(ue.push($[0]),te.push(q),$.length<=1)return J.push(null,null,null,null),ie;for(var ee=X*.5,le=z+ee,j=H+ee,Z=[],fe=[],re=[],ce=[],xe=1,Te=$.length;xe<Te;xe++){var we=$[xe],_e=c[we*2],ke=c[we*2+1];_e<le?ke<j?Z.push(we):fe.push(we):ke<j?re.push(we):ce.push(we)}return q<<=2,J.push(V(z,H,ee,Z,ne,q),V(z,j,ee,fe,ne,q+1),V(le,H,ee,re,ne,q+2),V(le,j,ee,ce,ne,q+3)),ie}function O(){for(var z=[],H=arguments.length;H--;)z[H]=arguments[H];var X;if(r(z[z.length-1])){var $=z.pop();!z.length&&($.x!=null||$.l!=null||$.left!=null)&&(z=[$],X={}),X=T($,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else X={};z.length||(z=w);var ne=n.apply(void 0,z),q=[Math.min(ne.x,ne.x+ne.width),Math.min(ne.y,ne.y+ne.height),Math.max(ne.x,ne.x+ne.width),Math.max(ne.y,ne.y+ne.height)],ue=q[0],te=q[1],J=q[2],ie=q[3],K=f([ue,te,J,ie],w),ee=K[0],le=K[1],j=K[2],Z=K[3],fe=v(X.level,A.length);if(X.d!=null){var re;typeof X.d=="number"?re=[X.d,X.d]:X.d.length&&(re=X.d),fe=Math.min(Math.max(Math.ceil(-o(Math.abs(re[0])/(w[2]-w[0]))),Math.ceil(-o(Math.abs(re[1])/(w[3]-w[1])))),fe)}if(fe=Math.min(fe,A.length),X.lod)return N(ee,le,j,Z,fe);var ce=[];xe(0,0,1,0,0,1);function xe(we,_e,ke,Ne,Ee,ze){if(!(Ee===null||ze===null)){var Ce=we+ke,Oe=_e+ke;if(!(ee>Ce||le>Oe||j<we||Z<_e)&&!(Ne>=fe)&&Ee!==ze){var Le=A[Ne];ze===void 0&&(ze=Le.length);for(var Ge=Ee;Ge<ze;Ge++){var rt=Le[Ge],ot=l[rt*2],$e=l[rt*2+1];ot>=ue&&ot<=J&&$e>=te&&$e<=ie&&ce.push(rt)}var qe=P[Ne],ht=qe[Ee*4+0],vt=qe[Ee*4+1],pt=qe[Ee*4+2],wt=qe[Ee*4+3],Et=Te(qe,Ee+1),nt=ke*.5,Fe=Ne+1;xe(we,_e,nt,Fe,ht,vt||pt||wt||Et),xe(we,_e+nt,nt,Fe,vt,pt||wt||Et),xe(we+nt,_e,nt,Fe,pt,wt||Et),xe(we+nt,_e+nt,nt,Fe,wt,Et)}}}function Te(we,_e){for(var ke=null,Ne=0;ke===null;)if(ke=we[_e*4+Ne],Ne++,Ne>we.length)return null;return ke}return ce}function N(z,H,X,$,ne){for(var q=[],ue=0;ue<ne;ue++){var te=y[ue],J=C[ue][0],ie=B(z,H,ue),K=B(X,$,ue),ee=d.ge(te,ie),le=d.gt(te,K,ee,te.length-1);q[ue]=[ee+J,le+J]}return q}function B(z,H,X){for(var $=1,ne=.5,q=.5,ue=.5,te=0;te<X;te++)$<<=2,$+=z<ne?H<q?0:1:H<q?2:3,ue*=.5,ne+=z<ne?-ue:ue,q+=H<q?-ue:ue;return $}};function f(u,l){for(var m=l[0],h=l[1],w=l[2],c=l[3],a=1/(w-m),p=1/(c-h),x=new Array(u.length),A=0,P=u.length/2;A<P;A++)x[2*A]=S((u[2*A]-m)*a,0,1),x[2*A+1]=S((u[2*A+1]-h)*p,0,1);return x}},40440:function(U,F,e){Object.defineProperty(F,"__esModule",{value:!0});var d=e(3256),S=6378137;function n(r){return d.geomReduce(r,function(t,o){return t+E(o)},0)}F.default=n;function E(r){var t=0,o;switch(r.type){case"Polygon":return T(r.coordinates);case"MultiPolygon":for(o=0;o<r.coordinates.length;o++)t+=T(r.coordinates[o]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function T(r){var t=0;if(r&&r.length>0){t+=Math.abs(v(r[0]));for(var o=1;o<r.length;o++)t-=Math.abs(v(r[o]))}return t}function v(r){var t,o,i,f,u,l,m,h=0,w=r.length;if(w>2){for(m=0;m<w;m++)m===w-2?(f=w-2,u=w-1,l=0):m===w-1?(f=w-1,u=0,l=1):(f=m,u=m+1,l=m+2),t=r[f],o=r[u],i=r[l],h+=(g(i[0])-g(t[0]))*Math.sin(g(o[1]));h=h*S*S/2}return h}function g(r){return r*Math.PI/180}},46284:function(U,F){Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=63710088e-1,F.factors={centimeters:F.earthRadius*100,centimetres:F.earthRadius*100,degrees:F.earthRadius/111325,feet:F.earthRadius*3.28084,inches:F.earthRadius*39.37,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:F.earthRadius*1e3,millimetres:F.earthRadius*1e3,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius*1.0936},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:1.0936133},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function e(M,s,_){_===void 0&&(_={});var b={type:"Feature"};return(_.id===0||_.id)&&(b.id=_.id),_.bbox&&(b.bbox=_.bbox),b.properties=s||{},b.geometry=M,b}F.feature=e;function d(M,s,_){switch(M){case"Point":return S(s).geometry;case"LineString":return v(s).geometry;case"Polygon":return E(s).geometry;case"MultiPoint":return o(s).geometry;case"MultiLineString":return t(s).geometry;case"MultiPolygon":return i(s).geometry;default:throw new Error(M+" is invalid")}}F.geometry=d;function S(M,s,_){if(_===void 0&&(_={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(M[0])||!A(M[1]))throw new Error("coordinates must contain numbers");var b={type:"Point",coordinates:M};return e(b,s,_)}F.point=S;function n(M,s,_){return _===void 0&&(_={}),r(M.map(function(b){return S(b,s)}),_)}F.points=n;function E(M,s,_){_===void 0&&(_={});for(var b=0,k=M;b<k.length;b++){var D=k[b];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var V=0;V<D[D.length-1].length;V++)if(D[D.length-1][V]!==D[0][V])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:M};return e(O,s,_)}F.polygon=E;function T(M,s,_){return _===void 0&&(_={}),r(M.map(function(b){return E(b,s)}),_)}F.polygons=T;function v(M,s,_){if(_===void 0&&(_={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");var b={type:"LineString",coordinates:M};return e(b,s,_)}F.lineString=v;function g(M,s,_){return _===void 0&&(_={}),r(M.map(function(b){return v(b,s)}),_)}F.lineStrings=g;function r(M,s){s===void 0&&(s={});var _={type:"FeatureCollection"};return s.id&&(_.id=s.id),s.bbox&&(_.bbox=s.bbox),_.features=M,_}F.featureCollection=r;function t(M,s,_){_===void 0&&(_={});var b={type:"MultiLineString",coordinates:M};return e(b,s,_)}F.multiLineString=t;function o(M,s,_){_===void 0&&(_={});var b={type:"MultiPoint",coordinates:M};return e(b,s,_)}F.multiPoint=o;function i(M,s,_){_===void 0&&(_={});var b={type:"MultiPolygon",coordinates:M};return e(b,s,_)}F.multiPolygon=i;function f(M,s,_){_===void 0&&(_={});var b={type:"GeometryCollection",geometries:M};return e(b,s,_)}F.geometryCollection=f;function u(M,s){if(s===void 0&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var _=Math.pow(10,s||0);return Math.round(M*_)/_}F.round=u;function l(M,s){s===void 0&&(s="kilometers");var _=F.factors[s];if(!_)throw new Error(s+" units is invalid");return M*_}F.radiansToLength=l;function m(M,s){s===void 0&&(s="kilometers");var _=F.factors[s];if(!_)throw new Error(s+" units is invalid");return M/_}F.lengthToRadians=m;function h(M,s){return c(m(M,s))}F.lengthToDegrees=h;function w(M){var s=M%360;return s<0&&(s+=360),s}F.bearingToAzimuth=w;function c(M){var s=M%(2*Math.PI);return s*180/Math.PI}F.radiansToDegrees=c;function a(M){var s=M%360;return s*Math.PI/180}F.degreesToRadians=a;function p(M,s,_){if(s===void 0&&(s="kilometers"),_===void 0&&(_="kilometers"),!(M>=0))throw new Error("length must be a positive number");return l(m(M,s),_)}F.convertLength=p;function x(M,s,_){if(s===void 0&&(s="meters"),_===void 0&&(_="kilometers"),!(M>=0))throw new Error("area must be a positive number");var b=F.areaFactors[s];if(!b)throw new Error("invalid original units");var k=F.areaFactors[_];if(!k)throw new Error("invalid final units");return M/b*k}F.convertArea=x;function A(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}F.isNumber=A;function P(M){return!!M&&M.constructor===Object}F.isObject=P;function y(M){if(!M)throw new Error("bbox is required");if(!Array.isArray(M))throw new Error("bbox must be an Array");if(M.length!==4&&M.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");M.forEach(function(s){if(!A(s))throw new Error("bbox must only contain numbers")})}F.validateBBox=y;function C(M){if(!M)throw new Error("id is required");if(["string","number"].indexOf(typeof M)===-1)throw new Error("id must be a number or a string")}F.validateId=C},3256:function(U,F,e){Object.defineProperty(F,"__esModule",{value:!0});var d=e(46284);function S(a,p,x){if(a!==null)for(var A,P,y,C,M,s,_,b=0,k=0,D,V=a.type,O=V==="FeatureCollection",N=V==="Feature",B=O?a.features.length:1,z=0;z<B;z++){_=O?a.features[z].geometry:N?a.geometry:a,D=_?_.type==="GeometryCollection":!1,M=D?_.geometries.length:1;for(var H=0;H<M;H++){var X=0,$=0;if(C=D?_.geometries[H]:_,C!==null){s=C.coordinates;var ne=C.type;switch(b=x&&(ne==="Polygon"||ne==="MultiPolygon")?1:0,ne){case null:break;case"Point":if(p(s,k,z,X,$)===!1)return!1;k++,X++;break;case"LineString":case"MultiPoint":for(A=0;A<s.length;A++){if(p(s[A],k,z,X,$)===!1)return!1;k++,ne==="MultiPoint"&&X++}ne==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(A=0;A<s.length;A++){for(P=0;P<s[A].length-b;P++){if(p(s[A][P],k,z,X,$)===!1)return!1;k++}ne==="MultiLineString"&&X++,ne==="Polygon"&&$++}ne==="Polygon"&&X++;break;case"MultiPolygon":for(A=0;A<s.length;A++){for($=0,P=0;P<s[A].length;P++){for(y=0;y<s[A][P].length-b;y++){if(p(s[A][P][y],k,z,X,$)===!1)return!1;k++}$++}X++}break;case"GeometryCollection":for(A=0;A<C.geometries.length;A++)if(S(C.geometries[A],p,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(a,p,x,A){var P=x;return S(a,function(y,C,M,s,_){C===0&&x===void 0?P=y:P=p(P,y,C,M,s,_)},A),P}function E(a,p){var x;switch(a.type){case"FeatureCollection":for(x=0;x<a.features.length&&p(a.features[x].properties,x)!==!1;x++);break;case"Feature":p(a.properties,0);break}}function T(a,p,x){var A=x;return E(a,function(P,y){y===0&&x===void 0?A=P:A=p(A,P,y)}),A}function v(a,p){if(a.type==="Feature")p(a,0);else if(a.type==="FeatureCollection")for(var x=0;x<a.features.length&&p(a.features[x],x)!==!1;x++);}function g(a,p,x){var A=x;return v(a,function(P,y){y===0&&x===void 0?A=P:A=p(A,P,y)}),A}function r(a){var p=[];return S(a,function(x){p.push(x)}),p}function t(a,p){var x,A,P,y,C,M,s,_,b,k,D=0,V=a.type==="FeatureCollection",O=a.type==="Feature",N=V?a.features.length:1;for(x=0;x<N;x++){for(M=V?a.features[x].geometry:O?a.geometry:a,_=V?a.features[x].properties:O?a.properties:{},b=V?a.features[x].bbox:O?a.bbox:void 0,k=V?a.features[x].id:O?a.id:void 0,s=M?M.type==="GeometryCollection":!1,C=s?M.geometries.length:1,P=0;P<C;P++){if(y=s?M.geometries[P]:M,y===null){if(p(null,D,_,b,k)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(p(y,D,_,b,k)===!1)return!1;break}case"GeometryCollection":{for(A=0;A<y.geometries.length;A++)if(p(y.geometries[A],D,_,b,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}D++}}function o(a,p,x){var A=x;return t(a,function(P,y,C,M,s){y===0&&x===void 0?A=P:A=p(A,P,y,C,M,s)}),A}function i(a,p){t(a,function(x,A,P,y,C){var M=x===null?null:x.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return p(d.feature(x,P,{bbox:y,id:C}),A,0)===!1?!1:void 0}var s;switch(M){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var _=0;_<x.coordinates.length;_++){var b=x.coordinates[_],k={type:s,coordinates:b};if(p(d.feature(k,P),A,_)===!1)return!1}})}function f(a,p,x){var A=x;return i(a,function(P,y,C){y===0&&C===0&&x===void 0?A=P:A=p(A,P,y,C)}),A}function u(a,p){i(a,function(x,A,P){var y=0;if(x.geometry){var C=x.geometry.type;if(!(C==="Point"||C==="MultiPoint")){var M,s=0,_=0,b=0;if(S(x,function(k,D,V,O,N){if(M===void 0||A>s||O>_||N>b){M=k,s=A,_=O,b=N,y=0;return}var B=d.lineString([M,k],x.properties);if(p(B,A,P,N,y)===!1)return!1;y++,M=k})===!1)return!1}}})}function l(a,p,x){var A=x,P=!1;return u(a,function(y,C,M,s,_){P===!1&&x===void 0?A=y:A=p(A,y,C,M,s,_),P=!0}),A}function m(a,p){if(!a)throw new Error("geojson is required");i(a,function(x,A,P){if(x.geometry!==null){var y=x.geometry.type,C=x.geometry.coordinates;switch(y){case"LineString":if(p(x,A,P,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<C.length;M++)if(p(d.lineString(C[M],x.properties),A,P,M)===!1)return!1;break}}})}function h(a,p,x){var A=x;return m(a,function(P,y,C,M){y===0&&x===void 0?A=P:A=p(A,P,y,C,M)}),A}function w(a,p){if(p=p||{},!d.isObject(p))throw new Error("options is invalid");var x=p.featureIndex||0,A=p.multiFeatureIndex||0,P=p.geometryIndex||0,y=p.segmentIndex||0,C=p.properties,M;switch(a.type){case"FeatureCollection":x<0&&(x=a.features.length+x),C=C||a.features[x].properties,M=a.features[x].geometry;break;case"Feature":C=C||a.properties,M=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=a;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var s=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=s.length+y-1),d.lineString([s[y],s[y+1]],C,p);case"Polygon":return P<0&&(P=s.length+P),y<0&&(y=s[P].length+y-1),d.lineString([s[P][y],s[P][y+1]],C,p);case"MultiLineString":return A<0&&(A=s.length+A),y<0&&(y=s[A].length+y-1),d.lineString([s[A][y],s[A][y+1]],C,p);case"MultiPolygon":return A<0&&(A=s.length+A),P<0&&(P=s[A].length+P),y<0&&(y=s[A][P].length-y-1),d.lineString([s[A][P][y],s[A][P][y+1]],C,p)}throw new Error("geojson is invalid")}function c(a,p){if(p=p||{},!d.isObject(p))throw new Error("options is invalid");var x=p.featureIndex||0,A=p.multiFeatureIndex||0,P=p.geometryIndex||0,y=p.coordIndex||0,C=p.properties,M;switch(a.type){case"FeatureCollection":x<0&&(x=a.features.length+x),C=C||a.features[x].properties,M=a.features[x].geometry;break;case"Feature":C=C||a.properties,M=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=a;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var s=M.coordinates;switch(M.type){case"Point":return d.point(s,C,p);case"MultiPoint":return A<0&&(A=s.length+A),d.point(s[A],C,p);case"LineString":return y<0&&(y=s.length+y),d.point(s[y],C,p);case"Polygon":return P<0&&(P=s.length+P),y<0&&(y=s[P].length+y),d.point(s[P][y],C,p);case"MultiLineString":return A<0&&(A=s.length+A),y<0&&(y=s[A].length+y),d.point(s[A][y],C,p);case"MultiPolygon":return A<0&&(A=s.length+A),P<0&&(P=s[A].length+P),y<0&&(y=s[A][P].length-y),d.point(s[A][P][y],C,p)}throw new Error("geojson is invalid")}F.coordEach=S,F.coordReduce=n,F.propEach=E,F.propReduce=T,F.featureEach=v,F.featureReduce=g,F.coordAll=r,F.geomEach=t,F.geomReduce=o,F.flattenEach=i,F.flattenReduce=f,F.segmentEach=u,F.segmentReduce=l,F.lineEach=m,F.lineReduce=h,F.findSegment=w,F.findPoint=c},42428:function(U,F,e){Object.defineProperty(F,"__esModule",{value:!0});var d=e(84880);function S(n){var E=[1/0,1/0,-1/0,-1/0];return d.coordEach(n,function(T){E[0]>T[0]&&(E[0]=T[0]),E[1]>T[1]&&(E[1]=T[1]),E[2]<T[0]&&(E[2]=T[0]),E[3]<T[1]&&(E[3]=T[1])}),E}S.default=S,F.default=S},76796:function(U,F){Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=63710088e-1,F.factors={centimeters:F.earthRadius*100,centimetres:F.earthRadius*100,degrees:F.earthRadius/111325,feet:F.earthRadius*3.28084,inches:F.earthRadius*39.37,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:F.earthRadius*1e3,millimetres:F.earthRadius*1e3,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius*1.0936},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:1.0936133},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function e(M,s,_){_===void 0&&(_={});var b={type:"Feature"};return(_.id===0||_.id)&&(b.id=_.id),_.bbox&&(b.bbox=_.bbox),b.properties=s||{},b.geometry=M,b}F.feature=e;function d(M,s,_){switch(M){case"Point":return S(s).geometry;case"LineString":return v(s).geometry;case"Polygon":return E(s).geometry;case"MultiPoint":return o(s).geometry;case"MultiLineString":return t(s).geometry;case"MultiPolygon":return i(s).geometry;default:throw new Error(M+" is invalid")}}F.geometry=d;function S(M,s,_){if(_===void 0&&(_={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(M[0])||!A(M[1]))throw new Error("coordinates must contain numbers");var b={type:"Point",coordinates:M};return e(b,s,_)}F.point=S;function n(M,s,_){return _===void 0&&(_={}),r(M.map(function(b){return S(b,s)}),_)}F.points=n;function E(M,s,_){_===void 0&&(_={});for(var b=0,k=M;b<k.length;b++){var D=k[b];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var V=0;V<D[D.length-1].length;V++)if(D[D.length-1][V]!==D[0][V])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:M};return e(O,s,_)}F.polygon=E;function T(M,s,_){return _===void 0&&(_={}),r(M.map(function(b){return E(b,s)}),_)}F.polygons=T;function v(M,s,_){if(_===void 0&&(_={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");var b={type:"LineString",coordinates:M};return e(b,s,_)}F.lineString=v;function g(M,s,_){return _===void 0&&(_={}),r(M.map(function(b){return v(b,s)}),_)}F.lineStrings=g;function r(M,s){s===void 0&&(s={});var _={type:"FeatureCollection"};return s.id&&(_.id=s.id),s.bbox&&(_.bbox=s.bbox),_.features=M,_}F.featureCollection=r;function t(M,s,_){_===void 0&&(_={});var b={type:"MultiLineString",coordinates:M};return e(b,s,_)}F.multiLineString=t;function o(M,s,_){_===void 0&&(_={});var b={type:"MultiPoint",coordinates:M};return e(b,s,_)}F.multiPoint=o;function i(M,s,_){_===void 0&&(_={});var b={type:"MultiPolygon",coordinates:M};return e(b,s,_)}F.multiPolygon=i;function f(M,s,_){_===void 0&&(_={});var b={type:"GeometryCollection",geometries:M};return e(b,s,_)}F.geometryCollection=f;function u(M,s){if(s===void 0&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var _=Math.pow(10,s||0);return Math.round(M*_)/_}F.round=u;function l(M,s){s===void 0&&(s="kilometers");var _=F.factors[s];if(!_)throw new Error(s+" units is invalid");return M*_}F.radiansToLength=l;function m(M,s){s===void 0&&(s="kilometers");var _=F.factors[s];if(!_)throw new Error(s+" units is invalid");return M/_}F.lengthToRadians=m;function h(M,s){return c(m(M,s))}F.lengthToDegrees=h;function w(M){var s=M%360;return s<0&&(s+=360),s}F.bearingToAzimuth=w;function c(M){var s=M%(2*Math.PI);return s*180/Math.PI}F.radiansToDegrees=c;function a(M){var s=M%360;return s*Math.PI/180}F.degreesToRadians=a;function p(M,s,_){if(s===void 0&&(s="kilometers"),_===void 0&&(_="kilometers"),!(M>=0))throw new Error("length must be a positive number");return l(m(M,s),_)}F.convertLength=p;function x(M,s,_){if(s===void 0&&(s="meters"),_===void 0&&(_="kilometers"),!(M>=0))throw new Error("area must be a positive number");var b=F.areaFactors[s];if(!b)throw new Error("invalid original units");var k=F.areaFactors[_];if(!k)throw new Error("invalid final units");return M/b*k}F.convertArea=x;function A(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}F.isNumber=A;function P(M){return!!M&&M.constructor===Object}F.isObject=P;function y(M){if(!M)throw new Error("bbox is required");if(!Array.isArray(M))throw new Error("bbox must be an Array");if(M.length!==4&&M.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");M.forEach(function(s){if(!A(s))throw new Error("bbox must only contain numbers")})}F.validateBBox=y;function C(M){if(!M)throw new Error("id is required");if(["string","number"].indexOf(typeof M)===-1)throw new Error("id must be a number or a string")}F.validateId=C},84880:function(U,F,e){Object.defineProperty(F,"__esModule",{value:!0});var d=e(76796);function S(a,p,x){if(a!==null)for(var A,P,y,C,M,s,_,b=0,k=0,D,V=a.type,O=V==="FeatureCollection",N=V==="Feature",B=O?a.features.length:1,z=0;z<B;z++){_=O?a.features[z].geometry:N?a.geometry:a,D=_?_.type==="GeometryCollection":!1,M=D?_.geometries.length:1;for(var H=0;H<M;H++){var X=0,$=0;if(C=D?_.geometries[H]:_,C!==null){s=C.coordinates;var ne=C.type;switch(b=x&&(ne==="Polygon"||ne==="MultiPolygon")?1:0,ne){case null:break;case"Point":if(p(s,k,z,X,$)===!1)return!1;k++,X++;break;case"LineString":case"MultiPoint":for(A=0;A<s.length;A++){if(p(s[A],k,z,X,$)===!1)return!1;k++,ne==="MultiPoint"&&X++}ne==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(A=0;A<s.length;A++){for(P=0;P<s[A].length-b;P++){if(p(s[A][P],k,z,X,$)===!1)return!1;k++}ne==="MultiLineString"&&X++,ne==="Polygon"&&$++}ne==="Polygon"&&X++;break;case"MultiPolygon":for(A=0;A<s.length;A++){for($=0,P=0;P<s[A].length;P++){for(y=0;y<s[A][P].length-b;y++){if(p(s[A][P][y],k,z,X,$)===!1)return!1;k++}$++}X++}break;case"GeometryCollection":for(A=0;A<C.geometries.length;A++)if(S(C.geometries[A],p,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(a,p,x,A){var P=x;return S(a,function(y,C,M,s,_){C===0&&x===void 0?P=y:P=p(P,y,C,M,s,_)},A),P}function E(a,p){var x;switch(a.type){case"FeatureCollection":for(x=0;x<a.features.length&&p(a.features[x].properties,x)!==!1;x++);break;case"Feature":p(a.properties,0);break}}function T(a,p,x){var A=x;return E(a,function(P,y){y===0&&x===void 0?A=P:A=p(A,P,y)}),A}function v(a,p){if(a.type==="Feature")p(a,0);else if(a.type==="FeatureCollection")for(var x=0;x<a.features.length&&p(a.features[x],x)!==!1;x++);}function g(a,p,x){var A=x;return v(a,function(P,y){y===0&&x===void 0?A=P:A=p(A,P,y)}),A}function r(a){var p=[];return S(a,function(x){p.push(x)}),p}function t(a,p){var x,A,P,y,C,M,s,_,b,k,D=0,V=a.type==="FeatureCollection",O=a.type==="Feature",N=V?a.features.length:1;for(x=0;x<N;x++){for(M=V?a.features[x].geometry:O?a.geometry:a,_=V?a.features[x].properties:O?a.properties:{},b=V?a.features[x].bbox:O?a.bbox:void 0,k=V?a.features[x].id:O?a.id:void 0,s=M?M.type==="GeometryCollection":!1,C=s?M.geometries.length:1,P=0;P<C;P++){if(y=s?M.geometries[P]:M,y===null){if(p(null,D,_,b,k)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(p(y,D,_,b,k)===!1)return!1;break}case"GeometryCollection":{for(A=0;A<y.geometries.length;A++)if(p(y.geometries[A],D,_,b,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}D++}}function o(a,p,x){var A=x;return t(a,function(P,y,C,M,s){y===0&&x===void 0?A=P:A=p(A,P,y,C,M,s)}),A}function i(a,p){t(a,function(x,A,P,y,C){var M=x===null?null:x.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return p(d.feature(x,P,{bbox:y,id:C}),A,0)===!1?!1:void 0}var s;switch(M){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var _=0;_<x.coordinates.length;_++){var b=x.coordinates[_],k={type:s,coordinates:b};if(p(d.feature(k,P),A,_)===!1)return!1}})}function f(a,p,x){var A=x;return i(a,function(P,y,C){y===0&&C===0&&x===void 0?A=P:A=p(A,P,y,C)}),A}function u(a,p){i(a,function(x,A,P){var y=0;if(x.geometry){var C=x.geometry.type;if(!(C==="Point"||C==="MultiPoint")){var M,s=0,_=0,b=0;if(S(x,function(k,D,V,O,N){if(M===void 0||A>s||O>_||N>b){M=k,s=A,_=O,b=N,y=0;return}var B=d.lineString([M,k],x.properties);if(p(B,A,P,N,y)===!1)return!1;y++,M=k})===!1)return!1}}})}function l(a,p,x){var A=x,P=!1;return u(a,function(y,C,M,s,_){P===!1&&x===void 0?A=y:A=p(A,y,C,M,s,_),P=!0}),A}function m(a,p){if(!a)throw new Error("geojson is required");i(a,function(x,A,P){if(x.geometry!==null){var y=x.geometry.type,C=x.geometry.coordinates;switch(y){case"LineString":if(p(x,A,P,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<C.length;M++)if(p(d.lineString(C[M],x.properties),A,P,M)===!1)return!1;break}}})}function h(a,p,x){var A=x;return m(a,function(P,y,C,M){y===0&&x===void 0?A=P:A=p(A,P,y,C,M)}),A}function w(a,p){if(p=p||{},!d.isObject(p))throw new Error("options is invalid");var x=p.featureIndex||0,A=p.multiFeatureIndex||0,P=p.geometryIndex||0,y=p.segmentIndex||0,C=p.properties,M;switch(a.type){case"FeatureCollection":x<0&&(x=a.features.length+x),C=C||a.features[x].properties,M=a.features[x].geometry;break;case"Feature":C=C||a.properties,M=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=a;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var s=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=s.length+y-1),d.lineString([s[y],s[y+1]],C,p);case"Polygon":return P<0&&(P=s.length+P),y<0&&(y=s[P].length+y-1),d.lineString([s[P][y],s[P][y+1]],C,p);case"MultiLineString":return A<0&&(A=s.length+A),y<0&&(y=s[A].length+y-1),d.lineString([s[A][y],s[A][y+1]],C,p);case"MultiPolygon":return A<0&&(A=s.length+A),P<0&&(P=s[A].length+P),y<0&&(y=s[A][P].length-y-1),d.lineString([s[A][P][y],s[A][P][y+1]],C,p)}throw new Error("geojson is invalid")}function c(a,p){if(p=p||{},!d.isObject(p))throw new Error("options is invalid");var x=p.featureIndex||0,A=p.multiFeatureIndex||0,P=p.geometryIndex||0,y=p.coordIndex||0,C=p.properties,M;switch(a.type){case"FeatureCollection":x<0&&(x=a.features.length+x),C=C||a.features[x].properties,M=a.features[x].geometry;break;case"Feature":C=C||a.properties,M=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=a;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var s=M.coordinates;switch(M.type){case"Point":return d.point(s,C,p);case"MultiPoint":return A<0&&(A=s.length+A),d.point(s[A],C,p);case"LineString":return y<0&&(y=s.length+y),d.point(s[y],C,p);case"Polygon":return P<0&&(P=s.length+P),y<0&&(y=s[P].length+y),d.point(s[P][y],C,p);case"MultiLineString":return A<0&&(A=s.length+A),y<0&&(y=s[A].length+y),d.point(s[A][y],C,p);case"MultiPolygon":return A<0&&(A=s.length+A),P<0&&(P=s[A].length+P),y<0&&(y=s[A][P].length-y),d.point(s[A][P][y],C,p)}throw new Error("geojson is invalid")}F.coordEach=S,F.coordReduce=n,F.propEach=E,F.propReduce=T,F.featureEach=v,F.featureReduce=g,F.coordAll=r,F.geomEach=t,F.geomReduce=o,F.flattenEach=i,F.flattenReduce=f,F.segmentEach=u,F.segmentReduce=l,F.lineEach=m,F.lineReduce=h,F.findSegment=w,F.findPoint=c},77844:function(U,F,e){Object.defineProperty(F,"__esModule",{value:!0});var d=e(43752),S=e(49840);function n(E,T){T===void 0&&(T={});var v=0,g=0,r=0;return d.coordEach(E,function(t){v+=t[0],g+=t[1],r++}),S.point([v/r,g/r],T.properties)}F.default=n},49840:function(U,F){Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=63710088e-1,F.factors={centimeters:F.earthRadius*100,centimetres:F.earthRadius*100,degrees:F.earthRadius/111325,feet:F.earthRadius*3.28084,inches:F.earthRadius*39.37,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:F.earthRadius*1e3,millimetres:F.earthRadius*1e3,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius/1.0936},F.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/F.earthRadius,yards:.91441111923921},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function e(O,N,B){B===void 0&&(B={});var z={type:"Feature"};return(B.id===0||B.id)&&(z.id=B.id),B.bbox&&(z.bbox=B.bbox),z.properties=N||{},z.geometry=O,z}F.feature=e;function d(O,N,B){switch(O){case"Point":return S(N).geometry;case"LineString":return v(N).geometry;case"Polygon":return E(N).geometry;case"MultiPoint":return o(N).geometry;case"MultiLineString":return t(N).geometry;case"MultiPolygon":return i(N).geometry;default:throw new Error(O+" is invalid")}}F.geometry=d;function S(O,N,B){B===void 0&&(B={});var z={type:"Point",coordinates:O};return e(z,N,B)}F.point=S;function n(O,N,B){return B===void 0&&(B={}),r(O.map(function(z){return S(z,N)}),B)}F.points=n;function E(O,N,B){B===void 0&&(B={});for(var z=0,H=O;z<H.length;z++){var X=H[z];if(X.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var $=0;$<X[X.length-1].length;$++)if(X[X.length-1][$]!==X[0][$])throw new Error("First and last Position are not equivalent.")}var ne={type:"Polygon",coordinates:O};return e(ne,N,B)}F.polygon=E;function T(O,N,B){return B===void 0&&(B={}),r(O.map(function(z){return E(z,N)}),B)}F.polygons=T;function v(O,N,B){if(B===void 0&&(B={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var z={type:"LineString",coordinates:O};return e(z,N,B)}F.lineString=v;function g(O,N,B){return B===void 0&&(B={}),r(O.map(function(z){return v(z,N)}),B)}F.lineStrings=g;function r(O,N){N===void 0&&(N={});var B={type:"FeatureCollection"};return N.id&&(B.id=N.id),N.bbox&&(B.bbox=N.bbox),B.features=O,B}F.featureCollection=r;function t(O,N,B){B===void 0&&(B={});var z={type:"MultiLineString",coordinates:O};return e(z,N,B)}F.multiLineString=t;function o(O,N,B){B===void 0&&(B={});var z={type:"MultiPoint",coordinates:O};return e(z,N,B)}F.multiPoint=o;function i(O,N,B){B===void 0&&(B={});var z={type:"MultiPolygon",coordinates:O};return e(z,N,B)}F.multiPolygon=i;function f(O,N,B){B===void 0&&(B={});var z={type:"GeometryCollection",geometries:O};return e(z,N,B)}F.geometryCollection=f;function u(O,N){if(N===void 0&&(N=0),N&&!(N>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,N||0);return Math.round(O*B)/B}F.round=u;function l(O,N){N===void 0&&(N="kilometers");var B=F.factors[N];if(!B)throw new Error(N+" units is invalid");return O*B}F.radiansToLength=l;function m(O,N){N===void 0&&(N="kilometers");var B=F.factors[N];if(!B)throw new Error(N+" units is invalid");return O/B}F.lengthToRadians=m;function h(O,N){return c(m(O,N))}F.lengthToDegrees=h;function w(O){var N=O%360;return N<0&&(N+=360),N}F.bearingToAzimuth=w;function c(O){var N=O%(2*Math.PI);return N*180/Math.PI}F.radiansToDegrees=c;function a(O){var N=O%360;return N*Math.PI/180}F.degreesToRadians=a;function p(O,N,B){if(N===void 0&&(N="kilometers"),B===void 0&&(B="kilometers"),!(O>=0))throw new Error("length must be a positive number");return l(m(O,N),B)}F.convertLength=p;function x(O,N,B){if(N===void 0&&(N="meters"),B===void 0&&(B="kilometers"),!(O>=0))throw new Error("area must be a positive number");var z=F.areaFactors[N];if(!z)throw new Error("invalid original units");var H=F.areaFactors[B];if(!H)throw new Error("invalid final units");return O/z*H}F.convertArea=x;function A(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}F.isNumber=A;function P(O){return!!O&&O.constructor===Object}F.isObject=P;function y(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(N){if(!A(N))throw new Error("bbox must only contain numbers")})}F.validateBBox=y;function C(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}F.validateId=C;function M(){throw new Error("method has been renamed to `radiansToDegrees`")}F.radians2degrees=M;function s(){throw new Error("method has been renamed to `degreesToRadians`")}F.degrees2radians=s;function _(){throw new Error("method has been renamed to `lengthToDegrees`")}F.distanceToDegrees=_;function b(){throw new Error("method has been renamed to `lengthToRadians`")}F.distanceToRadians=b;function k(){throw new Error("method has been renamed to `radiansToLength`")}F.radiansToDistance=k;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}F.bearingToAngle=D;function V(){throw new Error("method has been renamed to `convertLength`")}F.convertDistance=V},43752:function(U,F,e){Object.defineProperty(F,"__esModule",{value:!0});var d=e(49840);function S(a,p,x){if(a!==null)for(var A,P,y,C,M,s,_,b=0,k=0,D,V=a.type,O=V==="FeatureCollection",N=V==="Feature",B=O?a.features.length:1,z=0;z<B;z++){_=O?a.features[z].geometry:N?a.geometry:a,D=_?_.type==="GeometryCollection":!1,M=D?_.geometries.length:1;for(var H=0;H<M;H++){var X=0,$=0;if(C=D?_.geometries[H]:_,C!==null){s=C.coordinates;var ne=C.type;switch(b=x&&(ne==="Polygon"||ne==="MultiPolygon")?1:0,ne){case null:break;case"Point":if(p(s,k,z,X,$)===!1)return!1;k++,X++;break;case"LineString":case"MultiPoint":for(A=0;A<s.length;A++){if(p(s[A],k,z,X,$)===!1)return!1;k++,ne==="MultiPoint"&&X++}ne==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(A=0;A<s.length;A++){for(P=0;P<s[A].length-b;P++){if(p(s[A][P],k,z,X,$)===!1)return!1;k++}ne==="MultiLineString"&&X++,ne==="Polygon"&&$++}ne==="Polygon"&&X++;break;case"MultiPolygon":for(A=0;A<s.length;A++){for($=0,P=0;P<s[A].length;P++){for(y=0;y<s[A][P].length-b;y++){if(p(s[A][P][y],k,z,X,$)===!1)return!1;k++}$++}X++}break;case"GeometryCollection":for(A=0;A<C.geometries.length;A++)if(S(C.geometries[A],p,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(a,p,x,A){var P=x;return S(a,function(y,C,M,s,_){C===0&&x===void 0?P=y:P=p(P,y,C,M,s,_)},A),P}function E(a,p){var x;switch(a.type){case"FeatureCollection":for(x=0;x<a.features.length&&p(a.features[x].properties,x)!==!1;x++);break;case"Feature":p(a.properties,0);break}}function T(a,p,x){var A=x;return E(a,function(P,y){y===0&&x===void 0?A=P:A=p(A,P,y)}),A}function v(a,p){if(a.type==="Feature")p(a,0);else if(a.type==="FeatureCollection")for(var x=0;x<a.features.length&&p(a.features[x],x)!==!1;x++);}function g(a,p,x){var A=x;return v(a,function(P,y){y===0&&x===void 0?A=P:A=p(A,P,y)}),A}function r(a){var p=[];return S(a,function(x){p.push(x)}),p}function t(a,p){var x,A,P,y,C,M,s,_,b,k,D=0,V=a.type==="FeatureCollection",O=a.type==="Feature",N=V?a.features.length:1;for(x=0;x<N;x++){for(M=V?a.features[x].geometry:O?a.geometry:a,_=V?a.features[x].properties:O?a.properties:{},b=V?a.features[x].bbox:O?a.bbox:void 0,k=V?a.features[x].id:O?a.id:void 0,s=M?M.type==="GeometryCollection":!1,C=s?M.geometries.length:1,P=0;P<C;P++){if(y=s?M.geometries[P]:M,y===null){if(p(null,D,_,b,k)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(p(y,D,_,b,k)===!1)return!1;break}case"GeometryCollection":{for(A=0;A<y.geometries.length;A++)if(p(y.geometries[A],D,_,b,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}D++}}function o(a,p,x){var A=x;return t(a,function(P,y,C,M,s){y===0&&x===void 0?A=P:A=p(A,P,y,C,M,s)}),A}function i(a,p){t(a,function(x,A,P,y,C){var M=x===null?null:x.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return p(d.feature(x,P,{bbox:y,id:C}),A,0)===!1?!1:void 0}var s;switch(M){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var _=0;_<x.coordinates.length;_++){var b=x.coordinates[_],k={type:s,coordinates:b};if(p(d.feature(k,P),A,_)===!1)return!1}})}function f(a,p,x){var A=x;return i(a,function(P,y,C){y===0&&C===0&&x===void 0?A=P:A=p(A,P,y,C)}),A}function u(a,p){i(a,function(x,A,P){var y=0;if(x.geometry){var C=x.geometry.type;if(!(C==="Point"||C==="MultiPoint")){var M,s=0,_=0,b=0;if(S(x,function(k,D,V,O,N){if(M===void 0||A>s||O>_||N>b){M=k,s=A,_=O,b=N,y=0;return}var B=d.lineString([M,k],x.properties);if(p(B,A,P,N,y)===!1)return!1;y++,M=k})===!1)return!1}}})}function l(a,p,x){var A=x,P=!1;return u(a,function(y,C,M,s,_){P===!1&&x===void 0?A=y:A=p(A,y,C,M,s,_),P=!0}),A}function m(a,p){if(!a)throw new Error("geojson is required");i(a,function(x,A,P){if(x.geometry!==null){var y=x.geometry.type,C=x.geometry.coordinates;switch(y){case"LineString":if(p(x,A,P,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<C.length;M++)if(p(d.lineString(C[M],x.properties),A,P,M)===!1)return!1;break}}})}function h(a,p,x){var A=x;return m(a,function(P,y,C,M){y===0&&x===void 0?A=P:A=p(A,P,y,C,M)}),A}function w(a,p){if(p=p||{},!d.isObject(p))throw new Error("options is invalid");var x=p.featureIndex||0,A=p.multiFeatureIndex||0,P=p.geometryIndex||0,y=p.segmentIndex||0,C=p.properties,M;switch(a.type){case"FeatureCollection":x<0&&(x=a.features.length+x),C=C||a.features[x].properties,M=a.features[x].geometry;break;case"Feature":C=C||a.properties,M=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=a;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var s=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=s.length+y-1),d.lineString([s[y],s[y+1]],C,p);case"Polygon":return P<0&&(P=s.length+P),y<0&&(y=s[P].length+y-1),d.lineString([s[P][y],s[P][y+1]],C,p);case"MultiLineString":return A<0&&(A=s.length+A),y<0&&(y=s[A].length+y-1),d.lineString([s[A][y],s[A][y+1]],C,p);case"MultiPolygon":return A<0&&(A=s.length+A),P<0&&(P=s[A].length+P),y<0&&(y=s[A][P].length-y-1),d.lineString([s[A][P][y],s[A][P][y+1]],C,p)}throw new Error("geojson is invalid")}function c(a,p){if(p=p||{},!d.isObject(p))throw new Error("options is invalid");var x=p.featureIndex||0,A=p.multiFeatureIndex||0,P=p.geometryIndex||0,y=p.coordIndex||0,C=p.properties,M;switch(a.type){case"FeatureCollection":x<0&&(x=a.features.length+x),C=C||a.features[x].properties,M=a.features[x].geometry;break;case"Feature":C=C||a.properties,M=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=a;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var s=M.coordinates;switch(M.type){case"Point":return d.point(s,C,p);case"MultiPoint":return A<0&&(A=s.length+A),d.point(s[A],C,p);case"LineString":return y<0&&(y=s.length+y),d.point(s[y],C,p);case"Polygon":return P<0&&(P=s.length+P),y<0&&(y=s[P].length+y),d.point(s[P][y],C,p);case"MultiLineString":return A<0&&(A=s.length+A),y<0&&(y=s[A].length+y),d.point(s[A][y],C,p);case"MultiPolygon":return A<0&&(A=s.length+A),P<0&&(P=s[A].length+P),y<0&&(y=s[A][P].length-y),d.point(s[A][P][y],C,p)}throw new Error("geojson is invalid")}F.coordEach=S,F.coordReduce=n,F.propEach=E,F.propReduce=T,F.featureEach=v,F.featureReduce=g,F.coordAll=r,F.geomEach=t,F.geomReduce=o,F.flattenEach=i,F.flattenReduce=f,F.segmentEach=u,F.segmentReduce=l,F.lineEach=m,F.lineReduce=h,F.findSegment=w,F.findPoint=c},49972:function(U){U.exports=F;function F(e){var d=0,S=0,n=0,E=0;return e.map(function(T){T=T.slice();var v=T[0],g=v.toUpperCase();if(v!=g)switch(T[0]=g,v){case"a":T[6]+=n,T[7]+=E;break;case"v":T[1]+=E;break;case"h":T[1]+=n;break;default:for(var r=1;r<T.length;)T[r++]+=n,T[r++]+=E}switch(g){case"Z":n=d,E=S;break;case"H":n=T[1];break;case"V":E=T[1];break;case"M":n=d=T[1],E=S=T[2];break;default:n=T[T.length-2],E=T[T.length-1]}return T})}},76752:function(U){U.exports=F;function F(e,d){if(!e||e.length==null)throw Error("Argument should be an array");d==null?d=1:d=Math.floor(d);for(var S=Array(d*2),n=0;n<d;n++){for(var E=-1/0,T=1/0,v=n,g=e.length;v<g;v+=d)e[v]>E&&(E=e[v]),e[v]<T&&(T=e[v]);S[n]=T,S[d+n]=E}return S}},10272:function(U){U.exports=function(F,e,d){if(typeof Array.prototype.findIndex=="function")return F.findIndex(e,d);if(typeof e!="function")throw new TypeError("predicate must be a function");var S=Object(F),n=S.length;if(n===0)return-1;for(var E=0;E<n;E++)if(e.call(d,S[E],E,S))return E;return-1}},71152:function(U,F,e){var d=e(76752);U.exports=S;function S(n,E,T){if(!n||n.length==null)throw Error("Argument should be an array");E==null&&(E=1),T==null&&(T=d(n,E));for(var v=0;v<E;v++){var g=T[E+v],r=T[v],t=v,o=n.length;if(g===1/0&&r===-1/0)for(t=v;t<o;t+=E)n[t]=n[t]===g?1:n[t]===r?0:.5;else if(g===1/0)for(t=v;t<o;t+=E)n[t]=n[t]===g?1:0;else if(r===-1/0)for(t=v;t<o;t+=E)n[t]=n[t]===r?0:1;else{var i=g-r;for(t=v;t<o;t+=E)isNaN(n[t])||(n[t]=i===0?.5:(n[t]-r)/i)}}return n}},67752:function(U){U.exports=function(e,d){var S=typeof e=="number",n=typeof d=="number";S&&!n?(d=e,e=0):!S&&!n&&(e=0,d=0),e=e|0,d=d|0;var E=d-e;if(E<0)throw new Error("array length must be positive");for(var T=new Array(E),v=0,g=e;v<E;v++,g++)T[v]=g;return T}},45408:function(U,F,e){var d=e(4168);function S($){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?S=function(q){return typeof q}:S=function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},S($)}function n($,ne){if(!($ instanceof ne))throw new TypeError("Cannot call a class as a function")}var E=e(86832),T=E.codes,v=T.ERR_AMBIGUOUS_ARGUMENT,g=T.ERR_INVALID_ARG_TYPE,r=T.ERR_INVALID_ARG_VALUE,t=T.ERR_INVALID_RETURN_VALUE,o=T.ERR_MISSING_ARGS,i=e(26144),f=e(35840),u=f.inspect,l=e(35840).types,m=l.isPromise,h=l.isRegExp,w=Object.assign?Object.assign:e(60964).assign,c=Object.is?Object.is:e(39896),a,p;function x(){var $=e(25116);a=$.isDeepEqual,p=$.isDeepStrictEqual}var A=!1,P=U.exports=_,y={};function C($){throw $.message instanceof Error?$.message:new i($)}function M($,ne,q,ue,te){var J=arguments.length,ie;if(J===0)ie="Failed";else if(J===1)q=$,$=void 0;else{if(A===!1){A=!0;var K=d.emitWarning?d.emitWarning:console.warn.bind(console);K("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}J===2&&(ue="!=")}if(q instanceof Error)throw q;var ee={actual:$,expected:ne,operator:ue===void 0?"fail":ue,stackStartFn:te||M};q!==void 0&&(ee.message=q);var le=new i(ee);throw ie&&(le.message=ie,le.generatedMessage=!0),le}P.fail=M,P.AssertionError=i;function s($,ne,q,ue){if(!q){var te=!1;if(ne===0)te=!0,ue="No value argument passed to `assert.ok()`";else if(ue instanceof Error)throw ue;var J=new i({actual:q,expected:!0,message:ue,operator:"==",stackStartFn:$});throw J.generatedMessage=te,J}}function _(){for(var $=arguments.length,ne=new Array($),q=0;q<$;q++)ne[q]=arguments[q];s.apply(void 0,[_,ne.length].concat(ne))}P.ok=_,P.equal=function $(ne,q,ue){if(arguments.length<2)throw new o("actual","expected");ne!=q&&C({actual:ne,expected:q,message:ue,operator:"==",stackStartFn:$})},P.notEqual=function $(ne,q,ue){if(arguments.length<2)throw new o("actual","expected");ne==q&&C({actual:ne,expected:q,message:ue,operator:"!=",stackStartFn:$})},P.deepEqual=function $(ne,q,ue){if(arguments.length<2)throw new o("actual","expected");a===void 0&&x(),a(ne,q)||C({actual:ne,expected:q,message:ue,operator:"deepEqual",stackStartFn:$})},P.notDeepEqual=function $(ne,q,ue){if(arguments.length<2)throw new o("actual","expected");a===void 0&&x(),a(ne,q)&&C({actual:ne,expected:q,message:ue,operator:"notDeepEqual",stackStartFn:$})},P.deepStrictEqual=function $(ne,q,ue){if(arguments.length<2)throw new o("actual","expected");a===void 0&&x(),p(ne,q)||C({actual:ne,expected:q,message:ue,operator:"deepStrictEqual",stackStartFn:$})},P.notDeepStrictEqual=b;function b($,ne,q){if(arguments.length<2)throw new o("actual","expected");a===void 0&&x(),p($,ne)&&C({actual:$,expected:ne,message:q,operator:"notDeepStrictEqual",stackStartFn:b})}P.strictEqual=function $(ne,q,ue){if(arguments.length<2)throw new o("actual","expected");c(ne,q)||C({actual:ne,expected:q,message:ue,operator:"strictEqual",stackStartFn:$})},P.notStrictEqual=function $(ne,q,ue){if(arguments.length<2)throw new o("actual","expected");c(ne,q)&&C({actual:ne,expected:q,message:ue,operator:"notStrictEqual",stackStartFn:$})};var k=function $(ne,q,ue){var te=this;n(this,$),q.forEach(function(J){J in ne&&(ue!==void 0&&typeof ue[J]=="string"&&h(ne[J])&&ne[J].test(ue[J])?te[J]=ue[J]:te[J]=ne[J])})};function D($,ne,q,ue,te,J){if(!(q in $)||!p($[q],ne[q])){if(!ue){var ie=new k($,te),K=new k(ne,te,$),ee=new i({actual:ie,expected:K,operator:"deepStrictEqual",stackStartFn:J});throw ee.actual=$,ee.expected=ne,ee.operator=J.name,ee}C({actual:$,expected:ne,message:ue,operator:J.name,stackStartFn:J})}}function V($,ne,q,ue){if(typeof ne!="function"){if(h(ne))return ne.test($);if(arguments.length===2)throw new g("expected",["Function","RegExp"],ne);if(S($)!=="object"||$===null){var te=new i({actual:$,expected:ne,message:q,operator:"deepStrictEqual",stackStartFn:ue});throw te.operator=ue.name,te}var J=Object.keys(ne);if(ne instanceof Error)J.push("name","message");else if(J.length===0)throw new r("error",ne,"may not be an empty object");return a===void 0&&x(),J.forEach(function(ie){typeof $[ie]=="string"&&h(ne[ie])&&ne[ie].test($[ie])||D($,ne,ie,q,J,ue)}),!0}return ne.prototype!==void 0&&$ instanceof ne?!0:Error.isPrototypeOf(ne)?!1:ne.call({},$)===!0}function O($){if(typeof $!="function")throw new g("fn","Function",$);try{$()}catch(ne){return ne}return y}function N($){return m($)||$!==null&&S($)==="object"&&typeof $.then=="function"&&typeof $.catch=="function"}function B($){return Promise.resolve().then(function(){var ne;if(typeof $=="function"){if(ne=$(),!N(ne))throw new t("instance of Promise","promiseFn",ne)}else if(N($))ne=$;else throw new g("promiseFn",["Function","Promise"],$);return Promise.resolve().then(function(){return ne}).then(function(){return y}).catch(function(q){return q})})}function z($,ne,q,ue){if(typeof q=="string"){if(arguments.length===4)throw new g("error",["Object","Error","Function","RegExp"],q);if(S(ne)==="object"&&ne!==null){if(ne.message===q)throw new v("error/message",'The error message "'.concat(ne.message,'" is identical to the message.'))}else if(ne===q)throw new v("error/message",'The error "'.concat(ne,'" is identical to the message.'));ue=q,q=void 0}else if(q!=null&&S(q)!=="object"&&typeof q!="function")throw new g("error",["Object","Error","Function","RegExp"],q);if(ne===y){var te="";q&&q.name&&(te+=" (".concat(q.name,")")),te+=ue?": ".concat(ue):".";var J=$.name==="rejects"?"rejection":"exception";C({actual:void 0,expected:q,operator:$.name,message:"Missing expected ".concat(J).concat(te),stackStartFn:$})}if(q&&!V(ne,q,ue,$))throw ne}function H($,ne,q,ue){if(ne!==y){if(typeof q=="string"&&(ue=q,q=void 0),!q||V(ne,q)){var te=ue?": ".concat(ue):".",J=$.name==="doesNotReject"?"rejection":"exception";C({actual:ne,expected:q,operator:$.name,message:"Got unwanted ".concat(J).concat(te,`
`)+'Actual message: "'.concat(ne&&ne.message,'"'),stackStartFn:$})}throw ne}}P.throws=function $(ne){for(var q=arguments.length,ue=new Array(q>1?q-1:0),te=1;te<q;te++)ue[te-1]=arguments[te];z.apply(void 0,[$,O(ne)].concat(ue))},P.rejects=function $(ne){for(var q=arguments.length,ue=new Array(q>1?q-1:0),te=1;te<q;te++)ue[te-1]=arguments[te];return B(ne).then(function(J){return z.apply(void 0,[$,J].concat(ue))})},P.doesNotThrow=function $(ne){for(var q=arguments.length,ue=new Array(q>1?q-1:0),te=1;te<q;te++)ue[te-1]=arguments[te];H.apply(void 0,[$,O(ne)].concat(ue))},P.doesNotReject=function $(ne){for(var q=arguments.length,ue=new Array(q>1?q-1:0),te=1;te<q;te++)ue[te-1]=arguments[te];return B(ne).then(function(J){return H.apply(void 0,[$,J].concat(ue))})},P.ifError=function $(ne){if(ne!=null){var q="ifError got unwanted exception: ";S(ne)==="object"&&typeof ne.message=="string"?ne.message.length===0&&ne.constructor?q+=ne.constructor.name:q+=ne.message:q+=u(ne);var ue=new i({actual:ne,expected:null,operator:"ifError",message:q,stackStartFn:$}),te=ne.stack;if(typeof te=="string"){var J=te.split(`
`);J.shift();for(var ie=ue.stack.split(`
`),K=0;K<J.length;K++){var ee=ie.indexOf(J[K]);if(ee!==-1){ie=ie.slice(0,ee);break}}ue.stack="".concat(ie.join(`
`),`
`).concat(J.join(`
`))}throw ue}};function X(){for(var $=arguments.length,ne=new Array($),q=0;q<$;q++)ne[q]=arguments[q];s.apply(void 0,[X,ne.length].concat(ne))}P.strict=w(X,P,{equal:P.strictEqual,deepEqual:P.deepStrictEqual,notEqual:P.notStrictEqual,notDeepEqual:P.notDeepStrictEqual}),P.strict.strict=P.strict},26144:function(U,F,e){var d=e(4168);function S(O){for(var N=1;N<arguments.length;N++){var B=arguments[N]!=null?arguments[N]:{},z=Object.keys(B);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols(B).filter(function(H){return Object.getOwnPropertyDescriptor(B,H).enumerable}))),z.forEach(function(H){n(O,H,B[H])})}return O}function n(O,N,B){return N in O?Object.defineProperty(O,N,{value:B,enumerable:!0,configurable:!0,writable:!0}):O[N]=B,O}function E(O,N){if(!(O instanceof N))throw new TypeError("Cannot call a class as a function")}function T(O,N){for(var B=0;B<N.length;B++){var z=N[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(O,z.key,z)}}function v(O,N,B){return N&&T(O.prototype,N),O}function g(O,N){return N&&(h(N)==="object"||typeof N=="function")?N:r(O)}function r(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function t(O,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(N&&N.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),N&&l(O,N)}function o(O){var N=typeof Map=="function"?new Map:void 0;return o=function(z){if(z===null||!u(z))return z;if(typeof z!="function")throw new TypeError("Super expression must either be null or a function");if(typeof N<"u"){if(N.has(z))return N.get(z);N.set(z,H)}function H(){return f(z,arguments,m(this).constructor)}return H.prototype=Object.create(z.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),l(H,z)},o(O)}function i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function f(O,N,B){return i()?f=Reflect.construct:f=function(H,X,$){var ne=[null];ne.push.apply(ne,X);var q=Function.bind.apply(H,ne),ue=new q;return $&&l(ue,$.prototype),ue},f.apply(null,arguments)}function u(O){return Function.toString.call(O).indexOf("[native code]")!==-1}function l(O,N){return l=Object.setPrototypeOf||function(z,H){return z.__proto__=H,z},l(O,N)}function m(O){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)},m(O)}function h(O){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h=function(B){return typeof B}:h=function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},h(O)}var w=e(35840),c=w.inspect,a=e(86832),p=a.codes.ERR_INVALID_ARG_TYPE;function x(O,N,B){return(B===void 0||B>O.length)&&(B=O.length),O.substring(B-N.length,B)===N}function A(O,N){if(N=Math.floor(N),O.length==0||N==0)return"";var B=O.length*N;for(N=Math.floor(Math.log(N)/Math.log(2));N;)O+=O,N--;return O+=O.substring(0,B-O.length),O}var P="",y="",C="",M="",s={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},_=10;function b(O){var N=Object.keys(O),B=Object.create(Object.getPrototypeOf(O));return N.forEach(function(z){B[z]=O[z]}),Object.defineProperty(B,"message",{value:O.message}),B}function k(O){return c(O,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function D(O,N,B){var z="",H="",X=0,$="",ne=!1,q=k(O),ue=q.split(`
`),te=k(N).split(`
`),J=0,ie="";if(B==="strictEqual"&&h(O)==="object"&&h(N)==="object"&&O!==null&&N!==null&&(B="strictEqualObject"),ue.length===1&&te.length===1&&ue[0]!==te[0]){var K=ue[0].length+te[0].length;if(K<=_){if((h(O)!=="object"||O===null)&&(h(N)!=="object"||N===null)&&(O!==0||N!==0))return"".concat(s[B],`

`)+"".concat(ue[0]," !== ").concat(te[0],`
`)}else if(B!=="strictEqualObject"){var ee=d.stderr&&d.stderr.isTTY?d.stderr.columns:80;if(K<ee){for(;ue[0][J]===te[0][J];)J++;J>2&&(ie=`
  `.concat(A(" ",J),"^"),J=0)}}}for(var le=ue[ue.length-1],j=te[te.length-1];le===j&&(J++<2?$=`
  `.concat(le).concat($):z=le,ue.pop(),te.pop(),!(ue.length===0||te.length===0));)le=ue[ue.length-1],j=te[te.length-1];var Z=Math.max(ue.length,te.length);if(Z===0){var fe=q.split(`
`);if(fe.length>30)for(fe[26]="".concat(P,"...").concat(M);fe.length>27;)fe.pop();return"".concat(s.notIdentical,`

`).concat(fe.join(`
`),`
`)}J>3&&($=`
`.concat(P,"...").concat(M).concat($),ne=!0),z!==""&&($=`
  `.concat(z).concat($),z="");var re=0,ce=s[B]+`
`.concat(y,"+ actual").concat(M," ").concat(C,"- expected").concat(M),xe=" ".concat(P,"...").concat(M," Lines skipped");for(J=0;J<Z;J++){var Te=J-X;if(ue.length<J+1)Te>1&&J>2&&(Te>4?(H+=`
`.concat(P,"...").concat(M),ne=!0):Te>3&&(H+=`
  `.concat(te[J-2]),re++),H+=`
  `.concat(te[J-1]),re++),X=J,z+=`
`.concat(C,"-").concat(M," ").concat(te[J]),re++;else if(te.length<J+1)Te>1&&J>2&&(Te>4?(H+=`
`.concat(P,"...").concat(M),ne=!0):Te>3&&(H+=`
  `.concat(ue[J-2]),re++),H+=`
  `.concat(ue[J-1]),re++),X=J,H+=`
`.concat(y,"+").concat(M," ").concat(ue[J]),re++;else{var we=te[J],_e=ue[J],ke=_e!==we&&(!x(_e,",")||_e.slice(0,-1)!==we);ke&&x(we,",")&&we.slice(0,-1)===_e&&(ke=!1,_e+=","),ke?(Te>1&&J>2&&(Te>4?(H+=`
`.concat(P,"...").concat(M),ne=!0):Te>3&&(H+=`
  `.concat(ue[J-2]),re++),H+=`
  `.concat(ue[J-1]),re++),X=J,H+=`
`.concat(y,"+").concat(M," ").concat(_e),z+=`
`.concat(C,"-").concat(M," ").concat(we),re+=2):(H+=z,z="",(Te===1||J===0)&&(H+=`
  `.concat(_e),re++))}if(re>20&&J<Z-2)return"".concat(ce).concat(xe,`
`).concat(H,`
`).concat(P,"...").concat(M).concat(z,`
`)+"".concat(P,"...").concat(M)}return"".concat(ce).concat(ne?xe:"",`
`).concat(H).concat(z).concat($).concat(ie)}var V=function(O){t(N,O);function N(B){var z;if(E(this,N),h(B)!=="object"||B===null)throw new p("options","Object",B);var H=B.message,X=B.operator,$=B.stackStartFn,ne=B.actual,q=B.expected,ue=Error.stackTraceLimit;if(Error.stackTraceLimit=0,H!=null)z=g(this,m(N).call(this,String(H)));else if(d.stderr&&d.stderr.isTTY&&(d.stderr&&d.stderr.getColorDepth&&d.stderr.getColorDepth()!==1?(P="\x1B[34m",y="\x1B[32m",M="\x1B[39m",C="\x1B[31m"):(P="",y="",M="",C="")),h(ne)==="object"&&ne!==null&&h(q)==="object"&&q!==null&&"stack"in ne&&ne instanceof Error&&"stack"in q&&q instanceof Error&&(ne=b(ne),q=b(q)),X==="deepStrictEqual"||X==="strictEqual")z=g(this,m(N).call(this,D(ne,q,X)));else if(X==="notDeepStrictEqual"||X==="notStrictEqual"){var te=s[X],J=k(ne).split(`
`);if(X==="notStrictEqual"&&h(ne)==="object"&&ne!==null&&(te=s.notStrictEqualObject),J.length>30)for(J[26]="".concat(P,"...").concat(M);J.length>27;)J.pop();J.length===1?z=g(this,m(N).call(this,"".concat(te," ").concat(J[0]))):z=g(this,m(N).call(this,"".concat(te,`

`).concat(J.join(`
`),`
`)))}else{var ie=k(ne),K="",ee=s[X];X==="notDeepEqual"||X==="notEqual"?(ie="".concat(s[X],`

`).concat(ie),ie.length>1024&&(ie="".concat(ie.slice(0,1021),"..."))):(K="".concat(k(q)),ie.length>512&&(ie="".concat(ie.slice(0,509),"...")),K.length>512&&(K="".concat(K.slice(0,509),"...")),X==="deepEqual"||X==="equal"?ie="".concat(ee,`

`).concat(ie,`

should equal

`):K=" ".concat(X," ").concat(K)),z=g(this,m(N).call(this,"".concat(ie).concat(K)))}return Error.stackTraceLimit=ue,z.generatedMessage=!H,Object.defineProperty(r(z),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),z.code="ERR_ASSERTION",z.actual=ne,z.expected=q,z.operator=X,Error.captureStackTrace&&Error.captureStackTrace(r(z),$),z.stack,z.name="AssertionError",g(z)}return v(N,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:c.custom,value:function(z,H){return c(this,S({},H,{customInspect:!1,depth:0}))}}]),N}(o(Error));U.exports=V},86832:function(U,F,e){function d(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(c){return typeof c}:d=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},d(h)}function S(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")}function n(h,w){return w&&(d(w)==="object"||typeof w=="function")?w:E(h)}function E(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function T(h){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},T(h)}function v(h,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(w&&w.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),w&&g(h,w)}function g(h,w){return g=Object.setPrototypeOf||function(a,p){return a.__proto__=p,a},g(h,w)}var r={},t,o;function i(h,w,c){c||(c=Error);function a(x,A,P){return typeof w=="string"?w:w(x,A,P)}var p=function(x){v(A,x);function A(P,y,C){var M;return S(this,A),M=n(this,T(A).call(this,a(P,y,C))),M.code=h,M}return A}(c);r[h]=p}function f(h,w){if(Array.isArray(h)){var c=h.length;return h=h.map(function(a){return String(a)}),c>2?"one of ".concat(w," ").concat(h.slice(0,c-1).join(", "),", or ")+h[c-1]:c===2?"one of ".concat(w," ").concat(h[0]," or ").concat(h[1]):"of ".concat(w," ").concat(h[0])}else return"of ".concat(w," ").concat(String(h))}function u(h,w,c){return h.substr(0,w.length)===w}function l(h,w,c){return(c===void 0||c>h.length)&&(c=h.length),h.substring(c-w.length,c)===w}function m(h,w,c){return typeof c!="number"&&(c=0),c+w.length>h.length?!1:h.indexOf(w,c)!==-1}i("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),i("ERR_INVALID_ARG_TYPE",function(h,w,c){t===void 0&&(t=e(45408)),t(typeof h=="string","'name' must be a string");var a;typeof w=="string"&&u(w,"not ")?(a="must not be",w=w.replace(/^not /,"")):a="must be";var p;if(l(h," argument"))p="The ".concat(h," ").concat(a," ").concat(f(w,"type"));else{var x=m(h,".")?"property":"argument";p='The "'.concat(h,'" ').concat(x," ").concat(a," ").concat(f(w,"type"))}return p+=". Received type ".concat(d(c)),p},TypeError),i("ERR_INVALID_ARG_VALUE",function(h,w){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";o===void 0&&(o=e(35840));var a=o.inspect(w);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(h,"' ").concat(c,". Received ").concat(a)},TypeError),i("ERR_INVALID_RETURN_VALUE",function(h,w,c){var a;return c&&c.constructor&&c.constructor.name?a="instance of ".concat(c.constructor.name):a="type ".concat(d(c)),"Expected ".concat(h,' to be returned from the "').concat(w,'"')+" function but got ".concat(a,".")},TypeError),i("ERR_MISSING_ARGS",function(){for(var h=arguments.length,w=new Array(h),c=0;c<h;c++)w[c]=arguments[c];t===void 0&&(t=e(45408)),t(w.length>0,"At least one arg needs to be specified");var a="The ",p=w.length;switch(w=w.map(function(x){return'"'.concat(x,'"')}),p){case 1:a+="".concat(w[0]," argument");break;case 2:a+="".concat(w[0]," and ").concat(w[1]," arguments");break;default:a+=w.slice(0,p-1).join(", "),a+=", and ".concat(w[p-1]," arguments");break}return"".concat(a," must be specified")},TypeError),U.exports.codes=r},25116:function(U,F,e){function d(Ne,Ee){return E(Ne)||n(Ne,Ee)||S()}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(Ne,Ee){var ze=[],Ce=!0,Oe=!1,Le=void 0;try{for(var Ge=Ne[Symbol.iterator](),rt;!(Ce=(rt=Ge.next()).done)&&(ze.push(rt.value),!(Ee&&ze.length===Ee));Ce=!0);}catch(ot){Oe=!0,Le=ot}finally{try{!Ce&&Ge.return!=null&&Ge.return()}finally{if(Oe)throw Le}}return ze}function E(Ne){if(Array.isArray(Ne))return Ne}function T(Ne){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(ze){return typeof ze}:T=function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze},T(Ne)}var v=/a/g.flags!==void 0,g=function(Ee){var ze=[];return Ee.forEach(function(Ce){return ze.push(Ce)}),ze},r=function(Ee){var ze=[];return Ee.forEach(function(Ce,Oe){return ze.push([Oe,Ce])}),ze},t=Object.is?Object.is:e(39896),o=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},i=Number.isNaN?Number.isNaN:e(1560);function f(Ne){return Ne.call.bind(Ne)}var u=f(Object.prototype.hasOwnProperty),l=f(Object.prototype.propertyIsEnumerable),m=f(Object.prototype.toString),h=e(35840).types,w=h.isAnyArrayBuffer,c=h.isArrayBufferView,a=h.isDate,p=h.isMap,x=h.isRegExp,A=h.isSet,P=h.isNativeError,y=h.isBoxedPrimitive,C=h.isNumberObject,M=h.isStringObject,s=h.isBooleanObject,_=h.isBigIntObject,b=h.isSymbolObject,k=h.isFloat32Array,D=h.isFloat64Array;function V(Ne){if(Ne.length===0||Ne.length>10)return!0;for(var Ee=0;Ee<Ne.length;Ee++){var ze=Ne.charCodeAt(Ee);if(ze<48||ze>57)return!0}return Ne.length===10&&Ne>=Math.pow(2,32)}function O(Ne){return Object.keys(Ne).filter(V).concat(o(Ne).filter(Object.prototype.propertyIsEnumerable.bind(Ne)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function N(Ne,Ee){if(Ne===Ee)return 0;for(var ze=Ne.length,Ce=Ee.length,Oe=0,Le=Math.min(ze,Ce);Oe<Le;++Oe)if(Ne[Oe]!==Ee[Oe]){ze=Ne[Oe],Ce=Ee[Oe];break}return ze<Ce?-1:Ce<ze?1:0}var B=!0,z=!1,H=0,X=1,$=2,ne=3;function q(Ne,Ee){return v?Ne.source===Ee.source&&Ne.flags===Ee.flags:RegExp.prototype.toString.call(Ne)===RegExp.prototype.toString.call(Ee)}function ue(Ne,Ee){if(Ne.byteLength!==Ee.byteLength)return!1;for(var ze=0;ze<Ne.byteLength;ze++)if(Ne[ze]!==Ee[ze])return!1;return!0}function te(Ne,Ee){return Ne.byteLength!==Ee.byteLength?!1:N(new Uint8Array(Ne.buffer,Ne.byteOffset,Ne.byteLength),new Uint8Array(Ee.buffer,Ee.byteOffset,Ee.byteLength))===0}function J(Ne,Ee){return Ne.byteLength===Ee.byteLength&&N(new Uint8Array(Ne),new Uint8Array(Ee))===0}function ie(Ne,Ee){return C(Ne)?C(Ee)&&t(Number.prototype.valueOf.call(Ne),Number.prototype.valueOf.call(Ee)):M(Ne)?M(Ee)&&String.prototype.valueOf.call(Ne)===String.prototype.valueOf.call(Ee):s(Ne)?s(Ee)&&Boolean.prototype.valueOf.call(Ne)===Boolean.prototype.valueOf.call(Ee):_(Ne)?_(Ee)&&BigInt.prototype.valueOf.call(Ne)===BigInt.prototype.valueOf.call(Ee):b(Ee)&&Symbol.prototype.valueOf.call(Ne)===Symbol.prototype.valueOf.call(Ee)}function K(Ne,Ee,ze,Ce){if(Ne===Ee)return Ne!==0?!0:ze?t(Ne,Ee):!0;if(ze){if(T(Ne)!=="object")return typeof Ne=="number"&&i(Ne)&&i(Ee);if(T(Ee)!=="object"||Ne===null||Ee===null||Object.getPrototypeOf(Ne)!==Object.getPrototypeOf(Ee))return!1}else{if(Ne===null||T(Ne)!=="object")return Ee===null||T(Ee)!=="object"?Ne==Ee:!1;if(Ee===null||T(Ee)!=="object")return!1}var Oe=m(Ne),Le=m(Ee);if(Oe!==Le)return!1;if(Array.isArray(Ne)){if(Ne.length!==Ee.length)return!1;var Ge=O(Ne),rt=O(Ee);return Ge.length!==rt.length?!1:le(Ne,Ee,ze,Ce,X,Ge)}if(Oe==="[object Object]"&&(!p(Ne)&&p(Ee)||!A(Ne)&&A(Ee)))return!1;if(a(Ne)){if(!a(Ee)||Date.prototype.getTime.call(Ne)!==Date.prototype.getTime.call(Ee))return!1}else if(x(Ne)){if(!x(Ee)||!q(Ne,Ee))return!1}else if(P(Ne)||Ne instanceof Error){if(Ne.message!==Ee.message||Ne.name!==Ee.name)return!1}else if(c(Ne)){if(!ze&&(k(Ne)||D(Ne))){if(!ue(Ne,Ee))return!1}else if(!te(Ne,Ee))return!1;var ot=O(Ne),$e=O(Ee);return ot.length!==$e.length?!1:le(Ne,Ee,ze,Ce,H,ot)}else{if(A(Ne))return!A(Ee)||Ne.size!==Ee.size?!1:le(Ne,Ee,ze,Ce,$);if(p(Ne))return!p(Ee)||Ne.size!==Ee.size?!1:le(Ne,Ee,ze,Ce,ne);if(w(Ne)){if(!J(Ne,Ee))return!1}else if(y(Ne)&&!ie(Ne,Ee))return!1}return le(Ne,Ee,ze,Ce,H)}function ee(Ne,Ee){return Ee.filter(function(ze){return l(Ne,ze)})}function le(Ne,Ee,ze,Ce,Oe,Le){if(arguments.length===5){Le=Object.keys(Ne);var Ge=Object.keys(Ee);if(Le.length!==Ge.length)return!1}for(var rt=0;rt<Le.length;rt++)if(!u(Ee,Le[rt]))return!1;if(ze&&arguments.length===5){var ot=o(Ne);if(ot.length!==0){var $e=0;for(rt=0;rt<ot.length;rt++){var qe=ot[rt];if(l(Ne,qe)){if(!l(Ee,qe))return!1;Le.push(qe),$e++}else if(l(Ee,qe))return!1}var ht=o(Ee);if(ot.length!==ht.length&&ee(Ee,ht).length!==$e)return!1}else{var vt=o(Ee);if(vt.length!==0&&ee(Ee,vt).length!==0)return!1}}if(Le.length===0&&(Oe===H||Oe===X&&Ne.length===0||Ne.size===0))return!0;if(Ce===void 0)Ce={val1:new Map,val2:new Map,position:0};else{var pt=Ce.val1.get(Ne);if(pt!==void 0){var wt=Ce.val2.get(Ee);if(wt!==void 0)return pt===wt}Ce.position++}Ce.val1.set(Ne,Ce.position),Ce.val2.set(Ee,Ce.position);var Et=we(Ne,Ee,ze,Le,Ce,Oe);return Ce.val1.delete(Ne),Ce.val2.delete(Ee),Et}function j(Ne,Ee,ze,Ce){for(var Oe=g(Ne),Le=0;Le<Oe.length;Le++){var Ge=Oe[Le];if(K(Ee,Ge,ze,Ce))return Ne.delete(Ge),!0}return!1}function Z(Ne){switch(T(Ne)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Ne=+Ne;case"number":if(i(Ne))return!1}return!0}function fe(Ne,Ee,ze){var Ce=Z(ze);return Ce??(Ee.has(Ce)&&!Ne.has(Ce))}function re(Ne,Ee,ze,Ce,Oe){var Le=Z(ze);if(Le!=null)return Le;var Ge=Ee.get(Le);return Ge===void 0&&!Ee.has(Le)||!K(Ce,Ge,!1,Oe)?!1:!Ne.has(Le)&&K(Ce,Ge,!1,Oe)}function ce(Ne,Ee,ze,Ce){for(var Oe=null,Le=g(Ne),Ge=0;Ge<Le.length;Ge++){var rt=Le[Ge];if(T(rt)==="object"&&rt!==null)Oe===null&&(Oe=new Set),Oe.add(rt);else if(!Ee.has(rt)){if(ze||!fe(Ne,Ee,rt))return!1;Oe===null&&(Oe=new Set),Oe.add(rt)}}if(Oe!==null){for(var ot=g(Ee),$e=0;$e<ot.length;$e++){var qe=ot[$e];if(T(qe)==="object"&&qe!==null){if(!j(Oe,qe,ze,Ce))return!1}else if(!ze&&!Ne.has(qe)&&!j(Oe,qe,ze,Ce))return!1}return Oe.size===0}return!0}function xe(Ne,Ee,ze,Ce,Oe,Le){for(var Ge=g(Ne),rt=0;rt<Ge.length;rt++){var ot=Ge[rt];if(K(ze,ot,Oe,Le)&&K(Ce,Ee.get(ot),Oe,Le))return Ne.delete(ot),!0}return!1}function Te(Ne,Ee,ze,Ce){for(var Oe=null,Le=r(Ne),Ge=0;Ge<Le.length;Ge++){var rt=d(Le[Ge],2),ot=rt[0],$e=rt[1];if(T(ot)==="object"&&ot!==null)Oe===null&&(Oe=new Set),Oe.add(ot);else{var qe=Ee.get(ot);if(qe===void 0&&!Ee.has(ot)||!K($e,qe,ze,Ce)){if(ze||!re(Ne,Ee,ot,$e,Ce))return!1;Oe===null&&(Oe=new Set),Oe.add(ot)}}}if(Oe!==null){for(var ht=r(Ee),vt=0;vt<ht.length;vt++){var pt=d(ht[vt],2),ot=pt[0],wt=pt[1];if(T(ot)==="object"&&ot!==null){if(!xe(Oe,Ne,ot,wt,ze,Ce))return!1}else if(!ze&&(!Ne.has(ot)||!K(Ne.get(ot),wt,!1,Ce))&&!xe(Oe,Ne,ot,wt,!1,Ce))return!1}return Oe.size===0}return!0}function we(Ne,Ee,ze,Ce,Oe,Le){var Ge=0;if(Le===$){if(!ce(Ne,Ee,ze,Oe))return!1}else if(Le===ne){if(!Te(Ne,Ee,ze,Oe))return!1}else if(Le===X)for(;Ge<Ne.length;Ge++)if(u(Ne,Ge)){if(!u(Ee,Ge)||!K(Ne[Ge],Ee[Ge],ze,Oe))return!1}else{if(u(Ee,Ge))return!1;for(var rt=Object.keys(Ne);Ge<rt.length;Ge++){var ot=rt[Ge];if(!u(Ee,ot)||!K(Ne[ot],Ee[ot],ze,Oe))return!1}return rt.length===Object.keys(Ee).length}for(Ge=0;Ge<Ce.length;Ge++){var $e=Ce[Ge];if(!K(Ne[$e],Ee[$e],ze,Oe))return!1}return!0}function _e(Ne,Ee){return K(Ne,Ee,z)}function ke(Ne,Ee){return K(Ne,Ee,B)}U.exports={isDeepEqual:_e,isDeepStrictEqual:ke}},83160:function(U,F,e){e.r(F),e.d(F,{decode:function(){return T},encode:function(){return E}});for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=typeof Uint8Array>"u"?[]:new Uint8Array(256),n=0;n<d.length;n++)S[d.charCodeAt(n)]=n;var E=function(v){var g=new Uint8Array(v),r,t=g.length,o="";for(r=0;r<t;r+=3)o+=d[g[r]>>2],o+=d[(g[r]&3)<<4|g[r+1]>>4],o+=d[(g[r+1]&15)<<2|g[r+2]>>6],o+=d[g[r+2]&63];return t%3===2?o=o.substring(0,o.length-1)+"=":t%3===1&&(o=o.substring(0,o.length-2)+"=="),o},T=function(v){var g=v.length*.75,r=v.length,t,o=0,i,f,u,l;v[v.length-1]==="="&&(g--,v[v.length-2]==="="&&g--);var m=new ArrayBuffer(g),h=new Uint8Array(m);for(t=0;t<r;t+=4)i=S[v.charCodeAt(t)],f=S[v.charCodeAt(t+1)],u=S[v.charCodeAt(t+2)],l=S[v.charCodeAt(t+3)],h[o++]=i<<2|f>>4,h[o++]=(f&15)<<4|u>>2,h[o++]=(u&3)<<6|l&63;return m}},59968:function(U,F){F.byteLength=g,F.toByteArray=t,F.fromByteArray=f;for(var e=[],d=[],S=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,T=n.length;E<T;++E)e[E]=n[E],d[n.charCodeAt(E)]=E;d[45]=62,d[95]=63;function v(u){var l=u.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=u.indexOf("=");m===-1&&(m=l);var h=m===l?0:4-m%4;return[m,h]}function g(u){var l=v(u),m=l[0],h=l[1];return(m+h)*3/4-h}function r(u,l,m){return(l+m)*3/4-m}function t(u){var l,m=v(u),h=m[0],w=m[1],c=new S(r(u,h,w)),a=0,p=w>0?h-4:h,x;for(x=0;x<p;x+=4)l=d[u.charCodeAt(x)]<<18|d[u.charCodeAt(x+1)]<<12|d[u.charCodeAt(x+2)]<<6|d[u.charCodeAt(x+3)],c[a++]=l>>16&255,c[a++]=l>>8&255,c[a++]=l&255;return w===2&&(l=d[u.charCodeAt(x)]<<2|d[u.charCodeAt(x+1)]>>4,c[a++]=l&255),w===1&&(l=d[u.charCodeAt(x)]<<10|d[u.charCodeAt(x+1)]<<4|d[u.charCodeAt(x+2)]>>2,c[a++]=l>>8&255,c[a++]=l&255),c}function o(u){return e[u>>18&63]+e[u>>12&63]+e[u>>6&63]+e[u&63]}function i(u,l,m){for(var h,w=[],c=l;c<m;c+=3)h=(u[c]<<16&16711680)+(u[c+1]<<8&65280)+(u[c+2]&255),w.push(o(h));return w.join("")}function f(u){for(var l,m=u.length,h=m%3,w=[],c=16383,a=0,p=m-h;a<p;a+=c)w.push(i(u,a,a+c>p?p:a+c));return h===1?(l=u[m-1],w.push(e[l>>2]+e[l<<4&63]+"==")):h===2&&(l=(u[m-2]<<8)+u[m-1],w.push(e[l>>10]+e[l>>4&63]+e[l<<2&63]+"=")),w.join("")}},64928:function(U){function F(T,v,g,r,t){for(var o=t+1;r<=t;){var i=r+t>>>1,f=T[i],u=g!==void 0?g(f,v):f-v;u>=0?(o=i,t=i-1):r=i+1}return o}function e(T,v,g,r,t){for(var o=t+1;r<=t;){var i=r+t>>>1,f=T[i],u=g!==void 0?g(f,v):f-v;u>0?(o=i,t=i-1):r=i+1}return o}function d(T,v,g,r,t){for(var o=r-1;r<=t;){var i=r+t>>>1,f=T[i],u=g!==void 0?g(f,v):f-v;u<0?(o=i,r=i+1):t=i-1}return o}function S(T,v,g,r,t){for(var o=r-1;r<=t;){var i=r+t>>>1,f=T[i],u=g!==void 0?g(f,v):f-v;u<=0?(o=i,r=i+1):t=i-1}return o}function n(T,v,g,r,t){for(;r<=t;){var o=r+t>>>1,i=T[o],f=g!==void 0?g(i,v):i-v;if(f===0)return o;f<=0?r=o+1:t=o-1}return-1}function E(T,v,g,r,t,o){return typeof g=="function"?o(T,v,g,r===void 0?0:r|0,t===void 0?T.length-1:t|0):o(T,v,void 0,g===void 0?0:g|0,r===void 0?T.length-1:r|0)}U.exports={ge:function(T,v,g,r,t){return E(T,v,g,r,t,F)},gt:function(T,v,g,r,t){return E(T,v,g,r,t,e)},lt:function(T,v,g,r,t){return E(T,v,g,r,t,d)},le:function(T,v,g,r,t){return E(T,v,g,r,t,S)},eq:function(T,v,g,r,t){return E(T,v,g,r,t,n)}}},308:function(U,F){"use restrict";var e=32;F.INT_BITS=e,F.INT_MAX=2147483647,F.INT_MIN=-1<<e-1,F.sign=function(n){return(n>0)-(n<0)},F.abs=function(n){var E=n>>e-1;return(n^E)-E},F.min=function(n,E){return E^(n^E)&-(n<E)},F.max=function(n,E){return n^(n^E)&-(n<E)},F.isPow2=function(n){return!(n&n-1)&&!!n},F.log2=function(n){var E,T;return E=(n>65535)<<4,n>>>=E,T=(n>255)<<3,n>>>=T,E|=T,T=(n>15)<<2,n>>>=T,E|=T,T=(n>3)<<1,n>>>=T,E|=T,E|n>>1},F.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},F.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function d(n){var E=32;return n&=-n,n&&E--,n&65535&&(E-=16),n&16711935&&(E-=8),n&252645135&&(E-=4),n&858993459&&(E-=2),n&1431655765&&(E-=1),E}F.countTrailingZeros=d,F.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},F.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},F.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var S=new Array(256);(function(n){for(var E=0;E<256;++E){var T=E,v=E,g=7;for(T>>>=1;T;T>>>=1)v<<=1,v|=T&1,--g;n[E]=v<<g&255}})(S),F.reverse=function(n){return S[n&255]<<24|S[n>>>8&255]<<16|S[n>>>16&255]<<8|S[n>>>24&255]},F.interleave2=function(n,E){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,E&=65535,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,n|E<<1},F.deinterleave2=function(n,E){return n=n>>>E&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},F.interleave3=function(n,E,T){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,E&=1023,E=(E|E<<16)&4278190335,E=(E|E<<8)&251719695,E=(E|E<<4)&3272356035,E=(E|E<<2)&1227133513,n|=E<<1,T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,n|T<<2},F.deinterleave3=function(n,E){return n=n>>>E&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},F.nextCombination=function(n){var E=n|n-1;return E+1|(~E&-~E)-1>>>d(n)+1}},29620:function(U,F,e){var d=e(32420);U.exports=n;var S=1e20;function n(v,g){g||(g={});var r=g.cutoff==null?.25:g.cutoff,t=g.radius==null?8:g.radius,o=g.channel||0,i,f,u,l,m,h,w,c,a,p,x;if(ArrayBuffer.isView(v)||Array.isArray(v)){if(!g.width||!g.height)throw Error("For raw data width and height should be provided by options");i=g.width,f=g.height,l=v,g.stride?h=g.stride:h=Math.floor(v.length/i/f)}else window.HTMLCanvasElement&&v instanceof window.HTMLCanvasElement?(c=v,w=c.getContext("2d"),i=c.width,f=c.height,a=w.getImageData(0,0,i,f),l=a.data,h=4):window.CanvasRenderingContext2D&&v instanceof window.CanvasRenderingContext2D?(c=v.canvas,w=v,i=c.width,f=c.height,a=w.getImageData(0,0,i,f),l=a.data,h=4):window.ImageData&&v instanceof window.ImageData&&(a=v,i=v.width,f=v.height,l=a.data,h=4);if(u=Math.max(i,f),window.Uint8ClampedArray&&l instanceof window.Uint8ClampedArray||window.Uint8Array&&l instanceof window.Uint8Array)for(m=l,l=Array(i*f),p=0,x=m.length;p<x;p++)l[p]=m[p*h+o]/255;else if(h!==1)throw Error("Raw data can have only 1 value per pixel");var A=Array(i*f),P=Array(i*f),y=Array(u),C=Array(u),M=Array(u+1),s=Array(u);for(p=0,x=i*f;p<x;p++){var _=l[p];A[p]=_===1?0:_===0?S:Math.pow(Math.max(0,.5-_),2),P[p]=_===1?S:_===0?0:Math.pow(Math.max(0,_-.5),2)}E(A,i,f,y,C,s,M),E(P,i,f,y,C,s,M);var b=window.Float32Array?new Float32Array(i*f):new Array(i*f);for(p=0,x=i*f;p<x;p++)b[p]=d(1-((A[p]-P[p])/t+r),0,1);return b}function E(v,g,r,t,o,i,f){for(var u=0;u<g;u++){for(var l=0;l<r;l++)t[l]=v[l*g+u];for(T(t,o,i,f,r),l=0;l<r;l++)v[l*g+u]=o[l]}for(l=0;l<r;l++){for(u=0;u<g;u++)t[u]=v[l*g+u];for(T(t,o,i,f,g),u=0;u<g;u++)v[l*g+u]=Math.sqrt(o[u])}}function T(v,g,r,t,o){r[0]=0,t[0]=-S,t[1]=+S;for(var i=1,f=0;i<o;i++){for(var u=(v[i]+i*i-(v[r[f]]+r[f]*r[f]))/(2*i-2*r[f]);u<=t[f];)f--,u=(v[i]+i*i-(v[r[f]]+r[f]*r[f]))/(2*i-2*r[f]);f++,r[f]=i,t[f]=u,t[f+1]=+S}for(i=0,f=0;i<o;i++){for(;t[f+1]<i;)f++;g[i]=(i-r[f])*(i-r[f])+v[r[f]]}}},99676:function(U,F,e){var d=e(53664),S=e(57916),n=S(d("String.prototype.indexOf"));U.exports=function(T,v){var g=d(T,!!v);return typeof g=="function"&&n(T,".prototype.")>-1?S(g):g}},57916:function(U,F,e){var d=e(8844),S=e(53664),n=e(14500),E=S("%TypeError%"),T=S("%Function.prototype.apply%"),v=S("%Function.prototype.call%"),g=S("%Reflect.apply%",!0)||d.call(v,T),r=S("%Object.defineProperty%",!0),t=S("%Math.max%");if(r)try{r({},"a",{value:1})}catch{r=null}U.exports=function(f){if(typeof f!="function")throw new E("a function is required");var u=g(d,v,arguments);return n(u,1+t(0,f.length-(arguments.length-1)),!0)};var o=function(){return g(d,T,arguments)};r?r(U.exports,"apply",{value:o}):U.exports.apply=o},32420:function(U){U.exports=F;function F(e,d,S){return d<S?e<d?d:e>S?S:e:e<S?S:e>d?d:e}},3808:function(U,F,e){var d=e(32420);U.exports=S,U.exports.to=S,U.exports.from=n;function S(E,T){T==null&&(T=!0);var v=E[0],g=E[1],r=E[2],t=E[3];t==null&&(t=T?1:255),T&&(v*=255,g*=255,r*=255,t*=255),v=d(v,0,255)&255,g=d(g,0,255)&255,r=d(r,0,255)&255,t=d(t,0,255)&255;var o=v*16777216+(g<<16)+(r<<8)+t;return o}function n(E,T){E=+E;var v=E>>>24,g=(E&16711680)>>>16,r=(E&65280)>>>8,t=E&255;return T===!1?[v,g,r,t]:[v/255,g/255,r/255,t/255]}},17592:function(U){U.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(U,F,e){var d=e(96824),S=e(32420),n=e(72512);U.exports=function(v,g){(g==="float"||!g)&&(g="array"),g==="uint"&&(g="uint8"),g==="uint_clamped"&&(g="uint8_clamped");var r=n(g),t=new r(4),o=g!=="uint8"&&g!=="uint8_clamped";return(!v.length||typeof v=="string")&&(v=d(v),v[0]/=255,v[1]/=255,v[2]/=255),E(v)?(t[0]=v[0],t[1]=v[1],t[2]=v[2],t[3]=v[3]!=null?v[3]:255,o&&(t[0]/=255,t[1]/=255,t[2]/=255,t[3]/=255),t):(o?(t[0]=v[0],t[1]=v[1],t[2]=v[2],t[3]=v[3]!=null?v[3]:1):(t[0]=S(Math.floor(v[0]*255),0,255),t[1]=S(Math.floor(v[1]*255),0,255),t[2]=S(Math.floor(v[2]*255),0,255),t[3]=v[3]==null?255:S(Math.floor(v[3]*255),0,255)),t)};function E(T){return!!(T instanceof Uint8Array||T instanceof Uint8ClampedArray||Array.isArray(T)&&(T[0]>1||T[0]===0)&&(T[1]>1||T[1]===0)&&(T[2]>1||T[2]===0)&&(!T[3]||T[3]>1))}},96824:function(U,F,e){var d=e(95532),S=e(53576),n=e(32420);U.exports=function(T){var v,g=d(T);return g.space?(v=Array(3),v[0]=n(g.values[0],0,255),v[1]=n(g.values[1],0,255),v[2]=n(g.values[2],0,255),g.space[0]==="h"&&(v=S.rgb(v)),v.push(n(g.alpha,0,1)),v):[]}},95532:function(U,F,e){var d=e(17592);U.exports=n;var S={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function n(E){var T,v=[],g=1,r;if(typeof E=="string")if(E=E.toLowerCase(),d[E])v=d[E].slice(),r="rgb";else if(E==="transparent")g=0,r="rgb",v=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(E)){var t=E.slice(1),o=t.length,i=o<=4;g=1,i?(v=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],o===4&&(g=parseInt(t[3]+t[3],16)/255)):(v=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],o===8&&(g=parseInt(t[6]+t[7],16)/255)),v[0]||(v[0]=0),v[1]||(v[1]=0),v[2]||(v[2]=0),r="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(E)){var f=T[1],u=f==="rgb",t=f.replace(/a$/,"");r=t;var o=t==="cmyk"?4:t==="gray"?1:3;v=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,w){if(/%$/.test(h))return w===o?parseFloat(h)/100:t==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(t[w]==="h"){if(/deg$/.test(h))return parseFloat(h);if(S[h]!==void 0)return S[h]}return parseFloat(h)}),f===t&&v.push(1),g=u||v[o]===void 0?1:v[o],v=v.slice(0,o)}else E.length>10&&/[0-9](?:\s|\/)/.test(E)&&(v=E.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),r=E.match(/([a-z])/ig).join("").toLowerCase());else isNaN(E)?Array.isArray(E)||E.length?(v=[E[0],E[1],E[2]],r="rgb",g=E.length===4?E[3]:1):E instanceof Object&&(E.r!=null||E.red!=null||E.R!=null?(r="rgb",v=[E.r||E.red||E.R||0,E.g||E.green||E.G||0,E.b||E.blue||E.B||0]):(r="hsl",v=[E.h||E.hue||E.H||0,E.s||E.saturation||E.S||0,E.l||E.lightness||E.L||E.b||E.brightness]),g=E.a||E.alpha||E.opacity||1,E.opacity!=null&&(g/=100)):(r="rgb",v=[E>>>16,(E&65280)>>>8,E&255]);return{space:r,values:v,alpha:g}}},53576:function(U,F,e){var d=e(19336);U.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(S){var n=S[0]/360,E=S[1]/100,T=S[2]/100,v,g,r,t,o;if(E===0)return o=T*255,[o,o,o];T<.5?g=T*(1+E):g=T+E-T*E,v=2*T-g,t=[0,0,0];for(var i=0;i<3;i++)r=n+.3333333333333333*-(i-1),r<0?r++:r>1&&r--,6*r<1?o=v+(g-v)*6*r:2*r<1?o=g:3*r<2?o=v+(g-v)*(.6666666666666666-r)*6:o=v,t[i]=o*255;return t}},d.hsl=function(S){var n=S[0]/255,E=S[1]/255,T=S[2]/255,v=Math.min(n,E,T),g=Math.max(n,E,T),r=g-v,t,o,i;return g===v?t=0:n===g?t=(E-T)/r:E===g?t=2+(T-n)/r:T===g&&(t=4+(n-E)/r),t=Math.min(t*60,360),t<0&&(t+=360),i=(v+g)/2,g===v?o=0:i<=.5?o=r/(g+v):o=r/(2-g-v),[t,o*100,i*100]}},19336:function(U){U.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(U){U.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(U,F,e){U.exports={parse:e(46416),stringify:e(49395)}},8744:function(U,F,e){var d=e(30584);U.exports={isSize:function(n){return/^[\d\.]/.test(n)||n.indexOf("/")!==-1||d.indexOf(n)!==-1}}},46416:function(U,F,e){var d=e(92384),S=e(68194),n=e(3748),E=e(2904),T=e(47916),v=e(7294),g=e(39956),r=e(8744).isSize;U.exports=o;var t=o.cache={};function o(f){if(typeof f!="string")throw new Error("Font argument must be a string.");if(t[f])return t[f];if(f==="")throw new Error("Cannot parse an empty string.");if(n.indexOf(f)!==-1)return t[f]={system:f};for(var u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},l=g(f,/\s+/),m;m=l.shift();){if(S.indexOf(m)!==-1)return["style","variant","weight","stretch"].forEach(function(w){u[w]=m}),t[f]=u;if(T.indexOf(m)!==-1){u.style=m;continue}if(m==="normal"||m==="small-caps"){u.variant=m;continue}if(v.indexOf(m)!==-1){u.stretch=m;continue}if(E.indexOf(m)!==-1){u.weight=m;continue}if(r(m)){var h=g(m,"/");if(u.size=h[0],h[1]!=null?u.lineHeight=i(h[1]):l[0]==="/"&&(l.shift(),u.lineHeight=i(l.shift())),!l.length)throw new Error("Missing required font-family.");return u.family=g(l.join(" "),/\s*,\s*/).map(d),t[f]=u}throw new Error("Unknown or unsupported font token: "+m)}throw new Error("Missing required font-size.")}function i(f){var u=parseFloat(f);return u.toString()===f?u:f}},49395:function(U,F,e){var d=e(55616),S=e(8744).isSize,n=f(e(68194)),E=f(e(3748)),T=f(e(2904)),v=f(e(47916)),g=f(e(7294)),r={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},o={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};U.exports=function(l){if(l=d(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),l.system)return l.system&&i(l.system,E),l.system;if(i(l.style,v),i(l.variant,r),i(l.weight,T),i(l.stretch,g),l.size==null&&(l.size=o.size),typeof l.size=="number"&&(l.size+="px"),!S)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=o.family),Array.isArray(l.family)&&(l.family.length||(l.family=[o.family]),l.family=l.family.map(function(h){return t[h]?h:'"'+h+'"'}).join(", "));var m=[];return m.push(l.style),l.variant!==l.style&&m.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&m.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&m.push(l.stretch),m.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),m.push(l.family),m.filter(Boolean).join(" ")};function i(u,l){if(u&&!l[u]&&!n[u])throw Error("Unknown keyword `"+u+"`");return u}function f(u){for(var l={},m=0;m<u.length;m++)l[u[m]]=1;return l}},27940:function(U,F,e){var d=e(81680),S=e(18496),n=e(87396),E=e(95920),T=e(50868),v=e(84323),g=Function.prototype.bind,r=Object.defineProperty,t=Object.prototype.hasOwnProperty,o;o=function(i,f,u){var l=S(f)&&n(f.value),m;return m=E(f),delete m.writable,delete m.value,m.get=function(){return!u.overwriteDefinition&&t.call(this,i)?l:(f.value=g.call(l,u.resolveContext?u.resolveContext(this):this),r(this,i,f),this[i])},m},U.exports=function(i){var f=T(arguments[1]);return d(f.resolveContext)&&n(f.resolveContext),v(i,function(u,l){return o(l,u,f)})}},21092:function(U,F,e){var d=e(81680),S=e(85488),n=e(38452),E=e(50868),T=e(71056),v=U.exports=function(g,r){var t,o,i,f,u;return arguments.length<2||typeof g!="string"?(f=r,r=g,g=null):f=arguments[2],d(g)?(t=T.call(g,"c"),o=T.call(g,"e"),i=T.call(g,"w")):(t=i=!0,o=!1),u={value:r,configurable:t,enumerable:o,writable:i},f?n(E(f),u):u};v.gs=function(g,r,t){var o,i,f,u;return typeof g!="string"?(f=t,t=r,r=g,g=null):f=arguments[3],d(r)?S(r)?d(t)?S(t)||(f=t,t=void 0):t=void 0:(f=r,r=t=void 0):r=void 0,d(g)?(o=T.call(g,"c"),i=T.call(g,"e")):(o=!0,i=!1),u={get:r,set:t,configurable:o,enumerable:i},f?n(E(f),u):u}},84706:function(U,F,e){e.d(F,{XE:function(){return d},kv:function(){return E},mo:function(){return v},Uf:function(){return g},SY:function(){return r},ik:function(){return t},oh:function(){return o}});function d(i,f){return i<f?-1:i>f?1:i>=f?0:NaN}function S(i){return i.length===1&&(i=n(i)),{left:function(f,u,l,m){for(l==null&&(l=0),m==null&&(m=f.length);l<m;){var h=l+m>>>1;i(f[h],u)<0?l=h+1:m=h}return l},right:function(f,u,l,m){for(l==null&&(l=0),m==null&&(m=f.length);l<m;){var h=l+m>>>1;i(f[h],u)>0?m=h:l=h+1}return l}}}function n(i){return function(f,u){return d(i(f),u)}}S(d);function E(i,f){var u=i.length,l=-1,m,h;if(f==null){for(;++l<u;)if((m=i[l])!=null&&m>=m)for(h=m;++l<u;)(m=i[l])!=null&&m>h&&(h=m)}else for(;++l<u;)if((m=f(i[l],l,i))!=null&&m>=m)for(h=m;++l<u;)(m=f(i[l],l,i))!=null&&m>h&&(h=m);return h}function T(i){return i===null?NaN:+i}function v(i,f){var u=i.length,l=u,m=-1,h,w=0;if(f==null)for(;++m<u;)isNaN(h=T(i[m]))?--l:w+=h;else for(;++m<u;)isNaN(h=T(f(i[m],m,i)))?--l:w+=h;if(l)return w/l}function g(i){for(var f=i.length,u,l=-1,m=0,h,w;++l<f;)m+=i[l].length;for(h=new Array(m);--f>=0;)for(w=i[f],u=w.length;--u>=0;)h[--m]=w[u];return h}function r(i,f){var u=i.length,l=-1,m,h;if(f==null){for(;++l<u;)if((m=i[l])!=null&&m>=m)for(h=m;++l<u;)(m=i[l])!=null&&h>m&&(h=m)}else for(;++l<u;)if((m=f(i[l],l,i))!=null&&m>=m)for(h=m;++l<u;)(m=f(i[l],l,i))!=null&&h>m&&(h=m);return h}function t(i,f,u){i=+i,f=+f,u=(m=arguments.length)<2?(f=i,i=0,1):m<3?1:+u;for(var l=-1,m=Math.max(0,Math.ceil((f-i)/u))|0,h=new Array(m);++l<m;)h[l]=i+l*u;return h}function o(i,f){var u=i.length,l=-1,m,h=0;if(f==null)for(;++l<u;)(m=+i[l])&&(h+=m);else for(;++l<u;)(m=+f(i[l],l,i))&&(h+=m);return h}},34712:function(U,F,e){e.d(F,{kH:function(){return E},UJ:function(){return T}});var d="$";function S(){}S.prototype=n.prototype={constructor:S,has:function(f){return d+f in this},get:function(f){return this[d+f]},set:function(f,u){return this[d+f]=u,this},remove:function(f){var u=d+f;return u in this&&delete this[u]},clear:function(){for(var f in this)f[0]===d&&delete this[f]},keys:function(){var f=[];for(var u in this)u[0]===d&&f.push(u.slice(1));return f},values:function(){var f=[];for(var u in this)u[0]===d&&f.push(this[u]);return f},entries:function(){var f=[];for(var u in this)u[0]===d&&f.push({key:u.slice(1),value:this[u]});return f},size:function(){var f=0;for(var u in this)u[0]===d&&++f;return f},empty:function(){for(var f in this)if(f[0]===d)return!1;return!0},each:function(f){for(var u in this)u[0]===d&&f(this[u],u.slice(1),this)}};function n(f,u){var l=new S;if(f instanceof S)f.each(function(a,p){l.set(p,a)});else if(Array.isArray(f)){var m=-1,h=f.length,w;if(u==null)for(;++m<h;)l.set(m,f[m]);else for(;++m<h;)l.set(u(w=f[m],m,f),w)}else if(f)for(var c in f)l.set(c,f[c]);return l}var E=n;function T(){var f=[],u=[],l,m,h;function w(a,p,x,A){if(p>=f.length)return l!=null&&a.sort(l),m!=null?m(a):a;for(var P=-1,y=a.length,C=f[p++],M,s,_=E(),b,k=x();++P<y;)(b=_.get(M=C(s=a[P])+""))?b.push(s):_.set(M,[s]);return _.each(function(D,V){A(k,V,w(D,p,x,A))}),k}function c(a,p){if(++p>f.length)return a;var x,A=u[p-1];return m!=null&&p>=f.length?x=a.entries():(x=[],a.each(function(P,y){x.push({key:y,values:c(P,p)})})),A!=null?x.sort(function(P,y){return A(P.key,y.key)}):x}return h={object:function(a){return w(a,0,v,g)},map:function(a){return w(a,0,r,t)},entries:function(a){return c(w(a,0,r,t),0)},key:function(a){return f.push(a),h},sortKeys:function(a){return u[f.length-1]=a,h},sortValues:function(a){return l=a,h},rollup:function(a){return m=a,h}}}function v(){return{}}function g(f,u,l){f[u]=l}function r(){return E()}function t(f,u,l){f.set(u,l)}function o(){}var i=E.prototype;o.prototype={constructor:o,has:i.has,add:function(f){return f+="",this[d+f]=f,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each}},49812:function(U,F,e){e.r(F),e.d(F,{forceCenter:function(){return d},forceCollide:function(){return _},forceLink:function(){return V},forceManyBody:function(){return Ge},forceRadial:function(){return rt},forceSimulation:function(){return Le},forceX:function(){return ot},forceY:function(){return $e}});function d(qe,ht){var vt;qe==null&&(qe=0),ht==null&&(ht=0);function pt(){var wt,Et=vt.length,nt,Fe=0,We=0;for(wt=0;wt<Et;++wt)nt=vt[wt],Fe+=nt.x,We+=nt.y;for(Fe=Fe/Et-qe,We=We/Et-ht,wt=0;wt<Et;++wt)nt=vt[wt],nt.x-=Fe,nt.y-=We}return pt.initialize=function(wt){vt=wt},pt.x=function(wt){return arguments.length?(qe=+wt,pt):qe},pt.y=function(wt){return arguments.length?(ht=+wt,pt):ht},pt}function S(qe){return function(){return qe}}function n(){return(Math.random()-.5)*1e-6}function E(qe){var ht=+this._x.call(null,qe),vt=+this._y.call(null,qe);return T(this.cover(ht,vt),ht,vt,qe)}function T(qe,ht,vt,pt){if(isNaN(ht)||isNaN(vt))return qe;var wt,Et=qe._root,nt={data:pt},Fe=qe._x0,We=qe._y0,Ze=qe._x1,Ye=qe._y1,Ie,De,je,Re,pe,be,Ue,et;if(!Et)return qe._root=nt,qe;for(;Et.length;)if((pe=ht>=(Ie=(Fe+Ze)/2))?Fe=Ie:Ze=Ie,(be=vt>=(De=(We+Ye)/2))?We=De:Ye=De,wt=Et,!(Et=Et[Ue=be<<1|pe]))return wt[Ue]=nt,qe;if(je=+qe._x.call(null,Et.data),Re=+qe._y.call(null,Et.data),ht===je&&vt===Re)return nt.next=Et,wt?wt[Ue]=nt:qe._root=nt,qe;do wt=wt?wt[Ue]=new Array(4):qe._root=new Array(4),(pe=ht>=(Ie=(Fe+Ze)/2))?Fe=Ie:Ze=Ie,(be=vt>=(De=(We+Ye)/2))?We=De:Ye=De;while((Ue=be<<1|pe)===(et=(Re>=De)<<1|je>=Ie));return wt[et]=Et,wt[Ue]=nt,qe}function v(qe){var ht,vt,pt=qe.length,wt,Et,nt=new Array(pt),Fe=new Array(pt),We=1/0,Ze=1/0,Ye=-1/0,Ie=-1/0;for(vt=0;vt<pt;++vt)isNaN(wt=+this._x.call(null,ht=qe[vt]))||isNaN(Et=+this._y.call(null,ht))||(nt[vt]=wt,Fe[vt]=Et,wt<We&&(We=wt),wt>Ye&&(Ye=wt),Et<Ze&&(Ze=Et),Et>Ie&&(Ie=Et));if(We>Ye||Ze>Ie)return this;for(this.cover(We,Ze).cover(Ye,Ie),vt=0;vt<pt;++vt)T(this,nt[vt],Fe[vt],qe[vt]);return this}function g(qe,ht){if(isNaN(qe=+qe)||isNaN(ht=+ht))return this;var vt=this._x0,pt=this._y0,wt=this._x1,Et=this._y1;if(isNaN(vt))wt=(vt=Math.floor(qe))+1,Et=(pt=Math.floor(ht))+1;else{for(var nt=wt-vt,Fe=this._root,We,Ze;vt>qe||qe>=wt||pt>ht||ht>=Et;)switch(Ze=(ht<pt)<<1|qe<vt,We=new Array(4),We[Ze]=Fe,Fe=We,nt*=2,Ze){case 0:wt=vt+nt,Et=pt+nt;break;case 1:vt=wt-nt,Et=pt+nt;break;case 2:wt=vt+nt,pt=Et-nt;break;case 3:vt=wt-nt,pt=Et-nt;break}this._root&&this._root.length&&(this._root=Fe)}return this._x0=vt,this._y0=pt,this._x1=wt,this._y1=Et,this}function r(){var qe=[];return this.visit(function(ht){if(!ht.length)do qe.push(ht.data);while(ht=ht.next)}),qe}function t(qe){return arguments.length?this.cover(+qe[0][0],+qe[0][1]).cover(+qe[1][0],+qe[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function o(qe,ht,vt,pt,wt){this.node=qe,this.x0=ht,this.y0=vt,this.x1=pt,this.y1=wt}function i(qe,ht,vt){var pt,wt=this._x0,Et=this._y0,nt,Fe,We,Ze,Ye=this._x1,Ie=this._y1,De=[],je=this._root,Re,pe;for(je&&De.push(new o(je,wt,Et,Ye,Ie)),vt==null?vt=1/0:(wt=qe-vt,Et=ht-vt,Ye=qe+vt,Ie=ht+vt,vt*=vt);Re=De.pop();)if(!(!(je=Re.node)||(nt=Re.x0)>Ye||(Fe=Re.y0)>Ie||(We=Re.x1)<wt||(Ze=Re.y1)<Et))if(je.length){var be=(nt+We)/2,Ue=(Fe+Ze)/2;De.push(new o(je[3],be,Ue,We,Ze),new o(je[2],nt,Ue,be,Ze),new o(je[1],be,Fe,We,Ue),new o(je[0],nt,Fe,be,Ue)),(pe=(ht>=Ue)<<1|qe>=be)&&(Re=De[De.length-1],De[De.length-1]=De[De.length-1-pe],De[De.length-1-pe]=Re)}else{var et=qe-+this._x.call(null,je.data),st=ht-+this._y.call(null,je.data),lt=et*et+st*st;if(lt<vt){var Gt=Math.sqrt(vt=lt);wt=qe-Gt,Et=ht-Gt,Ye=qe+Gt,Ie=ht+Gt,pt=je.data}}return pt}function f(qe){if(isNaN(Ye=+this._x.call(null,qe))||isNaN(Ie=+this._y.call(null,qe)))return this;var ht,vt=this._root,pt,wt,Et,nt=this._x0,Fe=this._y0,We=this._x1,Ze=this._y1,Ye,Ie,De,je,Re,pe,be,Ue;if(!vt)return this;if(vt.length)for(;;){if((Re=Ye>=(De=(nt+We)/2))?nt=De:We=De,(pe=Ie>=(je=(Fe+Ze)/2))?Fe=je:Ze=je,ht=vt,!(vt=vt[be=pe<<1|Re]))return this;if(!vt.length)break;(ht[be+1&3]||ht[be+2&3]||ht[be+3&3])&&(pt=ht,Ue=be)}for(;vt.data!==qe;)if(wt=vt,!(vt=vt.next))return this;return(Et=vt.next)&&delete vt.next,wt?(Et?wt.next=Et:delete wt.next,this):ht?(Et?ht[be]=Et:delete ht[be],(vt=ht[0]||ht[1]||ht[2]||ht[3])&&vt===(ht[3]||ht[2]||ht[1]||ht[0])&&!vt.length&&(pt?pt[Ue]=vt:this._root=vt),this):(this._root=Et,this)}function u(qe){for(var ht=0,vt=qe.length;ht<vt;++ht)this.remove(qe[ht]);return this}function l(){return this._root}function m(){var qe=0;return this.visit(function(ht){if(!ht.length)do++qe;while(ht=ht.next)}),qe}function h(qe){var ht=[],vt,pt=this._root,wt,Et,nt,Fe,We;for(pt&&ht.push(new o(pt,this._x0,this._y0,this._x1,this._y1));vt=ht.pop();)if(!qe(pt=vt.node,Et=vt.x0,nt=vt.y0,Fe=vt.x1,We=vt.y1)&&pt.length){var Ze=(Et+Fe)/2,Ye=(nt+We)/2;(wt=pt[3])&&ht.push(new o(wt,Ze,Ye,Fe,We)),(wt=pt[2])&&ht.push(new o(wt,Et,Ye,Ze,We)),(wt=pt[1])&&ht.push(new o(wt,Ze,nt,Fe,Ye)),(wt=pt[0])&&ht.push(new o(wt,Et,nt,Ze,Ye))}return this}function w(qe){var ht=[],vt=[],pt;for(this._root&&ht.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));pt=ht.pop();){var wt=pt.node;if(wt.length){var Et,nt=pt.x0,Fe=pt.y0,We=pt.x1,Ze=pt.y1,Ye=(nt+We)/2,Ie=(Fe+Ze)/2;(Et=wt[0])&&ht.push(new o(Et,nt,Fe,Ye,Ie)),(Et=wt[1])&&ht.push(new o(Et,Ye,Fe,We,Ie)),(Et=wt[2])&&ht.push(new o(Et,nt,Ie,Ye,Ze)),(Et=wt[3])&&ht.push(new o(Et,Ye,Ie,We,Ze))}vt.push(pt)}for(;pt=vt.pop();)qe(pt.node,pt.x0,pt.y0,pt.x1,pt.y1);return this}function c(qe){return qe[0]}function a(qe){return arguments.length?(this._x=qe,this):this._x}function p(qe){return qe[1]}function x(qe){return arguments.length?(this._y=qe,this):this._y}function A(qe,ht,vt){var pt=new P(ht??c,vt??p,NaN,NaN,NaN,NaN);return qe==null?pt:pt.addAll(qe)}function P(qe,ht,vt,pt,wt,Et){this._x=qe,this._y=ht,this._x0=vt,this._y0=pt,this._x1=wt,this._y1=Et,this._root=void 0}function y(qe){for(var ht={data:qe.data},vt=ht;qe=qe.next;)vt=vt.next={data:qe.data};return ht}var C=A.prototype=P.prototype;C.copy=function(){var qe=new P(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ht=this._root,vt,pt;if(!ht)return qe;if(!ht.length)return qe._root=y(ht),qe;for(vt=[{source:ht,target:qe._root=new Array(4)}];ht=vt.pop();)for(var wt=0;wt<4;++wt)(pt=ht.source[wt])&&(pt.length?vt.push({source:pt,target:ht.target[wt]=new Array(4)}):ht.target[wt]=y(pt));return qe},C.add=E,C.addAll=v,C.cover=g,C.data=r,C.extent=t,C.find=i,C.remove=f,C.removeAll=u,C.root=l,C.size=m,C.visit=h,C.visitAfter=w,C.x=a,C.y=x;function M(qe){return qe.x+qe.vx}function s(qe){return qe.y+qe.vy}function _(qe){var ht,vt,pt=1,wt=1;typeof qe!="function"&&(qe=S(qe==null?1:+qe));function Et(){for(var We,Ze=ht.length,Ye,Ie,De,je,Re,pe,be=0;be<wt;++be)for(Ye=A(ht,M,s).visitAfter(nt),We=0;We<Ze;++We)Ie=ht[We],Re=vt[Ie.index],pe=Re*Re,De=Ie.x+Ie.vx,je=Ie.y+Ie.vy,Ye.visit(Ue);function Ue(et,st,lt,Gt,Zt){var Tt=et.data,It=et.r,Xt=Re+It;if(Tt){if(Tt.index>Ie.index){var gr=De-Tt.x-Tt.vx,gt=je-Tt.y-Tt.vy,jt=gr*gr+gt*gt;jt<Xt*Xt&&(gr===0&&(gr=n(),jt+=gr*gr),gt===0&&(gt=n(),jt+=gt*gt),jt=(Xt-(jt=Math.sqrt(jt)))/jt*pt,Ie.vx+=(gr*=jt)*(Xt=(It*=It)/(pe+It)),Ie.vy+=(gt*=jt)*Xt,Tt.vx-=gr*(Xt=1-Xt),Tt.vy-=gt*Xt)}return}return st>De+Xt||Gt<De-Xt||lt>je+Xt||Zt<je-Xt}}function nt(We){if(We.data)return We.r=vt[We.data.index];for(var Ze=We.r=0;Ze<4;++Ze)We[Ze]&&We[Ze].r>We.r&&(We.r=We[Ze].r)}function Fe(){if(ht){var We,Ze=ht.length,Ye;for(vt=new Array(Ze),We=0;We<Ze;++We)Ye=ht[We],vt[Ye.index]=+qe(Ye,We,ht)}}return Et.initialize=function(We){ht=We,Fe()},Et.iterations=function(We){return arguments.length?(wt=+We,Et):wt},Et.strength=function(We){return arguments.length?(pt=+We,Et):pt},Et.radius=function(We){return arguments.length?(qe=typeof We=="function"?We:S(+We),Fe(),Et):qe},Et}var b=e(34712);function k(qe){return qe.index}function D(qe,ht){var vt=qe.get(ht);if(!vt)throw new Error("missing: "+ht);return vt}function V(qe){var ht=k,vt=Ye,pt,wt=S(30),Et,nt,Fe,We,Ze=1;qe==null&&(qe=[]);function Ye(pe){return 1/Math.min(Fe[pe.source.index],Fe[pe.target.index])}function Ie(pe){for(var be=0,Ue=qe.length;be<Ze;++be)for(var et=0,st,lt,Gt,Zt,Tt,It,Xt;et<Ue;++et)st=qe[et],lt=st.source,Gt=st.target,Zt=Gt.x+Gt.vx-lt.x-lt.vx||n(),Tt=Gt.y+Gt.vy-lt.y-lt.vy||n(),It=Math.sqrt(Zt*Zt+Tt*Tt),It=(It-Et[et])/It*pe*pt[et],Zt*=It,Tt*=It,Gt.vx-=Zt*(Xt=We[et]),Gt.vy-=Tt*Xt,lt.vx+=Zt*(Xt=1-Xt),lt.vy+=Tt*Xt}function De(){if(nt){var pe,be=nt.length,Ue=qe.length,et=(0,b.kH)(nt,ht),st;for(pe=0,Fe=new Array(be);pe<Ue;++pe)st=qe[pe],st.index=pe,typeof st.source!="object"&&(st.source=D(et,st.source)),typeof st.target!="object"&&(st.target=D(et,st.target)),Fe[st.source.index]=(Fe[st.source.index]||0)+1,Fe[st.target.index]=(Fe[st.target.index]||0)+1;for(pe=0,We=new Array(Ue);pe<Ue;++pe)st=qe[pe],We[pe]=Fe[st.source.index]/(Fe[st.source.index]+Fe[st.target.index]);pt=new Array(Ue),je(),Et=new Array(Ue),Re()}}function je(){if(nt)for(var pe=0,be=qe.length;pe<be;++pe)pt[pe]=+vt(qe[pe],pe,qe)}function Re(){if(nt)for(var pe=0,be=qe.length;pe<be;++pe)Et[pe]=+wt(qe[pe],pe,qe)}return Ie.initialize=function(pe){nt=pe,De()},Ie.links=function(pe){return arguments.length?(qe=pe,De(),Ie):qe},Ie.id=function(pe){return arguments.length?(ht=pe,Ie):ht},Ie.iterations=function(pe){return arguments.length?(Ze=+pe,Ie):Ze},Ie.strength=function(pe){return arguments.length?(vt=typeof pe=="function"?pe:S(+pe),je(),Ie):vt},Ie.distance=function(pe){return arguments.length?(wt=typeof pe=="function"?pe:S(+pe),Re(),Ie):wt},Ie}var O={value:function(){}};function N(){for(var qe=0,ht=arguments.length,vt={},pt;qe<ht;++qe){if(!(pt=arguments[qe]+"")||pt in vt||/[\s.]/.test(pt))throw new Error("illegal type: "+pt);vt[pt]=[]}return new B(vt)}function B(qe){this._=qe}function z(qe,ht){return qe.trim().split(/^|\s+/).map(function(vt){var pt="",wt=vt.indexOf(".");if(wt>=0&&(pt=vt.slice(wt+1),vt=vt.slice(0,wt)),vt&&!ht.hasOwnProperty(vt))throw new Error("unknown type: "+vt);return{type:vt,name:pt}})}B.prototype=N.prototype={constructor:B,on:function(qe,ht){var vt=this._,pt=z(qe+"",vt),wt,Et=-1,nt=pt.length;if(arguments.length<2){for(;++Et<nt;)if((wt=(qe=pt[Et]).type)&&(wt=H(vt[wt],qe.name)))return wt;return}if(ht!=null&&typeof ht!="function")throw new Error("invalid callback: "+ht);for(;++Et<nt;)if(wt=(qe=pt[Et]).type)vt[wt]=X(vt[wt],qe.name,ht);else if(ht==null)for(wt in vt)vt[wt]=X(vt[wt],qe.name,null);return this},copy:function(){var qe={},ht=this._;for(var vt in ht)qe[vt]=ht[vt].slice();return new B(qe)},call:function(qe,ht){if((wt=arguments.length-2)>0)for(var vt=new Array(wt),pt=0,wt,Et;pt<wt;++pt)vt[pt]=arguments[pt+2];if(!this._.hasOwnProperty(qe))throw new Error("unknown type: "+qe);for(Et=this._[qe],pt=0,wt=Et.length;pt<wt;++pt)Et[pt].value.apply(ht,vt)},apply:function(qe,ht,vt){if(!this._.hasOwnProperty(qe))throw new Error("unknown type: "+qe);for(var pt=this._[qe],wt=0,Et=pt.length;wt<Et;++wt)pt[wt].value.apply(ht,vt)}};function H(qe,ht){for(var vt=0,pt=qe.length,wt;vt<pt;++vt)if((wt=qe[vt]).name===ht)return wt.value}function X(qe,ht,vt){for(var pt=0,wt=qe.length;pt<wt;++pt)if(qe[pt].name===ht){qe[pt]=O,qe=qe.slice(0,pt).concat(qe.slice(pt+1));break}return vt!=null&&qe.push({name:ht,value:vt}),qe}var $=N,ne=0,q=0,ue=0,te=1e3,J,ie,K=0,ee=0,le=0,j=typeof performance=="object"&&performance.now?performance:Date,Z=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(qe){setTimeout(qe,17)};function fe(){return ee||(Z(re),ee=j.now()+le)}function re(){ee=0}function ce(){this._call=this._time=this._next=null}ce.prototype=xe.prototype={constructor:ce,restart:function(qe,ht,vt){if(typeof qe!="function")throw new TypeError("callback is not a function");vt=(vt==null?fe():+vt)+(ht==null?0:+ht),!this._next&&ie!==this&&(ie?ie._next=this:J=this,ie=this),this._call=qe,this._time=vt,Ne()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ne())}};function xe(qe,ht,vt){var pt=new ce;return pt.restart(qe,ht,vt),pt}function Te(){fe(),++ne;for(var qe=J,ht;qe;)(ht=ee-qe._time)>=0&&qe._call.call(null,ht),qe=qe._next;--ne}function we(){ee=(K=j.now())+le,ne=q=0;try{Te()}finally{ne=0,ke(),ee=0}}function _e(){var qe=j.now(),ht=qe-K;ht>te&&(le-=ht,K=qe)}function ke(){for(var qe,ht=J,vt,pt=1/0;ht;)ht._call?(pt>ht._time&&(pt=ht._time),qe=ht,ht=ht._next):(vt=ht._next,ht._next=null,ht=qe?qe._next=vt:J=vt);ie=qe,Ne(pt)}function Ne(qe){if(!ne){q&&(q=clearTimeout(q));var ht=qe-ee;ht>24?(qe<1/0&&(q=setTimeout(we,qe-j.now()-le)),ue&&(ue=clearInterval(ue))):(ue||(K=j.now(),ue=setInterval(_e,te)),ne=1,Z(we))}}function Ee(qe){return qe.x}function ze(qe){return qe.y}var Ce=10,Oe=Math.PI*(3-Math.sqrt(5));function Le(qe){var ht,vt=1,pt=.001,wt=1-Math.pow(pt,1/300),Et=0,nt=.6,Fe=(0,b.kH)(),We=xe(Ye),Ze=$("tick","end");qe==null&&(qe=[]);function Ye(){Ie(),Ze.call("tick",ht),vt<pt&&(We.stop(),Ze.call("end",ht))}function Ie(Re){var pe,be=qe.length,Ue;Re===void 0&&(Re=1);for(var et=0;et<Re;++et)for(vt+=(Et-vt)*wt,Fe.each(function(st){st(vt)}),pe=0;pe<be;++pe)Ue=qe[pe],Ue.fx==null?Ue.x+=Ue.vx*=nt:(Ue.x=Ue.fx,Ue.vx=0),Ue.fy==null?Ue.y+=Ue.vy*=nt:(Ue.y=Ue.fy,Ue.vy=0);return ht}function De(){for(var Re=0,pe=qe.length,be;Re<pe;++Re){if(be=qe[Re],be.index=Re,be.fx!=null&&(be.x=be.fx),be.fy!=null&&(be.y=be.fy),isNaN(be.x)||isNaN(be.y)){var Ue=Ce*Math.sqrt(Re),et=Re*Oe;be.x=Ue*Math.cos(et),be.y=Ue*Math.sin(et)}(isNaN(be.vx)||isNaN(be.vy))&&(be.vx=be.vy=0)}}function je(Re){return Re.initialize&&Re.initialize(qe),Re}return De(),ht={tick:Ie,restart:function(){return We.restart(Ye),ht},stop:function(){return We.stop(),ht},nodes:function(Re){return arguments.length?(qe=Re,De(),Fe.each(je),ht):qe},alpha:function(Re){return arguments.length?(vt=+Re,ht):vt},alphaMin:function(Re){return arguments.length?(pt=+Re,ht):pt},alphaDecay:function(Re){return arguments.length?(wt=+Re,ht):+wt},alphaTarget:function(Re){return arguments.length?(Et=+Re,ht):Et},velocityDecay:function(Re){return arguments.length?(nt=1-Re,ht):1-nt},force:function(Re,pe){return arguments.length>1?(pe==null?Fe.remove(Re):Fe.set(Re,je(pe)),ht):Fe.get(Re)},find:function(Re,pe,be){var Ue=0,et=qe.length,st,lt,Gt,Zt,Tt;for(be==null?be=1/0:be*=be,Ue=0;Ue<et;++Ue)Zt=qe[Ue],st=Re-Zt.x,lt=pe-Zt.y,Gt=st*st+lt*lt,Gt<be&&(Tt=Zt,be=Gt);return Tt},on:function(Re,pe){return arguments.length>1?(Ze.on(Re,pe),ht):Ze.on(Re)}}}function Ge(){var qe,ht,vt,pt=S(-30),wt,Et=1,nt=1/0,Fe=.81;function We(De){var je,Re=qe.length,pe=A(qe,Ee,ze).visitAfter(Ye);for(vt=De,je=0;je<Re;++je)ht=qe[je],pe.visit(Ie)}function Ze(){if(qe){var De,je=qe.length,Re;for(wt=new Array(je),De=0;De<je;++De)Re=qe[De],wt[Re.index]=+pt(Re,De,qe)}}function Ye(De){var je=0,Re,pe,be=0,Ue,et,st;if(De.length){for(Ue=et=st=0;st<4;++st)(Re=De[st])&&(pe=Math.abs(Re.value))&&(je+=Re.value,be+=pe,Ue+=pe*Re.x,et+=pe*Re.y);De.x=Ue/be,De.y=et/be}else{Re=De,Re.x=Re.data.x,Re.y=Re.data.y;do je+=wt[Re.data.index];while(Re=Re.next)}De.value=je}function Ie(De,je,Re,pe){if(!De.value)return!0;var be=De.x-ht.x,Ue=De.y-ht.y,et=pe-je,st=be*be+Ue*Ue;if(et*et/Fe<st)return st<nt&&(be===0&&(be=n(),st+=be*be),Ue===0&&(Ue=n(),st+=Ue*Ue),st<Et&&(st=Math.sqrt(Et*st)),ht.vx+=be*De.value*vt/st,ht.vy+=Ue*De.value*vt/st),!0;if(De.length||st>=nt)return;(De.data!==ht||De.next)&&(be===0&&(be=n(),st+=be*be),Ue===0&&(Ue=n(),st+=Ue*Ue),st<Et&&(st=Math.sqrt(Et*st)));do De.data!==ht&&(et=wt[De.data.index]*vt/st,ht.vx+=be*et,ht.vy+=Ue*et);while(De=De.next)}return We.initialize=function(De){qe=De,Ze()},We.strength=function(De){return arguments.length?(pt=typeof De=="function"?De:S(+De),Ze(),We):pt},We.distanceMin=function(De){return arguments.length?(Et=De*De,We):Math.sqrt(Et)},We.distanceMax=function(De){return arguments.length?(nt=De*De,We):Math.sqrt(nt)},We.theta=function(De){return arguments.length?(Fe=De*De,We):Math.sqrt(Fe)},We}function rt(qe,ht,vt){var pt,wt=S(.1),Et,nt;typeof qe!="function"&&(qe=S(+qe)),ht==null&&(ht=0),vt==null&&(vt=0);function Fe(Ze){for(var Ye=0,Ie=pt.length;Ye<Ie;++Ye){var De=pt[Ye],je=De.x-ht||1e-6,Re=De.y-vt||1e-6,pe=Math.sqrt(je*je+Re*Re),be=(nt[Ye]-pe)*Et[Ye]*Ze/pe;De.vx+=je*be,De.vy+=Re*be}}function We(){if(pt){var Ze,Ye=pt.length;for(Et=new Array(Ye),nt=new Array(Ye),Ze=0;Ze<Ye;++Ze)nt[Ze]=+qe(pt[Ze],Ze,pt),Et[Ze]=isNaN(nt[Ze])?0:+wt(pt[Ze],Ze,pt)}}return Fe.initialize=function(Ze){pt=Ze,We()},Fe.strength=function(Ze){return arguments.length?(wt=typeof Ze=="function"?Ze:S(+Ze),We(),Fe):wt},Fe.radius=function(Ze){return arguments.length?(qe=typeof Ze=="function"?Ze:S(+Ze),We(),Fe):qe},Fe.x=function(Ze){return arguments.length?(ht=+Ze,Fe):ht},Fe.y=function(Ze){return arguments.length?(vt=+Ze,Fe):vt},Fe}function ot(qe){var ht=S(.1),vt,pt,wt;typeof qe!="function"&&(qe=S(qe==null?0:+qe));function Et(Fe){for(var We=0,Ze=vt.length,Ye;We<Ze;++We)Ye=vt[We],Ye.vx+=(wt[We]-Ye.x)*pt[We]*Fe}function nt(){if(vt){var Fe,We=vt.length;for(pt=new Array(We),wt=new Array(We),Fe=0;Fe<We;++Fe)pt[Fe]=isNaN(wt[Fe]=+qe(vt[Fe],Fe,vt))?0:+ht(vt[Fe],Fe,vt)}}return Et.initialize=function(Fe){vt=Fe,nt()},Et.strength=function(Fe){return arguments.length?(ht=typeof Fe=="function"?Fe:S(+Fe),nt(),Et):ht},Et.x=function(Fe){return arguments.length?(qe=typeof Fe=="function"?Fe:S(+Fe),nt(),Et):qe},Et}function $e(qe){var ht=S(.1),vt,pt,wt;typeof qe!="function"&&(qe=S(qe==null?0:+qe));function Et(Fe){for(var We=0,Ze=vt.length,Ye;We<Ze;++We)Ye=vt[We],Ye.vy+=(wt[We]-Ye.y)*pt[We]*Fe}function nt(){if(vt){var Fe,We=vt.length;for(pt=new Array(We),wt=new Array(We),Fe=0;Fe<We;++Fe)pt[Fe]=isNaN(wt[Fe]=+qe(vt[Fe],Fe,vt))?0:+ht(vt[Fe],Fe,vt)}}return Et.initialize=function(Fe){vt=Fe,nt()},Et.strength=function(Fe){return arguments.length?(ht=typeof Fe=="function"?Fe:S(+Fe),nt(),Et):ht},Et.y=function(Fe){return arguments.length?(qe=typeof Fe=="function"?Fe:S(+Fe),nt(),Et):qe},Et}},57624:function(U,F,e){e.d(F,{E9:function(){return a},SO:function(){return w}});function d(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)}function S(x,A){if((P=(x=A?x.toExponential(A-1):x.toExponential()).indexOf("e"))<0)return null;var P,y=x.slice(0,P);return[y.length>1?y[0]+y.slice(2):y,+x.slice(P+1)]}function n(x){return x=S(Math.abs(x)),x?x[1]:NaN}function E(x,A){return function(P,y){for(var C=P.length,M=[],s=0,_=x[0],b=0;C>0&&_>0&&(b+_+1>y&&(_=Math.max(1,y-b)),M.push(P.substring(C-=_,C+_)),!((b+=_+1)>y));)_=x[s=(s+1)%x.length];return M.reverse().join(A)}}function T(x){return function(A){return A.replace(/[0-9]/g,function(P){return x[+P]})}}var v=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function g(x){if(!(A=v.exec(x)))throw new Error("invalid format: "+x);var A;return new r({fill:A[1],align:A[2],sign:A[3],symbol:A[4],zero:A[5],width:A[6],comma:A[7],precision:A[8]&&A[8].slice(1),trim:A[9],type:A[10]})}g.prototype=r.prototype;function r(x){this.fill=x.fill===void 0?" ":x.fill+"",this.align=x.align===void 0?">":x.align+"",this.sign=x.sign===void 0?"-":x.sign+"",this.symbol=x.symbol===void 0?"":x.symbol+"",this.zero=!!x.zero,this.width=x.width===void 0?void 0:+x.width,this.comma=!!x.comma,this.precision=x.precision===void 0?void 0:+x.precision,this.trim=!!x.trim,this.type=x.type===void 0?"":x.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function t(x){e:for(var A=x.length,P=1,y=-1,C;P<A;++P)switch(x[P]){case".":y=C=P;break;case"0":y===0&&(y=P),C=P;break;default:if(!+x[P])break e;y>0&&(y=0);break}return y>0?x.slice(0,y)+x.slice(C+1):x}var o;function i(x,A){var P=S(x,A);if(!P)return x+"";var y=P[0],C=P[1],M=C-(o=Math.max(-8,Math.min(8,Math.floor(C/3)))*3)+1,s=y.length;return M===s?y:M>s?y+new Array(M-s+1).join("0"):M>0?y.slice(0,M)+"."+y.slice(M):"0."+new Array(1-M).join("0")+S(x,Math.max(0,A+M-1))[0]}function f(x,A){var P=S(x,A);if(!P)return x+"";var y=P[0],C=P[1];return C<0?"0."+new Array(-C).join("0")+y:y.length>C+1?y.slice(0,C+1)+"."+y.slice(C+1):y+new Array(C-y.length+2).join("0")}var u={"%":function(x,A){return(x*100).toFixed(A)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d,e:function(x,A){return x.toExponential(A)},f:function(x,A){return x.toFixed(A)},g:function(x,A){return x.toPrecision(A)},o:function(x){return Math.round(x).toString(8)},p:function(x,A){return f(x*100,A)},r:f,s:i,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function l(x){return x}var m=Array.prototype.map,h=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function w(x){var A=x.grouping===void 0||x.thousands===void 0?l:E(m.call(x.grouping,Number),x.thousands+""),P=x.currency===void 0?"":x.currency[0]+"",y=x.currency===void 0?"":x.currency[1]+"",C=x.decimal===void 0?".":x.decimal+"",M=x.numerals===void 0?l:T(m.call(x.numerals,String)),s=x.percent===void 0?"%":x.percent+"",_=x.minus===void 0?"-":x.minus+"",b=x.nan===void 0?"NaN":x.nan+"";function k(V){V=g(V);var O=V.fill,N=V.align,B=V.sign,z=V.symbol,H=V.zero,X=V.width,$=V.comma,ne=V.precision,q=V.trim,ue=V.type;ue==="n"?($=!0,ue="g"):u[ue]||(ne===void 0&&(ne=12),q=!0,ue="g"),(H||O==="0"&&N==="=")&&(H=!0,O="0",N="=");var te=z==="$"?P:z==="#"&&/[boxX]/.test(ue)?"0"+ue.toLowerCase():"",J=z==="$"?y:/[%p]/.test(ue)?s:"",ie=u[ue],K=/[defgprs%]/.test(ue);ne=ne===void 0?6:/[gprs]/.test(ue)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function ee(le){var j=te,Z=J,fe,re,ce;if(ue==="c")Z=ie(le)+Z,le="";else{le=+le;var xe=le<0||1/le<0;if(le=isNaN(le)?b:ie(Math.abs(le),ne),q&&(le=t(le)),xe&&+le==0&&B!=="+"&&(xe=!1),j=(xe?B==="("?B:_:B==="-"||B==="("?"":B)+j,Z=(ue==="s"?h[8+o/3]:"")+Z+(xe&&B==="("?")":""),K){for(fe=-1,re=le.length;++fe<re;)if(ce=le.charCodeAt(fe),48>ce||ce>57){Z=(ce===46?C+le.slice(fe+1):le.slice(fe))+Z,le=le.slice(0,fe);break}}}$&&!H&&(le=A(le,1/0));var Te=j.length+le.length+Z.length,we=Te<X?new Array(X-Te+1).join(O):"";switch($&&H&&(le=A(we+le,we.length?X-Z.length:1/0),we=""),N){case"<":le=j+le+Z+we;break;case"=":le=j+we+le+Z;break;case"^":le=we.slice(0,Te=we.length>>1)+j+le+Z+we.slice(Te);break;default:le=we+j+le+Z;break}return M(le)}return ee.toString=function(){return V+""},ee}function D(V,O){var N=k((V=g(V),V.type="f",V)),B=Math.max(-8,Math.min(8,Math.floor(n(O)/3)))*3,z=Math.pow(10,-B),H=h[8+B/3];return function(X){return N(z*X)+H}}return{format:k,formatPrefix:D}}var c,a;p({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function p(x){return c=w(x),a=c.format,c.formatPrefix,c}},87108:function(U,F,e){e.r(F),e.d(F,{geoAiry:function(){return H},geoAiryRaw:function(){return z},geoAitoff:function(){return $},geoAitoffRaw:function(){return X},geoArmadillo:function(){return q},geoArmadilloRaw:function(){return ne},geoAugust:function(){return te},geoAugustRaw:function(){return ue},geoBaker:function(){return ee},geoBakerRaw:function(){return K},geoBerghaus:function(){return Z},geoBerghausRaw:function(){return j},geoBertin1953:function(){return ke},geoBertin1953Raw:function(){return _e},geoBoggs:function(){return rt},geoBoggsRaw:function(){return Ge},geoBonne:function(){return vt},geoBonneRaw:function(){return ht},geoBottomley:function(){return wt},geoBottomleyRaw:function(){return pt},geoBromley:function(){return nt},geoBromleyRaw:function(){return Et},geoChamberlin:function(){return pe},geoChamberlinAfrica:function(){return Re},geoChamberlinRaw:function(){return De},geoCollignon:function(){return Ue},geoCollignonRaw:function(){return be},geoCraig:function(){return st},geoCraigRaw:function(){return et},geoCraster:function(){return Zt},geoCrasterRaw:function(){return Gt},geoCylindricalEqualArea:function(){return It},geoCylindricalEqualAreaRaw:function(){return Tt},geoCylindricalStereographic:function(){return gr},geoCylindricalStereographicRaw:function(){return Xt},geoEckert1:function(){return jt},geoEckert1Raw:function(){return gt},geoEckert2:function(){return mr},geoEckert2Raw:function(){return Qt},geoEckert3:function(){return mt},geoEckert3Raw:function(){return or},geoEckert4:function(){return bt},geoEckert4Raw:function(){return ut},geoEckert5:function(){return Pt},geoEckert5Raw:function(){return St},geoEckert6:function(){return Bt},geoEckert6Raw:function(){return Ht},geoEisenlohr:function(){return fr},geoEisenlohrRaw:function(){return Kt},geoFahey:function(){return Xe},geoFaheyRaw:function(){return dr},geoFoucaut:function(){return zt},geoFoucautRaw:function(){return He},geoFoucautSinusoidal:function(){return Jt},geoFoucautSinusoidalRaw:function(){return Rt},geoGilbert:function(){return ir},geoGingery:function(){return Vr},geoGingeryRaw:function(){return hr},geoGinzburg4:function(){return nn},geoGinzburg4Raw:function(){return Rr},geoGinzburg5:function(){return An},geoGinzburg5Raw:function(){return en},geoGinzburg6:function(){return Tr},geoGinzburg6Raw:function(){return wn},geoGinzburg8:function(){return Wr},geoGinzburg8Raw:function(){return kr},geoGinzburg9:function(){return sn},geoGinzburg9Raw:function(){return zr},geoGringorten:function(){return ai},geoGringortenQuincuncial:function(){return _h},geoGringortenRaw:function(){return Mn},geoGuyou:function(){return hn},geoGuyouRaw:function(){return yr},geoHammer:function(){return xe},geoHammerRaw:function(){return re},geoHammerRetroazimuthal:function(){return On},geoHammerRetroazimuthalRaw:function(){return xn},geoHealpix:function(){return ln},geoHealpixRaw:function(){return Ar},geoHill:function(){return Zr},geoHillRaw:function(){return Sr},geoHomolosine:function(){return Nn},geoHomolosineRaw:function(){return En},geoHufnagel:function(){return vi},geoHufnagelRaw:function(){return Fn},geoHyperelliptical:function(){return ma},geoHyperellipticalRaw:function(){return Li},geoInterrupt:function(){return ho},geoInterruptedBoggs:function(){return Mf},geoInterruptedHomolosine:function(){return ta},geoInterruptedMollweide:function(){return Ef},geoInterruptedMollweideHemispheres:function(){return Po},geoInterruptedQuarticAuthalic:function(){return Qs},geoInterruptedSinuMollweide:function(){return ju},geoInterruptedSinusoidal:function(){return Fl},geoKavrayskiy7:function(){return qa},geoKavrayskiy7Raw:function(){return ja},geoLagrange:function(){return vo},geoLagrangeRaw:function(){return Bl},geoLarrivee:function(){return uc},geoLarriveeRaw:function(){return Yo},geoLaskowski:function(){return ph},geoLaskowskiRaw:function(){return Bo},geoLittrow:function(){return so},geoLittrowRaw:function(){return Ms},geoLoximuthal:function(){return Js},geoLoximuthalRaw:function(){return Sf},geoMiller:function(){return Cf},geoMillerRaw:function(){return Es},geoModifiedStereographic:function(){return yl},geoModifiedStereographicAlaska:function(){return Lf},geoModifiedStereographicGs48:function(){return bh},geoModifiedStereographicGs50:function(){return wh},geoModifiedStereographicLee:function(){return hc},geoModifiedStereographicMiller:function(){return cc},geoModifiedStereographicRaw:function(){return fc},geoMollweide:function(){return Ce},geoMollweideRaw:function(){return ze},geoMtFlatPolarParabolic:function(){return vc},geoMtFlatPolarParabolicRaw:function(){return yu},geoMtFlatPolarQuartic:function(){return Th},geoMtFlatPolarQuarticRaw:function(){return Bs},geoMtFlatPolarSinusoidal:function(){return dc},geoMtFlatPolarSinusoidalRaw:function(){return Ju},geoNaturalEarth:function(){return pc.c},geoNaturalEarth2:function(){return os},geoNaturalEarth2Raw:function(){return Qu},geoNaturalEarthRaw:function(){return pc.g},geoNellHammer:function(){return ml},geoNellHammerRaw:function(){return Ul},geoNicolosi:function(){return _f},geoNicolosiRaw:function(){return Ss},geoPatterson:function(){return Wl},geoPattersonRaw:function(){return qu},geoPeirceQuincuncial:function(){return wc},geoPierceQuincuncial:function(){return wc},geoPolyconic:function(){return Mh},geoPolyconicRaw:function(){return ef},geoPolyhedral:function(){return xa},geoPolyhedralButterfly:function(){return bu},geoPolyhedralCollignon:function(){return bl},geoPolyhedralWaterman:function(){return qs},geoProject:function(){return Ch},geoQuantize:function(){return Tc},geoQuincuncial:function(){return Vs},geoRectangularPolyconic:function(){return Ac},geoRectangularPolyconicRaw:function(){return Of},geoRobinson:function(){return el},geoRobinsonRaw:function(){return hs},geoSatellite:function(){return wl},geoSatelliteRaw:function(){return af},geoSinuMollweide:function(){return kn},geoSinuMollweideRaw:function(){return bn},geoSinusoidal:function(){return qe},geoSinusoidalRaw:function(){return $e},geoStitch:function(){return Cu},geoTimes:function(){return eo},geoTimesRaw:function(){return nl},geoTwoPointAzimuthal:function(){return lf},geoTwoPointAzimuthalRaw:function(){return Bf},geoTwoPointAzimuthalUsa:function(){return Al},geoTwoPointEquidistant:function(){return Sc},geoTwoPointEquidistantRaw:function(){return Lu},geoTwoPointEquidistantUsa:function(){return Ph},geoVanDerGrinten:function(){return _u},geoVanDerGrinten2:function(){return Cc},geoVanDerGrinten2Raw:function(){return ql},geoVanDerGrinten3:function(){return Rh},geoVanDerGrinten3Raw:function(){return il},geoVanDerGrinten4:function(){return Pu},geoVanDerGrinten4Raw:function(){return Uo},geoVanDerGrintenRaw:function(){return Ao},geoWagner:function(){return al},geoWagner4:function(){return Lc},geoWagner4Raw:function(){return ff},geoWagner6:function(){return Uf},geoWagner6Raw:function(){return Du},geoWagner7:function(){return Nf},geoWagnerRaw:function(){return Ws},geoWiechel:function(){return Vf},geoWiechelRaw:function(){return Ml},geoWinkel3:function(){return _c},geoWinkel3Raw:function(){return ku}});var d=e(87952),S=Math.abs,n=Math.atan,E=Math.atan2,T=Math.cos,v=Math.exp,g=Math.floor,r=Math.log,t=Math.max,o=Math.min,i=Math.pow,f=Math.round,u=Math.sign||function(Je){return Je>0?1:Je<0?-1:0},l=Math.sin,m=Math.tan,h=1e-6,w=1e-12,c=Math.PI,a=c/2,p=c/4,x=Math.SQRT1_2,A=k(2),P=k(c),y=c*2,C=180/c,M=c/180;function s(Je){return Je?Je/Math.sin(Je):1}function _(Je){return Je>1?a:Je<-1?-a:Math.asin(Je)}function b(Je){return Je>1?0:Je<-1?c:Math.acos(Je)}function k(Je){return Je>0?Math.sqrt(Je):0}function D(Je){return Je=v(2*Je),(Je-1)/(Je+1)}function V(Je){return(v(Je)-v(-Je))/2}function O(Je){return(v(Je)+v(-Je))/2}function N(Je){return r(Je+k(Je*Je+1))}function B(Je){return r(Je+k(Je*Je-1))}function z(Je){var at=m(Je/2),yt=2*r(T(Je/2))/(at*at);function xt(kt,Dt){var Ot=T(kt),pr=T(Dt),wr=l(Dt),nr=pr*Ot,Mr=-((1-nr?r((1+nr)/2)/(1-nr):-.5)+yt/(1+nr));return[Mr*pr*l(kt),Mr*wr]}return xt.invert=function(kt,Dt){var Ot=k(kt*kt+Dt*Dt),pr=-Je/2,wr=50,nr;if(!Ot)return[0,0];do{var Mr=pr/2,Ir=T(Mr),Nr=l(Mr),an=Nr/Ir,mn=-r(S(Ir));pr-=nr=(2/an*mn-yt*an-Ot)/(-mn/(Nr*Nr)+1-yt/(2*Ir*Ir))*(Ir<0?.7:1)}while(S(nr)>h&&--wr>0);var _n=l(pr);return[E(kt*_n,Ot*T(pr)),_(Dt*_n/Ot)]},xt}function H(){var Je=a,at=(0,d.U)(z),yt=at(Je);return yt.radius=function(xt){return arguments.length?at(Je=xt*M):Je*C},yt.scale(179.976).clipAngle(147)}function X(Je,at){var yt=T(at),xt=s(b(yt*T(Je/=2)));return[2*yt*l(Je)*xt,l(at)*xt]}X.invert=function(Je,at){if(!(Je*Je+4*at*at>c*c+h)){var yt=Je,xt=at,kt=25;do{var Dt=l(yt),Ot=l(yt/2),pr=T(yt/2),wr=l(xt),nr=T(xt),Mr=l(2*xt),Ir=wr*wr,Nr=nr*nr,an=Ot*Ot,mn=1-Nr*pr*pr,_n=mn?b(nr*pr)*k(Rn=1/mn):Rn=0,Rn,Zn=2*_n*nr*Ot-Je,_i=_n*wr-at,Pi=Rn*(Nr*an+_n*nr*pr*Ir),Ii=Rn*(.5*Dt*Mr-_n*2*wr*Ot),zi=Rn*.25*(Mr*Ot-_n*wr*Nr*Dt),Zi=Rn*(Ir*pr+_n*an*nr),ya=Ii*zi-Zi*Pi;if(!ya)break;var Za=(_i*Ii-Zn*Zi)/ya,ve=(Zn*zi-_i*Pi)/ya;yt-=Za,xt-=ve}while((S(Za)>h||S(ve)>h)&&--kt>0);return[yt,xt]}};function $(){return(0,d.c)(X).scale(152.63)}function ne(Je){var at=l(Je),yt=T(Je),xt=Je>=0?1:-1,kt=m(xt*Je),Dt=(1+at-yt)/2;function Ot(pr,wr){var nr=T(wr),Mr=T(pr/=2);return[(1+nr)*l(pr),(xt*wr>-E(Mr,kt)-.001?0:-xt*10)+Dt+l(wr)*yt-(1+nr)*at*Mr]}return Ot.invert=function(pr,wr){var nr=0,Mr=0,Ir=50;do{var Nr=T(nr),an=l(nr),mn=T(Mr),_n=l(Mr),Rn=1+mn,Zn=Rn*an-pr,_i=Dt+_n*yt-Rn*at*Nr-wr,Pi=Rn*Nr/2,Ii=-an*_n,zi=at*Rn*an/2,Zi=yt*mn+at*Nr*_n,ya=Ii*zi-Zi*Pi,Za=(_i*Ii-Zn*Zi)/ya/2,ve=(Zn*zi-_i*Pi)/ya;S(ve)>2&&(ve/=2),nr-=Za,Mr-=ve}while((S(Za)>h||S(ve)>h)&&--Ir>0);return xt*Mr>-E(T(nr),kt)-.001?[nr*2,Mr]:null},Ot}function q(){var Je=20*M,at=Je>=0?1:-1,yt=m(at*Je),xt=(0,d.U)(ne),kt=xt(Je),Dt=kt.stream;return kt.parallel=function(Ot){return arguments.length?(yt=m((at=(Je=Ot*M)>=0?1:-1)*Je),xt(Je)):Je*C},kt.stream=function(Ot){var pr=kt.rotate(),wr=Dt(Ot),nr=(kt.rotate([0,0]),Dt(Ot)),Mr=kt.precision();return kt.rotate(pr),wr.sphere=function(){nr.polygonStart(),nr.lineStart();for(var Ir=at*-180;at*Ir<180;Ir+=at*90)nr.point(Ir,at*90);if(Je)for(;at*(Ir-=3*at*Mr)>=-180;)nr.point(Ir,at*-E(T(Ir*M/2),yt)*C);nr.lineEnd(),nr.polygonEnd()},wr},kt.scale(218.695).center([0,28.0974])}function ue(Je,at){var yt=m(at/2),xt=k(1-yt*yt),kt=1+xt*T(Je/=2),Dt=l(Je)*xt/kt,Ot=yt/kt,pr=Dt*Dt,wr=Ot*Ot;return[1.3333333333333333*Dt*(3+pr-3*wr),1.3333333333333333*Ot*(3+3*pr-wr)]}ue.invert=function(Je,at){if(Je*=.375,at*=.375,!Je&&S(at)>1)return null;var yt=Je*Je,xt=at*at,kt=1+yt+xt,Dt=k((kt-k(kt*kt-4*at*at))/2),Ot=_(Dt)/3,pr=Dt?B(S(at/Dt))/3:N(S(Je))/3,wr=T(Ot),nr=O(pr),Mr=nr*nr-wr*wr;return[u(Je)*2*E(V(pr)*wr,.25-Mr),u(at)*2*E(nr*l(Ot),.25+Mr)]};function te(){return(0,d.c)(ue).scale(66.1603)}var J=k(8),ie=r(1+A);function K(Je,at){var yt=S(at);return yt<p?[Je,r(m(p+at/2))]:[Je*T(yt)*(2*A-1/l(yt)),u(at)*(2*A*(yt-p)-r(m(yt/2)))]}K.invert=function(Je,at){if((Dt=S(at))<ie)return[Je,2*n(v(at))-a];var yt=p,xt=25,kt,Dt;do{var Ot=T(yt/2),pr=m(yt/2);yt-=kt=(J*(yt-p)-r(pr)-Dt)/(J-Ot*Ot/(2*pr))}while(S(kt)>w&&--xt>0);return[Je/(T(yt)*(J-1/l(yt))),u(at)*yt]};function ee(){return(0,d.c)(K).scale(112.314)}var le=e(69020);function j(Je){var at=2*c/Je;function yt(xt,kt){var Dt=(0,le.O)(xt,kt);if(S(xt)>a){var Ot=E(Dt[1],Dt[0]),pr=k(Dt[0]*Dt[0]+Dt[1]*Dt[1]),wr=at*f((Ot-a)/at)+a,nr=E(l(Ot-=wr),2-T(Ot));Ot=wr+_(c/pr*l(nr))-nr,Dt[0]=pr*T(Ot),Dt[1]=pr*l(Ot)}return Dt}return yt.invert=function(xt,kt){var Dt=k(xt*xt+kt*kt);if(Dt>a){var Ot=E(kt,xt),pr=at*f((Ot-a)/at)+a,wr=Ot>pr?-1:1,nr=Dt*T(pr-Ot),Mr=1/m(wr*b((nr-c)/k(c*(c-2*nr)+Dt*Dt)));Ot=pr+2*n((Mr+wr*k(Mr*Mr-3))/3),xt=Dt*T(Ot),kt=Dt*l(Ot)}return le.O.invert(xt,kt)},yt}function Z(){var Je=5,at=(0,d.U)(j),yt=at(Je),xt=yt.stream,kt=.01,Dt=-T(kt*M),Ot=l(kt*M);return yt.lobes=function(pr){return arguments.length?at(Je=+pr):Je},yt.stream=function(pr){var wr=yt.rotate(),nr=xt(pr),Mr=(yt.rotate([0,0]),xt(pr));return yt.rotate(wr),nr.sphere=function(){Mr.polygonStart(),Mr.lineStart();for(var Ir=0,Nr=360/Je,an=2*c/Je,mn=90-180/Je,_n=a;Ir<Je;++Ir,mn-=Nr,_n-=an)Mr.point(E(Ot*T(_n),Dt)*C,_(Ot*l(_n))*C),mn<-90?(Mr.point(-90,-180-mn-kt),Mr.point(-90,-180-mn+kt)):(Mr.point(90,mn+kt),Mr.point(90,mn-kt));Mr.lineEnd(),Mr.polygonEnd()},nr},yt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var fe=e(54724);function re(Je,at){if(arguments.length<2&&(at=Je),at===1)return fe.y;if(at===1/0)return ce;function yt(xt,kt){var Dt=(0,fe.y)(xt/at,kt);return Dt[0]*=Je,Dt}return yt.invert=function(xt,kt){var Dt=fe.y.invert(xt/Je,kt);return Dt[0]*=at,Dt},yt}function ce(Je,at){return[Je*T(at)/T(at/=2),2*l(at)]}ce.invert=function(Je,at){var yt=2*_(at/2);return[Je*T(yt/2)/T(yt),yt]};function xe(){var Je=2,at=(0,d.U)(re),yt=at(Je);return yt.coefficient=function(xt){return arguments.length?at(Je=+xt):Je},yt.scale(169.529)}function Te(Je,at,yt){var xt=100,kt,Dt,Ot;yt=yt===void 0?0:+yt,at=+at;do Dt=Je(yt),Ot=Je(yt+h),Dt===Ot&&(Ot=Dt+h),yt-=kt=-1*h*(Dt-at)/(Dt-Ot);while(xt-- >0&&S(kt)>h);return xt<0?NaN:yt}function we(Je,at,yt){return at===void 0&&(at=40),yt===void 0&&(yt=w),function(xt,kt,Dt,Ot){var pr,wr,nr;Dt=Dt===void 0?0:+Dt,Ot=Ot===void 0?0:+Ot;for(var Mr=0;Mr<at;Mr++){var Ir=Je(Dt,Ot),Nr=Ir[0]-xt,an=Ir[1]-kt;if(S(Nr)<yt&&S(an)<yt)break;var mn=Nr*Nr+an*an;if(mn>pr){Dt-=wr/=2,Ot-=nr/=2;continue}pr=mn;var _n=(Dt>0?-1:1)*yt,Rn=(Ot>0?-1:1)*yt,Zn=Je(Dt+_n,Ot),_i=Je(Dt,Ot+Rn),Pi=(Zn[0]-Ir[0])/_n,Ii=(Zn[1]-Ir[1])/_n,zi=(_i[0]-Ir[0])/Rn,Zi=(_i[1]-Ir[1])/Rn,ya=Zi*Pi-Ii*zi,Za=(S(ya)<.5?.5:1)/ya;if(wr=(an*zi-Nr*Zi)*Za,nr=(Nr*Ii-an*Pi)*Za,Dt+=wr,Ot+=nr,S(wr)<yt&&S(nr)<yt)break}return[Dt,Ot]}}function _e(){var Je=re(1.68,2),at=1.4,yt=12;function xt(kt,Dt){if(kt+Dt<-at){var Ot=(kt-Dt+1.6)*(kt+Dt+at)/8;kt+=Ot,Dt-=.8*Ot*l(Dt+c/2)}var pr=Je(kt,Dt),wr=(1-T(kt*Dt))/yt;return pr[1]<0&&(pr[0]*=1+wr),pr[1]>0&&(pr[1]*=1+wr/1.5*pr[0]*pr[0]),pr}return xt.invert=we(xt),xt}function ke(){return(0,d.c)(_e()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ne(Je,at){var yt=Je*l(at),xt=30,kt;do at-=kt=(at+l(at)-yt)/(1+T(at));while(S(kt)>h&&--xt>0);return at/2}function Ee(Je,at,yt){function xt(kt,Dt){return[Je*kt*T(Dt=Ne(yt,Dt)),at*l(Dt)]}return xt.invert=function(kt,Dt){return Dt=_(Dt/at),[kt/(Je*T(Dt)),_((2*Dt+l(2*Dt))/yt)]},xt}var ze=Ee(A/a,A,c);function Ce(){return(0,d.c)(ze).scale(169.529)}var Oe=2.00276,Le=1.11072;function Ge(Je,at){var yt=Ne(c,at);return[Oe*Je/(1/T(at)+Le/T(yt)),(at+A*l(yt))/Oe]}Ge.invert=function(Je,at){var yt=Oe*at,xt=at<0?-p:p,kt=25,Dt,Ot;do Ot=yt-A*l(xt),xt-=Dt=(l(2*xt)+2*xt-c*l(Ot))/(2*T(2*xt)+2+c*T(Ot)*A*T(xt));while(S(Dt)>h&&--kt>0);return Ot=yt-A*l(xt),[Je*(1/T(Ot)+Le/T(xt))/Oe,Ot]};function rt(){return(0,d.c)(Ge).scale(160.857)}function ot(Je){var at=0,yt=(0,d.U)(Je),xt=yt(at);return xt.parallel=function(kt){return arguments.length?yt(at=kt*M):at*C},xt}function $e(Je,at){return[Je*T(at),at]}$e.invert=function(Je,at){return[Je/T(at),at]};function qe(){return(0,d.c)($e).scale(152.63)}function ht(Je){if(!Je)return $e;var at=1/m(Je);function yt(xt,kt){var Dt=at+Je-kt,Ot=Dt&&xt*T(kt)/Dt;return[Dt*l(Ot),at-Dt*T(Ot)]}return yt.invert=function(xt,kt){var Dt=k(xt*xt+(kt=at-kt)*kt),Ot=at+Je-Dt;return[Dt/T(Ot)*E(xt,kt),Ot]},yt}function vt(){return ot(ht).scale(123.082).center([0,26.1441]).parallel(45)}function pt(Je){function at(yt,xt){var kt=a-xt,Dt=kt&&yt*Je*l(kt)/kt;return[kt*l(Dt)/Je,a-kt*T(Dt)]}return at.invert=function(yt,xt){var kt=yt*Je,Dt=a-xt,Ot=k(kt*kt+Dt*Dt),pr=E(kt,Dt);return[(Ot?Ot/l(Ot):1)*pr/Je,a-Ot]},at}function wt(){var Je=.5,at=(0,d.U)(pt),yt=at(Je);return yt.fraction=function(xt){return arguments.length?at(Je=+xt):Je},yt.scale(158.837)}var Et=Ee(1,4/c,c);function nt(){return(0,d.c)(Et).scale(152.63)}var Fe=e(24052),We=e(92992);function Ze(Je,at,yt,xt,kt,Dt){var Ot=T(Dt),pr;if(S(Je)>1||S(Dt)>1)pr=b(yt*kt+at*xt*Ot);else{var wr=l(Je/2),nr=l(Dt/2);pr=2*_(k(wr*wr+at*xt*nr*nr))}return S(pr)>h?[pr,E(xt*l(Dt),at*kt-yt*xt*Ot)]:[0,0]}function Ye(Je,at,yt){return b((Je*Je+at*at-yt*yt)/(2*Je*at))}function Ie(Je){return Je-2*c*g((Je+c)/(2*c))}function De(Je,at,yt){for(var xt=[[Je[0],Je[1],l(Je[1]),T(Je[1])],[at[0],at[1],l(at[1]),T(at[1])],[yt[0],yt[1],l(yt[1]),T(yt[1])]],kt=xt[2],Dt,Ot=0;Ot<3;++Ot,kt=Dt)Dt=xt[Ot],kt.v=Ze(Dt[1]-kt[1],kt[3],kt[2],Dt[3],Dt[2],Dt[0]-kt[0]),kt.point=[0,0];var pr=Ye(xt[0].v[0],xt[2].v[0],xt[1].v[0]),wr=Ye(xt[0].v[0],xt[1].v[0],xt[2].v[0]),nr=c-pr;xt[2].point[1]=0,xt[0].point[0]=-(xt[1].point[0]=xt[0].v[0]/2);var Mr=[xt[2].point[0]=xt[0].point[0]+xt[2].v[0]*T(pr),2*(xt[0].point[1]=xt[1].point[1]=xt[2].v[0]*l(pr))];function Ir(Nr,an){var mn=l(an),_n=T(an),Rn=new Array(3),Zn;for(Zn=0;Zn<3;++Zn){var _i=xt[Zn];if(Rn[Zn]=Ze(an-_i[1],_i[3],_i[2],_n,mn,Nr-_i[0]),!Rn[Zn][0])return _i.point;Rn[Zn][1]=Ie(Rn[Zn][1]-_i.v[1])}var Pi=Mr.slice();for(Zn=0;Zn<3;++Zn){var Ii=Zn==2?0:Zn+1,zi=Ye(xt[Zn].v[0],Rn[Zn][0],Rn[Ii][0]);Rn[Zn][1]<0&&(zi=-zi),Zn?Zn==1?(zi=wr-zi,Pi[0]-=Rn[Zn][0]*T(zi),Pi[1]-=Rn[Zn][0]*l(zi)):(zi=nr-zi,Pi[0]+=Rn[Zn][0]*T(zi),Pi[1]+=Rn[Zn][0]*l(zi)):(Pi[0]+=Rn[Zn][0]*T(zi),Pi[1]-=Rn[Zn][0]*l(zi))}return Pi[0]/=3,Pi[1]/=3,Pi}return Ir}function je(Je){return Je[0]*=M,Je[1]*=M,Je}function Re(){return pe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function pe(Je,at,yt){var xt=(0,Fe.c)({type:"MultiPoint",coordinates:[Je,at,yt]}),kt=[-xt[0],-xt[1]],Dt=(0,We.c)(kt),Ot=De(je(Dt(Je)),je(Dt(at)),je(Dt(yt)));Ot.invert=we(Ot);var pr=(0,d.c)(Ot).rotate(kt),wr=pr.center;return delete pr.rotate,pr.center=function(nr){return arguments.length?wr(Dt(nr)):Dt.invert(wr())},pr.clipAngle(90)}function be(Je,at){var yt=k(1-l(at));return[2/P*Je*yt,P*(1-yt)]}be.invert=function(Je,at){var yt=(yt=at/P-1)*yt;return[yt>0?Je*k(c/yt)/2:0,_(1-yt)]};function Ue(){return(0,d.c)(be).scale(95.6464).center([0,30])}function et(Je){var at=m(Je);function yt(xt,kt){return[xt,(xt?xt/l(xt):1)*(l(kt)*T(xt)-at*T(kt))]}return yt.invert=at?function(xt,kt){xt&&(kt*=l(xt)/xt);var Dt=T(xt);return[xt,2*E(k(Dt*Dt+at*at-kt*kt)-Dt,at-kt)]}:function(xt,kt){return[xt,_(xt?kt*m(xt)/xt:kt)]},yt}function st(){return ot(et).scale(249.828).clipAngle(90)}var lt=k(3);function Gt(Je,at){return[lt*Je*(2*T(2*at/3)-1)/P,lt*P*l(at/3)]}Gt.invert=function(Je,at){var yt=3*_(at/(lt*P));return[P*Je/(lt*(2*T(2*yt/3)-1)),yt]};function Zt(){return(0,d.c)(Gt).scale(156.19)}function Tt(Je){var at=T(Je);function yt(xt,kt){return[xt*at,l(kt)/at]}return yt.invert=function(xt,kt){return[xt/at,_(kt*at)]},yt}function It(){return ot(Tt).parallel(38.58).scale(195.044)}function Xt(Je){var at=T(Je);function yt(xt,kt){return[xt*at,(1+at)*m(kt/2)]}return yt.invert=function(xt,kt){return[xt/at,n(kt/(1+at))*2]},yt}function gr(){return ot(Xt).scale(124.75)}function gt(Je,at){var yt=k(8/(3*c));return[yt*Je*(1-S(at)/c),yt*at]}gt.invert=function(Je,at){var yt=k(8/(3*c)),xt=at/yt;return[Je/(yt*(1-S(xt)/c)),xt]};function jt(){return(0,d.c)(gt).scale(165.664)}function Qt(Je,at){var yt=k(4-3*l(S(at)));return[2/k(6*c)*Je*yt,u(at)*k(2*c/3)*(2-yt)]}Qt.invert=function(Je,at){var yt=2-S(at)/k(2*c/3);return[Je*k(6*c)/(2*yt),u(at)*_((4-yt*yt)/3)]};function mr(){return(0,d.c)(Qt).scale(165.664)}function or(Je,at){var yt=k(c*(4+c));return[2/yt*Je*(1+k(1-4*at*at/(c*c))),4/yt*at]}or.invert=function(Je,at){var yt=k(c*(4+c))/2;return[Je*yt/(1+k(1-at*at*(4+c)/(4*c))),at*yt/2]};function mt(){return(0,d.c)(or).scale(180.739)}function ut(Je,at){var yt=(2+a)*l(at);at/=2;for(var xt=0,kt=1/0;xt<10&&S(kt)>h;xt++){var Dt=T(at);at-=kt=(at+l(at)*(Dt+2)-yt)/(2*Dt*(1+Dt))}return[2/k(c*(4+c))*Je*(1+T(at)),2*k(c/(4+c))*l(at)]}ut.invert=function(Je,at){var yt=at*k((4+c)/c)/2,xt=_(yt),kt=T(xt);return[Je/(2/k(c*(4+c))*(1+kt)),_((xt+yt*(kt+2))/(2+a))]};function bt(){return(0,d.c)(ut).scale(180.739)}function St(Je,at){return[Je*(1+T(at))/k(2+c),2*at/k(2+c)]}St.invert=function(Je,at){var yt=k(2+c),xt=at*yt/2;return[yt*Je/(1+T(xt)),xt]};function Pt(){return(0,d.c)(St).scale(173.044)}function Ht(Je,at){for(var yt=(1+a)*l(at),xt=0,kt=1/0;xt<10&&S(kt)>h;xt++)at-=kt=(at+l(at)-yt)/(1+T(at));return yt=k(2+c),[Je*(1+T(at))/yt,2*at/yt]}Ht.invert=function(Je,at){var yt=1+a,xt=k(yt/2);return[Je*2*xt/(1+T(at*=xt)),_((at+l(at))/yt)]};function Bt(){return(0,d.c)(Ht).scale(173.044)}var Nt=3+2*A;function Kt(Je,at){var yt=l(Je/=2),xt=T(Je),kt=k(T(at)),Dt=T(at/=2),Ot=l(at)/(Dt+A*xt*kt),pr=k(2/(1+Ot*Ot)),wr=k((A*Dt+(xt+yt)*kt)/(A*Dt+(xt-yt)*kt));return[Nt*(pr*(wr-1/wr)-2*r(wr)),Nt*(pr*Ot*(wr+1/wr)-2*n(Ot))]}Kt.invert=function(Je,at){if(!(Dt=ue.invert(Je/1.2,at*1.065)))return null;var yt=Dt[0],xt=Dt[1],kt=20,Dt;Je/=Nt,at/=Nt;do{var Ot=yt/2,pr=xt/2,wr=l(Ot),nr=T(Ot),Mr=l(pr),Ir=T(pr),Nr=T(xt),an=k(Nr),mn=Mr/(Ir+A*nr*an),_n=mn*mn,Rn=k(2/(1+_n)),Zn=A*Ir+(nr+wr)*an,_i=A*Ir+(nr-wr)*an,Pi=Zn/_i,Ii=k(Pi),zi=Ii-1/Ii,Zi=Ii+1/Ii,ya=Rn*zi-2*r(Ii)-Je,Za=Rn*mn*Zi-2*n(mn)-at,ve=Mr&&x*an*wr*_n/Mr,Se=(A*nr*Ir+an)/(2*(Ir+A*nr*an)*(Ir+A*nr*an)*an),Ve=-.5*mn*Rn*Rn*Rn,tt=Ve*ve,it=Ve*Se,ct=(ct=2*Ir+A*an*(nr-wr))*ct*Ii,Lt=(A*nr*Ir*an+Nr)/ct,At=-(A*wr*Mr)/(an*ct),Vt=zi*tt-2*Lt/Ii+Rn*(Lt+Lt/Pi),Wt=zi*it-2*At/Ii+Rn*(At+At/Pi),tr=mn*Zi*tt-2*ve/(1+_n)+Rn*Zi*ve+Rn*mn*(Lt-Lt/Pi),Cr=mn*Zi*it-2*Se/(1+_n)+Rn*Zi*Se+Rn*mn*(At-At/Pi),Lr=Wt*tr-Cr*Vt;if(!Lr)break;var Qr=(Za*Wt-ya*Cr)/Lr,on=(ya*tr-Za*Vt)/Lr;yt-=Qr,xt=t(-a,o(a,xt-on))}while((S(Qr)>h||S(on)>h)&&--kt>0);return S(S(xt)-a)<h?[0,xt]:kt&&[yt,xt]};function fr(){return(0,d.c)(Kt).scale(62.5271)}var cr=T(35*M);function dr(Je,at){var yt=m(at/2);return[Je*cr*k(1-yt*yt),(1+cr)*yt]}dr.invert=function(Je,at){var yt=at/(1+cr);return[Je&&Je/(cr*k(1-yt*yt)),2*n(yt)]};function Xe(){return(0,d.c)(dr).scale(137.152)}function He(Je,at){var yt=at/2,xt=T(yt);return[2*Je/P*T(at)*xt*xt,P*m(yt)]}He.invert=function(Je,at){var yt=n(at/P),xt=T(yt),kt=2*yt;return[Je*P/2/(T(kt)*xt*xt),kt]};function zt(){return(0,d.c)(He).scale(135.264)}function Rt(Je){var at=1-Je,yt=Dt(c,0)[0]-Dt(-c,0)[0],xt=Dt(0,a)[1]-Dt(0,-a)[1],kt=k(2*xt/yt);function Dt(wr,nr){var Mr=T(nr),Ir=l(nr);return[Mr/(at+Je*Mr)*wr,at*nr+Je*Ir]}function Ot(wr,nr){var Mr=Dt(wr,nr);return[Mr[0]*kt,Mr[1]/kt]}function pr(wr){return Ot(0,wr)[1]}return Ot.invert=function(wr,nr){var Mr=Te(pr,nr),Ir=wr/kt*(Je+at/T(Mr));return[Ir,Mr]},Ot}function Jt(){var Je=.5,at=(0,d.U)(Rt),yt=at(Je);return yt.alpha=function(xt){return arguments.length?at(Je=+xt):Je},yt.scale(168.725)}var sr=e(4888),ur=e(69604);function er(Je){return[Je[0]/2,_(m(Je[1]/2*M))*C]}function Ft(Je){return[Je[0]*2,2*n(l(Je[1]*M))*C]}function ir(Je){Je==null&&(Je=sr.c);var at=Je(),yt=(0,ur.c)().scale(C).precision(0).clipAngle(null).translate([0,0]);function xt(Dt){return at(er(Dt))}at.invert&&(xt.invert=function(Dt){return Ft(at.invert(Dt))}),xt.stream=function(Dt){var Ot=at.stream(Dt),pr=yt.stream({point:function(wr,nr){Ot.point(wr/2,_(m(-nr/2*M))*C)},lineStart:function(){Ot.lineStart()},lineEnd:function(){Ot.lineEnd()},polygonStart:function(){Ot.polygonStart()},polygonEnd:function(){Ot.polygonEnd()}});return pr.sphere=Ot.sphere,pr};function kt(Dt){xt[Dt]=function(){return arguments.length?(at[Dt].apply(at,arguments),xt):at[Dt]()}}return xt.rotate=function(Dt){return arguments.length?(yt.rotate(Dt),xt):yt.rotate()},xt.center=function(Dt){return arguments.length?(at.center(er(Dt)),xt):Ft(at.center())},kt("angle"),kt("clipAngle"),kt("clipExtent"),kt("fitExtent"),kt("fitHeight"),kt("fitSize"),kt("fitWidth"),kt("scale"),kt("translate"),kt("precision"),xt.scale(249.5)}function hr(Je,at){var yt=2*c/at,xt=Je*Je;function kt(Dt,Ot){var pr=(0,le.O)(Dt,Ot),wr=pr[0],nr=pr[1],Mr=wr*wr+nr*nr;if(Mr>xt){var Ir=k(Mr),Nr=E(nr,wr),an=yt*f(Nr/yt),mn=Nr-an,_n=Je*T(mn),Rn=(Je*l(mn)-mn*l(_n))/(a-_n),Zn=xr(mn,Rn),_i=(c-Je)/vr(Zn,_n,c);wr=Ir;var Pi=50,Ii;do wr-=Ii=(Je+vr(Zn,_n,wr)*_i-Ir)/(Zn(wr)*_i);while(S(Ii)>h&&--Pi>0);nr=mn*l(wr),wr<a&&(nr-=Rn*(wr-a));var zi=l(an),Zi=T(an);pr[0]=wr*Zi-nr*zi,pr[1]=wr*zi+nr*Zi}return pr}return kt.invert=function(Dt,Ot){var pr=Dt*Dt+Ot*Ot;if(pr>xt){var wr=k(pr),nr=E(Ot,Dt),Mr=yt*f(nr/yt),Ir=nr-Mr;Dt=wr*T(Ir),Ot=wr*l(Ir);for(var Nr=Dt-a,an=l(Dt),mn=Ot/an,_n=Dt<a?1/0:0,Rn=10;;){var Zn=Je*l(mn),_i=Je*T(mn),Pi=l(_i),Ii=a-_i,zi=(Zn-mn*Pi)/Ii,Zi=xr(mn,zi);if(S(_n)<w||!--Rn)break;mn-=_n=(mn*an-zi*Nr-Ot)/(an-Nr*2*(Ii*(_i+mn*Zn*T(_i)-Pi)-Zn*(Zn-mn*Pi))/(Ii*Ii))}wr=Je+vr(Zi,_i,Dt)*(c-Je)/vr(Zi,_i,c),nr=Mr+mn,Dt=wr*T(nr),Ot=wr*l(nr)}return le.O.invert(Dt,Ot)},kt}function xr(Je,at){return function(yt){var xt=Je*T(yt);return yt<a&&(xt-=at),k(1+xt*xt)}}function vr(Je,at,yt){for(var xt=50,kt=(yt-at)/xt,Dt=Je(at)+Je(yt),Ot=1,pr=at;Ot<xt;++Ot)Dt+=2*Je(pr+=kt);return Dt*.5*kt}function Vr(){var Je=6,at=30*M,yt=T(at),xt=l(at),kt=(0,d.U)(hr),Dt=kt(at,Je),Ot=Dt.stream,pr=.01,wr=-T(pr*M),nr=l(pr*M);return Dt.radius=function(Mr){return arguments.length?(yt=T(at=Mr*M),xt=l(at),kt(at,Je)):at*C},Dt.lobes=function(Mr){return arguments.length?kt(at,Je=+Mr):Je},Dt.stream=function(Mr){var Ir=Dt.rotate(),Nr=Ot(Mr),an=(Dt.rotate([0,0]),Ot(Mr));return Dt.rotate(Ir),Nr.sphere=function(){an.polygonStart(),an.lineStart();for(var mn=0,_n=2*c/Je,Rn=0;mn<Je;++mn,Rn-=_n)an.point(E(nr*T(Rn),wr)*C,_(nr*l(Rn))*C),an.point(E(xt*T(Rn-_n/2),yt)*C,_(xt*l(Rn-_n/2))*C);an.lineEnd(),an.polygonEnd()},Nr},Dt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function _r(Je,at,yt,xt,kt,Dt,Ot,pr){arguments.length<8&&(pr=0);function wr(nr,Mr){if(!Mr)return[Je*nr/c,0];var Ir=Mr*Mr,Nr=Je+Ir*(at+Ir*(yt+Ir*xt)),an=Mr*(kt-1+Ir*(Dt-pr+Ir*Ot)),mn=(Nr*Nr+an*an)/(2*an),_n=nr*_(Nr/mn)/c;return[mn*l(_n),Mr*(1+Ir*pr)+mn*(1-T(_n))]}return wr.invert=function(nr,Mr){var Ir=c*nr/Je,Nr=Mr,an,mn,_n=50;do{var Rn=Nr*Nr,Zn=Je+Rn*(at+Rn*(yt+Rn*xt)),_i=Nr*(kt-1+Rn*(Dt-pr+Rn*Ot)),Pi=Zn*Zn+_i*_i,Ii=2*_i,zi=Pi/Ii,Zi=zi*zi,ya=_(Zn/zi)/c,Za=Ir*ya,ve=Zn*Zn,Se=(2*at+Rn*(4*yt+Rn*6*xt))*Nr,Ve=kt+Rn*(3*Dt+Rn*5*Ot),tt=2*(Zn*Se+_i*(Ve-1)),it=2*(Ve-1),ct=(tt*Ii-Pi*it)/(Ii*Ii),Lt=T(Za),At=l(Za),Vt=zi*Lt,Wt=zi*At,tr=Ir/c*(1/k(1-ve/Zi))*(Se*zi-Zn*ct)/Zi,Cr=Wt-nr,Lr=Nr*(1+Rn*pr)+zi-Vt-Mr,Qr=ct*At+Vt*tr,on=Vt*ya,Pr=1+ct-(ct*Lt-Wt*tr),Ur=Wt*ya,jr=Qr*Ur-Pr*on;if(!jr)break;Ir-=an=(Lr*Qr-Cr*Pr)/jr,Nr-=mn=(Cr*Ur-Lr*on)/jr}while((S(an)>h||S(mn)>h)&&--_n>0);return[Ir,Nr]},wr}var Rr=_r(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function nn(){return(0,d.c)(Rr).scale(149.995)}var en=_r(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function An(){return(0,d.c)(en).scale(153.93)}var wn=_r(5/6*c,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Tr(){return(0,d.c)(wn).scale(130.945)}function kr(Je,at){var yt=Je*Je,xt=at*at;return[Je*(1-.162388*xt)*(.87-952426e-9*yt*yt),at*(1+xt/12)]}kr.invert=function(Je,at){var yt=Je,xt=at,kt=50,Dt;do{var Ot=xt*xt;xt-=Dt=(xt*(1+Ot/12)-at)/(1+Ot/4)}while(S(Dt)>h&&--kt>0);kt=50,Je/=1-.162388*Ot;do{var pr=(pr=yt*yt)*pr;yt-=Dt=(yt*(.87-952426e-9*pr)-Je)/(.87-.00476213*pr)}while(S(Dt)>h&&--kt>0);return[yt,xt]};function Wr(){return(0,d.c)(kr).scale(131.747)}var zr=_r(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function sn(){return(0,d.c)(zr).scale(131.087)}function un(Je){var at=Je(a,0)[0]-Je(-a,0)[0];function yt(xt,kt){var Dt=xt>0?-.5:.5,Ot=Je(xt+Dt*c,kt);return Ot[0]-=Dt*at,Ot}return Je.invert&&(yt.invert=function(xt,kt){var Dt=xt>0?-.5:.5,Ot=Je.invert(xt+Dt*at,kt),pr=Ot[0]-Dt*c;return pr<-c?pr+=2*c:pr>c&&(pr-=2*c),Ot[0]=pr,Ot}),yt}function Mn(Je,at){var yt=u(Je),xt=u(at),kt=T(at),Dt=T(Je)*kt,Ot=l(Je)*kt,pr=l(xt*at);Je=S(E(Ot,pr)),at=_(Dt),S(Je-a)>h&&(Je%=a);var wr=Ln(Je>c/4?a-Je:Je,at);return Je>c/4&&(pr=wr[0],wr[0]=-wr[1],wr[1]=-pr),wr[0]*=yt,wr[1]*=-xt,wr}Mn.invert=function(Je,at){S(Je)>1&&(Je=u(Je)*2-Je),S(at)>1&&(at=u(at)*2-at);var yt=u(Je),xt=u(at),kt=-yt*Je,Dt=-xt*at,Ot=Dt/kt<1,pr=Un(Ot?Dt:kt,Ot?kt:Dt),wr=pr[0],nr=pr[1],Mr=T(nr);return Ot&&(wr=-a-wr),[yt*(E(l(wr)*Mr,-l(nr))+c),xt*_(T(wr)*Mr)]};function Ln(Je,at){if(at===a)return[0,0];var yt=l(at),xt=yt*yt,kt=xt*xt,Dt=1+kt,Ot=1+3*kt,pr=1-kt,wr=_(1/k(Dt)),nr=pr+xt*Dt*wr,Mr=(1-yt)/nr,Ir=k(Mr),Nr=Mr*Dt,an=k(Nr),mn=Ir*pr,_n,Rn;if(Je===0)return[0,-(mn+xt*an)];var Zn=T(at),_i=1/Zn,Pi=2*yt*Zn,Ii=(-3*xt+wr*Ot)*Pi,zi=(-nr*Zn-(1-yt)*Ii)/(nr*nr),Zi=.5*zi/Ir,ya=pr*Zi-2*xt*Ir*Pi,Za=xt*Dt*zi+Mr*Ot*Pi,ve=-_i*Pi,Se=-_i*Za,Ve=-2*_i*ya,tt=4*Je/c,it;if(Je>.222*c||at<c/4&&Je>.175*c){if(_n=(mn+xt*k(Nr*(1+kt)-mn*mn))/(1+kt),Je>c/4)return[_n,_n];var ct=_n,Lt=.5*_n;_n=.5*(Lt+ct),Rn=50;do{var At=k(Nr-_n*_n),Vt=_n*(Ve+ve*At)+Se*_(_n/an)-tt;if(!Vt)break;Vt<0?Lt=_n:ct=_n,_n=.5*(Lt+ct)}while(S(ct-Lt)>h&&--Rn>0)}else{_n=h,Rn=25;do{var Wt=_n*_n,tr=k(Nr-Wt),Cr=Ve+ve*tr,Lr=_n*Cr+Se*_(_n/an)-tt,Qr=Cr+(Se-ve*Wt)/tr;_n-=it=tr?Lr/Qr:0}while(S(it)>h&&--Rn>0)}return[_n,-mn-xt*k(Nr-_n*_n)]}function Un(Je,at){for(var yt=0,xt=1,kt=.5,Dt=50;;){var Ot=kt*kt,pr=k(kt),wr=_(1/k(1+Ot)),nr=1-Ot+kt*(1+Ot)*wr,Mr=(1-pr)/nr,Ir=k(Mr),Nr=Mr*(1+Ot),an=Ir*(1-Ot),mn=Nr-Je*Je,_n=k(mn),Rn=at+an+kt*_n;if(S(xt-yt)<w||--Dt===0||Rn===0)break;Rn>0?yt=kt:xt=kt,kt=.5*(yt+xt)}if(!Dt)return null;var Zn=_(pr),_i=T(Zn),Pi=1/_i,Ii=2*pr*_i,zi=(-3*kt+wr*(1+3*Ot))*Ii,Zi=(-nr*_i-(1-pr)*zi)/(nr*nr),ya=.5*Zi/Ir,Za=(1-Ot)*ya-2*kt*Ir*Ii,ve=-2*Pi*Za,Se=-Pi*Ii,Ve=-Pi*(kt*(1+Ot)*Zi+Mr*(1+3*Ot)*Ii);return[c/4*(Je*(ve+Se*_n)+Ve*_(Je/k(Nr))),Zn]}function ai(){return(0,d.c)(un(Mn)).scale(239.75)}function yi(Je,at,yt){var xt,kt,Dt;return Je?(xt=bi(Je,yt),at?(kt=bi(at,1-yt),Dt=kt[1]*kt[1]+yt*xt[0]*xt[0]*kt[0]*kt[0],[[xt[0]*kt[2]/Dt,xt[1]*xt[2]*kt[0]*kt[1]/Dt],[xt[1]*kt[1]/Dt,-xt[0]*xt[2]*kt[0]*kt[2]/Dt],[xt[2]*kt[1]*kt[2]/Dt,-yt*xt[0]*xt[1]*kt[0]/Dt]]):[[xt[0],0],[xt[1],0],[xt[2],0]]):(kt=bi(at,1-yt),[[0,kt[0]/kt[1]],[1/kt[1],0],[kt[2]/kt[1],0]])}function bi(Je,at){var yt,xt,kt,Dt,Ot;if(at<h)return Dt=l(Je),xt=T(Je),yt=at*(Je-Dt*xt)/4,[Dt-yt*xt,xt+yt*Dt,1-at*Dt*Dt/2,Je-yt];if(at>=1-h)return yt=(1-at)/4,xt=O(Je),Dt=D(Je),kt=1/xt,Ot=xt*V(Je),[Dt+yt*(Ot-Je)/(xt*xt),kt-yt*Dt*kt*(Ot-Je),kt+yt*Dt*kt*(Ot+Je),2*n(v(Je))-a+yt*(Ot-Je)/xt];var pr=[1,0,0,0,0,0,0,0,0],wr=[k(at),0,0,0,0,0,0,0,0],nr=0;for(xt=k(1-at),Ot=1;S(wr[nr]/pr[nr])>h&&nr<8;)yt=pr[nr++],wr[nr]=(yt-xt)/2,pr[nr]=(yt+xt)/2,xt=k(yt*xt),Ot*=2;kt=Ot*pr[nr]*Je;do Dt=wr[nr]*l(xt=kt)/pr[nr],kt=(_(Dt)+kt)/2;while(--nr);return[l(kt),Dt=T(kt),Dt/T(kt-xt),kt]}function Hn(Je,at,yt){var xt=S(Je),kt=S(at),Dt=V(kt);if(xt){var Ot=1/l(xt),pr=1/(m(xt)*m(xt)),wr=-(pr+yt*(Dt*Dt*Ot*Ot)-1+yt),nr=(yt-1)*pr,Mr=(-wr+k(wr*wr-4*nr))/2;return[Kn(n(1/k(Mr)),yt)*u(Je),Kn(n(k((Mr/pr-1)/yt)),1-yt)*u(at)]}return[0,Kn(n(Dt),1-yt)*u(at)]}function Kn(Je,at){if(!at)return Je;if(at===1)return r(m(Je/2+p));for(var yt=1,xt=k(1-at),kt=k(at),Dt=0;S(kt)>h;Dt++){if(Je%c){var Ot=n(xt*m(Je)/yt);Ot<0&&(Ot+=c),Je+=Ot+~~(Je/c)*c}else Je+=Je;kt=(yt+xt)/2,xt=k(yt*xt),kt=((yt=kt)-xt)/2}return Je/(i(2,Dt)*yt)}function yr(Je,at){var yt=(A-1)/(A+1),xt=k(1-yt*yt),kt=Kn(a,xt*xt),Dt=-1,Ot=r(m(c/4+S(at)/2)),pr=v(Dt*Ot)/k(yt),wr=qr(pr*T(Dt*Je),pr*l(Dt*Je)),nr=Hn(wr[0],wr[1],xt*xt);return[-nr[1],(at>=0?1:-1)*(.5*kt-nr[0])]}function qr(Je,at){var yt=Je*Je,xt=at+1,kt=1-yt-at*at;return[.5*((Je>=0?a:-a)-E(kt,2*Je)),-.25*r(kt*kt+4*yt)+.5*r(xt*xt+yt)]}function Kr(Je,at){var yt=at[0]*at[0]+at[1]*at[1];return[(Je[0]*at[0]+Je[1]*at[1])/yt,(Je[1]*at[0]-Je[0]*at[1])/yt]}yr.invert=function(Je,at){var yt=(A-1)/(A+1),xt=k(1-yt*yt),kt=Kn(a,xt*xt),Dt=-1,Ot=yi(.5*kt-at,-Je,xt*xt),pr=Kr(Ot[0],Ot[1]),wr=E(pr[1],pr[0])/Dt;return[wr,2*n(v(.5/Dt*r(yt*pr[0]*pr[0]+yt*pr[1]*pr[1])))-a]};function hn(){return(0,d.c)(un(yr)).scale(151.496)}var zn=e(61780);function xn(Je){var at=l(Je),yt=T(Je),xt=Tn(Je);xt.invert=Tn(-Je);function kt(Dt,Ot){var pr=xt(Dt,Ot);Dt=pr[0],Ot=pr[1];var wr=l(Ot),nr=T(Ot),Mr=T(Dt),Ir=b(at*wr+yt*nr*Mr),Nr=l(Ir),an=S(Nr)>h?Ir/Nr:1;return[an*yt*l(Dt),(S(Dt)>a?an:-an)*(at*nr-yt*wr*Mr)]}return kt.invert=function(Dt,Ot){var pr=k(Dt*Dt+Ot*Ot),wr=-l(pr),nr=T(pr),Mr=pr*nr,Ir=-Ot*wr,Nr=pr*at,an=k(Mr*Mr+Ir*Ir-Nr*Nr),mn=E(Mr*Nr+Ir*an,Ir*Nr-Mr*an),_n=(pr>a?-1:1)*E(Dt*wr,pr*T(mn)*nr+Ot*l(mn)*wr);return xt.invert(_n,mn)},kt}function Tn(Je){var at=l(Je),yt=T(Je);return function(xt,kt){var Dt=T(kt),Ot=T(xt)*Dt,pr=l(xt)*Dt,wr=l(kt);return[E(pr,Ot*yt-wr*at),_(wr*yt+Ot*at)]}}function On(){var Je=0,at=(0,d.U)(xn),yt=at(Je),xt=yt.rotate,kt=yt.stream,Dt=(0,zn.c)();return yt.parallel=function(Ot){if(!arguments.length)return Je*C;var pr=yt.rotate();return at(Je=Ot*M).rotate(pr)},yt.rotate=function(Ot){return arguments.length?(xt.call(yt,[Ot[0],Ot[1]-Je*C]),Dt.center([-Ot[0],-Ot[1]]),yt):(Ot=xt.call(yt),Ot[1]+=Je*C,Ot)},yt.stream=function(Ot){return Ot=kt(Ot),Ot.sphere=function(){Ot.polygonStart();var pr=.01,wr=Dt.radius(90-pr)().coordinates[0],nr=wr.length-1,Mr=-1,Ir;for(Ot.lineStart();++Mr<nr;)Ot.point((Ir=wr[Mr])[0],Ir[1]);for(Ot.lineEnd(),wr=Dt.radius(90+pr)().coordinates[0],nr=wr.length-1,Ot.lineStart();--Mr>=0;)Ot.point((Ir=wr[Mr])[0],Ir[1]);Ot.lineEnd(),Ot.polygonEnd()},Ot},yt.scale(79.4187).parallel(45).clipAngle(179.999)}var Jn=e(84706),hi=e(16016),Ri=3,Er=_(1-1/Ri)*C,Or=Tt(0);function Ar(Je){var at=Er*M,yt=be(c,at)[0]-be(-c,at)[0],xt=Or(0,at)[1],kt=be(0,at)[1],Dt=P-kt,Ot=y/Je,pr=4/y,wr=xt+Dt*Dt*4/y;function nr(Mr,Ir){var Nr,an=S(Ir);if(an>at){var mn=o(Je-1,t(0,g((Mr+c)/Ot)));Mr+=c*(Je-1)/Je-mn*Ot,Nr=be(Mr,an),Nr[0]=Nr[0]*y/yt-y*(Je-1)/(2*Je)+mn*y/Je,Nr[1]=xt+(Nr[1]-kt)*4*Dt/y,Ir<0&&(Nr[1]=-Nr[1])}else Nr=Or(Mr,Ir);return Nr[0]*=pr,Nr[1]/=wr,Nr}return nr.invert=function(Mr,Ir){Mr/=pr,Ir*=wr;var Nr=S(Ir);if(Nr>xt){var an=o(Je-1,t(0,g((Mr+c)/Ot)));Mr=(Mr+c*(Je-1)/Je-an*Ot)*yt/y;var mn=be.invert(Mr,.25*(Nr-xt)*y/Dt+kt);return mn[0]-=c*(Je-1)/Je-an*Ot,Ir<0&&(mn[1]=-mn[1]),mn}return Or.invert(Mr,Ir)},nr}function Fr(Je,at){return[Je,at&1?90-h:Er]}function yn(Je,at){return[Je,at&1?-90+h:-Er]}function Pn(Je){return[Je[0]*(1-h),Je[1]]}function pn(Je){var at=[].concat((0,Jn.ik)(-180,180+Je/2,Je).map(Fr),(0,Jn.ik)(180,-180-Je/2,-Je).map(yn));return{type:"Polygon",coordinates:[Je===180?at.map(Pn):at]}}function ln(){var Je=4,at=(0,d.U)(Ar),yt=at(Je),xt=yt.stream;return yt.lobes=function(kt){return arguments.length?at(Je=+kt):Je},yt.stream=function(kt){var Dt=yt.rotate(),Ot=xt(kt),pr=(yt.rotate([0,0]),xt(kt));return yt.rotate(Dt),Ot.sphere=function(){(0,hi.c)(pn(180/Je),pr)},Ot},yt.scale(239.75)}function Sr(Je){var at=1+Je,yt=l(1/at),xt=_(yt),kt=2*k(c/(Dt=c+4*xt*at)),Dt,Ot=.5*kt*(at+k(Je*(2+Je))),pr=Je*Je,wr=at*at;function nr(Mr,Ir){var Nr=1-l(Ir),an,mn;if(Nr&&Nr<2){var _n=a-Ir,Rn=25,Zn;do{var _i=l(_n),Pi=T(_n),Ii=xt+E(_i,at-Pi),zi=1+wr-2*at*Pi;_n-=Zn=(_n-pr*xt-at*_i+zi*Ii-.5*Nr*Dt)/(2*at*_i*Ii)}while(S(Zn)>w&&--Rn>0);an=kt*k(zi),mn=Mr*Ii/c}else an=kt*(Je+Nr),mn=Mr*xt/c;return[an*l(mn),Ot-an*T(mn)]}return nr.invert=function(Mr,Ir){var Nr=Mr*Mr+(Ir-=Ot)*Ir,an=(1+wr-Nr/(kt*kt))/(2*at),mn=b(an),_n=l(mn),Rn=xt+E(_n,at-an);return[_(Mr/k(Nr))*c/Rn,_(1-2*(mn-pr*xt-at*_n+(1+wr-2*at*an)*Rn)/Dt)]},nr}function Zr(){var Je=1,at=(0,d.U)(Sr),yt=at(Je);return yt.ratio=function(xt){return arguments.length?at(Je=+xt):Je},yt.scale(167.774).center([0,18.67])}var Hr=.7109889596207567,$r=.0528035274542;function bn(Je,at){return at>-Hr?(Je=ze(Je,at),Je[1]+=$r,Je):$e(Je,at)}bn.invert=function(Je,at){return at>-Hr?ze.invert(Je,at-$r):$e.invert(Je,at)};function kn(){return(0,d.c)(bn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function En(Je,at){return S(at)>Hr?(Je=ze(Je,at),Je[1]-=at>0?$r:-$r,Je):$e(Je,at)}En.invert=function(Je,at){return S(at)>Hr?ze.invert(Je,at+(at>0?$r:-$r)):$e.invert(Je,at)};function Nn(){return(0,d.c)(En).scale(152.63)}function Fn(Je,at,yt,xt){var kt=k(4*c/(2*yt+(1+Je-at/2)*l(2*yt)+(Je+at)/2*l(4*yt)+at/2*l(6*yt))),Dt=k(xt*l(yt)*k((1+Je*T(2*yt)+at*T(4*yt))/(1+Je+at))),Ot=yt*wr(1);function pr(Ir){return k(1+Je*T(2*Ir)+at*T(4*Ir))}function wr(Ir){var Nr=Ir*yt;return(2*Nr+(1+Je-at/2)*l(2*Nr)+(Je+at)/2*l(4*Nr)+at/2*l(6*Nr))/yt}function nr(Ir){return pr(Ir)*l(Ir)}var Mr=function(Ir,Nr){var an=yt*Te(wr,Ot*l(Nr)/yt,Nr/c);isNaN(an)&&(an=yt*u(Nr));var mn=kt*pr(an);return[mn*Dt*Ir/c*T(an),mn/Dt*l(an)]};return Mr.invert=function(Ir,Nr){var an=Te(nr,Nr*Dt/kt);return[Ir*c/(T(an)*kt*Dt*pr(an)),_(yt*wr(an/yt)/Ot)]},yt===0&&(kt=k(xt/c),Mr=function(Ir,Nr){return[Ir*kt,l(Nr)/kt]},Mr.invert=function(Ir,Nr){return[Ir/kt,_(Nr*kt)]}),Mr}function vi(){var Je=1,at=0,yt=45*M,xt=2,kt=(0,d.U)(Fn),Dt=kt(Je,at,yt,xt);return Dt.a=function(Ot){return arguments.length?kt(Je=+Ot,at,yt,xt):Je},Dt.b=function(Ot){return arguments.length?kt(Je,at=+Ot,yt,xt):at},Dt.psiMax=function(Ot){return arguments.length?kt(Je,at,yt=+Ot*M,xt):yt*C},Dt.ratio=function(Ot){return arguments.length?kt(Je,at,yt,xt=+Ot):xt},Dt.scale(180.739)}function si(Je,at,yt,xt,kt,Dt,Ot,pr,wr,nr,Mr){if(Mr.nanEncountered)return NaN;var Ir,Nr,an,mn,_n,Rn,Zn,_i,Pi,Ii;if(Ir=yt-at,Nr=Je(at+Ir*.25),an=Je(yt-Ir*.25),isNaN(Nr)){Mr.nanEncountered=!0;return}if(isNaN(an)){Mr.nanEncountered=!0;return}return mn=Ir*(xt+4*Nr+kt)/12,_n=Ir*(kt+4*an+Dt)/12,Rn=mn+_n,Ii=(Rn-Ot)/15,nr>wr?(Mr.maxDepthCount++,Rn+Ii):Math.abs(Ii)<pr?Rn+Ii:(Zn=at+Ir*.5,_i=si(Je,at,Zn,xt,Nr,kt,mn,pr*.5,wr,nr+1,Mr),isNaN(_i)?(Mr.nanEncountered=!0,NaN):(Pi=si(Je,Zn,yt,kt,an,Dt,_n,pr*.5,wr,nr+1,Mr),isNaN(Pi)?(Mr.nanEncountered=!0,NaN):_i+Pi))}function gi(Je,at,yt,xt,kt){var Dt={maxDepthCount:0,nanEncountered:!1};kt===void 0&&(kt=20);var Ot=Je(at),pr=Je(.5*(at+yt)),wr=Je(yt),nr=(Ot+4*pr+wr)*(yt-at)/6,Mr=si(Je,at,yt,Ot,pr,wr,nr,xt,kt,1,Dt);return Mr}function Li(Je,at,yt){function xt(an){return Je+(1-Je)*i(1-i(an,at),1/at)}function kt(an){return gi(xt,0,an,1e-4)}for(var Dt=1/kt(1),Ot=1e3,pr=(1+1e-8)*Dt,wr=[],nr=0;nr<=Ot;nr++)wr.push(kt(nr/Ot)*pr);function Mr(an){var mn=0,_n=Ot,Rn=Ot>>1;do wr[Rn]>an?_n=Rn:mn=Rn,Rn=mn+_n>>1;while(Rn>mn);var Zn=wr[Rn+1]-wr[Rn];return Zn&&(Zn=(an-wr[Rn+1])/Zn),(Rn+1+Zn)/Ot}var Ir=2*Mr(1)/c*Dt/yt,Nr=function(an,mn){var _n=Mr(S(l(mn))),Rn=xt(_n)*an;return _n/=Ir,[Rn,mn>=0?_n:-_n]};return Nr.invert=function(an,mn){var _n;return mn*=Ir,S(mn)<1&&(_n=u(mn)*_(kt(S(mn))*Dt)),[an/xt(S(mn)),_n]},Nr}function ma(){var Je=0,at=2.5,yt=1.183136,xt=(0,d.U)(Li),kt=xt(Je,at,yt);return kt.alpha=function(Dt){return arguments.length?xt(Je=+Dt,at,yt):Je},kt.k=function(Dt){return arguments.length?xt(Je,at=+Dt,yt):at},kt.gamma=function(Dt){return arguments.length?xt(Je,at,yt=+Dt):yt},kt.scale(152.63)}function ia(Je,at){return S(Je[0]-at[0])<h&&S(Je[1]-at[1])<h}function Wo(Je,at){for(var yt=-1,xt=Je.length,kt=Je[0],Dt,Ot,pr,wr=[];++yt<xt;){Dt=Je[yt],Ot=(Dt[0]-kt[0])/at,pr=(Dt[1]-kt[1])/at;for(var nr=0;nr<at;++nr)wr.push([kt[0]+nr*Ot,kt[1]+nr*pr]);kt=Dt}return wr.push(Dt),wr}function Fo(Je){var at=[],yt,xt,kt,Dt,Ot,pr,wr,nr=Je[0].length;for(wr=0;wr<nr;++wr)yt=Je[0][wr],xt=yt[0][0],kt=yt[0][1],Dt=yt[1][1],Ot=yt[2][0],pr=yt[2][1],at.push(Wo([[xt+h,kt+h],[xt+h,Dt-h],[Ot-h,Dt-h],[Ot-h,pr+h]],30));for(wr=Je[1].length-1;wr>=0;--wr)yt=Je[1][wr],xt=yt[0][0],kt=yt[0][1],Dt=yt[1][1],Ot=yt[2][0],pr=yt[2][1],at.push(Wo([[Ot-h,pr-h],[Ot-h,Dt+h],[xt+h,Dt+h],[xt+h,kt-h]],30));return{type:"Polygon",coordinates:[(0,Jn.Uf)(at)]}}function ho(Je,at,yt){var xt,kt;function Dt(wr,nr){for(var Mr=nr<0?-1:1,Ir=at[+(nr<0)],Nr=0,an=Ir.length-1;Nr<an&&wr>Ir[Nr][2][0];++Nr);var mn=Je(wr-Ir[Nr][1][0],nr);return mn[0]+=Je(Ir[Nr][1][0],Mr*nr>Mr*Ir[Nr][0][1]?Ir[Nr][0][1]:nr)[0],mn}yt?Dt.invert=yt(Dt):Je.invert&&(Dt.invert=function(wr,nr){for(var Mr=kt[+(nr<0)],Ir=at[+(nr<0)],Nr=0,an=Mr.length;Nr<an;++Nr){var mn=Mr[Nr];if(mn[0][0]<=wr&&wr<mn[1][0]&&mn[0][1]<=nr&&nr<mn[1][1]){var _n=Je.invert(wr-Je(Ir[Nr][1][0],0)[0],nr);return _n[0]+=Ir[Nr][1][0],ia(Dt(_n[0],_n[1]),[wr,nr])?_n:null}}});var Ot=(0,d.c)(Dt),pr=Ot.stream;return Ot.stream=function(wr){var nr=Ot.rotate(),Mr=pr(wr),Ir=(Ot.rotate([0,0]),pr(wr));return Ot.rotate(nr),Mr.sphere=function(){(0,hi.c)(xt,Ir)},Mr},Ot.lobes=function(wr){return arguments.length?(xt=Fo(wr),at=wr.map(function(nr){return nr.map(function(Mr){return[[Mr[0][0]*M,Mr[0][1]*M],[Mr[1][0]*M,Mr[1][1]*M],[Mr[2][0]*M,Mr[2][1]*M]]})}),kt=at.map(function(nr){return nr.map(function(Mr){var Ir=Je(Mr[0][0],Mr[0][1])[0],Nr=Je(Mr[2][0],Mr[2][1])[0],an=Je(Mr[1][0],Mr[0][1])[1],mn=Je(Mr[1][0],Mr[1][1])[1],_n;return an>mn&&(_n=an,an=mn,mn=_n),[[Ir,an],[Nr,mn]]})}),Ot):at.map(function(nr){return nr.map(function(Mr){return[[Mr[0][0]*C,Mr[0][1]*C],[Mr[1][0]*C,Mr[1][1]*C],[Mr[2][0]*C,Mr[2][1]*C]]})})},at!=null&&Ot.lobes(at),Ot}var zl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Mf(){return ho(Ge,zl).scale(160.857)}var lc=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ta(){return ho(En,lc).scale(152.63)}var pu=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ef(){return ho(ze,pu).scale(169.529)}var oo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Po(){return ho(ze,oo).scale(169.529).rotate([20,0])}var Ol=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function ju(){return ho(bn,Ol,we).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ya=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Fl(){return ho($e,Ya).scale(152.63).rotate([-20,0])}function ja(Je,at){return[3/y*Je*k(c*c/3-at*at),at]}ja.invert=function(Je,at){return[y/3*Je/k(c*c/3-at*at),at]};function qa(){return(0,d.c)(ja).scale(158.837)}function Bl(Je){function at(yt,xt){if(S(S(xt)-a)<h)return[0,xt<0?-2:2];var kt=l(xt),Dt=i((1+kt)/(1-kt),Je/2),Ot=.5*(Dt+1/Dt)+T(yt*=Je);return[2*l(yt)/Ot,(Dt-1/Dt)/Ot]}return at.invert=function(yt,xt){var kt=S(xt);if(S(kt-2)<h)return yt?null:[0,u(xt)*a];if(kt>2)return null;yt/=2,xt/=2;var Dt=yt*yt,Ot=xt*xt,pr=2*xt/(1+Dt+Ot);return pr=i((1+pr)/(1-pr),1/Je),[E(2*yt,1-Dt-Ot)/Je,_((pr-1)/(pr+1))]},at}function vo(){var Je=.5,at=(0,d.U)(Bl),yt=at(Je);return yt.spacing=function(xt){return arguments.length?at(Je=+xt):Je},yt.scale(124.75)}var po=c/A;function Yo(Je,at){return[Je*(1+k(T(at)))/2,at/(T(at/2)*T(Je/6))]}Yo.invert=function(Je,at){var yt=S(Je),xt=S(at),kt=h,Dt=a;xt<po?Dt*=xt/po:kt+=6*b(po/xt);for(var Ot=0;Ot<25;Ot++){var pr=l(Dt),wr=k(T(Dt)),nr=l(Dt/2),Mr=T(Dt/2),Ir=l(kt/6),Nr=T(kt/6),an=.5*kt*(1+wr)-yt,mn=Dt/(Mr*Nr)-xt,_n=wr?-.25*kt*pr/wr:0,Rn=.5*(1+wr),Zn=(1+.5*Dt*nr/Mr)/(Mr*Nr),_i=Dt/Mr*(Ir/6)/(Nr*Nr),Pi=_n*_i-Zn*Rn,Ii=(an*_i-mn*Rn)/Pi,zi=(mn*_n-an*Zn)/Pi;if(Dt-=Ii,kt-=zi,S(Ii)<h&&S(zi)<h)break}return[Je<0?-kt:kt,at<0?-Dt:Dt]};function uc(){return(0,d.c)(Yo).scale(97.2672)}function Bo(Je,at){var yt=Je*Je,xt=at*at;return[Je*(.975534+xt*(-.119161+yt*-.0143059+xt*-.0547009)),at*(1.00384+yt*(.0802894+xt*-.02855+yt*199025e-9)+xt*(.0998909+xt*-.0491032))]}Bo.invert=function(Je,at){var yt=u(Je)*c,xt=at/2,kt=50;do{var Dt=yt*yt,Ot=xt*xt,pr=yt*xt,wr=yt*(.975534+Ot*(-.119161+Dt*-.0143059+Ot*-.0547009))-Je,nr=xt*(1.00384+Dt*(.0802894+Ot*-.02855+Dt*199025e-9)+Ot*(.0998909+Ot*-.0491032))-at,Mr=.975534-Ot*(.119161+3*Dt*.0143059+Ot*.0547009),Ir=-pr*(2*.119161+4*.0547009*Ot+2*.0143059*Dt),Nr=pr*(2*.0802894+4*199025e-9*Dt+2*-.02855*Ot),an=1.00384+Dt*(.0802894+199025e-9*Dt)+Ot*(3*(.0998909-.02855*Dt)-5*.0491032*Ot),mn=Ir*Nr-an*Mr,_n=(nr*Ir-wr*an)/mn,Rn=(wr*Nr-nr*Mr)/mn;yt-=_n,xt-=Rn}while((S(_n)>h||S(Rn)>h)&&--kt>0);return kt&&[yt,xt]};function ph(){return(0,d.c)(Bo).scale(139.98)}function Ms(Je,at){return[l(Je)/T(at),m(at)*T(Je)]}Ms.invert=function(Je,at){var yt=Je*Je,xt=at*at,kt=xt+1,Dt=yt+kt,Ot=Je?x*k((Dt-k(Dt*Dt-4*yt))/yt):1/k(kt);return[_(Je*Ot),u(at)*b(Ot)]};function so(){return(0,d.c)(Ms).scale(144.049).clipAngle(89.999)}function Sf(Je){var at=T(Je),yt=m(p+Je/2);function xt(kt,Dt){var Ot=Dt-Je,pr=S(Ot)<h?kt*at:S(pr=p+Dt/2)<h||S(S(pr)-a)<h?0:kt*Ot/r(m(pr)/yt);return[pr,Ot]}return xt.invert=function(kt,Dt){var Ot,pr=Dt+Je;return[S(Dt)<h?kt/at:S(Ot=p+pr/2)<h||S(S(Ot)-a)<h?0:kt*r(m(Ot)/yt)/Dt,pr]},xt}function Js(){return ot(Sf).parallel(40).scale(158.837)}function Es(Je,at){return[Je,1.25*r(m(p+.4*at))]}Es.invert=function(Je,at){return[Je,2.5*n(v(.8*at))-.625*c]};function Cf(){return(0,d.c)(Es).scale(108.318)}function fc(Je){var at=Je.length-1;function yt(xt,kt){for(var Dt=T(kt),Ot=2/(1+Dt*T(xt)),pr=Ot*Dt*l(xt),wr=Ot*l(kt),nr=at,Mr=Je[nr],Ir=Mr[0],Nr=Mr[1],an;--nr>=0;)Mr=Je[nr],Ir=Mr[0]+pr*(an=Ir)-wr*Nr,Nr=Mr[1]+pr*Nr+wr*an;return Ir=pr*(an=Ir)-wr*Nr,Nr=pr*Nr+wr*an,[Ir,Nr]}return yt.invert=function(xt,kt){var Dt=20,Ot=xt,pr=kt;do{for(var wr=at,nr=Je[wr],Mr=nr[0],Ir=nr[1],Nr=0,an=0,mn;--wr>=0;)nr=Je[wr],Nr=Mr+Ot*(mn=Nr)-pr*an,an=Ir+Ot*an+pr*mn,Mr=nr[0]+Ot*(mn=Mr)-pr*Ir,Ir=nr[1]+Ot*Ir+pr*mn;Nr=Mr+Ot*(mn=Nr)-pr*an,an=Ir+Ot*an+pr*mn,Mr=Ot*(mn=Mr)-pr*Ir-xt,Ir=Ot*Ir+pr*mn-kt;var _n=Nr*Nr+an*an,Rn,Zn;Ot-=Rn=(Mr*Nr+Ir*an)/_n,pr-=Zn=(Ir*Nr-Mr*an)/_n}while(S(Rn)+S(Zn)>h*h&&--Dt>0);if(Dt){var _i=k(Ot*Ot+pr*pr),Pi=2*n(_i*.5),Ii=l(Pi);return[E(Ot*Ii,_i*T(Pi)),_i?_(pr*Ii/_i):0]}},yt}var gh=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Ku=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],yh=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],mh=[[.9245,0],[0,0],[.01943,0]],xh=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Lf(){return yl(gh,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function bh(){return yl(Ku,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function wh(){return yl(yh,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function cc(){return yl(mh,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function hc(){return yl(xh,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function yl(Je,at){var yt=(0,d.c)(fc(Je)).rotate(at).clipAngle(90),xt=(0,We.c)(at),kt=yt.center;return delete yt.rotate,yt.center=function(Dt){return arguments.length?kt(xt(Dt)):xt.invert(kt())},yt}var Nl=k(6),gu=k(7);function yu(Je,at){var yt=_(7*l(at)/(3*Nl));return[Nl*Je*(2*T(2*yt/3)-1)/gu,9*l(yt/3)/gu]}yu.invert=function(Je,at){var yt=3*_(at*gu/9);return[Je*gu/(Nl*(2*T(2*yt/3)-1)),_(l(yt)*3*Nl/7)]};function vc(){return(0,d.c)(yu).scale(164.859)}function Bs(Je,at){for(var yt=(1+x)*l(at),xt=at,kt=0,Dt;kt<25&&(xt-=Dt=(l(xt/2)+l(xt)-yt)/(.5*T(xt/2)+T(xt)),!(S(Dt)<h));kt++);return[Je*(1+2*T(xt)/T(xt/2))/(3*A),2*k(3)*l(xt/2)/k(2+A)]}Bs.invert=function(Je,at){var yt=at*k(2+A)/(2*k(3)),xt=2*_(yt);return[3*A*Je/(1+2*T(xt)/T(xt/2)),_((yt+l(xt))/(1+x))]};function Th(){return(0,d.c)(Bs).scale(188.209)}function Ju(Je,at){for(var yt=k(6/(4+c)),xt=(1+c/4)*l(at),kt=at/2,Dt=0,Ot;Dt<25&&(kt-=Ot=(kt/2+l(kt)-xt)/(.5+T(kt)),!(S(Ot)<h));Dt++);return[yt*(.5+T(kt))*Je/1.5,yt*kt]}Ju.invert=function(Je,at){var yt=k(6/(4+c)),xt=at/yt;return S(S(xt)-a)<h&&(xt=xt<0?-a:a),[1.5*Je/(yt*(.5+T(xt))),_((xt/2+l(xt))/(1+c/4))]};function dc(){return(0,d.c)(Ju).scale(166.518)}var pc=e(47984);function Qu(Je,at){var yt=at*at,xt=yt*yt,kt=yt*xt;return[Je*(.84719-.13063*yt+kt*kt*(-.04515+.05494*yt-.02326*xt+.00331*kt)),at*(1.01183+xt*xt*(-.02625+.01926*yt-.00396*xt))]}Qu.invert=function(Je,at){var yt=at,xt=25,kt,Dt,Ot,pr;do Dt=yt*yt,Ot=Dt*Dt,yt-=kt=(yt*(1.01183+Ot*Ot*(-.02625+.01926*Dt-.00396*Ot))-at)/(1.01183+Ot*Ot*(-.23625+.21186*Dt+-.05148*Ot));while(S(kt)>w&&--xt>0);return Dt=yt*yt,Ot=Dt*Dt,pr=Dt*Ot,[Je/(.84719-.13063*Dt+pr*pr*(-.04515+.05494*Dt-.02326*Ot+.00331*pr)),yt]};function os(){return(0,d.c)(Qu).scale(175.295)}function Ul(Je,at){return[Je*(1+T(at))/2,2*(at-m(at/2))]}Ul.invert=function(Je,at){for(var yt=at/2,xt=0,kt=1/0;xt<10&&S(kt)>h;++xt){var Dt=T(at/2);at-=kt=(at-m(at/2)-yt)/(1-.5/(Dt*Dt))}return[2*Je/(1+T(at)),at]};function ml(){return(0,d.c)(Ul).scale(152.63)}var mu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Qs(){return ho(re(1/0),mu).rotate([20,0]).scale(152.63)}function Ss(Je,at){var yt=l(at),xt=T(at),kt=u(Je);if(Je===0||S(at)===a)return[0,at];if(at===0)return[Je,0];if(S(Je)===a)return[Je*xt,a*yt];var Dt=c/(2*Je)-2*Je/c,Ot=2*at/c,pr=(1-Ot*Ot)/(yt-Ot),wr=Dt*Dt,nr=pr*pr,Mr=1+wr/nr,Ir=1+nr/wr,Nr=(Dt*yt/pr-Dt/2)/Mr,an=(nr*yt/wr+pr/2)/Ir,mn=Nr*Nr+xt*xt/Mr,_n=an*an-(nr*yt*yt/wr+pr*yt-1)/Ir;return[a*(Nr+k(mn)*kt),a*(an+k(_n<0?0:_n)*u(-at*Dt)*kt)]}Ss.invert=function(Je,at){Je/=a,at/=a;var yt=Je*Je,xt=at*at,kt=yt+xt,Dt=c*c;return[Je?(kt-1+k((1-kt)*(1-kt)+4*yt))/(2*Je)*a:0,Te(function(Ot){return kt*(c*l(Ot)-2*Ot)*c+4*Ot*Ot*(at-l(Ot))+2*c*Ot-Dt*at},0)]};function _f(){return(0,d.c)(Ss).scale(127.267)}var Vl=1.0148,ss=.23185,Ba=-.14499,Pf=.02406,Ah=Vl,$u=5*ss,Hl=7*Ba,Gl=9*Pf,No=1.790857183;function qu(Je,at){var yt=at*at;return[Je,at*(Vl+yt*yt*(ss+yt*(Ba+Pf*yt)))]}qu.invert=function(Je,at){at>No?at=No:at<-No&&(at=-No);var yt=at,xt;do{var kt=yt*yt;yt-=xt=(yt*(Vl+kt*kt*(ss+kt*(Ba+Pf*kt)))-at)/(Ah+kt*kt*($u+kt*(Hl+Gl*kt)))}while(S(xt)>h);return[Je,yt]};function Wl(){return(0,d.c)(qu).scale(139.319)}function ef(Je,at){if(S(at)<h)return[Je,0];var yt=m(at),xt=Je*l(at);return[l(xt)/yt,at+(1-T(xt))/yt]}ef.invert=function(Je,at){if(S(at)<h)return[Je,0];var yt=Je*Je+at*at,xt=at*.5,kt=10,Dt;do{var Ot=m(xt),pr=1/T(xt),wr=yt-2*at*xt+xt*xt;xt-=Dt=(Ot*wr+2*(xt-at))/(2+wr*pr*pr+2*(xt-at)*Ot)}while(S(Dt)>h&&--kt>0);return Ot=m(xt),[(S(at)<S(xt+1/Ot)?_(Je*Ot):u(at)*u(Je)*(b(S(Je*Ot))+a))/l(xt),xt]};function Mh(){return(0,d.c)(ef).scale(103.74)}var gc=e(13696),Rf=e(27284);function If(Je,at){var yt=tf(Je[1],Je[0]),xt=tf(at[1],at[0]),kt=rf(yt,xt),Dt=xu(yt)/xu(xt);return Yl([1,0,Je[0][0],0,1,Je[0][1]],Yl([Dt,0,0,0,Dt,0],Yl([T(kt),l(kt),0,-l(kt),T(kt),0],[1,0,-at[0][0],0,1,-at[0][1]])))}function Df(Je){var at=1/(Je[0]*Je[4]-Je[1]*Je[3]);return[at*Je[4],-at*Je[1],at*(Je[1]*Je[5]-Je[2]*Je[4]),-at*Je[3],at*Je[0],at*(Je[2]*Je[3]-Je[0]*Je[5])]}function Yl(Je,at){return[Je[0]*at[0]+Je[1]*at[3],Je[0]*at[1]+Je[1]*at[4],Je[0]*at[2]+Je[1]*at[5]+Je[2],Je[3]*at[0]+Je[4]*at[3],Je[3]*at[1]+Je[4]*at[4],Je[3]*at[2]+Je[4]*at[5]+Je[5]]}function tf(Je,at){return[Je[0]-at[0],Je[1]-at[1]]}function xu(Je){return k(Je[0]*Je[0]+Je[1]*Je[1])}function rf(Je,at){return E(Je[0]*at[1]-Je[1]*at[0],Je[0]*at[0]+Je[1]*at[1])}function xa(Je,at,yt){xt(Je,{transform:null});function xt(nr,Mr){if(nr.edges=kf(nr.face),Mr.face){var Ir=nr.shared=mc(nr.face,Mr.face),Nr=If(Ir.map(Mr.project),Ir.map(nr.project));nr.transform=Mr.transform?Yl(Mr.transform,Nr):Nr;for(var an=Mr.edges,mn=0,_n=an.length;mn<_n;++mn)ls(Ir[0],an[mn][1])&&ls(Ir[1],an[mn][0])&&(an[mn]=nr),ls(Ir[0],an[mn][0])&&ls(Ir[1],an[mn][1])&&(an[mn]=nr);for(an=nr.edges,mn=0,_n=an.length;mn<_n;++mn)ls(Ir[0],an[mn][0])&&ls(Ir[1],an[mn][1])&&(an[mn]=Mr),ls(Ir[0],an[mn][1])&&ls(Ir[1],an[mn][0])&&(an[mn]=Mr)}else nr.transform=Mr.transform;return nr.children&&nr.children.forEach(function(Rn){xt(Rn,nr)}),nr}function kt(nr,Mr){var Ir=at(nr,Mr),Nr=Ir.project([nr*C,Mr*C]),an;return(an=Ir.transform)?[an[0]*Nr[0]+an[1]*Nr[1]+an[2],-(an[3]*Nr[0]+an[4]*Nr[1]+an[5])]:(Nr[1]=-Nr[1],Nr)}xl(Je)&&(kt.invert=function(nr,Mr){var Ir=Dt(Je,[nr,-Mr]);return Ir&&(Ir[0]*=M,Ir[1]*=M,Ir)});function Dt(nr,Mr){var Ir=nr.project.invert,Nr=nr.transform,an=Mr;if(Nr&&(Nr=Df(Nr),an=[Nr[0]*an[0]+Nr[1]*an[1]+Nr[2],Nr[3]*an[0]+Nr[4]*an[1]+Nr[5]]),Ir&&nr===Ot(mn=Ir(an)))return mn;for(var mn,_n=nr.children,Rn=0,Zn=_n&&_n.length;Rn<Zn;++Rn)if(mn=Dt(_n[Rn],Mr))return mn}function Ot(nr){return at(nr[0]*M,nr[1]*M)}var pr=(0,d.c)(kt),wr=pr.stream;return pr.stream=function(nr){var Mr=pr.rotate(),Ir=wr(nr),Nr=(pr.rotate([0,0]),wr(nr));return pr.rotate(Mr),Ir.sphere=function(){Nr.polygonStart(),Nr.lineStart(),yc(Nr,Je),Nr.lineEnd(),Nr.polygonEnd()},Ir},pr.angle(yt==null?-30:yt*C)}function yc(Je,at,yt){var xt,kt=at.edges,Dt=kt.length,Ot,pr={type:"MultiPoint",coordinates:at.face},wr=at.face.filter(function(_n){return S(_n[1])!==90}),nr=(0,gc.c)({type:"MultiPoint",coordinates:wr}),Mr=!1,Ir=-1,Nr=nr[1][0]-nr[0][0],an=Nr===180||Nr===360?[(nr[0][0]+nr[1][0])/2,(nr[0][1]+nr[1][1])/2]:(0,Fe.c)(pr);if(yt)for(;++Ir<Dt&&kt[Ir]!==yt;);++Ir;for(var mn=0;mn<Dt;++mn)Ot=kt[(mn+Ir)%Dt],Array.isArray(Ot)?(Mr||(Je.point((xt=(0,Rf.c)(Ot[0],an)(h))[0],xt[1]),Mr=!0),Je.point((xt=(0,Rf.c)(Ot[1],an)(h))[0],xt[1])):(Mr=!1,Ot!==yt&&yc(Je,Ot,at))}function ls(Je,at){return Je&&at&&Je[0]===at[0]&&Je[1]===at[1]}function mc(Je,at){for(var yt,xt,kt=Je.length,Dt=null,Ot=0;Ot<kt;++Ot){yt=Je[Ot];for(var pr=at.length;--pr>=0;)if(xt=at[pr],yt[0]===xt[0]&&yt[1]===xt[1]){if(Dt)return[Dt,yt];Dt=yt}}}function kf(Je){for(var at=Je.length,yt=[],xt=Je[at-1],kt=0;kt<at;++kt)yt.push([xt,xt=Je[kt]]);return yt}function xl(Je){return Je.project.invert||Je.children&&Je.children.some(xl)}var $s=e(53285),nf=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Xa=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Je){return Je.map(function(at){return nf[at]})});function bu(Je){Je=Je||function(yt){var xt=(0,Fe.c)({type:"MultiPoint",coordinates:yt});return(0,$s.c)().scale(1).translate([0,0]).rotate([-xt[0],-xt[1]])};var at=Xa.map(function(yt){return{face:yt,project:Je(yt)}});return[-1,0,0,1,0,1,4,5].forEach(function(yt,xt){var kt=at[yt];kt&&(kt.children||(kt.children=[])).push(at[xt])}),xa(at[0],function(yt,xt){return at[yt<-c/2?xt<0?6:4:yt<0?xt<0?2:0:yt<c/2?xt<0?3:1:xt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var us=2/k(3);function Ns(Je,at){var yt=be(Je,at);return[yt[0]*us,yt[1]]}Ns.invert=function(Je,at){return be.invert(Je/us,at)};function bl(Je){Je=Je||function(yt){var xt=(0,Fe.c)({type:"MultiPoint",coordinates:yt});return(0,d.c)(Ns).translate([0,0]).scale(1).rotate(xt[1]>0?[-xt[0],0]:[180-xt[0],180])};var at=Xa.map(function(yt){return{face:yt,project:Je(yt)}});return[-1,0,0,1,0,1,4,5].forEach(function(yt,xt){var kt=at[yt];kt&&(kt.children||(kt.children=[])).push(at[xt])}),xa(at[0],function(yt,xt){return at[yt<-c/2?xt<0?6:4:yt<0?xt<0?2:0:yt<c/2?xt<0?3:1:xt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function qs(Je){Je=Je||function(Ot){var pr=Ot.length===6?(0,Fe.c)({type:"MultiPoint",coordinates:Ot}):Ot[0];return(0,$s.c)().scale(1).translate([0,0]).rotate([-pr[0],-pr[1]])};var at=Xa.map(function(Ot){for(var pr=Ot.map(Jo),wr=pr.length,nr=pr[wr-1],Mr,Ir=[],Nr=0;Nr<wr;++Nr)Mr=pr[Nr],Ir.push(cs([nr[0]*.9486832980505138+Mr[0]*.31622776601683794,nr[1]*.9486832980505138+Mr[1]*.31622776601683794,nr[2]*.9486832980505138+Mr[2]*.31622776601683794]),cs([Mr[0]*.9486832980505138+nr[0]*.31622776601683794,Mr[1]*.9486832980505138+nr[1]*.31622776601683794,Mr[2]*.9486832980505138+nr[2]*.31622776601683794])),nr=Mr;return Ir}),yt=[],xt=[-1,0,0,1,0,1,4,5];at.forEach(function(Ot,pr){for(var wr=Xa[pr],nr=wr.length,Mr=yt[pr]=[],Ir=0;Ir<nr;++Ir)at.push([wr[Ir],Ot[(Ir*2+2)%(2*nr)],Ot[(Ir*2+1)%(2*nr)]]),xt.push(pr),Mr.push(Us(Jo(Ot[(Ir*2+2)%(2*nr)]),Jo(Ot[(Ir*2+1)%(2*nr)])))});var kt=at.map(function(Ot){return{project:Je(Ot),face:Ot}});xt.forEach(function(Ot,pr){var wr=kt[Ot];wr&&(wr.children||(wr.children=[])).push(kt[pr])});function Dt(Ot,pr){var wr=T(pr),nr=[wr*T(Ot),wr*l(Ot),l(pr)],Mr=Ot<-c/2?pr<0?6:4:Ot<0?pr<0?2:0:Ot<c/2?pr<0?3:1:pr<0?7:5,Ir=yt[Mr];return kt[fs(Ir[0],nr)<0?8+3*Mr:fs(Ir[1],nr)<0?8+3*Mr+1:fs(Ir[2],nr)<0?8+3*Mr+2:Mr]}return xa(kt[0],Dt).angle(-30).scale(110.625).center([0,45])}function fs(Je,at){for(var yt=0,xt=Je.length,kt=0;yt<xt;++yt)kt+=Je[yt]*at[yt];return kt}function Us(Je,at){return[Je[1]*at[2]-Je[2]*at[1],Je[2]*at[0]-Je[0]*at[2],Je[0]*at[1]-Je[1]*at[0]]}function cs(Je){return[E(Je[1],Je[0])*C,_(t(-1,o(1,Je[2])))*C]}function Jo(Je){var at=Je[0]*M,yt=Je[1]*M,xt=T(yt);return[xt*T(at),xt*l(at),l(yt)]}function wu(){}function Eh(Je){if((yt=Je.length)<4)return!1;for(var at=0,yt,xt=Je[yt-1][1]*Je[0][0]-Je[yt-1][0]*Je[0][1];++at<yt;)xt+=Je[at-1][1]*Je[at][0]-Je[at-1][0]*Je[at][1];return xt<=0}function Sh(Je,at){for(var yt=at[0],xt=at[1],kt=!1,Dt=0,Ot=Je.length,pr=Ot-1;Dt<Ot;pr=Dt++){var wr=Je[Dt],nr=wr[0],Mr=wr[1],Ir=Je[pr],Nr=Ir[0],an=Ir[1];Mr>xt^an>xt&&yt<(Nr-nr)*(xt-Mr)/(an-Mr)+nr&&(kt=!kt)}return kt}function Ch(Je,at){var yt=at.stream,xt;if(!yt)throw new Error("invalid projection");switch(Je&&Je.type){case"Feature":xt=zf;break;case"FeatureCollection":xt=Lh;break;default:xt=Xl;break}return xt(Je,yt)}function Lh(Je,at){return{type:"FeatureCollection",features:Je.features.map(function(yt){return zf(yt,at)})}}function zf(Je,at){return{type:"Feature",id:Je.id,properties:Je.properties,geometry:Xl(Je.geometry,at)}}function xc(Je,at){return{type:"GeometryCollection",geometries:Je.geometries.map(function(yt){return Xl(yt,at)})}}function Xl(Je,at){if(!Je)return null;if(Je.type==="GeometryCollection")return xc(Je,at);var yt;switch(Je.type){case"Point":yt=Zl;break;case"MultiPoint":yt=Zl;break;case"LineString":yt=bc;break;case"MultiLineString":yt=bc;break;case"Polygon":yt=Tu;break;case"MultiPolygon":yt=Tu;break;case"Sphere":yt=Tu;break;default:return null}return(0,hi.c)(Je,at(yt)),yt.result()}var lo=[],Xo=[],Zl={point:function(Je,at){lo.push([Je,at])},result:function(){var Je=lo.length?lo.length<2?{type:"Point",coordinates:lo[0]}:{type:"MultiPoint",coordinates:lo}:null;return lo=[],Je}},bc={lineStart:wu,point:function(Je,at){lo.push([Je,at])},lineEnd:function(){lo.length&&(Xo.push(lo),lo=[])},result:function(){var Je=Xo.length?Xo.length<2?{type:"LineString",coordinates:Xo[0]}:{type:"MultiLineString",coordinates:Xo}:null;return Xo=[],Je}},Tu={polygonStart:wu,lineStart:wu,point:function(Je,at){lo.push([Je,at])},lineEnd:function(){var Je=lo.length;if(Je){do lo.push(lo[0].slice());while(++Je<4);Xo.push(lo),lo=[]}},polygonEnd:wu,result:function(){if(!Xo.length)return null;var Je=[],at=[];return Xo.forEach(function(yt){Eh(yt)?Je.push([yt]):at.push(yt)}),at.forEach(function(yt){var xt=yt[0];Je.some(function(kt){if(Sh(kt[0],xt))return kt.push(yt),!0})||Je.push([yt])}),Xo=[],Je.length?Je.length>1?{type:"MultiPolygon",coordinates:Je}:{type:"Polygon",coordinates:Je[0]}:null}};function Vs(Je){var at=Je(a,0)[0]-Je(-a,0)[0];function yt(xt,kt){var Dt=S(xt)<a,Ot=Je(Dt?xt:xt>0?xt-c:xt+c,kt),pr=(Ot[0]-Ot[1])*x,wr=(Ot[0]+Ot[1])*x;if(Dt)return[pr,wr];var nr=at*x,Mr=pr>0^wr>0?-1:1;return[Mr*pr-u(wr)*nr,Mr*wr-u(pr)*nr]}return Je.invert&&(yt.invert=function(xt,kt){var Dt=(xt+kt)*x,Ot=(kt-xt)*x,pr=S(Dt)<.5*at&&S(Ot)<.5*at;if(!pr){var wr=at*x,nr=Dt>0^Ot>0?-1:1,Mr=-nr*xt+(Ot>0?1:-1)*wr,Ir=-nr*kt+(Dt>0?1:-1)*wr;Dt=(-Mr-Ir)*x,Ot=(Mr-Ir)*x}var Nr=Je.invert(Dt,Ot);return pr||(Nr[0]+=Dt>0?c:-c),Nr}),(0,d.c)(yt).rotate([-90,-90,45]).clipAngle(179.999)}function _h(){return Vs(Mn).scale(176.423)}function wc(){return Vs(yr).scale(111.48)}function Tc(Je,at){if(!(0<=(at=+at)&&at<=20))throw new Error("invalid digits");function yt(nr){var Mr=nr.length,Ir=2,Nr=new Array(Mr);for(Nr[0]=+nr[0].toFixed(at),Nr[1]=+nr[1].toFixed(at);Ir<Mr;)Nr[Ir]=nr[Ir],++Ir;return Nr}function xt(nr){return nr.map(yt)}function kt(nr){for(var Mr=yt(nr[0]),Ir=[Mr],Nr=1;Nr<nr.length;Nr++){var an=yt(nr[Nr]);(an.length>2||an[0]!=Mr[0]||an[1]!=Mr[1])&&(Ir.push(an),Mr=an)}return Ir.length===1&&nr.length>1&&Ir.push(yt(nr[nr.length-1])),Ir}function Dt(nr){return nr.map(kt)}function Ot(nr){if(nr==null)return nr;var Mr;switch(nr.type){case"GeometryCollection":Mr={type:"GeometryCollection",geometries:nr.geometries.map(Ot)};break;case"Point":Mr={type:"Point",coordinates:yt(nr.coordinates)};break;case"MultiPoint":Mr={type:nr.type,coordinates:xt(nr.coordinates)};break;case"LineString":Mr={type:nr.type,coordinates:kt(nr.coordinates)};break;case"MultiLineString":case"Polygon":Mr={type:nr.type,coordinates:Dt(nr.coordinates)};break;case"MultiPolygon":Mr={type:"MultiPolygon",coordinates:nr.coordinates.map(Dt)};break;default:return nr}return nr.bbox!=null&&(Mr.bbox=nr.bbox),Mr}function pr(nr){var Mr={type:"Feature",properties:nr.properties,geometry:Ot(nr.geometry)};return nr.id!=null&&(Mr.id=nr.id),nr.bbox!=null&&(Mr.bbox=nr.bbox),Mr}if(Je!=null)switch(Je.type){case"Feature":return pr(Je);case"FeatureCollection":{var wr={type:"FeatureCollection",features:Je.features.map(pr)};return Je.bbox!=null&&(wr.bbox=Je.bbox),wr}default:return Ot(Je)}return Je}function Of(Je){var at=l(Je);function yt(xt,kt){var Dt=at?m(xt*at/2)/at:xt/2;if(!kt)return[2*Dt,-Je];var Ot=2*n(Dt*l(kt)),pr=1/m(kt);return[l(Ot)*pr,kt+(1-T(Ot))*pr-Je]}return yt.invert=function(xt,kt){if(S(kt+=Je)<h)return[at?2*n(at*xt/2)/at:xt,0];var Dt=xt*xt+kt*kt,Ot=0,pr=10,wr;do{var nr=m(Ot),Mr=1/T(Ot),Ir=Dt-2*kt*Ot+Ot*Ot;Ot-=wr=(nr*Ir+2*(Ot-kt))/(2+Ir*Mr*Mr+2*(Ot-kt)*nr)}while(S(wr)>h&&--pr>0);var Nr=xt*(nr=m(Ot)),an=m(S(kt)<S(Ot+1/nr)?_(Nr)*.5:b(Nr)*.5+c/4)/l(Ot);return[at?2*n(at*an)/at:2*an,Ot]},yt}function Ac(){return ot(Of).scale(131.215)}var Ro=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Ro.forEach(function(Je){Je[1]*=1.0144});function hs(Je,at){var yt=o(18,S(at)*36/c),xt=g(yt),kt=yt-xt,Dt=(Ir=Ro[xt])[0],Ot=Ir[1],pr=(Ir=Ro[++xt])[0],wr=Ir[1],nr=(Ir=Ro[o(19,++xt)])[0],Mr=Ir[1],Ir;return[Je*(pr+kt*(nr-Dt)/2+kt*kt*(nr-2*pr+Dt)/2),(at>0?a:-a)*(wr+kt*(Mr-Ot)/2+kt*kt*(Mr-2*wr+Ot)/2)]}hs.invert=function(Je,at){var yt=at/a,xt=yt*90,kt=o(18,S(xt/5)),Dt=t(0,g(kt));do{var Ot=Ro[Dt][1],pr=Ro[Dt+1][1],wr=Ro[o(19,Dt+2)][1],nr=wr-Ot,Mr=wr-2*pr+Ot,Ir=2*(S(yt)-pr)/nr,Nr=Mr/nr,an=Ir*(1-Nr*Ir*(1-2*Nr*Ir));if(an>=0||Dt===1){xt=(at>=0?5:-5)*(an+kt);var mn=50,_n;do kt=o(18,S(xt)/5),Dt=g(kt),an=kt-Dt,Ot=Ro[Dt][1],pr=Ro[Dt+1][1],wr=Ro[o(19,Dt+2)][1],xt-=(_n=(at>=0?a:-a)*(pr+an*(wr-Ot)/2+an*an*(wr-2*pr+Ot)/2)-at)*C;while(S(_n)>w&&--mn>0);break}}while(--Dt>=0);var Rn=Ro[Dt][0],Zn=Ro[Dt+1][0],_i=Ro[o(19,Dt+2)][0];return[Je/(Zn+an*(_i-Rn)/2+an*an*(_i-2*Zn+Rn)/2),xt*M]};function el(){return(0,d.c)(hs).scale(152.63)}function jl(Je){function at(yt,xt){var kt=T(xt),Dt=(Je-1)/(Je-kt*T(yt));return[Dt*kt*l(yt),Dt*l(xt)]}return at.invert=function(yt,xt){var kt=yt*yt+xt*xt,Dt=k(kt),Ot=(Je-k(1-kt*(Je+1)/(Je-1)))/((Je-1)/Dt+Dt/(Je-1));return[E(yt*Ot,Dt*k(1-Ot*Ot)),Dt?_(xt*Ot/Dt):0]},at}function af(Je,at){var yt=jl(Je);if(!at)return yt;var xt=T(at),kt=l(at);function Dt(Ot,pr){var wr=yt(Ot,pr),nr=wr[1],Mr=nr*kt/(Je-1)+xt;return[wr[0]*xt/Mr,nr/Mr]}return Dt.invert=function(Ot,pr){var wr=(Je-1)/(Je-1-pr*kt);return yt.invert(wr*Ot,wr*pr*xt)},Dt}function wl(){var Je=2,at=0,yt=(0,d.U)(af),xt=yt(Je,at);return xt.distance=function(kt){return arguments.length?yt(Je=+kt,at):Je},xt.tilt=function(kt){return arguments.length?yt(Je,at=kt*M):at*C},xt.scale(432.147).clipAngle(b(1/Je)*C-1e-6)}var Tl=1e-4,Mc=1e4,Hs=-180,Kl=Hs+Tl,tl=180,Gs=tl-Tl,Au=-90,Jl=Au+Tl,ga=90,Ql=ga-Tl;function of(Je){return Je.length>0}function Ec(Je){return Math.floor(Je*Mc)/Mc}function $l(Je){return Je===Au||Je===ga?[0,Je]:[Hs,Ec(Je)]}function Mu(Je){var at=Je[0],yt=Je[1],xt=!1;return at<=Kl?(at=Hs,xt=!0):at>=Gs&&(at=tl,xt=!0),yt<=Jl?(yt=Au,xt=!0):yt>=Ql&&(yt=ga,xt=!0),xt?[at,yt]:Je}function sf(Je){return Je.map(Mu)}function Ff(Je,at,yt){for(var xt=0,kt=Je.length;xt<kt;++xt){var Dt=Je[xt].slice();yt.push({index:-1,polygon:at,ring:Dt});for(var Ot=0,pr=Dt.length;Ot<pr;++Ot){var wr=Dt[Ot],nr=wr[0],Mr=wr[1];if(nr<=Kl||nr>=Gs||Mr<=Jl||Mr>=Ql){Dt[Ot]=Mu(wr);for(var Ir=Ot+1;Ir<pr;++Ir){var Nr=Dt[Ir],an=Nr[0],mn=Nr[1];if(an>Kl&&an<Gs&&mn>Jl&&mn<Ql)break}if(Ir===Ot+1)continue;if(Ot){var _n={index:-1,polygon:at,ring:Dt.slice(0,Ot+1)};_n.ring[_n.ring.length-1]=$l(Mr),yt[yt.length-1]=_n}else yt.pop();if(Ir>=pr)break;yt.push({index:-1,polygon:at,ring:Dt=Dt.slice(Ir-1)}),Dt[0]=$l(Dt[0][1]),Ot=-1,pr=Dt.length}}}}function Eu(Je){var at,yt=Je.length,xt={},kt={},Dt,Ot,pr,wr,nr;for(at=0;at<yt;++at){if(Dt=Je[at],Ot=Dt.ring[0],wr=Dt.ring[Dt.ring.length-1],Ot[0]===wr[0]&&Ot[1]===wr[1]){Dt.polygon.push(Dt.ring),Je[at]=null;continue}Dt.index=at,xt[Ot]=kt[wr]=Dt}for(at=0;at<yt;++at)if(Dt=Je[at],Dt){if(Ot=Dt.ring[0],wr=Dt.ring[Dt.ring.length-1],pr=kt[Ot],nr=xt[wr],delete xt[Ot],delete kt[wr],Ot[0]===wr[0]&&Ot[1]===wr[1]){Dt.polygon.push(Dt.ring);continue}pr?(delete kt[Ot],delete xt[pr.ring[0]],pr.ring.pop(),Je[pr.index]=null,Dt={index:-1,polygon:pr.polygon,ring:pr.ring.concat(Dt.ring)},pr===nr?Dt.polygon.push(Dt.ring):(Dt.index=yt++,Je.push(xt[Dt.ring[0]]=kt[Dt.ring[Dt.ring.length-1]]=Dt))):nr?(delete xt[wr],delete kt[nr.ring[nr.ring.length-1]],Dt.ring.pop(),Dt={index:yt++,polygon:nr.polygon,ring:Dt.ring.concat(nr.ring)},Je[nr.index]=null,Je.push(xt[Dt.ring[0]]=kt[Dt.ring[Dt.ring.length-1]]=Dt)):(Dt.ring.push(Dt.ring[0]),Dt.polygon.push(Dt.ring))}}function Su(Je){var at={type:"Feature",geometry:rl(Je.geometry)};return Je.id!=null&&(at.id=Je.id),Je.bbox!=null&&(at.bbox=Je.bbox),Je.properties!=null&&(at.properties=Je.properties),at}function rl(Je){if(Je==null)return Je;var at,yt,xt,kt;switch(Je.type){case"GeometryCollection":at={type:"GeometryCollection",geometries:Je.geometries.map(rl)};break;case"Point":at={type:"Point",coordinates:Mu(Je.coordinates)};break;case"MultiPoint":case"LineString":at={type:Je.type,coordinates:sf(Je.coordinates)};break;case"MultiLineString":at={type:"MultiLineString",coordinates:Je.coordinates.map(sf)};break;case"Polygon":{var Dt=[];Ff(Je.coordinates,Dt,yt=[]),Eu(yt),at={type:"Polygon",coordinates:Dt};break}case"MultiPolygon":{yt=[],xt=-1,kt=Je.coordinates.length;for(var Ot=new Array(kt);++xt<kt;)Ff(Je.coordinates[xt],Ot[xt]=[],yt);Eu(yt),at={type:"MultiPolygon",coordinates:Ot.filter(of)};break}default:return Je}return Je.bbox!=null&&(at.bbox=Je.bbox),at}function Cu(Je){if(Je==null)return Je;switch(Je.type){case"Feature":return Su(Je);case"FeatureCollection":{var at={type:"FeatureCollection",features:Je.features.map(Su)};return Je.bbox!=null&&(at.bbox=Je.bbox),at}default:return rl(Je)}}function nl(Je,at){var yt=m(at/2),xt=l(p*yt);return[Je*(.74482-.34588*xt*xt),1.70711*yt]}nl.invert=function(Je,at){var yt=at/1.70711,xt=l(p*yt);return[Je/(.74482-.34588*xt*xt),2*n(yt)]};function eo(){return(0,d.c)(nl).scale(146.153)}function Cs(Je,at,yt){var xt=(0,Rf.c)(at,yt),kt=xt(.5),Dt=(0,We.c)([-kt[0],-kt[1]])(at),Ot=xt.distance/2,pr=-_(l(Dt[1]*M)/l(Ot)),wr=[-kt[0],-kt[1],-(Dt[0]>0?c-pr:pr)*C],nr=(0,d.c)(Je(Ot)).rotate(wr),Mr=(0,We.c)(wr),Ir=nr.center;return delete nr.rotate,nr.center=function(Nr){return arguments.length?Ir(Mr(Nr)):Mr.invert(Ir())},nr.clipAngle(90)}function Bf(Je){var at=T(Je);function yt(xt,kt){var Dt=(0,$s.Y)(xt,kt);return Dt[0]*=at,Dt}return yt.invert=function(xt,kt){return $s.Y.invert(xt/at,kt)},yt}function Al(){return lf([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function lf(Je,at){return Cs(Bf,Je,at)}function Lu(Je){if(!(Je*=2))return le.O;var at=-Je/2,yt=-at,xt=Je*Je,kt=m(yt),Dt=.5/l(yt);function Ot(pr,wr){var nr=b(T(wr)*T(pr-at)),Mr=b(T(wr)*T(pr-yt)),Ir=wr<0?-1:1;return nr*=nr,Mr*=Mr,[(nr-Mr)/(2*Je),Ir*k(4*xt*Mr-(xt-nr+Mr)*(xt-nr+Mr))/(2*Je)]}return Ot.invert=function(pr,wr){var nr=wr*wr,Mr=T(k(nr+(Nr=pr+at)*Nr)),Ir=T(k(nr+(Nr=pr+yt)*Nr)),Nr,an;return[E(an=Mr-Ir,Nr=(Mr+Ir)*kt),(wr<0?-1:1)*b(k(Nr*Nr+an*an)*Dt)]},Ot}function Ph(){return Sc([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Sc(Je,at){return Cs(Lu,Je,at)}function Ao(Je,at){if(S(at)<h)return[Je,0];var yt=S(at/a),xt=_(yt);if(S(Je)<h||S(S(at)-a)<h)return[0,u(at)*c*m(xt/2)];var kt=T(xt),Dt=S(c/Je-Je/c)/2,Ot=Dt*Dt,pr=kt/(yt+kt-1),wr=pr*(2/yt-1),nr=wr*wr,Mr=nr+Ot,Ir=pr-nr,Nr=Ot+pr;return[u(Je)*c*(Dt*Ir+k(Ot*Ir*Ir-Mr*(pr*pr-nr)))/Mr,u(at)*c*(wr*Nr-Dt*k((Ot+1)*Mr-Nr*Nr))/Mr]}Ao.invert=function(Je,at){if(S(at)<h)return[Je,0];if(S(Je)<h)return[0,a*l(2*n(at/c))];var yt=(Je/=c)*Je,xt=(at/=c)*at,kt=yt+xt,Dt=kt*kt,Ot=-S(at)*(1+kt),pr=Ot-2*xt+yt,wr=-2*Ot+1+2*xt+Dt,nr=xt/wr+(2*pr*pr*pr/(wr*wr*wr)-9*Ot*pr/(wr*wr))/27,Mr=(Ot-pr*pr/(3*wr))/wr,Ir=2*k(-Mr/3),Nr=b(3*nr/(Mr*Ir))/3;return[c*(kt-1+k(1+2*(yt-xt)+Dt))/(2*Je),u(at)*c*(-Ir*T(Nr+c/3)-pr/(3*wr))]};function _u(){return(0,d.c)(Ao).scale(79.4183)}function ql(Je,at){if(S(at)<h)return[Je,0];var yt=S(at/a),xt=_(yt);if(S(Je)<h||S(S(at)-a)<h)return[0,u(at)*c*m(xt/2)];var kt=T(xt),Dt=S(c/Je-Je/c)/2,Ot=Dt*Dt,pr=kt*(k(1+Ot)-Dt*kt)/(1+Ot*yt*yt);return[u(Je)*c*pr,u(at)*c*k(1-pr*(2*Dt+pr))]}ql.invert=function(Je,at){if(!Je)return[0,a*l(2*n(at/c))];var yt=S(Je/c),xt=(1-yt*yt-(at/=c)*at)/(2*yt),kt=xt*xt,Dt=k(kt+1);return[u(Je)*c*(Dt-xt),u(at)*a*l(2*E(k((1-2*xt*yt)*(xt+Dt)-yt),k(Dt+xt+yt)))]};function Cc(){return(0,d.c)(ql).scale(79.4183)}function il(Je,at){if(S(at)<h)return[Je,0];var yt=at/a,xt=_(yt);if(S(Je)<h||S(S(at)-a)<h)return[0,c*m(xt/2)];var kt=(c/Je-Je/c)/2,Dt=yt/(1+T(xt));return[c*(u(Je)*k(kt*kt+1-Dt*Dt)-kt),c*Dt]}il.invert=function(Je,at){if(!at)return[Je,0];var yt=at/c,xt=(c*c*(1-yt*yt)-Je*Je)/(2*c*Je);return[Je?c*(u(Je)*k(xt*xt+1)-xt):0,a*l(2*n(yt))]};function Rh(){return(0,d.c)(il).scale(79.4183)}function Uo(Je,at){if(!at)return[Je,0];var yt=S(at);if(!Je||yt===a)return[0,at];var xt=yt/a,kt=xt*xt,Dt=(8*xt-kt*(kt+2)-5)/(2*kt*(xt-1)),Ot=Dt*Dt,pr=xt*Dt,wr=kt+Ot+2*pr,nr=xt+3*Dt,Mr=Je/a,Ir=Mr+1/Mr,Nr=u(S(Je)-a)*k(Ir*Ir-4),an=Nr*Nr,mn=wr*(kt+Ot*an-1)+(1-kt)*(kt*(nr*nr+4*Ot)+12*pr*Ot+4*Ot*Ot),_n=(Nr*(wr+Ot-1)+2*k(mn))/(4*wr+an);return[u(Je)*a*_n,u(at)*a*k(1+Nr*S(_n)-_n*_n)]}Uo.invert=function(Je,at){var yt;if(!Je||!at)return[Je,at];at/=c;var xt=u(Je)*Je/a,kt=(xt*xt-1+4*at*at)/S(xt),Dt=kt*kt,Ot=2*at,pr=50;do{var wr=Ot*Ot,nr=(8*Ot-wr*(wr+2)-5)/(2*wr*(Ot-1)),Mr=(3*Ot-wr*Ot-10)/(2*wr*Ot),Ir=nr*nr,Nr=Ot*nr,an=Ot+nr,mn=an*an,_n=Ot+3*nr,Rn=mn*(wr+Ir*Dt-1)+(1-wr)*(wr*(_n*_n+4*Ir)+Ir*(12*Nr+4*Ir)),Zn=-2*an*(4*Nr*Ir+(1-4*wr+3*wr*wr)*(1+Mr)+Ir*(-6+14*wr-Dt+(-8+8*wr-2*Dt)*Mr)+Nr*(-8+12*wr+(-10+10*wr-Dt)*Mr)),_i=k(Rn),Pi=kt*(mn+Ir-1)+2*_i-xt*(4*mn+Dt),Ii=kt*(2*nr*Mr+2*an*(1+Mr))+Zn/_i-8*an*(kt*(-1+Ir+mn)+2*_i)*(1+Mr)/(Dt+4*mn);Ot-=yt=Pi/Ii}while(yt>h&&--pr>0);return[u(Je)*(k(kt*kt+4)+kt)*c/4,a*Ot]};function Pu(){return(0,d.c)(Uo).scale(127.16)}function uf(Je,at,yt,xt,kt){function Dt(Ot,pr){var wr=yt*l(xt*pr),nr=k(1-wr*wr),Mr=k(2/(1+nr*T(Ot*=kt)));return[Je*nr*Mr*l(Ot),at*wr*Mr]}return Dt.invert=function(Ot,pr){var wr=Ot/Je,nr=pr/at,Mr=k(wr*wr+nr*nr),Ir=2*_(Mr/2);return[E(Ot*m(Ir),Je*Mr)/kt,Mr&&_(pr*l(Ir)/(at*yt*Mr))/xt]},Dt}function Ws(Je,at,yt,xt){var kt=c/3;Je=t(Je,h),at=t(at,h),Je=o(Je,a),at=o(at,c-h),yt=t(yt,0),yt=o(yt,100-h),xt=t(xt,h);var Dt=yt/100+1,Ot=xt/100,pr=b(Dt*T(kt))/kt,wr=l(Je)/l(pr*a),nr=at/c,Mr=k(Ot*l(Je/2)/l(at/2)),Ir=Mr/k(nr*wr*pr),Nr=1/(Mr*k(nr*wr*pr));return uf(Ir,Nr,wr,pr,nr)}function al(){var Je=65*M,at=60*M,yt=20,xt=200,kt=(0,d.U)(Ws),Dt=kt(Je,at,yt,xt);return Dt.poleline=function(Ot){return arguments.length?kt(Je=+Ot*M,at,yt,xt):Je*C},Dt.parallels=function(Ot){return arguments.length?kt(Je,at=+Ot*M,yt,xt):at*C},Dt.inflation=function(Ot){return arguments.length?kt(Je,at,yt=+Ot,xt):yt},Dt.ratio=function(Ot){return arguments.length?kt(Je,at,yt,xt=+Ot):xt},Dt.scale(163.775)}function Nf(){return al().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Ru=4*c+3*k(3),Iu=2*k(2*c*k(3)/Ru),ff=Ee(Iu*k(3)/c,Iu,Ru/6);function Lc(){return(0,d.c)(ff).scale(176.84)}function Du(Je,at){return[Je*k(1-3*at*at/(c*c)),at]}Du.invert=function(Je,at){return[Je/k(1-3*at*at/(c*c)),at]};function Uf(){return(0,d.c)(Du).scale(152.63)}function Ml(Je,at){var yt=T(at),xt=T(Je)*yt,kt=1-xt,Dt=T(Je=E(l(Je)*yt,-l(at))),Ot=l(Je);return yt=k(1-xt*xt),[Ot*yt-Dt*kt,-Dt*yt-Ot*kt]}Ml.invert=function(Je,at){var yt=(Je*Je+at*at)/-2,xt=k(-yt*(2+yt)),kt=at*yt+Je*xt,Dt=Je*yt-at*xt,Ot=k(Dt*Dt+kt*kt);return[E(xt*kt,Ot*(1+yt)),Ot?-_(xt*Dt/Ot):0]};function Vf(){return(0,d.c)(Ml).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function ku(Je,at){var yt=X(Je,at);return[(yt[0]+Je/a)/2,(yt[1]+at)/2]}ku.invert=function(Je,at){var yt=Je,xt=at,kt=25;do{var Dt=T(xt),Ot=l(xt),pr=l(2*xt),wr=Ot*Ot,nr=Dt*Dt,Mr=l(yt),Ir=T(yt/2),Nr=l(yt/2),an=Nr*Nr,mn=1-nr*Ir*Ir,_n=mn?b(Dt*Ir)*k(Rn=1/mn):Rn=0,Rn,Zn=.5*(2*_n*Dt*Nr+yt/a)-Je,_i=.5*(_n*Ot+xt)-at,Pi=.5*Rn*(nr*an+_n*Dt*Ir*wr)+.5/a,Ii=Rn*(Mr*pr/4-_n*Ot*Nr),zi=.125*Rn*(pr*Nr-_n*Ot*nr*Mr),Zi=.5*Rn*(wr*Ir+_n*an*Dt)+.5,ya=Ii*zi-Zi*Pi,Za=(_i*Ii-Zn*Zi)/ya,ve=(Zn*zi-_i*Pi)/ya;yt-=Za,xt-=ve}while((S(Za)>h||S(ve)>h)&&--kt>0);return[yt,xt]};function _c(){return(0,d.c)(ku).scale(158.837)}},88728:function(U,F,e){e.d(F,{c:function(){return d}});function d(){return new S}function S(){this.reset()}S.prototype={constructor:S,reset:function(){this.s=this.t=0},add:function(T){E(n,T,this.t),E(this,n.s,this.s),this.s?this.t+=n.t:this.s=n.t},valueOf:function(){return this.s}};var n=new S;function E(T,v,g){var r=T.s=v+g,t=r-v,o=r-t;T.t=v-o+(g-t)}},95384:function(U,F,e){e.d(F,{cp:function(){return w},mQ:function(){return T},oB:function(){return f}});var d=e(88728),S=e(64528),n=e(70932),E=e(16016),T=(0,d.c)(),v=(0,d.c)(),g,r,t,o,i,f={point:n.c,lineStart:n.c,lineEnd:n.c,polygonStart:function(){T.reset(),f.lineStart=u,f.lineEnd=l},polygonEnd:function(){var c=+T;v.add(c<0?S.kD+c:c),this.lineStart=this.lineEnd=this.point=n.c},sphere:function(){v.add(S.kD)}};function u(){f.point=m}function l(){h(g,r)}function m(c,a){f.point=h,g=c,r=a,c*=S.qw,a*=S.qw,t=c,o=(0,S.W8)(a=a/2+S.wL),i=(0,S.g$)(a)}function h(c,a){c*=S.qw,a*=S.qw,a=a/2+S.wL;var p=c-t,x=p>=0?1:-1,A=x*p,P=(0,S.W8)(a),y=(0,S.g$)(a),C=i*y,M=o*P+C*(0,S.W8)(A),s=C*x*(0,S.g$)(A);T.add((0,S.WE)(s,M)),t=c,o=P,i=y}function w(c){return v.reset(),(0,E.c)(c,f),v*2}},13696:function(U,F,e){e.d(F,{c:function(){return _}});var d=e(88728),S=e(95384),n=e(84220),E=e(64528),T=e(16016),v,g,r,t,o,i,f,u,l=(0,d.c)(),m,h,w={point:c,lineStart:p,lineEnd:x,polygonStart:function(){w.point=A,w.lineStart=P,w.lineEnd=y,l.reset(),S.oB.polygonStart()},polygonEnd:function(){S.oB.polygonEnd(),w.point=c,w.lineStart=p,w.lineEnd=x,S.mQ<0?(v=-(r=180),g=-(t=90)):l>E.Gg?t=90:l<-E.Gg&&(g=-90),h[0]=v,h[1]=r},sphere:function(){v=-(r=180),g=-(t=90)}};function c(b,k){m.push(h=[v=b,r=b]),k<g&&(g=k),k>t&&(t=k)}function a(b,k){var D=(0,n.ux)([b*E.qw,k*E.qw]);if(u){var V=(0,n.CW)(u,D),O=[V[1],-V[0],0],N=(0,n.CW)(O,V);(0,n.cJ)(N),N=(0,n.G)(N);var B=b-o,z=B>0?1:-1,H=N[0]*E.oh*z,X,$=(0,E.a2)(B)>180;$^(z*o<H&&H<z*b)?(X=N[1]*E.oh,X>t&&(t=X)):(H=(H+360)%360-180,$^(z*o<H&&H<z*b)?(X=-N[1]*E.oh,X<g&&(g=X)):(k<g&&(g=k),k>t&&(t=k))),$?b<o?C(v,b)>C(v,r)&&(r=b):C(b,r)>C(v,r)&&(v=b):r>=v?(b<v&&(v=b),b>r&&(r=b)):b>o?C(v,b)>C(v,r)&&(r=b):C(b,r)>C(v,r)&&(v=b)}else m.push(h=[v=b,r=b]);k<g&&(g=k),k>t&&(t=k),u=D,o=b}function p(){w.point=a}function x(){h[0]=v,h[1]=r,w.point=c,u=null}function A(b,k){if(u){var D=b-o;l.add((0,E.a2)(D)>180?D+(D>0?360:-360):D)}else i=b,f=k;S.oB.point(b,k),a(b,k)}function P(){S.oB.lineStart()}function y(){A(i,f),S.oB.lineEnd(),(0,E.a2)(l)>E.Gg&&(v=-(r=180)),h[0]=v,h[1]=r,u=null}function C(b,k){return(k-=b)<0?k+360:k}function M(b,k){return b[0]-k[0]}function s(b,k){return b[0]<=b[1]?b[0]<=k&&k<=b[1]:k<b[0]||b[1]<k}function _(b){var k,D,V,O,N,B,z;if(t=r=-(v=g=1/0),m=[],(0,T.c)(b,w),D=m.length){for(m.sort(M),k=1,V=m[0],N=[V];k<D;++k)O=m[k],s(V,O[0])||s(V,O[1])?(C(V[0],O[1])>C(V[0],V[1])&&(V[1]=O[1]),C(O[0],V[1])>C(V[0],V[1])&&(V[0]=O[0])):N.push(V=O);for(B=-1/0,D=N.length-1,k=0,V=N[D];k<=D;V=O,++k)O=N[k],(z=C(V[1],O[0]))>B&&(B=z,v=O[0],r=V[1])}return m=h=null,v===1/0||g===1/0?[[NaN,NaN],[NaN,NaN]]:[[v,g],[r,t]]}},84220:function(U,F,e){e.d(F,{CW:function(){return T},Ez:function(){return E},G:function(){return S},cJ:function(){return r},mg:function(){return v},ux:function(){return n},wx:function(){return g}});var d=e(64528);function S(t){return[(0,d.WE)(t[1],t[0]),(0,d.qR)(t[2])]}function n(t){var o=t[0],i=t[1],f=(0,d.W8)(i);return[f*(0,d.W8)(o),f*(0,d.g$)(o),(0,d.g$)(i)]}function E(t,o){return t[0]*o[0]+t[1]*o[1]+t[2]*o[2]}function T(t,o){return[t[1]*o[2]-t[2]*o[1],t[2]*o[0]-t[0]*o[2],t[0]*o[1]-t[1]*o[0]]}function v(t,o){t[0]+=o[0],t[1]+=o[1],t[2]+=o[2]}function g(t,o){return[t[0]*o,t[1]*o,t[2]*o]}function r(t){var o=(0,d._I)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=o,t[1]/=o,t[2]/=o}},24052:function(U,F,e){e.d(F,{c:function(){return D}});var d=e(64528),S=e(70932),n=e(16016),E,T,v,g,r,t,o,i,f,u,l,m,h,w,c,a,p={sphere:S.c,point:x,lineStart:P,lineEnd:M,polygonStart:function(){p.lineStart=s,p.lineEnd=_},polygonEnd:function(){p.lineStart=P,p.lineEnd=M}};function x(V,O){V*=d.qw,O*=d.qw;var N=(0,d.W8)(O);A(N*(0,d.W8)(V),N*(0,d.g$)(V),(0,d.g$)(O))}function A(V,O,N){++E,v+=(V-v)/E,g+=(O-g)/E,r+=(N-r)/E}function P(){p.point=y}function y(V,O){V*=d.qw,O*=d.qw;var N=(0,d.W8)(O);w=N*(0,d.W8)(V),c=N*(0,d.g$)(V),a=(0,d.g$)(O),p.point=C,A(w,c,a)}function C(V,O){V*=d.qw,O*=d.qw;var N=(0,d.W8)(O),B=N*(0,d.W8)(V),z=N*(0,d.g$)(V),H=(0,d.g$)(O),X=(0,d.WE)((0,d._I)((X=c*H-a*z)*X+(X=a*B-w*H)*X+(X=w*z-c*B)*X),w*B+c*z+a*H);T+=X,t+=X*(w+(w=B)),o+=X*(c+(c=z)),i+=X*(a+(a=H)),A(w,c,a)}function M(){p.point=x}function s(){p.point=b}function _(){k(m,h),p.point=x}function b(V,O){m=V,h=O,V*=d.qw,O*=d.qw,p.point=k;var N=(0,d.W8)(O);w=N*(0,d.W8)(V),c=N*(0,d.g$)(V),a=(0,d.g$)(O),A(w,c,a)}function k(V,O){V*=d.qw,O*=d.qw;var N=(0,d.W8)(O),B=N*(0,d.W8)(V),z=N*(0,d.g$)(V),H=(0,d.g$)(O),X=c*H-a*z,$=a*B-w*H,ne=w*z-c*B,q=(0,d._I)(X*X+$*$+ne*ne),ue=(0,d.qR)(q),te=q&&-ue/q;f+=te*X,u+=te*$,l+=te*ne,T+=ue,t+=ue*(w+(w=B)),o+=ue*(c+(c=z)),i+=ue*(a+(a=H)),A(w,c,a)}function D(V){E=T=v=g=r=t=o=i=f=u=l=0,(0,n.c)(V,p);var O=f,N=u,B=l,z=O*O+N*N+B*B;return z<d.a8&&(O=t,N=o,B=i,T<d.Gg&&(O=v,N=g,B=r),z=O*O+N*N+B*B,z<d.a8)?[NaN,NaN]:[(0,d.WE)(N,O)*d.oh,(0,d.qR)(B/(0,d._I)(z))*d.oh]}},61780:function(U,F,e){e.d(F,{Q:function(){return T},c:function(){return g}});var d=e(84220);function S(r){return function(){return r}}var n=e(64528),E=e(92992);function T(r,t,o,i,f,u){if(o){var l=(0,n.W8)(t),m=(0,n.g$)(t),h=i*o;f==null?(f=t+i*n.kD,u=t-h/2):(f=v(l,f),u=v(l,u),(i>0?f<u:f>u)&&(f+=i*n.kD));for(var w,c=f;i>0?c>u:c<u;c-=h)w=(0,d.G)([l,-m*(0,n.W8)(c),-m*(0,n.g$)(c)]),r.point(w[0],w[1])}}function v(r,t){t=(0,d.ux)(t),t[0]-=r,(0,d.cJ)(t);var o=(0,n.mE)(-t[1]);return((-t[2]<0?-o:o)+n.kD-n.Gg)%n.kD}function g(){var r=S([0,0]),t=S(90),o=S(6),i,f,u={point:l};function l(h,w){i.push(h=f(h,w)),h[0]*=n.oh,h[1]*=n.oh}function m(){var h=r.apply(this,arguments),w=t.apply(this,arguments)*n.qw,c=o.apply(this,arguments)*n.qw;return i=[],f=(0,E.O)(-h[0]*n.qw,-h[1]*n.qw,0).invert,T(u,w,c,1),h={type:"Polygon",coordinates:[i]},i=f=null,h}return m.center=function(h){return arguments.length?(r=typeof h=="function"?h:S([+h[0],+h[1]]),m):r},m.radius=function(h){return arguments.length?(t=typeof h=="function"?h:S(+h),m):t},m.precision=function(h){return arguments.length?(o=typeof h=="function"?h:S(+h),m):o},m}},78284:function(U,F,e){var d=e(14229),S=e(64528);F.c=(0,d.c)(function(){return!0},n,T,[-S.pi,-S.or]);function n(v){var g=NaN,r=NaN,t=NaN,o;return{lineStart:function(){v.lineStart(),o=1},point:function(i,f){var u=i>0?S.pi:-S.pi,l=(0,S.a2)(i-g);(0,S.a2)(l-S.pi)<S.Gg?(v.point(g,r=(r+f)/2>0?S.or:-S.or),v.point(t,r),v.lineEnd(),v.lineStart(),v.point(u,r),v.point(i,r),o=0):t!==u&&l>=S.pi&&((0,S.a2)(g-t)<S.Gg&&(g-=t*S.Gg),(0,S.a2)(i-u)<S.Gg&&(i-=u*S.Gg),r=E(g,r,i,f),v.point(t,r),v.lineEnd(),v.lineStart(),v.point(u,r),o=0),v.point(g=i,r=f),t=u},lineEnd:function(){v.lineEnd(),g=r=NaN},clean:function(){return 2-o}}}function E(v,g,r,t){var o,i,f=(0,S.g$)(v-r);return(0,S.a2)(f)>S.Gg?(0,S.MQ)(((0,S.g$)(g)*(i=(0,S.W8)(t))*(0,S.g$)(r)-(0,S.g$)(t)*(o=(0,S.W8)(g))*(0,S.g$)(v))/(o*i*f)):(g+t)/2}function T(v,g,r,t){var o;if(v==null)o=r*S.or,t.point(-S.pi,o),t.point(0,o),t.point(S.pi,o),t.point(S.pi,0),t.point(S.pi,-o),t.point(0,-o),t.point(-S.pi,-o),t.point(-S.pi,0),t.point(-S.pi,o);else if((0,S.a2)(v[0]-g[0])>S.Gg){var i=v[0]<g[0]?S.pi:-S.pi;o=r*i/2,t.point(-i,o),t.point(0,o),t.point(i,o)}else t.point(g[0],g[1])}},97208:function(U,F,e){e.d(F,{c:function(){return S}});var d=e(70932);function S(){var n=[],E;return{point:function(T,v,g){E.push([T,v,g])},lineStart:function(){n.push(E=[])},lineEnd:d.c,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var T=n;return n=[],E=null,T}}}},2728:function(U,F,e){e.d(F,{c:function(){return v}});var d=e(84220),S=e(61780),n=e(64528),E=e(41860),T=e(14229);function v(g){var r=(0,n.W8)(g),t=6*n.qw,o=r>0,i=(0,n.a2)(r)>n.Gg;function f(w,c,a,p){(0,S.Q)(p,g,t,a,w,c)}function u(w,c){return(0,n.W8)(w)*(0,n.W8)(c)>r}function l(w){var c,a,p,x,A;return{lineStart:function(){x=p=!1,A=1},point:function(P,y){var C=[P,y],M,s=u(P,y),_=o?s?0:h(P,y):s?h(P+(P<0?n.pi:-n.pi),y):0;if(!c&&(x=p=s)&&w.lineStart(),s!==p&&(M=m(c,C),(!M||(0,E.c)(c,M)||(0,E.c)(C,M))&&(C[2]=1)),s!==p)A=0,s?(w.lineStart(),M=m(C,c),w.point(M[0],M[1])):(M=m(c,C),w.point(M[0],M[1],2),w.lineEnd()),c=M;else if(i&&c&&o^s){var b;!(_&a)&&(b=m(C,c,!0))&&(A=0,o?(w.lineStart(),w.point(b[0][0],b[0][1]),w.point(b[1][0],b[1][1]),w.lineEnd()):(w.point(b[1][0],b[1][1]),w.lineEnd(),w.lineStart(),w.point(b[0][0],b[0][1],3)))}s&&(!c||!(0,E.c)(c,C))&&w.point(C[0],C[1]),c=C,p=s,a=_},lineEnd:function(){p&&w.lineEnd(),c=null},clean:function(){return A|(x&&p)<<1}}}function m(w,c,a){var p=(0,d.ux)(w),x=(0,d.ux)(c),A=[1,0,0],P=(0,d.CW)(p,x),y=(0,d.Ez)(P,P),C=P[0],M=y-C*C;if(!M)return!a&&w;var s=r*y/M,_=-r*C/M,b=(0,d.CW)(A,P),k=(0,d.wx)(A,s),D=(0,d.wx)(P,_);(0,d.mg)(k,D);var V=b,O=(0,d.Ez)(k,V),N=(0,d.Ez)(V,V),B=O*O-N*((0,d.Ez)(k,k)-1);if(!(B<0)){var z=(0,n._I)(B),H=(0,d.wx)(V,(-O-z)/N);if((0,d.mg)(H,k),H=(0,d.G)(H),!a)return H;var X=w[0],$=c[0],ne=w[1],q=c[1],ue;$<X&&(ue=X,X=$,$=ue);var te=$-X,J=(0,n.a2)(te-n.pi)<n.Gg,ie=J||te<n.Gg;if(!J&&q<ne&&(ue=ne,ne=q,q=ue),ie?J?ne+q>0^H[1]<((0,n.a2)(H[0]-X)<n.Gg?ne:q):ne<=H[1]&&H[1]<=q:te>n.pi^(X<=H[0]&&H[0]<=$)){var K=(0,d.wx)(V,(-O+z)/N);return(0,d.mg)(K,k),[H,(0,d.G)(K)]}}}function h(w,c){var a=o?g:n.pi-g,p=0;return w<-a?p|=1:w>a&&(p|=2),c<-a?p|=4:c>a&&(p|=8),p}return(0,T.c)(u,l,f,o?[0,-g]:[-n.pi,g-n.pi])}},14229:function(U,F,e){e.d(F,{c:function(){return v}});var d=e(97208),S=e(32232),n=e(64528),E=e(58196),T=e(84706);function v(t,o,i,f){return function(u){var l=o(u),m=(0,d.c)(),h=o(m),w=!1,c,a,p,x={point:A,lineStart:y,lineEnd:C,polygonStart:function(){x.point=M,x.lineStart=s,x.lineEnd=_,a=[],c=[]},polygonEnd:function(){x.point=A,x.lineStart=y,x.lineEnd=C,a=(0,T.Uf)(a);var b=(0,E.c)(c,f);a.length?(w||(u.polygonStart(),w=!0),(0,S.c)(a,r,b,i,u)):b&&(w||(u.polygonStart(),w=!0),u.lineStart(),i(null,null,1,u),u.lineEnd()),w&&(u.polygonEnd(),w=!1),a=c=null},sphere:function(){u.polygonStart(),u.lineStart(),i(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function A(b,k){t(b,k)&&u.point(b,k)}function P(b,k){l.point(b,k)}function y(){x.point=P,l.lineStart()}function C(){x.point=A,l.lineEnd()}function M(b,k){p.push([b,k]),h.point(b,k)}function s(){h.lineStart(),p=[]}function _(){M(p[0][0],p[0][1]),h.lineEnd();var b=h.clean(),k=m.result(),D,V=k.length,O,N,B;if(p.pop(),c.push(p),p=null,!!V){if(b&1){if(N=k[0],(O=N.length-1)>0){for(w||(u.polygonStart(),w=!0),u.lineStart(),D=0;D<O;++D)u.point((B=N[D])[0],B[1]);u.lineEnd()}return}V>1&&b&2&&k.push(k.pop().concat(k.shift())),a.push(k.filter(g))}}return x}}function g(t){return t.length>1}function r(t,o){return((t=t.x)[0]<0?t[1]-n.or-n.Gg:n.or-t[1])-((o=o.x)[0]<0?o[1]-n.or-n.Gg:n.or-o[1])}},21676:function(U,F,e){e.d(F,{c:function(){return r}});var d=e(64528),S=e(97208);function n(t,o,i,f,u,l){var m=t[0],h=t[1],w=o[0],c=o[1],a=0,p=1,x=w-m,A=c-h,P;if(P=i-m,!(!x&&P>0)){if(P/=x,x<0){if(P<a)return;P<p&&(p=P)}else if(x>0){if(P>p)return;P>a&&(a=P)}if(P=u-m,!(!x&&P<0)){if(P/=x,x<0){if(P>p)return;P>a&&(a=P)}else if(x>0){if(P<a)return;P<p&&(p=P)}if(P=f-h,!(!A&&P>0)){if(P/=A,A<0){if(P<a)return;P<p&&(p=P)}else if(A>0){if(P>p)return;P>a&&(a=P)}if(P=l-h,!(!A&&P<0)){if(P/=A,A<0){if(P>p)return;P>a&&(a=P)}else if(A>0){if(P<a)return;P<p&&(p=P)}return a>0&&(t[0]=m+a*x,t[1]=h+a*A),p<1&&(o[0]=m+p*x,o[1]=h+p*A),!0}}}}}var E=e(32232),T=e(84706),v=1e9,g=-v;function r(t,o,i,f){function u(c,a){return t<=c&&c<=i&&o<=a&&a<=f}function l(c,a,p,x){var A=0,P=0;if(c==null||(A=m(c,p))!==(P=m(a,p))||w(c,a)<0^p>0)do x.point(A===0||A===3?t:i,A>1?f:o);while((A=(A+p+4)%4)!==P);else x.point(a[0],a[1])}function m(c,a){return(0,d.a2)(c[0]-t)<d.Gg?a>0?0:3:(0,d.a2)(c[0]-i)<d.Gg?a>0?2:1:(0,d.a2)(c[1]-o)<d.Gg?a>0?1:0:a>0?3:2}function h(c,a){return w(c.x,a.x)}function w(c,a){var p=m(c,1),x=m(a,1);return p!==x?p-x:p===0?a[1]-c[1]:p===1?c[0]-a[0]:p===2?c[1]-a[1]:a[0]-c[0]}return function(c){var a=c,p=(0,S.c)(),x,A,P,y,C,M,s,_,b,k,D,V={point:O,lineStart:H,lineEnd:X,polygonStart:B,polygonEnd:z};function O(ne,q){u(ne,q)&&a.point(ne,q)}function N(){for(var ne=0,q=0,ue=A.length;q<ue;++q)for(var te=A[q],J=1,ie=te.length,K=te[0],ee,le,j=K[0],Z=K[1];J<ie;++J)ee=j,le=Z,K=te[J],j=K[0],Z=K[1],le<=f?Z>f&&(j-ee)*(f-le)>(Z-le)*(t-ee)&&++ne:Z<=f&&(j-ee)*(f-le)<(Z-le)*(t-ee)&&--ne;return ne}function B(){a=p,x=[],A=[],D=!0}function z(){var ne=N(),q=D&&ne,ue=(x=(0,T.Uf)(x)).length;(q||ue)&&(c.polygonStart(),q&&(c.lineStart(),l(null,null,1,c),c.lineEnd()),ue&&(0,E.c)(x,h,ne,l,c),c.polygonEnd()),a=c,x=A=P=null}function H(){V.point=$,A&&A.push(P=[]),k=!0,b=!1,s=_=NaN}function X(){x&&($(y,C),M&&b&&p.rejoin(),x.push(p.result())),V.point=O,b&&a.lineEnd()}function $(ne,q){var ue=u(ne,q);if(A&&P.push([ne,q]),k)y=ne,C=q,M=ue,k=!1,ue&&(a.lineStart(),a.point(ne,q));else if(ue&&b)a.point(ne,q);else{var te=[s=Math.max(g,Math.min(v,s)),_=Math.max(g,Math.min(v,_))],J=[ne=Math.max(g,Math.min(v,ne)),q=Math.max(g,Math.min(v,q))];n(te,J,t,o,i,f)?(b||(a.lineStart(),a.point(te[0],te[1])),a.point(J[0],J[1]),ue||a.lineEnd(),D=!1):ue&&(a.lineStart(),a.point(ne,q),D=!1)}s=ne,_=q,b=ue}return V}}},32232:function(U,F,e){e.d(F,{c:function(){return E}});var d=e(41860),S=e(64528);function n(v,g,r,t){this.x=v,this.z=g,this.o=r,this.e=t,this.v=!1,this.n=this.p=null}function E(v,g,r,t,o){var i=[],f=[],u,l;if(v.forEach(function(p){if(!((x=p.length-1)<=0)){var x,A=p[0],P=p[x],y;if((0,d.c)(A,P)){if(!A[2]&&!P[2]){for(o.lineStart(),u=0;u<x;++u)o.point((A=p[u])[0],A[1]);o.lineEnd();return}P[0]+=2*S.Gg}i.push(y=new n(A,p,null,!0)),f.push(y.o=new n(A,null,y,!1)),i.push(y=new n(P,p,null,!1)),f.push(y.o=new n(P,null,y,!0))}}),!!i.length){for(f.sort(g),T(i),T(f),u=0,l=f.length;u<l;++u)f[u].e=r=!r;for(var m=i[0],h,w;;){for(var c=m,a=!0;c.v;)if((c=c.n)===m)return;h=c.z,o.lineStart();do{if(c.v=c.o.v=!0,c.e){if(a)for(u=0,l=h.length;u<l;++u)o.point((w=h[u])[0],w[1]);else t(c.x,c.n.x,1,o);c=c.n}else{if(a)for(h=c.p.z,u=h.length-1;u>=0;--u)o.point((w=h[u])[0],w[1]);else t(c.x,c.p.x,-1,o);c=c.p}c=c.o,h=c.z,a=!a}while(!c.v);o.lineEnd()}}}function T(v){if(g=v.length){for(var g,r=0,t=v[0],o;++r<g;)t.n=o=v[r],o.p=t,t=o;t.n=o=v[0],o.p=t}}},68120:function(U,F,e){e.d(F,{c:function(){return d}});function d(S,n){function E(T,v){return T=S(T,v),n(T[0],T[1])}return S.invert&&n.invert&&(E.invert=function(T,v){return T=n.invert(T,v),T&&S.invert(T[0],T[1])}),E}},7376:function(U,F,e){e.d(F,{c:function(){return d}});function d(S){return S}},83356:function(U,F,e){e.r(F),e.d(F,{geoAlbers:function(){return mr},geoAlbersUsa:function(){return ut},geoArea:function(){return d.cp},geoAzimuthalEqualArea:function(){return bt.c},geoAzimuthalEqualAreaRaw:function(){return bt.y},geoAzimuthalEquidistant:function(){return St.c},geoAzimuthalEquidistantRaw:function(){return St.O},geoBounds:function(){return S.c},geoCentroid:function(){return n.c},geoCircle:function(){return E.c},geoClipAntimeridian:function(){return T.c},geoClipCircle:function(){return v.c},geoClipExtent:function(){return r},geoClipRectangle:function(){return g.c},geoConicConformal:function(){return cr},geoConicConformalRaw:function(){return fr},geoConicEqualArea:function(){return Qt},geoConicEqualAreaRaw:function(){return jt},geoConicEquidistant:function(){return He},geoConicEquidistantRaw:function(){return Xe},geoContains:function(){return B},geoDistance:function(){return M},geoEqualEarth:function(){return ir},geoEqualEarthRaw:function(){return Ft},geoEquirectangular:function(){return dr.c},geoEquirectangularRaw:function(){return dr.u},geoGnomonic:function(){return hr.c},geoGnomonicRaw:function(){return hr.Y},geoGraticule:function(){return $},geoGraticule10:function(){return ne},geoIdentity:function(){return vr},geoInterpolate:function(){return q.c},geoLength:function(){return P},geoMercator:function(){return Bt},geoMercatorRaw:function(){return Ht},geoNaturalEarth1:function(){return Vr.c},geoNaturalEarth1Raw:function(){return Vr.g},geoOrthographic:function(){return _r.c},geoOrthographicRaw:function(){return _r.t},geoPath:function(){return It},geoProjection:function(){return Xt.c},geoProjectionMutator:function(){return Xt.U},geoRotation:function(){return Pt.c},geoStereographic:function(){return en},geoStereographicRaw:function(){return nn},geoStream:function(){return u.c},geoTransform:function(){return xr.c},geoTransverseMercator:function(){return wn},geoTransverseMercatorRaw:function(){return An}});var d=e(95384),S=e(13696),n=e(24052),E=e(61780),T=e(78284),v=e(2728),g=e(21676);function r(){var Tr=0,kr=0,Wr=960,zr=500,sn,un,Mn;return Mn={stream:function(Ln){return sn&&un===Ln?sn:sn=(0,g.c)(Tr,kr,Wr,zr)(un=Ln)},extent:function(Ln){return arguments.length?(Tr=+Ln[0][0],kr=+Ln[0][1],Wr=+Ln[1][0],zr=+Ln[1][1],sn=un=null,Mn):[[Tr,kr],[Wr,zr]]}}}var t=e(58196),o=e(88728),i=e(64528),f=e(70932),u=e(16016),l=(0,o.c)(),m,h,w,c={sphere:f.c,point:f.c,lineStart:a,lineEnd:f.c,polygonStart:f.c,polygonEnd:f.c};function a(){c.point=x,c.lineEnd=p}function p(){c.point=c.lineEnd=f.c}function x(Tr,kr){Tr*=i.qw,kr*=i.qw,m=Tr,h=(0,i.g$)(kr),w=(0,i.W8)(kr),c.point=A}function A(Tr,kr){Tr*=i.qw,kr*=i.qw;var Wr=(0,i.g$)(kr),zr=(0,i.W8)(kr),sn=(0,i.a2)(Tr-m),un=(0,i.W8)(sn),Mn=(0,i.g$)(sn),Ln=zr*Mn,Un=w*Wr-h*zr*un,ai=h*Wr+w*zr*un;l.add((0,i.WE)((0,i._I)(Ln*Ln+Un*Un),ai)),m=Tr,h=Wr,w=zr}function P(Tr){return l.reset(),(0,u.c)(Tr,c),+l}var y=[null,null],C={type:"LineString",coordinates:y};function M(Tr,kr){return y[0]=Tr,y[1]=kr,P(C)}var s={Feature:function(Tr,kr){return b(Tr.geometry,kr)},FeatureCollection:function(Tr,kr){for(var Wr=Tr.features,zr=-1,sn=Wr.length;++zr<sn;)if(b(Wr[zr].geometry,kr))return!0;return!1}},_={Sphere:function(){return!0},Point:function(Tr,kr){return k(Tr.coordinates,kr)},MultiPoint:function(Tr,kr){for(var Wr=Tr.coordinates,zr=-1,sn=Wr.length;++zr<sn;)if(k(Wr[zr],kr))return!0;return!1},LineString:function(Tr,kr){return D(Tr.coordinates,kr)},MultiLineString:function(Tr,kr){for(var Wr=Tr.coordinates,zr=-1,sn=Wr.length;++zr<sn;)if(D(Wr[zr],kr))return!0;return!1},Polygon:function(Tr,kr){return V(Tr.coordinates,kr)},MultiPolygon:function(Tr,kr){for(var Wr=Tr.coordinates,zr=-1,sn=Wr.length;++zr<sn;)if(V(Wr[zr],kr))return!0;return!1},GeometryCollection:function(Tr,kr){for(var Wr=Tr.geometries,zr=-1,sn=Wr.length;++zr<sn;)if(b(Wr[zr],kr))return!0;return!1}};function b(Tr,kr){return Tr&&_.hasOwnProperty(Tr.type)?_[Tr.type](Tr,kr):!1}function k(Tr,kr){return M(Tr,kr)===0}function D(Tr,kr){for(var Wr,zr,sn,un=0,Mn=Tr.length;un<Mn;un++){if(zr=M(Tr[un],kr),zr===0||un>0&&(sn=M(Tr[un],Tr[un-1]),sn>0&&Wr<=sn&&zr<=sn&&(Wr+zr-sn)*(1-Math.pow((Wr-zr)/sn,2))<i.a8*sn))return!0;Wr=zr}return!1}function V(Tr,kr){return!!(0,t.c)(Tr.map(O),N(kr))}function O(Tr){return Tr=Tr.map(N),Tr.pop(),Tr}function N(Tr){return[Tr[0]*i.qw,Tr[1]*i.qw]}function B(Tr,kr){return(Tr&&s.hasOwnProperty(Tr.type)?s[Tr.type]:b)(Tr,kr)}var z=e(84706);function H(Tr,kr,Wr){var zr=(0,z.ik)(Tr,kr-i.Gg,Wr).concat(kr);return function(sn){return zr.map(function(un){return[sn,un]})}}function X(Tr,kr,Wr){var zr=(0,z.ik)(Tr,kr-i.Gg,Wr).concat(kr);return function(sn){return zr.map(function(un){return[un,sn]})}}function $(){var Tr,kr,Wr,zr,sn,un,Mn,Ln,Un=10,ai=Un,yi=90,bi=360,Hn,Kn,yr,qr,Kr=2.5;function hn(){return{type:"MultiLineString",coordinates:zn()}}function zn(){return(0,z.ik)((0,i.Km)(zr/yi)*yi,Wr,yi).map(yr).concat((0,z.ik)((0,i.Km)(Ln/bi)*bi,Mn,bi).map(qr)).concat((0,z.ik)((0,i.Km)(kr/Un)*Un,Tr,Un).filter(function(xn){return(0,i.a2)(xn%yi)>i.Gg}).map(Hn)).concat((0,z.ik)((0,i.Km)(un/ai)*ai,sn,ai).filter(function(xn){return(0,i.a2)(xn%bi)>i.Gg}).map(Kn))}return hn.lines=function(){return zn().map(function(xn){return{type:"LineString",coordinates:xn}})},hn.outline=function(){return{type:"Polygon",coordinates:[yr(zr).concat(qr(Mn).slice(1),yr(Wr).reverse().slice(1),qr(Ln).reverse().slice(1))]}},hn.extent=function(xn){return arguments.length?hn.extentMajor(xn).extentMinor(xn):hn.extentMinor()},hn.extentMajor=function(xn){return arguments.length?(zr=+xn[0][0],Wr=+xn[1][0],Ln=+xn[0][1],Mn=+xn[1][1],zr>Wr&&(xn=zr,zr=Wr,Wr=xn),Ln>Mn&&(xn=Ln,Ln=Mn,Mn=xn),hn.precision(Kr)):[[zr,Ln],[Wr,Mn]]},hn.extentMinor=function(xn){return arguments.length?(kr=+xn[0][0],Tr=+xn[1][0],un=+xn[0][1],sn=+xn[1][1],kr>Tr&&(xn=kr,kr=Tr,Tr=xn),un>sn&&(xn=un,un=sn,sn=xn),hn.precision(Kr)):[[kr,un],[Tr,sn]]},hn.step=function(xn){return arguments.length?hn.stepMajor(xn).stepMinor(xn):hn.stepMinor()},hn.stepMajor=function(xn){return arguments.length?(yi=+xn[0],bi=+xn[1],hn):[yi,bi]},hn.stepMinor=function(xn){return arguments.length?(Un=+xn[0],ai=+xn[1],hn):[Un,ai]},hn.precision=function(xn){return arguments.length?(Kr=+xn,Hn=H(un,sn,90),Kn=X(kr,Tr,Kr),yr=H(Ln,Mn,90),qr=X(zr,Wr,Kr),hn):Kr},hn.extentMajor([[-180,-90+i.Gg],[180,90-i.Gg]]).extentMinor([[-180,-80-i.Gg],[180,80+i.Gg]])}function ne(){return $()()}var q=e(27284),ue=e(7376),te=(0,o.c)(),J=(0,o.c)(),ie,K,ee,le,j={point:f.c,lineStart:f.c,lineEnd:f.c,polygonStart:function(){j.lineStart=Z,j.lineEnd=ce},polygonEnd:function(){j.lineStart=j.lineEnd=j.point=f.c,te.add((0,i.a2)(J)),J.reset()},result:function(){var Tr=te/2;return te.reset(),Tr}};function Z(){j.point=fe}function fe(Tr,kr){j.point=re,ie=ee=Tr,K=le=kr}function re(Tr,kr){J.add(le*Tr-ee*kr),ee=Tr,le=kr}function ce(){re(ie,K)}var xe=j,Te=e(73784),we=0,_e=0,ke=0,Ne=0,Ee=0,ze=0,Ce=0,Oe=0,Le=0,Ge,rt,ot,$e,qe={point:ht,lineStart:vt,lineEnd:Et,polygonStart:function(){qe.lineStart=nt,qe.lineEnd=Fe},polygonEnd:function(){qe.point=ht,qe.lineStart=vt,qe.lineEnd=Et},result:function(){var Tr=Le?[Ce/Le,Oe/Le]:ze?[Ne/ze,Ee/ze]:ke?[we/ke,_e/ke]:[NaN,NaN];return we=_e=ke=Ne=Ee=ze=Ce=Oe=Le=0,Tr}};function ht(Tr,kr){we+=Tr,_e+=kr,++ke}function vt(){qe.point=pt}function pt(Tr,kr){qe.point=wt,ht(ot=Tr,$e=kr)}function wt(Tr,kr){var Wr=Tr-ot,zr=kr-$e,sn=(0,i._I)(Wr*Wr+zr*zr);Ne+=sn*(ot+Tr)/2,Ee+=sn*($e+kr)/2,ze+=sn,ht(ot=Tr,$e=kr)}function Et(){qe.point=ht}function nt(){qe.point=We}function Fe(){Ze(Ge,rt)}function We(Tr,kr){qe.point=Ze,ht(Ge=ot=Tr,rt=$e=kr)}function Ze(Tr,kr){var Wr=Tr-ot,zr=kr-$e,sn=(0,i._I)(Wr*Wr+zr*zr);Ne+=sn*(ot+Tr)/2,Ee+=sn*($e+kr)/2,ze+=sn,sn=$e*Tr-ot*kr,Ce+=sn*(ot+Tr),Oe+=sn*($e+kr),Le+=sn*3,ht(ot=Tr,$e=kr)}var Ye=qe;function Ie(Tr){this._context=Tr}Ie.prototype={_radius:4.5,pointRadius:function(Tr){return this._radius=Tr,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Tr,kr){switch(this._point){case 0:{this._context.moveTo(Tr,kr),this._point=1;break}case 1:{this._context.lineTo(Tr,kr);break}default:{this._context.moveTo(Tr+this._radius,kr),this._context.arc(Tr,kr,this._radius,0,i.kD);break}}},result:f.c};var De=(0,o.c)(),je,Re,pe,be,Ue,et={point:f.c,lineStart:function(){et.point=st},lineEnd:function(){je&&lt(Re,pe),et.point=f.c},polygonStart:function(){je=!0},polygonEnd:function(){je=null},result:function(){var Tr=+De;return De.reset(),Tr}};function st(Tr,kr){et.point=lt,Re=be=Tr,pe=Ue=kr}function lt(Tr,kr){be-=Tr,Ue-=kr,De.add((0,i._I)(be*be+Ue*Ue)),be=Tr,Ue=kr}var Gt=et;function Zt(){this._string=[]}Zt.prototype={_radius:4.5,_circle:Tt(4.5),pointRadius:function(Tr){return(Tr=+Tr)!==this._radius&&(this._radius=Tr,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Tr,kr){switch(this._point){case 0:{this._string.push("M",Tr,",",kr),this._point=1;break}case 1:{this._string.push("L",Tr,",",kr);break}default:{this._circle==null&&(this._circle=Tt(this._radius)),this._string.push("M",Tr,",",kr,this._circle);break}}},result:function(){if(this._string.length){var Tr=this._string.join("");return this._string=[],Tr}else return null}};function Tt(Tr){return"m0,"+Tr+"a"+Tr+","+Tr+" 0 1,1 0,"+-2*Tr+"a"+Tr+","+Tr+" 0 1,1 0,"+2*Tr+"z"}function It(Tr,kr){var Wr=4.5,zr,sn;function un(Mn){return Mn&&(typeof Wr=="function"&&sn.pointRadius(+Wr.apply(this,arguments)),(0,u.c)(Mn,zr(sn))),sn.result()}return un.area=function(Mn){return(0,u.c)(Mn,zr(xe)),xe.result()},un.measure=function(Mn){return(0,u.c)(Mn,zr(Gt)),Gt.result()},un.bounds=function(Mn){return(0,u.c)(Mn,zr(Te.c)),Te.c.result()},un.centroid=function(Mn){return(0,u.c)(Mn,zr(Ye)),Ye.result()},un.projection=function(Mn){return arguments.length?(zr=Mn==null?(Tr=null,ue.c):(Tr=Mn).stream,un):Tr},un.context=function(Mn){return arguments.length?(sn=Mn==null?(kr=null,new Zt):new Ie(kr=Mn),typeof Wr!="function"&&sn.pointRadius(Wr),un):kr},un.pointRadius=function(Mn){return arguments.length?(Wr=typeof Mn=="function"?Mn:(sn.pointRadius(+Mn),+Mn),un):Wr},un.projection(Tr).context(kr)}var Xt=e(87952);function gr(Tr){var kr=0,Wr=i.pi/3,zr=(0,Xt.U)(Tr),sn=zr(kr,Wr);return sn.parallels=function(un){return arguments.length?zr(kr=un[0]*i.qw,Wr=un[1]*i.qw):[kr*i.oh,Wr*i.oh]},sn}function gt(Tr){var kr=(0,i.W8)(Tr);function Wr(zr,sn){return[zr*kr,(0,i.g$)(sn)/kr]}return Wr.invert=function(zr,sn){return[zr/kr,(0,i.qR)(sn*kr)]},Wr}function jt(Tr,kr){var Wr=(0,i.g$)(Tr),zr=(Wr+(0,i.g$)(kr))/2;if((0,i.a2)(zr)<i.Gg)return gt(Tr);var sn=1+Wr*(2*zr-Wr),un=(0,i._I)(sn)/zr;function Mn(Ln,Un){var ai=(0,i._I)(sn-2*zr*(0,i.g$)(Un))/zr;return[ai*(0,i.g$)(Ln*=zr),un-ai*(0,i.W8)(Ln)]}return Mn.invert=function(Ln,Un){var ai=un-Un,yi=(0,i.WE)(Ln,(0,i.a2)(ai))*(0,i.kq)(ai);return ai*zr<0&&(yi-=i.pi*(0,i.kq)(Ln)*(0,i.kq)(ai)),[yi/zr,(0,i.qR)((sn-(Ln*Ln+ai*ai)*zr*zr)/(2*zr))]},Mn}function Qt(){return gr(jt).scale(155.424).center([0,33.6442])}function mr(){return Qt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var or=e(86420);function mt(Tr){var kr=Tr.length;return{point:function(Wr,zr){for(var sn=-1;++sn<kr;)Tr[sn].point(Wr,zr)},sphere:function(){for(var Wr=-1;++Wr<kr;)Tr[Wr].sphere()},lineStart:function(){for(var Wr=-1;++Wr<kr;)Tr[Wr].lineStart()},lineEnd:function(){for(var Wr=-1;++Wr<kr;)Tr[Wr].lineEnd()},polygonStart:function(){for(var Wr=-1;++Wr<kr;)Tr[Wr].polygonStart()},polygonEnd:function(){for(var Wr=-1;++Wr<kr;)Tr[Wr].polygonEnd()}}}function ut(){var Tr,kr,Wr=mr(),zr,sn=Qt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),un,Mn=Qt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ln,Un,ai={point:function(Hn,Kn){Un=[Hn,Kn]}};function yi(Hn){var Kn=Hn[0],yr=Hn[1];return Un=null,zr.point(Kn,yr),Un||(un.point(Kn,yr),Un)||(Ln.point(Kn,yr),Un)}yi.invert=function(Hn){var Kn=Wr.scale(),yr=Wr.translate(),qr=(Hn[0]-yr[0])/Kn,Kr=(Hn[1]-yr[1])/Kn;return(Kr>=.12&&Kr<.234&&qr>=-.425&&qr<-.214?sn:Kr>=.166&&Kr<.234&&qr>=-.214&&qr<-.115?Mn:Wr).invert(Hn)},yi.stream=function(Hn){return Tr&&kr===Hn?Tr:Tr=mt([Wr.stream(kr=Hn),sn.stream(Hn),Mn.stream(Hn)])},yi.precision=function(Hn){return arguments.length?(Wr.precision(Hn),sn.precision(Hn),Mn.precision(Hn),bi()):Wr.precision()},yi.scale=function(Hn){return arguments.length?(Wr.scale(Hn),sn.scale(Hn*.35),Mn.scale(Hn),yi.translate(Wr.translate())):Wr.scale()},yi.translate=function(Hn){if(!arguments.length)return Wr.translate();var Kn=Wr.scale(),yr=+Hn[0],qr=+Hn[1];return zr=Wr.translate(Hn).clipExtent([[yr-.455*Kn,qr-.238*Kn],[yr+.455*Kn,qr+.238*Kn]]).stream(ai),un=sn.translate([yr-.307*Kn,qr+.201*Kn]).clipExtent([[yr-.425*Kn+i.Gg,qr+.12*Kn+i.Gg],[yr-.214*Kn-i.Gg,qr+.234*Kn-i.Gg]]).stream(ai),Ln=Mn.translate([yr-.205*Kn,qr+.212*Kn]).clipExtent([[yr-.214*Kn+i.Gg,qr+.166*Kn+i.Gg],[yr-.115*Kn-i.Gg,qr+.234*Kn-i.Gg]]).stream(ai),bi()},yi.fitExtent=function(Hn,Kn){return(0,or.QX)(yi,Hn,Kn)},yi.fitSize=function(Hn,Kn){return(0,or.UV)(yi,Hn,Kn)},yi.fitWidth=function(Hn,Kn){return(0,or.Qx)(yi,Hn,Kn)},yi.fitHeight=function(Hn,Kn){return(0,or.OW)(yi,Hn,Kn)};function bi(){return Tr=kr=null,yi}return yi.scale(1070)}var bt=e(54724),St=e(69020),Pt=e(92992);function Ht(Tr,kr){return[Tr,(0,i.Yz)((0,i.a6)((i.or+kr)/2))]}Ht.invert=function(Tr,kr){return[Tr,2*(0,i.MQ)((0,i.oN)(kr))-i.or]};function Bt(){return Nt(Ht).scale(961/i.kD)}function Nt(Tr){var kr=(0,Xt.c)(Tr),Wr=kr.center,zr=kr.scale,sn=kr.translate,un=kr.clipExtent,Mn=null,Ln,Un,ai;kr.scale=function(bi){return arguments.length?(zr(bi),yi()):zr()},kr.translate=function(bi){return arguments.length?(sn(bi),yi()):sn()},kr.center=function(bi){return arguments.length?(Wr(bi),yi()):Wr()},kr.clipExtent=function(bi){return arguments.length?(bi==null?Mn=Ln=Un=ai=null:(Mn=+bi[0][0],Ln=+bi[0][1],Un=+bi[1][0],ai=+bi[1][1]),yi()):Mn==null?null:[[Mn,Ln],[Un,ai]]};function yi(){var bi=i.pi*zr(),Hn=kr((0,Pt.c)(kr.rotate()).invert([0,0]));return un(Mn==null?[[Hn[0]-bi,Hn[1]-bi],[Hn[0]+bi,Hn[1]+bi]]:Tr===Ht?[[Math.max(Hn[0]-bi,Mn),Ln],[Math.min(Hn[0]+bi,Un),ai]]:[[Mn,Math.max(Hn[1]-bi,Ln)],[Un,Math.min(Hn[1]+bi,ai)]])}return yi()}function Kt(Tr){return(0,i.a6)((i.or+Tr)/2)}function fr(Tr,kr){var Wr=(0,i.W8)(Tr),zr=Tr===kr?(0,i.g$)(Tr):(0,i.Yz)(Wr/(0,i.W8)(kr))/(0,i.Yz)(Kt(kr)/Kt(Tr)),sn=Wr*(0,i.g3)(Kt(Tr),zr)/zr;if(!zr)return Ht;function un(Mn,Ln){sn>0?Ln<-i.or+i.Gg&&(Ln=-i.or+i.Gg):Ln>i.or-i.Gg&&(Ln=i.or-i.Gg);var Un=sn/(0,i.g3)(Kt(Ln),zr);return[Un*(0,i.g$)(zr*Mn),sn-Un*(0,i.W8)(zr*Mn)]}return un.invert=function(Mn,Ln){var Un=sn-Ln,ai=(0,i.kq)(zr)*(0,i._I)(Mn*Mn+Un*Un),yi=(0,i.WE)(Mn,(0,i.a2)(Un))*(0,i.kq)(Un);return Un*zr<0&&(yi-=i.pi*(0,i.kq)(Mn)*(0,i.kq)(Un)),[yi/zr,2*(0,i.MQ)((0,i.g3)(sn/ai,1/zr))-i.or]},un}function cr(){return gr(fr).scale(109.5).parallels([30,30])}var dr=e(69604);function Xe(Tr,kr){var Wr=(0,i.W8)(Tr),zr=Tr===kr?(0,i.g$)(Tr):(Wr-(0,i.W8)(kr))/(kr-Tr),sn=Wr/zr+Tr;if((0,i.a2)(zr)<i.Gg)return dr.u;function un(Mn,Ln){var Un=sn-Ln,ai=zr*Mn;return[Un*(0,i.g$)(ai),sn-Un*(0,i.W8)(ai)]}return un.invert=function(Mn,Ln){var Un=sn-Ln,ai=(0,i.WE)(Mn,(0,i.a2)(Un))*(0,i.kq)(Un);return Un*zr<0&&(ai-=i.pi*(0,i.kq)(Mn)*(0,i.kq)(Un)),[ai/zr,sn-(0,i.kq)(zr)*(0,i._I)(Mn*Mn+Un*Un)]},un}function He(){return gr(Xe).scale(131.154).center([0,13.9389])}var zt=1.340264,Rt=-.081106,Jt=893e-6,sr=.003796,ur=(0,i._I)(3)/2,er=12;function Ft(Tr,kr){var Wr=(0,i.qR)(ur*(0,i.g$)(kr)),zr=Wr*Wr,sn=zr*zr*zr;return[Tr*(0,i.W8)(Wr)/(ur*(zt+3*Rt*zr+sn*(7*Jt+9*sr*zr))),Wr*(zt+Rt*zr+sn*(Jt+sr*zr))]}Ft.invert=function(Tr,kr){for(var Wr=kr,zr=Wr*Wr,sn=zr*zr*zr,un=0,Mn,Ln,Un;un<er&&(Ln=Wr*(zt+Rt*zr+sn*(Jt+sr*zr))-kr,Un=zt+3*Rt*zr+sn*(7*Jt+9*sr*zr),Wr-=Mn=Ln/Un,zr=Wr*Wr,sn=zr*zr*zr,!((0,i.a2)(Mn)<i.a8));++un);return[ur*Tr*(zt+3*Rt*zr+sn*(7*Jt+9*sr*zr))/(0,i.W8)(Wr),(0,i.qR)((0,i.g$)(Wr)/ur)]};function ir(){return(0,Xt.c)(Ft).scale(177.158)}var hr=e(53285),xr=e(15196);function vr(){var Tr=1,kr=0,Wr=0,zr=1,sn=1,un=0,Mn,Ln,Un=null,ai,yi,bi,Hn=1,Kn=1,yr=(0,xr.s)({point:function(Tn,On){var Jn=xn([Tn,On]);this.stream.point(Jn[0],Jn[1])}}),qr=ue.c,Kr,hn;function zn(){return Hn=Tr*zr,Kn=Tr*sn,Kr=hn=null,xn}function xn(Tn){var On=Tn[0]*Hn,Jn=Tn[1]*Kn;if(un){var hi=Jn*Mn-On*Ln;On=On*Mn+Jn*Ln,Jn=hi}return[On+kr,Jn+Wr]}return xn.invert=function(Tn){var On=Tn[0]-kr,Jn=Tn[1]-Wr;if(un){var hi=Jn*Mn+On*Ln;On=On*Mn-Jn*Ln,Jn=hi}return[On/Hn,Jn/Kn]},xn.stream=function(Tn){return Kr&&hn===Tn?Kr:Kr=yr(qr(hn=Tn))},xn.postclip=function(Tn){return arguments.length?(qr=Tn,Un=ai=yi=bi=null,zn()):qr},xn.clipExtent=function(Tn){return arguments.length?(qr=Tn==null?(Un=ai=yi=bi=null,ue.c):(0,g.c)(Un=+Tn[0][0],ai=+Tn[0][1],yi=+Tn[1][0],bi=+Tn[1][1]),zn()):Un==null?null:[[Un,ai],[yi,bi]]},xn.scale=function(Tn){return arguments.length?(Tr=+Tn,zn()):Tr},xn.translate=function(Tn){return arguments.length?(kr=+Tn[0],Wr=+Tn[1],zn()):[kr,Wr]},xn.angle=function(Tn){return arguments.length?(un=Tn%360*i.qw,Ln=(0,i.g$)(un),Mn=(0,i.W8)(un),zn()):un*i.oh},xn.reflectX=function(Tn){return arguments.length?(zr=Tn?-1:1,zn()):zr<0},xn.reflectY=function(Tn){return arguments.length?(sn=Tn?-1:1,zn()):sn<0},xn.fitExtent=function(Tn,On){return(0,or.QX)(xn,Tn,On)},xn.fitSize=function(Tn,On){return(0,or.UV)(xn,Tn,On)},xn.fitWidth=function(Tn,On){return(0,or.Qx)(xn,Tn,On)},xn.fitHeight=function(Tn,On){return(0,or.OW)(xn,Tn,On)},xn}var Vr=e(47984),_r=e(4888),Rr=e(62280);function nn(Tr,kr){var Wr=(0,i.W8)(kr),zr=1+(0,i.W8)(Tr)*Wr;return[Wr*(0,i.g$)(Tr)/zr,(0,i.g$)(kr)/zr]}nn.invert=(0,Rr.g)(function(Tr){return 2*(0,i.MQ)(Tr)});function en(){return(0,Xt.c)(nn).scale(250).clipAngle(142)}function An(Tr,kr){return[(0,i.Yz)((0,i.a6)((i.or+kr)/2)),-Tr]}An.invert=function(Tr,kr){return[-kr,2*(0,i.MQ)((0,i.oN)(Tr))-i.or]};function wn(){var Tr=Nt(An),kr=Tr.center,Wr=Tr.rotate;return Tr.center=function(zr){return arguments.length?kr([-zr[1],zr[0]]):(zr=kr(),[zr[1],-zr[0]])},Tr.rotate=function(zr){return arguments.length?Wr([zr[0],zr[1],zr.length>2?zr[2]+90:90]):(zr=Wr(),[zr[0],zr[1],zr[2]-90])},Wr([0,0,90]).scale(159.155)}},27284:function(U,F,e){e.d(F,{c:function(){return S}});var d=e(64528);function S(n,E){var T=n[0]*d.qw,v=n[1]*d.qw,g=E[0]*d.qw,r=E[1]*d.qw,t=(0,d.W8)(v),o=(0,d.g$)(v),i=(0,d.W8)(r),f=(0,d.g$)(r),u=t*(0,d.W8)(T),l=t*(0,d.g$)(T),m=i*(0,d.W8)(g),h=i*(0,d.g$)(g),w=2*(0,d.qR)((0,d._I)((0,d.SD)(r-v)+t*i*(0,d.SD)(g-T))),c=(0,d.g$)(w),a=w?function(p){var x=(0,d.g$)(p*=w)/c,A=(0,d.g$)(w-p)/c,P=A*u+x*m,y=A*l+x*h,C=A*o+x*f;return[(0,d.WE)(y,P)*d.oh,(0,d.WE)(C,(0,d._I)(P*P+y*y))*d.oh]}:function(){return[T*d.oh,v*d.oh]};return a.distance=w,a}},64528:function(U,F,e){e.d(F,{Gg:function(){return d},Km:function(){return u},MQ:function(){return o},SD:function(){return P},W8:function(){return f},WE:function(){return i},Yz:function(){return m},_I:function(){return a},a2:function(){return t},a6:function(){return p},a8:function(){return S},g$:function(){return w},g3:function(){return h},kD:function(){return v},kq:function(){return c},mE:function(){return x},oN:function(){return l},oh:function(){return g},or:function(){return E},pi:function(){return n},qR:function(){return A},qw:function(){return r},wL:function(){return T}});var d=1e-6,S=1e-12,n=Math.PI,E=n/2,T=n/4,v=n*2,g=180/n,r=n/180,t=Math.abs,o=Math.atan,i=Math.atan2,f=Math.cos,u=Math.ceil,l=Math.exp,m=Math.log,h=Math.pow,w=Math.sin,c=Math.sign||function(y){return y>0?1:y<0?-1:0},a=Math.sqrt,p=Math.tan;function x(y){return y>1?0:y<-1?n:Math.acos(y)}function A(y){return y>1?E:y<-1?-E:Math.asin(y)}function P(y){return(y=w(y/2))*y}},70932:function(U,F,e){e.d(F,{c:function(){return d}});function d(){}},73784:function(U,F,e){var d=e(70932),S=1/0,n=S,E=-S,T=E,v={point:g,lineStart:d.c,lineEnd:d.c,polygonStart:d.c,polygonEnd:d.c,result:function(){var r=[[S,n],[E,T]];return E=T=-(n=S=1/0),r}};function g(r,t){r<S&&(S=r),r>E&&(E=r),t<n&&(n=t),t>T&&(T=t)}F.c=v},41860:function(U,F,e){e.d(F,{c:function(){return S}});var d=e(64528);function S(n,E){return(0,d.a2)(n[0]-E[0])<d.Gg&&(0,d.a2)(n[1]-E[1])<d.Gg}},58196:function(U,F,e){e.d(F,{c:function(){return v}});var d=e(88728),S=e(84220),n=e(64528),E=(0,d.c)();function T(g){return(0,n.a2)(g[0])<=n.pi?g[0]:(0,n.kq)(g[0])*(((0,n.a2)(g[0])+n.pi)%n.kD-n.pi)}function v(g,r){var t=T(r),o=r[1],i=(0,n.g$)(o),f=[(0,n.g$)(t),-(0,n.W8)(t),0],u=0,l=0;E.reset(),i===1?o=n.or+n.Gg:i===-1&&(o=-n.or-n.Gg);for(var m=0,h=g.length;m<h;++m)if(c=(w=g[m]).length)for(var w,c,a=w[c-1],p=T(a),x=a[1]/2+n.wL,A=(0,n.g$)(x),P=(0,n.W8)(x),y=0;y<c;++y,p=M,A=_,P=b,a=C){var C=w[y],M=T(C),s=C[1]/2+n.wL,_=(0,n.g$)(s),b=(0,n.W8)(s),k=M-p,D=k>=0?1:-1,V=D*k,O=V>n.pi,N=A*_;if(E.add((0,n.WE)(N*D*(0,n.g$)(V),P*b+N*(0,n.W8)(V))),u+=O?k+D*n.kD:k,O^p>=t^M>=t){var B=(0,S.CW)((0,S.ux)(a),(0,S.ux)(C));(0,S.cJ)(B);var z=(0,S.CW)(f,B);(0,S.cJ)(z);var H=(O^k>=0?-1:1)*(0,n.qR)(z[2]);(o>H||o===H&&(B[0]||B[1]))&&(l+=O^k>=0?1:-1)}}return(u<-n.Gg||u<n.Gg&&E<-n.Gg)^l&1}},62280:function(U,F,e){e.d(F,{a:function(){return S},g:function(){return n}});var d=e(64528);function S(E){return function(T,v){var g=(0,d.W8)(T),r=(0,d.W8)(v),t=E(g*r);return[t*r*(0,d.g$)(T),t*(0,d.g$)(v)]}}function n(E){return function(T,v){var g=(0,d._I)(T*T+v*v),r=E(g),t=(0,d.g$)(r),o=(0,d.W8)(r);return[(0,d.WE)(T*t,g*o),(0,d.qR)(g&&v*t/g)]}}},54724:function(U,F,e){e.d(F,{c:function(){return T},y:function(){return E}});var d=e(64528),S=e(62280),n=e(87952),E=(0,S.a)(function(v){return(0,d._I)(2/(1+v))});E.invert=(0,S.g)(function(v){return 2*(0,d.qR)(v/2)});function T(){return(0,n.c)(E).scale(124.75).clipAngle(179.999)}},69020:function(U,F,e){e.d(F,{O:function(){return E},c:function(){return T}});var d=e(64528),S=e(62280),n=e(87952),E=(0,S.a)(function(v){return(v=(0,d.mE)(v))&&v/(0,d.g$)(v)});E.invert=(0,S.g)(function(v){return v});function T(){return(0,n.c)(E).scale(79.4188).clipAngle(179.999)}},69604:function(U,F,e){e.d(F,{c:function(){return n},u:function(){return S}});var d=e(87952);function S(E,T){return[E,T]}S.invert=S;function n(){return(0,d.c)(S).scale(152.63)}},86420:function(U,F,e){e.d(F,{OW:function(){return g},QX:function(){return E},Qx:function(){return v},UV:function(){return T}});var d=e(16016),S=e(73784);function n(r,t,o){var i=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),i!=null&&r.clipExtent(null),(0,d.c)(o,r.stream(S.c)),t(S.c.result()),i!=null&&r.clipExtent(i),r}function E(r,t,o){return n(r,function(i){var f=t[1][0]-t[0][0],u=t[1][1]-t[0][1],l=Math.min(f/(i[1][0]-i[0][0]),u/(i[1][1]-i[0][1])),m=+t[0][0]+(f-l*(i[1][0]+i[0][0]))/2,h=+t[0][1]+(u-l*(i[1][1]+i[0][1]))/2;r.scale(150*l).translate([m,h])},o)}function T(r,t,o){return E(r,[[0,0],t],o)}function v(r,t,o){return n(r,function(i){var f=+t,u=f/(i[1][0]-i[0][0]),l=(f-u*(i[1][0]+i[0][0]))/2,m=-u*i[0][1];r.scale(150*u).translate([l,m])},o)}function g(r,t,o){return n(r,function(i){var f=+t,u=f/(i[1][1]-i[0][1]),l=-u*i[0][0],m=(f-u*(i[1][1]+i[0][1]))/2;r.scale(150*u).translate([l,m])},o)}},53285:function(U,F,e){e.d(F,{Y:function(){return E},c:function(){return T}});var d=e(64528),S=e(62280),n=e(87952);function E(v,g){var r=(0,d.W8)(g),t=(0,d.W8)(v)*r;return[r*(0,d.g$)(v)/t,(0,d.g$)(g)/t]}E.invert=(0,S.g)(d.MQ);function T(){return(0,n.c)(E).scale(144.049).clipAngle(60)}},87952:function(U,F,e){e.d(F,{c:function(){return p},U:function(){return x}});var d=e(78284),S=e(2728),n=e(21676),E=e(68120),T=e(7376),v=e(64528),g=e(92992),r=e(15196),t=e(86420),o=e(84220),i=16,f=(0,v.W8)(30*v.qw);function u(A,P){return+P?m(A,P):l(A)}function l(A){return(0,r.s)({point:function(P,y){P=A(P,y),this.stream.point(P[0],P[1])}})}function m(A,P){function y(C,M,s,_,b,k,D,V,O,N,B,z,H,X){var $=D-C,ne=V-M,q=$*$+ne*ne;if(q>4*P&&H--){var ue=_+N,te=b+B,J=k+z,ie=(0,v._I)(ue*ue+te*te+J*J),K=(0,v.qR)(J/=ie),ee=(0,v.a2)((0,v.a2)(J)-1)<v.Gg||(0,v.a2)(s-O)<v.Gg?(s+O)/2:(0,v.WE)(te,ue),le=A(ee,K),j=le[0],Z=le[1],fe=j-C,re=Z-M,ce=ne*fe-$*re;(ce*ce/q>P||(0,v.a2)(($*fe+ne*re)/q-.5)>.3||_*N+b*B+k*z<f)&&(y(C,M,s,_,b,k,j,Z,ee,ue/=ie,te/=ie,J,H,X),X.point(j,Z),y(j,Z,ee,ue,te,J,D,V,O,N,B,z,H,X))}}return function(C){var M,s,_,b,k,D,V,O,N,B,z,H,X={point:$,lineStart:ne,lineEnd:ue,polygonStart:function(){C.polygonStart(),X.lineStart=te},polygonEnd:function(){C.polygonEnd(),X.lineStart=ne}};function $(K,ee){K=A(K,ee),C.point(K[0],K[1])}function ne(){O=NaN,X.point=q,C.lineStart()}function q(K,ee){var le=(0,o.ux)([K,ee]),j=A(K,ee);y(O,N,V,B,z,H,O=j[0],N=j[1],V=K,B=le[0],z=le[1],H=le[2],i,C),C.point(O,N)}function ue(){X.point=$,C.lineEnd()}function te(){ne(),X.point=J,X.lineEnd=ie}function J(K,ee){q(M=K,ee),s=O,_=N,b=B,k=z,D=H,X.point=q}function ie(){y(O,N,V,B,z,H,s,_,M,b,k,D,i,C),X.lineEnd=ue,ue()}return X}}var h=(0,r.s)({point:function(A,P){this.stream.point(A*v.qw,P*v.qw)}});function w(A){return(0,r.s)({point:function(P,y){var C=A(P,y);return this.stream.point(C[0],C[1])}})}function c(A,P,y,C,M){function s(_,b){return _*=C,b*=M,[P+A*_,y-A*b]}return s.invert=function(_,b){return[(_-P)/A*C,(y-b)/A*M]},s}function a(A,P,y,C,M,s){var _=(0,v.W8)(s),b=(0,v.g$)(s),k=_*A,D=b*A,V=_/A,O=b/A,N=(b*y-_*P)/A,B=(b*P+_*y)/A;function z(H,X){return H*=C,X*=M,[k*H-D*X+P,y-D*H-k*X]}return z.invert=function(H,X){return[C*(V*H-O*X+N),M*(B-O*H-V*X)]},z}function p(A){return x(function(){return A})()}function x(A){var P,y=150,C=480,M=250,s=0,_=0,b=0,k=0,D=0,V,O=0,N=1,B=1,z=null,H=d.c,X=null,$,ne,q,ue=T.c,te=.5,J,ie,K,ee,le;function j(ce){return K(ce[0]*v.qw,ce[1]*v.qw)}function Z(ce){return ce=K.invert(ce[0],ce[1]),ce&&[ce[0]*v.oh,ce[1]*v.oh]}j.stream=function(ce){return ee&&le===ce?ee:ee=h(w(V)(H(J(ue(le=ce)))))},j.preclip=function(ce){return arguments.length?(H=ce,z=void 0,re()):H},j.postclip=function(ce){return arguments.length?(ue=ce,X=$=ne=q=null,re()):ue},j.clipAngle=function(ce){return arguments.length?(H=+ce?(0,S.c)(z=ce*v.qw):(z=null,d.c),re()):z*v.oh},j.clipExtent=function(ce){return arguments.length?(ue=ce==null?(X=$=ne=q=null,T.c):(0,n.c)(X=+ce[0][0],$=+ce[0][1],ne=+ce[1][0],q=+ce[1][1]),re()):X==null?null:[[X,$],[ne,q]]},j.scale=function(ce){return arguments.length?(y=+ce,fe()):y},j.translate=function(ce){return arguments.length?(C=+ce[0],M=+ce[1],fe()):[C,M]},j.center=function(ce){return arguments.length?(s=ce[0]%360*v.qw,_=ce[1]%360*v.qw,fe()):[s*v.oh,_*v.oh]},j.rotate=function(ce){return arguments.length?(b=ce[0]%360*v.qw,k=ce[1]%360*v.qw,D=ce.length>2?ce[2]%360*v.qw:0,fe()):[b*v.oh,k*v.oh,D*v.oh]},j.angle=function(ce){return arguments.length?(O=ce%360*v.qw,fe()):O*v.oh},j.reflectX=function(ce){return arguments.length?(N=ce?-1:1,fe()):N<0},j.reflectY=function(ce){return arguments.length?(B=ce?-1:1,fe()):B<0},j.precision=function(ce){return arguments.length?(J=u(ie,te=ce*ce),re()):(0,v._I)(te)},j.fitExtent=function(ce,xe){return(0,t.QX)(j,ce,xe)},j.fitSize=function(ce,xe){return(0,t.UV)(j,ce,xe)},j.fitWidth=function(ce,xe){return(0,t.Qx)(j,ce,xe)},j.fitHeight=function(ce,xe){return(0,t.OW)(j,ce,xe)};function fe(){var ce=a(y,0,0,N,B,O).apply(null,P(s,_)),xe=(O?a:c)(y,C-ce[0],M-ce[1],N,B,O);return V=(0,g.O)(b,k,D),ie=(0,E.c)(P,xe),K=(0,E.c)(V,ie),J=u(ie,te),re()}function re(){return ee=le=null,j}return function(){return P=A.apply(this,arguments),j.invert=P.invert&&Z,fe()}}},47984:function(U,F,e){e.d(F,{c:function(){return E},g:function(){return n}});var d=e(87952),S=e(64528);function n(T,v){var g=v*v,r=g*g;return[T*(.8707-.131979*g+r*(-.013791+r*(.003971*g-.001529*r))),v*(1.007226+g*(.015085+r*(-.044475+.028874*g-.005916*r)))]}n.invert=function(T,v){var g=v,r=25,t;do{var o=g*g,i=o*o;g-=t=(g*(1.007226+o*(.015085+i*(-.044475+.028874*o-.005916*i)))-v)/(1.007226+o*(.045255+i*(-.311325+.259866*o-.06507600000000001*i)))}while((0,S.a2)(t)>S.Gg&&--r>0);return[T/(.8707+(o=g*g)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),g]};function E(){return(0,d.c)(n).scale(175.295)}},4888:function(U,F,e){e.d(F,{c:function(){return T},t:function(){return E}});var d=e(64528),S=e(62280),n=e(87952);function E(v,g){return[(0,d.W8)(g)*(0,d.g$)(v),(0,d.g$)(g)]}E.invert=(0,S.g)(d.qR);function T(){return(0,n.c)(E).scale(249.5).clipAngle(90+d.Gg)}},92992:function(U,F,e){e.d(F,{O:function(){return E},c:function(){return r}});var d=e(68120),S=e(64528);function n(t,o){return[(0,S.a2)(t)>S.pi?t+Math.round(-t/S.kD)*S.kD:t,o]}n.invert=n;function E(t,o,i){return(t%=S.kD)?o||i?(0,d.c)(v(t),g(o,i)):v(t):o||i?g(o,i):n}function T(t){return function(o,i){return o+=t,[o>S.pi?o-S.kD:o<-S.pi?o+S.kD:o,i]}}function v(t){var o=T(t);return o.invert=T(-t),o}function g(t,o){var i=(0,S.W8)(t),f=(0,S.g$)(t),u=(0,S.W8)(o),l=(0,S.g$)(o);function m(h,w){var c=(0,S.W8)(w),a=(0,S.W8)(h)*c,p=(0,S.g$)(h)*c,x=(0,S.g$)(w),A=x*i+a*f;return[(0,S.WE)(p*u-A*l,a*i-x*f),(0,S.qR)(A*u+p*l)]}return m.invert=function(h,w){var c=(0,S.W8)(w),a=(0,S.W8)(h)*c,p=(0,S.g$)(h)*c,x=(0,S.g$)(w),A=x*u-p*l;return[(0,S.WE)(p*u+x*l,a*i+A*f),(0,S.qR)(A*i-a*f)]},m}function r(t){t=E(t[0]*S.qw,t[1]*S.qw,t.length>2?t[2]*S.qw:0);function o(i){return i=t(i[0]*S.qw,i[1]*S.qw),i[0]*=S.oh,i[1]*=S.oh,i}return o.invert=function(i){return i=t.invert(i[0]*S.qw,i[1]*S.qw),i[0]*=S.oh,i[1]*=S.oh,i},o}},16016:function(U,F,e){e.d(F,{c:function(){return v}});function d(g,r){g&&n.hasOwnProperty(g.type)&&n[g.type](g,r)}var S={Feature:function(g,r){d(g.geometry,r)},FeatureCollection:function(g,r){for(var t=g.features,o=-1,i=t.length;++o<i;)d(t[o].geometry,r)}},n={Sphere:function(g,r){r.sphere()},Point:function(g,r){g=g.coordinates,r.point(g[0],g[1],g[2])},MultiPoint:function(g,r){for(var t=g.coordinates,o=-1,i=t.length;++o<i;)g=t[o],r.point(g[0],g[1],g[2])},LineString:function(g,r){E(g.coordinates,r,0)},MultiLineString:function(g,r){for(var t=g.coordinates,o=-1,i=t.length;++o<i;)E(t[o],r,0)},Polygon:function(g,r){T(g.coordinates,r)},MultiPolygon:function(g,r){for(var t=g.coordinates,o=-1,i=t.length;++o<i;)T(t[o],r)},GeometryCollection:function(g,r){for(var t=g.geometries,o=-1,i=t.length;++o<i;)d(t[o],r)}};function E(g,r,t){var o=-1,i=g.length-t,f;for(r.lineStart();++o<i;)f=g[o],r.point(f[0],f[1],f[2]);r.lineEnd()}function T(g,r){var t=-1,o=g.length;for(r.polygonStart();++t<o;)E(g[t],r,1);r.polygonEnd()}function v(g,r){g&&S.hasOwnProperty(g.type)?S[g.type](g,r):d(g,r)}},15196:function(U,F,e){e.d(F,{c:function(){return d},s:function(){return S}});function d(E){return{stream:S(E)}}function S(E){return function(T){var v=new n;for(var g in E)v[g]=E[g];return v.stream=T,v}}function n(){}n.prototype={constructor:n,point:function(E,T){this.stream.point(E,T)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(U,F,e){e.r(F),e.d(F,{cluster:function(){return r},hierarchy:function(){return A},pack:function(){return Z},packEnclose:function(){return k},packSiblings:function(){return J},partition:function(){return we},stratify:function(){return Ce},tree:function(){return vt},treemap:function(){return Fe},treemapBinary:function(){return We},treemapDice:function(){return Te},treemapResquarify:function(){return Ye},treemapSlice:function(){return pt},treemapSliceDice:function(){return Ze},treemapSquarify:function(){return nt}});function d(Ie,De){return Ie.parent===De.parent?1:2}function S(Ie){return Ie.reduce(n,0)/Ie.length}function n(Ie,De){return Ie+De.x}function E(Ie){return 1+Ie.reduce(T,0)}function T(Ie,De){return Math.max(Ie,De.y)}function v(Ie){for(var De;De=Ie.children;)Ie=De[0];return Ie}function g(Ie){for(var De;De=Ie.children;)Ie=De[De.length-1];return Ie}function r(){var Ie=d,De=1,je=1,Re=!1;function pe(be){var Ue,et=0;be.eachAfter(function(Tt){var It=Tt.children;It?(Tt.x=S(It),Tt.y=E(It)):(Tt.x=Ue?et+=Ie(Tt,Ue):0,Tt.y=0,Ue=Tt)});var st=v(be),lt=g(be),Gt=st.x-Ie(st,lt)/2,Zt=lt.x+Ie(lt,st)/2;return be.eachAfter(Re?function(Tt){Tt.x=(Tt.x-be.x)*De,Tt.y=(be.y-Tt.y)*je}:function(Tt){Tt.x=(Tt.x-Gt)/(Zt-Gt)*De,Tt.y=(1-(be.y?Tt.y/be.y:1))*je})}return pe.separation=function(be){return arguments.length?(Ie=be,pe):Ie},pe.size=function(be){return arguments.length?(Re=!1,De=+be[0],je=+be[1],pe):Re?null:[De,je]},pe.nodeSize=function(be){return arguments.length?(Re=!0,De=+be[0],je=+be[1],pe):Re?[De,je]:null},pe}function t(Ie){var De=0,je=Ie.children,Re=je&&je.length;if(!Re)De=1;else for(;--Re>=0;)De+=je[Re].value;Ie.value=De}function o(){return this.eachAfter(t)}function i(Ie){var De=this,je,Re=[De],pe,be,Ue;do for(je=Re.reverse(),Re=[];De=je.pop();)if(Ie(De),pe=De.children,pe)for(be=0,Ue=pe.length;be<Ue;++be)Re.push(pe[be]);while(Re.length);return this}function f(Ie){for(var De=this,je=[De],Re,pe;De=je.pop();)if(Ie(De),Re=De.children,Re)for(pe=Re.length-1;pe>=0;--pe)je.push(Re[pe]);return this}function u(Ie){for(var De=this,je=[De],Re=[],pe,be,Ue;De=je.pop();)if(Re.push(De),pe=De.children,pe)for(be=0,Ue=pe.length;be<Ue;++be)je.push(pe[be]);for(;De=Re.pop();)Ie(De);return this}function l(Ie){return this.eachAfter(function(De){for(var je=+Ie(De.data)||0,Re=De.children,pe=Re&&Re.length;--pe>=0;)je+=Re[pe].value;De.value=je})}function m(Ie){return this.eachBefore(function(De){De.children&&De.children.sort(Ie)})}function h(Ie){for(var De=this,je=w(De,Ie),Re=[De];De!==je;)De=De.parent,Re.push(De);for(var pe=Re.length;Ie!==je;)Re.splice(pe,0,Ie),Ie=Ie.parent;return Re}function w(Ie,De){if(Ie===De)return Ie;var je=Ie.ancestors(),Re=De.ancestors(),pe=null;for(Ie=je.pop(),De=Re.pop();Ie===De;)pe=Ie,Ie=je.pop(),De=Re.pop();return pe}function c(){for(var Ie=this,De=[Ie];Ie=Ie.parent;)De.push(Ie);return De}function a(){var Ie=[];return this.each(function(De){Ie.push(De)}),Ie}function p(){var Ie=[];return this.eachBefore(function(De){De.children||Ie.push(De)}),Ie}function x(){var Ie=this,De=[];return Ie.each(function(je){je!==Ie&&De.push({source:je.parent,target:je})}),De}function A(Ie,De){var je=new s(Ie),Re=+Ie.value&&(je.value=Ie.value),pe,be=[je],Ue,et,st,lt;for(De==null&&(De=y);pe=be.pop();)if(Re&&(pe.value=+pe.data.value),(et=De(pe.data))&&(lt=et.length))for(pe.children=new Array(lt),st=lt-1;st>=0;--st)be.push(Ue=pe.children[st]=new s(et[st])),Ue.parent=pe,Ue.depth=pe.depth+1;return je.eachBefore(M)}function P(){return A(this).eachBefore(C)}function y(Ie){return Ie.children}function C(Ie){Ie.data=Ie.data.data}function M(Ie){var De=0;do Ie.height=De;while((Ie=Ie.parent)&&Ie.height<++De)}function s(Ie){this.data=Ie,this.depth=this.height=0,this.parent=null}s.prototype=A.prototype={constructor:s,count:o,each:i,eachAfter:u,eachBefore:f,sum:l,sort:m,path:h,ancestors:c,descendants:a,leaves:p,links:x,copy:P};var _=Array.prototype.slice;function b(Ie){for(var De=Ie.length,je,Re;De;)Re=Math.random()*De--|0,je=Ie[De],Ie[De]=Ie[Re],Ie[Re]=je;return Ie}function k(Ie){for(var De=0,je=(Ie=b(_.call(Ie))).length,Re=[],pe,be;De<je;)pe=Ie[De],be&&O(be,pe)?++De:(be=B(Re=D(Re,pe)),De=0);return be}function D(Ie,De){var je,Re;if(N(De,Ie))return[De];for(je=0;je<Ie.length;++je)if(V(De,Ie[je])&&N(H(Ie[je],De),Ie))return[Ie[je],De];for(je=0;je<Ie.length-1;++je)for(Re=je+1;Re<Ie.length;++Re)if(V(H(Ie[je],Ie[Re]),De)&&V(H(Ie[je],De),Ie[Re])&&V(H(Ie[Re],De),Ie[je])&&N(X(Ie[je],Ie[Re],De),Ie))return[Ie[je],Ie[Re],De];throw new Error}function V(Ie,De){var je=Ie.r-De.r,Re=De.x-Ie.x,pe=De.y-Ie.y;return je<0||je*je<Re*Re+pe*pe}function O(Ie,De){var je=Ie.r-De.r+1e-6,Re=De.x-Ie.x,pe=De.y-Ie.y;return je>0&&je*je>Re*Re+pe*pe}function N(Ie,De){for(var je=0;je<De.length;++je)if(!O(Ie,De[je]))return!1;return!0}function B(Ie){switch(Ie.length){case 1:return z(Ie[0]);case 2:return H(Ie[0],Ie[1]);case 3:return X(Ie[0],Ie[1],Ie[2])}}function z(Ie){return{x:Ie.x,y:Ie.y,r:Ie.r}}function H(Ie,De){var je=Ie.x,Re=Ie.y,pe=Ie.r,be=De.x,Ue=De.y,et=De.r,st=be-je,lt=Ue-Re,Gt=et-pe,Zt=Math.sqrt(st*st+lt*lt);return{x:(je+be+st/Zt*Gt)/2,y:(Re+Ue+lt/Zt*Gt)/2,r:(Zt+pe+et)/2}}function X(Ie,De,je){var Re=Ie.x,pe=Ie.y,be=Ie.r,Ue=De.x,et=De.y,st=De.r,lt=je.x,Gt=je.y,Zt=je.r,Tt=Re-Ue,It=Re-lt,Xt=pe-et,gr=pe-Gt,gt=st-be,jt=Zt-be,Qt=Re*Re+pe*pe-be*be,mr=Qt-Ue*Ue-et*et+st*st,or=Qt-lt*lt-Gt*Gt+Zt*Zt,mt=It*Xt-Tt*gr,ut=(Xt*or-gr*mr)/(mt*2)-Re,bt=(gr*gt-Xt*jt)/mt,St=(It*mr-Tt*or)/(mt*2)-pe,Pt=(Tt*jt-It*gt)/mt,Ht=bt*bt+Pt*Pt-1,Bt=2*(be+ut*bt+St*Pt),Nt=ut*ut+St*St-be*be,Kt=-(Ht?(Bt+Math.sqrt(Bt*Bt-4*Ht*Nt))/(2*Ht):Nt/Bt);return{x:Re+ut+bt*Kt,y:pe+St+Pt*Kt,r:Kt}}function $(Ie,De,je){var Re=Ie.x-De.x,pe,be,Ue=Ie.y-De.y,et,st,lt=Re*Re+Ue*Ue;lt?(be=De.r+je.r,be*=be,st=Ie.r+je.r,st*=st,be>st?(pe=(lt+st-be)/(2*lt),et=Math.sqrt(Math.max(0,st/lt-pe*pe)),je.x=Ie.x-pe*Re-et*Ue,je.y=Ie.y-pe*Ue+et*Re):(pe=(lt+be-st)/(2*lt),et=Math.sqrt(Math.max(0,be/lt-pe*pe)),je.x=De.x+pe*Re-et*Ue,je.y=De.y+pe*Ue+et*Re)):(je.x=De.x+je.r,je.y=De.y)}function ne(Ie,De){var je=Ie.r+De.r-1e-6,Re=De.x-Ie.x,pe=De.y-Ie.y;return je>0&&je*je>Re*Re+pe*pe}function q(Ie){var De=Ie._,je=Ie.next._,Re=De.r+je.r,pe=(De.x*je.r+je.x*De.r)/Re,be=(De.y*je.r+je.y*De.r)/Re;return pe*pe+be*be}function ue(Ie){this._=Ie,this.next=null,this.previous=null}function te(Ie){if(!(pe=Ie.length))return 0;var De,je,Re,pe,be,Ue,et,st,lt,Gt,Zt;if(De=Ie[0],De.x=0,De.y=0,!(pe>1))return De.r;if(je=Ie[1],De.x=-je.r,je.x=De.r,je.y=0,!(pe>2))return De.r+je.r;$(je,De,Re=Ie[2]),De=new ue(De),je=new ue(je),Re=new ue(Re),De.next=Re.previous=je,je.next=De.previous=Re,Re.next=je.previous=De;e:for(et=3;et<pe;++et){$(De._,je._,Re=Ie[et]),Re=new ue(Re),st=je.next,lt=De.previous,Gt=je._.r,Zt=De._.r;do if(Gt<=Zt){if(ne(st._,Re._)){je=st,De.next=je,je.previous=De,--et;continue e}Gt+=st._.r,st=st.next}else{if(ne(lt._,Re._)){De=lt,De.next=je,je.previous=De,--et;continue e}Zt+=lt._.r,lt=lt.previous}while(st!==lt.next);for(Re.previous=De,Re.next=je,De.next=je.previous=je=Re,be=q(De);(Re=Re.next)!==je;)(Ue=q(Re))<be&&(De=Re,be=Ue);je=De.next}for(De=[je._],Re=je;(Re=Re.next)!==je;)De.push(Re._);for(Re=k(De),et=0;et<pe;++et)De=Ie[et],De.x-=Re.x,De.y-=Re.y;return Re.r}function J(Ie){return te(Ie),Ie}function ie(Ie){return Ie==null?null:K(Ie)}function K(Ie){if(typeof Ie!="function")throw new Error;return Ie}function ee(){return 0}function le(Ie){return function(){return Ie}}function j(Ie){return Math.sqrt(Ie.value)}function Z(){var Ie=null,De=1,je=1,Re=ee;function pe(be){return be.x=De/2,be.y=je/2,Ie?be.eachBefore(fe(Ie)).eachAfter(re(Re,.5)).eachBefore(ce(1)):be.eachBefore(fe(j)).eachAfter(re(ee,1)).eachAfter(re(Re,be.r/Math.min(De,je))).eachBefore(ce(Math.min(De,je)/(2*be.r))),be}return pe.radius=function(be){return arguments.length?(Ie=ie(be),pe):Ie},pe.size=function(be){return arguments.length?(De=+be[0],je=+be[1],pe):[De,je]},pe.padding=function(be){return arguments.length?(Re=typeof be=="function"?be:le(+be),pe):Re},pe}function fe(Ie){return function(De){De.children||(De.r=Math.max(0,+Ie(De)||0))}}function re(Ie,De){return function(je){if(Re=je.children){var Re,pe,be=Re.length,Ue=Ie(je)*De||0,et;if(Ue)for(pe=0;pe<be;++pe)Re[pe].r+=Ue;if(et=te(Re),Ue)for(pe=0;pe<be;++pe)Re[pe].r-=Ue;je.r=et+Ue}}}function ce(Ie){return function(De){var je=De.parent;De.r*=Ie,je&&(De.x=je.x+Ie*De.x,De.y=je.y+Ie*De.y)}}function xe(Ie){Ie.x0=Math.round(Ie.x0),Ie.y0=Math.round(Ie.y0),Ie.x1=Math.round(Ie.x1),Ie.y1=Math.round(Ie.y1)}function Te(Ie,De,je,Re,pe){for(var be=Ie.children,Ue,et=-1,st=be.length,lt=Ie.value&&(Re-De)/Ie.value;++et<st;)Ue=be[et],Ue.y0=je,Ue.y1=pe,Ue.x0=De,Ue.x1=De+=Ue.value*lt}function we(){var Ie=1,De=1,je=0,Re=!1;function pe(Ue){var et=Ue.height+1;return Ue.x0=Ue.y0=je,Ue.x1=Ie,Ue.y1=De/et,Ue.eachBefore(be(De,et)),Re&&Ue.eachBefore(xe),Ue}function be(Ue,et){return function(st){st.children&&Te(st,st.x0,Ue*(st.depth+1)/et,st.x1,Ue*(st.depth+2)/et);var lt=st.x0,Gt=st.y0,Zt=st.x1-je,Tt=st.y1-je;Zt<lt&&(lt=Zt=(lt+Zt)/2),Tt<Gt&&(Gt=Tt=(Gt+Tt)/2),st.x0=lt,st.y0=Gt,st.x1=Zt,st.y1=Tt}}return pe.round=function(Ue){return arguments.length?(Re=!!Ue,pe):Re},pe.size=function(Ue){return arguments.length?(Ie=+Ue[0],De=+Ue[1],pe):[Ie,De]},pe.padding=function(Ue){return arguments.length?(je=+Ue,pe):je},pe}var _e="$",ke={depth:-1},Ne={};function Ee(Ie){return Ie.id}function ze(Ie){return Ie.parentId}function Ce(){var Ie=Ee,De=ze;function je(Re){var pe,be,Ue=Re.length,et,st,lt,Gt=new Array(Ue),Zt,Tt,It={};for(be=0;be<Ue;++be)pe=Re[be],lt=Gt[be]=new s(pe),(Zt=Ie(pe,be,Re))!=null&&(Zt+="")&&(Tt=_e+(lt.id=Zt),It[Tt]=Tt in It?Ne:lt);for(be=0;be<Ue;++be)if(lt=Gt[be],Zt=De(Re[be],be,Re),Zt==null||!(Zt+="")){if(et)throw new Error("multiple roots");et=lt}else{if(st=It[_e+Zt],!st)throw new Error("missing: "+Zt);if(st===Ne)throw new Error("ambiguous: "+Zt);st.children?st.children.push(lt):st.children=[lt],lt.parent=st}if(!et)throw new Error("no root");if(et.parent=ke,et.eachBefore(function(Xt){Xt.depth=Xt.parent.depth+1,--Ue}).eachBefore(M),et.parent=null,Ue>0)throw new Error("cycle");return et}return je.id=function(Re){return arguments.length?(Ie=K(Re),je):Ie},je.parentId=function(Re){return arguments.length?(De=K(Re),je):De},je}function Oe(Ie,De){return Ie.parent===De.parent?1:2}function Le(Ie){var De=Ie.children;return De?De[0]:Ie.t}function Ge(Ie){var De=Ie.children;return De?De[De.length-1]:Ie.t}function rt(Ie,De,je){var Re=je/(De.i-Ie.i);De.c-=Re,De.s+=je,Ie.c+=Re,De.z+=je,De.m+=je}function ot(Ie){for(var De=0,je=0,Re=Ie.children,pe=Re.length,be;--pe>=0;)be=Re[pe],be.z+=De,be.m+=De,De+=be.s+(je+=be.c)}function $e(Ie,De,je){return Ie.a.parent===De.parent?Ie.a:je}function qe(Ie,De){this._=Ie,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=De}qe.prototype=Object.create(s.prototype);function ht(Ie){for(var De=new qe(Ie,0),je,Re=[De],pe,be,Ue,et;je=Re.pop();)if(be=je._.children)for(je.children=new Array(et=be.length),Ue=et-1;Ue>=0;--Ue)Re.push(pe=je.children[Ue]=new qe(be[Ue],Ue)),pe.parent=je;return(De.parent=new qe(null,0)).children=[De],De}function vt(){var Ie=Oe,De=1,je=1,Re=null;function pe(lt){var Gt=ht(lt);if(Gt.eachAfter(be),Gt.parent.m=-Gt.z,Gt.eachBefore(Ue),Re)lt.eachBefore(st);else{var Zt=lt,Tt=lt,It=lt;lt.eachBefore(function(Qt){Qt.x<Zt.x&&(Zt=Qt),Qt.x>Tt.x&&(Tt=Qt),Qt.depth>It.depth&&(It=Qt)});var Xt=Zt===Tt?1:Ie(Zt,Tt)/2,gr=Xt-Zt.x,gt=De/(Tt.x+Xt+gr),jt=je/(It.depth||1);lt.eachBefore(function(Qt){Qt.x=(Qt.x+gr)*gt,Qt.y=Qt.depth*jt})}return lt}function be(lt){var Gt=lt.children,Zt=lt.parent.children,Tt=lt.i?Zt[lt.i-1]:null;if(Gt){ot(lt);var It=(Gt[0].z+Gt[Gt.length-1].z)/2;Tt?(lt.z=Tt.z+Ie(lt._,Tt._),lt.m=lt.z-It):lt.z=It}else Tt&&(lt.z=Tt.z+Ie(lt._,Tt._));lt.parent.A=et(lt,Tt,lt.parent.A||Zt[0])}function Ue(lt){lt._.x=lt.z+lt.parent.m,lt.m+=lt.parent.m}function et(lt,Gt,Zt){if(Gt){for(var Tt=lt,It=lt,Xt=Gt,gr=Tt.parent.children[0],gt=Tt.m,jt=It.m,Qt=Xt.m,mr=gr.m,or;Xt=Ge(Xt),Tt=Le(Tt),Xt&&Tt;)gr=Le(gr),It=Ge(It),It.a=lt,or=Xt.z+Qt-Tt.z-gt+Ie(Xt._,Tt._),or>0&&(rt($e(Xt,lt,Zt),lt,or),gt+=or,jt+=or),Qt+=Xt.m,gt+=Tt.m,mr+=gr.m,jt+=It.m;Xt&&!Ge(It)&&(It.t=Xt,It.m+=Qt-jt),Tt&&!Le(gr)&&(gr.t=Tt,gr.m+=gt-mr,Zt=lt)}return Zt}function st(lt){lt.x*=De,lt.y=lt.depth*je}return pe.separation=function(lt){return arguments.length?(Ie=lt,pe):Ie},pe.size=function(lt){return arguments.length?(Re=!1,De=+lt[0],je=+lt[1],pe):Re?null:[De,je]},pe.nodeSize=function(lt){return arguments.length?(Re=!0,De=+lt[0],je=+lt[1],pe):Re?[De,je]:null},pe}function pt(Ie,De,je,Re,pe){for(var be=Ie.children,Ue,et=-1,st=be.length,lt=Ie.value&&(pe-je)/Ie.value;++et<st;)Ue=be[et],Ue.x0=De,Ue.x1=Re,Ue.y0=je,Ue.y1=je+=Ue.value*lt}var wt=(1+Math.sqrt(5))/2;function Et(Ie,De,je,Re,pe,be){for(var Ue=[],et=De.children,st,lt,Gt=0,Zt=0,Tt=et.length,It,Xt,gr=De.value,gt,jt,Qt,mr,or,mt,ut;Gt<Tt;){It=pe-je,Xt=be-Re;do gt=et[Zt++].value;while(!gt&&Zt<Tt);for(jt=Qt=gt,mt=Math.max(Xt/It,It/Xt)/(gr*Ie),ut=gt*gt*mt,or=Math.max(Qt/ut,ut/jt);Zt<Tt;++Zt){if(gt+=lt=et[Zt].value,lt<jt&&(jt=lt),lt>Qt&&(Qt=lt),ut=gt*gt*mt,mr=Math.max(Qt/ut,ut/jt),mr>or){gt-=lt;break}or=mr}Ue.push(st={value:gt,dice:It<Xt,children:et.slice(Gt,Zt)}),st.dice?Te(st,je,Re,pe,gr?Re+=Xt*gt/gr:be):pt(st,je,Re,gr?je+=It*gt/gr:pe,be),gr-=gt,Gt=Zt}return Ue}var nt=function Ie(De){function je(Re,pe,be,Ue,et){Et(De,Re,pe,be,Ue,et)}return je.ratio=function(Re){return Ie((Re=+Re)>1?Re:1)},je}(wt);function Fe(){var Ie=nt,De=!1,je=1,Re=1,pe=[0],be=ee,Ue=ee,et=ee,st=ee,lt=ee;function Gt(Tt){return Tt.x0=Tt.y0=0,Tt.x1=je,Tt.y1=Re,Tt.eachBefore(Zt),pe=[0],De&&Tt.eachBefore(xe),Tt}function Zt(Tt){var It=pe[Tt.depth],Xt=Tt.x0+It,gr=Tt.y0+It,gt=Tt.x1-It,jt=Tt.y1-It;gt<Xt&&(Xt=gt=(Xt+gt)/2),jt<gr&&(gr=jt=(gr+jt)/2),Tt.x0=Xt,Tt.y0=gr,Tt.x1=gt,Tt.y1=jt,Tt.children&&(It=pe[Tt.depth+1]=be(Tt)/2,Xt+=lt(Tt)-It,gr+=Ue(Tt)-It,gt-=et(Tt)-It,jt-=st(Tt)-It,gt<Xt&&(Xt=gt=(Xt+gt)/2),jt<gr&&(gr=jt=(gr+jt)/2),Ie(Tt,Xt,gr,gt,jt))}return Gt.round=function(Tt){return arguments.length?(De=!!Tt,Gt):De},Gt.size=function(Tt){return arguments.length?(je=+Tt[0],Re=+Tt[1],Gt):[je,Re]},Gt.tile=function(Tt){return arguments.length?(Ie=K(Tt),Gt):Ie},Gt.padding=function(Tt){return arguments.length?Gt.paddingInner(Tt).paddingOuter(Tt):Gt.paddingInner()},Gt.paddingInner=function(Tt){return arguments.length?(be=typeof Tt=="function"?Tt:le(+Tt),Gt):be},Gt.paddingOuter=function(Tt){return arguments.length?Gt.paddingTop(Tt).paddingRight(Tt).paddingBottom(Tt).paddingLeft(Tt):Gt.paddingTop()},Gt.paddingTop=function(Tt){return arguments.length?(Ue=typeof Tt=="function"?Tt:le(+Tt),Gt):Ue},Gt.paddingRight=function(Tt){return arguments.length?(et=typeof Tt=="function"?Tt:le(+Tt),Gt):et},Gt.paddingBottom=function(Tt){return arguments.length?(st=typeof Tt=="function"?Tt:le(+Tt),Gt):st},Gt.paddingLeft=function(Tt){return arguments.length?(lt=typeof Tt=="function"?Tt:le(+Tt),Gt):lt},Gt}function We(Ie,De,je,Re,pe){var be=Ie.children,Ue,et=be.length,st,lt=new Array(et+1);for(lt[0]=st=Ue=0;Ue<et;++Ue)lt[Ue+1]=st+=be[Ue].value;Gt(0,et,Ie.value,De,je,Re,pe);function Gt(Zt,Tt,It,Xt,gr,gt,jt){if(Zt>=Tt-1){var Qt=be[Zt];Qt.x0=Xt,Qt.y0=gr,Qt.x1=gt,Qt.y1=jt;return}for(var mr=lt[Zt],or=It/2+mr,mt=Zt+1,ut=Tt-1;mt<ut;){var bt=mt+ut>>>1;lt[bt]<or?mt=bt+1:ut=bt}or-lt[mt-1]<lt[mt]-or&&Zt+1<mt&&--mt;var St=lt[mt]-mr,Pt=It-St;if(gt-Xt>jt-gr){var Ht=(Xt*Pt+gt*St)/It;Gt(Zt,mt,St,Xt,gr,Ht,jt),Gt(mt,Tt,Pt,Ht,gr,gt,jt)}else{var Bt=(gr*Pt+jt*St)/It;Gt(Zt,mt,St,Xt,gr,gt,Bt),Gt(mt,Tt,Pt,Xt,Bt,gt,jt)}}}function Ze(Ie,De,je,Re,pe){(Ie.depth&1?pt:Te)(Ie,De,je,Re,pe)}var Ye=function Ie(De){function je(Re,pe,be,Ue,et){if((st=Re._squarify)&&st.ratio===De)for(var st,lt,Gt,Zt,Tt=-1,It,Xt=st.length,gr=Re.value;++Tt<Xt;){for(lt=st[Tt],Gt=lt.children,Zt=lt.value=0,It=Gt.length;Zt<It;++Zt)lt.value+=Gt[Zt].value;lt.dice?Te(lt,pe,be,Ue,be+=(et-be)*lt.value/gr):pt(lt,pe,be,pe+=(Ue-pe)*lt.value/gr,et),gr-=lt.value}else Re._squarify=st=Et(De,Re,pe,be,Ue,et),st.ratio=De}return je.ratio=function(Re){return Ie((Re=+Re)>1?Re:1)},je}(wt)},10132:function(U,F,e){e.d(F,{ak:function(){return h}});var d=Math.PI,S=2*d,n=1e-6,E=S-n;function T(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function v(){return new T}T.prototype=v.prototype={constructor:T,moveTo:function(w,c){this._+="M"+(this._x0=this._x1=+w)+","+(this._y0=this._y1=+c)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(w,c){this._+="L"+(this._x1=+w)+","+(this._y1=+c)},quadraticCurveTo:function(w,c,a,p){this._+="Q"+ +w+","+ +c+","+(this._x1=+a)+","+(this._y1=+p)},bezierCurveTo:function(w,c,a,p,x,A){this._+="C"+ +w+","+ +c+","+ +a+","+ +p+","+(this._x1=+x)+","+(this._y1=+A)},arcTo:function(w,c,a,p,x){w=+w,c=+c,a=+a,p=+p,x=+x;var A=this._x1,P=this._y1,y=a-w,C=p-c,M=A-w,s=P-c,_=M*M+s*s;if(x<0)throw new Error("negative radius: "+x);if(this._x1===null)this._+="M"+(this._x1=w)+","+(this._y1=c);else if(_>n)if(!(Math.abs(s*y-C*M)>n)||!x)this._+="L"+(this._x1=w)+","+(this._y1=c);else{var b=a-A,k=p-P,D=y*y+C*C,V=b*b+k*k,O=Math.sqrt(D),N=Math.sqrt(_),B=x*Math.tan((d-Math.acos((D+_-V)/(2*O*N)))/2),z=B/N,H=B/O;Math.abs(z-1)>n&&(this._+="L"+(w+z*M)+","+(c+z*s)),this._+="A"+x+","+x+",0,0,"+ +(s*b>M*k)+","+(this._x1=w+H*y)+","+(this._y1=c+H*C)}},arc:function(w,c,a,p,x,A){w=+w,c=+c,a=+a,A=!!A;var P=a*Math.cos(p),y=a*Math.sin(p),C=w+P,M=c+y,s=1^A,_=A?p-x:x-p;if(a<0)throw new Error("negative radius: "+a);this._x1===null?this._+="M"+C+","+M:(Math.abs(this._x1-C)>n||Math.abs(this._y1-M)>n)&&(this._+="L"+C+","+M),a&&(_<0&&(_=_%S+S),_>E?this._+="A"+a+","+a+",0,1,"+s+","+(w-P)+","+(c-y)+"A"+a+","+a+",0,1,"+s+","+(this._x1=C)+","+(this._y1=M):_>n&&(this._+="A"+a+","+a+",0,"+ +(_>=d)+","+s+","+(this._x1=w+a*Math.cos(x))+","+(this._y1=c+a*Math.sin(x))))},rect:function(w,c,a,p){this._+="M"+(this._x0=this._x1=+w)+","+(this._y0=this._y1=+c)+"h"+ +a+"v"+ +p+"h"+-a+"Z"},toString:function(){return this._}};var g=v,r=Array.prototype.slice;function t(w){return function(){return w}}function o(w){return w[0]}function i(w){return w[1]}function f(w){return w.source}function u(w){return w.target}function l(w){var c=f,a=u,p=o,x=i,A=null;function P(){var y,C=r.call(arguments),M=c.apply(this,C),s=a.apply(this,C);if(A||(A=y=g()),w(A,+p.apply(this,(C[0]=M,C)),+x.apply(this,C),+p.apply(this,(C[0]=s,C)),+x.apply(this,C)),y)return A=null,y+""||null}return P.source=function(y){return arguments.length?(c=y,P):c},P.target=function(y){return arguments.length?(a=y,P):a},P.x=function(y){return arguments.length?(p=typeof y=="function"?y:t(+y),P):p},P.y=function(y){return arguments.length?(x=typeof y=="function"?y:t(+y),P):x},P.context=function(y){return arguments.length?(A=y??null,P):A},P}function m(w,c,a,p,x){w.moveTo(c,a),w.bezierCurveTo(c=(c+p)/2,a,c,x,p,x)}function h(){return l(m)}},94336:function(U,F,e){e.d(F,{Yn:function(){return We},m_:function(){return o},E9:function(){return Ze}});var d=e(8208),S=e(58931),n=e(46192),E=e(68936),T=e(32171),v=e(53528);function g(Ie){if(0<=Ie.y&&Ie.y<100){var De=new Date(-1,Ie.m,Ie.d,Ie.H,Ie.M,Ie.S,Ie.L);return De.setFullYear(Ie.y),De}return new Date(Ie.y,Ie.m,Ie.d,Ie.H,Ie.M,Ie.S,Ie.L)}function r(Ie){if(0<=Ie.y&&Ie.y<100){var De=new Date(Date.UTC(-1,Ie.m,Ie.d,Ie.H,Ie.M,Ie.S,Ie.L));return De.setUTCFullYear(Ie.y),De}return new Date(Date.UTC(Ie.y,Ie.m,Ie.d,Ie.H,Ie.M,Ie.S,Ie.L))}function t(Ie,De,je){return{y:Ie,m:De,d:je,H:0,M:0,S:0,L:0}}function o(Ie){var De=Ie.dateTime,je=Ie.date,Re=Ie.time,pe=Ie.periods,be=Ie.days,Ue=Ie.shortDays,et=Ie.months,st=Ie.shortMonths,lt=w(pe),Gt=c(pe),Zt=w(be),Tt=c(be),It=w(Ue),Xt=c(Ue),gr=w(et),gt=c(et),jt=w(st),Qt=c(st),mr={a:Xe,A:He,b:zt,B:Rt,c:null,d:$,e:$,f:J,H:ne,I:q,j:ue,L:te,m:ie,M:K,p:Jt,q:sr,Q:Et,s:nt,S:ee,u:le,U:j,V:Z,w:fe,W:re,x:null,X:null,y:ce,Y:xe,Z:Te,"%":wt},or={a:ur,A:er,b:Ft,B:ir,c:null,d:we,e:we,f:ze,H:_e,I:ke,j:Ne,L:Ee,m:Ce,M:Oe,p:hr,q:xr,Q:Et,s:nt,S:Le,u:Ge,U:rt,V:ot,w:$e,W:qe,x:null,X:null,y:ht,Y:vt,Z:pt,"%":wt},mt={a:Ht,A:Bt,b:Nt,B:Kt,c:fr,d:b,e:b,f:B,H:D,I:D,j:k,L:N,m:_,M:V,p:Pt,q:s,Q:H,s:X,S:O,u:p,U:x,V:A,w:a,W:P,x:cr,X:dr,y:C,Y:y,Z:M,"%":z};mr.x=ut(je,mr),mr.X=ut(Re,mr),mr.c=ut(De,mr),or.x=ut(je,or),or.X=ut(Re,or),or.c=ut(De,or);function ut(vr,Vr){return function(_r){var Rr=[],nn=-1,en=0,An=vr.length,wn,Tr,kr;for(_r instanceof Date||(_r=new Date(+_r));++nn<An;)vr.charCodeAt(nn)===37&&(Rr.push(vr.slice(en,nn)),(Tr=i[wn=vr.charAt(++nn)])!=null?wn=vr.charAt(++nn):Tr=wn==="e"?" ":"0",(kr=Vr[wn])&&(wn=kr(_r,Tr)),Rr.push(wn),en=nn+1);return Rr.push(vr.slice(en,nn)),Rr.join("")}}function bt(vr,Vr){return function(_r){var Rr=t(1900,void 0,1),nn=St(Rr,vr,_r+="",0),en,An;if(nn!=_r.length)return null;if("Q"in Rr)return new Date(Rr.Q);if("s"in Rr)return new Date(Rr.s*1e3+("L"in Rr?Rr.L:0));if(Vr&&!("Z"in Rr)&&(Rr.Z=0),"p"in Rr&&(Rr.H=Rr.H%12+Rr.p*12),Rr.m===void 0&&(Rr.m="q"in Rr?Rr.q:0),"V"in Rr){if(Rr.V<1||Rr.V>53)return null;"w"in Rr||(Rr.w=1),"Z"in Rr?(en=r(t(Rr.y,0,1)),An=en.getUTCDay(),en=An>4||An===0?d.ot.ceil(en):(0,d.ot)(en),en=S.c.offset(en,(Rr.V-1)*7),Rr.y=en.getUTCFullYear(),Rr.m=en.getUTCMonth(),Rr.d=en.getUTCDate()+(Rr.w+6)%7):(en=g(t(Rr.y,0,1)),An=en.getDay(),en=An>4||An===0?n.qT.ceil(en):(0,n.qT)(en),en=E.c.offset(en,(Rr.V-1)*7),Rr.y=en.getFullYear(),Rr.m=en.getMonth(),Rr.d=en.getDate()+(Rr.w+6)%7)}else("W"in Rr||"U"in Rr)&&("w"in Rr||(Rr.w="u"in Rr?Rr.u%7:"W"in Rr?1:0),An="Z"in Rr?r(t(Rr.y,0,1)).getUTCDay():g(t(Rr.y,0,1)).getDay(),Rr.m=0,Rr.d="W"in Rr?(Rr.w+6)%7+Rr.W*7-(An+5)%7:Rr.w+Rr.U*7-(An+6)%7);return"Z"in Rr?(Rr.H+=Rr.Z/100|0,Rr.M+=Rr.Z%100,r(Rr)):g(Rr)}}function St(vr,Vr,_r,Rr){for(var nn=0,en=Vr.length,An=_r.length,wn,Tr;nn<en;){if(Rr>=An)return-1;if(wn=Vr.charCodeAt(nn++),wn===37){if(wn=Vr.charAt(nn++),Tr=mt[wn in i?Vr.charAt(nn++):wn],!Tr||(Rr=Tr(vr,_r,Rr))<0)return-1}else if(wn!=_r.charCodeAt(Rr++))return-1}return Rr}function Pt(vr,Vr,_r){var Rr=lt.exec(Vr.slice(_r));return Rr?(vr.p=Gt[Rr[0].toLowerCase()],_r+Rr[0].length):-1}function Ht(vr,Vr,_r){var Rr=It.exec(Vr.slice(_r));return Rr?(vr.w=Xt[Rr[0].toLowerCase()],_r+Rr[0].length):-1}function Bt(vr,Vr,_r){var Rr=Zt.exec(Vr.slice(_r));return Rr?(vr.w=Tt[Rr[0].toLowerCase()],_r+Rr[0].length):-1}function Nt(vr,Vr,_r){var Rr=jt.exec(Vr.slice(_r));return Rr?(vr.m=Qt[Rr[0].toLowerCase()],_r+Rr[0].length):-1}function Kt(vr,Vr,_r){var Rr=gr.exec(Vr.slice(_r));return Rr?(vr.m=gt[Rr[0].toLowerCase()],_r+Rr[0].length):-1}function fr(vr,Vr,_r){return St(vr,De,Vr,_r)}function cr(vr,Vr,_r){return St(vr,je,Vr,_r)}function dr(vr,Vr,_r){return St(vr,Re,Vr,_r)}function Xe(vr){return Ue[vr.getDay()]}function He(vr){return be[vr.getDay()]}function zt(vr){return st[vr.getMonth()]}function Rt(vr){return et[vr.getMonth()]}function Jt(vr){return pe[+(vr.getHours()>=12)]}function sr(vr){return 1+~~(vr.getMonth()/3)}function ur(vr){return Ue[vr.getUTCDay()]}function er(vr){return be[vr.getUTCDay()]}function Ft(vr){return st[vr.getUTCMonth()]}function ir(vr){return et[vr.getUTCMonth()]}function hr(vr){return pe[+(vr.getUTCHours()>=12)]}function xr(vr){return 1+~~(vr.getUTCMonth()/3)}return{format:function(vr){var Vr=ut(vr+="",mr);return Vr.toString=function(){return vr},Vr},parse:function(vr){var Vr=bt(vr+="",!1);return Vr.toString=function(){return vr},Vr},utcFormat:function(vr){var Vr=ut(vr+="",or);return Vr.toString=function(){return vr},Vr},utcParse:function(vr){var Vr=bt(vr+="",!0);return Vr.toString=function(){return vr},Vr}}}var i={"-":"",_:" ",0:"0"},f=/^\s*\d+/,u=/^%/,l=/[\\^$*+?|[\]().{}]/g;function m(Ie,De,je){var Re=Ie<0?"-":"",pe=(Re?-Ie:Ie)+"",be=pe.length;return Re+(be<je?new Array(je-be+1).join(De)+pe:pe)}function h(Ie){return Ie.replace(l,"\\$&")}function w(Ie){return new RegExp("^(?:"+Ie.map(h).join("|")+")","i")}function c(Ie){for(var De={},je=-1,Re=Ie.length;++je<Re;)De[Ie[je].toLowerCase()]=je;return De}function a(Ie,De,je){var Re=f.exec(De.slice(je,je+1));return Re?(Ie.w=+Re[0],je+Re[0].length):-1}function p(Ie,De,je){var Re=f.exec(De.slice(je,je+1));return Re?(Ie.u=+Re[0],je+Re[0].length):-1}function x(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.U=+Re[0],je+Re[0].length):-1}function A(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.V=+Re[0],je+Re[0].length):-1}function P(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.W=+Re[0],je+Re[0].length):-1}function y(Ie,De,je){var Re=f.exec(De.slice(je,je+4));return Re?(Ie.y=+Re[0],je+Re[0].length):-1}function C(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.y=+Re[0]+(+Re[0]>68?1900:2e3),je+Re[0].length):-1}function M(Ie,De,je){var Re=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(De.slice(je,je+6));return Re?(Ie.Z=Re[1]?0:-(Re[2]+(Re[3]||"00")),je+Re[0].length):-1}function s(Ie,De,je){var Re=f.exec(De.slice(je,je+1));return Re?(Ie.q=Re[0]*3-3,je+Re[0].length):-1}function _(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.m=Re[0]-1,je+Re[0].length):-1}function b(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.d=+Re[0],je+Re[0].length):-1}function k(Ie,De,je){var Re=f.exec(De.slice(je,je+3));return Re?(Ie.m=0,Ie.d=+Re[0],je+Re[0].length):-1}function D(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.H=+Re[0],je+Re[0].length):-1}function V(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.M=+Re[0],je+Re[0].length):-1}function O(Ie,De,je){var Re=f.exec(De.slice(je,je+2));return Re?(Ie.S=+Re[0],je+Re[0].length):-1}function N(Ie,De,je){var Re=f.exec(De.slice(je,je+3));return Re?(Ie.L=+Re[0],je+Re[0].length):-1}function B(Ie,De,je){var Re=f.exec(De.slice(je,je+6));return Re?(Ie.L=Math.floor(Re[0]/1e3),je+Re[0].length):-1}function z(Ie,De,je){var Re=u.exec(De.slice(je,je+1));return Re?je+Re[0].length:-1}function H(Ie,De,je){var Re=f.exec(De.slice(je));return Re?(Ie.Q=+Re[0],je+Re[0].length):-1}function X(Ie,De,je){var Re=f.exec(De.slice(je));return Re?(Ie.s=+Re[0],je+Re[0].length):-1}function $(Ie,De){return m(Ie.getDate(),De,2)}function ne(Ie,De){return m(Ie.getHours(),De,2)}function q(Ie,De){return m(Ie.getHours()%12||12,De,2)}function ue(Ie,De){return m(1+E.c.count((0,T.c)(Ie),Ie),De,3)}function te(Ie,De){return m(Ie.getMilliseconds(),De,3)}function J(Ie,De){return te(Ie,De)+"000"}function ie(Ie,De){return m(Ie.getMonth()+1,De,2)}function K(Ie,De){return m(Ie.getMinutes(),De,2)}function ee(Ie,De){return m(Ie.getSeconds(),De,2)}function le(Ie){var De=Ie.getDay();return De===0?7:De}function j(Ie,De){return m(n.uU.count((0,T.c)(Ie)-1,Ie),De,2)}function Z(Ie,De){var je=Ie.getDay();return Ie=je>=4||je===0?(0,n.kD)(Ie):n.kD.ceil(Ie),m(n.kD.count((0,T.c)(Ie),Ie)+((0,T.c)(Ie).getDay()===4),De,2)}function fe(Ie){return Ie.getDay()}function re(Ie,De){return m(n.qT.count((0,T.c)(Ie)-1,Ie),De,2)}function ce(Ie,De){return m(Ie.getFullYear()%100,De,2)}function xe(Ie,De){return m(Ie.getFullYear()%1e4,De,4)}function Te(Ie){var De=Ie.getTimezoneOffset();return(De>0?"-":(De*=-1,"+"))+m(De/60|0,"0",2)+m(De%60,"0",2)}function we(Ie,De){return m(Ie.getUTCDate(),De,2)}function _e(Ie,De){return m(Ie.getUTCHours(),De,2)}function ke(Ie,De){return m(Ie.getUTCHours()%12||12,De,2)}function Ne(Ie,De){return m(1+S.c.count((0,v.c)(Ie),Ie),De,3)}function Ee(Ie,De){return m(Ie.getUTCMilliseconds(),De,3)}function ze(Ie,De){return Ee(Ie,De)+"000"}function Ce(Ie,De){return m(Ie.getUTCMonth()+1,De,2)}function Oe(Ie,De){return m(Ie.getUTCMinutes(),De,2)}function Le(Ie,De){return m(Ie.getUTCSeconds(),De,2)}function Ge(Ie){var De=Ie.getUTCDay();return De===0?7:De}function rt(Ie,De){return m(d.EV.count((0,v.c)(Ie)-1,Ie),De,2)}function ot(Ie,De){var je=Ie.getUTCDay();return Ie=je>=4||je===0?(0,d.yA)(Ie):d.yA.ceil(Ie),m(d.yA.count((0,v.c)(Ie),Ie)+((0,v.c)(Ie).getUTCDay()===4),De,2)}function $e(Ie){return Ie.getUTCDay()}function qe(Ie,De){return m(d.ot.count((0,v.c)(Ie)-1,Ie),De,2)}function ht(Ie,De){return m(Ie.getUTCFullYear()%100,De,2)}function vt(Ie,De){return m(Ie.getUTCFullYear()%1e4,De,4)}function pt(){return"+0000"}function wt(){return"%"}function Et(Ie){return+Ie}function nt(Ie){return Math.floor(+Ie/1e3)}var Fe,We,Ze;Ye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ye(Ie){return Fe=o(Ie),We=Fe.format,Fe.parse,Ze=Fe.utcFormat,Fe.utcParse,Fe}},68936:function(U,F,e){e.d(F,{m:function(){return E}});var d=e(81628),S=e(69792),n=(0,d.c)(function(T){T.setHours(0,0,0,0)},function(T,v){T.setDate(T.getDate()+v)},function(T,v){return(v-T-(v.getTimezoneOffset()-T.getTimezoneOffset())*S.iy)/S.SK},function(T){return T.getDate()-1});F.c=n;var E=n.range},69792:function(U,F,e){e.d(F,{KK:function(){return T},SK:function(){return E},cg:function(){return n},iy:function(){return S},yc:function(){return d}});var d=1e3,S=6e4,n=36e5,E=864e5,T=6048e5},73220:function(U,F,e){e.r(F),e.d(F,{timeDay:function(){return m.c},timeDays:function(){return m.m},timeFriday:function(){return h.iB},timeFridays:function(){return h.sJ},timeHour:function(){return u},timeHours:function(){return l},timeInterval:function(){return d.c},timeMillisecond:function(){return n},timeMilliseconds:function(){return E},timeMinute:function(){return o},timeMinutes:function(){return i},timeMonday:function(){return h.qT},timeMondays:function(){return h.QP},timeMonth:function(){return c},timeMonths:function(){return a},timeSaturday:function(){return h.Wc},timeSaturdays:function(){return h.aI},timeSecond:function(){return g},timeSeconds:function(){return r},timeSunday:function(){return h.uU},timeSundays:function(){return h.Ab},timeThursday:function(){return h.kD},timeThursdays:function(){return h.eC},timeTuesday:function(){return h.Mf},timeTuesdays:function(){return h.Oc},timeWednesday:function(){return h.eg},timeWednesdays:function(){return h.sn},timeWeek:function(){return h.uU},timeWeeks:function(){return h.Ab},timeYear:function(){return p.c},timeYears:function(){return p.Q},utcDay:function(){return s.c},utcDays:function(){return s.o},utcFriday:function(){return _.od},utcFridays:function(){return _.iG},utcHour:function(){return C},utcHours:function(){return M},utcMillisecond:function(){return n},utcMilliseconds:function(){return E},utcMinute:function(){return A},utcMinutes:function(){return P},utcMonday:function(){return _.ot},utcMondays:function(){return _.iO},utcMonth:function(){return k},utcMonths:function(){return D},utcSaturday:function(){return _.Ad},utcSaturdays:function(){return _.K8},utcSecond:function(){return g},utcSeconds:function(){return r},utcSunday:function(){return _.EV},utcSundays:function(){return _.Wq},utcThursday:function(){return _.yA},utcThursdays:function(){return _.ob},utcTuesday:function(){return _.sG},utcTuesdays:function(){return _.kl},utcWednesday:function(){return _._6},utcWednesdays:function(){return _.W_},utcWeek:function(){return _.EV},utcWeeks:function(){return _.Wq},utcYear:function(){return V.c},utcYears:function(){return V.i}});var d=e(81628),S=(0,d.c)(function(){},function(O,N){O.setTime(+O+N)},function(O,N){return N-O});S.every=function(O){return O=Math.floor(O),!isFinite(O)||!(O>0)?null:O>1?(0,d.c)(function(N){N.setTime(Math.floor(N/O)*O)},function(N,B){N.setTime(+N+B*O)},function(N,B){return(B-N)/O}):S};var n=S,E=S.range,T=e(69792),v=(0,d.c)(function(O){O.setTime(O-O.getMilliseconds())},function(O,N){O.setTime(+O+N*T.yc)},function(O,N){return(N-O)/T.yc},function(O){return O.getUTCSeconds()}),g=v,r=v.range,t=(0,d.c)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*T.yc)},function(O,N){O.setTime(+O+N*T.iy)},function(O,N){return(N-O)/T.iy},function(O){return O.getMinutes()}),o=t,i=t.range,f=(0,d.c)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*T.yc-O.getMinutes()*T.iy)},function(O,N){O.setTime(+O+N*T.cg)},function(O,N){return(N-O)/T.cg},function(O){return O.getHours()}),u=f,l=f.range,m=e(68936),h=e(46192),w=(0,d.c)(function(O){O.setDate(1),O.setHours(0,0,0,0)},function(O,N){O.setMonth(O.getMonth()+N)},function(O,N){return N.getMonth()-O.getMonth()+(N.getFullYear()-O.getFullYear())*12},function(O){return O.getMonth()}),c=w,a=w.range,p=e(32171),x=(0,d.c)(function(O){O.setUTCSeconds(0,0)},function(O,N){O.setTime(+O+N*T.iy)},function(O,N){return(N-O)/T.iy},function(O){return O.getUTCMinutes()}),A=x,P=x.range,y=(0,d.c)(function(O){O.setUTCMinutes(0,0,0)},function(O,N){O.setTime(+O+N*T.cg)},function(O,N){return(N-O)/T.cg},function(O){return O.getUTCHours()}),C=y,M=y.range,s=e(58931),_=e(8208),b=(0,d.c)(function(O){O.setUTCDate(1),O.setUTCHours(0,0,0,0)},function(O,N){O.setUTCMonth(O.getUTCMonth()+N)},function(O,N){return N.getUTCMonth()-O.getUTCMonth()+(N.getUTCFullYear()-O.getUTCFullYear())*12},function(O){return O.getUTCMonth()}),k=b,D=b.range,V=e(53528)},81628:function(U,F,e){e.d(F,{c:function(){return n}});var d=new Date,S=new Date;function n(E,T,v,g){function r(t){return E(t=arguments.length===0?new Date:new Date(+t)),t}return r.floor=function(t){return E(t=new Date(+t)),t},r.ceil=function(t){return E(t=new Date(t-1)),T(t,1),E(t),t},r.round=function(t){var o=r(t),i=r.ceil(t);return t-o<i-t?o:i},r.offset=function(t,o){return T(t=new Date(+t),o==null?1:Math.floor(o)),t},r.range=function(t,o,i){var f=[],u;if(t=r.ceil(t),i=i==null?1:Math.floor(i),!(t<o)||!(i>0))return f;do f.push(u=new Date(+t)),T(t,i),E(t);while(u<t&&t<o);return f},r.filter=function(t){return n(function(o){if(o>=o)for(;E(o),!t(o);)o.setTime(o-1)},function(o,i){if(o>=o)if(i<0)for(;++i<=0;)for(;T(o,-1),!t(o););else for(;--i>=0;)for(;T(o,1),!t(o););})},v&&(r.count=function(t,o){return d.setTime(+t),S.setTime(+o),E(d),E(S),Math.floor(v(d,S))},r.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?r.filter(g?function(o){return g(o)%t===0}:function(o){return r.count(0,o)%t===0}):r}),r}},58931:function(U,F,e){e.d(F,{o:function(){return E}});var d=e(81628),S=e(69792),n=(0,d.c)(function(T){T.setUTCHours(0,0,0,0)},function(T,v){T.setUTCDate(T.getUTCDate()+v)},function(T,v){return(v-T)/S.SK},function(T){return T.getUTCDate()-1});F.c=n;var E=n.range},8208:function(U,F,e){e.d(F,{Ad:function(){return o},EV:function(){return E},K8:function(){return w},W_:function(){return l},Wq:function(){return i},_6:function(){return g},iG:function(){return h},iO:function(){return f},kl:function(){return u},ob:function(){return m},od:function(){return t},ot:function(){return T},sG:function(){return v},yA:function(){return r}});var d=e(81628),S=e(69792);function n(c){return(0,d.c)(function(a){a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+7-c)%7),a.setUTCHours(0,0,0,0)},function(a,p){a.setUTCDate(a.getUTCDate()+p*7)},function(a,p){return(p-a)/S.KK})}var E=n(0),T=n(1),v=n(2),g=n(3),r=n(4),t=n(5),o=n(6),i=E.range,f=T.range,u=v.range,l=g.range,m=r.range,h=t.range,w=o.range},53528:function(U,F,e){e.d(F,{i:function(){return n}});var d=e(81628),S=(0,d.c)(function(E){E.setUTCMonth(0,1),E.setUTCHours(0,0,0,0)},function(E,T){E.setUTCFullYear(E.getUTCFullYear()+T)},function(E,T){return T.getUTCFullYear()-E.getUTCFullYear()},function(E){return E.getUTCFullYear()});S.every=function(E){return!isFinite(E=Math.floor(E))||!(E>0)?null:(0,d.c)(function(T){T.setUTCFullYear(Math.floor(T.getUTCFullYear()/E)*E),T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,v){T.setUTCFullYear(T.getUTCFullYear()+v*E)})},F.c=S;var n=S.range},46192:function(U,F,e){e.d(F,{Ab:function(){return i},Mf:function(){return v},Oc:function(){return u},QP:function(){return f},Wc:function(){return o},aI:function(){return w},eC:function(){return m},eg:function(){return g},iB:function(){return t},kD:function(){return r},qT:function(){return T},sJ:function(){return h},sn:function(){return l},uU:function(){return E}});var d=e(81628),S=e(69792);function n(c){return(0,d.c)(function(a){a.setDate(a.getDate()-(a.getDay()+7-c)%7),a.setHours(0,0,0,0)},function(a,p){a.setDate(a.getDate()+p*7)},function(a,p){return(p-a-(p.getTimezoneOffset()-a.getTimezoneOffset())*S.iy)/S.KK})}var E=n(0),T=n(1),v=n(2),g=n(3),r=n(4),t=n(5),o=n(6),i=E.range,f=T.range,u=v.range,l=g.range,m=r.range,h=t.range,w=o.range},32171:function(U,F,e){e.d(F,{Q:function(){return n}});var d=e(81628),S=(0,d.c)(function(E){E.setMonth(0,1),E.setHours(0,0,0,0)},function(E,T){E.setFullYear(E.getFullYear()+T)},function(E,T){return T.getFullYear()-E.getFullYear()},function(E){return E.getFullYear()});S.every=function(E){return!isFinite(E=Math.floor(E))||!(E>0)?null:(0,d.c)(function(T){T.setFullYear(Math.floor(T.getFullYear()/E)*E),T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,v){T.setFullYear(T.getFullYear()+v*E)})},F.c=S;var n=S.range},64348:function(U,F,e){var d=e(39640)(),S=e(53664),n=d&&S("%Object.defineProperty%",!0);if(n)try{n({},"a",{value:1})}catch{n=!1}var E=S("%SyntaxError%"),T=S("%TypeError%"),v=e(2304);U.exports=function(r,t,o){if(!r||typeof r!="object"&&typeof r!="function")throw new T("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new T("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new T("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new T("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new T("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new T("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,m=!!v&&v(r,t);if(n)n(r,t,{configurable:u===null&&m?m.configurable:!u,enumerable:i===null&&m?m.enumerable:!i,value:o,writable:f===null&&m?m.writable:!f});else if(l||!i&&!f&&!u)r[t]=o;else throw new E("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}},81288:function(U,F,e){var d=e(41820),S=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,E=Array.prototype.concat,T=Object.defineProperty,v=function(i){return typeof i=="function"&&n.call(i)==="[object Function]"},g=e(39640)(),r=T&&g,t=function(i,f,u,l){if(f in i){if(l===!0){if(i[f]===u)return}else if(!v(l)||!l())return}r?T(i,f,{configurable:!0,enumerable:!1,value:u,writable:!0}):i[f]=u},o=function(i,f){var u=arguments.length>2?arguments[2]:{},l=d(f);S&&(l=E.call(l,Object.getOwnPropertySymbols(f)));for(var m=0;m<l.length;m+=1)t(i,l[m],f[l[m]],u[l[m]])};o.supportsDescriptors=!!r,U.exports=o},31264:function(U){U.exports=function(){for(var F=0;F<arguments.length;F++)if(arguments[F]!==void 0)return arguments[F]}},63768:function(U){U.exports=S;var F=S.canvas=document.createElement("canvas"),e=F.getContext("2d"),d=n([32,126]);S.createPairs=n,S.ascii=d;function S(E,T){Array.isArray(E)&&(E=E.join(", "));var v={},g,r=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?g=n(T):Array.isArray(T)?g=T:(T.o?g=n(T.o):T.pairs&&(g=T.pairs),T.fontSize&&(r=T.fontSize),T.threshold!=null&&(t=T.threshold))),g||(g=d),e.font=r+"px "+E;for(var o=0;o<g.length;o++){var i=g[o],f=e.measureText(i[0]).width+e.measureText(i[1]).width,u=e.measureText(i).width;if(Math.abs(f-u)>r*t){var l=(u-f)/r;v[i]=l*1e3}}return v}function n(E){for(var T=[],v=E[0];v<=E[1];v++)for(var g=String.fromCharCode(v),r=E[0];r<E[1];r++){var t=String.fromCharCode(r),o=g+t;T.push(o)}return T}},22235:function(U,F,e){var d=e(49972),S=e(48816),n={M:"moveTo",C:"bezierCurveTo"};U.exports=function(E,T){E.beginPath(),S(d(T)).forEach(function(v){var g=v[0],r=v.slice(1);E[n[g]].apply(E,r)}),E.closePath()}},72512:function(U){U.exports=function(F){switch(F){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(U){function F(S,n,E){var T=S[E]|0;if(T<=0)return[];var v=new Array(T),g;if(E===S.length-1)for(g=0;g<T;++g)v[g]=n;else for(g=0;g<T;++g)v[g]=F(S,n,E+1);return v}function e(S,n){var E,T;for(E=new Array(S),T=0;T<S;++T)E[T]=n;return E}function d(S,n){switch(typeof n>"u"&&(n=0),typeof S){case"number":if(S>0)return e(S|0,n);break;case"object":if(typeof S.length=="number")return F(S,n,0);break}return[]}U.exports=d},28912:function(U){U.exports=F,U.exports.default=F;function F(D,V,O){O=O||2;var N=V&&V.length,B=N?V[0]*O:D.length,z=e(D,0,B,O,!0),H=[];if(!z||z.next===z.prev)return H;var X,$,ne,q,ue,te,J;if(N&&(z=g(D,V,z,O)),D.length>80*O){X=ne=D[0],$=q=D[1];for(var ie=O;ie<B;ie+=O)ue=D[ie],te=D[ie+1],ue<X&&(X=ue),te<$&&($=te),ue>ne&&(ne=ue),te>q&&(q=te);J=Math.max(ne-X,q-$),J=J!==0?1/J:0}return S(z,H,O,X,$,J),H}function e(D,V,O,N,B){var z,H;if(B===k(D,V,O,N)>0)for(z=V;z<O;z+=N)H=s(z,D[z],D[z+1],H);else for(z=O-N;z>=V;z-=N)H=s(z,D[z],D[z+1],H);return H&&a(H,H.next)&&(_(H),H=H.next),H}function d(D,V){if(!D)return D;V||(V=D);var O=D,N;do if(N=!1,!O.steiner&&(a(O,O.next)||c(O.prev,O,O.next)===0)){if(_(O),O=V=O.prev,O===O.next)break;N=!0}else O=O.next;while(N||O!==V);return V}function S(D,V,O,N,B,z,H){if(D){!H&&z&&f(D,N,B,z);for(var X=D,$,ne;D.prev!==D.next;){if($=D.prev,ne=D.next,z?E(D,N,B,z):n(D)){V.push($.i/O),V.push(D.i/O),V.push(ne.i/O),_(D),D=ne.next,X=ne.next;continue}if(D=ne,D===X){H?H===1?(D=T(d(D),V,O),S(D,V,O,N,B,z,2)):H===2&&v(D,V,O,N,B,z):S(d(D),V,O,N,B,z,1);break}}}}function n(D){var V=D.prev,O=D,N=D.next;if(c(V,O,N)>=0)return!1;for(var B=D.next.next;B!==D.prev;){if(h(V.x,V.y,O.x,O.y,N.x,N.y,B.x,B.y)&&c(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function E(D,V,O,N){var B=D.prev,z=D,H=D.next;if(c(B,z,H)>=0)return!1;for(var X=B.x<z.x?B.x<H.x?B.x:H.x:z.x<H.x?z.x:H.x,$=B.y<z.y?B.y<H.y?B.y:H.y:z.y<H.y?z.y:H.y,ne=B.x>z.x?B.x>H.x?B.x:H.x:z.x>H.x?z.x:H.x,q=B.y>z.y?B.y>H.y?B.y:H.y:z.y>H.y?z.y:H.y,ue=l(X,$,V,O,N),te=l(ne,q,V,O,N),J=D.prevZ,ie=D.nextZ;J&&J.z>=ue&&ie&&ie.z<=te;){if(J!==D.prev&&J!==D.next&&h(B.x,B.y,z.x,z.y,H.x,H.y,J.x,J.y)&&c(J.prev,J,J.next)>=0||(J=J.prevZ,ie!==D.prev&&ie!==D.next&&h(B.x,B.y,z.x,z.y,H.x,H.y,ie.x,ie.y)&&c(ie.prev,ie,ie.next)>=0))return!1;ie=ie.nextZ}for(;J&&J.z>=ue;){if(J!==D.prev&&J!==D.next&&h(B.x,B.y,z.x,z.y,H.x,H.y,J.x,J.y)&&c(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;ie&&ie.z<=te;){if(ie!==D.prev&&ie!==D.next&&h(B.x,B.y,z.x,z.y,H.x,H.y,ie.x,ie.y)&&c(ie.prev,ie,ie.next)>=0)return!1;ie=ie.nextZ}return!0}function T(D,V,O){var N=D;do{var B=N.prev,z=N.next.next;!a(B,z)&&p(B,N,N.next,z)&&y(B,z)&&y(z,B)&&(V.push(B.i/O),V.push(N.i/O),V.push(z.i/O),_(N),_(N.next),N=D=z),N=N.next}while(N!==D);return d(N)}function v(D,V,O,N,B,z){var H=D;do{for(var X=H.next.next;X!==H.prev;){if(H.i!==X.i&&w(H,X)){var $=M(H,X);H=d(H,H.next),$=d($,$.next),S(H,V,O,N,B,z),S($,V,O,N,B,z);return}X=X.next}H=H.next}while(H!==D)}function g(D,V,O,N){var B=[],z,H,X,$,ne;for(z=0,H=V.length;z<H;z++)X=V[z]*N,$=z<H-1?V[z+1]*N:D.length,ne=e(D,X,$,N,!1),ne===ne.next&&(ne.steiner=!0),B.push(m(ne));for(B.sort(r),z=0;z<B.length;z++)t(B[z],O),O=d(O,O.next);return O}function r(D,V){return D.x-V.x}function t(D,V){if(V=o(D,V),V){var O=M(V,D);d(V,V.next),d(O,O.next)}}function o(D,V){var O=V,N=D.x,B=D.y,z=-1/0,H;do{if(B<=O.y&&B>=O.next.y&&O.next.y!==O.y){var X=O.x+(B-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(X<=N&&X>z){if(z=X,X===N){if(B===O.y)return O;if(B===O.next.y)return O.next}H=O.x<O.next.x?O:O.next}}O=O.next}while(O!==V);if(!H)return null;if(N===z)return H;var $=H,ne=H.x,q=H.y,ue=1/0,te;O=H;do N>=O.x&&O.x>=ne&&N!==O.x&&h(B<q?N:z,B,ne,q,B<q?z:N,B,O.x,O.y)&&(te=Math.abs(B-O.y)/(N-O.x),y(O,D)&&(te<ue||te===ue&&(O.x>H.x||O.x===H.x&&i(H,O)))&&(H=O,ue=te)),O=O.next;while(O!==$);return H}function i(D,V){return c(D.prev,D,V.prev)<0&&c(V.next,D,D.next)<0}function f(D,V,O,N){var B=D;do B.z===null&&(B.z=l(B.x,B.y,V,O,N)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==D);B.prevZ.nextZ=null,B.prevZ=null,u(B)}function u(D){var V,O,N,B,z,H,X,$,ne=1;do{for(O=D,D=null,z=null,H=0;O;){for(H++,N=O,X=0,V=0;V<ne&&(X++,N=N.nextZ,!!N);V++);for($=ne;X>0||$>0&&N;)X!==0&&($===0||!N||O.z<=N.z)?(B=O,O=O.nextZ,X--):(B=N,N=N.nextZ,$--),z?z.nextZ=B:D=B,B.prevZ=z,z=B;O=N}z.nextZ=null,ne*=2}while(H>1);return D}function l(D,V,O,N,B){return D=32767*(D-O)*B,V=32767*(V-N)*B,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,D|V<<1}function m(D){var V=D,O=D;do(V.x<O.x||V.x===O.x&&V.y<O.y)&&(O=V),V=V.next;while(V!==D);return O}function h(D,V,O,N,B,z,H,X){return(B-H)*(V-X)-(D-H)*(z-X)>=0&&(D-H)*(N-X)-(O-H)*(V-X)>=0&&(O-H)*(z-X)-(B-H)*(N-X)>=0}function w(D,V){return D.next.i!==V.i&&D.prev.i!==V.i&&!P(D,V)&&(y(D,V)&&y(V,D)&&C(D,V)&&(c(D.prev,D,V.prev)||c(D,V.prev,V))||a(D,V)&&c(D.prev,D,D.next)>0&&c(V.prev,V,V.next)>0)}function c(D,V,O){return(V.y-D.y)*(O.x-V.x)-(V.x-D.x)*(O.y-V.y)}function a(D,V){return D.x===V.x&&D.y===V.y}function p(D,V,O,N){var B=A(c(D,V,O)),z=A(c(D,V,N)),H=A(c(O,N,D)),X=A(c(O,N,V));return!!(B!==z&&H!==X||B===0&&x(D,O,V)||z===0&&x(D,N,V)||H===0&&x(O,D,N)||X===0&&x(O,V,N))}function x(D,V,O){return V.x<=Math.max(D.x,O.x)&&V.x>=Math.min(D.x,O.x)&&V.y<=Math.max(D.y,O.y)&&V.y>=Math.min(D.y,O.y)}function A(D){return D>0?1:D<0?-1:0}function P(D,V){var O=D;do{if(O.i!==D.i&&O.next.i!==D.i&&O.i!==V.i&&O.next.i!==V.i&&p(O,O.next,D,V))return!0;O=O.next}while(O!==D);return!1}function y(D,V){return c(D.prev,D,D.next)<0?c(D,V,D.next)>=0&&c(D,D.prev,V)>=0:c(D,V,D.prev)<0||c(D,D.next,V)<0}function C(D,V){var O=D,N=!1,B=(D.x+V.x)/2,z=(D.y+V.y)/2;do O.y>z!=O.next.y>z&&O.next.y!==O.y&&B<(O.next.x-O.x)*(z-O.y)/(O.next.y-O.y)+O.x&&(N=!N),O=O.next;while(O!==D);return N}function M(D,V){var O=new b(D.i,D.x,D.y),N=new b(V.i,V.x,V.y),B=D.next,z=V.prev;return D.next=V,V.prev=D,O.next=B,B.prev=O,N.next=O,O.prev=N,z.next=N,N.prev=z,N}function s(D,V,O,N){var B=new b(D,V,O);return N?(B.next=N.next,B.prev=N,N.next.prev=B,N.next=B):(B.prev=B,B.next=B),B}function _(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function b(D,V,O){this.i=D,this.x=V,this.y=O,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}F.deviation=function(D,V,O,N){var B=V&&V.length,z=B?V[0]*O:D.length,H=Math.abs(k(D,0,z,O));if(B)for(var X=0,$=V.length;X<$;X++){var ne=V[X]*O,q=X<$-1?V[X+1]*O:D.length;H-=Math.abs(k(D,ne,q,O))}var ue=0;for(X=0;X<N.length;X+=3){var te=N[X]*O,J=N[X+1]*O,ie=N[X+2]*O;ue+=Math.abs((D[te]-D[ie])*(D[J+1]-D[te+1])-(D[te]-D[J])*(D[ie+1]-D[te+1]))}return H===0&&ue===0?0:Math.abs((ue-H)/H)};function k(D,V,O,N){for(var B=0,z=V,H=O-N;z<O;z+=N)B+=(D[H]-D[z])*(D[z+1]+D[H+1]),H=z;return B}F.flatten=function(D){for(var V=D[0][0].length,O={vertices:[],holes:[],dimensions:V},N=0,B=0;B<D.length;B++){for(var z=0;z<D[B].length;z++)for(var H=0;H<V;H++)O.vertices.push(D[B][z][H]);B>0&&(N+=D[B-1].length,O.holes.push(N))}return O}},6688:function(U,F,e){var d=e(78484);U.exports=function(n,E){var T=[],v=[],g=[],r={},t=[],o;function i(x){g[x]=!1,r.hasOwnProperty(x)&&Object.keys(r[x]).forEach(function(A){delete r[x][A],g[A]&&i(A)})}function f(x){var A=!1;v.push(x),g[x]=!0;var P,y;for(P=0;P<t[x].length;P++)y=t[x][P],y===o?(u(o,v),A=!0):g[y]||(A=f(y));if(A)i(x);else for(P=0;P<t[x].length;P++){y=t[x][P];var C=r[y];C||(C={},r[y]=C),C[y]=!0}return v.pop(),A}function u(x,A){var P=[].concat(A).concat(x);E?E(f):T.push(P)}function l(x){for(var A=0;A<n.length;A++)A<x&&(n[A]=[]),n[A]=n[A].filter(function(P){return P>=x})}function m(x){l(x);for(var A=n,P=d(A),y=P.components.filter(function(D){return D.length>1}),C=1/0,M,s=0;s<y.length;s++)for(var _=0;_<y[s].length;_++)y[s][_]<C&&(C=y[s][_],M=s);var b=y[M];if(!b)return!1;var k=n.map(function(D,V){return b.indexOf(V)===-1?[]:D.filter(function(O){return b.indexOf(O)!==-1})});return{leastVertex:C,adjList:k}}o=0;for(var h=n.length;o<h;){var w=m(o);if(o=w.leastVertex,t=w.adjList,t){for(var c=0;c<t.length;c++)for(var a=0;a<t[c].length;a++){var p=t[c][a];g[+p]=!1,r[p]={}}f(o),o=o+1}else o=h}if(!E)return T}},41476:function(U,F,e){var d=e(9252);U.exports=function(){return d(this).length=0,this}},74772:function(U,F,e){U.exports=e(44716)()?Array.from:e(80816)},44716:function(U){U.exports=function(){var F=Array.from,e,d;return typeof F!="function"?!1:(e=["raz","dwa"],d=F(e),!!(d&&d!==e&&d[1]==="dwa"))}},80816:function(U,F,e){var d=e(92664).iterator,S=e(60948),n=e(17024),E=e(81304),T=e(34044),v=e(9252),g=e(42584),r=e(29768),t=Array.isArray,o=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;U.exports=function(u){var l=arguments[1],m=arguments[2],h,w,c,a,p,x,A,P,y,C;if(u=Object(v(u)),g(l)&&T(l),!this||this===Array||!n(this)){if(!l){if(S(u))return p=u.length,p!==1?Array.apply(null,u):(a=new Array(1),a[0]=u[0],a);if(t(u)){for(a=new Array(p=u.length),w=0;w<p;++w)a[w]=u[w];return a}}a=[]}else h=this;if(!t(u)){if((y=u[d])!==void 0){for(A=T(y).call(u),h&&(a=new h),P=A.next(),w=0;!P.done;)C=l?o.call(l,m,P.value,w):P.value,h?(i.value=C,f(a,w,i)):a[w]=C,P=A.next(),++w;p=w}else if(r(u)){for(p=u.length,h&&(a=new h),w=0,c=0;w<p;++w)C=u[w],w+1<p&&(x=C.charCodeAt(0),x>=55296&&x<=56319&&(C+=u[++w])),C=l?o.call(l,m,C,c):C,h?(i.value=C,f(a,c,i)):a[c]=C,++c;p=c}}if(p===void 0)for(p=E(u.length),h&&(a=new h(p)),w=0;w<p;++w)C=l?o.call(l,m,u[w],w):u[w],h?(i.value=C,f(a,w,i)):a[w]=C;return h&&(i.value=null,a.length=p),a}},60948:function(U){var F=Object.prototype.toString,e=F.call(function(){return arguments}());U.exports=function(d){return F.call(d)===e}},17024:function(U){var F=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);U.exports=function(d){return typeof d=="function"&&e(F.call(d))}},33208:function(U){U.exports=function(){}},85608:function(U,F,e){U.exports=e(37328)()?Math.sign:e(92928)},37328:function(U){U.exports=function(){var F=Math.sign;return typeof F!="function"?!1:F(10)===1&&F(-20)===-1}},92928:function(U){U.exports=function(F){return F=Number(F),isNaN(F)||F===0?F:F>0?1:-1}},96936:function(U,F,e){var d=e(85608),S=Math.abs,n=Math.floor;U.exports=function(E){return isNaN(E)?0:(E=Number(E),E===0||!isFinite(E)?E:d(E)*n(S(E)))}},81304:function(U,F,e){var d=e(96936),S=Math.max;U.exports=function(n){return S(0,d(n))}},14428:function(U,F,e){var d=e(34044),S=e(9252),n=Function.prototype.bind,E=Function.prototype.call,T=Object.keys,v=Object.prototype.propertyIsEnumerable;U.exports=function(g,r){return function(t,o){var i,f=arguments[2],u=arguments[3];return t=Object(S(t)),d(o),i=T(t),u&&i.sort(typeof u=="function"?n.call(u,t):void 0),typeof g!="function"&&(g=i[g]),E.call(g,i,function(l,m){return v.call(t,l)?E.call(o,f,t[l],l,t,m):r})}}},38452:function(U,F,e){U.exports=e(96276)()?Object.assign:e(81892)},96276:function(U){U.exports=function(){var F=Object.assign,e;return typeof F!="function"?!1:(e={foo:"raz"},F(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},81892:function(U,F,e){var d=e(54768),S=e(9252),n=Math.max;U.exports=function(E,T){var v,g,r=n(arguments.length,2),t;for(E=Object(S(E)),t=function(o){try{E[o]=T[o]}catch(i){v||(v=i)}},g=1;g<r;++g)T=arguments[g],d(T).forEach(t);if(v!==void 0)throw v;return E}},95920:function(U,F,e){var d=e(74772),S=e(38452),n=e(9252);U.exports=function(E){var T=Object(n(E)),v=arguments[1],g=Object(arguments[2]);if(T!==E&&!v)return T;var r={};return v?d(v,function(t){(g.ensure||t in E)&&(r[t]=E[t])}):S(r,E),r}},14452:function(U,F,e){var d=Object.create,S;e(63092)()||(S=e(8672)),U.exports=function(){var n,E,T;return!S||S.level!==1?d:(n={},E={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(v){if(v==="__proto__"){E[v]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}E[v]=T}),Object.defineProperties(n,E),Object.defineProperty(S,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:n}),function(v,g){return d(v===null?n:v,g)})}()},42748:function(U,F,e){U.exports=e(14428)("forEach")},69127:function(U,F,e){var d=e(42584),S={function:!0,object:!0};U.exports=function(n){return d(n)&&S[typeof n]||!1}},42584:function(U,F,e){var d=e(33208)();U.exports=function(S){return S!==d&&S!==null}},54768:function(U,F,e){U.exports=e(87888)()?Object.keys:e(89592)},87888:function(U){U.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(U,F,e){var d=e(42584),S=Object.keys;U.exports=function(n){return S(d(n)?Object(n):n)}},84323:function(U,F,e){var d=e(34044),S=e(42748),n=Function.prototype.call;U.exports=function(E,T){var v={},g=arguments[2];return d(T),S(E,function(r,t,o,i){v[t]=n.call(T,g,r,t,o,i)}),v}},50868:function(U,F,e){var d=e(42584),S=Array.prototype.forEach,n=Object.create,E=function(T,v){var g;for(g in T)v[g]=T[g]};U.exports=function(T){var v=n(null);return S.call(arguments,function(g){d(g)&&E(Object(g),v)}),v}},69932:function(U,F,e){U.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(U){var F=Object.create,e=Object.getPrototypeOf,d={};U.exports=function(){var S=Object.setPrototypeOf,n=arguments[0]||F;return typeof S!="function"?!1:e(S(n(null),d))===d}},8672:function(U,F,e){var d=e(69127),S=e(9252),n=Object.prototype.isPrototypeOf,E=Object.defineProperty,T={configurable:!0,enumerable:!1,writable:!0,value:void 0},v;v=function(g,r){if(S(g),r===null||d(r))return g;throw new TypeError("Prototype must be null or an object")},U.exports=function(g){var r,t;return g?(g.level===2?g.set?(t=g.set,r=function(o,i){return t.call(v(o,i),i),o}):r=function(o,i){return v(o,i).__proto__=i,o}:r=function o(i,f){var u;return v(i,f),u=n.call(o.nullPolyfill,i),u&&delete o.nullPolyfill.__proto__,f===null&&(f=o.nullPolyfill),i.__proto__=f,u&&E(o.nullPolyfill,"__proto__",T),i},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:g.level})):null}(function(){var g=Object.create(null),r={},t,o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(o){try{t=o.set,t.call(g,r)}catch{}if(Object.getPrototypeOf(g)===r)return{set:t,level:2}}return g.__proto__=r,Object.getPrototypeOf(g)===r?{level:2}:(g={},g.__proto__=r,Object.getPrototypeOf(g)===r?{level:1}:!1)}()),e(14452)},34044:function(U){U.exports=function(F){if(typeof F!="function")throw new TypeError(F+" is not a function");return F}},92584:function(U,F,e){var d=e(69127);U.exports=function(S){if(!d(S))throw new TypeError(S+" is not an Object");return S}},9252:function(U,F,e){var d=e(42584);U.exports=function(S){if(!d(S))throw new TypeError("Cannot use null or undefined");return S}},71056:function(U,F,e){U.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(U){var F="razdwatrzy";U.exports=function(){return typeof F.contains!="function"?!1:F.contains("dwa")===!0&&F.contains("foo")===!1}},93040:function(U){var F=String.prototype.indexOf;U.exports=function(e){return F.call(this,e,arguments[1])>-1}},29768:function(U){var F=Object.prototype.toString,e=F.call("");U.exports=function(d){return typeof d=="string"||d&&typeof d=="object"&&(d instanceof String||F.call(d)===e)||!1}},82252:function(U){var F=Object.create(null),e=Math.random;U.exports=function(){var d;do d=e().toString(36).slice(2);while(F[d]);return d}},52104:function(U,F,e){var d=e(69932),S=e(71056),n=e(21092),E=e(92664),T=e(85512),v=Object.defineProperty,g;g=U.exports=function(r,t){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");T.call(this,r),t?S.call(t,"key+value")?t="key+value":S.call(t,"key")?t="key":t="value":t="value",v(this,"__kind__",n("",t))},d&&d(g,T),delete g.prototype.constructor,g.prototype=Object.create(T.prototype,{_resolve:n(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),v(g.prototype,E.toStringTag,n("c","Array Iterator"))},76024:function(U,F,e){var d=e(60948),S=e(34044),n=e(29768),E=e(76252),T=Array.isArray,v=Function.prototype.call,g=Array.prototype.some;U.exports=function(r,t){var o,i=arguments[2],f,u,l,m,h,w,c;if(T(r)||d(r)?o="array":n(r)?o="string":r=E(r),S(t),u=function(){l=!0},o==="array"){g.call(r,function(a){return v.call(t,i,a,u),l});return}if(o==="string"){for(h=r.length,m=0;m<h&&(w=r[m],m+1<h&&(c=w.charCodeAt(0),c>=55296&&c<=56319&&(w+=r[++m])),v.call(t,i,w,u),!l);++m);return}for(f=r.next();!f.done;){if(v.call(t,i,f.value,u),l)return;f=r.next()}}},76252:function(U,F,e){var d=e(60948),S=e(29768),n=e(52104),E=e(80940),T=e(52891),v=e(92664).iterator;U.exports=function(g){return typeof T(g)[v]=="function"?g[v]():d(g)?new n(g):S(g)?new E(g):new n(g)}},85512:function(U,F,e){var d=e(41476),S=e(38452),n=e(34044),E=e(9252),T=e(21092),v=e(27940),g=e(92664),r=Object.defineProperty,t=Object.defineProperties,o;U.exports=o=function(i,f){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");t(this,{__list__:T("w",E(i)),__context__:T("w",f),__nextIndex__:T("w",0)}),f&&(n(f.on),f.on("_add",this._onAdd),f.on("_delete",this._onDelete),f.on("_clear",this._onClear))},delete o.prototype.constructor,t(o.prototype,S({_next:T(function(){var i;if(this.__list__){if(this.__redo__&&(i=this.__redo__.shift(),i!==void 0))return i;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:T(function(){return this._createResult(this._next())}),_createResult:T(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:T(function(i){return this.__list__[i]}),_unBind:T(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:T(function(){return"[object "+(this[g.toStringTag]||"Object")+"]"})},v({_onAdd:T(function(i){if(!(i>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",T("c",[i]));return}this.__redo__.forEach(function(f,u){f>=i&&(this.__redo__[u]=++f)},this),this.__redo__.push(i)}}),_onDelete:T(function(i){var f;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(f=this.__redo__.indexOf(i),f!==-1&&this.__redo__.splice(f,1),this.__redo__.forEach(function(u,l){u>i&&(this.__redo__[l]=--u)},this)))}),_onClear:T(function(){this.__redo__&&d.call(this.__redo__),this.__nextIndex__=0})}))),r(o.prototype,g.iterator,T(function(){return this}))},76368:function(U,F,e){var d=e(60948),S=e(42584),n=e(29768),E=e(92664).iterator,T=Array.isArray;U.exports=function(v){return S(v)?T(v)||n(v)||d(v)?!0:typeof v[E]=="function":!1}},80940:function(U,F,e){var d=e(69932),S=e(21092),n=e(92664),E=e(85512),T=Object.defineProperty,v;v=U.exports=function(g){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");g=String(g),E.call(this,g),T(this,"__length__",S("",g.length))},d&&d(v,E),delete v.prototype.constructor,v.prototype=Object.create(E.prototype,{_next:S(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:S(function(g){var r=this.__list__[g],t;return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0),t>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),T(v.prototype,n.toStringTag,S("c","String Iterator"))},52891:function(U,F,e){var d=e(76368);U.exports=function(S){if(!d(S))throw new TypeError(S+" is not iterable");return S}},60964:function(U){function F(d,S){if(d==null)throw new TypeError("Cannot convert first argument to object");for(var n=Object(d),E=1;E<arguments.length;E++){var T=arguments[E];if(T!=null)for(var v=Object.keys(Object(T)),g=0,r=v.length;g<r;g++){var t=v[g],o=Object.getOwnPropertyDescriptor(T,t);o!==void 0&&o.enumerable&&(n[t]=T[t])}}return n}function e(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:F})}U.exports={assign:F,polyfill:e}},92664:function(U,F,e){U.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(U,F,e){var d=e(12296),S={object:!0,symbol:!0};U.exports=function(){var n=d.Symbol,E;if(typeof n!="function")return!1;E=n("test symbol");try{String(E)}catch{return!1}return!(!S[typeof n.iterator]||!S[typeof n.toPrimitive]||!S[typeof n.toStringTag])}},53908:function(U){U.exports=function(F){return F?typeof F=="symbol"?!0:!F.constructor||F.constructor.name!=="Symbol"?!1:F[F.constructor.toStringTag]==="Symbol":!1}},96863:function(U,F,e){var d=e(21092),S=Object.create,n=Object.defineProperty,E=Object.prototype,T=S(null);U.exports=function(v){for(var g=0,r,t;T[v+(g||"")];)++g;return v+=g||"",T[v]=!0,r="@@"+v,n(E,r,d.gs(null,function(o){t||(t=!0,n(this,r,d(o)),t=!1)})),r}},53540:function(U,F,e){var d=e(21092),S=e(12296).Symbol;U.exports=function(n){return Object.defineProperties(n,{hasInstance:d("",S&&S.hasInstance||n("hasInstance")),isConcatSpreadable:d("",S&&S.isConcatSpreadable||n("isConcatSpreadable")),iterator:d("",S&&S.iterator||n("iterator")),match:d("",S&&S.match||n("match")),replace:d("",S&&S.replace||n("replace")),search:d("",S&&S.search||n("search")),species:d("",S&&S.species||n("species")),split:d("",S&&S.split||n("split")),toPrimitive:d("",S&&S.toPrimitive||n("toPrimitive")),toStringTag:d("",S&&S.toStringTag||n("toStringTag")),unscopables:d("",S&&S.unscopables||n("unscopables"))})}},73852:function(U,F,e){var d=e(21092),S=e(63948),n=Object.create(null);U.exports=function(E){return Object.defineProperties(E,{for:d(function(T){return n[T]?n[T]:n[T]=E(String(T))}),keyFor:d(function(T){var v;S(T);for(v in n)if(n[v]===T)return v})})}},18376:function(U,F,e){var d=e(21092),S=e(63948),n=e(12296).Symbol,E=e(96863),T=e(53540),v=e(73852),g=Object.create,r=Object.defineProperties,t=Object.defineProperty,o,i,f;if(typeof n=="function")try{String(n()),f=!0}catch{}else n=null;i=function(l){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return o(l)},U.exports=o=function u(l){var m;if(this instanceof u)throw new TypeError("Symbol is not a constructor");return f?n(l):(m=g(i.prototype),l=l===void 0?"":String(l),r(m,{__description__:d("",l),__name__:d("",E(l))}))},T(o),v(o),r(i.prototype,{constructor:d(o),toString:d("",function(){return this.__name__})}),r(o.prototype,{toString:d(function(){return"Symbol ("+S(this).__description__+")"}),valueOf:d(function(){return S(this)})}),t(o.prototype,o.toPrimitive,d("",function(){var u=S(this);return typeof u=="symbol"?u:u.toString()})),t(o.prototype,o.toStringTag,d("c","Symbol")),t(i.prototype,o.toStringTag,d("c",o.prototype[o.toStringTag])),t(i.prototype,o.toPrimitive,d("c",o.prototype[o.toPrimitive]))},63948:function(U,F,e){var d=e(53908);U.exports=function(S){if(!d(S))throw new TypeError(S+" is not a symbol");return S}},60463:function(U,F,e){U.exports=e(96979)()?WeakMap:e(64864)},96979:function(U){U.exports=function(){var F,e;if(typeof WeakMap!="function")return!1;try{F=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(F)!=="[object WeakMap]"||typeof F.set!="function"||F.set({},1)!==F||typeof F.delete!="function"||typeof F.has!="function"||F.get(e)!=="one")}},69876:function(U){U.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},64864:function(U,F,e){var d=e(42584),S=e(69932),n=e(92584),E=e(9252),T=e(82252),v=e(21092),g=e(76252),r=e(76024),t=e(92664).toStringTag,o=e(69876),i=Array.isArray,f=Object.defineProperty,u=Object.prototype.hasOwnProperty,l=Object.getPrototypeOf,m;U.exports=m=function(){var h=arguments[0],w;if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");return w=o&&S&&WeakMap!==m?S(new WeakMap,l(this)):this,d(h)&&(i(h)||(h=g(h))),f(w,"__weakMapData__",v("c","$weakMap$"+T())),h&&r(h,function(c){E(c),w.set(c[0],c[1])}),w},o&&(S&&S(m,WeakMap),m.prototype=Object.create(WeakMap.prototype,{constructor:v(m)})),Object.defineProperties(m.prototype,{delete:v(function(h){return u.call(n(h),this.__weakMapData__)?(delete h[this.__weakMapData__],!0):!1}),get:v(function(h){if(u.call(n(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:v(function(h){return u.call(n(h),this.__weakMapData__)}),set:v(function(h,w){return f(n(h),this.__weakMapData__,v("c",w)),this}),toString:v(function(){return"[object WeakMap]"})}),f(m.prototype,t,v("c","WeakMap"))},61252:function(U){var F=typeof Reflect=="object"?Reflect:null,e=F&&typeof F.apply=="function"?F.apply:function(p,x,A){return Function.prototype.apply.call(p,x,A)},d;F&&typeof F.ownKeys=="function"?d=F.ownKeys:Object.getOwnPropertySymbols?d=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:d=function(p){return Object.getOwnPropertyNames(p)};function S(a){console&&console.warn&&console.warn(a)}var n=Number.isNaN||function(p){return p!==p};function E(){E.init.call(this)}U.exports=E,U.exports.once=h,E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var T=10;function v(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(a){if(typeof a!="number"||a<0||n(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");T=a}}),E.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||n(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function g(a){return a._maxListeners===void 0?E.defaultMaxListeners:a._maxListeners}E.prototype.getMaxListeners=function(){return g(this)},E.prototype.emit=function(p){for(var x=[],A=1;A<arguments.length;A++)x.push(arguments[A]);var P=p==="error",y=this._events;if(y!==void 0)P=P&&y.error===void 0;else if(!P)return!1;if(P){var C;if(x.length>0&&(C=x[0]),C instanceof Error)throw C;var M=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw M.context=C,M}var s=y[p];if(s===void 0)return!1;if(typeof s=="function")e(s,this,x);else for(var _=s.length,b=u(s,_),A=0;A<_;++A)e(b[A],this,x);return!0};function r(a,p,x,A){var P,y,C;if(v(x),y=a._events,y===void 0?(y=a._events=Object.create(null),a._eventsCount=0):(y.newListener!==void 0&&(a.emit("newListener",p,x.listener?x.listener:x),y=a._events),C=y[p]),C===void 0)C=y[p]=x,++a._eventsCount;else if(typeof C=="function"?C=y[p]=A?[x,C]:[C,x]:A?C.unshift(x):C.push(x),P=g(a),P>0&&C.length>P&&!C.warned){C.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=a,M.type=p,M.count=C.length,S(M)}return a}E.prototype.addListener=function(p,x){return r(this,p,x,!1)},E.prototype.on=E.prototype.addListener,E.prototype.prependListener=function(p,x){return r(this,p,x,!0)};function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(a,p,x){var A={fired:!1,wrapFn:void 0,target:a,type:p,listener:x},P=t.bind(A);return P.listener=x,A.wrapFn=P,P}E.prototype.once=function(p,x){return v(x),this.on(p,o(this,p,x)),this},E.prototype.prependOnceListener=function(p,x){return v(x),this.prependListener(p,o(this,p,x)),this},E.prototype.removeListener=function(p,x){var A,P,y,C,M;if(v(x),P=this._events,P===void 0)return this;if(A=P[p],A===void 0)return this;if(A===x||A.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete P[p],P.removeListener&&this.emit("removeListener",p,A.listener||x));else if(typeof A!="function"){for(y=-1,C=A.length-1;C>=0;C--)if(A[C]===x||A[C].listener===x){M=A[C].listener,y=C;break}if(y<0)return this;y===0?A.shift():l(A,y),A.length===1&&(P[p]=A[0]),P.removeListener!==void 0&&this.emit("removeListener",p,M||x)}return this},E.prototype.off=E.prototype.removeListener,E.prototype.removeAllListeners=function(p){var x,A,P;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[p]),this;if(arguments.length===0){var y=Object.keys(A),C;for(P=0;P<y.length;++P)C=y[P],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=A[p],typeof x=="function")this.removeListener(p,x);else if(x!==void 0)for(P=x.length-1;P>=0;P--)this.removeListener(p,x[P]);return this};function i(a,p,x){var A=a._events;if(A===void 0)return[];var P=A[p];return P===void 0?[]:typeof P=="function"?x?[P.listener||P]:[P]:x?m(P):u(P,P.length)}E.prototype.listeners=function(p){return i(this,p,!0)},E.prototype.rawListeners=function(p){return i(this,p,!1)},E.listenerCount=function(a,p){return typeof a.listenerCount=="function"?a.listenerCount(p):f.call(a,p)},E.prototype.listenerCount=f;function f(a){var p=this._events;if(p!==void 0){var x=p[a];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}E.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]};function u(a,p){for(var x=new Array(p),A=0;A<p;++A)x[A]=a[A];return x}function l(a,p){for(;p+1<a.length;p++)a[p]=a[p+1];a.pop()}function m(a){for(var p=new Array(a.length),x=0;x<p.length;++x)p[x]=a[x].listener||a[x];return p}function h(a,p){return new Promise(function(x,A){function P(C){a.removeListener(p,y),A(C)}function y(){typeof a.removeListener=="function"&&a.removeListener("error",P),x([].slice.call(arguments))}c(a,p,y,{once:!0}),p!=="error"&&w(a,P,{once:!0})})}function w(a,p,x){typeof a.on=="function"&&c(a,"error",p,x)}function c(a,p,x,A){if(typeof a.on=="function")A.once?a.once(p,x):a.on(p,x);else if(typeof a.addEventListener=="function")a.addEventListener(p,function P(y){A.once&&a.removeEventListener(p,P),x(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}},39072:function(U){var F=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};U.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return F()}try{return __global__||F()}finally{delete Object.prototype.__global__}}()},12296:function(U,F,e){U.exports=e(45072)()?globalThis:e(39072)},45072:function(U){U.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},38248:function(U,F,e){var d=e(94576);U.exports=function(S){var n=typeof S;if(n==="string"){var E=S;if(S=+S,S===0&&d(E))return!1}else if(n!=="number")return!1;return S-S<1}},47520:function(U,F,e){var d=e(72512);U.exports=S;function S(n,E,T){if(!n)throw new TypeError("must specify data as first parameter");if(T=+(T||0)|0,Array.isArray(n)&&n[0]&&typeof n[0][0]=="number"){var v=n[0].length,g=n.length*v,r,t,o,i;(!E||typeof E=="string")&&(E=new(d(E||"float32"))(g+T));var f=E.length-T;if(g!==f)throw new Error("source length "+g+" ("+v+"x"+n.length+") does not match destination length "+f);for(r=0,o=T;r<n.length;r++)for(t=0;t<v;t++)E[o++]=n[r][t]===null?NaN:n[r][t]}else if(!E||typeof E=="string"){var u=d(E||"float32");if(Array.isArray(n)||E==="array")for(E=new u(n.length+T),r=0,o=T,i=E.length;o<i;o++,r++)E[o]=n[r]===null?NaN:n[r];else T===0?E=new u(n):(E=new u(n.length+T),E.set(n,T))}else E.set(n,T);return E}},33888:function(U,F,e){var d=e(49395),S=[32,126];U.exports=n;function n(E){E=E||{};var T=E.shape?E.shape:E.canvas?[E.canvas.width,E.canvas.height]:[512,512],v=E.canvas||document.createElement("canvas"),g=E.font,r=typeof E.step=="number"?[E.step,E.step]:E.step||[32,32],t=E.chars||S;if(g&&typeof g!="string"&&(g=d(g)),!Array.isArray(t))t=String(t).split("");else if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var o=[],i=t[0],f=0;i<=t[1];i++)o[f++]=String.fromCharCode(i);t=o}T=T.slice(),v.width=T[0],v.height=T[1];var u=v.getContext("2d");u.fillStyle="#000",u.fillRect(0,0,v.width,v.height),u.font=g,u.textAlign="center",u.textBaseline="middle",u.fillStyle="#fff";for(var l=r[0]/2,m=r[1]/2,i=0;i<t.length;i++)u.fillText(t[i],l,m),(l+=r[0])>T[0]-r[0]/2&&(l=r[0]/2,m+=r[1]);return v}},71920:function(U){U.exports=F,F.canvas=document.createElement("canvas"),F.cache={};function F(t,E){E||(E={}),(typeof t=="string"||Array.isArray(t))&&(E.family=t);var T=Array.isArray(E.family)?E.family.join(", "):E.family;if(!T)throw Error("`family` must be defined");var v=E.size||E.fontSize||E.em||48,g=E.weight||E.fontWeight||"",r=E.style||E.fontStyle||"",t=[r,g,v].join(" ")+"px "+T,o=E.origin||"top";if(F.cache[T]&&v<=F.cache[T].em)return e(F.cache[T],o);var i=E.canvas||F.canvas,f=i.getContext("2d"),u={upper:E.upper!==void 0?E.upper:"H",lower:E.lower!==void 0?E.lower:"x",descent:E.descent!==void 0?E.descent:"p",ascent:E.ascent!==void 0?E.ascent:"h",tittle:E.tittle!==void 0?E.tittle:"i",overshoot:E.overshoot!==void 0?E.overshoot:"O"},l=Math.ceil(v*1.5);i.height=l,i.width=l*.5,f.font=t;var m="H",h={top:0};f.clearRect(0,0,l,l),f.textBaseline="top",f.fillStyle="black",f.fillText(m,0,0);var w=d(f.getImageData(0,0,l,l));f.clearRect(0,0,l,l),f.textBaseline="bottom",f.fillText(m,0,l);var c=d(f.getImageData(0,0,l,l));h.lineHeight=h.bottom=l-c+w,f.clearRect(0,0,l,l),f.textBaseline="alphabetic",f.fillText(m,0,l);var a=d(f.getImageData(0,0,l,l)),p=l-a-1+w;h.baseline=h.alphabetic=p,f.clearRect(0,0,l,l),f.textBaseline="middle",f.fillText(m,0,l*.5);var x=d(f.getImageData(0,0,l,l));h.median=h.middle=l-x-1+w-l*.5,f.clearRect(0,0,l,l),f.textBaseline="hanging",f.fillText(m,0,l*.5);var A=d(f.getImageData(0,0,l,l));h.hanging=l-A-1+w-l*.5,f.clearRect(0,0,l,l),f.textBaseline="ideographic",f.fillText(m,0,l);var P=d(f.getImageData(0,0,l,l));if(h.ideographic=l-P-1+w,u.upper&&(f.clearRect(0,0,l,l),f.textBaseline="top",f.fillText(u.upper,0,0),h.upper=d(f.getImageData(0,0,l,l)),h.capHeight=h.baseline-h.upper),u.lower&&(f.clearRect(0,0,l,l),f.textBaseline="top",f.fillText(u.lower,0,0),h.lower=d(f.getImageData(0,0,l,l)),h.xHeight=h.baseline-h.lower),u.tittle&&(f.clearRect(0,0,l,l),f.textBaseline="top",f.fillText(u.tittle,0,0),h.tittle=d(f.getImageData(0,0,l,l))),u.ascent&&(f.clearRect(0,0,l,l),f.textBaseline="top",f.fillText(u.ascent,0,0),h.ascent=d(f.getImageData(0,0,l,l))),u.descent&&(f.clearRect(0,0,l,l),f.textBaseline="top",f.fillText(u.descent,0,0),h.descent=S(f.getImageData(0,0,l,l))),u.overshoot){f.clearRect(0,0,l,l),f.textBaseline="top",f.fillText(u.overshoot,0,0);var y=S(f.getImageData(0,0,l,l));h.overshoot=y-p}for(var C in h)h[C]/=v;return h.em=v,F.cache[T]=h,e(h,o)}function e(n,E){var T={};typeof E=="string"&&(E=n[E]);for(var v in n)v!=="em"&&(T[v]=n[v]-E);return T}function d(n){for(var E=n.height,T=n.data,v=3;v<T.length;v+=4)if(T[v]!==0)return Math.floor((v-3)*.25/E)}function S(n){for(var E=n.height,T=n.data,v=T.length-1;v>0;v-=4)if(T[v]!==0)return Math.floor((v-3)*.25/E)}},46492:function(U,F,e){var d=e(90720),S=Object.prototype.toString,n=Object.prototype.hasOwnProperty,E=function(t,o,i){for(var f=0,u=t.length;f<u;f++)n.call(t,f)&&(i==null?o(t[f],f,t):o.call(i,t[f],f,t))},T=function(t,o,i){for(var f=0,u=t.length;f<u;f++)i==null?o(t.charAt(f),f,t):o.call(i,t.charAt(f),f,t)},v=function(t,o,i){for(var f in t)n.call(t,f)&&(i==null?o(t[f],f,t):o.call(i,t[f],f,t))},g=function(t,o,i){if(!d(o))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=i),S.call(t)==="[object Array]"?E(t,o,f):typeof t=="string"?T(t,o,f):v(t,o,f)};U.exports=g},74336:function(U){var F="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,d=Math.max,S="[object Function]",n=function(g,r){for(var t=[],o=0;o<g.length;o+=1)t[o]=g[o];for(var i=0;i<r.length;i+=1)t[i+g.length]=r[i];return t},E=function(g,r){for(var t=[],o=r,i=0;o<g.length;o+=1,i+=1)t[i]=g[o];return t},T=function(v,g){for(var r="",t=0;t<v.length;t+=1)r+=v[t],t+1<v.length&&(r+=g);return r};U.exports=function(g){var r=this;if(typeof r!="function"||e.apply(r)!==S)throw new TypeError(F+r);for(var t=E(arguments,1),o,i=function(){if(this instanceof o){var h=r.apply(this,n(t,arguments));return Object(h)===h?h:this}return r.apply(g,n(t,arguments))},f=d(0,r.length-t.length),u=[],l=0;l<f;l++)u[l]="$"+l;if(o=Function("binder","return function ("+T(u,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var m=function(){};m.prototype=r.prototype,o.prototype=new m,m.prototype=null}return o}},8844:function(U,F,e){var d=e(74336);U.exports=Function.prototype.bind||d},13380:function(U){U.exports=F;function F(e,d){if(typeof e!="string")throw new TypeError("must specify type string");if(d=d||{},typeof document>"u"&&!d.canvas)return null;var S=d.canvas||document.createElement("canvas");typeof d.width=="number"&&(S.width=d.width),typeof d.height=="number"&&(S.height=d.height);var n=d,E;try{var T=[e];e.indexOf("webgl")===0&&T.push("experimental-"+e);for(var v=0;v<T.length;v++)if(E=S.getContext(T[v],n),E)return E}catch{E=null}return E||null}},53664:function(U,F,e){var d,S=SyntaxError,n=Function,E=TypeError,T=function(b){try{return n('"use strict"; return ('+b+").constructor;")()}catch{}},v=Object.getOwnPropertyDescriptor;if(v)try{v({},"")}catch{v=null}var g=function(){throw new E},r=v?function(){try{return arguments.callee,g}catch{try{return v(arguments,"callee").get}catch{return g}}}():g,t=e(71080)(),o=e(69572)(),i=Object.getPrototypeOf||(o?function(b){return b.__proto__}:null),f={},u=typeof Uint8Array>"u"||!i?d:i(Uint8Array),l={"%AggregateError%":typeof AggregateError>"u"?d:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?d:ArrayBuffer,"%ArrayIteratorPrototype%":t&&i?i([][Symbol.iterator]()):d,"%AsyncFromSyncIteratorPrototype%":d,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":typeof Atomics>"u"?d:Atomics,"%BigInt%":typeof BigInt>"u"?d:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?d:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?d:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?d:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?d:Float32Array,"%Float64Array%":typeof Float64Array>"u"?d:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?d:FinalizationRegistry,"%Function%":n,"%GeneratorFunction%":f,"%Int8Array%":typeof Int8Array>"u"?d:Int8Array,"%Int16Array%":typeof Int16Array>"u"?d:Int16Array,"%Int32Array%":typeof Int32Array>"u"?d:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":t&&i?i(i([][Symbol.iterator]())):d,"%JSON%":typeof JSON=="object"?JSON:d,"%Map%":typeof Map>"u"?d:Map,"%MapIteratorPrototype%":typeof Map>"u"||!t||!i?d:i(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?d:Promise,"%Proxy%":typeof Proxy>"u"?d:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?d:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?d:Set,"%SetIteratorPrototype%":typeof Set>"u"||!t||!i?d:i(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?d:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":t&&i?i(""[Symbol.iterator]()):d,"%Symbol%":t?Symbol:d,"%SyntaxError%":S,"%ThrowTypeError%":r,"%TypedArray%":u,"%TypeError%":E,"%Uint8Array%":typeof Uint8Array>"u"?d:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?d:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?d:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?d:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?d:WeakMap,"%WeakRef%":typeof WeakRef>"u"?d:WeakRef,"%WeakSet%":typeof WeakSet>"u"?d:WeakSet};if(i)try{null.error}catch(b){var m=i(i(b));l["%Error.prototype%"]=m}var h=function b(k){var D;if(k==="%AsyncFunction%")D=T("async function () {}");else if(k==="%GeneratorFunction%")D=T("function* () {}");else if(k==="%AsyncGeneratorFunction%")D=T("async function* () {}");else if(k==="%AsyncGenerator%"){var V=b("%AsyncGeneratorFunction%");V&&(D=V.prototype)}else if(k==="%AsyncIteratorPrototype%"){var O=b("%AsyncGenerator%");O&&i&&(D=i(O.prototype))}return l[k]=D,D},w={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},c=e(8844),a=e(92064),p=c.call(Function.call,Array.prototype.concat),x=c.call(Function.apply,Array.prototype.splice),A=c.call(Function.call,String.prototype.replace),P=c.call(Function.call,String.prototype.slice),y=c.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,s=function(k){var D=P(k,0,1),V=P(k,-1);if(D==="%"&&V!=="%")throw new S("invalid intrinsic syntax, expected closing `%`");if(V==="%"&&D!=="%")throw new S("invalid intrinsic syntax, expected opening `%`");var O=[];return A(k,C,function(N,B,z,H){O[O.length]=z?A(H,M,"$1"):B||N}),O},_=function(k,D){var V=k,O;if(a(w,V)&&(O=w[V],V="%"+O[0]+"%"),a(l,V)){var N=l[V];if(N===f&&(N=h(V)),typeof N>"u"&&!D)throw new E("intrinsic "+k+" exists, but is not available. Please file an issue!");return{alias:O,name:V,value:N}}throw new S("intrinsic "+k+" does not exist!")};U.exports=function(k,D){if(typeof k!="string"||k.length===0)throw new E("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof D!="boolean")throw new E('"allowMissing" argument must be a boolean');if(y(/^%?[^%]*%?$/,k)===null)throw new S("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var V=s(k),O=V.length>0?V[0]:"",N=_("%"+O+"%",D),B=N.name,z=N.value,H=!1,X=N.alias;X&&(O=X[0],x(V,p([0,1],X)));for(var $=1,ne=!0;$<V.length;$+=1){var q=V[$],ue=P(q,0,1),te=P(q,-1);if((ue==='"'||ue==="'"||ue==="`"||te==='"'||te==="'"||te==="`")&&ue!==te)throw new S("property names with quotes must have matching quotes");if((q==="constructor"||!ne)&&(H=!0),O+="."+q,B="%"+O+"%",a(l,B))z=l[B];else if(z!=null){if(!(q in z)){if(!D)throw new E("base intrinsic for "+k+" exists, but the property is not available.");return}if(v&&$+1>=V.length){var J=v(z,q);ne=!!J,ne&&"get"in J&&!("originalValue"in J.get)?z=J.get:z=z[q]}else ne=a(z,q),z=z[q];ne&&!H&&(l[B]=z)}}return z}},12408:function(U){U.exports=F;function F(e,d){var S=d[0],n=d[1],E=d[2],T=d[3],v=d[4],g=d[5],r=d[6],t=d[7],o=d[8],i=d[9],f=d[10],u=d[11],l=d[12],m=d[13],h=d[14],w=d[15];return e[0]=g*(f*w-u*h)-i*(r*w-t*h)+m*(r*u-t*f),e[1]=-(n*(f*w-u*h)-i*(E*w-T*h)+m*(E*u-T*f)),e[2]=n*(r*w-t*h)-g*(E*w-T*h)+m*(E*t-T*r),e[3]=-(n*(r*u-t*f)-g*(E*u-T*f)+i*(E*t-T*r)),e[4]=-(v*(f*w-u*h)-o*(r*w-t*h)+l*(r*u-t*f)),e[5]=S*(f*w-u*h)-o*(E*w-T*h)+l*(E*u-T*f),e[6]=-(S*(r*w-t*h)-v*(E*w-T*h)+l*(E*t-T*r)),e[7]=S*(r*u-t*f)-v*(E*u-T*f)+o*(E*t-T*r),e[8]=v*(i*w-u*m)-o*(g*w-t*m)+l*(g*u-t*i),e[9]=-(S*(i*w-u*m)-o*(n*w-T*m)+l*(n*u-T*i)),e[10]=S*(g*w-t*m)-v*(n*w-T*m)+l*(n*t-T*g),e[11]=-(S*(g*u-t*i)-v*(n*u-T*i)+o*(n*t-T*g)),e[12]=-(v*(i*h-f*m)-o*(g*h-r*m)+l*(g*f-r*i)),e[13]=S*(i*h-f*m)-o*(n*h-E*m)+l*(n*f-E*i),e[14]=-(S*(g*h-r*m)-v*(n*h-E*m)+l*(n*r-E*g)),e[15]=S*(g*f-r*i)-v*(n*f-E*i)+o*(n*r-E*g),e}},76860:function(U){U.exports=F;function F(e){var d=new Float32Array(16);return d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],d[4]=e[4],d[5]=e[5],d[6]=e[6],d[7]=e[7],d[8]=e[8],d[9]=e[9],d[10]=e[10],d[11]=e[11],d[12]=e[12],d[13]=e[13],d[14]=e[14],d[15]=e[15],d}},64492:function(U){U.exports=F;function F(e,d){return e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=d[3],e[4]=d[4],e[5]=d[5],e[6]=d[6],e[7]=d[7],e[8]=d[8],e[9]=d[9],e[10]=d[10],e[11]=d[11],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15],e}},54212:function(U){U.exports=F;function F(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},70800:function(U){U.exports=F;function F(e){var d=e[0],S=e[1],n=e[2],E=e[3],T=e[4],v=e[5],g=e[6],r=e[7],t=e[8],o=e[9],i=e[10],f=e[11],u=e[12],l=e[13],m=e[14],h=e[15],w=d*v-S*T,c=d*g-n*T,a=d*r-E*T,p=S*g-n*v,x=S*r-E*v,A=n*r-E*g,P=t*l-o*u,y=t*m-i*u,C=t*h-f*u,M=o*m-i*l,s=o*h-f*l,_=i*h-f*m;return w*_-c*s+a*M+p*C-x*y+A*P}},61784:function(U){U.exports=F;function F(e,d){var S=d[0],n=d[1],E=d[2],T=d[3],v=S+S,g=n+n,r=E+E,t=S*v,o=n*v,i=n*g,f=E*v,u=E*g,l=E*r,m=T*v,h=T*g,w=T*r;return e[0]=1-i-l,e[1]=o+w,e[2]=f-h,e[3]=0,e[4]=o-w,e[5]=1-t-l,e[6]=u+m,e[7]=0,e[8]=f+h,e[9]=u-m,e[10]=1-t-i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},91616:function(U){U.exports=F;function F(e,d,S){var n,E,T,v=S[0],g=S[1],r=S[2],t=Math.sqrt(v*v+g*g+r*r);return Math.abs(t)<1e-6?null:(t=1/t,v*=t,g*=t,r*=t,n=Math.sin(d),E=Math.cos(d),T=1-E,e[0]=v*v*T+E,e[1]=g*v*T+r*n,e[2]=r*v*T-g*n,e[3]=0,e[4]=v*g*T-r*n,e[5]=g*g*T+E,e[6]=r*g*T+v*n,e[7]=0,e[8]=v*r*T+g*n,e[9]=g*r*T-v*n,e[10]=r*r*T+E,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}},51944:function(U){U.exports=F;function F(e,d,S){var n=d[0],E=d[1],T=d[2],v=d[3],g=n+n,r=E+E,t=T+T,o=n*g,i=n*r,f=n*t,u=E*r,l=E*t,m=T*t,h=v*g,w=v*r,c=v*t;return e[0]=1-(u+m),e[1]=i+c,e[2]=f-w,e[3]=0,e[4]=i-c,e[5]=1-(o+m),e[6]=l+h,e[7]=0,e[8]=f+w,e[9]=l-h,e[10]=1-(o+u),e[11]=0,e[12]=S[0],e[13]=S[1],e[14]=S[2],e[15]=1,e}},69444:function(U){U.exports=F;function F(e,d){return e[0]=d[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=d[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},48268:function(U){U.exports=F;function F(e,d){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=d[0],e[13]=d[1],e[14]=d[2],e[15]=1,e}},21856:function(U){U.exports=F;function F(e,d){var S=Math.sin(d),n=Math.cos(d);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=S,e[7]=0,e[8]=0,e[9]=-S,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},79216:function(U){U.exports=F;function F(e,d){var S=Math.sin(d),n=Math.cos(d);return e[0]=n,e[1]=0,e[2]=-S,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=S,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},57736:function(U){U.exports=F;function F(e,d){var S=Math.sin(d),n=Math.cos(d);return e[0]=n,e[1]=S,e[2]=0,e[3]=0,e[4]=-S,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},38848:function(U){U.exports=F;function F(e,d,S,n,E,T,v){var g=1/(S-d),r=1/(E-n),t=1/(T-v);return e[0]=T*2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=T*2*r,e[6]=0,e[7]=0,e[8]=(S+d)*g,e[9]=(E+n)*r,e[10]=(v+T)*t,e[11]=-1,e[12]=0,e[13]=0,e[14]=v*T*2*t,e[15]=0,e}},36635:function(U){U.exports=F;function F(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},36524:function(U,F,e){U.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(U){U.exports=F;function F(e,d){var S=d[0],n=d[1],E=d[2],T=d[3],v=d[4],g=d[5],r=d[6],t=d[7],o=d[8],i=d[9],f=d[10],u=d[11],l=d[12],m=d[13],h=d[14],w=d[15],c=S*g-n*v,a=S*r-E*v,p=S*t-T*v,x=n*r-E*g,A=n*t-T*g,P=E*t-T*r,y=o*m-i*l,C=o*h-f*l,M=o*w-u*l,s=i*h-f*m,_=i*w-u*m,b=f*w-u*h,k=c*b-a*_+p*s+x*M-A*C+P*y;return k?(k=1/k,e[0]=(g*b-r*_+t*s)*k,e[1]=(E*_-n*b-T*s)*k,e[2]=(m*P-h*A+w*x)*k,e[3]=(f*A-i*P-u*x)*k,e[4]=(r*M-v*b-t*C)*k,e[5]=(S*b-E*M+T*C)*k,e[6]=(h*p-l*P-w*a)*k,e[7]=(o*P-f*p+u*a)*k,e[8]=(v*_-g*M+t*y)*k,e[9]=(n*M-S*_-T*y)*k,e[10]=(l*A-m*p+w*c)*k,e[11]=(i*p-o*A-u*c)*k,e[12]=(g*C-v*s-r*y)*k,e[13]=(S*s-n*C+E*y)*k,e[14]=(m*a-l*x-h*c)*k,e[15]=(o*x-i*a+f*c)*k,e):null}},56508:function(U,F,e){var d=e(36635);U.exports=S;function S(n,E,T,v){var g,r,t,o,i,f,u,l,m,h,w=E[0],c=E[1],a=E[2],p=v[0],x=v[1],A=v[2],P=T[0],y=T[1],C=T[2];return Math.abs(w-P)<1e-6&&Math.abs(c-y)<1e-6&&Math.abs(a-C)<1e-6?d(n):(u=w-P,l=c-y,m=a-C,h=1/Math.sqrt(u*u+l*l+m*m),u*=h,l*=h,m*=h,g=x*m-A*l,r=A*u-p*m,t=p*l-x*u,h=Math.sqrt(g*g+r*r+t*t),h?(h=1/h,g*=h,r*=h,t*=h):(g=0,r=0,t=0),o=l*t-m*r,i=m*g-u*t,f=u*r-l*g,h=Math.sqrt(o*o+i*i+f*f),h?(h=1/h,o*=h,i*=h,f*=h):(o=0,i=0,f=0),n[0]=g,n[1]=o,n[2]=u,n[3]=0,n[4]=r,n[5]=i,n[6]=l,n[7]=0,n[8]=t,n[9]=f,n[10]=m,n[11]=0,n[12]=-(g*w+r*c+t*a),n[13]=-(o*w+i*c+f*a),n[14]=-(u*w+l*c+m*a),n[15]=1,n)}},80944:function(U){U.exports=F;function F(e,d,S){var n=d[0],E=d[1],T=d[2],v=d[3],g=d[4],r=d[5],t=d[6],o=d[7],i=d[8],f=d[9],u=d[10],l=d[11],m=d[12],h=d[13],w=d[14],c=d[15],a=S[0],p=S[1],x=S[2],A=S[3];return e[0]=a*n+p*g+x*i+A*m,e[1]=a*E+p*r+x*f+A*h,e[2]=a*T+p*t+x*u+A*w,e[3]=a*v+p*o+x*l+A*c,a=S[4],p=S[5],x=S[6],A=S[7],e[4]=a*n+p*g+x*i+A*m,e[5]=a*E+p*r+x*f+A*h,e[6]=a*T+p*t+x*u+A*w,e[7]=a*v+p*o+x*l+A*c,a=S[8],p=S[9],x=S[10],A=S[11],e[8]=a*n+p*g+x*i+A*m,e[9]=a*E+p*r+x*f+A*h,e[10]=a*T+p*t+x*u+A*w,e[11]=a*v+p*o+x*l+A*c,a=S[12],p=S[13],x=S[14],A=S[15],e[12]=a*n+p*g+x*i+A*m,e[13]=a*E+p*r+x*f+A*h,e[14]=a*T+p*t+x*u+A*w,e[15]=a*v+p*o+x*l+A*c,e}},97688:function(U){U.exports=F;function F(e,d,S,n,E,T,v){var g=1/(d-S),r=1/(n-E),t=1/(T-v);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*t,e[11]=0,e[12]=(d+S)*g,e[13]=(E+n)*r,e[14]=(v+T)*t,e[15]=1,e}},51296:function(U){U.exports=F;function F(e,d,S,n,E){var T=1/Math.tan(d/2),v=1/(n-E);return e[0]=T/S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(E+n)*v,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*E*n*v,e[15]=0,e}},63688:function(U){U.exports=F;function F(e,d,S,n){var E=Math.tan(d.upDegrees*Math.PI/180),T=Math.tan(d.downDegrees*Math.PI/180),v=Math.tan(d.leftDegrees*Math.PI/180),g=Math.tan(d.rightDegrees*Math.PI/180),r=2/(v+g),t=2/(E+T);return e[0]=r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=-((v-g)*r*.5),e[9]=(E-T)*t*.5,e[10]=n/(S-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*S/(S-n),e[15]=0,e}},30016:function(U){U.exports=F;function F(e,d,S,n){var E=n[0],T=n[1],v=n[2],g=Math.sqrt(E*E+T*T+v*v),r,t,o,i,f,u,l,m,h,w,c,a,p,x,A,P,y,C,M,s,_,b,k,D;return Math.abs(g)<1e-6?null:(g=1/g,E*=g,T*=g,v*=g,r=Math.sin(S),t=Math.cos(S),o=1-t,i=d[0],f=d[1],u=d[2],l=d[3],m=d[4],h=d[5],w=d[6],c=d[7],a=d[8],p=d[9],x=d[10],A=d[11],P=E*E*o+t,y=T*E*o+v*r,C=v*E*o-T*r,M=E*T*o-v*r,s=T*T*o+t,_=v*T*o+E*r,b=E*v*o+T*r,k=T*v*o-E*r,D=v*v*o+t,e[0]=i*P+m*y+a*C,e[1]=f*P+h*y+p*C,e[2]=u*P+w*y+x*C,e[3]=l*P+c*y+A*C,e[4]=i*M+m*s+a*_,e[5]=f*M+h*s+p*_,e[6]=u*M+w*s+x*_,e[7]=l*M+c*s+A*_,e[8]=i*b+m*k+a*D,e[9]=f*b+h*k+p*D,e[10]=u*b+w*k+x*D,e[11]=l*b+c*k+A*D,d!==e&&(e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]),e)}},15456:function(U){U.exports=F;function F(e,d,S){var n=Math.sin(S),E=Math.cos(S),T=d[4],v=d[5],g=d[6],r=d[7],t=d[8],o=d[9],i=d[10],f=d[11];return d!==e&&(e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=d[3],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]),e[4]=T*E+t*n,e[5]=v*E+o*n,e[6]=g*E+i*n,e[7]=r*E+f*n,e[8]=t*E-T*n,e[9]=o*E-v*n,e[10]=i*E-g*n,e[11]=f*E-r*n,e}},64840:function(U){U.exports=F;function F(e,d,S){var n=Math.sin(S),E=Math.cos(S),T=d[0],v=d[1],g=d[2],r=d[3],t=d[8],o=d[9],i=d[10],f=d[11];return d!==e&&(e[4]=d[4],e[5]=d[5],e[6]=d[6],e[7]=d[7],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]),e[0]=T*E-t*n,e[1]=v*E-o*n,e[2]=g*E-i*n,e[3]=r*E-f*n,e[8]=T*n+t*E,e[9]=v*n+o*E,e[10]=g*n+i*E,e[11]=r*n+f*E,e}},4192:function(U){U.exports=F;function F(e,d,S){var n=Math.sin(S),E=Math.cos(S),T=d[0],v=d[1],g=d[2],r=d[3],t=d[4],o=d[5],i=d[6],f=d[7];return d!==e&&(e[8]=d[8],e[9]=d[9],e[10]=d[10],e[11]=d[11],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]),e[0]=T*E+t*n,e[1]=v*E+o*n,e[2]=g*E+i*n,e[3]=r*E+f*n,e[4]=t*E-T*n,e[5]=o*E-v*n,e[6]=i*E-g*n,e[7]=f*E-r*n,e}},68152:function(U){U.exports=F;function F(e,d,S){var n=S[0],E=S[1],T=S[2];return e[0]=d[0]*n,e[1]=d[1]*n,e[2]=d[2]*n,e[3]=d[3]*n,e[4]=d[4]*E,e[5]=d[5]*E,e[6]=d[6]*E,e[7]=d[7]*E,e[8]=d[8]*T,e[9]=d[9]*T,e[10]=d[10]*T,e[11]=d[11]*T,e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15],e}},89412:function(U){U.exports=F;function F(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},35176:function(U){U.exports=F;function F(e,d,S){var n=S[0],E=S[1],T=S[2],v,g,r,t,o,i,f,u,l,m,h,w;return d===e?(e[12]=d[0]*n+d[4]*E+d[8]*T+d[12],e[13]=d[1]*n+d[5]*E+d[9]*T+d[13],e[14]=d[2]*n+d[6]*E+d[10]*T+d[14],e[15]=d[3]*n+d[7]*E+d[11]*T+d[15]):(v=d[0],g=d[1],r=d[2],t=d[3],o=d[4],i=d[5],f=d[6],u=d[7],l=d[8],m=d[9],h=d[10],w=d[11],e[0]=v,e[1]=g,e[2]=r,e[3]=t,e[4]=o,e[5]=i,e[6]=f,e[7]=u,e[8]=l,e[9]=m,e[10]=h,e[11]=w,e[12]=v*n+o*E+l*T+d[12],e[13]=g*n+i*E+m*T+d[13],e[14]=r*n+f*E+h*T+d[14],e[15]=t*n+u*E+w*T+d[15]),e}},86520:function(U){U.exports=F;function F(e,d){if(e===d){var S=d[1],n=d[2],E=d[3],T=d[6],v=d[7],g=d[11];e[1]=d[4],e[2]=d[8],e[3]=d[12],e[4]=S,e[6]=d[9],e[7]=d[13],e[8]=n,e[9]=T,e[11]=d[14],e[12]=E,e[13]=v,e[14]=g}else e[0]=d[0],e[1]=d[4],e[2]=d[8],e[3]=d[12],e[4]=d[1],e[5]=d[5],e[6]=d[9],e[7]=d[13],e[8]=d[2],e[9]=d[6],e[10]=d[10],e[11]=d[14],e[12]=d[3],e[13]=d[7],e[14]=d[11],e[15]=d[15];return e}},23352:function(U,F,e){var d=e(42771),S=e(55616),n=e(28624),E=e(55212),T=e(60463),v=e(72160),g=e(33888),r=e(14144),t=e(51160),o=e(58908),i=e(65819),f=e(23464),u=e(63768),l=e(50896),m=e(71920),h=e(47520),w=e(308),c=w.nextPow2,a=new T,p=!1;if(document.body){var x=document.body.appendChild(document.createElement("div"));x.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(x).fontStretch&&(p=!0),document.body.removeChild(x)}var A=function(C){P(C)?(C={regl:C},this.gl=C.regl._gl):this.gl=E(C),this.shader=a.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=C.regl||n({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),a.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(o(C)?C:{})};A.prototype.createShader=function(){var C=this.regl,M=C({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:C.prop("count"),offset:C.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:C.this("sizeBuffer")},width:{offset:0,stride:8,buffer:C.this("sizeBuffer")},char:C.this("charBuffer"),position:C.this("position")},uniforms:{atlasSize:function(_,b){return[b.atlas.width,b.atlas.height]},atlasDim:function(_,b){return[b.atlas.cols,b.atlas.rows]},atlas:function(_,b){return b.atlas.texture},charStep:function(_,b){return b.atlas.step},em:function(_,b){return b.atlas.em},color:C.prop("color"),opacity:C.prop("opacity"),viewport:C.this("viewportArray"),scale:C.this("scale"),align:C.prop("align"),baseline:C.prop("baseline"),translate:C.this("translate"),positionOffset:C.prop("positionOffset")},primitive:"points",viewport:C.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),s={};return{regl:C,draw:M,atlas:s}},A.prototype.update=function(C){var M=this;if(typeof C=="string")C={text:C};else if(!C)return;C=S(C,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),C.opacity!=null&&(Array.isArray(C.opacity)?this.opacity=C.opacity.map(function(Le){return parseFloat(Le)}):this.opacity=parseFloat(C.opacity)),C.viewport!=null&&(this.viewport=t(C.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),C.kerning!=null&&(this.kerning=C.kerning),C.offset!=null&&(typeof C.offset=="number"&&(C.offset=[C.offset,0]),this.positionOffset=h(C.offset)),C.direction&&(this.direction=C.direction),C.range&&(this.range=C.range,this.scale=[1/(C.range[2]-C.range[0]),1/(C.range[3]-C.range[1])],this.translate=[-C.range[0],-C.range[1]]),C.scale&&(this.scale=C.scale),C.translate&&(this.translate=C.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!C.font&&(C.font=A.baseFontSize+"px sans-serif");var s=!1,_=!1;if(C.font&&(Array.isArray(C.font)?C.font:[C.font]).forEach(function(Le,Ge){if(typeof Le=="string")try{Le=d.parse(Le)}catch{Le=d.parse(A.baseFontSize+"px "+Le)}else{var rt=Le.style,ot=Le.weight,$e=Le.stretch,qe=Le.variant;Le=d.parse(d.stringify(Le)),rt&&(Le.style=rt),ot&&(Le.weight=ot),$e&&(Le.stretch=$e),qe&&(Le.variant=qe)}var ht=d.stringify({size:A.baseFontSize,family:Le.family,stretch:p?Le.stretch:void 0,variant:Le.variant,weight:Le.weight,style:Le.style}),vt=i(Le.size),pt=Math.round(vt[0]*f(vt[1]));if(pt!==M.fontSize[Ge]&&(_=!0,M.fontSize[Ge]=pt),(!M.font[Ge]||ht!=M.font[Ge].baseString)&&(s=!0,M.font[Ge]=A.fonts[ht],!M.font[Ge])){var wt=Le.family.join(", "),Et=[Le.style];Le.style!=Le.variant&&Et.push(Le.variant),Le.variant!=Le.weight&&Et.push(Le.weight),p&&Le.weight!=Le.stretch&&Et.push(Le.stretch),M.font[Ge]={baseString:ht,family:wt,weight:Le.weight,stretch:Le.stretch,style:Le.style,variant:Le.variant,width:{},kerning:{},metrics:m(wt,{origin:"top",fontSize:A.baseFontSize,fontStyle:Et.join(" ")})},A.fonts[ht]=M.font[Ge]}}),(s||_)&&this.font.forEach(function(Le,Ge){var rt=d.stringify({size:M.fontSize[Ge],family:Le.family,stretch:p?Le.stretch:void 0,variant:Le.variant,weight:Le.weight,style:Le.style});if(M.fontAtlas[Ge]=M.shader.atlas[rt],!M.fontAtlas[Ge]){var ot=Le.metrics;M.shader.atlas[rt]=M.fontAtlas[Ge]={fontString:rt,step:Math.ceil(M.fontSize[Ge]*ot.bottom*.5)*2,em:M.fontSize[Ge],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:M.regl.texture()}}C.text==null&&(C.text=M.text)}),typeof C.text=="string"&&C.position&&C.position.length>2){for(var b=Array(C.position.length*.5),k=0;k<b.length;k++)b[k]=C.text;C.text=b}var D;if(C.text!=null||s){if(this.textOffsets=[0],Array.isArray(C.text)){this.count=C.text[0].length,this.counts=[this.count];for(var V=1;V<C.text.length;V++)this.textOffsets[V]=this.textOffsets[V-1]+C.text[V-1].length,this.count+=C.text[V].length,this.counts.push(C.text[V].length);this.text=C.text.join("")}else this.text=C.text,this.count=this.text.length,this.counts=[this.count];D=[],this.font.forEach(function(Le,Ge){A.atlasContext.font=Le.baseString;for(var rt=M.fontAtlas[Ge],ot=0;ot<M.text.length;ot++){var $e=M.text.charAt(ot);if(rt.ids[$e]==null&&(rt.ids[$e]=rt.chars.length,rt.chars.push($e),D.push($e)),Le.width[$e]==null&&(Le.width[$e]=A.atlasContext.measureText($e).width/A.baseFontSize,M.kerning)){var qe=[];for(var ht in Le.width)qe.push(ht+$e,$e+ht);l(Le.kerning,u(Le.family,{pairs:qe}))}}})}if(C.position)if(C.position.length>2){for(var O=!C.position[0].length,N=r.mallocFloat(this.count*2),B=0,z=0;B<this.counts.length;B++){var H=this.counts[B];if(O)for(var X=0;X<H;X++)N[z++]=C.position[B*2],N[z++]=C.position[B*2+1];else for(var $=0;$<H;$++)N[z++]=C.position[B][0],N[z++]=C.position[B][1]}this.position.call?this.position({type:"float",data:N}):this.position=this.regl.buffer({type:"float",data:N}),r.freeFloat(N)}else this.position.destroy&&this.position.destroy(),this.position={constant:C.position};if(C.text||s){var ne=r.mallocUint8(this.count),q=r.mallocFloat(this.count*2);this.textWidth=[];for(var ue=0,te=0;ue<this.counts.length;ue++){for(var J=this.counts[ue],ie=this.font[ue]||this.font[0],K=this.fontAtlas[ue]||this.fontAtlas[0],ee=0;ee<J;ee++){var le=this.text.charAt(te),j=this.text.charAt(te-1);if(ne[te]=K.ids[le],q[te*2]=ie.width[le],ee){var Z=q[te*2-2],fe=q[te*2],re=q[te*2-1],ce=re+Z*.5+fe*.5;if(this.kerning){var xe=ie.kerning[j+le];xe&&(ce+=xe*.001)}q[te*2+1]=ce}else q[te*2+1]=q[te*2]*.5;te++}this.textWidth.push(q.length?q[te*2-2]*.5+q[te*2-1]:0)}C.align||(C.align=this.align),this.charBuffer({data:ne,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),r.freeUint8(ne),r.freeFloat(q),D.length&&this.font.forEach(function(Le,Ge){var rt=M.fontAtlas[Ge],ot=rt.step,$e=Math.floor(A.maxAtlasSize/ot),qe=Math.min($e,rt.chars.length),ht=Math.ceil(rt.chars.length/qe),vt=c(qe*ot),pt=c(ht*ot);rt.width=vt,rt.height=pt,rt.rows=ht,rt.cols=qe,rt.em&&rt.texture({data:g({canvas:A.atlasCanvas,font:rt.fontString,chars:rt.chars,shape:[vt,pt],step:[ot,ot]})})})}if(C.align&&(this.align=C.align,this.alignOffset=this.textWidth.map(function(Le,Ge){var rt=Array.isArray(M.align)?M.align.length>1?M.align[Ge]:M.align[0]:M.align;if(typeof rt=="number")return rt;switch(rt){case"right":case"end":return-Le;case"center":case"centre":case"middle":return-Le*.5}return 0})),this.baseline==null&&C.baseline==null&&(C.baseline=0),C.baseline!=null&&(this.baseline=C.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Le,Ge){var rt=(M.font[Ge]||M.font[0]).metrics,ot=0;return ot+=rt.bottom*.5,typeof Le=="number"?ot+=Le-rt.baseline:ot+=-rt[Le],ot*=-1,ot})),C.color!=null)if(C.color||(C.color="transparent"),typeof C.color=="string"||!isNaN(C.color))this.color=v(C.color,"uint8");else{var Te;if(typeof C.color[0]=="number"&&C.color.length>this.counts.length){var we=C.color.length;Te=r.mallocUint8(we);for(var _e=(C.color.subarray||C.color.slice).bind(C.color),ke=0;ke<we;ke+=4)Te.set(v(_e(ke,ke+4),"uint8"),ke)}else{var Ne=C.color.length;Te=r.mallocUint8(Ne*4);for(var Ee=0;Ee<Ne;Ee++)Te.set(v(C.color[Ee]||0,"uint8"),Ee*4)}this.color=Te}if(C.position||C.text||C.color||C.baseline||C.align||C.font||C.offset||C.opacity){var ze=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(ze){var Ce=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Ce);for(var Oe=0;Oe<this.batch.length;Oe++)this.batch[Oe]={count:this.counts.length>1?this.counts[Oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Oe*4,Oe*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Oe]:this.opacity,baseline:this.baselineOffset[Oe]!=null?this.baselineOffset[Oe]:this.baselineOffset[0],align:this.align?this.alignOffset[Oe]!=null?this.alignOffset[Oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[Oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Oe*2,Oe*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={};function P(y){return typeof y=="function"&&y._gl&&y.prop&&y.texture&&y.buffer}U.exports=A},55212:function(U,F,e){var d=e(55616);U.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},n(r)?r={container:r}:E(r)?r={container:r}:T(r)?r={gl:r}:r=d(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=e.g.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var t=document.querySelector(r.container);if(!t)throw Error("Element "+r.container+" is not found");r.container=t}n(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=v(),r.container.appendChild(r.canvas),S(r))}else if(!r.canvas)if(typeof document<"u")r.container=document.body||document.documentElement,r.canvas=v(),r.container.appendChild(r.canvas),S(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(o){try{r.gl=r.canvas.getContext(o,r.attrs)}catch{}return r.gl}),r.gl};function S(g){if(g.container)if(g.container==document.body)document.body.style.width||(g.canvas.width=g.width||g.pixelRatio*e.g.innerWidth),document.body.style.height||(g.canvas.height=g.height||g.pixelRatio*e.g.innerHeight);else{var r=g.container.getBoundingClientRect();g.canvas.width=g.width||r.right-r.left,g.canvas.height=g.height||r.bottom-r.top}}function n(g){return typeof g.getContext=="function"&&"width"in g&&"height"in g}function E(g){return typeof g.nodeName=="string"&&typeof g.appendChild=="function"&&typeof g.getBoundingClientRect=="function"}function T(g){return typeof g.drawArrays=="function"||typeof g.drawElements=="function"}function v(){var g=document.createElement("canvas");return g.style.position="absolute",g.style.top=0,g.style.left=0,g}},26444:function(U){U.exports=function(F){typeof F=="string"&&(F=[F]);for(var e=[].slice.call(arguments,1),d=[],S=0;S<F.length-1;S++)d.push(F[S],e[S]||"");return d.push(F[S]),d.join("")}},2304:function(U,F,e){var d=e(53664),S=d("%Object.getOwnPropertyDescriptor%",!0);if(S)try{S([],"length")}catch{S=null}U.exports=S},52264:function(U,F,e){var d=e(24200),S;typeof e.g.matchMedia=="function"?S=!e.g.matchMedia("(hover: none)").matches:S=d,U.exports=S},89184:function(U,F,e){var d=e(24200);function S(){var n=!1;try{var E=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,E),window.removeEventListener("test",null,E)}catch{n=!1}return n}U.exports=d&&S()},39640:function(U,F,e){var d=e(53664),S=d("%Object.defineProperty%",!0),n=function(){if(S)try{return S({},"a",{value:1}),!0}catch{return!1}return!1};n.hasArrayLengthDefineBug=function(){if(!n())return null;try{return S([],"length",{value:1}).length!==1}catch{return!0}},U.exports=n},69572:function(U){var F={foo:{}},e=Object;U.exports=function(){return{__proto__:F}.foo===F.foo&&!({__proto__:null}instanceof e)}},71080:function(U,F,e){var d=typeof Symbol<"u"&&Symbol,S=e(89320);U.exports=function(){return typeof d!="function"||typeof Symbol!="function"||typeof d("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:S()}},89320:function(U){U.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},d=Symbol("test"),S=Object(d);if(typeof d=="string"||Object.prototype.toString.call(d)!=="[object Symbol]"||Object.prototype.toString.call(S)!=="[object Symbol]")return!1;var n=42;e[d]=n;for(d in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var E=Object.getOwnPropertySymbols(e);if(E.length!==1||E[0]!==d||!Object.prototype.propertyIsEnumerable.call(e,d))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var T=Object.getOwnPropertyDescriptor(e,d);if(T.value!==n||T.enumerable!==!0)return!1}return!0}},46672:function(U,F,e){var d=e(89320);U.exports=function(){return d()&&!!Symbol.toStringTag}},92064:function(U,F,e){var d=Function.prototype.call,S=Object.prototype.hasOwnProperty,n=e(8844);U.exports=n.call(d,S)},35984:function(U,F){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */F.read=function(e,d,S,n,E){var T,v,g=E*8-n-1,r=(1<<g)-1,t=r>>1,o=-7,i=S?E-1:0,f=S?-1:1,u=e[d+i];for(i+=f,T=u&(1<<-o)-1,u>>=-o,o+=g;o>0;T=T*256+e[d+i],i+=f,o-=8);for(v=T&(1<<-o)-1,T>>=-o,o+=n;o>0;v=v*256+e[d+i],i+=f,o-=8);if(T===0)T=1-t;else{if(T===r)return v?NaN:(u?-1:1)*(1/0);v=v+Math.pow(2,n),T=T-t}return(u?-1:1)*v*Math.pow(2,T-n)},F.write=function(e,d,S,n,E,T){var v,g,r,t=T*8-E-1,o=(1<<t)-1,i=o>>1,f=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=n?0:T-1,l=n?1:-1,m=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(g=isNaN(d)?1:0,v=o):(v=Math.floor(Math.log(d)/Math.LN2),d*(r=Math.pow(2,-v))<1&&(v--,r*=2),v+i>=1?d+=f/r:d+=f*Math.pow(2,1-i),d*r>=2&&(v++,r/=2),v+i>=o?(g=0,v=o):v+i>=1?(g=(d*r-1)*Math.pow(2,E),v=v+i):(g=d*Math.pow(2,i-1)*Math.pow(2,E),v=0));E>=8;e[S+u]=g&255,u+=l,g/=256,E-=8);for(v=v<<E|g,t+=E;t>0;e[S+u]=v&255,u+=l,v/=256,t-=8);e[S+u-l]|=m*128}},6768:function(U){typeof Object.create=="function"?U.exports=function(e,d){d&&(e.super_=d,e.prototype=Object.create(d.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:U.exports=function(e,d){if(d){e.super_=d;var S=function(){};S.prototype=d.prototype,e.prototype=new S,e.prototype.constructor=e}}},91148:function(U,F,e){var d=e(46672)(),S=e(99676),n=S("Object.prototype.toString"),E=function(r){return d&&r&&typeof r=="object"&&Symbol.toStringTag in r?!1:n(r)==="[object Arguments]"},T=function(r){return E(r)?!0:r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&n(r)!=="[object Array]"&&n(r.callee)==="[object Function]"},v=function(){return E(arguments)}();E.isLegacyArguments=T,U.exports=v?E:T},24200:function(U){U.exports=!0},90720:function(U){var F=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,d,S;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{d=Object.defineProperty({},"length",{get:function(){throw S}}),S={},e(function(){throw 42},null,d)}catch(w){w!==S&&(e=null)}else e=null;var n=/^\s*class\b/,E=function(c){try{var a=F.call(c);return n.test(a)}catch{return!1}},T=function(c){try{return E(c)?!1:(F.call(c),!0)}catch{return!1}},v=Object.prototype.toString,g="[object Object]",r="[object Function]",t="[object GeneratorFunction]",o="[object HTMLAllCollection]",i="[object HTML document.all class]",f="[object HTMLCollection]",u=typeof Symbol=="function"&&!!Symbol.toStringTag,l=!(0 in[,]),m=function(){return!1};if(typeof document=="object"){var h=document.all;v.call(h)===v.call(document.all)&&(m=function(c){if((l||!c)&&(typeof c>"u"||typeof c=="object"))try{var a=v.call(c);return(a===o||a===i||a===f||a===g)&&c("")==null}catch{}return!1})}U.exports=e?function(c){if(m(c))return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;try{e(c,null,d)}catch(a){if(a!==S)return!1}return!E(c)&&T(c)}:function(c){if(m(c))return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;if(u)return T(c);if(E(c))return!1;var a=v.call(c);return a!==r&&a!==t&&!/^\[object HTML/.test(a)?!1:T(c)}},84420:function(U,F,e){var d=Object.prototype.toString,S=Function.prototype.toString,n=/^\s*(?:function)?\*/,E=e(46672)(),T=Object.getPrototypeOf,v=function(){if(!E)return!1;try{return Function("return function*() {}")()}catch{}},g;U.exports=function(t){if(typeof t!="function")return!1;if(n.test(S.call(t)))return!0;if(!E){var o=d.call(t);return o==="[object GeneratorFunction]"}if(!T)return!1;if(typeof g>"u"){var i=v();g=i?T(i):!1}return T(t)===g}},96604:function(U){U.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(U){U.exports=function(e){return e!==e}},1560:function(U,F,e){var d=e(57916),S=e(81288),n=e(85992),E=e(57740),T=e(59736),v=d(E(),Number);S(v,{getPolyfill:E,implementation:n,shim:T}),U.exports=v},57740:function(U,F,e){var d=e(85992);U.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:d}},59736:function(U,F,e){var d=e(81288),S=e(57740);U.exports=function(){var E=S();return d(Number,{isNaN:E},{isNaN:function(){return Number.isNaN!==E}}),E}},18400:function(U){U.exports=function(F){var e=typeof F;return F!==null&&(e==="object"||e==="function")}},58908:function(U){var F=Object.prototype.toString;U.exports=function(e){var d;return F.call(e)==="[object Object]"&&(d=Object.getPrototypeOf(e),d===null||d===Object.getPrototypeOf({}))}},94576:function(U){U.exports=function(F){for(var e=F.length,d,S=0;S<e;S++)if(d=F.charCodeAt(S),(d<9||d>13)&&d!==32&&d!==133&&d!==160&&d!==5760&&d!==6158&&(d<8192||d>8205)&&d!==8232&&d!==8233&&d!==8239&&d!==8287&&d!==8288&&d!==12288&&d!==65279)return!1;return!0}},53520:function(U){U.exports=function(e){return typeof e!="string"?!1:(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))}},7728:function(U,F,e){var d=e(46492),S=e(63436),n=e(99676),E=n("Object.prototype.toString"),T=e(46672)(),v=e(2304),g=typeof globalThis>"u"?e.g:globalThis,r=S(),t=n("Array.prototype.indexOf",!0)||function(m,h){for(var w=0;w<m.length;w+=1)if(m[w]===h)return w;return-1},o=n("String.prototype.slice"),i={},f=Object.getPrototypeOf;T&&v&&f&&d(r,function(l){var m=new g[l];if(Symbol.toStringTag in m){var h=f(m),w=v(h,Symbol.toStringTag);if(!w){var c=f(h);w=v(c,Symbol.toStringTag)}i[l]=w.get}});var u=function(m){var h=!1;return d(i,function(w,c){if(!h)try{h=w.call(m)===c}catch{}}),h};U.exports=function(m){if(!m||typeof m!="object")return!1;if(!T||!(Symbol.toStringTag in m)){var h=o(E(m),8,-1);return t(r,h)>-1}return v?u(m):!1}},76244:function(U){U.exports=Math.log2||function(F){return Math.log(F)*Math.LOG2E}},62644:function(U,F,e){U.exports=S;var d=e(93784);function S(n,E){E||(E=n,n=window);var T=0,v=0,g=0,r={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function o(x){var A=!1;return"altKey"in x&&(A=A||x.altKey!==r.alt,r.alt=!!x.altKey),"shiftKey"in x&&(A=A||x.shiftKey!==r.shift,r.shift=!!x.shiftKey),"ctrlKey"in x&&(A=A||x.ctrlKey!==r.control,r.control=!!x.ctrlKey),"metaKey"in x&&(A=A||x.metaKey!==r.meta,r.meta=!!x.metaKey),A}function i(x,A){var P=d.x(A),y=d.y(A);"buttons"in A&&(x=A.buttons|0),(x!==T||P!==v||y!==g||o(A))&&(T=x|0,v=P||0,g=y||0,E&&E(T,v,g,r))}function f(x){i(0,x)}function u(){(T||v||g||r.shift||r.alt||r.meta||r.control)&&(v=g=0,T=0,r.shift=r.alt=r.control=r.meta=!1,E&&E(0,0,0,r))}function l(x){o(x)&&E&&E(T,v,g,r)}function m(x){d.buttons(x)===0?i(0,x):i(T,x)}function h(x){i(T|d.buttons(x),x)}function w(x){i(T&~d.buttons(x),x)}function c(){t||(t=!0,n.addEventListener("mousemove",m),n.addEventListener("mousedown",h),n.addEventListener("mouseup",w),n.addEventListener("mouseleave",f),n.addEventListener("mouseenter",f),n.addEventListener("mouseout",f),n.addEventListener("mouseover",f),n.addEventListener("blur",u),n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l),n!==window&&(window.addEventListener("blur",u),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function a(){t&&(t=!1,n.removeEventListener("mousemove",m),n.removeEventListener("mousedown",h),n.removeEventListener("mouseup",w),n.removeEventListener("mouseleave",f),n.removeEventListener("mouseenter",f),n.removeEventListener("mouseout",f),n.removeEventListener("mouseover",f),n.removeEventListener("blur",u),n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l),n!==window&&(window.removeEventListener("blur",u),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}c();var p={element:n};return Object.defineProperties(p,{enabled:{get:function(){return t},set:function(x){x?c():a()},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return g},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),p}},29128:function(U){var F={left:0,top:0};U.exports=e;function e(S,n,E){n=n||S.currentTarget||S.srcElement,Array.isArray(E)||(E=[0,0]);var T=S.clientX||0,v=S.clientY||0,g=d(n);return E[0]=T-g.left,E[1]=v-g.top,E}function d(S){return S===window||S===document||S===document.body?F:S.getBoundingClientRect()}},93784:function(U,F){function e(E){if(typeof E=="object"){if("buttons"in E)return E.buttons;if("which"in E){var T=E.which;if(T===2)return 4;if(T===3)return 2;if(T>0)return 1<<T-1}else if("button"in E){var T=E.button;if(T===1)return 4;if(T===2)return 2;if(T>=0)return 1<<T}}return 0}F.buttons=e;function d(E){return E.target||E.srcElement||window}F.element=d;function S(E){if(typeof E=="object"){if("offsetX"in E)return E.offsetX;var T=d(E),v=T.getBoundingClientRect();return E.clientX-v.left}return 0}F.x=S;function n(E){if(typeof E=="object"){if("offsetY"in E)return E.offsetY;var T=d(E),v=T.getBoundingClientRect();return E.clientY-v.top}return 0}F.y=n},97264:function(U,F,e){var d=e(23464);U.exports=S;function S(n,E,T){typeof n=="function"&&(T=!!E,E=n,n=window);var v=d("ex",n),g=function(r){T&&r.preventDefault();var t=r.deltaX||0,o=r.deltaY||0,i=r.deltaZ||0,f=r.deltaMode,u=1;switch(f){case 1:u=v;break;case 2:u=window.innerHeight;break}if(t*=u,o*=u,i*=u,t||o||i)return E(t,o,i,r)};return n.addEventListener("wheel",g),g}},88324:function(U,F,e){var d;/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(n,E,T){E[n]=E[n]||T(),U.exports?U.exports=E[n]:(d=(function(){return E[n]}).call(F,e,F,U),d!==void 0&&(U.exports=d))})("Promise",typeof e.g<"u"?e.g:this,function(){var n,E,T,v=Object.prototype.toString,g=typeof setImmediate<"u"?function(p){return setImmediate(p)}:setTimeout;try{Object.defineProperty({},"x",{}),n=function(p,x,A,P){return Object.defineProperty(p,x,{value:A,writable:!0,configurable:P!==!1})}}catch{n=function(x,A,P){return x[A]=P,x}}T=function(){var p,x,A;function P(y,C){this.fn=y,this.self=C,this.next=void 0}return{add:function(C,M){A=new P(C,M),x?x.next=A:p=A,x=A,A=void 0},drain:function(){var C=p;for(p=x=E=void 0;C;)C.fn.call(C.self),C=C.next}}}();function r(a,p){T.add(a,p),E||(E=g(T.drain))}function t(a){var p,x=typeof a;return a!=null&&(x=="object"||x=="function")&&(p=a.then),typeof p=="function"?p:!1}function o(){for(var a=0;a<this.chain.length;a++)i(this,this.state===1?this.chain[a].success:this.chain[a].failure,this.chain[a]);this.chain.length=0}function i(a,p,x){var A,P;try{p===!1?x.reject(a.msg):(p===!0?A=a.msg:A=p.call(void 0,a.msg),A===x.promise?x.reject(TypeError("Promise-chain cycle")):(P=t(A))?P.call(A,x.resolve,x.reject):x.resolve(A))}catch(y){x.reject(y)}}function f(a){var p,x=this;if(!x.triggered){x.triggered=!0,x.def&&(x=x.def);try{(p=t(a))?r(function(){var A=new m(x);try{p.call(a,function(){f.apply(A,arguments)},function(){u.apply(A,arguments)})}catch(P){u.call(A,P)}}):(x.msg=a,x.state=1,x.chain.length>0&&r(o,x))}catch(A){u.call(new m(x),A)}}}function u(a){var p=this;p.triggered||(p.triggered=!0,p.def&&(p=p.def),p.msg=a,p.state=2,p.chain.length>0&&r(o,p))}function l(a,p,x,A){for(var P=0;P<p.length;P++)(function(C){a.resolve(p[C]).then(function(s){x(C,s)},A)})(P)}function m(a){this.def=a,this.triggered=!1}function h(a){this.promise=a,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function w(a){if(typeof a!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var p=new h(this);this.then=function(A,P){var y={success:typeof A=="function"?A:!0,failure:typeof P=="function"?P:!1};return y.promise=new this.constructor(function(M,s){if(typeof M!="function"||typeof s!="function")throw TypeError("Not a function");y.resolve=M,y.reject=s}),p.chain.push(y),p.state!==0&&r(o,p),y.promise},this.catch=function(A){return this.then(void 0,A)};try{a.call(void 0,function(A){f.call(p,A)},function(A){u.call(p,A)})}catch(x){u.call(p,x)}}var c=n({},"constructor",w,!1);return w.prototype=c,n(c,"__NPO__",0,!1),n(w,"resolve",function(p){var x=this;return p&&typeof p=="object"&&p.__NPO__===1?p:new x(function(P,y){if(typeof P!="function"||typeof y!="function")throw TypeError("Not a function");P(p)})}),n(w,"reject",function(p){return new this(function(A,P){if(typeof A!="function"||typeof P!="function")throw TypeError("Not a function");P(p)})}),n(w,"all",function(p){var x=this;return v.call(p)!="[object Array]"?x.reject(TypeError("Not an array")):p.length===0?x.resolve([]):new x(function(P,y){if(typeof P!="function"||typeof y!="function")throw TypeError("Not a function");var C=p.length,M=Array(C),s=0;l(x,p,function(b,k){M[b]=k,++s===C&&P(M)},y)})}),n(w,"race",function(p){var x=this;return v.call(p)!="[object Array]"?x.reject(TypeError("Not an array")):new x(function(P,y){if(typeof P!="function"||typeof y!="function")throw TypeError("Not a function");l(x,p,function(M,s){P(s)},y)})}),w})},48816:function(U){var F=Math.PI,e=v(120);U.exports=d;function d(g){for(var r,t=[],o=0,i=0,f=0,u=0,l=null,m=null,h=0,w=0,c=0,a=g.length;c<a;c++){var p=g[c],x=p[0];switch(x){case"M":f=p[1],u=p[2];break;case"A":p=E(h,w,p[1],p[2],v(p[3]),p[4],p[5],p[6],p[7]),p.unshift("C"),p.length>7&&(t.push(p.splice(0,7)),p.unshift("C"));break;case"S":var A=h,P=w;(r=="C"||r=="S")&&(A+=A-o,P+=P-i),p=["C",A,P,p[1],p[2],p[3],p[4]];break;case"T":r=="Q"||r=="T"?(l=h*2-l,m=w*2-m):(l=h,m=w),p=n(h,w,l,m,p[1],p[2]);break;case"Q":l=p[1],m=p[2],p=n(h,w,p[1],p[2],p[3],p[4]);break;case"L":p=S(h,w,p[1],p[2]);break;case"H":p=S(h,w,p[1],w);break;case"V":p=S(h,w,h,p[1]);break;case"Z":p=S(h,w,f,u);break}r=x,h=p[p.length-2],w=p[p.length-1],p.length>4?(o=p[p.length-4],i=p[p.length-3]):(o=h,i=w),t.push(p)}return t}function S(g,r,t,o){return["C",g,r,t,o,t,o]}function n(g,r,t,o,i,f){return["C",g/3+.6666666666666666*t,r/3+.6666666666666666*o,i/3+.6666666666666666*t,f/3+.6666666666666666*o,i,f]}function E(g,r,t,o,i,f,u,l,m,h){if(h)M=h[0],s=h[1],y=h[2],C=h[3];else{var w=T(g,r,-i);g=w.x,r=w.y,w=T(l,m,-i),l=w.x,m=w.y;var c=(g-l)/2,a=(r-m)/2,p=c*c/(t*t)+a*a/(o*o);p>1&&(p=Math.sqrt(p),t=p*t,o=p*o);var x=t*t,A=o*o,P=(f==u?-1:1)*Math.sqrt(Math.abs((x*A-x*a*a-A*c*c)/(x*a*a+A*c*c)));P==1/0&&(P=1);var y=P*t*a/o+(g+l)/2,C=P*-o*c/t+(r+m)/2,M=Math.asin(((r-C)/o).toFixed(9)),s=Math.asin(((m-C)/o).toFixed(9));M=g<y?F-M:M,s=l<y?F-s:s,M<0&&(M=F*2+M),s<0&&(s=F*2+s),u&&M>s&&(M=M-F*2),!u&&s>M&&(s=s-F*2)}if(Math.abs(s-M)>e){var _=s,b=l,k=m;s=M+e*(u&&s>M?1:-1),l=y+t*Math.cos(s),m=C+o*Math.sin(s);var D=E(l,m,t,o,i,0,u,b,k,[s,_,y,C])}var V=Math.tan((s-M)/4),O=4/3*t*V,N=4/3*o*V,B=[2*g-(g+O*Math.sin(M)),2*r-(r-N*Math.cos(M)),l+O*Math.sin(s),m-N*Math.cos(s),l,m];if(h)return B;D&&(B=B.concat(D));for(var z=0;z<B.length;){var H=T(B[z],B[z+1],i);B[z++]=H.x,B[z++]=H.y}return B}function T(g,r,t){return{x:g*Math.cos(t)-r*Math.sin(t),y:g*Math.sin(t)+r*Math.cos(t)}}function v(g){return g*(F/180)}},50896:function(U){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var F=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;function S(E){if(E==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(E)}function n(){try{if(!Object.assign)return!1;var E=new String("abc");if(E[5]="de",Object.getOwnPropertyNames(E)[0]==="5")return!1;for(var T={},v=0;v<10;v++)T["_"+String.fromCharCode(v)]=v;var g=Object.getOwnPropertyNames(T).map(function(t){return T[t]});if(g.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}U.exports=n()?Object.assign:function(E,T){for(var v,g=S(E),r,t=1;t<arguments.length;t++){v=Object(arguments[t]);for(var o in v)e.call(v,o)&&(g[o]=v[o]);if(F){r=F(v);for(var i=0;i<r.length;i++)d.call(v,r[i])&&(g[r[i]]=v[r[i]])}}return g}},76835:function(U){var F=function(e){return e!==e};U.exports=function(d,S){return d===0&&S===0?1/d===1/S:!!(d===S||F(d)&&F(S))}},39896:function(U,F,e){var d=e(81288),S=e(57916),n=e(76835),E=e(66148),T=e(16408),v=S(E(),Object);d(v,{getPolyfill:E,implementation:n,shim:T}),U.exports=v},66148:function(U,F,e){var d=e(76835);U.exports=function(){return typeof Object.is=="function"?Object.is:d}},16408:function(U,F,e){var d=e(66148),S=e(81288);U.exports=function(){var E=d();return S(Object,{is:E},{is:function(){return Object.is!==E}}),E}},32764:function(U,F,e){var d;if(!Object.keys){var S=Object.prototype.hasOwnProperty,n=Object.prototype.toString,E=e(97344),T=Object.prototype.propertyIsEnumerable,v=!T.call({toString:null},"toString"),g=T.call(function(){},"prototype"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],t=function(u){var l=u.constructor;return l&&l.prototype===u},o={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},i=function(){if(typeof window>"u")return!1;for(var u in window)try{if(!o["$"+u]&&S.call(window,u)&&window[u]!==null&&typeof window[u]=="object")try{t(window[u])}catch{return!0}}catch{return!0}return!1}(),f=function(u){if(typeof window>"u"||!i)return t(u);try{return t(u)}catch{return!1}};d=function(l){var m=l!==null&&typeof l=="object",h=n.call(l)==="[object Function]",w=E(l),c=m&&n.call(l)==="[object String]",a=[];if(!m&&!h&&!w)throw new TypeError("Object.keys called on a non-object");var p=g&&h;if(c&&l.length>0&&!S.call(l,0))for(var x=0;x<l.length;++x)a.push(String(x));if(w&&l.length>0)for(var A=0;A<l.length;++A)a.push(String(A));else for(var P in l)!(p&&P==="prototype")&&S.call(l,P)&&a.push(String(P));if(v)for(var y=f(l),C=0;C<r.length;++C)!(y&&r[C]==="constructor")&&S.call(l,r[C])&&a.push(r[C]);return a}}U.exports=d},41820:function(U,F,e){var d=Array.prototype.slice,S=e(97344),n=Object.keys,E=n?function(g){return n(g)}:e(32764),T=Object.keys;E.shim=function(){if(Object.keys){var g=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);g||(Object.keys=function(t){return S(t)?T(d.call(t)):T(t)})}else Object.keys=E;return Object.keys||E},U.exports=E},97344:function(U){var F=Object.prototype.toString;U.exports=function(d){var S=F.call(d),n=S==="[object Arguments]";return n||(n=S!=="[object Array]"&&d!==null&&typeof d=="object"&&typeof d.length=="number"&&d.length>=0&&F.call(d.callee)==="[object Function]"),n}},32868:function(U){function F(S,n){if(typeof S!="string")return[S];var E=[S];typeof n=="string"||Array.isArray(n)?n={brackets:n}:n||(n={});var T=n.brackets?Array.isArray(n.brackets)?n.brackets:[n.brackets]:["{}","[]","()"],v=n.escape||"___",g=!!n.flat;T.forEach(function(o){var i=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),f=[];function u(l,m,h){var w=E.push(l.slice(o[0].length,-o[1].length))-1;return f.push(w),v+w+v}E.forEach(function(l,m){for(var h,w=0;l!=h;)if(h=l,l=l.replace(i,u),w++>1e4)throw Error("References have circular dependency. Please, check them.");E[m]=l}),f=f.reverse(),E=E.map(function(l){return f.forEach(function(m){l=l.replace(new RegExp("(\\"+v+m+"\\"+v+")","g"),o[0]+"$1"+o[1])}),l})});var r=new RegExp("\\"+v+"([0-9]+)\\"+v);function t(o,i,f){for(var u=[],l,m=0;l=r.exec(o);){if(m++>1e4)throw Error("Circular references in parenthesis");u.push(o.slice(0,l.index)),u.push(t(i[l[1]],i)),o=o.slice(l.index+l[0].length)}return u.push(o),u}return g?E:t(E[0],E)}function e(S,n){if(n&&n.flat){var E=n&&n.escape||"___",T=S[0],v;if(!T)return"";for(var g=new RegExp("\\"+E+"([0-9]+)\\"+E),r=0;T!=v;){if(r++>1e4)throw Error("Circular references in "+S);v=T,T=T.replace(g,t)}return T}return S.reduce(function o(i,f){return Array.isArray(f)&&(f=f.reduce(o,"")),i+f},"");function t(o,i){if(S[i]==null)throw Error("Reference "+i+"is undefined");return S[i]}}function d(S,n){return Array.isArray(S)?e(S,n):F(S,n)}d.parse=F,d.stringify=e,U.exports=d},51160:function(U,F,e){var d=e(55616);U.exports=S;function S(n){var E;return arguments.length>1&&(n=arguments),typeof n=="string"?n=n.split(/\s/).map(parseFloat):typeof n=="number"&&(n=[n]),n.length&&typeof n[0]=="number"?n.length===1?E={width:n[0],height:n[0],x:0,y:0}:n.length===2?E={width:n[0],height:n[1],x:0,y:0}:E={x:n[0],y:n[1],width:n[2]-n[0]||0,height:n[3]-n[1]||0}:n&&(n=d(n,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),E={x:n.left||0,y:n.top||0},n.width==null?n.right?E.width=n.right-E.x:E.width=0:E.width=n.width,n.height==null?n.bottom?E.height=n.bottom-E.y:E.height=0:E.height=n.height),E}},21984:function(U){U.exports=d;var F={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function d(E){var T=[];return E.replace(e,function(v,g,r){var t=g.toLowerCase();for(r=n(r),t=="m"&&r.length>2&&(T.push([g].concat(r.splice(0,2))),t="l",g=g=="m"?"l":"L");;){if(r.length==F[t])return r.unshift(g),T.push(r);if(r.length<F[t])throw new Error("malformed path data");T.push([g].concat(r.splice(0,F[t])))}}),T}var S=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function n(E){var T=E.match(S);return T?T.map(Number):[]}},65819:function(U){U.exports=function(e,d){d||(d=[0,""]),e=String(e);var S=parseFloat(e,10);return d[0]=S,d[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",d}},41984:function(U,F,e){var d=e(4168);(function(){var S,n,E,T,v,g;typeof performance<"u"&&performance!==null&&performance.now?U.exports=function(){return performance.now()}:typeof d<"u"&&d!==null&&d.hrtime?(U.exports=function(){return(S()-v)/1e6},n=d.hrtime,S=function(){var r;return r=n(),r[0]*1e9+r[1]},T=S(),g=d.uptime()*1e9,v=T-g):Date.now?(U.exports=function(){return Date.now()-E},E=Date.now()):(U.exports=function(){return new Date().getTime()-E},E=new Date().getTime())}).call(this)},55616:function(U){U.exports=function(S,n,E){var T={},v,g;if(typeof n=="string"&&(n=e(n)),Array.isArray(n)){var r={};for(g=0;g<n.length;g++)r[n[g]]=!0;n=r}for(v in n)n[v]=e(n[v]);var t={};for(v in n){var o=n[v];if(Array.isArray(o))for(g=0;g<o.length;g++){var i=o[g];if(E&&(t[i]=!0),i in S){if(T[v]=S[i],E)for(var f=g;f<o.length;f++)t[o[f]]=!0;break}}else v in S&&(n[v]&&(T[v]=S[v]),E&&(t[v]=!0))}if(E)for(v in S)t[v]||(T[v]=S[v]);return T};var F={};function e(d){return F[d]?F[d]:(typeof d=="string"&&(d=F[d]=d.split(/\s*,\s*|\s+/)),d)}},61456:function(U){U.exports=function(e,d,S,n){var E=e[0],T=e[1],v=!1;S===void 0&&(S=0),n===void 0&&(n=d.length);for(var g=n-S,r=0,t=g-1;r<g;t=r++){var o=d[r+S][0],i=d[r+S][1],f=d[t+S][0],u=d[t+S][1],l=i>T!=u>T&&E<(f-o)*(T-i)/(u-i)+o;l&&(v=!v)}return v}},14756:function(U,F,e){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var d=e(7688),S=e(28648),n=e(72200),E=e(11403),T=e(82368),v=e(17792),g=!1,r=S(),t;t={buildLog:function(i){return i===!0?g=d():i===!1&&(g=!1),g===!1?!1:g.list},epsilon:function(i){return r.epsilon(i)},segments:function(i){var f=n(!0,r,g);return i.regions.forEach(f.addRegion),{segments:f.calculate(i.inverted),inverted:i.inverted}},combine:function(i,f){var u=n(!1,r,g);return{combined:u.calculate(i.segments,i.inverted,f.segments,f.inverted),inverted1:i.inverted,inverted2:f.inverted}},selectUnion:function(i){return{segments:T.union(i.combined,g),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:T.intersect(i.combined,g),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:T.difference(i.combined,g),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:T.differenceRev(i.combined,g),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:T.xor(i.combined,g),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:E(i.segments,r,g),inverted:i.inverted}},polygonFromGeoJSON:function(i){return v.toPolygon(t,i)},polygonToGeoJSON:function(i){return v.fromPolygon(t,r,i)},union:function(i,f){return o(i,f,t.selectUnion)},intersect:function(i,f){return o(i,f,t.selectIntersect)},difference:function(i,f){return o(i,f,t.selectDifference)},differenceRev:function(i,f){return o(i,f,t.selectDifferenceRev)},xor:function(i,f){return o(i,f,t.selectXor)}};function o(i,f,u){var l=t.segments(i),m=t.segments(f),h=t.combine(l,m),w=u(h);return t.polygon(w)}typeof window=="object"&&(window.PolyBool=t),U.exports=t},7688:function(U){function F(){var e,d=0,S=!1;function n(E,T){return e.list.push({type:E,data:T?JSON.parse(JSON.stringify(T)):void 0}),e}return e={list:[],segmentId:function(){return d++},checkIntersection:function(E,T){return n("check",{seg1:E,seg2:T})},segmentChop:function(E,T){return n("div_seg",{seg:E,pt:T}),n("chop",{seg:E,pt:T})},statusRemove:function(E){return n("pop_seg",{seg:E})},segmentUpdate:function(E){return n("seg_update",{seg:E})},segmentNew:function(E,T){return n("new_seg",{seg:E,primary:T})},segmentRemove:function(E){return n("rem_seg",{seg:E})},tempStatus:function(E,T,v){return n("temp_status",{seg:E,above:T,below:v})},rewind:function(E){return n("rewind",{seg:E})},status:function(E,T,v){return n("status",{seg:E,above:T,below:v})},vert:function(E){return E===S?e:(S=E,n("vert",{x:E}))},log:function(E){return typeof E!="string"&&(E=JSON.stringify(E,!1,"  ")),n("log",{txt:E})},reset:function(){return n("reset")},selected:function(E){return n("selected",{segs:E})},chainStart:function(E){return n("chain_start",{seg:E})},chainRemoveHead:function(E,T){return n("chain_rem_head",{index:E,pt:T})},chainRemoveTail:function(E,T){return n("chain_rem_tail",{index:E,pt:T})},chainNew:function(E,T){return n("chain_new",{pt1:E,pt2:T})},chainMatch:function(E){return n("chain_match",{index:E})},chainClose:function(E){return n("chain_close",{index:E})},chainAddHead:function(E,T){return n("chain_add_head",{index:E,pt:T})},chainAddTail:function(E,T){return n("chain_add_tail",{index:E,pt:T})},chainConnect:function(E,T){return n("chain_con",{index1:E,index2:T})},chainReverse:function(E){return n("chain_rev",{index:E})},chainJoin:function(E,T){return n("chain_join",{index1:E,index2:T})},done:function(){return n("done")}},e}U.exports=F},28648:function(U){function F(e){typeof e!="number"&&(e=1e-10);var d={epsilon:function(S){return typeof S=="number"&&(e=S),e},pointAboveOrOnLine:function(S,n,E){var T=n[0],v=n[1],g=E[0],r=E[1],t=S[0],o=S[1];return(g-T)*(o-v)-(r-v)*(t-T)>=-e},pointBetween:function(S,n,E){var T=S[1]-n[1],v=E[0]-n[0],g=S[0]-n[0],r=E[1]-n[1],t=g*v+T*r;if(t<e)return!1;var o=v*v+r*r;return!(t-o>-e)},pointsSameX:function(S,n){return Math.abs(S[0]-n[0])<e},pointsSameY:function(S,n){return Math.abs(S[1]-n[1])<e},pointsSame:function(S,n){return d.pointsSameX(S,n)&&d.pointsSameY(S,n)},pointsCompare:function(S,n){return d.pointsSameX(S,n)?d.pointsSameY(S,n)?0:S[1]<n[1]?-1:1:S[0]<n[0]?-1:1},pointsCollinear:function(S,n,E){var T=S[0]-n[0],v=S[1]-n[1],g=n[0]-E[0],r=n[1]-E[1];return Math.abs(T*r-g*v)<e},linesIntersect:function(S,n,E,T){var v=n[0]-S[0],g=n[1]-S[1],r=T[0]-E[0],t=T[1]-E[1],o=v*t-g*r;if(Math.abs(o)<e)return!1;var i=S[0]-E[0],f=S[1]-E[1],u=(r*f-t*i)/o,l=(v*f-g*i)/o,m={alongA:0,alongB:0,pt:[S[0]+u*v,S[1]+u*g]};return u<=-e?m.alongA=-2:u<e?m.alongA=-1:u-1<=-e?m.alongA=0:u-1<e?m.alongA=1:m.alongA=2,l<=-e?m.alongB=-2:l<e?m.alongB=-1:l-1<=-e?m.alongB=0:l-1<e?m.alongB=1:m.alongB=2,m},pointInsideRegion:function(S,n){for(var E=S[0],T=S[1],v=n[n.length-1][0],g=n[n.length-1][1],r=!1,t=0;t<n.length;t++){var o=n[t][0],i=n[t][1];i-T>e!=g-T>e&&(v-o)*(T-i)/(g-i)+o-E>e&&(r=!r),v=o,g=i}return r}};return d}U.exports=F},17792:function(U){var F={toPolygon:function(e,d){function S(T){if(T.length<=0)return e.segments({inverted:!1,regions:[]});function v(t){var o=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[o]})}for(var g=v(T[0]),r=1;r<T.length;r++)g=e.selectDifference(e.combine(g,v(T[r])));return g}if(d.type==="Polygon")return e.polygon(S(d.coordinates));if(d.type==="MultiPolygon"){for(var n=e.segments({inverted:!1,regions:[]}),E=0;E<d.coordinates.length;E++)n=e.selectUnion(e.combine(n,S(d.coordinates[E])));return e.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,d,S){S=e.polygon(e.segments(S));function n(u,l){return d.pointInsideRegion([(u[0][0]+u[1][0])*.5,(u[0][1]+u[1][1])*.5],l)}function E(u){return{region:u,children:[]}}var T=E(null);function v(u,l){for(var m=0;m<u.children.length;m++){var h=u.children[m];if(n(l,h.region)){v(h,l);return}}for(var w=E(l),m=0;m<u.children.length;m++){var h=u.children[m];n(h.region,l)&&(w.children.push(h),u.children.splice(m,1),m--)}u.children.push(w)}for(var g=0;g<S.regions.length;g++){var r=S.regions[g];r.length<3||v(T,r)}function t(u,l){for(var m=0,h=u[u.length-1][0],w=u[u.length-1][1],c=[],a=0;a<u.length;a++){var p=u[a][0],x=u[a][1];c.push([p,x]),m+=x*h-p*w,h=p,w=x}var A=m<0;return A!==l&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var o=[];function i(u){var l=[t(u.region,!1)];o.push(l);for(var m=0;m<u.children.length;m++)l.push(f(u.children[m]))}function f(u){for(var l=0;l<u.children.length;l++)i(u.children[l]);return t(u.region,!0)}for(var g=0;g<T.children.length;g++)i(T.children[g]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};U.exports=F},72200:function(U,F,e){var d=e(48088);function S(n,E,T){function v(w,c){return{id:T?T.segmentId():-1,start:w,end:c,myFill:{above:null,below:null},otherFill:null}}function g(w,c,a){return{id:T?T.segmentId():-1,start:w,end:c,myFill:{above:a.myFill.above,below:a.myFill.below},otherFill:null}}var r=d.create();function t(w,c,a,p,x,A){var P=E.pointsCompare(c,x);return P!==0?P:E.pointsSame(a,A)?0:w!==p?w?1:-1:E.pointAboveOrOnLine(a,p?x:A,p?A:x)?1:-1}function o(w,c){r.insertBefore(w,function(a){var p=t(w.isStart,w.pt,c,a.isStart,a.pt,a.other.pt);return p<0})}function i(w,c){var a=d.node({isStart:!0,pt:w.start,seg:w,primary:c,other:null,status:null});return o(a,w.end),a}function f(w,c,a){var p=d.node({isStart:!1,pt:c.end,seg:c,primary:a,other:w,status:null});w.other=p,o(p,w.pt)}function u(w,c){var a=i(w,c);return f(a,w,c),a}function l(w,c){T&&T.segmentChop(w.seg,c),w.other.remove(),w.seg.end=c,w.other.pt=c,o(w.other,w.pt)}function m(w,c){var a=g(c,w.seg.end,w.seg);return l(w,c),u(a,w.primary)}function h(w,c){var a=d.create();function p(O,N){var B=O.seg.start,z=O.seg.end,H=N.seg.start,X=N.seg.end;return E.pointsCollinear(B,H,X)?E.pointsCollinear(z,H,X)||E.pointAboveOrOnLine(z,H,X)?1:-1:E.pointAboveOrOnLine(B,H,X)?1:-1}function x(O){return a.findTransition(function(N){var B=p(O,N.ev);return B>0})}function A(O,N){var B=O.seg,z=N.seg,H=B.start,X=B.end,$=z.start,ne=z.end;T&&T.checkIntersection(B,z);var q=E.linesIntersect(H,X,$,ne);if(q===!1){if(!E.pointsCollinear(H,X,$)||E.pointsSame(H,ne)||E.pointsSame(X,$))return!1;var ue=E.pointsSame(H,$),te=E.pointsSame(X,ne);if(ue&&te)return N;var J=!ue&&E.pointBetween(H,$,ne),ie=!te&&E.pointBetween(X,$,ne);if(ue)return ie?m(N,X):m(O,ne),N;J&&(te||(ie?m(N,X):m(O,ne)),m(N,H))}else q.alongA===0&&(q.alongB===-1?m(O,$):q.alongB===0?m(O,q.pt):q.alongB===1&&m(O,ne)),q.alongB===0&&(q.alongA===-1?m(N,H):q.alongA===0?m(N,q.pt):q.alongA===1&&m(N,X));return!1}for(var P=[];!r.isEmpty();){var y=r.getHead();if(T&&T.vert(y.pt[0]),y.isStart){let O=function(){if(M){var N=A(y,M);if(N)return N}return s?A(y,s):!1};T&&T.segmentNew(y.seg,y.primary);var C=x(y),M=C.before?C.before.ev:null,s=C.after?C.after.ev:null;T&&T.tempStatus(y.seg,M?M.seg:!1,s?s.seg:!1);var _=O();if(_){if(n){var b;y.seg.myFill.below===null?b=!0:b=y.seg.myFill.above!==y.seg.myFill.below,b&&(_.seg.myFill.above=!_.seg.myFill.above)}else _.seg.otherFill=y.seg.myFill;T&&T.segmentUpdate(_.seg),y.other.remove(),y.remove()}if(r.getHead()!==y){T&&T.rewind(y.seg);continue}if(n){var b;y.seg.myFill.below===null?b=!0:b=y.seg.myFill.above!==y.seg.myFill.below,s?y.seg.myFill.below=s.seg.myFill.above:y.seg.myFill.below=w,b?y.seg.myFill.above=!y.seg.myFill.below:y.seg.myFill.above=y.seg.myFill.below}else if(y.seg.otherFill===null){var k;s?y.primary===s.primary?k=s.seg.otherFill.above:k=s.seg.myFill.above:k=y.primary?c:w,y.seg.otherFill={above:k,below:k}}T&&T.status(y.seg,M?M.seg:!1,s?s.seg:!1),y.other.status=C.insert(d.node({ev:y}))}else{var D=y.status;if(D===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(a.exists(D.prev)&&a.exists(D.next)&&A(D.prev.ev,D.next.ev),T&&T.statusRemove(D.ev.seg),D.remove(),!y.primary){var V=y.seg.myFill;y.seg.myFill=y.seg.otherFill,y.seg.otherFill=V}P.push(y.seg)}r.getHead().remove()}return T&&T.done(),P}return n?{addRegion:function(w){for(var c,a=w[w.length-1],p=0;p<w.length;p++){c=a,a=w[p];var x=E.pointsCompare(c,a);x!==0&&u(v(x<0?c:a,x<0?a:c),!0)}},calculate:function(w){return h(w,!1)}}:{calculate:function(w,c,a,p){return w.forEach(function(x){u(g(x.start,x.end,x),!0)}),a.forEach(function(x){u(g(x.start,x.end,x),!1)}),h(c,p)}}}U.exports=S},48088:function(U){var F={create:function(){var e={root:{root:!0,next:null},exists:function(d){return!(d===null||d===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(d,S){for(var n=e.root,E=e.root.next;E!==null;){if(S(E)){d.prev=E.prev,d.next=E,E.prev.next=d,E.prev=d;return}n=E,E=E.next}n.next=d,d.prev=n,d.next=null},findTransition:function(d){for(var S=e.root,n=e.root.next;n!==null&&!d(n);)S=n,n=n.next;return{before:S===e.root?null:S,after:n,insert:function(E){return E.prev=S,E.next=n,S.next=E,n!==null&&(n.prev=E),E}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};U.exports=F},11403:function(U){function F(e,d,S){var n=[],E=[];return e.forEach(function(T){var v=T.start,g=T.end;if(d.pointsSame(v,g)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}S&&S.chainStart(T);var r={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},o=r;function i(_,b,k){return o.index=_,o.matches_head=b,o.matches_pt1=k,o===r?(o=t,!1):(o=null,!0)}for(var f=0;f<n.length;f++){var u=n[f],l=u[0];u[1];var m=u[u.length-1];if(u[u.length-2],d.pointsSame(l,v)){if(i(f,!0,!0))break}else if(d.pointsSame(l,g)){if(i(f,!0,!1))break}else if(d.pointsSame(m,v)){if(i(f,!1,!0))break}else if(d.pointsSame(m,g)&&i(f,!1,!1))break}if(o===r){n.push([v,g]),S&&S.chainNew(v,g);return}if(o===t){S&&S.chainMatch(r.index);var h=r.index,w=r.matches_pt1?g:v,c=r.matches_head,u=n[h],a=c?u[0]:u[u.length-1],p=c?u[1]:u[u.length-2],x=c?u[u.length-1]:u[0],A=c?u[u.length-2]:u[1];if(d.pointsCollinear(p,a,w)&&(c?(S&&S.chainRemoveHead(r.index,w),u.shift()):(S&&S.chainRemoveTail(r.index,w),u.pop()),a=p),d.pointsSame(x,w)){n.splice(h,1),d.pointsCollinear(A,x,a)&&(c?(S&&S.chainRemoveTail(r.index,a),u.pop()):(S&&S.chainRemoveHead(r.index,a),u.shift())),S&&S.chainClose(r.index),E.push(u);return}c?(S&&S.chainAddHead(r.index,w),u.unshift(w)):(S&&S.chainAddTail(r.index,w),u.push(w));return}function P(_){S&&S.chainReverse(_),n[_].reverse()}function y(_,b){var k=n[_],D=n[b],V=k[k.length-1],O=k[k.length-2],N=D[0],B=D[1];d.pointsCollinear(O,V,N)&&(S&&S.chainRemoveTail(_,V),k.pop(),V=O),d.pointsCollinear(V,N,B)&&(S&&S.chainRemoveHead(b,N),D.shift()),S&&S.chainJoin(_,b),n[_]=k.concat(D),n.splice(b,1)}var C=r.index,M=t.index;S&&S.chainConnect(C,M);var s=n[C].length<n[M].length;r.matches_head?t.matches_head?s?(P(C),y(C,M)):(P(M),y(M,C)):y(M,C):t.matches_head?y(C,M):s?(P(C),y(M,C)):(P(M),y(C,M))}),E}U.exports=F},82368:function(U){function F(d,S,n){var E=[];return d.forEach(function(T){var v=(T.myFill.above?8:0)+(T.myFill.below?4:0)+(T.otherFill&&T.otherFill.above?2:0)+(T.otherFill&&T.otherFill.below?1:0);S[v]!==0&&E.push({id:n?n.segmentId():-1,start:T.start,end:T.end,myFill:{above:S[v]===1,below:S[v]===2},otherFill:null})}),n&&n.selected(E),E}var e={union:function(d,S){return F(d,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],S)},intersect:function(d,S){return F(d,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],S)},difference:function(d,S){return F(d,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],S)},differenceRev:function(d,S){return F(d,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],S)},xor:function(d,S){return F(d,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],S)}};U.exports=e},9696:function(U,F,e){var d=e(29936).Transform,S=e(55619);function n(){d.call(this,{readableObjectMode:!0})}n.prototype=Object.create(d.prototype),n.prototype.constructor=n,S(n.prototype),F.gS=function(T,v,g){for(var r=v,t=0;t<g.length;)if(T[r++]!==g[t++])return!1;return!0},F.wR=function(T,v){var g=[],r=0;if(v&&v==="hex")for(;r<T.length;)g.push(parseInt(T.slice(r,r+2),16)),r+=2;else for(;r<T.length;r++)g.push(T.charCodeAt(r)&255);return g},F.Bz=function(T,v){return T[v]|T[v+1]<<8},F.eW=function(T,v){return T[v+1]|T[v]<<8},F.st=function(T,v){return T[v]|T[v+1]<<8|T[v+2]<<16|T[v+3]*16777216},F.eI=function(T,v){return T[v+3]|T[v+2]<<8|T[v+1]<<16|T[v]*16777216};function E(T,v,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=T,v&&(this.code=v),g&&(this.statusCode=g)}E.prototype=Object.create(Error.prototype),E.prototype.constructor=E},11688:function(U){function F(S,n){var E=new Error(S);return E.code=n,E}function e(S){try{return decodeURIComponent(escape(S))}catch{return S}}function d(S,n,E){this.input=S.subarray(n,E),this.start=n;var T=String.fromCharCode.apply(null,this.input.subarray(0,4));if(T!=="II*\0"&&T!=="MM\0*")throw F("invalid TIFF signature","EBADDATA");this.big_endian=T[0]==="M"}d.prototype.each=function(S){this.aborted=!1;var n=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:n}];this.ifds_to_read.length>0&&!this.aborted;){var E=this.ifds_to_read.shift();E.offset&&this.scan_ifd(E.id,E.offset,S)}},d.prototype.read_uint16=function(S){var n=this.input;if(S+2>n.length)throw F("unexpected EOF","EBADDATA");return this.big_endian?n[S]*256+n[S+1]:n[S]+n[S+1]*256},d.prototype.read_uint32=function(S){var n=this.input;if(S+4>n.length)throw F("unexpected EOF","EBADDATA");return this.big_endian?n[S]*16777216+n[S+1]*65536+n[S+2]*256+n[S+3]:n[S]+n[S+1]*256+n[S+2]*65536+n[S+3]*16777216},d.prototype.is_subifd_link=function(S,n){return S===0&&n===34665||S===0&&n===34853||S===34665&&n===40965},d.prototype.exif_format_length=function(S){switch(S){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},d.prototype.exif_format_read=function(S,n){var E;switch(S){case 1:case 2:return E=this.input[n],E;case 6:return E=this.input[n],E|(E&128)*33554430;case 3:return E=this.read_uint16(n),E;case 8:return E=this.read_uint16(n),E|(E&32768)*131070;case 4:return E=this.read_uint32(n),E;case 9:return E=this.read_uint32(n),E|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},d.prototype.scan_ifd=function(S,n,E){var T=this.read_uint16(n);n+=2;for(var v=0;v<T;v++){var g=this.read_uint16(n),r=this.read_uint16(n+2),t=this.read_uint32(n+4),o=this.exif_format_length(r),i=t*o,f=i<=4?n+8:this.read_uint32(n+8),u=!1;if(f+i>this.input.length)throw F("unexpected EOF","EBADDATA");for(var l=[],m=f,h=0;h<t;h++,m+=o){var w=this.exif_format_read(r,m);if(w===null){l=null;break}l.push(w)}Array.isArray(l)&&r===2&&(l=e(String.fromCharCode.apply(null,l)),l&&l[l.length-1]==="\0"&&(l=l.slice(0,-1))),this.is_subifd_link(S,g)&&Array.isArray(l)&&Number.isInteger(l[0])&&l[0]>0&&(this.ifds_to_read.push({id:g,offset:l[0]}),u=!0);var c={is_big_endian:this.big_endian,ifd:S,tag:g,format:r,count:t,entry_offset:n+this.start,data_length:i,data_offset:f+this.start,value:l,is_subifd_link:u};if(E(c)===!1){this.aborted=!0;return}n+=12}S===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(n)})},U.exports.ExifParser=d,U.exports.get_orientation=function(S){var n=0;try{return new d(S,0,S.length).each(function(E){if(E.ifd===0&&E.tag===274&&Array.isArray(E.value))return n=E.value[0],!1}),n}catch{return-1}}},44600:function(U,F,e){var d=e(9696).eW,S=e(9696).eI;function n(i,f){if(i.length<4+f)return null;var u=S(i,f);return i.length<u+f||u<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(f+4,f+8)),data:i.slice(f+8,f+u),end:f+u}}U.exports.unbox=n;function E(i,f){for(var u=0;;){var l=n(i,u);if(!l)break;switch(l.boxtype){case"ispe":f.sizes.push({width:S(l.data,4),height:S(l.data,8)});break;case"irot":f.transforms.push({type:"irot",value:l.data[0]&3});break;case"imir":f.transforms.push({type:"imir",value:l.data[0]&1});break}u=l.end}}function T(i,f,u){for(var l=0,m=0;m<u;m++)l=l*256+(i[f+m]||0);return l}function v(i,f){for(var u=i[4]>>4&15,l=i[4]&15,m=i[5]>>4&15,h=d(i,6),w=8,c=0;c<h;c++){var a=d(i,w);w+=2;var p=d(i,w);w+=2;var x=T(i,w,m);w+=m;var A=d(i,w);if(w+=2,p===0&&A===1){var P=T(i,w,u),y=T(i,w+u,l);f.item_loc[a]={length:y,offset:P+x}}w+=A*(u+l)}}function g(i,f){for(var u=d(i,4),l=6,m=0;m<u;m++){var h=n(i,l);if(!h)break;if(h.boxtype==="infe"){for(var w=d(h.data,4),c="",a=8;a<h.data.length&&h.data[a];a++)c+=String.fromCharCode(h.data[a]);f.item_inf[c]=w}l=h.end}}function r(i,f){for(var u=0;;){var l=n(i,u);if(!l)break;l.boxtype==="ipco"&&E(l.data,f),u=l.end}}function t(i,f){for(var u=4;;){var l=n(i,u);if(!l)break;l.boxtype==="iprp"&&r(l.data,f),l.boxtype==="iloc"&&v(l.data,f),l.boxtype==="iinf"&&g(l.data,f),u=l.end}}function o(i){var f=i.reduce(function(m,h){return m.width>h.width||m.width===h.width&&m.height>h.height?m:h}),u=i.reduce(function(m,h){return m.height>h.height||m.height===h.height&&m.width>h.width?m:h}),l;return f.width>u.height||f.width===u.height&&f.height>u.width?l=f:l=u,l}U.exports.readSizeFromMeta=function(i){var f={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(t(i,f),!!f.sizes.length){var u=o(f.sizes),l=1;f.transforms.forEach(function(h){var w={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},c={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(h.type==="imir"&&(h.value===0?l=c[l]:(l=c[l],l=w[l],l=w[l])),h.type==="irot")for(var a=0;a<h.value;a++)l=w[l]});var m=null;return f.item_inf.Exif&&(m=f.item_loc[f.item_inf.Exif]),{width:u.width,height:u.height,orientation:f.transforms.length?l:null,variants:f.sizes,exif_location:m}}},U.exports.getMimeType=function(i){var f=String.fromCharCode.apply(null,i.slice(0,4)),u={};u[f]=!0;for(var l=8;l<i.length;l+=4)u[String.fromCharCode.apply(null,i.slice(l,l+4))]=!0;if(!(!u.mif1&&!u.msf1&&!u.miaf))return f==="avif"||f==="avis"||f==="avio"?{type:"avif",mime:"image/avif"}:f==="heic"||f==="heix"?{type:"heic",mime:"image/heic"}:f==="hevc"||f==="hevx"?{type:"heic",mime:"image/heic-sequence"}:u.avif||u.avis?{type:"avif",mime:"image/avif"}:u.heic||u.heix||u.hevc||u.hevx||u.heis?u.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(U,F,e){var d=e(9696).wR,S=e(9696).gS,n=e(9696).eI,E=e(44600),T=e(11688),v=d("ftyp");U.exports=function(g){if(S(g,4,v)){var r=E.unbox(g,0);if(r){var t=E.getMimeType(r.data);if(t){for(var o,i=r.end;;){var f=E.unbox(g,i);if(!f)break;if(i=f.end,f.boxtype==="mdat")return;if(f.boxtype==="meta"){o=f.data;break}}if(o){var u=E.readSizeFromMeta(o);if(u){var l={width:u.width,height:u.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(u.variants.length>1&&(l.variants=u.variants),u.orientation&&(l.orientation=u.orientation),u.exif_location&&u.exif_location.offset+u.exif_location.length<=g.length){var m=n(g,u.exif_location.offset),h=g.slice(u.exif_location.offset+m+4,u.exif_location.offset+u.exif_location.length),w=T.get_orientation(h);w>0&&(l.orientation=w)}return l}}}}}}},38728:function(U,F,e){var d=e(9696).wR,S=e(9696).gS,n=e(9696).Bz,E=d("BM");U.exports=function(T){if(!(T.length<26)&&S(T,0,E))return{width:n(T,18),height:n(T,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(U,F,e){var d=e(9696).wR,S=e(9696).gS,n=e(9696).Bz,E=d("GIF87a"),T=d("GIF89a");U.exports=function(v){if(!(v.length<10)&&!(!S(v,0,E)&&!S(v,0,T)))return{width:n(v,6),height:n(v,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(U,F,e){var d=e(9696).Bz,S=0,n=1,E=16;U.exports=function(T){var v=d(T,0),g=d(T,2),r=d(T,4);if(!(v!==S||g!==n||!r)){for(var t=[],o={width:0,height:0},i=0;i<r;i++){var f=T[6+E*i]||256,u=T[6+E*i+1]||256,l={width:f,height:u};t.push(l),(f>o.width||u>o.height)&&(o=l)}return{width:o.width,height:o.height,variants:t,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(U,F,e){var d=e(9696).eW,S=e(9696).wR,n=e(9696).gS,E=e(11688),T=S("Exif\0\0");U.exports=function(v){if(!(v.length<2)&&!(v[0]!==255||v[1]!==216||v[2]!==255))for(var g=2;;){for(;;){if(v.length-g<2)return;if(v[g++]===255)break}for(var r=v[g++],t;r===255;)r=v[g++];if(208<=r&&r<=217||r===1)t=0;else if(192<=r&&r<=254){if(v.length-g<2)return;t=d(v,g)-2,g+=2}else return;if(r===217||r===218)return;var o;if(r===225&&t>=10&&n(v,g,T)&&(o=E.get_orientation(v.slice(g+6,g+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(v.length-g<t)return;var i={width:d(v,g+3),height:d(v,g+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(i.orientation=o),i}g+=t}}},37276:function(U,F,e){var d=e(9696).wR,S=e(9696).gS,n=e(9696).eI,E=d(`PNG\r

`),T=d("IHDR");U.exports=function(v){if(!(v.length<24)&&S(v,0,E)&&S(v,12,T))return{width:n(v,16),height:n(v,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(U,F,e){var d=e(9696).wR,S=e(9696).gS,n=e(9696).eI,E=d("8BPS\0");U.exports=function(T){if(!(T.length<22)&&S(T,0,E))return{width:n(T,18),height:n(T,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(U){function F(o){return o===32||o===9||o===13||o===10}function e(o){return typeof o=="number"&&isFinite(o)&&o>0}function d(o){var i=0,f=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(i=3);i<f&&F(o[i]);)i++;return i===f?!1:o[i]===60}var S=/<[-_.:a-zA-Z0-9][^>]*>/,n=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,E=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,T=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,v=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,g=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function r(o){var i=o.match(E),f=o.match(T),u=o.match(v);return{width:i&&(i[1]||i[2]),height:f&&(f[1]||f[2]),viewbox:u&&(u[1]||u[2])}}function t(o){return g.test(o)?o.match(g)[0]:"px"}U.exports=function(o){if(d(o)){for(var i="",f=0;f<o.length;f++)i+=String.fromCharCode(o[f]);var u=(i.match(S)||[""])[0];if(n.test(u)){var l=r(u),m=parseFloat(l.width),h=parseFloat(l.height);if(l.width&&l.height)return!e(m)||!e(h)?void 0:{width:m,height:h,type:"svg",mime:"image/svg+xml",wUnits:t(l.width),hUnits:t(l.height)};var w=(l.viewbox||"").split(" "),c={width:w[2],height:w[3]},a=parseFloat(c.width),p=parseFloat(c.height);if(!(!e(a)||!e(p))&&t(c.width)===t(c.height)){var x=a/p;return l.width?e(m)?{width:m,height:m/x,type:"svg",mime:"image/svg+xml",wUnits:t(l.width),hUnits:t(l.width)}:void 0:l.height?e(h)?{width:h*x,height:h,type:"svg",mime:"image/svg+xml",wUnits:t(l.height),hUnits:t(l.height)}:void 0:{width:a,height:p,type:"svg",mime:"image/svg+xml",wUnits:t(c.width),hUnits:t(c.height)}}}}}},98792:function(U,F,e){var d=e(9696).wR,S=e(9696).gS,n=e(9696).Bz,E=e(9696).eW,T=e(9696).st,v=e(9696).eI,g=d("II*\0"),r=d("MM\0*");function t(f,u,l){return l?E(f,u):n(f,u)}function o(f,u,l){return l?v(f,u):T(f,u)}function i(f,u,l){var m=t(f,u+2,l),h=o(f,u+4,l);return h!==1||m!==3&&m!==4?null:m===3?t(f,u+8,l):o(f,u+8,l)}U.exports=function(f){if(!(f.length<8)&&!(!S(f,0,g)&&!S(f,0,r))){var u=f[0]===77,l=o(f,4,u)-8;if(!(l<0)){var m=l+8;if(!(f.length-m<2)){var h=t(f,m+0,u)*12;if(!(h<=0)&&(m+=2,!(f.length-m<h))){var w,c,a,p;for(w=0;w<h;w+=12)p=t(f,m+w,u),p===256?c=i(f,m+w,u):p===257&&(a=i(f,m+w,u));if(c&&a)return{width:c,height:a,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},20704:function(U,F,e){var d=e(9696).wR,S=e(9696).gS,n=e(9696).Bz,E=e(9696).st,T=e(11688),v=d("RIFF"),g=d("WEBP");function r(i,f){if(!(i[f+3]!==157||i[f+4]!==1||i[f+5]!==42))return{width:n(i,f+6)&16383,height:n(i,f+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(i,f){if(i[f]===47){var u=E(i,f+1);return{width:(u&16383)+1,height:(u>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function o(i,f){return{width:(i[f+6]<<16|i[f+5]<<8|i[f+4])+1,height:(i[f+9]<<f|i[f+8]<<8|i[f+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}U.exports=function(i){if(!(i.length<16)&&!(!S(i,0,v)&&!S(i,8,g))){var f=12,u=null,l=0,m=E(i,4)+8;if(!(m>i.length)){for(;f+8<m;){if(i[f]===0){f++;continue}var h=String.fromCharCode.apply(null,i.slice(f,f+4)),w=E(i,f+4);h==="VP8 "&&w>=10?u=u||r(i,f+8):h==="VP8L"&&w>=9?u=u||t(i,f+8):h==="VP8X"&&w>=10?u=u||o(i,f+8):h==="EXIF"&&(l=T.get_orientation(i.slice(f+8,f+8+w)),f=1/0),f+=8+w}if(u)return l>0&&(u.orientation=l),u}}}},87480:function(U,F,e){U.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(U,F,e){var d=e(87480);function S(n){for(var E=Object.keys(d),T=0;T<E.length;T++){var v=d[E[T]](n);if(v)return v}return null}U.exports=function(E){return S(E)},U.exports.parsers=d},4168:function(U){var F=U.exports={},e,d;function S(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=S}catch{e=S}try{typeof clearTimeout=="function"?d=clearTimeout:d=n}catch{d=n}})();function E(l){if(e===setTimeout)return setTimeout(l,0);if((e===S||!e)&&setTimeout)return e=setTimeout,setTimeout(l,0);try{return e(l,0)}catch{try{return e.call(null,l,0)}catch{return e.call(this,l,0)}}}function T(l){if(d===clearTimeout)return clearTimeout(l);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(l);try{return d(l)}catch{try{return d.call(null,l)}catch{return d.call(this,l)}}}var v=[],g=!1,r,t=-1;function o(){!g||!r||(g=!1,r.length?v=r.concat(v):t=-1,v.length&&i())}function i(){if(!g){var l=E(o);g=!0;for(var m=v.length;m;){for(r=v,v=[];++t<m;)r&&r[t].run();t=-1,m=v.length}r=null,g=!1,T(l)}}F.nextTick=function(l){var m=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)m[h-1]=arguments[h];v.push(new f(l,m)),v.length===1&&!g&&E(i)};function f(l,m){this.fun=l,this.array=m}f.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={};function u(){}F.on=u,F.addListener=u,F.once=u,F.off=u,F.removeListener=u,F.removeAllListeners=u,F.emit=u,F.prependListener=u,F.prependOnceListener=u,F.listeners=function(l){return[]},F.binding=function(l){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(l){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},3951:function(U,F,e){for(var d=e(41984),S=typeof window>"u"?e.g:window,n=["moz","webkit"],E="AnimationFrame",T=S["request"+E],v=S["cancel"+E]||S["cancelRequest"+E],g=0;!T&&g<n.length;g++)T=S[n[g]+"Request"+E],v=S[n[g]+"Cancel"+E]||S[n[g]+"CancelRequest"+E];if(!T||!v){var r=0,t=0,o=[],i=1e3/60;T=function(f){if(o.length===0){var u=d(),l=Math.max(0,i-(u-r));r=l+u,setTimeout(function(){var m=o.slice(0);o.length=0;for(var h=0;h<m.length;h++)if(!m[h].cancelled)try{m[h].callback(r)}catch(w){setTimeout(function(){throw w},0)}},Math.round(l))}return o.push({handle:++t,callback:f,cancelled:!1}),t},v=function(f){for(var u=0;u<o.length;u++)o[u].handle===f&&(o[u].cancelled=!0)}}U.exports=function(f){return T.call(S,f)},U.exports.cancel=function(){v.apply(S,arguments)},U.exports.polyfill=function(f){f||(f=S),f.requestAnimationFrame=T,f.cancelAnimationFrame=v}},24544:function(U,F,e){var d=e(76752),S=e(72160),n=e(45223),E=e(55616),T=e(50896),v=e(47520),g=e(37816),r=g.float32,t=g.fract32;U.exports=i;var o=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function i(f,u){if(typeof f=="function"?(u||(u={}),u.regl=f):u=f,u.length&&(u.positions=u),f=u.regl,!f.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l=f._gl,m,h,w,c,a,p,x={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];return c=f.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),h=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),a=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=f.buffer({usage:"static",type:"float",data:o}),M(u),m=f({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:f.prop("range"),lineWidth:f.prop("lineWidth"),capSize:f.prop("capSize"),opacity:f.prop("opacity"),scale:f.prop("scale"),translate:f.prop("translate"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),viewport:function(_,b){return[b.viewport.x,b.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{color:{buffer:c,offset:function(_,b){return b.offset*4},divisor:1},position:{buffer:h,offset:function(_,b){return b.offset*8},divisor:1},positionFract:{buffer:w,offset:function(_,b){return b.offset*8},divisor:1},error:{buffer:a,offset:function(_,b){return b.offset*16},divisor:1},direction:{buffer:p,stride:24,offset:0},lineOffset:{buffer:p,stride:24,offset:8},capOffset:{buffer:p,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport"),stencil:!1,instances:f.prop("count"),count:o.length}),T(P,{update:M,draw:y,destroy:s,regl:f,gl:l,canvas:l.canvas,groups:A}),P;function P(_){_?M(_):_===null&&s(),y()}function y(_){if(typeof _=="number")return C(_);_&&!Array.isArray(_)&&(_=[_]),f._refresh(),A.forEach(function(b,k){if(b){if(_&&(_[k]?b.draw=!0:b.draw=!1),!b.draw){b.draw=!0;return}C(k)}})}function C(_){typeof _=="number"&&(_=A[_]),_!=null&&_&&_.count&&_.color&&_.opacity&&_.positions&&_.positions.length>1&&(_.scaleRatio=[_.scale[0]*_.viewport.width,_.scale[1]*_.viewport.height],m(_),_.after&&_.after(_))}function M(_){if(_){_.length!=null?typeof _[0]=="number"&&(_=[{positions:_}]):Array.isArray(_)||(_=[_]);var b=0,k=0;if(P.groups=A=_.map(function(H,X){var $=A[X];if(H)typeof H=="function"?H={after:H}:typeof H[0]=="number"&&(H={positions:H});else return $;return H=E(H,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),$||(A[X]=$={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},H=T({},x,H)),n($,H,[{lineWidth:function(ne){return+ne*.5},capSize:function(ne){return+ne*.5},opacity:parseFloat,errors:function(ne){return ne=v(ne),k+=ne.length,ne},positions:function(ne,q){return ne=v(ne,"float64"),q.count=Math.floor(ne.length/2),q.bounds=d(ne,2),q.offset=b,b+=q.count,ne}},{color:function(ne,q){var ue=q.count;if(ne||(ne="transparent"),!Array.isArray(ne)||typeof ne[0]=="number"){var te=ne;ne=Array(ue);for(var J=0;J<ue;J++)ne[J]=te}if(ne.length<ue)throw Error("Not enough colors");for(var ie=new Uint8Array(ue*4),K=0;K<ue;K++){var ee=S(ne[K],"uint8");ie.set(ee,K*4)}return ie},range:function(ne,q,ue){var te=q.bounds;return ne||(ne=te),q.scale=[1/(ne[2]-ne[0]),1/(ne[3]-ne[1])],q.translate=[-ne[0],-ne[1]],q.scaleFract=t(q.scale),q.translateFract=t(q.translate),ne},viewport:function(ne){var q;return Array.isArray(ne)?q={x:ne[0],y:ne[1],width:ne[2]-ne[0],height:ne[3]-ne[1]}:ne?(q={x:ne.x||ne.left||0,y:ne.y||ne.top||0},ne.right?q.width=ne.right-q.x:q.width=ne.w||ne.width||0,ne.bottom?q.height=ne.bottom-q.y:q.height=ne.h||ne.height||0):q={x:0,y:0,width:l.drawingBufferWidth,height:l.drawingBufferHeight},q}}]),$}),b||k){var D=A.reduce(function(H,X,$){return H+(X?X.count:0)},0),V=new Float64Array(D*2),O=new Uint8Array(D*4),N=new Float32Array(D*4);A.forEach(function(H,X){if(H){var $=H.positions,ne=H.count,q=H.offset,ue=H.color,te=H.errors;ne&&(O.set(ue,q*4),N.set(te,q*4),V.set($,q*2))}});var B=r(V);h(B);var z=t(V,B);w(z),c(O),a(N)}}}function s(){h.destroy(),w.destroy(),c.destroy(),a.destroy(),p.destroy()}}},13472:function(U,F,e){var d=e(72160),S=e(76752),n=e(50896),E=e(55616),T=e(47520),v=e(28912),g=e(71152),r=e(37816),t=r.float32,o=r.fract32,i=e(60463),f=e(51160),u=e(10272),l=`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,m=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,h=`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,w=`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,c=`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,a=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`;U.exports=p;function p(x,A){if(!(this instanceof p))return new p(x,A);if(typeof x=="function"?(A||(A={}),A.regl=x):A=x,A.length&&(A.positions=A),x=A.regl,!x.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=x._gl,this.regl=x,this.passes=[],this.shaders=p.shaders.has(x)?p.shaders.get(x):p.shaders.set(x,p.createShaders(x)).get(x),this.update(A)}p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new i,p.createShaders=function(x){var A=x.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),P={primitive:"triangle strip",instances:x.prop("count"),count:4,offset:0,uniforms:{miterMode:function(s,_){return _.join==="round"?2:1},miterLimit:x.prop("miterLimit"),scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),thickness:x.prop("thickness"),dashTexture:x.prop("dashTexture"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),dashLength:x.prop("dashLength"),viewport:function(s,_){return[_.viewport.x,_.viewport.y,s.viewportWidth,s.viewportHeight]},depth:x.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(s,_){return!_.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport")},y=x(n({vert:l,frag:m,attributes:{lineEnd:{buffer:A,divisor:0,stride:8,offset:0},lineTop:{buffer:A,divisor:0,stride:8,offset:4},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},P)),C;try{C=x(n({cull:{enable:!0,face:"back"},vert:c,frag:a,attributes:{lineEnd:{buffer:A,divisor:0,stride:8,offset:0},lineTop:{buffer:A,divisor:0,stride:8,offset:4},aColor:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:x.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},P))}catch{C=y}var M=x({primitive:"triangle",elements:function(s,_){return _.triangles},offset:0,vert:h,frag:w,uniforms:{scale:x.prop("scale"),color:x.prop("fill"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),viewport:function(s,_){return[_.viewport.x,_.viewport.y,s.viewportWidth,s.viewportHeight]}},attributes:{position:{buffer:x.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8}},blend:P.blend,depth:{enable:!1},scissor:P.scissor,stencil:P.stencil,viewport:P.viewport});return{fill:M,rect:y,miter:C}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var x,A=[],P=arguments.length;P--;)A[P]=arguments[P];A.length&&(x=this).update.apply(x,A),this.draw()},p.prototype.draw=function(){for(var x=this,A=[],P=arguments.length;P--;)A[P]=arguments[P];return(A.length?A:this.passes).forEach(function(y,C){var M;if(y&&Array.isArray(y))return(M=x).draw.apply(M,y);typeof y=="number"&&(y=x.passes[y]),y&&y.count>1&&y.opacity&&(x.regl._refresh(),y.fill&&y.triangles&&y.triangles.length>2&&x.shaders.fill(y),y.thickness&&(y.scale[0]*y.viewport.width>p.precisionThreshold||y.scale[1]*y.viewport.height>p.precisionThreshold||y.join==="rect"||!y.join&&(y.thickness<=2||y.count>=p.maxPoints)?x.shaders.rect(y):x.shaders.miter(y)))}),this},p.prototype.update=function(x){var A=this;if(x){x.length!=null?typeof x[0]=="number"&&(x=[{positions:x}]):Array.isArray(x)||(x=[x]);var P=this,y=P.regl,C=P.gl;if(x.forEach(function(k,D){var V=A.passes[D];if(k!==void 0){if(k===null){A.passes[D]=null;return}if(typeof k[0]=="number"&&(k={positions:k}),k=E(k,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),V||(A.passes[D]=V={id:D,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:y.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:y.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},k=n({},p.defaults,k)),k.thickness!=null&&(V.thickness=parseFloat(k.thickness)),k.opacity!=null&&(V.opacity=parseFloat(k.opacity)),k.miterLimit!=null&&(V.miterLimit=parseFloat(k.miterLimit)),k.overlay!=null&&(V.overlay=!!k.overlay,D<p.maxLines&&(V.depth=2*(p.maxLines-1-D%p.maxLines)/p.maxLines-1)),k.join!=null&&(V.join=k.join),k.hole!=null&&(V.hole=k.hole),k.fill!=null&&(V.fill=k.fill?d(k.fill,"uint8"):null),k.viewport!=null&&(V.viewport=f(k.viewport)),V.viewport||(V.viewport=f([C.drawingBufferWidth,C.drawingBufferHeight])),k.close!=null&&(V.close=k.close),k.positions===null&&(k.positions=[]),k.positions){var O,N;if(k.positions.x&&k.positions.y){var B=k.positions.x,z=k.positions.y;N=V.count=Math.max(B.length,z.length),O=new Float64Array(N*2);for(var H=0;H<N;H++)O[H*2]=B[H],O[H*2+1]=z[H]}else O=T(k.positions,"float64"),N=V.count=Math.floor(O.length/2);var X=V.bounds=S(O,2);if(V.fill){for(var $=[],ne={},q=0,ue=0,te=0,J=V.count;ue<J;ue++){var ie=O[ue*2],K=O[ue*2+1];isNaN(ie)||isNaN(K)||ie==null||K==null?(ie=O[q*2],K=O[q*2+1],ne[ue]=q):q=ue,$[te++]=ie,$[te++]=K}if(k.splitNull){V.count-1 in ne||(ne[V.count]=V.count-1);var ee=Object.keys(ne).map(Number).sort(function(pe,be){return pe-be}),le=[],j=0,Z=V.hole!=null?V.hole[0]:null;if(Z!=null){var fe=u(ee,function(pe){return pe>=Z});ee=ee.slice(0,fe),ee.push(Z)}for(var re=function(pe){var be=$.slice(j*2,ee[pe]*2).concat(Z?$.slice(Z*2):[]),Ue=(V.hole||[]).map(function(st){return st-Z+(ee[pe]-j)}),et=v(be,Ue);et=et.map(function(st){return st+j+(st+j<ee[pe]?0:Z-ee[pe])}),le.push.apply(le,et),j=ee[pe]+1},ce=0;ce<ee.length;ce++)re(ce);for(var xe=0,Te=le.length;xe<Te;xe++)ne[le[xe]]!=null&&(le[xe]=ne[le[xe]]);V.triangles=le}else{for(var we=v($,V.hole||[]),_e=0,ke=we.length;_e<ke;_e++)ne[we[_e]]!=null&&(we[_e]=ne[we[_e]]);V.triangles=we}}var Ne=new Float64Array(O);g(Ne,2,X);var Ee=new Float64Array(N*2+6);V.close?O[0]===O[N*2-2]&&O[1]===O[N*2-1]?(Ee[0]=Ne[N*2-4],Ee[1]=Ne[N*2-3]):(Ee[0]=Ne[N*2-2],Ee[1]=Ne[N*2-1]):(Ee[0]=Ne[0],Ee[1]=Ne[1]),Ee.set(Ne,2),V.close?O[0]===O[N*2-2]&&O[1]===O[N*2-1]?(Ee[N*2+2]=Ne[2],Ee[N*2+3]=Ne[3],V.count-=1):(Ee[N*2+2]=Ne[0],Ee[N*2+3]=Ne[1],Ee[N*2+4]=Ne[2],Ee[N*2+5]=Ne[3]):(Ee[N*2+2]=Ne[N*2-2],Ee[N*2+3]=Ne[N*2-1],Ee[N*2+4]=Ne[N*2-2],Ee[N*2+5]=Ne[N*2-1]);var ze=t(Ee);V.positionBuffer(ze);var Ce=o(Ee,ze);V.positionFractBuffer(Ce)}if(k.range?V.range=k.range:V.range||(V.range=V.bounds),(k.range||k.positions)&&V.count){var Oe=V.bounds,Le=Oe[2]-Oe[0],Ge=Oe[3]-Oe[1],rt=V.range[2]-V.range[0],ot=V.range[3]-V.range[1];V.scale=[Le/rt,Ge/ot],V.translate=[-V.range[0]/rt+Oe[0]/rt||0,-V.range[1]/ot+Oe[1]/ot||0],V.scaleFract=o(V.scale),V.translateFract=o(V.translate)}if(k.dashes){var $e=0,qe;if(!k.dashes||k.dashes.length<2)$e=1,qe=new Uint8Array([255,255,255,255,255,255,255,255]);else{$e=0;for(var ht=0;ht<k.dashes.length;++ht)$e+=k.dashes[ht];qe=new Uint8Array($e*p.dashMult);for(var vt=0,pt=255,wt=0;wt<2;wt++)for(var Et=0;Et<k.dashes.length;++Et){for(var nt=0,Fe=k.dashes[Et]*p.dashMult*.5;nt<Fe;++nt)qe[vt++]=pt;pt^=255}}V.dashLength=$e,V.dashTexture({channels:1,data:qe,width:qe.length,height:1,mag:"linear",min:"linear"},0,0)}if(k.color){var We=V.count,Ze=k.color;Ze||(Ze="transparent");var Ye=new Uint8Array(We*4+4);if(!Array.isArray(Ze)||typeof Ze[0]=="number")for(var Ie=d(Ze,"uint8"),De=0;De<We+1;De++)Ye.set(Ie,De*4);else{for(var je=0;je<We;je++){var Re=d(Ze[je],"uint8");Ye.set(Re,je*4)}Ye.set(d(Ze[0],"uint8"),We*4)}V.colorBuffer({usage:"dynamic",type:"uint8",data:Ye})}}}),x.length<this.passes.length){for(var M=x.length;M<this.passes.length;M++){var s=this.passes[M];s&&(s.colorBuffer.destroy(),s.positionBuffer.destroy(),s.dashTexture.destroy())}this.passes.length=x.length}for(var _=[],b=0;b<this.passes.length;b++)this.passes[b]!==null&&_.push(this.passes[b]);return this.passes=_,this}},p.prototype.destroy=function(){return this.passes.forEach(function(x){x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(U,F,e){function d(s,_){var b=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(b!=null){var k,D,V,O,N=[],B=!0,z=!1;try{if(V=(b=b.call(s)).next,_!==0)for(;!(B=(k=V.call(b)).done)&&(N.push(k.value),N.length!==_);B=!0);}catch(H){z=!0,D=H}finally{try{if(!B&&b.return!=null&&(O=b.return(),Object(O)!==O))return}finally{if(z)throw D}}return N}}function S(s,_){return T(s)||d(s,_)||g(s,_)||o()}function n(s){return E(s)||v(s)||g(s)||t()}function E(s){if(Array.isArray(s))return r(s)}function T(s){if(Array.isArray(s))return s}function v(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function g(s,_){if(s){if(typeof s=="string")return r(s,_);var b=Object.prototype.toString.call(s).slice(8,-1);if(b==="Object"&&s.constructor&&(b=s.constructor.name),b==="Map"||b==="Set")return Array.from(s);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return r(s,_)}}function r(s,_){(_==null||_>s.length)&&(_=s.length);for(var b=0,k=new Array(_);b<_;b++)k[b]=s[b];return k}function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=e(72160),f=e(76752),u=e(3808),l=e(3108),m=e(50896),h=e(26444),w=e(55616),c=e(45223),a=e(47520),p=e(96604),x=e(37816),A=e(51160),P=y;function y(s,_){var b=this;if(!(this instanceof y))return new y(s,_);typeof s=="function"?(_||(_={}),_.regl=s):(_=s,s=null),_&&_.length&&(_.positions=_),s=_.regl;var k=s._gl,D,V=[],O={},N=[],B=[null],z=[null],H=255,X=100;this.tooManyColors=p,D=s.texture({data:new Uint8Array(H*4),width:H,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),m(this,{regl:s,gl:k,groups:N,markerCache:z,markerTextures:B,palette:V,paletteIds:O,paletteTexture:D,maxColors:H,maxSize:X,canvas:k.canvas}),this.update(_);var $={uniforms:{constPointSize:!!_.constPointSize,opacity:s.prop("opacity"),paletteSize:function(te,J){return[b.tooManyColors?0:H,D.height]},pixelRatio:s.context("pixelRatio"),scale:s.prop("scale"),scaleFract:s.prop("scaleFract"),translate:s.prop("translate"),translateFract:s.prop("translateFract"),markerTexture:s.prop("markerTexture"),paletteTexture:D},attributes:{x:function(te,J){return J.xAttr||{buffer:J.positionBuffer,stride:8,offset:0}},y:function(te,J){return J.yAttr||{buffer:J.positionBuffer,stride:8,offset:4}},xFract:function(te,J){return J.xAttr?{constant:[0,0]}:{buffer:J.positionFractBuffer,stride:8,offset:0}},yFract:function(te,J){return J.yAttr?{constant:[0,0]}:{buffer:J.positionFractBuffer,stride:8,offset:4}},size:function(te,J){return J.size.length?{buffer:J.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(J.size*255/b.maxSize)]}},borderSize:function(te,J){return J.borderSize.length?{buffer:J.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(J.borderSize*255/b.maxSize)]}},colorId:function(te,J){return J.color.length?{buffer:J.colorBuffer,stride:b.tooManyColors?8:4,offset:0}:{constant:b.tooManyColors?V.slice(J.color*4,J.color*4+4):[J.color]}},borderColorId:function(te,J){return J.borderColor.length?{buffer:J.colorBuffer,stride:b.tooManyColors?8:4,offset:b.tooManyColors?4:2}:{constant:b.tooManyColors?V.slice(J.borderColor*4,J.borderColor*4+4):[J.borderColor]}},isActive:function(te,J){return J.activation===!0?{constant:[1]}:J.activation?J.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:s.prop("elements"),count:s.prop("count"),offset:s.prop("offset"),primitive:"points"},ne=m({},$);ne.frag=h([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),ne.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=s(ne);var q=m({},$);q.frag=h([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),q.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),p&&(q.frag=q.frag.replace("smoothstep","smoothStep"),ne.frag=ne.frag.replace("smoothstep","smoothStep")),this.drawCircle=s(q)}y.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},y.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},y.prototype.draw=function(){for(var s=this,_=arguments.length,b=new Array(_),k=0;k<_;k++)b[k]=arguments[k];var D=this.groups;if(b.length===1&&Array.isArray(b[0])&&(b[0][0]===null||Array.isArray(b[0][0]))&&(b=b[0]),this.regl._refresh(),b.length)for(var V=0;V<b.length;V++)this.drawItem(V,b[V]);else D.forEach(function(O,N){s.drawItem(N)});return this},y.prototype.drawItem=function(s,_){var b=this.groups,k=b[s];if(typeof _=="number"&&(s=_,k=b[_],_=null),!!(k&&k.count&&k.opacity)){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,_));for(var D=[],V=1;V<k.activation.length;V++)!k.activation[V]||k.activation[V]!==!0&&!k.activation[V].data.length||D.push.apply(D,n(this.getMarkerDrawOptions(V,k,_)));D.length&&this.drawMarker(D)}},y.prototype.getMarkerDrawOptions=function(s,_,b){var k=_.range,D=_.tree,V=_.viewport,O=_.activation,N=_.selectionBuffer,B=_.count;if(this.regl,!D)return b?[m({},_,{markerTexture:this.markerTextures[s],activation:O[s],count:b.length,elements:b,offset:0})]:[m({},_,{markerTexture:this.markerTextures[s],activation:O[s],offset:0})];var z=[],H=D.range(k,{lod:!0,px:[(k[2]-k[0])/V.width,(k[3]-k[1])/V.height]});if(b){for(var X=O[s],$=X.data,ne=new Uint8Array(B),q=0;q<b.length;q++){var ue=b[q];ne[ue]=$?$[ue]:1}N.subdata(ne)}for(var te=H.length;te--;){var J=S(H[te],2),ie=J[0],K=J[1];z.push(m({},_,{markerTexture:this.markerTextures[s],activation:b?N:O[s],offset:ie,count:K-ie}))}return z},y.prototype.update=function(){for(var s=this,_=arguments.length,b=new Array(_),k=0;k<_;k++)b[k]=arguments[k];if(b.length){b.length===1&&Array.isArray(b[0])&&(b=b[0]);var D=this.groups,V=this.gl,O=this.regl,N=this.maxSize,B=this.maxColors,z=this.palette;this.groups=D=b.map(function(H,X){var $=D[X];if(H===void 0)return $;H===null?H={positions:null}:typeof H=="function"?H={ondraw:H}:typeof H[0]=="number"&&(H={positions:H}),H=w(H,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),H.positions===null&&(H.positions=[]),H.tooManyColors!=null&&(s.tooManyColors=H.tooManyColors),$||(D[X]=$={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:O.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},H=m({},y.defaults,H)),H.positions&&!("marker"in H)&&(H.marker=$.marker,delete $.marker),H.marker&&!("positions"in H)&&(H.positions=$.positions,delete $.positions);var ne=0,q=0;if(c($,H,[{snap:!0,size:function(Ee,ze){return Ee==null&&(Ee=y.defaults.size),ne+=Ee&&Ee.length?1:0,Ee},borderSize:function(Ee,ze){return Ee==null&&(Ee=y.defaults.borderSize),ne+=Ee&&Ee.length?1:0,Ee},opacity:parseFloat,color:function(Ee,ze){return Ee==null&&(Ee=y.defaults.color),Ee=s.updateColor(Ee),q++,Ee},borderColor:function(Ee,ze){return Ee==null&&(Ee=y.defaults.borderColor),Ee=s.updateColor(Ee),q++,Ee},bounds:function(Ee,ze,Ce){return"range"in Ce||(Ce.range=null),Ee},positions:function(Ee,ze,Ce){var Oe=ze.snap,Le=ze.positionBuffer,Ge=ze.positionFractBuffer,rt=ze.selectionBuffer;if(Ee.x||Ee.y)return Ee.x.length?ze.xAttr={buffer:O.buffer(Ee.x),offset:0,stride:4,count:Ee.x.length}:ze.xAttr={buffer:Ee.x.buffer,offset:Ee.x.offset*4||0,stride:(Ee.x.stride||1)*4,count:Ee.x.count},Ee.y.length?ze.yAttr={buffer:O.buffer(Ee.y),offset:0,stride:4,count:Ee.y.length}:ze.yAttr={buffer:Ee.y.buffer,offset:Ee.y.offset*4||0,stride:(Ee.y.stride||1)*4,count:Ee.y.count},ze.count=Math.max(ze.xAttr.count,ze.yAttr.count),Ee;Ee=a(Ee,"float64");var ot=ze.count=Math.floor(Ee.length/2),$e=ze.bounds=ot?f(Ee,2):null;if(!Ce.range&&!ze.range&&(delete ze.range,Ce.range=$e),!Ce.marker&&!ze.marker&&(delete ze.marker,Ce.marker=null),Oe&&(Oe===!0||ot>Oe)?ze.tree=l(Ee,{bounds:$e}):Oe&&Oe.length&&(ze.tree=Oe),ze.tree){var qe={primitive:"points",usage:"static",data:ze.tree,type:"uint32"};ze.elements?ze.elements(qe):ze.elements=O.elements(qe)}var ht=x.float32(Ee);Le({data:ht,usage:"dynamic"});var vt=x.fract32(Ee,ht);return Ge({data:vt,usage:"dynamic"}),rt({data:new Uint8Array(ot),type:"uint8",usage:"stream"}),Ee}},{marker:function(Ee,ze,Ce){var Oe=ze.activation;if(Oe.forEach(function(vt){return vt&&vt.destroy&&vt.destroy()}),Oe.length=0,!Ee||typeof Ee[0]=="number"){var Le=s.addMarker(Ee);Oe[Le]=!0}else{for(var Ge=[],rt=0,ot=Math.min(Ee.length,ze.count);rt<ot;rt++){var $e=s.addMarker(Ee[rt]);Ge[$e]||(Ge[$e]=new Uint8Array(ze.count)),Ge[$e][rt]=1}for(var qe=0;qe<Ge.length;qe++)if(Ge[qe]){var ht={data:Ge[qe],type:"uint8",usage:"static"};Oe[qe]?Oe[qe](ht):Oe[qe]=O.buffer(ht),Oe[qe].data=Ge[qe]}}return Ee},range:function(Ee,ze,Ce){var Oe=ze.bounds;if(Oe)return Ee||(Ee=Oe),ze.scale=[1/(Ee[2]-Ee[0]),1/(Ee[3]-Ee[1])],ze.translate=[-Ee[0],-Ee[1]],ze.scaleFract=x.fract(ze.scale),ze.translateFract=x.fract(ze.translate),Ee},viewport:function(Ee){var ze=A(Ee||[V.drawingBufferWidth,V.drawingBufferHeight]);return ze}}]),ne){var ue=$,te=ue.count,J=ue.size,ie=ue.borderSize,K=ue.sizeBuffer,ee=new Uint8Array(te*2);if(J.length||ie.length)for(var le=0;le<te;le++)ee[le*2]=Math.round((J[le]==null?J:J[le])*255/N),ee[le*2+1]=Math.round((ie[le]==null?ie:ie[le])*255/N);K({data:ee,usage:"dynamic"})}if(q){var j=$,Z=j.count,fe=j.color,re=j.borderColor,ce=j.colorBuffer,xe;if(s.tooManyColors){if(fe.length||re.length){xe=new Uint8Array(Z*8);for(var Te=0;Te<Z;Te++){var we=fe[Te];xe[Te*8]=z[we*4],xe[Te*8+1]=z[we*4+1],xe[Te*8+2]=z[we*4+2],xe[Te*8+3]=z[we*4+3];var _e=re[Te];xe[Te*8+4]=z[_e*4],xe[Te*8+5]=z[_e*4+1],xe[Te*8+6]=z[_e*4+2],xe[Te*8+7]=z[_e*4+3]}}}else if(fe.length||re.length){xe=new Uint8Array(Z*4+2);for(var ke=0;ke<Z;ke++)fe[ke]!=null&&(xe[ke*4]=fe[ke]%B,xe[ke*4+1]=Math.floor(fe[ke]/B)),re[ke]!=null&&(xe[ke*4+2]=re[ke]%B,xe[ke*4+3]=Math.floor(re[ke]/B))}ce({data:xe||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return $})}},y.prototype.addMarker=function(s){var _=this.markerTextures,b=this.regl,k=this.markerCache,D=s==null?0:k.indexOf(s);if(D>=0)return D;var V;if(s instanceof Uint8Array||s instanceof Uint8ClampedArray)V=s;else{V=new Uint8Array(s.length);for(var O=0,N=s.length;O<N;O++)V[O]=s[O]*255}var B=Math.floor(Math.sqrt(V.length));return D=_.length,k.push(s),_.push(b.texture({channels:1,data:V,radius:B,mag:"linear",min:"linear"})),D},y.prototype.updateColor=function(s){var _=this.paletteIds,b=this.palette,k=this.maxColors;Array.isArray(s)||(s=[s]);var D=[];if(typeof s[0]=="number"){var V=[];if(Array.isArray(s))for(var O=0;O<s.length;O+=4)V.push(s.slice(O,O+4));else for(var N=0;N<s.length;N+=4)V.push(s.subarray(N,N+4));s=V}for(var B=0;B<s.length;B++){var z=s[B];z=i(z,"uint8");var H=u(z,!1);if(_[H]==null){var X=b.length;_[H]=Math.floor(X/4),b[X]=z[0],b[X+1]=z[1],b[X+2]=z[2],b[X+3]=z[3]}D[B]=_[H]}return!this.tooManyColors&&b.length>k*4&&(this.tooManyColors=!0),this.updatePalette(b),D.length===1?D[0]:D},y.prototype.updatePalette=function(s){if(!this.tooManyColors){var _=this.maxColors,b=this.paletteTexture,k=Math.ceil(s.length*.25/_);if(k>1){s=s.slice();for(var D=s.length*.25%_;D<k*_;D++)s.push(0,0,0,0)}b.height<k&&b.resize(_,k),b.subimage({width:Math.min(s.length*.25,_),height:k,data:s},0,0)}},y.prototype.destroy=function(){return this.groups.forEach(function(s){s.sizeBuffer.destroy(),s.positionBuffer.destroy(),s.positionFractBuffer.destroy(),s.colorBuffer.destroy(),s.activation.forEach(function(_){return _&&_.destroy&&_.destroy()}),s.selectionBuffer.destroy(),s.elements&&s.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(s){return s&&s.destroy&&s.destroy()}),this};var C=e(50896),M=function(_,b){var k=new P(_,b),D=k.render.bind(k);return C(D,{render:D,update:k.update.bind(k),draw:k.draw.bind(k),destroy:k.destroy.bind(k),regl:k.regl,gl:k.gl,canvas:k.gl.canvas,groups:k.groups,markers:k.markerCache,palette:k.palette}),D};U.exports=M},55795:function(U,F,e){var d=e(38540),S=e(55616),n=e(76752),E=e(3951),T=e(67752),v=e(51160),g=e(47520);U.exports=r;function r(f,u){if(!(this instanceof r))return new r(f);this.traces=[],this.passes={},this.regl=f,this.scatter=d(f),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var f=this,u,l=[],m=arguments.length;m--;)l[m]=arguments[m];return l.length&&(u=this).update.apply(u,l),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=E(function(){f.draw(),f.dirty=!0,f.planned=null})):(this.draw(),this.dirty=!0,E(function(){f.dirty=!1})),this)},r.prototype.update=function(){for(var f,u=[],l=arguments.length;l--;)u[l]=arguments[l];if(u.length){for(var m=0;m<u.length;m++)this.updateItem(m,u[m]);this.traces=this.traces.filter(Boolean);for(var h=[],w=0,c=0;c<this.traces.length;c++){for(var a=this.traces[c],p=this.traces[c].passes,x=0;x<p.length;x++)h.push(this.passes[p[x]]);a.passOffset=w,w+=a.passes.length}return(f=this.scatter).update.apply(f,h),this}},r.prototype.updateItem=function(f,u){var l=this,m=l.regl;if(u===null)return this.traces[f]=null,this;if(!u)return this;var h=S(u,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),w=this.traces[f]||(this.traces[f]={id:f,buffer:m.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:v([m._gl.drawingBufferWidth,m._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(h.color!=null&&(w.color=h.color),h.size!=null&&(w.size=h.size),h.marker!=null&&(w.marker=h.marker),h.borderColor!=null&&(w.borderColor=h.borderColor),h.borderSize!=null&&(w.borderSize=h.borderSize),h.opacity!=null&&(w.opacity=h.opacity),h.viewport&&(w.viewport=v(h.viewport)),h.diagonal!=null&&(w.diagonal=h.diagonal),h.upper!=null&&(w.upper=h.upper),h.lower!=null&&(w.lower=h.lower),h.data){w.buffer(g(h.data)),w.columns=h.data.length,w.count=h.data[0].length,w.bounds=[];for(var c=0;c<w.columns;c++)w.bounds[c]=n(h.data[c],1)}var a;h.range&&(w.range=h.range,a=w.range&&typeof w.range[0]!="number"),h.domain&&(w.domain=h.domain);var p=!1;h.padding!=null&&(Array.isArray(h.padding)&&h.padding.length===w.columns&&typeof h.padding[h.padding.length-1]=="number"?(w.padding=h.padding.map(i),p=!0):w.padding=i(h.padding));var x=w.columns,A=w.count,P=w.viewport.width,y=w.viewport.height,C=w.viewport.x,M=w.viewport.y,s=P/x,_=y/x;w.passes=[];for(var b=0;b<x;b++)for(var k=0;k<x;k++)if(!(!w.diagonal&&k===b)&&!(!w.upper&&b>k)&&!(!w.lower&&b<k)){var D=t(w.id,b,k),V=this.passes[D]||(this.passes[D]={});if(h.data&&(h.transpose?V.positions={x:{buffer:w.buffer,offset:k,count:A,stride:x},y:{buffer:w.buffer,offset:b,count:A,stride:x}}:V.positions={x:{buffer:w.buffer,offset:k*A,count:A},y:{buffer:w.buffer,offset:b*A,count:A}},V.bounds=o(w.bounds,b,k)),h.domain||h.viewport||h.data){var O=p?o(w.padding,b,k):w.padding;if(w.domain){var N=o(w.domain,b,k),B=N[0],z=N[1],H=N[2],X=N[3];V.viewport=[C+B*P+O[0],M+z*y+O[1],C+H*P-O[2],M+X*y-O[3]]}else V.viewport=[C+k*s+s*O[0],M+b*_+_*O[1],C+(k+1)*s-s*O[2],M+(b+1)*_-_*O[3]]}h.color&&(V.color=w.color),h.size&&(V.size=w.size),h.marker&&(V.marker=w.marker),h.borderSize&&(V.borderSize=w.borderSize),h.borderColor&&(V.borderColor=w.borderColor),h.opacity&&(V.opacity=w.opacity),h.range&&(V.range=a?o(w.range,b,k):w.range||V.bounds),w.passes.push(D)}return this},r.prototype.draw=function(){for(var f,u=[],l=arguments.length;l--;)u[l]=arguments[l];if(!u.length)this.scatter.draw();else{for(var m=[],h=0;h<u.length;h++)if(typeof u[h]=="number"){var w=this.traces[u[h]],c=w.passes,a=w.passOffset;m.push.apply(m,T(a,a+c.length))}else if(u[h].length){var p=u[h],x=this.traces[h],A=x.passes,P=x.passOffset;A=A.map(function(y,C){m[P+C]=p})}(f=this.scatter).draw.apply(f,m)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(f){f.buffer&&f.buffer.destroy&&f.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function t(f,u,l){var m=f.id!=null?f.id:f,h=u,w=l,c=m<<16|(h&255)<<8|w&255;return c}function o(f,u,l){var m,h,w,c,a=f[u],p=f[l];return a.length>2?(a[0],a[2],m=a[1],h=a[3]):a.length?(m=a[0],h=a[1]):(a.x,m=a.y,a.x+a.width,h=a.y+a.height),p.length>2?(w=p[0],c=p[2],p[1],p[3]):p.length?(w=p[0],c=p[1]):(w=p.x,p.y,c=p.x+p.width,p.y+p.height),[w,m,c,h]}function i(f){if(typeof f=="number")return[f,f,f,f];if(f.length===2)return[f[0],f[1],f[0],f[1]];var u=v(f);return[u.x,u.y,u.x+u.width,u.y+u.height]}},28624:function(U){(function(F,e){U.exports=e()})(this,function(){function F(gt,jt){this.id=ce++,this.type=gt,this.data=jt}function e(gt){if(gt.length===0)return[];var jt=gt.charAt(0),Qt=gt.charAt(gt.length-1);if(1<gt.length&&jt===Qt&&(jt==='"'||jt==="'"))return['"'+gt.substr(1,gt.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(jt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(gt))return e(gt.substr(0,jt.index)).concat(e(jt[1])).concat(e(gt.substr(jt.index+jt[0].length)));if(jt=gt.split("."),jt.length===1)return['"'+gt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(gt=[],Qt=0;Qt<jt.length;++Qt)gt=gt.concat(e(jt[Qt]));return gt}function d(gt){return"["+e(gt).join("][")+"]"}function S(gt,jt){if(typeof gt=="function")return new F(0,gt);if(typeof gt=="number"||typeof gt=="boolean")return new F(5,gt);if(Array.isArray(gt))return new F(6,gt.map(function(Qt,mr){return S(Qt)}));if(gt instanceof F)return gt}function n(){var gt={"":0},jt=[""];return{id:function(Qt){var mr=gt[Qt];return mr||(mr=gt[Qt]=jt.length,jt.push(Qt),mr)},str:function(Qt){return jt[Qt]}}}function E(gt,jt,Qt){function mr(){var ut=window.innerWidth,bt=window.innerHeight;gt!==document.body&&(bt=or.getBoundingClientRect(),ut=bt.right-bt.left,bt=bt.bottom-bt.top),or.width=Qt*ut,or.height=Qt*bt}var or=document.createElement("canvas");re(or.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),gt.appendChild(or),gt===document.body&&(or.style.position="absolute",re(gt.style,{margin:0,padding:0}));var mt;return gt!==document.body&&typeof ResizeObserver=="function"?(mt=new ResizeObserver(function(){setTimeout(mr)}),mt.observe(gt)):window.addEventListener("resize",mr,!1),mr(),{canvas:or,onDestroy:function(){mt?mt.disconnect():window.removeEventListener("resize",mr),gt.removeChild(or)}}}function T(gt,jt){function Qt(mr){try{return gt.getContext(mr,jt)}catch{return null}}return Qt("webgl")||Qt("experimental-webgl")||Qt("webgl-experimental")}function v(gt){return typeof gt=="string"?gt.split():gt}function g(gt){return typeof gt=="string"?document.querySelector(gt):gt}function r(gt){var jt=gt||{},Qt,mr,or,mt;gt={};var ut=[],bt=[],St=typeof window>"u"?1:window.devicePixelRatio,Pt=!1,Ht={},Bt=function(Kt){},Nt=function(){};if(typeof jt=="string"?Qt=document.querySelector(jt):typeof jt=="object"&&(typeof jt.nodeName=="string"&&typeof jt.appendChild=="function"&&typeof jt.getBoundingClientRect=="function"?Qt=jt:typeof jt.drawArrays=="function"||typeof jt.drawElements=="function"?(mt=jt,or=mt.canvas):("gl"in jt?mt=jt.gl:"canvas"in jt?or=g(jt.canvas):"container"in jt&&(mr=g(jt.container)),"attributes"in jt&&(gt=jt.attributes),"extensions"in jt&&(ut=v(jt.extensions)),"optionalExtensions"in jt&&(bt=v(jt.optionalExtensions)),"onDone"in jt&&(Bt=jt.onDone),"profile"in jt&&(Pt=!!jt.profile),"pixelRatio"in jt&&(St=+jt.pixelRatio),"cachedCode"in jt&&(Ht=jt.cachedCode))),Qt&&(Qt.nodeName.toLowerCase()==="canvas"?or=Qt:mr=Qt),!mt){if(!or){if(Qt=E(mr||document.body,Bt,St),!Qt)return null;or=Qt.canvas,Nt=Qt.onDestroy}gt.premultipliedAlpha===void 0&&(gt.premultipliedAlpha=!0),mt=T(or,gt)}return mt?{gl:mt,canvas:or,container:mr,extensions:ut,optionalExtensions:bt,pixelRatio:St,profile:Pt,cachedCode:Ht,onDone:Bt,onDestroy:Nt}:(Nt(),Bt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function t(gt,jt){function Qt(ut){ut=ut.toLowerCase();var bt;try{bt=mr[ut]=gt.getExtension(ut)}catch{}return!!bt}for(var mr={},or=0;or<jt.extensions.length;++or){var mt=jt.extensions[or];if(!Qt(mt))return jt.onDestroy(),jt.onDone('"'+mt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return jt.optionalExtensions.forEach(Qt),{extensions:mr,restore:function(){Object.keys(mr).forEach(function(ut){if(mr[ut]&&!Qt(ut))throw Error("(regl): error restoring extension "+ut)})}}}function o(gt,jt){for(var Qt=Array(gt),mr=0;mr<gt;++mr)Qt[mr]=jt(mr);return Qt}function i(gt){var jt,Qt;return jt=(65535<gt)<<4,gt>>>=jt,Qt=(255<gt)<<3,gt>>>=Qt,jt|=Qt,Qt=(15<gt)<<2,gt>>>=Qt,jt|=Qt,Qt=(3<gt)<<1,jt|Qt|gt>>>Qt>>1}function f(){function gt(mr){e:{for(var or=16;268435456>=or;or*=16)if(mr<=or){mr=or;break e}mr=0}return or=Qt[i(mr)>>2],0<or.length?or.pop():new ArrayBuffer(mr)}function jt(mr){Qt[i(mr.byteLength)>>2].push(mr)}var Qt=o(8,function(){return[]});return{alloc:gt,free:jt,allocType:function(mr,or){var mt=null;switch(mr){case 5120:mt=new Int8Array(gt(or),0,or);break;case 5121:mt=new Uint8Array(gt(or),0,or);break;case 5122:mt=new Int16Array(gt(2*or),0,or);break;case 5123:mt=new Uint16Array(gt(2*or),0,or);break;case 5124:mt=new Int32Array(gt(4*or),0,or);break;case 5125:mt=new Uint32Array(gt(4*or),0,or);break;case 5126:mt=new Float32Array(gt(4*or),0,or);break;default:return null}return mt.length!==or?mt.subarray(0,or):mt},freeType:function(mr){jt(mr.buffer)}}}function u(gt){return!!gt&&typeof gt=="object"&&Array.isArray(gt.shape)&&Array.isArray(gt.stride)&&typeof gt.offset=="number"&&gt.shape.length===gt.stride.length&&(Array.isArray(gt.data)||Ne(gt.data))}function l(gt,jt,Qt,mr,or,mt){for(var ut=0;ut<jt;++ut)for(var bt=gt[ut],St=0;St<Qt;++St)for(var Pt=bt[St],Ht=0;Ht<mr;++Ht)or[mt++]=Pt[Ht]}function m(gt,jt,Qt,mr,or){for(var mt=1,ut=Qt+1;ut<jt.length;++ut)mt*=jt[ut];var bt=jt[Qt];if(jt.length-Qt===4){var St=jt[Qt+1],Pt=jt[Qt+2];for(jt=jt[Qt+3],ut=0;ut<bt;++ut)l(gt[ut],St,Pt,jt,mr,or),or+=mt}else for(ut=0;ut<bt;++ut)m(gt[ut],jt,Qt+1,mr,or),or+=mt}function h(gt){return Ce[Object.prototype.toString.call(gt)]|0}function w(gt,jt){for(var Qt=0;Qt<jt.length;++Qt)gt[Qt]=jt[Qt]}function c(gt,jt,Qt,mr,or,mt,ut){for(var bt=0,St=0;St<Qt;++St)for(var Pt=0;Pt<mr;++Pt)gt[bt++]=jt[or*St+mt*Pt+ut]}function a(gt,jt,Qt,mr){function or(Bt){this.id=St++,this.buffer=gt.createBuffer(),this.type=Bt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Qt.profile&&(this.stats={size:0})}function mt(Bt,Nt,Kt){Bt.byteLength=Nt.byteLength,gt.bufferData(Bt.type,Nt,Kt)}function ut(Bt,Nt,Kt,fr,cr,dr){if(Bt.usage=Kt,Array.isArray(Nt)){if(Bt.dtype=fr||5126,0<Nt.length)if(Array.isArray(Nt[0])){cr=rt(Nt);for(var Xe=fr=1;Xe<cr.length;++Xe)fr*=cr[Xe];Bt.dimension=fr,Nt=Ge(Nt,cr,Bt.dtype),mt(Bt,Nt,Kt),dr?Bt.persistentData=Nt:_e.freeType(Nt)}else typeof Nt[0]=="number"?(Bt.dimension=cr,cr=_e.allocType(Bt.dtype,Nt.length),w(cr,Nt),mt(Bt,cr,Kt),dr?Bt.persistentData=cr:_e.freeType(cr)):Ne(Nt[0])&&(Bt.dimension=Nt[0].length,Bt.dtype=fr||h(Nt[0])||5126,Nt=Ge(Nt,[Nt.length,Nt[0].length],Bt.dtype),mt(Bt,Nt,Kt),dr?Bt.persistentData=Nt:_e.freeType(Nt))}else if(Ne(Nt))Bt.dtype=fr||h(Nt),Bt.dimension=cr,mt(Bt,Nt,Kt),dr&&(Bt.persistentData=new Uint8Array(new Uint8Array(Nt.buffer)));else if(u(Nt)){cr=Nt.shape;var He=Nt.stride,Xe=Nt.offset,zt=0,Rt=0,Jt=0,sr=0;cr.length===1?(zt=cr[0],Rt=1,Jt=He[0],sr=0):cr.length===2&&(zt=cr[0],Rt=cr[1],Jt=He[0],sr=He[1]),Bt.dtype=fr||h(Nt.data)||5126,Bt.dimension=Rt,cr=_e.allocType(Bt.dtype,zt*Rt),c(cr,Nt.data,zt,Rt,Jt,sr,Xe),mt(Bt,cr,Kt),dr?Bt.persistentData=cr:_e.freeType(cr)}else Nt instanceof ArrayBuffer&&(Bt.dtype=5121,Bt.dimension=cr,mt(Bt,Nt,Kt),dr&&(Bt.persistentData=new Uint8Array(new Uint8Array(Nt))))}function bt(Bt){jt.bufferCount--,mr(Bt),gt.deleteBuffer(Bt.buffer),Bt.buffer=null,delete Pt[Bt.id]}var St=0,Pt={};or.prototype.bind=function(){gt.bindBuffer(this.type,this.buffer)},or.prototype.destroy=function(){bt(this)};var Ht=[];return Qt.profile&&(jt.getTotalBufferSize=function(){var Bt=0;return Object.keys(Pt).forEach(function(Nt){Bt+=Pt[Nt].stats.size}),Bt}),{create:function(Bt,Nt,Kt,fr){function cr(Xe){var He=35044,zt=null,Rt=0,Jt=0,sr=1;return Array.isArray(Xe)||Ne(Xe)||u(Xe)||Xe instanceof ArrayBuffer?zt=Xe:typeof Xe=="number"?Rt=Xe|0:Xe&&("data"in Xe&&(zt=Xe.data),"usage"in Xe&&(He=Le[Xe.usage]),"type"in Xe&&(Jt=Oe[Xe.type]),"dimension"in Xe&&(sr=Xe.dimension|0),"length"in Xe&&(Rt=Xe.length|0)),dr.bind(),zt?ut(dr,zt,He,Jt,sr,fr):(Rt&&gt.bufferData(dr.type,Rt,He),dr.dtype=Jt||5121,dr.usage=He,dr.dimension=sr,dr.byteLength=Rt),Qt.profile&&(dr.stats.size=dr.byteLength*ot[dr.dtype]),cr}jt.bufferCount++;var dr=new or(Nt);return Pt[dr.id]=dr,Kt||cr(Bt),cr._reglType="buffer",cr._buffer=dr,cr.subdata=function(Xe,He){var zt=(He||0)|0,Rt;if(dr.bind(),Ne(Xe)||Xe instanceof ArrayBuffer)gt.bufferSubData(dr.type,zt,Xe);else if(Array.isArray(Xe)){if(0<Xe.length)if(typeof Xe[0]=="number"){var Jt=_e.allocType(dr.dtype,Xe.length);w(Jt,Xe),gt.bufferSubData(dr.type,zt,Jt),_e.freeType(Jt)}else(Array.isArray(Xe[0])||Ne(Xe[0]))&&(Rt=rt(Xe),Jt=Ge(Xe,Rt,dr.dtype),gt.bufferSubData(dr.type,zt,Jt),_e.freeType(Jt))}else if(u(Xe)){Rt=Xe.shape;var sr=Xe.stride,ur=Jt=0,er=0,Ft=0;Rt.length===1?(Jt=Rt[0],ur=1,er=sr[0],Ft=0):Rt.length===2&&(Jt=Rt[0],ur=Rt[1],er=sr[0],Ft=sr[1]),Rt=Array.isArray(Xe.data)?dr.dtype:h(Xe.data),Rt=_e.allocType(Rt,Jt*ur),c(Rt,Xe.data,Jt,ur,er,Ft,Xe.offset),gt.bufferSubData(dr.type,zt,Rt),_e.freeType(Rt)}return cr},Qt.profile&&(cr.stats=dr.stats),cr.destroy=function(){bt(dr)},cr},createStream:function(Bt,Nt){var Kt=Ht.pop();return Kt||(Kt=new or(Bt)),Kt.bind(),ut(Kt,Nt,35040,0,1,!1),Kt},destroyStream:function(Bt){Ht.push(Bt)},clear:function(){Ee(Pt).forEach(bt),Ht.forEach(bt)},getBuffer:function(Bt){return Bt&&Bt._buffer instanceof or?Bt._buffer:null},restore:function(){Ee(Pt).forEach(function(Bt){Bt.buffer=gt.createBuffer(),gt.bindBuffer(Bt.type,Bt.buffer),gt.bufferData(Bt.type,Bt.persistentData||Bt.byteLength,Bt.usage)})},_initBuffer:ut}}function p(gt,jt,Qt,mr){function or(Bt){this.id=St++,bt[this.id]=this,this.buffer=Bt,this.primType=4,this.type=this.vertCount=0}function mt(Bt,Nt,Kt,fr,cr,dr,Xe){Bt.buffer.bind();var He;if(Nt?((He=Xe)||Ne(Nt)&&(!u(Nt)||Ne(Nt.data))||(He=jt.oes_element_index_uint?5125:5123),Qt._initBuffer(Bt.buffer,Nt,Kt,He,3)):(gt.bufferData(34963,dr,Kt),Bt.buffer.dtype=He||5121,Bt.buffer.usage=Kt,Bt.buffer.dimension=3,Bt.buffer.byteLength=dr),He=Xe,!Xe){switch(Bt.buffer.dtype){case 5121:case 5120:He=5121;break;case 5123:case 5122:He=5123;break;case 5125:case 5124:He=5125}Bt.buffer.dtype=He}Bt.type=He,Nt=cr,0>Nt&&(Nt=Bt.buffer.byteLength,He===5123?Nt>>=1:He===5125&&(Nt>>=2)),Bt.vertCount=Nt,Nt=fr,0>fr&&(Nt=4,fr=Bt.buffer.dimension,fr===1&&(Nt=0),fr===2&&(Nt=1),fr===3&&(Nt=4)),Bt.primType=Nt}function ut(Bt){mr.elementsCount--,delete bt[Bt.id],Bt.buffer.destroy(),Bt.buffer=null}var bt={},St=0,Pt={uint8:5121,uint16:5123};jt.oes_element_index_uint&&(Pt.uint32=5125),or.prototype.bind=function(){this.buffer.bind()};var Ht=[];return{create:function(Bt,Nt){function Kt(dr){if(dr)if(typeof dr=="number")fr(dr),cr.primType=4,cr.vertCount=dr|0,cr.type=5121;else{var Xe=null,He=35044,zt=-1,Rt=-1,Jt=0,sr=0;Array.isArray(dr)||Ne(dr)||u(dr)?Xe=dr:("data"in dr&&(Xe=dr.data),"usage"in dr&&(He=Le[dr.usage]),"primitive"in dr&&(zt=$e[dr.primitive]),"count"in dr&&(Rt=dr.count|0),"type"in dr&&(sr=Pt[dr.type]),"length"in dr?Jt=dr.length|0:(Jt=Rt,sr===5123||sr===5122?Jt*=2:(sr===5125||sr===5124)&&(Jt*=4))),mt(cr,Xe,He,zt,Rt,Jt,sr)}else fr(),cr.primType=4,cr.vertCount=0,cr.type=5121;return Kt}var fr=Qt.create(null,34963,!0),cr=new or(fr._buffer);return mr.elementsCount++,Kt(Bt),Kt._reglType="elements",Kt._elements=cr,Kt.subdata=function(dr,Xe){return fr.subdata(dr,Xe),Kt},Kt.destroy=function(){ut(cr)},Kt},createStream:function(Bt){var Nt=Ht.pop();return Nt||(Nt=new or(Qt.create(null,34963,!0,!1)._buffer)),mt(Nt,Bt,35040,-1,-1,0,0),Nt},destroyStream:function(Bt){Ht.push(Bt)},getElements:function(Bt){return typeof Bt=="function"&&Bt._elements instanceof or?Bt._elements:null},clear:function(){Ee(bt).forEach(ut)}}}function x(gt){for(var jt=_e.allocType(5123,gt.length),Qt=0;Qt<gt.length;++Qt)if(isNaN(gt[Qt]))jt[Qt]=65535;else if(gt[Qt]===1/0)jt[Qt]=31744;else if(gt[Qt]===-1/0)jt[Qt]=64512;else{qe[0]=gt[Qt];var mt=ht[0],mr=mt>>>31<<15,or=(mt<<1>>>24)-127,mt=mt>>13&1023;jt[Qt]=-24>or?mr:-14>or?mr+(mt+1024>>-14-or):15<or?mr+31744:mr+(or+15<<10)+mt}return jt}function A(gt){return Array.isArray(gt)||Ne(gt)}function P(gt){return"[object "+gt+"]"}function y(gt){return Array.isArray(gt)&&(gt.length===0||typeof gt[0]=="number")}function C(gt){return!!(Array.isArray(gt)&&gt.length!==0&&A(gt[0]))}function M(gt){return Object.prototype.toString.call(gt)}function s(gt){if(!gt)return!1;var jt=M(gt);return 0<=Ie.indexOf(jt)?!0:y(gt)||C(gt)||u(gt)}function _(gt,jt){gt.type===36193?(gt.data=x(jt),_e.freeType(jt)):gt.data=jt}function b(gt,jt,Qt,mr,or,mt){if(gt=typeof je[gt]<"u"?je[gt]:wt[gt]*De[jt],mt&&(gt*=6),or){for(mr=0;1<=Qt;)mr+=gt*Qt*Qt,Qt/=2;return mr}return gt*Qt*mr}function k(gt,jt,Qt,mr,or,mt,ut){function bt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function St(yr,qr){yr.internalformat=qr.internalformat,yr.format=qr.format,yr.type=qr.type,yr.compressed=qr.compressed,yr.premultiplyAlpha=qr.premultiplyAlpha,yr.flipY=qr.flipY,yr.unpackAlignment=qr.unpackAlignment,yr.colorSpace=qr.colorSpace,yr.width=qr.width,yr.height=qr.height,yr.channels=qr.channels}function Pt(yr,qr){if(typeof qr=="object"&&qr){"premultiplyAlpha"in qr&&(yr.premultiplyAlpha=qr.premultiplyAlpha),"flipY"in qr&&(yr.flipY=qr.flipY),"alignment"in qr&&(yr.unpackAlignment=qr.alignment),"colorSpace"in qr&&(yr.colorSpace=nn[qr.colorSpace]),"type"in qr&&(yr.type=en[qr.type]);var Kr=yr.width,hn=yr.height,zn=yr.channels,xn=!1;"shape"in qr?(Kr=qr.shape[0],hn=qr.shape[1],qr.shape.length===3&&(zn=qr.shape[2],xn=!0)):("radius"in qr&&(Kr=hn=qr.radius),"width"in qr&&(Kr=qr.width),"height"in qr&&(hn=qr.height),"channels"in qr&&(zn=qr.channels,xn=!0)),yr.width=Kr|0,yr.height=hn|0,yr.channels=zn|0,Kr=!1,"format"in qr&&(Kr=qr.format,hn=yr.internalformat=An[Kr],yr.format=Ln[hn],Kr in en&&!("type"in qr)&&(yr.type=en[Kr]),Kr in wn&&(yr.compressed=!0),Kr=!0),!xn&&Kr?yr.channels=wt[yr.format]:xn&&!Kr&&yr.channels!==pt[yr.format]&&(yr.format=yr.internalformat=pt[yr.channels])}}function Ht(yr){gt.pixelStorei(37440,yr.flipY),gt.pixelStorei(37441,yr.premultiplyAlpha),gt.pixelStorei(37443,yr.colorSpace),gt.pixelStorei(3317,yr.unpackAlignment)}function Bt(){bt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Nt(yr,qr){var Kr=null;if(s(qr)?Kr=qr:qr&&(Pt(yr,qr),"x"in qr&&(yr.xOffset=qr.x|0),"y"in qr&&(yr.yOffset=qr.y|0),s(qr.data)&&(Kr=qr.data)),qr.copy){var hn=or.viewportWidth,zn=or.viewportHeight;yr.width=yr.width||hn-yr.xOffset,yr.height=yr.height||zn-yr.yOffset,yr.needsCopy=!0}else if(!Kr)yr.width=yr.width||1,yr.height=yr.height||1,yr.channels=yr.channels||4;else if(Ne(Kr))yr.channels=yr.channels||4,yr.data=Kr,"type"in qr||yr.type!==5121||(yr.type=Ce[Object.prototype.toString.call(Kr)]|0);else if(y(Kr)){switch(yr.channels=yr.channels||4,hn=Kr,zn=hn.length,yr.type){case 5121:case 5123:case 5125:case 5126:zn=_e.allocType(yr.type,zn),zn.set(hn),yr.data=zn;break;case 36193:yr.data=x(hn)}yr.alignment=1,yr.needsFree=!0}else if(u(Kr)){hn=Kr.data,Array.isArray(hn)||yr.type!==5121||(yr.type=Ce[Object.prototype.toString.call(hn)]|0);var zn=Kr.shape,xn=Kr.stride,Tn,On,Jn,hi;zn.length===3?(Jn=zn[2],hi=xn[2]):hi=Jn=1,Tn=zn[0],On=zn[1],zn=xn[0],xn=xn[1],yr.alignment=1,yr.width=Tn,yr.height=On,yr.channels=Jn,yr.format=yr.internalformat=pt[Jn],yr.needsFree=!0,Tn=hi,Kr=Kr.offset,Jn=yr.width,hi=yr.height,On=yr.channels;for(var Ri=_e.allocType(yr.type===36193?5126:yr.type,Jn*hi*On),Er=0,Or=0;Or<hi;++Or)for(var Ar=0;Ar<Jn;++Ar)for(var Fr=0;Fr<On;++Fr)Ri[Er++]=hn[zn*Ar+xn*Or+Tn*Fr+Kr];_(yr,Ri)}else if(M(Kr)===Et||M(Kr)===nt||M(Kr)===Fe)M(Kr)===Et||M(Kr)===nt?yr.element=Kr:yr.element=Kr.canvas,yr.width=yr.element.width,yr.height=yr.element.height,yr.channels=4;else if(M(Kr)===We)yr.element=Kr,yr.width=Kr.width,yr.height=Kr.height,yr.channels=4;else if(M(Kr)===Ze)yr.element=Kr,yr.width=Kr.naturalWidth,yr.height=Kr.naturalHeight,yr.channels=4;else if(M(Kr)===Ye)yr.element=Kr,yr.width=Kr.videoWidth,yr.height=Kr.videoHeight,yr.channels=4;else if(C(Kr)){for(hn=yr.width||Kr[0].length,zn=yr.height||Kr.length,xn=yr.channels,xn=A(Kr[0][0])?xn||Kr[0][0].length:xn||1,Tn=ze.shape(Kr),Jn=1,hi=0;hi<Tn.length;++hi)Jn*=Tn[hi];Jn=_e.allocType(yr.type===36193?5126:yr.type,Jn),ze.flatten(Kr,Tn,"",Jn),_(yr,Jn),yr.alignment=1,yr.width=hn,yr.height=zn,yr.channels=xn,yr.format=yr.internalformat=pt[xn],yr.needsFree=!0}}function Kt(yr,qr,Kr,hn,zn){var xn=yr.element,Tn=yr.data,On=yr.internalformat,Jn=yr.format,hi=yr.type,Ri=yr.width,Er=yr.height;Ht(yr),xn?gt.texSubImage2D(qr,zn,Kr,hn,Jn,hi,xn):yr.compressed?gt.compressedTexSubImage2D(qr,zn,Kr,hn,On,Ri,Er,Tn):yr.needsCopy?(mr(),gt.copyTexSubImage2D(qr,zn,Kr,hn,yr.xOffset,yr.yOffset,Ri,Er)):gt.texSubImage2D(qr,zn,Kr,hn,Ri,Er,Jn,hi,Tn)}function fr(){return Un.pop()||new Bt}function cr(yr){yr.needsFree&&_e.freeType(yr.data),Bt.call(yr),Un.push(yr)}function dr(){bt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Xe(yr,qr,Kr){var hn=yr.images[0]=fr();yr.mipmask=1,hn.width=yr.width=qr,hn.height=yr.height=Kr,hn.channels=yr.channels=4}function He(yr,qr){var Kr=null;if(s(qr))Kr=yr.images[0]=fr(),St(Kr,yr),Nt(Kr,qr),yr.mipmask=1;else if(Pt(yr,qr),Array.isArray(qr.mipmap))for(var hn=qr.mipmap,zn=0;zn<hn.length;++zn)Kr=yr.images[zn]=fr(),St(Kr,yr),Kr.width>>=zn,Kr.height>>=zn,Nt(Kr,hn[zn]),yr.mipmask|=1<<zn;else Kr=yr.images[0]=fr(),St(Kr,yr),Nt(Kr,qr),yr.mipmask=1;St(yr,yr.images[0])}function zt(yr,qr){for(var Kr=yr.images,hn=0;hn<Kr.length&&Kr[hn];++hn){var zn=Kr[hn],xn=qr,Tn=hn,On=zn.element,Jn=zn.data,hi=zn.internalformat,Ri=zn.format,Er=zn.type,Or=zn.width,Ar=zn.height;Ht(zn),On?gt.texImage2D(xn,Tn,Ri,Ri,Er,On):zn.compressed?gt.compressedTexImage2D(xn,Tn,hi,Or,Ar,0,Jn):zn.needsCopy?(mr(),gt.copyTexImage2D(xn,Tn,Ri,zn.xOffset,zn.yOffset,Or,Ar,0)):gt.texImage2D(xn,Tn,Ri,Or,Ar,0,Ri,Er,Jn||null)}}function Rt(){var yr=ai.pop()||new dr;bt.call(yr);for(var qr=yr.mipmask=0;16>qr;++qr)yr.images[qr]=null;return yr}function Jt(yr){for(var qr=yr.images,Kr=0;Kr<qr.length;++Kr)qr[Kr]&&cr(qr[Kr]),qr[Kr]=null;ai.push(yr)}function sr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function ur(yr,qr){"min"in qr&&(yr.minFilter=Rr[qr.min],0<=vt.indexOf(yr.minFilter)&&!("faces"in qr)&&(yr.genMipmaps=!0)),"mag"in qr&&(yr.magFilter=_r[qr.mag]);var Kr=yr.wrapS,hn=yr.wrapT;if("wrap"in qr){var zn=qr.wrap;typeof zn=="string"?Kr=hn=Vr[zn]:Array.isArray(zn)&&(Kr=Vr[zn[0]],hn=Vr[zn[1]])}else"wrapS"in qr&&(Kr=Vr[qr.wrapS]),"wrapT"in qr&&(hn=Vr[qr.wrapT]);if(yr.wrapS=Kr,yr.wrapT=hn,"anisotropic"in qr&&(yr.anisotropic=qr.anisotropic),"mipmap"in qr){switch(Kr=!1,typeof qr.mipmap){case"string":yr.mipmapHint=vr[qr.mipmap],Kr=yr.genMipmaps=!0;break;case"boolean":Kr=yr.genMipmaps=qr.mipmap;break;case"object":yr.genMipmaps=!1,Kr=!0}!Kr||"min"in qr||(yr.minFilter=9984)}}function er(yr,qr){gt.texParameteri(qr,10241,yr.minFilter),gt.texParameteri(qr,10240,yr.magFilter),gt.texParameteri(qr,10242,yr.wrapS),gt.texParameteri(qr,10243,yr.wrapT),jt.ext_texture_filter_anisotropic&&gt.texParameteri(qr,34046,yr.anisotropic),yr.genMipmaps&&(gt.hint(33170,yr.mipmapHint),gt.generateMipmap(qr))}function Ft(yr){bt.call(this),this.mipmask=0,this.internalformat=6408,this.id=yi++,this.refCount=1,this.target=yr,this.texture=gt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new sr,ut.profile&&(this.stats={size:0})}function ir(yr){gt.activeTexture(33984),gt.bindTexture(yr.target,yr.texture)}function hr(){var yr=Kn[0];yr?gt.bindTexture(yr.target,yr.texture):gt.bindTexture(3553,null)}function xr(yr){var qr=yr.texture,Kr=yr.unit,hn=yr.target;0<=Kr&&(gt.activeTexture(33984+Kr),gt.bindTexture(hn,null),Kn[Kr]=null),gt.deleteTexture(qr),yr.texture=null,yr.params=null,yr.pixels=null,yr.refCount=0,delete bi[yr.id],mt.textureCount--}var vr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Vr={repeat:10497,clamp:33071,mirror:33648},_r={nearest:9728,linear:9729},Rr=re({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},_r),nn={none:0,browser:37444},en={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},An={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},wn={};jt.ext_srgb&&(An.srgb=35904,An.srgba=35906),jt.oes_texture_float&&(en.float32=en.float=5126),jt.oes_texture_half_float&&(en.float16=en["half float"]=36193),jt.webgl_depth_texture&&(re(An,{depth:6402,"depth stencil":34041}),re(en,{uint16:5123,uint32:5125,"depth stencil":34042})),jt.webgl_compressed_texture_s3tc&&re(wn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),jt.webgl_compressed_texture_atc&&re(wn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),jt.webgl_compressed_texture_pvrtc&&re(wn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),jt.webgl_compressed_texture_etc1&&(wn["rgb etc1"]=36196);var Tr=Array.prototype.slice.call(gt.getParameter(34467));Object.keys(wn).forEach(function(yr){var qr=wn[yr];0<=Tr.indexOf(qr)&&(An[yr]=qr)});var kr=Object.keys(An);Qt.textureFormats=kr;var Wr=[];Object.keys(An).forEach(function(yr){Wr[An[yr]]=yr});var zr=[];Object.keys(en).forEach(function(yr){zr[en[yr]]=yr});var sn=[];Object.keys(_r).forEach(function(yr){sn[_r[yr]]=yr});var un=[];Object.keys(Rr).forEach(function(yr){un[Rr[yr]]=yr});var Mn=[];Object.keys(Vr).forEach(function(yr){Mn[Vr[yr]]=yr});var Ln=kr.reduce(function(yr,qr){var Kr=An[qr];return Kr===6409||Kr===6406||Kr===6409||Kr===6410||Kr===6402||Kr===34041||jt.ext_srgb&&(Kr===35904||Kr===35906)?yr[Kr]=Kr:Kr===32855||0<=qr.indexOf("rgba")?yr[Kr]=6408:yr[Kr]=6407,yr},{}),Un=[],ai=[],yi=0,bi={},Hn=Qt.maxTextureUnits,Kn=Array(Hn).map(function(){return null});return re(Ft.prototype,{bind:function(){this.bindCount+=1;var yr=this.unit;if(0>yr){for(var qr=0;qr<Hn;++qr){var Kr=Kn[qr];if(Kr){if(0<Kr.bindCount)continue;Kr.unit=-1}Kn[qr]=this,yr=qr;break}ut.profile&&mt.maxTextureUnits<yr+1&&(mt.maxTextureUnits=yr+1),this.unit=yr,gt.activeTexture(33984+yr),gt.bindTexture(this.target,this.texture)}return yr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&xr(this)}}),ut.profile&&(mt.getTotalTextureSize=function(){var yr=0;return Object.keys(bi).forEach(function(qr){yr+=bi[qr].stats.size}),yr}),{create2D:function(yr,qr){function Kr(zn,xn){var Tn=hn.texInfo;sr.call(Tn);var On=Rt();return typeof zn=="number"?typeof xn=="number"?Xe(On,zn|0,xn|0):Xe(On,zn|0,zn|0):zn?(ur(Tn,zn),He(On,zn)):Xe(On,1,1),Tn.genMipmaps&&(On.mipmask=(On.width<<1)-1),hn.mipmask=On.mipmask,St(hn,On),hn.internalformat=On.internalformat,Kr.width=On.width,Kr.height=On.height,ir(hn),zt(On,3553),er(Tn,3553),hr(),Jt(On),ut.profile&&(hn.stats.size=b(hn.internalformat,hn.type,On.width,On.height,Tn.genMipmaps,!1)),Kr.format=Wr[hn.internalformat],Kr.type=zr[hn.type],Kr.mag=sn[Tn.magFilter],Kr.min=un[Tn.minFilter],Kr.wrapS=Mn[Tn.wrapS],Kr.wrapT=Mn[Tn.wrapT],Kr}var hn=new Ft(3553);return bi[hn.id]=hn,mt.textureCount++,Kr(yr,qr),Kr.subimage=function(zn,xn,Tn,On){xn|=0,Tn|=0,On|=0;var Jn=fr();return St(Jn,hn),Jn.width=0,Jn.height=0,Nt(Jn,zn),Jn.width=Jn.width||(hn.width>>On)-xn,Jn.height=Jn.height||(hn.height>>On)-Tn,ir(hn),Kt(Jn,3553,xn,Tn,On),hr(),cr(Jn),Kr},Kr.resize=function(zn,xn){var Tn=zn|0,On=xn|0||Tn;if(Tn===hn.width&&On===hn.height)return Kr;Kr.width=hn.width=Tn,Kr.height=hn.height=On,ir(hn);for(var Jn=0;hn.mipmask>>Jn;++Jn){var hi=Tn>>Jn,Ri=On>>Jn;if(!hi||!Ri)break;gt.texImage2D(3553,Jn,hn.format,hi,Ri,0,hn.format,hn.type,null)}return hr(),ut.profile&&(hn.stats.size=b(hn.internalformat,hn.type,Tn,On,!1,!1)),Kr},Kr._reglType="texture2d",Kr._texture=hn,ut.profile&&(Kr.stats=hn.stats),Kr.destroy=function(){hn.decRef()},Kr},createCube:function(yr,qr,Kr,hn,zn,xn){function Tn(hi,Ri,Er,Or,Ar,Fr){var yn,Pn=On.texInfo;for(sr.call(Pn),yn=0;6>yn;++yn)Jn[yn]=Rt();if(typeof hi=="number"||!hi)for(hi=hi|0||1,yn=0;6>yn;++yn)Xe(Jn[yn],hi,hi);else if(typeof hi=="object")if(Ri)He(Jn[0],hi),He(Jn[1],Ri),He(Jn[2],Er),He(Jn[3],Or),He(Jn[4],Ar),He(Jn[5],Fr);else if(ur(Pn,hi),Pt(On,hi),"faces"in hi)for(hi=hi.faces,yn=0;6>yn;++yn)St(Jn[yn],On),He(Jn[yn],hi[yn]);else for(yn=0;6>yn;++yn)He(Jn[yn],hi);for(St(On,Jn[0]),On.mipmask=Pn.genMipmaps?(Jn[0].width<<1)-1:Jn[0].mipmask,On.internalformat=Jn[0].internalformat,Tn.width=Jn[0].width,Tn.height=Jn[0].height,ir(On),yn=0;6>yn;++yn)zt(Jn[yn],34069+yn);for(er(Pn,34067),hr(),ut.profile&&(On.stats.size=b(On.internalformat,On.type,Tn.width,Tn.height,Pn.genMipmaps,!0)),Tn.format=Wr[On.internalformat],Tn.type=zr[On.type],Tn.mag=sn[Pn.magFilter],Tn.min=un[Pn.minFilter],Tn.wrapS=Mn[Pn.wrapS],Tn.wrapT=Mn[Pn.wrapT],yn=0;6>yn;++yn)Jt(Jn[yn]);return Tn}var On=new Ft(34067);bi[On.id]=On,mt.cubeCount++;var Jn=Array(6);return Tn(yr,qr,Kr,hn,zn,xn),Tn.subimage=function(hi,Ri,Er,Or,Ar){Er|=0,Or|=0,Ar|=0;var Fr=fr();return St(Fr,On),Fr.width=0,Fr.height=0,Nt(Fr,Ri),Fr.width=Fr.width||(On.width>>Ar)-Er,Fr.height=Fr.height||(On.height>>Ar)-Or,ir(On),Kt(Fr,34069+hi,Er,Or,Ar),hr(),cr(Fr),Tn},Tn.resize=function(hi){if(hi|=0,hi!==On.width){Tn.width=On.width=hi,Tn.height=On.height=hi,ir(On);for(var Ri=0;6>Ri;++Ri)for(var Er=0;On.mipmask>>Er;++Er)gt.texImage2D(34069+Ri,Er,On.format,hi>>Er,hi>>Er,0,On.format,On.type,null);return hr(),ut.profile&&(On.stats.size=b(On.internalformat,On.type,Tn.width,Tn.height,!1,!0)),Tn}},Tn._reglType="textureCube",Tn._texture=On,ut.profile&&(Tn.stats=On.stats),Tn.destroy=function(){On.decRef()},Tn},clear:function(){for(var yr=0;yr<Hn;++yr)gt.activeTexture(33984+yr),gt.bindTexture(3553,null),Kn[yr]=null;Ee(bi).forEach(xr),mt.cubeCount=0,mt.textureCount=0},getTexture:function(yr){return null},restore:function(){for(var yr=0;yr<Hn;++yr){var qr=Kn[yr];qr&&(qr.bindCount=0,qr.unit=-1,Kn[yr]=null)}Ee(bi).forEach(function(Kr){Kr.texture=gt.createTexture(),gt.bindTexture(Kr.target,Kr.texture);for(var hn=0;32>hn;++hn)if(Kr.mipmask&1<<hn)if(Kr.target===3553)gt.texImage2D(3553,hn,Kr.internalformat,Kr.width>>hn,Kr.height>>hn,0,Kr.internalformat,Kr.type,null);else for(var zn=0;6>zn;++zn)gt.texImage2D(34069+zn,hn,Kr.internalformat,Kr.width>>hn,Kr.height>>hn,0,Kr.internalformat,Kr.type,null);er(Kr.texInfo,Kr.target)})},refresh:function(){for(var yr=0;yr<Hn;++yr){var qr=Kn[yr];qr&&(qr.bindCount=0,qr.unit=-1,Kn[yr]=null),gt.activeTexture(33984+yr),gt.bindTexture(3553,null),gt.bindTexture(34067,null)}}}}function D(gt,jt,Qt,mr,or,mt){function ut(Ft,ir,hr){this.target=Ft,this.texture=ir,this.renderbuffer=hr;var xr=Ft=0;ir?(Ft=ir.width,xr=ir.height):hr&&(Ft=hr.width,xr=hr.height),this.width=Ft,this.height=xr}function bt(Ft){Ft&&(Ft.texture&&Ft.texture._texture.decRef(),Ft.renderbuffer&&Ft.renderbuffer._renderbuffer.decRef())}function St(Ft,ir,hr){Ft&&(Ft.texture?Ft.texture._texture.refCount+=1:Ft.renderbuffer._renderbuffer.refCount+=1)}function Pt(Ft,ir){ir&&(ir.texture?gt.framebufferTexture2D(36160,Ft,ir.target,ir.texture._texture.texture,0):gt.framebufferRenderbuffer(36160,Ft,36161,ir.renderbuffer._renderbuffer.renderbuffer))}function Ht(Ft){var ir=3553,hr=null,xr=null,vr=Ft;return typeof Ft=="object"&&(vr=Ft.data,"target"in Ft&&(ir=Ft.target|0)),Ft=vr._reglType,Ft==="texture2d"||Ft==="textureCube"?hr=vr:Ft==="renderbuffer"&&(xr=vr,ir=36161),new ut(ir,hr,xr)}function Bt(Ft,ir,hr,xr,vr){return hr?(Ft=mr.create2D({width:Ft,height:ir,format:xr,type:vr}),Ft._texture.refCount=0,new ut(3553,Ft,null)):(Ft=or.create({width:Ft,height:ir,format:xr}),Ft._renderbuffer.refCount=0,new ut(36161,null,Ft))}function Nt(Ft){return Ft&&(Ft.texture||Ft.renderbuffer)}function Kt(Ft,ir,hr){Ft&&(Ft.texture?Ft.texture.resize(ir,hr):Ft.renderbuffer&&Ft.renderbuffer.resize(ir,hr),Ft.width=ir,Ft.height=hr)}function fr(){this.id=ur++,er[this.id]=this,this.framebuffer=gt.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function cr(Ft){Ft.colorAttachments.forEach(bt),bt(Ft.depthAttachment),bt(Ft.stencilAttachment),bt(Ft.depthStencilAttachment)}function dr(Ft){gt.deleteFramebuffer(Ft.framebuffer),Ft.framebuffer=null,mt.framebufferCount--,delete er[Ft.id]}function Xe(Ft){var ir;gt.bindFramebuffer(36160,Ft.framebuffer);var hr=Ft.colorAttachments;for(ir=0;ir<hr.length;++ir)Pt(36064+ir,hr[ir]);for(ir=hr.length;ir<Qt.maxColorAttachments;++ir)gt.framebufferTexture2D(36160,36064+ir,3553,null,0);gt.framebufferTexture2D(36160,33306,3553,null,0),gt.framebufferTexture2D(36160,36096,3553,null,0),gt.framebufferTexture2D(36160,36128,3553,null,0),Pt(36096,Ft.depthAttachment),Pt(36128,Ft.stencilAttachment),Pt(33306,Ft.depthStencilAttachment),gt.checkFramebufferStatus(36160),gt.isContextLost(),gt.bindFramebuffer(36160,zt.next?zt.next.framebuffer:null),zt.cur=zt.next,gt.getError()}function He(Ft,ir){function hr(vr,Vr){var _r,Rr=0,nn=0,en=!0,An=!0;_r=null;var wn=!0,Tr="rgba",kr="uint8",Wr=1,zr=null,sn=null,un=null,Mn=!1;typeof vr=="number"?(Rr=vr|0,nn=Vr|0||Rr):vr?("shape"in vr?(nn=vr.shape,Rr=nn[0],nn=nn[1]):("radius"in vr&&(Rr=nn=vr.radius),"width"in vr&&(Rr=vr.width),"height"in vr&&(nn=vr.height)),("color"in vr||"colors"in vr)&&(_r=vr.color||vr.colors),_r||("colorCount"in vr&&(Wr=vr.colorCount|0),"colorTexture"in vr&&(wn=!!vr.colorTexture,Tr="rgba4"),"colorType"in vr&&(kr=vr.colorType,!wn)&&(kr==="half float"||kr==="float16"?Tr="rgba16f":(kr==="float"||kr==="float32")&&(Tr="rgba32f")),"colorFormat"in vr&&(Tr=vr.colorFormat,0<=Rt.indexOf(Tr)?wn=!0:0<=Jt.indexOf(Tr)&&(wn=!1))),("depthTexture"in vr||"depthStencilTexture"in vr)&&(Mn=!(!vr.depthTexture&&!vr.depthStencilTexture)),"depth"in vr&&(typeof vr.depth=="boolean"?en=vr.depth:(zr=vr.depth,An=!1)),"stencil"in vr&&(typeof vr.stencil=="boolean"?An=vr.stencil:(sn=vr.stencil,en=!1)),"depthStencil"in vr&&(typeof vr.depthStencil=="boolean"?en=An=vr.depthStencil:(un=vr.depthStencil,An=en=!1))):Rr=nn=1;var Ln=null,Un=null,ai=null,yi=null;if(Array.isArray(_r))Ln=_r.map(Ht);else if(_r)Ln=[Ht(_r)];else for(Ln=Array(Wr),_r=0;_r<Wr;++_r)Ln[_r]=Bt(Rr,nn,wn,Tr,kr);for(Rr=Rr||Ln[0].width,nn=nn||Ln[0].height,zr?Un=Ht(zr):en&&!An&&(Un=Bt(Rr,nn,Mn,"depth","uint32")),sn?ai=Ht(sn):An&&!en&&(ai=Bt(Rr,nn,!1,"stencil","uint8")),un?yi=Ht(un):!zr&&!sn&&An&&en&&(yi=Bt(Rr,nn,Mn,"depth stencil","depth stencil")),en=null,_r=0;_r<Ln.length;++_r)St(Ln[_r]),Ln[_r]&&Ln[_r].texture&&(An=be[Ln[_r].texture._texture.format]*Ue[Ln[_r].texture._texture.type],en===null&&(en=An));return St(Un),St(ai),St(yi),cr(xr),xr.width=Rr,xr.height=nn,xr.colorAttachments=Ln,xr.depthAttachment=Un,xr.stencilAttachment=ai,xr.depthStencilAttachment=yi,hr.color=Ln.map(Nt),hr.depth=Nt(Un),hr.stencil=Nt(ai),hr.depthStencil=Nt(yi),hr.width=xr.width,hr.height=xr.height,Xe(xr),hr}var xr=new fr;return mt.framebufferCount++,hr(Ft,ir),re(hr,{resize:function(vr,Vr){var _r=Math.max(vr|0,1),Rr=Math.max(Vr|0||_r,1);if(_r===xr.width&&Rr===xr.height)return hr;for(var nn=xr.colorAttachments,en=0;en<nn.length;++en)Kt(nn[en],_r,Rr);return Kt(xr.depthAttachment,_r,Rr),Kt(xr.stencilAttachment,_r,Rr),Kt(xr.depthStencilAttachment,_r,Rr),xr.width=hr.width=_r,xr.height=hr.height=Rr,Xe(xr),hr},_reglType:"framebuffer",_framebuffer:xr,destroy:function(){dr(xr),cr(xr)},use:function(vr){zt.setFBO({framebuffer:hr},vr)}})}var zt={cur:null,next:null,dirty:!1,setFBO:null},Rt=["rgba"],Jt=["rgba4","rgb565","rgb5 a1"];jt.ext_srgb&&Jt.push("srgba"),jt.ext_color_buffer_half_float&&Jt.push("rgba16f","rgb16f"),jt.webgl_color_buffer_float&&Jt.push("rgba32f");var sr=["uint8"];jt.oes_texture_half_float&&sr.push("half float","float16"),jt.oes_texture_float&&sr.push("float","float32");var ur=0,er={};return re(zt,{getFramebuffer:function(Ft){return typeof Ft=="function"&&Ft._reglType==="framebuffer"&&(Ft=Ft._framebuffer,Ft instanceof fr)?Ft:null},create:He,createCube:function(Ft){function ir(xr){var vr,Vr={color:null},_r=0,Rr=null;vr="rgba";var nn="uint8",en=1;if(typeof xr=="number"?_r=xr|0:xr?("shape"in xr?_r=xr.shape[0]:("radius"in xr&&(_r=xr.radius|0),"width"in xr?_r=xr.width|0:"height"in xr&&(_r=xr.height|0)),("color"in xr||"colors"in xr)&&(Rr=xr.color||xr.colors),Rr||("colorCount"in xr&&(en=xr.colorCount|0),"colorType"in xr&&(nn=xr.colorType),"colorFormat"in xr&&(vr=xr.colorFormat)),"depth"in xr&&(Vr.depth=xr.depth),"stencil"in xr&&(Vr.stencil=xr.stencil),"depthStencil"in xr&&(Vr.depthStencil=xr.depthStencil)):_r=1,Rr)if(Array.isArray(Rr))for(xr=[],vr=0;vr<Rr.length;++vr)xr[vr]=Rr[vr];else xr=[Rr];else for(xr=Array(en),Rr={radius:_r,format:vr,type:nn},vr=0;vr<en;++vr)xr[vr]=mr.createCube(Rr);for(Vr.color=Array(xr.length),vr=0;vr<xr.length;++vr)en=xr[vr],_r=_r||en.width,Vr.color[vr]={target:34069,data:xr[vr]};for(vr=0;6>vr;++vr){for(en=0;en<xr.length;++en)Vr.color[en].target=34069+vr;0<vr&&(Vr.depth=hr[0].depth,Vr.stencil=hr[0].stencil,Vr.depthStencil=hr[0].depthStencil),hr[vr]?hr[vr](Vr):hr[vr]=He(Vr)}return re(ir,{width:_r,height:_r,color:xr})}var hr=Array(6);return ir(Ft),re(ir,{faces:hr,resize:function(xr){var vr=xr|0;if(vr===ir.width)return ir;var Vr=ir.color;for(xr=0;xr<Vr.length;++xr)Vr[xr].resize(vr);for(xr=0;6>xr;++xr)hr[xr].resize(vr);return ir.width=ir.height=vr,ir},_reglType:"framebufferCube",destroy:function(){hr.forEach(function(xr){xr.destroy()})}})},clear:function(){Ee(er).forEach(dr)},restore:function(){zt.cur=null,zt.next=null,zt.dirty=!0,Ee(er).forEach(function(Ft){Ft.framebuffer=gt.createFramebuffer(),Xe(Ft)})}})}function V(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(gt,jt,Qt,mr,or,mt,ut){function bt(Xe){if(Xe!==dr.currentVAO){var He=jt.oes_vertex_array_object;Xe?He.bindVertexArrayOES(Xe.vao):He.bindVertexArrayOES(null),dr.currentVAO=Xe}}function St(Xe){if(Xe!==dr.currentVAO){if(Xe)Xe.bindAttrs();else{for(var He=jt.angle_instanced_arrays,zt=0;zt<Kt.length;++zt){var Rt=Kt[zt];Rt.buffer?(gt.enableVertexAttribArray(zt),Rt.buffer.bind(),gt.vertexAttribPointer(zt,Rt.size,Rt.type,Rt.normalized,Rt.stride,Rt.offfset),He&&Rt.divisor&&He.vertexAttribDivisorANGLE(zt,Rt.divisor)):(gt.disableVertexAttribArray(zt),gt.vertexAttrib4f(zt,Rt.x,Rt.y,Rt.z,Rt.w))}ut.elements?gt.bindBuffer(34963,ut.elements.buffer.buffer):gt.bindBuffer(34963,null)}dr.currentVAO=Xe}}function Pt(){Ee(cr).forEach(function(Xe){Xe.destroy()})}function Ht(){this.id=++fr,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Xe=jt.oes_vertex_array_object;this.vao=Xe?Xe.createVertexArrayOES():null,cr[this.id]=this,this.buffers=[]}function Bt(){jt.oes_vertex_array_object&&Ee(cr).forEach(function(Xe){Xe.refresh()})}var Nt=Qt.maxAttributes,Kt=Array(Nt);for(Qt=0;Qt<Nt;++Qt)Kt[Qt]=new V;var fr=0,cr={},dr={Record:V,scope:{},state:Kt,currentVAO:null,targetVAO:null,restore:jt.oes_vertex_array_object?Bt:function(){},createVAO:function(Xe){function He(Rt){var Jt;Array.isArray(Rt)?(Jt=Rt,zt.elements&&zt.ownsElements&&zt.elements.destroy(),zt.elements=null,zt.ownsElements=!1,zt.offset=0,zt.count=0,zt.instances=-1,zt.primitive=4):(Rt.elements?(Jt=Rt.elements,zt.ownsElements?(typeof Jt=="function"&&Jt._reglType==="elements"?zt.elements.destroy():zt.elements(Jt),zt.ownsElements=!1):mt.getElements(Rt.elements)?(zt.elements=Rt.elements,zt.ownsElements=!1):(zt.elements=mt.create(Rt.elements),zt.ownsElements=!0)):(zt.elements=null,zt.ownsElements=!1),Jt=Rt.attributes,zt.offset=0,zt.count=-1,zt.instances=-1,zt.primitive=4,zt.elements&&(zt.count=zt.elements._elements.vertCount,zt.primitive=zt.elements._elements.primType),"offset"in Rt&&(zt.offset=Rt.offset|0),"count"in Rt&&(zt.count=Rt.count|0),"instances"in Rt&&(zt.instances=Rt.instances|0),"primitive"in Rt&&(zt.primitive=$e[Rt.primitive])),Rt={};var sr=zt.attributes;sr.length=Jt.length;for(var ur=0;ur<Jt.length;++ur){var er=Jt[ur],Ft=sr[ur]=new V,ir=er.data||er;if(Array.isArray(ir)||Ne(ir)||u(ir)){var hr;zt.buffers[ur]&&(hr=zt.buffers[ur],Ne(ir)&&hr._buffer.byteLength>=ir.byteLength?hr.subdata(ir):(hr.destroy(),zt.buffers[ur]=null)),zt.buffers[ur]||(hr=zt.buffers[ur]=or.create(er,34962,!1,!0)),Ft.buffer=or.getBuffer(hr),Ft.size=Ft.buffer.dimension|0,Ft.normalized=!1,Ft.type=Ft.buffer.dtype,Ft.offset=0,Ft.stride=0,Ft.divisor=0,Ft.state=1,Rt[ur]=1}else or.getBuffer(er)?(Ft.buffer=or.getBuffer(er),Ft.size=Ft.buffer.dimension|0,Ft.normalized=!1,Ft.type=Ft.buffer.dtype,Ft.offset=0,Ft.stride=0,Ft.divisor=0,Ft.state=1):or.getBuffer(er.buffer)?(Ft.buffer=or.getBuffer(er.buffer),Ft.size=(+er.size||Ft.buffer.dimension)|0,Ft.normalized=!!er.normalized||!1,Ft.type="type"in er?Oe[er.type]:Ft.buffer.dtype,Ft.offset=(er.offset||0)|0,Ft.stride=(er.stride||0)|0,Ft.divisor=(er.divisor||0)|0,Ft.state=1):"x"in er&&(Ft.x=+er.x||0,Ft.y=+er.y||0,Ft.z=+er.z||0,Ft.w=+er.w||0,Ft.state=2)}for(hr=0;hr<zt.buffers.length;++hr)!Rt[hr]&&zt.buffers[hr]&&(zt.buffers[hr].destroy(),zt.buffers[hr]=null);return zt.refresh(),He}var zt=new Ht;return mr.vaoCount+=1,He.destroy=function(){for(var Rt=0;Rt<zt.buffers.length;++Rt)zt.buffers[Rt]&&zt.buffers[Rt].destroy();zt.buffers.length=0,zt.ownsElements&&(zt.elements.destroy(),zt.elements=null,zt.ownsElements=!1),zt.destroy()},He._vao=zt,He._reglType="vao",He(Xe)},getVAO:function(Xe){return typeof Xe=="function"&&Xe._vao?Xe._vao:null},destroyBuffer:function(Xe){for(var He=0;He<Kt.length;++He){var zt=Kt[He];zt.buffer===Xe&&(gt.disableVertexAttribArray(He),zt.buffer=null)}},setVAO:jt.oes_vertex_array_object?bt:St,clear:jt.oes_vertex_array_object?Pt:function(){}};return Ht.prototype.bindAttrs=function(){for(var Xe=jt.angle_instanced_arrays,He=this.attributes,zt=0;zt<He.length;++zt){var Rt=He[zt];Rt.buffer?(gt.enableVertexAttribArray(zt),gt.bindBuffer(34962,Rt.buffer.buffer),gt.vertexAttribPointer(zt,Rt.size,Rt.type,Rt.normalized,Rt.stride,Rt.offset),Xe&&Rt.divisor&&Xe.vertexAttribDivisorANGLE(zt,Rt.divisor)):(gt.disableVertexAttribArray(zt),gt.vertexAttrib4f(zt,Rt.x,Rt.y,Rt.z,Rt.w))}for(Xe=He.length;Xe<Nt;++Xe)gt.disableVertexAttribArray(Xe);(Xe=mt.getElements(this.elements))?gt.bindBuffer(34963,Xe.buffer.buffer):gt.bindBuffer(34963,null)},Ht.prototype.refresh=function(){var Xe=jt.oes_vertex_array_object;Xe&&(Xe.bindVertexArrayOES(this.vao),this.bindAttrs(),dr.currentVAO=null,Xe.bindVertexArrayOES(null))},Ht.prototype.destroy=function(){if(this.vao){var Xe=jt.oes_vertex_array_object;this===dr.currentVAO&&(dr.currentVAO=null,Xe.bindVertexArrayOES(null)),Xe.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),cr[this.id]&&(delete cr[this.id],--mr.vaoCount)},dr}function N(gt,jt,Qt,mr){function or(fr,cr,dr,Xe){this.name=fr,this.id=cr,this.location=dr,this.info=Xe}function mt(fr,cr){for(var dr=0;dr<fr.length;++dr)if(fr[dr].id===cr.id){fr[dr].location=cr.location;return}fr.push(cr)}function ut(fr,cr,dr){dr=fr===35632?Pt:Ht;var Xe=dr[cr];if(!Xe){var He=jt.str(cr),Xe=gt.createShader(fr);gt.shaderSource(Xe,He),gt.compileShader(Xe),dr[cr]=Xe}return Xe}function bt(fr,cr){this.id=Kt++,this.fragId=fr,this.vertId=cr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,mr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function St(fr,cr,dr){var Xe;Xe=ut(35632,fr.fragId);var He=ut(35633,fr.vertId);if(cr=fr.program=gt.createProgram(),gt.attachShader(cr,Xe),gt.attachShader(cr,He),dr)for(Xe=0;Xe<dr.length;++Xe)He=dr[Xe],gt.bindAttribLocation(cr,He[0],He[1]);gt.linkProgram(cr),He=gt.getProgramParameter(cr,35718),mr.profile&&(fr.stats.uniformsCount=He);var zt=fr.uniforms;for(Xe=0;Xe<He;++Xe)if(dr=gt.getActiveUniform(cr,Xe))if(1<dr.size)for(var Rt=0;Rt<dr.size;++Rt){var Jt=dr.name.replace("[0]","["+Rt+"]");mt(zt,new or(Jt,jt.id(Jt),gt.getUniformLocation(cr,Jt),dr))}else mt(zt,new or(dr.name,jt.id(dr.name),gt.getUniformLocation(cr,dr.name),dr));for(He=gt.getProgramParameter(cr,35721),mr.profile&&(fr.stats.attributesCount=He),fr=fr.attributes,Xe=0;Xe<He;++Xe)(dr=gt.getActiveAttrib(cr,Xe))&&mt(fr,new or(dr.name,jt.id(dr.name),gt.getAttribLocation(cr,dr.name),dr))}var Pt={},Ht={},Bt={},Nt=[],Kt=0;return mr.profile&&(Qt.getMaxUniformsCount=function(){var fr=0;return Nt.forEach(function(cr){cr.stats.uniformsCount>fr&&(fr=cr.stats.uniformsCount)}),fr},Qt.getMaxAttributesCount=function(){var fr=0;return Nt.forEach(function(cr){cr.stats.attributesCount>fr&&(fr=cr.stats.attributesCount)}),fr}),{clear:function(){var fr=gt.deleteShader.bind(gt);Ee(Pt).forEach(fr),Pt={},Ee(Ht).forEach(fr),Ht={},Nt.forEach(function(cr){gt.deleteProgram(cr.program)}),Nt.length=0,Bt={},Qt.shaderCount=0},program:function(fr,cr,dr,Xe){var He=Bt[cr];He||(He=Bt[cr]={});var zt=He[fr];if(zt&&(zt.refCount++,!Xe))return zt;var Rt=new bt(cr,fr);return Qt.shaderCount++,St(Rt,dr,Xe),zt||(He[fr]=Rt),Nt.push(Rt),re(Rt,{destroy:function(){if(Rt.refCount--,0>=Rt.refCount){gt.deleteProgram(Rt.program);var Jt=Nt.indexOf(Rt);Nt.splice(Jt,1),Qt.shaderCount--}0>=He[Rt.vertId].refCount&&(gt.deleteShader(Ht[Rt.vertId]),delete Ht[Rt.vertId],delete Bt[Rt.fragId][Rt.vertId]),Object.keys(Bt[Rt.fragId]).length||(gt.deleteShader(Pt[Rt.fragId]),delete Pt[Rt.fragId],delete Bt[Rt.fragId])}})},restore:function(){Pt={},Ht={};for(var fr=0;fr<Nt.length;++fr)St(Nt[fr],null,Nt[fr].attributes.map(function(cr){return[cr.location,cr.name]}))},shader:ut,frag:-1,vert:-1}}function B(gt,jt,Qt,mr,or,mt,ut){function bt(Pt){var Ht;Ht=jt.next===null?5121:jt.next.colorAttachments[0].texture._texture.type;var Bt=0,Nt=0,Kt=mr.framebufferWidth,fr=mr.framebufferHeight,cr=null;return Ne(Pt)?cr=Pt:Pt&&(Bt=Pt.x|0,Nt=Pt.y|0,Kt=(Pt.width||mr.framebufferWidth-Bt)|0,fr=(Pt.height||mr.framebufferHeight-Nt)|0,cr=Pt.data||null),Qt(),Pt=Kt*fr*4,cr||(Ht===5121?cr=new Uint8Array(Pt):Ht===5126&&(cr=cr||new Float32Array(Pt))),gt.pixelStorei(3333,4),gt.readPixels(Bt,Nt,Kt,fr,6408,Ht,cr),cr}function St(Pt){var Ht;return jt.setFBO({framebuffer:Pt.framebuffer},function(){Ht=bt(Pt)}),Ht}return function(Pt){return Pt&&"framebuffer"in Pt?St(Pt):bt(Pt)}}function z(gt){for(var jt=Array(gt.length>>2),mr=0;mr<jt.length;mr++)jt[mr]=0;for(mr=0;mr<8*gt.length;mr+=8)jt[mr>>5]|=(gt.charCodeAt(mr/8)&255)<<24-mr%32;var Qt=8*gt.length;gt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var mr=Array(64),or,mt,ut,bt,St,Pt,Ht,Bt,Nt,Kt,fr;for(jt[Qt>>5]|=128<<24-Qt%32,jt[(Qt+64>>9<<4)+15]=Qt,Bt=0;Bt<jt.length;Bt+=16){for(Qt=gt[0],or=gt[1],mt=gt[2],ut=gt[3],bt=gt[4],St=gt[5],Pt=gt[6],Ht=gt[7],Nt=0;64>Nt;Nt++){if(16>Nt)mr[Nt]=jt[Nt+Bt];else{Kt=Nt,fr=mr[Nt-2],fr=$(fr,17)^$(fr,19)^fr>>>10,fr=ne(fr,mr[Nt-7]);var cr;cr=mr[Nt-15],cr=$(cr,7)^$(cr,18)^cr>>>3,mr[Kt]=ne(ne(fr,cr),mr[Nt-16])}Kt=bt,Kt=$(Kt,6)^$(Kt,11)^$(Kt,25),Kt=ne(ne(ne(ne(Ht,Kt),bt&St^~bt&Pt),et[Nt]),mr[Nt]),Ht=Qt,Ht=$(Ht,2)^$(Ht,13)^$(Ht,22),fr=ne(Ht,Qt&or^Qt&mt^or&mt),Ht=Pt,Pt=St,St=bt,bt=ne(ut,Kt),ut=mt,mt=or,or=Qt,Qt=ne(Kt,fr)}gt[0]=ne(Qt,gt[0]),gt[1]=ne(or,gt[1]),gt[2]=ne(mt,gt[2]),gt[3]=ne(ut,gt[3]),gt[4]=ne(bt,gt[4]),gt[5]=ne(St,gt[5]),gt[6]=ne(Pt,gt[6]),gt[7]=ne(Ht,gt[7])}for(jt="",mr=0;mr<32*gt.length;mr+=8)jt+=String.fromCharCode(gt[mr>>5]>>>24-mr%32&255);return jt}function H(gt){for(var jt="",Qt,mr=0;mr<gt.length;mr++)Qt=gt.charCodeAt(mr),jt+="0123456789abcdef".charAt(Qt>>>4&15)+"0123456789abcdef".charAt(Qt&15);return jt}function X(gt){for(var jt="",Qt=-1,mr,or;++Qt<gt.length;)mr=gt.charCodeAt(Qt),or=Qt+1<gt.length?gt.charCodeAt(Qt+1):0,55296<=mr&&56319>=mr&&56320<=or&&57343>=or&&(mr=65536+((mr&1023)<<10)+(or&1023),Qt++),127>=mr?jt+=String.fromCharCode(mr):2047>=mr?jt+=String.fromCharCode(192|mr>>>6&31,128|mr&63):65535>=mr?jt+=String.fromCharCode(224|mr>>>12&15,128|mr>>>6&63,128|mr&63):2097151>=mr&&(jt+=String.fromCharCode(240|mr>>>18&7,128|mr>>>12&63,128|mr>>>6&63,128|mr&63));return jt}function $(gt,jt){return gt>>>jt|gt<<32-jt}function ne(gt,jt){var Qt=(gt&65535)+(jt&65535);return(gt>>16)+(jt>>16)+(Qt>>16)<<16|Qt&65535}function q(gt){return Array.prototype.slice.call(gt)}function ue(gt){return q(gt).join("")}function te(gt){function jt(){var Ht=[],Bt=[];return re(function(){Ht.push.apply(Ht,q(arguments))},{def:function(){var Nt="v"+or++;return Bt.push(Nt),0<arguments.length&&(Ht.push(Nt,"="),Ht.push.apply(Ht,q(arguments)),Ht.push(";")),Nt},toString:function(){return ue([0<Bt.length?"var "+Bt.join(",")+";":"",ue(Ht)])}})}function Qt(){function Ht(cr,dr){Nt(cr,dr,"=",Bt.def(cr,dr),";")}var Bt=jt(),Nt=jt(),Kt=Bt.toString,fr=Nt.toString;return re(function(){Bt.apply(Bt,q(arguments))},{def:Bt.def,entry:Bt,exit:Nt,save:Ht,set:function(cr,dr,Xe){Ht(cr,dr),Bt(cr,dr,"=",Xe,";")},toString:function(){return Kt()+fr()}})}var mr=gt&&gt.cache,or=0,mt=[],ut=[],bt=[],St=jt(),Pt={};return{global:St,link:function(Ht,Bt){var Nt=Bt&&Bt.stable;if(!Nt){for(var Kt=0;Kt<ut.length;++Kt)if(ut[Kt]===Ht&&!bt[Kt])return mt[Kt]}return Kt="g"+or++,mt.push(Kt),ut.push(Ht),bt.push(Nt),Kt},block:jt,proc:function(Ht,Bt){function Nt(){var dr="a"+Kt.length;return Kt.push(dr),dr}var Kt=[];Bt=Bt||0;for(var fr=0;fr<Bt;++fr)Nt();var fr=Qt(),cr=fr.toString;return Pt[Ht]=re(fr,{arg:Nt,toString:function(){return ue(["function(",Kt.join(),"){",cr(),"}"])}})},scope:Qt,cond:function(){var Ht=ue(arguments),Bt=Qt(),Nt=Qt(),Kt=Bt.toString,fr=Nt.toString;return re(Bt,{then:function(){return Bt.apply(Bt,q(arguments)),this},else:function(){return Nt.apply(Nt,q(arguments)),this},toString:function(){var cr=fr();return cr&&(cr="else{"+cr+"}"),ue(["if(",Ht,"){",Kt(),"}",cr])}})},compile:function(){var Ht=['"use strict";',St,"return {"];Object.keys(Pt).forEach(function(Kt){Ht.push('"',Kt,'":',Pt[Kt].toString(),",")}),Ht.push("}");var Bt=ue(Ht).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Nt;return mr&&(Nt=H(z(X(Bt))),mr[Nt])?mr[Nt].apply(null,ut):(Bt=Function.apply(null,mt.concat(Bt)),mr&&(mr[Nt]=Bt),Bt.apply(null,ut))}}}function J(gt){return Array.isArray(gt)||Ne(gt)||u(gt)}function ie(gt){return gt.sort(function(jt,Qt){return jt==="viewport"?-1:Qt==="viewport"?1:jt<Qt?-1:1})}function K(gt,jt,Qt,mr){this.thisDep=gt,this.contextDep=jt,this.propDep=Qt,this.append=mr}function ee(gt){return gt&&!(gt.thisDep||gt.contextDep||gt.propDep)}function le(gt){return new K(!1,!1,!1,gt)}function j(gt,jt){var Qt=gt.type;if(Qt===0)return Qt=gt.data.length,new K(!0,1<=Qt,2<=Qt,jt);if(Qt===4)return Qt=gt.data,new K(Qt.thisDep,Qt.contextDep,Qt.propDep,jt);if(Qt===5)return new K(!1,!1,!1,jt);if(Qt===6){for(var mr=Qt=!1,or=!1,mt=0;mt<gt.data.length;++mt){var ut=gt.data[mt];ut.type===1?or=!0:ut.type===2?mr=!0:ut.type===3?Qt=!0:ut.type===0?(Qt=!0,ut=ut.data,1<=ut&&(mr=!0),2<=ut&&(or=!0)):ut.type===4&&(Qt=Qt||ut.data.thisDep,mr=mr||ut.data.contextDep,or=or||ut.data.propDep)}return new K(Qt,mr,or,jt)}return new K(Qt===3,Qt===2,Qt===1,jt)}function Z(gt,jt,Qt,mr,or,mt,ut,bt,St,Pt,Ht,Bt,Nt,Kt,fr,cr){function dr(Er){return Er.replace(".","_")}function Xe(Er,Or,Ar){var Fr=dr(Er);xn.push(Er),zn[Fr]=hn[Fr]=!!Ar,Tn[Fr]=Or}function He(Er,Or,Ar){var Fr=dr(Er);xn.push(Er),Array.isArray(Ar)?(hn[Fr]=Ar.slice(),zn[Fr]=Ar.slice()):hn[Fr]=zn[Fr]=Ar,On[Fr]=Or}function zt(){var Er=te({cache:fr}),Or=Er.link,Ar=Er.global;Er.id=Ri++,Er.batchId="0";var Fr=Or(Jn),yn=Er.shared={props:"a0"};Object.keys(Jn).forEach(function(Zr){yn[Zr]=Ar.def(Fr,".",Zr)});var Pn=Er.next={},pn=Er.current={};Object.keys(On).forEach(function(Zr){Array.isArray(hn[Zr])&&(Pn[Zr]=Ar.def(yn.next,".",Zr),pn[Zr]=Ar.def(yn.current,".",Zr))});var ln=Er.constants={};Object.keys(hi).forEach(function(Zr){ln[Zr]=Ar.def(JSON.stringify(hi[Zr]))}),Er.invoke=function(Zr,Hr){switch(Hr.type){case 0:var $r=["this",yn.context,yn.props,Er.batchId];return Zr.def(Or(Hr.data),".call(",$r.slice(0,Math.max(Hr.data.length+1,4)),")");case 1:return Zr.def(yn.props,Hr.data);case 2:return Zr.def(yn.context,Hr.data);case 3:return Zr.def("this",Hr.data);case 4:return Hr.data.append(Er,Zr),Hr.data.ref;case 5:return Hr.data.toString();case 6:return Hr.data.map(function(bn){return Er.invoke(Zr,bn)})}},Er.attribCache={};var Sr={};return Er.scopeAttrib=function(Zr){if(Zr=jt.id(Zr),Zr in Sr)return Sr[Zr];var Hr=Pt.scope[Zr];return Hr||(Hr=Pt.scope[Zr]=new Hn),Sr[Zr]=Or(Hr)},Er}function Rt(Er){var Or=Er.static;Er=Er.dynamic;var Ar;if("profile"in Or){var Fr=!!Or.profile;Ar=le(function(Pn,pn){return Fr}),Ar.enable=Fr}else if("profile"in Er){var yn=Er.profile;Ar=j(yn,function(Pn,pn){return Pn.invoke(pn,yn)})}return Ar}function Jt(Er,Or){var Ar=Er.static,Fr=Er.dynamic;if("framebuffer"in Ar){var yn=Ar.framebuffer;return yn?(yn=bt.getFramebuffer(yn),le(function(pn,ln){var Sr=pn.link(yn),Zr=pn.shared;return ln.set(Zr.framebuffer,".next",Sr),Zr=Zr.context,ln.set(Zr,".framebufferWidth",Sr+".width"),ln.set(Zr,".framebufferHeight",Sr+".height"),Sr})):le(function(pn,ln){var Sr=pn.shared;return ln.set(Sr.framebuffer,".next","null"),Sr=Sr.context,ln.set(Sr,".framebufferWidth",Sr+".drawingBufferWidth"),ln.set(Sr,".framebufferHeight",Sr+".drawingBufferHeight"),"null"})}if("framebuffer"in Fr){var Pn=Fr.framebuffer;return j(Pn,function(pn,ln){var Hr=pn.invoke(ln,Pn),Sr=pn.shared,Zr=Sr.framebuffer,Hr=ln.def(Zr,".getFramebuffer(",Hr,")");return ln.set(Zr,".next",Hr),Sr=Sr.context,ln.set(Sr,".framebufferWidth",Hr+"?"+Hr+".width:"+Sr+".drawingBufferWidth"),ln.set(Sr,".framebufferHeight",Hr+"?"+Hr+".height:"+Sr+".drawingBufferHeight"),Hr})}return null}function sr(Er,Or,Ar){function Fr(ln){if(ln in yn){var Sr=yn[ln];ln=!0;var Zr=Sr.x|0,Hr=Sr.y|0,$r,bn;return"width"in Sr?$r=Sr.width|0:ln=!1,"height"in Sr?bn=Sr.height|0:ln=!1,new K(!ln&&Or&&Or.thisDep,!ln&&Or&&Or.contextDep,!ln&&Or&&Or.propDep,function(En,Nn){var Fn=En.shared.context,vi=$r;"width"in Sr||(vi=Nn.def(Fn,".","framebufferWidth","-",Zr));var si=bn;return"height"in Sr||(si=Nn.def(Fn,".","framebufferHeight","-",Hr)),[Zr,Hr,vi,si]})}if(ln in Pn){var kn=Pn[ln];return ln=j(kn,function(En,Nn){var Li=En.invoke(Nn,kn),Fn=En.shared.context,vi=Nn.def(Li,".x|0"),si=Nn.def(Li,".y|0"),gi=Nn.def('"width" in ',Li,"?",Li,".width|0:","(",Fn,".","framebufferWidth","-",vi,")"),Li=Nn.def('"height" in ',Li,"?",Li,".height|0:","(",Fn,".","framebufferHeight","-",si,")");return[vi,si,gi,Li]}),Or&&(ln.thisDep=ln.thisDep||Or.thisDep,ln.contextDep=ln.contextDep||Or.contextDep,ln.propDep=ln.propDep||Or.propDep),ln}return Or?new K(Or.thisDep,Or.contextDep,Or.propDep,function(En,Nn){var Fn=En.shared.context;return[0,0,Nn.def(Fn,".","framebufferWidth"),Nn.def(Fn,".","framebufferHeight")]}):null}var yn=Er.static,Pn=Er.dynamic;if(Er=Fr("viewport")){var pn=Er;Er=new K(Er.thisDep,Er.contextDep,Er.propDep,function(ln,Sr){var Zr=pn.append(ln,Sr),Hr=ln.shared.context;return Sr.set(Hr,".viewportWidth",Zr[2]),Sr.set(Hr,".viewportHeight",Zr[3]),Zr})}return{viewport:Er,scissor_box:Fr("scissor.box")}}function ur(Er,Or){var Ar=Er.static;if(typeof Ar.frag=="string"&&typeof Ar.vert=="string"){if(0<Object.keys(Or.dynamic).length)return null;var Ar=Or.static,Fr=Object.keys(Ar);if(0<Fr.length&&typeof Ar[Fr[0]]=="number"){for(var yn=[],Pn=0;Pn<Fr.length;++Pn)yn.push([Ar[Fr[Pn]]|0,Fr[Pn]]);return yn}}return null}function er(Er,Or,Ar){function Fr(Zr){if(Zr in yn){var Hr=jt.id(yn[Zr]);return Zr=le(function(){return Hr}),Zr.id=Hr,Zr}if(Zr in Pn){var $r=Pn[Zr];return j($r,function(bn,kn){var En=bn.invoke(kn,$r);return kn.def(bn.shared.strings,".id(",En,")")})}return null}var yn=Er.static,Pn=Er.dynamic,pn=Fr("frag"),ln=Fr("vert"),Sr=null;return ee(pn)&&ee(ln)?(Sr=Ht.program(ln.id,pn.id,null,Ar),Er=le(function(Zr,Hr){return Zr.link(Sr)})):Er=new K(pn&&pn.thisDep||ln&&ln.thisDep,pn&&pn.contextDep||ln&&ln.contextDep,pn&&pn.propDep||ln&&ln.propDep,function(Zr,Hr){var $r=Zr.shared.shader,bn;bn=pn?pn.append(Zr,Hr):Hr.def($r,".","frag");var kn;return kn=ln?ln.append(Zr,Hr):Hr.def($r,".","vert"),Hr.def($r+".program("+kn+","+bn+")")}),{frag:pn,vert:ln,progVar:Er,program:Sr}}function Ft(Er,Or){function Ar(En,Nn){if(En in Fr){var Fn=Fr[En]|0;return Nn?Pn.offset=Fn:Pn.instances=Fn,le(function(si,gi){return Nn&&(si.OFFSET=Fn),Fn})}if(En in yn){var vi=yn[En];return j(vi,function(si,gi){var Li=si.invoke(gi,vi);return Nn&&(si.OFFSET=Li),Li})}if(Nn){if(Sr)return le(function(si,gi){return si.OFFSET=0});if(pn)return new K(ln.thisDep,ln.contextDep,ln.propDep,function(si,gi){return gi.def(si.shared.vao+".currentVAO?"+si.shared.vao+".currentVAO.offset:0")})}else if(pn)return new K(ln.thisDep,ln.contextDep,ln.propDep,function(si,gi){return gi.def(si.shared.vao+".currentVAO?"+si.shared.vao+".currentVAO.instances:-1")});return null}var Fr=Er.static,yn=Er.dynamic,Pn={},pn=!1,ln=function(){if("vao"in Fr){var En=Fr.vao;return En!==null&&Pt.getVAO(En)===null&&(En=Pt.createVAO(En)),pn=!0,Pn.vao=En,le(function(Fn){var vi=Pt.getVAO(En);return vi?Fn.link(vi):"null"})}if("vao"in yn){pn=!0;var Nn=yn.vao;return j(Nn,function(Fn,vi){var si=Fn.invoke(vi,Nn);return vi.def(Fn.shared.vao+".getVAO("+si+")")})}return null}(),Sr=!1,Zr=function(){if("elements"in Fr){var En=Fr.elements;if(Pn.elements=En,J(En)){var Nn=Pn.elements=mt.create(En,!0),En=mt.getElements(Nn);Sr=!0}else En&&(En=mt.getElements(En),Sr=!0);return Nn=le(function(vi,si){if(En){var gi=vi.link(En);return vi.ELEMENTS=gi}return vi.ELEMENTS=null}),Nn.value=En,Nn}if("elements"in yn){Sr=!0;var Fn=yn.elements;return j(Fn,function(vi,si){var gi=vi.shared,ma=gi.isBufferArgs,gi=gi.elements,ia=vi.invoke(si,Fn),Li=si.def("null"),ma=si.def(ma,"(",ia,")"),ia=vi.cond(ma).then(Li,"=",gi,".createStream(",ia,");").else(Li,"=",gi,".getElements(",ia,");");return si.entry(ia),si.exit(vi.cond(ma).then(gi,".destroyStream(",Li,");")),vi.ELEMENTS=Li})}return pn?new K(ln.thisDep,ln.contextDep,ln.propDep,function(vi,si){return si.def(vi.shared.vao+".currentVAO?"+vi.shared.elements+".getElements("+vi.shared.vao+".currentVAO.elements):null")}):null}(),Hr=Ar("offset",!0),$r=function(){if("primitive"in Fr){var En=Fr.primitive;return Pn.primitive=En,le(function(Fn,vi){return $e[En]})}if("primitive"in yn){var Nn=yn.primitive;return j(Nn,function(Fn,vi){var si=Fn.constants.primTypes,gi=Fn.invoke(vi,Nn);return vi.def(si,"[",gi,"]")})}return Sr?ee(Zr)?Zr.value?le(function(Fn,vi){return vi.def(Fn.ELEMENTS,".primType")}):le(function(){return 4}):new K(Zr.thisDep,Zr.contextDep,Zr.propDep,function(Fn,vi){var si=Fn.ELEMENTS;return vi.def(si,"?",si,".primType:",4)}):pn?new K(ln.thisDep,ln.contextDep,ln.propDep,function(Fn,vi){return vi.def(Fn.shared.vao+".currentVAO?"+Fn.shared.vao+".currentVAO.primitive:4")}):null}(),bn=function(){if("count"in Fr){var En=Fr.count|0;return Pn.count=En,le(function(){return En})}if("count"in yn){var Nn=yn.count;return j(Nn,function(Fn,vi){return Fn.invoke(vi,Nn)})}return Sr?ee(Zr)?Zr?Hr?new K(Hr.thisDep,Hr.contextDep,Hr.propDep,function(Fn,vi){return vi.def(Fn.ELEMENTS,".vertCount-",Fn.OFFSET)}):le(function(Fn,vi){return vi.def(Fn.ELEMENTS,".vertCount")}):le(function(){return-1}):new K(Zr.thisDep||Hr.thisDep,Zr.contextDep||Hr.contextDep,Zr.propDep||Hr.propDep,function(Fn,vi){var si=Fn.ELEMENTS;return Fn.OFFSET?vi.def(si,"?",si,".vertCount-",Fn.OFFSET,":-1"):vi.def(si,"?",si,".vertCount:-1")}):pn?new K(ln.thisDep,ln.contextDep,ln.propDep,function(Fn,vi){return vi.def(Fn.shared.vao,".currentVAO?",Fn.shared.vao,".currentVAO.count:-1")}):null}(),kn=Ar("instances",!1);return{elements:Zr,primitive:$r,count:bn,instances:kn,offset:Hr,vao:ln,vaoActive:pn,elementsActive:Sr,static:Pn}}function ir(Er,Or){var Ar=Er.static,Fr=Er.dynamic,yn={};return xn.forEach(function(Pn){function pn(Sr,Zr){if(Pn in Ar){var Hr=Sr(Ar[Pn]);yn[ln]=le(function(){return Hr})}else if(Pn in Fr){var $r=Fr[Pn];yn[ln]=j($r,function(bn,kn){return Zr(bn,kn,bn.invoke(kn,$r))})}}var ln=dr(Pn);switch(Pn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return pn(function(Sr){return Sr},function(Sr,Zr,Hr){return Hr});case"depth.func":return pn(function(Sr){return Zt[Sr]},function(Sr,Zr,Hr){return Zr.def(Sr.constants.compareFuncs,"[",Hr,"]")});case"depth.range":return pn(function(Sr){return Sr},function(Sr,Zr,Hr){return Sr=Zr.def("+",Hr,"[0]"),Zr=Zr.def("+",Hr,"[1]"),[Sr,Zr]});case"blend.func":return pn(function(Sr){return[Gt["srcRGB"in Sr?Sr.srcRGB:Sr.src],Gt["dstRGB"in Sr?Sr.dstRGB:Sr.dst],Gt["srcAlpha"in Sr?Sr.srcAlpha:Sr.src],Gt["dstAlpha"in Sr?Sr.dstAlpha:Sr.dst]]},function(Sr,Zr,Hr){function $r(Nn,Fn){return Zr.def('"',Nn,Fn,'" in ',Hr,"?",Hr,".",Nn,Fn,":",Hr,".",Nn)}Sr=Sr.constants.blendFuncs;var bn=$r("src","RGB"),En=$r("dst","RGB"),bn=Zr.def(Sr,"[",bn,"]"),kn=Zr.def(Sr,"[",$r("src","Alpha"),"]"),En=Zr.def(Sr,"[",En,"]");return Sr=Zr.def(Sr,"[",$r("dst","Alpha"),"]"),[bn,En,kn,Sr]});case"blend.equation":return pn(function(Sr){if(typeof Sr=="string")return[Kn[Sr],Kn[Sr]];if(typeof Sr=="object")return[Kn[Sr.rgb],Kn[Sr.alpha]]},function(Sr,Zr,Hr){var $r=Sr.constants.blendEquations,bn=Zr.def(),kn=Zr.def();return Sr=Sr.cond("typeof ",Hr,'==="string"'),Sr.then(bn,"=",kn,"=",$r,"[",Hr,"];"),Sr.else(bn,"=",$r,"[",Hr,".rgb];",kn,"=",$r,"[",Hr,".alpha];"),Zr(Sr),[bn,kn]});case"blend.color":return pn(function(Sr){return o(4,function(Zr){return+Sr[Zr]})},function(Sr,Zr,Hr){return o(4,function($r){return Zr.def("+",Hr,"[",$r,"]")})});case"stencil.mask":return pn(function(Sr){return Sr|0},function(Sr,Zr,Hr){return Zr.def(Hr,"|0")});case"stencil.func":return pn(function(Sr){return[Zt[Sr.cmp||"keep"],Sr.ref||0,"mask"in Sr?Sr.mask:-1]},function(Sr,Zr,Hr){Sr=Zr.def('"cmp" in ',Hr,"?",Sr.constants.compareFuncs,"[",Hr,".cmp]",":",7680);var $r=Zr.def(Hr,".ref|0");return Zr=Zr.def('"mask" in ',Hr,"?",Hr,".mask|0:-1"),[Sr,$r,Zr]});case"stencil.opFront":case"stencil.opBack":return pn(function(Sr){return[Pn==="stencil.opBack"?1029:1028,Tt[Sr.fail||"keep"],Tt[Sr.zfail||"keep"],Tt[Sr.zpass||"keep"]]},function(Sr,Zr,Hr){function $r(kn){return Zr.def('"',kn,'" in ',Hr,"?",bn,"[",Hr,".",kn,"]:",7680)}var bn=Sr.constants.stencilOps;return[Pn==="stencil.opBack"?1029:1028,$r("fail"),$r("zfail"),$r("zpass")]});case"polygonOffset.offset":return pn(function(Sr){return[Sr.factor|0,Sr.units|0]},function(Sr,Zr,Hr){return Sr=Zr.def(Hr,".factor|0"),Zr=Zr.def(Hr,".units|0"),[Sr,Zr]});case"cull.face":return pn(function(Sr){var Zr=0;return Sr==="front"?Zr=1028:Sr==="back"&&(Zr=1029),Zr},function(Sr,Zr,Hr){return Zr.def(Hr,'==="front"?',1028,":",1029)});case"lineWidth":return pn(function(Sr){return Sr},function(Sr,Zr,Hr){return Hr});case"frontFace":return pn(function(Sr){return It[Sr]},function(Sr,Zr,Hr){return Zr.def(Hr+'==="cw"?2304:2305')});case"colorMask":return pn(function(Sr){return Sr.map(function(Zr){return!!Zr})},function(Sr,Zr,Hr){return o(4,function($r){return"!!"+Hr+"["+$r+"]"})});case"sample.coverage":return pn(function(Sr){return["value"in Sr?Sr.value:1,!!Sr.invert]},function(Sr,Zr,Hr){return Sr=Zr.def('"value" in ',Hr,"?+",Hr,".value:1"),Zr=Zr.def("!!",Hr,".invert"),[Sr,Zr]})}}),yn}function hr(Er,Or){var Ar=Er.static,Fr=Er.dynamic,yn={};return Object.keys(Ar).forEach(function(Pn){var pn=Ar[Pn],ln;if(typeof pn=="number"||typeof pn=="boolean")ln=le(function(){return pn});else if(typeof pn=="function"){var Sr=pn._reglType;Sr==="texture2d"||Sr==="textureCube"?ln=le(function(Zr){return Zr.link(pn)}):(Sr==="framebuffer"||Sr==="framebufferCube")&&(ln=le(function(Zr){return Zr.link(pn.color[0])}))}else A(pn)&&(ln=le(function(Zr){return Zr.global.def("[",o(pn.length,function(Hr){return pn[Hr]}),"]")}));ln.value=pn,yn[Pn]=ln}),Object.keys(Fr).forEach(function(Pn){var pn=Fr[Pn];yn[Pn]=j(pn,function(ln,Sr){return ln.invoke(Sr,pn)})}),yn}function xr(Er,Or){var Ar=Er.static,Fr=Er.dynamic,yn={};return Object.keys(Ar).forEach(function(Pn){var pn=Ar[Pn],ln=jt.id(Pn),Sr=new Hn;if(J(pn))Sr.state=1,Sr.buffer=or.getBuffer(or.create(pn,34962,!1,!0)),Sr.type=0;else{var Zr=or.getBuffer(pn);if(Zr)Sr.state=1,Sr.buffer=Zr,Sr.type=0;else if("constant"in pn){var Hr=pn.constant;Sr.buffer="null",Sr.state=2,typeof Hr=="number"?Sr.x=Hr:st.forEach(function(Fn,vi){vi<Hr.length&&(Sr[Fn]=Hr[vi])})}else{var Zr=J(pn.buffer)?or.getBuffer(or.create(pn.buffer,34962,!1,!0)):or.getBuffer(pn.buffer),$r=pn.offset|0,bn=pn.stride|0,kn=pn.size|0,En=!!pn.normalized,Nn=0;"type"in pn&&(Nn=Oe[pn.type]),pn=pn.divisor|0,Sr.buffer=Zr,Sr.state=1,Sr.size=kn,Sr.normalized=En,Sr.type=Nn||Zr.dtype,Sr.offset=$r,Sr.stride=bn,Sr.divisor=pn}}yn[Pn]=le(function(Fn,vi){var si=Fn.attribCache;if(ln in si)return si[ln];var gi={isStream:!1};return Object.keys(Sr).forEach(function(Li){gi[Li]=Sr[Li]}),Sr.buffer&&(gi.buffer=Fn.link(Sr.buffer),gi.type=gi.type||gi.buffer+".dtype"),si[ln]=gi})}),Object.keys(Fr).forEach(function(Pn){var pn=Fr[Pn];yn[Pn]=j(pn,function(ln,Sr){function Zr(si){Sr(En[si],"=",Hr,".",si,"|0;")}var Hr=ln.invoke(Sr,pn),kn=ln.shared,$r=ln.constants,bn=kn.isBufferArgs,kn=kn.buffer,En={isStream:Sr.def(!1)},Nn=new Hn;Nn.state=1,Object.keys(Nn).forEach(function(si){En[si]=Sr.def(""+Nn[si])});var Fn=En.buffer,vi=En.type;return Sr("if(",bn,"(",Hr,")){",En.isStream,"=true;",Fn,"=",kn,".createStream(",34962,",",Hr,");",vi,"=",Fn,".dtype;","}else{",Fn,"=",kn,".getBuffer(",Hr,");","if(",Fn,"){",vi,"=",Fn,".dtype;",'}else if("constant" in ',Hr,"){",En.state,"=",2,";","if(typeof "+Hr+'.constant === "number"){',En[st[0]],"=",Hr,".constant;",st.slice(1).map(function(si){return En[si]}).join("="),"=0;","}else{",st.map(function(si,gi){return En[si]+"="+Hr+".constant.length>"+gi+"?"+Hr+".constant["+gi+"]:0;"}).join(""),"}}else{","if(",bn,"(",Hr,".buffer)){",Fn,"=",kn,".createStream(",34962,",",Hr,".buffer);","}else{",Fn,"=",kn,".getBuffer(",Hr,".buffer);","}",vi,'="type" in ',Hr,"?",$r.glTypes,"[",Hr,".type]:",Fn,".dtype;",En.normalized,"=!!",Hr,".normalized;"),Zr("size"),Zr("offset"),Zr("stride"),Zr("divisor"),Sr("}}"),Sr.exit("if(",En.isStream,"){",kn,".destroyStream(",Fn,");","}"),En})}),yn}function vr(Er){var Or=Er.static,Ar=Er.dynamic,Fr={};return Object.keys(Or).forEach(function(yn){var Pn=Or[yn];Fr[yn]=le(function(pn,ln){return typeof Pn=="number"||typeof Pn=="boolean"?""+Pn:pn.link(Pn)})}),Object.keys(Ar).forEach(function(yn){var Pn=Ar[yn];Fr[yn]=j(Pn,function(pn,ln){return pn.invoke(ln,Pn)})}),Fr}function Vr(Er,Or,Ar,Fr,yn){function Pn(Nn){var Fn=ln[Nn];Fn&&(Zr[Nn]=Fn)}var pn=ur(Er,Or),bn=Jt(Er),ln=sr(Er,bn),Sr=Ft(Er),Zr=ir(Er),Hr=er(Er,yn,pn);Pn("viewport"),Pn(dr("scissor.box"));var $r=0<Object.keys(Zr).length,bn={framebuffer:bn,draw:Sr,shader:Hr,state:Zr,dirty:$r,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(bn.profile=Rt(Er),bn.uniforms=hr(Ar),bn.drawVAO=bn.scopeVAO=Sr.vao,!bn.drawVAO&&Hr.program&&!pn&&Qt.angle_instanced_arrays&&Sr.static.elements){var kn=!0;if(Er=Hr.program.attributes.map(function(Nn){return Nn=Or.static[Nn],kn=kn&&!!Nn,Nn}),kn&&0<Er.length){var En=Pt.getVAO(Pt.createVAO({attributes:Er,elements:Sr.static.elements}));bn.drawVAO=new K(null,null,null,function(Nn,Fn){return Nn.link(En)}),bn.useVAO=!0}}return pn?bn.useVAO=!0:bn.attributes=xr(Or),bn.context=vr(Fr),bn}function _r(Er,Or,Ar){var Fr=Er.shared.context,yn=Er.scope();Object.keys(Ar).forEach(function(Pn){Or.save(Fr,"."+Pn);var pn=Ar[Pn].append(Er,Or);Array.isArray(pn)?yn(Fr,".",Pn,"=[",pn.join(),"];"):yn(Fr,".",Pn,"=",pn,";")}),Or(yn)}function Rr(Er,Or,Ar,Fr){var ln=Er.shared,yn=ln.gl,Pn=ln.framebuffer,pn;qr&&(pn=Or.def(ln.extensions,".webgl_draw_buffers"));var Sr=Er.constants,ln=Sr.drawBuffer,Sr=Sr.backBuffer;Er=Ar?Ar.append(Er,Or):Or.def(Pn,".next"),Fr||Or("if(",Er,"!==",Pn,".cur){"),Or("if(",Er,"){",yn,".bindFramebuffer(",36160,",",Er,".framebuffer);"),qr&&Or(pn,".drawBuffersWEBGL(",ln,"[",Er,".colorAttachments.length]);"),Or("}else{",yn,".bindFramebuffer(",36160,",null);"),qr&&Or(pn,".drawBuffersWEBGL(",Sr,");"),Or("}",Pn,".cur=",Er,";"),Fr||Or("}")}function nn(Er,Or,Ar){var Fr=Er.shared,yn=Fr.gl,Pn=Er.current,pn=Er.next,ln=Fr.current,Sr=Fr.next,Zr=Er.cond(ln,".dirty");xn.forEach(function(Hr){if(Hr=dr(Hr),!(Hr in Ar.state)){var $r,bn;if(Hr in pn){$r=pn[Hr],bn=Pn[Hr];var kn=o(hn[Hr].length,function(En){return Zr.def($r,"[",En,"]")});Zr(Er.cond(kn.map(function(En,Nn){return En+"!=="+bn+"["+Nn+"]"}).join("||")).then(yn,".",On[Hr],"(",kn,");",kn.map(function(En,Nn){return bn+"["+Nn+"]="+En}).join(";"),";"))}else $r=Zr.def(Sr,".",Hr),kn=Er.cond($r,"!==",ln,".",Hr),Zr(kn),Hr in Tn?kn(Er.cond($r).then(yn,".enable(",Tn[Hr],");").else(yn,".disable(",Tn[Hr],");"),ln,".",Hr,"=",$r,";"):kn(yn,".",On[Hr],"(",$r,");",ln,".",Hr,"=",$r,";")}}),Object.keys(Ar.state).length===0&&Zr(ln,".dirty=false;"),Or(Zr)}function en(Er,Or,Ar,Fr){var yn=Er.shared,Pn=Er.current,pn=yn.current,ln=yn.gl,Sr;ie(Object.keys(Ar)).forEach(function(Zr){var Hr=Ar[Zr];if(!Fr||Fr(Hr)){var $r=Hr.append(Er,Or);if(Tn[Zr]){var bn=Tn[Zr];ee(Hr)?(Sr=Er.link($r,{stable:!0}),Or(Er.cond(Sr).then(ln,".enable(",bn,");").else(ln,".disable(",bn,");")),Or(pn,".",Zr,"=",Sr,";")):(Or(Er.cond($r).then(ln,".enable(",bn,");").else(ln,".disable(",bn,");")),Or(pn,".",Zr,"=",$r,";"))}else if(A($r)){var kn=Pn[Zr];Or(ln,".",On[Zr],"(",$r,");",$r.map(function(En,Nn){return kn+"["+Nn+"]="+En}).join(";"),";")}else ee(Hr)?(Sr=Er.link($r,{stable:!0}),Or(ln,".",On[Zr],"(",Sr,");",pn,".",Zr,"=",Sr,";")):Or(ln,".",On[Zr],"(",$r,");",pn,".",Zr,"=",$r,";")}})}function An(Er,Or){yr&&(Er.instancing=Or.def(Er.shared.extensions,".angle_instanced_arrays"))}function wn(Er,Or,Ar,Fr,yn){function Pn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function pn(Nn){kn=Or.def(),Nn(kn,"=",Pn(),";"),typeof yn=="string"?Nn(Hr,".count+=",yn,";"):Nn(Hr,".count++;"),Kt&&(Fr?(En=Or.def(),Nn(En,"=",bn,".getNumPendingQueries();")):Nn(bn,".beginQuery(",Hr,");"))}function ln(Nn){Nn(Hr,".cpuTime+=",Pn(),"-",kn,";"),Kt&&(Fr?Nn(bn,".pushScopeStats(",En,",",bn,".getNumPendingQueries(),",Hr,");"):Nn(bn,".endQuery();"))}function Sr(Nn){var Fn=Or.def($r,".profile");Or($r,".profile=",Nn,";"),Or.exit($r,".profile=",Fn,";")}var Zr=Er.shared,Hr=Er.stats,$r=Zr.current,bn=Zr.timer;Ar=Ar.profile;var kn,En;if(Ar){if(ee(Ar)){Ar.enable?(pn(Or),ln(Or.exit),Sr("true")):Sr("false");return}Ar=Ar.append(Er,Or),Sr(Ar)}else Ar=Or.def($r,".profile");Zr=Er.block(),pn(Zr),Or("if(",Ar,"){",Zr,"}"),Er=Er.block(),ln(Er),Or.exit("if(",Ar,"){",Er,"}")}function Tr(Er,Or,Ar,Fr,yn){function Pn(Sr){switch(Sr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function pn(Sr,Zr,Hr){function $r(){Or("if(!",Nn,".buffer){",kn,".enableVertexAttribArray(",En,");}");var gi=Hr.type,Li;Li=Hr.size?Or.def(Hr.size,"||",Zr):Zr,Or("if(",Nn,".type!==",gi,"||",Nn,".size!==",Li,"||",si.map(function(ma){return Nn+"."+ma+"!=="+Hr[ma]}).join("||"),"){",kn,".bindBuffer(",34962,",",Fn,".buffer);",kn,".vertexAttribPointer(",[En,Li,gi,Hr.normalized,Hr.stride,Hr.offset],");",Nn,".type=",gi,";",Nn,".size=",Li,";",si.map(function(ma){return Nn+"."+ma+"="+Hr[ma]+";"}).join(""),"}"),yr&&(gi=Hr.divisor,Or("if(",Nn,".divisor!==",gi,"){",Er.instancing,".vertexAttribDivisorANGLE(",[En,gi],");",Nn,".divisor=",gi,";}"))}function bn(){Or("if(",Nn,".buffer){",kn,".disableVertexAttribArray(",En,");",Nn,".buffer=null;","}if(",st.map(function(gi,Li){return Nn+"."+gi+"!=="+vi[Li]}).join("||"),"){",kn,".vertexAttrib4f(",En,",",vi,");",st.map(function(gi,Li){return Nn+"."+gi+"="+vi[Li]+";"}).join(""),"}")}var kn=ln.gl,En=Or.def(Sr,".location"),Nn=Or.def(ln.attributes,"[",En,"]");Sr=Hr.state;var Fn=Hr.buffer,vi=[Hr.x,Hr.y,Hr.z,Hr.w],si=["buffer","normalized","offset","stride"];Sr===1?$r():Sr===2?bn():(Or("if(",Sr,"===",1,"){"),$r(),Or("}else{"),bn(),Or("}"))}var ln=Er.shared;Fr.forEach(function(Sr){var Zr=Sr.name,Hr=Ar.attributes[Zr],$r;if(Hr){if(!yn(Hr))return;$r=Hr.append(Er,Or)}else{if(!yn(Xt))return;var bn=Er.scopeAttrib(Zr);$r={},Object.keys(new Hn).forEach(function(kn){$r[kn]=Or.def(bn,".",kn)})}pn(Er.link(Sr),Pn(Sr.info.type),$r)})}function kr(Er,Or,Ar,Fr,yn,Pn){for(var pn=Er.shared,ln=pn.gl,Sr,Zr=0;Zr<Fr.length;++Zr){var kn=Fr[Zr],Hr=kn.name,$r=kn.info.type,bn=Ar.uniforms[Hr],kn=Er.link(kn)+".location",En;if(bn){if(!yn(bn))continue;if(ee(bn)){if(Hr=bn.value,$r===35678||$r===35680)$r=Er.link(Hr._texture||Hr.color[0]._texture),Or(ln,".uniform1i(",kn,",",$r+".bind());"),Or.exit($r,".unbind();");else if($r===35674||$r===35675||$r===35676)Hr=Er.global.def("new Float32Array(["+Array.prototype.slice.call(Hr)+"])"),bn=2,$r===35675?bn=3:$r===35676&&(bn=4),Or(ln,".uniformMatrix",bn,"fv(",kn,",false,",Hr,");");else{switch($r){case 5126:Sr="1f";break;case 35664:Sr="2f";break;case 35665:Sr="3f";break;case 35666:Sr="4f";break;case 35670:Sr="1i";break;case 5124:Sr="1i";break;case 35671:Sr="2i";break;case 35667:Sr="2i";break;case 35672:Sr="3i";break;case 35668:Sr="3i";break;case 35673:Sr="4i";break;case 35669:Sr="4i"}Or(ln,".uniform",Sr,"(",kn,",",A(Hr)?Array.prototype.slice.call(Hr):Hr,");")}continue}else En=bn.append(Er,Or)}else{if(!yn(Xt))continue;En=Or.def(pn.uniforms,"[",jt.id(Hr),"]")}switch($r===35678?Or("if(",En,"&&",En,'._reglType==="framebuffer"){',En,"=",En,".color[0];","}"):$r===35680&&Or("if(",En,"&&",En,'._reglType==="framebufferCube"){',En,"=",En,".color[0];","}"),Hr=1,$r){case 35678:case 35680:$r=Or.def(En,"._texture"),Or(ln,".uniform1i(",kn,",",$r,".bind());"),Or.exit($r,".unbind();");continue;case 5124:case 35670:Sr="1i";break;case 35667:case 35671:Sr="2i",Hr=2;break;case 35668:case 35672:Sr="3i",Hr=3;break;case 35669:case 35673:Sr="4i",Hr=4;break;case 5126:Sr="1f";break;case 35664:Sr="2f",Hr=2;break;case 35665:Sr="3f",Hr=3;break;case 35666:Sr="4f",Hr=4;break;case 35674:Sr="Matrix2fv";break;case 35675:Sr="Matrix3fv";break;case 35676:Sr="Matrix4fv"}if(Sr.charAt(0)==="M"){Or(ln,".uniform",Sr,"(",kn,",");var kn=Math.pow($r-35674+2,2),Nn=Er.global.def("new Float32Array(",kn,")");Array.isArray(En)?Or("false,(",o(kn,function(si){return Nn+"["+si+"]="+En[si]}),",",Nn,")"):Or("false,(Array.isArray(",En,")||",En," instanceof Float32Array)?",En,":(",o(kn,function(si){return Nn+"["+si+"]="+En+"["+si+"]"}),",",Nn,")"),Or(");")}else{if(1<Hr){for(var $r=[],Fn=[],bn=0;bn<Hr;++bn)Array.isArray(En)?Fn.push(En[bn]):Fn.push(Or.def(En+"["+bn+"]")),Pn&&$r.push(Or.def());Pn&&Or("if(!",Er.batchId,"||",$r.map(function(vi,si){return vi+"!=="+Fn[si]}).join("||"),"){",$r.map(function(vi,si){return vi+"="+Fn[si]+";"}).join("")),Or(ln,".uniform",Sr,"(",kn,",",Fn.join(","),");")}else Pn&&($r=Or.def(),Or("if(!",Er.batchId,"||",$r,"!==",En,"){",$r,"=",En,";")),Or(ln,".uniform",Sr,"(",kn,",",En,");");Pn&&Or("}")}}}function Wr(Er,Or,Ar,Fr){function yn(gi){var Li=Hr[gi];return Li?Li.contextDep&&Fr.contextDynamic||Li.propDep?Li.append(Er,Ar):Li.append(Er,Or):Or.def(Zr,".",gi)}function Pn(){function gi(){Ar(Fn,".drawElementsInstancedANGLE(",[bn,En,vi,kn+"<<(("+vi+"-5121)>>1)",Nn],");")}function Li(){Ar(Fn,".drawArraysInstancedANGLE(",[bn,kn,En,Nn],");")}$r&&$r!=="null"?si?gi():(Ar("if(",$r,"){"),gi(),Ar("}else{"),Li(),Ar("}")):Li()}function pn(){function gi(){Ar(Sr+".drawElements("+[bn,En,vi,kn+"<<(("+vi+"-5121)>>1)"]+");")}function Li(){Ar(Sr+".drawArrays("+[bn,kn,En]+");")}$r&&$r!=="null"?si?gi():(Ar("if(",$r,"){"),gi(),Ar("}else{"),Li(),Ar("}")):Li()}var ln=Er.shared,Sr=ln.gl,Zr=ln.draw,Hr=Fr.draw,$r=function(){var gi=Hr.elements,Li=Or;return gi?((gi.contextDep&&Fr.contextDynamic||gi.propDep)&&(Li=Ar),gi=gi.append(Er,Li),Hr.elementsActive&&Li("if("+gi+")"+Sr+".bindBuffer(34963,"+gi+".buffer.buffer);")):(gi=Li.def(),Li(gi,"=",Zr,".","elements",";","if(",gi,"){",Sr,".bindBuffer(",34963,",",gi,".buffer.buffer);}","else if(",ln.vao,".currentVAO){",gi,"=",Er.shared.elements+".getElements("+ln.vao,".currentVAO.elements);",Kr?"":"if("+gi+")"+Sr+".bindBuffer(34963,"+gi+".buffer.buffer);","}")),gi}(),bn=yn("primitive"),kn=yn("offset"),En=function(){var gi=Hr.count,Li=Or;return gi?((gi.contextDep&&Fr.contextDynamic||gi.propDep)&&(Li=Ar),gi=gi.append(Er,Li)):gi=Li.def(Zr,".","count"),gi}();if(typeof En=="number"){if(En===0)return}else Ar("if(",En,"){"),Ar.exit("}");var Nn,Fn;yr&&(Nn=yn("instances"),Fn=Er.instancing);var vi=$r+".type",si=Hr.elements&&ee(Hr.elements)&&!Hr.vaoActive;yr&&(typeof Nn!="number"||0<=Nn)?typeof Nn=="string"?(Ar("if(",Nn,">0){"),Pn(),Ar("}else if(",Nn,"<0){"),pn(),Ar("}")):Pn():pn()}function zr(Er,Or,Ar,Fr,yn){return Or=zt(),yn=Or.proc("body",yn),yr&&(Or.instancing=yn.def(Or.shared.extensions,".angle_instanced_arrays")),Er(Or,yn,Ar,Fr),Or.compile().body}function sn(Er,Or,Ar,Fr){An(Er,Or),Ar.useVAO?Ar.drawVAO?Or(Er.shared.vao,".setVAO(",Ar.drawVAO.append(Er,Or),");"):Or(Er.shared.vao,".setVAO(",Er.shared.vao,".targetVAO);"):(Or(Er.shared.vao,".setVAO(null);"),Tr(Er,Or,Ar,Fr.attributes,function(){return!0})),kr(Er,Or,Ar,Fr.uniforms,function(){return!0},!1),Wr(Er,Or,Or,Ar)}function un(Er,Or){var Ar=Er.proc("draw",1);An(Er,Ar),_r(Er,Ar,Or.context),Rr(Er,Ar,Or.framebuffer),nn(Er,Ar,Or),en(Er,Ar,Or.state),wn(Er,Ar,Or,!1,!0);var Fr=Or.shader.progVar.append(Er,Ar);if(Ar(Er.shared.gl,".useProgram(",Fr,".program);"),Or.shader.program)sn(Er,Ar,Or,Or.shader.program);else{Ar(Er.shared.vao,".setVAO(null);");var yn=Er.global.def("{}"),Pn=Ar.def(Fr,".id"),pn=Ar.def(yn,"[",Pn,"]");Ar(Er.cond(pn).then(pn,".call(this,a0);").else(pn,"=",yn,"[",Pn,"]=",Er.link(function(ln){return zr(sn,Er,Or,ln,1)}),"(",Fr,");",pn,".call(this,a0);"))}0<Object.keys(Or.state).length&&Ar(Er.shared.current,".dirty=true;"),Er.shared.vao&&Ar(Er.shared.vao,".setVAO(null);")}function Mn(Er,Or,Ar,Fr){function yn(){return!0}Er.batchId="a1",An(Er,Or),Tr(Er,Or,Ar,Fr.attributes,yn),kr(Er,Or,Ar,Fr.uniforms,yn,!1),Wr(Er,Or,Or,Ar)}function Ln(Er,Or,Ar,Fr){function yn($r){return $r.contextDep&&pn||$r.propDep}function Pn($r){return!yn($r)}An(Er,Or);var pn=Ar.contextDep,ln=Or.def(),Sr=Or.def();Er.shared.props=Sr,Er.batchId=ln;var Zr=Er.scope(),Hr=Er.scope();Or(Zr.entry,"for(",ln,"=0;",ln,"<","a1",";++",ln,"){",Sr,"=","a0","[",ln,"];",Hr,"}",Zr.exit),Ar.needsContext&&_r(Er,Hr,Ar.context),Ar.needsFramebuffer&&Rr(Er,Hr,Ar.framebuffer),en(Er,Hr,Ar.state,yn),Ar.profile&&yn(Ar.profile)&&wn(Er,Hr,Ar,!1,!0),Fr?(Ar.useVAO?Ar.drawVAO?yn(Ar.drawVAO)?Hr(Er.shared.vao,".setVAO(",Ar.drawVAO.append(Er,Hr),");"):Zr(Er.shared.vao,".setVAO(",Ar.drawVAO.append(Er,Zr),");"):Zr(Er.shared.vao,".setVAO(",Er.shared.vao,".targetVAO);"):(Zr(Er.shared.vao,".setVAO(null);"),Tr(Er,Zr,Ar,Fr.attributes,Pn),Tr(Er,Hr,Ar,Fr.attributes,yn)),kr(Er,Zr,Ar,Fr.uniforms,Pn,!1),kr(Er,Hr,Ar,Fr.uniforms,yn,!0),Wr(Er,Zr,Hr,Ar)):(Or=Er.global.def("{}"),Fr=Ar.shader.progVar.append(Er,Hr),Sr=Hr.def(Fr,".id"),Zr=Hr.def(Or,"[",Sr,"]"),Hr(Er.shared.gl,".useProgram(",Fr,".program);","if(!",Zr,"){",Zr,"=",Or,"[",Sr,"]=",Er.link(function($r){return zr(Mn,Er,Ar,$r,2)}),"(",Fr,");}",Zr,".call(this,a0[",ln,"],",ln,");"))}function Un(Er,Or){function Ar(Zr){return Zr.contextDep&&yn||Zr.propDep}var Fr=Er.proc("batch",2);Er.batchId="0",An(Er,Fr);var yn=!1,Pn=!0;Object.keys(Or.context).forEach(function(Zr){yn=yn||Or.context[Zr].propDep}),yn||(_r(Er,Fr,Or.context),Pn=!1);var pn=Or.framebuffer,ln=!1;if(pn?(pn.propDep?yn=ln=!0:pn.contextDep&&yn&&(ln=!0),ln||Rr(Er,Fr,pn)):Rr(Er,Fr,null),Or.state.viewport&&Or.state.viewport.propDep&&(yn=!0),nn(Er,Fr,Or),en(Er,Fr,Or.state,function(Zr){return!Ar(Zr)}),Or.profile&&Ar(Or.profile)||wn(Er,Fr,Or,!1,"a1"),Or.contextDep=yn,Or.needsContext=Pn,Or.needsFramebuffer=ln,Pn=Or.shader.progVar,Pn.contextDep&&yn||Pn.propDep)Ln(Er,Fr,Or,null);else if(Pn=Pn.append(Er,Fr),Fr(Er.shared.gl,".useProgram(",Pn,".program);"),Or.shader.program)Ln(Er,Fr,Or,Or.shader.program);else{Fr(Er.shared.vao,".setVAO(null);");var pn=Er.global.def("{}"),ln=Fr.def(Pn,".id"),Sr=Fr.def(pn,"[",ln,"]");Fr(Er.cond(Sr).then(Sr,".call(this,a0,a1);").else(Sr,"=",pn,"[",ln,"]=",Er.link(function($r){return zr(Ln,Er,Or,$r,2)}),"(",Pn,");",Sr,".call(this,a0,a1);"))}0<Object.keys(Or.state).length&&Fr(Er.shared.current,".dirty=true;"),Er.shared.vao&&Fr(Er.shared.vao,".setVAO(null);")}function ai(Er,Or){function Ar(ln){var Sr=Or.shader[ln];Sr&&(Sr=Sr.append(Er,Fr),isNaN(Sr)?Fr.set(yn.shader,"."+ln,Sr):Fr.set(yn.shader,"."+ln,Er.link(Sr,{stable:!0})))}var Fr=Er.proc("scope",3);Er.batchId="a2";var yn=Er.shared,Pn=yn.current;if(_r(Er,Fr,Or.context),Or.framebuffer&&Or.framebuffer.append(Er,Fr),ie(Object.keys(Or.state)).forEach(function(ln){var Sr=Or.state[ln],Zr=Sr.append(Er,Fr);A(Zr)?Zr.forEach(function(Hr,$r){isNaN(Hr)?Fr.set(Er.next[ln],"["+$r+"]",Hr):Fr.set(Er.next[ln],"["+$r+"]",Er.link(Hr,{stable:!0}))}):ee(Sr)?Fr.set(yn.next,"."+ln,Er.link(Zr,{stable:!0})):Fr.set(yn.next,"."+ln,Zr)}),wn(Er,Fr,Or,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(ln){var Sr=Or.draw[ln];Sr&&(Sr=Sr.append(Er,Fr),isNaN(Sr)?Fr.set(yn.draw,"."+ln,Sr):Fr.set(yn.draw,"."+ln,Er.link(Sr),{stable:!0}))}),Object.keys(Or.uniforms).forEach(function(ln){var Sr=Or.uniforms[ln].append(Er,Fr);Array.isArray(Sr)&&(Sr="["+Sr.map(function(Zr){return isNaN(Zr)?Zr:Er.link(Zr,{stable:!0})})+"]"),Fr.set(yn.uniforms,"["+Er.link(jt.id(ln),{stable:!0})+"]",Sr)}),Object.keys(Or.attributes).forEach(function(ln){var Sr=Or.attributes[ln].append(Er,Fr),Zr=Er.scopeAttrib(ln);Object.keys(new Hn).forEach(function(Hr){Fr.set(Zr,"."+Hr,Sr[Hr])})}),Or.scopeVAO){var pn=Or.scopeVAO.append(Er,Fr);isNaN(pn)?Fr.set(yn.vao,".targetVAO",pn):Fr.set(yn.vao,".targetVAO",Er.link(pn,{stable:!0}))}Ar("vert"),Ar("frag"),0<Object.keys(Or.state).length&&(Fr(Pn,".dirty=true;"),Fr.exit(Pn,".dirty=true;")),Fr("a1(",Er.shared.context,",a0,",Er.batchId,");")}function yi(Er){if(typeof Er=="object"&&!A(Er)){for(var Or=Object.keys(Er),Ar=0;Ar<Or.length;++Ar)if(xe.isDynamic(Er[Or[Ar]]))return!0;return!1}}function bi(Er,Or,Ar){function Fr($r,bn){pn.forEach(function(kn){var En=yn[kn];xe.isDynamic(En)&&(En=$r.invoke(bn,En),bn(Hr,".",kn,"=",En,";"))})}var yn=Or.static[Ar];if(yn&&yi(yn)){var Pn=Er.global,pn=Object.keys(yn),ln=!1,Sr=!1,Zr=!1,Hr=Er.global.def("{}");pn.forEach(function($r){var bn=yn[$r];if(xe.isDynamic(bn))typeof bn=="function"&&(bn=yn[$r]=xe.unbox(bn)),$r=j(bn,null),ln=ln||$r.thisDep,Zr=Zr||$r.propDep,Sr=Sr||$r.contextDep;else{switch(Pn(Hr,".",$r,"="),typeof bn){case"number":Pn(bn);break;case"string":Pn('"',bn,'"');break;case"object":Array.isArray(bn)&&Pn("[",bn.join(),"]");break;default:Pn(Er.link(bn))}Pn(";")}}),Or.dynamic[Ar]=new xe.DynamicVariable(4,{thisDep:ln,contextDep:Sr,propDep:Zr,ref:Hr,append:Fr}),delete Or.static[Ar]}}var Hn=Pt.Record,Kn={add:32774,subtract:32778,"reverse subtract":32779};Qt.ext_blend_minmax&&(Kn.min=32775,Kn.max=32776);var yr=Qt.angle_instanced_arrays,qr=Qt.webgl_draw_buffers,Kr=Qt.oes_vertex_array_object,hn={dirty:!0,profile:cr.profile},zn={},xn=[],Tn={},On={};Xe("dither",3024),Xe("blend.enable",3042),He("blend.color","blendColor",[0,0,0,0]),He("blend.equation","blendEquationSeparate",[32774,32774]),He("blend.func","blendFuncSeparate",[1,0,1,0]),Xe("depth.enable",2929,!0),He("depth.func","depthFunc",513),He("depth.range","depthRange",[0,1]),He("depth.mask","depthMask",!0),He("colorMask","colorMask",[!0,!0,!0,!0]),Xe("cull.enable",2884),He("cull.face","cullFace",1029),He("frontFace","frontFace",2305),He("lineWidth","lineWidth",1),Xe("polygonOffset.enable",32823),He("polygonOffset.offset","polygonOffset",[0,0]),Xe("sample.alpha",32926),Xe("sample.enable",32928),He("sample.coverage","sampleCoverage",[1,!1]),Xe("stencil.enable",2960),He("stencil.mask","stencilMask",-1),He("stencil.func","stencilFunc",[519,0,-1]),He("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),He("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Xe("scissor.enable",3089),He("scissor.box","scissor",[0,0,gt.drawingBufferWidth,gt.drawingBufferHeight]),He("viewport","viewport",[0,0,gt.drawingBufferWidth,gt.drawingBufferHeight]);var Jn={gl:gt,context:Nt,strings:jt,next:zn,current:hn,draw:Bt,elements:mt,buffer:or,shader:Ht,attributes:Pt.state,vao:Pt,uniforms:St,framebuffer:bt,extensions:Qt,timer:Kt,isBufferArgs:J},hi={primTypes:$e,compareFuncs:Zt,blendFuncs:Gt,blendEquations:Kn,stencilOps:Tt,glTypes:Oe,orientationType:It};qr&&(hi.backBuffer=[1029],hi.drawBuffer=o(mr.maxDrawbuffers,function(Er){return Er===0?[0]:o(Er,function(Or){return 36064+Or})}));var Ri=0;return{next:zn,current:hn,procs:function(){var Er=zt(),Or=Er.proc("poll"),Ar=Er.proc("refresh"),Fr=Er.block();Or(Fr),Ar(Fr);var Sr=Er.shared,yn=Sr.gl,Pn=Sr.next,pn=Sr.current;Fr(pn,".dirty=false;"),Rr(Er,Or),Rr(Er,Ar,null,!0);var ln;yr&&(ln=Er.link(yr)),Qt.oes_vertex_array_object&&Ar(Er.link(Qt.oes_vertex_array_object),".bindVertexArrayOES(null);");var Sr=Ar.def(Sr.attributes),Zr=Ar.def(0),Hr=Er.cond(Zr,".buffer");Hr.then(yn,".enableVertexAttribArray(i);",yn,".bindBuffer(",34962,",",Zr,".buffer.buffer);",yn,".vertexAttribPointer(i,",Zr,".size,",Zr,".type,",Zr,".normalized,",Zr,".stride,",Zr,".offset);").else(yn,".disableVertexAttribArray(i);",yn,".vertexAttrib4f(i,",Zr,".x,",Zr,".y,",Zr,".z,",Zr,".w);",Zr,".buffer=null;");var $r=Er.link(mr.maxAttributes,{stable:!0});return Ar("for(var i=0;i<",$r,";++i){",Zr,"=",Sr,"[i];",Hr,"}"),yr&&Ar("for(var i=0;i<",$r,";++i){",ln,".vertexAttribDivisorANGLE(i,",Sr,"[i].divisor);","}"),Ar(Er.shared.vao,".currentVAO=null;",Er.shared.vao,".setVAO(",Er.shared.vao,".targetVAO);"),Object.keys(Tn).forEach(function(bn){var kn=Tn[bn],En=Fr.def(Pn,".",bn),Nn=Er.block();Nn("if(",En,"){",yn,".enable(",kn,")}else{",yn,".disable(",kn,")}",pn,".",bn,"=",En,";"),Ar(Nn),Or("if(",En,"!==",pn,".",bn,"){",Nn,"}")}),Object.keys(On).forEach(function(bn){var kn=On[bn],En=hn[bn],Nn,Fn,vi=Er.block();vi(yn,".",kn,"("),A(En)?(kn=En.length,Nn=Er.global.def(Pn,".",bn),Fn=Er.global.def(pn,".",bn),vi(o(kn,function(si){return Nn+"["+si+"]"}),");",o(kn,function(si){return Fn+"["+si+"]="+Nn+"["+si+"];"}).join("")),Or("if(",o(kn,function(si){return Nn+"["+si+"]!=="+Fn+"["+si+"]"}).join("||"),"){",vi,"}")):(Nn=Fr.def(Pn,".",bn),Fn=Fr.def(pn,".",bn),vi(Nn,");",pn,".",bn,"=",Nn,";"),Or("if(",Nn,"!==",Fn,"){",vi,"}")),Ar(vi)}),Er.compile()}(),compile:function(Er,Or,Ar,Fr,yn){var Pn=zt();Pn.stats=Pn.link(yn),Object.keys(Or.static).forEach(function(ln){bi(Pn,Or,ln)}),lt.forEach(function(ln){bi(Pn,Er,ln)});var pn=Vr(Er,Or,Ar,Fr,Pn);return pn.shader.program&&(pn.shader.program.attributes.sort(function(ln,Sr){return ln.name<Sr.name?-1:1}),pn.shader.program.uniforms.sort(function(ln,Sr){return ln.name<Sr.name?-1:1})),un(Pn,pn),ai(Pn,pn),Un(Pn,pn),re(Pn.compile(),{destroy:function(){pn.shader.program.destroy()}})}}}function fe(gt,jt){for(var Qt=0;Qt<gt.length;++Qt)if(gt[Qt]===jt)return Qt;return-1}var re=function(gt,jt){for(var Qt=Object.keys(jt),mr=0;mr<Qt.length;++mr)gt[Qt[mr]]=jt[Qt[mr]];return gt},ce=0,xe={DynamicVariable:F,define:function(gt,jt){return new F(gt,d(jt+""))},isDynamic:function(gt){return typeof gt=="function"&&!gt._reglType||gt instanceof F},unbox:S,accessor:d},Te={next:typeof requestAnimationFrame=="function"?function(gt){return requestAnimationFrame(gt)}:function(gt){return setTimeout(gt,16)},cancel:typeof cancelAnimationFrame=="function"?function(gt){return cancelAnimationFrame(gt)}:clearTimeout},we=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},_e=f();_e.zero=f();var ke=function(gt,jt){var Qt=1;jt.ext_texture_filter_anisotropic&&(Qt=gt.getParameter(34047));var mr=1,or=1;jt.webgl_draw_buffers&&(mr=gt.getParameter(34852),or=gt.getParameter(36063));var mt=!!jt.oes_texture_float;if(mt){mt=gt.createTexture(),gt.bindTexture(3553,mt),gt.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ut=gt.createFramebuffer();if(gt.bindFramebuffer(36160,ut),gt.framebufferTexture2D(36160,36064,3553,mt,0),gt.bindTexture(3553,null),gt.checkFramebufferStatus(36160)!==36053)mt=!1;else{gt.viewport(0,0,1,1),gt.clearColor(1,0,0,1),gt.clear(16384);var bt=_e.allocType(5126,4);gt.readPixels(0,0,1,1,6408,5126,bt),gt.getError()?mt=!1:(gt.deleteFramebuffer(ut),gt.deleteTexture(mt),mt=bt[0]===1),_e.freeType(bt)}}return bt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(bt=gt.createTexture(),ut=_e.allocType(5121,36),gt.activeTexture(33984),gt.bindTexture(34067,bt),gt.texImage2D(34069,0,6408,3,3,0,6408,5121,ut),_e.freeType(ut),gt.bindTexture(34067,null),gt.deleteTexture(bt),bt=!gt.getError()),{colorBits:[gt.getParameter(3410),gt.getParameter(3411),gt.getParameter(3412),gt.getParameter(3413)],depthBits:gt.getParameter(3414),stencilBits:gt.getParameter(3415),subpixelBits:gt.getParameter(3408),extensions:Object.keys(jt).filter(function(St){return!!jt[St]}),maxAnisotropic:Qt,maxDrawbuffers:mr,maxColorAttachments:or,pointSizeDims:gt.getParameter(33901),lineWidthDims:gt.getParameter(33902),maxViewportDims:gt.getParameter(3386),maxCombinedTextureUnits:gt.getParameter(35661),maxCubeMapSize:gt.getParameter(34076),maxRenderbufferSize:gt.getParameter(34024),maxTextureUnits:gt.getParameter(34930),maxTextureSize:gt.getParameter(3379),maxAttributes:gt.getParameter(34921),maxVertexUniforms:gt.getParameter(36347),maxVertexTextureUnits:gt.getParameter(35660),maxVaryingVectors:gt.getParameter(36348),maxFragmentUniforms:gt.getParameter(36349),glsl:gt.getParameter(35724),renderer:gt.getParameter(7937),vendor:gt.getParameter(7936),version:gt.getParameter(7938),readFloat:mt,npotTextureCube:bt}},Ne=function(gt){return gt instanceof Uint8Array||gt instanceof Uint16Array||gt instanceof Uint32Array||gt instanceof Int8Array||gt instanceof Int16Array||gt instanceof Int32Array||gt instanceof Float32Array||gt instanceof Float64Array||gt instanceof Uint8ClampedArray},Ee=function(gt){return Object.keys(gt).map(function(jt){return gt[jt]})},ze={shape:function(gt){for(var jt=[];gt.length;gt=gt[0])jt.push(gt.length);return jt},flatten:function(gt,jt,Qt,mr){var or=1;if(jt.length)for(var mt=0;mt<jt.length;++mt)or*=jt[mt];else or=0;switch(Qt=mr||_e.allocType(Qt,or),jt.length){case 0:break;case 1:for(mr=jt[0],jt=0;jt<mr;++jt)Qt[jt]=gt[jt];break;case 2:for(mr=jt[0],jt=jt[1],mt=or=0;mt<mr;++mt)for(var ut=gt[mt],bt=0;bt<jt;++bt)Qt[or++]=ut[bt];break;case 3:l(gt,jt[0],jt[1],jt[2],Qt,0);break;default:m(gt,jt,0,Qt,0)}return Qt}},Ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Oe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Le={dynamic:35048,stream:35040,static:35044},Ge=ze.flatten,rt=ze.shape,ot=[];ot[5120]=1,ot[5122]=2,ot[5124]=4,ot[5121]=1,ot[5123]=2,ot[5125]=4,ot[5126]=4;var $e={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},qe=new Float32Array(1),ht=new Uint32Array(qe.buffer),vt=[9984,9986,9985,9987],pt=[0,6409,6410,6407,6408],wt={};wt[6409]=wt[6406]=wt[6402]=1,wt[34041]=wt[6410]=2,wt[6407]=wt[35904]=3,wt[6408]=wt[35906]=4;var Et=P("HTMLCanvasElement"),nt=P("OffscreenCanvas"),Fe=P("CanvasRenderingContext2D"),We=P("ImageBitmap"),Ze=P("HTMLImageElement"),Ye=P("HTMLVideoElement"),Ie=Object.keys(Ce).concat([Et,nt,Fe,We,Ze,Ye]),De=[];De[5121]=1,De[5126]=4,De[36193]=2,De[5123]=2,De[5125]=4;var je=[];je[32854]=2,je[32855]=2,je[36194]=2,je[34041]=4,je[33776]=.5,je[33777]=.5,je[33778]=1,je[33779]=1,je[35986]=.5,je[35987]=1,je[34798]=1,je[35840]=.5,je[35841]=.25,je[35842]=.5,je[35843]=.25,je[36196]=.5;var Re=[];Re[32854]=2,Re[32855]=2,Re[36194]=2,Re[33189]=2,Re[36168]=1,Re[34041]=4,Re[35907]=4,Re[34836]=16,Re[34842]=8,Re[34843]=6;var pe=function(gt,jt,Qt,mr,or){function mt(Bt){this.id=Pt++,this.refCount=1,this.renderbuffer=Bt,this.format=32854,this.height=this.width=0,or.profile&&(this.stats={size:0})}function ut(Bt){var Nt=Bt.renderbuffer;gt.bindRenderbuffer(36161,null),gt.deleteRenderbuffer(Nt),Bt.renderbuffer=null,Bt.refCount=0,delete Ht[Bt.id],mr.renderbufferCount--}var bt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};jt.ext_srgb&&(bt.srgba=35907),jt.ext_color_buffer_half_float&&(bt.rgba16f=34842,bt.rgb16f=34843),jt.webgl_color_buffer_float&&(bt.rgba32f=34836);var St=[];Object.keys(bt).forEach(function(Bt){St[bt[Bt]]=Bt});var Pt=0,Ht={};return mt.prototype.decRef=function(){0>=--this.refCount&&ut(this)},or.profile&&(mr.getTotalRenderbufferSize=function(){var Bt=0;return Object.keys(Ht).forEach(function(Nt){Bt+=Ht[Nt].stats.size}),Bt}),{create:function(Bt,Nt){function Kt(cr,dr){var Xe=0,He=0,zt=32854;if(typeof cr=="object"&&cr?("shape"in cr?(He=cr.shape,Xe=He[0]|0,He=He[1]|0):("radius"in cr&&(Xe=He=cr.radius|0),"width"in cr&&(Xe=cr.width|0),"height"in cr&&(He=cr.height|0)),"format"in cr&&(zt=bt[cr.format])):typeof cr=="number"?(Xe=cr|0,He=typeof dr=="number"?dr|0:Xe):cr||(Xe=He=1),Xe!==fr.width||He!==fr.height||zt!==fr.format)return Kt.width=fr.width=Xe,Kt.height=fr.height=He,fr.format=zt,gt.bindRenderbuffer(36161,fr.renderbuffer),gt.renderbufferStorage(36161,zt,Xe,He),or.profile&&(fr.stats.size=Re[fr.format]*fr.width*fr.height),Kt.format=St[fr.format],Kt}var fr=new mt(gt.createRenderbuffer());return Ht[fr.id]=fr,mr.renderbufferCount++,Kt(Bt,Nt),Kt.resize=function(cr,dr){var Xe=cr|0,He=dr|0||Xe;return Xe===fr.width&&He===fr.height||(Kt.width=fr.width=Xe,Kt.height=fr.height=He,gt.bindRenderbuffer(36161,fr.renderbuffer),gt.renderbufferStorage(36161,fr.format,Xe,He),or.profile&&(fr.stats.size=Re[fr.format]*fr.width*fr.height)),Kt},Kt._reglType="renderbuffer",Kt._renderbuffer=fr,or.profile&&(Kt.stats=fr.stats),Kt.destroy=function(){fr.decRef()},Kt},clear:function(){Ee(Ht).forEach(ut)},restore:function(){Ee(Ht).forEach(function(Bt){Bt.renderbuffer=gt.createRenderbuffer(),gt.bindRenderbuffer(36161,Bt.renderbuffer),gt.renderbufferStorage(36161,Bt.format,Bt.width,Bt.height)}),gt.bindRenderbuffer(36161,null)}}},be=[];be[6408]=4,be[6407]=3;var Ue=[];Ue[5121]=1,Ue[5126]=4,Ue[36193]=2;var et=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],st=["x","y","z","w"],lt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Gt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Tt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},It={cw:2304,ccw:2305},Xt=new K(!1,!1,!1,function(){}),gr=function(gt,jt){function Qt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function mr(Ht,Bt,Nt){var Kt=ut.pop()||new Qt;Kt.startQueryIndex=Ht,Kt.endQueryIndex=Bt,Kt.sum=0,Kt.stats=Nt,bt.push(Kt)}if(!jt.ext_disjoint_timer_query)return null;var or=[],mt=[],ut=[],bt=[],St=[],Pt=[];return{beginQuery:function(Ht){var Bt=or.pop()||jt.ext_disjoint_timer_query.createQueryEXT();jt.ext_disjoint_timer_query.beginQueryEXT(35007,Bt),mt.push(Bt),mr(mt.length-1,mt.length,Ht)},endQuery:function(){jt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:mr,update:function(){var Ht,Bt;if(Ht=mt.length,Ht!==0){Pt.length=Math.max(Pt.length,Ht+1),St.length=Math.max(St.length,Ht+1),St[0]=0;var Nt=Pt[0]=0;for(Bt=Ht=0;Bt<mt.length;++Bt){var Kt=mt[Bt];jt.ext_disjoint_timer_query.getQueryObjectEXT(Kt,34919)?(Nt+=jt.ext_disjoint_timer_query.getQueryObjectEXT(Kt,34918),or.push(Kt)):mt[Ht++]=Kt,St[Bt+1]=Nt,Pt[Bt+1]=Ht}for(mt.length=Ht,Bt=Ht=0;Bt<bt.length;++Bt){var Nt=bt[Bt],fr=Nt.startQueryIndex,Kt=Nt.endQueryIndex;Nt.sum+=St[Kt]-St[fr],fr=Pt[fr],Kt=Pt[Kt],Kt===fr?(Nt.stats.gpuTime+=Nt.sum/1e6,ut.push(Nt)):(Nt.startQueryIndex=fr,Nt.endQueryIndex=Kt,bt[Ht++]=Nt)}bt.length=Ht}},getNumPendingQueries:function(){return mt.length},clear:function(){or.push.apply(or,mt);for(var Ht=0;Ht<or.length;Ht++)jt.ext_disjoint_timer_query.deleteQueryEXT(or[Ht]);mt.length=0,or.length=0},restore:function(){mt.length=0,or.length=0}}};return function(gt){function jt(){if(wn.length===0)zt&&zt.update(),zr=null;else{zr=Te.next(jt),Ht();for(var un=wn.length-1;0<=un;--un){var Mn=wn[un];Mn&&Mn(sr,null,0)}Kt.flush(),zt&&zt.update()}}function Qt(){!zr&&0<wn.length&&(zr=Te.next(jt))}function mr(){zr&&(Te.cancel(jt),zr=null)}function or(un){un.preventDefault(),mr(),Tr.forEach(function(Mn){Mn()})}function mt(un){Kt.getError(),cr.restore(),xr.restore(),Ft.restore(),vr.restore(),Vr.restore(),_r.restore(),hr.restore(),zt&&zt.restore(),Rr.procs.refresh(),Qt(),kr.forEach(function(Mn){Mn()})}function ut(un){function Mn(hn,zn){var xn={},Tn={};return Object.keys(hn).forEach(function(On){var Jn=hn[On];if(xe.isDynamic(Jn))Tn[On]=xe.unbox(Jn,On);else{if(zn&&Array.isArray(Jn)){for(var hi=0;hi<Jn.length;++hi)if(xe.isDynamic(Jn[hi])){Tn[On]=xe.unbox(Jn,On);return}}xn[On]=Jn}}),{dynamic:Tn,static:xn}}function Ln(hn){for(;Kr.length<hn;)Kr.push(null);return Kr}var Un=Mn(un.context||{},!0),ai=Mn(un.uniforms||{},!0),yi=Mn(un.attributes||{},!1);un=Mn(function(hn){function zn(Tn){if(Tn in xn){var On=xn[Tn];delete xn[Tn],Object.keys(On).forEach(function(Jn){xn[Tn+"."+Jn]=On[Jn]})}}var xn=re({},hn);return delete xn.uniforms,delete xn.attributes,delete xn.context,delete xn.vao,"stencil"in xn&&xn.stencil.op&&(xn.stencil.opBack=xn.stencil.opFront=xn.stencil.op,delete xn.stencil.op),zn("blend"),zn("depth"),zn("cull"),zn("stencil"),zn("polygonOffset"),zn("scissor"),zn("sample"),"vao"in hn&&(xn.vao=hn.vao),xn}(un),!1);var bi={gpuTime:0,cpuTime:0,count:0},Hn=Rr.compile(un,yi,ai,Un,bi),Kn=Hn.draw,yr=Hn.batch,qr=Hn.scope,Kr=[];return re(function(hn,zn){var xn;if(typeof hn=="function")return qr.call(this,null,hn,0);if(typeof zn=="function")if(typeof hn=="number")for(xn=0;xn<hn;++xn)qr.call(this,null,zn,xn);else if(Array.isArray(hn))for(xn=0;xn<hn.length;++xn)qr.call(this,hn[xn],zn,xn);else return qr.call(this,hn,zn,0);else if(typeof hn=="number"){if(0<hn)return yr.call(this,Ln(hn|0),hn|0)}else if(Array.isArray(hn)){if(hn.length)return yr.call(this,hn,hn.length)}else return Kn.call(this,hn)},{stats:bi,destroy:function(){Hn.destroy()}})}function bt(un,Mn){var Ln=0;Rr.procs.poll();var Un=Mn.color;Un&&(Kt.clearColor(+Un[0]||0,+Un[1]||0,+Un[2]||0,+Un[3]||0),Ln|=16384),"depth"in Mn&&(Kt.clearDepth(+Mn.depth),Ln|=256),"stencil"in Mn&&(Kt.clearStencil(Mn.stencil|0),Ln|=1024),Kt.clear(Ln)}function St(un){return wn.push(un),Qt(),{cancel:function(){function Mn(){var Un=fe(wn,Mn);wn[Un]=wn[wn.length-1],--wn.length,0>=wn.length&&mr()}var Ln=fe(wn,un);wn[Ln]=Mn}}}function Pt(){var un=en.viewport,Mn=en.scissor_box;un[0]=un[1]=Mn[0]=Mn[1]=0,sr.viewportWidth=sr.framebufferWidth=sr.drawingBufferWidth=un[2]=Mn[2]=Kt.drawingBufferWidth,sr.viewportHeight=sr.framebufferHeight=sr.drawingBufferHeight=un[3]=Mn[3]=Kt.drawingBufferHeight}function Ht(){sr.tick+=1,sr.time=Nt(),Pt(),Rr.procs.poll()}function Bt(){vr.refresh(),Pt(),Rr.procs.refresh(),zt&&zt.update()}function Nt(){return(we()-Rt)/1e3}if(gt=r(gt),!gt)return null;var Kt=gt.gl,fr=Kt.getContextAttributes();Kt.isContextLost();var cr=t(Kt,gt);if(!cr)return null;var nn=n(),dr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Xe=gt.cachedCode||{},He=cr.extensions,zt=gr(Kt,He),Rt=we(),ur=Kt.drawingBufferWidth,Jt=Kt.drawingBufferHeight,sr={tick:0,time:0,viewportWidth:ur,viewportHeight:Jt,framebufferWidth:ur,framebufferHeight:Jt,drawingBufferWidth:ur,drawingBufferHeight:Jt,pixelRatio:gt.pixelRatio},ur={elements:null,primitive:4,count:-1,offset:0,instances:-1},er=ke(Kt,He),Ft=a(Kt,dr,gt,function(un){return hr.destroyBuffer(un)}),ir=p(Kt,He,Ft,dr),hr=O(Kt,He,er,dr,Ft,ir,ur),xr=N(Kt,nn,dr,gt),vr=k(Kt,He,er,function(){Rr.procs.poll()},sr,dr,gt),Vr=pe(Kt,He,er,dr,gt),_r=D(Kt,He,er,vr,Vr,dr),Rr=Z(Kt,nn,He,er,Ft,ir,vr,_r,{},hr,xr,ur,sr,zt,Xe,gt),nn=B(Kt,_r,Rr.procs.poll,sr),en=Rr.next,An=Kt.canvas,wn=[],Tr=[],kr=[],Wr=[gt.onDestroy],zr=null;An&&(An.addEventListener("webglcontextlost",or,!1),An.addEventListener("webglcontextrestored",mt,!1));var sn=_r.setFBO=ut({framebuffer:xe.define.call(null,1,"framebuffer")});return Bt(),fr=re(ut,{clear:function(un){if("framebuffer"in un)if(un.framebuffer&&un.framebuffer_reglType==="framebufferCube")for(var Mn=0;6>Mn;++Mn)sn(re({framebuffer:un.framebuffer.faces[Mn]},un),bt);else sn(un,bt);else bt(null,un)},prop:xe.define.bind(null,1),context:xe.define.bind(null,2),this:xe.define.bind(null,3),draw:ut({}),buffer:function(un){return Ft.create(un,34962,!1,!1)},elements:function(un){return ir.create(un,!1)},texture:vr.create2D,cube:vr.createCube,renderbuffer:Vr.create,framebuffer:_r.create,framebufferCube:_r.createCube,vao:hr.createVAO,attributes:fr,frame:St,on:function(un,Mn){var Ln;switch(un){case"frame":return St(Mn);case"lost":Ln=Tr;break;case"restore":Ln=kr;break;case"destroy":Ln=Wr}return Ln.push(Mn),{cancel:function(){for(var Un=0;Un<Ln.length;++Un)if(Ln[Un]===Mn){Ln[Un]=Ln[Ln.length-1],Ln.pop();break}}}},limits:er,hasExtension:function(un){return 0<=er.extensions.indexOf(un.toLowerCase())},read:nn,destroy:function(){wn.length=0,mr(),An&&(An.removeEventListener("webglcontextlost",or),An.removeEventListener("webglcontextrestored",mt)),xr.clear(),_r.clear(),Vr.clear(),hr.clear(),vr.clear(),ir.clear(),Ft.clear(),zt&&zt.clear(),Wr.forEach(function(un){un()})},_gl:Kt,_refresh:Bt,poll:function(){Ht(),zt&&zt.update()},now:Nt,stats:dr,getCachedCode:function(){return Xe},preloadCachedCode:function(un){Object.entries(un).forEach(function(Mn){Xe[Mn[0]]=Mn[1]})}}),gt.onDone(null,fr),fr}})},30456:function(U,F,e){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var d=e(33576),S=d.Buffer;function n(T,v){for(var g in T)v[g]=T[g]}S.from&&S.alloc&&S.allocUnsafe&&S.allocUnsafeSlow?U.exports=d:(n(d,F),F.Buffer=E);function E(T,v,g){return S(T,v,g)}E.prototype=Object.create(S.prototype),n(S,E),E.from=function(T,v,g){if(typeof T=="number")throw new TypeError("Argument must not be a number");return S(T,v,g)},E.alloc=function(T,v,g){if(typeof T!="number")throw new TypeError("Argument must be a number");var r=S(T);return v!==void 0?typeof g=="string"?r.fill(v,g):r.fill(v):r.fill(0),r},E.allocUnsafe=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return S(T)},E.allocUnsafeSlow=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return d.SlowBuffer(T)}},14500:function(U,F,e){var d=e(53664),S=e(64348),n=e(39640)(),E=e(2304),T=d("%TypeError%"),v=d("%Math.floor%");U.exports=function(r,t){if(typeof r!="function")throw new T("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||v(t)!==t)throw new T("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],i=!0,f=!0;if("length"in r&&E){var u=E(r,"length");u&&!u.configurable&&(i=!1),u&&!u.writable&&(f=!1)}return(i||f||!o)&&(n?S(r,"length",t,!0,!0):S(r,"length",t)),r}},29936:function(U,F,e){U.exports=n;var d=e(61252).EventEmitter,S=e(6768);S(n,d),n.Readable=e(12348),n.Writable=e(11288),n.Duplex=e(15316),n.Transform=e(22477),n.PassThrough=e(27136),n.finished=e(15932),n.pipeline=e(38180),n.Stream=n;function n(){d.call(this)}n.prototype.pipe=function(E,T){var v=this;function g(l){E.writable&&E.write(l)===!1&&v.pause&&v.pause()}v.on("data",g);function r(){v.readable&&v.resume&&v.resume()}E.on("drain",r),!E._isStdio&&(!T||T.end!==!1)&&(v.on("end",o),v.on("close",i));var t=!1;function o(){t||(t=!0,E.end())}function i(){t||(t=!0,typeof E.destroy=="function"&&E.destroy())}function f(l){if(u(),d.listenerCount(this,"error")===0)throw l}v.on("error",f),E.on("error",f);function u(){v.removeListener("data",g),E.removeListener("drain",r),v.removeListener("end",o),v.removeListener("close",i),v.removeListener("error",f),E.removeListener("error",f),v.removeListener("end",u),v.removeListener("close",u),E.removeListener("close",u)}return v.on("end",u),v.on("close",u),E.on("close",u),E.emit("pipe",v),E}},92784:function(U){function F(v,g){v.prototype=Object.create(g.prototype),v.prototype.constructor=v,v.__proto__=g}var e={};function d(v,g,r){r||(r=Error);function t(i,f,u){return typeof g=="string"?g:g(i,f,u)}var o=function(i){F(f,i);function f(u,l,m){return i.call(this,t(u,l,m))||this}return f}(r);o.prototype.name=r.name,o.prototype.code=v,e[v]=o}function S(v,g){if(Array.isArray(v)){var r=v.length;return v=v.map(function(t){return String(t)}),r>2?"one of ".concat(g," ").concat(v.slice(0,r-1).join(", "),", or ")+v[r-1]:r===2?"one of ".concat(g," ").concat(v[0]," or ").concat(v[1]):"of ".concat(g," ").concat(v[0])}else return"of ".concat(g," ").concat(String(v))}function n(v,g,r){return v.substr(0,g.length)===g}function E(v,g,r){return(r===void 0||r>v.length)&&(r=v.length),v.substring(r-g.length,r)===g}function T(v,g,r){return typeof r!="number"&&(r=0),r+g.length>v.length?!1:v.indexOf(g,r)!==-1}d("ERR_INVALID_OPT_VALUE",function(v,g){return'The value "'+g+'" is invalid for option "'+v+'"'},TypeError),d("ERR_INVALID_ARG_TYPE",function(v,g,r){var t;typeof g=="string"&&n(g,"not ")?(t="must not be",g=g.replace(/^not /,"")):t="must be";var o;if(E(v," argument"))o="The ".concat(v," ").concat(t," ").concat(S(g,"type"));else{var i=T(v,".")?"property":"argument";o='The "'.concat(v,'" ').concat(i," ").concat(t," ").concat(S(g,"type"))}return o+=". Received type ".concat(typeof r),o},TypeError),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),d("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),d("ERR_STREAM_PREMATURE_CLOSE","Premature close"),d("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),d("ERR_STREAM_WRITE_AFTER_END","write after end"),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),U.exports.i=e},15316:function(U,F,e){var d=e(4168),S=Object.keys||function(i){var f=[];for(var u in i)f.push(u);return f};U.exports=r;var n=e(12348),E=e(11288);e(6768)(r,n);for(var T=S(E.prototype),v=0;v<T.length;v++){var g=T[v];r.prototype[g]||(r.prototype[g]=E.prototype[g])}function r(i){if(!(this instanceof r))return new r(i);n.call(this,i),E.call(this,i),this.allowHalfOpen=!0,i&&(i.readable===!1&&(this.readable=!1),i.writable===!1&&(this.writable=!1),i.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",t)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function t(){this._writableState.ended||d.nextTick(o,this)}function o(i){i.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}})},27136:function(U,F,e){U.exports=S;var d=e(22477);e(6768)(S,d);function S(n){if(!(this instanceof S))return new S(n);d.call(this,n)}S.prototype._transform=function(n,E,T){T(null,n)}},12348:function(U,F,e){var d=e(4168);U.exports=s;var S;s.ReadableState=M,e(61252).EventEmitter;var n=function(Z,fe){return Z.listeners(fe).length},E=e(4776),T=e(33576).Buffer,v=e.g.Uint8Array||function(){};function g(j){return T.from(j)}function r(j){return T.isBuffer(j)||j instanceof v}var t=e(19768),o;t&&t.debuglog?o=t.debuglog("stream"):o=function(){};var i=e(47264),f=e(55324),u=e(24888),l=u.getHighWaterMark,m=e(92784).i,h=m.ERR_INVALID_ARG_TYPE,w=m.ERR_STREAM_PUSH_AFTER_EOF,c=m.ERR_METHOD_NOT_IMPLEMENTED,a=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,p,x,A;e(6768)(s,E);var P=f.errorOrDestroy,y=["error","close","destroy","pause","resume"];function C(j,Z,fe){if(typeof j.prependListener=="function")return j.prependListener(Z,fe);!j._events||!j._events[Z]?j.on(Z,fe):Array.isArray(j._events[Z])?j._events[Z].unshift(fe):j._events[Z]=[fe,j._events[Z]]}function M(j,Z,fe){S=S||e(15316),j=j||{},typeof fe!="boolean"&&(fe=Z instanceof S),this.objectMode=!!j.objectMode,fe&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=l(this,j,"readableHighWaterMark",fe),this.buffer=new i,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(p||(p=e(86032).o),this.decoder=new p(j.encoding),this.encoding=j.encoding)}function s(j){if(S=S||e(15316),!(this instanceof s))return new s(j);var Z=this instanceof S;this._readableState=new M(j,this,Z),this.readable=!0,j&&(typeof j.read=="function"&&(this._read=j.read),typeof j.destroy=="function"&&(this._destroy=j.destroy)),E.call(this)}Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Z){this._readableState&&(this._readableState.destroyed=Z)}}),s.prototype.destroy=f.destroy,s.prototype._undestroy=f.undestroy,s.prototype._destroy=function(j,Z){Z(j)},s.prototype.push=function(j,Z){var fe=this._readableState,re;return fe.objectMode?re=!0:typeof j=="string"&&(Z=Z||fe.defaultEncoding,Z!==fe.encoding&&(j=T.from(j,Z),Z=""),re=!0),_(this,j,Z,!1,re)},s.prototype.unshift=function(j){return _(this,j,null,!0,!1)};function _(j,Z,fe,re,ce){o("readableAddChunk",Z);var xe=j._readableState;if(Z===null)xe.reading=!1,N(j,xe);else{var Te;if(ce||(Te=k(xe,Z)),Te)P(j,Te);else if(xe.objectMode||Z&&Z.length>0)if(typeof Z!="string"&&!xe.objectMode&&Object.getPrototypeOf(Z)!==T.prototype&&(Z=g(Z)),re)xe.endEmitted?P(j,new a):b(j,xe,Z,!0);else if(xe.ended)P(j,new w);else{if(xe.destroyed)return!1;xe.reading=!1,xe.decoder&&!fe?(Z=xe.decoder.write(Z),xe.objectMode||Z.length!==0?b(j,xe,Z,!1):H(j,xe)):b(j,xe,Z,!1)}else re||(xe.reading=!1,H(j,xe))}return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function b(j,Z,fe,re){Z.flowing&&Z.length===0&&!Z.sync?(Z.awaitDrain=0,j.emit("data",fe)):(Z.length+=Z.objectMode?1:fe.length,re?Z.buffer.unshift(fe):Z.buffer.push(fe),Z.needReadable&&B(j)),H(j,Z)}function k(j,Z){var fe;return!r(Z)&&typeof Z!="string"&&Z!==void 0&&!j.objectMode&&(fe=new h("chunk",["string","Buffer","Uint8Array"],Z)),fe}s.prototype.isPaused=function(){return this._readableState.flowing===!1},s.prototype.setEncoding=function(j){p||(p=e(86032).o);var Z=new p(j);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;for(var fe=this._readableState.buffer.head,re="";fe!==null;)re+=Z.write(fe.data),fe=fe.next;return this._readableState.buffer.clear(),re!==""&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};var D=1073741824;function V(j){return j>=D?j=D:(j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++),j}function O(j,Z){return j<=0||Z.length===0&&Z.ended?0:Z.objectMode?1:j!==j?Z.flowing&&Z.length?Z.buffer.head.data.length:Z.length:(j>Z.highWaterMark&&(Z.highWaterMark=V(j)),j<=Z.length?j:Z.ended?Z.length:(Z.needReadable=!0,0))}s.prototype.read=function(j){o("read",j),j=parseInt(j,10);var Z=this._readableState,fe=j;if(j!==0&&(Z.emittedReadable=!1),j===0&&Z.needReadable&&((Z.highWaterMark!==0?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return o("read: emitReadable",Z.length,Z.ended),Z.length===0&&Z.ended?K(this):B(this),null;if(j=O(j,Z),j===0&&Z.ended)return Z.length===0&&K(this),null;var re=Z.needReadable;o("need readable",re),(Z.length===0||Z.length-j<Z.highWaterMark)&&(re=!0,o("length less than watermark",re)),Z.ended||Z.reading?(re=!1,o("reading or ended",re)):re&&(o("do read"),Z.reading=!0,Z.sync=!0,Z.length===0&&(Z.needReadable=!0),this._read(Z.highWaterMark),Z.sync=!1,Z.reading||(j=O(fe,Z)));var ce;return j>0?ce=ie(j,Z):ce=null,ce===null?(Z.needReadable=Z.length<=Z.highWaterMark,j=0):(Z.length-=j,Z.awaitDrain=0),Z.length===0&&(Z.ended||(Z.needReadable=!0),fe!==j&&Z.ended&&K(this)),ce!==null&&this.emit("data",ce),ce};function N(j,Z){if(o("onEofChunk"),!Z.ended){if(Z.decoder){var fe=Z.decoder.end();fe&&fe.length&&(Z.buffer.push(fe),Z.length+=Z.objectMode?1:fe.length)}Z.ended=!0,Z.sync?B(j):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,z(j)))}}function B(j){var Z=j._readableState;o("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(o("emitReadable",Z.flowing),Z.emittedReadable=!0,d.nextTick(z,j))}function z(j){var Z=j._readableState;o("emitReadable_",Z.destroyed,Z.length,Z.ended),!Z.destroyed&&(Z.length||Z.ended)&&(j.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,J(j)}function H(j,Z){Z.readingMore||(Z.readingMore=!0,d.nextTick(X,j,Z))}function X(j,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&Z.length===0);){var fe=Z.length;if(o("maybeReadMore read 0"),j.read(0),fe===Z.length)break}Z.readingMore=!1}s.prototype._read=function(j){P(this,new c("_read()"))},s.prototype.pipe=function(j,Z){var fe=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=j;break;case 1:re.pipes=[re.pipes,j];break;default:re.pipes.push(j);break}re.pipesCount+=1,o("pipe count=%d opts=%j",re.pipesCount,Z);var ce=(!Z||Z.end!==!1)&&j!==d.stdout&&j!==d.stderr,xe=ce?we:Le;re.endEmitted?d.nextTick(xe):fe.once("end",xe),j.on("unpipe",Te);function Te(Ge,rt){o("onunpipe"),Ge===fe&&rt&&rt.hasUnpiped===!1&&(rt.hasUnpiped=!0,Ne())}function we(){o("onend"),j.end()}var _e=$(fe);j.on("drain",_e);var ke=!1;function Ne(){o("cleanup"),j.removeListener("close",Ce),j.removeListener("finish",Oe),j.removeListener("drain",_e),j.removeListener("error",ze),j.removeListener("unpipe",Te),fe.removeListener("end",we),fe.removeListener("end",Le),fe.removeListener("data",Ee),ke=!0,re.awaitDrain&&(!j._writableState||j._writableState.needDrain)&&_e()}fe.on("data",Ee);function Ee(Ge){o("ondata");var rt=j.write(Ge);o("dest.write",rt),rt===!1&&((re.pipesCount===1&&re.pipes===j||re.pipesCount>1&&le(re.pipes,j)!==-1)&&!ke&&(o("false write response, pause",re.awaitDrain),re.awaitDrain++),fe.pause())}function ze(Ge){o("onerror",Ge),Le(),j.removeListener("error",ze),n(j,"error")===0&&P(j,Ge)}C(j,"error",ze);function Ce(){j.removeListener("finish",Oe),Le()}j.once("close",Ce);function Oe(){o("onfinish"),j.removeListener("close",Ce),Le()}j.once("finish",Oe);function Le(){o("unpipe"),fe.unpipe(j)}return j.emit("pipe",fe),re.flowing||(o("pipe resume"),fe.resume()),j};function $(j){return function(){var fe=j._readableState;o("pipeOnDrain",fe.awaitDrain),fe.awaitDrain&&fe.awaitDrain--,fe.awaitDrain===0&&n(j,"data")&&(fe.flowing=!0,J(j))}}s.prototype.unpipe=function(j){var Z=this._readableState,fe={hasUnpiped:!1};if(Z.pipesCount===0)return this;if(Z.pipesCount===1)return j&&j!==Z.pipes?this:(j||(j=Z.pipes),Z.pipes=null,Z.pipesCount=0,Z.flowing=!1,j&&j.emit("unpipe",this,fe),this);if(!j){var re=Z.pipes,ce=Z.pipesCount;Z.pipes=null,Z.pipesCount=0,Z.flowing=!1;for(var xe=0;xe<ce;xe++)re[xe].emit("unpipe",this,{hasUnpiped:!1});return this}var Te=le(Z.pipes,j);return Te===-1?this:(Z.pipes.splice(Te,1),Z.pipesCount-=1,Z.pipesCount===1&&(Z.pipes=Z.pipes[0]),j.emit("unpipe",this,fe),this)},s.prototype.on=function(j,Z){var fe=E.prototype.on.call(this,j,Z),re=this._readableState;return j==="data"?(re.readableListening=this.listenerCount("readable")>0,re.flowing!==!1&&this.resume()):j==="readable"&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,o("on readable",re.length,re.reading),re.length?B(this):re.reading||d.nextTick(q,this)),fe},s.prototype.addListener=s.prototype.on,s.prototype.removeListener=function(j,Z){var fe=E.prototype.removeListener.call(this,j,Z);return j==="readable"&&d.nextTick(ne,this),fe},s.prototype.removeAllListeners=function(j){var Z=E.prototype.removeAllListeners.apply(this,arguments);return(j==="readable"||j===void 0)&&d.nextTick(ne,this),Z};function ne(j){var Z=j._readableState;Z.readableListening=j.listenerCount("readable")>0,Z.resumeScheduled&&!Z.paused?Z.flowing=!0:j.listenerCount("data")>0&&j.resume()}function q(j){o("readable nexttick read 0"),j.read(0)}s.prototype.resume=function(){var j=this._readableState;return j.flowing||(o("resume"),j.flowing=!j.readableListening,ue(this,j)),j.paused=!1,this};function ue(j,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,d.nextTick(te,j,Z))}function te(j,Z){o("resume",Z.reading),Z.reading||j.read(0),Z.resumeScheduled=!1,j.emit("resume"),J(j),Z.flowing&&!Z.reading&&j.read(0)}s.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function J(j){var Z=j._readableState;for(o("flow",Z.flowing);Z.flowing&&j.read()!==null;);}s.prototype.wrap=function(j){var Z=this,fe=this._readableState,re=!1;j.on("end",function(){if(o("wrapped end"),fe.decoder&&!fe.ended){var Te=fe.decoder.end();Te&&Te.length&&Z.push(Te)}Z.push(null)}),j.on("data",function(Te){if(o("wrapped data"),fe.decoder&&(Te=fe.decoder.write(Te)),!(fe.objectMode&&Te==null)&&!(!fe.objectMode&&(!Te||!Te.length))){var we=Z.push(Te);we||(re=!0,j.pause())}});for(var ce in j)this[ce]===void 0&&typeof j[ce]=="function"&&(this[ce]=function(we){return function(){return j[we].apply(j,arguments)}}(ce));for(var xe=0;xe<y.length;xe++)j.on(y[xe],this.emit.bind(this,y[xe]));return this._read=function(Te){o("wrapped _read",Te),re&&(re=!1,j.resume())},this},typeof Symbol=="function"&&(s.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=e(60328)),x(this)}),Object.defineProperty(s.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(s.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(s.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Z){this._readableState&&(this._readableState.flowing=Z)}}),s._fromList=ie,Object.defineProperty(s.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ie(j,Z){if(Z.length===0)return null;var fe;return Z.objectMode?fe=Z.buffer.shift():!j||j>=Z.length?(Z.decoder?fe=Z.buffer.join(""):Z.buffer.length===1?fe=Z.buffer.first():fe=Z.buffer.concat(Z.length),Z.buffer.clear()):fe=Z.buffer.consume(j,Z.decoder),fe}function K(j){var Z=j._readableState;o("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,d.nextTick(ee,Z,j))}function ee(j,Z){if(o("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&j.length===0&&(j.endEmitted=!0,Z.readable=!1,Z.emit("end"),j.autoDestroy)){var fe=Z._writableState;(!fe||fe.autoDestroy&&fe.finished)&&Z.destroy()}}typeof Symbol=="function"&&(s.from=function(j,Z){return A===void 0&&(A=e(90555)),A(s,j,Z)});function le(j,Z){for(var fe=0,re=j.length;fe<re;fe++)if(j[fe]===Z)return fe;return-1}},22477:function(U,F,e){U.exports=r;var d=e(92784).i,S=d.ERR_METHOD_NOT_IMPLEMENTED,n=d.ERR_MULTIPLE_CALLBACK,E=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,T=d.ERR_TRANSFORM_WITH_LENGTH_0,v=e(15316);e(6768)(r,v);function g(i,f){var u=this._transformState;u.transforming=!1;var l=u.writecb;if(l===null)return this.emit("error",new n);u.writechunk=null,u.writecb=null,f!=null&&this.push(f),l(i);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function r(i){if(!(this instanceof r))return new r(i);v.call(this,i),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",t)}function t(){var i=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,u){o(i,f,u)}):o(this,null,null)}r.prototype.push=function(i,f){return this._transformState.needTransform=!1,v.prototype.push.call(this,i,f)},r.prototype._transform=function(i,f,u){u(new S("_transform()"))},r.prototype._write=function(i,f,u){var l=this._transformState;if(l.writecb=u,l.writechunk=i,l.writeencoding=f,!l.transforming){var m=this._readableState;(l.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},r.prototype._read=function(i){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},r.prototype._destroy=function(i,f){v.prototype._destroy.call(this,i,function(u){f(u)})};function o(i,f,u){if(f)return i.emit("error",f);if(u!=null&&i.push(u),i._writableState.length)throw new T;if(i._transformState.transforming)throw new E;return i.push(null)}},11288:function(U,F,e){var d=e(4168);U.exports=M;function S(J){var ie=this;this.next=null,this.entry=null,this.finish=function(){te(ie,J)}}var n;M.WritableState=y;var E={deprecate:e(96656)},T=e(4776),v=e(33576).Buffer,g=e.g.Uint8Array||function(){};function r(J){return v.from(J)}function t(J){return v.isBuffer(J)||J instanceof g}var o=e(55324),i=e(24888),f=i.getHighWaterMark,u=e(92784).i,l=u.ERR_INVALID_ARG_TYPE,m=u.ERR_METHOD_NOT_IMPLEMENTED,h=u.ERR_MULTIPLE_CALLBACK,w=u.ERR_STREAM_CANNOT_PIPE,c=u.ERR_STREAM_DESTROYED,a=u.ERR_STREAM_NULL_VALUES,p=u.ERR_STREAM_WRITE_AFTER_END,x=u.ERR_UNKNOWN_ENCODING,A=o.errorOrDestroy;e(6768)(M,T);function P(){}function y(J,ie,K){n=n||e(15316),J=J||{},typeof K!="boolean"&&(K=ie instanceof n),this.objectMode=!!J.objectMode,K&&(this.objectMode=this.objectMode||!!J.writableObjectMode),this.highWaterMark=f(this,J,"writableHighWaterMark",K),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ee=J.decodeStrings===!1;this.decodeStrings=!ee,this.defaultEncoding=J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){N(ie,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}y.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,K=[];ie;)K.push(ie),ie=ie.next;return K},function(){try{Object.defineProperty(y.prototype,"buffer",{get:E.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var C;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(ie){return C.call(this,ie)?!0:this!==M?!1:ie&&ie._writableState instanceof y}})):C=function(ie){return ie instanceof this};function M(J){n=n||e(15316);var ie=this instanceof n;if(!ie&&!C.call(M,this))return new M(J);this._writableState=new y(J,this,ie),this.writable=!0,J&&(typeof J.write=="function"&&(this._write=J.write),typeof J.writev=="function"&&(this._writev=J.writev),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.final=="function"&&(this._final=J.final)),T.call(this)}M.prototype.pipe=function(){A(this,new w)};function s(J,ie){var K=new p;A(J,K),d.nextTick(ie,K)}function _(J,ie,K,ee){var le;return K===null?le=new a:typeof K!="string"&&!ie.objectMode&&(le=new l("chunk",["string","Buffer"],K)),le?(A(J,le),d.nextTick(ee,le),!1):!0}M.prototype.write=function(J,ie,K){var ee=this._writableState,le=!1,j=!ee.objectMode&&t(J);return j&&!v.isBuffer(J)&&(J=r(J)),typeof ie=="function"&&(K=ie,ie=null),j?ie="buffer":ie||(ie=ee.defaultEncoding),typeof K!="function"&&(K=P),ee.ending?s(this,K):(j||_(this,ee,J,K))&&(ee.pendingcb++,le=k(this,ee,j,J,ie,K)),le},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,!J.writing&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&H(this,J))},M.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new x(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function b(J,ie,K){return!J.objectMode&&J.decodeStrings!==!1&&typeof ie=="string"&&(ie=v.from(ie,K)),ie}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(J,ie,K,ee,le,j){if(!K){var Z=b(ie,ee,le);ee!==Z&&(K=!0,le="buffer",ee=Z)}var fe=ie.objectMode?1:ee.length;ie.length+=fe;var re=ie.length<ie.highWaterMark;if(re||(ie.needDrain=!0),ie.writing||ie.corked){var ce=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:ee,encoding:le,isBuf:K,callback:j,next:null},ce?ce.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else D(J,ie,!1,fe,ee,le,j);return re}function D(J,ie,K,ee,le,j,Z){ie.writelen=ee,ie.writecb=Z,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new c("write")):K?J._writev(le,ie.onwrite):J._write(le,j,ie.onwrite),ie.sync=!1}function V(J,ie,K,ee,le){--ie.pendingcb,K?(d.nextTick(le,ee),d.nextTick(q,J,ie),J._writableState.errorEmitted=!0,A(J,ee)):(le(ee),J._writableState.errorEmitted=!0,A(J,ee),q(J,ie))}function O(J){J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0}function N(J,ie){var K=J._writableState,ee=K.sync,le=K.writecb;if(typeof le!="function")throw new h;if(O(K),ie)V(J,K,ee,ie,le);else{var j=X(K)||J.destroyed;!j&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&H(J,K),ee?d.nextTick(B,J,K,j,le):B(J,K,j,le)}}function B(J,ie,K,ee){K||z(J,ie),ie.pendingcb--,ee(),q(J,ie)}function z(J,ie){ie.length===0&&ie.needDrain&&(ie.needDrain=!1,J.emit("drain"))}function H(J,ie){ie.bufferProcessing=!0;var K=ie.bufferedRequest;if(J._writev&&K&&K.next){var ee=ie.bufferedRequestCount,le=new Array(ee),j=ie.corkedRequestsFree;j.entry=K;for(var Z=0,fe=!0;K;)le[Z]=K,K.isBuf||(fe=!1),K=K.next,Z+=1;le.allBuffers=fe,D(J,ie,!0,ie.length,le,"",j.finish),ie.pendingcb++,ie.lastBufferedRequest=null,j.next?(ie.corkedRequestsFree=j.next,j.next=null):ie.corkedRequestsFree=new S(ie),ie.bufferedRequestCount=0}else{for(;K;){var re=K.chunk,ce=K.encoding,xe=K.callback,Te=ie.objectMode?1:re.length;if(D(J,ie,!1,Te,re,ce,xe),K=K.next,ie.bufferedRequestCount--,ie.writing)break}K===null&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=K,ie.bufferProcessing=!1}M.prototype._write=function(J,ie,K){K(new m("_write()"))},M.prototype._writev=null,M.prototype.end=function(J,ie,K){var ee=this._writableState;return typeof J=="function"?(K=J,J=null,ie=null):typeof ie=="function"&&(K=ie,ie=null),J!=null&&this.write(J,ie),ee.corked&&(ee.corked=1,this.uncork()),ee.ending||ue(this,ee,K),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function X(J){return J.ending&&J.length===0&&J.bufferedRequest===null&&!J.finished&&!J.writing}function $(J,ie){J._final(function(K){ie.pendingcb--,K&&A(J,K),ie.prefinished=!0,J.emit("prefinish"),q(J,ie)})}function ne(J,ie){!ie.prefinished&&!ie.finalCalled&&(typeof J._final=="function"&&!ie.destroyed?(ie.pendingcb++,ie.finalCalled=!0,d.nextTick($,J,ie)):(ie.prefinished=!0,J.emit("prefinish")))}function q(J,ie){var K=X(ie);if(K&&(ne(J,ie),ie.pendingcb===0&&(ie.finished=!0,J.emit("finish"),ie.autoDestroy))){var ee=J._readableState;(!ee||ee.autoDestroy&&ee.endEmitted)&&J.destroy()}return K}function ue(J,ie,K){ie.ending=!0,q(J,ie),K&&(ie.finished?d.nextTick(K):J.once("finish",K)),ie.ended=!0,J.writable=!1}function te(J,ie,K){var ee=J.entry;for(J.entry=null;ee;){var le=ee.callback;ie.pendingcb--,le(K),ee=ee.next}ie.corkedRequestsFree.next=J}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),M.prototype.destroy=o.destroy,M.prototype._undestroy=o.undestroy,M.prototype._destroy=function(J,ie){ie(J)}},60328:function(U,F,e){var d=e(4168),S;function n(a,p,x){return p in a?Object.defineProperty(a,p,{value:x,enumerable:!0,configurable:!0,writable:!0}):a[p]=x,a}var E=e(15932),T=Symbol("lastResolve"),v=Symbol("lastReject"),g=Symbol("error"),r=Symbol("ended"),t=Symbol("lastPromise"),o=Symbol("handlePromise"),i=Symbol("stream");function f(a,p){return{value:a,done:p}}function u(a){var p=a[T];if(p!==null){var x=a[i].read();x!==null&&(a[t]=null,a[T]=null,a[v]=null,p(f(x,!1)))}}function l(a){d.nextTick(u,a)}function m(a,p){return function(x,A){a.then(function(){if(p[r]){x(f(void 0,!0));return}p[o](x,A)},A)}}var h=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((S={get stream(){return this[i]},next:function(){var p=this,x=this[g];if(x!==null)return Promise.reject(x);if(this[r])return Promise.resolve(f(void 0,!0));if(this[i].destroyed)return new Promise(function(C,M){d.nextTick(function(){p[g]?M(p[g]):C(f(void 0,!0))})});var A=this[t],P;if(A)P=new Promise(m(A,this));else{var y=this[i].read();if(y!==null)return Promise.resolve(f(y,!1));P=new Promise(this[o])}return this[t]=P,P}},n(S,Symbol.asyncIterator,function(){return this}),n(S,"return",function(){var p=this;return new Promise(function(x,A){p[i].destroy(null,function(P){if(P){A(P);return}x(f(void 0,!0))})})}),S),h),c=function(p){var x,A=Object.create(w,(x={},n(x,i,{value:p,writable:!0}),n(x,T,{value:null,writable:!0}),n(x,v,{value:null,writable:!0}),n(x,g,{value:null,writable:!0}),n(x,r,{value:p._readableState.endEmitted,writable:!0}),n(x,o,{value:function(y,C){var M=A[i].read();M?(A[t]=null,A[T]=null,A[v]=null,y(f(M,!1))):(A[T]=y,A[v]=C)},writable:!0}),x));return A[t]=null,E(p,function(P){if(P&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=A[v];y!==null&&(A[t]=null,A[T]=null,A[v]=null,y(P)),A[g]=P;return}var C=A[T];C!==null&&(A[t]=null,A[T]=null,A[v]=null,C(f(void 0,!0))),A[r]=!0}),p.on("readable",l.bind(null,A)),A};U.exports=c},47264:function(U,F,e){function d(u,l){var m=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);l&&(h=h.filter(function(w){return Object.getOwnPropertyDescriptor(u,w).enumerable})),m.push.apply(m,h)}return m}function S(u){for(var l=1;l<arguments.length;l++){var m=arguments[l]!=null?arguments[l]:{};l%2?d(Object(m),!0).forEach(function(h){n(u,h,m[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(m)):d(Object(m)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(m,h))})}return u}function n(u,l,m){return l in u?Object.defineProperty(u,l,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[l]=m,u}function E(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function T(u,l){for(var m=0;m<l.length;m++){var h=l[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}function v(u,l,m){return l&&T(u.prototype,l),u}var g=e(33576),r=g.Buffer,t=e(21576),o=t.inspect,i=o&&o.custom||"inspect";function f(u,l,m){r.prototype.copy.call(u,l,m)}U.exports=function(){function u(){E(this,u),this.head=null,this.tail=null,this.length=0}return v(u,[{key:"push",value:function(m){var h={data:m,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(m){var h={data:m,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var h=this.head,w=""+h.data;h=h.next;)w+=m+h.data;return w}},{key:"concat",value:function(m){if(this.length===0)return r.alloc(0);for(var h=r.allocUnsafe(m>>>0),w=this.head,c=0;w;)f(w.data,h,c),c+=w.data.length,w=w.next;return h}},{key:"consume",value:function(m,h){var w;return m<this.head.data.length?(w=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?w=this.shift():w=h?this._getString(m):this._getBuffer(m),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var h=this.head,w=1,c=h.data;for(m-=c.length;h=h.next;){var a=h.data,p=m>a.length?a.length:m;if(p===a.length?c+=a:c+=a.slice(0,m),m-=p,m===0){p===a.length?(++w,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=a.slice(p));break}++w}return this.length-=w,c}},{key:"_getBuffer",value:function(m){var h=r.allocUnsafe(m),w=this.head,c=1;for(w.data.copy(h),m-=w.data.length;w=w.next;){var a=w.data,p=m>a.length?a.length:m;if(a.copy(h,h.length-m,0,p),m-=p,m===0){p===a.length?(++c,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=a.slice(p));break}++c}return this.length-=c,h}},{key:i,value:function(m,h){return o(this,S({},h,{depth:0,customInspect:!1}))}}]),u}()},55324:function(U,F,e){var d=e(4168);function S(r,t){var o=this,i=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return i||f?(t?t(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(v,this,r)):d.nextTick(v,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(u){!t&&u?o._writableState?o._writableState.errorEmitted?d.nextTick(E,o):(o._writableState.errorEmitted=!0,d.nextTick(n,o,u)):d.nextTick(n,o,u):t?(d.nextTick(E,o),t(u)):d.nextTick(E,o)}),this)}function n(r,t){v(r,t),E(r)}function E(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function T(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function v(r,t){r.emit("error",t)}function g(r,t){var o=r._readableState,i=r._writableState;o&&o.autoDestroy||i&&i.autoDestroy?r.destroy(t):r.emit("error",t)}U.exports={destroy:S,undestroy:T,errorOrDestroy:g}},15932:function(U,F,e){var d=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function S(v){var g=!1;return function(){if(!g){g=!0;for(var r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];v.apply(this,t)}}}function n(){}function E(v){return v.setHeader&&typeof v.abort=="function"}function T(v,g,r){if(typeof g=="function")return T(v,null,g);g||(g={}),r=S(r||n);var t=g.readable||g.readable!==!1&&v.readable,o=g.writable||g.writable!==!1&&v.writable,i=function(){v.writable||u()},f=v._writableState&&v._writableState.finished,u=function(){o=!1,f=!0,t||r.call(v)},l=v._readableState&&v._readableState.endEmitted,m=function(){t=!1,l=!0,o||r.call(v)},h=function(p){r.call(v,p)},w=function(){var p;if(t&&!l)return(!v._readableState||!v._readableState.ended)&&(p=new d),r.call(v,p);if(o&&!f)return(!v._writableState||!v._writableState.ended)&&(p=new d),r.call(v,p)},c=function(){v.req.on("finish",u)};return E(v)?(v.on("complete",u),v.on("abort",w),v.req?c():v.on("request",c)):o&&!v._writableState&&(v.on("end",i),v.on("close",i)),v.on("end",m),v.on("finish",u),g.error!==!1&&v.on("error",h),v.on("close",w),function(){v.removeListener("complete",u),v.removeListener("abort",w),v.removeListener("request",c),v.req&&v.req.removeListener("finish",u),v.removeListener("end",i),v.removeListener("close",i),v.removeListener("finish",u),v.removeListener("end",m),v.removeListener("error",h),v.removeListener("close",w)}}U.exports=T},90555:function(U){U.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(U,F,e){var d;function S(u){var l=!1;return function(){l||(l=!0,u.apply(void 0,arguments))}}var n=e(92784).i,E=n.ERR_MISSING_ARGS,T=n.ERR_STREAM_DESTROYED;function v(u){if(u)throw u}function g(u){return u.setHeader&&typeof u.abort=="function"}function r(u,l,m,h){h=S(h);var w=!1;u.on("close",function(){w=!0}),d===void 0&&(d=e(15932)),d(u,{readable:l,writable:m},function(a){if(a)return h(a);w=!0,h()});var c=!1;return function(a){if(!w&&!c){if(c=!0,g(u))return u.abort();if(typeof u.destroy=="function")return u.destroy();h(a||new T("pipe"))}}}function t(u){u()}function o(u,l){return u.pipe(l)}function i(u){return!u.length||typeof u[u.length-1]!="function"?v:u.pop()}function f(){for(var u=arguments.length,l=new Array(u),m=0;m<u;m++)l[m]=arguments[m];var h=i(l);if(Array.isArray(l[0])&&(l=l[0]),l.length<2)throw new E("streams");var w,c=l.map(function(a,p){var x=p<l.length-1,A=p>0;return r(a,x,A,function(P){w||(w=P),P&&c.forEach(t),!x&&(c.forEach(t),h(w))})});return l.reduce(o)}U.exports=f},24888:function(U,F,e){var d=e(92784).i.ERR_INVALID_OPT_VALUE;function S(E,T,v){return E.highWaterMark!=null?E.highWaterMark:T?E[v]:null}function n(E,T,v,g){var r=S(T,g,v);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var t=g?v:"highWaterMark";throw new d(t,r)}return Math.floor(r)}return E.objectMode?16:16384}U.exports={getHighWaterMark:n}},4776:function(U,F,e){U.exports=e(61252).EventEmitter},86032:function(U,F,e){var d=e(30456).Buffer,S=d.isEncoding||function(c){switch(c=""+c,c&&c.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(c){if(!c)return"utf8";for(var a;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(a)return;c=(""+c).toLowerCase(),a=!0}}function E(c){var a=n(c);if(typeof a!="string"&&(d.isEncoding===S||!S(c)))throw new Error("Unknown encoding: "+c);return a||c}F.o=T;function T(c){this.encoding=E(c);var a;switch(this.encoding){case"utf16le":this.text=f,this.end=u,a=4;break;case"utf8":this.fillLast=t,a=4;break;case"base64":this.text=l,this.end=m,a=3;break;default:this.write=h,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(a)}T.prototype.write=function(c){if(c.length===0)return"";var a,p;if(this.lastNeed){if(a=this.fillLast(c),a===void 0)return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<c.length?a?a+this.text(c,p):this.text(c,p):a||""},T.prototype.end=i,T.prototype.text=o,T.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length),this.lastNeed-=c.length};function v(c){return c<=127?0:c>>5===6?2:c>>4===14?3:c>>3===30?4:c>>6===2?-1:-2}function g(c,a,p){var x=a.length-1;if(x<p)return 0;var A=v(a[x]);return A>=0?(A>0&&(c.lastNeed=A-1),A):--x<p||A===-2?0:(A=v(a[x]),A>=0?(A>0&&(c.lastNeed=A-2),A):--x<p||A===-2?0:(A=v(a[x]),A>=0?(A>0&&(A===2?A=0:c.lastNeed=A-3),A):0))}function r(c,a,p){if((a[0]&192)!==128)return c.lastNeed=0,"";if(c.lastNeed>1&&a.length>1){if((a[1]&192)!==128)return c.lastNeed=1,"";if(c.lastNeed>2&&a.length>2&&(a[2]&192)!==128)return c.lastNeed=2,""}}function t(c){var a=this.lastTotal-this.lastNeed,p=r(this,c);if(p!==void 0)return p;if(this.lastNeed<=c.length)return c.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,a,0,c.length),this.lastNeed-=c.length}function o(c,a){var p=g(this,c,a);if(!this.lastNeed)return c.toString("utf8",a);this.lastTotal=p;var x=c.length-(p-this.lastNeed);return c.copy(this.lastChar,0,x),c.toString("utf8",a,x)}function i(c){var a=c&&c.length?this.write(c):"";return this.lastNeed?a+"":a}function f(c,a){if((c.length-a)%2===0){var p=c.toString("utf16le",a);if(p){var x=p.charCodeAt(p.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=c[c.length-1],c.toString("utf16le",a,c.length-1)}function u(c){var a=c&&c.length?this.write(c):"";if(this.lastNeed){var p=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,p)}return a}function l(c,a){var p=(c.length-a)%3;return p===0?c.toString("base64",a):(this.lastNeed=3-p,this.lastTotal=3,p===1?this.lastChar[0]=c[c.length-1]:(this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1]),c.toString("base64",a,c.length-p))}function m(c){var a=c&&c.length?this.write(c):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function h(c){return c.toString(this.encoding)}function w(c){return c&&c.length?this.write(c):""}},55619:function(U,F,e){var d=e(45408),S=e(86844)("stream-parser");U.exports=g;var n=-1,E=0,T=1,v=2;function g(c){var a=c&&typeof c._transform=="function",p=c&&typeof c._write=="function";if(!a&&!p)throw new Error("must pass a Writable or Transform stream in");S("extending Parser into stream"),c._bytes=t,c._skipBytes=o,a&&(c._passthrough=i),a?c._transform=u:c._write=f}function r(c){S("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=n,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,a){d(!this._parserCallback,'there is already a "callback" set!'),d(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||r(this),S("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=a,this._parserState=E}function o(c,a){d(!this._parserCallback,'there is already a "callback" set!'),d(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||r(this),S("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=a,this._parserState=T}function i(c,a){d(!this._parserCallback,'There is already a "callback" set!'),d(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||r(this),S("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=a,this._parserState=v}function f(c,a,p){this._parserInit||r(this),S("write(%o bytes)",c.length),typeof a=="function"&&(p=a),h(this,c,null,p)}function u(c,a,p){this._parserInit||r(this),S("transform(%o bytes)",c.length),typeof a!="function"&&(a=this._parserOutput),h(this,c,a,p)}function l(c,a,p,x){return c._parserBytesLeft<=0?x(new Error("got data but not currently parsing anything")):a.length<=c._parserBytesLeft?function(){return m(c,a,p,x)}:function(){var A=a.slice(0,c._parserBytesLeft);return m(c,A,p,function(P){if(P)return x(P);if(a.length>A.length)return function(){return l(c,a.slice(A.length),p,x)}})}}function m(c,a,p,x){if(c._parserBytesLeft-=a.length,S("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===E?(c._parserBuffers.push(a),c._parserBuffered+=a.length):c._parserState===v&&p(a),c._parserBytesLeft===0){var A=c._parserCallback;if(A&&c._parserState===E&&c._parserBuffers.length>1&&(a=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==E&&(a=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=n,c._parserBuffers.splice(0),A){var P=[];a&&P.push(a),p&&P.push(p);var y=A.length>P.length;y&&P.push(w(x));var C=A.apply(c,P);if(!y||x===C)return x}}else return x}var h=w(l);function w(c){return function(){for(var a=c.apply(this,arguments);typeof a=="function";)a=a();return a}}},86844:function(U,F,e){var d=e(4168);F=U.exports=e(89416),F.log=E,F.formatArgs=n,F.save=T,F.load=v,F.useColors=S,F.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),F.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function S(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}F.formatters.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function n(r){var t=this.useColors;if(r[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+r[0]+(t?"%c ":" ")+"+"+F.humanize(this.diff),!!t){var o="color: "+this.color;r.splice(1,0,o,"color: inherit");var i=0,f=0;r[0].replace(/%[a-zA-Z%]/g,function(u){u!=="%%"&&(i++,u==="%c"&&(f=i))}),r.splice(f,0,o)}}function E(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function T(r){try{r==null?F.storage.removeItem("debug"):F.storage.debug=r}catch{}}function v(){var r;try{r=F.storage.debug}catch{}return!r&&typeof d<"u"&&"env"in d&&(r=d.env.DEBUG),r}F.enable(v());function g(){try{return window.localStorage}catch{}}},89416:function(U,F,e){F=U.exports=n.debug=n.default=n,F.coerce=g,F.disable=T,F.enable=E,F.enabled=v,F.humanize=e(93744),F.names=[],F.skips=[],F.formatters={};var d;function S(r){var t=0,o;for(o in r)t=(t<<5)-t+r.charCodeAt(o),t|=0;return F.colors[Math.abs(t)%F.colors.length]}function n(r){function t(){if(t.enabled){var o=t,i=+new Date,f=i-(d||i);o.diff=f,o.prev=d,o.curr=i,d=i;for(var u=new Array(arguments.length),l=0;l<u.length;l++)u[l]=arguments[l];u[0]=F.coerce(u[0]),typeof u[0]!="string"&&u.unshift("%O");var m=0;u[0]=u[0].replace(/%([a-zA-Z%])/g,function(w,c){if(w==="%%")return w;m++;var a=F.formatters[c];if(typeof a=="function"){var p=u[m];w=a.call(o,p),u.splice(m,1),m--}return w}),F.formatArgs.call(o,u);var h=t.log||F.log||console.log.bind(console);h.apply(o,u)}}return t.namespace=r,t.enabled=F.enabled(r),t.useColors=F.useColors(),t.color=S(r),typeof F.init=="function"&&F.init(t),t}function E(r){F.save(r),F.names=[],F.skips=[];for(var t=(typeof r=="string"?r:"").split(/[\s,]+/),o=t.length,i=0;i<o;i++)t[i]&&(r=t[i].replace(/\*/g,".*?"),r[0]==="-"?F.skips.push(new RegExp("^"+r.substr(1)+"$")):F.names.push(new RegExp("^"+r+"$")))}function T(){F.enable("")}function v(r){var t,o;for(t=0,o=F.skips.length;t<o;t++)if(F.skips[t].test(r))return!1;for(t=0,o=F.names.length;t<o;t++)if(F.names[t].test(r))return!0;return!1}function g(r){return r instanceof Error?r.stack||r.message:r}},93744:function(U){var F=1e3,e=F*60,d=e*60,S=d*24,n=S*365.25;U.exports=function(r,t){t=t||{};var o=typeof r;if(o==="string"&&r.length>0)return E(r);if(o==="number"&&isNaN(r)===!1)return t.long?v(r):T(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function E(r){if(r=String(r),!(r.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(t){var o=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return o*n;case"days":case"day":case"d":return o*S;case"hours":case"hour":case"hrs":case"hr":case"h":return o*d;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*F;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function T(r){return r>=S?Math.round(r/S)+"d":r>=d?Math.round(r/d)+"h":r>=e?Math.round(r/e)+"m":r>=F?Math.round(r/F)+"s":r+"ms"}function v(r){return g(r,S,"day")||g(r,d,"hour")||g(r,e,"minute")||g(r,F,"second")||r+" ms"}function g(r,t,o){if(!(r<t))return r<t*1.5?Math.floor(r/t)+" "+o:Math.ceil(r/t)+" "+o+"s"}},39956:function(U,F,e){var d=e(32868);U.exports=function(n,E,T){if(n==null)throw Error("First argument should be a string");if(E==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(u){return u.length===1&&(u=u+u),u}));var v=d.parse(n,{flat:!0,brackets:T.ignore}),g=v[0],r=g.split(E);if(T.escape){for(var t=[],o=0;o<r.length;o++){var i=r[o],f=r[o+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(t.push(i+E+f),o++):t.push(i)}r=t}for(var o=0;o<r.length;o++)v[0]=r[o],r[o]=d.stringify(v,{flat:!0});return r}},78484:function(U){U.exports=F;function F(e){for(var d=e.length,S=new Array(d),n=new Array(d),E=new Array(d),T=new Array(d),v=new Array(d),g=new Array(d),r=0;r<d;++r)S[r]=-1,n[r]=0,E[r]=!1,T[r]=0,v[r]=-1,g[r]=[];var t=0,o=[],i=[];function f(h){var w=[h],c=[h];for(S[h]=n[h]=t,E[h]=!0,t+=1;c.length>0;){h=c[c.length-1];var a=e[h];if(T[h]<a.length){for(var p=T[h];p<a.length;++p){var x=a[p];if(S[x]<0){S[x]=n[x]=t,E[x]=!0,t+=1,w.push(x),c.push(x);break}else E[x]&&(n[h]=Math.min(n[h],n[x])|0);v[x]>=0&&g[h].push(v[x])}T[h]=p}else{if(n[h]===S[h]){for(var A=[],P=[],y=0,p=w.length-1;p>=0;--p){var C=w[p];if(E[C]=!1,A.push(C),P.push(g[C]),y+=g[C].length,v[C]=o.length,C===h){w.length=p;break}}o.push(A);for(var M=new Array(y),p=0;p<P.length;p++)for(var s=0;s<P[p].length;s++)M[--y]=P[p][s];i.push(M)}c.pop()}}}for(var r=0;r<d;++r)S[r]<0&&f(r);for(var u,r=0;r<i.length;r++){var l=i[r];if(l.length!==0){l.sort(function(w,c){return w-c}),u=[l[0]];for(var m=1;m<l.length;m++)l[m]!==l[m-1]&&u.push(l[m]);i[r]=u}}return{components:o,adjacencyList:i}}},92848:function(U,F,e){e.r(F);var d=function(){function r(t,o){var i=[],f=!0,u=!1,l=void 0;try{for(var m=t[Symbol.iterator](),h;!(f=(h=m.next()).done)&&(i.push(h.value),!(o&&i.length===o));f=!0);}catch(w){u=!0,l=w}finally{try{!f&&m.return&&m.return()}finally{if(u)throw l}}return i}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=Math.PI*2,n=function(t,o,i,f,u,l,m){var h=t.x,w=t.y;h*=o,w*=i;var c=f*h-u*w,a=u*h+f*w;return{x:c+l,y:a+m}},E=function(t,o){var i=o===1.5707963267948966?.551915024494:o===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(o/4),f=Math.cos(t),u=Math.sin(t),l=Math.cos(t+o),m=Math.sin(t+o);return[{x:f-u*i,y:u+f*i},{x:l+m*i,y:m-l*i},{x:l,y:m}]},T=function(t,o,i,f){var u=t*f-o*i<0?-1:1,l=t*i+o*f;return l>1&&(l=1),l<-1&&(l=-1),u*Math.acos(l)},v=function(t,o,i,f,u,l,m,h,w,c,a,p){var x=Math.pow(u,2),A=Math.pow(l,2),P=Math.pow(a,2),y=Math.pow(p,2),C=x*A-x*y-A*P;C<0&&(C=0),C/=x*y+A*P,C=Math.sqrt(C)*(m===h?-1:1);var M=C*u/l*p,s=C*-l/u*a,_=c*M-w*s+(t+i)/2,b=w*M+c*s+(o+f)/2,k=(a-M)/u,D=(p-s)/l,V=(-a-M)/u,O=(-p-s)/l,N=T(1,0,k,D),B=T(k,D,V,O);return h===0&&B>0&&(B-=S),h===1&&B<0&&(B+=S),[_,b,N,B]},g=function(t){var o=t.px,i=t.py,f=t.cx,u=t.cy,l=t.rx,m=t.ry,h=t.xAxisRotation,w=h===void 0?0:h,c=t.largeArcFlag,a=c===void 0?0:c,p=t.sweepFlag,x=p===void 0?0:p,A=[];if(l===0||m===0)return[];var P=Math.sin(w*S/360),y=Math.cos(w*S/360),C=y*(o-f)/2+P*(i-u)/2,M=-P*(o-f)/2+y*(i-u)/2;if(C===0&&M===0)return[];l=Math.abs(l),m=Math.abs(m);var s=Math.pow(C,2)/Math.pow(l,2)+Math.pow(M,2)/Math.pow(m,2);s>1&&(l*=Math.sqrt(s),m*=Math.sqrt(s));var _=v(o,i,f,u,l,m,a,x,P,y,C,M),b=d(_,4),k=b[0],D=b[1],V=b[2],O=b[3],N=Math.abs(O)/(S/4);Math.abs(1-N)<1e-7&&(N=1);var B=Math.max(Math.ceil(N),1);O/=B;for(var z=0;z<B;z++)A.push(E(V,O)),V+=O;return A.map(function(H){var X=n(H[0],l,m,y,P,k,D),$=X.x,ne=X.y,q=n(H[1],l,m,y,P,k,D),ue=q.x,te=q.y,J=n(H[2],l,m,y,P,k,D),ie=J.x,K=J.y;return{x1:$,y1:ne,x2:ue,y2:te,x:ie,y:K}})};F.default=g},74840:function(U,F,e){var d=e(21984),S=e(49972),n=e(41976),E=e(53520),T=e(45408);U.exports=v;function v(g){if(Array.isArray(g)&&g.length===1&&typeof g[0]=="string"&&(g=g[0]),typeof g=="string"&&(T(E(g),"String is not an SVG path."),g=d(g)),T(Array.isArray(g),"Argument should be a string or an array of path segments."),g=S(g),g=n(g),!g.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],t=0,o=g.length;t<o;t++)for(var i=g[t].slice(1),f=0;f<i.length;f+=2)i[f+0]<r[0]&&(r[0]=i[f+0]),i[f+1]<r[1]&&(r[1]=i[f+1]),i[f+0]>r[2]&&(r[2]=i[f+0]),i[f+1]>r[3]&&(r[3]=i[f+1]);return r}},41976:function(U,F,e){U.exports=S;var d=e(92848);function S(T){for(var v,g=[],r=0,t=0,o=0,i=0,f=null,u=null,l=0,m=0,h=0,w=T.length;h<w;h++){var c=T[h],a=c[0];switch(a){case"M":o=c[1],i=c[2];break;case"A":var p=d({px:l,py:m,cx:c[6],cy:c[7],rx:c[1],ry:c[2],xAxisRotation:c[3],largeArcFlag:c[4],sweepFlag:c[5]});if(!p.length)continue;for(var x=0,A;x<p.length;x++)A=p[x],c=["C",A.x1,A.y1,A.x2,A.y2,A.x,A.y],x<p.length-1&&g.push(c);break;case"S":var P=l,y=m;(v=="C"||v=="S")&&(P+=P-r,y+=y-t),c=["C",P,y,c[1],c[2],c[3],c[4]];break;case"T":v=="Q"||v=="T"?(f=l*2-f,u=m*2-u):(f=l,u=m),c=E(l,m,f,u,c[1],c[2]);break;case"Q":f=c[1],u=c[2],c=E(l,m,c[1],c[2],c[3],c[4]);break;case"L":c=n(l,m,c[1],c[2]);break;case"H":c=n(l,m,c[1],m);break;case"V":c=n(l,m,l,c[1]);break;case"Z":c=n(l,m,o,i);break}v=a,l=c[c.length-2],m=c[c.length-1],c.length>4?(r=c[c.length-4],t=c[c.length-3]):(r=l,t=m),g.push(c)}return g}function n(T,v,g,r){return["C",T,v,g,r,g,r]}function E(T,v,g,r,t,o){return["C",T/3+.6666666666666666*g,v/3+.6666666666666666*r,t/3+.6666666666666666*g,o/3+.6666666666666666*r,t,o]}},20472:function(U,F,e){var d=e(74840),S=e(21984),n=e(22235),E=e(53520),T=e(29620),v=document.createElement("canvas"),g=v.getContext("2d");U.exports=r;function r(i,f){if(!E(i))throw Error("Argument should be valid svg path string");f||(f={});var u,l;f.shape?(u=f.shape[0],l=f.shape[1]):(u=v.width=f.w||f.width||200,l=v.height=f.h||f.height||200);var m=Math.min(u,l),h=f.stroke||0,w=f.viewbox||f.viewBox||d(i),c=[u/(w[2]-w[0]),l/(w[3]-w[1])],a=Math.min(c[0]||0,c[1]||0)/2;if(g.fillStyle="black",g.fillRect(0,0,u,l),g.fillStyle="white",h&&(typeof h!="number"&&(h=1),h>0?g.strokeStyle="white":g.strokeStyle="black",g.lineWidth=Math.abs(h)),g.translate(u*.5,l*.5),g.scale(a,a),o()){var p=new Path2D(i);g.fill(p),h&&g.stroke(p)}else{var x=S(i);n(g,x),g.fill(),h&&g.stroke()}g.setTransform(1,0,0,1,0,0);var A=T(g,{cutoff:f.cutoff!=null?f.cutoff:.5,radius:f.radius!=null?f.radius:m*.5});return A}var t;function o(){if(t!=null)return t;var i=document.createElement("canvas").getContext("2d");if(i.canvas.width=i.canvas.height=1,!window.Path2D)return t=!1;var f=new Path2D("M0,0h1v1h-1v-1Z");i.fillStyle="black",i.fill(f);var u=i.getImageData(0,0,1,1);return t=u&&u.data&&u.data[3]===255}},49760:function(U,F,e){var d;(function(S){var n=/^\s+/,E=/\s+$/,T=0,v=S.round,g=S.min,r=S.max,t=S.random;function o(Z,fe){if(Z=Z||"",fe=fe||{},Z instanceof o)return Z;if(!(this instanceof o))return new o(Z,fe);var re=i(Z);this._originalInput=Z,this._r=re.r,this._g=re.g,this._b=re.b,this._a=re.a,this._roundA=v(100*this._a)/100,this._format=fe.format||re.format,this._gradientType=fe.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=re.ok,this._tc_id=T++}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},getLuminance:function(){var Z=this.toRgb(),fe,re,ce,xe,Te,we;return fe=Z.r/255,re=Z.g/255,ce=Z.b/255,fe<=.03928?xe=fe/12.92:xe=S.pow((fe+.055)/1.055,2.4),re<=.03928?Te=re/12.92:Te=S.pow((re+.055)/1.055,2.4),ce<=.03928?we=ce/12.92:we=S.pow((ce+.055)/1.055,2.4),.2126*xe+.7152*Te+.0722*we},setAlpha:function(Z){return this._a=z(Z),this._roundA=v(100*this._a)/100,this},toHsv:function(){var Z=m(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=m(this._r,this._g,this._b),fe=v(Z.h*360),re=v(Z.s*100),ce=v(Z.v*100);return this._a==1?"hsv("+fe+", "+re+"%, "+ce+"%)":"hsva("+fe+", "+re+"%, "+ce+"%, "+this._roundA+")"},toHsl:function(){var Z=u(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=u(this._r,this._g,this._b),fe=v(Z.h*360),re=v(Z.s*100),ce=v(Z.l*100);return this._a==1?"hsl("+fe+", "+re+"%, "+ce+"%)":"hsla("+fe+", "+re+"%, "+ce+"%, "+this._roundA+")"},toHex:function(Z){return w(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return c(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(H(this._r,255)*100)+"%",g:v(H(this._g,255)*100)+"%",b:v(H(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(H(this._r,255)*100)+"%, "+v(H(this._g,255)*100)+"%, "+v(H(this._b,255)*100)+"%)":"rgba("+v(H(this._r,255)*100)+"%, "+v(H(this._g,255)*100)+"%, "+v(H(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:N[w(this._r,this._g,this._b,!0)]||!1},toFilter:function(Z){var fe="#"+a(this._r,this._g,this._b,this._a),re=fe,ce=this._gradientType?"GradientType = 1, ":"";if(Z){var xe=o(Z);re="#"+a(xe._r,xe._g,xe._b,xe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ce+"startColorstr="+fe+",endColorstr="+re+")"},toString:function(Z){var fe=!!Z;Z=Z||this._format;var re=!1,ce=this._a<1&&this._a>=0,xe=!fe&&ce&&(Z==="hex"||Z==="hex6"||Z==="hex3"||Z==="hex4"||Z==="hex8"||Z==="name");return xe?Z==="name"&&this._a===0?this.toName():this.toRgbString():(Z==="rgb"&&(re=this.toRgbString()),Z==="prgb"&&(re=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(re=this.toHexString()),Z==="hex3"&&(re=this.toHexString(!0)),Z==="hex4"&&(re=this.toHex8String(!0)),Z==="hex8"&&(re=this.toHex8String()),Z==="name"&&(re=this.toName()),Z==="hsl"&&(re=this.toHslString()),Z==="hsv"&&(re=this.toHsvString()),re||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(Z,fe){var re=Z.apply(null,[this].concat([].slice.call(fe)));return this._r=re._r,this._g=re._g,this._b=re._b,this.setAlpha(re._a),this},lighten:function(){return this._applyModification(P,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(C,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(Z,fe){return Z.apply(null,[this].concat([].slice.call(fe)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(s,arguments)},monochromatic:function(){return this._applyCombination(V,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},o.fromRatio=function(Z,fe){if(typeof Z=="object"){var re={};for(var ce in Z)Z.hasOwnProperty(ce)&&(ce==="a"?re[ce]=Z[ce]:re[ce]=te(Z[ce]));Z=re}return o(Z,fe)};function i(Z){var fe={r:0,g:0,b:0},re=1,ce=null,xe=null,Te=null,we=!1,_e=!1;return typeof Z=="string"&&(Z=le(Z)),typeof Z=="object"&&(ee(Z.r)&&ee(Z.g)&&ee(Z.b)?(fe=f(Z.r,Z.g,Z.b),we=!0,_e=String(Z.r).substr(-1)==="%"?"prgb":"rgb"):ee(Z.h)&&ee(Z.s)&&ee(Z.v)?(ce=te(Z.s),xe=te(Z.v),fe=h(Z.h,ce,xe),we=!0,_e="hsv"):ee(Z.h)&&ee(Z.s)&&ee(Z.l)&&(ce=te(Z.s),Te=te(Z.l),fe=l(Z.h,ce,Te),we=!0,_e="hsl"),Z.hasOwnProperty("a")&&(re=Z.a)),re=z(re),{ok:we,format:Z.format||_e,r:g(255,r(fe.r,0)),g:g(255,r(fe.g,0)),b:g(255,r(fe.b,0)),a:re}}function f(Z,fe,re){return{r:H(Z,255)*255,g:H(fe,255)*255,b:H(re,255)*255}}function u(Z,fe,re){Z=H(Z,255),fe=H(fe,255),re=H(re,255);var ce=r(Z,fe,re),xe=g(Z,fe,re),Te,we,_e=(ce+xe)/2;if(ce==xe)Te=we=0;else{var ke=ce-xe;switch(we=_e>.5?ke/(2-ce-xe):ke/(ce+xe),ce){case Z:Te=(fe-re)/ke+(fe<re?6:0);break;case fe:Te=(re-Z)/ke+2;break;case re:Te=(Z-fe)/ke+4;break}Te/=6}return{h:Te,s:we,l:_e}}function l(Z,fe,re){var ce,xe,Te;Z=H(Z,360),fe=H(fe,100),re=H(re,100);function we(Ne,Ee,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<.16666666666666666?Ne+(Ee-Ne)*6*ze:ze<.5?Ee:ze<.6666666666666666?Ne+(Ee-Ne)*(.6666666666666666-ze)*6:Ne}if(fe===0)ce=xe=Te=re;else{var _e=re<.5?re*(1+fe):re+fe-re*fe,ke=2*re-_e;ce=we(ke,_e,Z+.3333333333333333),xe=we(ke,_e,Z),Te=we(ke,_e,Z-.3333333333333333)}return{r:ce*255,g:xe*255,b:Te*255}}function m(Z,fe,re){Z=H(Z,255),fe=H(fe,255),re=H(re,255);var ce=r(Z,fe,re),xe=g(Z,fe,re),Te,we,_e=ce,ke=ce-xe;if(we=ce===0?0:ke/ce,ce==xe)Te=0;else{switch(ce){case Z:Te=(fe-re)/ke+(fe<re?6:0);break;case fe:Te=(re-Z)/ke+2;break;case re:Te=(Z-fe)/ke+4;break}Te/=6}return{h:Te,s:we,v:_e}}function h(Z,fe,re){Z=H(Z,360)*6,fe=H(fe,100),re=H(re,100);var ce=S.floor(Z),xe=Z-ce,Te=re*(1-fe),we=re*(1-xe*fe),_e=re*(1-(1-xe)*fe),ke=ce%6,Ne=[re,we,Te,Te,_e,re][ke],Ee=[_e,re,re,we,Te,Te][ke],ze=[Te,Te,_e,re,re,we][ke];return{r:Ne*255,g:Ee*255,b:ze*255}}function w(Z,fe,re,ce){var xe=[ue(v(Z).toString(16)),ue(v(fe).toString(16)),ue(v(re).toString(16))];return ce&&xe[0].charAt(0)==xe[0].charAt(1)&&xe[1].charAt(0)==xe[1].charAt(1)&&xe[2].charAt(0)==xe[2].charAt(1)?xe[0].charAt(0)+xe[1].charAt(0)+xe[2].charAt(0):xe.join("")}function c(Z,fe,re,ce,xe){var Te=[ue(v(Z).toString(16)),ue(v(fe).toString(16)),ue(v(re).toString(16)),ue(J(ce))];return xe&&Te[0].charAt(0)==Te[0].charAt(1)&&Te[1].charAt(0)==Te[1].charAt(1)&&Te[2].charAt(0)==Te[2].charAt(1)&&Te[3].charAt(0)==Te[3].charAt(1)?Te[0].charAt(0)+Te[1].charAt(0)+Te[2].charAt(0)+Te[3].charAt(0):Te.join("")}function a(Z,fe,re,ce){var xe=[ue(J(ce)),ue(v(Z).toString(16)),ue(v(fe).toString(16)),ue(v(re).toString(16))];return xe.join("")}o.equals=function(Z,fe){return!Z||!fe?!1:o(Z).toRgbString()==o(fe).toRgbString()},o.random=function(){return o.fromRatio({r:t(),g:t(),b:t()})};function p(Z,fe){fe=fe===0?0:fe||10;var re=o(Z).toHsl();return re.s-=fe/100,re.s=X(re.s),o(re)}function x(Z,fe){fe=fe===0?0:fe||10;var re=o(Z).toHsl();return re.s+=fe/100,re.s=X(re.s),o(re)}function A(Z){return o(Z).desaturate(100)}function P(Z,fe){fe=fe===0?0:fe||10;var re=o(Z).toHsl();return re.l+=fe/100,re.l=X(re.l),o(re)}function y(Z,fe){fe=fe===0?0:fe||10;var re=o(Z).toRgb();return re.r=r(0,g(255,re.r-v(255*-(fe/100)))),re.g=r(0,g(255,re.g-v(255*-(fe/100)))),re.b=r(0,g(255,re.b-v(255*-(fe/100)))),o(re)}function C(Z,fe){fe=fe===0?0:fe||10;var re=o(Z).toHsl();return re.l-=fe/100,re.l=X(re.l),o(re)}function M(Z,fe){var re=o(Z).toHsl(),ce=(re.h+fe)%360;return re.h=ce<0?360+ce:ce,o(re)}function s(Z){var fe=o(Z).toHsl();return fe.h=(fe.h+180)%360,o(fe)}function _(Z){var fe=o(Z).toHsl(),re=fe.h;return[o(Z),o({h:(re+120)%360,s:fe.s,l:fe.l}),o({h:(re+240)%360,s:fe.s,l:fe.l})]}function b(Z){var fe=o(Z).toHsl(),re=fe.h;return[o(Z),o({h:(re+90)%360,s:fe.s,l:fe.l}),o({h:(re+180)%360,s:fe.s,l:fe.l}),o({h:(re+270)%360,s:fe.s,l:fe.l})]}function k(Z){var fe=o(Z).toHsl(),re=fe.h;return[o(Z),o({h:(re+72)%360,s:fe.s,l:fe.l}),o({h:(re+216)%360,s:fe.s,l:fe.l})]}function D(Z,fe,re){fe=fe||6,re=re||30;var ce=o(Z).toHsl(),xe=360/re,Te=[o(Z)];for(ce.h=(ce.h-(xe*fe>>1)+720)%360;--fe;)ce.h=(ce.h+xe)%360,Te.push(o(ce));return Te}function V(Z,fe){fe=fe||6;for(var re=o(Z).toHsv(),ce=re.h,xe=re.s,Te=re.v,we=[],_e=1/fe;fe--;)we.push(o({h:ce,s:xe,v:Te})),Te=(Te+_e)%1;return we}o.mix=function(Z,fe,re){re=re===0?0:re||50;var ce=o(Z).toRgb(),xe=o(fe).toRgb(),Te=re/100,we={r:(xe.r-ce.r)*Te+ce.r,g:(xe.g-ce.g)*Te+ce.g,b:(xe.b-ce.b)*Te+ce.b,a:(xe.a-ce.a)*Te+ce.a};return o(we)},o.readability=function(Z,fe){var re=o(Z),ce=o(fe);return(S.max(re.getLuminance(),ce.getLuminance())+.05)/(S.min(re.getLuminance(),ce.getLuminance())+.05)},o.isReadable=function(Z,fe,re){var ce=o.readability(Z,fe),xe,Te;switch(Te=!1,xe=j(re),xe.level+xe.size){case"AAsmall":case"AAAlarge":Te=ce>=4.5;break;case"AAlarge":Te=ce>=3;break;case"AAAsmall":Te=ce>=7;break}return Te},o.mostReadable=function(Z,fe,re){var ce=null,xe=0,Te,we,_e,ke;re=re||{},we=re.includeFallbackColors,_e=re.level,ke=re.size;for(var Ne=0;Ne<fe.length;Ne++)Te=o.readability(Z,fe[Ne]),Te>xe&&(xe=Te,ce=o(fe[Ne]));return o.isReadable(Z,ce,{level:_e,size:ke})||!we?ce:(re.includeFallbackColors=!1,o.mostReadable(Z,["#fff","#000"],re))};var O=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},N=o.hexNames=B(O);function B(Z){var fe={};for(var re in Z)Z.hasOwnProperty(re)&&(fe[Z[re]]=re);return fe}function z(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function H(Z,fe){ne(Z)&&(Z="100%");var re=q(Z);return Z=g(fe,r(0,parseFloat(Z))),re&&(Z=parseInt(Z*fe,10)/100),S.abs(Z-fe)<1e-6?1:Z%fe/parseFloat(fe)}function X(Z){return g(1,r(0,Z))}function $(Z){return parseInt(Z,16)}function ne(Z){return typeof Z=="string"&&Z.indexOf(".")!=-1&&parseFloat(Z)===1}function q(Z){return typeof Z=="string"&&Z.indexOf("%")!=-1}function ue(Z){return Z.length==1?"0"+Z:""+Z}function te(Z){return Z<=1&&(Z=Z*100+"%"),Z}function J(Z){return S.round(parseFloat(Z)*255).toString(16)}function ie(Z){return $(Z)/255}var K=function(){var Z="[-\\+]?\\d+%?",fe="[-\\+]?\\d*\\.\\d+%?",re="(?:"+fe+")|(?:"+Z+")",ce="[\\s|\\(]+("+re+")[,|\\s]+("+re+")[,|\\s]+("+re+")\\s*\\)?",xe="[\\s|\\(]+("+re+")[,|\\s]+("+re+")[,|\\s]+("+re+")[,|\\s]+("+re+")\\s*\\)?";return{CSS_UNIT:new RegExp(re),rgb:new RegExp("rgb"+ce),rgba:new RegExp("rgba"+xe),hsl:new RegExp("hsl"+ce),hsla:new RegExp("hsla"+xe),hsv:new RegExp("hsv"+ce),hsva:new RegExp("hsva"+xe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ee(Z){return!!K.CSS_UNIT.exec(Z)}function le(Z){Z=Z.replace(n,"").replace(E,"").toLowerCase();var fe=!1;if(O[Z])Z=O[Z],fe=!0;else if(Z=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var re;return(re=K.rgb.exec(Z))?{r:re[1],g:re[2],b:re[3]}:(re=K.rgba.exec(Z))?{r:re[1],g:re[2],b:re[3],a:re[4]}:(re=K.hsl.exec(Z))?{h:re[1],s:re[2],l:re[3]}:(re=K.hsla.exec(Z))?{h:re[1],s:re[2],l:re[3],a:re[4]}:(re=K.hsv.exec(Z))?{h:re[1],s:re[2],v:re[3]}:(re=K.hsva.exec(Z))?{h:re[1],s:re[2],v:re[3],a:re[4]}:(re=K.hex8.exec(Z))?{r:$(re[1]),g:$(re[2]),b:$(re[3]),a:ie(re[4]),format:fe?"name":"hex8"}:(re=K.hex6.exec(Z))?{r:$(re[1]),g:$(re[2]),b:$(re[3]),format:fe?"name":"hex"}:(re=K.hex4.exec(Z))?{r:$(re[1]+""+re[1]),g:$(re[2]+""+re[2]),b:$(re[3]+""+re[3]),a:ie(re[4]+""+re[4]),format:fe?"name":"hex8"}:(re=K.hex3.exec(Z))?{r:$(re[1]+""+re[1]),g:$(re[2]+""+re[2]),b:$(re[3]+""+re[3]),format:fe?"name":"hex"}:!1}function j(Z){var fe,re;return Z=Z||{level:"AA",size:"small"},fe=(Z.level||"AA").toUpperCase(),re=(Z.size||"small").toLowerCase(),fe!=="AA"&&fe!=="AAA"&&(fe="AA"),re!=="small"&&re!=="large"&&(re="small"),{level:fe,size:re}}U.exports?U.exports=o:(d=(function(){return o}).call(F,e,F,U),d!==void 0&&(U.exports=d))})(Math)},37816:function(U){U.exports=d,U.exports.float32=U.exports.float=d,U.exports.fract32=U.exports.fract=e;var F=new Float32Array(1);function e(S,n){if(S.length){if(S instanceof Float32Array)return new Float32Array(S.length);n instanceof Float32Array||(n=d(S));for(var E=0,T=n.length;E<T;E++)n[E]=S[E]-n[E];return n}return d(S-d(S))}function d(S){return S.length?S instanceof Float32Array?S:new Float32Array(S):(F[0]=S,F[0])}},23464:function(U,F,e){var d=e(65819);U.exports=T;var S=96;function n(v,g){var r=d(getComputedStyle(v).getPropertyValue(g));return r[0]*T(r[1],v)}function E(v,g){var r=document.createElement("div");r.style["font-size"]="128"+v,g.appendChild(r);var t=n(r,"font-size")/128;return g.removeChild(r),t}function T(v,g){switch(g=g||document.body,v=(v||"px").trim().toLowerCase(),(g===window||g===document)&&(g=document.body),v){case"%":return g.clientHeight/100;case"ch":case"ex":return E(v,g);case"em":return n(g,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return S;case"cm":return S/2.54;case"mm":return S/25.4;case"pt":return S/72;case"pc":return S/6}return 1}},55712:function(U,F,e){e.d(F,{NO:function(){return E}});function d(g,r){for(var t,o=g.length,i=o-r;i<--o;)t=g[i],g[i++]=g[o],g[o]=t}function S(g){return g}function n(g){if(g==null)return S;var r,t,o=g.scale[0],i=g.scale[1],f=g.translate[0],u=g.translate[1];return function(l,m){m||(r=t=0);var h=2,w=l.length,c=new Array(w);for(c[0]=(r+=l[0])*o+f,c[1]=(t+=l[1])*i+u;h<w;)c[h]=l[h],++h;return c}}function E(g,r){return typeof r=="string"&&(r=g.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(t){return T(g,t)})}:T(g,r)}function T(g,r){var t=r.id,o=r.bbox,i=r.properties==null?{}:r.properties,f=v(g,r);return t==null&&o==null?{type:"Feature",properties:i,geometry:f}:o==null?{type:"Feature",id:t,properties:i,geometry:f}:{type:"Feature",id:t,bbox:o,properties:i,geometry:f}}function v(g,r){var t=n(g.transform),o=g.arcs;function i(w,c){c.length&&c.pop();for(var a=o[w<0?~w:w],p=0,x=a.length;p<x;++p)c.push(t(a[p],p));w<0&&d(c,x)}function f(w){return t(w)}function u(w){for(var c=[],a=0,p=w.length;a<p;++a)i(w[a],c);return c.length<2&&c.push(c[0]),c}function l(w){for(var c=u(w);c.length<4;)c.push(c[0]);return c}function m(w){return w.map(l)}function h(w){var c=w.type,a;switch(c){case"GeometryCollection":return{type:c,geometries:w.geometries.map(h)};case"Point":a=f(w.coordinates);break;case"MultiPoint":a=w.coordinates.map(f);break;case"LineString":a=u(w.arcs);break;case"MultiLineString":a=w.arcs.map(u);break;case"Polygon":a=m(w.arcs);break;case"MultiPolygon":a=w.arcs.map(m);break;default:return null}return{type:c,coordinates:a}}return h(r)}},73384:function(U,F,e){var d=e(54612);U.exports=function(S){if(typeof S!="function"||!hasOwnProperty.call(S,"length"))return!1;try{if(typeof S.length!="number"||typeof S.call!="function"||typeof S.apply!="function")return!1}catch{return!1}return!d(S)}},57980:function(U,F,e){var d=e(81680),S=e(7328),n=e(33940),E=e(18856),T=function(v,g){return v.replace("%v",E(g))};U.exports=function(v,g,r){if(!S(r))throw new TypeError(T(g,v));if(!d(v)){if("default"in r)return r.default;if(r.isOptional)return null}var t=n(r.errorMessage);throw d(t)||(t=g),new TypeError(T(t,v))}},32336:function(U){U.exports=function(F){try{return F.toString()}catch{try{return String(F)}catch{return null}}}},18856:function(U,F,e){var d=e(32336),S=/[\n\r\u2028\u2029]/g;U.exports=function(n){var E=d(n);return E===null?"<Non-coercible to string value>":(E.length>100&&(E=E.slice(0,99)+""),E=E.replace(S,function(T){switch(T){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),E)}},7328:function(U,F,e){var d=e(81680),S={object:!0,function:!0,undefined:!0};U.exports=function(n){return d(n)?hasOwnProperty.call(S,typeof n):!1}},87396:function(U,F,e){var d=e(57980),S=e(85488);U.exports=function(n){return S(n)?n:d(n,"%v is not a plain function",arguments[1])}},85488:function(U,F,e){var d=e(73384),S=/^\s*class[\s{/}]/,n=Function.prototype.toString;U.exports=function(E){return!(!d(E)||S.test(n.call(E)))}},54612:function(U,F,e){var d=e(7328);U.exports=function(S){if(!d(S))return!1;try{return S.constructor?S.constructor.prototype===S:!1}catch{return!1}}},33940:function(U,F,e){var d=e(81680),S=e(7328),n=Object.prototype.toString;U.exports=function(E){if(!d(E))return null;if(S(E)){var T=E.toString;if(typeof T!="function"||T===n)return null}try{return""+E}catch{return null}}},18496:function(U,F,e){var d=e(57980),S=e(81680);U.exports=function(n){return S(n)?n:d(n,"Cannot use %v",arguments[1])}},81680:function(U){var F=void 0;U.exports=function(e){return e!==F&&e!==null}},14144:function(U,F,e){var d=e(308),S=e(10352),n=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:S([32,0]),UINT16:S([32,0]),UINT32:S([32,0]),BIGUINT64:S([32,0]),INT8:S([32,0]),INT16:S([32,0]),INT32:S([32,0]),BIGINT64:S([32,0]),FLOAT:S([32,0]),DOUBLE:S([32,0]),DATA:S([32,0]),UINT8C:S([32,0]),BUFFER:S([32,0])});var E=typeof Uint8ClampedArray<"u",T=typeof BigUint64Array<"u",v=typeof BigInt64Array<"u",g=e.g.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=S([32,0])),g.BIGUINT64||(g.BIGUINT64=S([32,0])),g.BIGINT64||(g.BIGINT64=S([32,0])),g.BUFFER||(g.BUFFER=S([32,0]));var r=g.DATA,t=g.BUFFER;F.free=function(s){if(n.isBuffer(s))t[d.log2(s.length)].push(s);else{if(Object.prototype.toString.call(s)!=="[object ArrayBuffer]"&&(s=s.buffer),!s)return;var _=s.length||s.byteLength,b=d.log2(_)|0;r[b].push(s)}};function o(M){if(M){var s=M.length||M.byteLength,_=d.log2(s);r[_].push(M)}}function i(M){o(M.buffer)}F.freeUint8=F.freeUint16=F.freeUint32=F.freeBigUint64=F.freeInt8=F.freeInt16=F.freeInt32=F.freeBigInt64=F.freeFloat32=F.freeFloat=F.freeFloat64=F.freeDouble=F.freeUint8Clamped=F.freeDataView=i,F.freeArrayBuffer=o,F.freeBuffer=function(s){t[d.log2(s.length)].push(s)},F.malloc=function(s,_){if(_===void 0||_==="arraybuffer")return f(s);switch(_){case"uint8":return u(s);case"uint16":return l(s);case"uint32":return m(s);case"int8":return h(s);case"int16":return w(s);case"int32":return c(s);case"float":case"float32":return a(s);case"double":case"float64":return p(s);case"uint8_clamped":return x(s);case"bigint64":return P(s);case"biguint64":return A(s);case"buffer":return C(s);case"data":case"dataview":return y(s);default:return null}return null};function f(s){var s=d.nextPow2(s),_=d.log2(s),b=r[_];return b.length>0?b.pop():new ArrayBuffer(s)}F.mallocArrayBuffer=f;function u(M){return new Uint8Array(f(M),0,M)}F.mallocUint8=u;function l(M){return new Uint16Array(f(2*M),0,M)}F.mallocUint16=l;function m(M){return new Uint32Array(f(4*M),0,M)}F.mallocUint32=m;function h(M){return new Int8Array(f(M),0,M)}F.mallocInt8=h;function w(M){return new Int16Array(f(2*M),0,M)}F.mallocInt16=w;function c(M){return new Int32Array(f(4*M),0,M)}F.mallocInt32=c;function a(M){return new Float32Array(f(4*M),0,M)}F.mallocFloat32=F.mallocFloat=a;function p(M){return new Float64Array(f(8*M),0,M)}F.mallocFloat64=F.mallocDouble=p;function x(M){return E?new Uint8ClampedArray(f(M),0,M):u(M)}F.mallocUint8Clamped=x;function A(M){return T?new BigUint64Array(f(8*M),0,M):null}F.mallocBigUint64=A;function P(M){return v?new BigInt64Array(f(8*M),0,M):null}F.mallocBigInt64=P;function y(M){return new DataView(f(M),0,M)}F.mallocDataView=y;function C(M){M=d.nextPow2(M);var s=d.log2(M),_=t[s];return _.length>0?_.pop():new n(M)}F.mallocBuffer=C,F.clearCache=function(){for(var s=0;s<32;++s)g.UINT8[s].length=0,g.UINT16[s].length=0,g.UINT32[s].length=0,g.INT8[s].length=0,g.INT16[s].length=0,g.INT32[s].length=0,g.FLOAT[s].length=0,g.DOUBLE[s].length=0,g.BIGUINT64[s].length=0,g.BIGINT64[s].length=0,g.UINT8C[s].length=0,r[s].length=0,t[s].length=0}},92384:function(U){var F=/[\'\"]/;U.exports=function(d){return d?(F.test(d.charAt(0))&&(d=d.substr(1)),F.test(d.charAt(d.length-1))&&(d=d.substr(0,d.length-1)),d):""}},45223:function(U){U.exports=function(e,d,S){Array.isArray(S)||(S=[].slice.call(arguments,2));for(var n=0,E=S.length;n<E;n++){var T=S[n];for(var v in T)if(!(d[v]!==void 0&&!Array.isArray(d[v])&&e[v]===d[v])&&v in d){var g;if(T[v]===!0)g=d[v];else{if(T[v]===!1)continue;if(typeof T[v]=="function"&&(g=T[v](d[v],e,d),g===void 0))continue}e[v]=g}}return e}},96656:function(U,F,e){U.exports=d;function d(n,E){if(S("noDeprecation"))return n;var T=!1;function v(){if(!T){if(S("throwDeprecation"))throw new Error(E);S("traceDeprecation")?console.trace(E):console.warn(E),T=!0}return n.apply(this,arguments)}return v}function S(n){try{if(!e.g.localStorage)return!1}catch{return!1}var E=e.g.localStorage[n];return E==null?!1:String(E).toLowerCase()==="true"}},75272:function(U){U.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}},41088:function(U,F,e){var d=e(91148),S=e(84420),n=e(96632),E=e(7728);function T(Te){return Te.call.bind(Te)}var v=typeof BigInt<"u",g=typeof Symbol<"u",r=T(Object.prototype.toString),t=T(Number.prototype.valueOf),o=T(String.prototype.valueOf),i=T(Boolean.prototype.valueOf);if(v)var f=T(BigInt.prototype.valueOf);if(g)var u=T(Symbol.prototype.valueOf);function l(Te,we){if(typeof Te!="object")return!1;try{return we(Te),!0}catch{return!1}}F.isArgumentsObject=d,F.isGeneratorFunction=S,F.isTypedArray=E;function m(Te){return typeof Promise<"u"&&Te instanceof Promise||Te!==null&&typeof Te=="object"&&typeof Te.then=="function"&&typeof Te.catch=="function"}F.isPromise=m;function h(Te){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Te):E(Te)||$(Te)}F.isArrayBufferView=h;function w(Te){return n(Te)==="Uint8Array"}F.isUint8Array=w;function c(Te){return n(Te)==="Uint8ClampedArray"}F.isUint8ClampedArray=c;function a(Te){return n(Te)==="Uint16Array"}F.isUint16Array=a;function p(Te){return n(Te)==="Uint32Array"}F.isUint32Array=p;function x(Te){return n(Te)==="Int8Array"}F.isInt8Array=x;function A(Te){return n(Te)==="Int16Array"}F.isInt16Array=A;function P(Te){return n(Te)==="Int32Array"}F.isInt32Array=P;function y(Te){return n(Te)==="Float32Array"}F.isFloat32Array=y;function C(Te){return n(Te)==="Float64Array"}F.isFloat64Array=C;function M(Te){return n(Te)==="BigInt64Array"}F.isBigInt64Array=M;function s(Te){return n(Te)==="BigUint64Array"}F.isBigUint64Array=s;function _(Te){return r(Te)==="[object Map]"}_.working=typeof Map<"u"&&_(new Map);function b(Te){return typeof Map>"u"?!1:_.working?_(Te):Te instanceof Map}F.isMap=b;function k(Te){return r(Te)==="[object Set]"}k.working=typeof Set<"u"&&k(new Set);function D(Te){return typeof Set>"u"?!1:k.working?k(Te):Te instanceof Set}F.isSet=D;function V(Te){return r(Te)==="[object WeakMap]"}V.working=typeof WeakMap<"u"&&V(new WeakMap);function O(Te){return typeof WeakMap>"u"?!1:V.working?V(Te):Te instanceof WeakMap}F.isWeakMap=O;function N(Te){return r(Te)==="[object WeakSet]"}N.working=typeof WeakSet<"u"&&N(new WeakSet);function B(Te){return N(Te)}F.isWeakSet=B;function z(Te){return r(Te)==="[object ArrayBuffer]"}z.working=typeof ArrayBuffer<"u"&&z(new ArrayBuffer);function H(Te){return typeof ArrayBuffer>"u"?!1:z.working?z(Te):Te instanceof ArrayBuffer}F.isArrayBuffer=H;function X(Te){return r(Te)==="[object DataView]"}X.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&X(new DataView(new ArrayBuffer(1),0,1));function $(Te){return typeof DataView>"u"?!1:X.working?X(Te):Te instanceof DataView}F.isDataView=$;var ne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function q(Te){return r(Te)==="[object SharedArrayBuffer]"}function ue(Te){return typeof ne>"u"?!1:(typeof q.working>"u"&&(q.working=q(new ne)),q.working?q(Te):Te instanceof ne)}F.isSharedArrayBuffer=ue;function te(Te){return r(Te)==="[object AsyncFunction]"}F.isAsyncFunction=te;function J(Te){return r(Te)==="[object Map Iterator]"}F.isMapIterator=J;function ie(Te){return r(Te)==="[object Set Iterator]"}F.isSetIterator=ie;function K(Te){return r(Te)==="[object Generator]"}F.isGeneratorObject=K;function ee(Te){return r(Te)==="[object WebAssembly.Module]"}F.isWebAssemblyCompiledModule=ee;function le(Te){return l(Te,t)}F.isNumberObject=le;function j(Te){return l(Te,o)}F.isStringObject=j;function Z(Te){return l(Te,i)}F.isBooleanObject=Z;function fe(Te){return v&&l(Te,f)}F.isBigIntObject=fe;function re(Te){return g&&l(Te,u)}F.isSymbolObject=re;function ce(Te){return le(Te)||j(Te)||Z(Te)||fe(Te)||re(Te)}F.isBoxedPrimitive=ce;function xe(Te){return typeof Uint8Array<"u"&&(H(Te)||ue(Te))}F.isAnyArrayBuffer=xe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Te){Object.defineProperty(F,Te,{enumerable:!1,value:function(){throw new Error(Te+" is not supported in userland")}})})},35840:function(U,F,e){var d=e(4168),S=Object.getOwnPropertyDescriptors||function(ne){for(var q=Object.keys(ne),ue={},te=0;te<q.length;te++)ue[q[te]]=Object.getOwnPropertyDescriptor(ne,q[te]);return ue},n=/%[sdj%]/g;F.format=function($){if(!A($)){for(var ne=[],q=0;q<arguments.length;q++)ne.push(g(arguments[q]));return ne.join(" ")}for(var q=1,ue=arguments,te=ue.length,J=String($).replace(n,function(K){if(K==="%%")return"%";if(q>=te)return K;switch(K){case"%s":return String(ue[q++]);case"%d":return Number(ue[q++]);case"%j":try{return JSON.stringify(ue[q++])}catch{return"[Circular]"}default:return K}}),ie=ue[q];q<te;ie=ue[++q])a(ie)||!M(ie)?J+=" "+ie:J+=" "+g(ie);return J},F.deprecate=function($,ne){if(typeof d<"u"&&d.noDeprecation===!0)return $;if(typeof d>"u")return function(){return F.deprecate($,ne).apply(this,arguments)};var q=!1;function ue(){if(!q){if(d.throwDeprecation)throw new Error(ne);d.traceDeprecation?console.trace(ne):console.error(ne),q=!0}return $.apply(this,arguments)}return ue};var E={},T=/^$/;if(d.env.NODE_DEBUG){var v=d.env.NODE_DEBUG;v=v.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),T=new RegExp("^"+v+"$","i")}F.debuglog=function($){if($=$.toUpperCase(),!E[$])if(T.test($)){var ne=d.pid;E[$]=function(){var q=F.format.apply(F,arguments);console.error("%s %d: %s",$,ne,q)}}else E[$]=function(){};return E[$]};function g($,ne){var q={seen:[],stylize:t};return arguments.length>=3&&(q.depth=arguments[2]),arguments.length>=4&&(q.colors=arguments[3]),c(ne)?q.showHidden=ne:ne&&F._extend(q,ne),y(q.showHidden)&&(q.showHidden=!1),y(q.depth)&&(q.depth=2),y(q.colors)&&(q.colors=!1),y(q.customInspect)&&(q.customInspect=!0),q.colors&&(q.stylize=r),i(q,$,q.depth)}F.inspect=g,g.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},g.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function r($,ne){var q=g.styles[ne];return q?"\x1B["+g.colors[q][0]+"m"+$+"\x1B["+g.colors[q][1]+"m":$}function t($,ne){return $}function o($){var ne={};return $.forEach(function(q,ue){ne[q]=!0}),ne}function i($,ne,q){if($.customInspect&&ne&&b(ne.inspect)&&ne.inspect!==F.inspect&&!(ne.constructor&&ne.constructor.prototype===ne)){var ue=ne.inspect(q,$);return A(ue)||(ue=i($,ue,q)),ue}var te=f($,ne);if(te)return te;var J=Object.keys(ne),ie=o(J);if($.showHidden&&(J=Object.getOwnPropertyNames(ne)),_(ne)&&(J.indexOf("message")>=0||J.indexOf("description")>=0))return u(ne);if(J.length===0){if(b(ne)){var K=ne.name?": "+ne.name:"";return $.stylize("[Function"+K+"]","special")}if(C(ne))return $.stylize(RegExp.prototype.toString.call(ne),"regexp");if(s(ne))return $.stylize(Date.prototype.toString.call(ne),"date");if(_(ne))return u(ne)}var ee="",le=!1,j=["{","}"];if(w(ne)&&(le=!0,j=["[","]"]),b(ne)){var Z=ne.name?": "+ne.name:"";ee=" [Function"+Z+"]"}if(C(ne)&&(ee=" "+RegExp.prototype.toString.call(ne)),s(ne)&&(ee=" "+Date.prototype.toUTCString.call(ne)),_(ne)&&(ee=" "+u(ne)),J.length===0&&(!le||ne.length==0))return j[0]+ee+j[1];if(q<0)return C(ne)?$.stylize(RegExp.prototype.toString.call(ne),"regexp"):$.stylize("[Object]","special");$.seen.push(ne);var fe;return le?fe=l($,ne,q,ie,J):fe=J.map(function(re){return m($,ne,q,ie,re,le)}),$.seen.pop(),h(fe,ee,j)}function f($,ne){if(y(ne))return $.stylize("undefined","undefined");if(A(ne)){var q="'"+JSON.stringify(ne).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(q,"string")}if(x(ne))return $.stylize(""+ne,"number");if(c(ne))return $.stylize(""+ne,"boolean");if(a(ne))return $.stylize("null","null")}function u($){return"["+Error.prototype.toString.call($)+"]"}function l($,ne,q,ue,te){for(var J=[],ie=0,K=ne.length;ie<K;++ie)B(ne,String(ie))?J.push(m($,ne,q,ue,String(ie),!0)):J.push("");return te.forEach(function(ee){ee.match(/^\d+$/)||J.push(m($,ne,q,ue,ee,!0))}),J}function m($,ne,q,ue,te,J){var ie,K,ee;if(ee=Object.getOwnPropertyDescriptor(ne,te)||{value:ne[te]},ee.get?ee.set?K=$.stylize("[Getter/Setter]","special"):K=$.stylize("[Getter]","special"):ee.set&&(K=$.stylize("[Setter]","special")),B(ue,te)||(ie="["+te+"]"),K||($.seen.indexOf(ee.value)<0?(a(q)?K=i($,ee.value,null):K=i($,ee.value,q-1),K.indexOf(`
`)>-1&&(J?K=K.split(`
`).map(function(le){return"  "+le}).join(`
`).slice(2):K=`
`+K.split(`
`).map(function(le){return"   "+le}).join(`
`))):K=$.stylize("[Circular]","special")),y(ie)){if(J&&te.match(/^\d+$/))return K;ie=JSON.stringify(""+te),ie.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ie=ie.slice(1,-1),ie=$.stylize(ie,"name")):(ie=ie.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ie=$.stylize(ie,"string"))}return ie+": "+K}function h($,ne,q){var ue=$.reduce(function(te,J){return J.indexOf(`
`)>=0,te+J.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ue>60?q[0]+(ne===""?"":ne+`
 `)+" "+$.join(`,
  `)+" "+q[1]:q[0]+ne+" "+$.join(", ")+" "+q[1]}F.types=e(41088);function w($){return Array.isArray($)}F.isArray=w;function c($){return typeof $=="boolean"}F.isBoolean=c;function a($){return $===null}F.isNull=a;function p($){return $==null}F.isNullOrUndefined=p;function x($){return typeof $=="number"}F.isNumber=x;function A($){return typeof $=="string"}F.isString=A;function P($){return typeof $=="symbol"}F.isSymbol=P;function y($){return $===void 0}F.isUndefined=y;function C($){return M($)&&D($)==="[object RegExp]"}F.isRegExp=C,F.types.isRegExp=C;function M($){return typeof $=="object"&&$!==null}F.isObject=M;function s($){return M($)&&D($)==="[object Date]"}F.isDate=s,F.types.isDate=s;function _($){return M($)&&(D($)==="[object Error]"||$ instanceof Error)}F.isError=_,F.types.isNativeError=_;function b($){return typeof $=="function"}F.isFunction=b;function k($){return $===null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||typeof $=="symbol"||typeof $>"u"}F.isPrimitive=k,F.isBuffer=e(75272);function D($){return Object.prototype.toString.call($)}function V($){return $<10?"0"+$.toString(10):$.toString(10)}var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var $=new Date,ne=[V($.getHours()),V($.getMinutes()),V($.getSeconds())].join(":");return[$.getDate(),O[$.getMonth()],ne].join(" ")}F.log=function(){console.log("%s - %s",N(),F.format.apply(F,arguments))},F.inherits=e(6768),F._extend=function($,ne){if(!ne||!M(ne))return $;for(var q=Object.keys(ne),ue=q.length;ue--;)$[q[ue]]=ne[q[ue]];return $};function B($,ne){return Object.prototype.hasOwnProperty.call($,ne)}var z=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;F.promisify=function(ne){if(typeof ne!="function")throw new TypeError('The "original" argument must be of type Function');if(z&&ne[z]){var q=ne[z];if(typeof q!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(q,z,{value:q,enumerable:!1,writable:!1,configurable:!0}),q}function q(){for(var ue,te,J=new Promise(function(ee,le){ue=ee,te=le}),ie=[],K=0;K<arguments.length;K++)ie.push(arguments[K]);ie.push(function(ee,le){ee?te(ee):ue(le)});try{ne.apply(this,ie)}catch(ee){te(ee)}return J}return Object.setPrototypeOf(q,Object.getPrototypeOf(ne)),z&&Object.defineProperty(q,z,{value:q,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(q,S(ne))},F.promisify.custom=z;function H($,ne){if(!$){var q=new Error("Promise was rejected with a falsy value");q.reason=$,$=q}return ne($)}function X($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');function ne(){for(var q=[],ue=0;ue<arguments.length;ue++)q.push(arguments[ue]);var te=q.pop();if(typeof te!="function")throw new TypeError("The last argument must be of type Function");var J=this,ie=function(){return te.apply(J,arguments)};$.apply(this,q).then(function(K){d.nextTick(ie.bind(null,null,K))},function(K){d.nextTick(H.bind(null,K,ie))})}return Object.setPrototypeOf(ne,Object.getPrototypeOf($)),Object.defineProperties(ne,S($)),ne}F.callbackify=X},5408:function(U,F,e){var d=e(13380);U.exports=function(n){return d("webgl",n)}},96632:function(U,F,e){var d=e(46492),S=e(63436),n=e(57916),E=e(99676),T=e(2304),v=E("Object.prototype.toString"),g=e(46672)(),r=typeof globalThis>"u"?e.g:globalThis,t=S(),o=E("String.prototype.slice"),i=Object.getPrototypeOf,f=E("Array.prototype.indexOf",!0)||function(w,c){for(var a=0;a<w.length;a+=1)if(w[a]===c)return a;return-1},u={__proto__:null};g&&T&&i?d(t,function(h){var w=new r[h];if(Symbol.toStringTag in w){var c=i(w),a=T(c,Symbol.toStringTag);if(!a){var p=i(c);a=T(p,Symbol.toStringTag)}u["$"+h]=n(a.get)}}):d(t,function(h){var w=new r[h],c=w.slice||w.set;c&&(u["$"+h]=n(c))});var l=function(w){var c=!1;return d(u,function(a,p){if(!c)try{"$"+a(w)===p&&(c=o(p,1))}catch{}}),c},m=function(w){var c=!1;return d(u,function(a,p){if(!c)try{a(w),c=o(p,1)}catch{}}),c};U.exports=function(w){if(!w||typeof w!="object")return!1;if(!g){var c=o(v(w),8,-1);return f(t,c)>-1?c:c!=="Object"?!1:m(w)}return T?l(w):null}},67020:function(U,F,e){var d=e(38700),S=e(50896),n=d.instance();function E(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}E.prototype=new d.baseCalendar,S(E.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(u,l){if(typeof u=="string"){var m=u.match(v);return m?m[0]:""}var h=this._validateYear(u),w=u.month(),c=""+this.toChineseMonth(h,w);return l&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(h,w)&&(c+="i"),c},monthNames:function(u){if(typeof u=="string"){var l=u.match(g);return l?l[0]:""}var m=this._validateYear(u),h=u.month(),w=this.toChineseMonth(m,h),c=["","","","","","","","","","","",""][w-1];return this.isIntercalaryMonth(m,h)&&(c=""+c),c},monthNamesShort:function(u){if(typeof u=="string"){var l=u.match(r);return l?l[0]:""}var m=this._validateYear(u),h=u.month(),w=this.toChineseMonth(m,h),c=["","","","","","","","","","","",""][w-1];return this.isIntercalaryMonth(m,h)&&(c=""+c),c},parseMonth:function(u,l){u=this._validateYear(u);var m=parseInt(l),h;if(isNaN(m))l[0]===""&&(h=!0,l=l.substring(1)),l[l.length-1]===""&&(l=l.substring(0,l.length-1)),m=1+["","","","","","","","","","","",""].indexOf(l);else{var w=l[l.length-1];h=w==="i"||w==="I"}var c=this.toMonthIndex(u,m,h);return c},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(u,l){if(u.year&&(u=u.year()),typeof u!="number"||u<1888||u>2111)throw l.replace(/\{0\}/,this.local.name);return u},toMonthIndex:function(u,l,m){var h=this.intercalaryMonth(u),w=m&&l!==h;if(w||l<1||l>12)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var c;return h?!m&&l<=h?c=l-1:c=l:c=l-1,c},toChineseMonth:function(u,l){u.year&&(u=u.year(),l=u.month());var m=this.intercalaryMonth(u),h=m?12:11;if(l<0||l>h)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var w;return m?l<m?w=l+1:w=l:w=l+1,w},intercalaryMonth:function(u){u=this._validateYear(u);var l=t[u-t[0]],m=l>>13;return m},isIntercalaryMonth:function(u,l){u.year&&(u=u.year(),l=u.month());var m=this.intercalaryMonth(u);return!!m&&m===l},leapYear:function(u){return this.intercalaryMonth(u)!==0},weekOfYear:function(u,l,m){var h=this._validateYear(u,d.local.invalidyear),w=o[h-o[0]],c=w>>9&4095,a=w>>5&15,p=w&31,x;x=n.newDate(c,a,p),x.add(4-(x.dayOfWeek()||7),"d");var A=this.toJD(u,l,m)-x.toJD();return 1+Math.floor(A/7)},monthsInYear:function(u){return this.leapYear(u)?13:12},daysInMonth:function(u,l){u.year&&(l=u.month(),u=u.year()),u=this._validateYear(u);var m=t[u-t[0]],h=m>>13,w=h?12:11;if(l>w)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var c=m&1<<12-l?30:29;return c},weekDay:function(u,l,m){return(this.dayOfWeek(u,l,m)||7)<6},toJD:function(u,l,m){var h=this._validate(u,c,m,d.local.invalidDate);u=this._validateYear(h.year()),l=h.month(),m=h.day();var w=this.isIntercalaryMonth(u,l),c=this.toChineseMonth(u,l),a=f(u,c,m,w);return n.toJD(a.year,a.month,a.day)},fromJD:function(u){var l=n.fromJD(u),m=i(l.year(),l.month(),l.day()),h=this.toMonthIndex(m.year,m.month,m.isIntercalary);return this.newDate(m.year,h,m.day)},fromString:function(u){var l=u.match(T),m=this._validateYear(+l[1]),h=+l[2],w=!!l[3],c=this.toMonthIndex(m,h,w),a=+l[4];return this.newDate(m,c,a)},add:function(u,l,m){var h=u.year(),w=u.month(),c=this.isIntercalaryMonth(h,w),a=this.toChineseMonth(h,w),p=Object.getPrototypeOf(E.prototype).add.call(this,u,l,m);if(m==="y"){var x=p.year(),A=p.month(),P=this.isIntercalaryMonth(x,a),y=c&&P?this.toMonthIndex(x,a,!0):this.toMonthIndex(x,a,!1);y!==A&&p.month(y)}return p}});var T=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,v=/^\d?\d[iI]?/m,g=/^??[]?/m,r=/^??[]?/m;d.calendars.chinese=E;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],o=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function i(u,l,m,h){var w,c;if(typeof u=="object")w=u,c=l||{};else{var a=typeof u=="number"&&u>=1888&&u<=2111;if(!a)throw new Error("Solar year outside range 1888-2111");var p=typeof l=="number"&&l>=1&&l<=12;if(!p)throw new Error("Solar month outside range 1 - 12");var x=typeof m=="number"&&m>=1&&m<=31;if(!x)throw new Error("Solar day outside range 1 - 31");w={year:u,month:l,day:m},c={}}var A=o[w.year-o[0]],P=w.year<<9|w.month<<5|w.day;c.year=P>=A?w.year:w.year-1,A=o[c.year-o[0]];var y=A>>9&4095,C=A>>5&15,M=A&31,s,_=new Date(y,C-1,M),b=new Date(w.year,w.month-1,w.day);s=Math.round((b-_)/864e5);var k=t[c.year-t[0]],D;for(D=0;D<13;D++){var V=k&1<<12-D?30:29;if(s<V)break;s-=V}var O=k>>13;return!O||D<O?(c.isIntercalary=!1,c.month=1+D):D===O?(c.isIntercalary=!0,c.month=D):(c.isIntercalary=!1,c.month=D),c.day=1+s,c}function f(u,l,m,h,w){var c,a;if(typeof u=="object")a=u,c=l||{};else{var p=typeof u=="number"&&u>=1888&&u<=2111;if(!p)throw new Error("Lunar year outside range 1888-2111");var x=typeof l=="number"&&l>=1&&l<=12;if(!x)throw new Error("Lunar month outside range 1 - 12");var A=typeof m=="number"&&m>=1&&m<=30;if(!A)throw new Error("Lunar day outside range 1 - 30");var P;typeof h=="object"?(P=!1,c=h):(P=!!h,c={}),a={year:u,month:l,day:m,isIntercalary:P}}var y;y=a.day-1;var C=t[a.year-t[0]],M=C>>13,s;M&&(a.month>M||a.isIntercalary)?s=a.month:s=a.month-1;for(var _=0;_<s;_++){var b=C&1<<12-_?30:29;y+=b}var k=o[a.year-o[0]],D=k>>9&4095,V=k>>5&15,O=k&31,N=new Date(D,V-1,O+y);return c.year=N.getFullYear(),c.month=1+N.getMonth(),c.day=N.getDate(),c}},89792:function(U,F,e){var d=e(38700),S=e(50896);function n(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var T=this._validate(v,this.minMonth,this.minDay,d.local.invalidYear),v=T.year()+(T.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(E){return this._validate(E,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(E,T,v){var g=this.newDate(E,T,v);return g.add(-g.dayOfWeek(),"d"),Math.floor((g.dayOfYear()-1)/7)+1},daysInMonth:function(E,T){var v=this._validate(E,T,this.minDay,d.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(E,T,v){return(this.dayOfWeek(E,T,v)||7)<6},toJD:function(E,T,v){var g=this._validate(E,T,v,d.local.invalidDate);return E=g.year(),E<0&&E++,g.day()+(g.month()-1)*30+(E-1)*365+Math.floor(E/4)+this.jdEpoch-1},fromJD:function(E){var T=Math.floor(E)+.5-this.jdEpoch,v=Math.floor((T-Math.floor((T+366)/1461))/365)+1;v<=0&&v--,T=Math.floor(E)+.5-this.newDate(v,1,1).toJD();var g=Math.floor(T/30)+1,r=T-(g-1)*30+1;return this.newDate(v,g,r)}}),d.calendars.coptic=n},55668:function(U,F,e){var d=e(38700),S=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(T){return this._validate(T,this.minMonth,this.minDay,d.local.invalidYear),!1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,d.local.invalidYear),13},daysInYear:function(T){return this._validate(T,this.minMonth,this.minDay,d.local.invalidYear),400},weekOfYear:function(T,v,g){var r=this.newDate(T,v,g);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(T,v){var g=this._validate(T,v,this.minDay,d.local.invalidMonth);return this.daysPerMonth[g.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(T,v,g){var r=this._validate(T,v,g,d.local.invalidDate);return(r.day()+1)%8},weekDay:function(T,v,g){var r=this.dayOfWeek(T,v,g);return r>=2&&r<=6},extraInfo:function(T,v,g){var r=this._validate(T,v,g,d.local.invalidDate);return{century:E[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(T,v,g){var r=this._validate(T,v,g,d.local.invalidDate);return T=r.year()+(r.year()<0?1:0),v=r.month(),g=r.day(),g+(v>1?16:0)+(v>2?(v-2)*32:0)+(T-1)*400+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T+.5)-Math.floor(this.jdEpoch)-1;var v=Math.floor(T/400)+1;T-=(v-1)*400,T+=T>15?16:0;var g=Math.floor(T/32)+1,r=T-(g-1)*32+1;return this.newDate(v<=0?v-1:v,g,r)}});var E={20:"Fruitbat",21:"Anchovy"};d.calendars.discworld=n},65168:function(U,F,e){var d=e(38700),S=e(50896);function n(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var T=this._validate(v,this.minMonth,this.minDay,d.local.invalidYear),v=T.year()+(T.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(E){return this._validate(E,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(E,T,v){var g=this.newDate(E,T,v);return g.add(-g.dayOfWeek(),"d"),Math.floor((g.dayOfYear()-1)/7)+1},daysInMonth:function(E,T){var v=this._validate(E,T,this.minDay,d.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(E,T,v){return(this.dayOfWeek(E,T,v)||7)<6},toJD:function(E,T,v){var g=this._validate(E,T,v,d.local.invalidDate);return E=g.year(),E<0&&E++,g.day()+(g.month()-1)*30+(E-1)*365+Math.floor(E/4)+this.jdEpoch-1},fromJD:function(E){var T=Math.floor(E)+.5-this.jdEpoch,v=Math.floor((T-Math.floor((T+366)/1461))/365)+1;v<=0&&v--,T=Math.floor(E)+.5-this.newDate(v,1,1).toJD();var g=Math.floor(T/30)+1,r=T-(g-1)*30+1;return this.newDate(v,g,r)}}),d.calendars.ethiopian=n},2084:function(U,F,e){var d=e(38700),S=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,d.local.invalidYear);return this._leapYear(v.year())},_leapYear:function(T){return T=T<0?T+1:T,E(T*7+1,19)<7},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,d.local.invalidYear),this._leapYear(T.year?T.year():T)?13:12},weekOfYear:function(T,v,g){var r=this.newDate(T,v,g);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,d.local.invalidYear);return T=v.year(),this.toJD(T===-1?1:T+1,7,1)-this.toJD(T,7,1)},daysInMonth:function(T,v){return T.year&&(v=T.month(),T=T.year()),this._validate(T,v,this.minDay,d.local.invalidMonth),v===12&&this.leapYear(T)||v===8&&E(this.daysInYear(T),10)===5?30:v===9&&E(this.daysInYear(T),10)===3?29:this.daysPerMonth[v-1]},weekDay:function(T,v,g){return this.dayOfWeek(T,v,g)!==6},extraInfo:function(T,v,g){var r=this._validate(T,v,g,d.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(T,v,g){var r=this._validate(T,v,g,d.local.invalidDate);T=r.year(),v=r.month(),g=r.day();var t=T<=0?T+1:T,o=this.jdEpoch+this._delay1(t)+this._delay2(t)+g+1;if(v<7){for(var i=7;i<=this.monthsInYear(T);i++)o+=this.daysInMonth(T,i);for(var i=1;i<v;i++)o+=this.daysInMonth(T,i)}else for(var i=7;i<v;i++)o+=this.daysInMonth(T,i);return o},_delay1:function(T){var v=Math.floor((235*T-234)/19),g=12084+13753*v,r=v*29+Math.floor(g/25920);return E(3*(r+1),7)<3&&r++,r},_delay2:function(T){var v=this._delay1(T-1),g=this._delay1(T),r=this._delay1(T+1);return r-g===356?2:g-v===382?1:0},fromJD:function(T){T=Math.floor(T)+.5;for(var v=Math.floor((T-this.jdEpoch)*98496/35975351)-1;T>=this.toJD(v===-1?1:v+1,7,1);)v++;for(var g=T<this.toJD(v,1,1)?7:1;T>this.toJD(v,g,this.daysInMonth(v,g));)g++;var r=T-this.toJD(v,g,1)+1;return this.newDate(v,g,r)}});function E(T,v){return T-v*Math.floor(T/v)}d.calendars.hebrew=n},26368:function(U,F,e){var d=e(38700),S=e(50896);function n(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(E){var T=this._validate(E,this.minMonth,this.minDay,d.local.invalidYear);return(T.year()*11+14)%30<11},weekOfYear:function(E,T,v){var g=this.newDate(E,T,v);return g.add(-g.dayOfWeek(),"d"),Math.floor((g.dayOfYear()-1)/7)+1},daysInYear:function(E){return this.leapYear(E)?355:354},daysInMonth:function(E,T){var v=this._validate(E,T,this.minDay,d.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(E,T,v){return this.dayOfWeek(E,T,v)!==5},toJD:function(E,T,v){var g=this._validate(E,T,v,d.local.invalidDate);return E=g.year(),T=g.month(),v=g.day(),E=E<=0?E+1:E,v+Math.ceil(29.5*(T-1))+(E-1)*354+Math.floor((3+11*E)/30)+this.jdEpoch-1},fromJD:function(E){E=Math.floor(E)+.5;var T=Math.floor((30*(E-this.jdEpoch)+10646)/10631);T=T<=0?T-1:T;var v=Math.min(12,Math.ceil((E-29-this.toJD(T,1,1))/29.5)+1),g=E-this.toJD(T,v,1)+1;return this.newDate(T,v,g)}}),d.calendars.islamic=n},24747:function(U,F,e){var d=e(38700),S=e(50896);function n(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var T=this._validate(v,this.minMonth,this.minDay,d.local.invalidYear),v=T.year()<0?T.year()+1:T.year();return v%4===0},weekOfYear:function(E,T,v){var g=this.newDate(E,T,v);return g.add(4-(g.dayOfWeek()||7),"d"),Math.floor((g.dayOfYear()-1)/7)+1},daysInMonth:function(E,T){var v=this._validate(E,T,this.minDay,d.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(E,T,v){return(this.dayOfWeek(E,T,v)||7)<6},toJD:function(E,T,v){var g=this._validate(E,T,v,d.local.invalidDate);return E=g.year(),T=g.month(),v=g.day(),E<0&&E++,T<=2&&(E--,T+=12),Math.floor(365.25*(E+4716))+Math.floor(30.6001*(T+1))+v-1524.5},fromJD:function(E){var T=Math.floor(E+.5),v=T+1524,g=Math.floor((v-122.1)/365.25),r=Math.floor(365.25*g),t=Math.floor((v-r)/30.6001),o=t-Math.floor(t<14?1:13),i=g-Math.floor(o>2?4716:4715),f=v-r-Math.floor(30.6001*t);return i<=0&&i--,this.newDate(i,o,f)}}),d.calendars.julian=n},65616:function(U,F,e){var d=e(38700),S=e(50896);function n(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(v){return this._validate(v,this.minMonth,this.minDay,d.local.invalidYear),!1},formatYear:function(v){var g=this._validate(v,this.minMonth,this.minDay,d.local.invalidYear);v=g.year();var r=Math.floor(v/400);v=v%400,v+=v<0?400:0;var t=Math.floor(v/20);return r+"."+t+"."+v%20},forYear:function(v){if(v=v.split("."),v.length<3)throw"Invalid Mayan year";for(var g=0,r=0;r<v.length;r++){var t=parseInt(v[r],10);if(Math.abs(t)>19||r>0&&t<0)throw"Invalid Mayan year";g=g*20+t}return g},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,d.local.invalidYear),18},weekOfYear:function(v,g,r){return this._validate(v,g,r,d.local.invalidDate),0},daysInYear:function(v){return this._validate(v,this.minMonth,this.minDay,d.local.invalidYear),360},daysInMonth:function(v,g){return this._validate(v,g,this.minDay,d.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(v,g,r){var t=this._validate(v,g,r,d.local.invalidDate);return t.day()},weekDay:function(v,g,r){return this._validate(v,g,r,d.local.invalidDate),!0},extraInfo:function(v,g,r){var t=this._validate(v,g,r,d.local.invalidDate),o=t.toJD(),i=this._toHaab(o),f=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[f[0]-1],tzolkinDay:f[0],tzolkinTrecena:f[1]}},_toHaab:function(v){v-=this.jdEpoch;var g=E(v+8+17*20,365);return[Math.floor(g/20)+1,E(g,20)]},_toTzolkin:function(v){return v-=this.jdEpoch,[T(v+20,20),T(v+4,13)]},toJD:function(v,g,r){var t=this._validate(v,g,r,d.local.invalidDate);return t.day()+t.month()*20+t.year()*360+this.jdEpoch},fromJD:function(v){v=Math.floor(v)+.5-this.jdEpoch;var g=Math.floor(v/360);v=v%360,v+=v<0?360:0;var r=Math.floor(v/20),t=v%20;return this.newDate(g,r,t)}});function E(v,g){return v-g*Math.floor(v/g)}function T(v,g){return E(v-1,g)+1}d.calendars.mayan=n},30632:function(U,F,e){var d=e(38700),S=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar;var E=d.instance("gregorian");S(n.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return E.leapYear(v.year()+(v.year()<1?1:0)+1469)},weekOfYear:function(T,v,g){var r=this.newDate(T,v,g);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(T,v){var g=this._validate(T,v,this.minDay,d.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===12&&this.leapYear(g.year())?1:0)},weekDay:function(T,v,g){return(this.dayOfWeek(T,v,g)||7)<6},toJD:function(t,v,g){var r=this._validate(t,v,g,d.local.invalidMonth),t=r.year();t<0&&t++;for(var o=r.day(),i=1;i<r.month();i++)o+=this.daysPerMonth[i-1];return o+E.toJD(t+1468,3,13)},fromJD:function(T){T=Math.floor(T+.5);for(var v=Math.floor((T-(this.jdEpoch-1))/366);T>=this.toJD(v+1,1,1);)v++;for(var g=T-Math.floor(this.toJD(v,1,1)+.5)+1,r=1;g>this.daysInMonth(v,r);)g-=this.daysInMonth(v,r),r++;return this.newDate(v,r,g)}}),d.calendars.nanakshahi=n},73040:function(U,F,e){var d=e(38700),S=e(50896);function n(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(E){return this.daysInYear(E)!==this.daysPerYear},weekOfYear:function(E,T,v){var g=this.newDate(E,T,v);return g.add(-g.dayOfWeek(),"d"),Math.floor((g.dayOfYear()-1)/7)+1},daysInYear:function(E){var T=this._validate(E,this.minMonth,this.minDay,d.local.invalidYear);if(E=T.year(),typeof this.NEPALI_CALENDAR_DATA[E]>"u")return this.daysPerYear;for(var v=0,g=this.minMonth;g<=12;g++)v+=this.NEPALI_CALENDAR_DATA[E][g];return v},daysInMonth:function(E,T){return E.year&&(T=E.month(),E=E.year()),this._validate(E,T,this.minDay,d.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[E]>"u"?this.daysPerMonth[T-1]:this.NEPALI_CALENDAR_DATA[E][T]},weekDay:function(E,T,v){return this.dayOfWeek(E,T,v)!==6},toJD:function(E,T,v){var g=this._validate(E,T,v,d.local.invalidDate);E=g.year(),T=g.month(),v=g.day();var r=d.instance(),t=0,o=T,i=E;this._createMissingCalendarData(E);var f=E-(o>9||o===9&&v>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(T!==9&&(t=v,o--);o!==9;)o<=0&&(o=12,i--),t+=this.NEPALI_CALENDAR_DATA[i][o],o--;return T===9?(t+=v-this.NEPALI_CALENDAR_DATA[i][0],t<0&&(t+=r.daysInYear(f))):t+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],r.newDate(f,1,1).add(t,"d").toJD()},fromJD:function(E){var T=d.instance(),v=T.fromJD(E),g=v.year(),r=v.dayOfYear(),t=g+56;this._createMissingCalendarData(t);for(var o=9,i=this.NEPALI_CALENDAR_DATA[t][0],f=this.NEPALI_CALENDAR_DATA[t][o]-i+1;r>f;)o++,o>12&&(o=1,t++),f+=this.NEPALI_CALENDAR_DATA[t][o];var u=this.NEPALI_CALENDAR_DATA[t][o]-(f-r);return this.newDate(t,o,u)},_createMissingCalendarData:function(E){var T=this.daysPerMonth.slice(0);T.unshift(17);for(var v=E-1;v<E+2;v++)typeof this.NEPALI_CALENDAR_DATA[v]>"u"&&(this.NEPALI_CALENDAR_DATA[v]=T)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),d.calendars.nepali=n},1104:function(U,F,e){var d=e(38700),S=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,d.local.invalidYear);return((v.year()-(v.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(T,v,g){var r=this.newDate(T,v,g);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(T,v){var g=this._validate(T,v,this.minDay,d.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===12&&this.leapYear(g.year())?1:0)},weekDay:function(T,v,g){return this.dayOfWeek(T,v,g)!==5},toJD:function(T,v,g){var r=this._validate(T,v,g,d.local.invalidDate);T=r.year(),v=r.month(),g=r.day();var t=T-(T>=0?474:473),o=474+E(t,2820);return g+(v<=7?(v-1)*31:(v-1)*30+6)+Math.floor((o*682-110)/2816)+(o-1)*365+Math.floor(t/2820)*1029983+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var v=T-this.toJD(475,1,1),g=Math.floor(v/1029983),r=E(v,1029983),t=2820;if(r!==1029982){var o=Math.floor(r/366),i=E(r,366);t=Math.floor((2134*o+2816*i+2815)/1028522)+o+1}var f=t+2820*g+474;f=f<=0?f-1:f;var u=T-this.toJD(f,1,1)+1,l=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),m=T-this.toJD(f,l,1)+1;return this.newDate(f,l,m)}});function E(T,v){return T-v*Math.floor(T/v)}d.calendars.persian=n,d.calendars.jalali=n},51456:function(U,F,e){var d=e(38700),S=e(50896),n=d.instance();function E(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}E.prototype=new d.baseCalendar,S(E.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(g){var v=this._validate(g,this.minMonth,this.minDay,d.local.invalidYear),g=this._t2gYear(v.year());return n.leapYear(g)},weekOfYear:function(t,v,g){var r=this._validate(t,this.minMonth,this.minDay,d.local.invalidYear),t=this._t2gYear(r.year());return n.weekOfYear(t,r.month(),r.day())},daysInMonth:function(T,v){var g=this._validate(T,v,this.minDay,d.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===2&&this.leapYear(g.year())?1:0)},weekDay:function(T,v,g){return(this.dayOfWeek(T,v,g)||7)<6},toJD:function(t,v,g){var r=this._validate(t,v,g,d.local.invalidDate),t=this._t2gYear(r.year());return n.toJD(t,r.month(),r.day())},fromJD:function(T){var v=n.fromJD(T),g=this._g2tYear(v.year());return this.newDate(g,v.month(),v.day())},_t2gYear:function(T){return T+this.yearsOffset+(T>=-this.yearsOffset&&T<=-1?1:0)},_g2tYear:function(T){return T-this.yearsOffset-(T>=1&&T<=this.yearsOffset?1:0)}}),d.calendars.taiwan=E},4592:function(U,F,e){var d=e(38700),S=e(50896),n=d.instance();function E(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}E.prototype=new d.baseCalendar,S(E.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var v=this._validate(g,this.minMonth,this.minDay,d.local.invalidYear),g=this._t2gYear(v.year());return n.leapYear(g)},weekOfYear:function(t,v,g){var r=this._validate(t,this.minMonth,this.minDay,d.local.invalidYear),t=this._t2gYear(r.year());return n.weekOfYear(t,r.month(),r.day())},daysInMonth:function(T,v){var g=this._validate(T,v,this.minDay,d.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===2&&this.leapYear(g.year())?1:0)},weekDay:function(T,v,g){return(this.dayOfWeek(T,v,g)||7)<6},toJD:function(t,v,g){var r=this._validate(t,v,g,d.local.invalidDate),t=this._t2gYear(r.year());return n.toJD(t,r.month(),r.day())},fromJD:function(T){var v=n.fromJD(T),g=this._g2tYear(v.year());return this.newDate(g,v.month(),v.day())},_t2gYear:function(T){return T-this.yearsOffset-(T>=1&&T<=this.yearsOffset?1:0)},_g2tYear:function(T){return T+this.yearsOffset+(T>=-this.yearsOffset&&T<=-1?1:0)}}),d.calendars.thai=E},45348:function(U,F,e){var d=e(38700),S=e(50896);function n(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}n.prototype=new d.baseCalendar,S(n.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,d.local.invalidYear);return this.daysInYear(v.year())===355},weekOfYear:function(T,v,g){var r=this.newDate(T,v,g);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(T){for(var v=0,g=1;g<=12;g++)v+=this.daysInMonth(T,g);return v},daysInMonth:function(T,v){for(var g=this._validate(T,v,this.minDay,d.local.invalidMonth),r=g.toJD()-24e5+.5,t=0,o=0;o<E.length;o++){if(E[o]>r)return E[t]-E[t-1];t++}return 30},weekDay:function(T,v,g){return this.dayOfWeek(T,v,g)!==5},toJD:function(T,v,g){var r=this._validate(T,v,g,d.local.invalidDate),t=12*(r.year()-1)+r.month()-15292,o=r.day()+E[t-1]-1;return o+24e5-.5},fromJD:function(T){for(var v=T-24e5+.5,g=0,r=0;r<E.length&&!(E[r]>v);r++)g++;var t=g+15292,o=Math.floor((t-1)/12),i=o+1,f=t-12*o,u=v-E[g-1]+1;return this.newDate(i,f,u)},isValid:function(T,v,g){var r=d.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(T=T.year!=null?T.year:T,r=T>=1276&&T<=1500),r},_validate:function(T,v,g,r){var t=d.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw r.replace(/\{0\}/,this.local.name);return t}}),d.calendars.ummalqura=n;var E=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(U,F,e){var d=e(50896);function S(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}d(S.prototype,{instance:function(r,t){r=(r||"gregorian").toLowerCase(),t=t||"";var o=this._localCals[r+"-"+t];if(!o&&this.calendars[r]&&(o=new this.calendars[r](t),this._localCals[r+"-"+t]=o),!o)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return o},newDate:function(r,t,o,i,f){return i=(r!=null&&r.year?r.calendar():typeof i=="string"?this.instance(i,f):i)||this.instance(),i.newDate(r,t,o)},substituteDigits:function(r){return function(t){return(t+"").replace(/[0-9]/g,function(o){return r[o]})}},substituteChineseDigits:function(r,t){return function(o){for(var i="",f=0;o>0;){var u=o%10;i=(u===0?"":r[u]+t[f])+i,f++,o=Math.floor(o/10)}return i.indexOf(r[1]+t[1])===0&&(i=i.substr(1)),i||r[0]}}});function n(r,t,o,i){if(this._calendar=r,this._year=t,this._month=o,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function E(r,t){return r=""+r,"000000".substring(0,t-r.length)+r}d(n.prototype,{newDate:function(r,t,o){return this._calendar.newDate(r??this,t,o)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,t,o){if(!this._calendar.isValid(r,t,o))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=t,this._day=o,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,t){return this._calendar.add(this,r,t)},set:function(r,t){return this._calendar.set(this,r,t)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var t=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+E(Math.abs(this.year()),4)+"-"+E(this.month(),2)+"-"+E(this.day(),2)}});function T(){this.shortYearCutoff="+10"}d(T.prototype,{_validateLevel:0,newDate:function(r,t,o){return r==null?this.today():(r.year&&(this._validate(r,t,o,g.local.invalidDate||g.regionalOptions[""].invalidDate),o=r.day(),t=r.month(),r=r.year()),new n(this,r,t,o))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var t=this._validate(r,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+E(Math.abs(t.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),12},monthOfYear:function(r,t){var o=this._validate(r,t,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(o.month()+this.monthsInYear(o)-this.firstMonth)%this.monthsInYear(o)+this.minMonth},fromMonthOfYear:function(r,t){var o=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,o,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth),o},daysInYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(r,t,o){var i=this._validate(r,t,o,g.local.invalidDate||g.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,t,o){var i=this._validate(r,t,o,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(r,t,o){return this._validate(r,t,o,g.local.invalidDate||g.regionalOptions[""].invalidDate),{}},add:function(r,t,o){return this._validate(r,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,t,o),t,o)},_add:function(r,t,o){if(this._validateLevel++,o==="d"||o==="w"){var i=r.toJD()+t*(o==="w"?this.daysInWeek():1),f=r.calendar().fromJD(i);return this._validateLevel--,[f.year(),f.month(),f.day()]}try{var u=r.year()+(o==="y"?t:0),l=r.monthOfYear()+(o==="m"?t:0),f=r.day(),m=function(c){for(;l<c.minMonth;)u--,l+=c.monthsInYear(u);for(var a=c.monthsInYear(u);l>a-1+c.minMonth;)u++,l-=a,a=c.monthsInYear(u)};o==="y"?(r.month()!==this.fromMonthOfYear(u,l)&&(l=this.newDate(u,r.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(u)),f=Math.min(f,this.daysInMonth(u,this.fromMonthOfYear(u,l)))):o==="m"&&(m(this),f=Math.min(f,this.daysInMonth(u,this.fromMonthOfYear(u,l))));var h=[u,this.fromMonthOfYear(u,l),f];return this._validateLevel--,h}catch(w){throw this._validateLevel--,w}},_correctAdd:function(r,t,o,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||r.year()>0!=t[0]>0)){var f={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],u=o<0?-1:1;t=this._add(r,o*f[0]+u*f[1],f[2])}return r.date(t[0],t[1],t[2])},set:function(r,t,o){this._validate(r,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var i=o==="y"?t:r.year(),f=o==="m"?t:r.month(),u=o==="d"?t:r.day();return(o==="y"||o==="m")&&(u=Math.min(u,this.daysInMonth(i,f))),r.date(i,f,u)},isValid:function(r,t,o){this._validateLevel++;var i=this.hasYearZero||r!==0;if(i){var f=this.newDate(r,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(f)&&o>=this.minDay&&o-this.minDay<this.daysInMonth(f)}return this._validateLevel--,i},toJSDate:function(r,t,o){var i=this._validate(r,t,o,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(r){return this.fromJD(g.instance().fromJSDate(r).toJD())},_validate:function(r,t,o,i){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,t,o))throw i.replace(/\{0\}/,this.local.name);var f=this.newDate(r,t,o);return this._validateLevel--,f}catch(u){throw this._validateLevel--,u}}});function v(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}v.prototype=new T,d(v.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var t=this._validate(o,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),o=t.year()+(t.year()<0?1:0);return o%4===0&&(o%100!==0||o%400===0)},weekOfYear:function(r,t,o){var i=this.newDate(r,t,o);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(r,t){var o=this._validate(r,t,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(r,t,o){return(this.dayOfWeek(r,t,o)||7)<6},toJD:function(r,t,o){var i=this._validate(r,t,o,g.local.invalidDate||g.regionalOptions[""].invalidDate);r=i.year(),t=i.month(),o=i.day(),r<0&&r++,t<3&&(t+=12,r--);var f=Math.floor(r/100),u=2-f+Math.floor(f/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(t+1))+o+u-1524.5},fromJD:function(r){var t=Math.floor(r+.5),o=Math.floor((t-186721625e-2)/36524.25);o=t+1+o-Math.floor(o/4);var i=o+1524,f=Math.floor((i-122.1)/365.25),u=Math.floor(365.25*f),l=Math.floor((i-u)/30.6001),m=i-u-Math.floor(l*30.6001),h=l-(l>13.5?13:1),w=f-(h>2.5?4716:4715);return w<=0&&w--,this.newDate(w,h,m)},toJSDate:function(r,t,o){var i=this._validate(r,t,o,g.local.invalidDate||g.regionalOptions[""].invalidDate),f=new Date(i.year(),i.month()-1,i.day());return f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0),f.setHours(f.getHours()>12?f.getHours()+2:0),f},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var g=U.exports=new S;g.cdate=n,g.baseCalendar=T,g.calendars.gregorian=v},15168:function(U,F,e){var d=e(50896),S=e(38700);d(S.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),S.local=S.regionalOptions[""],d(S.cdate.prototype,{formatDate:function(n,E){return typeof n!="string"&&(E=n,n=""),this._calendar.formatDate(n||"",this,E)}}),d(S.baseCalendar.prototype,{UNIX_EPOCH:S.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:S.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,E,T){if(typeof n!="string"&&(T=E,E=n,n=""),!E)return"";if(E.calendar()!==this)throw S.local.invalidFormat||S.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat,T=T||{};var v=T.dayNamesShort||this.local.dayNamesShort,g=T.dayNames||this.local.dayNames,r=T.monthNumbers||this.local.monthNumbers,t=T.monthNamesShort||this.local.monthNamesShort,o=T.monthNames||this.local.monthNames;T.calculateWeek||this.local.calculateWeek;for(var i=function(A,P){for(var y=1;x+y<n.length&&n.charAt(x+y)===A;)y++;return x+=y-1,Math.floor(y/(P||1))>1},f=function(A,P,y,C){var M=""+P;if(i(A,C))for(;M.length<y;)M="0"+M;return M},u=function(A,P,y,C){return i(A)?C[P]:y[P]},l=this,m=function(A){return typeof r=="function"?r.call(l,A,i("m")):c(f("m",A.month(),2))},h=function(A,P){return P?typeof o=="function"?o.call(l,A):o[A.month()-l.minMonth]:typeof t=="function"?t.call(l,A):t[A.month()-l.minMonth]},w=this.local.digits,c=function(A){return T.localNumbers&&w?w(A):A},a="",p=!1,x=0;x<n.length;x++)if(p)n.charAt(x)==="'"&&!i("'")?p=!1:a+=n.charAt(x);else switch(n.charAt(x)){case"d":a+=c(f("d",E.day(),2));break;case"D":a+=u("D",E.dayOfWeek(),v,g);break;case"o":a+=f("o",E.dayOfYear(),3);break;case"w":a+=f("w",E.weekOfYear(),2);break;case"m":a+=m(E);break;case"M":a+=h(E,i("M"));break;case"y":a+=i("y",2)?E.year():(E.year()%100<10?"0":"")+E.year()%100;break;case"Y":i("Y",2),a+=E.formatYear();break;case"J":a+=E.toJD();break;case"@":a+=(E.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":a+=(E.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?a+="'":p=!0;break;default:a+=n.charAt(x)}return a},parseDate:function(n,E,T){if(E==null)throw S.local.invalidArguments||S.regionalOptions[""].invalidArguments;if(E=typeof E=="object"?E.toString():E+"",E==="")return null;n=n||this.local.dateFormat,T=T||{};var v=T.shortYearCutoff||this.shortYearCutoff;v=typeof v!="string"?v:this.today().year()%100+parseInt(v,10);for(var g=T.dayNamesShort||this.local.dayNamesShort,r=T.dayNames||this.local.dayNames,t=T.parseMonth||this.local.parseMonth,o=T.monthNumbers||this.local.monthNumbers,i=T.monthNamesShort||this.local.monthNamesShort,f=T.monthNames||this.local.monthNames,u=-1,l=-1,m=-1,h=-1,w=-1,c=!1,a=!1,p=function(D,V){for(var O=1;_+O<n.length&&n.charAt(_+O)===D;)O++;return _+=O-1,Math.floor(O/(V||1))>1},x=function(D,V){var O=p(D,V),N=[2,3,O?4:2,O?4:2,10,11,20]["oyYJ@!".indexOf(D)+1],B=new RegExp("^-?\\d{1,"+N+"}"),z=E.substring(s).match(B);if(!z)throw(S.local.missingNumberAt||S.regionalOptions[""].missingNumberAt).replace(/\{0\}/,s);return s+=z[0].length,parseInt(z[0],10)},A=this,P=function(){if(typeof o=="function"){p("m");var D=o.call(A,E.substring(s));return s+=D.length,D}return x("m")},y=function(D,V,O,N){for(var B=p(D,N)?O:V,z=0;z<B.length;z++)if(E.substr(s,B[z].length).toLowerCase()===B[z].toLowerCase())return s+=B[z].length,z+A.minMonth;throw(S.local.unknownNameAt||S.regionalOptions[""].unknownNameAt).replace(/\{0\}/,s)},C=function(){if(typeof f=="function"){var D=p("M")?f.call(A,E.substring(s)):i.call(A,E.substring(s));return s+=D.length,D}return y("M",i,f)},M=function(){if(E.charAt(s)!==n.charAt(_))throw(S.local.unexpectedLiteralAt||S.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,s);s++},s=0,_=0;_<n.length;_++)if(a)n.charAt(_)==="'"&&!p("'")?a=!1:M();else switch(n.charAt(_)){case"d":h=x("d");break;case"D":y("D",g,r);break;case"o":w=x("o");break;case"w":x("w");break;case"m":m=P();break;case"M":m=C();break;case"y":var b=_;c=!p("y",2),_=b,l=x("y",2);break;case"Y":l=x("Y",2);break;case"J":u=x("J")+.5,E.charAt(s)==="."&&(s++,x("J"));break;case"@":u=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":u=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":s=E.length;break;case"'":p("'")?M():a=!0;break;default:M()}if(s<E.length)throw S.local.unexpectedText||S.regionalOptions[""].unexpectedText;if(l===-1?l=this.today().year():l<100&&c&&(l+=v===-1?1900:this.today().year()-this.today().year()%100-(l<=v?0:100)),typeof m=="string"&&(m=t.call(this,l,m)),w>-1){m=1,h=w;for(var k=this.daysInMonth(l,m);h>k;k=this.daysInMonth(l,m))m++,h-=k}return u>-1?this.fromJD(u):this.newDate(l,m,h)},determineDate:function(n,E,T,v,g){T&&typeof T!="object"&&(g=v,v=T,T=null),typeof v!="string"&&(g=v,v="");var r=this,t=function(o){try{return r.parseDate(v,o,g)}catch{}o=o.toLowerCase();for(var i=(o.match(/^c/)&&T?T.newDate():null)||r.today(),f=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,u=f.exec(o);u;)i.add(parseInt(u[1],10),u[2]||"d"),u=f.exec(o);return i};return E=E?E.newDate():null,n=n==null?E:typeof n=="string"?t(n):typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?E:r.today().add(n,"d"):r.newDate(n),n}})},21576:function(){},19768:function(){},63436:function(U,F,e){var d=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],S=typeof globalThis>"u"?e.g:globalThis;U.exports=function(){for(var E=[],T=0;T<d.length;T++)typeof S[d[T]]=="function"&&(E[E.length]=d[T]);return E}},67756:function(U,F,e){e.d(F,{qy:function(){return Ne},Gz:function(){return le}});function d(Ee,ze,Ce){Ee.prototype=ze.prototype=Ce,Ce.constructor=Ee}function S(Ee,ze){var Ce=Object.create(Ee.prototype);for(var Oe in ze)Ce[Oe]=ze[Oe];return Ce}function n(){}var E=.7,T=1/E,v="\\s*([+-]?\\d+)\\s*",g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t=/^#([0-9a-f]{3,8})$/,o=new RegExp("^rgb\\(".concat(v,",").concat(v,",").concat(v,"\\)$")),i=new RegExp("^rgb\\(".concat(r,",").concat(r,",").concat(r,"\\)$")),f=new RegExp("^rgba\\(".concat(v,",").concat(v,",").concat(v,",").concat(g,"\\)$")),u=new RegExp("^rgba\\(".concat(r,",").concat(r,",").concat(r,",").concat(g,"\\)$")),l=new RegExp("^hsl\\(".concat(g,",").concat(r,",").concat(r,"\\)$")),m=new RegExp("^hsla\\(".concat(g,",").concat(r,",").concat(r,",").concat(g,"\\)$")),h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d(n,x,{copy:function(ze){return Object.assign(new this.constructor,this,ze)},displayable:function(){return this.rgb().displayable()},hex:w,formatHex:w,formatHex8:c,formatHsl:a,formatRgb:p,toString:p});function w(){return this.rgb().formatHex()}function c(){return this.rgb().formatHex8()}function a(){return N(this).formatHsl()}function p(){return this.rgb().formatRgb()}function x(Ee){var ze,Ce;return Ee=(Ee+"").trim().toLowerCase(),(ze=t.exec(Ee))?(Ce=ze[1].length,ze=parseInt(ze[1],16),Ce===6?A(ze):Ce===3?new M(ze>>8&15|ze>>4&240,ze>>4&15|ze&240,(ze&15)<<4|ze&15,1):Ce===8?P(ze>>24&255,ze>>16&255,ze>>8&255,(ze&255)/255):Ce===4?P(ze>>12&15|ze>>8&240,ze>>8&15|ze>>4&240,ze>>4&15|ze&240,((ze&15)<<4|ze&15)/255):null):(ze=o.exec(Ee))?new M(ze[1],ze[2],ze[3],1):(ze=i.exec(Ee))?new M(ze[1]*255/100,ze[2]*255/100,ze[3]*255/100,1):(ze=f.exec(Ee))?P(ze[1],ze[2],ze[3],ze[4]):(ze=u.exec(Ee))?P(ze[1]*255/100,ze[2]*255/100,ze[3]*255/100,ze[4]):(ze=l.exec(Ee))?O(ze[1],ze[2]/100,ze[3]/100,1):(ze=m.exec(Ee))?O(ze[1],ze[2]/100,ze[3]/100,ze[4]):h.hasOwnProperty(Ee)?A(h[Ee]):Ee==="transparent"?new M(NaN,NaN,NaN,0):null}function A(Ee){return new M(Ee>>16&255,Ee>>8&255,Ee&255,1)}function P(Ee,ze,Ce,Oe){return Oe<=0&&(Ee=ze=Ce=NaN),new M(Ee,ze,Ce,Oe)}function y(Ee){return Ee instanceof n||(Ee=x(Ee)),Ee?(Ee=Ee.rgb(),new M(Ee.r,Ee.g,Ee.b,Ee.opacity)):new M}function C(Ee,ze,Ce,Oe){return arguments.length===1?y(Ee):new M(Ee,ze,Ce,Oe??1)}function M(Ee,ze,Ce,Oe){this.r=+Ee,this.g=+ze,this.b=+Ce,this.opacity=+Oe}d(M,C,S(n,{brighter:function(ze){return ze=ze==null?T:Math.pow(T,ze),new M(this.r*ze,this.g*ze,this.b*ze,this.opacity)},darker:function(ze){return ze=ze==null?E:Math.pow(E,ze),new M(this.r*ze,this.g*ze,this.b*ze,this.opacity)},rgb:function(){return this},clamp:function(){return new M(D(this.r),D(this.g),D(this.b),k(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:s,formatHex:s,formatHex8:_,formatRgb:b,toString:b}));function s(){return"#".concat(V(this.r)).concat(V(this.g)).concat(V(this.b))}function _(){return"#".concat(V(this.r)).concat(V(this.g)).concat(V(this.b)).concat(V((isNaN(this.opacity)?1:this.opacity)*255))}function b(){var Ee=k(this.opacity);return"".concat(Ee===1?"rgb(":"rgba(").concat(D(this.r),", ").concat(D(this.g),", ").concat(D(this.b)).concat(Ee===1?")":", ".concat(Ee,")"))}function k(Ee){return isNaN(Ee)?1:Math.max(0,Math.min(1,Ee))}function D(Ee){return Math.max(0,Math.min(255,Math.round(Ee)||0))}function V(Ee){return Ee=D(Ee),(Ee<16?"0":"")+Ee.toString(16)}function O(Ee,ze,Ce,Oe){return Oe<=0?Ee=ze=Ce=NaN:Ce<=0||Ce>=1?Ee=ze=NaN:ze<=0&&(Ee=NaN),new z(Ee,ze,Ce,Oe)}function N(Ee){if(Ee instanceof z)return new z(Ee.h,Ee.s,Ee.l,Ee.opacity);if(Ee instanceof n||(Ee=x(Ee)),!Ee)return new z;if(Ee instanceof z)return Ee;Ee=Ee.rgb();var ze=Ee.r/255,Ce=Ee.g/255,Oe=Ee.b/255,Le=Math.min(ze,Ce,Oe),Ge=Math.max(ze,Ce,Oe),rt=NaN,ot=Ge-Le,$e=(Ge+Le)/2;return ot?(ze===Ge?rt=(Ce-Oe)/ot+(Ce<Oe)*6:Ce===Ge?rt=(Oe-ze)/ot+2:rt=(ze-Ce)/ot+4,ot/=$e<.5?Ge+Le:2-Ge-Le,rt*=60):ot=$e>0&&$e<1?0:rt,new z(rt,ot,$e,Ee.opacity)}function B(Ee,ze,Ce,Oe){return arguments.length===1?N(Ee):new z(Ee,ze,Ce,Oe??1)}function z(Ee,ze,Ce,Oe){this.h=+Ee,this.s=+ze,this.l=+Ce,this.opacity=+Oe}d(z,B,S(n,{brighter:function(ze){return ze=ze==null?T:Math.pow(T,ze),new z(this.h,this.s,this.l*ze,this.opacity)},darker:function(ze){return ze=ze==null?E:Math.pow(E,ze),new z(this.h,this.s,this.l*ze,this.opacity)},rgb:function(){var ze=this.h%360+(this.h<0)*360,Ce=isNaN(ze)||isNaN(this.s)?0:this.s,Oe=this.l,Le=Oe+(Oe<.5?Oe:1-Oe)*Ce,Ge=2*Oe-Le;return new M($(ze>=240?ze-240:ze+120,Ge,Le),$(ze,Ge,Le),$(ze<120?ze+240:ze-120,Ge,Le),this.opacity)},clamp:function(){return new z(H(this.h),X(this.s),X(this.l),k(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ze=k(this.opacity);return"".concat(ze===1?"hsl(":"hsla(").concat(H(this.h),", ").concat(X(this.s)*100,"%, ").concat(X(this.l)*100,"%").concat(ze===1?")":", ".concat(ze,")"))}}));function H(Ee){return Ee=(Ee||0)%360,Ee<0?Ee+360:Ee}function X(Ee){return Math.max(0,Math.min(1,Ee||0))}function $(Ee,ze,Ce){return(Ee<60?ze+(Ce-ze)*Ee/60:Ee<180?Ce:Ee<240?ze+(Ce-ze)*(240-Ee)/60:ze)*255}var ne=function(Ee){return function(){return Ee}};function q(Ee,ze){return function(Ce){return Ee+Ce*ze}}function ue(Ee,ze,Ce){return Ee=Math.pow(Ee,Ce),ze=Math.pow(ze,Ce)-Ee,Ce=1/Ce,function(Oe){return Math.pow(Ee+Oe*ze,Ce)}}function te(Ee){return(Ee=+Ee)==1?J:function(ze,Ce){return Ce-ze?ue(ze,Ce,Ee):ne(isNaN(ze)?Ce:ze)}}function J(Ee,ze){var Ce=ze-Ee;return Ce?q(Ee,Ce):ne(isNaN(Ee)?ze:Ee)}var ie=function Ee(ze){var Ce=te(ze);function Oe(Le,Ge){var rt=Ce((Le=C(Le)).r,(Ge=C(Ge)).r),ot=Ce(Le.g,Ge.g),$e=Ce(Le.b,Ge.b),qe=J(Le.opacity,Ge.opacity);return function(ht){return Le.r=rt(ht),Le.g=ot(ht),Le.b=$e(ht),Le.opacity=qe(ht),Le+""}}return Oe.gamma=Ee,Oe}(1);function K(Ee,ze){var Ce=ze?ze.length:0,Oe=Ee?Math.min(Ce,Ee.length):0,Le=new Array(Oe),Ge=new Array(Ce),rt;for(rt=0;rt<Oe;++rt)Le[rt]=Ne(Ee[rt],ze[rt]);for(;rt<Ce;++rt)Ge[rt]=ze[rt];return function(ot){for(rt=0;rt<Oe;++rt)Ge[rt]=Le[rt](ot);return Ge}}function ee(Ee,ze){var Ce=new Date;return Ee=+Ee,ze=+ze,function(Oe){return Ce.setTime(Ee*(1-Oe)+ze*Oe),Ce}}function le(Ee,ze){return Ee=+Ee,ze=+ze,function(Ce){return Ee*(1-Ce)+ze*Ce}}function j(Ee){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze},j(Ee)}function Z(Ee,ze){var Ce={},Oe={},Le;(Ee===null||j(Ee)!=="object")&&(Ee={}),(ze===null||j(ze)!=="object")&&(ze={});for(Le in ze)Le in Ee?Ce[Le]=Ne(Ee[Le],ze[Le]):Oe[Le]=ze[Le];return function(Ge){for(Le in Ce)Oe[Le]=Ce[Le](Ge);return Oe}}var fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,re=new RegExp(fe.source,"g");function ce(Ee){return function(){return Ee}}function xe(Ee){return function(ze){return Ee(ze)+""}}function Te(Ee,ze){var Ce=fe.lastIndex=re.lastIndex=0,Oe,Le,Ge,rt=-1,ot=[],$e=[];for(Ee=Ee+"",ze=ze+"";(Oe=fe.exec(Ee))&&(Le=re.exec(ze));)(Ge=Le.index)>Ce&&(Ge=ze.slice(Ce,Ge),ot[rt]?ot[rt]+=Ge:ot[++rt]=Ge),(Oe=Oe[0])===(Le=Le[0])?ot[rt]?ot[rt]+=Le:ot[++rt]=Le:(ot[++rt]=null,$e.push({i:rt,x:le(Oe,Le)})),Ce=re.lastIndex;return Ce<ze.length&&(Ge=ze.slice(Ce),ot[rt]?ot[rt]+=Ge:ot[++rt]=Ge),ot.length<2?$e[0]?xe($e[0].x):ce(ze):(ze=$e.length,function(qe){for(var ht=0,vt;ht<ze;++ht)ot[(vt=$e[ht]).i]=vt.x(qe);return ot.join("")})}function we(Ee,ze){ze||(ze=[]);var Ce=Ee?Math.min(ze.length,Ee.length):0,Oe=ze.slice(),Le;return function(Ge){for(Le=0;Le<Ce;++Le)Oe[Le]=Ee[Le]*(1-Ge)+ze[Le]*Ge;return Oe}}function _e(Ee){return ArrayBuffer.isView(Ee)&&!(Ee instanceof DataView)}function ke(Ee){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze},ke(Ee)}function Ne(Ee,ze){var Ce=ke(ze),Oe;return ze==null||Ce==="boolean"?ne(ze):(Ce==="number"?le:Ce==="string"?(Oe=x(ze))?(ze=Oe,ie):Te:ze instanceof x?ie:ze instanceof Date?ee:_e(ze)?we:Array.isArray(ze)?K:typeof ze.valueOf!="function"&&typeof ze.toString!="function"||isNaN(ze)?Z:le)(Ee,ze)}},30584:function(U){U.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(U){U.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(U){U.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(U){U.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(U){U.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(U){U.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},oe={};function he(U){var F=oe[U];if(F!==void 0)return F.exports;var e=oe[U]={exports:{}};return Y[U].call(e.exports,e,e.exports,he),e.exports}(function(){he.n=function(U){var F=U&&U.__esModule?function(){return U.default}:function(){return U};return he.d(F,{a:F}),F}})(),function(){he.d=function(U,F){for(var e in F)he.o(F,e)&&!he.o(U,e)&&Object.defineProperty(U,e,{enumerable:!0,get:F[e]})}}(),function(){he.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){he.o=function(U,F){return Object.prototype.hasOwnProperty.call(U,F)}}(),function(){he.r=function(U){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})}}();var Ae=he(13792);return Ae}()})})(Iw);var b8=Iw.exports;const w8=x8(b8),T8={__name:"plotly",props:{data:{type:Array,required:!0},layout:{type:Object,required:!0},viewConfig:{type:Object,required:!0},layers:{type:Array,required:!0},mapOptions:{type:Object,required:!0}},setup(G){var L=["carto-darkmatter","carto-positron ","open-street-map","stamen-terrain","stament-toner","stamen-watercolor","white-bg","basic","streets","outdoors","light","dark","satellite","satellite-streets"],Y={title:"Bubble Map with WMTS",mapbox:{style:L[6],center:{lon:121.024,lat:23.633},zoom:6,layers:[{sourcetype:"raster",source:["https://wmts.nlsc.gov.tw/wmts/EMAP/default/EPSG:3857/{z}/{y}/{x}"],type:"raster",below:"traces"},{sourcetype:"raster",source:[]}]},margin:{r:0,t:0,b:0,l:0}},oe={doubleClick:!0,doubleClickDelay:10,responsive:!0,displayModeBar:!1};const he=io(null),Ae=[{type:"scattermapbox"}],U=()=>{he.value&&w8.react(he.value,Ae,Y,oe)};return hu(()=>{U()}),(F,e)=>(_a(),jo("div",{ref_key:"plotlyChart",ref:he,style:{width:"100%",height:"100%"}},null,512))}};class dh{constructor(L){this.propagationStopped,this.defaultPrevented,this.type=L,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ap={PROPERTYCHANGE:"propertychange"};class Pm{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function ug(G,L){return G>L?1:G<L?-1:0}function Rm(G,L,Y){if(G[0]<=L)return 0;const oe=G.length;if(L<=G[oe-1])return oe-1;if(typeof Y=="function"){for(let he=1;he<oe;++he){const Ae=G[he];if(Ae===L)return he;if(Ae<L)return Y(L,G[he-1],Ae)>0?he-1:he}return oe-1}if(Y>0){for(let he=1;he<oe;++he)if(G[he]<L)return he-1;return oe-1}if(Y<0){for(let he=1;he<oe;++he)if(G[he]<=L)return he;return oe-1}for(let he=1;he<oe;++he){if(G[he]==L)return he;if(G[he]<L)return G[he-1]-L<L-G[he]?he-1:he}return oe-1}function A8(G,L){const Y=Array.isArray(L)?L:[L],oe=Y.length;for(let he=0;he<oe;he++)G[G.length]=Y[he]}function fg(G,L){const Y=G.length;if(Y!==L.length)return!1;for(let oe=0;oe<Y;oe++)if(G[oe]!==L[oe])return!1;return!0}function M8(G,L,Y){const oe=L||ug;return G.every(function(he,Ae){if(Ae===0)return!0;const U=oe(G[Ae-1],he);return!(U>0||U===0)})}function F0(){return!0}function cg(){return!1}function B0(){}function E8(G){let L=!1,Y,oe,he;return function(){const Ae=Array.prototype.slice.call(arguments);return(!L||this!==he||!fg(Ae,oe))&&(L=!0,he=this,oe=Ae,Y=G.apply(this,arguments)),Y}}function S8(G){function L(){let Y;try{Y=G()}catch(oe){return Promise.reject(oe)}return Y instanceof Promise?Y:Promise.resolve(Y)}return L()}function hg(G){for(const L in G)delete G[L]}function Dw(G){let L;for(L in G)return!1;return!L}class vg extends Pm{constructor(L){super(),this.eventTarget_=L,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(L,Y){if(!L||!Y)return;const oe=this.listeners_||(this.listeners_={}),he=oe[L]||(oe[L]=[]);he.includes(Y)||he.push(Y)}dispatchEvent(L){const Y=typeof L=="string",oe=Y?L:L.type,he=this.listeners_&&this.listeners_[oe];if(!he)return;const Ae=Y?new dh(L):L;Ae.target||(Ae.target=this.eventTarget_||this);const U=this.dispatching_||(this.dispatching_={}),F=this.pendingRemovals_||(this.pendingRemovals_={});oe in U||(U[oe]=0,F[oe]=0),++U[oe];let e;for(let d=0,S=he.length;d<S;++d)if("handleEvent"in he[d]?e=he[d].handleEvent(Ae):e=he[d].call(this,Ae),e===!1||Ae.propagationStopped){e=!1;break}if(--U[oe]===0){let d=F[oe];for(delete F[oe];d--;)this.removeEventListener(oe,B0);delete U[oe]}return e}disposeInternal(){this.listeners_&&hg(this.listeners_)}getListeners(L){return this.listeners_&&this.listeners_[L]||void 0}hasListener(L){return this.listeners_?L?L in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(L,Y){if(!this.listeners_)return;const oe=this.listeners_[L];if(!oe)return;const he=oe.indexOf(Y);he!==-1&&(this.pendingRemovals_&&L in this.pendingRemovals_?(oe[he]=B0,++this.pendingRemovals_[L]):(oe.splice(he,1),oe.length===0&&delete this.listeners_[L]))}}const da={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ha(G,L,Y,oe,he){if(oe&&oe!==G&&(Y=Y.bind(oe)),he){const U=Y;Y=function(){G.removeEventListener(L,Y),U.apply(this,arguments)}}const Ae={target:G,type:L,listener:Y};return G.addEventListener(L,Y),Ae}function N0(G,L,Y,oe){return Ha(G,L,Y,oe,!0)}function Oo(G){G&&G.target&&(G.target.removeEventListener(G.type,G.listener),hg(G))}class Tp extends vg{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(da.CHANGE)}getRevision(){return this.revision_}onInternal(L,Y){if(Array.isArray(L)){const oe=L.length,he=new Array(oe);for(let Ae=0;Ae<oe;++Ae)he[Ae]=Ha(this,L[Ae],Y);return he}return Ha(this,L,Y)}onceInternal(L,Y){let oe;if(Array.isArray(L)){const he=L.length;oe=new Array(he);for(let Ae=0;Ae<he;++Ae)oe[Ae]=N0(this,L[Ae],Y)}else oe=N0(this,L,Y);return Y.ol_key=oe,oe}unInternal(L,Y){const oe=Y.ol_key;if(oe)C8(oe);else if(Array.isArray(L))for(let he=0,Ae=L.length;he<Ae;++he)this.removeEventListener(L[he],Y);else this.removeEventListener(L,Y)}}Tp.prototype.on;Tp.prototype.once;Tp.prototype.un;function C8(G){if(Array.isArray(G))for(let L=0,Y=G.length;L<Y;++L)Oo(G[L]);else Oo(G)}function Ia(){throw new Error("Unimplemented abstract method.")}let L8=0;function Ks(G){return G.ol_uid||(G.ol_uid=String(++L8))}class xb extends dh{constructor(L,Y,oe){super(L),this.key=Y,this.oldValue=oe}}class oc extends Tp{constructor(L){super(),this.on,this.once,this.un,Ks(this),this.values_=null,L!==void 0&&this.setProperties(L)}get(L){let Y;return this.values_&&this.values_.hasOwnProperty(L)&&(Y=this.values_[L]),Y}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(L,Y){let oe;oe=`change:${L}`,this.hasListener(oe)&&this.dispatchEvent(new xb(oe,L,Y)),oe=ap.PROPERTYCHANGE,this.hasListener(oe)&&this.dispatchEvent(new xb(oe,L,Y))}addChangeListener(L,Y){this.addEventListener(`change:${L}`,Y)}removeChangeListener(L,Y){this.removeEventListener(`change:${L}`,Y)}set(L,Y,oe){const he=this.values_||(this.values_={});if(oe)he[L]=Y;else{const Ae=he[L];he[L]=Y,Ae!==Y&&this.notify(L,Ae)}}setProperties(L,Y){for(const oe in L)this.set(oe,L[oe],Y)}applyProperties(L){L.values_&&Object.assign(this.values_||(this.values_={}),L.values_)}unset(L,Y){if(this.values_&&L in this.values_){const oe=this.values_[L];delete this.values_[L],Dw(this.values_)&&(this.values_=null),Y||this.notify(L,oe)}}}const lu={ADD:"add",REMOVE:"remove"},bb={LENGTH:"length"};class h0 extends dh{constructor(L,Y,oe){super(L),this.element=Y,this.index=oe}}class ec extends oc{constructor(L,Y){if(super(),this.on,this.once,this.un,Y=Y||{},this.unique_=!!Y.unique,this.array_=L||[],this.unique_)for(let oe=0,he=this.array_.length;oe<he;++oe)this.assertUnique_(this.array_[oe],oe);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(L){for(let Y=0,oe=L.length;Y<oe;++Y)this.push(L[Y]);return this}forEach(L){const Y=this.array_;for(let oe=0,he=Y.length;oe<he;++oe)L(Y[oe],oe,Y)}getArray(){return this.array_}item(L){return this.array_[L]}getLength(){return this.get(bb.LENGTH)}insertAt(L,Y){if(L<0||L>this.getLength())throw new Error("Index out of bounds: "+L);this.unique_&&this.assertUnique_(Y),this.array_.splice(L,0,Y),this.updateLength_(),this.dispatchEvent(new h0(lu.ADD,Y,L))}pop(){return this.removeAt(this.getLength()-1)}push(L){this.unique_&&this.assertUnique_(L);const Y=this.getLength();return this.insertAt(Y,L),this.getLength()}remove(L){const Y=this.array_;for(let oe=0,he=Y.length;oe<he;++oe)if(Y[oe]===L)return this.removeAt(oe)}removeAt(L){if(L<0||L>=this.getLength())return;const Y=this.array_[L];return this.array_.splice(L,1),this.updateLength_(),this.dispatchEvent(new h0(lu.REMOVE,Y,L)),Y}setAt(L,Y){const oe=this.getLength();if(L>=oe){this.insertAt(L,Y);return}if(L<0)throw new Error("Index out of bounds: "+L);this.unique_&&this.assertUnique_(Y,L);const he=this.array_[L];this.array_[L]=Y,this.dispatchEvent(new h0(lu.REMOVE,he,L)),this.dispatchEvent(new h0(lu.ADD,Y,L))}updateLength_(){this.set(bb.LENGTH,this.array_.length)}assertUnique_(L,Y){for(let oe=0,he=this.array_.length;oe<he;++oe)if(this.array_[oe]===L&&oe!==Y)throw new Error("Duplicate item added to a unique collection")}}const Ua={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function Wa(G,L){if(!G)throw new Error(L)}function is(G,L,Y){return Math.min(Math.max(G,L),Y)}function _8(G,L,Y,oe,he,Ae){const U=he-Y,F=Ae-oe;if(U!==0||F!==0){const e=((G-Y)*U+(L-oe)*F)/(U*U+F*F);e>1?(Y=he,oe=Ae):e>0&&(Y+=U*e,oe+=F*e)}return Zv(G,L,Y,oe)}function Zv(G,L,Y,oe){const he=Y-G,Ae=oe-L;return he*he+Ae*Ae}function P8(G){const L=G.length;for(let oe=0;oe<L;oe++){let he=oe,Ae=Math.abs(G[oe][oe]);for(let F=oe+1;F<L;F++){const e=Math.abs(G[F][oe]);e>Ae&&(Ae=e,he=F)}if(Ae===0)return null;const U=G[he];G[he]=G[oe],G[oe]=U;for(let F=oe+1;F<L;F++){const e=-G[F][oe]/G[oe][oe];for(let d=oe;d<L+1;d++)oe==d?G[F][d]=0:G[F][d]+=e*G[oe][d]}}const Y=new Array(L);for(let oe=L-1;oe>=0;oe--){Y[oe]=G[oe][L]/G[oe][oe];for(let he=oe-1;he>=0;he--)G[he][L]-=G[he][oe]*Y[oe]}return Y}function C0(G){return G*Math.PI/180}function jv(G,L){const Y=G%L;return Y*L<0?Y+L:Y}function R8(G,L,Y){return G+Y*(L-G)}function kw(G,L){const Y=Math.pow(10,L);return Math.round(G*Y)/Y}function v0(G,L){return Math.floor(kw(G,L))}function d0(G,L){return Math.ceil(kw(G,L))}class zw extends oc{constructor(L){super(),this.on,this.once,this.un,this.background_=L.background;const Y=Object.assign({},L);typeof L.properties=="object"&&(delete Y.properties,Object.assign(Y,L.properties)),Y[Ua.OPACITY]=L.opacity!==void 0?L.opacity:1,Wa(typeof Y[Ua.OPACITY]=="number","Layer opacity must be a number"),Y[Ua.VISIBLE]=L.visible!==void 0?L.visible:!0,Y[Ua.Z_INDEX]=L.zIndex,Y[Ua.MAX_RESOLUTION]=L.maxResolution!==void 0?L.maxResolution:1/0,Y[Ua.MIN_RESOLUTION]=L.minResolution!==void 0?L.minResolution:0,Y[Ua.MIN_ZOOM]=L.minZoom!==void 0?L.minZoom:-1/0,Y[Ua.MAX_ZOOM]=L.maxZoom!==void 0?L.maxZoom:1/0,this.className_=Y.className!==void 0?Y.className:"ol-layer",delete Y.className,this.setProperties(Y),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(L){const Y=this.state_||{layer:this,managed:L===void 0?!0:L},oe=this.getZIndex();return Y.opacity=is(Math.round(this.getOpacity()*100)/100,0,1),Y.visible=this.getVisible(),Y.extent=this.getExtent(),Y.zIndex=oe===void 0&&!Y.managed?1/0:oe,Y.maxResolution=this.getMaxResolution(),Y.minResolution=Math.max(this.getMinResolution(),0),Y.minZoom=this.getMinZoom(),Y.maxZoom=this.getMaxZoom(),this.state_=Y,Y}getLayersArray(L){return Ia()}getLayerStatesArray(L){return Ia()}getExtent(){return this.get(Ua.EXTENT)}getMaxResolution(){return this.get(Ua.MAX_RESOLUTION)}getMinResolution(){return this.get(Ua.MIN_RESOLUTION)}getMinZoom(){return this.get(Ua.MIN_ZOOM)}getMaxZoom(){return this.get(Ua.MAX_ZOOM)}getOpacity(){return this.get(Ua.OPACITY)}getSourceState(){return Ia()}getVisible(){return this.get(Ua.VISIBLE)}getZIndex(){return this.get(Ua.Z_INDEX)}setBackground(L){this.background_=L,this.changed()}setExtent(L){this.set(Ua.EXTENT,L)}setMaxResolution(L){this.set(Ua.MAX_RESOLUTION,L)}setMinResolution(L){this.set(Ua.MIN_RESOLUTION,L)}setMaxZoom(L){this.set(Ua.MAX_ZOOM,L)}setMinZoom(L){this.set(Ua.MIN_ZOOM,L)}setOpacity(L){Wa(typeof L=="number","Layer opacity must be a number"),this.set(Ua.OPACITY,L)}setVisible(L){this.set(Ua.VISIBLE,L)}setZIndex(L){this.set(Ua.Z_INDEX,L)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const mf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ou={ANIMATING:0,INTERACTING:1},Vu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},I8=42,Im=256,Dm={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Ow{constructor(L){this.code_=L.code,this.units_=L.units,this.extent_=L.extent!==void 0?L.extent:null,this.worldExtent_=L.worldExtent!==void 0?L.worldExtent:null,this.axisOrientation_=L.axisOrientation!==void 0?L.axisOrientation:"enu",this.global_=L.global!==void 0?L.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=L.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=L.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Dm[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(L){this.global_=L,this.canWrapX_=!!(L&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(L){this.defaultTileGrid_=L}setExtent(L){this.extent_=L,this.canWrapX_=!!(this.global_&&L)}setWorldExtent(L){this.worldExtent_=L}setGetPointResolution(L){this.getPointResolutionFunc_=L}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Ap=6378137,Hv=Math.PI*Ap,D8=[-Hv,-Hv,Hv,Hv],k8=[-180,-85,180,85],p0=Ap*Math.log(Math.tan(Math.PI/2));class Iv extends Ow{constructor(L){super({code:L,units:"m",extent:D8,global:!0,worldExtent:k8,getPointResolution:function(Y,oe){return Y/Math.cosh(oe[1]/Ap)}})}}const wb=[new Iv("EPSG:3857"),new Iv("EPSG:102100"),new Iv("EPSG:102113"),new Iv("EPSG:900913"),new Iv("http://www.opengis.net/def/crs/EPSG/0/3857"),new Iv("http://www.opengis.net/gml/srs/epsg.xml#3857")];function z8(G,L,Y){const oe=G.length;Y=Y>1?Y:2,L===void 0&&(Y>2?L=G.slice():L=new Array(oe));for(let he=0;he<oe;he+=Y){L[he]=Hv*G[he]/180;let Ae=Ap*Math.log(Math.tan(Math.PI*(+G[he+1]+90)/360));Ae>p0?Ae=p0:Ae<-p0&&(Ae=-p0),L[he+1]=Ae}return L}function O8(G,L,Y){const oe=G.length;Y=Y>1?Y:2,L===void 0&&(Y>2?L=G.slice():L=new Array(oe));for(let he=0;he<oe;he+=Y)L[he]=180*G[he]/Hv,L[he+1]=360*Math.atan(Math.exp(G[he+1]/Ap))/Math.PI-90;return L}const F8=6378137,Tb=[-180,-90,180,90],B8=Math.PI*F8/180;class Xh extends Ow{constructor(L,Y){super({code:L,units:"degrees",extent:Tb,axisOrientation:Y,global:!0,metersPerUnit:B8,worldExtent:Tb})}}const Ab=[new Xh("CRS:84"),new Xh("EPSG:4326","neu"),new Xh("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xh("urn:ogc:def:crs:OGC:2:84"),new Xh("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Xh("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xh("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Zy={};function N8(G){return Zy[G]||Zy[G.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function U8(G,L){Zy[G]=L}let Kv={};function U0(G,L,Y){const oe=G.getCode(),he=L.getCode();oe in Kv||(Kv[oe]={}),Kv[oe][he]=Y}function V8(G,L){let Y;return G in Kv&&L in Kv[G]&&(Y=Kv[G][L]),Y}const bs={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Mb(G){const L=rv();for(let Y=0,oe=G.length;Y<oe;++Y)L0(L,G[Y]);return L}function H8(G,L,Y){const oe=Math.min.apply(null,G),he=Math.min.apply(null,L),Ae=Math.max.apply(null,G),U=Math.max.apply(null,L);return id(oe,he,Ae,U,Y)}function G8(G,L){return L?(L[0]=G[0],L[1]=G[1],L[2]=G[2],L[3]=G[3],L):G.slice()}function Fw(G,L,Y){let oe,he;return L<G[0]?oe=G[0]-L:G[2]<L?oe=L-G[2]:oe=0,Y<G[1]?he=G[1]-Y:G[3]<Y?he=Y-G[3]:he=0,oe*oe+he*he}function km(G,L){return Bw(G,L[0],L[1])}function W8(G,L){return G[0]<=L[0]&&L[2]<=G[2]&&G[1]<=L[1]&&L[3]<=G[3]}function Bw(G,L,Y){return G[0]<=L&&L<=G[2]&&G[1]<=Y&&Y<=G[3]}function Eb(G,L){const Y=G[0],oe=G[1],he=G[2],Ae=G[3],U=L[0],F=L[1];let e=bs.UNKNOWN;return U<Y?e=e|bs.LEFT:U>he&&(e=e|bs.RIGHT),F<oe?e=e|bs.BELOW:F>Ae&&(e=e|bs.ABOVE),e===bs.UNKNOWN&&(e=bs.INTERSECTING),e}function rv(){return[1/0,1/0,-1/0,-1/0]}function id(G,L,Y,oe,he){return he?(he[0]=G,he[1]=L,he[2]=Y,he[3]=oe,he):[G,L,Y,oe]}function Mp(G){return id(1/0,1/0,-1/0,-1/0,G)}function Y8(G,L){const Y=G[0],oe=G[1];return id(Y,oe,Y,oe,L)}function X8(G,L,Y,oe,he){const Ae=Mp(he);return Nw(Ae,G,L,Y,oe)}function jy(G,L){return G[0]==L[0]&&G[2]==L[2]&&G[1]==L[1]&&G[3]==L[3]}function Z8(G,L){return L[0]<G[0]&&(G[0]=L[0]),L[2]>G[2]&&(G[2]=L[2]),L[1]<G[1]&&(G[1]=L[1]),L[3]>G[3]&&(G[3]=L[3]),G}function L0(G,L){L[0]<G[0]&&(G[0]=L[0]),L[0]>G[2]&&(G[2]=L[0]),L[1]<G[1]&&(G[1]=L[1]),L[1]>G[3]&&(G[3]=L[1])}function Nw(G,L,Y,oe,he){for(;Y<oe;Y+=he)j8(G,L[Y],L[Y+1]);return G}function j8(G,L,Y){G[0]=Math.min(G[0],L),G[1]=Math.min(G[1],Y),G[2]=Math.max(G[2],L),G[3]=Math.max(G[3],Y)}function Uw(G,L){let Y;return Y=L(dg(G)),Y||(Y=L(pg(G)),Y)||(Y=L(gg(G)),Y)||(Y=L(nv(G)),Y)?Y:!1}function Ky(G){let L=0;return Sp(G)||(L=ao(G)*Dl(G)),L}function dg(G){return[G[0],G[1]]}function pg(G){return[G[2],G[1]]}function ed(G){return[(G[0]+G[2])/2,(G[1]+G[3])/2]}function K8(G,L){let Y;if(L==="bottom-left")Y=dg(G);else if(L==="bottom-right")Y=pg(G);else if(L==="top-left")Y=nv(G);else if(L==="top-right")Y=gg(G);else throw new Error("Invalid corner");return Y}function Jy(G,L,Y,oe,he){const[Ae,U,F,e,d,S,n,E]=Qy(G,L,Y,oe);return id(Math.min(Ae,F,d,n),Math.min(U,e,S,E),Math.max(Ae,F,d,n),Math.max(U,e,S,E),he)}function Qy(G,L,Y,oe){const he=L*oe[0]/2,Ae=L*oe[1]/2,U=Math.cos(Y),F=Math.sin(Y),e=he*U,d=he*F,S=Ae*U,n=Ae*F,E=G[0],T=G[1];return[E-e+n,T-d-S,E-e-n,T-d+S,E+e-n,T+d+S,E+e+n,T+d-S,E-e+n,T-d-S]}function Dl(G){return G[3]-G[1]}function Kd(G,L,Y){const oe=Y||rv();return Ep(G,L)?(G[0]>L[0]?oe[0]=G[0]:oe[0]=L[0],G[1]>L[1]?oe[1]=G[1]:oe[1]=L[1],G[2]<L[2]?oe[2]=G[2]:oe[2]=L[2],G[3]<L[3]?oe[3]=G[3]:oe[3]=L[3]):Mp(oe),oe}function nv(G){return[G[0],G[3]]}function gg(G){return[G[2],G[3]]}function ao(G){return G[2]-G[0]}function Ep(G,L){return G[0]<=L[2]&&G[2]>=L[0]&&G[1]<=L[3]&&G[3]>=L[1]}function Sp(G){return G[2]<G[0]||G[3]<G[1]}function J8(G,L){return L?(L[0]=G[0],L[1]=G[1],L[2]=G[2],L[3]=G[3],L):G}function Q8(G,L,Y){let oe=!1;const he=Eb(G,L),Ae=Eb(G,Y);if(he===bs.INTERSECTING||Ae===bs.INTERSECTING)oe=!0;else{const U=G[0],F=G[1],e=G[2],d=G[3],S=L[0],n=L[1],E=Y[0],T=Y[1],v=(T-n)/(E-S);let g,r;Ae&bs.ABOVE&&!(he&bs.ABOVE)&&(g=E-(T-d)/v,oe=g>=U&&g<=e),!oe&&Ae&bs.RIGHT&&!(he&bs.RIGHT)&&(r=T-(E-e)*v,oe=r>=F&&r<=d),!oe&&Ae&bs.BELOW&&!(he&bs.BELOW)&&(g=E-(T-F)/v,oe=g>=U&&g<=e),!oe&&Ae&bs.LEFT&&!(he&bs.LEFT)&&(r=T-(E-U)*v,oe=r>=F&&r<=d)}return oe}function $8(G,L,Y,oe){if(Sp(G))return Mp(Y);let he=[];he=[G[0],G[1],G[2],G[1],G[2],G[3],G[0],G[3]],L(he,he,2);const Ae=[],U=[];for(let F=0,e=he.length;F<e;F+=2)Ae.push(he[F]),U.push(he[F+1]);return H8(Ae,U,Y)}function q8(G,L){const Y=L.getExtent(),oe=ed(G);if(L.canWrapX()&&(oe[0]<Y[0]||oe[0]>=Y[2])){const he=ao(Y),U=Math.floor((oe[0]-Y[0])/he)*he;G[0]-=U,G[2]-=U}return G}function eC(G,L,Y){if(L.canWrapX()){const oe=L.getExtent();if(!isFinite(G[0])||!isFinite(G[2]))return[[oe[0],G[1],oe[2],G[3]]];q8(G,L);const he=ao(oe);if(ao(G)>he&&!Y)return[[oe[0],G[1],oe[2],G[3]]];if(G[0]<oe[0])return[[G[0]+he,G[1],oe[2],G[3]],[oe[0],G[1],G[2],G[3]]];if(G[2]>oe[2])return[[G[0],G[1],oe[2],G[3]],[oe[0],G[1],G[2]-he,G[3]]]}return[G]}function tC(G,L){return G[0]+=+L[0],G[1]+=+L[1],G}function V0(G,L){let Y=!0;for(let oe=G.length-1;oe>=0;--oe)if(G[oe]!=L[oe]){Y=!1;break}return Y}function zm(G,L){const Y=Math.cos(L),oe=Math.sin(L),he=G[0]*Y-G[1]*oe,Ae=G[1]*Y+G[0]*oe;return G[0]=he,G[1]=Ae,G}function rC(G,L){return G[0]*=L,G[1]*=L,G}function nC(G,L){if(L.canWrapX()){const Y=ao(L.getExtent()),oe=iC(G,L,Y);oe&&(G[0]-=oe*Y)}return G}function iC(G,L,Y){const oe=L.getExtent();let he=0;return L.canWrapX()&&(G[0]<oe[0]||G[0]>oe[2])&&(Y=Y||ao(oe),he=Math.floor((G[0]-oe[0])/Y)),he}const aC=63710088e-1;function Sb(G,L,Y){Y=Y||aC;const oe=C0(G[1]),he=C0(L[1]),Ae=(he-oe)/2,U=C0(L[0]-G[0])/2,F=Math.sin(Ae)*Math.sin(Ae)+Math.sin(U)*Math.sin(U)*Math.cos(oe)*Math.cos(he);return 2*Y*Math.atan2(Math.sqrt(F),Math.sqrt(1-F))}function Vw(...G){console.warn(...G)}let $y=!0;function oC(G){$y=!1}function Om(G,L){if(L!==void 0){for(let Y=0,oe=G.length;Y<oe;++Y)L[Y]=G[Y];L=L}else L=G.slice();return L}function Hw(G,L){if(L!==void 0&&G!==L){for(let Y=0,oe=G.length;Y<oe;++Y)L[Y]=G[Y];G=L}return G}function sC(G){U8(G.getCode(),G),U0(G,G,Om)}function lC(G){G.forEach(sC)}function vu(G){return typeof G=="string"?N8(G):G||null}function Cb(G,L,Y,oe){G=vu(G);let he;const Ae=G.getPointResolutionFunc();if(Ae)he=Ae(L,Y);else{const U=G.getUnits();if(U=="degrees"&&!oe||oe=="degrees")he=L;else{const F=Bm(G,vu("EPSG:4326"));if(F===Hw&&U!=="degrees")he=L*G.getMetersPerUnit();else{let d=[Y[0]-L/2,Y[1],Y[0]+L/2,Y[1],Y[0],Y[1]-L/2,Y[0],Y[1]+L/2];d=F(d,d,2);const S=Sb(d.slice(0,2),d.slice(2,4)),n=Sb(d.slice(4,6),d.slice(6,8));he=(S+n)/2}const e=G.getMetersPerUnit();e!==void 0&&(he/=e)}}return he}function Lb(G){lC(G),G.forEach(function(L){G.forEach(function(Y){L!==Y&&U0(L,Y,Om)})})}function uC(G,L,Y,oe){G.forEach(function(he){L.forEach(function(Ae){U0(he,Ae,Y),U0(Ae,he,oe)})})}function Fm(G,L){return G?typeof G=="string"?vu(G):G:vu(L)}function Bv(G,L){if(G===L)return!0;const Y=G.getUnits()===L.getUnits();return(G.getCode()===L.getCode()||Bm(G,L)===Om)&&Y}function Bm(G,L){const Y=G.getCode(),oe=L.getCode();let he=V8(Y,oe);return he||(he=Hw),he}function op(G,L){const Y=vu(G),oe=vu(L);return Bm(Y,oe)}function Nm(G,L,Y){return op(L,Y)(G,void 0,G.length)}function Gw(G,L,Y,oe){const he=op(L,Y);return $8(G,he,void 0)}let Af=null;function fC(G){Af=vu(G)}function cC(){return Af}function hC(){fC("EPSG:4326")}function qy(G,L){return Af?Nm(G,L,Af):G}function Qf(G,L){return Af?Nm(G,Af,L):($y&&!V0(G,[0,0])&&G[0]>=-180&&G[0]<=180&&G[1]>=-90&&G[1]<=90&&($y=!1,Vw("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),G)}function vC(G,L){return Af?Gw(G,L,Af):G}function Gv(G,L){return Af?Gw(G,Af,L):G}function dC(){Lb(wb),Lb(Ab),uC(Ab,wb,z8,O8)}dC();function _b(G,L,Y){return function(oe,he,Ae,U,F){if(!oe)return;if(!he&&!L)return oe;const e=L?0:Ae[0]*he,d=L?0:Ae[1]*he,S=F?F[0]:0,n=F?F[1]:0;let E=G[0]+e/2+S,T=G[2]-e/2+S,v=G[1]+d/2+n,g=G[3]-d/2+n;E>T&&(E=(T+E)/2,T=E),v>g&&(v=(g+v)/2,g=v);let r=is(oe[0],E,T),t=is(oe[1],v,g);if(U&&Y&&he){const o=30*he;r+=-o*Math.log(1+Math.max(0,E-oe[0])/o)+o*Math.log(1+Math.max(0,oe[0]-T)/o),t+=-o*Math.log(1+Math.max(0,v-oe[1])/o)+o*Math.log(1+Math.max(0,oe[1]-g)/o)}return[r,t]}}function pC(G){return G}function Um(G,L,Y,oe){const he=ao(L)/Y[0],Ae=Dl(L)/Y[1];return oe?Math.min(G,Math.max(he,Ae)):Math.min(G,Math.min(he,Ae))}function Vm(G,L,Y){let oe=Math.min(G,L);const he=50;return oe*=Math.log(1+he*Math.max(0,G/L-1))/he+1,Y&&(oe=Math.max(oe,Y),oe/=Math.log(1+he*Math.max(0,Y/G-1))/he+1),is(oe,Y/2,L*2)}function gC(G,L,Y,oe){return L=L!==void 0?L:!0,function(he,Ae,U,F){if(he!==void 0){const e=G[0],d=G[G.length-1],S=Y?Um(e,Y,U,oe):e;if(F)return L?Vm(he,S,d):is(he,d,S);const n=Math.min(S,he),E=Math.floor(Rm(G,n,Ae));return G[E]>S&&E<G.length-1?G[E+1]:G[E]}}}function yC(G,L,Y,oe,he,Ae){return oe=oe!==void 0?oe:!0,Y=Y!==void 0?Y:0,function(U,F,e,d){if(U!==void 0){const S=he?Um(L,he,e,Ae):L;if(d)return oe?Vm(U,S,Y):is(U,Y,S);const n=1e-9,E=Math.ceil(Math.log(L/S)/Math.log(G)-n),T=-F*(.5-n)+.5,v=Math.min(S,U),g=Math.floor(Math.log(L/v)/Math.log(G)+T),r=Math.max(E,g),t=L/Math.pow(G,r);return is(t,Y,S)}}}function Pb(G,L,Y,oe,he){return Y=Y!==void 0?Y:!0,function(Ae,U,F,e){if(Ae!==void 0){const d=oe?Um(G,oe,F,he):G;return!Y||!e?is(Ae,L,d):Vm(Ae,d,L)}}}function Hm(G){if(G!==void 0)return 0}function Rb(G){if(G!==void 0)return G}function mC(G){const L=2*Math.PI/G;return function(Y,oe){if(oe)return Y;if(Y!==void 0)return Y=Math.floor(Y/L+.5)*L,Y}}function xC(G){const L=C0(5);return function(Y,oe){return oe||Y===void 0?Y:Math.abs(Y)<=L?0:Y}}function Ww(G){return Math.pow(G,3)}function ad(G){return 1-Ww(1-G)}function bC(G){return 3*G*G-2*G*G*G}function wC(G){return G}new Array(6);function Jv(){return[1,0,0,1,0,0]}function su(G,L){const Y=L[0],oe=L[1];return L[0]=G[0]*Y+G[2]*oe+G[4],L[1]=G[1]*Y+G[3]*oe+G[5],L}function sp(G,L,Y,oe,he,Ae,U,F){const e=Math.sin(Ae),d=Math.cos(Ae);return G[0]=oe*d,G[1]=he*e,G[2]=-oe*e,G[3]=he*d,G[4]=U*oe*d-F*oe*e+L,G[5]=U*he*e+F*he*d+Y,G}function Yw(G,L){const Y=TC(L);Wa(Y!==0,"Transformation matrix cannot be inverted");const oe=L[0],he=L[1],Ae=L[2],U=L[3],F=L[4],e=L[5];return G[0]=U/Y,G[1]=-he/Y,G[2]=-Ae/Y,G[3]=oe/Y,G[4]=(Ae*e-U*F)/Y,G[5]=-(oe*e-he*F)/Y,G}function TC(G){return G[0]*G[3]-G[1]*G[2]}const Ib=[1e6,1e6,1e6,1e6,2,2];function AC(G){return"matrix("+G.map((Y,oe)=>Math.round(Y*Ib[oe])/Ib[oe]).join(", ")+")"}function MC(G,L,Y,oe,he,Ae){Ae=Ae||[];let U=0;for(let F=L;F<Y;F+=oe){const e=G[F],d=G[F+1];Ae[U++]=he[0]*e+he[2]*d+he[4],Ae[U++]=he[1]*e+he[3]*d+he[5]}return Ae&&Ae.length!=U&&(Ae.length=U),Ae}function EC(G,L,Y,oe,he,Ae,U){U=U||[];const F=Math.cos(he),e=Math.sin(he),d=Ae[0],S=Ae[1];let n=0;for(let E=L;E<Y;E+=oe){const T=G[E]-d,v=G[E+1]-S;U[n++]=d+T*F-v*e,U[n++]=S+T*e+v*F;for(let g=E+2;g<E+oe;++g)U[n++]=G[g]}return U&&U.length!=n&&(U.length=n),U}function SC(G,L,Y,oe,he,Ae,U,F){F=F||[];const e=U[0],d=U[1];let S=0;for(let n=L;n<Y;n+=oe){const E=G[n]-e,T=G[n+1]-d;F[S++]=e+he*E,F[S++]=d+Ae*T;for(let v=n+2;v<n+oe;++v)F[S++]=G[v]}return F&&F.length!=S&&(F.length=S),F}function CC(G,L,Y,oe,he,Ae,U){U=U||[];let F=0;for(let e=L;e<Y;e+=oe){U[F++]=G[e]+he,U[F++]=G[e+1]+Ae;for(let d=e+2;d<e+oe;++d)U[F++]=G[d]}return U&&U.length!=F&&(U.length=F),U}const Db=Jv();class LC extends oc{constructor(){super(),this.extent_=rv(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=E8((L,Y,oe)=>{if(!oe)return this.getSimplifiedGeometry(Y);const he=this.clone();return he.applyTransform(oe),he.getSimplifiedGeometry(Y)})}simplifyTransformed(L,Y){return this.simplifyTransformedInternal(this.getRevision(),L,Y)}clone(){return Ia()}closestPointXY(L,Y,oe,he){return Ia()}containsXY(L,Y){const oe=this.getClosestPoint([L,Y]);return oe[0]===L&&oe[1]===Y}getClosestPoint(L,Y){return Y=Y||[NaN,NaN],this.closestPointXY(L[0],L[1],Y,1/0),Y}intersectsCoordinate(L){return this.containsXY(L[0],L[1])}computeExtent(L){return Ia()}getExtent(L){if(this.extentRevision_!=this.getRevision()){const Y=this.computeExtent(this.extent_);(isNaN(Y[0])||isNaN(Y[1]))&&Mp(Y),this.extentRevision_=this.getRevision()}return J8(this.extent_,L)}rotate(L,Y){Ia()}scale(L,Y,oe){Ia()}simplify(L){return this.getSimplifiedGeometry(L*L)}getSimplifiedGeometry(L){return Ia()}getType(){return Ia()}applyTransform(L){Ia()}intersectsExtent(L){return Ia()}translate(L,Y){Ia()}transform(L,Y){const oe=vu(L),he=oe.getUnits()=="tile-pixels"?function(Ae,U,F){const e=oe.getExtent(),d=oe.getWorldExtent(),S=Dl(d)/Dl(e);return sp(Db,d[0],d[3],S,-S,0,0,0),MC(Ae,0,Ae.length,F,Db,U),op(oe,Y)(Ae,U,F)}:op(oe,Y);return this.applyTransform(he),this}}class Gm extends LC{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(L){return X8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,L)}getCoordinates(){return Ia()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(L){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),L<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&L<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const Y=this.getSimplifiedGeometryInternal(L);return Y.getFlatCoordinates().length<this.flatCoordinates.length?Y:(this.simplifiedGeometryMaxMinSquaredTolerance=L,this)}getSimplifiedGeometryInternal(L){return this}getStride(){return this.stride}setFlatCoordinates(L,Y){this.stride=kb(L),this.layout=L,this.flatCoordinates=Y}setCoordinates(L,Y){Ia()}setLayout(L,Y,oe){let he;if(L)he=kb(L);else{for(let Ae=0;Ae<oe;++Ae){if(Y.length===0){this.layout="XY",this.stride=2;return}Y=Y[0]}he=Y.length,L=_C(he)}this.layout=L,this.stride=he}applyTransform(L){this.flatCoordinates&&(L(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(L,Y){const oe=this.getFlatCoordinates();if(oe){const he=this.getStride();EC(oe,0,oe.length,he,L,Y,oe),this.changed()}}scale(L,Y,oe){Y===void 0&&(Y=L),oe||(oe=ed(this.getExtent()));const he=this.getFlatCoordinates();if(he){const Ae=this.getStride();SC(he,0,he.length,Ae,L,Y,oe,he),this.changed()}}translate(L,Y){const oe=this.getFlatCoordinates();if(oe){const he=this.getStride();CC(oe,0,oe.length,he,L,Y,oe),this.changed()}}}function _C(G){let L;return G==2?L="XY":G==3?L="XYZ":G==4&&(L="XYZM"),L}function kb(G){let L;return G=="XY"?L=2:G=="XYZ"||G=="XYM"?L=3:G=="XYZM"&&(L=4),L}function zb(G,L,Y,oe,he,Ae,U){const F=G[L],e=G[L+1],d=G[Y]-F,S=G[Y+1]-e;let n;if(d===0&&S===0)n=L;else{const E=((he-F)*d+(Ae-e)*S)/(d*d+S*S);if(E>1)n=Y;else if(E>0){for(let T=0;T<oe;++T)U[T]=R8(G[L+T],G[Y+T],E);U.length=oe;return}else n=L}for(let E=0;E<oe;++E)U[E]=G[n+E];U.length=oe}function Xw(G,L,Y,oe,he){let Ae=G[L],U=G[L+1];for(L+=oe;L<Y;L+=oe){const F=G[L],e=G[L+1],d=Zv(Ae,U,F,e);d>he&&(he=d),Ae=F,U=e}return he}function PC(G,L,Y,oe,he){for(let Ae=0,U=Y.length;Ae<U;++Ae){const F=Y[Ae];he=Xw(G,L,F,oe,he),L=F}return he}function Zw(G,L,Y,oe,he,Ae,U,F,e,d,S){if(L==Y)return d;let n,E;if(he===0){if(E=Zv(U,F,G[L],G[L+1]),E<d){for(n=0;n<oe;++n)e[n]=G[L+n];return e.length=oe,E}return d}S=S||[NaN,NaN];let T=L+oe;for(;T<Y;)if(zb(G,T-oe,T,oe,U,F,S),E=Zv(U,F,S[0],S[1]),E<d){for(d=E,n=0;n<oe;++n)e[n]=S[n];e.length=oe,T+=oe}else T+=oe*Math.max((Math.sqrt(E)-Math.sqrt(d))/he|0,1);if(zb(G,Y-oe,L,oe,U,F,S),E=Zv(U,F,S[0],S[1]),E<d){for(d=E,n=0;n<oe;++n)e[n]=S[n];e.length=oe}return d}function RC(G,L,Y,oe,he,Ae,U,F,e,d,S){S=S||[NaN,NaN];for(let n=0,E=Y.length;n<E;++n){const T=Y[n];d=Zw(G,L,T,oe,he,Ae,U,F,e,d,S),L=T}return d}function IC(G,L,Y,oe){for(let he=0,Ae=Y.length;he<Ae;++he)G[L++]=Y[he];return L}function jw(G,L,Y,oe){for(let he=0,Ae=Y.length;he<Ae;++he){const U=Y[he];for(let F=0;F<oe;++F)G[L++]=U[F]}return L}function DC(G,L,Y,oe,he){he=he||[];let Ae=0;for(let U=0,F=Y.length;U<F;++U){const e=jw(G,L,Y[U],oe);he[Ae++]=e,L=e}return he.length=Ae,he}function kC(G,L,Y,oe,he,Ae,U){const F=(Y-L)/oe;if(F<3){for(;L<Y;L+=oe)Ae[U++]=G[L],Ae[U++]=G[L+1];return U}const e=new Array(F);e[0]=1,e[F-1]=1;const d=[L,Y-oe];let S=0;for(;d.length>0;){const n=d.pop(),E=d.pop();let T=0;const v=G[E],g=G[E+1],r=G[n],t=G[n+1];for(let o=E+oe;o<n;o+=oe){const i=G[o],f=G[o+1],u=_8(i,f,v,g,r,t);u>T&&(S=o,T=u)}T>he&&(e[(S-L)/oe]=1,E+oe<S&&d.push(E,S),S+oe<n&&d.push(S,n))}for(let n=0;n<F;++n)e[n]&&(Ae[U++]=G[L+n*oe],Ae[U++]=G[L+n*oe+1]);return U}function Dv(G,L){return L*Math.round(G/L)}function zC(G,L,Y,oe,he,Ae,U){if(L==Y)return U;let F=Dv(G[L],he),e=Dv(G[L+1],he);L+=oe,Ae[U++]=F,Ae[U++]=e;let d,S;do if(d=Dv(G[L],he),S=Dv(G[L+1],he),L+=oe,L==Y)return Ae[U++]=d,Ae[U++]=S,U;while(d==F&&S==e);for(;L<Y;){const n=Dv(G[L],he),E=Dv(G[L+1],he);if(L+=oe,n==d&&E==S)continue;const T=d-F,v=S-e,g=n-F,r=E-e;if(T*r==v*g&&(T<0&&g<T||T==g||T>0&&g>T)&&(v<0&&r<v||v==r||v>0&&r>v)){d=n,S=E;continue}Ae[U++]=d,Ae[U++]=S,F=d,e=S,d=n,S=E}return Ae[U++]=d,Ae[U++]=S,U}function OC(G,L,Y,oe,he,Ae,U,F){for(let e=0,d=Y.length;e<d;++e){const S=Y[e];U=zC(G,L,S,oe,he,Ae,U),F.push(U),L=S}return U}function Kw(G,L,Y,oe,he){he=he!==void 0?he:[];let Ae=0;for(let U=L;U<Y;U+=oe)he[Ae++]=G.slice(U,U+oe);return he.length=Ae,he}function FC(G,L,Y,oe,he){he=he!==void 0?he:[];let Ae=0;for(let U=0,F=Y.length;U<F;++U){const e=Y[U];he[Ae++]=Kw(G,L,e,oe,he[Ae]),L=e}return he.length=Ae,he}function Jw(G,L,Y,oe){let he=0,Ae=G[Y-oe],U=G[Y-oe+1];for(;L<Y;L+=oe){const F=G[L],e=G[L+1];he+=U*F-Ae*e,Ae=F,U=e}return he/2}function BC(G,L,Y,oe){let he=0;for(let Ae=0,U=Y.length;Ae<U;++Ae){const F=Y[Ae];he+=Jw(G,L,F,oe),L=F}return he}class lp extends Gm{constructor(L,Y){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,Y!==void 0&&!Array.isArray(L[0])?this.setFlatCoordinates(Y,L):this.setCoordinates(L,Y)}clone(){return new lp(this.flatCoordinates.slice(),this.layout)}closestPointXY(L,Y,oe,he){return he<Fw(this.getExtent(),L,Y)?he:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Zw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,L,Y,oe,he))}getArea(){return Jw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Kw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(L){const Y=[];return Y.length=kC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,L,Y,0),new lp(Y,"XY")}getType(){return"LinearRing"}intersectsExtent(L){return!1}setCoordinates(L,Y){this.setLayout(Y,L,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jw(this.flatCoordinates,0,L,this.stride),this.changed()}}class Wm extends Gm{constructor(L,Y){super(),this.setCoordinates(L,Y)}clone(){const L=new Wm(this.flatCoordinates.slice(),this.layout);return L.applyProperties(this),L}closestPointXY(L,Y,oe,he){const Ae=this.flatCoordinates,U=Zv(L,Y,Ae[0],Ae[1]);if(U<he){const F=this.stride;for(let e=0;e<F;++e)oe[e]=Ae[e];return oe.length=F,U}return he}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(L){return Y8(this.flatCoordinates,L)}getType(){return"Point"}intersectsExtent(L){return Bw(L,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(L,Y){this.setLayout(Y,L,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=IC(this.flatCoordinates,0,L,this.stride),this.changed()}}function NC(G,L,Y,oe,he){return!Uw(he,function(U){return!Qh(G,L,Y,oe,U[0],U[1])})}function Qh(G,L,Y,oe,he,Ae){let U=0,F=G[Y-oe],e=G[Y-oe+1];for(;L<Y;L+=oe){const d=G[L],S=G[L+1];e<=Ae?S>Ae&&(d-F)*(Ae-e)-(he-F)*(S-e)>0&&U++:S<=Ae&&(d-F)*(Ae-e)-(he-F)*(S-e)<0&&U--,F=d,e=S}return U!==0}function Qw(G,L,Y,oe,he,Ae){if(Y.length===0||!Qh(G,L,Y[0],oe,he,Ae))return!1;for(let U=1,F=Y.length;U<F;++U)if(Qh(G,Y[U-1],Y[U],oe,he,Ae))return!1;return!0}function UC(G,L,Y,oe,he,Ae,U){let F,e,d,S,n,E,T;const v=he[Ae+1],g=[];for(let o=0,i=Y.length;o<i;++o){const f=Y[o];for(S=G[f-oe],E=G[f-oe+1],F=L;F<f;F+=oe)n=G[F],T=G[F+1],(v<=E&&T<=v||E<=v&&v<=T)&&(d=(v-E)/(T-E)*(n-S)+S,g.push(d)),S=n,E=T}let r=NaN,t=-1/0;for(g.sort(ug),S=g[0],F=1,e=g.length;F<e;++F){n=g[F];const o=Math.abs(n-S);o>t&&(d=(S+n)/2,Qw(G,L,Y,oe,d,v)&&(r=d,t=o)),S=n}return isNaN(r)&&(r=he[Ae]),[r,v,t]}function VC(G,L,Y,oe,he){let Ae;for(L+=oe;L<Y;L+=oe)if(Ae=he(G.slice(L-oe,L),G.slice(L,L+oe)),Ae)return Ae;return!1}function $w(G,L,Y,oe,he){const Ae=Nw(rv(),G,L,Y,oe);return Ep(he,Ae)?W8(he,Ae)||Ae[0]>=he[0]&&Ae[2]<=he[2]||Ae[1]>=he[1]&&Ae[3]<=he[3]?!0:VC(G,L,Y,oe,function(U,F){return Q8(he,U,F)}):!1}function qw(G,L,Y,oe,he){return!!($w(G,L,Y,oe,he)||Qh(G,L,Y,oe,he[0],he[1])||Qh(G,L,Y,oe,he[0],he[3])||Qh(G,L,Y,oe,he[2],he[1])||Qh(G,L,Y,oe,he[2],he[3]))}function HC(G,L,Y,oe,he){if(!qw(G,L,Y[0],oe,he))return!1;if(Y.length===1)return!0;for(let Ae=1,U=Y.length;Ae<U;++Ae)if(NC(G,Y[Ae-1],Y[Ae],oe,he)&&!$w(G,Y[Ae-1],Y[Ae],oe,he))return!1;return!0}function GC(G,L,Y,oe){for(;L<Y-oe;){for(let he=0;he<oe;++he){const Ae=G[L+he];G[L+he]=G[Y-oe+he],G[Y-oe+he]=Ae}L+=oe,Y-=oe}}function e2(G,L,Y,oe){let he=0,Ae=G[Y-oe],U=G[Y-oe+1];for(;L<Y;L+=oe){const F=G[L],e=G[L+1];he+=(F-Ae)*(e+U),Ae=F,U=e}return he===0?void 0:he>0}function WC(G,L,Y,oe,he){he=he!==void 0?he:!1;for(let Ae=0,U=Y.length;Ae<U;++Ae){const F=Y[Ae],e=e2(G,L,F,oe);if(Ae===0){if(he&&e||!he&&!e)return!1}else if(he&&!e||!he&&e)return!1;L=F}return!0}function Ob(G,L,Y,oe,he){he=he!==void 0?he:!1;for(let Ae=0,U=Y.length;Ae<U;++Ae){const F=Y[Ae],e=e2(G,L,F,oe);(Ae===0?he&&e||!he&&!e:he&&!e||!he&&e)&&GC(G,L,F,oe),L=F}return L}class up extends Gm{constructor(L,Y,oe){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,Y!==void 0&&oe?(this.setFlatCoordinates(Y,L),this.ends_=oe):this.setCoordinates(L,Y)}appendLinearRing(L){this.flatCoordinates?A8(this.flatCoordinates,L.getFlatCoordinates()):this.flatCoordinates=L.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const L=new up(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return L.applyProperties(this),L}closestPointXY(L,Y,oe,he){return he<Fw(this.getExtent(),L,Y)?he:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(PC(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),RC(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,L,Y,oe,he))}containsXY(L,Y){return Qw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L,Y)}getArea(){return BC(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(L){let Y;return L!==void 0?(Y=this.getOrientedFlatCoordinates().slice(),Ob(Y,0,this.ends_,this.stride,L)):Y=this.flatCoordinates,FC(Y,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const L=ed(this.getExtent());this.flatInteriorPoint_=UC(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Wm(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(L){return L<0||this.ends_.length<=L?null:new lp(this.flatCoordinates.slice(L===0?0:this.ends_[L-1],this.ends_[L]),this.layout)}getLinearRings(){const L=this.layout,Y=this.flatCoordinates,oe=this.ends_,he=[];let Ae=0;for(let U=0,F=oe.length;U<F;++U){const e=oe[U],d=new lp(Y.slice(Ae,e),L);he.push(d),Ae=e}return he}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const L=this.flatCoordinates;WC(L,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=L:(this.orientedFlatCoordinates_=L.slice(),this.orientedFlatCoordinates_.length=Ob(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(L){const Y=[],oe=[];return Y.length=OC(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(L),Y,0,oe),new up(Y,"XY",oe)}getType(){return"Polygon"}intersectsExtent(L){return HC(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L)}setCoordinates(L,Y){this.setLayout(Y,L,2),this.flatCoordinates||(this.flatCoordinates=[]);const oe=DC(this.flatCoordinates,0,L,this.stride,this.ends_);this.flatCoordinates.length=oe.length===0?0:oe[oe.length-1],this.changed()}}function Fb(G){if(Sp(G))throw new Error("Cannot create polygon from empty extent");const L=G[0],Y=G[1],oe=G[2],he=G[3],Ae=[L,Y,L,he,oe,he,oe,Y,L,Y];return new up(Ae,"XY",[Ae.length])}const yy=0;class Gu extends oc{constructor(L){super(),this.on,this.once,this.un,L=Object.assign({},L),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Fm(L.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,L.projection&&oC(),L.center&&(L.center=Qf(L.center,this.projection_)),L.extent&&(L.extent=Gv(L.extent,this.projection_)),this.applyOptions_(L)}applyOptions_(L){const Y=Object.assign({},L);for(const F in Vu)delete Y[F];this.setProperties(Y,!0);const oe=XC(L);this.maxResolution_=oe.maxResolution,this.minResolution_=oe.minResolution,this.zoomFactor_=oe.zoomFactor,this.resolutions_=L.resolutions,this.padding_=L.padding,this.minZoom_=oe.minZoom;const he=YC(L),Ae=oe.constraint,U=ZC(L);this.constraints_={center:he,resolution:Ae,rotation:U},this.setRotation(L.rotation!==void 0?L.rotation:0),this.setCenterInternal(L.center!==void 0?L.center:null),L.resolution!==void 0?this.setResolution(L.resolution):L.zoom!==void 0&&this.setZoom(L.zoom)}get padding(){return this.padding_}set padding(L){let Y=this.padding_;this.padding_=L;const oe=this.getCenterInternal();if(oe){const he=L||[0,0,0,0];Y=Y||[0,0,0,0];const Ae=this.getResolution(),U=Ae/2*(he[3]-Y[3]+Y[1]-he[1]),F=Ae/2*(he[0]-Y[0]+Y[2]-he[2]);this.setCenterInternal([oe[0]+U,oe[1]-F])}}getUpdatedOptions_(L){const Y=this.getProperties();return Y.resolution!==void 0?Y.resolution=this.getResolution():Y.zoom=this.getZoom(),Y.center=this.getCenterInternal(),Y.rotation=this.getRotation(),Object.assign({},Y,L)}animate(L){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const Y=new Array(arguments.length);for(let oe=0;oe<Y.length;++oe){let he=arguments[oe];he.center&&(he=Object.assign({},he),he.center=Qf(he.center,this.getProjection())),he.anchor&&(he=Object.assign({},he),he.anchor=Qf(he.anchor,this.getProjection())),Y[oe]=he}this.animateInternal.apply(this,Y)}animateInternal(L){let Y=arguments.length,oe;Y>1&&typeof arguments[Y-1]=="function"&&(oe=arguments[Y-1],--Y);let he=0;for(;he<Y&&!this.isDef();++he){const S=arguments[he];S.center&&this.setCenterInternal(S.center),S.zoom!==void 0?this.setZoom(S.zoom):S.resolution&&this.setResolution(S.resolution),S.rotation!==void 0&&this.setRotation(S.rotation)}if(he===Y){oe&&g0(oe,!0);return}let Ae=Date.now(),U=this.targetCenter_.slice(),F=this.targetResolution_,e=this.targetRotation_;const d=[];for(;he<Y;++he){const S=arguments[he],n={start:Ae,complete:!1,anchor:S.anchor,duration:S.duration!==void 0?S.duration:1e3,easing:S.easing||bC,callback:oe};if(S.center&&(n.sourceCenter=U,n.targetCenter=S.center.slice(),U=n.targetCenter),S.zoom!==void 0?(n.sourceResolution=F,n.targetResolution=this.getResolutionForZoom(S.zoom),F=n.targetResolution):S.resolution&&(n.sourceResolution=F,n.targetResolution=S.resolution,F=n.targetResolution),S.rotation!==void 0){n.sourceRotation=e;const E=jv(S.rotation-e+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=e+E,e=n.targetRotation}jC(n)?n.complete=!0:Ae+=n.duration,d.push(n)}this.animations_.push(d),this.setHint(ou.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ou.ANIMATING]>0}getInteracting(){return this.hints_[ou.INTERACTING]>0}cancelAnimations(){this.setHint(ou.ANIMATING,-this.hints_[ou.ANIMATING]);let L;for(let Y=0,oe=this.animations_.length;Y<oe;++Y){const he=this.animations_[Y];if(he[0].callback&&g0(he[0].callback,!1),!L)for(let Ae=0,U=he.length;Ae<U;++Ae){const F=he[Ae];if(!F.complete){L=F.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=L,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const L=Date.now();let Y=!1;for(let oe=this.animations_.length-1;oe>=0;--oe){const he=this.animations_[oe];let Ae=!0;for(let U=0,F=he.length;U<F;++U){const e=he[U];if(e.complete)continue;const d=L-e.start;let S=e.duration>0?d/e.duration:1;S>=1?(e.complete=!0,S=1):Ae=!1;const n=e.easing(S);if(e.sourceCenter){const E=e.sourceCenter[0],T=e.sourceCenter[1],v=e.targetCenter[0],g=e.targetCenter[1];this.nextCenter_=e.targetCenter;const r=E+n*(v-E),t=T+n*(g-T);this.targetCenter_=[r,t]}if(e.sourceResolution&&e.targetResolution){const E=n===1?e.targetResolution:e.sourceResolution+n*(e.targetResolution-e.sourceResolution);if(e.anchor){const T=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(E,0,T,!0);this.targetCenter_=this.calculateCenterZoom(v,e.anchor)}this.nextResolution_=e.targetResolution,this.targetResolution_=E,this.applyTargetState_(!0)}if(e.sourceRotation!==void 0&&e.targetRotation!==void 0){const E=n===1?jv(e.targetRotation+Math.PI,2*Math.PI)-Math.PI:e.sourceRotation+n*(e.targetRotation-e.sourceRotation);if(e.anchor){const T=this.constraints_.rotation(E,!0);this.targetCenter_=this.calculateCenterRotate(T,e.anchor)}this.nextRotation_=e.targetRotation,this.targetRotation_=E}if(this.applyTargetState_(!0),Y=!0,!e.complete)break}if(Ae){this.animations_[oe]=null,this.setHint(ou.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const U=he[0].callback;U&&g0(U,!0)}}this.animations_=this.animations_.filter(Boolean),Y&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(L,Y){let oe;const he=this.getCenterInternal();return he!==void 0&&(oe=[he[0]-Y[0],he[1]-Y[1]],zm(oe,L-this.getRotation()),tC(oe,Y)),oe}calculateCenterZoom(L,Y){let oe;const he=this.getCenterInternal(),Ae=this.getResolution();if(he!==void 0&&Ae!==void 0){const U=Y[0]-L*(Y[0]-he[0])/Ae,F=Y[1]-L*(Y[1]-he[1])/Ae;oe=[U,F]}return oe}getViewportSize_(L){const Y=this.viewportSize_;if(L){const oe=Y[0],he=Y[1];return[Math.abs(oe*Math.cos(L))+Math.abs(he*Math.sin(L)),Math.abs(oe*Math.sin(L))+Math.abs(he*Math.cos(L))]}return Y}setViewportSize(L){this.viewportSize_=Array.isArray(L)?L.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const L=this.getCenterInternal();return L&&qy(L,this.getProjection())}getCenterInternal(){return this.get(Vu.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(L){return L!==void 0?(L[0]=this.hints_[0],L[1]=this.hints_[1],L):this.hints_.slice()}calculateExtent(L){const Y=this.calculateExtentInternal(L);return vC(Y,this.getProjection())}calculateExtentInternal(L){L=L||this.getViewportSizeMinusPadding_();const Y=this.getCenterInternal();Wa(Y,"The view center is not defined");const oe=this.getResolution();Wa(oe!==void 0,"The view resolution is not defined");const he=this.getRotation();return Wa(he!==void 0,"The view rotation is not defined"),Jy(Y,oe,he,L)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(L){this.applyOptions_(this.getUpdatedOptions_({maxZoom:L}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(L){this.applyOptions_(this.getUpdatedOptions_({minZoom:L}))}setConstrainResolution(L){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:L}))}getProjection(){return this.projection_}getResolution(){return this.get(Vu.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(L,Y){return this.getResolutionForExtentInternal(Gv(L,this.getProjection()),Y)}getResolutionForExtentInternal(L,Y){Y=Y||this.getViewportSizeMinusPadding_();const oe=ao(L)/Y[0],he=Dl(L)/Y[1];return Math.max(oe,he)}getResolutionForValueFunction(L){L=L||2;const Y=this.getConstrainedResolution(this.maxResolution_),oe=this.minResolution_,he=Math.log(Y/oe)/Math.log(L);return function(Ae){return Y/Math.pow(L,Ae*he)}}getRotation(){return this.get(Vu.ROTATION)}getValueForResolutionFunction(L){const Y=Math.log(L||2),oe=this.getConstrainedResolution(this.maxResolution_),he=this.minResolution_,Ae=Math.log(oe/he)/Y;return function(U){return Math.log(oe/U)/Y/Ae}}getViewportSizeMinusPadding_(L){let Y=this.getViewportSize_(L);const oe=this.padding_;return oe&&(Y=[Y[0]-oe[1]-oe[3],Y[1]-oe[0]-oe[2]]),Y}getState(){const L=this.getProjection(),Y=this.getResolution(),oe=this.getRotation();let he=this.getCenterInternal();const Ae=this.padding_;if(Ae){const U=this.getViewportSizeMinusPadding_();he=my(he,this.getViewportSize_(),[U[0]/2+Ae[3],U[1]/2+Ae[0]],Y,oe)}return{center:he.slice(0),projection:L!==void 0?L:null,resolution:Y,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:oe,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let L;const Y=this.getResolution();return Y!==void 0&&(L=this.getZoomForResolution(Y)),L}getZoomForResolution(L){let Y=this.minZoom_||0,oe,he;if(this.resolutions_){const Ae=Rm(this.resolutions_,L,1);Y=Ae,oe=this.resolutions_[Ae],Ae==this.resolutions_.length-1?he=2:he=oe/this.resolutions_[Ae+1]}else oe=this.maxResolution_,he=this.zoomFactor_;return Y+Math.log(oe/L)/Math.log(he)}getResolutionForZoom(L){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const Y=is(Math.floor(L),0,this.resolutions_.length-2),oe=this.resolutions_[Y]/this.resolutions_[Y+1];return this.resolutions_[Y]/Math.pow(oe,is(L-Y,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,L-this.minZoom_)}fit(L,Y){let oe;if(Wa(Array.isArray(L)||typeof L.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(L)){Wa(!Sp(L),"Cannot fit empty extent provided as `geometry`");const he=Gv(L,this.getProjection());oe=Fb(he)}else if(L.getType()==="Circle"){const he=Gv(L.getExtent(),this.getProjection());oe=Fb(he),oe.rotate(this.getRotation(),ed(he))}else{const he=cC();he?oe=L.clone().transform(he,this.getProjection()):oe=L}this.fitInternal(oe,Y)}rotatedExtentForGeometry(L){const Y=this.getRotation(),oe=Math.cos(Y),he=Math.sin(-Y),Ae=L.getFlatCoordinates(),U=L.getStride();let F=1/0,e=1/0,d=-1/0,S=-1/0;for(let n=0,E=Ae.length;n<E;n+=U){const T=Ae[n]*oe-Ae[n+1]*he,v=Ae[n]*he+Ae[n+1]*oe;F=Math.min(F,T),e=Math.min(e,v),d=Math.max(d,T),S=Math.max(S,v)}return[F,e,d,S]}fitInternal(L,Y){Y=Y||{};let oe=Y.size;oe||(oe=this.getViewportSizeMinusPadding_());const he=Y.padding!==void 0?Y.padding:[0,0,0,0],Ae=Y.nearest!==void 0?Y.nearest:!1;let U;Y.minResolution!==void 0?U=Y.minResolution:Y.maxZoom!==void 0?U=this.getResolutionForZoom(Y.maxZoom):U=0;const F=this.rotatedExtentForGeometry(L);let e=this.getResolutionForExtentInternal(F,[oe[0]-he[1]-he[3],oe[1]-he[0]-he[2]]);e=isNaN(e)?U:Math.max(e,U),e=this.getConstrainedResolution(e,Ae?0:1);const d=this.getRotation(),S=Math.sin(d),n=Math.cos(d),E=ed(F);E[0]+=(he[1]-he[3])/2*e,E[1]+=(he[0]-he[2])/2*e;const T=E[0]*n-E[1]*S,v=E[1]*n+E[0]*S,g=this.getConstrainedCenter([T,v],e),r=Y.callback?Y.callback:B0;Y.duration!==void 0?this.animateInternal({resolution:e,center:g,duration:Y.duration,easing:Y.easing},r):(this.targetResolution_=e,this.targetCenter_=g,this.applyTargetState_(!1,!0),g0(r,!0))}centerOn(L,Y,oe){this.centerOnInternal(Qf(L,this.getProjection()),Y,oe)}centerOnInternal(L,Y,oe){this.setCenterInternal(my(L,Y,oe,this.getResolution(),this.getRotation()))}calculateCenterShift(L,Y,oe,he){let Ae;const U=this.padding_;if(U&&L){const F=this.getViewportSizeMinusPadding_(-oe),e=my(L,he,[F[0]/2+U[3],F[1]/2+U[0]],Y,oe);Ae=[L[0]-e[0],L[1]-e[1]]}return Ae}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(L){const Y=qy(this.targetCenter_,this.getProjection());this.setCenter([Y[0]+L[0],Y[1]+L[1]])}adjustCenterInternal(L){const Y=this.targetCenter_;this.setCenterInternal([Y[0]+L[0],Y[1]+L[1]])}adjustResolution(L,Y){Y=Y&&Qf(Y,this.getProjection()),this.adjustResolutionInternal(L,Y)}adjustResolutionInternal(L,Y){const oe=this.getAnimating()||this.getInteracting(),he=this.getViewportSize_(this.getRotation()),Ae=this.constraints_.resolution(this.targetResolution_*L,0,he,oe);Y&&(this.targetCenter_=this.calculateCenterZoom(Ae,Y)),this.targetResolution_*=L,this.applyTargetState_()}adjustZoom(L,Y){this.adjustResolution(Math.pow(this.zoomFactor_,-L),Y)}adjustRotation(L,Y){Y&&(Y=Qf(Y,this.getProjection())),this.adjustRotationInternal(L,Y)}adjustRotationInternal(L,Y){const oe=this.getAnimating()||this.getInteracting(),he=this.constraints_.rotation(this.targetRotation_+L,oe);Y&&(this.targetCenter_=this.calculateCenterRotate(he,Y)),this.targetRotation_+=L,this.applyTargetState_()}setCenter(L){this.setCenterInternal(L&&Qf(L,this.getProjection()))}setCenterInternal(L){this.targetCenter_=L,this.applyTargetState_()}setHint(L,Y){return this.hints_[L]+=Y,this.changed(),this.hints_[L]}setResolution(L){this.targetResolution_=L,this.applyTargetState_()}setRotation(L){this.targetRotation_=L,this.applyTargetState_()}setZoom(L){this.setResolution(this.getResolutionForZoom(L))}applyTargetState_(L,Y){const oe=this.getAnimating()||this.getInteracting()||Y,he=this.constraints_.rotation(this.targetRotation_,oe),Ae=this.getViewportSize_(he),U=this.constraints_.resolution(this.targetResolution_,0,Ae,oe),F=this.constraints_.center(this.targetCenter_,U,Ae,oe,this.calculateCenterShift(this.targetCenter_,U,he,Ae));this.get(Vu.ROTATION)!==he&&this.set(Vu.ROTATION,he),this.get(Vu.RESOLUTION)!==U&&(this.set(Vu.RESOLUTION,U),this.set("zoom",this.getZoom(),!0)),(!F||!this.get(Vu.CENTER)||!V0(this.get(Vu.CENTER),F))&&this.set(Vu.CENTER,F),this.getAnimating()&&!L&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(L,Y,oe){L=L!==void 0?L:200;const he=Y||0,Ae=this.constraints_.rotation(this.targetRotation_),U=this.getViewportSize_(Ae),F=this.constraints_.resolution(this.targetResolution_,he,U),e=this.constraints_.center(this.targetCenter_,F,U,!1,this.calculateCenterShift(this.targetCenter_,F,Ae,U));if(L===0&&!this.cancelAnchor_){this.targetResolution_=F,this.targetRotation_=Ae,this.targetCenter_=e,this.applyTargetState_();return}oe=oe||(L===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==F||this.getRotation()!==Ae||!this.getCenterInternal()||!V0(this.getCenterInternal(),e))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Ae,center:e,resolution:F,duration:L,easing:ad,anchor:oe}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ou.INTERACTING,1)}endInteraction(L,Y,oe){oe=oe&&Qf(oe,this.getProjection()),this.endInteractionInternal(L,Y,oe)}endInteractionInternal(L,Y,oe){this.getInteracting()&&(this.setHint(ou.INTERACTING,-1),this.resolveConstraints(L,Y,oe))}getConstrainedCenter(L,Y){const oe=this.getViewportSize_(this.getRotation());return this.constraints_.center(L,Y||this.getResolution(),oe)}getConstrainedZoom(L,Y){const oe=this.getResolutionForZoom(L);return this.getZoomForResolution(this.getConstrainedResolution(oe,Y))}getConstrainedResolution(L,Y){Y=Y||0;const oe=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(L,Y,oe)}}function g0(G,L){setTimeout(function(){G(L)},0)}function YC(G){if(G.extent!==void 0){const Y=G.smoothExtentConstraint!==void 0?G.smoothExtentConstraint:!0;return _b(G.extent,G.constrainOnlyCenter,Y)}const L=Fm(G.projection,"EPSG:3857");if(G.multiWorld!==!0&&L.isGlobal()){const Y=L.getExtent().slice();return Y[0]=-1/0,Y[2]=1/0,_b(Y,!1,!1)}return pC}function XC(G){let L,Y,oe,U=G.minZoom!==void 0?G.minZoom:yy,F=G.maxZoom!==void 0?G.maxZoom:28;const e=G.zoomFactor!==void 0?G.zoomFactor:2,d=G.multiWorld!==void 0?G.multiWorld:!1,S=G.smoothResolutionConstraint!==void 0?G.smoothResolutionConstraint:!0,n=G.showFullExtent!==void 0?G.showFullExtent:!1,E=Fm(G.projection,"EPSG:3857"),T=E.getExtent();let v=G.constrainOnlyCenter,g=G.extent;if(!d&&!g&&E.isGlobal()&&(v=!1,g=T),G.resolutions!==void 0){const r=G.resolutions;Y=r[U],oe=r[F]!==void 0?r[F]:r[r.length-1],G.constrainResolution?L=gC(r,S,!v&&g,n):L=Pb(Y,oe,S,!v&&g,n)}else{const t=(T?Math.max(ao(T),Dl(T)):360*Dm.degrees/E.getMetersPerUnit())/Im/Math.pow(2,yy),o=t/Math.pow(2,28-yy);Y=G.maxResolution,Y!==void 0?U=0:Y=t/Math.pow(e,U),oe=G.minResolution,oe===void 0&&(G.maxZoom!==void 0?G.maxResolution!==void 0?oe=Y/Math.pow(e,F):oe=t/Math.pow(e,F):oe=o),F=U+Math.floor(Math.log(Y/oe)/Math.log(e)),oe=Y/Math.pow(e,F-U),G.constrainResolution?L=yC(e,Y,oe,S,!v&&g,n):L=Pb(Y,oe,S,!v&&g,n)}return{constraint:L,maxResolution:Y,minResolution:oe,minZoom:U,zoomFactor:e}}function ZC(G){if(G.enableRotation!==void 0?G.enableRotation:!0){const Y=G.constrainRotation;return Y===void 0||Y===!0?xC():Y===!1?Rb:typeof Y=="number"?mC(Y):Rb}return Hm}function jC(G){return!(G.sourceCenter&&G.targetCenter&&!V0(G.sourceCenter,G.targetCenter)||G.sourceResolution!==G.targetResolution||G.sourceRotation!==G.targetRotation)}function my(G,L,Y,oe,he){const Ae=Math.cos(-he);let U=Math.sin(-he),F=G[0]*Ae-G[1]*U,e=G[1]*Ae+G[0]*U;F+=(L[0]/2-Y[0])*oe,e+=(Y[1]-L[1]/2)*oe,U=-U;const d=F*Ae-e*U,S=e*Ae+F*U;return[d,S]}class yg extends zw{constructor(L){const Y=Object.assign({},L);delete Y.source,super(Y),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,L.render&&(this.render=L.render),L.map&&this.setMap(L.map),this.addChangeListener(Ua.SOURCE,this.handleSourcePropertyChange_);const oe=L.source?L.source:null;this.setSource(oe)}getLayersArray(L){return L=L||[],L.push(this),L}getLayerStatesArray(L){return L=L||[],L.push(this.getLayerState()),L}getSource(){return this.get(Ua.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const L=this.getSource();return L?L.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Oo(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const L=this.getSource();L&&(this.sourceChangeKey_=Ha(L,da.CHANGE,this.handleSourceChange_,this),L.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(L){return this.renderer_?this.renderer_.getFeatures(L):Promise.resolve([])}getData(L){return!this.renderer_||!this.rendered?null:this.renderer_.getData(L)}isVisible(L){let Y;const oe=this.getMapInternal();!L&&oe&&(L=oe.getView()),L instanceof Gu?Y={viewState:L.getState(),extent:L.calculateExtent()}:Y=L,!Y.layerStatesArray&&oe&&(Y.layerStatesArray=oe.getLayerGroup().getLayerStatesArray());let he;Y.layerStatesArray?he=Y.layerStatesArray.find(U=>U.layer===this):he=this.getLayerState();const Ae=this.getExtent();return Ym(he,Y.viewState)&&(!Ae||Ep(Ae,Y.extent))}getAttributions(L){if(!this.isVisible(L))return[];let Y;const oe=this.getSource();if(oe&&(Y=oe.getAttributions()),!Y)return[];const he=L instanceof Gu?L.getViewStateAndExtent():L;let Ae=Y(he);return Array.isArray(Ae)||(Ae=[Ae]),Ae}render(L,Y){const oe=this.getRenderer();return oe.prepareFrame(L)?(this.rendered=!0,oe.renderFrame(L,Y)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(L,Y){}renderDeferred(L){const Y=this.getRenderer();Y&&Y.renderDeferred(L)}setMapInternal(L){L||this.unrender(),this.set(Ua.MAP,L)}getMapInternal(){return this.get(Ua.MAP)}setMap(L){this.mapPrecomposeKey_&&(Oo(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),L||this.changed(),this.mapRenderKey_&&(Oo(this.mapRenderKey_),this.mapRenderKey_=null),L&&(this.mapPrecomposeKey_=Ha(L,mf.PRECOMPOSE,function(Y){const he=Y.frameState.layerStatesArray,Ae=this.getLayerState(!1);Wa(!he.some(function(U){return U.layer===Ae.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),he.push(Ae)},this),this.mapRenderKey_=Ha(this,da.CHANGE,L.render,L),this.changed())}setSource(L){this.set(Ua.SOURCE,L)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Ym(G,L){if(!G.visible)return!1;const Y=L.resolution;if(Y<G.minResolution||Y>=G.maxResolution)return!1;const oe=L.zoom;return oe>G.minZoom&&oe<=G.maxZoom}function KC(G,L,Y,oe,he){t2(G,L,Y||0,oe||G.length-1,he||JC)}function t2(G,L,Y,oe,he){for(;oe>Y;){if(oe-Y>600){var Ae=oe-Y+1,U=L-Y+1,F=Math.log(Ae),e=.5*Math.exp(2*F/3),d=.5*Math.sqrt(F*e*(Ae-e)/Ae)*(U-Ae/2<0?-1:1),S=Math.max(Y,Math.floor(L-U*e/Ae+d)),n=Math.min(oe,Math.floor(L+(Ae-U)*e/Ae+d));t2(G,L,S,n,he)}var E=G[L],T=Y,v=oe;for(Id(G,Y,L),he(G[oe],E)>0&&Id(G,Y,oe);T<v;){for(Id(G,T,v),T++,v--;he(G[T],E)<0;)T++;for(;he(G[v],E)>0;)v--}he(G[Y],E)===0?Id(G,Y,v):(v++,Id(G,v,oe)),v<=L&&(Y=v+1),L<=v&&(oe=v-1)}}function Id(G,L,Y){var oe=G[L];G[L]=G[Y],G[Y]=oe}function JC(G,L){return G<L?-1:G>L?1:0}class QC{constructor(L=9){this._maxEntries=Math.max(4,L),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(L){let Y=this.data;const oe=[];if(!m0(L,Y))return oe;const he=this.toBBox,Ae=[];for(;Y;){for(let U=0;U<Y.children.length;U++){const F=Y.children[U],e=Y.leaf?he(F):F;m0(L,e)&&(Y.leaf?oe.push(F):by(L,e)?this._all(F,oe):Ae.push(F))}Y=Ae.pop()}return oe}collides(L){let Y=this.data;if(!m0(L,Y))return!1;const oe=[];for(;Y;){for(let he=0;he<Y.children.length;he++){const Ae=Y.children[he],U=Y.leaf?this.toBBox(Ae):Ae;if(m0(L,U)){if(Y.leaf||by(L,U))return!0;oe.push(Ae)}}Y=oe.pop()}return!1}load(L){if(!(L&&L.length))return this;if(L.length<this._minEntries){for(let oe=0;oe<L.length;oe++)this.insert(L[oe]);return this}let Y=this._build(L.slice(),0,L.length-1,0);if(!this.data.children.length)this.data=Y;else if(this.data.height===Y.height)this._splitRoot(this.data,Y);else{if(this.data.height<Y.height){const oe=this.data;this.data=Y,Y=oe}this._insert(Y,this.data.height-Y.height-1,!0)}return this}insert(L){return L&&this._insert(L,this.data.height-1),this}clear(){return this.data=Nv([]),this}remove(L,Y){if(!L)return this;let oe=this.data;const he=this.toBBox(L),Ae=[],U=[];let F,e,d;for(;oe||Ae.length;){if(oe||(oe=Ae.pop(),e=Ae[Ae.length-1],F=U.pop(),d=!0),oe.leaf){const S=$C(L,oe.children,Y);if(S!==-1)return oe.children.splice(S,1),Ae.push(oe),this._condense(Ae),this}!d&&!oe.leaf&&by(oe,he)?(Ae.push(oe),U.push(F),F=0,e=oe,oe=oe.children[0]):e?(F++,oe=e.children[F],d=!1):oe=null}return this}toBBox(L){return L}compareMinX(L,Y){return L.minX-Y.minX}compareMinY(L,Y){return L.minY-Y.minY}toJSON(){return this.data}fromJSON(L){return this.data=L,this}_all(L,Y){const oe=[];for(;L;)L.leaf?Y.push(...L.children):oe.push(...L.children),L=oe.pop();return Y}_build(L,Y,oe,he){const Ae=oe-Y+1;let U=this._maxEntries,F;if(Ae<=U)return F=Nv(L.slice(Y,oe+1)),kv(F,this.toBBox),F;he||(he=Math.ceil(Math.log(Ae)/Math.log(U)),U=Math.ceil(Ae/Math.pow(U,he-1))),F=Nv([]),F.leaf=!1,F.height=he;const e=Math.ceil(Ae/U),d=e*Math.ceil(Math.sqrt(U));Bb(L,Y,oe,d,this.compareMinX);for(let S=Y;S<=oe;S+=d){const n=Math.min(S+d-1,oe);Bb(L,S,n,e,this.compareMinY);for(let E=S;E<=n;E+=e){const T=Math.min(E+e-1,n);F.children.push(this._build(L,E,T,he-1))}}return kv(F,this.toBBox),F}_chooseSubtree(L,Y,oe,he){for(;he.push(Y),!(Y.leaf||he.length-1===oe);){let Ae=1/0,U=1/0,F;for(let e=0;e<Y.children.length;e++){const d=Y.children[e],S=xy(d),n=tL(L,d)-S;n<U?(U=n,Ae=S<Ae?S:Ae,F=d):n===U&&S<Ae&&(Ae=S,F=d)}Y=F||Y.children[0]}return Y}_insert(L,Y,oe){const he=oe?L:this.toBBox(L),Ae=[],U=this._chooseSubtree(he,this.data,Y,Ae);for(U.children.push(L),Nd(U,he);Y>=0&&Ae[Y].children.length>this._maxEntries;)this._split(Ae,Y),Y--;this._adjustParentBBoxes(he,Ae,Y)}_split(L,Y){const oe=L[Y],he=oe.children.length,Ae=this._minEntries;this._chooseSplitAxis(oe,Ae,he);const U=this._chooseSplitIndex(oe,Ae,he),F=Nv(oe.children.splice(U,oe.children.length-U));F.height=oe.height,F.leaf=oe.leaf,kv(oe,this.toBBox),kv(F,this.toBBox),Y?L[Y-1].children.push(F):this._splitRoot(oe,F)}_splitRoot(L,Y){this.data=Nv([L,Y]),this.data.height=L.height+1,this.data.leaf=!1,kv(this.data,this.toBBox)}_chooseSplitIndex(L,Y,oe){let he,Ae=1/0,U=1/0;for(let F=Y;F<=oe-Y;F++){const e=Bd(L,0,F,this.toBBox),d=Bd(L,F,oe,this.toBBox),S=rL(e,d),n=xy(e)+xy(d);S<Ae?(Ae=S,he=F,U=n<U?n:U):S===Ae&&n<U&&(U=n,he=F)}return he||oe-Y}_chooseSplitAxis(L,Y,oe){const he=L.leaf?this.compareMinX:qC,Ae=L.leaf?this.compareMinY:eL,U=this._allDistMargin(L,Y,oe,he),F=this._allDistMargin(L,Y,oe,Ae);U<F&&L.children.sort(he)}_allDistMargin(L,Y,oe,he){L.children.sort(he);const Ae=this.toBBox,U=Bd(L,0,Y,Ae),F=Bd(L,oe-Y,oe,Ae);let e=y0(U)+y0(F);for(let d=Y;d<oe-Y;d++){const S=L.children[d];Nd(U,L.leaf?Ae(S):S),e+=y0(U)}for(let d=oe-Y-1;d>=Y;d--){const S=L.children[d];Nd(F,L.leaf?Ae(S):S),e+=y0(F)}return e}_adjustParentBBoxes(L,Y,oe){for(let he=oe;he>=0;he--)Nd(Y[he],L)}_condense(L){for(let Y=L.length-1,oe;Y>=0;Y--)L[Y].children.length===0?Y>0?(oe=L[Y-1].children,oe.splice(oe.indexOf(L[Y]),1)):this.clear():kv(L[Y],this.toBBox)}}function $C(G,L,Y){if(!Y)return L.indexOf(G);for(let oe=0;oe<L.length;oe++)if(Y(G,L[oe]))return oe;return-1}function kv(G,L){Bd(G,0,G.children.length,L,G)}function Bd(G,L,Y,oe,he){he||(he=Nv(null)),he.minX=1/0,he.minY=1/0,he.maxX=-1/0,he.maxY=-1/0;for(let Ae=L;Ae<Y;Ae++){const U=G.children[Ae];Nd(he,G.leaf?oe(U):U)}return he}function Nd(G,L){return G.minX=Math.min(G.minX,L.minX),G.minY=Math.min(G.minY,L.minY),G.maxX=Math.max(G.maxX,L.maxX),G.maxY=Math.max(G.maxY,L.maxY),G}function qC(G,L){return G.minX-L.minX}function eL(G,L){return G.minY-L.minY}function xy(G){return(G.maxX-G.minX)*(G.maxY-G.minY)}function y0(G){return G.maxX-G.minX+(G.maxY-G.minY)}function tL(G,L){return(Math.max(L.maxX,G.maxX)-Math.min(L.minX,G.minX))*(Math.max(L.maxY,G.maxY)-Math.min(L.minY,G.minY))}function rL(G,L){const Y=Math.max(G.minX,L.minX),oe=Math.max(G.minY,L.minY),he=Math.min(G.maxX,L.maxX),Ae=Math.min(G.maxY,L.maxY);return Math.max(0,he-Y)*Math.max(0,Ae-oe)}function by(G,L){return G.minX<=L.minX&&G.minY<=L.minY&&L.maxX<=G.maxX&&L.maxY<=G.maxY}function m0(G,L){return L.minX<=G.maxX&&L.minY<=G.maxY&&L.maxX>=G.minX&&L.maxY>=G.minY}function Nv(G){return{children:G,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bb(G,L,Y,oe,he){const Ae=[L,Y];for(;Ae.length;){if(Y=Ae.pop(),L=Ae.pop(),Y-L<=oe)continue;const U=L+Math.ceil((Y-L)/oe/2)*oe;KC(G,U,L,Y,he),Ae.push(L,U,U,Y)}}const Aa={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Nb(G){return G[0]>0&&G[1]>0}function nL(G,L,Y){return Y===void 0&&(Y=[0,0]),Y[0]=G[0]*L+.5|0,Y[1]=G[1]*L+.5|0,Y}function kl(G,L){return Array.isArray(G)?G:(L===void 0?L=[G,G]:(L[0]=G,L[1]=G),L)}class mg{constructor(L){this.opacity_=L.opacity,this.rotateWithView_=L.rotateWithView,this.rotation_=L.rotation,this.scale_=L.scale,this.scaleArray_=kl(L.scale),this.displacement_=L.displacement,this.declutterMode_=L.declutterMode}clone(){const L=this.getScale();return new mg({opacity:this.getOpacity(),scale:Array.isArray(L)?L.slice():L,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ia()}getImage(L){return Ia()}getHitDetectionImage(){return Ia()}getPixelRatio(L){return 1}getImageState(){return Ia()}getImageSize(){return Ia()}getOrigin(){return Ia()}getSize(){return Ia()}setDisplacement(L){this.displacement_=L}setOpacity(L){this.opacity_=L}setRotateWithView(L){this.rotateWithView_=L}setRotation(L){this.rotation_=L}setScale(L){this.scale_=L,this.scaleArray_=kl(L)}listenImageChange(L){Ia()}load(){Ia()}unlistenImageChange(L){Ia()}ready(){return Promise.resolve()}}const fp={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var As={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};As.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};As.max=As.whitepoint[2].D65;As.rgb=function(G,L){L=L||As.whitepoint[2].E;var Y=G[0]/L[0],oe=G[1]/L[1],he=G[2]/L[2],Ae,U,F;return Ae=Y*3.240969941904521+oe*-1.537383177570093+he*-.498610760293,U=Y*-.96924363628087+oe*1.87596750150772+he*.041555057407175,F=Y*.055630079696993+oe*-.20397695888897+he*1.056971514242878,Ae=Ae>.0031308?1.055*Math.pow(Ae,1/2.4)-.055:Ae=Ae*12.92,U=U>.0031308?1.055*Math.pow(U,1/2.4)-.055:U=U*12.92,F=F>.0031308?1.055*Math.pow(F,1/2.4)-.055:F=F*12.92,Ae=Math.min(Math.max(0,Ae),1),U=Math.min(Math.max(0,U),1),F=Math.min(Math.max(0,F),1),[Ae*255,U*255,F*255]};fp.xyz=function(G,L){var Y=G[0]/255,oe=G[1]/255,he=G[2]/255;Y=Y>.04045?Math.pow((Y+.055)/1.055,2.4):Y/12.92,oe=oe>.04045?Math.pow((oe+.055)/1.055,2.4):oe/12.92,he=he>.04045?Math.pow((he+.055)/1.055,2.4):he/12.92;var Ae=Y*.41239079926595+oe*.35758433938387+he*.18048078840183,U=Y*.21263900587151+oe*.71516867876775+he*.072192315360733,F=Y*.019330818715591+oe*.11919477979462+he*.95053215224966;return L=L||As.whitepoint[2].E,[Ae*L[0],U*L[1],F*L[2]]};const Xm={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(G,L,Y){var oe,he,Ae,U,F,e,d,S,n,E,T,v,g;if(Ae=G[0],U=G[1],F=G[2],Ae===0)return[0,0,0];var r=.0011070564598794539;return L=L||"D65",Y=Y||2,n=As.whitepoint[Y][L][0],E=As.whitepoint[Y][L][1],T=As.whitepoint[Y][L][2],v=4*n/(n+15*E+3*T),g=9*E/(n+15*E+3*T),oe=U/(13*Ae)+v||0,he=F/(13*Ae)+g||0,d=Ae>8?E*Math.pow((Ae+16)/116,3):E*Ae*r,e=d*9*oe/(4*he)||0,S=d*(12-3*oe-20*he)/(4*he)||0,[e,d,S]}};As.luv=function(G,L,Y){var oe,he,Ae,U,F,e,d,S,n,E,T,v,g,r=.008856451679035631,t=903.2962962962961;L=L||"D65",Y=Y||2,n=As.whitepoint[Y][L][0],E=As.whitepoint[Y][L][1],T=As.whitepoint[Y][L][2],v=4*n/(n+15*E+3*T),g=9*E/(n+15*E+3*T),e=G[0],d=G[1],S=G[2],oe=4*e/(e+15*d+3*S)||0,he=9*d/(e+15*d+3*S)||0;var o=d/E;return Ae=o<=r?t*o:116*Math.pow(o,1/3)-16,U=13*Ae*(oe-v),F=13*Ae*(he-g),[Ae,U,F]};var r2={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(G){var L=G[0],Y=G[1],oe=G[2],he,Ae,U;return U=oe/360*2*Math.PI,he=Y*Math.cos(U),Ae=Y*Math.sin(U),[L,he,Ae]},xyz:function(G){return Xm.xyz(r2.luv(G))}};Xm.lchuv=function(G){var L=G[0],Y=G[1],oe=G[2],he=Math.sqrt(Y*Y+oe*oe),Ae=Math.atan2(oe,Y),U=Ae*360/2/Math.PI;return U<0&&(U+=360),[L,he,U]};As.lchuv=function(G){return Xm.lchuv(As.luv(G))};const Ub={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Vb={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function iL(G){var S,n;var L,Y=[],oe=1,he;if(typeof G=="number")return{space:"rgb",values:[G>>>16,(G&65280)>>>8,G&255],alpha:1};if(typeof G=="number")return{space:"rgb",values:[G>>>16,(G&65280)>>>8,G&255],alpha:1};if(G=String(G).toLowerCase(),Ub[G])Y=Ub[G].slice(),he="rgb";else if(G==="transparent")oe=0,he="rgb",Y=[0,0,0];else if(G[0]==="#"){var Ae=G.slice(1),U=Ae.length,F=U<=4;oe=1,F?(Y=[parseInt(Ae[0]+Ae[0],16),parseInt(Ae[1]+Ae[1],16),parseInt(Ae[2]+Ae[2],16)],U===4&&(oe=parseInt(Ae[3]+Ae[3],16)/255)):(Y=[parseInt(Ae[0]+Ae[1],16),parseInt(Ae[2]+Ae[3],16),parseInt(Ae[4]+Ae[5],16)],U===8&&(oe=parseInt(Ae[6]+Ae[7],16)/255)),Y[0]||(Y[0]=0),Y[1]||(Y[1]=0),Y[2]||(Y[2]=0),he="rgb"}else if(L=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(G)){var e=L[1];he=e.replace(/a$/,"");var d=he==="cmyk"?4:he==="gray"?1:3;Y=L[2].trim().split(/\s*[,\/]\s*|\s+/),he==="color"&&(he=Y.shift()),Y=Y.map(function(E,T){if(E[E.length-1]==="%")return E=parseFloat(E)/100,T===3?E:he==="rgb"?E*255:he[0]==="h"||he[0]==="l"&&!T?E*100:he==="lab"?E*125:he==="lch"?T<2?E*150:E*360:he[0]==="o"&&!T?E:he==="oklab"?E*.4:he==="oklch"?T<2?E*.4:E*360:E;if(he[T]==="h"||T===2&&he[he.length-1]==="h"){if(Vb[E]!==void 0)return Vb[E];if(E.endsWith("deg"))return parseFloat(E);if(E.endsWith("turn"))return parseFloat(E)*360;if(E.endsWith("grad"))return parseFloat(E)*360/400;if(E.endsWith("rad"))return parseFloat(E)*180/Math.PI}return E==="none"?0:parseFloat(E)}),oe=Y.length>d?Y.pop():1}else/[0-9](?:\s|\/|,)/.test(G)&&(Y=G.match(/([0-9]+)/g).map(function(E){return parseFloat(E)}),he=((n=(S=G.match(/([a-z])/ig))==null?void 0:S.join(""))==null?void 0:n.toLowerCase())||"rgb");return{space:he,values:Y,alpha:oe}}const wy={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(G){var L=G[0]/360,Y=G[1]/100,oe=G[2]/100,he,Ae,U,F,e,d=0;if(Y===0)return e=oe*255,[e,e,e];for(Ae=oe<.5?oe*(1+Y):oe+Y-oe*Y,he=2*oe-Ae,F=[0,0,0];d<3;)U=L+1/3*-(d-1),U<0?U++:U>1&&U--,e=6*U<1?he+(Ae-he)*6*U:2*U<1?Ae:3*U<2?he+(Ae-he)*(2/3-U)*6:he,F[d++]=e*255;return F}};fp.hsl=function(G){var L=G[0]/255,Y=G[1]/255,oe=G[2]/255,he=Math.min(L,Y,oe),Ae=Math.max(L,Y,oe),U=Ae-he,F,e,d;return Ae===he?F=0:L===Ae?F=(Y-oe)/U:Y===Ae?F=2+(oe-L)/U:oe===Ae&&(F=4+(L-Y)/U),F=Math.min(F*60,360),F<0&&(F+=360),d=(he+Ae)/2,Ae===he?e=0:d<=.5?e=U/(Ae+he):e=U/(2-Ae-he),[F,e*100,d*100]};function aL(G){Array.isArray(G)&&G.raw&&(G=String.raw(...arguments)),G instanceof Number&&(G=+G);var L,Y=iL(G);if(!Y.space)return[];const oe=Y.space[0]==="h"?wy.min:fp.min,he=Y.space[0]==="h"?wy.max:fp.max;return L=Array(3),L[0]=Math.min(Math.max(Y.values[0],oe[0]),he[0]),L[1]=Math.min(Math.max(Y.values[1],oe[1]),he[1]),L[2]=Math.min(Math.max(Y.values[2],oe[2]),he[2]),Y.space[0]==="h"&&(L=wy.rgb(L)),L.push(Math.min(Math.max(Y.alpha,0),1)),L}function oL(G){return typeof G=="string"?G:jm(G)}const sL=1024,Dd={};let Ty=0;function lL(G){if(G.length===4)return G;const L=G.slice();return L[3]=1,L}function Hb(G){const L=As.lchuv(fp.xyz(G));return L[3]=G[3],L}function uL(G){const L=As.rgb(r2.xyz(G));return L[3]=G[3],L}function Zm(G){if(Dd.hasOwnProperty(G))return Dd[G];if(Ty>=sL){let Y=0;for(const oe in Dd)Y++&3||(delete Dd[oe],--Ty)}const L=aL(G);if(L.length!==4)throw new Error('Failed to parse "'+G+'" as color');for(const Y of L)if(isNaN(Y))throw new Error('Failed to parse "'+G+'" as color');return n2(L),Dd[G]=L,++Ty,L}function cp(G){return Array.isArray(G)?G:Zm(G)}function n2(G){return G[0]=is(G[0]+.5|0,0,255),G[1]=is(G[1]+.5|0,0,255),G[2]=is(G[2]+.5|0,0,255),G[3]=is(G[3],0,1),G}function jm(G){let L=G[0];L!=(L|0)&&(L=L+.5|0);let Y=G[1];Y!=(Y|0)&&(Y=Y+.5|0);let oe=G[2];oe!=(oe|0)&&(oe=oe+.5|0);const he=G[3]===void 0?1:Math.round(G[3]*1e3)/1e3;return"rgba("+L+","+Y+","+oe+","+he+")"}function fL(G){try{return Zm(G),!0}catch{return!1}}const ch=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",cL=ch.includes("firefox"),hL=ch.includes("safari")&&!ch.includes("chrom");hL&&(ch.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ch));const vL=ch.includes("webkit")&&!ch.includes("edge"),i2=ch.includes("macintosh"),a2=typeof devicePixelRatio<"u"?devicePixelRatio:1,dL=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,o2=typeof Image<"u"&&Image.prototype.decode,s2=function(){let G=!1;try{const L=Object.defineProperty({},"passive",{get:function(){G=!0}});window.addEventListener("_",null,L),window.removeEventListener("_",null,L)}catch{}return G}();function du(G,L,Y,oe){let he;return Y&&Y.length?he=Y.shift():dL?he=new OffscreenCanvas(G||300,L||300):he=document.createElement("canvas"),G&&(he.width=G),L&&(he.height=L),he.getContext("2d",oe)}let Ay;function H0(){return Ay||(Ay=du(1,1)),Ay}function Km(G){const L=G.canvas;L.width=1,L.height=1,G.clearRect(0,0,1,1)}function Gb(G,L){const Y=L.parentNode;Y&&Y.replaceChild(G,L)}function em(G){return G&&G.parentNode?G.parentNode.removeChild(G):null}function pL(G){for(;G.lastChild;)G.removeChild(G.lastChild)}function gL(G,L){const Y=G.childNodes;for(let oe=0;;++oe){const he=Y[oe],Ae=L[oe];if(!he&&!Ae)break;if(he!==Ae){if(!he){G.appendChild(Ae);continue}if(!Ae){G.removeChild(he),--oe;continue}G.insertBefore(Ae,he)}}}function yL(G,L,Y){const oe=G;let he=!0,Ae=!1,U=!1;const F=[N0(oe,da.LOAD,function(){U=!0,Ae||L()})];return oe.src&&o2?(Ae=!0,oe.decode().then(function(){he&&L()}).catch(function(e){he&&(U?L():Y())})):F.push(N0(oe,da.ERROR,Y)),function(){he=!1,F.forEach(Oo)}}function mL(G,L){return new Promise((Y,oe)=>{function he(){U(),Y(G)}function Ae(){U(),oe(new Error("Image load error"))}function U(){G.removeEventListener("load",he),G.removeEventListener("error",Ae)}G.addEventListener("load",he),G.addEventListener("error",Ae)})}function xL(G,L){return L&&(G.src=L),G.src&&o2?new Promise((Y,oe)=>G.decode().then(()=>Y(G)).catch(he=>G.complete&&G.width?Y(G):oe(he))):mL(G)}class bL{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let L=0;for(const Y in this.cache_){const oe=this.cache_[Y];!(L++&3)&&!oe.hasListener()&&(delete this.cache_[Y],delete this.patternCache_[Y],--this.cacheSize_)}}}get(L,Y,oe){const he=My(L,Y,oe);return he in this.cache_?this.cache_[he]:null}getPattern(L,Y,oe){const he=My(L,Y,oe);return he in this.patternCache_?this.patternCache_[he]:null}set(L,Y,oe,he,Ae){const U=My(L,Y,oe),F=U in this.cache_;this.cache_[U]=he,Ae&&(he.getImageState()===Aa.IDLE&&he.load(),he.getImageState()===Aa.LOADING?he.ready().then(()=>{this.patternCache_[U]=H0().createPattern(he.getImage(1),"repeat")}):this.patternCache_[U]=H0().createPattern(he.getImage(1),"repeat")),F||++this.cacheSize_}setSize(L){this.maxCacheSize_=L,this.expire()}}function My(G,L,Y){const oe=Y?cp(Y):"null";return L+":"+G+":"+oe}const xf=new bL;let kd=null;class wL extends vg{constructor(L,Y,oe,he,Ae){super(),this.hitDetectionImage_=null,this.image_=L,this.crossOrigin_=oe,this.canvas_={},this.color_=Ae,this.imageState_=he===void 0?Aa.IDLE:he,this.size_=L&&L.width&&L.height?[L.width,L.height]:null,this.src_=Y,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Aa.LOADED){kd||(kd=du(1,1,void 0,{willReadFrequently:!0})),kd.drawImage(this.image_,0,0);try{kd.getImageData(0,0,1,1),this.tainted_=!1}catch{kd=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(da.CHANGE)}handleImageError_(){this.imageState_=Aa.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Aa.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(L){return this.image_||this.initializeImage_(),this.replaceColor_(L),this.canvas_[L]?this.canvas_[L]:this.image_}getPixelRatio(L){return this.replaceColor_(L),this.canvas_[L]?L:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const L=this.size_[0],Y=this.size_[1],oe=du(L,Y);oe.fillRect(0,0,L,Y),this.hitDetectionImage_=oe.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Aa.IDLE){this.image_||this.initializeImage_(),this.imageState_=Aa.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&xL(this.image_,this.src_).then(L=>{this.image_=L,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(L){if(!this.color_||this.canvas_[L]||this.imageState_!==Aa.LOADED)return;const Y=this.image_,oe=document.createElement("canvas");oe.width=Math.ceil(Y.width*L),oe.height=Math.ceil(Y.height*L);const he=oe.getContext("2d");he.scale(L,L),he.drawImage(Y,0,0),he.globalCompositeOperation="multiply",he.fillStyle=oL(this.color_),he.fillRect(0,0,oe.width/L,oe.height/L),he.globalCompositeOperation="destination-in",he.drawImage(Y,0,0),this.canvas_[L]=oe}ready(){return this.ready_||(this.ready_=new Promise(L=>{this.imageState_===Aa.LOADED||this.imageState_===Aa.ERROR?L():this.addEventListener(da.CHANGE,function Y(){(this.imageState_===Aa.LOADED||this.imageState_===Aa.ERROR)&&(this.removeEventListener(da.CHANGE,Y),L())})})),this.ready_}}function Jm(G,L,Y,oe,he,Ae){let U=L===void 0?void 0:xf.get(L,Y,he);return U||(U=new wL(G,G&&"src"in G?G.src||void 0:L,Y,oe,he),xf.set(L,Y,he,U,Ae)),Ae&&U&&!xf.getPattern(L,Y,he)&&xf.set(L,Y,he,U,Ae),U}function Wb(G){return G?Array.isArray(G)?jm(G):typeof G=="object"&&"src"in G?TL(G):G:null}function TL(G){if(!G.offset||!G.size)return xf.getPattern(G.src,"anonymous",G.color);const L=G.src+":"+G.offset,Y=xf.getPattern(L,void 0,G.color);if(Y)return Y;const oe=xf.get(G.src,"anonymous",null);if(oe.getImageState()!==Aa.LOADED)return null;const he=du(G.size[0],G.size[1]);return he.drawImage(oe.getImage(1),G.offset[0],G.offset[1],G.size[0],G.size[1],0,0,G.size[0],G.size[1]),Jm(he.canvas,L,void 0,Aa.LOADED,G.color,!0),xf.getPattern(L,void 0,G.color)}const x0="ol-hidden",xg="ol-unselectable",Qm="ol-control",Yb="ol-collapsed",Xb="#000",Zb="round",jb="round",AL=10,ML="#000",EL=1,SL=new oc;class bg extends mg{constructor(L){super({opacity:1,rotateWithView:L.rotateWithView!==void 0?L.rotateWithView:!1,rotation:L.rotation!==void 0?L.rotation:0,scale:L.scale!==void 0?L.scale:1,displacement:L.displacement!==void 0?L.displacement:[0,0],declutterMode:L.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=L.fill!==void 0?L.fill:null,this.origin_=[0,0],this.points_=L.points,this.radius_=L.radius,this.radius2_=L.radius2,this.angle_=L.angle!==void 0?L.angle:0,this.stroke_=L.stroke!==void 0?L.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Aa.LOADING:Aa.LOADED,this.imageState_===Aa.LOADING&&this.ready().then(()=>this.imageState_=Aa.LOADED),this.render()}clone(){const L=this.getScale(),Y=new bg({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(L)?L.slice():L,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Y.setOpacity(this.getOpacity()),Y}getAnchor(){const L=this.size_,Y=this.getDisplacement(),oe=this.getScaleArray();return[L[0]/2-Y[0]/oe[0],L[1]/2+Y[1]/oe[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(L){this.fill_=L,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(L){let Y=this.canvases_[L];if(!Y){const oe=this.renderOptions_,he=du(oe.size*L,oe.size*L);this.draw_(oe,he,L),Y=he.canvas,this.canvases_[L]=Y}return Y}getPixelRatio(L){return L}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(L){this.stroke_=L,this.render()}listenImageChange(L){}load(){}unlistenImageChange(L){}calculateLineJoinSize_(L,Y,oe){if(Y===0||this.points_===1/0||L!=="bevel"&&L!=="miter")return Y;let he=this.radius_,Ae=this.radius2_===void 0?he:this.radius2_;if(he<Ae){const l=he;he=Ae,Ae=l}const U=this.radius2_===void 0?this.points_:this.points_*2,F=2*Math.PI/U,e=Ae*Math.sin(F),d=Math.sqrt(Ae*Ae-e*e),S=he-d,n=Math.sqrt(e*e+S*S),E=n/e;if(L==="miter"&&E<=oe)return E*Y;const T=Y/2/E,v=Y/2*(S/n),r=Math.sqrt((he+T)*(he+T)+v*v)-he;if(this.radius2_===void 0||L==="bevel")return r*2;const t=he*Math.sin(F),o=Math.sqrt(he*he-t*t),i=Ae-o,u=Math.sqrt(t*t+i*i)/t;if(u<=oe){const l=u*Y/2-Ae-he;return 2*Math.max(r,l)}return r*2}createRenderOptions(){let L=Zb,Y=jb,oe=0,he=null,Ae=0,U,F=0;this.stroke_&&(U=Wb(this.stroke_.getColor()??ML),F=this.stroke_.getWidth()??EL,he=this.stroke_.getLineDash(),Ae=this.stroke_.getLineDashOffset()??0,Y=this.stroke_.getLineJoin()??jb,L=this.stroke_.getLineCap()??Zb,oe=this.stroke_.getMiterLimit()??AL);const e=this.calculateLineJoinSize_(Y,F,oe),d=Math.max(this.radius_,this.radius2_||0),S=Math.ceil(2*d+e);return{strokeStyle:U,strokeWidth:F,size:S,lineCap:L,lineDash:he,lineDashOffset:Ae,lineJoin:Y,miterLimit:oe}}render(){this.renderOptions_=this.createRenderOptions();const L=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[L,L]}draw_(L,Y,oe){if(Y.scale(oe,oe),Y.translate(L.size/2,L.size/2),this.createPath_(Y),this.fill_){let he=this.fill_.getColor();he===null&&(he=Xb),Y.fillStyle=Wb(he),Y.fill()}L.strokeStyle&&(Y.strokeStyle=L.strokeStyle,Y.lineWidth=L.strokeWidth,L.lineDash&&(Y.setLineDash(L.lineDash),Y.lineDashOffset=L.lineDashOffset),Y.lineCap=L.lineCap,Y.lineJoin=L.lineJoin,Y.miterLimit=L.miterLimit,Y.stroke())}createHitDetectionCanvas_(L){let Y;if(this.fill_){let oe=this.fill_.getColor(),he=0;typeof oe=="string"&&(oe=cp(oe)),oe===null?he=1:Array.isArray(oe)&&(he=oe.length===4?oe[3]:1),he===0&&(Y=du(L.size,L.size),this.drawHitDetectionCanvas_(L,Y))}return Y?Y.canvas:this.getImage(1)}createPath_(L){let Y=this.points_;const oe=this.radius_;if(Y===1/0)L.arc(0,0,oe,0,2*Math.PI);else{const he=this.radius2_===void 0?oe:this.radius2_;this.radius2_!==void 0&&(Y*=2);const Ae=this.angle_-Math.PI/2,U=2*Math.PI/Y;for(let F=0;F<Y;F++){const e=Ae+F*U,d=F%2===0?oe:he;L.lineTo(d*Math.cos(e),d*Math.sin(e))}L.closePath()}}drawHitDetectionCanvas_(L,Y){Y.translate(L.size/2,L.size/2),this.createPath_(Y),Y.fillStyle=Xb,Y.fill(),L.strokeStyle&&(Y.strokeStyle=L.strokeStyle,Y.lineWidth=L.strokeWidth,L.lineDash&&(Y.setLineDash(L.lineDash),Y.lineDashOffset=L.lineDashOffset),Y.lineJoin=L.lineJoin,Y.miterLimit=L.miterLimit,Y.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class wg extends bg{constructor(L){L=L||{radius:5},super({points:1/0,fill:L.fill,radius:L.radius,stroke:L.stroke,scale:L.scale!==void 0?L.scale:1,rotation:L.rotation!==void 0?L.rotation:0,rotateWithView:L.rotateWithView!==void 0?L.rotateWithView:!1,displacement:L.displacement!==void 0?L.displacement:[0,0],declutterMode:L.declutterMode})}clone(){const L=this.getScale(),Y=new wg({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(L)?L.slice():L,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Y.setOpacity(this.getOpacity()),Y}setRadius(L){this.radius_=L,this.render()}}class Cp{constructor(L){L=L||{},this.patternImage_=null,this.color_=null,L.color!==void 0&&this.setColor(L.color)}clone(){const L=this.getColor();return new Cp({color:Array.isArray(L)?L.slice():L||void 0})}getColor(){return this.color_}setColor(L){if(L!==null&&typeof L=="object"&&"src"in L){const Y=Jm(null,L.src,"anonymous",void 0,L.offset?null:L.color?L.color:null,!(L.offset&&L.size));Y.ready().then(()=>{this.patternImage_=null}),Y.getImageState()===Aa.IDLE&&Y.load(),Y.getImageState()===Aa.LOADING&&(this.patternImage_=Y)}this.color_=L}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Tg{constructor(L){L=L||{},this.color_=L.color!==void 0?L.color:null,this.lineCap_=L.lineCap,this.lineDash_=L.lineDash!==void 0?L.lineDash:null,this.lineDashOffset_=L.lineDashOffset,this.lineJoin_=L.lineJoin,this.miterLimit_=L.miterLimit,this.width_=L.width}clone(){const L=this.getColor();return new Tg({color:Array.isArray(L)?L.slice():L||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(L){this.color_=L}setLineCap(L){this.lineCap_=L}setLineDash(L){this.lineDash_=L}setLineDashOffset(L){this.lineDashOffset_=L}setLineJoin(L){this.lineJoin_=L}setMiterLimit(L){this.miterLimit_=L}setWidth(L){this.width_=L}}class Ag{constructor(L){L=L||{},this.geometry_=null,this.geometryFunction_=Kb,L.geometry!==void 0&&this.setGeometry(L.geometry),this.fill_=L.fill!==void 0?L.fill:null,this.image_=L.image!==void 0?L.image:null,this.renderer_=L.renderer!==void 0?L.renderer:null,this.hitDetectionRenderer_=L.hitDetectionRenderer!==void 0?L.hitDetectionRenderer:null,this.stroke_=L.stroke!==void 0?L.stroke:null,this.text_=L.text!==void 0?L.text:null,this.zIndex_=L.zIndex}clone(){let L=this.getGeometry();return L&&typeof L=="object"&&(L=L.clone()),new Ag({geometry:L??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(L){this.renderer_=L}setHitDetectionRenderer(L){this.hitDetectionRenderer_=L}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(L){this.fill_=L}getImage(){return this.image_}setImage(L){this.image_=L}getStroke(){return this.stroke_}setStroke(L){this.stroke_=L}getText(){return this.text_}setText(L){this.text_=L}getZIndex(){return this.zIndex_}setGeometry(L){typeof L=="function"?this.geometryFunction_=L:typeof L=="string"?this.geometryFunction_=function(Y){return Y.get(L)}:L?L!==void 0&&(this.geometryFunction_=function(){return L}):this.geometryFunction_=Kb,this.geometry_=L}setZIndex(L){this.zIndex_=L}}function CL(G){let L;if(typeof G=="function")L=G;else{let Y;Array.isArray(G)?Y=G:(Wa(typeof G.getZIndex=="function","Expected an `Style` or an array of `Style`"),Y=[G]),L=function(){return Y}}return L}let Ey=null;function l2(G,L){if(!Ey){const Y=new Cp({color:"rgba(255,255,255,0.4)"}),oe=new Tg({color:"#3399CC",width:1.25});Ey=[new Ag({image:new wg({fill:Y,stroke:oe,radius:5}),fill:Y,stroke:oe})]}return Ey}function Kb(G){return G.getGeometry()}const _0=Ag;function Jb(G,L,Y,oe){return Y!==void 0&&oe!==void 0?[Y/G,oe/L]:Y!==void 0?Y/G:oe!==void 0?oe/L:1}class $m extends mg{constructor(L){L=L||{};const Y=L.opacity!==void 0?L.opacity:1,oe=L.rotation!==void 0?L.rotation:0,he=L.scale!==void 0?L.scale:1,Ae=L.rotateWithView!==void 0?L.rotateWithView:!1;super({opacity:Y,rotation:oe,scale:he,displacement:L.displacement!==void 0?L.displacement:[0,0],rotateWithView:Ae,declutterMode:L.declutterMode}),this.anchor_=L.anchor!==void 0?L.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=L.anchorOrigin!==void 0?L.anchorOrigin:"top-left",this.anchorXUnits_=L.anchorXUnits!==void 0?L.anchorXUnits:"fraction",this.anchorYUnits_=L.anchorYUnits!==void 0?L.anchorYUnits:"fraction",this.crossOrigin_=L.crossOrigin!==void 0?L.crossOrigin:null;const U=L.img!==void 0?L.img:null;let F=L.src;Wa(!(F!==void 0&&U),"`image` and `src` cannot be provided at the same time"),(F===void 0||F.length===0)&&U&&(F=U.src||Ks(U)),Wa(F!==void 0&&F.length>0,"A defined and non-empty `src` or `image` must be provided"),Wa(!((L.width!==void 0||L.height!==void 0)&&L.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let e;if(L.src!==void 0?e=Aa.IDLE:U!==void 0&&("complete"in U?U.complete?e=U.src?Aa.LOADED:Aa.IDLE:e=Aa.LOADING:e=Aa.LOADED),this.color_=L.color!==void 0?cp(L.color):null,this.iconImage_=Jm(U,F,this.crossOrigin_,e,this.color_),this.offset_=L.offset!==void 0?L.offset:[0,0],this.offsetOrigin_=L.offsetOrigin!==void 0?L.offsetOrigin:"top-left",this.origin_=null,this.size_=L.size!==void 0?L.size:null,L.width!==void 0||L.height!==void 0){let d,S;if(L.size)[d,S]=L.size;else{const n=this.getImage(1);if(n.width&&n.height)d=n.width,S=n.height;else if(n instanceof HTMLImageElement){this.initialOptions_=L;const E=()=>{if(this.unlistenImageChange(E),!this.initialOptions_)return;const T=this.iconImage_.getSize();this.setScale(Jb(T[0],T[1],L.width,L.height))};this.listenImageChange(E);return}}d!==void 0&&this.setScale(Jb(d,S,L.width,L.height))}}clone(){let L,Y,oe;return this.initialOptions_?(Y=this.initialOptions_.width,oe=this.initialOptions_.height):(L=this.getScale(),L=Array.isArray(L)?L.slice():L),new $m({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:L,width:Y,height:oe,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let L=this.normalizedAnchor_;if(!L){L=this.anchor_;const he=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!he)return null;L=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(L[0]*=he[0]),this.anchorYUnits_=="fraction"&&(L[1]*=he[1])}if(this.anchorOrigin_!="top-left"){if(!he)return null;L===this.anchor_&&(L=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(L[0]=-L[0]+he[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(L[1]=-L[1]+he[1])}this.normalizedAnchor_=L}const Y=this.getDisplacement(),oe=this.getScaleArray();return[L[0]-Y[0]/oe[0],L[1]+Y[1]/oe[1]]}setAnchor(L){this.anchor_=L,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(L){return this.iconImage_.getImage(L)}getPixelRatio(L){return this.iconImage_.getPixelRatio(L)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let L=this.offset_;if(this.offsetOrigin_!="top-left"){const Y=this.getSize(),oe=this.iconImage_.getSize();if(!Y||!oe)return null;L=L.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(L[0]=oe[0]-Y[0]-L[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(L[1]=oe[1]-Y[1]-L[1])}return this.origin_=L,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const L=this.getScaleArray();if(this.size_)return this.size_[0]*L[0];if(this.iconImage_.getImageState()==Aa.LOADED)return this.iconImage_.getSize()[0]*L[0]}getHeight(){const L=this.getScaleArray();if(this.size_)return this.size_[1]*L[1];if(this.iconImage_.getImageState()==Aa.LOADED)return this.iconImage_.getSize()[1]*L[1]}setScale(L){delete this.initialOptions_,super.setScale(L)}listenImageChange(L){this.iconImage_.addEventListener(da.CHANGE,L)}load(){this.iconImage_.load()}unlistenImageChange(L){this.iconImage_.removeEventListener(da.CHANGE,L)}ready(){return this.iconImage_.ready()}}const LL="#333";class qm{constructor(L){L=L||{},this.font_=L.font,this.rotation_=L.rotation,this.rotateWithView_=L.rotateWithView,this.scale_=L.scale,this.scaleArray_=kl(L.scale!==void 0?L.scale:1),this.text_=L.text,this.textAlign_=L.textAlign,this.justify_=L.justify,this.repeat_=L.repeat,this.textBaseline_=L.textBaseline,this.fill_=L.fill!==void 0?L.fill:new Cp({color:LL}),this.maxAngle_=L.maxAngle!==void 0?L.maxAngle:Math.PI/4,this.placement_=L.placement!==void 0?L.placement:"point",this.overflow_=!!L.overflow,this.stroke_=L.stroke!==void 0?L.stroke:null,this.offsetX_=L.offsetX!==void 0?L.offsetX:0,this.offsetY_=L.offsetY!==void 0?L.offsetY:0,this.backgroundFill_=L.backgroundFill?L.backgroundFill:null,this.backgroundStroke_=L.backgroundStroke?L.backgroundStroke:null,this.padding_=L.padding===void 0?null:L.padding,this.declutterMode_=L.declutterMode}clone(){const L=this.getScale();return new qm({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(L)?L.slice():L,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(L){this.overflow_=L}setFont(L){this.font_=L}setMaxAngle(L){this.maxAngle_=L}setOffsetX(L){this.offsetX_=L}setOffsetY(L){this.offsetY_=L}setPlacement(L){this.placement_=L}setRepeat(L){this.repeat_=L}setRotateWithView(L){this.rotateWithView_=L}setFill(L){this.fill_=L}setRotation(L){this.rotation_=L}setScale(L){this.scale_=L,this.scaleArray_=kl(L!==void 0?L:1)}setStroke(L){this.stroke_=L}setText(L){this.text_=L}setTextAlign(L){this.textAlign_=L}setJustify(L){this.justify_=L}setTextBaseline(L){this.textBaseline_=L}setBackgroundFill(L){this.backgroundFill_=L}setBackgroundStroke(L){this.backgroundStroke_=L}setPadding(L){this.padding_=L}}let iv=0;const od=0,Co=1<<iv++,Hi=1<<iv++,Il=1<<iv++,ts=1<<iv++,bf=1<<iv++,Jd=1<<iv++,ks=Math.pow(2,iv)-1,u2={[Co]:"boolean",[Hi]:"number",[Il]:"string",[ts]:"color",[bf]:"number[]",[Jd]:"size"},_L=Object.keys(u2).map(Number).sort(ug);function Fs(G){const L=[];for(const Y of _L)PL(G,Y)&&L.push(u2[Y]);return L.length===0?"untyped":L.length<3?L.join(" or "):L.slice(0,-1).join(", ")+", or "+L[L.length-1]}function PL(G,L){return(G&L)===L}function wf(G,L){return!!(G&L)}function Mg(G,L){return G===L}class ah{constructor(L,Y){this.type=L,this.value=Y}}class RL{constructor(L,Y,...oe){this.type=L,this.operator=Y,this.args=oe}}function f2(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function IL(G){switch(G){case"string":return Il;case"color":return ts;case"number":return Hi;case"boolean":return Co;case"number[]":return bf;default:throw new Error(`Unrecognized type hint: ${G}`)}}function Fa(G,L,Y){switch(typeof G){case"boolean":return new ah(Co,G);case"number":return new ah(Y===Jd?Jd:Hi,G);case"string":{let he=Il;return fL(G)&&(he|=ts),Mg(he&Y,od)||(he&=Y),new ah(he,G)}}if(!Array.isArray(G))throw new Error("Expression must be an array or a primitive value");if(G.length===0)throw new Error("Empty expression");if(typeof G[0]=="string")return WL(G,L,Y);for(const he of G)if(typeof he!="number")throw new Error("Expected an array of numbers");let oe=bf;return G.length===2?oe|=Jd:(G.length===3||G.length===4)&&(oe|=ts),Y&&(oe&=Y),new ah(oe,G)}const $n={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},DL={[$n.Get]:$i(([G,L])=>L!==void 0?IL(L.value):ks,va(1,2),kL),[$n.Var]:$i(([G])=>G.type,va(1,1),zL),[$n.Id]:$i(Hi|Il,zd,OL),[$n.Concat]:$i(Il,va(2,1/0),Sa(ks)),[$n.GeometryType]:$i(Il,zd,FL),[$n.Resolution]:$i(Hi,zd),[$n.Zoom]:$i(Hi,zd),[$n.Time]:$i(Hi,zd),[$n.Any]:$i(Co,va(2,1/0),Sa(Co)),[$n.All]:$i(Co,va(2,1/0),Sa(Co)),[$n.Not]:$i(Co,va(1,1),Sa(Co)),[$n.Equal]:$i(Co,va(2,2),Sa(ks),Kc),[$n.NotEqual]:$i(Co,va(2,2),Sa(ks),Kc),[$n.GreaterThan]:$i(Co,va(2,2),Sa(ks),Kc),[$n.GreaterThanOrEqualTo]:$i(Co,va(2,2),Sa(ks),Kc),[$n.LessThan]:$i(Co,va(2,2),Sa(ks),Kc),[$n.LessThanOrEqualTo]:$i(Co,va(2,2),Sa(ks),Kc),[$n.Multiply]:$i(G=>{let L=Hi|ts;for(let Y=0;Y<G.length;Y++)L&=G[Y].type;return L},va(2,1/0),Sa(Hi|ts),Kc),[$n.Coalesce]:$i(G=>{let L=ks;for(let Y=1;Y<G.length;Y+=2)L&=G[Y].type;return L&=G[G.length-1].type,L},va(2,1/0),Sa(ks),Kc),[$n.Divide]:$i(Hi,va(2,2),Sa(Hi)),[$n.Add]:$i(Hi,va(2,1/0),Sa(Hi)),[$n.Subtract]:$i(Hi,va(2,2),Sa(Hi)),[$n.Clamp]:$i(Hi,va(3,3),Sa(Hi)),[$n.Mod]:$i(Hi,va(2,2),Sa(Hi)),[$n.Pow]:$i(Hi,va(2,2),Sa(Hi)),[$n.Abs]:$i(Hi,va(1,1),Sa(Hi)),[$n.Floor]:$i(Hi,va(1,1),Sa(Hi)),[$n.Ceil]:$i(Hi,va(1,1),Sa(Hi)),[$n.Round]:$i(Hi,va(1,1),Sa(Hi)),[$n.Sin]:$i(Hi,va(1,1),Sa(Hi)),[$n.Cos]:$i(Hi,va(1,1),Sa(Hi)),[$n.Atan]:$i(Hi,va(1,2),Sa(Hi)),[$n.Sqrt]:$i(Hi,va(1,1),Sa(Hi)),[$n.Match]:$i(G=>{let L=ks;for(let Y=2;Y<G.length;Y+=2)L&=G[Y].type;return L&=G[G.length-1].type,L},va(4,1/0),Qb,NL),[$n.Between]:$i(Co,va(3,3),Sa(Hi)),[$n.Interpolate]:$i(G=>{let L=ts|Hi;for(let Y=3;Y<G.length;Y+=2)L&=G[Y].type;return L},va(6,1/0),Qb,UL),[$n.Case]:$i(G=>{let L=ks;for(let Y=1;Y<G.length;Y+=2)L&=G[Y].type;return L&=G[G.length-1].type,L},va(3,1/0),BL,VL),[$n.In]:$i(Co,va(2,2),HL),[$n.Number]:$i(Hi,va(1,1/0),Sa(ks)),[$n.String]:$i(Il,va(1,1/0),Sa(ks)),[$n.Array]:$i(G=>G.length===2?bf|Jd:G.length===3||G.length===4?bf|ts:bf,va(1,1/0),Sa(Hi)),[$n.Color]:$i(ts,va(1,4),Sa(Hi)),[$n.Band]:$i(Hi,va(1,3),Sa(Hi)),[$n.Palette]:$i(ts,va(2,2),GL),[$n.ToString]:$i(Il,va(1,1),Sa(Co|Hi|Il|ts))};function kL(G,L){const Y=Fa(G[1],L);if(!(Y instanceof ah))throw new Error("Expected a literal argument for get operation");if(typeof Y.value!="string")throw new Error("Expected a string argument for get operation");if(L.properties.add(Y.value),G.length===3){const oe=Fa(G[2],L);return[Y,oe]}return[Y]}function zL(G,L,Y,oe){const he=G[1];if(typeof he!="string")throw new Error("Expected a string argument for var operation");if(L.variables.add(he),!("variables"in L.style)||L.style.variables[he]===void 0)return[new ah(ks,he)];const Ae=L.style.variables[he],U=Fa(Ae,L);if(U.value=he,oe&&!wf(oe,U.type))throw new Error(`The variable ${he} has type ${Fs(U.type)} but the following type was expected: ${Fs(oe)}`);return[U]}function OL(G,L){L.featureId=!0}function FL(G,L){L.geometryType=!0}function zd(G,L){const Y=G[0];if(G.length!==1)throw new Error(`Expected no arguments for ${Y} operation`);return[]}function va(G,L){return function(Y,oe){const he=Y[0],Ae=Y.length-1;if(G===L){if(Ae!==G){const U=G===1?"":"s";throw new Error(`Expected ${G} argument${U} for ${he}, got ${Ae}`)}}else if(Ae<G||Ae>L){const U=L===1/0?`${G} or more`:`${G} to ${L}`;throw new Error(`Expected ${U} arguments for ${he}, got ${Ae}`)}}}function Sa(G){return function(L,Y){const oe=L[0],he=L.length-1,Ae=new Array(he);for(let U=0;U<he;++U){const F=Fa(L[U+1],Y);if(!wf(G,F.type)){const e=Fs(G),d=Fs(F.type);throw new Error(`Unexpected type for argument ${U} of ${oe} operation, got ${e} but expected ${d}`)}F.type&=G,Ae[U]=F}return Ae}}function Kc(G,L,Y){const oe=G[0],he=G.length-1;let Ae=ks;for(let F=0;F<Y.length;++F)Ae&=Y[F].type;if(Ae===od)throw new Error(`No common type could be found for arguments of ${oe} operation`);const U=new Array(he);for(let F=0;F<he;++F)U[F]=Fa(G[F+1],L,Ae);return U}function BL(G,L){const Y=G[0],oe=G.length-1;if(oe%2===0)throw new Error(`An odd amount of arguments was expected for operation ${Y}, got ${JSON.stringify(oe)} instead`)}function Qb(G,L){const Y=G[0],oe=G.length-1;if(oe%2===1)throw new Error(`An even amount of arguments was expected for operation ${Y}, got ${JSON.stringify(oe)} instead`)}function NL(G,L,Y,oe){const he=G.length-1;let U=Fa(G[1],L).type;const F=Fa(G[G.length-1],L);let e=oe!==void 0?oe&F.type:F.type;const d=new Array(he-2);for(let n=0;n<he-2;n+=2){const E=Fa(G[n+2],L),T=Fa(G[n+3],L);U&=E.type,e&=T.type,d[n]=E,d[n+1]=T}const S=Il|Hi|Co;if(!wf(S,U))throw new Error(`Expected an input of type ${Fs(S)} for the interpolate operation, got ${Fs(U)} instead`);if(U&=S,Mg(e,od))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(G));for(let n=0;n<he-2;n+=2){const E=Fa(G[n+2],L,U),T=Fa(G[n+3],L,e);d[n]=E,d[n+1]=T}return[Fa(G[1],L,U),...d,Fa(G[G.length-1],L,e)]}function UL(G,L,Y,oe){const he=G[1];let Ae;switch(he[0]){case"linear":Ae=1;break;case"exponential":if(Ae=he[1],typeof Ae!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(Ae)} instead`);break;default:Ae=null}if(!Ae)throw new Error(`Invalid interpolation type: ${JSON.stringify(he)}`);Ae=Fa(Ae,L);let U=Fa(G[2],L);if(!wf(Hi,U.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Fs(U.type)} instead`);U=Fa(G[2],L,Hi);const F=new Array(G.length-3);for(let e=0;e<F.length;e+=2){let d=Fa(G[e+3],L);if(!wf(Hi,d.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Fs(d.type)} at position ${e+2} instead`);let S=Fa(G[e+4],L);if(!wf(Hi|ts,S.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Fs(S.type)} at position ${e+3} instead`);d=Fa(G[e+3],L,Hi),S=Fa(G[e+4],L,Hi|ts),F[e]=d,F[e+1]=S}return[Ae,U,...F]}function VL(G,L,Y,oe){const he=Fa(G[G.length-1],L,oe);let Ae=oe!==void 0?oe&he.type:he.type;const U=new Array(G.length-1);for(let F=0;F<U.length-1;F+=2){const e=Fa(G[F+1],L),d=Fa(G[F+2],L,oe);if(!wf(Co,e.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Fs(e.type)} at position ${F} instead`);Ae&=d.type,U[F]=e,U[F+1]=d}if(Mg(Ae,od))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(G));for(let F=0;F<U.length-1;F+=2)U[F+1]=Fa(G[F+2],L,Ae);return U[U.length-1]=Fa(G[G.length-1],L,Ae),U}function HL(G,L){let Y=G[2];if(!Array.isArray(Y))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof Y[0]=="string"){if(Y[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(Y[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');Y=Y[1]}let oe=Il|Hi;const he=new Array(Y.length);for(let U=0;U<he.length;U++){const F=Fa(Y[U],L);oe&=F.type,he[U]=F}if(Mg(oe,od))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(G));return[Fa(G[1],L,oe),...he]}function GL(G,L){const Y=Fa(G[1],L,Hi);if(Y.type!==Hi)throw new Error(`The first argument of palette must be an number, got ${Fs(Y.type)} instead`);const oe=G[2];if(!Array.isArray(oe))throw new Error("The second argument of palette must be an array");const he=new Array(oe.length);for(let Ae=0;Ae<he.length;Ae++){const U=Fa(oe[Ae],L,ts);if(!(U instanceof ah))throw new Error(`The palette color at index ${Ae} must be a literal value`);if(!wf(U.type,ts))throw new Error(`The palette color at index ${Ae} should be of type color, got ${Fs(U.type)} instead`);he[Ae]=U}return[Y,...he]}function $i(G,...L){return function(Y,oe,he){const Ae=Y[0];let U=[];for(let e=0;e<L.length;e++)U=L[e](Y,oe,U,he)||U;let F=typeof G=="function"?G(U):G;if(he!==void 0){if(!wf(F,he))throw new Error(`The following expression was expected to return ${Fs(he)}, but returns ${Fs(F)} instead: ${JSON.stringify(Y)}`);F&=he}if(F===od)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(Y)}`);return new RL(F,Ae,...U)}}function WL(G,L,Y){const oe=G[0],he=DL[oe];if(!he)throw new Error(`Unknown operator: ${oe}`);return he(G,L,Y)}function c2(G){if(!G)return"";const L=G.getType();switch(L){case"Point":case"LineString":case"Polygon":return L;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return L.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return c2(G.getGeometries()[0]);default:return""}}function h2(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function sc(G,L,Y){const oe=Fa(G,Y);if(!wf(L,oe.type)){const he=Fs(L),Ae=Fs(oe.type);throw new Error(`Expected expression to be of type ${he}, got ${Ae}`)}return Xu(oe)}function Xu(G,L){if(G instanceof ah){if(G.type===ts&&typeof G.value=="string"){const oe=Zm(G.value);return function(){return oe}}return function(){return G.value}}const Y=G.operator;switch(Y){case $n.Number:case $n.String:case $n.Coalesce:return YL(G);case $n.Get:case $n.Var:return XL(G);case $n.Id:return oe=>oe.featureId;case $n.GeometryType:return oe=>oe.geometryType;case $n.Concat:{const oe=G.args.map(he=>Xu(he));return he=>"".concat(...oe.map(Ae=>Ae(he).toString()))}case $n.Resolution:return oe=>oe.resolution;case $n.Any:case $n.All:case $n.Between:case $n.In:case $n.Not:return jL(G);case $n.Equal:case $n.NotEqual:case $n.LessThan:case $n.LessThanOrEqualTo:case $n.GreaterThan:case $n.GreaterThanOrEqualTo:return ZL(G);case $n.Multiply:case $n.Divide:case $n.Add:case $n.Subtract:case $n.Clamp:case $n.Mod:case $n.Pow:case $n.Abs:case $n.Floor:case $n.Ceil:case $n.Round:case $n.Sin:case $n.Cos:case $n.Atan:case $n.Sqrt:return KL(G);case $n.Case:return JL(G);case $n.Match:return QL(G);case $n.Interpolate:return $L(G);case $n.ToString:return qL(G);default:throw new Error(`Unsupported operator ${Y}`)}}function YL(G,L){const Y=G.operator,oe=G.args.length,he=new Array(oe);for(let Ae=0;Ae<oe;++Ae)he[Ae]=Xu(G.args[Ae]);switch(Y){case $n.Coalesce:return Ae=>{for(let U=0;U<oe;++U){const F=he[U](Ae);if(typeof F<"u"&&F!==null)return F}throw new Error("Expected one of the values to be non-null")};case $n.Number:case $n.String:return Ae=>{for(let U=0;U<oe;++U){const F=he[U](Ae);if(typeof F===Y)return F}throw new Error(`Expected one of the values to be a ${Y}`)};default:throw new Error(`Unsupported assertion operator ${Y}`)}}function XL(G,L){const oe=G.args[0].value;switch(G.operator){case $n.Get:return he=>he.properties[oe];case $n.Var:return he=>he.variables[oe];default:throw new Error(`Unsupported accessor operator ${G.operator}`)}}function ZL(G,L){const Y=G.operator,oe=Xu(G.args[0]),he=Xu(G.args[1]);switch(Y){case $n.Equal:return Ae=>oe(Ae)===he(Ae);case $n.NotEqual:return Ae=>oe(Ae)!==he(Ae);case $n.LessThan:return Ae=>oe(Ae)<he(Ae);case $n.LessThanOrEqualTo:return Ae=>oe(Ae)<=he(Ae);case $n.GreaterThan:return Ae=>oe(Ae)>he(Ae);case $n.GreaterThanOrEqualTo:return Ae=>oe(Ae)>=he(Ae);default:throw new Error(`Unsupported comparison operator ${Y}`)}}function jL(G,L){const Y=G.operator,oe=G.args.length,he=new Array(oe);for(let Ae=0;Ae<oe;++Ae)he[Ae]=Xu(G.args[Ae]);switch(Y){case $n.Any:return Ae=>{for(let U=0;U<oe;++U)if(he[U](Ae))return!0;return!1};case $n.All:return Ae=>{for(let U=0;U<oe;++U)if(!he[U](Ae))return!1;return!0};case $n.Between:return Ae=>{const U=he[0](Ae),F=he[1](Ae),e=he[2](Ae);return U>=F&&U<=e};case $n.In:return Ae=>{const U=he[0](Ae);for(let F=1;F<oe;++F)if(U===he[F](Ae))return!0;return!1};case $n.Not:return Ae=>!he[0](Ae);default:throw new Error(`Unsupported logical operator ${Y}`)}}function KL(G,L){const Y=G.operator,oe=G.args.length,he=new Array(oe);for(let Ae=0;Ae<oe;++Ae)he[Ae]=Xu(G.args[Ae]);switch(Y){case $n.Multiply:return Ae=>{let U=1;for(let F=0;F<oe;++F)U*=he[F](Ae);return U};case $n.Divide:return Ae=>he[0](Ae)/he[1](Ae);case $n.Add:return Ae=>{let U=0;for(let F=0;F<oe;++F)U+=he[F](Ae);return U};case $n.Subtract:return Ae=>he[0](Ae)-he[1](Ae);case $n.Clamp:return Ae=>{const U=he[0](Ae),F=he[1](Ae);if(U<F)return F;const e=he[2](Ae);return U>e?e:U};case $n.Mod:return Ae=>he[0](Ae)%he[1](Ae);case $n.Pow:return Ae=>Math.pow(he[0](Ae),he[1](Ae));case $n.Abs:return Ae=>Math.abs(he[0](Ae));case $n.Floor:return Ae=>Math.floor(he[0](Ae));case $n.Ceil:return Ae=>Math.ceil(he[0](Ae));case $n.Round:return Ae=>Math.round(he[0](Ae));case $n.Sin:return Ae=>Math.sin(he[0](Ae));case $n.Cos:return Ae=>Math.cos(he[0](Ae));case $n.Atan:return oe===2?Ae=>Math.atan2(he[0](Ae),he[1](Ae)):Ae=>Math.atan(he[0](Ae));case $n.Sqrt:return Ae=>Math.sqrt(he[0](Ae));default:throw new Error(`Unsupported numeric operator ${Y}`)}}function JL(G,L){const Y=G.args.length,oe=new Array(Y);for(let he=0;he<Y;++he)oe[he]=Xu(G.args[he]);return he=>{for(let Ae=0;Ae<Y-1;Ae+=2)if(oe[Ae](he))return oe[Ae+1](he);return oe[Y-1](he)}}function QL(G,L){const Y=G.args.length,oe=new Array(Y);for(let he=0;he<Y;++he)oe[he]=Xu(G.args[he]);return he=>{const Ae=oe[0](he);for(let U=1;U<Y;U+=2)if(Ae===oe[U](he))return oe[U+1](he);return oe[Y-1](he)}}function $L(G,L){const Y=G.args.length,oe=new Array(Y);for(let he=0;he<Y;++he)oe[he]=Xu(G.args[he]);return he=>{const Ae=oe[0](he),U=oe[1](he);let F,e;for(let d=2;d<Y;d+=2){const S=oe[d](he);let n=oe[d+1](he);const E=Array.isArray(n);if(E&&(n=lL(n)),S>=U)return d===2?n:E?e_(Ae,U,F,e,S,n):Ud(Ae,U,F,e,S,n);F=S,e=n}return e}}function qL(G,L){const Y=G.operator,oe=G.args.length,he=new Array(oe);for(let Ae=0;Ae<oe;++Ae)he[Ae]=Xu(G.args[Ae]);switch(Y){case $n.ToString:return Ae=>{const U=he[0](Ae);return G.args[0].type===ts?jm(U):U.toString()};default:throw new Error(`Unsupported convert operator ${Y}`)}}function Ud(G,L,Y,oe,he,Ae){const U=he-Y;if(U===0)return oe;const F=L-Y,e=G===1?F/U:(Math.pow(G,F)-1)/(Math.pow(G,U)-1);return oe+e*(Ae-oe)}function e_(G,L,Y,oe,he,Ae){if(he-Y===0)return oe;const F=Hb(oe),e=Hb(Ae);let d=e[2]-F[2];d>180?d-=360:d<-180&&(d+=360);const S=[Ud(G,L,Y,F[0],he,e[0]),Ud(G,L,Y,F[1],he,e[1]),F[2]+Ud(G,L,Y,0,he,d),Ud(G,L,Y,oe[3],he,Ae[3])];return n2(uL(S))}function t_(G){return!0}function r_(G){const L=f2(),Y=n_(G,L),oe=h2();return function(he,Ae){if(oe.properties=he.getPropertiesInternal(),oe.resolution=Ae,L.featureId){const U=he.getId();U!==void 0?oe.featureId=U:oe.featureId=null}return L.geometryType&&(oe.geometryType=c2(he.getGeometry())),Y(oe)}}function $b(G){const L=f2(),Y=G.length,oe=new Array(Y);for(let U=0;U<Y;++U)oe[U]=tm(G[U],L);const he=h2(),Ae=new Array(Y);return function(U,F){if(he.properties=U.getPropertiesInternal(),he.resolution=F,L.featureId){const d=U.getId();d!==void 0?he.featureId=d:he.featureId=null}let e=0;for(let d=0;d<Y;++d){const S=oe[d](he);S&&(Ae[e]=S,e+=1)}return Ae.length=e,Ae}}function n_(G,L){const Y=G.length,oe=new Array(Y);for(let he=0;he<Y;++he){const Ae=G[he],U="filter"in Ae?sc(Ae.filter,Co,L):t_;let F;if(Array.isArray(Ae.style)){const e=Ae.style.length;F=new Array(e);for(let d=0;d<e;++d)F[d]=tm(Ae.style[d],L)}else F=[tm(Ae.style,L)];oe[he]={filter:U,styles:F}}return function(he){const Ae=[];let U=!1;for(let F=0;F<Y;++F){const e=oe[F].filter;if(e(he)&&!(G[F].else&&U)){U=!0;for(const d of oe[F].styles){const S=d(he);S&&Ae.push(S)}}}return Ae}}function tm(G,L){const Y=hp(G,"",L),oe=vp(G,"",L),he=i_(G,L),Ae=a_(G,L),U=vl(G,"z-index",L);if(!Y&&!oe&&!he&&!Ae&&!Dw(G))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(G));const F=new _0;return function(e){let d=!0;if(Y){const S=Y(e);S&&(d=!1),F.setFill(S)}if(oe){const S=oe(e);S&&(d=!1),F.setStroke(S)}if(he){const S=he(e);S&&(d=!1),F.setText(S)}if(Ae){const S=Ae(e);S&&(d=!1),F.setImage(S)}return U&&F.setZIndex(U(e)),d?null:F}}function hp(G,L,Y){let oe;if(L+"fill-pattern-src"in G?oe=u_(G,L+"fill-",Y):oe=e1(G,L+"fill-color",Y),!oe)return null;const he=new Cp;return function(Ae){const U=oe(Ae);return U==="none"?null:(he.setColor(U),he)}}function vp(G,L,Y){const oe=vl(G,L+"stroke-width",Y),he=e1(G,L+"stroke-color",Y);if(!oe&&!he)return null;const Ae=qf(G,L+"stroke-line-cap",Y),U=qf(G,L+"stroke-line-join",Y),F=v2(G,L+"stroke-line-dash",Y),e=vl(G,L+"stroke-line-dash-offset",Y),d=vl(G,L+"stroke-miter-limit",Y),S=new Tg;return function(n){if(he){const E=he(n);if(E==="none")return null;S.setColor(E)}if(oe&&S.setWidth(oe(n)),Ae){const E=Ae(n);if(E!=="butt"&&E!=="round"&&E!=="square")throw new Error("Expected butt, round, or square line cap");S.setLineCap(E)}if(U){const E=U(n);if(E!=="bevel"&&E!=="round"&&E!=="miter")throw new Error("Expected bevel, round, or miter line join");S.setLineJoin(E)}return F&&S.setLineDash(F(n)),e&&S.setLineDashOffset(e(n)),d&&S.setMiterLimit(d(n)),S}}function i_(G,L){const Y="text-",oe=qf(G,Y+"value",L);if(!oe)return null;const he=hp(G,Y,L),Ae=hp(G,Y+"background-",L),U=vp(G,Y,L),F=vp(G,Y+"background-",L),e=qf(G,Y+"font",L),d=vl(G,Y+"max-angle",L),S=vl(G,Y+"offset-x",L),n=vl(G,Y+"offset-y",L),E=dp(G,Y+"overflow",L),T=qf(G,Y+"placement",L),v=vl(G,Y+"repeat",L),g=Eg(G,Y+"scale",L),r=dp(G,Y+"rotate-with-view",L),t=vl(G,Y+"rotation",L),o=qf(G,Y+"align",L),i=qf(G,Y+"justify",L),f=qf(G,Y+"baseline",L),u=v2(G,Y+"padding",L),l=Sg(G,Y+"declutter-mode"),m=new qm({declutterMode:l});return function(h){if(m.setText(oe(h)),he&&m.setFill(he(h)),Ae&&m.setBackgroundFill(Ae(h)),U&&m.setStroke(U(h)),F&&m.setBackgroundStroke(F(h)),e&&m.setFont(e(h)),d&&m.setMaxAngle(d(h)),S&&m.setOffsetX(S(h)),n&&m.setOffsetY(n(h)),E&&m.setOverflow(E(h)),T){const w=T(h);if(w!=="point"&&w!=="line")throw new Error("Expected point or line for text-placement");m.setPlacement(w)}if(v&&m.setRepeat(v(h)),g&&m.setScale(g(h)),r&&m.setRotateWithView(r(h)),t&&m.setRotation(t(h)),o){const w=o(h);if(w!=="left"&&w!=="center"&&w!=="right"&&w!=="end"&&w!=="start")throw new Error("Expected left, right, center, start, or end for text-align");m.setTextAlign(w)}if(i){const w=i(h);if(w!=="left"&&w!=="right"&&w!=="center")throw new Error("Expected left, right, or center for text-justify");m.setJustify(w)}if(f){const w=f(h);if(w!=="bottom"&&w!=="top"&&w!=="middle"&&w!=="alphabetic"&&w!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");m.setTextBaseline(w)}return u&&m.setPadding(u(h)),m}}function a_(G,L){return"icon-src"in G?o_(G,L):"shape-points"in G?s_(G,L):"circle-radius"in G?l_(G,L):null}function o_(G,L){const Y="icon-",oe=Y+"src",he=d2(G[oe],oe),Ae=G0(G,Y+"anchor",L),U=Eg(G,Y+"scale",L),F=vl(G,Y+"opacity",L),e=G0(G,Y+"displacement",L),d=vl(G,Y+"rotation",L),S=dp(G,Y+"rotate-with-view",L),n=e3(G,Y+"anchor-origin"),E=t3(G,Y+"anchor-x-units"),T=t3(G,Y+"anchor-y-units"),v=v_(G,Y+"color"),g=c_(G,Y+"cross-origin"),r=h_(G,Y+"offset"),t=e3(G,Y+"offset-origin"),o=W0(G,Y+"width"),i=W0(G,Y+"height"),f=f_(G,Y+"size"),u=Sg(G,Y+"declutter-mode"),l=new $m({src:he,anchorOrigin:n,anchorXUnits:E,anchorYUnits:T,color:v,crossOrigin:g,offset:r,offsetOrigin:t,height:i,width:o,size:f,declutterMode:u});return function(m){return F&&l.setOpacity(F(m)),e&&l.setDisplacement(e(m)),d&&l.setRotation(d(m)),S&&l.setRotateWithView(S(m)),U&&l.setScale(U(m)),Ae&&l.setAnchor(Ae(m)),l}}function s_(G,L){const Y="shape-",oe=Y+"points",he=Y+"radius",Ae=rm(G[oe],oe),U=rm(G[he],he),F=hp(G,Y,L),e=vp(G,Y,L),d=Eg(G,Y+"scale",L),S=G0(G,Y+"displacement",L),n=vl(G,Y+"rotation",L),E=dp(G,Y+"rotate-with-view",L),T=W0(G,Y+"radius2"),v=W0(G,Y+"angle"),g=Sg(G,Y+"declutter-mode"),r=new bg({points:Ae,radius:U,radius2:T,angle:v,declutterMode:g});return function(t){return F&&r.setFill(F(t)),e&&r.setStroke(e(t)),S&&r.setDisplacement(S(t)),n&&r.setRotation(n(t)),E&&r.setRotateWithView(E(t)),d&&r.setScale(d(t)),r}}function l_(G,L){const Y="circle-",oe=hp(G,Y,L),he=vp(G,Y,L),Ae=vl(G,Y+"radius",L),U=Eg(G,Y+"scale",L),F=G0(G,Y+"displacement",L),e=vl(G,Y+"rotation",L),d=dp(G,Y+"rotate-with-view",L),S=Sg(G,Y+"declutter-mode"),n=new wg({radius:5,declutterMode:S});return function(E){return Ae&&n.setRadius(Ae(E)),oe&&n.setFill(oe(E)),he&&n.setStroke(he(E)),F&&n.setDisplacement(F(E)),e&&n.setRotation(e(E)),d&&n.setRotateWithView(d(E)),U&&n.setScale(U(E)),n}}function vl(G,L,Y){if(!(L in G))return;const oe=sc(G[L],Hi,Y);return function(he){return rm(oe(he),L)}}function qf(G,L,Y){if(!(L in G))return null;const oe=sc(G[L],Il,Y);return function(he){return d2(oe(he),L)}}function u_(G,L,Y){const oe=qf(G,L+"pattern-src",Y),he=qb(G,L+"pattern-offset",Y),Ae=qb(G,L+"pattern-size",Y),U=e1(G,L+"color",Y);return function(F){return{src:oe(F),offset:he&&he(F),size:Ae&&Ae(F),color:U&&U(F)}}}function dp(G,L,Y){if(!(L in G))return null;const oe=sc(G[L],Co,Y);return function(he){const Ae=oe(he);if(typeof Ae!="boolean")throw new Error(`Expected a boolean for ${L}`);return Ae}}function e1(G,L,Y){if(!(L in G))return null;const oe=sc(G[L],ts|Il,Y);return function(he){return p2(oe(he),L)}}function v2(G,L,Y){if(!(L in G))return null;const oe=sc(G[L],bf,Y);return function(he){return Lp(oe(he),L)}}function G0(G,L,Y){if(!(L in G))return null;const oe=sc(G[L],bf,Y);return function(he){const Ae=Lp(oe(he),L);if(Ae.length!==2)throw new Error(`Expected two numbers for ${L}`);return Ae}}function qb(G,L,Y){if(!(L in G))return null;const oe=sc(G[L],bf,Y);return function(he){return g2(oe(he),L)}}function Eg(G,L,Y){if(!(L in G))return null;const oe=sc(G[L],bf|Hi,Y);return function(he){return d_(oe(he),L)}}function W0(G,L){const Y=G[L];if(Y!==void 0){if(typeof Y!="number")throw new Error(`Expected a number for ${L}`);return Y}}function f_(G,L){const Y=G[L];if(Y!==void 0){if(typeof Y=="number")return kl(Y);if(!Array.isArray(Y))throw new Error(`Expected a number or size array for ${L}`);if(Y.length!==2||typeof Y[0]!="number"||typeof Y[1]!="number")throw new Error(`Expected a number or size array for ${L}`);return Y}}function c_(G,L){const Y=G[L];if(Y!==void 0){if(typeof Y!="string")throw new Error(`Expected a string for ${L}`);return Y}}function e3(G,L){const Y=G[L];if(Y!==void 0){if(Y!=="bottom-left"&&Y!=="bottom-right"&&Y!=="top-left"&&Y!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${L}`);return Y}}function t3(G,L){const Y=G[L];if(Y!==void 0){if(Y!=="pixels"&&Y!=="fraction")throw new Error(`Expected pixels or fraction for ${L}`);return Y}}function h_(G,L){const Y=G[L];if(Y!==void 0)return Lp(Y,L)}function Sg(G,L){const Y=G[L];if(Y!==void 0){if(typeof Y!="string")throw new Error(`Expected a string for ${L}`);if(Y!=="declutter"&&Y!=="obstacle"&&Y!=="none")throw new Error(`Expected declutter, obstacle, or none for ${L}`);return Y}}function v_(G,L){const Y=G[L];if(Y!==void 0)return p2(Y,L)}function Lp(G,L){if(!Array.isArray(G))throw new Error(`Expected an array for ${L}`);const Y=G.length;for(let oe=0;oe<Y;++oe)if(typeof G[oe]!="number")throw new Error(`Expected an array of numbers for ${L}`);return G}function d2(G,L){if(typeof G!="string")throw new Error(`Expected a string for ${L}`);return G}function rm(G,L){if(typeof G!="number")throw new Error(`Expected a number for ${L}`);return G}function p2(G,L){if(typeof G=="string")return G;const Y=Lp(G,L),oe=Y.length;if(oe<3||oe>4)throw new Error(`Expected a color with 3 or 4 values for ${L}`);return Y}function g2(G,L){const Y=Lp(G,L);if(Y.length!==2)throw new Error(`Expected an array of two numbers for ${L}`);return Y}function d_(G,L){return typeof G=="number"?G:g2(G,L)}const r3={RENDER_ORDER:"renderOrder"};class p_ extends yg{constructor(L){L=L||{};const Y=Object.assign({},L);delete Y.style,delete Y.renderBuffer,delete Y.updateWhileAnimating,delete Y.updateWhileInteracting,super(Y),this.declutter_=L.declutter?String(L.declutter):void 0,this.renderBuffer_=L.renderBuffer!==void 0?L.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(L.style),this.updateWhileAnimating_=L.updateWhileAnimating!==void 0?L.updateWhileAnimating:!1,this.updateWhileInteracting_=L.updateWhileInteracting!==void 0?L.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(L){return super.getFeatures(L)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(r3.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(L,Y){const oe=this.getDeclutter();oe in L.declutter||(L.declutter[oe]=new QC(9)),this.getRenderer().renderDeclutter(L,Y)}setRenderOrder(L){this.set(r3.RENDER_ORDER,L)}setStyle(L){this.style_=L===void 0?l2:L;const Y=g_(L);this.styleFunction_=L===null?void 0:CL(Y),this.changed()}}function g_(G){if(G===void 0)return l2;if(!G)return null;if(typeof G=="function"||G instanceof _0)return G;if(!Array.isArray(G))return $b([G]);if(G.length===0)return[];const L=G.length,Y=G[0];if(Y instanceof _0){const he=new Array(L);for(let Ae=0;Ae<L;++Ae){const U=G[Ae];if(!(U instanceof _0))throw new Error("Expected a list of style instances");he[Ae]=U}return he}if("style"in Y){const he=new Array(L);for(let Ae=0;Ae<L;++Ae){const U=G[Ae];if(!("style"in U))throw new Error("Expected a list of rules with a style property");he[Ae]=U}return r_(he)}return $b(G)}class y_ extends Pm{constructor(L){super(),this.map_=L}dispatchRenderEvent(L,Y){Ia()}calculateMatrices2D(L){const Y=L.viewState,oe=L.coordinateToPixelTransform,he=L.pixelToCoordinateTransform;sp(oe,L.size[0]/2,L.size[1]/2,1/Y.resolution,-1/Y.resolution,-Y.rotation,-Y.center[0],-Y.center[1]),Yw(he,oe)}forEachFeatureAtCoordinate(L,Y,oe,he,Ae,U,F,e){let d;const S=Y.viewState;function n(f,u,l,m){return Ae.call(U,u,f?l:null,m)}const E=S.projection,T=nC(L.slice(),E),v=[[0,0]];if(E.canWrapX()&&he){const f=E.getExtent(),u=ao(f);v.push([-u,0],[u,0])}const g=Y.layerStatesArray,r=g.length,t=[],o=[];for(let f=0;f<v.length;f++)for(let u=r-1;u>=0;--u){const l=g[u],m=l.layer;if(m.hasRenderer()&&Ym(l,S)&&F.call(e,m)){const h=m.getRenderer(),w=m.getSource();if(h&&w){const c=w.getWrapX()?T:L,a=n.bind(null,l.managed);o[0]=c[0]+v[f][0],o[1]=c[1]+v[f][1],d=h.forEachFeatureAtCoordinate(o,Y,oe,a,t)}if(d)return d}}if(t.length===0)return;const i=1/t.length;return t.forEach((f,u)=>f.distanceSq+=u*i),t.sort((f,u)=>f.distanceSq-u.distanceSq),t.some(f=>d=f.callback(f.feature,f.layer,f.geometry)),d}hasFeatureAtCoordinate(L,Y,oe,he,Ae,U){return this.forEachFeatureAtCoordinate(L,Y,oe,he,F0,this,Ae,U)!==void 0}getMap(){return this.map_}renderFrame(L){Ia()}scheduleExpireIconCache(L){xf.canExpireCache()&&L.postRenderFunctions.push(m_)}}function m_(G,L){xf.expire()}class y2 extends dh{constructor(L,Y,oe,he){super(L),this.inversePixelTransform=Y,this.frameState=oe,this.context=he}}class x_ extends y_{constructor(L){super(L),this.fontChangeListenerKey_=Ha(SL,ap.PROPERTYCHANGE,L.redrawText.bind(L)),this.element_=document.createElement("div");const Y=this.element_.style;Y.position="absolute",Y.width="100%",Y.height="100%",Y.zIndex="0",this.element_.className=xg+" ol-layers";const oe=L.getViewport();oe.insertBefore(this.element_,oe.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(L,Y){const oe=this.getMap();if(oe.hasListener(L)){const he=new y2(L,void 0,Y);oe.dispatchEvent(he)}}disposeInternal(){Oo(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(L){if(!L){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(L),this.dispatchRenderEvent(mf.PRECOMPOSE,L);const Y=L.layerStatesArray.sort(function(F,e){return F.zIndex-e.zIndex});Y.some(F=>F.layer instanceof p_&&F.layer.getDeclutter())&&(L.declutter={});const he=L.viewState;this.children_.length=0;const Ae=[];let U=null;for(let F=0,e=Y.length;F<e;++F){const d=Y[F];L.layerIndex=F;const S=d.layer,n=S.getSourceState();if(!Ym(d,he)||n!="ready"&&n!="undefined"){S.unrender();continue}const E=S.render(L,U);E&&(E!==U&&(this.children_.push(E),U=E),Ae.push(d))}this.declutter(L,Ae),gL(this.element_,this.children_),this.dispatchRenderEvent(mf.POSTCOMPOSE,L),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(L)}declutter(L,Y){if(L.declutter){for(let oe=Y.length-1;oe>=0;--oe){const he=Y[oe],Ae=he.layer;Ae.getDeclutter()&&Ae.renderDeclutter(L,he)}Y.forEach(oe=>oe.layer.renderDeferred(L))}}}class ih extends dh{constructor(L,Y){super(L),this.layer=Y}}const Sy={LAYERS:"layers"};class sd extends zw{constructor(L){L=L||{};const Y=Object.assign({},L);delete Y.layers;let oe=L.layers;super(Y),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Sy.LAYERS,this.handleLayersChanged_),oe?Array.isArray(oe)?oe=new ec(oe.slice(),{unique:!0}):Wa(typeof oe.getArray=="function","Expected `layers` to be an array or a `Collection`"):oe=new ec(void 0,{unique:!0}),this.setLayers(oe)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Oo),this.layersListenerKeys_.length=0;const L=this.getLayers();this.layersListenerKeys_.push(Ha(L,lu.ADD,this.handleLayersAdd_,this),Ha(L,lu.REMOVE,this.handleLayersRemove_,this));for(const oe in this.listenerKeys_)this.listenerKeys_[oe].forEach(Oo);hg(this.listenerKeys_);const Y=L.getArray();for(let oe=0,he=Y.length;oe<he;oe++){const Ae=Y[oe];this.registerLayerListeners_(Ae),this.dispatchEvent(new ih("addlayer",Ae))}this.changed()}registerLayerListeners_(L){const Y=[Ha(L,ap.PROPERTYCHANGE,this.handleLayerChange_,this),Ha(L,da.CHANGE,this.handleLayerChange_,this)];L instanceof sd&&Y.push(Ha(L,"addlayer",this.handleLayerGroupAdd_,this),Ha(L,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ks(L)]=Y}handleLayerGroupAdd_(L){this.dispatchEvent(new ih("addlayer",L.layer))}handleLayerGroupRemove_(L){this.dispatchEvent(new ih("removelayer",L.layer))}handleLayersAdd_(L){const Y=L.element;this.registerLayerListeners_(Y),this.dispatchEvent(new ih("addlayer",Y)),this.changed()}handleLayersRemove_(L){const Y=L.element,oe=Ks(Y);this.listenerKeys_[oe].forEach(Oo),delete this.listenerKeys_[oe],this.dispatchEvent(new ih("removelayer",Y)),this.changed()}getLayers(){return this.get(Sy.LAYERS)}setLayers(L){const Y=this.getLayers();if(Y){const oe=Y.getArray();for(let he=0,Ae=oe.length;he<Ae;++he)this.dispatchEvent(new ih("removelayer",oe[he]))}this.set(Sy.LAYERS,L)}getLayersArray(L){return L=L!==void 0?L:[],this.getLayers().forEach(function(Y){Y.getLayersArray(L)}),L}getLayerStatesArray(L){const Y=L!==void 0?L:[],oe=Y.length;this.getLayers().forEach(function(U){U.getLayerStatesArray(Y)});const he=this.getLayerState();let Ae=he.zIndex;!L&&he.zIndex===void 0&&(Ae=0);for(let U=oe,F=Y.length;U<F;U++){const e=Y[U];e.opacity*=he.opacity,e.visible=e.visible&&he.visible,e.maxResolution=Math.min(e.maxResolution,he.maxResolution),e.minResolution=Math.max(e.minResolution,he.minResolution),e.minZoom=Math.max(e.minZoom,he.minZoom),e.maxZoom=Math.min(e.maxZoom,he.maxZoom),he.extent!==void 0&&(e.extent!==void 0?e.extent=Kd(e.extent,he.extent):e.extent=he.extent),e.zIndex===void 0&&(e.zIndex=Ae)}return Y}getSourceState(){return"ready"}}class Uv extends dh{constructor(L,Y,oe){super(L),this.map=Y,this.frameState=oe!==void 0?oe:null}}class $c extends Uv{constructor(L,Y,oe,he,Ae,U){super(L,Y,Ae),this.originalEvent=oe,this.pixel_=null,this.coordinate_=null,this.dragging=he!==void 0?he:!1,this.activePointers=U}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(L){this.pixel_=L}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(L){this.coordinate_=L}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Lo={SINGLECLICK:"singleclick",CLICK:da.CLICK,DBLCLICK:da.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},nm={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class b_ extends vg{constructor(L,Y){super(L),this.map_=L,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=Y===void 0?1:Y,this.down_=null;const oe=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=oe,this.pointerdownListenerKey_=Ha(oe,nm.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ha(oe,nm.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(da.TOUCHMOVE,this.boundHandleTouchMove_,s2?{passive:!1}:!1)}emulateClick_(L){let Y=new $c(Lo.CLICK,this.map_,L);this.dispatchEvent(Y),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,Y=new $c(Lo.DBLCLICK,this.map_,L),this.dispatchEvent(Y)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const oe=new $c(Lo.SINGLECLICK,this.map_,L);this.dispatchEvent(oe)},250)}updateActivePointers_(L){const Y=L,oe=Y.pointerId;if(Y.type==Lo.POINTERUP||Y.type==Lo.POINTERCANCEL){delete this.trackedTouches_[oe];for(const he in this.trackedTouches_)if(this.trackedTouches_[he].target!==Y.target){delete this.trackedTouches_[he];break}}else(Y.type==Lo.POINTERDOWN||Y.type==Lo.POINTERMOVE)&&(this.trackedTouches_[oe]=Y);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(L){this.updateActivePointers_(L);const Y=new $c(Lo.POINTERUP,this.map_,L,void 0,void 0,this.activePointers_);this.dispatchEvent(Y),this.emulateClicks_&&!Y.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(L)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Oo),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(L){return L.button===0}handlePointerDown_(L){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(L);const Y=new $c(Lo.POINTERDOWN,this.map_,L,void 0,void 0,this.activePointers_);if(this.dispatchEvent(Y),this.down_=new PointerEvent(L.type,L),Object.defineProperty(this.down_,"target",{writable:!1,value:L.target}),this.dragListenerKeys_.length===0){const oe=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ha(oe,Lo.POINTERMOVE,this.handlePointerMove_,this),Ha(oe,Lo.POINTERUP,this.handlePointerUp_,this),Ha(this.element_,Lo.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==oe&&this.dragListenerKeys_.push(Ha(this.element_.getRootNode(),Lo.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(L){if(this.isMoving_(L)){this.updateActivePointers_(L),this.dragging_=!0;const Y=new $c(Lo.POINTERDRAG,this.map_,L,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(Y)}}relayMoveEvent_(L){this.originalPointerMoveEvent_=L;const Y=!!(this.down_&&this.isMoving_(L));this.dispatchEvent(new $c(Lo.POINTERMOVE,this.map_,L,Y))}handleTouchMove_(L){const Y=this.originalPointerMoveEvent_;(!Y||Y.defaultPrevented)&&(typeof L.cancelable!="boolean"||L.cancelable===!0)&&L.preventDefault()}isMoving_(L){return this.dragging_||Math.abs(L.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(L.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Oo(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(da.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Oo(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Oo),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const qc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},zs={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Y0=1/0;class w_{constructor(L,Y){this.priorityFunction_=L,this.keyFunction_=Y,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,hg(this.queuedElements_)}dequeue(){const L=this.elements_,Y=this.priorities_,oe=L[0];L.length==1?(L.length=0,Y.length=0):(L[0]=L.pop(),Y[0]=Y.pop(),this.siftUp_(0));const he=this.keyFunction_(oe);return delete this.queuedElements_[he],oe}enqueue(L){Wa(!(this.keyFunction_(L)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const Y=this.priorityFunction_(L);return Y!=Y0?(this.elements_.push(L),this.priorities_.push(Y),this.queuedElements_[this.keyFunction_(L)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(L){return L*2+1}getRightChildIndex_(L){return L*2+2}getParentIndex_(L){return L-1>>1}heapify_(){let L;for(L=(this.elements_.length>>1)-1;L>=0;L--)this.siftUp_(L)}isEmpty(){return this.elements_.length===0}isKeyQueued(L){return L in this.queuedElements_}isQueued(L){return this.isKeyQueued(this.keyFunction_(L))}siftUp_(L){const Y=this.elements_,oe=this.priorities_,he=Y.length,Ae=Y[L],U=oe[L],F=L;for(;L<he>>1;){const e=this.getLeftChildIndex_(L),d=this.getRightChildIndex_(L),S=d<he&&oe[d]<oe[e]?d:e;Y[L]=Y[S],oe[L]=oe[S],L=S}Y[L]=Ae,oe[L]=U,this.siftDown_(F,L)}siftDown_(L,Y){const oe=this.elements_,he=this.priorities_,Ae=oe[Y],U=he[Y];for(;Y>L;){const F=this.getParentIndex_(Y);if(he[F]>U)oe[Y]=oe[F],he[Y]=he[F],Y=F;else break}oe[Y]=Ae,he[Y]=U}reprioritize(){const L=this.priorityFunction_,Y=this.elements_,oe=this.priorities_;let he=0;const Ae=Y.length;let U,F,e;for(F=0;F<Ae;++F)U=Y[F],e=L(U),e==Y0?delete this.queuedElements_[this.keyFunction_(U)]:(oe[he]=e,Y[he++]=U);Y.length=he,oe.length=he,this.heapify_()}}const Wi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class T_ extends w_{constructor(L,Y){super(function(oe){return L.apply(null,oe)},function(oe){return oe[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=Y,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(L){const Y=super.enqueue(L);return Y&&L[0].addEventListener(da.CHANGE,this.boundHandleTileChange_),Y}getTilesLoading(){return this.tilesLoading_}handleTileChange(L){const Y=L.target,oe=Y.getState();if(oe===Wi.LOADED||oe===Wi.ERROR||oe===Wi.EMPTY){oe!==Wi.ERROR&&Y.removeEventListener(da.CHANGE,this.boundHandleTileChange_);const he=Y.getKey();he in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[he],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(L,Y){let oe=0,he,Ae,U;for(;this.tilesLoading_<L&&oe<Y&&this.getCount()>0;)Ae=this.dequeue()[0],U=Ae.getKey(),he=Ae.getState(),he===Wi.IDLE&&!(U in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[U]=!0,++this.tilesLoading_,++oe,Ae.load())}}function A_(G,L,Y,oe,he){if(!G||!(Y in G.wantedTiles)||!G.wantedTiles[Y][L.getKey()])return Y0;const Ae=G.viewState.center,U=oe[0]-Ae[0],F=oe[1]-Ae[1];return 65536*Math.log(he)+Math.sqrt(U*U+F*F)/he}class t1 extends oc{constructor(L){super();const Y=L.element;Y&&!L.target&&!Y.style.pointerEvents&&(Y.style.pointerEvents="auto"),this.element=Y||null,this.target_=null,this.map_=null,this.listenerKeys=[],L.render&&(this.render=L.render),L.target&&this.setTarget(L.target)}disposeInternal(){em(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(L){this.map_&&em(this.element);for(let Y=0,oe=this.listenerKeys.length;Y<oe;++Y)Oo(this.listenerKeys[Y]);this.listenerKeys.length=0,this.map_=L,L&&((this.target_?this.target_:L.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==B0&&this.listenerKeys.push(Ha(L,qc.POSTRENDER,this.render,this)),L.render())}render(L){}setTarget(L){this.target_=typeof L=="string"?document.getElementById(L):L}}class M_ extends t1{constructor(L){L=L||{},super({element:document.createElement("div"),render:L.render,target:L.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=L.collapsed!==void 0?L.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=L.collapsible!==void 0,this.collapsible_=L.collapsible!==void 0?L.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const Y=L.className!==void 0?L.className:"ol-attribution",oe=L.tipLabel!==void 0?L.tipLabel:"Attributions",he=L.expandClassName!==void 0?L.expandClassName:Y+"-expand",Ae=L.collapseLabel!==void 0?L.collapseLabel:"",U=L.collapseClassName!==void 0?L.collapseClassName:Y+"-collapse";typeof Ae=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Ae,this.collapseLabel_.className=U):this.collapseLabel_=Ae;const F=L.label!==void 0?L.label:"i";typeof F=="string"?(this.label_=document.createElement("span"),this.label_.textContent=F,this.label_.className=he):this.label_=F;const e=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=oe,this.toggleButton_.appendChild(e),this.toggleButton_.addEventListener(da.CLICK,this.handleClick_.bind(this),!1);const d=Y+" "+xg+" "+Qm+(this.collapsed_&&this.collapsible_?" "+Yb:"")+(this.collapsible_?"":" ol-uncollapsible"),S=this.element;S.className=d,S.appendChild(this.toggleButton_),S.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(L){const Y=Array.from(new Set(this.getMap().getAllLayers().flatMap(he=>he.getAttributions(L)))),oe=!this.getMap().getAllLayers().some(he=>he.getSource()&&he.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(oe),Y}async updateElement_(L){if(!L){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const Y=await Promise.all(this.collectSourceAttributions_(L).map(he=>S8(()=>he))),oe=Y.length>0;if(this.renderedVisible_!=oe&&(this.element.style.display=oe?"":"none",this.renderedVisible_=oe),!fg(Y,this.renderedAttributions_)){pL(this.ulElement_);for(let he=0,Ae=Y.length;he<Ae;++he){const U=document.createElement("li");U.innerHTML=Y[he],this.ulElement_.appendChild(U)}this.renderedAttributions_=Y}}handleClick_(L){L.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Yb),this.collapsed_?Gb(this.collapseLabel_,this.label_):Gb(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(L){this.collapsible_!==L&&(this.collapsible_=L,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(L){this.userCollapsed_=L,!(!this.collapsible_||this.collapsed_===L)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(L){this.updateElement_(L.frameState)}}class E_ extends t1{constructor(L){L=L||{},super({element:document.createElement("div"),render:L.render,target:L.target});const Y=L.className!==void 0?L.className:"ol-rotate",oe=L.label!==void 0?L.label:"",he=L.compassClassName!==void 0?L.compassClassName:"ol-compass";this.label_=null,typeof oe=="string"?(this.label_=document.createElement("span"),this.label_.className=he,this.label_.textContent=oe):(this.label_=oe,this.label_.classList.add(he));const Ae=L.tipLabel?L.tipLabel:"Reset rotation",U=document.createElement("button");U.className=Y+"-reset",U.setAttribute("type","button"),U.title=Ae,U.appendChild(this.label_),U.addEventListener(da.CLICK,this.handleClick_.bind(this),!1);const F=Y+" "+xg+" "+Qm,e=this.element;e.className=F,e.appendChild(U),this.callResetNorth_=L.resetNorth?L.resetNorth:void 0,this.duration_=L.duration!==void 0?L.duration:250,this.autoHide_=L.autoHide!==void 0?L.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(x0)}handleClick_(L){L.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const Y=this.getMap().getView();if(!Y)return;const oe=Y.getRotation();oe!==void 0&&(this.duration_>0&&oe%(2*Math.PI)!==0?Y.animate({rotation:0,duration:this.duration_,easing:ad}):Y.setRotation(0))}render(L){const Y=L.frameState;if(!Y)return;const oe=Y.viewState.rotation;if(oe!=this.rotation_){const he="rotate("+oe+"rad)";if(this.autoHide_){const Ae=this.element.classList.contains(x0);!Ae&&oe===0?this.element.classList.add(x0):Ae&&oe!==0&&this.element.classList.remove(x0)}this.label_.style.transform=he}this.rotation_=oe}}class S_ extends t1{constructor(L){L=L||{},super({element:document.createElement("div"),target:L.target});const Y=L.className!==void 0?L.className:"ol-zoom",oe=L.delta!==void 0?L.delta:1,he=L.zoomInClassName!==void 0?L.zoomInClassName:Y+"-in",Ae=L.zoomOutClassName!==void 0?L.zoomOutClassName:Y+"-out",U=L.zoomInLabel!==void 0?L.zoomInLabel:"+",F=L.zoomOutLabel!==void 0?L.zoomOutLabel:"",e=L.zoomInTipLabel!==void 0?L.zoomInTipLabel:"Zoom in",d=L.zoomOutTipLabel!==void 0?L.zoomOutTipLabel:"Zoom out",S=document.createElement("button");S.className=he,S.setAttribute("type","button"),S.title=e,S.appendChild(typeof U=="string"?document.createTextNode(U):U),S.addEventListener(da.CLICK,this.handleClick_.bind(this,oe),!1);const n=document.createElement("button");n.className=Ae,n.setAttribute("type","button"),n.title=d,n.appendChild(typeof F=="string"?document.createTextNode(F):F),n.addEventListener(da.CLICK,this.handleClick_.bind(this,-oe),!1);const E=Y+" "+xg+" "+Qm,T=this.element;T.className=E,T.appendChild(S),T.appendChild(n),this.duration_=L.duration!==void 0?L.duration:250}handleClick_(L,Y){Y.preventDefault(),this.zoomByDelta_(L)}zoomByDelta_(L){const oe=this.getMap().getView();if(!oe)return;const he=oe.getZoom();if(he!==void 0){const Ae=oe.getConstrainedZoom(he+L);this.duration_>0?(oe.getAnimating()&&oe.cancelAnimations(),oe.animate({zoom:Ae,duration:this.duration_,easing:ad})):oe.setZoom(Ae)}}}function C_(G){G=G||{};const L=new ec;return(G.zoom!==void 0?G.zoom:!0)&&L.push(new S_(G.zoomOptions)),(G.rotate!==void 0?G.rotate:!0)&&L.push(new E_(G.rotateOptions)),(G.attribution!==void 0?G.attribution:!0)&&L.push(new M_(G.attributionOptions)),L}const n3={ACTIVE:"active"};class _p extends oc{constructor(L){super(),this.on,this.once,this.un,L&&L.handleEvent&&(this.handleEvent=L.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(n3.ACTIVE)}getMap(){return this.map_}handleEvent(L){return!0}setActive(L){this.set(n3.ACTIVE,L)}setMap(L){this.map_=L}}function L_(G,L,Y){const oe=G.getCenterInternal();if(oe){const he=[oe[0]+L[0],oe[1]+L[1]];G.animateInternal({duration:Y!==void 0?Y:250,easing:wC,center:G.getConstrainedCenter(he)})}}function r1(G,L,Y,oe){const he=G.getZoom();if(he===void 0)return;const Ae=G.getConstrainedZoom(he+L),U=G.getResolutionForZoom(Ae);G.getAnimating()&&G.cancelAnimations(),G.animate({resolution:U,anchor:Y,duration:oe!==void 0?oe:250,easing:ad})}class __ extends _p{constructor(L){super(),L=L||{},this.delta_=L.delta?L.delta:1,this.duration_=L.duration!==void 0?L.duration:250}handleEvent(L){let Y=!1;if(L.type==Lo.DBLCLICK){const oe=L.originalEvent,he=L.map,Ae=L.coordinate,U=oe.shiftKey?-this.delta_:this.delta_,F=he.getView();r1(F,U,Ae,this.duration_),oe.preventDefault(),Y=!0}return!Y}}class Pp extends _p{constructor(L){L=L||{},super(L),L.handleDownEvent&&(this.handleDownEvent=L.handleDownEvent),L.handleDragEvent&&(this.handleDragEvent=L.handleDragEvent),L.handleMoveEvent&&(this.handleMoveEvent=L.handleMoveEvent),L.handleUpEvent&&(this.handleUpEvent=L.handleUpEvent),L.stopDown&&(this.stopDown=L.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(L){return!1}handleDragEvent(L){}handleEvent(L){if(!L.originalEvent)return!0;let Y=!1;if(this.updateTrackedPointers_(L),this.handlingDownUpSequence){if(L.type==Lo.POINTERDRAG)this.handleDragEvent(L),L.originalEvent.preventDefault();else if(L.type==Lo.POINTERUP){const oe=this.handleUpEvent(L);this.handlingDownUpSequence=oe&&this.targetPointers.length>0}}else if(L.type==Lo.POINTERDOWN){const oe=this.handleDownEvent(L);this.handlingDownUpSequence=oe,Y=this.stopDown(oe)}else L.type==Lo.POINTERMOVE&&this.handleMoveEvent(L);return!Y}handleMoveEvent(L){}handleUpEvent(L){return!1}stopDown(L){return L}updateTrackedPointers_(L){L.activePointers&&(this.targetPointers=L.activePointers)}}function n1(G){const L=G.length;let Y=0,oe=0;for(let he=0;he<L;he++)Y+=G[he].clientX,oe+=G[he].clientY;return{clientX:Y/L,clientY:oe/L}}function im(G){const L=arguments;return function(Y){let oe=!0;for(let he=0,Ae=L.length;he<Ae&&(oe=oe&&L[he](Y),!!oe);++he);return oe}}const P_=function(G){const L=G.originalEvent;return L.altKey&&!(L.metaKey||L.ctrlKey)&&L.shiftKey},R_=function(G){const L=G.map.getTargetElement(),Y=G.map.getOwnerDocument().activeElement;return L.contains(Y)},m2=function(G){return G.map.getTargetElement().hasAttribute("tabindex")?R_(G):!0},I_=F0,x2=function(G){const L=G.originalEvent;return L.button==0&&!(vL&&i2&&L.ctrlKey)},b2=function(G){const L=G.originalEvent;return!L.altKey&&!(L.metaKey||L.ctrlKey)&&!L.shiftKey},D_=function(G){const L=G.originalEvent;return i2?L.metaKey:L.ctrlKey},k_=function(G){const L=G.originalEvent;return!L.altKey&&!(L.metaKey||L.ctrlKey)&&L.shiftKey},w2=function(G){const L=G.originalEvent,Y=L.target.tagName;return Y!=="INPUT"&&Y!=="SELECT"&&Y!=="TEXTAREA"&&!L.target.isContentEditable},Cy=function(G){const L=G.originalEvent;return Wa(L!==void 0,"mapBrowserEvent must originate from a pointer event"),L.pointerType=="mouse"},z_=function(G){const L=G.originalEvent;return Wa(L!==void 0,"mapBrowserEvent must originate from a pointer event"),L.isPrimary&&L.button===0};class O_ extends Pp{constructor(L){super({stopDown:cg}),L=L||{},this.kinetic_=L.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const Y=L.condition?L.condition:im(b2,z_);this.condition_=L.onFocusOnly?im(m2,Y):Y,this.noKinetic_=!1}handleDragEvent(L){const Y=L.map;this.panning_||(this.panning_=!0,Y.getView().beginInteraction());const oe=this.targetPointers,he=Y.getEventPixel(n1(oe));if(oe.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(he[0],he[1]),this.lastCentroid){const Ae=[this.lastCentroid[0]-he[0],he[1]-this.lastCentroid[1]],F=L.map.getView();rC(Ae,F.getResolution()),zm(Ae,F.getRotation()),F.adjustCenterInternal(Ae)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=he,this.lastPointersCount_=oe.length,L.originalEvent.preventDefault()}handleUpEvent(L){const Y=L.map,oe=Y.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const he=this.kinetic_.getDistance(),Ae=this.kinetic_.getAngle(),U=oe.getCenterInternal(),F=Y.getPixelFromCoordinateInternal(U),e=Y.getCoordinateFromPixelInternal([F[0]-he*Math.cos(Ae),F[1]-he*Math.sin(Ae)]);oe.animateInternal({center:oe.getConstrainedCenter(e),duration:500,easing:ad})}return this.panning_&&(this.panning_=!1,oe.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(L){if(this.targetPointers.length>0&&this.condition_(L)){const oe=L.map.getView();return this.lastCentroid=null,oe.getAnimating()&&oe.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class F_ extends Pp{constructor(L){L=L||{},super({stopDown:cg}),this.condition_=L.condition?L.condition:P_,this.lastAngle_=void 0,this.duration_=L.duration!==void 0?L.duration:250}handleDragEvent(L){if(!Cy(L))return;const Y=L.map,oe=Y.getView();if(oe.getConstraints().rotation===Hm)return;const he=Y.getSize(),Ae=L.pixel,U=Math.atan2(he[1]/2-Ae[1],Ae[0]-he[0]/2);if(this.lastAngle_!==void 0){const F=U-this.lastAngle_;oe.adjustRotationInternal(-F)}this.lastAngle_=U}handleUpEvent(L){return Cy(L)?(L.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(L){return Cy(L)&&x2(L)&&this.condition_(L)?(L.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class B_ extends Pm{constructor(L){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+L,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const L=this.startPixel_,Y=this.endPixel_,oe="px",he=this.element_.style;he.left=Math.min(L[0],Y[0])+oe,he.top=Math.min(L[1],Y[1])+oe,he.width=Math.abs(Y[0]-L[0])+oe,he.height=Math.abs(Y[1]-L[1])+oe}setMap(L){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const Y=this.element_.style;Y.left="inherit",Y.top="inherit",Y.width="inherit",Y.height="inherit"}this.map_=L,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(L,Y){this.startPixel_=L,this.endPixel_=Y,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const L=this.startPixel_,Y=this.endPixel_,he=[L,[L[0],Y[1]],Y,[Y[0],L[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);he[4]=he[0].slice(),this.geometry_?this.geometry_.setCoordinates([he]):this.geometry_=new up([he])}getGeometry(){return this.geometry_}}const Od={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class b0 extends dh{constructor(L,Y,oe){super(L),this.coordinate=Y,this.mapBrowserEvent=oe}}class N_ extends Pp{constructor(L){super(),this.on,this.once,this.un,L=L||{},this.box_=new B_(L.className||"ol-dragbox"),this.minArea_=L.minArea!==void 0?L.minArea:64,L.onBoxEnd&&(this.onBoxEnd=L.onBoxEnd),this.startPixel_=null,this.condition_=L.condition?L.condition:x2,this.boxEndCondition_=L.boxEndCondition?L.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(L,Y,oe){const he=oe[0]-Y[0],Ae=oe[1]-Y[1];return he*he+Ae*Ae>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(L){this.startPixel_&&(this.box_.setPixels(this.startPixel_,L.pixel),this.dispatchEvent(new b0(Od.BOXDRAG,L.coordinate,L)))}handleUpEvent(L){if(!this.startPixel_)return!1;this.box_.setMap(null);const Y=this.boxEndCondition_(L,this.startPixel_,L.pixel);return Y&&this.onBoxEnd(L),this.dispatchEvent(new b0(Y?Od.BOXEND:Od.BOXCANCEL,L.coordinate,L)),!1}handleDownEvent(L){return this.condition_(L)?(this.startPixel_=L.pixel,this.box_.setMap(L.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new b0(Od.BOXSTART,L.coordinate,L)),!0):!1}onBoxEnd(L){}setActive(L){L||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new b0(Od.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(L)}}class U_ extends N_{constructor(L){L=L||{};const Y=L.condition?L.condition:k_;super({condition:Y,className:L.className||"ol-dragzoom",minArea:L.minArea}),this.duration_=L.duration!==void 0?L.duration:200,this.out_=L.out!==void 0?L.out:!1}onBoxEnd(L){const oe=this.getMap().getView();let he=this.getGeometry();if(this.out_){const Ae=oe.rotatedExtentForGeometry(he),U=oe.getResolutionForExtentInternal(Ae),F=oe.getResolution()/U;he=he.clone(),he.scale(F*F)}oe.fitInternal(he,{duration:this.duration_,easing:ad})}}const Zh={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class V_ extends _p{constructor(L){super(),L=L||{},this.defaultCondition_=function(Y){return b2(Y)&&w2(Y)},this.condition_=L.condition!==void 0?L.condition:this.defaultCondition_,this.duration_=L.duration!==void 0?L.duration:100,this.pixelDelta_=L.pixelDelta!==void 0?L.pixelDelta:128}handleEvent(L){let Y=!1;if(L.type==da.KEYDOWN){const oe=L.originalEvent,he=oe.key;if(this.condition_(L)&&(he==Zh.DOWN||he==Zh.LEFT||he==Zh.RIGHT||he==Zh.UP)){const U=L.map.getView(),F=U.getResolution()*this.pixelDelta_;let e=0,d=0;he==Zh.DOWN?d=-F:he==Zh.LEFT?e=-F:he==Zh.RIGHT?e=F:d=F;const S=[e,d];zm(S,U.getRotation()),L_(U,S,this.duration_),oe.preventDefault(),Y=!0}}return!Y}}class H_ extends _p{constructor(L){super(),L=L||{},this.condition_=L.condition?L.condition:function(Y){return!D_(Y)&&w2(Y)},this.delta_=L.delta?L.delta:1,this.duration_=L.duration!==void 0?L.duration:100}handleEvent(L){let Y=!1;if(L.type==da.KEYDOWN||L.type==da.KEYPRESS){const oe=L.originalEvent,he=oe.key;if(this.condition_(L)&&(he==="+"||he==="-")){const Ae=L.map,U=he==="+"?this.delta_:-this.delta_,F=Ae.getView();r1(F,U,void 0,this.duration_),oe.preventDefault(),Y=!0}}return!Y}}class G_{constructor(L,Y,oe){this.decay_=L,this.minVelocity_=Y,this.delay_=oe,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(L,Y){this.points_.push(L,Y,Date.now())}end(){if(this.points_.length<6)return!1;const L=Date.now()-this.delay_,Y=this.points_.length-3;if(this.points_[Y+2]<L)return!1;let oe=Y-3;for(;oe>0&&this.points_[oe+2]>L;)oe-=3;const he=this.points_[Y+2]-this.points_[oe+2];if(he<1e3/60)return!1;const Ae=this.points_[Y]-this.points_[oe],U=this.points_[Y+1]-this.points_[oe+1];return this.angle_=Math.atan2(U,Ae),this.initialVelocity_=Math.sqrt(Ae*Ae+U*U)/he,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class W_ extends _p{constructor(L){L=L||{},super(L),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=L.maxDelta!==void 0?L.maxDelta:1,this.duration_=L.duration!==void 0?L.duration:250,this.timeout_=L.timeout!==void 0?L.timeout:80,this.useAnchor_=L.useAnchor!==void 0?L.useAnchor:!0,this.constrainResolution_=L.constrainResolution!==void 0?L.constrainResolution:!1;const Y=L.condition?L.condition:I_;this.condition_=L.onFocusOnly?im(m2,Y):Y,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const L=this.getMap();if(!L)return;L.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(L){if(!this.condition_(L)||L.type!==da.WHEEL)return!0;const oe=L.map,he=L.originalEvent;he.preventDefault(),this.useAnchor_&&(this.lastAnchor_=L.coordinate);let Ae;if(L.type==da.WHEEL&&(Ae=he.deltaY,cL&&he.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Ae/=a2),he.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Ae*=40)),Ae===0)return!1;this.lastDelta_=Ae;const U=Date.now();this.startTime_===void 0&&(this.startTime_=U),(!this.mode_||U-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Ae)<4?"trackpad":"wheel");const F=oe.getView();if(this.mode_==="trackpad"&&!(F.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(F.getAnimating()&&F.cancelAnimations(),F.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),F.adjustZoom(-Ae/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=U,!1;this.totalDelta_+=Ae;const e=Math.max(this.timeout_-(U-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,oe),e),!1}handleWheelZoom_(L){const Y=L.getView();Y.getAnimating()&&Y.cancelAnimations();let oe=-is(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(Y.getConstrainResolution()||this.constrainResolution_)&&(oe=oe?oe>0?1:-1:0),r1(Y,oe,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(L){this.useAnchor_=L,L||(this.lastAnchor_=null)}}class Y_ extends Pp{constructor(L){L=L||{};const Y=L;Y.stopDown||(Y.stopDown=cg),super(Y),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=L.threshold!==void 0?L.threshold:.3,this.duration_=L.duration!==void 0?L.duration:250}handleDragEvent(L){let Y=0;const oe=this.targetPointers[0],he=this.targetPointers[1],Ae=Math.atan2(he.clientY-oe.clientY,he.clientX-oe.clientX);if(this.lastAngle_!==void 0){const e=Ae-this.lastAngle_;this.rotationDelta_+=e,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),Y=e}this.lastAngle_=Ae;const U=L.map,F=U.getView();F.getConstraints().rotation!==Hm&&(this.anchor_=U.getCoordinateFromPixelInternal(U.getEventPixel(n1(this.targetPointers))),this.rotating_&&(U.render(),F.adjustRotationInternal(Y,this.anchor_)))}handleUpEvent(L){return this.targetPointers.length<2?(L.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(L){if(this.targetPointers.length>=2){const Y=L.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||Y.getView().beginInteraction(),!0}return!1}}class X_ extends Pp{constructor(L){L=L||{};const Y=L;Y.stopDown||(Y.stopDown=cg),super(Y),this.anchor_=null,this.duration_=L.duration!==void 0?L.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(L){let Y=1;const oe=this.targetPointers[0],he=this.targetPointers[1],Ae=oe.clientX-he.clientX,U=oe.clientY-he.clientY,F=Math.sqrt(Ae*Ae+U*U);this.lastDistance_!==void 0&&(Y=this.lastDistance_/F),this.lastDistance_=F;const e=L.map,d=e.getView();Y!=1&&(this.lastScaleDelta_=Y),this.anchor_=e.getCoordinateFromPixelInternal(e.getEventPixel(n1(this.targetPointers))),e.render(),d.adjustResolutionInternal(Y,this.anchor_)}handleUpEvent(L){if(this.targetPointers.length<2){const oe=L.map.getView(),he=this.lastScaleDelta_>1?1:-1;return oe.endInteraction(this.duration_,he),!1}return!0}handleDownEvent(L){if(this.targetPointers.length>=2){const Y=L.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||Y.getView().beginInteraction(),!0}return!1}}function Z_(G){G=G||{};const L=new ec,Y=new G_(-.005,.05,100);return(G.altShiftDragRotate!==void 0?G.altShiftDragRotate:!0)&&L.push(new F_),(G.doubleClickZoom!==void 0?G.doubleClickZoom:!0)&&L.push(new __({delta:G.zoomDelta,duration:G.zoomDuration})),(G.dragPan!==void 0?G.dragPan:!0)&&L.push(new O_({onFocusOnly:G.onFocusOnly,kinetic:Y})),(G.pinchRotate!==void 0?G.pinchRotate:!0)&&L.push(new Y_),(G.pinchZoom!==void 0?G.pinchZoom:!0)&&L.push(new X_({duration:G.zoomDuration})),(G.keyboard!==void 0?G.keyboard:!0)&&(L.push(new V_),L.push(new H_({delta:G.zoomDelta,duration:G.zoomDuration}))),(G.mouseWheelZoom!==void 0?G.mouseWheelZoom:!0)&&L.push(new W_({onFocusOnly:G.onFocusOnly,duration:G.zoomDuration})),(G.shiftDragZoom!==void 0?G.shiftDragZoom:!0)&&L.push(new U_({duration:G.zoomDuration})),L}function T2(G){if(G instanceof yg){G.setMapInternal(null);return}G instanceof sd&&G.getLayers().forEach(T2)}function A2(G,L){if(G instanceof yg){G.setMapInternal(L);return}if(G instanceof sd){const Y=G.getLayers().getArray();for(let oe=0,he=Y.length;oe<he;++oe)A2(Y[oe],L)}}let M2=class extends oc{constructor(L){super(),L=L||{},this.on,this.once,this.un;const Y=j_(L);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=L.maxTilesLoading!==void 0?L.maxTilesLoading:16,this.pixelRatio_=L.pixelRatio!==void 0?L.pixelRatio:a2,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Jv(),this.pixelToCoordinateTransform_=Jv(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=L.moveTolerance,this.keyboardEventTarget_=Y.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=Y.controls||C_(),this.interactions=Y.interactions||Z_({onFocusOnly:!0}),this.overlays_=Y.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new T_(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(zs.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(zs.VIEW,this.handleViewChanged_),this.addChangeListener(zs.SIZE,this.handleSizeChanged_),this.addChangeListener(zs.TARGET,this.handleTargetChanged_),this.setProperties(Y.values);const oe=this;L.view&&!(L.view instanceof Gu)&&L.view.then(function(he){oe.setView(new Gu(he))}),this.controls.addEventListener(lu.ADD,he=>{he.element.setMap(this)}),this.controls.addEventListener(lu.REMOVE,he=>{he.element.setMap(null)}),this.interactions.addEventListener(lu.ADD,he=>{he.element.setMap(this)}),this.interactions.addEventListener(lu.REMOVE,he=>{he.element.setMap(null)}),this.overlays_.addEventListener(lu.ADD,he=>{this.addOverlayInternal_(he.element)}),this.overlays_.addEventListener(lu.REMOVE,he=>{const Ae=he.element.getId();Ae!==void 0&&delete this.overlayIdIndex_[Ae.toString()],he.element.setMap(null)}),this.controls.forEach(he=>{he.setMap(this)}),this.interactions.forEach(he=>{he.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(L){this.getControls().push(L)}addInteraction(L){this.getInteractions().push(L)}addLayer(L){this.getLayerGroup().getLayers().push(L)}handleLayerAdd_(L){A2(L.layer,this)}addOverlay(L){this.getOverlays().push(L)}addOverlayInternal_(L){const Y=L.getId();Y!==void 0&&(this.overlayIdIndex_[Y.toString()]=L),L.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(L,Y,oe){if(!this.frameState_||!this.renderer_)return;const he=this.getCoordinateFromPixelInternal(L);oe=oe!==void 0?oe:{};const Ae=oe.hitTolerance!==void 0?oe.hitTolerance:0,U=oe.layerFilter!==void 0?oe.layerFilter:F0,F=oe.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(he,this.frameState_,Ae,F,Y,null,U,null)}getFeaturesAtPixel(L,Y){const oe=[];return this.forEachFeatureAtPixel(L,function(he){oe.push(he)},Y),oe}getAllLayers(){const L=[];function Y(oe){oe.forEach(function(he){he instanceof sd?Y(he.getLayers()):L.push(he)})}return Y(this.getLayers()),L}hasFeatureAtPixel(L,Y){if(!this.frameState_||!this.renderer_)return!1;const oe=this.getCoordinateFromPixelInternal(L);Y=Y!==void 0?Y:{};const he=Y.layerFilter!==void 0?Y.layerFilter:F0,Ae=Y.hitTolerance!==void 0?Y.hitTolerance:0,U=Y.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(oe,this.frameState_,Ae,U,he,null)}getEventCoordinate(L){return this.getCoordinateFromPixel(this.getEventPixel(L))}getEventCoordinateInternal(L){return this.getCoordinateFromPixelInternal(this.getEventPixel(L))}getEventPixel(L){const oe=this.viewport_.getBoundingClientRect(),he=this.getSize(),Ae=oe.width/he[0],U=oe.height/he[1],F="changedTouches"in L?L.changedTouches[0]:L;return[(F.clientX-oe.left)/Ae,(F.clientY-oe.top)/U]}getTarget(){return this.get(zs.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(L){return qy(this.getCoordinateFromPixelInternal(L),this.getView().getProjection())}getCoordinateFromPixelInternal(L){const Y=this.frameState_;return Y?su(Y.pixelToCoordinateTransform,L.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(L){const Y=this.overlayIdIndex_[L.toString()];return Y!==void 0?Y:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(zs.LAYERGROUP)}setLayers(L){const Y=this.getLayerGroup();if(L instanceof ec){Y.setLayers(L);return}const oe=Y.getLayers();oe.clear(),oe.extend(L)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const L=this.getLayerGroup().getLayerStatesArray();for(let Y=0,oe=L.length;Y<oe;++Y){const he=L[Y];if(!he.visible)continue;const Ae=he.layer.getRenderer();if(Ae&&!Ae.ready)return!0;const U=he.layer.getSource();if(U&&U.loading)return!0}return!1}getPixelFromCoordinate(L){const Y=Qf(L,this.getView().getProjection());return this.getPixelFromCoordinateInternal(Y)}getPixelFromCoordinateInternal(L){const Y=this.frameState_;return Y?su(Y.coordinateToPixelTransform,L.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(zs.SIZE)}getView(){return this.get(zs.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const L=this.getTargetElement();return L?L.ownerDocument:document}getTilePriority(L,Y,oe,he){return A_(this.frameState_,L,Y,oe,he)}handleBrowserEvent(L,Y){Y=Y||L.type;const oe=new $c(Y,this,L);this.handleMapBrowserEvent(oe)}handleMapBrowserEvent(L){if(!this.frameState_)return;const Y=L.originalEvent,oe=Y.type;if(oe===nm.POINTERDOWN||oe===da.WHEEL||oe===da.KEYDOWN){const he=this.getOwnerDocument(),Ae=this.viewport_.getRootNode?this.viewport_.getRootNode():he,U=Y.target;if(this.overlayContainerStopEvent_.contains(U)||!(Ae===he?he.documentElement:Ae).contains(U))return}if(L.frameState=this.frameState_,this.dispatchEvent(L)!==!1){const he=this.getInteractions().getArray().slice();for(let Ae=he.length-1;Ae>=0;Ae--){const U=he[Ae];if(U.getMap()!==this||!U.getActive()||!this.getTargetElement())continue;if(!U.handleEvent(L)||L.propagationStopped)break}}}handlePostRender(){const L=this.frameState_,Y=this.tileQueue_;if(!Y.isEmpty()){let he=this.maxTilesLoading_,Ae=he;if(L){const U=L.viewHints;if(U[ou.ANIMATING]||U[ou.INTERACTING]){const F=Date.now()-L.time>8;he=F?0:8,Ae=F?0:2}}Y.getTilesLoading()<he&&(Y.reprioritize(),Y.loadMoreTiles(he,Ae))}L&&this.renderer_&&!L.animate&&(this.renderComplete_===!0?(this.hasListener(mf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(mf.RENDERCOMPLETE,L),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Uv(qc.LOADEND,this,L)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Uv(qc.LOADSTART,this,L))));const oe=this.postRenderFunctions_;for(let he=0,Ae=oe.length;he<Ae;++he)oe[he](this,L);oe.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let oe=0,he=this.targetChangeHandlerKeys_.length;oe<he;++oe)Oo(this.targetChangeHandlerKeys_[oe]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(da.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(da.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,em(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const oe=this.targetElement_.getRootNode();oe instanceof ShadowRoot&&this.resizeObserver_.unobserve(oe.host),this.setSize(void 0)}const L=this.getTarget(),Y=typeof L=="string"?document.getElementById(L):L;if(this.targetElement_=Y,!Y)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{Y.appendChild(this.viewport_),this.renderer_||(this.renderer_=new x_(this)),this.mapBrowserEventHandler_=new b_(this,this.moveTolerance_);for(const Ae in Lo)this.mapBrowserEventHandler_.addEventListener(Lo[Ae],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(da.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(da.WHEEL,this.boundHandleBrowserEvent_,s2?{passive:!1}:!1);const oe=this.keyboardEventTarget_?this.keyboardEventTarget_:Y;this.targetChangeHandlerKeys_=[Ha(oe,da.KEYDOWN,this.handleBrowserEvent,this),Ha(oe,da.KEYPRESS,this.handleBrowserEvent,this)];const he=Y.getRootNode();he instanceof ShadowRoot&&this.resizeObserver_.observe(he.host),this.resizeObserver_.observe(Y)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Oo(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Oo(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const L=this.getView();L&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ha(L,ap.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ha(L,da.CHANGE,this.handleViewPropertyChanged_,this),L.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Oo),this.layerGroupPropertyListenerKeys_=null);const L=this.getLayerGroup();L&&(this.handleLayerAdd_(new ih("addlayer",L)),this.layerGroupPropertyListenerKeys_=[Ha(L,ap.PROPERTYCHANGE,this.render,this),Ha(L,da.CHANGE,this.render,this),Ha(L,"addlayer",this.handleLayerAdd_,this),Ha(L,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const L=this.getLayerGroup().getLayerStatesArray();for(let Y=0,oe=L.length;Y<oe;++Y){const he=L[Y].layer;he.hasRenderer()&&he.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(L){return this.getControls().remove(L)}removeInteraction(L){return this.getInteractions().remove(L)}removeLayer(L){return this.getLayerGroup().getLayers().remove(L)}handleLayerRemove_(L){T2(L.layer)}removeOverlay(L){return this.getOverlays().remove(L)}renderFrame_(L){const Y=this.getSize(),oe=this.getView(),he=this.frameState_;let Ae=null;if(Y!==void 0&&Nb(Y)&&oe&&oe.isDef()){const U=oe.getHints(this.frameState_?this.frameState_.viewHints:void 0),F=oe.getState();if(Ae={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Jy(F.center,F.resolution,F.rotation,Y),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:Y,tileQueue:this.tileQueue_,time:L,usedTiles:{},viewState:F,viewHints:U,wantedTiles:{},mapId:Ks(this),renderTargets:{}},F.nextCenter&&F.nextResolution){const e=isNaN(F.nextRotation)?F.rotation:F.nextRotation;Ae.nextExtent=Jy(F.nextCenter,F.nextResolution,e,Y)}}this.frameState_=Ae,this.renderer_.renderFrame(Ae),Ae&&(Ae.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Ae.postRenderFunctions),he&&(!this.previousExtent_||!Sp(this.previousExtent_)&&!jy(Ae.extent,this.previousExtent_))&&(this.dispatchEvent(new Uv(qc.MOVESTART,this,he)),this.previousExtent_=Mp(this.previousExtent_)),this.previousExtent_&&!Ae.viewHints[ou.ANIMATING]&&!Ae.viewHints[ou.INTERACTING]&&!jy(Ae.extent,this.previousExtent_)&&(this.dispatchEvent(new Uv(qc.MOVEEND,this,Ae)),G8(Ae.extent,this.previousExtent_))),this.dispatchEvent(new Uv(qc.POSTRENDER,this,Ae)),this.renderComplete_=this.hasListener(qc.LOADSTART)||this.hasListener(qc.LOADEND)||this.hasListener(mf.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(L){const Y=this.getLayerGroup();Y&&this.handleLayerRemove_(new ih("removelayer",Y)),this.set(zs.LAYERGROUP,L)}setSize(L){this.set(zs.SIZE,L)}setTarget(L){this.set(zs.TARGET,L)}setView(L){if(!L||L instanceof Gu){this.set(zs.VIEW,L);return}this.set(zs.VIEW,new Gu);const Y=this;L.then(function(oe){Y.setView(new Gu(oe))})}updateSize(){const L=this.getTargetElement();let Y;if(L){const he=getComputedStyle(L),Ae=L.offsetWidth-parseFloat(he.borderLeftWidth)-parseFloat(he.paddingLeft)-parseFloat(he.paddingRight)-parseFloat(he.borderRightWidth),U=L.offsetHeight-parseFloat(he.borderTopWidth)-parseFloat(he.paddingTop)-parseFloat(he.paddingBottom)-parseFloat(he.borderBottomWidth);!isNaN(Ae)&&!isNaN(U)&&(Y=[Ae,U],!Nb(Y)&&(L.offsetWidth||L.offsetHeight||L.getClientRects().length)&&Vw("No map visible because the map container's width or height are 0."))}const oe=this.getSize();Y&&(!oe||!fg(Y,oe))&&(this.setSize(Y),this.updateViewportSize_(Y))}updateViewportSize_(L){const Y=this.getView();Y&&Y.setViewportSize(L)}};function j_(G){let L=null;G.keyboardEventTarget!==void 0&&(L=typeof G.keyboardEventTarget=="string"?document.getElementById(G.keyboardEventTarget):G.keyboardEventTarget);const Y={},oe=G.layers&&typeof G.layers.getLayers=="function"?G.layers:new sd({layers:G.layers});Y[zs.LAYERGROUP]=oe,Y[zs.TARGET]=G.target,Y[zs.VIEW]=G.view instanceof Gu?G.view:new Gu;let he;G.controls!==void 0&&(Array.isArray(G.controls)?he=new ec(G.controls.slice()):(Wa(typeof G.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),he=G.controls));let Ae;G.interactions!==void 0&&(Array.isArray(G.interactions)?Ae=new ec(G.interactions.slice()):(Wa(typeof G.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),Ae=G.interactions));let U;return G.overlays!==void 0?Array.isArray(G.overlays)?U=new ec(G.overlays.slice()):(Wa(typeof G.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),U=G.overlays):U=new ec,{controls:he,interactions:Ae,keyboardEventTarget:L,overlays:U,values:Y}}const w0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class K_ extends yg{constructor(L){L=L||{};const Y=Object.assign({},L);delete Y.preload,delete Y.useInterimTilesOnError,super(Y),this.on,this.once,this.un,this.setPreload(L.preload!==void 0?L.preload:0),this.setUseInterimTilesOnError(L.useInterimTilesOnError!==void 0?L.useInterimTilesOnError:!0)}getPreload(){return this.get(w0.PRELOAD)}setPreload(L){this.set(w0.PRELOAD,L)}getUseInterimTilesOnError(){return this.get(w0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(L){this.set(w0.USE_INTERIM_TILES_ON_ERROR,L)}getData(L){return super.getData(L)}}class J_ extends Tp{constructor(L){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=L}getFeatures(L){return Ia()}getData(L){return null}prepareFrame(L){return Ia()}renderFrame(L,Y){return Ia()}loadedTileCallback(L,Y,oe){L[Y]||(L[Y]={}),L[Y][oe.tileCoord.toString()]=oe}createLoadedTileFinder(L,Y,oe){return(he,Ae)=>{const U=this.loadedTileCallback.bind(this,oe,he);return L.forEachLoadedTile(Y,he,Ae,U)}}forEachFeatureAtCoordinate(L,Y,oe,he,Ae){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(L){const Y=L.target;(Y.getState()===Aa.LOADED||Y.getState()===Aa.ERROR)&&this.renderIfReadyAndVisible()}loadImage(L){let Y=L.getState();return Y!=Aa.LOADED&&Y!=Aa.ERROR&&L.addEventListener(da.CHANGE,this.boundHandleImageChange_),Y==Aa.IDLE&&(L.load(),Y=L.getState()),Y==Aa.LOADED}renderIfReadyAndVisible(){const L=this.getLayer();L&&L.getVisible()&&L.getSourceState()==="ready"&&L.changed()}renderDeferred(L){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Q_{constructor(){px(this,"pushMethodArgs_",(...L)=>(this.instructions_[this.zIndex+this.offset_].push(L),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(H0(),{get:(L,Y)=>{if(typeof H0()[Y]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(Y),this.pushMethodArgs_},set:(L,Y,oe)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(Y,oe),!0)})}pushFunction(L){this.instructions_[this.zIndex+this.offset_].push(L)}getContext(){return this.context_}draw(L){this.instructions_.forEach(Y=>{for(let oe=0,he=Y.length;oe<he;++oe){const Ae=Y[oe];if(typeof Ae=="function"){Ae(L);continue}const U=Y[++oe];if(typeof L[Ae]=="function")L[Ae](...U);else{if(typeof U=="function"){L[Ae]=U(L);continue}L[Ae]=U}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}let Vv=null;function $_(){Vv=du(1,1,void 0,{willReadFrequently:!0})}class q_ extends J_{constructor(L){super(L),this.container=null,this.renderedResolution,this.tempTransform=Jv(),this.pixelTransform=Jv(),this.inversePixelTransform=Jv(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(L,Y,oe){Vv||$_(),Vv.clearRect(0,0,1,1);let he;try{Vv.drawImage(L,Y,oe,1,1,0,0,1,1),he=Vv.getImageData(0,0,1,1).data}catch{return Vv=null,null}return he}getBackground(L){let oe=this.getLayer().getBackground();return typeof oe=="function"&&(oe=oe(L.viewState.resolution)),oe||void 0}useContainer(L,Y,oe){const he=this.getLayer().getClassName();let Ae,U;if(L&&L.className===he&&(!oe||L&&L.style.backgroundColor&&fg(cp(L.style.backgroundColor),cp(oe)))){const F=L.firstElementChild;F instanceof HTMLCanvasElement&&(U=F.getContext("2d"))}if(U&&U.canvas.style.transform===Y?(this.container=L,this.context=U,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Ae=document.createElement("div"),Ae.className=he;let F=Ae.style;F.position="absolute",F.width="100%",F.height="100%",U=du();const e=U.canvas;Ae.appendChild(e),F=e.style,F.position="absolute",F.left="0",F.transformOrigin="top left",this.container=Ae,this.context=U}!this.containerReused&&oe&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=oe)}clipUnrotated(L,Y,oe){const he=nv(oe),Ae=gg(oe),U=pg(oe),F=dg(oe);su(Y.coordinateToPixelTransform,he),su(Y.coordinateToPixelTransform,Ae),su(Y.coordinateToPixelTransform,U),su(Y.coordinateToPixelTransform,F);const e=this.inversePixelTransform;su(e,he),su(e,Ae),su(e,U),su(e,F),L.save(),L.beginPath(),L.moveTo(Math.round(he[0]),Math.round(he[1])),L.lineTo(Math.round(Ae[0]),Math.round(Ae[1])),L.lineTo(Math.round(U[0]),Math.round(U[1])),L.lineTo(Math.round(F[0]),Math.round(F[1])),L.clip()}prepareContainer(L,Y){const oe=L.extent,he=L.viewState.resolution,Ae=L.viewState.rotation,U=L.pixelRatio,F=Math.round(ao(oe)/he*U),e=Math.round(Dl(oe)/he*U);sp(this.pixelTransform,L.size[0]/2,L.size[1]/2,1/U,1/U,Ae,-F/2,-e/2),Yw(this.inversePixelTransform,this.pixelTransform);const d=AC(this.pixelTransform);if(this.useContainer(Y,d,this.getBackground(L)),!this.containerReused){const S=this.context.canvas;S.width!=F||S.height!=e?(S.width=F,S.height=e):this.context.clearRect(0,0,F,e),d!==S.style.transform&&(S.style.transform=d)}}dispatchRenderEvent_(L,Y,oe){const he=this.getLayer();if(he.hasListener(L)){const Ae=new y2(L,this.inversePixelTransform,oe,Y);he.dispatchEvent(Ae)}}preRender(L,Y){this.frameState=Y,!Y.declutter&&this.dispatchRenderEvent_(mf.PRERENDER,L,Y)}postRender(L,Y){Y.declutter||this.dispatchRenderEvent_(mf.POSTRENDER,L,Y)}renderDeferredInternal(L){}getRenderContext(L){return L.declutter&&!this.deferredContext_&&(this.deferredContext_=new Q_),L.declutter?this.deferredContext_.getContext():this.context}renderDeferred(L){L.declutter&&(this.dispatchRenderEvent_(mf.PRERENDER,this.context,L),L.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(L),this.dispatchRenderEvent_(mf.POSTRENDER,this.context,L))}getRenderTransform(L,Y,oe,he,Ae,U,F){const e=Ae/2,d=U/2,S=he/Y,n=-S,E=-L[0]+F,T=-L[1];return sp(this.tempTransform,e,d,S,n,-oe,E,T)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class E2 extends vg{constructor(L,Y,oe){super(),oe=oe||{},this.tileCoord=L,this.state=Y,this.interimTile=null,this.key="",this.transition_=oe.transition===void 0?250:oe.transition,this.transitionStarts_={},this.interpolate=!!oe.interpolate}changed(){this.dispatchEvent(da.CHANGE)}release(){this.state===Wi.ERROR&&this.setState(Wi.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let L=this.interimTile;if(!L)return this;do{if(L.getState()==Wi.LOADED)return this.transition_=0,L;L=L.interimTile}while(L);return this}refreshInterimChain(){let L=this.interimTile;if(!L)return;let Y=this;do{if(L.getState()==Wi.LOADED){L.interimTile=null;break}L.getState()==Wi.LOADING?Y=L:L.getState()==Wi.IDLE?Y.interimTile=L.interimTile:Y=L,L=Y.interimTile}while(L)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(L){if(this.state!==Wi.ERROR&&this.state>L)throw new Error("Tile load sequence violation");this.state=L,this.changed()}load(){Ia()}getAlpha(L,Y){if(!this.transition_)return 1;let oe=this.transitionStarts_[L];if(!oe)oe=Y,this.transitionStarts_[L]=oe;else if(oe===-1)return 1;const he=Y-oe+1e3/60;return he>=this.transition_?1:Ww(he/this.transition_)}inTransition(L){return this.transition_?this.transitionStarts_[L]!==-1:!1}endTransition(L){this.transition_&&(this.transitionStarts_[L]=-1)}}class S2 extends E2{constructor(L,Y,oe,he,Ae,U){super(L,Y,U),this.crossOrigin_=he,this.src_=oe,this.key=oe,this.image_=new Image,he!==null&&(this.image_.crossOrigin=he),this.unlisten_=null,this.tileLoadFunction_=Ae}getImage(){return this.image_}setImage(L){this.image_=L,this.state=Wi.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Wi.ERROR,this.unlistenImage_(),this.image_=e7(),this.changed()}handleImageLoad_(){const L=this.image_;L.naturalWidth&&L.naturalHeight?this.state=Wi.LOADED:this.state=Wi.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Wi.ERROR&&(this.state=Wi.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Wi.IDLE&&(this.state=Wi.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=yL(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function e7(){const G=du(1,1);return G.fillStyle="rgba(0,0,0,0)",G.fillRect(0,0,1,1),G.canvas}const t7=.5,r7=10,i3=.25;class n7{constructor(L,Y,oe,he,Ae,U){this.sourceProj_=L,this.targetProj_=Y;let F={};const e=op(this.targetProj_,this.sourceProj_);this.transformInv_=function(o){const i=o[0]+"/"+o[1];return F[i]||(F[i]=e(o)),F[i]},this.maxSourceExtent_=he,this.errorThresholdSquared_=Ae*Ae,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!he&&!!this.sourceProj_.getExtent()&&ao(he)>=ao(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ao(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ao(this.targetProj_.getExtent()):null;const d=nv(oe),S=gg(oe),n=pg(oe),E=dg(oe),T=this.transformInv_(d),v=this.transformInv_(S),g=this.transformInv_(n),r=this.transformInv_(E),t=r7+(U?Math.max(0,Math.ceil(Math.log2(Ky(oe)/(U*U*256*256)))):0);if(this.addQuad_(d,S,n,E,T,v,g,r,t),this.wrapsXInSource_){let o=1/0;this.triangles_.forEach(function(i,f,u){o=Math.min(o,i.source[0][0],i.source[1][0],i.source[2][0])}),this.triangles_.forEach(i=>{if(Math.max(i.source[0][0],i.source[1][0],i.source[2][0])-o>this.sourceWorldWidth_/2){const f=[[i.source[0][0],i.source[0][1]],[i.source[1][0],i.source[1][1]],[i.source[2][0],i.source[2][1]]];f[0][0]-o>this.sourceWorldWidth_/2&&(f[0][0]-=this.sourceWorldWidth_),f[1][0]-o>this.sourceWorldWidth_/2&&(f[1][0]-=this.sourceWorldWidth_),f[2][0]-o>this.sourceWorldWidth_/2&&(f[2][0]-=this.sourceWorldWidth_);const u=Math.min(f[0][0],f[1][0],f[2][0]);Math.max(f[0][0],f[1][0],f[2][0])-u<this.sourceWorldWidth_/2&&(i.source=f)}})}F={}}addTriangle_(L,Y,oe,he,Ae,U){this.triangles_.push({source:[he,Ae,U],target:[L,Y,oe]})}addQuad_(L,Y,oe,he,Ae,U,F,e,d){const S=Mb([Ae,U,F,e]),n=this.sourceWorldWidth_?ao(S)/this.sourceWorldWidth_:null,E=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&n>.5&&n<1;let v=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const r=Mb([L,Y,oe,he]);v=ao(r)/this.targetWorldWidth_>i3||v}!T&&this.sourceProj_.isGlobal()&&n&&(v=n>i3||v)}if(!v&&this.maxSourceExtent_&&isFinite(S[0])&&isFinite(S[1])&&isFinite(S[2])&&isFinite(S[3])&&!Ep(S,this.maxSourceExtent_))return;let g=0;if(!v&&(!isFinite(Ae[0])||!isFinite(Ae[1])||!isFinite(U[0])||!isFinite(U[1])||!isFinite(F[0])||!isFinite(F[1])||!isFinite(e[0])||!isFinite(e[1]))){if(d>0)v=!0;else if(g=(!isFinite(Ae[0])||!isFinite(Ae[1])?8:0)+(!isFinite(U[0])||!isFinite(U[1])?4:0)+(!isFinite(F[0])||!isFinite(F[1])?2:0)+(!isFinite(e[0])||!isFinite(e[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(d>0){if(!v){const r=[(L[0]+oe[0])/2,(L[1]+oe[1])/2],t=this.transformInv_(r);let o;T?o=(jv(Ae[0],E)+jv(F[0],E))/2-jv(t[0],E):o=(Ae[0]+F[0])/2-t[0];const i=(Ae[1]+F[1])/2-t[1];v=o*o+i*i>this.errorThresholdSquared_}if(v){if(Math.abs(L[0]-oe[0])<=Math.abs(L[1]-oe[1])){const r=[(Y[0]+oe[0])/2,(Y[1]+oe[1])/2],t=this.transformInv_(r),o=[(he[0]+L[0])/2,(he[1]+L[1])/2],i=this.transformInv_(o);this.addQuad_(L,Y,r,o,Ae,U,t,i,d-1),this.addQuad_(o,r,oe,he,i,t,F,e,d-1)}else{const r=[(L[0]+Y[0])/2,(L[1]+Y[1])/2],t=this.transformInv_(r),o=[(oe[0]+he[0])/2,(oe[1]+he[1])/2],i=this.transformInv_(o);this.addQuad_(L,r,o,he,Ae,t,i,e,d-1),this.addQuad_(r,Y,oe,o,t,U,F,i,d-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}g&11||this.addTriangle_(L,oe,he,Ae,F,e),g&14||this.addTriangle_(L,oe,Y,Ae,F,U),g&&(g&13||this.addTriangle_(Y,he,L,U,e,Ae),g&7||this.addTriangle_(Y,he,oe,U,e,F))}calculateSourceExtent(){const L=rv();return this.triangles_.forEach(function(Y,oe,he){const Ae=Y.source;L0(L,Ae[0]),L0(L,Ae[1]),L0(L,Ae[2])}),L}getTriangles(){return this.triangles_}}let Ly;const Qv=[];function a3(G,L,Y,oe,he){G.beginPath(),G.moveTo(0,0),G.lineTo(L,Y),G.lineTo(oe,he),G.closePath(),G.save(),G.clip(),G.fillRect(0,0,Math.max(L,oe)+1,Math.max(Y,he)),G.restore()}function _y(G,L){return Math.abs(G[L*4]-210)>2||Math.abs(G[L*4+3]-.75*255)>2}function i7(){if(Ly===void 0){const G=du(6,6,Qv);G.globalCompositeOperation="lighter",G.fillStyle="rgba(210, 0, 0, 0.75)",a3(G,4,5,4,0),a3(G,4,5,0,5);const L=G.getImageData(0,0,3,3).data;Ly=_y(L,0)||_y(L,4)||_y(L,8),Km(G),Qv.push(G.canvas)}return Ly}function o3(G,L,Y,oe){const he=Nm(Y,L,G);let Ae=Cb(L,oe,Y);const U=L.getMetersPerUnit();U!==void 0&&(Ae*=U);const F=G.getMetersPerUnit();F!==void 0&&(Ae/=F);const e=G.getExtent();if(!e||km(e,he)){const d=Cb(G,Ae,he)/Ae;isFinite(d)&&d>0&&(Ae/=d)}return Ae}function a7(G,L,Y,oe){const he=ed(Y);let Ae=o3(G,L,he,oe);return(!isFinite(Ae)||Ae<=0)&&Uw(Y,function(U){return Ae=o3(G,L,U,oe),isFinite(Ae)&&Ae>0}),Ae}function o7(G,L,Y,oe,he,Ae,U,F,e,d,S,n,E,T){const v=du(Math.round(Y*G),Math.round(Y*L),Qv);if(n||(v.imageSmoothingEnabled=!1),e.length===0)return v.canvas;v.scale(Y,Y);function g(u){return Math.round(u*Y)/Y}v.globalCompositeOperation="lighter";const r=rv();e.forEach(function(u,l,m){Z8(r,u.extent)});let t;const o=Y/oe,i=(n?1:1+Math.pow(2,-24))/o;{if(t=du(Math.round(ao(r)*o),Math.round(Dl(r)*o),Qv),n||(t.imageSmoothingEnabled=!1),he&&T){const u=(he[0]-r[0])*o,l=-(he[3]-r[3])*o,m=ao(he)*o,h=Dl(he)*o;t.rect(u,l,m,h),t.clip()}e.forEach(function(u,l,m){if(u.image.width>0&&u.image.height>0){if(u.clipExtent){t.save();const p=(u.clipExtent[0]-r[0])*o,x=-(u.clipExtent[3]-r[3])*o,A=ao(u.clipExtent)*o,P=Dl(u.clipExtent)*o;t.rect(n?p:Math.round(p),n?x:Math.round(x),n?A:Math.round(p+A)-Math.round(p),n?P:Math.round(x+P)-Math.round(x)),t.clip()}const h=(u.extent[0]-r[0])*o,w=-(u.extent[3]-r[3])*o,c=ao(u.extent)*o,a=Dl(u.extent)*o;t.drawImage(u.image,d,d,u.image.width-2*d,u.image.height-2*d,n?h:Math.round(h),n?w:Math.round(w),n?c:Math.round(h+c)-Math.round(h),n?a:Math.round(w+a)-Math.round(w)),u.clipExtent&&t.restore()}})}const f=nv(U);return F.getTriangles().forEach(function(u,l,m){const h=u.source,w=u.target;let c=h[0][0],a=h[0][1],p=h[1][0],x=h[1][1],A=h[2][0],P=h[2][1];const y=g((w[0][0]-f[0])/Ae),C=g(-(w[0][1]-f[1])/Ae),M=g((w[1][0]-f[0])/Ae),s=g(-(w[1][1]-f[1])/Ae),_=g((w[2][0]-f[0])/Ae),b=g(-(w[2][1]-f[1])/Ae),k=c,D=a;c=0,a=0,p-=k,x-=D,A-=k,P-=D;const V=[[p,x,0,0,M-y],[A,P,0,0,_-y],[0,0,p,x,s-C],[0,0,A,P,b-C]],O=P8(V);if(!O)return;if(v.save(),v.beginPath(),i7()||!n){v.moveTo(M,s);const B=4,z=y-M,H=C-s;for(let X=0;X<B;X++)v.lineTo(M+g((X+1)*z/B),s+g(X*H/(B-1))),X!=B-1&&v.lineTo(M+g((X+1)*z/B),s+g((X+1)*H/(B-1)));v.lineTo(_,b)}else v.moveTo(M,s),v.lineTo(y,C),v.lineTo(_,b);v.clip(),v.transform(O[0],O[2],O[1],O[3],y,C),v.translate(r[0]-k,r[3]-D);let N;if(t)N=t.canvas,v.scale(i,-i);else{const B=e[0],z=B.extent;N=B.image,v.scale(ao(z)/N.width,-Dl(z)/N.height)}v.drawImage(N,0,0),v.restore()}),t&&(Km(t),Qv.push(t.canvas)),S&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,F.getTriangles().forEach(function(u,l,m){const h=u.target,w=(h[0][0]-f[0])/Ae,c=-(h[0][1]-f[1])/Ae,a=(h[1][0]-f[0])/Ae,p=-(h[1][1]-f[1])/Ae,x=(h[2][0]-f[0])/Ae,A=-(h[2][1]-f[1])/Ae;v.beginPath(),v.moveTo(a,p),v.lineTo(w,c),v.lineTo(x,A),v.closePath(),v.stroke()}),v.restore()),v.canvas}class am extends E2{constructor(L,Y,oe,he,Ae,U,F,e,d,S,n,E){super(Ae,Wi.IDLE,E),this.renderEdges_=n!==void 0?n:!1,this.pixelRatio_=F,this.gutter_=e,this.canvas_=null,this.sourceTileGrid_=Y,this.targetTileGrid_=he,this.wrappedTileCoord_=U||Ae,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=L.canWrapX()?L.getExtent():void 0;const T=he.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const r=v?Kd(T,v):T;if(Ky(r)===0){this.state=Wi.EMPTY;return}const t=L.getExtent();t&&(g?g=Kd(g,t):g=t);const o=he.getResolution(this.wrappedTileCoord_[0]),i=a7(L,oe,r,o);if(!isFinite(i)||i<=0){this.state=Wi.EMPTY;return}const f=S!==void 0?S:t7;if(this.triangulation_=new n7(L,oe,r,g,i*f,o),this.triangulation_.getTriangles().length===0){this.state=Wi.EMPTY;return}this.sourceZ_=Y.getZForResolution(i);let u=this.triangulation_.calculateSourceExtent();if(g&&(L.canWrapX()?(u[1]=is(u[1],g[1],g[3]),u[3]=is(u[3],g[1],g[3])):u=Kd(u,g)),!Ky(u))this.state=Wi.EMPTY;else{let l=0,m=0;L.canWrapX()&&(l=ao(t),m=Math.floor((u[0]-t[0])/l)),eC(u.slice(),L,!0).forEach(w=>{const c=Y.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let a=c.minX;a<=c.maxX;a++)for(let p=c.minY;p<=c.maxY;p++){const x=d(this.sourceZ_,a,p,F);if(x){const A=m*l;this.sourceTiles_.push({tile:x,offset:A})}}++m}),this.sourceTiles_.length===0&&(this.state=Wi.EMPTY)}}getImage(){return this.canvas_}reproject_(){const L=[];if(this.sourceTiles_.forEach(Y=>{var he;const oe=Y.tile;if(oe&&oe.getState()==Wi.LOADED){const Ae=this.sourceTileGrid_.getTileCoordExtent(oe.tileCoord);Ae[0]+=Y.offset,Ae[2]+=Y.offset;const U=(he=this.clipExtent_)==null?void 0:he.slice();U&&(U[0]+=Y.offset,U[2]+=Y.offset),L.push({extent:Ae,clipExtent:U,image:oe.getImage()})}}),this.sourceTiles_.length=0,L.length===0)this.state=Wi.ERROR;else{const Y=this.wrappedTileCoord_[0],oe=this.targetTileGrid_.getTileSize(Y),he=typeof oe=="number"?oe:oe[0],Ae=typeof oe=="number"?oe:oe[1],U=this.targetTileGrid_.getResolution(Y),F=this.sourceTileGrid_.getResolution(this.sourceZ_),e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=o7(he,Ae,this.pixelRatio_,F,this.sourceTileGrid_.getExtent(),U,e,this.triangulation_,L,this.gutter_,this.renderEdges_,this.interpolate),this.state=Wi.LOADED}this.changed()}load(){if(this.state==Wi.IDLE){this.state=Wi.LOADING,this.changed();let L=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:Y})=>{const oe=Y.getState();if(oe==Wi.IDLE||oe==Wi.LOADING){L++;const he=Ha(Y,da.CHANGE,function(Ae){const U=Y.getState();(U==Wi.LOADED||U==Wi.ERROR||U==Wi.EMPTY)&&(Oo(he),L--,L===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(he)}}),L===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:Y},oe,he){Y.getState()==Wi.IDLE&&Y.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Oo),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Km(this.canvas_.getContext("2d")),Qv.push(this.canvas_),this.canvas_=null),super.release()}}class i1{constructor(L,Y,oe,he){this.minX=L,this.maxX=Y,this.minY=oe,this.maxY=he}contains(L){return this.containsXY(L[1],L[2])}containsTileRange(L){return this.minX<=L.minX&&L.maxX<=this.maxX&&this.minY<=L.minY&&L.maxY<=this.maxY}containsXY(L,Y){return this.minX<=L&&L<=this.maxX&&this.minY<=Y&&Y<=this.maxY}equals(L){return this.minX==L.minX&&this.minY==L.minY&&this.maxX==L.maxX&&this.maxY==L.maxY}extend(L){L.minX<this.minX&&(this.minX=L.minX),L.maxX>this.maxX&&(this.maxX=L.maxX),L.minY<this.minY&&(this.minY=L.minY),L.maxY>this.maxY&&(this.maxY=L.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(L){return this.minX<=L.maxX&&this.maxX>=L.minX&&this.minY<=L.maxY&&this.maxY>=L.minY}}function zv(G,L,Y,oe,he){return he!==void 0?(he.minX=G,he.maxX=L,he.minY=Y,he.maxY=oe,he):new i1(G,L,Y,oe)}class s7 extends q_{constructor(L){super(L),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=rv(),this.tmpTileRange_=new i1(0,0,0,0)}isDrawableTile(L){const Y=this.getLayer(),oe=L.getState(),he=Y.getUseInterimTilesOnError();return oe==Wi.LOADED||oe==Wi.EMPTY||oe==Wi.ERROR&&!he}getTile(L,Y,oe,he){const Ae=he.pixelRatio,U=he.viewState.projection,F=this.getLayer();let d=F.getSource().getTile(L,Y,oe,Ae,U);return d.getState()==Wi.ERROR&&F.getUseInterimTilesOnError()&&F.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(d)||(d=d.getInterimTile()),d}getData(L){const Y=this.frameState;if(!Y)return null;const oe=this.getLayer(),he=su(Y.pixelToCoordinateTransform,L.slice()),Ae=oe.getExtent();if(Ae&&!km(Ae,he))return null;const U=Y.pixelRatio,F=Y.viewState.projection,e=Y.viewState,d=oe.getRenderSource(),S=d.getTileGridForProjection(e.projection),n=d.getTilePixelRatio(Y.pixelRatio);for(let E=S.getZForResolution(e.resolution);E>=S.getMinZoom();--E){const T=S.getTileCoordForCoordAndZ(he,E),v=d.getTile(E,T[1],T[2],U,F);if(!(v instanceof S2||v instanceof am)||v instanceof am&&v.getState()===Wi.EMPTY)return null;if(v.getState()!==Wi.LOADED)continue;const g=S.getOrigin(E),r=kl(S.getTileSize(E)),t=S.getResolution(E),o=Math.floor(n*((he[0]-g[0])/t-T[1]*r[0])),i=Math.floor(n*((g[1]-he[1])/t-T[2]*r[1])),f=Math.round(n*d.getGutterForProjection(e.projection));return this.getImageData(v.getImage(),o+f,i+f)}return null}loadedTileCallback(L,Y,oe){return this.isDrawableTile(oe)?super.loadedTileCallback(L,Y,oe):!1}prepareFrame(L){return!!this.getLayer().getSource()}renderFrame(L,Y){const oe=L.layerStatesArray[L.layerIndex],he=L.viewState,Ae=he.projection,U=he.resolution,F=he.center,e=he.rotation,d=L.pixelRatio,S=this.getLayer(),n=S.getSource(),E=n.getRevision(),T=n.getTileGridForProjection(Ae),v=T.getZForResolution(U,n.zDirection),g=T.getResolution(v);let r=L.extent;const t=L.viewState.resolution,o=n.getTilePixelRatio(d);this.prepareContainer(L,Y);const i=this.context.canvas.width,f=this.context.canvas.height,u=oe.extent&&Gv(oe.extent,Ae);u&&(r=Kd(r,Gv(oe.extent,Ae)));const l=g*i/2/o,m=g*f/2/o,h=[F[0]-l,F[1]-m,F[0]+l,F[1]+m],w=T.getTileRangeForExtentAndZ(r,v),c={};c[v]={};const a=this.createLoadedTileFinder(n,Ae,c),p=this.tmpExtent,x=this.tmpTileRange_;this.newTiles_=!1;const A=e?Qy(he.center,t,e,L.size):void 0;for(let b=w.minX;b<=w.maxX;++b)for(let k=w.minY;k<=w.maxY;++k){if(e&&!T.tileCoordIntersectsViewport([v,b,k],A))continue;const D=this.getTile(v,b,k,L);if(this.isDrawableTile(D)){const N=Ks(this);if(D.getState()==Wi.LOADED){c[v][D.tileCoord.toString()]=D;let B=D.inTransition(N);B&&oe.opacity!==1&&(D.endTransition(N),B=!1),!this.newTiles_&&(B||!this.renderedTiles.includes(D))&&(this.newTiles_=!0)}if(D.getAlpha(N,L.time)===1)continue}const V=T.getTileCoordChildTileRange(D.tileCoord,x,p);let O=!1;V&&(O=a(v+1,V)),O||T.forEachTileCoordParentTileRange(D.tileCoord,a,x,p)}const P=g/U*d/o,y=this.getRenderContext(L);sp(this.tempTransform,i/2,f/2,P,P,0,-i/2,-f/2),u&&this.clipUnrotated(y,L,u),n.getInterpolate()||(y.imageSmoothingEnabled=!1),this.preRender(y,L),this.renderedTiles.length=0;let C=Object.keys(c).map(Number);C.sort(ug);let M,s,_;oe.opacity===1&&(!this.containerReused||n.getOpaque(L.viewState.projection))?C=C.reverse():(M=[],s=[]);for(let b=C.length-1;b>=0;--b){const k=C[b],D=n.getTilePixelSize(k,d,Ae),O=T.getResolution(k)/g,N=D[0]*O*P,B=D[1]*O*P,z=T.getTileCoordForCoordAndZ(nv(h),k),H=T.getTileCoordExtent(z),X=su(this.tempTransform,[o*(H[0]-h[0])/g,o*(h[3]-H[3])/g]),$=o*n.getGutterForProjection(Ae),ne=c[k];for(const q in ne){const ue=ne[q],te=ue.tileCoord,J=z[1]-te[1],ie=Math.round(X[0]-(J-1)*N),K=z[2]-te[2],ee=Math.round(X[1]-(K-1)*B),le=Math.round(X[0]-J*N),j=Math.round(X[1]-K*B),Z=ie-le,fe=ee-j,re=v===k,ce=re&&ue.getAlpha(Ks(this),L.time)!==1;let xe=!1;if(!ce)if(M){_=[le,j,le+Z,j,le+Z,j+fe,le,j+fe];for(let Te=0,we=M.length;Te<we;++Te)if(v!==k&&k<s[Te]){const _e=M[Te];Ep([le,j,le+Z,j+fe],[_e[0],_e[3],_e[4],_e[7]])&&(xe||(y.save(),xe=!0),y.beginPath(),y.moveTo(_[0],_[1]),y.lineTo(_[2],_[3]),y.lineTo(_[4],_[5]),y.lineTo(_[6],_[7]),y.moveTo(_e[6],_e[7]),y.lineTo(_e[4],_e[5]),y.lineTo(_e[2],_e[3]),y.lineTo(_e[0],_e[1]),y.clip())}M.push(_),s.push(k)}else y.clearRect(le,j,Z,fe);this.drawTileImage(ue,L,le,j,Z,fe,$,re),M&&!ce?(xe&&y.restore(),this.renderedTiles.unshift(ue)):this.renderedTiles.push(ue),this.updateUsedTiles(L.usedTiles,n,ue)}}return this.renderedRevision=E,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!jy(this.renderedExtent_,h),this.renderedExtent_=h,this.renderedPixelRatio=d,this.renderedProjection=Ae,this.manageTilePyramid(L,n,T,d,Ae,r,v,S.getPreload()),this.scheduleExpireCache(L,n),this.postRender(this.context,L),oe.extent&&y.restore(),y.imageSmoothingEnabled=!0,this.container}drawTileImage(L,Y,oe,he,Ae,U,F,e){const d=this.getTileImage(L);if(!d)return;const S=this.getRenderContext(Y),n=Ks(this),E=Y.layerStatesArray[Y.layerIndex],T=E.opacity*(e?L.getAlpha(n,Y.time):1),v=T!==S.globalAlpha;v&&(S.save(),S.globalAlpha=T),S.drawImage(d,F,F,d.width-2*F,d.height-2*F,oe,he,Ae,U),v&&S.restore(),T!==E.opacity?Y.animate=!0:e&&L.endTransition(n)}getImage(){const L=this.context;return L?L.canvas:null}getTileImage(L){return L.getImage()}scheduleExpireCache(L,Y){if(Y.canExpireCache()){const oe=(function(he,Ae,U){const F=Ks(he);F in U.usedTiles&&he.expireCache(U.viewState.projection,U.usedTiles[F])}).bind(null,Y);L.postRenderFunctions.push(oe)}}updateUsedTiles(L,Y,oe){const he=Ks(Y);he in L||(L[he]={}),L[he][oe.getKey()]=!0}manageTilePyramid(L,Y,oe,he,Ae,U,F,e,d){const S=Ks(Y);S in L.wantedTiles||(L.wantedTiles[S]={});const n=L.wantedTiles[S],E=L.tileQueue,T=oe.getMinZoom(),v=L.viewState.rotation,g=v?Qy(L.viewState.center,L.viewState.resolution,v,L.size):void 0;let r=0,t,o,i,f,u,l;for(l=T;l<=F;++l)for(o=oe.getTileRangeForExtentAndZ(U,l,o),i=oe.getResolution(l),f=o.minX;f<=o.maxX;++f)for(u=o.minY;u<=o.maxY;++u)v&&!oe.tileCoordIntersectsViewport([l,f,u],g)||(F-l<=e?(++r,t=Y.getTile(l,f,u,he,Ae),t.getState()==Wi.IDLE&&(n[t.getKey()]=!0,E.isKeyQueued(t.getKey())||E.enqueue([t,S,oe.getTileCoordCenter(t.tileCoord),i])),d!==void 0&&d(t)):Y.useTile(l,f,u,Ae));Y.updateCacheSize(r,Ae)}}class Pl extends K_{constructor(L){super(L)}createRenderer(){return new s7(this)}}class l7{constructor(L){this.highWaterMark=L!==void 0?L:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(L){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(L){return this.entries_.hasOwnProperty(L)}forEach(L){let Y=this.oldest_;for(;Y;)L(Y.value_,Y.key_,this),Y=Y.newer}get(L,Y){const oe=this.entries_[L];return Wa(oe!==void 0,"Tried to get a value for a key that does not exist in the cache"),oe===this.newest_||(oe===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(oe.newer.older=oe.older,oe.older.newer=oe.newer),oe.newer=null,oe.older=this.newest_,this.newest_.newer=oe,this.newest_=oe),oe.value_}remove(L){const Y=this.entries_[L];return Wa(Y!==void 0,"Tried to get a value for a key that does not exist in the cache"),Y===this.newest_?(this.newest_=Y.older,this.newest_&&(this.newest_.newer=null)):Y===this.oldest_?(this.oldest_=Y.newer,this.oldest_&&(this.oldest_.older=null)):(Y.newer.older=Y.older,Y.older.newer=Y.newer),delete this.entries_[L],--this.count_,Y.value_}getCount(){return this.count_}getKeys(){const L=new Array(this.count_);let Y=0,oe;for(oe=this.newest_;oe;oe=oe.older)L[Y++]=oe.key_;return L}getValues(){const L=new Array(this.count_);let Y=0,oe;for(oe=this.newest_;oe;oe=oe.older)L[Y++]=oe.value_;return L}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(L){var Y;return(Y=this.entries_[L])==null?void 0:Y.value_}pop(){const L=this.oldest_;return delete this.entries_[L.key_],L.newer&&(L.newer.older=null),this.oldest_=L.newer,this.oldest_||(this.newest_=null),--this.count_,L.value_}replace(L,Y){this.get(L),this.entries_[L].value_=Y}set(L,Y){Wa(!(L in this.entries_),"Tried to set a value for a key that is used already");const oe={key_:L,newer:null,older:this.newest_,value_:Y};this.newest_?this.newest_.newer=oe:this.oldest_=oe,this.newest_=oe,this.entries_[L]=oe,++this.count_}setSize(L){this.highWaterMark=L}}function s3(G,L,Y,oe){return oe!==void 0?(oe[0]=G,oe[1]=L,oe[2]=Y,oe):[G,L,Y]}function Cg(G,L,Y){return G+"/"+L+"/"+Y}function C2(G){return Cg(G[0],G[1],G[2])}function u7(G){return G.split("/").map(Number)}function f7(G){return(G[1]<<G[0])+G[2]}function c7(G,L){const Y=G[0],oe=G[1],he=G[2];if(L.getMinZoom()>Y||Y>L.getMaxZoom())return!1;const Ae=L.getFullTileRange(Y);return Ae?Ae.containsXY(oe,he):!0}class L2 extends l7{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(L){for(;this.canExpireCache()&&!(this.peekLast().getKey()in L);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const L=this.peekFirstKey(),oe=u7(L)[0];this.forEach(he=>{he.tileCoord[0]!==oe&&(this.remove(C2(he.tileCoord)),he.release())})}}const Py={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class h7 extends oc{constructor(L){super(),this.projection=vu(L.projection),this.attributions_=l3(L.attributions),this.attributionsCollapsible_=L.attributionsCollapsible!==void 0?L.attributionsCollapsible:!0,this.loading=!1,this.state_=L.state!==void 0?L.state:"ready",this.wrapX_=L.wrapX!==void 0?L.wrapX:!1,this.interpolate_=!!L.interpolate,this.viewResolver=null,this.viewRejector=null;const Y=this;this.viewPromise_=new Promise(function(oe,he){Y.viewResolver=oe,Y.viewRejector=he})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(L){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(L){this.attributions_=l3(L),this.changed()}setState(L){this.state_=L,this.changed()}}function l3(G){return G?Array.isArray(G)?function(L){return G}:typeof G=="function"?G:function(L){return[G]}:null}const Ov=[0,0,0],Jc=5;class _2{constructor(L){this.minZoom=L.minZoom!==void 0?L.minZoom:0,this.resolutions_=L.resolutions,Wa(M8(this.resolutions_,(he,Ae)=>Ae-he),"`resolutions` must be sorted in descending order");let Y;if(!L.origins){for(let he=0,Ae=this.resolutions_.length-1;he<Ae;++he)if(!Y)Y=this.resolutions_[he]/this.resolutions_[he+1];else if(this.resolutions_[he]/this.resolutions_[he+1]!==Y){Y=void 0;break}}this.zoomFactor_=Y,this.maxZoom=this.resolutions_.length-1,this.origin_=L.origin!==void 0?L.origin:null,this.origins_=null,L.origins!==void 0&&(this.origins_=L.origins,Wa(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const oe=L.extent;oe!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=nv(oe)),Wa(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,L.tileSizes!==void 0&&(this.tileSizes_=L.tileSizes,Wa(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=L.tileSize!==void 0?L.tileSize:this.tileSizes_?null:Im,Wa(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=oe!==void 0?oe:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],L.sizes!==void 0?this.fullTileRanges_=L.sizes.map((he,Ae)=>{const U=new i1(Math.min(0,he[0]),Math.max(he[0]-1,-1),Math.min(0,he[1]),Math.max(he[1]-1,-1));if(oe){const F=this.getTileRangeForExtentAndZ(oe,Ae);U.minX=Math.max(F.minX,U.minX),U.maxX=Math.min(F.maxX,U.maxX),U.minY=Math.max(F.minY,U.minY),U.maxY=Math.min(F.maxY,U.maxY)}return U}):oe&&this.calculateTileRanges_(oe)}forEachTileCoord(L,Y,oe){const he=this.getTileRangeForExtentAndZ(L,Y);for(let Ae=he.minX,U=he.maxX;Ae<=U;++Ae)for(let F=he.minY,e=he.maxY;F<=e;++F)oe([Y,Ae,F])}forEachTileCoordParentTileRange(L,Y,oe,he){let Ae,U,F,e=null,d=L[0]-1;for(this.zoomFactor_===2?(U=L[1],F=L[2]):e=this.getTileCoordExtent(L,he);d>=this.minZoom;){if(U!==void 0&&F!==void 0?(U=Math.floor(U/2),F=Math.floor(F/2),Ae=zv(U,U,F,F,oe)):Ae=this.getTileRangeForExtentAndZ(e,d,oe),Y(d,Ae))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(L){return this.origin_?this.origin_:this.origins_[L]}getResolution(L){return this.resolutions_[L]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(L,Y,oe){if(L[0]<this.maxZoom){if(this.zoomFactor_===2){const Ae=L[1]*2,U=L[2]*2;return zv(Ae,Ae+1,U,U+1,Y)}const he=this.getTileCoordExtent(L,oe||this.tmpExtent_);return this.getTileRangeForExtentAndZ(he,L[0]+1,Y)}return null}getTileRangeForTileCoordAndZ(L,Y,oe){if(Y>this.maxZoom||Y<this.minZoom)return null;const he=L[0],Ae=L[1],U=L[2];if(Y===he)return zv(Ae,U,Ae,U,oe);if(this.zoomFactor_){const e=Math.pow(this.zoomFactor_,Y-he),d=Math.floor(Ae*e),S=Math.floor(U*e);if(Y<he)return zv(d,d,S,S,oe);const n=Math.floor(e*(Ae+1))-1,E=Math.floor(e*(U+1))-1;return zv(d,n,S,E,oe)}const F=this.getTileCoordExtent(L,this.tmpExtent_);return this.getTileRangeForExtentAndZ(F,Y,oe)}getTileRangeForExtentAndZ(L,Y,oe){this.getTileCoordForXYAndZ_(L[0],L[3],Y,!1,Ov);const he=Ov[1],Ae=Ov[2];this.getTileCoordForXYAndZ_(L[2],L[1],Y,!0,Ov);const U=Ov[1],F=Ov[2];return zv(he,U,Ae,F,oe)}getTileCoordCenter(L){const Y=this.getOrigin(L[0]),oe=this.getResolution(L[0]),he=kl(this.getTileSize(L[0]),this.tmpSize_);return[Y[0]+(L[1]+.5)*he[0]*oe,Y[1]-(L[2]+.5)*he[1]*oe]}getTileCoordExtent(L,Y){const oe=this.getOrigin(L[0]),he=this.getResolution(L[0]),Ae=kl(this.getTileSize(L[0]),this.tmpSize_),U=oe[0]+L[1]*Ae[0]*he,F=oe[1]-(L[2]+1)*Ae[1]*he,e=U+Ae[0]*he,d=F+Ae[1]*he;return id(U,F,e,d,Y)}getTileCoordForCoordAndResolution(L,Y,oe){return this.getTileCoordForXYAndResolution_(L[0],L[1],Y,!1,oe)}getTileCoordForXYAndResolution_(L,Y,oe,he,Ae){const U=this.getZForResolution(oe),F=oe/this.getResolution(U),e=this.getOrigin(U),d=kl(this.getTileSize(U),this.tmpSize_);let S=F*(L-e[0])/oe/d[0],n=F*(e[1]-Y)/oe/d[1];return he?(S=d0(S,Jc)-1,n=d0(n,Jc)-1):(S=v0(S,Jc),n=v0(n,Jc)),s3(U,S,n,Ae)}getTileCoordForXYAndZ_(L,Y,oe,he,Ae){const U=this.getOrigin(oe),F=this.getResolution(oe),e=kl(this.getTileSize(oe),this.tmpSize_);let d=(L-U[0])/F/e[0],S=(U[1]-Y)/F/e[1];return he?(d=d0(d,Jc)-1,S=d0(S,Jc)-1):(d=v0(d,Jc),S=v0(S,Jc)),s3(oe,d,S,Ae)}getTileCoordForCoordAndZ(L,Y,oe){return this.getTileCoordForXYAndZ_(L[0],L[1],Y,!1,oe)}getTileCoordResolution(L){return this.resolutions_[L[0]]}getTileSize(L){return this.tileSize_?this.tileSize_:this.tileSizes_[L]}getFullTileRange(L){return this.fullTileRanges_?this.fullTileRanges_[L]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,L):null}getZForResolution(L,Y){const oe=Rm(this.resolutions_,L,Y||0);return is(oe,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(L,Y){return qw(Y,0,Y.length,2,this.getTileCoordExtent(L))}calculateTileRanges_(L){const Y=this.resolutions_.length,oe=new Array(Y);for(let he=this.minZoom;he<Y;++he)oe[he]=this.getTileRangeForExtentAndZ(L,he);this.fullTileRanges_=oe}}function P2(G){let L=G.getDefaultTileGrid();return L||(L=g7(G),G.setDefaultTileGrid(L)),L}function v7(G,L,Y){const oe=L[0],he=G.getTileCoordCenter(L),Ae=a1(Y);if(!km(Ae,he)){const U=ao(Ae),F=Math.ceil((Ae[0]-he[0])/U);return he[0]+=U*F,G.getTileCoordForCoordAndZ(he,oe)}return L}function d7(G,L,Y,oe){oe=oe!==void 0?oe:"top-left";const he=R2(G,L,Y);return new _2({extent:G,origin:K8(G,oe),resolutions:he,tileSize:Y})}function p7(G){const L=G||{},Y=L.extent||vu("EPSG:3857").getExtent(),oe={extent:Y,minZoom:L.minZoom,tileSize:L.tileSize,resolutions:R2(Y,L.maxZoom,L.tileSize,L.maxResolution)};return new _2(oe)}function R2(G,L,Y,oe){L=L!==void 0?L:I8,Y=kl(Y!==void 0?Y:Im);const he=Dl(G),Ae=ao(G);oe=oe>0?oe:Math.max(Ae/Y[0],he/Y[1]);const U=L+1,F=new Array(U);for(let e=0;e<U;++e)F[e]=oe/Math.pow(2,e);return F}function g7(G,L,Y,oe){const he=a1(G);return d7(he,L,Y,oe)}function a1(G){G=vu(G);let L=G.getExtent();if(!L){const Y=180*Dm.degrees/G.getMetersPerUnit();L=id(-Y,-Y,Y,Y)}return L}class y7 extends h7{constructor(L){super({attributions:L.attributions,attributionsCollapsible:L.attributionsCollapsible,projection:L.projection,state:L.state,wrapX:L.wrapX,interpolate:L.interpolate}),this.on,this.once,this.un,this.opaque_=L.opaque!==void 0?L.opaque:!1,this.tilePixelRatio_=L.tilePixelRatio!==void 0?L.tilePixelRatio:1,this.tileGrid=L.tileGrid!==void 0?L.tileGrid:null;const Y=[256,256];this.tileGrid&&kl(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),Y),this.tileCache=new L2(L.cacheSize||0),this.tmpSize=[0,0],this.key_=L.key||"",this.tileOptions={transition:L.transition,interpolate:L.interpolate},this.zDirection=L.zDirection?L.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(L,Y){const oe=this.getTileCacheForProjection(L);oe&&oe.expireCache(Y)}forEachLoadedTile(L,Y,oe,he){const Ae=this.getTileCacheForProjection(L);if(!Ae)return!1;let U=!0,F,e,d;for(let S=oe.minX;S<=oe.maxX;++S)for(let n=oe.minY;n<=oe.maxY;++n)e=Cg(Y,S,n),d=!1,Ae.containsKey(e)&&(F=Ae.get(e),d=F.getState()===Wi.LOADED,d&&(d=he(F)!==!1)),d||(U=!1);return U}getGutterForProjection(L){return 0}getKey(){return this.key_}setKey(L){this.key_!==L&&(this.key_=L,this.changed())}getOpaque(L){return this.opaque_}getResolutions(L){const Y=L?this.getTileGridForProjection(L):this.tileGrid;return Y?Y.getResolutions():null}getTile(L,Y,oe,he,Ae){return Ia()}getTileGrid(){return this.tileGrid}getTileGridForProjection(L){return this.tileGrid?this.tileGrid:P2(L)}getTileCacheForProjection(L){const Y=this.getProjection();return Wa(Y===null||Bv(Y,L),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(L){return this.tilePixelRatio_}getTilePixelSize(L,Y,oe){const he=this.getTileGridForProjection(oe),Ae=this.getTilePixelRatio(Y),U=kl(he.getTileSize(L),this.tmpSize);return Ae==1?U:nL(U,Ae,this.tmpSize)}getTileCoordForTileUrlFunction(L,Y){Y=Y!==void 0?Y:this.getProjection();const oe=this.getTileGridForProjection(Y);return this.getWrapX()&&Y.isGlobal()&&(L=v7(oe,L,Y)),c7(L,oe)?L:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(L,Y){const oe=this.getTileCacheForProjection(Y);L>oe.highWaterMark&&(oe.highWaterMark=L)}useTile(L,Y,oe,he){}}class m7 extends dh{constructor(L,Y){super(L),this.tile=Y}}function x7(G,L){const Y=/\{z\}/g,oe=/\{x\}/g,he=/\{y\}/g,Ae=/\{-y\}/g;return function(U,F,e){if(U)return G.replace(Y,U[0].toString()).replace(oe,U[1].toString()).replace(he,U[2].toString()).replace(Ae,function(){const d=U[0],S=L.getFullTileRange(d);if(!S)throw new Error("The {-y} placeholder requires a tile grid with extent");return(S.getHeight()-U[2]-1).toString()})}}function b7(G,L){const Y=G.length,oe=new Array(Y);for(let he=0;he<Y;++he)oe[he]=x7(G[he],L);return w7(oe)}function w7(G){return G.length===1?G[0]:function(L,Y,oe){if(!L)return;const he=f7(L),Ae=jv(he,G.length);return G[Ae](L,Y,oe)}}function T7(G){const L=[];let Y=/\{([a-z])-([a-z])\}/.exec(G);if(Y){const oe=Y[1].charCodeAt(0),he=Y[2].charCodeAt(0);let Ae;for(Ae=oe;Ae<=he;++Ae)L.push(G.replace(Y[0],String.fromCharCode(Ae)));return L}if(Y=/\{(\d+)-(\d+)\}/.exec(G),Y){const oe=parseInt(Y[2],10);for(let he=parseInt(Y[1],10);he<=oe;he++)L.push(G.replace(Y[0],he.toString()));return L}return L.push(G),L}class o1 extends y7{constructor(L){super({attributions:L.attributions,cacheSize:L.cacheSize,opaque:L.opaque,projection:L.projection,state:L.state,tileGrid:L.tileGrid,tilePixelRatio:L.tilePixelRatio,wrapX:L.wrapX,transition:L.transition,interpolate:L.interpolate,key:L.key,attributionsCollapsible:L.attributionsCollapsible,zDirection:L.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===o1.prototype.tileUrlFunction,this.tileLoadFunction=L.tileLoadFunction,L.tileUrlFunction&&(this.tileUrlFunction=L.tileUrlFunction),this.urls=null,L.urls?this.setUrls(L.urls):L.url&&this.setUrl(L.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(L){const Y=L.target,oe=Ks(Y),he=Y.getState();let Ae;he==Wi.LOADING?(this.tileLoadingKeys_[oe]=!0,Ae=Py.TILELOADSTART):oe in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[oe],Ae=he==Wi.ERROR?Py.TILELOADERROR:he==Wi.LOADED?Py.TILELOADEND:void 0),Ae!=null&&this.dispatchEvent(new m7(Ae,Y))}setTileLoadFunction(L){this.tileCache.clear(),this.tileLoadFunction=L,this.changed()}setTileUrlFunction(L,Y){this.tileUrlFunction=L,this.tileCache.pruneExceptNewestZ(),typeof Y<"u"?this.setKey(Y):this.changed()}setUrl(L){const Y=T7(L);this.urls=Y,this.setUrls(Y)}setUrls(L){this.urls=L;const Y=L.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(b7(L,this.tileGrid),Y):this.setKey(Y)}tileUrlFunction(L,Y,oe){}useTile(L,Y,oe){const he=Cg(L,Y,oe);this.tileCache.containsKey(he)&&this.tileCache.get(he)}}class A7 extends o1{constructor(L){super({attributions:L.attributions,cacheSize:L.cacheSize,opaque:L.opaque,projection:L.projection,state:L.state,tileGrid:L.tileGrid,tileLoadFunction:L.tileLoadFunction?L.tileLoadFunction:M7,tilePixelRatio:L.tilePixelRatio,tileUrlFunction:L.tileUrlFunction,url:L.url,urls:L.urls,wrapX:L.wrapX,transition:L.transition,interpolate:L.interpolate!==void 0?L.interpolate:!0,key:L.key,attributionsCollapsible:L.attributionsCollapsible,zDirection:L.zDirection}),this.crossOrigin=L.crossOrigin!==void 0?L.crossOrigin:null,this.tileClass=L.tileClass!==void 0?L.tileClass:S2,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=L.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const L in this.tileCacheForProjection)if(this.tileCacheForProjection[L].canExpireCache())return!0;return!1}expireCache(L,Y){const oe=this.getTileCacheForProjection(L);this.tileCache.expireCache(this.tileCache==oe?Y:{});for(const he in this.tileCacheForProjection){const Ae=this.tileCacheForProjection[he];Ae.expireCache(Ae==oe?Y:{})}}getGutterForProjection(L){return this.getProjection()&&L&&!Bv(this.getProjection(),L)?0:this.getGutter()}getGutter(){return 0}getKey(){let L=super.getKey();return this.getInterpolate()||(L+=":disable-interpolation"),L}getOpaque(L){return this.getProjection()&&L&&!Bv(this.getProjection(),L)?!1:super.getOpaque(L)}getTileGridForProjection(L){const Y=this.getProjection();if(this.tileGrid&&(!Y||Bv(Y,L)))return this.tileGrid;const oe=Ks(L);return oe in this.tileGridForProjection||(this.tileGridForProjection[oe]=P2(L)),this.tileGridForProjection[oe]}getTileCacheForProjection(L){const Y=this.getProjection();if(!Y||Bv(Y,L))return this.tileCache;const oe=Ks(L);return oe in this.tileCacheForProjection||(this.tileCacheForProjection[oe]=new L2(this.tileCache.highWaterMark)),this.tileCacheForProjection[oe]}createTile_(L,Y,oe,he,Ae,U){const F=[L,Y,oe],e=this.getTileCoordForTileUrlFunction(F,Ae),d=e?this.tileUrlFunction(e,he,Ae):void 0,S=new this.tileClass(F,d!==void 0?Wi.IDLE:Wi.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return S.key=U,S.addEventListener(da.CHANGE,this.handleTileChange.bind(this)),S}getTile(L,Y,oe,he,Ae){const U=this.getProjection();if(!U||!Ae||Bv(U,Ae))return this.getTileInternal(L,Y,oe,he,U||Ae);const F=this.getTileCacheForProjection(Ae),e=[L,Y,oe];let d;const S=C2(e);F.containsKey(S)&&(d=F.get(S));const n=this.getKey();if(d&&d.key==n)return d;const E=this.getTileGridForProjection(U),T=this.getTileGridForProjection(Ae),v=this.getTileCoordForTileUrlFunction(e,Ae),g=new am(U,E,Ae,T,e,v,this.getTilePixelRatio(he),this.getGutter(),(r,t,o,i)=>this.getTileInternal(r,t,o,i,U),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=n,d?(g.interimTile=d,g.refreshInterimChain(),F.replace(S,g)):F.set(S,g),g}getTileInternal(L,Y,oe,he,Ae){let U=null;const F=Cg(L,Y,oe),e=this.getKey();if(!this.tileCache.containsKey(F))U=this.createTile_(L,Y,oe,he,Ae,e),this.tileCache.set(F,U);else if(U=this.tileCache.get(F),U.key!=e){const d=U;U=this.createTile_(L,Y,oe,he,Ae,e),d.getState()==Wi.IDLE?U.interimTile=d.interimTile:U.interimTile=d,U.refreshInterimChain(),this.tileCache.replace(F,U)}return U}setRenderReprojectionEdges(L){if(this.renderReprojectionEdges_!=L){this.renderReprojectionEdges_=L;for(const Y in this.tileCacheForProjection)this.tileCacheForProjection[Y].clear();this.changed()}}setTileGridForProjection(L,Y){const oe=vu(L);if(oe){const he=Ks(oe);he in this.tileGridForProjection||(this.tileGridForProjection[he]=Y)}}clear(){super.clear();for(const L in this.tileCacheForProjection)this.tileCacheForProjection[L].clear()}}function M7(G,L){G.getImage().src=L}class Hu extends A7{constructor(L){L=L||{};const Y=L.projection!==void 0?L.projection:"EPSG:3857",oe=L.tileGrid!==void 0?L.tileGrid:p7({extent:a1(Y),maxResolution:L.maxResolution,maxZoom:L.maxZoom,minZoom:L.minZoom,tileSize:L.tileSize});super({attributions:L.attributions,cacheSize:L.cacheSize,crossOrigin:L.crossOrigin,interpolate:L.interpolate,opaque:L.opaque,projection:Y,reprojectionErrorThreshold:L.reprojectionErrorThreshold,tileGrid:oe,tileLoadFunction:L.tileLoadFunction,tilePixelRatio:L.tilePixelRatio,tileUrlFunction:L.tileUrlFunction,url:L.url,urls:L.urls,wrapX:L.wrapX!==void 0?L.wrapX:!0,transition:L.transition,attributionsCollapsible:L.attributionsCollapsible,zDirection:L.zDirection}),this.gutter_=L.gutter!==void 0?L.gutter:0}getGutter(){return this.gutter_}}const E7='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class om extends Hu{constructor(L){L=L||{};let Y;L.attributions!==void 0?Y=L.attributions:Y=[E7];const oe=L.crossOrigin!==void 0?L.crossOrigin:"anonymous",he=L.url!==void 0?L.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:Y,attributionsCollapsible:!1,cacheSize:L.cacheSize,crossOrigin:oe,interpolate:L.interpolate,maxZoom:L.maxZoom!==void 0?L.maxZoom:19,opaque:L.opaque!==void 0?L.opaque:!0,reprojectionErrorThreshold:L.reprojectionErrorThreshold,tileLoadFunction:L.tileLoadFunction,transition:L.transition,url:he,wrapX:L.wrapX,zDirection:L.zDirection})}}const S7={__name:"openlayer3",props:{viewConfig:{type:Object,required:!0},baseLayer:{type:String,required:!0}},setup(G){hC();const L=G,Y=io(null);let oe=null;const he=F=>{switch(F){case"emaps":return new Pl({source:new Hu({url:"https://wmts.nlsc.gov.tw/wmts/EMAP/default/EPSG:3857/{z}/{y}/{x}"})});case"osm":return new Pl({source:new om});case"carto-positron":return new Pl({source:new Hu({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors,  CARTO"})});case"stamen-toner":return new Pl({source:new Hu({url:"https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",attributions:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under ODbL."})});case"stamen-terrain":return new Pl({source:new Hu({url:"https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg",attributions:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under ODbL."})});case"stamen-watercolor":return new Pl({source:new Hu({url:"https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg",attributions:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under ODbL."})});case"esri-streets":return new Pl({source:new Hu({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attributions:"Tiles  Esri"})});case"esri-topo":return new Pl({source:new Hu({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attributions:"Tiles  Esri"})});case"esri-satellite":return new Pl({source:new Hu({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:"Tiles  Esri"})});case"geoportail-orthophotos":return new Pl({source:new Hu({url:"https://wxs.ign.fr/ortho/geoportail/wmts?layer=ORTHOIMAGERY.ORTHOPHOTOS&style=normal&tilematrixset=PM&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix={z}&TileCol={x}&TileRow={y}",attributions:" Geoportail France"})});case"geoportail-topo":return new Pl({source:new Hu({url:"https://wxs.ign.fr/topo/geoportail/wmts?layer=GEOGRAPHICALGRIDSYSTEMS.MAPS&style=normal&tilematrixset=PM&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix={z}&TileCol={x}&TileRow={y}",attributions:" Geoportail France"})});default:return new Pl({source:new om})}},Ae=()=>{Y.value&&(oe=new M2({target:Y.value,layers:[he(L.baseLayer)],view:new Gu(L.viewConfig)}),oe.getViewport().addEventListener("contextmenu",function(F){F.preventDefault(),console.log(oe.getEventCoordinate(F))}))},U=F=>{if(oe){const e=he(F);oe.getLayers().setAt(0,e)}};return hu(Ae),lh(()=>L.baseLayer,F=>{console.log("baseLayer changed",F),U(F)}),(F,e)=>(_a(),jo("div",{ref_key:"myMap",ref:Y,style:{width:"100%",height:"100%"}},null,512))}},C7={style:{width:"100%",height:"calc(100vh - 64px)",position:"relative"}},L7={__name:"GisMap",setup(G){const L=io("openlayer3"),Y=io([]),oe=io({}),he=io({center:[121.024,23.633],zoom:7}),Ae=io([]),U=io("emaps"),F={switchBaseMap(){U.value=U.value==="osm"?"emaps":"osm",console.log(U.value),console.log("Switch base map")},fullTaiwan(){console.log("Full Taiwan")},goToMyLocation(){console.log("Go to my location")},zoomIn(){console.log("Zoom in")},zoomOut(){console.log("Zoom out")}};return(e,d)=>(_a(),dl(bp,null,{default:rs(()=>[ii("div",C7,[L.value==="PlotlyChart"?(_a(),dl(T8,{key:0,data:Y.value,layout:oe.value,"view-config":he.value,layers:Ae.value,"map-options":e.mapOptions},null,8,["data","layout","view-config","layers","map-options"])):ic("",!0),L.value==="openlayer3"?(_a(),dl(S7,{key:1,"view-config":he.value,"base-layer":U.value},null,8,["view-config","base-layer"])):ic("",!0),Ga(m8,{onSwitchBaseMap:F.switchBaseMap,onFullTaiwan:F.fullTaiwan,onGoToMyLocation:F.goToMyLocation,onZoomIn:F.zoomIn,onZoomOut:F.zoomOut},null,8,["onSwitchBaseMap","onFullTaiwan","onGoToMyLocation","onZoomIn","onZoomOut"])])]),_:1}))}},_7=Zu(L7,[["__scopeId","data-v-e6252364"]]),P7={__name:"GisMapTest",setup(G){const L=io(null),Y=io({center:[0,0],zoom:2}),oe=io([new Pl({source:new om})]);return hu(()=>{L.value&&new M2({target:L.value,layers:oe.value,view:new Gu(Y.value)})}),(Ae,U)=>(_a(),dl(bp,null,{default:rs(()=>[ii("div",{ref_key:"olMap",ref:L,style:{width:"100%",height:"400px"}},null,512)]),_:1}))}},R7=Zu(P7,[["__scopeId","data-v-417512cb"]]),I7=ii("div",null,[ii("h1",null,"Funcion A")],-1),D7={__name:"FunctionA",setup(G){return(L,Y)=>(_a(),dl(bp,null,{default:rs(()=>[I7]),_:1}))}},k7=ii("div",null,[ii("h1",null,"Funcion B")],-1),z7={__name:"FunctionB",setup(G){return(L,Y)=>(_a(),dl(bp,null,{default:rs(()=>[k7]),_:1}))}},O7=ii("div",null,[ii("h1",null,"Funcion C")],-1),F7={__name:"FunctionC",setup(G){return(L,Y)=>(_a(),dl(bp,null,{default:rs(()=>[O7]),_:1}))}},B7=[{path:"/About",component:a8},{path:"/DashBoard",component:KS,name:"DashBoard"},{path:"/GisMap",component:_7,name:"GisMap"},{path:"/GisMapTest",component:R7,name:"GisMapTest"},{path:"/FunctionList/FunctionA",component:D7,name:"FunctionA"},{path:"/FunctionList/FunctionB",component:z7,name:"FunctionB"},{path:"/FunctionList/FunctionC",component:F7,name:"FunctionC"},{path:"/",redirect:"/About"}],N7=vE({history:VM(),routes:B7});var U7=sM(NS);const V7=mE();U7.use(V7).use(N7).mount("#app");
